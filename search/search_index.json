{"config":{"indexing":"full","jieba_dict":"dict.txt","jieba_dict_user":"user_dict.txt","lang":["en","ja"],"min_search_length":3,"prebuild_index":true,"separator":"[\\s\\-\\.]"},"docs":[{"location":"","text":"","title":"Gym"},{"location":"Cloudcomputing/test/","text":"test","title":"Test"},{"location":"DevOps/Docker/00-Docker%E5%AE%89%E8%A3%85/","text":"Docker \u00b6 docker\u662f\u4ec0\u4e48\uff1f \u00b6 Docker\u662f\u4e00\u79cd\u80fd\u591f\u8fd0\u884c\u5728windows\u3001linux\u548cMac os\u4e0a\u7684\u8f6f\u4ef6\uff0c\u7528\u4e8e\u7ba1\u7406\u521b\u5efa\u548c\u7f16\u6392\u5bb9\u5668\u3002Docker\u662f\u5728Github\u4e0a\u5f00\u53d1\u7684Moby\u5f00\u6e90\u9879\u76ee\u7684\u4e00\u90e8\u5206\u3002Docker\u516c\u53f8\uff0c\u4f4d\u4e8e\u65e7\u91d1\u5c71\uff0c\u662f\u6574\u4e2aMoby\u5f00\u6e90\u9879\u76ee\u7684\u7ef4\u62a4\u8005\u3002Docker\u516c\u53f8\u8fd8\u63d0\u4f9b\u5305\u542b\u652f\u6301\u670d\u52a1\u7684\u5546\u4e1a\u7248\u672c\u7684Docker\u3002 Docker\u7684\u5b89\u88c5 \u00b6 windows11\u5e73\u53f0\u4e0a\u7684\u5b89\u88c5\u3002 \u00b6 docker\u7f51\u7ad9 \u9009\u62e9\u9002\u5408\u7684\u5e73\u53f0\u4e0b\u8f7d\u76f8\u5e94\u7684\u5b89\u88c5\u6587\u4ef6\u3002 windows\u7248\u7684docker\u662f\u4e00\u4e2a\u793e\u533a\u7248\u672c\uff08Community Edition\uff0cCE\uff09\u7684\u5e94\u7528\uff0c\u5e76\u4e0d\u662f\u4e3a\u751f\u4ea7\u73af\u5883\u8bbe\u8ba1\u7684\u3002 \u672c\u6587\u7684\u5b89\u88c5\u73af\u5883\u4e3awindows11\u4e13\u4e1a\u7248\u3002\u8fd9\u4e5f\u662f\u7b14\u8005\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u5b89\u88c5\u5728windows11\u4e0a\u3002\u5e76\u672a\u505a\u6df1\u5165\u7684\u6d4b\u8bd5\uff0c\u7406\u8bba\u4e0awin10\u4e0a\u7684\u5b89\u88c5\u7c7b\u4f3c\u3002 \u5bf9\u4e8e\u5728windows\u5e73\u53f0\u4e0a\u5b89\u88c5Docker\u5fc5\u987b\u6ee1\u8db3\u4e00\u4e0b\u51e0\u70b9\u3002 windows\u5fc5\u987b\u662f64bit windows\u5fc5\u987b\u652f\u6301hyper-v\u548c\u5bb9\u5668\u7279\u6027 \u7535\u8111\u786c\u4ef6\u5e73\u53f0\u9700\u8981\u5f00\u542f\u865a\u62df\u5316VT-X \u9700\u8981\u786e\u8ba4\u5df2\u5728\u5728window\u5e73\u53f0\u4e0a\u5f00\u542fhyper-v\u548c\u5bb9\u5668\u7279\u6027\u3002 \u5728docker\u5b98\u65b9\u7f51\u7ad9\u4e0b\u8f7ddocker\u5b89\u88c5\u5305\u3002\u5e76\u6267\u884c\u5b89\u88c5\u8fd0\u884c\u5373\u53ef\u3002 \u5b89\u88c5\u6210\u529f\u4ee5\u540e\u5728windows\u5e73\u53f0\u4e0a\u4f7f\u7528\u7ec8\u7aef\u5de5\u5177\u8f93\u5165 docker version \u67e5\u770b\u662f\u5426\u5b89\u88c5\u6210\u529f\u3002 \u5728linux\u5e73\u53f0\u4e0a\u5b89\u88c5Docker\uff08\u4ee5Centos\u4e3a\u4f8b\uff09 \u00b6 \u5b89\u88c5docker [ root@centos-docker ~ ] # sudo yum install docker-ce docker-ce-cli containerd.io \u542f\u52a8docker [root@centos-docker ~]# sudo systemctl start docker \u6d4b\u8bd5docker\u662f\u5426\u6b63\u5e38\u5b89\u88c5 title = \"<custom title>\" [ root@centos-docker ~ ] # docker run hello-world Hello from Docker! This message shows that your installation appears to be working correctly. To generate this message, Docker took the following steps: 1 . The Docker client contacted the Docker daemon. 2 . The Docker daemon pulled the \"hello-world\" image from the Docker Hub. ( amd64 ) 3 . The Docker daemon created a new container from that image which runs the executable that produces the output you are currently reading. 4 . The Docker daemon streamed that output to the Docker client, which sent it to your terminal. To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bash Share images, automate workflows, and more with a free Docker ID: https://hub.docker.com/ For more examples and ideas, visit: https://docs.docker.com/get-started \u5728Mac os\u4e0a\u5b89\u88c5Docker \u00b6 \u4e0b\u8f7dDocker\u5e94\u7528 graph LR A[Start] --> B{Error?}; B -->|Yes| C[Hmm...]; C --> D[Debug]; D --> B; B ---->|No| E[Yay!]; - [ ] - [x] - [x] Lorem ipsum dolor sit amet, consectetur adipiscing elit - [ ] Vestibulum convallis sit amet nisi a tincidunt * [x] In hac habitasse platea dictumst * [x] In scelerisque nibh non dolor mollis congue sed et metus * [ ] Praesent sed risus massa - [ ] Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque #!/usr/bin/python # -*- coding: UTF-8 -*- for i in range ( 1 , 5 ): for j in range ( 1 , 5 ): for k in range ( 1 , 5 ): if ( i != k ) and ( i != j ) and ( j != k ): print ( i , j , k )","title":"Docker"},{"location":"DevOps/Docker/00-Docker%E5%AE%89%E8%A3%85/#docker","text":"","title":"Docker"},{"location":"DevOps/Docker/00-Docker%E5%AE%89%E8%A3%85/#docker_1","text":"Docker\u662f\u4e00\u79cd\u80fd\u591f\u8fd0\u884c\u5728windows\u3001linux\u548cMac os\u4e0a\u7684\u8f6f\u4ef6\uff0c\u7528\u4e8e\u7ba1\u7406\u521b\u5efa\u548c\u7f16\u6392\u5bb9\u5668\u3002Docker\u662f\u5728Github\u4e0a\u5f00\u53d1\u7684Moby\u5f00\u6e90\u9879\u76ee\u7684\u4e00\u90e8\u5206\u3002Docker\u516c\u53f8\uff0c\u4f4d\u4e8e\u65e7\u91d1\u5c71\uff0c\u662f\u6574\u4e2aMoby\u5f00\u6e90\u9879\u76ee\u7684\u7ef4\u62a4\u8005\u3002Docker\u516c\u53f8\u8fd8\u63d0\u4f9b\u5305\u542b\u652f\u6301\u670d\u52a1\u7684\u5546\u4e1a\u7248\u672c\u7684Docker\u3002","title":"docker\u662f\u4ec0\u4e48\uff1f"},{"location":"DevOps/Docker/00-Docker%E5%AE%89%E8%A3%85/#docker_2","text":"","title":"Docker\u7684\u5b89\u88c5"},{"location":"DevOps/Docker/00-Docker%E5%AE%89%E8%A3%85/#windows11","text":"docker\u7f51\u7ad9 \u9009\u62e9\u9002\u5408\u7684\u5e73\u53f0\u4e0b\u8f7d\u76f8\u5e94\u7684\u5b89\u88c5\u6587\u4ef6\u3002 windows\u7248\u7684docker\u662f\u4e00\u4e2a\u793e\u533a\u7248\u672c\uff08Community Edition\uff0cCE\uff09\u7684\u5e94\u7528\uff0c\u5e76\u4e0d\u662f\u4e3a\u751f\u4ea7\u73af\u5883\u8bbe\u8ba1\u7684\u3002 \u672c\u6587\u7684\u5b89\u88c5\u73af\u5883\u4e3awindows11\u4e13\u4e1a\u7248\u3002\u8fd9\u4e5f\u662f\u7b14\u8005\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u5b89\u88c5\u5728windows11\u4e0a\u3002\u5e76\u672a\u505a\u6df1\u5165\u7684\u6d4b\u8bd5\uff0c\u7406\u8bba\u4e0awin10\u4e0a\u7684\u5b89\u88c5\u7c7b\u4f3c\u3002 \u5bf9\u4e8e\u5728windows\u5e73\u53f0\u4e0a\u5b89\u88c5Docker\u5fc5\u987b\u6ee1\u8db3\u4e00\u4e0b\u51e0\u70b9\u3002 windows\u5fc5\u987b\u662f64bit windows\u5fc5\u987b\u652f\u6301hyper-v\u548c\u5bb9\u5668\u7279\u6027 \u7535\u8111\u786c\u4ef6\u5e73\u53f0\u9700\u8981\u5f00\u542f\u865a\u62df\u5316VT-X \u9700\u8981\u786e\u8ba4\u5df2\u5728\u5728window\u5e73\u53f0\u4e0a\u5f00\u542fhyper-v\u548c\u5bb9\u5668\u7279\u6027\u3002 \u5728docker\u5b98\u65b9\u7f51\u7ad9\u4e0b\u8f7ddocker\u5b89\u88c5\u5305\u3002\u5e76\u6267\u884c\u5b89\u88c5\u8fd0\u884c\u5373\u53ef\u3002 \u5b89\u88c5\u6210\u529f\u4ee5\u540e\u5728windows\u5e73\u53f0\u4e0a\u4f7f\u7528\u7ec8\u7aef\u5de5\u5177\u8f93\u5165 docker version \u67e5\u770b\u662f\u5426\u5b89\u88c5\u6210\u529f\u3002","title":"windows11\u5e73\u53f0\u4e0a\u7684\u5b89\u88c5\u3002"},{"location":"DevOps/Docker/00-Docker%E5%AE%89%E8%A3%85/#linuxdockercentos","text":"\u5b89\u88c5docker [ root@centos-docker ~ ] # sudo yum install docker-ce docker-ce-cli containerd.io \u542f\u52a8docker [root@centos-docker ~]# sudo systemctl start docker \u6d4b\u8bd5docker\u662f\u5426\u6b63\u5e38\u5b89\u88c5 title = \"<custom title>\" [ root@centos-docker ~ ] # docker run hello-world Hello from Docker! This message shows that your installation appears to be working correctly. To generate this message, Docker took the following steps: 1 . The Docker client contacted the Docker daemon. 2 . The Docker daemon pulled the \"hello-world\" image from the Docker Hub. ( amd64 ) 3 . The Docker daemon created a new container from that image which runs the executable that produces the output you are currently reading. 4 . The Docker daemon streamed that output to the Docker client, which sent it to your terminal. To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bash Share images, automate workflows, and more with a free Docker ID: https://hub.docker.com/ For more examples and ideas, visit: https://docs.docker.com/get-started","title":"\u5728linux\u5e73\u53f0\u4e0a\u5b89\u88c5Docker\uff08\u4ee5Centos\u4e3a\u4f8b\uff09"},{"location":"DevOps/Docker/00-Docker%E5%AE%89%E8%A3%85/#mac-osdocker","text":"\u4e0b\u8f7dDocker\u5e94\u7528 graph LR A[Start] --> B{Error?}; B -->|Yes| C[Hmm...]; C --> D[Debug]; D --> B; B ---->|No| E[Yay!]; - [ ] - [x] - [x] Lorem ipsum dolor sit amet, consectetur adipiscing elit - [ ] Vestibulum convallis sit amet nisi a tincidunt * [x] In hac habitasse platea dictumst * [x] In scelerisque nibh non dolor mollis congue sed et metus * [ ] Praesent sed risus massa - [ ] Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque #!/usr/bin/python # -*- coding: UTF-8 -*- for i in range ( 1 , 5 ): for j in range ( 1 , 5 ): for k in range ( 1 , 5 ): if ( i != k ) and ( i != j ) and ( j != k ): print ( i , j , k )","title":"\u5728Mac os\u4e0a\u5b89\u88c5Docker"},{"location":"DevOps/Docker/01-docker%E5%8D%87%E7%BA%A7/","text":"docker \u5347\u7ea7\u6559\u7a0b \u00b6 1.docker\u5347\u7ea7\u7684\u51c6\u5907\u5de5\u4f5c \u00b6 1.\u505c\u6b62Docker\u7684\u5b88\u62a4\u8fdb\u7a0b 2.\u79fb\u9664\u65e7\u7248\u672c\u7684Docker 3.\u5b89\u88c5\u65b0\u7248\u672c\u7684Docker 4.\u914d\u7f6e\u65b0\u7248\u672c\u7684Docker\u4e3a\u5f00\u673a\u81ea\u52a8\u542f\u52a8 5.\u786e\u4fdd\u5bb9\u5668\u91cd\u542f\u6210\u529f \u4ee5Centos7\u4e3a\u4f8b \u5c06Centos7\u4e0a\u7684Docker\u4ece17.03.0\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002 1.\u67e5\u770b\u5f53\u524d\u7684Docker\u7248\u672c # docker version 2.\u79fb\u9664\u65e7\u7248\u672c\u7684Docker # yum remove docker docker-engine docker-ce docker.io -y 3.\u5347\u7ea7centos\u7684\u8f6f\u4ef6\u5305 # yum update 3.\u4f7f\u7528\u811a\u672c\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684Docker # wget -qO- https://get.docker.com/ | sh 4.\u7b49\u5f85\u5347\u7ea7\u5b8c\u6210\u67e5\u770b\u5f53\u524d\u7684docker\u7248\u672c # docker version 5.\u5c06docker\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u52a8\u542f\u52a8 # systemctl start docker # systemctl enable docker 6.\u67e5\u770b\u5f53\u524d\u7684docker\u7248\u672c # docker version","title":"docker \u5347\u7ea7\u6559\u7a0b"},{"location":"DevOps/Docker/01-docker%E5%8D%87%E7%BA%A7/#docker","text":"","title":"docker \u5347\u7ea7\u6559\u7a0b"},{"location":"DevOps/Docker/01-docker%E5%8D%87%E7%BA%A7/#1docker","text":"1.\u505c\u6b62Docker\u7684\u5b88\u62a4\u8fdb\u7a0b 2.\u79fb\u9664\u65e7\u7248\u672c\u7684Docker 3.\u5b89\u88c5\u65b0\u7248\u672c\u7684Docker 4.\u914d\u7f6e\u65b0\u7248\u672c\u7684Docker\u4e3a\u5f00\u673a\u81ea\u52a8\u542f\u52a8 5.\u786e\u4fdd\u5bb9\u5668\u91cd\u542f\u6210\u529f \u4ee5Centos7\u4e3a\u4f8b \u5c06Centos7\u4e0a\u7684Docker\u4ece17.03.0\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002 1.\u67e5\u770b\u5f53\u524d\u7684Docker\u7248\u672c # docker version 2.\u79fb\u9664\u65e7\u7248\u672c\u7684Docker # yum remove docker docker-engine docker-ce docker.io -y 3.\u5347\u7ea7centos\u7684\u8f6f\u4ef6\u5305 # yum update 3.\u4f7f\u7528\u811a\u672c\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684Docker # wget -qO- https://get.docker.com/ | sh 4.\u7b49\u5f85\u5347\u7ea7\u5b8c\u6210\u67e5\u770b\u5f53\u524d\u7684docker\u7248\u672c # docker version 5.\u5c06docker\u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u52a8\u542f\u52a8 # systemctl start docker # systemctl enable docker 6.\u67e5\u770b\u5f53\u524d\u7684docker\u7248\u672c # docker version","title":"1.docker\u5347\u7ea7\u7684\u51c6\u5907\u5de5\u4f5c"},{"location":"DevOps/Docker/02-Docker%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/","text":"02-Docker\u4e2d\u7684\u51e0\u4e2a\u57fa\u672c\u6982\u5ff5 \u00b6 1.\u955c\u50cf \u00b6 Docker\u7684\u955c\u50cf\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u5305\u542b\u4e86os\u6587\u4ef6\u7cfb\u7edf\u548c\u5e94\u7528\u7684\u5bf9\u8c61\u3002\u5982\u679c\u4f60\u4f7f\u7528\u8fc7\u4e00\u4e9b\u865a\u62df\u5316\u8f6f\u4ef6\u6bd4\u5982vmware\u516c\u53f8\u7684vspher\u4ea7\u54c1\u6216\u8005\u662f\u534e\u4e3a\u7684fusioncompute\u7b49\u7b49\uff0c\u5b9e\u9645\u4e0a\u7684Docker\u955c\u50cf\u4e0e\u8fd9\u79cd\u865a\u62df\u5316\u5e73\u53f0\u6240\u63d0\u4f9b\u6216\u8005\u5236\u4f5c\u7684\u865a\u62df\u673a\u6a21\u677f\u662f\u975e\u5e38\u7c7b\u4f3c\u7684\u3002\u9996\u5148\u6211\u4eec\u8fd8\u662f\u4ece\u865a\u62df\u673a\u6a21\u677f\u8bb2\u8d77\uff0c\u865a\u62df\u673a\u7684\u6a21\u677f\u662f\u53ea\u8bfb\u7684\uff0c\u6a21\u677f\u672c\u8d28\u662f\u5904\u4e8e\u672a\u8fd0\u884c\u72b6\u6001\u7684\u865a\u62df\u673a\u3002\u5728Docker\u7684\u6982\u5ff5\u4e2d\u955c\u50cf\u4e16\u754c\u4e0a\u76f8\u5f53\u4e8e\u4e3a\u8fd0\u884c\u7684\u5bb9\u5668\u3002\u5982\u679c\u4f60\u6709\u4e00\u5b9a\u7684\u5f00\u53d1\u7ecf\u9a8c\u53ef\u4ee5\u5c06Docker\u4e2d\u7684\u955c\u50cf\u7406\u89e3\u4e3aclass\uff08\u53ea\u8bfb\u7c7b\uff09\uff0c\u8fd0\u884c\u4e2d\u7684\u955c\u50cf\u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u5b9e\u4f8b\u3002 \u200b \u955c\u50cf\u5305\u542b\u4e86\u57fa\u7840\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4ee5\u53ca\u5185\u90e8\u7a0b\u5e8f\u6240\u8fd0\u884c\u6240\u5fc5\u987b\u7684\u4ee3\u7801\u548c\u4f9d\u8d56\u5305\u3002Docker\u4e2d\u7684\u6bcf\u4e2a\u955c\u50cf\u90fd\u6709\u81ea\u5df1\u552f\u4e00\u7684ID\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u5f15\u7528\u955c\u50cf\u7684ID\u6216\u8005\u540d\u79f0\u4f7f\u7528\u955c\u50cf\u6216\u8005\u5bf9\u955c\u50cf\u6267\u884c\u4e00\u4e9b\u5217\u7684\u64cd\u4f5c\u3002\u5982\u679c\u4f60\u9700\u8981\u4f7f\u7528\u955c\u50cf\u901a\u5e38\u60c5\u51b5\u4e0b\u53ea\u9700\u8981\u8f93\u5165ID\u5f00\u5934\u7684\u51e0\u4e2a\u5b57\u7b26\u5373\u53ef\u2014\u2014\u56e0\u4e3aID\u662f\u552f\u4e00\u7684\uff0cDocker\u4f1a\u81ea\u52a8\u5339\u914d\u7528\u6237\u60f3\u5f15\u7528\u7684\u955c\u50cf\u3002 \u955c\u50cf\u76f8\u5173\u7684\u64cd\u4f5c \u00b6 1.\u67e5\u770b\u672c\u673a\u4e0a\u7684\u955c\u50cf # docker image ls 2.\u4eceDockerhub\u62c9\u53d6\u955c\u50cf # docker image pull ruby 2.\u5bb9\u5668 \u00b6 \u524d\u9762\u5df2\u7ecf\u8bf4\u660e\u4e86\u955c\u50cf\u548c\u5bb9\u5668\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u955c\u50cf\u7c7b\u6bd4\u6210\u865a\u62df\u673a\u4e2d\u7684\u6a21\u677f\uff0c\u6216\u8005\u5f00\u53d1\u4e2d\u7684\u4e00\u4e2a\u53ea\u8bfb\u7c7b\u3002\u5bb9\u5668\u5c31\u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684\u865a\u62df\u673a\u5b9e\u4f8b\u6216\u8005\u662f\u7c7b\u7684\u4e00\u4e2a\u5b9e\u4f8b\u3002 1.\u5728Linux\u4e2d\u542f\u52a8\u5bb9\u5668\u7684\u547d\u4ee4\u5982\u4e0b # docker container run -it ubuntu:latest /bin/bash docker container run \u544a\u8bc9Docker Daemon\u542f\u52a8\u65b0\u7684\u5bb9\u5668\u3002\u5176\u4e2d-it\u53c2\u6570\u544a\u8bc9Docker\u5f00\u542f\u5bb9\u5668\u7684\u4ea4\u4e92\u6a21\u5f0f\u5e76\u5c06\u5f53\u524d\u7684shell\u8fde\u63a5\u5230\u5bb9\u5668\u7ec8\u7aef\u3002\u63a5\u4e0b\u6765\uff0c\u7528\u6237\u60f3\u6839\u636eubuntu:latest\u955c\u50cf\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5bb9\u5668\u3002\u5982\u679c\u8fd9\u4e2a\u955c\u50cf\u5728\u672c\u5730\u7684\u8bdddocker\u4f1a\u4f7f\u7528\u672c\u5730\u7684\u955c\u50cf\u542f\u52a8\u8be5\u5bb9\u5668\uff0c\u5982\u679c\u4e0d\u5728\u672c\u5730\uff0cdocker\u4f1a\u81ea\u52a8\u901a\u8fc7\u7f51\u7edc\u4e0b\u8f7dubuntu:latest\u955c\u50cf\u5e76\u542f\u52a8\u8fdb\u7a0b\u3002\u4e0b\u6b21\u5728\u901a\u8fc7ubuntu:latest\u955c\u50cf\u542f\u52a8\u5bb9\u5668\u5c31\u4f1a\u5728\u672c\u5730\u542f\u52a8\u3002 2.\u5728\u5bb9\u5668\u5185\u8fd0\u884cps -elf\u67e5\u770b\u5f53\u524d\u6240\u5728\u7684\u5bb9\u5668\u4e2d\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u8fdb\u7a0b\u3002 \u5728\u8be5\u5bb9\u5668\u4e2d\u6709\u4e24\u4e2a\u8fdb\u7a0bPID1\uff1a /bin/bash\u8fdb\u7a0b\u3002\u8fd9\u4e2a\u8fdb\u7a0b\u662fdocker container run \u547d\u4ee4\u6765\u901a\u77e5\u5bb9\u5668\u8fd0\u884c\u7684\u3002 PID10\uff1a\u4ee3\u8868\u7684\u662fps -elf\u8fdb\u7a0b\u3002\u8fd9\u4e2a\u8fdb\u7a0b\u5b9e\u9645\u4e0a\u5728ps -elf\u9000\u51fa\u540e\u8fd9\u4e2a\u8fdb\u7a0b\u5c31\u4f1a\u6d88\u5931\u3002\u4e5f\u5c31\u662f\u8bf4\u5728\u8fd9\u4e2a\u5bb9\u5668\u4e2d\u957f\u671f\u7684\u5b58\u5728\u7684\u8fdb\u7a0b\u53ea\u6709\u4e00\u4e2a\u5c31\u662f/bin/bash\u8fdb\u7a0b\u3002 3.\u4ece\u5bb9\u5668\u4e2d\u9000\u51fa\uff0c\u4f46\u662f\u4e0d\u9500\u6bc1\u5bb9\u5668\u3002\u4fdd\u6301\u5bb9\u5668\u7684\u6b63\u5e38\u8fd0\u884c\u3002 \u200b \u4f7f\u7528ctrl + p + q 4.\u663e\u793a\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668 # docker container ls 5.\u8fde\u63a5\u5230\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u4e2d\u53bb # docker container exec -it competent_johnson bash \u5728\u672c\u6b21\u6f14\u793a\u4e2d\u5bb9\u5668\u5b9e\u4f8b\u7684\u540d\u79f0\u4e3acompetent_johnson\u8fd9\u5e76\u4e0d\u662f\u4eba\u4e3a\u521b\u5efa\u7684\u800c\u662f\u7531docker\u81ea\u52a8\u751f\u4ea7\u7684\uff0c\u7528\u6237\u6bcf\u4f7f\u7528docker\u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\u8fdb\u7a0b\u5c31\u4f1a\u81ea\u52a8\u4e3a\u8be5\u5bb9\u5668\u5b9e\u4f8b\u521b\u5efa\u4e00\u4e2a\u540d\u79f0\u3002 6.\u5bb9\u5668\u7684\u505c\u6b62 \u200b \u73b0\u5728\u6709\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u3002 \u505c\u6b62\u5bb9\u5668 # docker container stop competent_johnson \u6211\u5728\u6b64\u6f14\u793a\u505c\u6b62\u5bb9\u5668\u4f7f\u7528\u7684\u662f\u5bb9\u5668\u7684\u540d\u79f0\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528docker\u7684ID\u505c\u6b62\u76f8\u5e94\u5bb9\u5668\u3002\u5728\u6b64\u6211\u4e0d\u505a\u6f14\u793a\u3002 7.\u5bb9\u5668\u7684\u5220\u9664(\u4f7f\u7528ID) # docker container rm 4c8686374687 8.\u5217\u51fa\u6240\u6709\u7684\u5bb9\u5668 \u200b \u8fd9\u4e00\u6b65\u7684\u76ee\u7684\u662f\u786e\u8ba4\u4e0b\u955c\u50cf\u5df2\u7ecf\u88ab\u5b8c\u5168\u5220\u9664\u3002\u5176\u4e2d-a\u53c2\u6570\u7684\u4f5c\u7528\u662f\u5b9e\u73b0\u8ba9Docker\u5217\u51fa\u6240\u6709\u7684\u5bb9\u5668\uff0c\u5305\u62ec\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668\u3002 # docker container ls -a","title":"02-Docker\u4e2d\u7684\u51e0\u4e2a\u57fa\u672c\u6982\u5ff5"},{"location":"DevOps/Docker/02-Docker%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#02-docker","text":"","title":"02-Docker\u4e2d\u7684\u51e0\u4e2a\u57fa\u672c\u6982\u5ff5"},{"location":"DevOps/Docker/02-Docker%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#1","text":"Docker\u7684\u955c\u50cf\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u5305\u542b\u4e86os\u6587\u4ef6\u7cfb\u7edf\u548c\u5e94\u7528\u7684\u5bf9\u8c61\u3002\u5982\u679c\u4f60\u4f7f\u7528\u8fc7\u4e00\u4e9b\u865a\u62df\u5316\u8f6f\u4ef6\u6bd4\u5982vmware\u516c\u53f8\u7684vspher\u4ea7\u54c1\u6216\u8005\u662f\u534e\u4e3a\u7684fusioncompute\u7b49\u7b49\uff0c\u5b9e\u9645\u4e0a\u7684Docker\u955c\u50cf\u4e0e\u8fd9\u79cd\u865a\u62df\u5316\u5e73\u53f0\u6240\u63d0\u4f9b\u6216\u8005\u5236\u4f5c\u7684\u865a\u62df\u673a\u6a21\u677f\u662f\u975e\u5e38\u7c7b\u4f3c\u7684\u3002\u9996\u5148\u6211\u4eec\u8fd8\u662f\u4ece\u865a\u62df\u673a\u6a21\u677f\u8bb2\u8d77\uff0c\u865a\u62df\u673a\u7684\u6a21\u677f\u662f\u53ea\u8bfb\u7684\uff0c\u6a21\u677f\u672c\u8d28\u662f\u5904\u4e8e\u672a\u8fd0\u884c\u72b6\u6001\u7684\u865a\u62df\u673a\u3002\u5728Docker\u7684\u6982\u5ff5\u4e2d\u955c\u50cf\u4e16\u754c\u4e0a\u76f8\u5f53\u4e8e\u4e3a\u8fd0\u884c\u7684\u5bb9\u5668\u3002\u5982\u679c\u4f60\u6709\u4e00\u5b9a\u7684\u5f00\u53d1\u7ecf\u9a8c\u53ef\u4ee5\u5c06Docker\u4e2d\u7684\u955c\u50cf\u7406\u89e3\u4e3aclass\uff08\u53ea\u8bfb\u7c7b\uff09\uff0c\u8fd0\u884c\u4e2d\u7684\u955c\u50cf\u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u5b9e\u4f8b\u3002 \u200b \u955c\u50cf\u5305\u542b\u4e86\u57fa\u7840\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4ee5\u53ca\u5185\u90e8\u7a0b\u5e8f\u6240\u8fd0\u884c\u6240\u5fc5\u987b\u7684\u4ee3\u7801\u548c\u4f9d\u8d56\u5305\u3002Docker\u4e2d\u7684\u6bcf\u4e2a\u955c\u50cf\u90fd\u6709\u81ea\u5df1\u552f\u4e00\u7684ID\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u5f15\u7528\u955c\u50cf\u7684ID\u6216\u8005\u540d\u79f0\u4f7f\u7528\u955c\u50cf\u6216\u8005\u5bf9\u955c\u50cf\u6267\u884c\u4e00\u4e9b\u5217\u7684\u64cd\u4f5c\u3002\u5982\u679c\u4f60\u9700\u8981\u4f7f\u7528\u955c\u50cf\u901a\u5e38\u60c5\u51b5\u4e0b\u53ea\u9700\u8981\u8f93\u5165ID\u5f00\u5934\u7684\u51e0\u4e2a\u5b57\u7b26\u5373\u53ef\u2014\u2014\u56e0\u4e3aID\u662f\u552f\u4e00\u7684\uff0cDocker\u4f1a\u81ea\u52a8\u5339\u914d\u7528\u6237\u60f3\u5f15\u7528\u7684\u955c\u50cf\u3002","title":"1.\u955c\u50cf"},{"location":"DevOps/Docker/02-Docker%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#_1","text":"1.\u67e5\u770b\u672c\u673a\u4e0a\u7684\u955c\u50cf # docker image ls 2.\u4eceDockerhub\u62c9\u53d6\u955c\u50cf # docker image pull ruby","title":"\u955c\u50cf\u76f8\u5173\u7684\u64cd\u4f5c"},{"location":"DevOps/Docker/02-Docker%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#2","text":"\u524d\u9762\u5df2\u7ecf\u8bf4\u660e\u4e86\u955c\u50cf\u548c\u5bb9\u5668\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u955c\u50cf\u7c7b\u6bd4\u6210\u865a\u62df\u673a\u4e2d\u7684\u6a21\u677f\uff0c\u6216\u8005\u5f00\u53d1\u4e2d\u7684\u4e00\u4e2a\u53ea\u8bfb\u7c7b\u3002\u5bb9\u5668\u5c31\u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u8fd0\u884c\u4e2d\u7684\u865a\u62df\u673a\u5b9e\u4f8b\u6216\u8005\u662f\u7c7b\u7684\u4e00\u4e2a\u5b9e\u4f8b\u3002 1.\u5728Linux\u4e2d\u542f\u52a8\u5bb9\u5668\u7684\u547d\u4ee4\u5982\u4e0b # docker container run -it ubuntu:latest /bin/bash docker container run \u544a\u8bc9Docker Daemon\u542f\u52a8\u65b0\u7684\u5bb9\u5668\u3002\u5176\u4e2d-it\u53c2\u6570\u544a\u8bc9Docker\u5f00\u542f\u5bb9\u5668\u7684\u4ea4\u4e92\u6a21\u5f0f\u5e76\u5c06\u5f53\u524d\u7684shell\u8fde\u63a5\u5230\u5bb9\u5668\u7ec8\u7aef\u3002\u63a5\u4e0b\u6765\uff0c\u7528\u6237\u60f3\u6839\u636eubuntu:latest\u955c\u50cf\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5bb9\u5668\u3002\u5982\u679c\u8fd9\u4e2a\u955c\u50cf\u5728\u672c\u5730\u7684\u8bdddocker\u4f1a\u4f7f\u7528\u672c\u5730\u7684\u955c\u50cf\u542f\u52a8\u8be5\u5bb9\u5668\uff0c\u5982\u679c\u4e0d\u5728\u672c\u5730\uff0cdocker\u4f1a\u81ea\u52a8\u901a\u8fc7\u7f51\u7edc\u4e0b\u8f7dubuntu:latest\u955c\u50cf\u5e76\u542f\u52a8\u8fdb\u7a0b\u3002\u4e0b\u6b21\u5728\u901a\u8fc7ubuntu:latest\u955c\u50cf\u542f\u52a8\u5bb9\u5668\u5c31\u4f1a\u5728\u672c\u5730\u542f\u52a8\u3002 2.\u5728\u5bb9\u5668\u5185\u8fd0\u884cps -elf\u67e5\u770b\u5f53\u524d\u6240\u5728\u7684\u5bb9\u5668\u4e2d\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u8fdb\u7a0b\u3002 \u5728\u8be5\u5bb9\u5668\u4e2d\u6709\u4e24\u4e2a\u8fdb\u7a0bPID1\uff1a /bin/bash\u8fdb\u7a0b\u3002\u8fd9\u4e2a\u8fdb\u7a0b\u662fdocker container run \u547d\u4ee4\u6765\u901a\u77e5\u5bb9\u5668\u8fd0\u884c\u7684\u3002 PID10\uff1a\u4ee3\u8868\u7684\u662fps -elf\u8fdb\u7a0b\u3002\u8fd9\u4e2a\u8fdb\u7a0b\u5b9e\u9645\u4e0a\u5728ps -elf\u9000\u51fa\u540e\u8fd9\u4e2a\u8fdb\u7a0b\u5c31\u4f1a\u6d88\u5931\u3002\u4e5f\u5c31\u662f\u8bf4\u5728\u8fd9\u4e2a\u5bb9\u5668\u4e2d\u957f\u671f\u7684\u5b58\u5728\u7684\u8fdb\u7a0b\u53ea\u6709\u4e00\u4e2a\u5c31\u662f/bin/bash\u8fdb\u7a0b\u3002 3.\u4ece\u5bb9\u5668\u4e2d\u9000\u51fa\uff0c\u4f46\u662f\u4e0d\u9500\u6bc1\u5bb9\u5668\u3002\u4fdd\u6301\u5bb9\u5668\u7684\u6b63\u5e38\u8fd0\u884c\u3002 \u200b \u4f7f\u7528ctrl + p + q 4.\u663e\u793a\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668 # docker container ls 5.\u8fde\u63a5\u5230\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u4e2d\u53bb # docker container exec -it competent_johnson bash \u5728\u672c\u6b21\u6f14\u793a\u4e2d\u5bb9\u5668\u5b9e\u4f8b\u7684\u540d\u79f0\u4e3acompetent_johnson\u8fd9\u5e76\u4e0d\u662f\u4eba\u4e3a\u521b\u5efa\u7684\u800c\u662f\u7531docker\u81ea\u52a8\u751f\u4ea7\u7684\uff0c\u7528\u6237\u6bcf\u4f7f\u7528docker\u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\u8fdb\u7a0b\u5c31\u4f1a\u81ea\u52a8\u4e3a\u8be5\u5bb9\u5668\u5b9e\u4f8b\u521b\u5efa\u4e00\u4e2a\u540d\u79f0\u3002 6.\u5bb9\u5668\u7684\u505c\u6b62 \u200b \u73b0\u5728\u6709\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u3002 \u505c\u6b62\u5bb9\u5668 # docker container stop competent_johnson \u6211\u5728\u6b64\u6f14\u793a\u505c\u6b62\u5bb9\u5668\u4f7f\u7528\u7684\u662f\u5bb9\u5668\u7684\u540d\u79f0\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528docker\u7684ID\u505c\u6b62\u76f8\u5e94\u5bb9\u5668\u3002\u5728\u6b64\u6211\u4e0d\u505a\u6f14\u793a\u3002 7.\u5bb9\u5668\u7684\u5220\u9664(\u4f7f\u7528ID) # docker container rm 4c8686374687 8.\u5217\u51fa\u6240\u6709\u7684\u5bb9\u5668 \u200b \u8fd9\u4e00\u6b65\u7684\u76ee\u7684\u662f\u786e\u8ba4\u4e0b\u955c\u50cf\u5df2\u7ecf\u88ab\u5b8c\u5168\u5220\u9664\u3002\u5176\u4e2d-a\u53c2\u6570\u7684\u4f5c\u7528\u662f\u5b9e\u73b0\u8ba9Docker\u5217\u51fa\u6240\u6709\u7684\u5bb9\u5668\uff0c\u5305\u62ec\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668\u3002 # docker container ls -a","title":"2.\u5bb9\u5668"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/","text":"03-Docker\u955c\u50cf\u8be6\u89e3 \u00b6 \u200b Docker\u4e2d\u7684\u955c\u50cf\u5c31\u50cf\u505c\u6b62\u8fd0\u884c\u7684\u5bb9\u5668\uff08\u7c7b\uff09\u3002\u5b9e\u9645\u4e0a\u4f60\u53ef\u4ee5\u505c\u6b62\u67d0\u4e2a\u5bb9\u5668\u7684\u8fd0\u884c\u5e76\u4ece\u4e2d\u521b\u5efa\u65b0\u7684\u955c\u50cf\u3002\u5728\u8be5\u524d\u63d0\u4e0b\uff0c\u955c\u50cf\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u79cd\u6784\u5efa\u65f6\uff08build-time\uff09\u7ed3\u6784\uff0c\u800c\u5bb9\u5668\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u79cd\u8fd0\u884c\u65f6\uff08run-time\uff09\u7ed3\u6784\u3002 1.\u955c\u50cf\u548c\u5bb9\u5668 \u00b6 \u200b \u901a\u5e38\u4f7f\u7528docker container run \u548cdocker container service create\u547d\u4ee4\u4ece\u67d0\u4e2a\u955c\u50cf\u542f\u52a8\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u3002\u4e00\u65e6\u5bb9\u5668\u4ece\u955c\u50cf\u542f\u52a8\u4e4b\u540e\uff0c\u4e8c\u8005\u4e4b\u95f4\u7684\u5173\u7cfb\u5c31\u53d8\u6210\u4e86\u76f8\u4e92\u4f9d\u8d56\u7684\u5173\u7cfb\u3002\u5e76\u4e14\u5728\u955c\u50cf\u4e0a\u7684\u5bb9\u5668\u5168\u90e8\u505c\u6b62\u4e4b\u524d\uff0c\u955c\u50cf\u662f\u65e0\u6cd5\u88ab\u5220\u9664\u7684\u3002\u5c1d\u8bd5\u5220\u9664\u6b63\u5728\u88ab\u4f7f\u7528\u7684\u955c\u50cf\u4f1a\u5bfc\u81f4\u9519\u8bef\u3002 \u5982\u4e0b\uff1a \u200b \u5173\u4e8e\u955c\u50cf\u548c\u5bb9\u5668\u53ef\u4ee5\u8fd9\u4e48\u7406\u89e3\u3002\u955c\u50cf\u7531\u591a\u4e2a\u5c42\u7ec4\u6210\uff0c\u6bcf\u5c42\u53e0\u52a0\u4e4b\u540e\uff0c\u4ece\u5916\u90e8\u770b\u6765\u5c31\u5982\u4e00\u4e2a\u72ec\u7acb\u7684\u5bf9\u8c61\u3002\u955c\u50cf\u5185\u90e8\u662f\u4e00\u4e2a\u7cbe\u7b80\u7684\u64cd\u4f5c\u7cfb\u7edf\uff08OS\uff09\uff0c\u540c\u65f6\u8fd8\u5305\u542b\u5e94\u7528\u8fd0\u884c\u6240\u5fc5\u987b\u7684\u6587\u4ef6\u548c\u4f9d\u8d56\u5305\u3002\u56e0\u4e3a\u5bb9\u5668\u662f\u8bbe\u8ba1\u521d\u8877\u5c31\u662f\u5feb\u901f\u548c\u5c0f\u5de7\uff0c\u6240\u4ee5\u955c\u50cf\u901a\u5e38\u6bd4\u8f83\u5c0f\u3002\u5bb9\u5668\u76ee\u7684\u5c31\u662f\u8fd0\u884c\u5e94\u7528\u548c\u670d\u52a1\uff0c\u8fd9\u610f\u5473\u5bb9\u5668\u7684\u955c\u50cf\u4e2d\u5fc5\u987b\u5305\u542b\u5e94\u7528/\u670d\u52a1\u8fd0\u884c\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u6587\u4ef6\uff0c\u4f46\u662f\u4e0a\u9762\u8bf4\u4e86\uff0c\u5bb9\u5668\u662f\u8ffd\u6c42\u5feb\u901f\u548c\u5c0f\u5de7\u3002\u8fd9\u610f\u5473\u7740\u6784\u5efa\u955c\u50cf\u7684\u65f6\u5019\u901a\u5e38\u9700\u8981\u88c1\u51cf\u6389\u4e0d\u5fc5\u8981\u7684\u90e8\u5206\uff0c\u4fdd\u6301\u8f83\u5c0f\u7684\u4f53\u79ef\u3002 \u200b Docke\u955c\u50cf\u901a\u5e38\u53ea\u6709\u4e00\u4e2a\u7cbe\u7b80\u7684shell\uff0c\u751a\u81f3\u6ca1\u6709shell\u3002\u955c\u50cf\u4e2d\u4e0d\u5305\u542b**\u5185\u6838**\u2014\u2014\u5bb9\u5668\u90fd\u662f\u5171\u4eabDocker\u6240\u5728\u4e3b\u673a\u7684**\u5185\u6838**\u3002\u6240\u4ee5\u6709\u65f6\u4f1a\u8bf4\u5bb9\u5668\u4ec5\u5305\u542b\u5fc5\u8981\u7684\u64cd\u4f5c\u7cfb\u7edf\uff08\u901a\u5e38\u53ea\u6709\u64cd\u4f5c\u7cfb\u7edf\u6587\u4ef6\u548c\u6587\u4ef6\u7cfb\u7edf\u5bf9\u8c61\uff09\u3002 \u200b \u5bf9\u4e8e\u4e00\u4e2a\u955c\u50cf\u6765\u8bf4\u901a\u5e38\u5b83\u6709\u591a\u5c42\u3002\u6784\u6210\u4f46\u662f\u6784\u6210\u955c\u50cf\u7684\u6bcf\u4e00\u5c42\u90fd\u662f\u53ea\u8bfb\u7684\uff0c\u5f53\u8fd0\u884cdocker container run\u547d\u4ee4\u4e4b\u540e\u6839\u636e\u76f8\u5e94\u7684\u955c\u50cf\u521b\u5efa\u5bb9\u5668\u3002\u521b\u5efa\u51fa\u7684\u5bb9\u5668\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u955c\u50cf\u7684\u57fa\u7840\u4e0a\u6dfb\u52a0\u4e86\u4e00\u4e2a\u53ef\u4f9b\u8bfb\u5199\u64cd\u4f5c\u7684\u5c42\u3002\u8fd9\u6709\u70b9\u7c7b\u4f3c\u4e8eVM\u4e2d\u7684\u94fe\u63a5\u514b\u9686\u6280\u672f\u3002 2.\u62c9\u53d6\u955c\u50cf \u00b6 Linux Docker\u4e3b\u673a\u672c\u5730\u955c\u50cf\u4ed3\u5e93\u901a\u5e38\u4f4d\u4e8e/var/lib/docker/[storage-dirver],\u5728\u6b64\u5904\u7684storage-dirver\u6307\u7684\u662f\u4f7f\u7528\u7684\u5b58\u50a8\u9a71\u52a8\u7684\u7c7b\u578b\u3002\u5728\u4e0d\u540c\u7248\u672c\u7684docker\u4e2d\u4f7f\u7528\u7684\u5b58\u50a8\u9a71\u52a8\u7c7b\u578b\u5e76\u4e0d\u603b\u662f\u4e00\u81f4\u7684\u3002\u672c\u6b21\u5b89\u88c5\u7684Docker \u7248\u672c\u4e3a\uff1aDocker Version\uff1a20.10.8 Storage Driver\uff1aoverlay\u3002\u9664\u6b64\u4e4b\u5916Storage Diver\u8fd8\u6709extfs\uff0coverlay2\u7b49\u3002 \u200b \u4f8b\u5b50\uff1a \u4f7f\u7528\uff1adocker system info\u53ef\u4ee5\u67e5\u770bdocker\u7684\u4fe1\u606f,\u5176\u4e2d\u5305\u542b\u5b58\u50a8\u9a71\u52a8\u7c7b\u578b\u3002 # docker system info # cd /var/lib/docker/overlay # ll \u4e0a\u56fe\u4e2d\u84dd\u8272\u5b57\u7b26\u4e3a\u955c\u50cf\u7684Image ID # docker image ls \u503c\u5f97\u8bf4\u660e\u7684\u4e00\u70b9\u662f\uff0c\u5728\u4f7f\u7528docker image ls\u547d\u4ee4\u65f6\u3002\u663e\u793a\u51fa\u6765\u7684Image ID\u5b9e\u9645\u4e0a\u5e76\u4e0d\u662f\u5b8c\u6574\u7684Image ID\u662f\u5b9e\u9645Image ID\u7684\u6700\u540e\u51e0\u4f4d\u3002 \u62c9\u53d6\u955c\u50cf\uff1a # docker image pull node:latest 3.\u955c\u50cf\u6765\u6e90Docker Hub \u00b6 Docker\u955c\u50cf\u5b58\u50a8\u5728\u955c\u50cf\u4ed3\u5e93\u670d\u52a1\uff08Image Registry\uff09\u5f53\u4e2d\u3002Docker\u5ba2\u6237\u7aef\u7684\u955c\u50cf\u4ed3\u5e93\u670d\u52a1\u662f\u53ef\u4ee5\u914d\u7f6e\u7684\uff0c\u9ed8\u8ba4\u4f7f\u7528\u7684\u662fDocker Hub\u3002 \u200b \u955c\u50cf\u4ed3\u5e93\u670d\u52a1\u5305\u542b\u591a\u4e2a\u955c\u50cf\u4ed3\u5e93\uff08Image Registry\uff09\u3002\u540c\u6837\uff0c\u4e00\u4e2a\u955c\u50cf\u4ed3\u5e93\u4e2d\u4e5f\u4f1a\u5305\u542b\u591a\u4e2a\u955c\u50cf\u3002 4.\u955c\u50cf\u7684\u547d\u540d\u548c\u6807\u7b7e \u00b6 5.\u62c9\u53d6\u955c\u50cf \u00b6 \u200b \u53ea\u8981\u7ed9\u51fa\u955c\u50cf\u7684\u540d\u5b57\u548c\u6807\u7b7e\u5c31\u80fd\u591f\u4ece\u5b98\u65b9\u7684\u955c\u50cf\u4ed3\u5e93\u4e2d\u5b9a\u4f4d\u4e00\u4e2a\u955c\u50cf\u3002\u955c\u50cf\u7684\u540d\u5b57\u548c\u6807\u7b7e\u4e4b\u95f4\u4f7f\u7528\u7684\u7684\u662f\u201c:\u201d\u8fdb\u884c\u5206\u5272\uff0c\u4f8b\u5982\u4ece\u5b98\u65b9\u62c9\u53d6\u955c\u50cf\u65f6docker image pull\u7684\u547d\u4ee4\u683c\u5f0f\u5982\u4e0b\u3002 \u200b docker image pull [repostiory:latest] \u4ecemongo\u4ed3\u5e93\u4e2d\u62c9\u53d6\u6807\u7b7e\u4e3a3.2.0-rc1\u7684\u955c\u50cf # docker image pull mongo:3.2.0-rc1 \u6ce8\u610f\uff1a \u200b \u5982\u679c\u6ca1\u6709\u5728\u955c\u50cf\u4ed3\u5e93\u540d\u79f0\u540e\u9762\u6307\u5b9a\u5177\u4f53\u7684\u955c\u50cf\u6807\u7b7e\uff0c\u5219Docker\u4f1a\u9ed8\u8ba4\u62c9\u53d6\u6807\u7b7e\u4e3alatest\u7684\u955c\u50cf\u3002\u4f46\u662flatest\u6807\u7b7e\u662f\u4e00\u4e2a\u975e\u5f3a\u5236\u6807\u7b7e\uff0c\u4e5f\u5c31\u662f\u8bf4\u5e26\u6709latest\u6807\u7b7e\u7684\u955c\u50cf\u5e76\u4e0d\u80fd\u591f\u4fdd\u8bc1\u8be5\u955c\u50cf\u662f\u4ed3\u5e93\u4e2d\u6700\u65b0\u7684\u955c\u50cf\u3002 6.\u8fc7\u6ee4docker image ls\u7684\u8f93\u51fa \u00b6 docker\u4f7f\u7528 --filter\u53c2\u6570\u6765\u5b9e\u73b0\u5bf9docker image ls\u8f93\u51fa\u7684\u8fc7\u6ee4\u3002 \u200b \u4e0b\u9762\u7684\u5b9e\u4f8b\u4f1a\u8fd4\u56de\u672c\u5730\u955c\u50cf\u4e2d\u7684\u60ac\u865a\u955c\u50cf\u3002 # docker image ls --filter dangling=true \u60ac\u865a\u955c\u50cf\u662f\u90a3\u4e9b\u6ca1\u6709\u6807\u7b7e\u7684\u955c\u50cf\u3002\u5728\u5217\u8868\u4e2d\u5c55\u793a\u4e3a**[none]:[none]**\u3002\u901a\u5e38\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\uff0c\u662f\u56e0\u4e3a\u6784\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u955c\u50cf\uff0c\u7136\u540e\u4e3a\u8be5\u955c\u50cf\u6253\u4e86\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u6807\u7b7e\u3002 docker\u652f\u6301\u7684\u8fc7\u6ee4\u5668\uff1a dangling\uff1a\u53ef\u4ee5\u6307\u5b9atrue\u6216\u8005flase\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u60ac\u865a\u955c\u50cf\uff08true\uff09\u6216\u8005\u975e\u60ac\u865a\u955c\u50cf\uff08false\uff09\u3002 before\uff1a\u9700\u8981\u955c\u50cf\u540d\u79f0\u6216\u8005ID\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u4e4b\u524d\u88ab\u521b\u5efa\u7684\u6240\u6709\u955c\u50cf # docker image ls --filter brefore=7d0d8fa37224 since\uff1a\u4e0ebefore\u7c7b\u4f3c\uff0c\u4e0d\u8fc7\u8fd4\u56de\u7684\u662f\u6307\u5b9a\u955c\u50cf\u4e4b\u540e\u521b\u5efa\u7684\u6240\u6709\u955c\u50cf\u3002 # docker image ls --filter since=7d0d8fa37224 label\uff1a\u6839\u636e\u6807\u6ce8\uff08label\uff09\u7684\u540d\u79f0\u6216\u8005\u503c\u5bf9\u955c\u50cf\u8fdb\u884c\u8fc7\u6ee4 \u4f7f\u7528reference\u5b8c\u6210\u8fc7\u6ee4\u5e76\u4e14\u4ec5\u663e\u793a\u6807\u7b7e\u4e3alatest\u7684\u955c\u50cf # docker image ls --filter=reference=\"*:latest\" \u4f7f\u7528--formt\u53c2\u6570\u6765\u901a\u8fc7Go\u6a21\u677f\u5bf9\u8f93\u51fa\u7684\u5185\u5bb9\u8fdb\u884c\u683c\u5f0f\u5316\u3002 \u8fd4\u56de\u4e3b\u673a\u4e0a\u955c\u50cf\u5927\u5c0f # docker image ls --format \"{{.Size}}\" \u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u53ef\u4ee5\u8fd4\u56de\u5168\u90e8\u955c\u50cf\u4f46\u662f\u53ea\u663e\u793a\u4ed3\u5e93\uff0c\u6807\u7b7e\u548c\u5927\u5c0f\u4fe1\u606f\u3002 #docker image ls --format \"{{.Repository}}: {{.Tag}}: {{.Size}}\" 7.\u955c\u50cf\u68c0\u7d22 \u00b6 docker search\u547d\u4ee4\u5141\u8bb8\u901a\u8fc7CLI\u7684\u65b9\u5f0f\u641c\u7d22Docker Hub\u3002\u901a\u8fc7NAME\u8fdb\u884c\u5339\u914d\uff0c\u5e76\u57fa\u4e8e\u8fd4\u56de\u7684\u5185\u5bb9\u8fdb\u884c\u8fc7\u6ee4\u3002 # docker search ubuntu \u5b9e\u9645\u4e0aDocker search\u9ed8\u8ba4\u4f1a\u8fd4\u56de25\u6761\u7ed3\u679c\uff1b\u4f46\u662f\u6211\u5728\u4e0a\u9762\u7684\u622a\u56fe\u4e2d\u7701\u7565\u4e86\u4e00\u90e8\u5206\u3002 \u901a\u8fc7Docker\u5185\u7f6e\u7684help\u5de5\u5177\u53ef\u4ee5\u77e5\u9053\uff0cdocker search \u53ef\u4ee5\u901a\u8fc7Options\u53c2\u6570\u6765\u8fc7\u8fc7\u6ee4\u8f93\u51fa\u7684\u7ed3\u679c\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5728\u4f7f\u7528Docker search ubuntu\u8fd9\u6761\u547d\u4ee4\u65f6\u9ed8\u8ba4\u8f93\u51fa\u4e8625\u6761ubuntu\u4ed3\u5e93\u7684\u4fe1\u606f\u3002\u4f46\u662f\u8fd9\u4e9b\u4ed3\u5e93\u5e76\u4e0d\u90fd\u662f\u5b98\u65b9\u4ed3\u5e93\u3002\u5982\u679c\u4f60\u60f3\u8f93\u51fa\u7684\u7ed3\u679c\u53ea\u663e\u793a\u5b98\u65b9\u4ed3\u5e93\u90a3\u4e48\u4f60\u5c31\u53ef\u4ee5\u4f7f\u7528filter\u53c2\u6570\u5bf9\u8f93\u51fa\u7684\u7ed3\u679c\u5c3d\u5fc3\u8fc7\u6ee4\u3002 # docker search ubuntu --filter \"is-official=true\" \u524d\u9762\u8bf4\u5230Docker search\u9ed8\u8ba4\u53ea\u4f1a\u8f93\u51fa25\u6761\u7ed3\u679c\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528limit\u53c2\u6570\u6765\u589e\u52a0\u8fd4\u56de\u7684\u6761\u76ee\u6570\uff0c\u4f46\u662f\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7100\u6761\u3002 # docker search ubuntu --limit 100 8.\u955c\u50cf\u548c\u5206\u5c42 \u00b6 \u200b \u5728\u524d\u9762\u5176\u5b9e\u5df2\u7ecf\u63d0\u5230\u8fc7\u955c\u50cf\u662f\u5206\u5c42\u7684\u3002\u955c\u50cf\u662f\u7531\u4e00\u4e9b\u677e\u8026\u5408\u7684\u53ea\u8bfb\u955c\u50cf\u5c42\u7ec4\u6210\u3002 \u200b docker\u590d\u5236\u5806\u53e0\u8fd9\u4e9b\u955c\u50cf\u5c42\uff0c\u5e76\u4e14\u628a\u4ed6\u4eec\u8868\u793a\u4e3a\u5355\u4e00\u7edf\u4e00\u7684\u5bf9\u8c61\u3002 \u200b \u5c1d\u8bd5\u62c9\u53d6\u4e00\u4e2a\u955c\u50cf\u3002\u62c9\u53d6ruby\u8fd9\u4e2a\u955c\u50cf\uff0c\u4ee5Already exists\u7ed3\u5c3e\u7684\u6bcf\u4e00\u884c\u8868\u793a\u672c\u5730\u5df2\u7ecf\u5b58\u5728\u7684\u955c\u50cf\u5c42\u3002\u4ee5pull complete\u7ed3\u5c3e\u7684\u662f\u5728\u7f51\u4e0a\u62c9\u53d6\u7684\u5c42\u3002ruby\u8fd9\u4e2a\u955c\u50cf\u603b\u5171\u5305\u542b8\u4e2a\u5c42\u3002\u6bcf\u4e2a\u5c42\u90fd\u4f7f\u7528\u5c42ID\u7684\u5f62\u5f0f\u8fdb\u884c\u533a\u522b\u3002 # docker image pull ruby:latest \u67e5\u770b\u955c\u50cf\u5206\u5c42\u7684\u53e6\u4e00\u79cd\u65b9\u5f0f # docker image inspect ruby:latest \u622a\u53d6\u4e4b\u540e\u7684\u8f93\u51fa\u7ed3\u679c\u540c\u6837\u5305\u542b8\u4e2a\u5c42\uff0c\u5e76\u4e14\u5c42ID\u662f\u5b8c\u6574\u7684\u3002\u6ca1\u5c42\u90fd\u662f\u4f7f\u7528sha256\u7684\u4e09\u6563\u5217\u503c\u6765\u6807\u8bc6\u955c\u50cf\u5c42\u3002 \u200b \u6240\u6709\u7684Docker\u955c\u50cf\u90fd\u8d77\u59cb\u4e8e\u4e00\u4e2a**\u57fa\u7840\u955c\u50cf\u5c42**\uff0c\u5f53\u8fdb\u884c\u4fee\u6539\u6216\u8005\u6dfb\u52a0\u65b0\u7684\u5185\u5bb9\u65f6\uff0c\u5c31\u4f1a\u5728\u5f53\u524d\u955c\u50cf\u5c42\u4e0a\u521b\u5efa\u65b0\u7684\u955c\u50cf\u5c42\u3002 base\u955c\u50cf\u7531\u4e24\u5c42\u542b\u4e49\uff1a \u4e0d\u4f9d\u8d56\u5176\u4ed6\u955c\u50cf\uff0c\u4ecescratch\u6784\u5efa \u5176\u4ed6\u955c\u50cf\u53ef\u4ee5\u57fa\u4e8e\u57fa\u7840\u955c\u50cf\u8fdb\u884c\u6269\u5c55\u3002 \u6240\u4ee5\u80fd\u6210\u4e3a\u57fa\u7840\u955c\u50cf\u7684\u901a\u5e38\u4e3aLinux\u7684\u5404\u79cd\u53d1\u578b\u7248\u672c\u7684Docker\u955c\u50cf\uff0c\u6bd4\u5982ubuntu\uff0cDebian\uff0cCentos\u7b49\u3002base\u955c\u50cf\u63d0\u4f9b\u7684\u662f\u6700\u5c0f\u5b89\u88c5\u7684Linux\u53d1\u884c\u7248\u672c\u3002 \u200b \u6700\u65b0\u7684ubuntu\u955c\u50cf\u53ea\u670970\u591aM\u3002\u4e4b\u6240\u4ee5\u8fd9\u4e48\u5c0f\u662f\u56e0\u4e3adocker\u7684\u955c\u50cf\u5728\u8fd0\u884c\u7684\u65f6\u5019\u76f4\u63a5\u4f7f\u7528docker\u5bbf\u4e3b\u673a\u7684\u7684kernel\u3002 \u200b linux OS\u7531kernel\uff08\u5185\u6838\uff09\u548crootfs\uff08\u7528\u6237\u7a7a\u95f4\uff09\u7ec4\u6210\u3002\u4e0d\u540c\u7684linux\u53d1\u884c\u7248\u672c\u7684\u533a\u522b\u5728\u4e8erootfs\u800c\u4e0d\u662fkernel\u3002\u6bd4\u5982ubuntu\u91c7\u7528apt\u6765\u7ba1\u7406\u8f6f\u4ef6\u5305\u800ccentos\u91c7\u7528\u7684\u662fyum\u3002 \u6ce8\u610f\uff1a \u200b base\u955c\u50cf\u53ea\u662f\u7528\u6237\u7a7a\u95f4\u548c\u53d1\u884c\u7248\u4e00\u76f4\uff0ckernel\u4f7f\u7528\u7684\u662f\u5bbf\u4e3b\u673a\u7684kernel\u3002\u4f8b\u5982\u6211\u7684\u5bbf\u4e3b\u673a\u4e3acentos7\uff0ckernel\u7248\u672c\u4e3a\uff1a3.10.0-862.el7.x86_64\u3002\u800c\u5728\u5bbf\u4e3b\u673a\u4e0a\u5b89\u88c5\u7684\u6700\u65b0\u7248\u672c\u7684ubuntu\u955c\u50cf\u7684kernel\u7248\u672c\u4e5f\u662f3.10.0-862.el7.x86_64\u3002 \u200b \u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u57fa\u4e8eubuntu Linux 20.01\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u955c\u50cf\uff0c\u8fd9\u5c31\u662f\u65b0\u955c\u50cf\u7684\u7b2c\u4e00\u5c42\uff1b\u5982\u679c\u5728\u8be5\u955c\u50cf\u4e2d\u6dfb\u52a0\u4e86python\u5305\uff0c\u5c31\u4f1a\u5728\u57fa\u7840\u955c\u50cf\u4e0a\u521b\u5efa\u7b2c\u4e8c\u4e2a\u955c\u50cf\u5c42\uff1b\u5982\u679c\u7ee7\u7eed\u6dfb\u52a0\u5b89\u5168\u8865\u4e01\uff0c\u5c31\u4f1a\u521b\u5efa\u7b2c\u4e09\u4e2a\u955c\u50cf\u5c42\uff0c\u90a3\u4e48\u8be5\u955c\u50cf\u5c31\u4f1a\u5305\u542b\u4e09\u4e2a\u955c\u50cf\u5c42\u3002\u5982\u679c\u8fd9\u4e2a\u955c\u50cf\u5728\u7f51\u7edc\u4e0a\u7684\u4ed3\u5e93\u4e0a\u4f60\u5c31\u53ef\u4ee5\u5728\u4f7f\u7528docker image pull [image:tag] \u547d\u4ee4\u65f6\u67e5\u770b\u955c\u50cf\u7684\u5c42\u6570\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528docker image inspect [image:tag]\u76f4\u63a5\u67e5\u770b\u8be5\u955c\u50cf\u7684\u5c42\u7ea7\u3002 \u200b \u5728\u6dfb\u52a0\u989d\u5916\u955c\u50cf\u5c42\u7684\u540c\u65f6\uff0c\u955c\u50cf\u65f6\u949f\u4fdd\u6301\u662f\u5f53\u524d\u6240\u6709\u955c\u50cf\u5c42\u7684\u7ec4\u5408\u3002Docker\u91c7\u7528\u5b58\u50a8\u5f15\u64ce\uff08\u65b0\u7248\u672c\u91c7\u7528\u5feb\u7167\u673a\u5236\uff09\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u955c\u50cf\u5c42\u7684\u5806\u6808\uff0c\u5e76\u4fdd\u8bc1\u591a\u955c\u50cf\u5c42\u5bf9\u5916\u8868\u793a\u4e3a\u7edf\u4e00\u6587\u4ef6\u7cfb\u7edf\uff08UnionFS\uff09\u3002\u7edf\u4e00\u6587\u4ef6\u7cfb\u7edf\u662f\u4e00\u79cd\u5206\u5c42\uff0c\u8f7b\u91cf\u7ea7\u5e76\u4e14\u9ad8\u6027\u80fd\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5b83\u652f\u6301\u5bf9\u6587\u4ef6\u7cfb\u7edf\u7684\u4fee\u6539\u4f5c\u4e3a\u4e00\u6b21\u63d0\u4ea4\u6765\u4e00\u5c42\u5c42\u7684\u53e0\u52a0\uff0c\u540c\u65f6\u53ef\u4ee5\u5c06\u4e0d\u540c\u76ee\u5f55\u6302\u8f7d\u5230\u540c\u4e00\u4e2a\u865a\u62df\u673a\u6587\u4ef6\u7cfb\u7edf\u4e0b(unite several directorire into a single virtual filesystem)\uff0cUnion\u6587\u4ef6\u7cfb\u7edf\u662fDocker\u955c\u50cf\u7684\u57fa\u7840\u3002 \u200b docker\u955c\u50cf\u91c7\u7528\u5206\u5c42\u673a\u5236\u5b9e\u73b0\u4e86\u8d44\u6e90\u7684\u5171\u4eab\u3002\u5728\u524d\u9762\u62c9\u53d6ruby:latest\u955c\u50cf\u7684\u65f6\u5019\u3002\u672c\u5730\u5df2\u6709\u7684\u955c\u50cf\u5c42\u4f1a\u663e\u793aAlready exists\u3002\u7531\u6b64\u53ef\u77e5\uff0cDocker\u80fd\u591f\u81ea\u52a8\u8bc6\u522b\u8981\u62c9\u53d6\u7684\u955c\u50cf\u4e2d\uff0c\u54ea\u51e0\u5c42\u5df2\u7ecf\u5728\u672c\u5730\u5b58\u5728\uff0c\u5df2\u5b58\u5728\u7684\u955c\u50cf\u5c42\u662f\u53ef\u4ee5\u5171\u4eab\u7684\u3002 \u200b Docker\u5728linux\u4e0a\u652f\u6301\u4e86\u591a\u79cd\u5b58\u50a8\u5f15\u64ce\uff08Snapshotter\uff09\u6bcf\u4e2a\u5b58\u50a8\u5f15\u64ce\u90fd\u6709\u81ea\u5df1\u7684\u955c\u50cf\u5206\u5c42\u3001\u955c\u50cf\u5171\u4eab\u548c\u5199\u65f6\u590d\u5236\uff08COW\uff09\u6280\u672f\u7684\u5177\u4f53\u5b9e\u73b0\u3002\u4f46\u662f\u6700\u7ec8\u5b9e\u73b0\u7684\u6548\u679c\u548c\u4f53\u73b0\u8d8b\u5411\u4e00\u81f4\u3002windows\u5e73\u53f0\u4ec5\u4ec5\u652f\u6301\u4e00\u79cd\u57fa\u4e8eNTFS\u6587\u4ef6\u7cfb\u7edf\u7684\u5b58\u50a8\u5f15\u64ce\u3002 \u200b \u5173\u4e8e\u955c\u50cf\u7684Cow\u7279\u6027\u4f1a\u5728\u5bb9\u5668\u90e8\u5206\u8be6\u7ec6\u8bf4\u660e\u3002 9.\u955c\u50cf\u6563\u5217\u503c \u00b6 \u200b Docker\u4e2d\u7684\u955c\u50cf\u662f\u4e00\u4e9b\u5217\u677e\u8026\u5408\u7684\u72ec\u7acb\u5c42\u7684\u96c6\u5408\u3002 \u200b \u955c\u50cf\u672c\u4e8b\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u914d\u7f6e\u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u955c\u50cf\u5c42\u7684\u5217\u8868\u548c\u4e00\u4e9b\u5217\u7684\u5143\u6570\u636e\u4fe1\u606f\u3002 \u200b \u955c\u50cf\u5c42\u624d\u662f\u5b9e\u9645\u5b58\u50a8\u6570\u636e\u7684\u5730\u65b9\uff0c\u6bcf\u4e2a\u955c\u50cf\u5c42\u4e4b\u95f4\u662f\u5b8c\u5168\u76f8\u4e92\u72ec\u7acb\u7684\uff0c\u6240\u4ee5\u4e0d\u5b58\u5728\u955c\u50cf\u96c6\u5408\u7684\u6982\u5ff5\u3002 \u200b \u955c\u50cf\u7684\u552f\u4e00\u6807\u8bc6\u662f\u4e00\u4e2a\u52a0\u5bc6\u7684ID\uff0c\u8be5ID\u662f\u914d\u7f6e\u5bf9\u8c61\u672c\u8eab\u7684\u6563\u5217\u503c\uff0c\u6bcf\u4e2a\u955c\u50cf\u5c42\u4e5f\u6709\u4e00\u4e2a\u52a0\u5bc6\u7684ID\u53bb\u5206\uff0c\u5176\u503c\u662f\u955c\u50cf\u5c42\u672c\u8eab\u5185\u5bb9\u7684\u6563\u5217\u503c\u3002\u4e4b\u524d\u5b66\u8fc7\u4e00\u4e2a\u547d\u4ee4 docker image inspest [image:latest]\u3002\u901a\u8fc7\u8fd9\u6761\u547d\u4ee4\u53ef\u4ee5\u67e5\u770bImageID\u548c\u7ec4\u6210Image\u7684\u5404\u4e2a\u5206\u5c42\u7684ID\u3002 \u4ee5ruby:latest\u955c\u50cf\u4e3a\u4f8b # docker image inspect ruby:latest Image ID\uff1a \u5206\u5c42ID\uff1a \u5982\u679c\u8981\u4fee\u6539\u955c\u50cf\u7684\u5185\u5bb9\u6216\u8005\u662f\u5176\u4e2d\u7684\u4efb\u610f\u4e00\u5c42\u90fd\u4f1a\u5bfc\u81f4\u52a0\u5bc6\u6563\u5217\u503c\u7684\u53d8\u5316\u3002\u6240\u4ee5\u955c\u50cf\u662f\u4e0d\u53ef\u53d8\u66f4\u7684\uff0c\u6bcf\u4e00\u5c42\u955c\u50cf\u53d1\u751f\u53d8\u66f4\u90fd\u4f1a\u88ab\u5224\u522b\u3002 10.\u5220\u9664\u955c\u50cf \u00b6 \u200b \u5f53\u955c\u50cf\u4e0d\u88ab\u9700\u8981\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u5220\u9664\u955c\u50cf\u4ee5\u56de\u6536\u955c\u50cf\u6240\u5360\u7528\u7684\u7a7a\u95f4\u3002\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528docker image rm [ImageID]\u6765\u5220\u9664\u88abImageID\u6807\u8bc6\u7684\u955c\u50cf\u3002 \u200b \u5220\u9664\u64cd\u4f5c\u4f1a\u5728\u5f53\u524d\u4e3b\u673a\u4e0a\u5220\u9664\u8be5\u955c\u50cf\u7684\u4ee5\u53ca\u76f8\u5173\u7684\u955c\u50cf\u5c42\u3002\u6267\u884c\u5b8cdocker image rm [ImageID]\u4e4b\u540e\u4e0d\u80fd\u591f\u65f6\u5019docker image ls\u770b\u5230\u88ab\u5220\u9664\u7684\u955c\u50cf\u3002\u5e76\u4e14\u88ab\u5220\u9664\u7684\u955c\u50cf\u7684\u6240\u5305\u542b\u7684\u955c\u50cf\u5c42\u6570\u636e\u7684\u76ee\u5f55\u4e5f\u4f1a\u88ab\u5220\u9664\uff0c\u4f46\u662f\u5982\u679c\u88ab\u5220\u9664\u7684\u955c\u50cf\u5f53\u4e2d\u5305\u542b\u88ab\u5171\u4eab\u7684\u955c\u50cf\u5c42\u3002\u4e4b\u540e\u5f53\u5171\u4eab\u8be5\u955c\u50cf\u5c42\u6240\u6709\u7684\u955c\u50cf\u88ab\u5220\u9664\u7684\u624d\u4f1a\u88ab\u5220\u9664\u8be5\u5171\u4eab\u5c42\u3002 \u200b \u5982\u679c\u88ab\u5220\u9664\u7684\u955c\u50cf\u4e0a\u5b58\u5728\u8fd0\u884c\u72b6\u6001\u7684\u5bb9\u5668\u8be5\u955c\u50cf\u4e5f\u65e0\u6cd5\u88ab\u5220\u9664\u4f1a\u62a5\u9519\u3002\u5982\u679c\u8981\u5220\u9664\u8be5\u955c\u50cf\u9700\u8981\u5728\u5220\u9664\u955c\u50cf\u4e4b\u524d\u505c\u6b62\u6240\u6709\u4f7f\u7528\u8be5\u955c\u50cf\u7684\u5bb9\u5668\u3002 \u663e\u793a\u6240\u6709\u955c\u50cf\u7684ID # docker image ls -q \u6279\u91cf\u5220\u9664\u955c\u50cf\uff1a # docker image rm $(docker image ls -q) -f \u6279\u91cf\u505c\u6b62\u5bb9\u5668 # docker container stop $(docker container ls -q) \u5728\u6279\u91cf\u5220\u9664\u955c\u50cf\u4e4b\u524d\u53ef\u4ee5\u91c7\u7528\u6279\u91cf\u505c\u6b62\u5bb9\u5668\u4e4b\u540e\u518d\u505a\u6279\u91cf\u5220\u9664\u64cd\u4f5c\u3002 # docker container stop $(docker container ls -q) # docker image rm $(docker image ls -q) -f 11.\u955c\u50cf\u7684\u5bfc\u5165\u548c\u5bfc\u51fa \u00b6 \u955c\u50cf\u7684\u5bfc\u51fa \u00b6 # docker save -o /test/myalpine.image alpine:latest \u6216 # docker save > /test/myalpine.image alpine:latest \u955c\u50cf\u7684\u5bfc\u5165 \u00b6 # docker load -i /test/myalpine.image \u6216 # docker load < /test/myalpine.image","title":"03-Docker\u955c\u50cf\u8be6\u89e3"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#03-docker","text":"\u200b Docker\u4e2d\u7684\u955c\u50cf\u5c31\u50cf\u505c\u6b62\u8fd0\u884c\u7684\u5bb9\u5668\uff08\u7c7b\uff09\u3002\u5b9e\u9645\u4e0a\u4f60\u53ef\u4ee5\u505c\u6b62\u67d0\u4e2a\u5bb9\u5668\u7684\u8fd0\u884c\u5e76\u4ece\u4e2d\u521b\u5efa\u65b0\u7684\u955c\u50cf\u3002\u5728\u8be5\u524d\u63d0\u4e0b\uff0c\u955c\u50cf\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u79cd\u6784\u5efa\u65f6\uff08build-time\uff09\u7ed3\u6784\uff0c\u800c\u5bb9\u5668\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u79cd\u8fd0\u884c\u65f6\uff08run-time\uff09\u7ed3\u6784\u3002","title":"03-Docker\u955c\u50cf\u8be6\u89e3"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#1","text":"\u200b \u901a\u5e38\u4f7f\u7528docker container run \u548cdocker container service create\u547d\u4ee4\u4ece\u67d0\u4e2a\u955c\u50cf\u542f\u52a8\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u3002\u4e00\u65e6\u5bb9\u5668\u4ece\u955c\u50cf\u542f\u52a8\u4e4b\u540e\uff0c\u4e8c\u8005\u4e4b\u95f4\u7684\u5173\u7cfb\u5c31\u53d8\u6210\u4e86\u76f8\u4e92\u4f9d\u8d56\u7684\u5173\u7cfb\u3002\u5e76\u4e14\u5728\u955c\u50cf\u4e0a\u7684\u5bb9\u5668\u5168\u90e8\u505c\u6b62\u4e4b\u524d\uff0c\u955c\u50cf\u662f\u65e0\u6cd5\u88ab\u5220\u9664\u7684\u3002\u5c1d\u8bd5\u5220\u9664\u6b63\u5728\u88ab\u4f7f\u7528\u7684\u955c\u50cf\u4f1a\u5bfc\u81f4\u9519\u8bef\u3002 \u5982\u4e0b\uff1a \u200b \u5173\u4e8e\u955c\u50cf\u548c\u5bb9\u5668\u53ef\u4ee5\u8fd9\u4e48\u7406\u89e3\u3002\u955c\u50cf\u7531\u591a\u4e2a\u5c42\u7ec4\u6210\uff0c\u6bcf\u5c42\u53e0\u52a0\u4e4b\u540e\uff0c\u4ece\u5916\u90e8\u770b\u6765\u5c31\u5982\u4e00\u4e2a\u72ec\u7acb\u7684\u5bf9\u8c61\u3002\u955c\u50cf\u5185\u90e8\u662f\u4e00\u4e2a\u7cbe\u7b80\u7684\u64cd\u4f5c\u7cfb\u7edf\uff08OS\uff09\uff0c\u540c\u65f6\u8fd8\u5305\u542b\u5e94\u7528\u8fd0\u884c\u6240\u5fc5\u987b\u7684\u6587\u4ef6\u548c\u4f9d\u8d56\u5305\u3002\u56e0\u4e3a\u5bb9\u5668\u662f\u8bbe\u8ba1\u521d\u8877\u5c31\u662f\u5feb\u901f\u548c\u5c0f\u5de7\uff0c\u6240\u4ee5\u955c\u50cf\u901a\u5e38\u6bd4\u8f83\u5c0f\u3002\u5bb9\u5668\u76ee\u7684\u5c31\u662f\u8fd0\u884c\u5e94\u7528\u548c\u670d\u52a1\uff0c\u8fd9\u610f\u5473\u5bb9\u5668\u7684\u955c\u50cf\u4e2d\u5fc5\u987b\u5305\u542b\u5e94\u7528/\u670d\u52a1\u8fd0\u884c\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u6587\u4ef6\uff0c\u4f46\u662f\u4e0a\u9762\u8bf4\u4e86\uff0c\u5bb9\u5668\u662f\u8ffd\u6c42\u5feb\u901f\u548c\u5c0f\u5de7\u3002\u8fd9\u610f\u5473\u7740\u6784\u5efa\u955c\u50cf\u7684\u65f6\u5019\u901a\u5e38\u9700\u8981\u88c1\u51cf\u6389\u4e0d\u5fc5\u8981\u7684\u90e8\u5206\uff0c\u4fdd\u6301\u8f83\u5c0f\u7684\u4f53\u79ef\u3002 \u200b Docke\u955c\u50cf\u901a\u5e38\u53ea\u6709\u4e00\u4e2a\u7cbe\u7b80\u7684shell\uff0c\u751a\u81f3\u6ca1\u6709shell\u3002\u955c\u50cf\u4e2d\u4e0d\u5305\u542b**\u5185\u6838**\u2014\u2014\u5bb9\u5668\u90fd\u662f\u5171\u4eabDocker\u6240\u5728\u4e3b\u673a\u7684**\u5185\u6838**\u3002\u6240\u4ee5\u6709\u65f6\u4f1a\u8bf4\u5bb9\u5668\u4ec5\u5305\u542b\u5fc5\u8981\u7684\u64cd\u4f5c\u7cfb\u7edf\uff08\u901a\u5e38\u53ea\u6709\u64cd\u4f5c\u7cfb\u7edf\u6587\u4ef6\u548c\u6587\u4ef6\u7cfb\u7edf\u5bf9\u8c61\uff09\u3002 \u200b \u5bf9\u4e8e\u4e00\u4e2a\u955c\u50cf\u6765\u8bf4\u901a\u5e38\u5b83\u6709\u591a\u5c42\u3002\u6784\u6210\u4f46\u662f\u6784\u6210\u955c\u50cf\u7684\u6bcf\u4e00\u5c42\u90fd\u662f\u53ea\u8bfb\u7684\uff0c\u5f53\u8fd0\u884cdocker container run\u547d\u4ee4\u4e4b\u540e\u6839\u636e\u76f8\u5e94\u7684\u955c\u50cf\u521b\u5efa\u5bb9\u5668\u3002\u521b\u5efa\u51fa\u7684\u5bb9\u5668\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u955c\u50cf\u7684\u57fa\u7840\u4e0a\u6dfb\u52a0\u4e86\u4e00\u4e2a\u53ef\u4f9b\u8bfb\u5199\u64cd\u4f5c\u7684\u5c42\u3002\u8fd9\u6709\u70b9\u7c7b\u4f3c\u4e8eVM\u4e2d\u7684\u94fe\u63a5\u514b\u9686\u6280\u672f\u3002","title":"1.\u955c\u50cf\u548c\u5bb9\u5668"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#2","text":"Linux Docker\u4e3b\u673a\u672c\u5730\u955c\u50cf\u4ed3\u5e93\u901a\u5e38\u4f4d\u4e8e/var/lib/docker/[storage-dirver],\u5728\u6b64\u5904\u7684storage-dirver\u6307\u7684\u662f\u4f7f\u7528\u7684\u5b58\u50a8\u9a71\u52a8\u7684\u7c7b\u578b\u3002\u5728\u4e0d\u540c\u7248\u672c\u7684docker\u4e2d\u4f7f\u7528\u7684\u5b58\u50a8\u9a71\u52a8\u7c7b\u578b\u5e76\u4e0d\u603b\u662f\u4e00\u81f4\u7684\u3002\u672c\u6b21\u5b89\u88c5\u7684Docker \u7248\u672c\u4e3a\uff1aDocker Version\uff1a20.10.8 Storage Driver\uff1aoverlay\u3002\u9664\u6b64\u4e4b\u5916Storage Diver\u8fd8\u6709extfs\uff0coverlay2\u7b49\u3002 \u200b \u4f8b\u5b50\uff1a \u4f7f\u7528\uff1adocker system info\u53ef\u4ee5\u67e5\u770bdocker\u7684\u4fe1\u606f,\u5176\u4e2d\u5305\u542b\u5b58\u50a8\u9a71\u52a8\u7c7b\u578b\u3002 # docker system info # cd /var/lib/docker/overlay # ll \u4e0a\u56fe\u4e2d\u84dd\u8272\u5b57\u7b26\u4e3a\u955c\u50cf\u7684Image ID # docker image ls \u503c\u5f97\u8bf4\u660e\u7684\u4e00\u70b9\u662f\uff0c\u5728\u4f7f\u7528docker image ls\u547d\u4ee4\u65f6\u3002\u663e\u793a\u51fa\u6765\u7684Image ID\u5b9e\u9645\u4e0a\u5e76\u4e0d\u662f\u5b8c\u6574\u7684Image ID\u662f\u5b9e\u9645Image ID\u7684\u6700\u540e\u51e0\u4f4d\u3002 \u62c9\u53d6\u955c\u50cf\uff1a # docker image pull node:latest","title":"2.\u62c9\u53d6\u955c\u50cf"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#3docker-hub","text":"Docker\u955c\u50cf\u5b58\u50a8\u5728\u955c\u50cf\u4ed3\u5e93\u670d\u52a1\uff08Image Registry\uff09\u5f53\u4e2d\u3002Docker\u5ba2\u6237\u7aef\u7684\u955c\u50cf\u4ed3\u5e93\u670d\u52a1\u662f\u53ef\u4ee5\u914d\u7f6e\u7684\uff0c\u9ed8\u8ba4\u4f7f\u7528\u7684\u662fDocker Hub\u3002 \u200b \u955c\u50cf\u4ed3\u5e93\u670d\u52a1\u5305\u542b\u591a\u4e2a\u955c\u50cf\u4ed3\u5e93\uff08Image Registry\uff09\u3002\u540c\u6837\uff0c\u4e00\u4e2a\u955c\u50cf\u4ed3\u5e93\u4e2d\u4e5f\u4f1a\u5305\u542b\u591a\u4e2a\u955c\u50cf\u3002","title":"3.\u955c\u50cf\u6765\u6e90Docker Hub"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#4","text":"","title":"4.\u955c\u50cf\u7684\u547d\u540d\u548c\u6807\u7b7e"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#5","text":"\u200b \u53ea\u8981\u7ed9\u51fa\u955c\u50cf\u7684\u540d\u5b57\u548c\u6807\u7b7e\u5c31\u80fd\u591f\u4ece\u5b98\u65b9\u7684\u955c\u50cf\u4ed3\u5e93\u4e2d\u5b9a\u4f4d\u4e00\u4e2a\u955c\u50cf\u3002\u955c\u50cf\u7684\u540d\u5b57\u548c\u6807\u7b7e\u4e4b\u95f4\u4f7f\u7528\u7684\u7684\u662f\u201c:\u201d\u8fdb\u884c\u5206\u5272\uff0c\u4f8b\u5982\u4ece\u5b98\u65b9\u62c9\u53d6\u955c\u50cf\u65f6docker image pull\u7684\u547d\u4ee4\u683c\u5f0f\u5982\u4e0b\u3002 \u200b docker image pull [repostiory:latest] \u4ecemongo\u4ed3\u5e93\u4e2d\u62c9\u53d6\u6807\u7b7e\u4e3a3.2.0-rc1\u7684\u955c\u50cf # docker image pull mongo:3.2.0-rc1 \u6ce8\u610f\uff1a \u200b \u5982\u679c\u6ca1\u6709\u5728\u955c\u50cf\u4ed3\u5e93\u540d\u79f0\u540e\u9762\u6307\u5b9a\u5177\u4f53\u7684\u955c\u50cf\u6807\u7b7e\uff0c\u5219Docker\u4f1a\u9ed8\u8ba4\u62c9\u53d6\u6807\u7b7e\u4e3alatest\u7684\u955c\u50cf\u3002\u4f46\u662flatest\u6807\u7b7e\u662f\u4e00\u4e2a\u975e\u5f3a\u5236\u6807\u7b7e\uff0c\u4e5f\u5c31\u662f\u8bf4\u5e26\u6709latest\u6807\u7b7e\u7684\u955c\u50cf\u5e76\u4e0d\u80fd\u591f\u4fdd\u8bc1\u8be5\u955c\u50cf\u662f\u4ed3\u5e93\u4e2d\u6700\u65b0\u7684\u955c\u50cf\u3002","title":"5.\u62c9\u53d6\u955c\u50cf"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#6docker-image-ls","text":"docker\u4f7f\u7528 --filter\u53c2\u6570\u6765\u5b9e\u73b0\u5bf9docker image ls\u8f93\u51fa\u7684\u8fc7\u6ee4\u3002 \u200b \u4e0b\u9762\u7684\u5b9e\u4f8b\u4f1a\u8fd4\u56de\u672c\u5730\u955c\u50cf\u4e2d\u7684\u60ac\u865a\u955c\u50cf\u3002 # docker image ls --filter dangling=true \u60ac\u865a\u955c\u50cf\u662f\u90a3\u4e9b\u6ca1\u6709\u6807\u7b7e\u7684\u955c\u50cf\u3002\u5728\u5217\u8868\u4e2d\u5c55\u793a\u4e3a**[none]:[none]**\u3002\u901a\u5e38\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\uff0c\u662f\u56e0\u4e3a\u6784\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u955c\u50cf\uff0c\u7136\u540e\u4e3a\u8be5\u955c\u50cf\u6253\u4e86\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u6807\u7b7e\u3002 docker\u652f\u6301\u7684\u8fc7\u6ee4\u5668\uff1a dangling\uff1a\u53ef\u4ee5\u6307\u5b9atrue\u6216\u8005flase\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u60ac\u865a\u955c\u50cf\uff08true\uff09\u6216\u8005\u975e\u60ac\u865a\u955c\u50cf\uff08false\uff09\u3002 before\uff1a\u9700\u8981\u955c\u50cf\u540d\u79f0\u6216\u8005ID\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u4e4b\u524d\u88ab\u521b\u5efa\u7684\u6240\u6709\u955c\u50cf # docker image ls --filter brefore=7d0d8fa37224 since\uff1a\u4e0ebefore\u7c7b\u4f3c\uff0c\u4e0d\u8fc7\u8fd4\u56de\u7684\u662f\u6307\u5b9a\u955c\u50cf\u4e4b\u540e\u521b\u5efa\u7684\u6240\u6709\u955c\u50cf\u3002 # docker image ls --filter since=7d0d8fa37224 label\uff1a\u6839\u636e\u6807\u6ce8\uff08label\uff09\u7684\u540d\u79f0\u6216\u8005\u503c\u5bf9\u955c\u50cf\u8fdb\u884c\u8fc7\u6ee4 \u4f7f\u7528reference\u5b8c\u6210\u8fc7\u6ee4\u5e76\u4e14\u4ec5\u663e\u793a\u6807\u7b7e\u4e3alatest\u7684\u955c\u50cf # docker image ls --filter=reference=\"*:latest\" \u4f7f\u7528--formt\u53c2\u6570\u6765\u901a\u8fc7Go\u6a21\u677f\u5bf9\u8f93\u51fa\u7684\u5185\u5bb9\u8fdb\u884c\u683c\u5f0f\u5316\u3002 \u8fd4\u56de\u4e3b\u673a\u4e0a\u955c\u50cf\u5927\u5c0f # docker image ls --format \"{{.Size}}\" \u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u53ef\u4ee5\u8fd4\u56de\u5168\u90e8\u955c\u50cf\u4f46\u662f\u53ea\u663e\u793a\u4ed3\u5e93\uff0c\u6807\u7b7e\u548c\u5927\u5c0f\u4fe1\u606f\u3002 #docker image ls --format \"{{.Repository}}: {{.Tag}}: {{.Size}}\"","title":"6.\u8fc7\u6ee4docker image ls\u7684\u8f93\u51fa"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#7","text":"docker search\u547d\u4ee4\u5141\u8bb8\u901a\u8fc7CLI\u7684\u65b9\u5f0f\u641c\u7d22Docker Hub\u3002\u901a\u8fc7NAME\u8fdb\u884c\u5339\u914d\uff0c\u5e76\u57fa\u4e8e\u8fd4\u56de\u7684\u5185\u5bb9\u8fdb\u884c\u8fc7\u6ee4\u3002 # docker search ubuntu \u5b9e\u9645\u4e0aDocker search\u9ed8\u8ba4\u4f1a\u8fd4\u56de25\u6761\u7ed3\u679c\uff1b\u4f46\u662f\u6211\u5728\u4e0a\u9762\u7684\u622a\u56fe\u4e2d\u7701\u7565\u4e86\u4e00\u90e8\u5206\u3002 \u901a\u8fc7Docker\u5185\u7f6e\u7684help\u5de5\u5177\u53ef\u4ee5\u77e5\u9053\uff0cdocker search \u53ef\u4ee5\u901a\u8fc7Options\u53c2\u6570\u6765\u8fc7\u8fc7\u6ee4\u8f93\u51fa\u7684\u7ed3\u679c\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5728\u4f7f\u7528Docker search ubuntu\u8fd9\u6761\u547d\u4ee4\u65f6\u9ed8\u8ba4\u8f93\u51fa\u4e8625\u6761ubuntu\u4ed3\u5e93\u7684\u4fe1\u606f\u3002\u4f46\u662f\u8fd9\u4e9b\u4ed3\u5e93\u5e76\u4e0d\u90fd\u662f\u5b98\u65b9\u4ed3\u5e93\u3002\u5982\u679c\u4f60\u60f3\u8f93\u51fa\u7684\u7ed3\u679c\u53ea\u663e\u793a\u5b98\u65b9\u4ed3\u5e93\u90a3\u4e48\u4f60\u5c31\u53ef\u4ee5\u4f7f\u7528filter\u53c2\u6570\u5bf9\u8f93\u51fa\u7684\u7ed3\u679c\u5c3d\u5fc3\u8fc7\u6ee4\u3002 # docker search ubuntu --filter \"is-official=true\" \u524d\u9762\u8bf4\u5230Docker search\u9ed8\u8ba4\u53ea\u4f1a\u8f93\u51fa25\u6761\u7ed3\u679c\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528limit\u53c2\u6570\u6765\u589e\u52a0\u8fd4\u56de\u7684\u6761\u76ee\u6570\uff0c\u4f46\u662f\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7100\u6761\u3002 # docker search ubuntu --limit 100","title":"7.\u955c\u50cf\u68c0\u7d22"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#8","text":"\u200b \u5728\u524d\u9762\u5176\u5b9e\u5df2\u7ecf\u63d0\u5230\u8fc7\u955c\u50cf\u662f\u5206\u5c42\u7684\u3002\u955c\u50cf\u662f\u7531\u4e00\u4e9b\u677e\u8026\u5408\u7684\u53ea\u8bfb\u955c\u50cf\u5c42\u7ec4\u6210\u3002 \u200b docker\u590d\u5236\u5806\u53e0\u8fd9\u4e9b\u955c\u50cf\u5c42\uff0c\u5e76\u4e14\u628a\u4ed6\u4eec\u8868\u793a\u4e3a\u5355\u4e00\u7edf\u4e00\u7684\u5bf9\u8c61\u3002 \u200b \u5c1d\u8bd5\u62c9\u53d6\u4e00\u4e2a\u955c\u50cf\u3002\u62c9\u53d6ruby\u8fd9\u4e2a\u955c\u50cf\uff0c\u4ee5Already exists\u7ed3\u5c3e\u7684\u6bcf\u4e00\u884c\u8868\u793a\u672c\u5730\u5df2\u7ecf\u5b58\u5728\u7684\u955c\u50cf\u5c42\u3002\u4ee5pull complete\u7ed3\u5c3e\u7684\u662f\u5728\u7f51\u4e0a\u62c9\u53d6\u7684\u5c42\u3002ruby\u8fd9\u4e2a\u955c\u50cf\u603b\u5171\u5305\u542b8\u4e2a\u5c42\u3002\u6bcf\u4e2a\u5c42\u90fd\u4f7f\u7528\u5c42ID\u7684\u5f62\u5f0f\u8fdb\u884c\u533a\u522b\u3002 # docker image pull ruby:latest \u67e5\u770b\u955c\u50cf\u5206\u5c42\u7684\u53e6\u4e00\u79cd\u65b9\u5f0f # docker image inspect ruby:latest \u622a\u53d6\u4e4b\u540e\u7684\u8f93\u51fa\u7ed3\u679c\u540c\u6837\u5305\u542b8\u4e2a\u5c42\uff0c\u5e76\u4e14\u5c42ID\u662f\u5b8c\u6574\u7684\u3002\u6ca1\u5c42\u90fd\u662f\u4f7f\u7528sha256\u7684\u4e09\u6563\u5217\u503c\u6765\u6807\u8bc6\u955c\u50cf\u5c42\u3002 \u200b \u6240\u6709\u7684Docker\u955c\u50cf\u90fd\u8d77\u59cb\u4e8e\u4e00\u4e2a**\u57fa\u7840\u955c\u50cf\u5c42**\uff0c\u5f53\u8fdb\u884c\u4fee\u6539\u6216\u8005\u6dfb\u52a0\u65b0\u7684\u5185\u5bb9\u65f6\uff0c\u5c31\u4f1a\u5728\u5f53\u524d\u955c\u50cf\u5c42\u4e0a\u521b\u5efa\u65b0\u7684\u955c\u50cf\u5c42\u3002 base\u955c\u50cf\u7531\u4e24\u5c42\u542b\u4e49\uff1a \u4e0d\u4f9d\u8d56\u5176\u4ed6\u955c\u50cf\uff0c\u4ecescratch\u6784\u5efa \u5176\u4ed6\u955c\u50cf\u53ef\u4ee5\u57fa\u4e8e\u57fa\u7840\u955c\u50cf\u8fdb\u884c\u6269\u5c55\u3002 \u6240\u4ee5\u80fd\u6210\u4e3a\u57fa\u7840\u955c\u50cf\u7684\u901a\u5e38\u4e3aLinux\u7684\u5404\u79cd\u53d1\u578b\u7248\u672c\u7684Docker\u955c\u50cf\uff0c\u6bd4\u5982ubuntu\uff0cDebian\uff0cCentos\u7b49\u3002base\u955c\u50cf\u63d0\u4f9b\u7684\u662f\u6700\u5c0f\u5b89\u88c5\u7684Linux\u53d1\u884c\u7248\u672c\u3002 \u200b \u6700\u65b0\u7684ubuntu\u955c\u50cf\u53ea\u670970\u591aM\u3002\u4e4b\u6240\u4ee5\u8fd9\u4e48\u5c0f\u662f\u56e0\u4e3adocker\u7684\u955c\u50cf\u5728\u8fd0\u884c\u7684\u65f6\u5019\u76f4\u63a5\u4f7f\u7528docker\u5bbf\u4e3b\u673a\u7684\u7684kernel\u3002 \u200b linux OS\u7531kernel\uff08\u5185\u6838\uff09\u548crootfs\uff08\u7528\u6237\u7a7a\u95f4\uff09\u7ec4\u6210\u3002\u4e0d\u540c\u7684linux\u53d1\u884c\u7248\u672c\u7684\u533a\u522b\u5728\u4e8erootfs\u800c\u4e0d\u662fkernel\u3002\u6bd4\u5982ubuntu\u91c7\u7528apt\u6765\u7ba1\u7406\u8f6f\u4ef6\u5305\u800ccentos\u91c7\u7528\u7684\u662fyum\u3002 \u6ce8\u610f\uff1a \u200b base\u955c\u50cf\u53ea\u662f\u7528\u6237\u7a7a\u95f4\u548c\u53d1\u884c\u7248\u4e00\u76f4\uff0ckernel\u4f7f\u7528\u7684\u662f\u5bbf\u4e3b\u673a\u7684kernel\u3002\u4f8b\u5982\u6211\u7684\u5bbf\u4e3b\u673a\u4e3acentos7\uff0ckernel\u7248\u672c\u4e3a\uff1a3.10.0-862.el7.x86_64\u3002\u800c\u5728\u5bbf\u4e3b\u673a\u4e0a\u5b89\u88c5\u7684\u6700\u65b0\u7248\u672c\u7684ubuntu\u955c\u50cf\u7684kernel\u7248\u672c\u4e5f\u662f3.10.0-862.el7.x86_64\u3002 \u200b \u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u57fa\u4e8eubuntu Linux 20.01\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u955c\u50cf\uff0c\u8fd9\u5c31\u662f\u65b0\u955c\u50cf\u7684\u7b2c\u4e00\u5c42\uff1b\u5982\u679c\u5728\u8be5\u955c\u50cf\u4e2d\u6dfb\u52a0\u4e86python\u5305\uff0c\u5c31\u4f1a\u5728\u57fa\u7840\u955c\u50cf\u4e0a\u521b\u5efa\u7b2c\u4e8c\u4e2a\u955c\u50cf\u5c42\uff1b\u5982\u679c\u7ee7\u7eed\u6dfb\u52a0\u5b89\u5168\u8865\u4e01\uff0c\u5c31\u4f1a\u521b\u5efa\u7b2c\u4e09\u4e2a\u955c\u50cf\u5c42\uff0c\u90a3\u4e48\u8be5\u955c\u50cf\u5c31\u4f1a\u5305\u542b\u4e09\u4e2a\u955c\u50cf\u5c42\u3002\u5982\u679c\u8fd9\u4e2a\u955c\u50cf\u5728\u7f51\u7edc\u4e0a\u7684\u4ed3\u5e93\u4e0a\u4f60\u5c31\u53ef\u4ee5\u5728\u4f7f\u7528docker image pull [image:tag] \u547d\u4ee4\u65f6\u67e5\u770b\u955c\u50cf\u7684\u5c42\u6570\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528docker image inspect [image:tag]\u76f4\u63a5\u67e5\u770b\u8be5\u955c\u50cf\u7684\u5c42\u7ea7\u3002 \u200b \u5728\u6dfb\u52a0\u989d\u5916\u955c\u50cf\u5c42\u7684\u540c\u65f6\uff0c\u955c\u50cf\u65f6\u949f\u4fdd\u6301\u662f\u5f53\u524d\u6240\u6709\u955c\u50cf\u5c42\u7684\u7ec4\u5408\u3002Docker\u91c7\u7528\u5b58\u50a8\u5f15\u64ce\uff08\u65b0\u7248\u672c\u91c7\u7528\u5feb\u7167\u673a\u5236\uff09\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u955c\u50cf\u5c42\u7684\u5806\u6808\uff0c\u5e76\u4fdd\u8bc1\u591a\u955c\u50cf\u5c42\u5bf9\u5916\u8868\u793a\u4e3a\u7edf\u4e00\u6587\u4ef6\u7cfb\u7edf\uff08UnionFS\uff09\u3002\u7edf\u4e00\u6587\u4ef6\u7cfb\u7edf\u662f\u4e00\u79cd\u5206\u5c42\uff0c\u8f7b\u91cf\u7ea7\u5e76\u4e14\u9ad8\u6027\u80fd\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5b83\u652f\u6301\u5bf9\u6587\u4ef6\u7cfb\u7edf\u7684\u4fee\u6539\u4f5c\u4e3a\u4e00\u6b21\u63d0\u4ea4\u6765\u4e00\u5c42\u5c42\u7684\u53e0\u52a0\uff0c\u540c\u65f6\u53ef\u4ee5\u5c06\u4e0d\u540c\u76ee\u5f55\u6302\u8f7d\u5230\u540c\u4e00\u4e2a\u865a\u62df\u673a\u6587\u4ef6\u7cfb\u7edf\u4e0b(unite several directorire into a single virtual filesystem)\uff0cUnion\u6587\u4ef6\u7cfb\u7edf\u662fDocker\u955c\u50cf\u7684\u57fa\u7840\u3002 \u200b docker\u955c\u50cf\u91c7\u7528\u5206\u5c42\u673a\u5236\u5b9e\u73b0\u4e86\u8d44\u6e90\u7684\u5171\u4eab\u3002\u5728\u524d\u9762\u62c9\u53d6ruby:latest\u955c\u50cf\u7684\u65f6\u5019\u3002\u672c\u5730\u5df2\u6709\u7684\u955c\u50cf\u5c42\u4f1a\u663e\u793aAlready exists\u3002\u7531\u6b64\u53ef\u77e5\uff0cDocker\u80fd\u591f\u81ea\u52a8\u8bc6\u522b\u8981\u62c9\u53d6\u7684\u955c\u50cf\u4e2d\uff0c\u54ea\u51e0\u5c42\u5df2\u7ecf\u5728\u672c\u5730\u5b58\u5728\uff0c\u5df2\u5b58\u5728\u7684\u955c\u50cf\u5c42\u662f\u53ef\u4ee5\u5171\u4eab\u7684\u3002 \u200b Docker\u5728linux\u4e0a\u652f\u6301\u4e86\u591a\u79cd\u5b58\u50a8\u5f15\u64ce\uff08Snapshotter\uff09\u6bcf\u4e2a\u5b58\u50a8\u5f15\u64ce\u90fd\u6709\u81ea\u5df1\u7684\u955c\u50cf\u5206\u5c42\u3001\u955c\u50cf\u5171\u4eab\u548c\u5199\u65f6\u590d\u5236\uff08COW\uff09\u6280\u672f\u7684\u5177\u4f53\u5b9e\u73b0\u3002\u4f46\u662f\u6700\u7ec8\u5b9e\u73b0\u7684\u6548\u679c\u548c\u4f53\u73b0\u8d8b\u5411\u4e00\u81f4\u3002windows\u5e73\u53f0\u4ec5\u4ec5\u652f\u6301\u4e00\u79cd\u57fa\u4e8eNTFS\u6587\u4ef6\u7cfb\u7edf\u7684\u5b58\u50a8\u5f15\u64ce\u3002 \u200b \u5173\u4e8e\u955c\u50cf\u7684Cow\u7279\u6027\u4f1a\u5728\u5bb9\u5668\u90e8\u5206\u8be6\u7ec6\u8bf4\u660e\u3002","title":"8.\u955c\u50cf\u548c\u5206\u5c42"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#9","text":"\u200b Docker\u4e2d\u7684\u955c\u50cf\u662f\u4e00\u4e9b\u5217\u677e\u8026\u5408\u7684\u72ec\u7acb\u5c42\u7684\u96c6\u5408\u3002 \u200b \u955c\u50cf\u672c\u4e8b\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u914d\u7f6e\u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u955c\u50cf\u5c42\u7684\u5217\u8868\u548c\u4e00\u4e9b\u5217\u7684\u5143\u6570\u636e\u4fe1\u606f\u3002 \u200b \u955c\u50cf\u5c42\u624d\u662f\u5b9e\u9645\u5b58\u50a8\u6570\u636e\u7684\u5730\u65b9\uff0c\u6bcf\u4e2a\u955c\u50cf\u5c42\u4e4b\u95f4\u662f\u5b8c\u5168\u76f8\u4e92\u72ec\u7acb\u7684\uff0c\u6240\u4ee5\u4e0d\u5b58\u5728\u955c\u50cf\u96c6\u5408\u7684\u6982\u5ff5\u3002 \u200b \u955c\u50cf\u7684\u552f\u4e00\u6807\u8bc6\u662f\u4e00\u4e2a\u52a0\u5bc6\u7684ID\uff0c\u8be5ID\u662f\u914d\u7f6e\u5bf9\u8c61\u672c\u8eab\u7684\u6563\u5217\u503c\uff0c\u6bcf\u4e2a\u955c\u50cf\u5c42\u4e5f\u6709\u4e00\u4e2a\u52a0\u5bc6\u7684ID\u53bb\u5206\uff0c\u5176\u503c\u662f\u955c\u50cf\u5c42\u672c\u8eab\u5185\u5bb9\u7684\u6563\u5217\u503c\u3002\u4e4b\u524d\u5b66\u8fc7\u4e00\u4e2a\u547d\u4ee4 docker image inspest [image:latest]\u3002\u901a\u8fc7\u8fd9\u6761\u547d\u4ee4\u53ef\u4ee5\u67e5\u770bImageID\u548c\u7ec4\u6210Image\u7684\u5404\u4e2a\u5206\u5c42\u7684ID\u3002 \u4ee5ruby:latest\u955c\u50cf\u4e3a\u4f8b # docker image inspect ruby:latest Image ID\uff1a \u5206\u5c42ID\uff1a \u5982\u679c\u8981\u4fee\u6539\u955c\u50cf\u7684\u5185\u5bb9\u6216\u8005\u662f\u5176\u4e2d\u7684\u4efb\u610f\u4e00\u5c42\u90fd\u4f1a\u5bfc\u81f4\u52a0\u5bc6\u6563\u5217\u503c\u7684\u53d8\u5316\u3002\u6240\u4ee5\u955c\u50cf\u662f\u4e0d\u53ef\u53d8\u66f4\u7684\uff0c\u6bcf\u4e00\u5c42\u955c\u50cf\u53d1\u751f\u53d8\u66f4\u90fd\u4f1a\u88ab\u5224\u522b\u3002","title":"9.\u955c\u50cf\u6563\u5217\u503c"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#10","text":"\u200b \u5f53\u955c\u50cf\u4e0d\u88ab\u9700\u8981\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u5220\u9664\u955c\u50cf\u4ee5\u56de\u6536\u955c\u50cf\u6240\u5360\u7528\u7684\u7a7a\u95f4\u3002\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528docker image rm [ImageID]\u6765\u5220\u9664\u88abImageID\u6807\u8bc6\u7684\u955c\u50cf\u3002 \u200b \u5220\u9664\u64cd\u4f5c\u4f1a\u5728\u5f53\u524d\u4e3b\u673a\u4e0a\u5220\u9664\u8be5\u955c\u50cf\u7684\u4ee5\u53ca\u76f8\u5173\u7684\u955c\u50cf\u5c42\u3002\u6267\u884c\u5b8cdocker image rm [ImageID]\u4e4b\u540e\u4e0d\u80fd\u591f\u65f6\u5019docker image ls\u770b\u5230\u88ab\u5220\u9664\u7684\u955c\u50cf\u3002\u5e76\u4e14\u88ab\u5220\u9664\u7684\u955c\u50cf\u7684\u6240\u5305\u542b\u7684\u955c\u50cf\u5c42\u6570\u636e\u7684\u76ee\u5f55\u4e5f\u4f1a\u88ab\u5220\u9664\uff0c\u4f46\u662f\u5982\u679c\u88ab\u5220\u9664\u7684\u955c\u50cf\u5f53\u4e2d\u5305\u542b\u88ab\u5171\u4eab\u7684\u955c\u50cf\u5c42\u3002\u4e4b\u540e\u5f53\u5171\u4eab\u8be5\u955c\u50cf\u5c42\u6240\u6709\u7684\u955c\u50cf\u88ab\u5220\u9664\u7684\u624d\u4f1a\u88ab\u5220\u9664\u8be5\u5171\u4eab\u5c42\u3002 \u200b \u5982\u679c\u88ab\u5220\u9664\u7684\u955c\u50cf\u4e0a\u5b58\u5728\u8fd0\u884c\u72b6\u6001\u7684\u5bb9\u5668\u8be5\u955c\u50cf\u4e5f\u65e0\u6cd5\u88ab\u5220\u9664\u4f1a\u62a5\u9519\u3002\u5982\u679c\u8981\u5220\u9664\u8be5\u955c\u50cf\u9700\u8981\u5728\u5220\u9664\u955c\u50cf\u4e4b\u524d\u505c\u6b62\u6240\u6709\u4f7f\u7528\u8be5\u955c\u50cf\u7684\u5bb9\u5668\u3002 \u663e\u793a\u6240\u6709\u955c\u50cf\u7684ID # docker image ls -q \u6279\u91cf\u5220\u9664\u955c\u50cf\uff1a # docker image rm $(docker image ls -q) -f \u6279\u91cf\u505c\u6b62\u5bb9\u5668 # docker container stop $(docker container ls -q) \u5728\u6279\u91cf\u5220\u9664\u955c\u50cf\u4e4b\u524d\u53ef\u4ee5\u91c7\u7528\u6279\u91cf\u505c\u6b62\u5bb9\u5668\u4e4b\u540e\u518d\u505a\u6279\u91cf\u5220\u9664\u64cd\u4f5c\u3002 # docker container stop $(docker container ls -q) # docker image rm $(docker image ls -q) -f","title":"10.\u5220\u9664\u955c\u50cf"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#11","text":"","title":"11.\u955c\u50cf\u7684\u5bfc\u5165\u548c\u5bfc\u51fa"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#_1","text":"# docker save -o /test/myalpine.image alpine:latest \u6216 # docker save > /test/myalpine.image alpine:latest","title":"\u955c\u50cf\u7684\u5bfc\u51fa"},{"location":"DevOps/Docker/03-Docker%E9%95%9C%E5%83%8F%E8%AF%A6%E8%A7%A3/#_2","text":"# docker load -i /test/myalpine.image \u6216 # docker load < /test/myalpine.image","title":"\u955c\u50cf\u7684\u5bfc\u5165"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/","text":"04-Docker\u5bb9\u5668 \u00b6 1.\u5bb9\u5668\u7b80\u4ecb \u00b6 \u5bb9\u5668\u662f\u955c\u50cf\u8fd0\u884c\u65f6\u7684\u5b9e\u4f8b\u3002\u5982\u540c\u4ece\u865a\u62df\u5316\u5e73\u53f0\u4e0a\u901a\u8fc7\u6a21\u677f\u7684\u65b9\u5f0f\u542f\u52a8\u865a\u62df\u673a\u662f\u4e00\u6837\u7684\u3002\u7528\u6237\u53ef\u4ee5\u4ece\u5355\u4e2a\u955c\u50cf\u542f\u52a8\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u5bb9\u5668\u3002 \u200b \u5bb9\u5668\u662f\u6253\u5305\u4ee3\u7801\u53ca\u5176\u6240\u6709\u4f9d\u8d56\u9879\u7684\u6807\u51c6\u8f6f\u4ef6\u5355\u5143\uff0c\u56e0\u6b64\u53ef\u4ee5\u65b9\u4fbf\u7a0b\u5e8f\u5728\u4e0d\u540c\u7684\u8ba1\u7b97\u73af\u5883\u4e4b\u95f4\u5b9e\u73b0\u5feb\u901f\uff0c\u53ef\u9760\u7684\u8fc1\u79fb\u3002Docker Container Image\u662f\u4e00\u4e2a\u72ec\u7acb\uff0c\u6807\u51c6\u5316\uff0c\u8f7b\u91cf\u7ea7\uff0c\u53ef\u6267\u884c\u7684\u8f6f\u4ef6\u5305\u3002\u5176\u4e2d\u5305\u542b\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u4e00\u5207\uff1a\u4ee3\u7801\u3001\u8fd0\u884c\u73af\u5883\u3001\u7cfb\u7edf\u5de5\u5177\u3001\u7cfb\u7edf\u5e93\u548c\u914d\u7f6e\u6587\u4ef6\u3002 \u200b \u865a\u62df\u673a\u548c\u5bb9\u5668\u4e4b\u95f4\u7684\u6700\u5927\u533a\u522b\u662f\u5bb9\u5668\u66f4\u52a0\u5feb\u901f\u5e76\u4e14\u66f4\u52a0\u8f7b\u91cf\u7ea7\u2014\u2014\u865a\u62df\u673a\u9700\u8981\u8fd0\u884c\u5728\u5b8c\u6574\u7684\u64cd\u4f5c\u7cfb\u7edfdocker\u53ea\u9700\u8981\u4e0e\u5bbf\u4e3b\u673a\u7684\u64cd\u4f5c\u7cfb\u7edf\u5171\u4eab\u5185\u6838\u3002 2.\u5bb9\u5668\u8be6\u89e3 \u00b6 \u5bb9\u5668\u548c\u865a\u62df\u673a\u4e4b\u95f4\u7684\u6bd4\u8f83\u3002\u5728\u524d\u9762\u7684\u5185\u5bb9\u8bb2\u89e3\u8fc7\u7a0b\u4e2d\u4e00\u76f4\u7528\u865a\u62df\u673a\u8ddf\u5bb9\u5668\u7c7b\u6bd4\u7684\u65b9\u5f0f\u5e2e\u52a9\u5927\u5bb6\u7406\u89e3\u4ec0\u4e48\u5bb9\u5668\u3002\u4f46\u662f\u5bb9\u5668\u548c\u865a\u62df\u673a\u4e4b\u95f4\u8fd8\u662f\u6709\u4e9b\u8bb8\u7684\u533a\u522b\u7684\uff0c\u5e76\u4e14\u8fd9\u4e5f\u5f88\u91cd\u8981\u3002 \u200b \u5bb9\u5668\u548c\u865a\u62df\u673a\u90fd\u4f9d\u8d56\u4e8e\u5bbf\u4e3b\u673a\u624d\u80fd\u6b63\u5e38\u8fd0\u884c\u3002\u5bbf\u4e3b\u673a\u53ef\u4ee5\u4f7f\u7b14\u8bb0\u672c\uff0c\u6570\u636e\u4e2d\u5fc3\u7684\u7269\u7406\u670d\u52a1\u5668\uff0c\u4e5f\u53ef\u4ee5\u662f\u5728\u4e91\u4e0a\u7684\u5f39\u6027\u4e91\u670d\u52a1\u5668\u5b9e\u4f8b\u3002 \u200b \u901a\u5e38\u5728\u865a\u62df\u673a\u6a21\u578b\u4e2d\uff0c\u9996\u5148\u8981\u5f00\u542f\u7269\u7406\u673a\u542f\u52a8hypervisor\u5f15\u5bfc\u7a0b\u5e8f\u3002\u4e00\u65e6hypervisor\u542f\u52a8\uff0c\u5c31\u4f1a\u5360\u7528\u673a\u5668\u4e0a\u5168\u90e8\u7684\u7269\u7406\u8d44\u6e90\u3002\u5305\u62ec\u8ba1\u7b97\u8d44\u6e90\uff0c\u5b58\u50a8\u8d44\u6e90\u548c\u7f51\u7edc\u8d44\u6e90\u3002\u7136\u540ehypervisor\u63a5\u7ba1\u8fd9\u4e9b\u8d44\u6e90\u4e4b\u540e\u4f1a\u628a\u8fd9\u4e9b\u8d44\u6e90\u5212\u5206\u5230\u76f8\u5e94\u7684\u8d44\u6e90\u6c60\u5f53\u4e2d\u5f62\u6210\u9897\u7c92\u5ea6\u8f83\u5c0f\u7684\u865a\u62df\u8d44\u6e90\u3002\u628a\u4e0d\u540c\u7684\u865a\u62df\u8d44\u6e90\u6309\u7167\u6240\u9700\u7684\u914d\u7f6e\u7684\u6253\u5305\u8fdb\u865a\u62df\u673a\u4e2d\uff0c\u8fd9\u6837\u7528\u6237\u5c31\u80fd\u901a\u8fc7\u865a\u62df\u673a\u53bb\u8c03\u5ea6\u8fd9\u4e9b\u865a\u62df\u8d44\u6e90\u5e76\u5728\u4e0a\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u63d0\u4f9b\u7ed9\u7528\u6237\u4f7f\u7528\u3002 \u200b \u5bb9\u5668\u7684\u6a21\u578b\u4e0e\u865a\u62df\u673a\u6a21\u578b\u76f8\u6bd4\u6709\u4e9b\u8bb8\u4e0d\u540c\u3002 \u200b \u670d\u52a1\u5668\u542f\u52a8\u540e\uff0c\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u7684\u64cd\u4f5c\u7cfb\u7edf\u542f\u52a8\u3002\u5728Docker\u4e16\u754c\u4e2d\u53ef\u4ee5\u9009\u62e9linux\uff0c\u6216\u8005\u5185\u6838\u652f\u6301\u5185\u6838\u4e2d\u7684\u5bb9\u5668\u539f\u8bed\u7684\u65b0\u7248\u672c\u7684windows\u3002\u4e0e\u865a\u62df\u673a\u6a21\u578b\u76f8\u540c\u3002OS\u4e5f\u5360\u7528\u4e86\u5168\u90e8\u786c\u4ef6\u8d44\u6e90\u3002\u5728OS\u5c42\u4e4b\u4e0a\uff0c\u9700\u8981\u5b89\u88c5\u5bb9\u5668\u5f15\u64ce\uff08\u5982Docker\uff09\u5bb9\u5668\u53ef\u4ee5\u83b7\u53d6\u7cfb\u7edf\u8d44\u6e90\uff0c\u6bd4\u5982\u8fdb\u7a0b\u6811\u3001\u6587\u4ef6\u7cfb\u7edf\u4ee5\u53ca\u7f51\u7edc\u6808\uff0c\u63a5\u7740\u8bb2\u8d44\u6e90\u5206\u5272\u6210\u4e3a\u5b89\u5168\u7684\u76f8\u4e92\u9694\u79bb\u7684\u8d44\u6e90\u7ed3\u6784\uff0c\u79f0\u4e4b\u4e3a\u5bb9\u5668\u3002\u6bcf\u4e2a\u5bb9\u5668\u770b\u8d77\u6765\u5c31\u50cf\u4e00\u4e2a\u771f\u5b9e\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5728\u5176\u5185\u90e8\u53ef\u4ee5\u8fd0\u884c\u5e94\u7528\u3002 \u200b Hypervisor\u5b9e\u73b0\u7684\u786c\u4ef6\u865a\u62df\u5316\uff0cHypervisor\u5c06\u786c\u4ef6\u8d44\u6e90\u5212\u5206\u4e3a\u865a\u62df\u5316\u8d44\u6e90\uff1b\u53e6\u5916\uff0c\u5bb9\u5668\u662f\u64cd\u4f5c\u7cfb\u7edf\u865a\u62df\u5316\u3002\u591a\u4e2a\u5bb9\u5668\u5171\u4eab\u5bbf\u4e3b\u673a\u7684\u5185\u6838\u3002 \u200b \u865a\u62df\u673a\u5e26\u6765\u7684\u5f00\u9500\u95ee\u9898\u3002\u865a\u62df\u673a\u6a21\u578b\u5c06\u5e95\u5c42\u7684\u786c\u4ef6\u8d44\u6e90\u5212\u5206\u5230\u865a\u62df\u673a\u5f53\u4e2d\u3002\u6bcf\u4e2a\u865a\u62df\u673a\u90fd\u5206\u914d\u4e86\u4e00\u5b9a\u7684CPU\uff0c\u5185\u5b58\uff0c\u5b58\u50a8\uff0c\u7f51\u7edc\u7b49\u8d44\u6e90\u3002\u7136\u540e\u5728\u865a\u62df\u673a\u4e0a\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\uff0c\u7136\u540e\u5728\u865a\u62df\u673a\u4e0a\u5b89\u88c5\u6240\u9700\u7684\u5e94\u7528\u8f6f\u4ef6\uff0c\u4f46\u662f\u865a\u62df\u673a\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5e26\u6765\u5f00\u9500\uff0c\u4e5f\u5c31\u662f\u8bf4\u865a\u62df\u673a\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5360\u7528\u4e00\u5b9a\u7684\u8d44\u6e90\u6765\u7ef4\u6301\u81ea\u8eab\u7684\u6b63\u5e38\u8fd0\u884c\u548c\u5bf9\u865a\u62df\u673a\u4e0a\u786c\u4ef6\u548c\u8f6f\u4ef6\u8d44\u6e90\u7684\u7ba1\u7406\u3002\u901a\u5e38\u8fd9\u79cd\u5f00\u9500\u88ab\u79f0\u4e4b\u4e3aOS Tax\u6216\u8005\u662fVM Tax\u3002 \u200b \u5bb9\u5668\u6a21\u578b\u5177\u6709\u5728\u5bbf\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u8fd0\u884c\u7684\u5355\u4e2a\u5185\u6838\u3002\u5728\u4e00\u53f0\u5bbf\u4e3b\u673a\u4e0a\u8fd0\u884c\u6570\u5341\u4e2a\u6216\u8005\u6570\u767e\u4e2a\u5bb9\u5668\u4e5f\u662f\u53ef\u884c\u7684\u2014\u2014\u5728\u5bbf\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684\u5bb9\u5668\u5171\u7528\u4e00\u4e2a\u5185\u6838\u3002\u8fd9\u610f\u5473\u7740\u53ea\u6709\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u6d88\u8017cpu\uff0c\u5185\u5b58\uff0c\u5b58\u50a8\u8d44\u6e90\u3002\u53ea\u6709\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u6388\u6743license\u3002\u4e5f\u5c31\u53ea\u6709\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u6d88\u8017\u8d44\u6e90\uff0c\u8fd9\u6837\u4e00\u6765\u5927\u5927\u51cf\u5c11\u4e86\u8d44\u6e90\u7684\u5f00\u9500\u3002 \u200b \u5bb9\u5668\u548c\u865a\u62df\u673a\u76f8\u6bd4\u5e76\u4e0d\u662f\u4e00\u4e2a\u5b8c\u6574\u610f\u4e49\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\u3002\u5bb9\u5668\u7684\u542f\u52a8\u65f6\u95f4\u662f\u8981\u8fdc\u8fdc\u5feb\u4e8e\u4f20\u7edf\u7684\u865a\u62df\u673a\u7684\u3002 \u5bb9\u5668\u5185\u90e8\u5e76\u4e0d\u5305\u542b\u5185\u6838 \u3002 \u200b linux\u7684\u64cd\u4f5c\u7cfb\u7edf\u7531\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u7ec4\u6210\uff0c\u5185\u6838\u7a7a\u95f4\u662fkernel\uff0c\u7528\u6237\u7a7a\u95f4\u662frootfs, \u4e0d\u540cLinux\u53d1\u884c\u7248\u7684\u533a\u522b\u4e3b\u8981\u662frootfs.\u4e0d\u540c\u7684\u5bb9\u5668\u5171\u7528\u4e00\u4e2a\u5185\u6838\u53ea\u662frootfs\u4e0d\u540c\u3002\u5bb9\u5668\u4e0d\u9700\u8981\u5185\u6838\u56e0\u4e3a\u5185\u6838\u7531\u5bbf\u4e3b\u673a\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u3002 \u5728\u8fd9\u91cc\u6211\u53ef\u4ee5\u505a\u4e00\u4e2a\u5b9e\u9a8c\u4f50\u8bc1\u6211\u521a\u624d\u7684\u8bf4\u6cd5\u3002\u6211\u642d\u5efa\u4e86\u4e24\u5957docker\u5b9e\u9a8c\u73af\u5883\uff0c\u5b9e\u9a8c\u5e73\u53f0A\u4f7f\u7528\u7684centos 7\u64cd\u4f5c\u7cfb\u7edf\u4f5c\u4e3a\u5bbf\u4e3b\u673a\u7684\u64cd\u4f5c\u7cfb\u7edf\uff1b\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684docker\u73af\u5883\u3002\u5b9e\u9a8c\u5e73\u53f0B\u4f7f\u7528\u7684centos 8\u64cd\u4f5c\u7cfb\u7edf\u4f5c\u4e3a\u5bbf\u4e3b\u673a\u7684\u64cd\u4f5c\u7cfb\u7edf\uff1b\u540c\u6837\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684docker\u73af\u5883\u3002\u5b9e\u9a8c\u5e73\u53f0A\u548c\u5b9e\u9a8c\u5e73\u53f0B\u90fd\u901a\u8fc7docker pull ubuntu:latest\u62c9\u53d6\u5b98\u65b9\u4ed3\u5e93\u7684\u9ed8\u8ba4ubuntu\u955c\u50cf\u3002\u5206\u522b\u67e5\u770b\u4e24\u5957\u5e73\u53f0\u4e2d\u8fd0\u884c\u7684ubuntu\u5bb9\u5668\u4e2d\u5185\u6838\u7684\u7248\u672c\u548c\u5bbf\u4e3b\u673a\u7684\u7248\u672c\u3002 \u200b centos 8 \u200b centos 7 3.\u68c0\u67e5docker Daemo \u00b6 \u901a\u5e38\u767b\u5f55Docker\u4e3b\u673a\u7684\u7b2c\u4e00\u4ef6\u4e8b\u5c31\u662f\u68c0\u67e5Docker\u662f\u5426\u5728\u8fd0\u884c\u72b6\u6001\u3002 # docker version [root@Docker ~]# docker version Client: Docker Engine - Community Version: 20.10.8 API version: 1.41 Go version: go1.16.6 Git commit: 3967b7d Built: Fri Jul 30 19:55:49 2021 OS/Arch: linux/amd64 Context: default Experimental: true Server: Docker Engine - Community Engine: Version: 20.10.8 API version: 1.41 (minimum version 1.12) Go version: go1.16.6 Git commit: 75249d8 Built: Fri Jul 30 19:54:13 2021 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.4.9 GitCommit: e25210fe30a0a703442421b0f60afac609f950a3 runc: Version: 1.0.1 GitCommit: v1.0.1-0-g4144b63 docker-init: Version: 0.19.0 GitCommit: de40ad0 \u5f53\u8f93\u51fa\u7684\u5185\u5bb9\u5305\u542bClient\u548cServer\u7684\u5185\u5bb9\u65f6\uff0c\u8868\u793aDocker Daemon\u6b63\u5728\u8fd0\u884c\u3002 \u5982\u679cDocker Daemon\u6ca1\u6709\u5904\u5728\u8fd0\u884c\u72b6\u6001\u53ef\u4ee5\u4f7f\u7528 # service docker status \u542f\u52a8docker daemon\uff0c\u53ea\u8981\u663e\u793a\u5982\u4e0b\u5185\u5bb9\u8868\u793a\u542f\u52a8\u6210\u529f\u3002 4.\u542f\u52a8\u5bb9\u5668 \u00b6 # docker container run -it ubuntu:latest /bin/bash \u5982\u679c\u672c\u5730\u6709\u76f8\u5173\u955c\u50cf\u5c31\u76f4\u63a5\u5c06\u955c\u50cf\u542f\u52a8\u4e3a\u5bb9\u5668\u3002 \u5982\u679c\u8981\u542f\u52a8\u7684\u5bb9\u5668\u7684\u955c\u50cf\u4e0d\u5728\u672c\u5730\uff0c\u90a3\u4e48\u542f\u52a8\u955c\u50cf\u9700\u8981\u5148\u4ece\u7f51\u7edc\u4e0a\u7684\u4ed3\u5e93\u8fdb\u884c\u4e0b\u8f7d\u3002\u4e0b\u8f7d\u5b8c\u6210\u540e\u624d\u80fd\u8fd0\u884c\u3002 # docker container run -it node 5.\u5bb9\u5668\u8fdb\u7a0b \u00b6 \u5728\u542f\u52a8ubuntu\u955c\u50cf\u8fd0\u884cBash shell\uff08/bin/bash\uff09\u3002\u8fd9\u4f7f\u5f97**bash shell\u6210\u4e3a\u8be5\u5bb9\u5668\u4e2d\u552f\u4e00\u8fd0\u884c\u7684\u8fdb\u7a0b**\uff0c\u4f46\u662f\u4f7f\u7528ps -elf\u67e5\u770b\u8fdb\u7a0b\u662f\u53d1\u73b0ubuntu\u5bb9\u5668\u4e2d\u5b9e\u9645\u4e0a\u5305\u542b\u4e24\u4e2a\u8fdb\u7a0b\u3002\u5217\u8868\u4e2dPID\u4e3a1 \u7684\u662f\u5bb9\u5668\u4e2d\u8fd0\u884c\u7684bash shell\u8fdb\u7a0b\u8868\uff0c\u800cPID 10\u662fps -elf\u4ea7\u751f\u7684\uff0c\u8fd9\u662f\u4e00\u4e2a\u4e34\u65f6\u8fdb\u7a0b\uff0c\u5728\u8f93\u51fa\u7ed3\u679c\u540e\u8be5\u8fdb\u7a0b\u5c31\u9000\u51fa\u4e86\u3002 6.\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f \u00b6 \u200b \u6240\u8c13\u7684\u751f\u547d\u5468\u671f\u5b9e\u9645\u4e0a\u53ef\u4ee5\u7406\u89e3\u4e3a\u5bb9\u5668\u4ece\u521b\u5efa\u5230\u9500\u6bc1\u7684\u8fc7\u7a0b\u4e2d\u505a\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u53ef\u4ee5\u79f0\u4e4b\u4e3a\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\u3002 \u200b \u4e00\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u95ee\u9898\uff0c\u5bb9\u5668\u80fd\u591f\u5bf9\u6570\u636e\u8fdb\u884c\u6301\u4e45\u5316\u64cd\u4f5c\u5417\uff1f \u5bb9\u5668\u662f\u53ef\u4ee5\u5bf9\u6570\u636e\u8fdb\u884c\u6301\u4e45\u5316\u64cd\u4f5c\u7684 \u3002 \u200b \u672c\u6b21\u5b9e\u9a8c\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5bb9\u5668\uff0c\u7528\u6765\u89c2\u5bdf\u8be5\u5bb9\u5668\u5b8c\u6574\u7684\u751f\u547d\u5468\u671f\u3002 1.\u542f\u52a8\u4e00\u4e2aubuntu:latest\u5bb9\u5668\u5e76\u5c06\u5176\u547d\u540d\u4e3apercy # docker container run --name percy -it /bin/bash 2.\u5c06\u6570\u636e\u5199\u5165\u5230tmp\u76ee\u5f55\u4e0b\u7684\u67d0\u4e2a\u6587\u4ef6 root@eea152e1190b:/# cd tmp/ root@eea152e1190b:/tmp# ll total 0 drwxrwxrwt. 2 root root 6 Aug 27 07 :27 ./ drwxr-xr-x. 1 root root 6 Sep 8 01 :49 ../ root@eea152e1190b:/tmp# echo \"Miaomiao\" > myheart root@eea152e1190b:/tmp# ls -l total 4 -rw-r--r--. 1 root root 9 Sep 8 01 :55 myheart root@eea152e1190b:/tmp# cat myheart Miaomiao 3.\u63a5\u4e0b\u6765\u505c\u6b62\u8fd0\u884cpercy\u5bb9\u5668 # docker container stop percy 4.\u67e5\u770bpercy\u5bb9\u5668\u662f\u5426\u8fd8\u5728\u8fd0\u884c\u72b6\u6001\u3002 # docker container ls \u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u4e2d\u5df2\u7ecf\u6ca1\u6709\u540d\u79f0\u4e3apercy\u7684\u5bb9\u5668\u4e86\uff0c\u8bc1\u660e\u8be5\u5bb9\u5668\u5df2\u7ecf\u505c\u6b62\u8fd0\u884c\u3002 5.\u67e5\u770b\u6240\u6709\u5bb9\u5668\u7684\u72b6\u6001\u5305\u62ec\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668 # docker container ls -a 6.\u91cd\u542fpercy\u5bb9\u5668 # docker container start percy 7.\u67e5\u770bpercy\u5bb9\u5668\u7684\u662f\u5426\u88ab\u542f\u52a8 8.\u8fde\u63a5\u5230percy\u5bb9\u5668 # docker container exec -it percy /bin/bash 9.\u67e5\u770bpercy\u5bb9\u5668\u4e2d\u521b\u5efa\u7684\u6587\u4ef6\u662f\u5426\u5b58\u5728 root@eea152e1190b:/# cd tmp/ root@eea152e1190b:/tmp# ll total 4 drwxrwxrwt. 1 root root 21 Sep 8 01 :55 ./ drwxr-xr-x. 1 root root 29 Sep 8 01 :49 ../ -rw-r--r--. 1 root root 9 Sep 8 01 :55 myheart root@eea152e1190b:/tmp# cat myheart Miaomiao \u5bb9\u5668\u91cd\u542f\u540e\uff0c\u4e4b\u524d\u5728\u5bb9\u5668\u4e2d\u521b\u5efa\u7684\u6587\u4ef6\u4f9d\u7136\u5b58\u5728\uff0c\u5e76\u4e14\u6587\u4ef6\u4e2d\u5305\u542b\u7684\u6570\u636e\u5e76\u6ca1\u6709\u53d1\u751f\u53d8\u66f4\u3002\u8fd9\u8bf4\u660e\u5bb9\u5668\u91cd\u542f\u6216\u8005\u505c\u6b62\u8fd0\u884c\u90fd\u4e0d\u4f1a\u635f\u6bc1\u5bb9\u5668\u548c\u5176\u4e2d\u7684\u6570\u636e\u3002 \u200b \u4e0a\u9762\u7684\u5b9e\u9a8c\u8bf4\u660e\u4e86\u5bb9\u5668\u662f\u80fd\u591f\u8fdb\u884c\u6570\u636e\u7684\u6301\u4e45\u5316\u5b58\u50a8\u7684\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5377\uff08volume\uff09\u624d\u662f\u5bb9\u5668\u4e2d\u5b58\u50a8\u6301\u4e45\u5316\u6570\u636e\u7684\u9996\u9009\u65b9\u5f0f\u3002 \u76f4\u63a5\u5220\u9664\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u3002 \u200b \u9996\u5148\u67e5\u770b\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668 # docker container ls \u200b \u5220\u9664\u5bb9\u5668\u53ef\u4ee5\u4f7f\u7528Container ID\u6216\u8005\u662f\u5bb9\u5668\u7684\u540d\u79f0\uff08\u540d\u79f0\u53ef\u4ee5\u81ea\u52a8\u751f\u6210\u4e5f\u53ef\u4ee5\u4eba\u4e3a\u6307\u5b9a\uff09 # docker container rm percy cb9162562fbe -f \u867d\u7136\u4f7f\u7528 -f\u53c2\u6570\u53ef\u4ee5\u76f4\u63a5\u4e0d\u52a0\u63d0\u793a\u7684\u4ea7\u51fa\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\uff1b\u4f46\u662f\u975e\u5e38\u4e0d\u5efa\u8bae\u8fd9\u4e48\u505a\u3002\u5728\u751f\u4ea7\u6d3b\u52a8\u4e2d\u5220\u9664\u5bb9\u5668\u6700\u597d\u8fd8\u662f\u5206\u4e24\u6b65\uff1a1.\u505c\u6b62\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668 2.\u5220\u9664\u505c\u6b62\u7684\u5bb9\u5668\u3002\u8fd9\u6837\u624d\u8db3\u591f\u4f18\u96c5\u3002 \u200b \u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\uff1b\u5305\u542b\u4e86\u5bb9\u5668\u7684\u542f\u52a8\uff0c\u8fd0\u884c\uff0c\u505c\u6b62\uff0c\u6682\u505c\u7b49\u591a\u6b21\u64cd\u4f5c\u3002\u9664\u975e\u5220\u9664\u5bb9\u5668\uff0c\u5426\u5219\u5bb9\u5668\u5e76\u4e0d\u4f1a\u4e22\u5931\u5176\u4e2d\u7684\u6570\u636e\u3002\u4f46\u662f\u5982\u679c\u6570\u636e\u662f\u5b58\u653e\u5728\u5377\u5f53\u4e2d\u7684\uff0c\u5373\u4f7f\u5220\u9664\u5377\uff0c\u6570\u636e\u4e5f\u4f1a\u88ab\u4fdd\u5b58\u4e0b\u6765\u3002 7.\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565 \u00b6 \u200b \u5728\u8fd0\u884c\u5bb9\u5668\u65f6\u6700\u597d\u914d\u7f6e\u597d\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565\u3002\u8fd9\u662f\u5bb9\u5668\u7684\u4e00\u79cd\u81ea\u6211\u4fee\u590d\u3002\u53ef\u4ee5\u5728\u6307\u5b9a\u65f6\u95f4\u6216\u8005\u53d1\u751f\u9519\u8bef\u540e\u901a\u8fc7\u91cd\u542f\u6765\u5b8c\u6210\u81ea\u6211\u4fee\u590d\uff08\u91cd\u542f\u771f\u7684\u80fd\u591f\u89e3\u51b3\u767e\u5206\u4e4b\u4e5d\u5341\u4e5d\u7684\u95ee\u9898 \u54c8\u54c8\uff09\u3002 \u200b \u91cd\u542f\u7b56\u7565\u53ef\u4ee5\u5e94\u7528\u4e8e\u6bcf\u4e2a\u5bb9\u5668\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165docker-container run\u547d\u4ee4\u4e2d\u6216\u8005\u65e9Compose\u6587\u4ef6\u4e2d\u58f0\u660e\uff08\u9700\u8981\u5728\u4f7f\u7528Docker Compose\u4ee5\u53caDocker Stacks\u65f6\u624d\u53ef\u4ee5\uff09\u3002 \u200b \u5bb9\u5668\u652f\u6301\u7684\u91cd\u542f\u7b56\u7565\u3002 always always\u662f\u4e00\u79cd\u7b80\u5355\u7684\u91cd\u542f\u7b56\u7565\uff1b\u9664\u975e\u4f7f\u7528\u624b\u52a8\u505c\u6b62\uff1b\u5982docker container stop [containerID|containerName]\u7684\u65b9\u5f0f\u505c\u6b62\u8fd0\u884c\u7684\u5bb9\u5668\u3002always\u8fd8\u6709\u4e00\u4e2a\u6709\u610f\u601d\u7684\u5730\u65b9\u5728\u4e8e\u5f53docker daemon\u91cd\u542f\u7684\u65f6\u5019\uff0c\u5373\u4f7f\u624b\u52a8\u65b9\u5f0f\u505c\u6b62\u7684\u5bb9\u5668\u4e5f\u4f1a\u91cd\u542f\u3002 unless-stopped unless-stoppde\u548calways\u6700\u5927\u7684\u533a\u522b\u5c31\u662f\u5f53docker daemon\u91cd\u542f\u7684\u65f6\u5019\uff1b\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565\u4e3aunless-stopped\u65f6\u4e0d\u4f1a\u88ab\u7b56\u7565\u89e6\u53d1\u91cd\u542f\u64cd\u4f5c\u3002 on-failed on-failed\u7b56\u7565\u4f1a\u5728\u9000\u51fa\u5bb9\u5668\u5e76\u4e14\u8fd4\u56de\u503c\u4e0d\u662f0\uff080\u8868\u793a\u6b63\u5e38\u9000\u51fa\uff09\u7684\u65f6\u5019\uff0c\u89e6\u53d1\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565\u3002\u5c31\u7b97\u5bb9\u5668\u5904\u4e8estopped\u72b6\u6001\u5e76\u4e14\u5728Docker deamon\u91cd\u542f\u7684\u65f6\u5019\uff0c\u5bb9\u5668\u4e5f\u4f1a\u88ab\u91cd\u542f\u3002 on-failed:3 \u4e0eon-failed\u7684\u7b56\u7565\u57fa\u672c\u4e00\u81f4\uff0c\u53ea\u4e0d\u8fc7\u6700\u591a\u91cd\u542f3\u6b21\u3002 no\uff08default\uff09 \u9ed8\u8ba4\u7b56\u7565\uff0c\u5728\u5bb9\u5668\u9000\u51fa\u65f6\u4e0d\u91cd\u542f\u5bb9\u5668\u3002 always \u00b6 # docker container run --name always -it --restart always ubuntu:latest /bin/bash \u7528\u547d\u4ee4\u67e5\u770b\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u53d1\u73b0CREATE\u65f6\u95f4\u662f4minutes\u4e4b\u524d\uff0c\u4f46\u662f\u542f\u52a8\u65f6\u95f4\u662f11seconds\u4e4b\u524d\u3002\u8868\u793a\u5728\u6267\u884cexit\u9000\u51fa\u540e\uff0cdocker\u663e\u793a\u81ea\u52a8\u6740\u6b7b\u4e86\u8fd9\u4e2a\u5bb9\u5668\u8fdb\u7a0b\u7136\u540e\u51fa\u53d1\u4e86\u5bb9\u5668\u7684always\u7b56\u7565\u81ea\u52a8\u5c06\u5bb9\u5668\u91cd\u542f\u4e86\u3002 # docker container ls \u5728always\u7b56\u7565\u7684\u5bb9\u5668\u505c\u6b62\u7684\u60c5\u51b5\u4e0b\uff0c\u91cd\u542fdocker deamon\uff1b\u53d1\u73b0always\u7b56\u7565\u7684\u5bb9\u5668\u81ea\u52a8\u91cd\u542f\u4e86\u3002 # docker container stop always # docker container ls -a # systemctl restart docker # docker container ls unless-stopped \u00b6 \u521b\u5efa\u4e00\u4e2a\u91cd\u542f\u7b56\u7565\u4e3aunless-stopped\u7684\u5bb9\u5668 # docker container run --name unless-stopped -it --restart unless-stopped ubuntu:latest /bin/bash \u9000\u51fa\u5bb9\u5668\u4e4b\u540e\uff1b\u67e5\u770b\u8be5\u5bb9\u5668\u7684\u7b56\u7565\u662f\u5426\u6267\u884c\u3002\u663e\u793a\u5bb9\u5668\u7684\u521b\u5efa\u65f6\u95f4\u662f22\u79d2\u524d\uff0c\u4f46\u662f\u521b\u5efa\u65f6\u95f4\u662f7\u79d2\u524d\u3002\u8868\u793a\u51fa\u53d1\u4e86unless-stopped\u7b56\u7565\uff0c\u5c06\u5bb9\u5668\u91cd\u542f\u4e86\u3002 \u4f7f\u7528\u547d\u4ee4\u624b\u52a8\u505c\u6b62\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u3002 # docker container stop unless-stopped \u67e5\u770b\u5bb9\u5668\u7684\u72b6\u6001 # docker container ls -a \u91cd\u542fdocker deamon # systemctl restart docker \u5728\u6b64\u67e5\u770b\u8be5\u5bb9\u5668\u7684\u72b6\u6001\u53d1\u73b0\u5bb9\u5668\u6ca1\u6709\u88ab\u542f\u52a8 8.\u5feb\u901f\u6e05\u7406\u6240\u6709\u7684docker\u5bb9\u5668 \u00b6 # docker container rm $(docker container ls -aq) -f 9.\u67e5\u770b\u5bb9\u5668\u7684\u914d\u7f6e\u7ec6\u8282\u548c\u8fd0\u884c\u65f6\u4fe1\u606f\u3002 \u00b6 \u53ef\u4ee5\u4f7f\u7528\u5bb9\u5668ID\u6216\u8005\u5bb9\u5668\u540d # docker container inspect ubuntutest 10.\u5bfc\u51fa\u5bb9\u5668 \u00b6 \u5982\u679c\u8981\u5bfc\u51fa\u672c\u5730\u67d0\u4e2a\u5bb9\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528docker export\u547d\u4ee4 \u200b \u67e5\u770b\u5bb9\u5668\u7684ID\u6216\u8005\u540d\u79f0 # docker container ls \u200b \u5bfc\u51fa\u5bb9\u5668 # docker container export 9ecb95ba5b7e > nginx.tar 11.\u5bfc\u5165\u5bb9\u5668 \u00b6 \u5982\u679c\u8981\u5bfc\u5165\u672c\u5730\u67d0\u4e2a\u5bb9\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528docker import\u547d\u4ee4 # docker import xxx.tar <image:Ltag> 12.\u6587\u4ef6\u62f7\u8d1d \u00b6 13.\u76ee\u5f55\u6302\u8f7d\uff08\u5bb9\u5668\u6570\u636e\u5377\u64cd\u4f5c\uff09 \u00b6 \u200b \u5728\u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\uff0c\u5c06\u5bbf\u4e3b\u673a\u7684\u76ee\u5f55\u4e0e\u5bb9\u5668\u5185\u7684\u76ee\u5f55\u8fdb\u884c\u6620\u5c04\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u5bbf\u4e3b\u673a\u67d0\u4e2a\u76ee\u5f55\u7684\u6587\u4ef6\u4ece\u800c\u53bb\u5f71\u54cd\u5bb9\u5668\uff0c\u800c\u4e14\u8fd9\u4e2a\u64cd\u4f5c\u662f\u53cc\u5411\u7ed1\u5b9a\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u5bb9\u5668\u5185\u7684\u64cd\u4f5c\u4e5f\u4f1a\u5f71\u54cd\u5230\u5bbf\u4e3b\u673a\u5b9e\u73b0\u5907\u4efd\u529f\u80fd\u3002 \u200b \u4f46\u662f\u5bb9\u5668\u88ab\u5220\u9664\u7684\u65f6\u5019\uff0c\u5bbf\u4e3b\u673a\u5185\u7684\u5185\u5bb9\u4e0d\u4f1a\u88ab\u5220\u9664\u3002\u5982\u679c\u591a\u4e2a\u5bb9\u5668\u6302\u8f7d\u540c\u4e00\u4e2a\u76ee\u5f55\uff0c\u5176\u4e2d\u4e00\u4e2a\u5bb9\u5668\u88ab\u5220\u9664\uff0c\u5176\u5b83\u5bb9\u5668\u7684\u5185\u5bb9\u4e5f\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\u3002 \u200b \u5bb9\u5668\u4e0e\u5bbf\u4e3b\u673a\u4e4b\u95f4\u7684\u6570\u636e\u5c5e\u4e8e\u5f15\u7528\u5173\u7cfb\uff0c\u6570\u636e\u5377\u662f\u4ece\u5916\u754c\u6302\u8f7d\u5230\u5bb9\u5668\u5185\u90e8\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u8131\u79bb\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\u800c\u72ec\u7acb\u5b58\u5728\uff0c\u6b63\u662f\u7531\u4e8e\u6570\u636e\u5377\u7684\u751f\u547d\u5468\u671f\u4e0d\u7b49\u4e8e\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\uff0c\u5728\u5bb9\u5668\u9000\u51fa\u6216\u8005\u5220\u9664\u4ee5\u540e\uff0c\u6570\u636e\u4ecd\u7136\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\uff0c\u6570\u636e\u5377\u7684\u751f\u547d\u5468\u671f\u4f1a\u4e00\u76f4\u6301\u7eed\u5230\u6ca1\u6709\u5bb9\u5668\u4f7f\u7528\u5b83\u4e3a\u6b62\u3002 \u200b \u521b\u5efa\u5bb9\u5668\u6dfb\u52a0 -v\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a \u5bbf\u4e3b\u673a\u76ee\u5f55\uff1a\u5bb9\u5668\u76ee\u5f55 ,\u4f8b\u5982\uff1a \u200b \u5c06\u5bbf\u4e3b\u673a\u7684\u4e00\u4e2a\u4e00\u4e2a\u76ee\u5f55/dockervolume\u6302\u8f7d\u7ed9\u65b0\u521b\u5efa\u7684\u5bb9\u5668centos7_01\u7684/usr/local/data_volume\u3002 \u6307\u5b9a\u76ee\u5f55\u6302\u8f7d \u00b6 1.\u5728\u5bbf\u4e3b\u673a\u521b\u5efa\u6302\u8f7d\u76ee\u5f55dockervolume;\u5e76\u5728\u5176\u4e2d\u521b\u5efadockervolume.txt\u6587\u4ef6\u3002 # mkdir /dockervolume # cd /dockervolume # vi dockervolume.txt #docker container run -di -v /dockervolume:/usr/local/data_volume --name centos7_01 centos:7 2.\u5728\u5bb9\u5668\u5185\u67e5\u770b\u662f\u5426\u6709\u6302\u8f7d\u76ee\u5f55\uff1b\u5185\u5bb9\u662f\u5426\u4e0e\u5bbf\u4e3b\u673a\u4e00\u81f4 # cd /usr/local/data_volume # ls # cat dockervolume.txtcen \u591a\u76ee\u5f55\u6302\u8f7d\uff1a \u200b \u540c\u65f6\u5c06\u591a\u4e2a\u76ee\u5f55\u6302\u8f7d\u5230\u540c\u4e00\u4e2a\u5bb9\u5668\u3002 # docker container run -di -v /\u5bbf\u4e3b\u673a\u76ee\u5f55:/\u5bb9\u5668\u76ee\u5f55 -v /\u5bbf\u4e3b\u673a\u76ee\u5f552:/\u5bb9\u5668\u76ee\u5f55 \u955c\u50cf\u540d \u76ee\u5f55\u6302\u8f7d\u64cd\u4f5c\u53ef\u80fd\u4f1a\u51fa\u73b0\u6743\u9650\u4e0d\u8db3\u7684\u63d0\u793a\uff0c\u8fd9\u662f\u56e0\u4e3acentos7\u4e2d\u7684\u5b89\u5168\u6a21\u5757SELinux\u5427\u6743\u9650\u7981\u6389\u4e86\uff0c\u5728docker run\u65f6\u901a\u8fc7 --privilege=true\u7ed9\u8be5\u5bb9\u5668\u589e\u52a0\u6743\u9650\u6765\u89e3\u51b3\u6743\u9650\u4e0d\u8db3\u7684\u95ee\u9898\u3002 \u533f\u540d\u6302\u8f7d \u00b6 \u200b \u533f\u540d\u6302\u8f7d\u53ea\u9700\u8981\u5199\u5bb9\u5668\u76ee\u5f55\u5373\u53ef\uff0c\u5bb9\u5668\u5916\u5bf9\u5e94\u7684\u76ee\u5f55\u4f1a\u5728/var/lib/docker/volume\u4e2d\u751f\u6210\u3002 # docker run -di -v /usr/local/niming --name niming centos:7 \u200b \u4f7f\u7528docker inspect \u80fd\u591f\u627e\u5230\u5bb9\u5668\u4e0a\u7684\u6302\u8f7d\u76ee\u5f55\u5bf9\u5e94\u5728\u5bbf\u4e3b\u673a\u4e0a\u7684\u4f4d\u7f6e\u3002 \u5177\u540d\u6302\u8f7d \u00b6 \u200b \u5177\u540d\u6302\u8f7d\u5c31\u662f\u7ed9\u4e92\u6570\u636e\u5377\u8d77\u4e86\u4e2a\u540d\u5b57\uff0c\u5bb9\u5668\u5916\u5bf9\u5e94\u7684\u76ee\u5f55\u4f1a\u5728/var/lib/docker/volume # docker run -di -v \u5bb9\u5668\u6302\u8f7d\u70b9\u540d\u79f0:\u6302\u8f7d\u70b9\u4f4d\u7f6e --name \u5bb9\u5668\u540d \u955c\u50cf # docker run -di -v docker_centos_data:/usr/local/niming --name niming centos:8 \u53ea\u8bfb/\u8bfb\u5199 \u00b6 volumes-from\uff08\u7ee7\u627f\uff09 \u00b6 // \u5bb9\u5668centos7-01\u6307\u5b9a\u6302\u8f7d\u76ee\u5f55 # docker run -di -v /mydata/docker_centos/data:/usr/local/data --name centos7-01 centos:7 // \u5bb9\u5668centos7-04 \u548ccentos7-05 \u76f8\u5f53\u4e8e\u7ee7\u627fcentos7-01\u5bb9\u5668\u7684\u6302\u8f7d\u76ee\u5f55 # docker run -di --volumes-from centos7-01 --name centos7-04 centos:7 # docker run -di --volumes-from centos7-01 --name centos7-05 centos:7 14.\u67e5\u770b\u5bb9\u5668IP \u00b6 \u53ef\u4ee5\u901a\u8fc7 dokcer inspect \u5bb9\u5668\u540d\u79f0|\u5bb9\u5668ID\u67e5\u770b\u5bb9\u5668\u7684\u5143\u4fe1\u606f # docker inspect niming01 # docker inspect --format='{{.NetworkSettings.IPAddress}}' niming01","title":"04-Docker\u5bb9\u5668"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#04-docker","text":"","title":"04-Docker\u5bb9\u5668"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#1","text":"\u5bb9\u5668\u662f\u955c\u50cf\u8fd0\u884c\u65f6\u7684\u5b9e\u4f8b\u3002\u5982\u540c\u4ece\u865a\u62df\u5316\u5e73\u53f0\u4e0a\u901a\u8fc7\u6a21\u677f\u7684\u65b9\u5f0f\u542f\u52a8\u865a\u62df\u673a\u662f\u4e00\u6837\u7684\u3002\u7528\u6237\u53ef\u4ee5\u4ece\u5355\u4e2a\u955c\u50cf\u542f\u52a8\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u5bb9\u5668\u3002 \u200b \u5bb9\u5668\u662f\u6253\u5305\u4ee3\u7801\u53ca\u5176\u6240\u6709\u4f9d\u8d56\u9879\u7684\u6807\u51c6\u8f6f\u4ef6\u5355\u5143\uff0c\u56e0\u6b64\u53ef\u4ee5\u65b9\u4fbf\u7a0b\u5e8f\u5728\u4e0d\u540c\u7684\u8ba1\u7b97\u73af\u5883\u4e4b\u95f4\u5b9e\u73b0\u5feb\u901f\uff0c\u53ef\u9760\u7684\u8fc1\u79fb\u3002Docker Container Image\u662f\u4e00\u4e2a\u72ec\u7acb\uff0c\u6807\u51c6\u5316\uff0c\u8f7b\u91cf\u7ea7\uff0c\u53ef\u6267\u884c\u7684\u8f6f\u4ef6\u5305\u3002\u5176\u4e2d\u5305\u542b\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u4e00\u5207\uff1a\u4ee3\u7801\u3001\u8fd0\u884c\u73af\u5883\u3001\u7cfb\u7edf\u5de5\u5177\u3001\u7cfb\u7edf\u5e93\u548c\u914d\u7f6e\u6587\u4ef6\u3002 \u200b \u865a\u62df\u673a\u548c\u5bb9\u5668\u4e4b\u95f4\u7684\u6700\u5927\u533a\u522b\u662f\u5bb9\u5668\u66f4\u52a0\u5feb\u901f\u5e76\u4e14\u66f4\u52a0\u8f7b\u91cf\u7ea7\u2014\u2014\u865a\u62df\u673a\u9700\u8981\u8fd0\u884c\u5728\u5b8c\u6574\u7684\u64cd\u4f5c\u7cfb\u7edfdocker\u53ea\u9700\u8981\u4e0e\u5bbf\u4e3b\u673a\u7684\u64cd\u4f5c\u7cfb\u7edf\u5171\u4eab\u5185\u6838\u3002","title":"1.\u5bb9\u5668\u7b80\u4ecb"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#2","text":"\u5bb9\u5668\u548c\u865a\u62df\u673a\u4e4b\u95f4\u7684\u6bd4\u8f83\u3002\u5728\u524d\u9762\u7684\u5185\u5bb9\u8bb2\u89e3\u8fc7\u7a0b\u4e2d\u4e00\u76f4\u7528\u865a\u62df\u673a\u8ddf\u5bb9\u5668\u7c7b\u6bd4\u7684\u65b9\u5f0f\u5e2e\u52a9\u5927\u5bb6\u7406\u89e3\u4ec0\u4e48\u5bb9\u5668\u3002\u4f46\u662f\u5bb9\u5668\u548c\u865a\u62df\u673a\u4e4b\u95f4\u8fd8\u662f\u6709\u4e9b\u8bb8\u7684\u533a\u522b\u7684\uff0c\u5e76\u4e14\u8fd9\u4e5f\u5f88\u91cd\u8981\u3002 \u200b \u5bb9\u5668\u548c\u865a\u62df\u673a\u90fd\u4f9d\u8d56\u4e8e\u5bbf\u4e3b\u673a\u624d\u80fd\u6b63\u5e38\u8fd0\u884c\u3002\u5bbf\u4e3b\u673a\u53ef\u4ee5\u4f7f\u7b14\u8bb0\u672c\uff0c\u6570\u636e\u4e2d\u5fc3\u7684\u7269\u7406\u670d\u52a1\u5668\uff0c\u4e5f\u53ef\u4ee5\u662f\u5728\u4e91\u4e0a\u7684\u5f39\u6027\u4e91\u670d\u52a1\u5668\u5b9e\u4f8b\u3002 \u200b \u901a\u5e38\u5728\u865a\u62df\u673a\u6a21\u578b\u4e2d\uff0c\u9996\u5148\u8981\u5f00\u542f\u7269\u7406\u673a\u542f\u52a8hypervisor\u5f15\u5bfc\u7a0b\u5e8f\u3002\u4e00\u65e6hypervisor\u542f\u52a8\uff0c\u5c31\u4f1a\u5360\u7528\u673a\u5668\u4e0a\u5168\u90e8\u7684\u7269\u7406\u8d44\u6e90\u3002\u5305\u62ec\u8ba1\u7b97\u8d44\u6e90\uff0c\u5b58\u50a8\u8d44\u6e90\u548c\u7f51\u7edc\u8d44\u6e90\u3002\u7136\u540ehypervisor\u63a5\u7ba1\u8fd9\u4e9b\u8d44\u6e90\u4e4b\u540e\u4f1a\u628a\u8fd9\u4e9b\u8d44\u6e90\u5212\u5206\u5230\u76f8\u5e94\u7684\u8d44\u6e90\u6c60\u5f53\u4e2d\u5f62\u6210\u9897\u7c92\u5ea6\u8f83\u5c0f\u7684\u865a\u62df\u8d44\u6e90\u3002\u628a\u4e0d\u540c\u7684\u865a\u62df\u8d44\u6e90\u6309\u7167\u6240\u9700\u7684\u914d\u7f6e\u7684\u6253\u5305\u8fdb\u865a\u62df\u673a\u4e2d\uff0c\u8fd9\u6837\u7528\u6237\u5c31\u80fd\u901a\u8fc7\u865a\u62df\u673a\u53bb\u8c03\u5ea6\u8fd9\u4e9b\u865a\u62df\u8d44\u6e90\u5e76\u5728\u4e0a\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\u548c\u5e94\u7528\u63d0\u4f9b\u7ed9\u7528\u6237\u4f7f\u7528\u3002 \u200b \u5bb9\u5668\u7684\u6a21\u578b\u4e0e\u865a\u62df\u673a\u6a21\u578b\u76f8\u6bd4\u6709\u4e9b\u8bb8\u4e0d\u540c\u3002 \u200b \u670d\u52a1\u5668\u542f\u52a8\u540e\uff0c\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u7684\u64cd\u4f5c\u7cfb\u7edf\u542f\u52a8\u3002\u5728Docker\u4e16\u754c\u4e2d\u53ef\u4ee5\u9009\u62e9linux\uff0c\u6216\u8005\u5185\u6838\u652f\u6301\u5185\u6838\u4e2d\u7684\u5bb9\u5668\u539f\u8bed\u7684\u65b0\u7248\u672c\u7684windows\u3002\u4e0e\u865a\u62df\u673a\u6a21\u578b\u76f8\u540c\u3002OS\u4e5f\u5360\u7528\u4e86\u5168\u90e8\u786c\u4ef6\u8d44\u6e90\u3002\u5728OS\u5c42\u4e4b\u4e0a\uff0c\u9700\u8981\u5b89\u88c5\u5bb9\u5668\u5f15\u64ce\uff08\u5982Docker\uff09\u5bb9\u5668\u53ef\u4ee5\u83b7\u53d6\u7cfb\u7edf\u8d44\u6e90\uff0c\u6bd4\u5982\u8fdb\u7a0b\u6811\u3001\u6587\u4ef6\u7cfb\u7edf\u4ee5\u53ca\u7f51\u7edc\u6808\uff0c\u63a5\u7740\u8bb2\u8d44\u6e90\u5206\u5272\u6210\u4e3a\u5b89\u5168\u7684\u76f8\u4e92\u9694\u79bb\u7684\u8d44\u6e90\u7ed3\u6784\uff0c\u79f0\u4e4b\u4e3a\u5bb9\u5668\u3002\u6bcf\u4e2a\u5bb9\u5668\u770b\u8d77\u6765\u5c31\u50cf\u4e00\u4e2a\u771f\u5b9e\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5728\u5176\u5185\u90e8\u53ef\u4ee5\u8fd0\u884c\u5e94\u7528\u3002 \u200b Hypervisor\u5b9e\u73b0\u7684\u786c\u4ef6\u865a\u62df\u5316\uff0cHypervisor\u5c06\u786c\u4ef6\u8d44\u6e90\u5212\u5206\u4e3a\u865a\u62df\u5316\u8d44\u6e90\uff1b\u53e6\u5916\uff0c\u5bb9\u5668\u662f\u64cd\u4f5c\u7cfb\u7edf\u865a\u62df\u5316\u3002\u591a\u4e2a\u5bb9\u5668\u5171\u4eab\u5bbf\u4e3b\u673a\u7684\u5185\u6838\u3002 \u200b \u865a\u62df\u673a\u5e26\u6765\u7684\u5f00\u9500\u95ee\u9898\u3002\u865a\u62df\u673a\u6a21\u578b\u5c06\u5e95\u5c42\u7684\u786c\u4ef6\u8d44\u6e90\u5212\u5206\u5230\u865a\u62df\u673a\u5f53\u4e2d\u3002\u6bcf\u4e2a\u865a\u62df\u673a\u90fd\u5206\u914d\u4e86\u4e00\u5b9a\u7684CPU\uff0c\u5185\u5b58\uff0c\u5b58\u50a8\uff0c\u7f51\u7edc\u7b49\u8d44\u6e90\u3002\u7136\u540e\u5728\u865a\u62df\u673a\u4e0a\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\uff0c\u7136\u540e\u5728\u865a\u62df\u673a\u4e0a\u5b89\u88c5\u6240\u9700\u7684\u5e94\u7528\u8f6f\u4ef6\uff0c\u4f46\u662f\u865a\u62df\u673a\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5e26\u6765\u5f00\u9500\uff0c\u4e5f\u5c31\u662f\u8bf4\u865a\u62df\u673a\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u5360\u7528\u4e00\u5b9a\u7684\u8d44\u6e90\u6765\u7ef4\u6301\u81ea\u8eab\u7684\u6b63\u5e38\u8fd0\u884c\u548c\u5bf9\u865a\u62df\u673a\u4e0a\u786c\u4ef6\u548c\u8f6f\u4ef6\u8d44\u6e90\u7684\u7ba1\u7406\u3002\u901a\u5e38\u8fd9\u79cd\u5f00\u9500\u88ab\u79f0\u4e4b\u4e3aOS Tax\u6216\u8005\u662fVM Tax\u3002 \u200b \u5bb9\u5668\u6a21\u578b\u5177\u6709\u5728\u5bbf\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u8fd0\u884c\u7684\u5355\u4e2a\u5185\u6838\u3002\u5728\u4e00\u53f0\u5bbf\u4e3b\u673a\u4e0a\u8fd0\u884c\u6570\u5341\u4e2a\u6216\u8005\u6570\u767e\u4e2a\u5bb9\u5668\u4e5f\u662f\u53ef\u884c\u7684\u2014\u2014\u5728\u5bbf\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u7684\u5bb9\u5668\u5171\u7528\u4e00\u4e2a\u5185\u6838\u3002\u8fd9\u610f\u5473\u7740\u53ea\u6709\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u6d88\u8017cpu\uff0c\u5185\u5b58\uff0c\u5b58\u50a8\u8d44\u6e90\u3002\u53ea\u6709\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u6388\u6743license\u3002\u4e5f\u5c31\u53ea\u6709\u4e00\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u6d88\u8017\u8d44\u6e90\uff0c\u8fd9\u6837\u4e00\u6765\u5927\u5927\u51cf\u5c11\u4e86\u8d44\u6e90\u7684\u5f00\u9500\u3002 \u200b \u5bb9\u5668\u548c\u865a\u62df\u673a\u76f8\u6bd4\u5e76\u4e0d\u662f\u4e00\u4e2a\u5b8c\u6574\u610f\u4e49\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\u3002\u5bb9\u5668\u7684\u542f\u52a8\u65f6\u95f4\u662f\u8981\u8fdc\u8fdc\u5feb\u4e8e\u4f20\u7edf\u7684\u865a\u62df\u673a\u7684\u3002 \u5bb9\u5668\u5185\u90e8\u5e76\u4e0d\u5305\u542b\u5185\u6838 \u3002 \u200b linux\u7684\u64cd\u4f5c\u7cfb\u7edf\u7531\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u7ec4\u6210\uff0c\u5185\u6838\u7a7a\u95f4\u662fkernel\uff0c\u7528\u6237\u7a7a\u95f4\u662frootfs, \u4e0d\u540cLinux\u53d1\u884c\u7248\u7684\u533a\u522b\u4e3b\u8981\u662frootfs.\u4e0d\u540c\u7684\u5bb9\u5668\u5171\u7528\u4e00\u4e2a\u5185\u6838\u53ea\u662frootfs\u4e0d\u540c\u3002\u5bb9\u5668\u4e0d\u9700\u8981\u5185\u6838\u56e0\u4e3a\u5185\u6838\u7531\u5bbf\u4e3b\u673a\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u3002 \u5728\u8fd9\u91cc\u6211\u53ef\u4ee5\u505a\u4e00\u4e2a\u5b9e\u9a8c\u4f50\u8bc1\u6211\u521a\u624d\u7684\u8bf4\u6cd5\u3002\u6211\u642d\u5efa\u4e86\u4e24\u5957docker\u5b9e\u9a8c\u73af\u5883\uff0c\u5b9e\u9a8c\u5e73\u53f0A\u4f7f\u7528\u7684centos 7\u64cd\u4f5c\u7cfb\u7edf\u4f5c\u4e3a\u5bbf\u4e3b\u673a\u7684\u64cd\u4f5c\u7cfb\u7edf\uff1b\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684docker\u73af\u5883\u3002\u5b9e\u9a8c\u5e73\u53f0B\u4f7f\u7528\u7684centos 8\u64cd\u4f5c\u7cfb\u7edf\u4f5c\u4e3a\u5bbf\u4e3b\u673a\u7684\u64cd\u4f5c\u7cfb\u7edf\uff1b\u540c\u6837\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684docker\u73af\u5883\u3002\u5b9e\u9a8c\u5e73\u53f0A\u548c\u5b9e\u9a8c\u5e73\u53f0B\u90fd\u901a\u8fc7docker pull ubuntu:latest\u62c9\u53d6\u5b98\u65b9\u4ed3\u5e93\u7684\u9ed8\u8ba4ubuntu\u955c\u50cf\u3002\u5206\u522b\u67e5\u770b\u4e24\u5957\u5e73\u53f0\u4e2d\u8fd0\u884c\u7684ubuntu\u5bb9\u5668\u4e2d\u5185\u6838\u7684\u7248\u672c\u548c\u5bbf\u4e3b\u673a\u7684\u7248\u672c\u3002 \u200b centos 8 \u200b centos 7","title":"2.\u5bb9\u5668\u8be6\u89e3"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#3docker-daemo","text":"\u901a\u5e38\u767b\u5f55Docker\u4e3b\u673a\u7684\u7b2c\u4e00\u4ef6\u4e8b\u5c31\u662f\u68c0\u67e5Docker\u662f\u5426\u5728\u8fd0\u884c\u72b6\u6001\u3002 # docker version [root@Docker ~]# docker version Client: Docker Engine - Community Version: 20.10.8 API version: 1.41 Go version: go1.16.6 Git commit: 3967b7d Built: Fri Jul 30 19:55:49 2021 OS/Arch: linux/amd64 Context: default Experimental: true Server: Docker Engine - Community Engine: Version: 20.10.8 API version: 1.41 (minimum version 1.12) Go version: go1.16.6 Git commit: 75249d8 Built: Fri Jul 30 19:54:13 2021 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.4.9 GitCommit: e25210fe30a0a703442421b0f60afac609f950a3 runc: Version: 1.0.1 GitCommit: v1.0.1-0-g4144b63 docker-init: Version: 0.19.0 GitCommit: de40ad0 \u5f53\u8f93\u51fa\u7684\u5185\u5bb9\u5305\u542bClient\u548cServer\u7684\u5185\u5bb9\u65f6\uff0c\u8868\u793aDocker Daemon\u6b63\u5728\u8fd0\u884c\u3002 \u5982\u679cDocker Daemon\u6ca1\u6709\u5904\u5728\u8fd0\u884c\u72b6\u6001\u53ef\u4ee5\u4f7f\u7528 # service docker status \u542f\u52a8docker daemon\uff0c\u53ea\u8981\u663e\u793a\u5982\u4e0b\u5185\u5bb9\u8868\u793a\u542f\u52a8\u6210\u529f\u3002","title":"3.\u68c0\u67e5docker Daemo"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#4","text":"# docker container run -it ubuntu:latest /bin/bash \u5982\u679c\u672c\u5730\u6709\u76f8\u5173\u955c\u50cf\u5c31\u76f4\u63a5\u5c06\u955c\u50cf\u542f\u52a8\u4e3a\u5bb9\u5668\u3002 \u5982\u679c\u8981\u542f\u52a8\u7684\u5bb9\u5668\u7684\u955c\u50cf\u4e0d\u5728\u672c\u5730\uff0c\u90a3\u4e48\u542f\u52a8\u955c\u50cf\u9700\u8981\u5148\u4ece\u7f51\u7edc\u4e0a\u7684\u4ed3\u5e93\u8fdb\u884c\u4e0b\u8f7d\u3002\u4e0b\u8f7d\u5b8c\u6210\u540e\u624d\u80fd\u8fd0\u884c\u3002 # docker container run -it node","title":"4.\u542f\u52a8\u5bb9\u5668"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#5","text":"\u5728\u542f\u52a8ubuntu\u955c\u50cf\u8fd0\u884cBash shell\uff08/bin/bash\uff09\u3002\u8fd9\u4f7f\u5f97**bash shell\u6210\u4e3a\u8be5\u5bb9\u5668\u4e2d\u552f\u4e00\u8fd0\u884c\u7684\u8fdb\u7a0b**\uff0c\u4f46\u662f\u4f7f\u7528ps -elf\u67e5\u770b\u8fdb\u7a0b\u662f\u53d1\u73b0ubuntu\u5bb9\u5668\u4e2d\u5b9e\u9645\u4e0a\u5305\u542b\u4e24\u4e2a\u8fdb\u7a0b\u3002\u5217\u8868\u4e2dPID\u4e3a1 \u7684\u662f\u5bb9\u5668\u4e2d\u8fd0\u884c\u7684bash shell\u8fdb\u7a0b\u8868\uff0c\u800cPID 10\u662fps -elf\u4ea7\u751f\u7684\uff0c\u8fd9\u662f\u4e00\u4e2a\u4e34\u65f6\u8fdb\u7a0b\uff0c\u5728\u8f93\u51fa\u7ed3\u679c\u540e\u8be5\u8fdb\u7a0b\u5c31\u9000\u51fa\u4e86\u3002","title":"5.\u5bb9\u5668\u8fdb\u7a0b"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#6","text":"\u200b \u6240\u8c13\u7684\u751f\u547d\u5468\u671f\u5b9e\u9645\u4e0a\u53ef\u4ee5\u7406\u89e3\u4e3a\u5bb9\u5668\u4ece\u521b\u5efa\u5230\u9500\u6bc1\u7684\u8fc7\u7a0b\u4e2d\u505a\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u53ef\u4ee5\u79f0\u4e4b\u4e3a\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\u3002 \u200b \u4e00\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u95ee\u9898\uff0c\u5bb9\u5668\u80fd\u591f\u5bf9\u6570\u636e\u8fdb\u884c\u6301\u4e45\u5316\u64cd\u4f5c\u5417\uff1f \u5bb9\u5668\u662f\u53ef\u4ee5\u5bf9\u6570\u636e\u8fdb\u884c\u6301\u4e45\u5316\u64cd\u4f5c\u7684 \u3002 \u200b \u672c\u6b21\u5b9e\u9a8c\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5bb9\u5668\uff0c\u7528\u6765\u89c2\u5bdf\u8be5\u5bb9\u5668\u5b8c\u6574\u7684\u751f\u547d\u5468\u671f\u3002 1.\u542f\u52a8\u4e00\u4e2aubuntu:latest\u5bb9\u5668\u5e76\u5c06\u5176\u547d\u540d\u4e3apercy # docker container run --name percy -it /bin/bash 2.\u5c06\u6570\u636e\u5199\u5165\u5230tmp\u76ee\u5f55\u4e0b\u7684\u67d0\u4e2a\u6587\u4ef6 root@eea152e1190b:/# cd tmp/ root@eea152e1190b:/tmp# ll total 0 drwxrwxrwt. 2 root root 6 Aug 27 07 :27 ./ drwxr-xr-x. 1 root root 6 Sep 8 01 :49 ../ root@eea152e1190b:/tmp# echo \"Miaomiao\" > myheart root@eea152e1190b:/tmp# ls -l total 4 -rw-r--r--. 1 root root 9 Sep 8 01 :55 myheart root@eea152e1190b:/tmp# cat myheart Miaomiao 3.\u63a5\u4e0b\u6765\u505c\u6b62\u8fd0\u884cpercy\u5bb9\u5668 # docker container stop percy 4.\u67e5\u770bpercy\u5bb9\u5668\u662f\u5426\u8fd8\u5728\u8fd0\u884c\u72b6\u6001\u3002 # docker container ls \u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u4e2d\u5df2\u7ecf\u6ca1\u6709\u540d\u79f0\u4e3apercy\u7684\u5bb9\u5668\u4e86\uff0c\u8bc1\u660e\u8be5\u5bb9\u5668\u5df2\u7ecf\u505c\u6b62\u8fd0\u884c\u3002 5.\u67e5\u770b\u6240\u6709\u5bb9\u5668\u7684\u72b6\u6001\u5305\u62ec\u5904\u4e8e\u505c\u6b62\u72b6\u6001\u7684\u5bb9\u5668 # docker container ls -a 6.\u91cd\u542fpercy\u5bb9\u5668 # docker container start percy 7.\u67e5\u770bpercy\u5bb9\u5668\u7684\u662f\u5426\u88ab\u542f\u52a8 8.\u8fde\u63a5\u5230percy\u5bb9\u5668 # docker container exec -it percy /bin/bash 9.\u67e5\u770bpercy\u5bb9\u5668\u4e2d\u521b\u5efa\u7684\u6587\u4ef6\u662f\u5426\u5b58\u5728 root@eea152e1190b:/# cd tmp/ root@eea152e1190b:/tmp# ll total 4 drwxrwxrwt. 1 root root 21 Sep 8 01 :55 ./ drwxr-xr-x. 1 root root 29 Sep 8 01 :49 ../ -rw-r--r--. 1 root root 9 Sep 8 01 :55 myheart root@eea152e1190b:/tmp# cat myheart Miaomiao \u5bb9\u5668\u91cd\u542f\u540e\uff0c\u4e4b\u524d\u5728\u5bb9\u5668\u4e2d\u521b\u5efa\u7684\u6587\u4ef6\u4f9d\u7136\u5b58\u5728\uff0c\u5e76\u4e14\u6587\u4ef6\u4e2d\u5305\u542b\u7684\u6570\u636e\u5e76\u6ca1\u6709\u53d1\u751f\u53d8\u66f4\u3002\u8fd9\u8bf4\u660e\u5bb9\u5668\u91cd\u542f\u6216\u8005\u505c\u6b62\u8fd0\u884c\u90fd\u4e0d\u4f1a\u635f\u6bc1\u5bb9\u5668\u548c\u5176\u4e2d\u7684\u6570\u636e\u3002 \u200b \u4e0a\u9762\u7684\u5b9e\u9a8c\u8bf4\u660e\u4e86\u5bb9\u5668\u662f\u80fd\u591f\u8fdb\u884c\u6570\u636e\u7684\u6301\u4e45\u5316\u5b58\u50a8\u7684\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5377\uff08volume\uff09\u624d\u662f\u5bb9\u5668\u4e2d\u5b58\u50a8\u6301\u4e45\u5316\u6570\u636e\u7684\u9996\u9009\u65b9\u5f0f\u3002 \u76f4\u63a5\u5220\u9664\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u3002 \u200b \u9996\u5148\u67e5\u770b\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668 # docker container ls \u200b \u5220\u9664\u5bb9\u5668\u53ef\u4ee5\u4f7f\u7528Container ID\u6216\u8005\u662f\u5bb9\u5668\u7684\u540d\u79f0\uff08\u540d\u79f0\u53ef\u4ee5\u81ea\u52a8\u751f\u6210\u4e5f\u53ef\u4ee5\u4eba\u4e3a\u6307\u5b9a\uff09 # docker container rm percy cb9162562fbe -f \u867d\u7136\u4f7f\u7528 -f\u53c2\u6570\u53ef\u4ee5\u76f4\u63a5\u4e0d\u52a0\u63d0\u793a\u7684\u4ea7\u51fa\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\uff1b\u4f46\u662f\u975e\u5e38\u4e0d\u5efa\u8bae\u8fd9\u4e48\u505a\u3002\u5728\u751f\u4ea7\u6d3b\u52a8\u4e2d\u5220\u9664\u5bb9\u5668\u6700\u597d\u8fd8\u662f\u5206\u4e24\u6b65\uff1a1.\u505c\u6b62\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668 2.\u5220\u9664\u505c\u6b62\u7684\u5bb9\u5668\u3002\u8fd9\u6837\u624d\u8db3\u591f\u4f18\u96c5\u3002 \u200b \u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\uff1b\u5305\u542b\u4e86\u5bb9\u5668\u7684\u542f\u52a8\uff0c\u8fd0\u884c\uff0c\u505c\u6b62\uff0c\u6682\u505c\u7b49\u591a\u6b21\u64cd\u4f5c\u3002\u9664\u975e\u5220\u9664\u5bb9\u5668\uff0c\u5426\u5219\u5bb9\u5668\u5e76\u4e0d\u4f1a\u4e22\u5931\u5176\u4e2d\u7684\u6570\u636e\u3002\u4f46\u662f\u5982\u679c\u6570\u636e\u662f\u5b58\u653e\u5728\u5377\u5f53\u4e2d\u7684\uff0c\u5373\u4f7f\u5220\u9664\u5377\uff0c\u6570\u636e\u4e5f\u4f1a\u88ab\u4fdd\u5b58\u4e0b\u6765\u3002","title":"6.\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#7","text":"\u200b \u5728\u8fd0\u884c\u5bb9\u5668\u65f6\u6700\u597d\u914d\u7f6e\u597d\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565\u3002\u8fd9\u662f\u5bb9\u5668\u7684\u4e00\u79cd\u81ea\u6211\u4fee\u590d\u3002\u53ef\u4ee5\u5728\u6307\u5b9a\u65f6\u95f4\u6216\u8005\u53d1\u751f\u9519\u8bef\u540e\u901a\u8fc7\u91cd\u542f\u6765\u5b8c\u6210\u81ea\u6211\u4fee\u590d\uff08\u91cd\u542f\u771f\u7684\u80fd\u591f\u89e3\u51b3\u767e\u5206\u4e4b\u4e5d\u5341\u4e5d\u7684\u95ee\u9898 \u54c8\u54c8\uff09\u3002 \u200b \u91cd\u542f\u7b56\u7565\u53ef\u4ee5\u5e94\u7528\u4e8e\u6bcf\u4e2a\u5bb9\u5668\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165docker-container run\u547d\u4ee4\u4e2d\u6216\u8005\u65e9Compose\u6587\u4ef6\u4e2d\u58f0\u660e\uff08\u9700\u8981\u5728\u4f7f\u7528Docker Compose\u4ee5\u53caDocker Stacks\u65f6\u624d\u53ef\u4ee5\uff09\u3002 \u200b \u5bb9\u5668\u652f\u6301\u7684\u91cd\u542f\u7b56\u7565\u3002 always always\u662f\u4e00\u79cd\u7b80\u5355\u7684\u91cd\u542f\u7b56\u7565\uff1b\u9664\u975e\u4f7f\u7528\u624b\u52a8\u505c\u6b62\uff1b\u5982docker container stop [containerID|containerName]\u7684\u65b9\u5f0f\u505c\u6b62\u8fd0\u884c\u7684\u5bb9\u5668\u3002always\u8fd8\u6709\u4e00\u4e2a\u6709\u610f\u601d\u7684\u5730\u65b9\u5728\u4e8e\u5f53docker daemon\u91cd\u542f\u7684\u65f6\u5019\uff0c\u5373\u4f7f\u624b\u52a8\u65b9\u5f0f\u505c\u6b62\u7684\u5bb9\u5668\u4e5f\u4f1a\u91cd\u542f\u3002 unless-stopped unless-stoppde\u548calways\u6700\u5927\u7684\u533a\u522b\u5c31\u662f\u5f53docker daemon\u91cd\u542f\u7684\u65f6\u5019\uff1b\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565\u4e3aunless-stopped\u65f6\u4e0d\u4f1a\u88ab\u7b56\u7565\u89e6\u53d1\u91cd\u542f\u64cd\u4f5c\u3002 on-failed on-failed\u7b56\u7565\u4f1a\u5728\u9000\u51fa\u5bb9\u5668\u5e76\u4e14\u8fd4\u56de\u503c\u4e0d\u662f0\uff080\u8868\u793a\u6b63\u5e38\u9000\u51fa\uff09\u7684\u65f6\u5019\uff0c\u89e6\u53d1\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565\u3002\u5c31\u7b97\u5bb9\u5668\u5904\u4e8estopped\u72b6\u6001\u5e76\u4e14\u5728Docker deamon\u91cd\u542f\u7684\u65f6\u5019\uff0c\u5bb9\u5668\u4e5f\u4f1a\u88ab\u91cd\u542f\u3002 on-failed:3 \u4e0eon-failed\u7684\u7b56\u7565\u57fa\u672c\u4e00\u81f4\uff0c\u53ea\u4e0d\u8fc7\u6700\u591a\u91cd\u542f3\u6b21\u3002 no\uff08default\uff09 \u9ed8\u8ba4\u7b56\u7565\uff0c\u5728\u5bb9\u5668\u9000\u51fa\u65f6\u4e0d\u91cd\u542f\u5bb9\u5668\u3002","title":"7.\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#always","text":"# docker container run --name always -it --restart always ubuntu:latest /bin/bash \u7528\u547d\u4ee4\u67e5\u770b\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u53d1\u73b0CREATE\u65f6\u95f4\u662f4minutes\u4e4b\u524d\uff0c\u4f46\u662f\u542f\u52a8\u65f6\u95f4\u662f11seconds\u4e4b\u524d\u3002\u8868\u793a\u5728\u6267\u884cexit\u9000\u51fa\u540e\uff0cdocker\u663e\u793a\u81ea\u52a8\u6740\u6b7b\u4e86\u8fd9\u4e2a\u5bb9\u5668\u8fdb\u7a0b\u7136\u540e\u51fa\u53d1\u4e86\u5bb9\u5668\u7684always\u7b56\u7565\u81ea\u52a8\u5c06\u5bb9\u5668\u91cd\u542f\u4e86\u3002 # docker container ls \u5728always\u7b56\u7565\u7684\u5bb9\u5668\u505c\u6b62\u7684\u60c5\u51b5\u4e0b\uff0c\u91cd\u542fdocker deamon\uff1b\u53d1\u73b0always\u7b56\u7565\u7684\u5bb9\u5668\u81ea\u52a8\u91cd\u542f\u4e86\u3002 # docker container stop always # docker container ls -a # systemctl restart docker # docker container ls","title":"always"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#unless-stopped","text":"\u521b\u5efa\u4e00\u4e2a\u91cd\u542f\u7b56\u7565\u4e3aunless-stopped\u7684\u5bb9\u5668 # docker container run --name unless-stopped -it --restart unless-stopped ubuntu:latest /bin/bash \u9000\u51fa\u5bb9\u5668\u4e4b\u540e\uff1b\u67e5\u770b\u8be5\u5bb9\u5668\u7684\u7b56\u7565\u662f\u5426\u6267\u884c\u3002\u663e\u793a\u5bb9\u5668\u7684\u521b\u5efa\u65f6\u95f4\u662f22\u79d2\u524d\uff0c\u4f46\u662f\u521b\u5efa\u65f6\u95f4\u662f7\u79d2\u524d\u3002\u8868\u793a\u51fa\u53d1\u4e86unless-stopped\u7b56\u7565\uff0c\u5c06\u5bb9\u5668\u91cd\u542f\u4e86\u3002 \u4f7f\u7528\u547d\u4ee4\u624b\u52a8\u505c\u6b62\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u3002 # docker container stop unless-stopped \u67e5\u770b\u5bb9\u5668\u7684\u72b6\u6001 # docker container ls -a \u91cd\u542fdocker deamon # systemctl restart docker \u5728\u6b64\u67e5\u770b\u8be5\u5bb9\u5668\u7684\u72b6\u6001\u53d1\u73b0\u5bb9\u5668\u6ca1\u6709\u88ab\u542f\u52a8","title":"unless-stopped"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#8docker","text":"# docker container rm $(docker container ls -aq) -f","title":"8.\u5feb\u901f\u6e05\u7406\u6240\u6709\u7684docker\u5bb9\u5668"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#9","text":"\u53ef\u4ee5\u4f7f\u7528\u5bb9\u5668ID\u6216\u8005\u5bb9\u5668\u540d # docker container inspect ubuntutest","title":"9.\u67e5\u770b\u5bb9\u5668\u7684\u914d\u7f6e\u7ec6\u8282\u548c\u8fd0\u884c\u65f6\u4fe1\u606f\u3002"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#10","text":"\u5982\u679c\u8981\u5bfc\u51fa\u672c\u5730\u67d0\u4e2a\u5bb9\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528docker export\u547d\u4ee4 \u200b \u67e5\u770b\u5bb9\u5668\u7684ID\u6216\u8005\u540d\u79f0 # docker container ls \u200b \u5bfc\u51fa\u5bb9\u5668 # docker container export 9ecb95ba5b7e > nginx.tar","title":"10.\u5bfc\u51fa\u5bb9\u5668"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#11","text":"\u5982\u679c\u8981\u5bfc\u5165\u672c\u5730\u67d0\u4e2a\u5bb9\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528docker import\u547d\u4ee4 # docker import xxx.tar <image:Ltag>","title":"11.\u5bfc\u5165\u5bb9\u5668"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#12","text":"","title":"12.\u6587\u4ef6\u62f7\u8d1d"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#13","text":"\u200b \u5728\u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\uff0c\u5c06\u5bbf\u4e3b\u673a\u7684\u76ee\u5f55\u4e0e\u5bb9\u5668\u5185\u7684\u76ee\u5f55\u8fdb\u884c\u6620\u5c04\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u5bbf\u4e3b\u673a\u67d0\u4e2a\u76ee\u5f55\u7684\u6587\u4ef6\u4ece\u800c\u53bb\u5f71\u54cd\u5bb9\u5668\uff0c\u800c\u4e14\u8fd9\u4e2a\u64cd\u4f5c\u662f\u53cc\u5411\u7ed1\u5b9a\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u5bb9\u5668\u5185\u7684\u64cd\u4f5c\u4e5f\u4f1a\u5f71\u54cd\u5230\u5bbf\u4e3b\u673a\u5b9e\u73b0\u5907\u4efd\u529f\u80fd\u3002 \u200b \u4f46\u662f\u5bb9\u5668\u88ab\u5220\u9664\u7684\u65f6\u5019\uff0c\u5bbf\u4e3b\u673a\u5185\u7684\u5185\u5bb9\u4e0d\u4f1a\u88ab\u5220\u9664\u3002\u5982\u679c\u591a\u4e2a\u5bb9\u5668\u6302\u8f7d\u540c\u4e00\u4e2a\u76ee\u5f55\uff0c\u5176\u4e2d\u4e00\u4e2a\u5bb9\u5668\u88ab\u5220\u9664\uff0c\u5176\u5b83\u5bb9\u5668\u7684\u5185\u5bb9\u4e5f\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\u3002 \u200b \u5bb9\u5668\u4e0e\u5bbf\u4e3b\u673a\u4e4b\u95f4\u7684\u6570\u636e\u5c5e\u4e8e\u5f15\u7528\u5173\u7cfb\uff0c\u6570\u636e\u5377\u662f\u4ece\u5916\u754c\u6302\u8f7d\u5230\u5bb9\u5668\u5185\u90e8\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u8131\u79bb\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\u800c\u72ec\u7acb\u5b58\u5728\uff0c\u6b63\u662f\u7531\u4e8e\u6570\u636e\u5377\u7684\u751f\u547d\u5468\u671f\u4e0d\u7b49\u4e8e\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\uff0c\u5728\u5bb9\u5668\u9000\u51fa\u6216\u8005\u5220\u9664\u4ee5\u540e\uff0c\u6570\u636e\u4ecd\u7136\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\uff0c\u6570\u636e\u5377\u7684\u751f\u547d\u5468\u671f\u4f1a\u4e00\u76f4\u6301\u7eed\u5230\u6ca1\u6709\u5bb9\u5668\u4f7f\u7528\u5b83\u4e3a\u6b62\u3002 \u200b \u521b\u5efa\u5bb9\u5668\u6dfb\u52a0 -v\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a \u5bbf\u4e3b\u673a\u76ee\u5f55\uff1a\u5bb9\u5668\u76ee\u5f55 ,\u4f8b\u5982\uff1a \u200b \u5c06\u5bbf\u4e3b\u673a\u7684\u4e00\u4e2a\u4e00\u4e2a\u76ee\u5f55/dockervolume\u6302\u8f7d\u7ed9\u65b0\u521b\u5efa\u7684\u5bb9\u5668centos7_01\u7684/usr/local/data_volume\u3002","title":"13.\u76ee\u5f55\u6302\u8f7d\uff08\u5bb9\u5668\u6570\u636e\u5377\u64cd\u4f5c\uff09"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#_1","text":"1.\u5728\u5bbf\u4e3b\u673a\u521b\u5efa\u6302\u8f7d\u76ee\u5f55dockervolume;\u5e76\u5728\u5176\u4e2d\u521b\u5efadockervolume.txt\u6587\u4ef6\u3002 # mkdir /dockervolume # cd /dockervolume # vi dockervolume.txt #docker container run -di -v /dockervolume:/usr/local/data_volume --name centos7_01 centos:7 2.\u5728\u5bb9\u5668\u5185\u67e5\u770b\u662f\u5426\u6709\u6302\u8f7d\u76ee\u5f55\uff1b\u5185\u5bb9\u662f\u5426\u4e0e\u5bbf\u4e3b\u673a\u4e00\u81f4 # cd /usr/local/data_volume # ls # cat dockervolume.txtcen \u591a\u76ee\u5f55\u6302\u8f7d\uff1a \u200b \u540c\u65f6\u5c06\u591a\u4e2a\u76ee\u5f55\u6302\u8f7d\u5230\u540c\u4e00\u4e2a\u5bb9\u5668\u3002 # docker container run -di -v /\u5bbf\u4e3b\u673a\u76ee\u5f55:/\u5bb9\u5668\u76ee\u5f55 -v /\u5bbf\u4e3b\u673a\u76ee\u5f552:/\u5bb9\u5668\u76ee\u5f55 \u955c\u50cf\u540d \u76ee\u5f55\u6302\u8f7d\u64cd\u4f5c\u53ef\u80fd\u4f1a\u51fa\u73b0\u6743\u9650\u4e0d\u8db3\u7684\u63d0\u793a\uff0c\u8fd9\u662f\u56e0\u4e3acentos7\u4e2d\u7684\u5b89\u5168\u6a21\u5757SELinux\u5427\u6743\u9650\u7981\u6389\u4e86\uff0c\u5728docker run\u65f6\u901a\u8fc7 --privilege=true\u7ed9\u8be5\u5bb9\u5668\u589e\u52a0\u6743\u9650\u6765\u89e3\u51b3\u6743\u9650\u4e0d\u8db3\u7684\u95ee\u9898\u3002","title":"\u6307\u5b9a\u76ee\u5f55\u6302\u8f7d"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#_2","text":"\u200b \u533f\u540d\u6302\u8f7d\u53ea\u9700\u8981\u5199\u5bb9\u5668\u76ee\u5f55\u5373\u53ef\uff0c\u5bb9\u5668\u5916\u5bf9\u5e94\u7684\u76ee\u5f55\u4f1a\u5728/var/lib/docker/volume\u4e2d\u751f\u6210\u3002 # docker run -di -v /usr/local/niming --name niming centos:7 \u200b \u4f7f\u7528docker inspect \u80fd\u591f\u627e\u5230\u5bb9\u5668\u4e0a\u7684\u6302\u8f7d\u76ee\u5f55\u5bf9\u5e94\u5728\u5bbf\u4e3b\u673a\u4e0a\u7684\u4f4d\u7f6e\u3002","title":"\u533f\u540d\u6302\u8f7d"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#_3","text":"\u200b \u5177\u540d\u6302\u8f7d\u5c31\u662f\u7ed9\u4e92\u6570\u636e\u5377\u8d77\u4e86\u4e2a\u540d\u5b57\uff0c\u5bb9\u5668\u5916\u5bf9\u5e94\u7684\u76ee\u5f55\u4f1a\u5728/var/lib/docker/volume # docker run -di -v \u5bb9\u5668\u6302\u8f7d\u70b9\u540d\u79f0:\u6302\u8f7d\u70b9\u4f4d\u7f6e --name \u5bb9\u5668\u540d \u955c\u50cf # docker run -di -v docker_centos_data:/usr/local/niming --name niming centos:8","title":"\u5177\u540d\u6302\u8f7d"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#_4","text":"","title":"\u53ea\u8bfb/\u8bfb\u5199"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#volumes-from","text":"// \u5bb9\u5668centos7-01\u6307\u5b9a\u6302\u8f7d\u76ee\u5f55 # docker run -di -v /mydata/docker_centos/data:/usr/local/data --name centos7-01 centos:7 // \u5bb9\u5668centos7-04 \u548ccentos7-05 \u76f8\u5f53\u4e8e\u7ee7\u627fcentos7-01\u5bb9\u5668\u7684\u6302\u8f7d\u76ee\u5f55 # docker run -di --volumes-from centos7-01 --name centos7-04 centos:7 # docker run -di --volumes-from centos7-01 --name centos7-05 centos:7","title":"volumes-from\uff08\u7ee7\u627f\uff09"},{"location":"DevOps/Docker/04-Docker%E5%AE%B9%E5%99%A8/#14ip","text":"\u53ef\u4ee5\u901a\u8fc7 dokcer inspect \u5bb9\u5668\u540d\u79f0|\u5bb9\u5668ID\u67e5\u770b\u5bb9\u5668\u7684\u5143\u4fe1\u606f # docker inspect niming01 # docker inspect --format='{{.NetworkSettings.IPAddress}}' niming01","title":"14.\u67e5\u770b\u5bb9\u5668IP"},{"location":"DevOps/Docker/05-Docker%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA/","text":"Docker\u955c\u50cf\u6784\u5efa \u00b6 \u200b \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u516c\u5173\u4ed3\u5e93\u62c9\u53d6\u955c\u50cf\u4f7f\u7528\uff0c\u4f46\u662f\uff0c\u6709\u4e9b\u65f6\u5019\u516c\u5171\u4ed3\u5e93\u62c9\u53d6\u7684\u955c\u50cf\u5e76\u4e0d\u7b26\u5408\u6211\u4eec\u7684\u9700\u6c42\uff0c\u5c3d\u7ba1\u5df2\u7ecf\u4ece\u7e41\u7410\u7684\u90e8\u7f72\u5de5\u4f5c\u4e2d\u89e3\u653e\u51fa\u6765\uff0c\u4f46\u662f\u5b9e\u9645\u5f00\u53d1\u65f6\uff0c\u6211\u4eec\u5e0c\u671b\u955c\u50cf\u5305\u542b\u6574\u4e2a\u9879\u76ee\u7684\u5b8c\u6574\u73af\u5883\uff0c\u5728\u5176\u4ed6\u673a\u5668\u4e0a\u62c9\u53d6\u6253\u5305\u5b8c\u6574\u7684\u955c\u50cf\uff0c\u76f4\u63a5\u8fd0\u884c\u5373\u53ef\u3002 docker commit:\u4ece\u5bb9\u5668\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u955c\u50cf docker build:\u914d\u5408Dockerfile\u6587\u4ef6\u521b\u5efa\u955c\u50cf 1.\u521b\u5efa\u5bb9\u5668 2.\u62f7\u8d1d\u8d44\u6e90 3.\u89e3\u538b\u8d44\u6e90\uff1b\u8c03\u6574\u914d\u7f6e\u6587\u4ef6 # cd /root/ # mkdir -p /usr/local/java # mkdir -p /usr/local/tomcat # tar -zxvf apache-tomcat-9.0.53.tar.gz -C /usr/local/tomcat # tar -zxvf openlogic-openjdk-8u262-b10-linux-x64.tar.gz -C /usr/local/java # vi /etc/profile 4.\u8fdb\u5165\u5230tomcat\u76ee\u5f55\u542f\u52a8tomcat # bin/startup.sh 5.\u67e5\u770btomcat\u662f\u5426\u80fd\u591f\u6210\u529f\u542f\u52a8 # curl http://localhost:8080 6.\u5220\u9664\u955c\u50cf\u5185\u7684\u5b89\u88c5\u5305 7.\u6784\u5efa\u955c\u50cf 8.\u67e5\u770b\u6784\u5efa\u7684\u955c\u50cf 9.\u542f\u52a8\u955c\u50cf \u8f6f\u4ef6\u8def\u5f84 opeJDK8 tomcat","title":"Docker\u955c\u50cf\u6784\u5efa"},{"location":"DevOps/Docker/05-Docker%E9%95%9C%E5%83%8F%E6%9E%84%E5%BB%BA/#docker","text":"\u200b \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u516c\u5173\u4ed3\u5e93\u62c9\u53d6\u955c\u50cf\u4f7f\u7528\uff0c\u4f46\u662f\uff0c\u6709\u4e9b\u65f6\u5019\u516c\u5171\u4ed3\u5e93\u62c9\u53d6\u7684\u955c\u50cf\u5e76\u4e0d\u7b26\u5408\u6211\u4eec\u7684\u9700\u6c42\uff0c\u5c3d\u7ba1\u5df2\u7ecf\u4ece\u7e41\u7410\u7684\u90e8\u7f72\u5de5\u4f5c\u4e2d\u89e3\u653e\u51fa\u6765\uff0c\u4f46\u662f\u5b9e\u9645\u5f00\u53d1\u65f6\uff0c\u6211\u4eec\u5e0c\u671b\u955c\u50cf\u5305\u542b\u6574\u4e2a\u9879\u76ee\u7684\u5b8c\u6574\u73af\u5883\uff0c\u5728\u5176\u4ed6\u673a\u5668\u4e0a\u62c9\u53d6\u6253\u5305\u5b8c\u6574\u7684\u955c\u50cf\uff0c\u76f4\u63a5\u8fd0\u884c\u5373\u53ef\u3002 docker commit:\u4ece\u5bb9\u5668\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u955c\u50cf docker build:\u914d\u5408Dockerfile\u6587\u4ef6\u521b\u5efa\u955c\u50cf 1.\u521b\u5efa\u5bb9\u5668 2.\u62f7\u8d1d\u8d44\u6e90 3.\u89e3\u538b\u8d44\u6e90\uff1b\u8c03\u6574\u914d\u7f6e\u6587\u4ef6 # cd /root/ # mkdir -p /usr/local/java # mkdir -p /usr/local/tomcat # tar -zxvf apache-tomcat-9.0.53.tar.gz -C /usr/local/tomcat # tar -zxvf openlogic-openjdk-8u262-b10-linux-x64.tar.gz -C /usr/local/java # vi /etc/profile 4.\u8fdb\u5165\u5230tomcat\u76ee\u5f55\u542f\u52a8tomcat # bin/startup.sh 5.\u67e5\u770btomcat\u662f\u5426\u80fd\u591f\u6210\u529f\u542f\u52a8 # curl http://localhost:8080 6.\u5220\u9664\u955c\u50cf\u5185\u7684\u5b89\u88c5\u5305 7.\u6784\u5efa\u955c\u50cf 8.\u67e5\u770b\u6784\u5efa\u7684\u955c\u50cf 9.\u542f\u52a8\u955c\u50cf \u8f6f\u4ef6\u8def\u5f84 opeJDK8 tomcat","title":"Docker\u955c\u50cf\u6784\u5efa"},{"location":"DevOps/Homework/week1/","text":"1.\u5f00\u6e90\u8bb8\u53ef\u8bc1 \u00b6 \u4ec0\u4e48\u662f\u5f00\u6e90\uff1a \u00b6 \u5f00\u6e90\u662f\u8f6f\u4ef6\u5206\u53d1\u7684\u4e00\u4e2a\u624b\u6bb5\u3002 \u5f00\u6e90\u662f\u8f6f\u4ef6\u8fdb\u884c\u4f4e\u6210\u672c\u63a8\u5e7f\u7684\u4e00\u4e2a\u624b\u6bb5\uff0c\u5f00\u6e90\u89e3\u51b3\u4e0d\u4e86\u8f6f\u4ef6\u7684\u5e02\u573a\u7ade\u4e89\u529b\u7684\u95ee\u9898\u3002\u5f00\u6e90\u8f6f\u4ef6\u4e5f\u9700\u8981\u6301\u7eed\u7684\u6295\u5165\u548c\u7ef4\u62a4\u624d\u53ef\u80fd\u6709\u672a\u6765\u3002 \u6700\u65e9\u8f6f\u4ef6\u662f\u968f\u7740\u786c\u4ef6\u4e00\u5e76\u4ea4\u4ed8\u7ed9\u6700\u7ec8\u7528\u6237\u7684\u3002\u5f53\u7136\u4e5f\u5305\u542b\u8f6f\u4ef6\u7684\u6e90\u4ee3\u7801\uff0c\u4e0d\u8fc7\u90a3\u65f6\u5019\u7684\u8f6f\u4ef6\u89c4\u6a21\u4e5f\u76f8\u5bf9\u8f83\u5c0f\u3002\u540e\u6765\u968f\u7740\u6709\u4eba\u4fc3\u8fdb\u7f8e\u56fd\u7acb\u6cd5\uff0c\u5c06\u8f6f\u4ef6\u7eb3\u5165\u8457\u4f5c\u6743\u4fdd\u62a4\u7684\u8303\u7574\u548c\u9886\u57df\u4e4b\u5185\uff0c\u518d\u540e\u6765\u5c31\u884d\u751f\u51fa\u4e86\u5404\u7c7b\u8bb8\u53ef\u8bc1\u3002\u8f6f\u4ef6\u5f00\u59cb\u4ee5\u5177\u4f53\u7684\u4ef7\u683c\u552e\u5356\u3002\u4f46\u662f\u4e8c\u8fdb\u5236\u5305\u7684\u552e\u5356\u65b9\u5f0f\u662f\u6ca1\u529e\u6cd5\u53bb\u67e5\u770b\u548c\u7ef4\u62a4\u8f6f\u4ef6\u7684\u3002\u8fd9\u5c31\u5bfc\u81f4\u8d2d\u4e70\u7684\u8f6f\u4ef6\u5728\u8fdb\u884c\u4fee\u6539\u4ee5\u53ca\u5728\u4e0d\u540c\u7684\u786c\u4ef6\u5e73\u53f0\u4e0a\u4f7f\u7528\u65f6\u9047\u5230\u4e86\u5f88\u5927\u7684\u969c\u788d\u3002 \u4ec0\u4e48\u662f\u8f6f\u4ef6\u8457\u4f5c\u6743\uff1a \u00b6 \u8ba1\u7b97\u673a\u8f6f\u4ef6\u8457\u4f5c\u6743\u7684\u5185\u5bb9\u662f\u6307\u8f6f\u4ef6\u8457\u4f5c\u6743\u4eba\u4f9d\u7167\u6cd5\u5f8b\u4eab\u6709\u7684\u4e13\u6709\u6743\u5229\u7684\u603b\u548c\uff0c\u6839\u636e\u6211\u56fd\u300a\u8ba1\u7b97\u673a\u8f6f\u4ef6\u4fdd\u62a4\u6761\u4f8b\u300b\u7684\u89c4\u5b9a\uff0c\u8f6f\u4ef6\u8457\u4f5c\u6743\u4eba\u4eab\u6709\u4e0b\u5217\u5404\u9879\u6743\u5229\uff1a\uff081\uff09\u53d1\u8868\u6743\uff0c\u5373\u51b3\u5b9a\u8f6f\u4ef6\u662f\u5426\u516c\u4e4b\u4e8e\u4f17\u7684\u6743\u5229\uff1b\uff082\uff09\u7f72\u540d\u6743\uff0c\u5373\u8868\u660e\u5f00\u53d1\u8005\u8eab\u4efd\uff0c\u5728\u8f6f\u4ef6\u4e0a\u7f72\u540d\u7684\u6743\u5229\uff1b\uff083\uff09\u4fee\u6539\u6743\uff0c\u5373\u5bf9\u8f6f\u4ef6\u8fdb\u884c\u589e\u8865\u3001\u5220\u8282\uff0c\u6216\u8005\u6539\u53d8\u6307\u4ee4\u3001\u8bed\u53e5\u987a\u5e8f\u7684\u6743\u5229\uff1b\uff084\uff09\u590d\u5236\u6743\uff0c\u5373\u5c06\u8f6f\u4ef6\u5236\u4f5c\u4e00\u4efd\u6216\u8005\u591a\u4efd\u7684\u6743\u5229\uff1b\uff085\uff09\u53d1\u884c\u6743\uff0c\u5373\u4ee5\u51fa\u552e\u6216\u8005\u8d60\u4e0e\u65b9\u5f0f\u5411\u516c\u4f17\u63d0\u4f9b\u8f6f\u4ef6\u7684\u539f\u4ef6\u6216\u8005\u590d\u5236\u4ef6\u7684\u6743\u5229\uff1b\uff086\uff09\u51fa\u79df\u6743\uff0c\u5373\u6709\u507f\u8bb8\u53ef\u4ed6\u4eba\u4e34\u65f6\u4f7f\u7528\u8f6f\u4ef6\u7684\u6743\u5229\uff0c\u4f46\u662f\u8f6f\u4ef6\u4e0d\u662f\u51fa\u79df\u7684\u4e3b\u8981\u6807\u7684\u7684\u9664\u5916\uff1b\uff087\uff09\u4fe1\u606f\u7f51\u7edc\u4f20\u64ad\u6743\uff0c\u5373\u4ee5\u6709\u7ebf\u6216\u8005\u65e0\u7ebf\u65b9\u5f0f\u5411\u516c\u4f17\u63d0\u4f9b\u8f6f\u4ef6\uff0c\u4f7f\u516c\u4f17\u53ef\u4ee5\u5728\u5176\u4e2a\u4eba\u9009\u5b9a\u7684\u65f6\u95f4\u548c\u5730\u70b9\u83b7\u5f97\u8f6f\u4ef6\u7684\u6743\u5229\uff1b\uff088\uff09\u7ffb\u8bd1\u6743\uff0c\u5373\u5c06\u539f\u8f6f\u4ef6\u4ece\u4e00\u79cd\u81ea\u7136\u8bed\u8a00\u6587\u5b57\u8f6c\u6362\u6210\u53e6\u4e00\u79cd\u81ea\u7136\u8bed\u8a00\u6587\u5b57\u7684\u6743\u5229 [1] \uff1b\uff089\uff09\u5e94\u5f53\u7531\u8f6f\u4ef6\u8457\u4f5c\u6743\u4eba\u4eab\u6709\u7684\u5176\u4ed6\u6743\u5229\u3002 \u5176\u4e2d\uff0c\u7f72\u540d\u6743\uff1b\u4fee\u6539\u6743\uff1b\u590d\u5236\u6743\uff1b\u53d1\u5e03\u6743\u662f\u8f6f\u4ef6\u8457\u4f5c\u6743\u7684\u56db\u79cd\u57fa\u672c\u6743\u5229\u3002\u5546\u4e1a\u8f6f\u4ef6\u5bf9\u4e8e\u4ee5\u4e0a\u56db\u79cd\u6743\u529b\u662f\u8fdb\u884c\u4fdd\u7559\u7684\u3002\u5e76\u901a\u8fc7\u8f6f\u4ef6\u7684\u6700\u7ec8\u89e3\u91ca\u6743\u5bf9\u7528\u6237\u7684\u884c\u4e3a\u52a0\u4ee5\u7ea6\u675f\u3002 \u5f00\u6e90\u8bb8\u53ef\u8bc1\u7684\u533a\u522b\uff1a \u00b6 \u4e0b\u56fe\u6765\u81ea\u962e\u4e00\u5cf0\u535a\u5ba2\u3002 \u7406\u60f3\u4e3b\u4e49\u8005\u662f\u4e0d\u662f\u5f00\u6e90\u6210\u529f\u7684\u5173\u952e\uff1f \u00b6 \u6e90\u4ee3\u7801\u5f00\u653e\u5b9e\u9645\u4e0a\u65e0\u8bba\u4ece\u54ea\u4e2a\u89d2\u5ea6\u6765\u8bf4\u90fd\u662f\u4e00\u4e2a\u6bd4\u8f83\u6709\u7406\u60f3\u4e3b\u4e49\u7cbe\u795e\u7684\u4e8b\u60c5\u3002\u4f46\u662f\u5f00\u6e90\u8f6f\u4ef6\u5b9e\u9645\u7684\u60c5\u51b5\u6765\u770b\uff0c\u81f3\u5c11\u670990%\u7684\u4ee3\u7801\u90fd\u662f\u5546\u4e1a\u516c\u53f8\u63d0\u4f9b\u7684\uff0c\u50cfLinux\u7684\u6e90\u4ee3\u7801\uff0c\u57fa\u672c\u4e0a\u90fd\u662fIntel\uff0cAMD\uff0cRedhat\u8fd8\u6709IBM\u8fd9\u4e9b\u516c\u53f8\u63d0\u4f9b\u7ed9\u7684\uff0c\u751a\u81f3\u5fae\u8f6f\u516c\u53f8\u4e5f\u5728\u5341\u51e0\u5e74\u524d\u5f00\u59cb\u5411Linux\u63d0\u4f9b\u6e90\u4ee3\u7801\uff0c\u63d0\u4ea4\u4e86\u4e0d\u5c11\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002\u5bf9\u4e8e\u4e3a\u7528\u6237\u63d0\u4f9b\u670d\u52a1\u7684\u8f6f\u4ef6\u6765\u8bf4\uff0c\u5b9e\u9645\u4e0a\u662f\u4e0d\u662f\u5f00\u6e90\u5b9e\u9645\u4e0a\u53ef\u80fd\u5e76\u4e0d\u4f1a\u90a3\u4e48\u91cd\u8981\uff0c\u8bf4\u5230\u5e95\u5f00\u6e90\u7ec8\u7a76\u662f\u8f6f\u4ef6\u8fdb\u884c\u4f4e\u6210\u672c\u5206\u53d1\u7684\u4e00\u4e2a\u624b\u6bb5\u3002\u5f00\u6e90\u8f6f\u4ef6\u4e5f\u4e0d\u80fd\u9003\u907f\u4e0e\u5546\u4e1a\u8f6f\u4ef6\u7684\u7ade\u4e89\u3002 \u8bf4\u5230\u5e95\u73b0\u5728\u6709\u8fd9\u4e48\u591a\u7684\u5f00\u6e90\u8f6f\u4ef6\u534f\u8bae\uff0c\u4ece\u6574\u4e2a\u53d1\u5c55\u5386\u7a0b\u6765\u8bf4\u3002\u57fa\u672c\u4e0a\u662f\u9010\u6e10\u5411\u5546\u4e1a\u4e0d\u65ad\u59a5\u534f\u7684\u7ed3\u679c\u3002 \u5f00\u6e90\u4f1a\u8d70\u5411\u54ea\u91cc\u6211\u4e5f\u4e0d\u77e5\u9053\uff0c\u4f46\u662f\uff0c\u6709\u4e00\u70b9\u6211\u6562\u80af\u5b9a\uff0c\u539f\u6765\u7684Free Software\u592a\u6fc0\u8fdb\u4e86\uff0c\u80af\u5b9a\u662f\u8d70\u4e0d\u901a\u7684\uff0c\u52a8\u4e0d\u52a8\u5c31\u8ba9\u4eba\u5bb6\u6ca1\u94b1\u8d5a\uff0c\u4e00\u4e0b\u5b50\u5c31\u5171\u4ea7\u4e86\uff0c\u6211\u89c9\u5f97\u8fd9\u662f\u81f4\u547d\u7684\u81ea\u8d1f\u3002 \u5f00\u6e90\u7684\u6210\u529f\uff0c\u5e94\u8be5\u662f\u7406\u60f3\u4e3b\u4e49\uff0c\u8f6f\u4ef6\u5de5\u7a0b\u6280\u672f\u548c\u5546\u4e1a\u7b56\u7565\u6210\u529f\u7684\u7ed3\u5408\uff0c\u4ec5\u4ec5\u9760\u7406\u60f3\u4e3b\u4e49\uff0c\u662f\u8d70\u4e0d\u5230\u73b0\u5728\u8fd9\u4e2a\u5c40\u9762\u7684\u3002 2.\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf \u00b6 3.ifconfig\u547d\u4ee4\u7684\u4f7f\u7528 \u00b6 man ifconfig 4.Linux\u7684\u76ee\u5f55\u7ed3\u6784 \u00b6 \u8868\u683c\u6765\u81eawikipedia \u76ee\u5f55 \u63cf\u8ff0 / \u7b2c\u4e00\u5c42\u6b21\u7ed3\u6784 \u7684\u6839\u3001 \u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5c42\u6b21\u7ed3\u6784\u7684 \u6839\u76ee\u5f55 \u3002 /bin/ \u9700\u8981\u5728 \u5355\u7528\u6237\u6a21\u5f0f \u53ef\u7528\u7684\u5fc5\u8981\u547d\u4ee4\uff08 \u53ef\u6267\u884c\u6587\u4ef6 \uff09\uff1b\u9762\u5411\u6240\u6709\u7528\u6237\uff0c \u4f8b\u5982 \uff1a cat \u3001 ls \u3001 cp \u3002 /boot/ \u5f15\u5bfc\u7a0b\u5e8f \u6587\u4ef6\uff0c \u4f8b\u5982\uff1a kernel \u3001 initrd \uff1b\u65f6\u5e38\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u5206\u533a[ 8] /dev/ \u5fc5\u8981 \u8bbe\u5907 , \u4f8b\u5982\uff1a /dev/null . /etc/ \u7279\u5b9a\u4e3b\u673a\uff0c\u7cfb\u7edf\u8303\u56f4\u5185\u7684 \u914d\u7f6e\u6587\u4ef6 \u3002\u5173\u4e8e\u8fd9\u4e2a\u540d\u79f0\u76ee\u524d\u6709\u4e89\u8bae\u3002\u5728\u8d1d\u5c14\u5b9e\u9a8c\u5ba4\u5173\u4e8eUNIX\u5b9e\u73b0\u6587\u6863\u7684\u65e9\u671f\u7248\u672c\u4e2d\uff0c/etc \u88ab\u79f0\u4e3a* etcetera *\uff0c [ 9] \u8fd9\u662f\u7531\u4e8e\u8fc7\u53bb\u6b64\u76ee\u5f55\u4e2d\u5b58\u653e\u6240\u6709\u4e0d\u5c5e\u4e8e\u522b\u5904\u7684\u6240\u6709\u4e1c\u897f\uff08\u7136\u800c\uff0cFHS\u9650\u5236/etc\u53ea\u80fd\u5b58\u653e\u9759\u6001\u914d\u7f6e\u6587\u4ef6\uff0c\u4e0d\u80fd\u5305\u542b\u4e8c\u8fdb\u5236\u6587\u4ef6\uff09\u3002 [ 10] \u81ea\u4ece\u65e9\u671f\u6587\u6863\u51fa\u7248\u4ee5\u6765\uff0c\u76ee\u5f55\u540d\u79f0\u5df2\u88ab\u4ee5\u5404\u79cd\u65b9\u5f0f\u91cd\u65b0\u79f0\u547c\u3002\u6700\u8fd1\u7684\u89e3\u91ca\u5305\u62ec \u9006\u5411\u9996\u5b57\u6bcd\u7f29\u7565\u8bcd \u5982\uff1a\"\u53ef\u7f16\u8f91\u7684\u6587\u672c\u914d\u7f6e\"\uff08\u82f1\u6587 \"Editable Text Configuration\"\uff09\u6216\"\u6269\u5c55\u5de5\u5177\u7bb1\"\uff08\u82f1\u6587 \"Extended Tool Chest\"\uff09\u3002 [ 11] /etc/opt/ /opt/ \u7684\u914d\u7f6e\u6587\u4ef6 /etc/X11/ X\u7a97\u53e3\u7cfb\u7edf (\u7248\u672c11)\u7684\u914d\u7f6e\u6587\u4ef6 /etc/sgml/ SGML \u7684\u914d\u7f6e\u6587\u4ef6 /etc/xml/ XML \u7684\u914d\u7f6e\u6587\u4ef6 /home/ \u7528\u6237\u7684 \u5bb6\u76ee\u5f55 \uff0c\u5305\u542b\u4fdd\u5b58\u7684\u6587\u4ef6\u3001\u4e2a\u4eba\u8bbe\u7f6e\u7b49\uff0c\u4e00\u822c\u4e3a\u5355\u72ec\u7684\u5206\u533a\u3002 /lib/ /bin/ \u548c /sbin/ \u4e2d\u4e8c\u8fdb\u5236\u6587\u4ef6\u5fc5\u8981\u7684 \u5e93 \u6587\u4ef6\u3002 /media/ \u53ef\u79fb\u9664\u5a92\u4f53(\u5982 CD-ROM )\u7684\u6302\u8f7d\u70b9 (\u5728FHS-2.3\u4e2d\u51fa\u73b0)\u3002 /mnt/ \u4e34\u65f6 \u6302\u8f7d \u7684\u6587\u4ef6\u7cfb\u7edf\u3002 /opt/ \u53ef\u9009 \u5e94\u7528\u8f6f\u4ef6 \u5305 \u3002[ 12] /proc/ \u865a\u62df \u6587\u4ef6\u7cfb\u7edf \uff0c\u5c06 \u5185\u6838 \u4e0e \u8fdb\u7a0b \u72b6\u6001\u5f52\u6863\u4e3a\u6587\u672c\u6587\u4ef6\u3002*\u4f8b\u5982\uff1a*uptime\u3001 network\u3002\u5728Linux\u4e2d\uff0c\u5bf9\u5e94 Procfs \u683c\u5f0f\u6302\u8f7d\u3002 /root/ \u8d85\u7ea7\u7528\u6237 \u7684 \u5bb6\u76ee\u5f55 /sbin/ \u5fc5\u8981\u7684\u7cfb\u7edf\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c \u4f8b\u5982\uff1a init\u3001 ip\u3001 mount\u3002 /srv/ \u7ad9\u70b9\u7684\u5177\u4f53 \u6570\u636e \uff0c\u7531\u7cfb\u7edf\u63d0\u4f9b\u3002 /tmp/ \u4e34\u65f6\u6587\u4ef6(\u53c2\u89c1 /var/tmp )\uff0c\u5728\u7cfb\u7edf\u91cd\u542f\u65f6\u76ee\u5f55\u4e2d\u6587\u4ef6\u4e0d\u4f1a\u88ab\u4fdd\u7559\u3002 /usr/ \u7528\u4e8e\u5b58\u50a8\u53ea\u8bfb\u7528\u6237\u6570\u636e\u7684*\u7b2c\u4e8c\u5c42\u6b21*\uff1b \u5305\u542b\u7edd\u5927\u591a\u6570\u7684( \u591a )\u7528\u6237\u5de5\u5177\u548c\u5e94\u7528\u7a0b\u5e8f[ 13] \u3002 /usr/bin/ \u975e\u5fc5\u8981 \u53ef\u6267\u884c\u6587\u4ef6 (\u5728 \u5355\u7528\u6237\u6a21\u5f0f \u4e2d\u4e0d\u9700\u8981)\uff1b\u9762\u5411\u6240\u6709\u7528\u6237\u3002 /usr/include/ \u6807\u51c6 \u5305\u542b\u6587\u4ef6 \u3002 /usr/lib/ /usr/bin/ \u548c /usr/sbin/ \u4e2d\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684 \u5e93 \u3002 /usr/sbin/ \u975e\u5fc5\u8981\u7684\u7cfb\u7edf\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c*\u4f8b\u5982\uff1a*\u5927\u91cf \u7f51\u7edc\u670d\u52a1 \u7684 \u5b88\u62a4\u8fdb\u7a0b \u3002 /usr/share/ \u4f53\u7cfb\u7ed3\u6784 \u65e0\u5173\uff08\u5171\u4eab\uff09\u6570\u636e\u3002 /usr/src/ \u6e90\u4ee3\u7801 ,*\u4f8b\u5982:*\u5185\u6838\u6e90\u4ee3\u7801\u53ca\u5176\u5934\u6587\u4ef6\u3002 /usr/X11R6/ X\u7a97\u53e3\u7cfb\u7edf \u7248\u672c 11, Release 6. /usr/local/ \u672c\u5730\u6570\u636e\u7684*\u7b2c\u4e09\u5c42\u6b21*\uff0c \u5177\u4f53\u5230\u672c\u53f0\u4e3b\u673a\u3002\u901a\u5e38\u800c\u8a00\u6709\u8fdb\u4e00\u6b65\u7684\u5b50\u76ee\u5f55\uff0c \u4f8b\u5982\uff1a bin/ \u3001 lib/ \u3001 share/ .[ 14] /var/ \u53d8\u91cf\u6587\u4ef6\u2014\u2014\u5728\u6b63\u5e38\u8fd0\u884c\u7684\u7cfb\u7edf\u4e2d\u5176\u5185\u5bb9\u4e0d\u65ad\u53d8\u5316\u7684\u6587\u4ef6\uff0c\u5982\u65e5\u5fd7\uff0c\u8131\u673a\u6587\u4ef6\u548c\u4e34\u65f6\u7535\u5b50\u90ae\u4ef6\u6587\u4ef6\u3002\u6709\u65f6\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u5206\u533a\u3002 /var/cache/ \u5e94\u7528\u7a0b\u5e8f\u7f13\u5b58\u6570\u636e\u3002\u8fd9\u4e9b\u6570\u636e\u662f\u5728\u672c\u5730\u751f\u6210\u7684\u4e00\u4e2a\u8017\u65f6\u7684I/O\u6216\u8ba1\u7b97\u7ed3\u679c\u3002\u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u80fd\u591f\u518d\u751f\u6216\u6062\u590d\u6570\u636e\u3002\u7f13\u5b58\u7684\u6587\u4ef6\u53ef\u4ee5\u88ab\u5220\u9664\u800c\u4e0d\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002 /var/lib/ \u72b6\u6001\u4fe1\u606f\u3002 \u7531\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u7ef4\u62a4\u7684\u6301\u4e45\u6027\u6570\u636e\u3002 *\u4f8b\u5982\uff1a*\u6570\u636e\u5e93\u3001\u5305\u88c5\u7684\u7cfb\u7edf\u5143\u6570\u636e\u7b49\u3002 /var/lock/ \u9501\u6587\u4ef6\uff0c\u4e00\u7c7b\u8ddf\u8e2a\u5f53\u524d\u4f7f\u7528\u4e2d\u8d44\u6e90\u7684\u6587\u4ef6\u3002 /var/log/ \u65e5\u5fd7\u6587\u4ef6\uff0c\u5305\u542b\u5927\u91cf\u65e5\u5fd7\u6587\u4ef6\uff0c\u4e3a\u4e86\u9632\u6b62\u65e5\u5fd7\u5360\u6ee1\u6839\u5206\u533a\uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u4e00\u822c\u662f\u5355\u72ec\u5206\u533a\u3002 /var/mail/ \u7528\u6237\u7684 \u7535\u5b50\u90ae\u7bb1 \u3002 /var/run/ \u81ea\u6700\u540e\u4e00\u6b21\u542f\u52a8\u4ee5\u6765\u8fd0\u884c\u4e2d\u7684\u7cfb\u7edf\u7684\u4fe1\u606f\uff0c*\u4f8b\u5982\uff1a*\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u548c\u8fd0\u884c\u4e2d\u7684 \u5b88\u62a4\u8fdb\u7a0b \u3001\u4e00\u4e9b\u5b88\u62a4\u8fdb\u7a0b\u7684pid\u6587\u4ef6\u3001socket\u6587\u4ef6\u3002\u73b0\u5df2\u7ecf\u88ab/run\u4ee3\u66ff[ 15] \u3002 /var/spool/ \u7b49\u5f85\u5904\u7406\u7684\u4efb\u52a1\u7684 \u8131\u673a\u6587\u4ef6 \uff0c*\u4f8b\u5982\uff1a*\u6253\u5370\u961f\u5217\u548c\u672a\u8bfb\u7684\u90ae\u4ef6\u3002 /var/spool/mail/ \u7528\u6237\u7684\u90ae\u7bb1(\u4e0d\u9f13\u52b1\u7684\u5b58\u50a8\u4f4d\u7f6e) /var/tmp/ \u5728\u7cfb\u7edf\u91cd\u542f\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u4fdd\u7559\u7684\u4e34\u65f6\u6587\u4ef6\u3002 /run/ \u4ee3\u66ff/var/run\u76ee\u5f55\u3002 5.\u540e\u671f\u5b66\u4e60\u7684\u8ba1\u5212 \u00b6 \u5c3d\u529b\u5b8c\u6210\u89c4\u5b9a\u76ee\u6807","title":"1.week1"},{"location":"DevOps/Homework/week1/#1","text":"","title":"1.\u5f00\u6e90\u8bb8\u53ef\u8bc1"},{"location":"DevOps/Homework/week1/#_1","text":"\u5f00\u6e90\u662f\u8f6f\u4ef6\u5206\u53d1\u7684\u4e00\u4e2a\u624b\u6bb5\u3002 \u5f00\u6e90\u662f\u8f6f\u4ef6\u8fdb\u884c\u4f4e\u6210\u672c\u63a8\u5e7f\u7684\u4e00\u4e2a\u624b\u6bb5\uff0c\u5f00\u6e90\u89e3\u51b3\u4e0d\u4e86\u8f6f\u4ef6\u7684\u5e02\u573a\u7ade\u4e89\u529b\u7684\u95ee\u9898\u3002\u5f00\u6e90\u8f6f\u4ef6\u4e5f\u9700\u8981\u6301\u7eed\u7684\u6295\u5165\u548c\u7ef4\u62a4\u624d\u53ef\u80fd\u6709\u672a\u6765\u3002 \u6700\u65e9\u8f6f\u4ef6\u662f\u968f\u7740\u786c\u4ef6\u4e00\u5e76\u4ea4\u4ed8\u7ed9\u6700\u7ec8\u7528\u6237\u7684\u3002\u5f53\u7136\u4e5f\u5305\u542b\u8f6f\u4ef6\u7684\u6e90\u4ee3\u7801\uff0c\u4e0d\u8fc7\u90a3\u65f6\u5019\u7684\u8f6f\u4ef6\u89c4\u6a21\u4e5f\u76f8\u5bf9\u8f83\u5c0f\u3002\u540e\u6765\u968f\u7740\u6709\u4eba\u4fc3\u8fdb\u7f8e\u56fd\u7acb\u6cd5\uff0c\u5c06\u8f6f\u4ef6\u7eb3\u5165\u8457\u4f5c\u6743\u4fdd\u62a4\u7684\u8303\u7574\u548c\u9886\u57df\u4e4b\u5185\uff0c\u518d\u540e\u6765\u5c31\u884d\u751f\u51fa\u4e86\u5404\u7c7b\u8bb8\u53ef\u8bc1\u3002\u8f6f\u4ef6\u5f00\u59cb\u4ee5\u5177\u4f53\u7684\u4ef7\u683c\u552e\u5356\u3002\u4f46\u662f\u4e8c\u8fdb\u5236\u5305\u7684\u552e\u5356\u65b9\u5f0f\u662f\u6ca1\u529e\u6cd5\u53bb\u67e5\u770b\u548c\u7ef4\u62a4\u8f6f\u4ef6\u7684\u3002\u8fd9\u5c31\u5bfc\u81f4\u8d2d\u4e70\u7684\u8f6f\u4ef6\u5728\u8fdb\u884c\u4fee\u6539\u4ee5\u53ca\u5728\u4e0d\u540c\u7684\u786c\u4ef6\u5e73\u53f0\u4e0a\u4f7f\u7528\u65f6\u9047\u5230\u4e86\u5f88\u5927\u7684\u969c\u788d\u3002","title":"\u4ec0\u4e48\u662f\u5f00\u6e90\uff1a"},{"location":"DevOps/Homework/week1/#_2","text":"\u8ba1\u7b97\u673a\u8f6f\u4ef6\u8457\u4f5c\u6743\u7684\u5185\u5bb9\u662f\u6307\u8f6f\u4ef6\u8457\u4f5c\u6743\u4eba\u4f9d\u7167\u6cd5\u5f8b\u4eab\u6709\u7684\u4e13\u6709\u6743\u5229\u7684\u603b\u548c\uff0c\u6839\u636e\u6211\u56fd\u300a\u8ba1\u7b97\u673a\u8f6f\u4ef6\u4fdd\u62a4\u6761\u4f8b\u300b\u7684\u89c4\u5b9a\uff0c\u8f6f\u4ef6\u8457\u4f5c\u6743\u4eba\u4eab\u6709\u4e0b\u5217\u5404\u9879\u6743\u5229\uff1a\uff081\uff09\u53d1\u8868\u6743\uff0c\u5373\u51b3\u5b9a\u8f6f\u4ef6\u662f\u5426\u516c\u4e4b\u4e8e\u4f17\u7684\u6743\u5229\uff1b\uff082\uff09\u7f72\u540d\u6743\uff0c\u5373\u8868\u660e\u5f00\u53d1\u8005\u8eab\u4efd\uff0c\u5728\u8f6f\u4ef6\u4e0a\u7f72\u540d\u7684\u6743\u5229\uff1b\uff083\uff09\u4fee\u6539\u6743\uff0c\u5373\u5bf9\u8f6f\u4ef6\u8fdb\u884c\u589e\u8865\u3001\u5220\u8282\uff0c\u6216\u8005\u6539\u53d8\u6307\u4ee4\u3001\u8bed\u53e5\u987a\u5e8f\u7684\u6743\u5229\uff1b\uff084\uff09\u590d\u5236\u6743\uff0c\u5373\u5c06\u8f6f\u4ef6\u5236\u4f5c\u4e00\u4efd\u6216\u8005\u591a\u4efd\u7684\u6743\u5229\uff1b\uff085\uff09\u53d1\u884c\u6743\uff0c\u5373\u4ee5\u51fa\u552e\u6216\u8005\u8d60\u4e0e\u65b9\u5f0f\u5411\u516c\u4f17\u63d0\u4f9b\u8f6f\u4ef6\u7684\u539f\u4ef6\u6216\u8005\u590d\u5236\u4ef6\u7684\u6743\u5229\uff1b\uff086\uff09\u51fa\u79df\u6743\uff0c\u5373\u6709\u507f\u8bb8\u53ef\u4ed6\u4eba\u4e34\u65f6\u4f7f\u7528\u8f6f\u4ef6\u7684\u6743\u5229\uff0c\u4f46\u662f\u8f6f\u4ef6\u4e0d\u662f\u51fa\u79df\u7684\u4e3b\u8981\u6807\u7684\u7684\u9664\u5916\uff1b\uff087\uff09\u4fe1\u606f\u7f51\u7edc\u4f20\u64ad\u6743\uff0c\u5373\u4ee5\u6709\u7ebf\u6216\u8005\u65e0\u7ebf\u65b9\u5f0f\u5411\u516c\u4f17\u63d0\u4f9b\u8f6f\u4ef6\uff0c\u4f7f\u516c\u4f17\u53ef\u4ee5\u5728\u5176\u4e2a\u4eba\u9009\u5b9a\u7684\u65f6\u95f4\u548c\u5730\u70b9\u83b7\u5f97\u8f6f\u4ef6\u7684\u6743\u5229\uff1b\uff088\uff09\u7ffb\u8bd1\u6743\uff0c\u5373\u5c06\u539f\u8f6f\u4ef6\u4ece\u4e00\u79cd\u81ea\u7136\u8bed\u8a00\u6587\u5b57\u8f6c\u6362\u6210\u53e6\u4e00\u79cd\u81ea\u7136\u8bed\u8a00\u6587\u5b57\u7684\u6743\u5229 [1] \uff1b\uff089\uff09\u5e94\u5f53\u7531\u8f6f\u4ef6\u8457\u4f5c\u6743\u4eba\u4eab\u6709\u7684\u5176\u4ed6\u6743\u5229\u3002 \u5176\u4e2d\uff0c\u7f72\u540d\u6743\uff1b\u4fee\u6539\u6743\uff1b\u590d\u5236\u6743\uff1b\u53d1\u5e03\u6743\u662f\u8f6f\u4ef6\u8457\u4f5c\u6743\u7684\u56db\u79cd\u57fa\u672c\u6743\u5229\u3002\u5546\u4e1a\u8f6f\u4ef6\u5bf9\u4e8e\u4ee5\u4e0a\u56db\u79cd\u6743\u529b\u662f\u8fdb\u884c\u4fdd\u7559\u7684\u3002\u5e76\u901a\u8fc7\u8f6f\u4ef6\u7684\u6700\u7ec8\u89e3\u91ca\u6743\u5bf9\u7528\u6237\u7684\u884c\u4e3a\u52a0\u4ee5\u7ea6\u675f\u3002","title":"\u4ec0\u4e48\u662f\u8f6f\u4ef6\u8457\u4f5c\u6743\uff1a"},{"location":"DevOps/Homework/week1/#_3","text":"\u4e0b\u56fe\u6765\u81ea\u962e\u4e00\u5cf0\u535a\u5ba2\u3002","title":"\u5f00\u6e90\u8bb8\u53ef\u8bc1\u7684\u533a\u522b\uff1a"},{"location":"DevOps/Homework/week1/#_4","text":"\u6e90\u4ee3\u7801\u5f00\u653e\u5b9e\u9645\u4e0a\u65e0\u8bba\u4ece\u54ea\u4e2a\u89d2\u5ea6\u6765\u8bf4\u90fd\u662f\u4e00\u4e2a\u6bd4\u8f83\u6709\u7406\u60f3\u4e3b\u4e49\u7cbe\u795e\u7684\u4e8b\u60c5\u3002\u4f46\u662f\u5f00\u6e90\u8f6f\u4ef6\u5b9e\u9645\u7684\u60c5\u51b5\u6765\u770b\uff0c\u81f3\u5c11\u670990%\u7684\u4ee3\u7801\u90fd\u662f\u5546\u4e1a\u516c\u53f8\u63d0\u4f9b\u7684\uff0c\u50cfLinux\u7684\u6e90\u4ee3\u7801\uff0c\u57fa\u672c\u4e0a\u90fd\u662fIntel\uff0cAMD\uff0cRedhat\u8fd8\u6709IBM\u8fd9\u4e9b\u516c\u53f8\u63d0\u4f9b\u7ed9\u7684\uff0c\u751a\u81f3\u5fae\u8f6f\u516c\u53f8\u4e5f\u5728\u5341\u51e0\u5e74\u524d\u5f00\u59cb\u5411Linux\u63d0\u4f9b\u6e90\u4ee3\u7801\uff0c\u63d0\u4ea4\u4e86\u4e0d\u5c11\u7684\u9a71\u52a8\u7a0b\u5e8f\u3002\u5bf9\u4e8e\u4e3a\u7528\u6237\u63d0\u4f9b\u670d\u52a1\u7684\u8f6f\u4ef6\u6765\u8bf4\uff0c\u5b9e\u9645\u4e0a\u662f\u4e0d\u662f\u5f00\u6e90\u5b9e\u9645\u4e0a\u53ef\u80fd\u5e76\u4e0d\u4f1a\u90a3\u4e48\u91cd\u8981\uff0c\u8bf4\u5230\u5e95\u5f00\u6e90\u7ec8\u7a76\u662f\u8f6f\u4ef6\u8fdb\u884c\u4f4e\u6210\u672c\u5206\u53d1\u7684\u4e00\u4e2a\u624b\u6bb5\u3002\u5f00\u6e90\u8f6f\u4ef6\u4e5f\u4e0d\u80fd\u9003\u907f\u4e0e\u5546\u4e1a\u8f6f\u4ef6\u7684\u7ade\u4e89\u3002 \u8bf4\u5230\u5e95\u73b0\u5728\u6709\u8fd9\u4e48\u591a\u7684\u5f00\u6e90\u8f6f\u4ef6\u534f\u8bae\uff0c\u4ece\u6574\u4e2a\u53d1\u5c55\u5386\u7a0b\u6765\u8bf4\u3002\u57fa\u672c\u4e0a\u662f\u9010\u6e10\u5411\u5546\u4e1a\u4e0d\u65ad\u59a5\u534f\u7684\u7ed3\u679c\u3002 \u5f00\u6e90\u4f1a\u8d70\u5411\u54ea\u91cc\u6211\u4e5f\u4e0d\u77e5\u9053\uff0c\u4f46\u662f\uff0c\u6709\u4e00\u70b9\u6211\u6562\u80af\u5b9a\uff0c\u539f\u6765\u7684Free Software\u592a\u6fc0\u8fdb\u4e86\uff0c\u80af\u5b9a\u662f\u8d70\u4e0d\u901a\u7684\uff0c\u52a8\u4e0d\u52a8\u5c31\u8ba9\u4eba\u5bb6\u6ca1\u94b1\u8d5a\uff0c\u4e00\u4e0b\u5b50\u5c31\u5171\u4ea7\u4e86\uff0c\u6211\u89c9\u5f97\u8fd9\u662f\u81f4\u547d\u7684\u81ea\u8d1f\u3002 \u5f00\u6e90\u7684\u6210\u529f\uff0c\u5e94\u8be5\u662f\u7406\u60f3\u4e3b\u4e49\uff0c\u8f6f\u4ef6\u5de5\u7a0b\u6280\u672f\u548c\u5546\u4e1a\u7b56\u7565\u6210\u529f\u7684\u7ed3\u5408\uff0c\u4ec5\u4ec5\u9760\u7406\u60f3\u4e3b\u4e49\uff0c\u662f\u8d70\u4e0d\u5230\u73b0\u5728\u8fd9\u4e2a\u5c40\u9762\u7684\u3002","title":"\u7406\u60f3\u4e3b\u4e49\u8005\u662f\u4e0d\u662f\u5f00\u6e90\u6210\u529f\u7684\u5173\u952e\uff1f"},{"location":"DevOps/Homework/week1/#2","text":"","title":"2.\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf"},{"location":"DevOps/Homework/week1/#3ifconfig","text":"man ifconfig","title":"3.ifconfig\u547d\u4ee4\u7684\u4f7f\u7528"},{"location":"DevOps/Homework/week1/#4linux","text":"\u8868\u683c\u6765\u81eawikipedia \u76ee\u5f55 \u63cf\u8ff0 / \u7b2c\u4e00\u5c42\u6b21\u7ed3\u6784 \u7684\u6839\u3001 \u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5c42\u6b21\u7ed3\u6784\u7684 \u6839\u76ee\u5f55 \u3002 /bin/ \u9700\u8981\u5728 \u5355\u7528\u6237\u6a21\u5f0f \u53ef\u7528\u7684\u5fc5\u8981\u547d\u4ee4\uff08 \u53ef\u6267\u884c\u6587\u4ef6 \uff09\uff1b\u9762\u5411\u6240\u6709\u7528\u6237\uff0c \u4f8b\u5982 \uff1a cat \u3001 ls \u3001 cp \u3002 /boot/ \u5f15\u5bfc\u7a0b\u5e8f \u6587\u4ef6\uff0c \u4f8b\u5982\uff1a kernel \u3001 initrd \uff1b\u65f6\u5e38\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u5206\u533a[ 8] /dev/ \u5fc5\u8981 \u8bbe\u5907 , \u4f8b\u5982\uff1a /dev/null . /etc/ \u7279\u5b9a\u4e3b\u673a\uff0c\u7cfb\u7edf\u8303\u56f4\u5185\u7684 \u914d\u7f6e\u6587\u4ef6 \u3002\u5173\u4e8e\u8fd9\u4e2a\u540d\u79f0\u76ee\u524d\u6709\u4e89\u8bae\u3002\u5728\u8d1d\u5c14\u5b9e\u9a8c\u5ba4\u5173\u4e8eUNIX\u5b9e\u73b0\u6587\u6863\u7684\u65e9\u671f\u7248\u672c\u4e2d\uff0c/etc \u88ab\u79f0\u4e3a* etcetera *\uff0c [ 9] \u8fd9\u662f\u7531\u4e8e\u8fc7\u53bb\u6b64\u76ee\u5f55\u4e2d\u5b58\u653e\u6240\u6709\u4e0d\u5c5e\u4e8e\u522b\u5904\u7684\u6240\u6709\u4e1c\u897f\uff08\u7136\u800c\uff0cFHS\u9650\u5236/etc\u53ea\u80fd\u5b58\u653e\u9759\u6001\u914d\u7f6e\u6587\u4ef6\uff0c\u4e0d\u80fd\u5305\u542b\u4e8c\u8fdb\u5236\u6587\u4ef6\uff09\u3002 [ 10] \u81ea\u4ece\u65e9\u671f\u6587\u6863\u51fa\u7248\u4ee5\u6765\uff0c\u76ee\u5f55\u540d\u79f0\u5df2\u88ab\u4ee5\u5404\u79cd\u65b9\u5f0f\u91cd\u65b0\u79f0\u547c\u3002\u6700\u8fd1\u7684\u89e3\u91ca\u5305\u62ec \u9006\u5411\u9996\u5b57\u6bcd\u7f29\u7565\u8bcd \u5982\uff1a\"\u53ef\u7f16\u8f91\u7684\u6587\u672c\u914d\u7f6e\"\uff08\u82f1\u6587 \"Editable Text Configuration\"\uff09\u6216\"\u6269\u5c55\u5de5\u5177\u7bb1\"\uff08\u82f1\u6587 \"Extended Tool Chest\"\uff09\u3002 [ 11] /etc/opt/ /opt/ \u7684\u914d\u7f6e\u6587\u4ef6 /etc/X11/ X\u7a97\u53e3\u7cfb\u7edf (\u7248\u672c11)\u7684\u914d\u7f6e\u6587\u4ef6 /etc/sgml/ SGML \u7684\u914d\u7f6e\u6587\u4ef6 /etc/xml/ XML \u7684\u914d\u7f6e\u6587\u4ef6 /home/ \u7528\u6237\u7684 \u5bb6\u76ee\u5f55 \uff0c\u5305\u542b\u4fdd\u5b58\u7684\u6587\u4ef6\u3001\u4e2a\u4eba\u8bbe\u7f6e\u7b49\uff0c\u4e00\u822c\u4e3a\u5355\u72ec\u7684\u5206\u533a\u3002 /lib/ /bin/ \u548c /sbin/ \u4e2d\u4e8c\u8fdb\u5236\u6587\u4ef6\u5fc5\u8981\u7684 \u5e93 \u6587\u4ef6\u3002 /media/ \u53ef\u79fb\u9664\u5a92\u4f53(\u5982 CD-ROM )\u7684\u6302\u8f7d\u70b9 (\u5728FHS-2.3\u4e2d\u51fa\u73b0)\u3002 /mnt/ \u4e34\u65f6 \u6302\u8f7d \u7684\u6587\u4ef6\u7cfb\u7edf\u3002 /opt/ \u53ef\u9009 \u5e94\u7528\u8f6f\u4ef6 \u5305 \u3002[ 12] /proc/ \u865a\u62df \u6587\u4ef6\u7cfb\u7edf \uff0c\u5c06 \u5185\u6838 \u4e0e \u8fdb\u7a0b \u72b6\u6001\u5f52\u6863\u4e3a\u6587\u672c\u6587\u4ef6\u3002*\u4f8b\u5982\uff1a*uptime\u3001 network\u3002\u5728Linux\u4e2d\uff0c\u5bf9\u5e94 Procfs \u683c\u5f0f\u6302\u8f7d\u3002 /root/ \u8d85\u7ea7\u7528\u6237 \u7684 \u5bb6\u76ee\u5f55 /sbin/ \u5fc5\u8981\u7684\u7cfb\u7edf\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c \u4f8b\u5982\uff1a init\u3001 ip\u3001 mount\u3002 /srv/ \u7ad9\u70b9\u7684\u5177\u4f53 \u6570\u636e \uff0c\u7531\u7cfb\u7edf\u63d0\u4f9b\u3002 /tmp/ \u4e34\u65f6\u6587\u4ef6(\u53c2\u89c1 /var/tmp )\uff0c\u5728\u7cfb\u7edf\u91cd\u542f\u65f6\u76ee\u5f55\u4e2d\u6587\u4ef6\u4e0d\u4f1a\u88ab\u4fdd\u7559\u3002 /usr/ \u7528\u4e8e\u5b58\u50a8\u53ea\u8bfb\u7528\u6237\u6570\u636e\u7684*\u7b2c\u4e8c\u5c42\u6b21*\uff1b \u5305\u542b\u7edd\u5927\u591a\u6570\u7684( \u591a )\u7528\u6237\u5de5\u5177\u548c\u5e94\u7528\u7a0b\u5e8f[ 13] \u3002 /usr/bin/ \u975e\u5fc5\u8981 \u53ef\u6267\u884c\u6587\u4ef6 (\u5728 \u5355\u7528\u6237\u6a21\u5f0f \u4e2d\u4e0d\u9700\u8981)\uff1b\u9762\u5411\u6240\u6709\u7528\u6237\u3002 /usr/include/ \u6807\u51c6 \u5305\u542b\u6587\u4ef6 \u3002 /usr/lib/ /usr/bin/ \u548c /usr/sbin/ \u4e2d\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684 \u5e93 \u3002 /usr/sbin/ \u975e\u5fc5\u8981\u7684\u7cfb\u7edf\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c*\u4f8b\u5982\uff1a*\u5927\u91cf \u7f51\u7edc\u670d\u52a1 \u7684 \u5b88\u62a4\u8fdb\u7a0b \u3002 /usr/share/ \u4f53\u7cfb\u7ed3\u6784 \u65e0\u5173\uff08\u5171\u4eab\uff09\u6570\u636e\u3002 /usr/src/ \u6e90\u4ee3\u7801 ,*\u4f8b\u5982:*\u5185\u6838\u6e90\u4ee3\u7801\u53ca\u5176\u5934\u6587\u4ef6\u3002 /usr/X11R6/ X\u7a97\u53e3\u7cfb\u7edf \u7248\u672c 11, Release 6. /usr/local/ \u672c\u5730\u6570\u636e\u7684*\u7b2c\u4e09\u5c42\u6b21*\uff0c \u5177\u4f53\u5230\u672c\u53f0\u4e3b\u673a\u3002\u901a\u5e38\u800c\u8a00\u6709\u8fdb\u4e00\u6b65\u7684\u5b50\u76ee\u5f55\uff0c \u4f8b\u5982\uff1a bin/ \u3001 lib/ \u3001 share/ .[ 14] /var/ \u53d8\u91cf\u6587\u4ef6\u2014\u2014\u5728\u6b63\u5e38\u8fd0\u884c\u7684\u7cfb\u7edf\u4e2d\u5176\u5185\u5bb9\u4e0d\u65ad\u53d8\u5316\u7684\u6587\u4ef6\uff0c\u5982\u65e5\u5fd7\uff0c\u8131\u673a\u6587\u4ef6\u548c\u4e34\u65f6\u7535\u5b50\u90ae\u4ef6\u6587\u4ef6\u3002\u6709\u65f6\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u5206\u533a\u3002 /var/cache/ \u5e94\u7528\u7a0b\u5e8f\u7f13\u5b58\u6570\u636e\u3002\u8fd9\u4e9b\u6570\u636e\u662f\u5728\u672c\u5730\u751f\u6210\u7684\u4e00\u4e2a\u8017\u65f6\u7684I/O\u6216\u8ba1\u7b97\u7ed3\u679c\u3002\u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u80fd\u591f\u518d\u751f\u6216\u6062\u590d\u6570\u636e\u3002\u7f13\u5b58\u7684\u6587\u4ef6\u53ef\u4ee5\u88ab\u5220\u9664\u800c\u4e0d\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002 /var/lib/ \u72b6\u6001\u4fe1\u606f\u3002 \u7531\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u7ef4\u62a4\u7684\u6301\u4e45\u6027\u6570\u636e\u3002 *\u4f8b\u5982\uff1a*\u6570\u636e\u5e93\u3001\u5305\u88c5\u7684\u7cfb\u7edf\u5143\u6570\u636e\u7b49\u3002 /var/lock/ \u9501\u6587\u4ef6\uff0c\u4e00\u7c7b\u8ddf\u8e2a\u5f53\u524d\u4f7f\u7528\u4e2d\u8d44\u6e90\u7684\u6587\u4ef6\u3002 /var/log/ \u65e5\u5fd7\u6587\u4ef6\uff0c\u5305\u542b\u5927\u91cf\u65e5\u5fd7\u6587\u4ef6\uff0c\u4e3a\u4e86\u9632\u6b62\u65e5\u5fd7\u5360\u6ee1\u6839\u5206\u533a\uff0c\u751f\u4ea7\u73af\u5883\u4e2d\u4e00\u822c\u662f\u5355\u72ec\u5206\u533a\u3002 /var/mail/ \u7528\u6237\u7684 \u7535\u5b50\u90ae\u7bb1 \u3002 /var/run/ \u81ea\u6700\u540e\u4e00\u6b21\u542f\u52a8\u4ee5\u6765\u8fd0\u884c\u4e2d\u7684\u7cfb\u7edf\u7684\u4fe1\u606f\uff0c*\u4f8b\u5982\uff1a*\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237\u548c\u8fd0\u884c\u4e2d\u7684 \u5b88\u62a4\u8fdb\u7a0b \u3001\u4e00\u4e9b\u5b88\u62a4\u8fdb\u7a0b\u7684pid\u6587\u4ef6\u3001socket\u6587\u4ef6\u3002\u73b0\u5df2\u7ecf\u88ab/run\u4ee3\u66ff[ 15] \u3002 /var/spool/ \u7b49\u5f85\u5904\u7406\u7684\u4efb\u52a1\u7684 \u8131\u673a\u6587\u4ef6 \uff0c*\u4f8b\u5982\uff1a*\u6253\u5370\u961f\u5217\u548c\u672a\u8bfb\u7684\u90ae\u4ef6\u3002 /var/spool/mail/ \u7528\u6237\u7684\u90ae\u7bb1(\u4e0d\u9f13\u52b1\u7684\u5b58\u50a8\u4f4d\u7f6e) /var/tmp/ \u5728\u7cfb\u7edf\u91cd\u542f\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u4fdd\u7559\u7684\u4e34\u65f6\u6587\u4ef6\u3002 /run/ \u4ee3\u66ff/var/run\u76ee\u5f55\u3002","title":"4.Linux\u7684\u76ee\u5f55\u7ed3\u6784"},{"location":"DevOps/Homework/week1/#5","text":"\u5c3d\u529b\u5b8c\u6210\u89c4\u5b9a\u76ee\u6807","title":"5.\u540e\u671f\u5b66\u4e60\u7684\u8ba1\u5212"},{"location":"DevOps/Homework/week2/","text":"week2 \u00b6 1.Linux\u7684\u5b89\u5168\u6027\uff1a \u00b6 \u200b Linux\u5b89\u5168\u7cfb\u7edf\u7684\u6838\u5fc3\u662f\u7528\u6237\u8d26\u6237\u3002\u6bcf\u4e2a\u80fd\u8fdb\u5165Linux\u7cfb\u7edf\u7684\u7528\u6237\u90fd\u4f1a\u88ab\u5206\u914d\u552f\u4e00\u7684\u7528\u6237\u8d26\u6237\u3002\u7528\u6237\u5bf9\u7cfb\u7edf\u4e2d\u5404\u79cd\u5bf9\u8c61\u7684\u8bbf\u95ee\u6743\u9650\u53d6\u51b3\u4e8e\u4ed6\u4eec\u767b\u5f55\u7cfb\u7edf\u65f6\u7528\u7684\u8d26\u6237\u3002 \u200b \u7528\u6237\u6743\u9650\u662f\u901a\u8fc7\u521b\u5efa\u7528\u6237\u65f6\u5206\u914d\u7684\u7528\u6237ID\uff08User ID\uff0c\u901a\u5e38\u7f29\u5199\u4e3aUID\uff09\u6765\u8ddf\u8e2a\u7684\u3002UID\u662f\u6570\u503c\uff0c\u6bcf\u4e2a\u7528\u6237\u90fd\u6709\u552f\u4e00\u7684UID\uff0c\u4f46\u5728\u767b\u5f55\u7cfb\u7edf\u65f6\u7528\u7684\u4e0d\u662fUID\uff0c\u800c\u662f\u767b\u5f55\u540d\u3002\u767b\u5f55\u540d\u662f\u7528\u6237\u7528\u6765\u767b\u5f55\u7cfb\u7edf\u7684\u6700\u957f\u516b\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\uff08\u5b57\u7b26\u53ef\u4ee5\u662f\u6570\u5b57\u6216\u5b57\u6bcd\uff09\uff0c\u540c\u65f6\u4f1a\u5173\u8054\u4e00\u4e2a\u5bf9\u5e94\u7684\u5bc6\u7801\u3002 /etc/passwd\u6587\u4ef6 \u00b6 linux\u4f7f\u7528\u4e00\u4e2a\u4e13\u95e8\u7684\u6587\u4ef6\u5c06\u7528\u6237\u7684\u767b\u5f55\u540d\u5339\u914d\u5230\u5bf9\u5e94\u7684UID\u503c\u3002\u8fd9\u4e2a\u6587\u4ef6\u5c31\u662f/etc/passwd\u6587\u4ef6\u3002\u8be5\u6587\u4ef6\u4e2d\u5305\u542b\u4e86\u4e00\u4e9b\u4e0e\u7528\u6237\u76f8\u5173\u7684\u4fe1\u606f\u3002 [root@rocky8 ~]# cat /etc/passwd root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin adm:x:3:4:adm:/var/adm:/sbin/nologin lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin sync:x:5:0:sync:/sbin:/bin/sync shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown halt:x:7:0:halt:/sbin:/sbin/halt mail:x:8:12:mail:/var/spool/mail:/sbin/nologin operator:x:11:0:operator:/root:/sbin/nologin games:x:12:100:games:/usr/games:/sbin/nologin ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin nobody:x:65534:65534:Kernel Overflow User:/:/sbin/nologin dbus:x:81:81:System message bus:/:/sbin/nologin systemd-coredump:x:999:997:systemd Core Dumper:/:/sbin/nologin systemd-resolve:x:193:193:systemd Resolver:/:/sbin/nologin tss:x:59:59:Account used for TPM access:/dev/null:/sbin/nologin polkitd:x:998:996:User for polkitd:/:/sbin/nologin unbound:x:997:995:Unbound DNS resolver:/etc/unbound:/sbin/nologin geoclue:x:996:994:User for geoclue:/var/lib/geoclue:/sbin/nologin rtkit:x:172:172:RealtimeKit:/proc:/sbin/nologin pipewire:x:995:991:PipeWire System Daemon:/var/run/pipewire:/sbin/nologin pulse:x:171:171:PulseAudio System Daemon:/var/run/pulse:/sbin/nologin qemu:x:107:107:qemu user:/:/sbin/nologin clevis:x:994:988:Clevis Decryption Framework unprivileged user:/var/cache/clevis:/sbin/nologin \u200b root\u7528\u6237\u662fLinux\u7cfb\u7edf\u7684\u7ba1\u7406\u5458\uff0c\u5206\u914d\u7ed9\u5b83\u7684\u56fa\u5b9aUID\u662f0\u3002\u5728Linux\u7cfb\u7edf\u4e2d\u4f1a\u4e3a\u4e0d\u540c\u7684\u529f\u80fd\u521b\u5efa\u4e0d\u901a\u8fc7\u7684\u7528\u6237\u8d26\u6237\uff0c\u8fd9\u4e9b\u8d26\u6237\u7684\u4f5c\u7528\u662f\u5728\u5728Linux\u7cfb\u7edf\u4e0a\u8fd0\u884c\u4e0d\u540c\u7684\u670d\u52a1\u8fdb\u7a0b\u8bbf\u95ee\u8d44\u6e90\u6240\u9700\u8981\u7684\u7279\u6b8a\u8d26\u6237\u3002\u6240\u6709\u8fd0\u884c\u5728\u540e\u53f0\u7684\u670d\u52a1\u90fd\u9700\u8981\u7528\u4e00\u4e2a\u7cfb\u7edf\u8d26\u6237\u767b\u5f55\u5230Linux\u7cfb\u7edf\u4e0a\u3002 \u200b /etc/passwd\u6587\u4ef6\u4e2d\u9664\u4e86\u7528\u6237\u540d\u548cUID\u4e4b\u5916\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u5b57\u6bb5\u3002/etc/passwd\u6587\u4ef6\u5b57\u6bb5\u4e2d\u56fd\u5305\u542b\u4e86\u5982\u4e0b\u4fe1\u606f\u3002 \u767b\u5f55\u7528\u6237\u540d \u7528\u6237\u5bc6\u7801 \u7528\u6237\u7684UID\uff08\u6570\u5b57\u5f62\u5f0f\uff09 \u7528\u6237\u7684\u7ec4ID\uff08\u6570\u5b57\u5f62\u5f0f\uff09 \u7528\u6237\u7684\u6587\u672c\u63cf\u8ff0\uff08\u5907\u6ce8\u5b57\u6bb5\uff09 \u7528\u6237HOME\u76ee\u5f55\u7684\u4f4d\u7f6e \u7528\u6237\u9ed8\u8ba4\u7684shell \u200b /etc/passwd\u6587\u4ef6\u4e2d\u7684\u5bc6\u7801\u5b57\u6bb5\u90fd\u88ab\u8bbe\u7f6e\u6210\u4e86x\uff0c\u8fd9\u5e76\u4e0d\u662f\u8bf4\u6240\u6709\u7684\u7528\u6237\u8d26\u6237\u90fd\u7528\u76f8\u540c\u7684\u5bc6\u7801\u3002\u5728\u65e9\u671f\u7684Linux\u4e0a\uff0c/etc/passwd\u6587\u4ef6\u91cc\u6709\u52a0\u5bc6\u540e\u7684\u7528\u6237\u5bc6\u7801\u3002\u4f46\u9274\u4e8e\u5f88\u591a\u7a0b\u5e8f\u90fd\u9700\u8981\u8bbf\u95ee/etc/passwd\u6587\u4ef6\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff0c\u8fd9\u5c31\u6210\u4e86\u4e00\u4e2a\u5b89\u5168\u9690\u60a3\u3002\u968f\u7740\u7528\u6765\u7834\u89e3\u52a0\u5bc6\u5bc6\u7801\u7684\u5de5\u5177\u7684\u4e0d\u65ad\u6f14\u8fdb\uff0c\u7528\u5fc3\u4e0d\u826f\u7684\u4eba\u5f00\u59cb\u5fd9\u4e8e\u7834\u89e3\u5b58\u50a8\u5728/etc/passwd\u6587\u4ef6\u4e2d\u7684\u5bc6\u7801\u3002 \u200b \u73b0\u5728\u7edd\u5927\u591a\u6570Linux\u7cfb\u7edf\u5c06\u7528\u6237\u5bc6\u7801\u4fdd\u5b58\u5728\u53e6\u5916\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\u4e2d\uff08/etc/shadow\uff09\u3002\u53ea\u6709\u7279\u5730\u7ed9\u7684\u7a0b\u5e8f\u624d\u80fd\u8bbf\u95ee\u8fd9\u4e2a\u6587\u4ef6\u3002 /etc/shadow\u6587\u4ef6 \u00b6 \u200b /etc/passwd\u6587\u4ef6\u4e2d\u7684\u5bc6\u7801\u5b57\u6bb5\u90fd\u88ab\u8bbe\u7f6e\u6210\u4e86x\uff0c\u8fd9\u5e76\u4e0d\u662f\u8bf4\u6240\u6709\u7684\u7528\u6237\u8d26\u6237\u90fd\u7528\u76f8\u540c\u7684\u5bc6\u7801\u3002\u5728\u65e9\u671f\u7684Linux\u4e0a\uff0c/etc/passwd\u6587\u4ef6\u91cc\u6709\u52a0\u5bc6\u540e\u7684\u7528\u6237\u5bc6\u7801\u3002\u4f46\u9274\u4e8e\u5f88\u591a\u7a0b\u5e8f\u90fd\u9700\u8981\u8bbf\u95ee/etc/passwd\u6587\u4ef6\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff0c\u8fd9\u5c31\u6210\u4e86\u4e00\u4e2a\u5b89\u5168\u9690\u60a3\u3002\u968f\u7740\u7528\u6765\u7834\u89e3\u52a0\u5bc6\u5bc6\u7801\u7684\u5de5\u5177\u7684\u4e0d\u65ad\u6f14\u8fdb\uff0c\u7528\u5fc3\u4e0d\u826f\u7684\u4eba\u5f00\u59cb\u5fd9\u4e8e\u7834\u89e3\u5b58\u50a8\u5728/etc/passwd\u6587\u4ef6\u4e2d\u7684\u5bc6\u7801\u3002\u8bb0\u5f55\u5982\u4e0b\uff1a h:$6$vlwVGTB1mmYP76UY$0H.1SgqNiOxkVLzDU7QmlyZ8oYS3cd90k0mQWe3o.zaJlLEPunsAQF1.yOurWDBkEXuz86/DEULg9PFiAxPkU1:19328:0:99999:7::: \u200b /etc/shadow\u6587\u4ef6\u4e2d\u6bcf\u4e00\u4e2a\u7528\u6237\u90fd\u5b58\u5728\u4e00\u6761\u8bb0\u5f55\uff0c\u6bcf\u6761\u8bb0\u5f55\u5305\u542b9\u4e2a\u5b57\u6bb5\u3002 \u767b\u5f55\u540d \u52a0\u5bc6\u540e\u7684\u5bc6\u7801 \u81ea\u4e0a\u6b21\u4fee\u6539\u5bc6\u7801\u540e\u8fc7\u53bb\u7684\u5929\u6570\uff08\u4ece1970\u5e741\u67081\u65e5\u5f00\u59cb\u8ba1\u7b97\uff09 \u591a\u5c11\u5929\u540e\u624d\u80fd\u66f4\u6539\u5bc6\u7801 \u591a\u5c11\u5929\u540e\u5fc5\u987b\u66f4\u6539\u5bc6\u7801 \u5bc6\u7801\u8fc7\u671f\u63d0\u524d\u591a\u5c11\u5929\u63d0\u9192\u7528\u6237\u66f4\u6539\u5bc6\u7801 \u5bc6\u7801\u8fc7\u671f\u591a\u5c11\u5929\u7981\u7528\u7528\u6237\u8d26\u6237 \u7528\u6237\u8d26\u6237\u88ab\u7981\u7528\u7684\u65e5\u671f \u9884\u7559\u5b57\u6bb5\u7ed9\u5c06\u6765\u4f7f\u7528 2.Linux\u4e0b\u7684\u7528\u6237\u64cd\u4f5c \u00b6 1.\u6dfb\u52a0\u7528\u6237\uff1auseradd \u00b6 \u4f7f\u7528useradd\u547d\u4ee4\u53ef\u4ee5\u521b\u5efa\u7528\u6237\u8d26\u6237\u4ee5\u53ca\u7528\u6237\u8d26\u6237\u7684HOME\u76ee\u5f55\u7ed3\u6784\u3002useradd\u547d\u4ee4\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u503c\u4ee5\u53ca\u547d\u4ee4\u884c\u53c2\u6570\u6765\u8bbe\u7f6e\u7528\u6237\u8d26\u6237\u3002\u7cfb\u7edf\u9ed8\u8ba4\u503c\u88ab\u653e\u7f6e\u5728/etc/default/useradd\u6587\u4ef6\u4e2d\u3002\u4e5f\u53ef\u4ee5\u4f7f\u7528useradd -D\u6765\u67e5\u770b\u9ed8\u8ba4\u53c2\u6570\u3002 [ root@rocky8 ~ ] # cat /etc/default/useradd # useradd defaults file GROUP = 100 HOME = /home INACTIVE = -1 EXPIRE = SHELL = /bin/bash SKEL = /etc/skel CREATE_MAIL_SPOOL = yes [ root@rocky8 ~ ] # useradd -D GROUP = 100 HOME = /home INACTIVE = -1 EXPIRE = SHELL = /bin/bash SKEL = /etc/skel CREATE_MAIL_SPOOL = yes useradd\u5141\u8bb8\u7ba1\u7406\u5458\u521b\u5efa\u4e00\u4efd\u9ed8\u8ba4\u7684HOME\u76ee\u5f55\u914d\u7f6e\uff0c\u7136\u540e\u5c06\u5176\u4f5c\u4e3a\u521b\u5efa\u65b0\u7528\u6237HOME\u76ee\u5f55\u7684\u6a21\u677f\u3002\u8fd9\u6837\u5c31\u80fd\u5728\u6bcf\u4e2a\u65b0\u7528\u6237\u521b\u5efa\u65f6\u81ea\u52a8\u5728\u6bcf\u4e2a\u65b0\u7528\u6237\u7684HOME\u76ee\u5f55\u4e0b\u653e\u7f6e\u9ed8\u8ba4\u7684\u7cfb\u7edf\u6587\u4ef6\u3002 [root@rocky8 ~]# cd /etc/skel/ [root@rocky8 skel]# ll -a total 24 drwxr-xr-x. 3 root root 78 11\u6708 12 20:38 . drwxr-xr-x. 147 root root 8192 12\u6708 12 13:51 .. -rw-r--r--. 1 root root 18 8\u6708 2 15:41 .bash_logout -rw-r--r--. 1 root root 141 8\u6708 2 15:41 .bash_profile -rw-r--r--. 1 root root 376 8\u6708 2 15:41 .bashrc drwxr-xr-x. 4 root root 39 11\u6708 12 20:37 .mozilla 2.\u5220\u9664\u7528\u6237\uff1auserdel \u00b6 \u200b userdel\u53ef\u4ee5\u5220\u9664\u7cfb\u7edf\u4e2d\u7684\u7528\u6237\u4fe1\u606f\uff0c\u4f46\u662f\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cuserdel\u547d\u4ee4\u53ea\u4f1a\u5220\u9664/etc/passwd\u6587\u4ef6\u4e2d\u7684\u7528\u6237\u4fe1\u606f\uff0c\u5e76\u4e0d\u4f1a\u5220\u9664\u8be5\u7cfb\u7edf\u4e2d\u5c5e\u4e8e\u8be5\u8d26\u6237\u7684\u4efb\u4f55\u6587\u4ef6\u3002 [root@rocky8 ~]# userdel usertest userdel: user usertest is currently used by process 3273 [root@rocky8 ~]# cd /home/ [root@rocky8 home]# ls _D h meet moot usertest xxxxxxxxxxxxxxxxxxxxxxxxx 3.\u4fee\u6539\u7528\u6237 \u00b6 3-1 usermod \u00b6 usermod\u547d\u4ee4\u662f\u7528\u6237\u8d26\u6237\u4fee\u6539\u5de5\u5177\u4e2d\u6700\u5f3a\u5927\u7684\u4e00\u4e2a\uff0c\u5b83\u80fd\u591f\u7528\u4f7f\u7528\u4e0d\u540c\u7684\u53c2\u6570\u6765\u4fee\u6539/etc/passwd\u4e2d\u7684\u5927\u90e8\u5206\u5b57\u6bb5\u3002 \u4e3e\u4f8b\uff1a \u547d\u4ee4 \u53c2\u6570 \u529f\u80fd usermod -l \u4fee\u6539\u7528\u6237\u7684\u767b\u5f55\u540d usermod -L \u9501\u5b9a\u7528\u6237\uff1b\u4f7f\u7528\u6237\u65e0\u6cd5\u767b\u5f55 usermod -p \u4fee\u6539\u7528\u6237\u5bc6\u7801 usermod -U \u89e3\u9501\u7528\u6237\u8d26\u6237 usermod -c \u4fee\u6539\u65b0\u5907\u6ce8 \u8be6\u7ec6\u529f\u80fd\uff1a [root@rocky8 home]# usermod --help Usage: usermod [options] LOGIN Options: -c, --comment COMMENT new value of the GECOS field -d, --home HOME_DIR new home directory for the user account -e, --expiredate EXPIRE_DATE set account expiration date to EXPIRE_DATE -f, --inactive INACTIVE set password inactive after expiration to INACTIVE -g, --gid GROUP force use GROUP as new primary group -G, --groups GROUPS new list of supplementary GROUPS -a, --append append the user to the supplemental GROUPS mentioned by the -G option without removing the user from other groups -h, --help display this help message and exit -l, --login NEW_LOGIN new value of the login name -L, --lock lock the user account -m, --move-home move contents of the home directory to the new location (use only with -d) -o, --non-unique allow using duplicate (non-unique) UID -p, --password PASSWORD use encrypted password for the new password -R, --root CHROOT_DIR directory to chroot into -P, --prefix PREFIX_DIR prefix directory where are located the /etc/* files -s, --shell SHELL new login shell for the user account -u, --uid UID new UID for the user account -U, --unlock unlock the user account -v, --add-subuids FIRST-LAST add range of subordinate uids -V, --del-subuids FIRST-LAST remove range of subordinate uids -w, --add-subgids FIRST-LAST add range of subordinate gids -W, --del-subgids FIRST-LAST remove range of subordinate gids -Z, --selinux-user SEUSER new SELinux user mapping for the user account 3-2 \u5355\u4e00\u529f\u80fd\u7528\u6237\u4fee\u6539\u547d\u4ee4 \u00b6 passwd\uff1a\u4fee\u6539\u7528\u6237\u5bc6\u7801 3.Linux\u4e0b\u7684\u7528\u6237\u7ec4\u64cd\u4f5c \u00b6 \u200b \u7528\u6237\u8d26\u6237\u5728\u63a7\u5236\u5355\u4e2a\u7528\u6237\u5b89\u5168\u6027\u65b9\u9762\u975e\u5e38\u597d\u7528\uff0c\u4f46\u662f\u5728\u6d89\u53ca\u5171\u4eab\u8d44\u6e90\u7684\u4e00\u7ec4\u7528\u6237\u65f6\u5c31\u6bd4\u8f83\u6349\u895f\u89c1\u8098\u4e86\u3002Linux\u624d\u7528\u7528\u6237\u7ec4\u7684\u6982\u5ff5\uff0c\u4f7f\u7528\u7ec4\u53bb\u6279\u91cf\u9650\u5236\u591a\u4e2a\u7528\u6237\u7684\u6743\u9650\u3002 /etc/group \u00b6 \u200b \u8ddf\u7528\u6237\u8d26\u6237\u7c7b\u4f3c\u7684\uff0c\u7ec4\u7684\u4fe1\u606f\u4f1a\u5355\u72ec\u4fdd\u5b58\u5728Linux\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e2a\u6587\u4ef6\u4e2d\u3002/etc/group\u6587\u4ef6\u7cfb\u7edf\u5305\u542b\u4e86\u7cfb\u7edf\u4e0a\u7528\u5230\u7684\u6bcf\u4e2a\u7528\u6237\u7ec4\u7684\u4fe1\u606f\u3002 [root@rocky8 ~]# cat /etc/gro groff/ group group- [root@rocky8 ~]# cat /etc/group root:x:0: bin:x:1: daemon:x:2: sys:x:3: adm:x:4: tty:x:5: disk:x:6: lp:x:7: mem:x:8: kmem:x:9: wheel:x:10:h cdrom:x:11: mail:x:12:postfix man:x:15: dialout:x:18: floppy:x:19: games:x:20: tape:x:33: video:x:39: ftp:x:50: lock:x:54: audio:x:63: users:x:100: nobody:x:65534: dbus:x:81: utmp:x:22: utempter:x:35: input:x:999: kvm:x:36:qemu \u4e0eUID\u4e00\u6837\uff0cGID\u5728\u5206\u914d\u65f6\u4e5f\u91c7\u7528\u4e86\u7279\u5b9a\u7684\u683c\u5f0f\u3002\u7cfb\u7edf\u8d26\u6237\u7528\u7684\u7ec4\u901a\u5e38\u4f1a\u5206\u914d\u4f4e\u4e8e500\u7684GID\u503c\uff0c\u7528\u6237\u7ec4\u7684GID\u5219\u4f1a\u4ece500\u5f00\u59cb\u5206\u914d\u3002 /etc/group\u6587\u4ef6\u6709\u56db\u4e2a\u5b57\u6bb5 \u7ec4\u540d \u7ec4\u5bc6\u7801 GID \u5c5e\u4e8e\u8be5\u7ec4\u7684\u7528\u6237\u5217\u8868 1.\u521b\u5efa\u65b0\u7ec4\uff1agroupadd \u00b6 [root@rocky8 ~]# groupadd testgroup [root@rocky8 ~]# tail /etc/group _osbuild-composer:x:972: tlog:x:971: apache:x:48: xxxxxxxxxxxxxxxxxxxxxxxxx:x:1001: _D:x:1002: meet:x:1003: moot:x:1004: usertest:x:1005: hh:x:1006: testgroup:x:1007: 2.\u6dfb\u52a0\u7528\u6237\u5230\u7ec4\uff1ausermod -G \u7ec4\u540d \u7528\u6237\u540d \u00b6 [root@rocky8 ~]# useradd test1 [root@rocky8 ~]# useradd test2 [root@rocky8 ~]# useradd test3 [root@rocky8 ~]# usermod -G testgroup test1 [root@rocky8 ~]# usermod -G testgroup test2 [root@rocky8 ~]# usermod -G testgroup test3 [root@rocky8 ~]# tail /etc/group xxxxxxxxxxxxxxxxxxxxxxxxx:x:1001: _D:x:1002: meet:x:1003: moot:x:1004: usertest:x:1005: hh:x:1006: testgroup:x:1007:test1,test2,test3 test1:x:1008: test2:x:1009: test3:x:1010: 3.\u4fee\u6539\u7ec4\uff1agroupmod \u00b6 [root@rocky8 ~]# groupmod --help Usage: groupmod [options] GROUP Options: -g, --gid GID change the group ID to GID -h, --help display this help message and exit -n, --new-name NEW_GROUP change the name to NEW_GROUP -o, --non-unique allow to use a duplicate (non-unique) GID -p, --password PASSWORD change the password to this (encrypted) PASSWORD -R, --root CHROOT_DIR directory to chroot into -P, --prefix PREFIX_DIR prefix directory where are located the /etc/* files 4.\u6587\u4ef6\u6743\u9650 \u00b6 4-1.\u9ed8\u8ba4\u6587\u4ef6\u6743\u9650 \u00b6 \u6587\u4ef6\u7684\u9ed8\u8ba4\u6743\u9650\u6765\u81ea\u4e8eumask\uff1bumask\u547d\u4ee4\u7528\u6765\u8bbe\u7f6e\u548c\u521b\u5efa\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u9ed8\u8ba4\u6743\u9650\u3002 [root@rocky8 ~]# umask 0022 [root@rocky8 ~]# Linux\u7cfb\u7edf\u4e2d\u5206\u4e3a\u6587\u4ef6\u548c\u76ee\u5f55\u6587\u4ef6\u7684\u9700\u8981\u6709\u8bfb\u5199\u7684\u6743\u9650\u800c\u4e0d\u9700\u8981\u6267\u884c\uff0c\u6587\u4ef6\u7684\u5168\u6743\u9650\u662f666\u5373\u4e3a\u4e8c\u8fdb\u5236\u7684110 110 110 \uff0cumask\u7ed9\u5b9a\u7684\u63a9\u7801\u4e3a0022\u3002\u53d6\u540e\u4e09\u4f4d\u4e3a\u4e8c\u8fdb\u5236\u7684000 010 010\u4e0e\u4e0a\u9762\u7684\u4e8c\u8fdb\u5236\u7684666\u8fdb\u884c\u5f02\u6216\u8fd0\u7b97\u5219\u7ed3\u679c\u4e3a644.\u540c\u7406\u76ee\u5f55\u7684\u9ed8\u8ba4\u5168\u6743\u9650\u8ddfumask\u8fdb\u884c\u5f02\u6216\u7ed3\u679c\u662f755. 5.VIM\u64cd\u4f5c \u00b6 \u5176\u5b9e\u5f88\u7b80\u5355 \u6709\u4e2a\u6e38\u620f\u53eb\u505a vimtutor\uff0c\u8010\u4f4f\u6027\u5b50\u73a9\u51e0\u904d\u5c31\u5dee\u4e0d\u591a\u4e86\u3002 1.\u79fb\u52a8 \u00b6 1.\u57fa\u7840\u79fb\u52a8 ** \u8981\u79fb\u52a8\u5149\u6807\uff0c\u8bf7\u4f9d\u7167\u8bf4\u660e\u5206\u522b\u6309\u4e0b h\u3001j\u3001k\u3001l \u952e\u3002 ** ^ k \u63d0\u793a\uff1a h \u7684\u952e\u4f4d\u4e8e\u5de6\u8fb9\uff0c\u6bcf\u6b21\u6309\u4e0b\u5c31\u4f1a\u5411\u5de6\u79fb\u52a8\u3002 < h l > l \u7684\u952e\u4f4d\u4e8e\u53f3\u8fb9\uff0c\u6bcf\u6b21\u6309\u4e0b\u5c31\u4f1a\u5411\u53f3\u79fb\u52a8\u3002 j j \u952e\u770b\u8d77\u6765\u5f88\u8c61\u4e00\u652f\u5c16\u7aef\u65b9\u5411\u671d\u4e0b\u7684\u7bad\u5934\u3002 v 2.\u6307\u5b9a\u79fb\u52a8\u4f4d\u6570 1. \u8f93\u5165 2w \u4f7f\u5149\u6807\u5411\u524d\u79fb\u52a8\u4e24\u4e2a\u5355\u8bcd\u3002 2. \u8f93\u5165 3e \u4f7f\u5149\u6807\u5411\u524d\u79fb\u52a8\u5230\u7b2c\u4e09\u4e2a\u5355\u8bcd\u7684\u672b\u5c3e\u3002 3. \u8f93\u5165 0 (\u6570\u5b57\u96f6) \u79fb\u52a8\u5149\u6807\u5230\u884c\u9996\u3002 6.shell\u811a\u672c\u7f16\u7a0b \u00b6 1.\u4f7f\u7528\u591a\u4e2a\u547d\u4ee4 \u00b6 \u200b shell\u811a\u672c\u7684\u5173\u952e\u5728\u4e8e\u8f93\u5165\u591a\u4e2a\u547d\u4ee4\u5e76\u8f93\u51fa\u6bcf\u4e2a\u547d\u4ee4\u7684\u7ed3\u679c\u3002 root@ubuntu:~# date; who Tue Dec 13 01:13:12 AM UTC 2022 h pts/0 2022-12-13 01:11 (10.0.0.1) 2.\u521b\u5efashell\u811a\u672c \u00b6 \u4f7f\u7528\u6587\u672c\u7f16\u8f91\u5668\uff0c\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\uff1b\u5e76\u5728\u7b2c\u4e00\u884c\u7684\u6307\u5b9a\u8981\u4f7f\u7528\u7684shell\u7c7b\u578b\u3002\u53ef\u4ee5\u4f7f\u7528#\u6dfb\u52a0\u6ce8\u91ca root@ubuntu:~# vim test.sh root@ubuntu:~# cat test.sh !/bin/bash #This script displays the data and who's logged on date who 3.\u8fd0\u884c\u811a\u672c \u00b6 \u9996\u5148\u8981\u8ba9bash shell\u80fd\u591f\u627e\u5230\u4f60\u81ea\u5df1\u5199\u7684\u811a\u672c\u6587\u4ef6\uff0cshell\u4f1a\u901a\u8fc7PATH\u73af\u5883\u53d8\u91cf\u67e5\u627e\u547d\u4ee4\u3002 \u67e5\u770bPATH\u73af\u5883\u53d8\u91cf\uff1a ~ root@ubuntu:~# echo $PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin ~ \u4f7f\u7528\u811a\u672c\u7684\u4e24\u79cd\u65b9\u5f0f 1.\u5c06shell\u811a\u672c\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u6dfb\u52a0\u5230PATH\u73af\u5883\u53d8\u91cf\u4e2d 2.\u5728\u63d0\u793a\u7b26\u4e2d\u4f7f\u7528\u7edd\u5bf9\u6216\u8005\u76f8\u5bf9\u8def\u5f84\u6765\u5f15\u7528shell\u811a\u672c\u6587\u4ef6 root@ubuntu:~# ./test.sh -bash: ./test.sh: Permission denied \u4e0a\u9762\u6267\u884c\u811a\u672c\u88ab\u62d2\u7edd\uff0c\u5728\u6267\u884c\u4e4b\u524d\u8981\u7ed9\u811a\u672c\u8d4b\u4e88\u6267\u884c\u6743\u9650\u3002 root@ubuntu:~# chmod u+x test.sh -rwxr--r-- 1 root root 71 Dec 13 01:18 test.sh* \u4f7f\u7528./test.sh\u6267\u884c\u811a\u672c root@ubuntu:~# ./test.sh ./test.sh: line 1: !/bin/bash: No such file or directory Tue Dec 13 01:32:35 AM UTC 2022 h pts/0 2022-12-13 01:11 (10.0.0.1) 4.\u547d\u4ee4\u66ff\u6362 \u00b6 \u53cd\u5f15\u53f7 root@ubuntu:~/shell# cat test4.sh #!/bin/bash testing=`date` echo \"The date and time are:\" $testing root@ubuntu:~/shell# sh test4.sh The date and time are: Tue Dec 13 02:17:49 AM UTC 2022 $()\u683c\u5f0f root@ubuntu:~/shell# cat test5.sh #!/bin/bash testing=$(date) echo \"The date and time are:\" $testing root@ubuntu:~/shell# ./test5.sh The date and time are: Tue Dec 13 02:18:40 AM UTC 2022 5.\u91cd\u5b9a\u5411 \u00b6 \u8f93\u51fa\u91cd\u5b9a\u578b \u6700\u57fa\u672c\u7684\u91cd\u5b9a\u5411\u5c06\u547d\u4ee4\u7684\u8f93\u51fa\u53d1\u9001\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\u3002 root@ubuntu:~/shell# cat datetest.sh Tue Dec 13 05:46:42 AM UTC 2022 \u8986\u76d6\u91cd\u5b9a\u5411 root@ubuntu:~/shell# date > datetest.sh root@ubuntu:~/shell# cat datetest.sh Tue Dec 13 05:47:25 AM UTC 2022 \u8ffd\u52a0\u91cd\u5b9a\u5411 root@ubuntu:~/shell# date >> datetest.sh root@ubuntu:~/shell# cat datetest.sh Tue Dec 13 05:47:25 AM UTC 2022 Tue Dec 13 05:47:59 AM UTC 2022 \u8f93\u5165\u91cd\u5b9a\u5411 \u8f93\u5165\u91cd\u5b9a\u5411\u662f\u5c06\u6587\u4ef6\u5185\u5bb9\u91cd\u5b9a\u5411\u5230\u547d\u4ee4 wc\u80fd\u591f\u5bf9\u6570\u636e\u4e2d\u7684\u6587\u672c\u8fdb\u884c\u8ba1\u6570\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u8f93\u51fa 1.\u6587\u672c\u7684\u884c\u6570 2.\u6587\u672c\u7684\u8bcd\u6570 3.\u6587\u672c\u7684\u5b57\u8282\u6570 root@ubuntu:~/shell# wc < datetest.sh 2 14 64","title":"week2"},{"location":"DevOps/Homework/week2/#week2","text":"","title":"week2"},{"location":"DevOps/Homework/week2/#1linux","text":"\u200b Linux\u5b89\u5168\u7cfb\u7edf\u7684\u6838\u5fc3\u662f\u7528\u6237\u8d26\u6237\u3002\u6bcf\u4e2a\u80fd\u8fdb\u5165Linux\u7cfb\u7edf\u7684\u7528\u6237\u90fd\u4f1a\u88ab\u5206\u914d\u552f\u4e00\u7684\u7528\u6237\u8d26\u6237\u3002\u7528\u6237\u5bf9\u7cfb\u7edf\u4e2d\u5404\u79cd\u5bf9\u8c61\u7684\u8bbf\u95ee\u6743\u9650\u53d6\u51b3\u4e8e\u4ed6\u4eec\u767b\u5f55\u7cfb\u7edf\u65f6\u7528\u7684\u8d26\u6237\u3002 \u200b \u7528\u6237\u6743\u9650\u662f\u901a\u8fc7\u521b\u5efa\u7528\u6237\u65f6\u5206\u914d\u7684\u7528\u6237ID\uff08User ID\uff0c\u901a\u5e38\u7f29\u5199\u4e3aUID\uff09\u6765\u8ddf\u8e2a\u7684\u3002UID\u662f\u6570\u503c\uff0c\u6bcf\u4e2a\u7528\u6237\u90fd\u6709\u552f\u4e00\u7684UID\uff0c\u4f46\u5728\u767b\u5f55\u7cfb\u7edf\u65f6\u7528\u7684\u4e0d\u662fUID\uff0c\u800c\u662f\u767b\u5f55\u540d\u3002\u767b\u5f55\u540d\u662f\u7528\u6237\u7528\u6765\u767b\u5f55\u7cfb\u7edf\u7684\u6700\u957f\u516b\u5b57\u7b26\u7684\u5b57\u7b26\u4e32\uff08\u5b57\u7b26\u53ef\u4ee5\u662f\u6570\u5b57\u6216\u5b57\u6bcd\uff09\uff0c\u540c\u65f6\u4f1a\u5173\u8054\u4e00\u4e2a\u5bf9\u5e94\u7684\u5bc6\u7801\u3002","title":"1.Linux\u7684\u5b89\u5168\u6027\uff1a"},{"location":"DevOps/Homework/week2/#etcpasswd","text":"linux\u4f7f\u7528\u4e00\u4e2a\u4e13\u95e8\u7684\u6587\u4ef6\u5c06\u7528\u6237\u7684\u767b\u5f55\u540d\u5339\u914d\u5230\u5bf9\u5e94\u7684UID\u503c\u3002\u8fd9\u4e2a\u6587\u4ef6\u5c31\u662f/etc/passwd\u6587\u4ef6\u3002\u8be5\u6587\u4ef6\u4e2d\u5305\u542b\u4e86\u4e00\u4e9b\u4e0e\u7528\u6237\u76f8\u5173\u7684\u4fe1\u606f\u3002 [root@rocky8 ~]# cat /etc/passwd root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin adm:x:3:4:adm:/var/adm:/sbin/nologin lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin sync:x:5:0:sync:/sbin:/bin/sync shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown halt:x:7:0:halt:/sbin:/sbin/halt mail:x:8:12:mail:/var/spool/mail:/sbin/nologin operator:x:11:0:operator:/root:/sbin/nologin games:x:12:100:games:/usr/games:/sbin/nologin ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin nobody:x:65534:65534:Kernel Overflow User:/:/sbin/nologin dbus:x:81:81:System message bus:/:/sbin/nologin systemd-coredump:x:999:997:systemd Core Dumper:/:/sbin/nologin systemd-resolve:x:193:193:systemd Resolver:/:/sbin/nologin tss:x:59:59:Account used for TPM access:/dev/null:/sbin/nologin polkitd:x:998:996:User for polkitd:/:/sbin/nologin unbound:x:997:995:Unbound DNS resolver:/etc/unbound:/sbin/nologin geoclue:x:996:994:User for geoclue:/var/lib/geoclue:/sbin/nologin rtkit:x:172:172:RealtimeKit:/proc:/sbin/nologin pipewire:x:995:991:PipeWire System Daemon:/var/run/pipewire:/sbin/nologin pulse:x:171:171:PulseAudio System Daemon:/var/run/pulse:/sbin/nologin qemu:x:107:107:qemu user:/:/sbin/nologin clevis:x:994:988:Clevis Decryption Framework unprivileged user:/var/cache/clevis:/sbin/nologin \u200b root\u7528\u6237\u662fLinux\u7cfb\u7edf\u7684\u7ba1\u7406\u5458\uff0c\u5206\u914d\u7ed9\u5b83\u7684\u56fa\u5b9aUID\u662f0\u3002\u5728Linux\u7cfb\u7edf\u4e2d\u4f1a\u4e3a\u4e0d\u540c\u7684\u529f\u80fd\u521b\u5efa\u4e0d\u901a\u8fc7\u7684\u7528\u6237\u8d26\u6237\uff0c\u8fd9\u4e9b\u8d26\u6237\u7684\u4f5c\u7528\u662f\u5728\u5728Linux\u7cfb\u7edf\u4e0a\u8fd0\u884c\u4e0d\u540c\u7684\u670d\u52a1\u8fdb\u7a0b\u8bbf\u95ee\u8d44\u6e90\u6240\u9700\u8981\u7684\u7279\u6b8a\u8d26\u6237\u3002\u6240\u6709\u8fd0\u884c\u5728\u540e\u53f0\u7684\u670d\u52a1\u90fd\u9700\u8981\u7528\u4e00\u4e2a\u7cfb\u7edf\u8d26\u6237\u767b\u5f55\u5230Linux\u7cfb\u7edf\u4e0a\u3002 \u200b /etc/passwd\u6587\u4ef6\u4e2d\u9664\u4e86\u7528\u6237\u540d\u548cUID\u4e4b\u5916\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u5b57\u6bb5\u3002/etc/passwd\u6587\u4ef6\u5b57\u6bb5\u4e2d\u56fd\u5305\u542b\u4e86\u5982\u4e0b\u4fe1\u606f\u3002 \u767b\u5f55\u7528\u6237\u540d \u7528\u6237\u5bc6\u7801 \u7528\u6237\u7684UID\uff08\u6570\u5b57\u5f62\u5f0f\uff09 \u7528\u6237\u7684\u7ec4ID\uff08\u6570\u5b57\u5f62\u5f0f\uff09 \u7528\u6237\u7684\u6587\u672c\u63cf\u8ff0\uff08\u5907\u6ce8\u5b57\u6bb5\uff09 \u7528\u6237HOME\u76ee\u5f55\u7684\u4f4d\u7f6e \u7528\u6237\u9ed8\u8ba4\u7684shell \u200b /etc/passwd\u6587\u4ef6\u4e2d\u7684\u5bc6\u7801\u5b57\u6bb5\u90fd\u88ab\u8bbe\u7f6e\u6210\u4e86x\uff0c\u8fd9\u5e76\u4e0d\u662f\u8bf4\u6240\u6709\u7684\u7528\u6237\u8d26\u6237\u90fd\u7528\u76f8\u540c\u7684\u5bc6\u7801\u3002\u5728\u65e9\u671f\u7684Linux\u4e0a\uff0c/etc/passwd\u6587\u4ef6\u91cc\u6709\u52a0\u5bc6\u540e\u7684\u7528\u6237\u5bc6\u7801\u3002\u4f46\u9274\u4e8e\u5f88\u591a\u7a0b\u5e8f\u90fd\u9700\u8981\u8bbf\u95ee/etc/passwd\u6587\u4ef6\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff0c\u8fd9\u5c31\u6210\u4e86\u4e00\u4e2a\u5b89\u5168\u9690\u60a3\u3002\u968f\u7740\u7528\u6765\u7834\u89e3\u52a0\u5bc6\u5bc6\u7801\u7684\u5de5\u5177\u7684\u4e0d\u65ad\u6f14\u8fdb\uff0c\u7528\u5fc3\u4e0d\u826f\u7684\u4eba\u5f00\u59cb\u5fd9\u4e8e\u7834\u89e3\u5b58\u50a8\u5728/etc/passwd\u6587\u4ef6\u4e2d\u7684\u5bc6\u7801\u3002 \u200b \u73b0\u5728\u7edd\u5927\u591a\u6570Linux\u7cfb\u7edf\u5c06\u7528\u6237\u5bc6\u7801\u4fdd\u5b58\u5728\u53e6\u5916\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\u4e2d\uff08/etc/shadow\uff09\u3002\u53ea\u6709\u7279\u5730\u7ed9\u7684\u7a0b\u5e8f\u624d\u80fd\u8bbf\u95ee\u8fd9\u4e2a\u6587\u4ef6\u3002","title":"/etc/passwd\u6587\u4ef6"},{"location":"DevOps/Homework/week2/#etcshadow","text":"\u200b /etc/passwd\u6587\u4ef6\u4e2d\u7684\u5bc6\u7801\u5b57\u6bb5\u90fd\u88ab\u8bbe\u7f6e\u6210\u4e86x\uff0c\u8fd9\u5e76\u4e0d\u662f\u8bf4\u6240\u6709\u7684\u7528\u6237\u8d26\u6237\u90fd\u7528\u76f8\u540c\u7684\u5bc6\u7801\u3002\u5728\u65e9\u671f\u7684Linux\u4e0a\uff0c/etc/passwd\u6587\u4ef6\u91cc\u6709\u52a0\u5bc6\u540e\u7684\u7528\u6237\u5bc6\u7801\u3002\u4f46\u9274\u4e8e\u5f88\u591a\u7a0b\u5e8f\u90fd\u9700\u8981\u8bbf\u95ee/etc/passwd\u6587\u4ef6\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff0c\u8fd9\u5c31\u6210\u4e86\u4e00\u4e2a\u5b89\u5168\u9690\u60a3\u3002\u968f\u7740\u7528\u6765\u7834\u89e3\u52a0\u5bc6\u5bc6\u7801\u7684\u5de5\u5177\u7684\u4e0d\u65ad\u6f14\u8fdb\uff0c\u7528\u5fc3\u4e0d\u826f\u7684\u4eba\u5f00\u59cb\u5fd9\u4e8e\u7834\u89e3\u5b58\u50a8\u5728/etc/passwd\u6587\u4ef6\u4e2d\u7684\u5bc6\u7801\u3002\u8bb0\u5f55\u5982\u4e0b\uff1a h:$6$vlwVGTB1mmYP76UY$0H.1SgqNiOxkVLzDU7QmlyZ8oYS3cd90k0mQWe3o.zaJlLEPunsAQF1.yOurWDBkEXuz86/DEULg9PFiAxPkU1:19328:0:99999:7::: \u200b /etc/shadow\u6587\u4ef6\u4e2d\u6bcf\u4e00\u4e2a\u7528\u6237\u90fd\u5b58\u5728\u4e00\u6761\u8bb0\u5f55\uff0c\u6bcf\u6761\u8bb0\u5f55\u5305\u542b9\u4e2a\u5b57\u6bb5\u3002 \u767b\u5f55\u540d \u52a0\u5bc6\u540e\u7684\u5bc6\u7801 \u81ea\u4e0a\u6b21\u4fee\u6539\u5bc6\u7801\u540e\u8fc7\u53bb\u7684\u5929\u6570\uff08\u4ece1970\u5e741\u67081\u65e5\u5f00\u59cb\u8ba1\u7b97\uff09 \u591a\u5c11\u5929\u540e\u624d\u80fd\u66f4\u6539\u5bc6\u7801 \u591a\u5c11\u5929\u540e\u5fc5\u987b\u66f4\u6539\u5bc6\u7801 \u5bc6\u7801\u8fc7\u671f\u63d0\u524d\u591a\u5c11\u5929\u63d0\u9192\u7528\u6237\u66f4\u6539\u5bc6\u7801 \u5bc6\u7801\u8fc7\u671f\u591a\u5c11\u5929\u7981\u7528\u7528\u6237\u8d26\u6237 \u7528\u6237\u8d26\u6237\u88ab\u7981\u7528\u7684\u65e5\u671f \u9884\u7559\u5b57\u6bb5\u7ed9\u5c06\u6765\u4f7f\u7528","title":"/etc/shadow\u6587\u4ef6"},{"location":"DevOps/Homework/week2/#2linux","text":"","title":"2.Linux\u4e0b\u7684\u7528\u6237\u64cd\u4f5c"},{"location":"DevOps/Homework/week2/#1useradd","text":"\u4f7f\u7528useradd\u547d\u4ee4\u53ef\u4ee5\u521b\u5efa\u7528\u6237\u8d26\u6237\u4ee5\u53ca\u7528\u6237\u8d26\u6237\u7684HOME\u76ee\u5f55\u7ed3\u6784\u3002useradd\u547d\u4ee4\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u503c\u4ee5\u53ca\u547d\u4ee4\u884c\u53c2\u6570\u6765\u8bbe\u7f6e\u7528\u6237\u8d26\u6237\u3002\u7cfb\u7edf\u9ed8\u8ba4\u503c\u88ab\u653e\u7f6e\u5728/etc/default/useradd\u6587\u4ef6\u4e2d\u3002\u4e5f\u53ef\u4ee5\u4f7f\u7528useradd -D\u6765\u67e5\u770b\u9ed8\u8ba4\u53c2\u6570\u3002 [ root@rocky8 ~ ] # cat /etc/default/useradd # useradd defaults file GROUP = 100 HOME = /home INACTIVE = -1 EXPIRE = SHELL = /bin/bash SKEL = /etc/skel CREATE_MAIL_SPOOL = yes [ root@rocky8 ~ ] # useradd -D GROUP = 100 HOME = /home INACTIVE = -1 EXPIRE = SHELL = /bin/bash SKEL = /etc/skel CREATE_MAIL_SPOOL = yes useradd\u5141\u8bb8\u7ba1\u7406\u5458\u521b\u5efa\u4e00\u4efd\u9ed8\u8ba4\u7684HOME\u76ee\u5f55\u914d\u7f6e\uff0c\u7136\u540e\u5c06\u5176\u4f5c\u4e3a\u521b\u5efa\u65b0\u7528\u6237HOME\u76ee\u5f55\u7684\u6a21\u677f\u3002\u8fd9\u6837\u5c31\u80fd\u5728\u6bcf\u4e2a\u65b0\u7528\u6237\u521b\u5efa\u65f6\u81ea\u52a8\u5728\u6bcf\u4e2a\u65b0\u7528\u6237\u7684HOME\u76ee\u5f55\u4e0b\u653e\u7f6e\u9ed8\u8ba4\u7684\u7cfb\u7edf\u6587\u4ef6\u3002 [root@rocky8 ~]# cd /etc/skel/ [root@rocky8 skel]# ll -a total 24 drwxr-xr-x. 3 root root 78 11\u6708 12 20:38 . drwxr-xr-x. 147 root root 8192 12\u6708 12 13:51 .. -rw-r--r--. 1 root root 18 8\u6708 2 15:41 .bash_logout -rw-r--r--. 1 root root 141 8\u6708 2 15:41 .bash_profile -rw-r--r--. 1 root root 376 8\u6708 2 15:41 .bashrc drwxr-xr-x. 4 root root 39 11\u6708 12 20:37 .mozilla","title":"1.\u6dfb\u52a0\u7528\u6237\uff1auseradd"},{"location":"DevOps/Homework/week2/#2userdel","text":"\u200b userdel\u53ef\u4ee5\u5220\u9664\u7cfb\u7edf\u4e2d\u7684\u7528\u6237\u4fe1\u606f\uff0c\u4f46\u662f\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cuserdel\u547d\u4ee4\u53ea\u4f1a\u5220\u9664/etc/passwd\u6587\u4ef6\u4e2d\u7684\u7528\u6237\u4fe1\u606f\uff0c\u5e76\u4e0d\u4f1a\u5220\u9664\u8be5\u7cfb\u7edf\u4e2d\u5c5e\u4e8e\u8be5\u8d26\u6237\u7684\u4efb\u4f55\u6587\u4ef6\u3002 [root@rocky8 ~]# userdel usertest userdel: user usertest is currently used by process 3273 [root@rocky8 ~]# cd /home/ [root@rocky8 home]# ls _D h meet moot usertest xxxxxxxxxxxxxxxxxxxxxxxxx","title":"2.\u5220\u9664\u7528\u6237\uff1auserdel"},{"location":"DevOps/Homework/week2/#3","text":"","title":"3.\u4fee\u6539\u7528\u6237"},{"location":"DevOps/Homework/week2/#3-1-usermod","text":"usermod\u547d\u4ee4\u662f\u7528\u6237\u8d26\u6237\u4fee\u6539\u5de5\u5177\u4e2d\u6700\u5f3a\u5927\u7684\u4e00\u4e2a\uff0c\u5b83\u80fd\u591f\u7528\u4f7f\u7528\u4e0d\u540c\u7684\u53c2\u6570\u6765\u4fee\u6539/etc/passwd\u4e2d\u7684\u5927\u90e8\u5206\u5b57\u6bb5\u3002 \u4e3e\u4f8b\uff1a \u547d\u4ee4 \u53c2\u6570 \u529f\u80fd usermod -l \u4fee\u6539\u7528\u6237\u7684\u767b\u5f55\u540d usermod -L \u9501\u5b9a\u7528\u6237\uff1b\u4f7f\u7528\u6237\u65e0\u6cd5\u767b\u5f55 usermod -p \u4fee\u6539\u7528\u6237\u5bc6\u7801 usermod -U \u89e3\u9501\u7528\u6237\u8d26\u6237 usermod -c \u4fee\u6539\u65b0\u5907\u6ce8 \u8be6\u7ec6\u529f\u80fd\uff1a [root@rocky8 home]# usermod --help Usage: usermod [options] LOGIN Options: -c, --comment COMMENT new value of the GECOS field -d, --home HOME_DIR new home directory for the user account -e, --expiredate EXPIRE_DATE set account expiration date to EXPIRE_DATE -f, --inactive INACTIVE set password inactive after expiration to INACTIVE -g, --gid GROUP force use GROUP as new primary group -G, --groups GROUPS new list of supplementary GROUPS -a, --append append the user to the supplemental GROUPS mentioned by the -G option without removing the user from other groups -h, --help display this help message and exit -l, --login NEW_LOGIN new value of the login name -L, --lock lock the user account -m, --move-home move contents of the home directory to the new location (use only with -d) -o, --non-unique allow using duplicate (non-unique) UID -p, --password PASSWORD use encrypted password for the new password -R, --root CHROOT_DIR directory to chroot into -P, --prefix PREFIX_DIR prefix directory where are located the /etc/* files -s, --shell SHELL new login shell for the user account -u, --uid UID new UID for the user account -U, --unlock unlock the user account -v, --add-subuids FIRST-LAST add range of subordinate uids -V, --del-subuids FIRST-LAST remove range of subordinate uids -w, --add-subgids FIRST-LAST add range of subordinate gids -W, --del-subgids FIRST-LAST remove range of subordinate gids -Z, --selinux-user SEUSER new SELinux user mapping for the user account","title":"3-1 usermod"},{"location":"DevOps/Homework/week2/#3-2","text":"passwd\uff1a\u4fee\u6539\u7528\u6237\u5bc6\u7801","title":"3-2 \u5355\u4e00\u529f\u80fd\u7528\u6237\u4fee\u6539\u547d\u4ee4"},{"location":"DevOps/Homework/week2/#3linux","text":"\u200b \u7528\u6237\u8d26\u6237\u5728\u63a7\u5236\u5355\u4e2a\u7528\u6237\u5b89\u5168\u6027\u65b9\u9762\u975e\u5e38\u597d\u7528\uff0c\u4f46\u662f\u5728\u6d89\u53ca\u5171\u4eab\u8d44\u6e90\u7684\u4e00\u7ec4\u7528\u6237\u65f6\u5c31\u6bd4\u8f83\u6349\u895f\u89c1\u8098\u4e86\u3002Linux\u624d\u7528\u7528\u6237\u7ec4\u7684\u6982\u5ff5\uff0c\u4f7f\u7528\u7ec4\u53bb\u6279\u91cf\u9650\u5236\u591a\u4e2a\u7528\u6237\u7684\u6743\u9650\u3002","title":"3.Linux\u4e0b\u7684\u7528\u6237\u7ec4\u64cd\u4f5c"},{"location":"DevOps/Homework/week2/#etcgroup","text":"\u200b \u8ddf\u7528\u6237\u8d26\u6237\u7c7b\u4f3c\u7684\uff0c\u7ec4\u7684\u4fe1\u606f\u4f1a\u5355\u72ec\u4fdd\u5b58\u5728Linux\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e2a\u6587\u4ef6\u4e2d\u3002/etc/group\u6587\u4ef6\u7cfb\u7edf\u5305\u542b\u4e86\u7cfb\u7edf\u4e0a\u7528\u5230\u7684\u6bcf\u4e2a\u7528\u6237\u7ec4\u7684\u4fe1\u606f\u3002 [root@rocky8 ~]# cat /etc/gro groff/ group group- [root@rocky8 ~]# cat /etc/group root:x:0: bin:x:1: daemon:x:2: sys:x:3: adm:x:4: tty:x:5: disk:x:6: lp:x:7: mem:x:8: kmem:x:9: wheel:x:10:h cdrom:x:11: mail:x:12:postfix man:x:15: dialout:x:18: floppy:x:19: games:x:20: tape:x:33: video:x:39: ftp:x:50: lock:x:54: audio:x:63: users:x:100: nobody:x:65534: dbus:x:81: utmp:x:22: utempter:x:35: input:x:999: kvm:x:36:qemu \u4e0eUID\u4e00\u6837\uff0cGID\u5728\u5206\u914d\u65f6\u4e5f\u91c7\u7528\u4e86\u7279\u5b9a\u7684\u683c\u5f0f\u3002\u7cfb\u7edf\u8d26\u6237\u7528\u7684\u7ec4\u901a\u5e38\u4f1a\u5206\u914d\u4f4e\u4e8e500\u7684GID\u503c\uff0c\u7528\u6237\u7ec4\u7684GID\u5219\u4f1a\u4ece500\u5f00\u59cb\u5206\u914d\u3002 /etc/group\u6587\u4ef6\u6709\u56db\u4e2a\u5b57\u6bb5 \u7ec4\u540d \u7ec4\u5bc6\u7801 GID \u5c5e\u4e8e\u8be5\u7ec4\u7684\u7528\u6237\u5217\u8868","title":"/etc/group"},{"location":"DevOps/Homework/week2/#1groupadd","text":"[root@rocky8 ~]# groupadd testgroup [root@rocky8 ~]# tail /etc/group _osbuild-composer:x:972: tlog:x:971: apache:x:48: xxxxxxxxxxxxxxxxxxxxxxxxx:x:1001: _D:x:1002: meet:x:1003: moot:x:1004: usertest:x:1005: hh:x:1006: testgroup:x:1007:","title":"1.\u521b\u5efa\u65b0\u7ec4\uff1agroupadd"},{"location":"DevOps/Homework/week2/#2usermod-g","text":"[root@rocky8 ~]# useradd test1 [root@rocky8 ~]# useradd test2 [root@rocky8 ~]# useradd test3 [root@rocky8 ~]# usermod -G testgroup test1 [root@rocky8 ~]# usermod -G testgroup test2 [root@rocky8 ~]# usermod -G testgroup test3 [root@rocky8 ~]# tail /etc/group xxxxxxxxxxxxxxxxxxxxxxxxx:x:1001: _D:x:1002: meet:x:1003: moot:x:1004: usertest:x:1005: hh:x:1006: testgroup:x:1007:test1,test2,test3 test1:x:1008: test2:x:1009: test3:x:1010:","title":"2.\u6dfb\u52a0\u7528\u6237\u5230\u7ec4\uff1ausermod -G \u7ec4\u540d \u7528\u6237\u540d"},{"location":"DevOps/Homework/week2/#3groupmod","text":"[root@rocky8 ~]# groupmod --help Usage: groupmod [options] GROUP Options: -g, --gid GID change the group ID to GID -h, --help display this help message and exit -n, --new-name NEW_GROUP change the name to NEW_GROUP -o, --non-unique allow to use a duplicate (non-unique) GID -p, --password PASSWORD change the password to this (encrypted) PASSWORD -R, --root CHROOT_DIR directory to chroot into -P, --prefix PREFIX_DIR prefix directory where are located the /etc/* files","title":"3.\u4fee\u6539\u7ec4\uff1agroupmod"},{"location":"DevOps/Homework/week2/#4","text":"","title":"4.\u6587\u4ef6\u6743\u9650"},{"location":"DevOps/Homework/week2/#4-1","text":"\u6587\u4ef6\u7684\u9ed8\u8ba4\u6743\u9650\u6765\u81ea\u4e8eumask\uff1bumask\u547d\u4ee4\u7528\u6765\u8bbe\u7f6e\u548c\u521b\u5efa\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u9ed8\u8ba4\u6743\u9650\u3002 [root@rocky8 ~]# umask 0022 [root@rocky8 ~]# Linux\u7cfb\u7edf\u4e2d\u5206\u4e3a\u6587\u4ef6\u548c\u76ee\u5f55\u6587\u4ef6\u7684\u9700\u8981\u6709\u8bfb\u5199\u7684\u6743\u9650\u800c\u4e0d\u9700\u8981\u6267\u884c\uff0c\u6587\u4ef6\u7684\u5168\u6743\u9650\u662f666\u5373\u4e3a\u4e8c\u8fdb\u5236\u7684110 110 110 \uff0cumask\u7ed9\u5b9a\u7684\u63a9\u7801\u4e3a0022\u3002\u53d6\u540e\u4e09\u4f4d\u4e3a\u4e8c\u8fdb\u5236\u7684000 010 010\u4e0e\u4e0a\u9762\u7684\u4e8c\u8fdb\u5236\u7684666\u8fdb\u884c\u5f02\u6216\u8fd0\u7b97\u5219\u7ed3\u679c\u4e3a644.\u540c\u7406\u76ee\u5f55\u7684\u9ed8\u8ba4\u5168\u6743\u9650\u8ddfumask\u8fdb\u884c\u5f02\u6216\u7ed3\u679c\u662f755.","title":"4-1.\u9ed8\u8ba4\u6587\u4ef6\u6743\u9650"},{"location":"DevOps/Homework/week2/#5vim","text":"\u5176\u5b9e\u5f88\u7b80\u5355 \u6709\u4e2a\u6e38\u620f\u53eb\u505a vimtutor\uff0c\u8010\u4f4f\u6027\u5b50\u73a9\u51e0\u904d\u5c31\u5dee\u4e0d\u591a\u4e86\u3002","title":"5.VIM\u64cd\u4f5c"},{"location":"DevOps/Homework/week2/#1","text":"1.\u57fa\u7840\u79fb\u52a8 ** \u8981\u79fb\u52a8\u5149\u6807\uff0c\u8bf7\u4f9d\u7167\u8bf4\u660e\u5206\u522b\u6309\u4e0b h\u3001j\u3001k\u3001l \u952e\u3002 ** ^ k \u63d0\u793a\uff1a h \u7684\u952e\u4f4d\u4e8e\u5de6\u8fb9\uff0c\u6bcf\u6b21\u6309\u4e0b\u5c31\u4f1a\u5411\u5de6\u79fb\u52a8\u3002 < h l > l \u7684\u952e\u4f4d\u4e8e\u53f3\u8fb9\uff0c\u6bcf\u6b21\u6309\u4e0b\u5c31\u4f1a\u5411\u53f3\u79fb\u52a8\u3002 j j \u952e\u770b\u8d77\u6765\u5f88\u8c61\u4e00\u652f\u5c16\u7aef\u65b9\u5411\u671d\u4e0b\u7684\u7bad\u5934\u3002 v 2.\u6307\u5b9a\u79fb\u52a8\u4f4d\u6570 1. \u8f93\u5165 2w \u4f7f\u5149\u6807\u5411\u524d\u79fb\u52a8\u4e24\u4e2a\u5355\u8bcd\u3002 2. \u8f93\u5165 3e \u4f7f\u5149\u6807\u5411\u524d\u79fb\u52a8\u5230\u7b2c\u4e09\u4e2a\u5355\u8bcd\u7684\u672b\u5c3e\u3002 3. \u8f93\u5165 0 (\u6570\u5b57\u96f6) \u79fb\u52a8\u5149\u6807\u5230\u884c\u9996\u3002","title":"1.\u79fb\u52a8"},{"location":"DevOps/Homework/week2/#6shell","text":"","title":"6.shell\u811a\u672c\u7f16\u7a0b"},{"location":"DevOps/Homework/week2/#1_1","text":"\u200b shell\u811a\u672c\u7684\u5173\u952e\u5728\u4e8e\u8f93\u5165\u591a\u4e2a\u547d\u4ee4\u5e76\u8f93\u51fa\u6bcf\u4e2a\u547d\u4ee4\u7684\u7ed3\u679c\u3002 root@ubuntu:~# date; who Tue Dec 13 01:13:12 AM UTC 2022 h pts/0 2022-12-13 01:11 (10.0.0.1)","title":"1.\u4f7f\u7528\u591a\u4e2a\u547d\u4ee4"},{"location":"DevOps/Homework/week2/#2shell","text":"\u4f7f\u7528\u6587\u672c\u7f16\u8f91\u5668\uff0c\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\uff1b\u5e76\u5728\u7b2c\u4e00\u884c\u7684\u6307\u5b9a\u8981\u4f7f\u7528\u7684shell\u7c7b\u578b\u3002\u53ef\u4ee5\u4f7f\u7528#\u6dfb\u52a0\u6ce8\u91ca root@ubuntu:~# vim test.sh root@ubuntu:~# cat test.sh !/bin/bash #This script displays the data and who's logged on date who","title":"2.\u521b\u5efashell\u811a\u672c"},{"location":"DevOps/Homework/week2/#3_1","text":"\u9996\u5148\u8981\u8ba9bash shell\u80fd\u591f\u627e\u5230\u4f60\u81ea\u5df1\u5199\u7684\u811a\u672c\u6587\u4ef6\uff0cshell\u4f1a\u901a\u8fc7PATH\u73af\u5883\u53d8\u91cf\u67e5\u627e\u547d\u4ee4\u3002 \u67e5\u770bPATH\u73af\u5883\u53d8\u91cf\uff1a ~ root@ubuntu:~# echo $PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin ~ \u4f7f\u7528\u811a\u672c\u7684\u4e24\u79cd\u65b9\u5f0f 1.\u5c06shell\u811a\u672c\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u6dfb\u52a0\u5230PATH\u73af\u5883\u53d8\u91cf\u4e2d 2.\u5728\u63d0\u793a\u7b26\u4e2d\u4f7f\u7528\u7edd\u5bf9\u6216\u8005\u76f8\u5bf9\u8def\u5f84\u6765\u5f15\u7528shell\u811a\u672c\u6587\u4ef6 root@ubuntu:~# ./test.sh -bash: ./test.sh: Permission denied \u4e0a\u9762\u6267\u884c\u811a\u672c\u88ab\u62d2\u7edd\uff0c\u5728\u6267\u884c\u4e4b\u524d\u8981\u7ed9\u811a\u672c\u8d4b\u4e88\u6267\u884c\u6743\u9650\u3002 root@ubuntu:~# chmod u+x test.sh -rwxr--r-- 1 root root 71 Dec 13 01:18 test.sh* \u4f7f\u7528./test.sh\u6267\u884c\u811a\u672c root@ubuntu:~# ./test.sh ./test.sh: line 1: !/bin/bash: No such file or directory Tue Dec 13 01:32:35 AM UTC 2022 h pts/0 2022-12-13 01:11 (10.0.0.1)","title":"3.\u8fd0\u884c\u811a\u672c"},{"location":"DevOps/Homework/week2/#4_1","text":"\u53cd\u5f15\u53f7 root@ubuntu:~/shell# cat test4.sh #!/bin/bash testing=`date` echo \"The date and time are:\" $testing root@ubuntu:~/shell# sh test4.sh The date and time are: Tue Dec 13 02:17:49 AM UTC 2022 $()\u683c\u5f0f root@ubuntu:~/shell# cat test5.sh #!/bin/bash testing=$(date) echo \"The date and time are:\" $testing root@ubuntu:~/shell# ./test5.sh The date and time are: Tue Dec 13 02:18:40 AM UTC 2022","title":"4.\u547d\u4ee4\u66ff\u6362"},{"location":"DevOps/Homework/week2/#5","text":"\u8f93\u51fa\u91cd\u5b9a\u578b \u6700\u57fa\u672c\u7684\u91cd\u5b9a\u5411\u5c06\u547d\u4ee4\u7684\u8f93\u51fa\u53d1\u9001\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\u3002 root@ubuntu:~/shell# cat datetest.sh Tue Dec 13 05:46:42 AM UTC 2022 \u8986\u76d6\u91cd\u5b9a\u5411 root@ubuntu:~/shell# date > datetest.sh root@ubuntu:~/shell# cat datetest.sh Tue Dec 13 05:47:25 AM UTC 2022 \u8ffd\u52a0\u91cd\u5b9a\u5411 root@ubuntu:~/shell# date >> datetest.sh root@ubuntu:~/shell# cat datetest.sh Tue Dec 13 05:47:25 AM UTC 2022 Tue Dec 13 05:47:59 AM UTC 2022 \u8f93\u5165\u91cd\u5b9a\u5411 \u8f93\u5165\u91cd\u5b9a\u5411\u662f\u5c06\u6587\u4ef6\u5185\u5bb9\u91cd\u5b9a\u5411\u5230\u547d\u4ee4 wc\u80fd\u591f\u5bf9\u6570\u636e\u4e2d\u7684\u6587\u672c\u8fdb\u884c\u8ba1\u6570\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u8f93\u51fa 1.\u6587\u672c\u7684\u884c\u6570 2.\u6587\u672c\u7684\u8bcd\u6570 3.\u6587\u672c\u7684\u5b57\u8282\u6570 root@ubuntu:~/shell# wc < datetest.sh 2 14 64","title":"5.\u91cd\u5b9a\u5411"},{"location":"DevOps/KVM/00KVM%E5%AE%9E%E8%B7%B5%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/","text":"KVM\u5b9e\u8df5\u73af\u5883\u642d\u5efa \u00b6 1.\u4f7f\u7528VMware Workstation\u521b\u5efa\u865a\u62df\u673a \u00b6 1.\u9009\u62e9\u521b\u5efa\u65b0\u7684\u865a\u62df\u673a\u9009\u9879\u5361 2.\u6839\u636e\u521b\u5efa\u865a\u62df\u673a\u5411\u5bfc\u521b\u5efa\u6240\u9700\u89c4\u683c\u7684\u865a\u62df\u673a 3.\u9009\u62e9\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u4e3aCentos 8 64\u4f4d 4.\u8bbe\u7f6e\u865a\u62df\u673a\u540d\u79f0\u548c\u865a\u62df\u673a\u6240\u5728\u4f4d\u7f6e 5.\u81ea\u5b9a\u4e49\u865a\u62df\u673aCPU\uff0c\u5185\u5b58\u548c\u786c\u76d8\u7684\u89c4\u683c 6.\u81ea\u5b9a\u4e49\u786c\u4ef6\u8bbe\u7f6e\u3002\u6dfb\u52a0\u3001\u4fee\u6539\u6216\u5220\u9664\u6240\u9700\u786c\u4ef6\u3002 \u6253\u5f00\u5904\u7406\u5668\u7684\u786c\u4ef6\u8f85\u52a9\u865a\u62df\u5316\u5f00\u5173 \u6dfb\u52a0\u64cd\u4f5c\u7cfb\u7edf\u955c\u50cf\uff08\u8fd9\u91cc\u9009\u62e9\u7684\u662fCentOS-8.5.2111-x86_64-dvd1.iso\uff09 7.\u5f00\u542f\u865a\u62df\u673a\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf 8.\u9009\u62e9\u8bed\u8a00 9.\u8bbe\u7f6e\u65f6\u533a\u4e3a\u4e0a\u6d77 10.\u5728\u9884\u5b89\u88c5\u8f6f\u4ef6\u4e2d\u9009\u62e9\u5b89\u88c5\u865a\u62df\u5316\u76f8\u8f6f\u4ef6 11.\u8bbe\u7f6eroot\u7528\u6237\u5bc6\u7801 12.\u5f00\u542f\u7f51\u7edc\u8fde\u63a5 13.\u5f00\u59cb\u5b89\u88c5","title":"00-KVM\u5b9e\u8df5\u73af\u5883\u642d\u5efa"},{"location":"DevOps/KVM/00KVM%E5%AE%9E%E8%B7%B5%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/#kvm","text":"","title":"KVM\u5b9e\u8df5\u73af\u5883\u642d\u5efa"},{"location":"DevOps/KVM/00KVM%E5%AE%9E%E8%B7%B5%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/#1vmware-workstation","text":"1.\u9009\u62e9\u521b\u5efa\u65b0\u7684\u865a\u62df\u673a\u9009\u9879\u5361 2.\u6839\u636e\u521b\u5efa\u865a\u62df\u673a\u5411\u5bfc\u521b\u5efa\u6240\u9700\u89c4\u683c\u7684\u865a\u62df\u673a 3.\u9009\u62e9\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u4e3aCentos 8 64\u4f4d 4.\u8bbe\u7f6e\u865a\u62df\u673a\u540d\u79f0\u548c\u865a\u62df\u673a\u6240\u5728\u4f4d\u7f6e 5.\u81ea\u5b9a\u4e49\u865a\u62df\u673aCPU\uff0c\u5185\u5b58\u548c\u786c\u76d8\u7684\u89c4\u683c 6.\u81ea\u5b9a\u4e49\u786c\u4ef6\u8bbe\u7f6e\u3002\u6dfb\u52a0\u3001\u4fee\u6539\u6216\u5220\u9664\u6240\u9700\u786c\u4ef6\u3002 \u6253\u5f00\u5904\u7406\u5668\u7684\u786c\u4ef6\u8f85\u52a9\u865a\u62df\u5316\u5f00\u5173 \u6dfb\u52a0\u64cd\u4f5c\u7cfb\u7edf\u955c\u50cf\uff08\u8fd9\u91cc\u9009\u62e9\u7684\u662fCentOS-8.5.2111-x86_64-dvd1.iso\uff09 7.\u5f00\u542f\u865a\u62df\u673a\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf 8.\u9009\u62e9\u8bed\u8a00 9.\u8bbe\u7f6e\u65f6\u533a\u4e3a\u4e0a\u6d77 10.\u5728\u9884\u5b89\u88c5\u8f6f\u4ef6\u4e2d\u9009\u62e9\u5b89\u88c5\u865a\u62df\u5316\u76f8\u8f6f\u4ef6 11.\u8bbe\u7f6eroot\u7528\u6237\u5bc6\u7801 12.\u5f00\u542f\u7f51\u7edc\u8fde\u63a5 13.\u5f00\u59cb\u5b89\u88c5","title":"1.\u4f7f\u7528VMware Workstation\u521b\u5efa\u865a\u62df\u673a"},{"location":"DevOps/Network/00pnetlab%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E7%99%BB%E5%BD%95/","text":"PNETLab\u4ece\u5b89\u88c5\u5230\u767b\u5f55 \u00b6 1.\u4ec0\u4e48\u662fPNETLab \u00b6 PNETlab\uff08Packet Network Emulate Tool Lab\uff09\u662f\u4e00\u6b3e\u5141\u8bb8\u4e0b\u8f7d\u5e76\u53ef\u4ee5\u5171\u4eab\u7684\u793e\u533a\u7248\u5171\u4eab\u5b9e\u9a8c\u5e73\u53f0\u3002\u5b83\u7531\u4e24\u90e8\u5206\u7ec4\u6210\u3002\u5305\u62ecPNETLab Box\u548cPNETLab Store\u3002 PNETLab Box\uff08\u5177\u6709\u79bb\u7ebf\u548c\u5728\u7ebf\u4e24\u79cd\u6a21\u5f0f\uff09\u662f\u4e00\u6b3e\u5b89\u88c5\u5728\u865a\u62df\u673a\u4e0a\u7684\u8fd0\u884c\u73af\u5883\u3002 PNETLab Store\u662f\u4e00\u4e2a\u7f51\u7edc\u5e73\u53f0\uff0c\u4e0a\u9762\u6709\u57fa\u4e8ePNETLab\u591a\u79cd\u514d\u8d39\u5b9e\u9a8c\u73af\u5883\uff0c\u6db5\u76d6\u4e86\u6570\u636e\u5e93\uff0c\u6570\u636e\u901a\u4fe1\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7b49\u9886\u57df\u3002 2.\u786c\u4ef6\u8981\u6c42 \u00b6 \u6700\u4f4e\u7684\u7b14\u8bb0\u672c\u7535\u8111/PC \u53f0\u5f0f\u673a\u7cfb\u7edf\u8981\u6c42 \u5148\u51b3\u6761\u4ef6\uff1a CPU\uff1a\u652f\u6301 Intel\u00ae VT-x /EPT \u865a\u62df\u5316\u7684 Intel CPU \u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 7\u30018\u300110 \u6216 Linux Desktop VMware Workstation 12.5 \u6216\u66f4\u9ad8\u7248\u672c VMware Player 12.5 \u6216\u66f4\u9ad8\u7248\u672c PC/\u7b14\u8bb0\u672c\u7535\u8111\u786c\u4ef6\u8981\u6c42 \u4e2d\u592e\u5904\u7406\u5668 Intel i5/i7\uff084 \u4e2a\u903b\u8f91\u5904\u7406\u5668\uff09\uff0c\u5728 BIOS \u4e2d\u542f\u7528 Intel \u865a\u62df\u5316 \u5185\u5b58 8Gb \u786c\u76d8\u7a7a\u95f4 40Gb \u7f51\u7edc \u5c40\u57df\u7f51/\u65e0\u7ebf\u5c40\u57df\u7f51 PNETLab \u865a\u62df\u673a\u8981\u6c42 \u4e2d\u592e\u5904\u7406\u5668 4/1\uff08\u5904\u7406\u5668\u6570\u91cf/\u6bcf\u4e2a\u5904\u7406\u5668\u7684\u6838\u5fc3\u6570\u91cf\uff09\u542f\u7528 Intel VT-x/EPT \u865a\u62df\u5316\u5f15\u64ce \u5185\u5b58 6Gb\u6216\u66f4\u591a \u786c\u76d8 40Gb \u6216\u66f4\u591a \u7f51\u7edc VMware NAT \u6216\u6865\u63a5\u7f51\u7edc\u9002\u914d\u5668 \u6ce8\u610f\uff1a\u6700\u5c0f\u7684 PC \u53f0\u5f0f\u673a/\u7b14\u8bb0\u672c\u7535\u8111\u5c06\u80fd\u591f\u8fd0\u884c\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u3002\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u7684\u6027\u80fd\u548c\u8282\u70b9\u6570\u91cf\u53d6\u51b3\u4e8e\u5b9e\u9a8c\u5ba4\u4e2d\u90e8\u7f72\u7684\u8282\u70b9\u7c7b\u578b\u3002 \u4f8b\u5b50\uff1a IOL \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 40-50 \u4e2a\u8282\u70b9 Dynamips \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 20-25 \u4e2a\u8282\u70b9 vIOS \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 8-10 \u4e2a\u8282\u70b9 CSRv1000 \u6216 XRv \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 2-3 \u4e2a \u63a8\u8350\u7684\u7b14\u8bb0\u672c\u7535\u8111/PC \u53f0\u5f0f\u673a\u7cfb\u7edf\u8981\u6c42 \u5148\u51b3\u6761\u4ef6\uff1a CPU\uff1a\u652f\u6301 Intel\u00ae VT-x /EPT \u865a\u62df\u5316\u7684 Intel CPU \u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 7\u30018\u300110 \u6216 Linux Desktop VMware Workstation 12.5 \u6216\u66f4\u9ad8\u7248\u672c VW Ware Player 12.5 \u6216\u66f4\u9ad8\u7248\u672c PC/\u7b14\u8bb0\u672c\u7535\u8111\u786c\u4ef6\u8981\u6c42 \u4e2d\u592e\u5904\u7406\u5668 Intel i7\uff088 \u4e2a\u903b\u8f91\u5904\u7406\u5668\uff09\uff0c\u5728BIOS \u5185\u5b58 32Gb \u786c\u76d8\u7a7a\u95f4 200Gb \u7f51\u7edc \u5c40\u57df\u7f51/\u65e0\u7ebf\u5c40\u57df\u7f51 PNETLab \u865a\u62df\u673a\u8981\u6c42 \u4e2d\u592e\u5904\u7406\u5668 8/1\uff08\u5904\u7406\u5668\u6570\u91cf/\u6bcf\u4e2a\u5904\u7406\u5668\u7684\u6838\u5fc3\u6570\u91cf\uff09\u542f\u7528 Intel VT-x/EPT \u865a\u62df\u5316\u5f15\u64ce \u5185\u5b58 24Gb \u6216\u66f4\u591a \u786c\u76d8 200Gb \u6216\u66f4\u591a \u7f51\u7edc VMware NAT \u6216\u6865\u63a5\u7f51\u7edc\u9002\u914d\u5668 \u6ce8\u610f\uff1aPC \u53f0\u5f0f\u673a/\u7b14\u8bb0\u672c\u7535\u8111\u5c06\u80fd\u591f\u8fd0\u884c\u4e2d\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u3002\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u7684\u6027\u80fd\u548c\u8282\u70b9\u6570\u91cf\u53d6\u51b3\u4e8e\u5b9e\u9a8c\u5ba4\u4e2d\u90e8\u7f72\u7684\u8282\u70b9\u7c7b\u578b\u3002 \u4f8b\u5b50\uff1a IOL \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 120 \u4e2a\u8282\u70b9 vIOS \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 20-40 \u4e2a\u8282\u70b9 \u57fa\u4e8e CSR \u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 10 \u4e2a \u865a\u62df\u52a1\u670d\u5668\u7cfb\u7edf\u8981\u6c42 \u5148\u51b3\u6761\u4ef6\uff1a CPU\uff1a\u82f1\u7279\u5c14\u81f3\u5f3a CPU\uff0c\u652f\u6301\u5e26\u6709\u6269\u5c55\u9875\u8868 (EPT) \u7684\u82f1\u7279\u5c14\u00ae VT-x \u64cd\u4f5c\u7cfb\u7edf\uff1aESXi 6.0 \u6216\u66f4\u9ad8\u7248\u672c \u670d\u52a1\u5668\u786c\u4ef6\u8981\u6c42 \u89c4\u683c \u4e2d\u592e\u5904\u7406\u5668 \u63a8\u8350 CPU 2x Intel E5-2650v3\uff0840 \u4e2a\u903b\u8f91\u5904\u7406\u5668\uff09\u6216\u66f4\u597d\u5730\u652f\u6301\u5e26\u6709\u6269\u5c55\u9875\u8868 (EPT) \u7684 Intel\u00ae VT-x\u6700\u4f4e CPU \u662f\u4efb\u4f55\u652f\u6301 Intel\u00ae VT-x \u7684 Intel Xeon CPU\u5e26\u6709\u6269\u5c55\u9875\u8868 (EPT) \u5185\u5b58 128Gb \u786c\u76d8\u7a7a\u95f4 2Tb \u7f51\u7edc \u5c40\u57df\u7f51\u4ee5\u592a\u7f51 \u670d\u52a1\u5668\u786c\u4ef6\u8981\u6c42 \u89c4\u683c \u4e2d\u592e\u5904\u7406\u5668 32/1\uff08\u5904\u7406\u5668\u6570\u91cf/\u6bcf\u4e2a\u5904\u7406\u5668\u7684\u5185\u6838\u6570\u91cf\uff09\u542f\u7528 Intel VT-x/EPT \u865a\u62df\u5316\u5f15\u64ce \u5185\u5b58 64Gb \u53ca\u4ee5\u4e0a \u786c\u76d8 800Gb \u53ca\u4ee5\u4e0a \u7f51\u7edc vSwitch/VMnet \u6ce8\u610f\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u7684\u6027\u80fd\u548c\u8282\u70b9\u6570\u91cf\u53d6\u51b3\u4e8e\u5b9e\u9a8c\u5ba4\u4e2d\u4f7f\u7528\u7684\u8282\u70b9\u7c7b\u578b\u3002 \u4f8b\u5b50\uff1a 120 IOL \u57fa\u4e8e\u955c\u50cf\u7684\u5b9e\u9a8c\u5ba4 \u6bcf\u4e2a\u5b9e\u9a8c\u5ba4 20 \u4e2a \u57fa\u4e8eCSRv1000 \u955c\u50cf\u7684\u8282\u70b9 \u4e13\u7528\u670d\u52a1\u5668\uff08\u88f8\u673a\uff09\u7cfb\u7edf\u8981\u6c42 \u5148\u6761\u4ef6\uff1a CPU\uff1aIntel Xeon CPU \u652f\u6301 Intel\u00ae VT-x with Extended Page Tables (EPT) \u64cd\u4f5c\u7cfb\u7edf\uff1aUbuntu Server 16.04.4 LTS x64 \u670d\u52a1\u5668\u786c\u4ef6\u8981\u6c42 \u89c4\u683c \u4e2d\u592e\u5904\u7406\u5668 \u63a8\u8350\u7684 CPU Intel E5-2650v3\uff0840 \u4e2a\u903b\u8f91\u5904\u7406\u5668\uff09\u6216\u66f4\u597d\u7684\u652f\u6301 Intel\u00ae VT-x with Extended Page Tables (EPT) \u6700\u4f4e CPU \u662f\u4efb\u4f55\u652f\u6301 Intel\u00ae VT-x \u548c \u6269\u5c55\u9875E\u8868xtended Page Tables (EPT) \u7684 Intel Xeon CPU \u5185\u5b58 128Gb \u786c\u76d8\u7a7a\u95f4 2Tb \u7f51\u7edc \u5c40\u57df\u7f51\u4ee5\u592a\u7f51 \u652f\u6301\u7684\u865a\u62df\u5316\u5e73\u53f0\u548c\u8f6f\u4ef6 \u00b6 \u865a\u62df\u5316\u5e73\u53f0 \u652f\u6301\u60c5\u51b5 VMware Workstation 12.5 \u6216\u66f4\u9ad8\u7248\u672c \u652f\u6301 VMware Player 12.5 \u6216\u66f4\u9ad8\u7248\u672c \u652f\u6301 VMware ESXi 6.0 \u6216\u66f4\u9ad8\u7248\u672c \u652f\u6301 Ubuntu Server 16.04 LTS \u4f5c\u4e3a\u88f8\u673a\u5e73\u53f0\uff08\u7269\u7406\u673a\u5b89\u88c5\uff09 \u652f\u6301 \u8c37\u6b4c\u4e91\u5e73\u53f0 \u652f\u6301 \u4e0d\u53d7\u652f\u6301\u7684\u786c\u4ef6\u548c\u7cfb\u7edf \u00b6 \u786c\u4ef6\u6216\u8005\u865a\u62df\u5316\u5e73\u53f0 \u652f\u6301\u60c5\u51b5 \u57fa\u4e8e AMD CPU \u7684 PC \u6216\u670d\u52a1\u5668 \u4e0d\u652f\u6301 VirtualBox \u865a\u62df\u5316 \u4e0d\u652f\u6301 \u601d\u6770 XenServer \u4e0d\u652f\u6301 \u5fae\u8f6f HyperV \u4e0d\u652f\u6301 Ubuntu 17.X \u6216 18.x \u4f5c\u4e3a\u5e73\u53f0 \u4e0d\u652f\u6301 3.\u5b89\u88c5PNETLab \u00b6 \u767e\u5ea6\u7f51\u76d8\u4e0b\u8f7d\u94fe\u63a5 \u63d0\u53d6\u7801\uff1a2333 1.\u4e0b\u8f7d.ova\u6587\u4ef6\uff0c\u5e76\u5bfc\u5165VMWare Workstation\u3002 2.\u63d0\u524d\u4e0b\u8f7d\u597dWMware Workstation\uff0c\u5c06\u4e0b\u8f7d\u7684\u597d\u7684PNET_4.2.10.ova\u6587\u4ef6\u4f7f\u7528VMWare Workstation\u6587\u4ef6\u6253\u5f00\u3002 3.\u5f39\u51fa\u4ee5\u4e0b\u5bf9\u8bdd\u6846\uff0c\u8bbe\u7f6e\u597d\u865a\u62df\u673a\u540d\u79f0\u548c\u865a\u62df\u673a\u7684\u5b58\u50a8\u8def\u5f84\uff0c\u70b9\u51fb\u5bfc\u5165\u6309\u94ae\u3002 4.\u7b49\u5f85\u8fdb\u5ea6\u6761\u5b8c\u6210 5.\u865a\u62df\u673a\u5bfc\u5165\u6210\u529f\u540e\u70b9\u51fb\u7f16\u8f91\u865a\u62df\u673a\u8bbe\u7f6e\uff1b\u5f00\u542f\u8be5\u865a\u62df\u673a\u7684Intel VT-x/EPT\u3002 \u6ce8\u610f \uff1a\u865a\u62df\u673a\u5904\u7406\u5668\u8981\u5f00\u542fIntel VT-x/EPT\u3002\u5426\u5219\u5b89\u88c5\u5b8c\u6210\u540e\u865a\u62df\u673a\u955c\u50cf\u4e0d\u80fd\u6b63\u5e38\u542f\u52a8\u3002 6.\u5f00\u542f\u865a\u62df\u673a\uff0c\u767b\u5f55 7.\u67e5\u770b\u865a\u62df\u673a\u72b6\u6001\u662f\u5426\u6b63\u5e38 **\u6ce8\u610f\uff1a**\u5982\u679c\u51fa\u73b0\u4e0b\u56fe\u6846\u9009\u8d77\u6765\u7684\u63d0\u793a\u4fe1\u606f\u8bc1\u660e\u5df2\u7ecf\u5f00\u542f\u4e86\u865a\u62df\u673a\u5904\u7406\u5668\u7684Intel VT-x/EMP\u9009\u9879\u3002\u5982\u679c\u8ddf\u4e0b\u56fe\u6846\u9009\u51fa\u6765\u5b57\u6bb5\u4e0d\u5339\u914d\uff0c\u4e00\u5b9a\u8981\u5f00\u542fIntel VT-x/EMP\u9009\u9879\u3002 8.\u4f7f\u7528\u7ed9\u5b9a\u7684IP\u5730\u5740\u8f93\u5165\u6d4f\u89c8\u5668\uff0c\u767b\u5f55PNETLab 9.\u5728\u6d4f\u89c8\u5668\u70b9\u51fb\u9ad8\u7ea7\u9009\u9879\u5361\uff0c\u70b9\u51fb\u7ee7\u7eed\u524d\u5f80\u3002 10.\u51fa\u73b0\u767b\u5f55\u754c\u9762\uff1b\u6709\u4e24\u79cd\u767b\u5f55\u6a21\u5f0f\u3002Online Mode\uff08\u5728\u7ebf\u6a21\u5f0f\uff09Offine Mode\uff08\u79bb\u7ebf\u6a21\u5f0f\uff09 11.\u5982\u679c\u9009\u62e9\u5728\u7ebf\u767b\u5f55\uff0c\u5e76\u4e14\u662f\u521d\u6b21\u767b\u5f55\u9700\u8981\u521b\u5efa\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c 12.\u70b9\u51fbSign Up\uff0c\u4f9d\u6b21\u8f93\u5165\u7528\u6237\u540d\uff0c\u90ae\u7bb1\u4ee5\u53ca\u4e24\u6b21\u5bc6\u7801\uff0c\u9a8c\u8bc1\u7801 13.\u6ce8\u518c\u5b8c\u6210\u540e\u8fd4\u56de\u767b\u5f55\u754c\u9762\uff0c\u4f9d\u636e\u63d0\u793a\u8f93\u5165\u76f8\u5173\u4fe1\u606f\u767b\u5f55\u5373\u53ef\u3002 14.\u767b\u5f55\u6210\u529f\u540e\u53ef\u4ee5\u8fdb\u5165Store\u9875\u9762\u4e0b\u8f7d\u73b0\u6210\u7684\u7f51\u7edc\u62d3\u6251\u8fdb\u884c\u7ec3\u4e60\u3002 15.\u70b9\u51fb\u4e0b\u8f7d\u62d3\u6251\u4f1a\u5f39\u51fa\u4e00\u4e2a\u5bf9\u8bdd\u6846\uff0c\u5728\u6b64\u5bf9\u8bdd\u6b3e\u53ea\u9700\u8981\u586b\u5199\u5b89\u88c5\u597d\u7684PNETLab\u63d0\u4f9b\u7684\u767b\u5f55IP\u5730\u5740\u5373\u53ef 16.\u70b9\u51fbDownload\u9009\u9879\u5361\uff0c\u9875\u9762\u4f1a\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762\uff0c\u8f93\u5165\u9a8c\u8bc1\u7801\uff0c\u70b9\u51fbLogin\u91cd\u65b0\u767b\u5f55\u3002 17.\u51fa\u73b0\u8b66\u544a\u9875\u9762\uff0c\u5ffd\u7565\u8b66\u544a\u3002\u70b9\u51fb\u4ecd\u7136\u53d1\u9001 18.\u5728\u6b64\u9875\u9762\u53ef\u4ee5\u5b8c\u6210\u521b\u5efa\u62d3\u6251\u7b49\u64cd\u4f5c\uff0c\u81f3\u6b64\u5728\u7ebf\u6a21\u5f0f\u767b\u5f55\u6210\u529f\u3002 19.\u79bb\u7ebf\u6a21\u5f0f\u548c\u5728\u7ebf\u6a21\u5f0f\u529f\u80fd\u5e76\u65e0\u533a\u522b\uff0c\u9664\u4e86\u65e0\u6cd5\u8bbf\u95eePNETLab\u81ea\u5e26\u7684\u62d3\u6251\u5546\u5e97\uff0c\u4e0b\u8f7d\u5176\u4ed6\u7528\u6237\u8bbe\u8ba1\u597d\u7684\u62d3\u6251\u3002\u5982\u679c\u60f3\u542f\u7528\u79bb\u7ebf\u6a21\u5f0f\u5fc5\u987b\u5148\u5904\u4e8e\u5728\u7ebf\u6a21\u5f0f\u66f4\u6539\u7cfb\u7edf\u8bbe\u7f6e\u3002 20.\u5f00\u542f\u79bb\u7ebf\u6a21\u5f0f 21.\u9000\u51fa\u767b\u5f55\uff0c\u9875\u9762\u53d8\u66f4\u4e3a\u79bb\u7ebf\u6a21\u5f0f\u767b\u5f55\u9875\u9762\u3002\u518d\u6b64\u9875\u9762\u7528\u6237\u540d\u9ed8\u8ba4\u4e3aadmin\u5bc6\u7801\u4e3apnet\u9ed8\u8ba4Console\u9009\u62e9\u4e3aHTML Console\u3002\u8f93\u5165\u9a8c\u8bc1\u7801\uff0c\u70b9\u51fbLogin\u3002\u5373\u53ef\u767b\u5f55\u79bb\u7ebf\u6a21\u5f0f\u3002","title":"00-pnetlab\u4ece\u5b89\u88c5\u5230\u767b\u5f55"},{"location":"DevOps/Network/00pnetlab%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E7%99%BB%E5%BD%95/#pnetlab","text":"","title":"PNETLab\u4ece\u5b89\u88c5\u5230\u767b\u5f55"},{"location":"DevOps/Network/00pnetlab%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E7%99%BB%E5%BD%95/#1pnetlab","text":"PNETlab\uff08Packet Network Emulate Tool Lab\uff09\u662f\u4e00\u6b3e\u5141\u8bb8\u4e0b\u8f7d\u5e76\u53ef\u4ee5\u5171\u4eab\u7684\u793e\u533a\u7248\u5171\u4eab\u5b9e\u9a8c\u5e73\u53f0\u3002\u5b83\u7531\u4e24\u90e8\u5206\u7ec4\u6210\u3002\u5305\u62ecPNETLab Box\u548cPNETLab Store\u3002 PNETLab Box\uff08\u5177\u6709\u79bb\u7ebf\u548c\u5728\u7ebf\u4e24\u79cd\u6a21\u5f0f\uff09\u662f\u4e00\u6b3e\u5b89\u88c5\u5728\u865a\u62df\u673a\u4e0a\u7684\u8fd0\u884c\u73af\u5883\u3002 PNETLab Store\u662f\u4e00\u4e2a\u7f51\u7edc\u5e73\u53f0\uff0c\u4e0a\u9762\u6709\u57fa\u4e8ePNETLab\u591a\u79cd\u514d\u8d39\u5b9e\u9a8c\u73af\u5883\uff0c\u6db5\u76d6\u4e86\u6570\u636e\u5e93\uff0c\u6570\u636e\u901a\u4fe1\uff0c\u64cd\u4f5c\u7cfb\u7edf\u7b49\u9886\u57df\u3002","title":"1.\u4ec0\u4e48\u662fPNETLab"},{"location":"DevOps/Network/00pnetlab%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E7%99%BB%E5%BD%95/#2","text":"\u6700\u4f4e\u7684\u7b14\u8bb0\u672c\u7535\u8111/PC \u53f0\u5f0f\u673a\u7cfb\u7edf\u8981\u6c42 \u5148\u51b3\u6761\u4ef6\uff1a CPU\uff1a\u652f\u6301 Intel\u00ae VT-x /EPT \u865a\u62df\u5316\u7684 Intel CPU \u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 7\u30018\u300110 \u6216 Linux Desktop VMware Workstation 12.5 \u6216\u66f4\u9ad8\u7248\u672c VMware Player 12.5 \u6216\u66f4\u9ad8\u7248\u672c PC/\u7b14\u8bb0\u672c\u7535\u8111\u786c\u4ef6\u8981\u6c42 \u4e2d\u592e\u5904\u7406\u5668 Intel i5/i7\uff084 \u4e2a\u903b\u8f91\u5904\u7406\u5668\uff09\uff0c\u5728 BIOS \u4e2d\u542f\u7528 Intel \u865a\u62df\u5316 \u5185\u5b58 8Gb \u786c\u76d8\u7a7a\u95f4 40Gb \u7f51\u7edc \u5c40\u57df\u7f51/\u65e0\u7ebf\u5c40\u57df\u7f51 PNETLab \u865a\u62df\u673a\u8981\u6c42 \u4e2d\u592e\u5904\u7406\u5668 4/1\uff08\u5904\u7406\u5668\u6570\u91cf/\u6bcf\u4e2a\u5904\u7406\u5668\u7684\u6838\u5fc3\u6570\u91cf\uff09\u542f\u7528 Intel VT-x/EPT \u865a\u62df\u5316\u5f15\u64ce \u5185\u5b58 6Gb\u6216\u66f4\u591a \u786c\u76d8 40Gb \u6216\u66f4\u591a \u7f51\u7edc VMware NAT \u6216\u6865\u63a5\u7f51\u7edc\u9002\u914d\u5668 \u6ce8\u610f\uff1a\u6700\u5c0f\u7684 PC \u53f0\u5f0f\u673a/\u7b14\u8bb0\u672c\u7535\u8111\u5c06\u80fd\u591f\u8fd0\u884c\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u3002\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u7684\u6027\u80fd\u548c\u8282\u70b9\u6570\u91cf\u53d6\u51b3\u4e8e\u5b9e\u9a8c\u5ba4\u4e2d\u90e8\u7f72\u7684\u8282\u70b9\u7c7b\u578b\u3002 \u4f8b\u5b50\uff1a IOL \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 40-50 \u4e2a\u8282\u70b9 Dynamips \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 20-25 \u4e2a\u8282\u70b9 vIOS \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 8-10 \u4e2a\u8282\u70b9 CSRv1000 \u6216 XRv \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 2-3 \u4e2a \u63a8\u8350\u7684\u7b14\u8bb0\u672c\u7535\u8111/PC \u53f0\u5f0f\u673a\u7cfb\u7edf\u8981\u6c42 \u5148\u51b3\u6761\u4ef6\uff1a CPU\uff1a\u652f\u6301 Intel\u00ae VT-x /EPT \u865a\u62df\u5316\u7684 Intel CPU \u64cd\u4f5c\u7cfb\u7edf\uff1aWindows 7\u30018\u300110 \u6216 Linux Desktop VMware Workstation 12.5 \u6216\u66f4\u9ad8\u7248\u672c VW Ware Player 12.5 \u6216\u66f4\u9ad8\u7248\u672c PC/\u7b14\u8bb0\u672c\u7535\u8111\u786c\u4ef6\u8981\u6c42 \u4e2d\u592e\u5904\u7406\u5668 Intel i7\uff088 \u4e2a\u903b\u8f91\u5904\u7406\u5668\uff09\uff0c\u5728BIOS \u5185\u5b58 32Gb \u786c\u76d8\u7a7a\u95f4 200Gb \u7f51\u7edc \u5c40\u57df\u7f51/\u65e0\u7ebf\u5c40\u57df\u7f51 PNETLab \u865a\u62df\u673a\u8981\u6c42 \u4e2d\u592e\u5904\u7406\u5668 8/1\uff08\u5904\u7406\u5668\u6570\u91cf/\u6bcf\u4e2a\u5904\u7406\u5668\u7684\u6838\u5fc3\u6570\u91cf\uff09\u542f\u7528 Intel VT-x/EPT \u865a\u62df\u5316\u5f15\u64ce \u5185\u5b58 24Gb \u6216\u66f4\u591a \u786c\u76d8 200Gb \u6216\u66f4\u591a \u7f51\u7edc VMware NAT \u6216\u6865\u63a5\u7f51\u7edc\u9002\u914d\u5668 \u6ce8\u610f\uff1aPC \u53f0\u5f0f\u673a/\u7b14\u8bb0\u672c\u7535\u8111\u5c06\u80fd\u591f\u8fd0\u884c\u4e2d\u5c0f\u578b\u5b9e\u9a8c\u5ba4\u3002\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u7684\u6027\u80fd\u548c\u8282\u70b9\u6570\u91cf\u53d6\u51b3\u4e8e\u5b9e\u9a8c\u5ba4\u4e2d\u90e8\u7f72\u7684\u8282\u70b9\u7c7b\u578b\u3002 \u4f8b\u5b50\uff1a IOL \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 120 \u4e2a\u8282\u70b9 vIOS \u57fa\u4e8e\u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 20-40 \u4e2a\u8282\u70b9 \u57fa\u4e8e CSR \u56fe\u50cf\u7684\u8282\u70b9\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u6700\u591a 10 \u4e2a \u865a\u62df\u52a1\u670d\u5668\u7cfb\u7edf\u8981\u6c42 \u5148\u51b3\u6761\u4ef6\uff1a CPU\uff1a\u82f1\u7279\u5c14\u81f3\u5f3a CPU\uff0c\u652f\u6301\u5e26\u6709\u6269\u5c55\u9875\u8868 (EPT) \u7684\u82f1\u7279\u5c14\u00ae VT-x \u64cd\u4f5c\u7cfb\u7edf\uff1aESXi 6.0 \u6216\u66f4\u9ad8\u7248\u672c \u670d\u52a1\u5668\u786c\u4ef6\u8981\u6c42 \u89c4\u683c \u4e2d\u592e\u5904\u7406\u5668 \u63a8\u8350 CPU 2x Intel E5-2650v3\uff0840 \u4e2a\u903b\u8f91\u5904\u7406\u5668\uff09\u6216\u66f4\u597d\u5730\u652f\u6301\u5e26\u6709\u6269\u5c55\u9875\u8868 (EPT) \u7684 Intel\u00ae VT-x\u6700\u4f4e CPU \u662f\u4efb\u4f55\u652f\u6301 Intel\u00ae VT-x \u7684 Intel Xeon CPU\u5e26\u6709\u6269\u5c55\u9875\u8868 (EPT) \u5185\u5b58 128Gb \u786c\u76d8\u7a7a\u95f4 2Tb \u7f51\u7edc \u5c40\u57df\u7f51\u4ee5\u592a\u7f51 \u670d\u52a1\u5668\u786c\u4ef6\u8981\u6c42 \u89c4\u683c \u4e2d\u592e\u5904\u7406\u5668 32/1\uff08\u5904\u7406\u5668\u6570\u91cf/\u6bcf\u4e2a\u5904\u7406\u5668\u7684\u5185\u6838\u6570\u91cf\uff09\u542f\u7528 Intel VT-x/EPT \u865a\u62df\u5316\u5f15\u64ce \u5185\u5b58 64Gb \u53ca\u4ee5\u4e0a \u786c\u76d8 800Gb \u53ca\u4ee5\u4e0a \u7f51\u7edc vSwitch/VMnet \u6ce8\u610f\uff1a\u6bcf\u4e2a\u5b9e\u9a8c\u5ba4\u7684\u6027\u80fd\u548c\u8282\u70b9\u6570\u91cf\u53d6\u51b3\u4e8e\u5b9e\u9a8c\u5ba4\u4e2d\u4f7f\u7528\u7684\u8282\u70b9\u7c7b\u578b\u3002 \u4f8b\u5b50\uff1a 120 IOL \u57fa\u4e8e\u955c\u50cf\u7684\u5b9e\u9a8c\u5ba4 \u6bcf\u4e2a\u5b9e\u9a8c\u5ba4 20 \u4e2a \u57fa\u4e8eCSRv1000 \u955c\u50cf\u7684\u8282\u70b9 \u4e13\u7528\u670d\u52a1\u5668\uff08\u88f8\u673a\uff09\u7cfb\u7edf\u8981\u6c42 \u5148\u6761\u4ef6\uff1a CPU\uff1aIntel Xeon CPU \u652f\u6301 Intel\u00ae VT-x with Extended Page Tables (EPT) \u64cd\u4f5c\u7cfb\u7edf\uff1aUbuntu Server 16.04.4 LTS x64 \u670d\u52a1\u5668\u786c\u4ef6\u8981\u6c42 \u89c4\u683c \u4e2d\u592e\u5904\u7406\u5668 \u63a8\u8350\u7684 CPU Intel E5-2650v3\uff0840 \u4e2a\u903b\u8f91\u5904\u7406\u5668\uff09\u6216\u66f4\u597d\u7684\u652f\u6301 Intel\u00ae VT-x with Extended Page Tables (EPT) \u6700\u4f4e CPU \u662f\u4efb\u4f55\u652f\u6301 Intel\u00ae VT-x \u548c \u6269\u5c55\u9875E\u8868xtended Page Tables (EPT) \u7684 Intel Xeon CPU \u5185\u5b58 128Gb \u786c\u76d8\u7a7a\u95f4 2Tb \u7f51\u7edc \u5c40\u57df\u7f51\u4ee5\u592a\u7f51","title":"2.\u786c\u4ef6\u8981\u6c42"},{"location":"DevOps/Network/00pnetlab%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E7%99%BB%E5%BD%95/#_1","text":"\u865a\u62df\u5316\u5e73\u53f0 \u652f\u6301\u60c5\u51b5 VMware Workstation 12.5 \u6216\u66f4\u9ad8\u7248\u672c \u652f\u6301 VMware Player 12.5 \u6216\u66f4\u9ad8\u7248\u672c \u652f\u6301 VMware ESXi 6.0 \u6216\u66f4\u9ad8\u7248\u672c \u652f\u6301 Ubuntu Server 16.04 LTS \u4f5c\u4e3a\u88f8\u673a\u5e73\u53f0\uff08\u7269\u7406\u673a\u5b89\u88c5\uff09 \u652f\u6301 \u8c37\u6b4c\u4e91\u5e73\u53f0 \u652f\u6301","title":"\u652f\u6301\u7684\u865a\u62df\u5316\u5e73\u53f0\u548c\u8f6f\u4ef6"},{"location":"DevOps/Network/00pnetlab%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E7%99%BB%E5%BD%95/#_2","text":"\u786c\u4ef6\u6216\u8005\u865a\u62df\u5316\u5e73\u53f0 \u652f\u6301\u60c5\u51b5 \u57fa\u4e8e AMD CPU \u7684 PC \u6216\u670d\u52a1\u5668 \u4e0d\u652f\u6301 VirtualBox \u865a\u62df\u5316 \u4e0d\u652f\u6301 \u601d\u6770 XenServer \u4e0d\u652f\u6301 \u5fae\u8f6f HyperV \u4e0d\u652f\u6301 Ubuntu 17.X \u6216 18.x \u4f5c\u4e3a\u5e73\u53f0 \u4e0d\u652f\u6301","title":"\u4e0d\u53d7\u652f\u6301\u7684\u786c\u4ef6\u548c\u7cfb\u7edf"},{"location":"DevOps/Network/00pnetlab%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E7%99%BB%E5%BD%95/#3pnetlab","text":"\u767e\u5ea6\u7f51\u76d8\u4e0b\u8f7d\u94fe\u63a5 \u63d0\u53d6\u7801\uff1a2333 1.\u4e0b\u8f7d.ova\u6587\u4ef6\uff0c\u5e76\u5bfc\u5165VMWare Workstation\u3002 2.\u63d0\u524d\u4e0b\u8f7d\u597dWMware Workstation\uff0c\u5c06\u4e0b\u8f7d\u7684\u597d\u7684PNET_4.2.10.ova\u6587\u4ef6\u4f7f\u7528VMWare Workstation\u6587\u4ef6\u6253\u5f00\u3002 3.\u5f39\u51fa\u4ee5\u4e0b\u5bf9\u8bdd\u6846\uff0c\u8bbe\u7f6e\u597d\u865a\u62df\u673a\u540d\u79f0\u548c\u865a\u62df\u673a\u7684\u5b58\u50a8\u8def\u5f84\uff0c\u70b9\u51fb\u5bfc\u5165\u6309\u94ae\u3002 4.\u7b49\u5f85\u8fdb\u5ea6\u6761\u5b8c\u6210 5.\u865a\u62df\u673a\u5bfc\u5165\u6210\u529f\u540e\u70b9\u51fb\u7f16\u8f91\u865a\u62df\u673a\u8bbe\u7f6e\uff1b\u5f00\u542f\u8be5\u865a\u62df\u673a\u7684Intel VT-x/EPT\u3002 \u6ce8\u610f \uff1a\u865a\u62df\u673a\u5904\u7406\u5668\u8981\u5f00\u542fIntel VT-x/EPT\u3002\u5426\u5219\u5b89\u88c5\u5b8c\u6210\u540e\u865a\u62df\u673a\u955c\u50cf\u4e0d\u80fd\u6b63\u5e38\u542f\u52a8\u3002 6.\u5f00\u542f\u865a\u62df\u673a\uff0c\u767b\u5f55 7.\u67e5\u770b\u865a\u62df\u673a\u72b6\u6001\u662f\u5426\u6b63\u5e38 **\u6ce8\u610f\uff1a**\u5982\u679c\u51fa\u73b0\u4e0b\u56fe\u6846\u9009\u8d77\u6765\u7684\u63d0\u793a\u4fe1\u606f\u8bc1\u660e\u5df2\u7ecf\u5f00\u542f\u4e86\u865a\u62df\u673a\u5904\u7406\u5668\u7684Intel VT-x/EMP\u9009\u9879\u3002\u5982\u679c\u8ddf\u4e0b\u56fe\u6846\u9009\u51fa\u6765\u5b57\u6bb5\u4e0d\u5339\u914d\uff0c\u4e00\u5b9a\u8981\u5f00\u542fIntel VT-x/EMP\u9009\u9879\u3002 8.\u4f7f\u7528\u7ed9\u5b9a\u7684IP\u5730\u5740\u8f93\u5165\u6d4f\u89c8\u5668\uff0c\u767b\u5f55PNETLab 9.\u5728\u6d4f\u89c8\u5668\u70b9\u51fb\u9ad8\u7ea7\u9009\u9879\u5361\uff0c\u70b9\u51fb\u7ee7\u7eed\u524d\u5f80\u3002 10.\u51fa\u73b0\u767b\u5f55\u754c\u9762\uff1b\u6709\u4e24\u79cd\u767b\u5f55\u6a21\u5f0f\u3002Online Mode\uff08\u5728\u7ebf\u6a21\u5f0f\uff09Offine Mode\uff08\u79bb\u7ebf\u6a21\u5f0f\uff09 11.\u5982\u679c\u9009\u62e9\u5728\u7ebf\u767b\u5f55\uff0c\u5e76\u4e14\u662f\u521d\u6b21\u767b\u5f55\u9700\u8981\u521b\u5efa\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c 12.\u70b9\u51fbSign Up\uff0c\u4f9d\u6b21\u8f93\u5165\u7528\u6237\u540d\uff0c\u90ae\u7bb1\u4ee5\u53ca\u4e24\u6b21\u5bc6\u7801\uff0c\u9a8c\u8bc1\u7801 13.\u6ce8\u518c\u5b8c\u6210\u540e\u8fd4\u56de\u767b\u5f55\u754c\u9762\uff0c\u4f9d\u636e\u63d0\u793a\u8f93\u5165\u76f8\u5173\u4fe1\u606f\u767b\u5f55\u5373\u53ef\u3002 14.\u767b\u5f55\u6210\u529f\u540e\u53ef\u4ee5\u8fdb\u5165Store\u9875\u9762\u4e0b\u8f7d\u73b0\u6210\u7684\u7f51\u7edc\u62d3\u6251\u8fdb\u884c\u7ec3\u4e60\u3002 15.\u70b9\u51fb\u4e0b\u8f7d\u62d3\u6251\u4f1a\u5f39\u51fa\u4e00\u4e2a\u5bf9\u8bdd\u6846\uff0c\u5728\u6b64\u5bf9\u8bdd\u6b3e\u53ea\u9700\u8981\u586b\u5199\u5b89\u88c5\u597d\u7684PNETLab\u63d0\u4f9b\u7684\u767b\u5f55IP\u5730\u5740\u5373\u53ef 16.\u70b9\u51fbDownload\u9009\u9879\u5361\uff0c\u9875\u9762\u4f1a\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762\uff0c\u8f93\u5165\u9a8c\u8bc1\u7801\uff0c\u70b9\u51fbLogin\u91cd\u65b0\u767b\u5f55\u3002 17.\u51fa\u73b0\u8b66\u544a\u9875\u9762\uff0c\u5ffd\u7565\u8b66\u544a\u3002\u70b9\u51fb\u4ecd\u7136\u53d1\u9001 18.\u5728\u6b64\u9875\u9762\u53ef\u4ee5\u5b8c\u6210\u521b\u5efa\u62d3\u6251\u7b49\u64cd\u4f5c\uff0c\u81f3\u6b64\u5728\u7ebf\u6a21\u5f0f\u767b\u5f55\u6210\u529f\u3002 19.\u79bb\u7ebf\u6a21\u5f0f\u548c\u5728\u7ebf\u6a21\u5f0f\u529f\u80fd\u5e76\u65e0\u533a\u522b\uff0c\u9664\u4e86\u65e0\u6cd5\u8bbf\u95eePNETLab\u81ea\u5e26\u7684\u62d3\u6251\u5546\u5e97\uff0c\u4e0b\u8f7d\u5176\u4ed6\u7528\u6237\u8bbe\u8ba1\u597d\u7684\u62d3\u6251\u3002\u5982\u679c\u60f3\u542f\u7528\u79bb\u7ebf\u6a21\u5f0f\u5fc5\u987b\u5148\u5904\u4e8e\u5728\u7ebf\u6a21\u5f0f\u66f4\u6539\u7cfb\u7edf\u8bbe\u7f6e\u3002 20.\u5f00\u542f\u79bb\u7ebf\u6a21\u5f0f 21.\u9000\u51fa\u767b\u5f55\uff0c\u9875\u9762\u53d8\u66f4\u4e3a\u79bb\u7ebf\u6a21\u5f0f\u767b\u5f55\u9875\u9762\u3002\u518d\u6b64\u9875\u9762\u7528\u6237\u540d\u9ed8\u8ba4\u4e3aadmin\u5bc6\u7801\u4e3apnet\u9ed8\u8ba4Console\u9009\u62e9\u4e3aHTML Console\u3002\u8f93\u5165\u9a8c\u8bc1\u7801\uff0c\u70b9\u51fbLogin\u3002\u5373\u53ef\u767b\u5f55\u79bb\u7ebf\u6a21\u5f0f\u3002","title":"3.\u5b89\u88c5PNETLab"},{"location":"DevOps/Network/01-PNETLab%E5%8A%A0%E8%BD%BD%E9%95%9C%E5%83%8F%E5%8C%85/","text":"01-PNETLab\u52a0\u8f7d\u955c\u50cf\u5305 \u00b6 1.\u955c\u50cf\u4e0b\u8f7d \u00b6 1.\u4f7f\u7528shell\u5de5\u5177\u8fde\u63a5\u5230PNETLab\u6240\u5728\u7684\u865a\u62df\u673a\uff0cshell\u5de5\u5177\u53ef\u4ee5\u9009\u62e9putty\uff0cSecureCRT\uff0cXshell\uff0c\u6216\u8005\u662f\u6700\u8fd1\u6bd4\u8f83\u6d41\u884c\u7684MobaXterm\u7b49\u3002 2.\u767b\u5f55\u6210\u529f\u540e\u8fdb\u5230\u7cfb\u7edf\u754c\u9762\uff0c\u663e\u793a\u7684\u4e00\u4e9b\u7cfb\u7edf\u4fe1\u606f 3.PNETLab\u652f\u6301\u955c\u50cf\u7684\u7f51\u7edc\u5b58\u653e\u4f4d\u7f6e\u4e3a: https://unetlab.cloud \u6211\u4eec\u53ef\u4ee5\u8fdb\u5165\u8be5\u94fe\u63a5\u4e0b\u8f7d\u955c\u50cf\u3002 4.\u672c\u6b21\u64cd\u4f5c\u4ee5\u6d89\u53ca\u4e09\u79cd\u7c7b\u578b\u7684\u955c\u50cf\u6dfb\u52a0\uff1b\u5206\u522b\u662fdynamips,iol\u4ee5\u53caqemu 2.dynamips\u955c\u50cf\u4e0a\u4f20\u5e76\u9a8c\u8bc1 \u00b6 1.\u4f7f\u7528winSCP\u8fdc\u7a0b\u8fde\u63a5\u5230PNETLba\u4e3b\u673a\u4e0a 2.dynamips\u955c\u50cf\u7684\u4e0a\u4f20\u4f4d\u7f6e\u5728/opt/unetlab/addons/dynamips/\u76ee\u5f55\u4e0b 3.\u5c06\u4ece\u955c\u50cf\u7ad9\u4e0b\u8f7d\u7684\u7c7b\u578b\u4e3a.image\u683c\u5f0f\u7684\u955c\u50cf\u62d6\u52a8\u5230/opt/unetlab/addons/dynamips/\u76ee\u5f55\u4e0b 4.\u4f7f\u7528ssh\u5de5\u5177\u767b\u5f55\u5230PNETLab\uff1b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1b\u4fee\u6b63\u4e0a\u4f20\u955c\u50cf\u7684\u6743\u9650\u3002 root@pnetlab:~# /opt/unetlab/wrappers/unl_wrapper -a fixpermissions 5.\u4f7f\u7528\u6d4f\u89c8\u5668\u767b\u5f55\u5230PNETLab\u73af\u5883 6.\u6211\u4eec\u6dfb\u52a0\u7684\u955c\u50cf\u5df2\u7ecf\u6dfb\u52a0\u5230\u53ef\u9009\u8bbe\u5907\u5217\u8868\u5f53\u4e2d\u4e86\u3002 7.\u6d4b\u8bd5\u8bbe\u5907\u7684\u53ef\u7528\u6027 3.IOL\u955c\u50cf\u4e0a\u4f20\u5e76\u9a8c\u8bc1 \u00b6 1.\u5c06\u4ece\u955c\u50cf\u7ad9\u4e0b\u8f7d\u7684\u7c7b\u578b\u4e3a.bin\u683c\u5f0f\u7684\u955c\u50cf\u62d6\u52a8\u5230/opt/unetlab/addons/iol/bin\u76ee\u5f55\u4e0b 2.\u4f7f\u7528ssh\u5de5\u5177\u767b\u5f55\u5230PNETLab\uff1b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1b\u4fee\u6b63\u4e0a\u4f20\u955c\u50cf\u7684\u6743\u9650\u3002 root@pnetlab:~# /opt/unetlab/wrappers/unl_wrapper -a fixpermissions 3.\u4f7f\u7528\u6d4f\u89c8\u5668\u767b\u5f55\u5230PNETLab\u73af\u5883 4.\u6211\u4eec\u6dfb\u52a0\u7684\u955c\u50cf\u5df2\u7ecf\u6dfb\u52a0\u5230\u53ef\u9009\u8bbe\u5907\u5217\u8868\u5f53\u4e2d\u4e86\u3002 5.\u6d4b\u8bd5\u8bbe\u5907\u7684\u53ef\u7528\u6027 4.qemu\u955c\u50cf\u4e0a\u4f20\u5e76\u9a8c\u8bc1 \u00b6 1.\u5728/opt/unetlab/addons/qemu\u76ee\u5f55\u4e0b\u521b\u5efa\u5173\u8054\u76ee\u5f55\u5e76\u8bbe\u7f6e\u6743\u9650\u3002\u5173\u8054\u76ee\u5f55\u7684\u8bbe\u7f6e\u8981\u7b26\u5408PNETLab\uff08eve-ng\uff09\u7684\u547d\u540d\u89c4\u5219\u3002 **\u53c2\u8003\u94fe\u63a5\uff1a**eve-ng.net/index.php/documentation/howtos/ 2.\u5c06\u4ece\u955c\u50cf\u7ad9\u4e0b\u8f7d\u7684\u7c7b\u578b\u4e3a.qcow2\u683c\u5f0f\u7684\u955c\u50cf\u62d6\u52a8\u5230\u8be5\u76ee\u5f55\u4e0b\u3002 3.\u5c06\u76f8\u5173\u7684.yml\u6587\u4ef6\u4e0a\u4f20\u5230/opt/unetlab/html/templates\u76ee\u5f55\u4e0b 4.\u5c06\u76f8\u5173\u56fe\u7247\u4e0a\u4f20\u5230/opt/unetlab/html/images/icons\u76ee\u5f55\u4e0b 5.\u4f7f\u7528ssh\u5de5\u5177\u767b\u5f55\u5230PNETLab\uff1b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1b\u4fee\u6b63\u4e0a\u4f20\u955c\u50cf\u7684\u6743\u9650\u3002 root@pnetlab:~# /opt/unetlab/wrappers/unl_wrapper -a fixpermissions 6.\u4f7f\u7528\u6d4f\u89c8\u5668\u767b\u5f55\u5230PNETLab\u73af\u5883 7.\u6211\u4eec\u6dfb\u52a0\u7684\u955c\u50cf\u5df2\u7ecf\u6dfb\u52a0\u5230\u53ef\u9009\u8bbe\u5907\u5217\u8868\u5f53\u4e2d\u4e86\u3002 8.\u6d4b\u8bd5\u8bbe\u5907\u7684\u53ef\u7528\u6027","title":"01-PNETLab\u52a0\u8f7d\u955c\u50cf\u5305"},{"location":"DevOps/Network/01-PNETLab%E5%8A%A0%E8%BD%BD%E9%95%9C%E5%83%8F%E5%8C%85/#01-pnetlab","text":"","title":"01-PNETLab\u52a0\u8f7d\u955c\u50cf\u5305"},{"location":"DevOps/Network/01-PNETLab%E5%8A%A0%E8%BD%BD%E9%95%9C%E5%83%8F%E5%8C%85/#1","text":"1.\u4f7f\u7528shell\u5de5\u5177\u8fde\u63a5\u5230PNETLab\u6240\u5728\u7684\u865a\u62df\u673a\uff0cshell\u5de5\u5177\u53ef\u4ee5\u9009\u62e9putty\uff0cSecureCRT\uff0cXshell\uff0c\u6216\u8005\u662f\u6700\u8fd1\u6bd4\u8f83\u6d41\u884c\u7684MobaXterm\u7b49\u3002 2.\u767b\u5f55\u6210\u529f\u540e\u8fdb\u5230\u7cfb\u7edf\u754c\u9762\uff0c\u663e\u793a\u7684\u4e00\u4e9b\u7cfb\u7edf\u4fe1\u606f 3.PNETLab\u652f\u6301\u955c\u50cf\u7684\u7f51\u7edc\u5b58\u653e\u4f4d\u7f6e\u4e3a: https://unetlab.cloud \u6211\u4eec\u53ef\u4ee5\u8fdb\u5165\u8be5\u94fe\u63a5\u4e0b\u8f7d\u955c\u50cf\u3002 4.\u672c\u6b21\u64cd\u4f5c\u4ee5\u6d89\u53ca\u4e09\u79cd\u7c7b\u578b\u7684\u955c\u50cf\u6dfb\u52a0\uff1b\u5206\u522b\u662fdynamips,iol\u4ee5\u53caqemu","title":"1.\u955c\u50cf\u4e0b\u8f7d"},{"location":"DevOps/Network/01-PNETLab%E5%8A%A0%E8%BD%BD%E9%95%9C%E5%83%8F%E5%8C%85/#2dynamips","text":"1.\u4f7f\u7528winSCP\u8fdc\u7a0b\u8fde\u63a5\u5230PNETLba\u4e3b\u673a\u4e0a 2.dynamips\u955c\u50cf\u7684\u4e0a\u4f20\u4f4d\u7f6e\u5728/opt/unetlab/addons/dynamips/\u76ee\u5f55\u4e0b 3.\u5c06\u4ece\u955c\u50cf\u7ad9\u4e0b\u8f7d\u7684\u7c7b\u578b\u4e3a.image\u683c\u5f0f\u7684\u955c\u50cf\u62d6\u52a8\u5230/opt/unetlab/addons/dynamips/\u76ee\u5f55\u4e0b 4.\u4f7f\u7528ssh\u5de5\u5177\u767b\u5f55\u5230PNETLab\uff1b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1b\u4fee\u6b63\u4e0a\u4f20\u955c\u50cf\u7684\u6743\u9650\u3002 root@pnetlab:~# /opt/unetlab/wrappers/unl_wrapper -a fixpermissions 5.\u4f7f\u7528\u6d4f\u89c8\u5668\u767b\u5f55\u5230PNETLab\u73af\u5883 6.\u6211\u4eec\u6dfb\u52a0\u7684\u955c\u50cf\u5df2\u7ecf\u6dfb\u52a0\u5230\u53ef\u9009\u8bbe\u5907\u5217\u8868\u5f53\u4e2d\u4e86\u3002 7.\u6d4b\u8bd5\u8bbe\u5907\u7684\u53ef\u7528\u6027","title":"2.dynamips\u955c\u50cf\u4e0a\u4f20\u5e76\u9a8c\u8bc1"},{"location":"DevOps/Network/01-PNETLab%E5%8A%A0%E8%BD%BD%E9%95%9C%E5%83%8F%E5%8C%85/#3iol","text":"1.\u5c06\u4ece\u955c\u50cf\u7ad9\u4e0b\u8f7d\u7684\u7c7b\u578b\u4e3a.bin\u683c\u5f0f\u7684\u955c\u50cf\u62d6\u52a8\u5230/opt/unetlab/addons/iol/bin\u76ee\u5f55\u4e0b 2.\u4f7f\u7528ssh\u5de5\u5177\u767b\u5f55\u5230PNETLab\uff1b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1b\u4fee\u6b63\u4e0a\u4f20\u955c\u50cf\u7684\u6743\u9650\u3002 root@pnetlab:~# /opt/unetlab/wrappers/unl_wrapper -a fixpermissions 3.\u4f7f\u7528\u6d4f\u89c8\u5668\u767b\u5f55\u5230PNETLab\u73af\u5883 4.\u6211\u4eec\u6dfb\u52a0\u7684\u955c\u50cf\u5df2\u7ecf\u6dfb\u52a0\u5230\u53ef\u9009\u8bbe\u5907\u5217\u8868\u5f53\u4e2d\u4e86\u3002 5.\u6d4b\u8bd5\u8bbe\u5907\u7684\u53ef\u7528\u6027","title":"3.IOL\u955c\u50cf\u4e0a\u4f20\u5e76\u9a8c\u8bc1"},{"location":"DevOps/Network/01-PNETLab%E5%8A%A0%E8%BD%BD%E9%95%9C%E5%83%8F%E5%8C%85/#4qemu","text":"1.\u5728/opt/unetlab/addons/qemu\u76ee\u5f55\u4e0b\u521b\u5efa\u5173\u8054\u76ee\u5f55\u5e76\u8bbe\u7f6e\u6743\u9650\u3002\u5173\u8054\u76ee\u5f55\u7684\u8bbe\u7f6e\u8981\u7b26\u5408PNETLab\uff08eve-ng\uff09\u7684\u547d\u540d\u89c4\u5219\u3002 **\u53c2\u8003\u94fe\u63a5\uff1a**eve-ng.net/index.php/documentation/howtos/ 2.\u5c06\u4ece\u955c\u50cf\u7ad9\u4e0b\u8f7d\u7684\u7c7b\u578b\u4e3a.qcow2\u683c\u5f0f\u7684\u955c\u50cf\u62d6\u52a8\u5230\u8be5\u76ee\u5f55\u4e0b\u3002 3.\u5c06\u76f8\u5173\u7684.yml\u6587\u4ef6\u4e0a\u4f20\u5230/opt/unetlab/html/templates\u76ee\u5f55\u4e0b 4.\u5c06\u76f8\u5173\u56fe\u7247\u4e0a\u4f20\u5230/opt/unetlab/html/images/icons\u76ee\u5f55\u4e0b 5.\u4f7f\u7528ssh\u5de5\u5177\u767b\u5f55\u5230PNETLab\uff1b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1b\u4fee\u6b63\u4e0a\u4f20\u955c\u50cf\u7684\u6743\u9650\u3002 root@pnetlab:~# /opt/unetlab/wrappers/unl_wrapper -a fixpermissions 6.\u4f7f\u7528\u6d4f\u89c8\u5668\u767b\u5f55\u5230PNETLab\u73af\u5883 7.\u6211\u4eec\u6dfb\u52a0\u7684\u955c\u50cf\u5df2\u7ecf\u6dfb\u52a0\u5230\u53ef\u9009\u8bbe\u5907\u5217\u8868\u5f53\u4e2d\u4e86\u3002 8.\u6d4b\u8bd5\u8bbe\u5907\u7684\u53ef\u7528\u6027","title":"4.qemu\u955c\u50cf\u4e0a\u4f20\u5e76\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/","text":"\u6570\u901a\u77e5\u8bc6\u5b9d\u5178 Version 1.6.1 \u6731\u4ed5\u803f 00261992 \u534e\u4e3a\u6280\u672f\u6709\u9650\u516c\u53f8 \u00b6 \u7248\u6743\u6240\u6709 \u4fb5\u6743\u5fc5\u7a76 \u4fee\u8ba2\u8bb0\u5f55 \u00b6 \u65e5\u671f \u7248\u672c \u63cf\u8ff0 \u4f5c\u8005/\u4fee\u8ba2\u4eba 2014-07-01 1.0 \u521d\u7a3f\u5b8c\u6210 \u6731\u4ed5\u803f 00261992 2014-07-20 1.1 \u589e\u52a0VRP\u914d\u7f6e\u57fa\u7840\uff1b\u4fee\u8ba2NAT\u7684\u90e8\u5206\u5185\u5bb9\uff1b \u589e\u52a0GREOver IPSec\uff1b\u589e\u52a0IPv6\u5185\u5bb9 \u6731\u4ed5\u803f 00261992 2014-08-01 1.2 \u589e\u52a0Smart Link\uff1b\u589e\u52a0\u7ec4\u64ad\u5185\u5bb9\uff1b\u4fee\u8ba2\u90e8\u5206\u7ae0\u8282 \u6731\u4ed5\u803f 00261992 2015-10-20 1.3 \u4fee\u8ba2\u90e8\u5206\u7ae0\u8282\u53ca\u5df2\u77e5\u6587\u6863\u9519\u8bef\uff1b\u589e\u52a0\u5806\u53e0\u6280\u672f\u5185\u5bb9 \u6731\u4ed5\u803f 00261992 2017-04-28 1.5 \u4fee\u8ba2\u90e8\u5206\u7ae0\u8282\uff0c\u4f18\u5316\u6587\u6863\u7ed3\u6784\uff0c\u4fee\u6539\u5df2\u77e5\u6587\u6863\u9519\u8bef\uff1b\u589e\u52a0\u7f51 \u7edc\u6545\u969c\u5904\u7406\u7b49\u7ae0\u8282\uff1b\u5237\u65b0\u9632\u706b\u5899\u914d\u7f6e\uff08\u57fa\u4e8eNGFW\uff09 \u6731\u4ed5\u803f 00261992 2017-08-09 1.6 \u589e\u52a0MPLS\u4e0eMPLS VPN\u7ae0\u8282\uff0c\u5220\u9664\u90e8\u5206\u8001\u65e7\u5185\u5bb9 \u6731\u4ed5\u803f 00261992 \u76ee \u5f55 \u00b6 \u6570\u636e\u901a\u4fe1\u4e0e\u7f51\u7edc \u77e5\u8bc6\u5730\u56fe 10#_bookmark0 \u7f51\u7edc\u57fa\u7840 11 \u5229\u7528TCP/IP\u6a21\u578b\u7406\u89e3\u6570\u636e\u901a\u4fe1\u8fc7\u7a0b 11 IP\u5730\u5740\u7684\u6982\u5ff5\u53caIP\u5b50\u7f51\u5212\u5206 19 VRP\u57fa\u7840 27 \u4f7f\u7528Console\u63a5\u53e3\u7ba1\u7406\u8bbe\u5907 32 eNSP\u534e\u4e3a\u5b98\u65b9\u6570\u901a\u6a21\u62df\u5668 37 \u4ea4\u6362\u57fa\u7840 43 \u4e8c\u5c42\u4ea4\u6362\u57fa\u7840 43 VLAN\u53caTrunk 47 VLAN\u7684\u57fa\u672c\u6982\u5ff5 47 Access\u7c7b\u578b\u7684\u63a5\u53e3 49 Trunk\u7c7b\u578b\u7684\u63a5\u53e3 50 \u63a5\u53e3\u7c7b\u578b\u5c0f\u7ed3 51 VLAN\u53caTrunk\u7684\u57fa\u7840\u914d\u7f6e 54 Hybrid\u63a5\u53e3\u7684\u914d\u7f6e 57 QinQ 62 \u4e8c\u5c42\u63a5\u53e3\u3001\u4e09\u5c42\u63a5\u53e3\u3001\u4ee5\u53caPVID\u3001VLAN-ID\u7b49\u6982\u5ff5\u6742\u8c08 65 \u4e8c\u5c42\u9632\u73af\u6280\u672f 66 STP 66 STP\u7684\u7279\u6027\u53ca\u4f18\u5316 79 MSTP 89 Smart Link\u53caMonitor Link 98 \u5b9e\u73b0VLAN\u95f4\u7684\u4e92\u8bbf 115 \u901a\u8fc7\u5b50\u63a5\u53e3\u5b9e\u73b0VLAN\u95f4\u7684\u4e92\u8bbf 115 \u901a\u8fc7vlan-interface\u5b9e\u73b0VLAN\u95f4\u7684\u4e92\u8bbf 118 \u94fe\u8def\u805a\u5408 122 \u94fe\u8def\u805a\u5408\u6280\u672f\u80cc\u666f 122 \u5de5\u4f5c\u65b9\u5f0f\uff1a\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\uff08Manual load-balance\uff09 123 \u5de5\u4f5c\u65b9\u5f0f\uff1aLACP 124 \u57fa\u7840\u5b9e\u9a8c 126 \u4ea4\u6362\u5b89\u5168 130 \u7aef\u53e3\u955c\u50cf 130 \u6355\u83b7\u4e1a\u52a1\u62a5\u6587 135 \u7aef\u53e3\u9694\u79bb 138 \u8def\u7531\u57fa\u7840 141 IP\u8def\u7531\u57fa\u7840 141 \u4ec0\u4e48\u662fIP\u8def\u7531 141 IP\u8def\u7531\u8868 142 \u8def\u7531\u4f18\u5148\u7ea7 143 \u9759\u6001\u8def\u7531 144 \u9759\u6001\u8def\u7531\u7b80\u5355\u5b9e\u9a8c 146 \u9ed8\u8ba4\u8def\u7531\uff08\u7f3a\u7701\u8def\u7531\uff09 149 \u6d6e\u52a8\u9759\u6001\u8def\u7531 150 \u8def\u7531\u6c47\u603b\uff08\u8def\u7531\u805a\u5408\uff09 151 \u6700\u957f\u5339\u914d\u539f\u5219 155 \u52a8\u6001\u8def\u7531\u534f\u8bae\u57fa\u7840 159 OSPF 161 OSPF\u6982\u8ff0 161 OSPF\u57fa\u672c\u6982\u5ff5 164 OSPF\u7684\u57fa\u7840\u914d\u7f6e 172 OSPF LSA\u53ca\u7279\u6b8a\u533a\u57df 182 OSPF\u9ad8\u7ea7 192 \u4ea4\u6362\u63d0\u9ad8 196 4.1 S5300\u4ea4\u6362\u673a\u5806\u53e0 196 \u7406\u8bba\u90e8\u5206 196 \u914d\u7f6e\u6307\u5bfc 198 4.2 S6300\u4ea4\u6362\u673a\u5806\u53e0 200 \u7406\u8bba\u90e8\u5206 200 \u914d\u7f6e\u6307\u5bfc 202 Traffic-policy\u6d41\u91cf\u7edf\u8ba1 205 VLAN\u6620\u5c04 206 \u8def\u7531\u63d0\u9ad8 207 \u8def\u7531\u91cd\u53d1\u5e03 207 \u6280\u672f\u80cc\u666f 207 \u5b9e\u65bd\u8981\u70b9 210 \u8def\u7531\u91cd\u53d1\u5e03\u7684\u914d\u7f6e 211 \u8def\u7531\u7b56\u7565 215 Route-policy 215 IP-Prefix 218 5.3 BGP 222 BGP\u57fa\u672c\u6982\u5ff5 222 BGP\u5165\u95e8\u5b9e\u9a8c 230 BGP\u8def\u5f84\u5c5e\u6027 238 BGP\u8def\u7531\u7b56\u7565 253 BGP\u8def\u7531\u53cd\u5c04\u5668 275 BGP\u8054\u90a6 285 BGP\u9009\u8def\u89c4\u5219\u8be6\u89e3 289 \u865a\u62df\u8def\u7531\u8f6c\u53d1\u5b9e\u4f8b 313 VPN-Instance\u90e8\u7f72\u6848\u4f8b 313 \u5197\u4f59\u53ef\u9760 317 VRRP 317 VRRP\u6982\u8ff0 317 VRRP\u672f\u8bed 319 VRRP\u7684\u57fa\u7840\u914d\u7f6e 320 VRRP\u5e38\u89c1\u95ee\u9898 330 VRRP\u4e0eNQA\u7684\u8054\u52a8 331 \u7f51\u7edc\u5b89\u5168 333 7.1 ACL 333 ACL\u6982\u8ff0 333 ACL\u7684\u5206\u7c7b 334 ACL\u7684\u914d\u7f6e 335 ACL\u914d\u7f6e\u5b9e\u4f8b\uff08\u8def\u7531\u5668\uff09 336 ACL\u914d\u7f6e\u793a\u4f8b\uff08\u4ea4\u6362\u673a\uff09 337 \u9632\u706b\u5899\u57fa\u7840 338 \u9632\u706b\u5899\u6982\u8ff0 338 \u9632\u706b\u5899\u7684\u57fa\u7840\u77e5\u8bc6 339 \u9632\u706b\u5899\u7684\u57fa\u7840\u914d\u7f6e 346 7.3 NAT 360 NAT\u6982\u8ff0 360 NAT\u7c7b\u578b\u8be6\u89e3 361 NAT\u5728\u9632\u706b\u5899\uff08NGFW\uff09\u4e0a\u7684\u90e8\u7f72 364 NAT\u5728\u8def\u7531\u5668\u4e0a\u7684\u90e8\u7f72 372 \u9632\u706b\u5899\u53cc\u673a\u70ed\u5907 375 \u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u6982\u8ff0 375 \u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u57fa\u7840 377 \u9632\u706b\u5899\u53cc\u673a\u914d\u7f6e\u6b65\u9aa4 383 \u914d\u7f6e\u6848\u4f8b1\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u7269\u7406\u63a5\u53e3\u90e8\u7f72VRRP\uff09 383 \u4e0e\u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u76f8\u5173\u7684\u5176\u4ed6\u547d\u4ee4 390 \u914d\u7f6e\u6848\u4f8b2\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u4e0b\u884c\u5b50\u63a5\u53e3\u90e8\u7f72VRRP\uff09 391 \u914d\u7f6e\u6848\u4f8b3\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u4e0b\u884cEth-trunk\u5b50\u63a5\u53e3\u90e8\u7f72VRRP\uff09 395 \u914d\u7f6e\u6848\u4f8b4\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0b\u884c\u8fde\u63a5\u5185\u90e8\u4ea4\u6362\u673a\u5e76\u5728Eth-trunk\u5b50\u63a5\u53e3\u90e8\u7f72VRRP\u3001\u4e0a\u884c\u8fde\u63a5\u5916\u90e8\u4ea4\u6362\u673a\u5e76\u8fd0\u884cOSPF\uff09 401 \u9632\u706b\u5899\u53cc\u673a\u914d\u7f6e\u6ce8\u610f\u4e8b\u9879 410 \u9632\u706b\u5899\u5e38\u89c1\u95ee\u9898 411 7.6 VPN 415 7.6.1 VPN\u57fa\u7840\u77e5\u8bc6 415 7.6.2 GRE 420 7.6.3 IPSecVPN 423 \u7f51\u7edc\u7ba1\u7406 483 SNMP 483 SNMPv3\u7684\u57fa\u7840\u914d\u7f6e 487 NTP\u7684\u57fa\u7840\u914d\u7f6e 489 \u7ec4\u64ad\u6280\u672f 490 \u7ec4\u64ad\u57fa\u7840 490 \u7ec4\u64ad\u6982\u8ff0 490 \u7ec4\u64ad\u6a21\u578b 492 \u7ec4\u64ad\u5206\u53d1\u6811 493 \u7ec4\u64ad\u5730\u5740 493 IGMP 496 IGMP\u6982\u8ff0 496 9.2.2 IGMPv1\uff08RFC1112\uff09 497 9.2.3 IGMPv2\uff08RFC2236\uff09 499 9.2.4 IGMP\u914d\u7f6e\u53ca\u5b9e\u73b0 503 \u7ec4\u64ad\u8def\u7531\u534f\u8bae\u6982\u8ff0 507 \u5173\u4e8e\u7ec4\u64ad\u8def\u7531\u534f\u8bae 507 \u7ec4\u64ad\u8def\u7531\u8868\u9879 508 \u7ec4\u64ad\u5206\u53d1\u6811 509 9.3.4 RPF 510 PIM\u6982\u8ff0 511 PIM-DM 512 \u534f\u8bae\u6982\u8ff0 512 \u534f\u8bae\u62a5\u6587 512 \u90bb\u5c45\u5173\u7cfb 513 \u6269\u6563\uff08Flood\uff09\u3001\u526a\u679d\uff08Prune\uff09\u53ca\u5ac1\u63a5\uff08Graft\uff09 514 Assert\u65ad\u8a00\u673a\u5236 518 \u914d\u7f6e\u793a\u4f8b 519 PIM-SM 526 \u57fa\u7840\u77e5\u8bc6 526 \u5de5\u4f5c\u673a\u52361\uff1a\u5171\u4eab\u6811\u52a0\u5165 527 \u5de5\u4f5c\u673a\u52362\uff1a\u5171\u4eab\u6811\u526a\u679d 529 \u5de5\u4f5c\u673a\u52363\uff1a\u6e90\u6ce8\u518c 531 \u5de5\u4f5c\u673a\u52364\uff1aRPT\u5230SPT\u7684\u5207\u6362 534 PIM-SM DR\u6307\u5b9a\u8def\u7531\u5668 537 \u914d\u7f6e\u793a\u4f8b 538 IPv6\u57fa\u7840 548 10.1 IPv6 \u57fa\u7840 548 10.1.1 \u6982\u8ff0 548 10.1.2 \u62a5\u6587\u683c\u5f0f 549 IPv6\u7f16\u5740 551 IPv6\u5730\u5740 551 \u5730\u5740\u7c7b\u578b 552 \u5355\u64ad\u5730\u5740 553 \u63a5\u53e3ID 555 \u7ec4\u64ad\u5730\u5740 556 \u57fa\u7840\u914d\u7f6e 558 \u57fa\u7840\u914d\u7f6e\u547d\u4ee4 558 \u5b9e\u9a8c1\uff1aIPv6\u5165\u95e8\u5b9e\u9a8c 559 \u5b9e\u9a8c2\uff1a\u65e0\u72b6\u6001\u5730\u5740\u81ea\u52a8\u914d\u7f6e 562 ICMPv6 564 ICMPv6\u6982\u8ff0 564 10.4.2 NDP 565 IPv6\u8fc7\u6e21\u6280\u672f 575 10.5.1 \u6982\u8ff0 575 IPv6 Over IPv4\u624b\u5de5\u96a7\u9053 577 GRE\u96a7\u9053 580 6to4\u81ea\u52a8\u96a7\u9053 584 10.5.5 NAT64\u6982\u8ff0 589 NAT64\uff08IPv6\u8282\u70b9\u4e3b\u52a8\u8bbf\u95eeIPv4\u670d\u52a1\u5668\uff09 591 NAT64\uff08IPv4\u8282\u70b9\u4e3b\u52a8\u8bbf\u95eeIPv6\u670d\u52a1\u5668\uff09 593 MPLS\u4e0eMPLS VPN 595 MPLS\u57fa\u7840 595 MPLS\u6982\u8ff0 595 MPLS\u672f\u8bed 597 MPLS\u6807\u7b7e 599 MPLS\u6807\u7b7e\u64cd\u4f5c 600 MPLS\u8f6c\u53d1\u8fc7\u7a0b\u8be6\u89e3 601 11.2 LDP 604 LDP\u6982\u8ff0 604 LDP ID 606 \u6807\u7b7e\u7a7a\u95f4 606 \u4f20\u8f93\u5730\u5740 607 LDP\u7684\u57fa\u672c\u5de5\u4f5c\u8fc7\u7a0b 607 11.2.6 PHP 611 MPLS\u7684\u57fa\u7840\u914d\u7f6e 613 \u57fa\u7840\u547d\u4ee4 613 \u57fa\u7840\u5b9e\u9a8c 614 MPLS VPN 619 MPLS VPN\u7684\u67b6\u6784 620 MPLS VPN\u521d\u4f53\u9a8c 621 VPN\u5b9e\u4f8b 625 11.4.4 RD 627 11.4.5 RT 628 11.4.6 \u57fa\u7840\u5b9e\u9a8c 629 \u670d\u52a1\u8d28\u91cf 640 12.1 \u6d41\u91cf\u5206\u7c7b\u4e0e\u6807\u8bb0 640 12.1.1 \u4fee\u6539\u6d41\u91cf\u7684DSCP 640 \u6545\u969c\u5904\u7406 641 \u7f51\u7edc\u6545\u969c\u5904\u7406\u6982\u8ff0 641 \u7f51\u7edc\u6545\u969c\u5904\u7406\u6848\u4f8b 645 13.2.1 \u6848\u4f8b1\uff1a\u67d0\u5c40\u70b9\u5355\u677f\u65e0\u6cd5\u8bbf\u95ee\u5ba2\u6237\u7f51\u7edc\u8bbe\u5907 645 13.2.2 \u6848\u4f8b2 647 13.2.3 \u6848\u4f8b3 648 13.2.4 \u6848\u4f8b4 649 13.2.5 \u6848\u4f8b5 650 13.2.6 \u6848\u4f8b6 652 13.2.7 \u6848\u4f8b7 652 13.2.8 \u6848\u4f8b8 653 13.2.9 \u6848\u4f8b9 654 \u6570\u636e\u901a\u4fe1\u4e0e\u7f51\u7edc \u77e5\u8bc6\u5730\u56fe \u00b6 \u4e00\u4e2a\u7406\u60f3\u7684\u77e5\u8bc6\u4f53\u7cfb\u6c89\u6dc0\uff08\u77e5\u8bc6\u5e93\uff09\uff0c\u5e94\u8be5\u662f\u4f53\u7cfb\u5316\u3001\u7cfb\u7edf\u5316\u7684\uff0c\u5bf9\u77e5\u8bc6\u7684\u5448\u73b0\u5e94\u8be5\u662f\u6709\u6761\u7406\u7684\u3001\u8fde\u7eed\u7684\u3001\u6a21\u5757\u5316\u7684\uff0c\u800c\u4e14\u80fd\u591f\u5c06\u7406\u8bba\u4e0e\u5b9e\u8df5\u76f8\u7ed3\u5408\uff0c\u843d\u5730\u5230\u5b9e\u9645\u4e1a\u52a1\u4e2d\uff0c\u80fd\u591f\u76f4\u63a5\u4e3a\u4e1a\u52a1\u8f93\u51fa\u4ef7\u503c\u3002\u77e5\u8bc6\u7684\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u5fc5\u987b\u7ad9\u5728\u4f7f\u7528\u8005\u7684\u89d2\u5ea6\u601d\u8003\uff0c\u65e0\u6cd5\u88ab\u4f7f\u7528\u7684\u6c89\u6dc0\u662f\u6ca1\u6709\u4ef7\u503c\u7684\u3002\u800c\u4e14\u7406\u60f3\u7684\u77e5\u8bc6\u5e93\u5e94\u8be5\u662f\u4f4e\u83b7\u53d6\u95e8\u69db\uff0c \u751a\u81f3\u96f6\u83b7\u53d6\u95e8\u69db\u7684\uff0c\u5e94\u8be5\u662f\u5f00\u653e\u7684\u3002\u77e5\u8bc6\u5e93\u4e2d\u7684\u77e5\u8bc6\u5e94\u8be5\u5584\u7528\u4e92\u8054\u7f51\u6e20\u9053\u3001\u5584\u7528\u591a\u5a92\u4f53\u6280\u672f\uff0c\u77e5\u8bc6\u5f00\u53d1\u66f4\u8981\u4e13\u6ce8\u77e5\u8bc6\u7684\u6709\u6548\u548c\u9ad8\u6548\u4f20\u9012\u3002 \u300a\u6570\u636e\u901a\u4fe1\u4e0e\u7f51\u7edc \u77e5\u8bc6\u5730\u56fe\u300b\u662f\u7b14\u8005\u5728\u6570\u636e\u901a\u4fe1\u9886\u57df\u7684\u77e5\u8bc6\u6c89\u6dc0\uff0c\u8be5\u77e5\u8bc6\u5730\u56fe\u4ece\u96f6\u57fa\u7840\u5f00\u59cb\uff0c\u5faa\u5e8f\u6e10\u8fdb\u3001\u4f53\u7cfb\u5316\u5730\u8bb2\u8ff0\u5173\u4e8e\u6570\u901a\u7684\u5404\u4e2a\u77e5\u8bc6\u6a21\u5757\u3002\u56db\u4e2a\u5185\u5bb9\u9635\u5217\u2014\u2014\u57f9\u8bad\u89c6\u9891\u3001\u914d\u5957PPT\u3001\u6280\u672f\u6587\u6863\uff08\u624b\u518c\uff09\u4ee5\u53ca\u5b9e\u9a8c\u6848\u4f8b\u6784\u6210\u4e86\u77e5\u8bc6\u5730\u56fe\u7684\u6574\u4f53\u6846\u67b6\uff0c\u642d\u914d\u534e\u4e3a\u5b9e\u9a8c\u6a21\u62df\u5e73\u53f0\uff08\u534e\u4e3a\u5b98\u65b9\u6570\u901a\u6a21\u62df\u5668eNSP\uff09\uff0c\u5c06\u7406\u8bba\u4e0e\u5b9e\u8df5\u7d27\u5bc6\u7ed3\u5408\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u4e3a\u4e86\u65b9\u4fbf\u5927\u5bb6\u96c6\u4e2d\u67e5\u9605\uff0c\u7b14\u8005\u8fd8\u5c06\u77e5\u8bc6\u5730\u56fe\u4e2d\u6240\u6709\u7684\u539f\u521b\u6280\u672f\u6587\u7ae0\u6574\u5408\u6210\u4e00\u672c\u6570\u901a\u77e5\u8bc6\u5b9d\u5178\u2014\u2014\u300a\u6570\u901a\u77e5\u8bc6\u5b9d\u5178\u300b\uff0c\u4e5f\u5c31\u662f\u60a8\u6b63\u5728\u9605\u8bfb\u7684\u8fd9\u4efd\u6587\u6863\u3002 \u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u5148\u770b\u89c6\u9891\uff0c\u518d\u9605\u8bfb\u914d\u5957PPT\u548c\u77e5\u8bc6\u5b9d\u5178\u3001\u4ea7\u54c1\u6587\u6863\uff0c\u7136\u540e\u4f7f\u7528\u6a21\u62df\u73af\u5883\u8fdb\u884c\u5b9e\u9a8c\u2014\u2014\u901a\u8fc7\u672c\u77e5\u8bc6\u5730\u56fe\uff0c\u4efb\u4f55\u4e00\u4e2a\u96f6\u57fa\u7840\u7684\u4eba\u90fd\u80fd\u591f\u8fc5\u901f\u5730\u638c\u63e1\u5404\u79cd\u6570\u901a\u6280\u672f\u53ca\u534f\u8bae\uff0c\u5e76\u4e14\u5e94\u7528\u5230\u5b9e\u9645\u4e1a\u52a1\u4e2d\u3002\u5373\u4f7f\u662f\u4ee5\u9879\u76ee\u4e3a\u89e6\u53d1\u7684\u6309\u9700\u5b66\u4e60\uff0c\u4e5f\u80fd\u5728\u5730\u56fe\u4e2d\u5feb\u901f\u5b9a\u4f4d\u5230\u6240\u9700\u7684\u6280\u672f\u6216\u534f\u8bae\u5e76\u83b7\u53d6\u76f8\u5173\u7684\u77e5\u8bc6\u5185\u5bb9\u3002 \u5173\u4e8e\u672c\u77e5\u8bc6\u5730\u56fe\u7684\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5728\u534e\u4e3a3MS Hi\u793e\u533a\u641c\u7d22\uff1a\u201c\u6570\u636e\u901a\u4fe1\u4e0e\u7f51\u7edc \u77e5\u8bc6\u5730\u56fe\u201d\uff0c\u6216\u8005\u8bbf\u95ee\u672c\u4eba3MS HI\u793e\u533a\u7684\u4e2a\u4eba\u4e3b\u9875\u3002 \u6731 \u4ed5 \u803f 261992 (2015-10-08) \u7f51\u7edc\u57fa\u7840 \u00b6 \u5229\u7528 TCP/IP \u6a21\u578b\u7406\u89e3\u6570\u636e\u901a\u4fe1\u8fc7\u7a0b \u56de\u987eTCP/IP\u6a21\u578b \u00b6 \u4ec0\u4e48\u662f\u6570\u636e\u7f51\u7edc\uff08Data Network\uff09\uff1f\u7b80\u5355\u5730\u8bf4\uff0c\u6570\u636e\u7f51\u7edc\u5c31\u662f\u4e00\u4e2a\u7531\u5404\u79cd\u8bbe\u5907\u642d\u5efa\u8d77\u6765\u7684\u4e00\u5f20\u7f51\uff0c\u5e38\u89c1\u7684\u8bbe\u5907\u6709\uff1a\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u3001\u9632\u706b\u5899\u3001\u8d1f\u8f7d\u5747\u8861\u5668\u3001IDS/IPS\u3001VPN\u670d\u52a1\u5668\u7b49\u7b49\u3002\u6570\u636e\u7f51\u7edc\u6700\u57fa\u672c\u7684\u529f\u80fd\u5c31\u662f\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u7684\u6570\u636e\u4e92\u901a\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u901a\u4fe1\u3002 TCP/IP\u6a21\u578b\u662f\u5f53\u4ecaIP\u7f51\u7edc\u7684\u57fa\u7840\uff08\u4e5f\u88ab\u79f0\u4e3aDoD\u6a21\u578b\uff0c\u4e0a\u56fe\u6211\u8d34\u51fa\u7684\u5e76\u4e0d\u662f\u6807\u51c6\u7684TCP/IP\u6a21\u578b\uff0c\u4e3a\u4e86\u65b9\u4fbf\u4e0b\u6587\u7684\u9610\u8ff0\uff0c\u8fd9\u91cc\u7ed9\u51fa\u7684\u662f\u4e00\u4e2aTCP/IP\u6a21\u578b\u4e0eOSI\u6a21\u578b\u7684\u5bf9\u7b49\u6a21\u578b\uff09\uff0c\u5b83\u5c06\u6574\u4e2a\u6570\u636e\u901a\u4fe1\u7684\u4efb\u52a1\u5212\u5206\u6210\u4e0d\u540c\u7684\u529f\u80fd\u5c42\u6b21\uff08Layer\uff09,\u6bcf\u4e00\u4e2a\u5c42\u6b21\u6709\u5176\u6240\u5b9a\u4e49\u7684\u529f\u80fd\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684\u534f\u8bae\u3002\u6253\u4e2a\u6bd4\u65b9\uff0c\u5bf9\u4e8e\u4e00\u5bb6\u516c\u53f8\u800c\u8a00\uff0c\u4e00\u7b14\u4e1a\u52a1\u9700\u8981\u5404\u4e2a\u90e8\u95e8\u76f8\u4e92\u534f\u540c\u5de5\u4f5c\u624d\u80fd\u5b8c\u6210\uff0c\u90e8\u95e8\u4e0e\u90e8\u95e8\u4e4b\u95f4\u65e2\u76f8\u4e92\u72ec\u7acb\uff0c\u4f46\u662f\u53c8\u9700\u8981\u76f8\u4e92\u914d\u5408\uff0c\u53ef\u4ee5\u501f\u7528\u8fd9\u79cd\u601d\u8def\u6765\u7406\u89e3TCP/IP\u53c2\u8003\u6a21\u578b\u3002\u5206\u5c42\u53c2\u8003\u6a21\u578b\u7684\u8bbe\u8ba1\u662f\u975e\u5e38\u7ecf\u5178\u7684\u7406\u5ff5\uff1a \u5c42\u6b21\u5316\u7684\u6a21\u578b\u8bbe\u8ba1\u5c06\u7f51\u7edc\u7684\u901a\u4fe1\u8fc7\u7a0b\u5212\u5206\u4e3a\u66f4\u5c0f\u3001\u66f4\u7b80\u5355\u7684\u90e8\u4ef6\uff0c\u56e0\u6b64\u6709\u52a9\u4e8e\u5404\u4e2a\u90e8\u4ef6\u7684\u72ec\u7acb\u5f00\u53d1\u3001\u8bbe\u8ba1\u548c\u6545\u969c\u6392\u9664\uff1b \u5c42\u4e0e\u5c42\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0c\u53c8\u4e92\u76f8\u4f9d\u8d56\uff0c\u6bcf\u4e00\u5c42\u90fd\u6709\u8be5\u5c42\u7684\u529f\u80fd\u3001\u4ee5\u53ca\u5b9a\u4e49\u7684\u534f\u8bae\u6807\u51c6\u3002\u5c42\u4e0e\u5c42\u4e4b\u95f4\u76f8 \u4e92\u914d\u5408\uff0c\u5171\u540c\u5b8c\u6210\u6570\u636e\u901a\u4fe1\u7684\u8fc7\u7a0b\uff1b \u901a\u8fc7\u7ec4\u4ef6\u7684\u6807\u51c6\u5316\uff0c\u5141\u8bb8\u591a\u4e2a\u4f9b\u5e94\u5546\u8fdb\u884c\u5f00\u53d1\uff1b \u901a\u8fc7\u5b9a\u4e49\u5728\u6a21\u578b\u7684\u6bcf\u4e00\u5c42\u5b9e\u73b0\u4ec0\u4e48\u529f\u80fd\uff0c\u9f13\u52b1\u4ea7\u4e1a\u7684\u6807\u51c6\u5316\uff1b \u5141\u8bb8\u5404\u79cd\u7c7b\u578b\u7684\u7f51\u7edc\u786c\u4ef6\u548c\u8f6f\u4ef6\u76f8\u4e92\u901a\u4fe1\u3002 \u4e0a\u9762\u8fd9\u5f20\u56fe\u663e\u793a\u7684\u5c31\u662f\u6bcf\u4e2a\u5c42\u6b21\u5bf9\u5e94\u7684\u4ee3\u8868\u6027\u534f\u8bae\u3002 \u7406\u89e3\u6570\u636e\u901a\u4fe1\u8fc7\u7a0b \u00b6 \u6839\u636e\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u62d3\u6251\uff08Topology\uff09\uff0c\u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0bPC\u8bbf\u95eeServer\u7684WEB\u670d\u52a1\u7684\u8be6\u7ec6\u901a\u4fe1\u8fc7\u7a0b\u3002\u5728\u9610\u8ff0\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u805a\u7126\u7684\u91cd\u70b9\u662f\u5229\u7528TCP/IP\u53c2\u8003\u6a21\u578b\u7406\u89e3\u6570\u636e\u901a\u4fe1\u8fc7\u7a0b\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u5ffd\u7565\u90e8\u5206\u6280\u672f\u7ec6\u8282\uff0c\u4f8b\u5982DNS\u3001TCP\u4e09\u6b21\u63e1\u624b\u7b49\uff0c\u8fd9\u4e9b\u6280\u672f\u7ec6\u8282\u8fd9\u91cc\u6682\u4e0d\u505a\u8ba8\u8bba\u3002\u73b0\u5728\u4f60\u8981\u6362\u4e00\u79cd\u89c6\u91ce\u6765\u770b\u5f85\u8fd9\u4e2a \u201c\u4e16\u754c\u201d\u4e86\uff0c\u60f3\u8c61\u4e00\u4e0b\u4e0a\u56fe\u6240\u793a\u7684\u7ec8\u7aef\u4ee5\u53ca\u8def\u7531\u5668\u90fd\u662f\u4e00\u4e2a\u4e2a\u7684\u201cTCP/IP\u901a\u4fe1\u6a21\u578b\u201d\uff0c\u4e8b\u5b9e\u4e0a\uff0c\u6574\u4e2a\u8fc7\u7a0b\u5728\u5b8f\u89c2\u5c42\u9762\u4f53\u73b0\u5982\u4e0b\uff1a \u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u7684\u6765\u5206\u6790\uff1a PC\u7684\u7528\u6237\u5728WEB\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95eeServer\u7684WEB\u670d\u52a1\uff08\u8fd9\u91cc\u6211\u4eec\u6682\u4e14\u4e0d\u53bb\u5173\u6ce8HTTP\u4ea4\u4e92\u3001DNS\u4ea4\u4e92\u7b49\u7ec6\u8282\uff0c\u91cd\u70b9\u770b\u901a\u4fe1\u8fc7\u7a0b\uff09\uff0cPC\u7684\u8fd9\u6b21\u64cd\u4f5c\u5c06\u89e6\u53d1HTTP\u5e94\u7528\u4e3a\u7528\u6237\u6784\u9020\u4e00\u4e2a\u5e94\u7528\u6570\u636e\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002\u5f53\u7136\u8fd9\u4e2a\u6570\u636e\u6700\u7ec8\u8981\u4f20\u9012\u5230Server\u5e76\u201c\u9012\u4ea4\u201d\u5230Server\u7684HTTP\u5e94\u7528\u6765\u5904\u7406\uff0c\u4f46\u662fHTTP\u4e0d\u5173\u5fc3\u6570\u636e\u600e\u4e48\u4f20\u3001\u600e\u4e48\u5bfb\u5740\u3001\u600e\u4e48\u505a\u5dee\u9519\u6821\u9a8c\u7b49\u7b49\uff0c\u8fd9\u4e9b\u4e8b\u60c5\u4ea4\u7531\u4e13\u95e8\u7684\u5c42\u6b21\u6765\u5b8c\u6210\uff0c\u6240\u4ee5HTTP\u5e94\u7528\u6570\u636e\u8fd8\u9700\u7ecf\u8fc7\u4e00\u756a\u201c\u6298\u817e\u201d\u624d\u80fd\u4ecePC\u4f20\u5230Server\uff0cOK GO\u3002 \u7531\u4e8eHTTP\u57fa\u4e8eTCP\uff0c\u56e0\u6b64\u8fd9\u4e2a\u5e94\u7528\u6570\u636e\u4ea4\u7531\u53c2\u8003\u6a21\u578b\u4e2d\u7684\u4e3b\u673a\u5230\u4e3b\u673a\u5c42\uff08\u7b2c4\u5c42\uff09\u8fdb\u4e00\u6b65\u5904\u7406\u3002\u5728\u8be5\u5c42\uff0c\u4e0a\u5c42HTTP\u5e94\u7528\u7684\u6570\u636e\u88ab\u5c01\u88c5\u4e00\u4e2aTCP\u7684\u5934\u90e8\uff08\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\u5957\u4e86\u4e00\u4e2aTCP\u7684\u4fe1\u5c01\uff09\uff0c \u5728TCP\u5934\u90e8\u4e2d\u6211\u4eec\u91cd\u70b9\u5173\u6ce8\u4e24\u4e2a\u5b57\u6bb5\uff08\u4fe1\u5c01\u4e0a\u5199\u7684\u4e1c\u897f\uff09\uff0c\u4e00\u4e2a\u662f\u6e90\u7aef\u53e3\u53f7\uff0c\u53e6\u4e00\u4e2a\u662f\u76ee\u7684\u7aef\u53e3\u53f7\uff0c \u6e90\u7aef\u53e3\u53f7\u4e3a\u968f\u673a\u4ea7\u751f\u7684\u7aef\u53e3\u53f7\uff08\u662fPC\u672c\u5730\u8bbe\u7f6e\u7684\u3001\u4e13\u95e8\u7528\u4e8e\u672c\u6b21\u4f1a\u8bdd\u7684\u7aef\u53e3\uff09\uff0c\u76ee\u7684\u7aef\u53e3\u53f7\u4e3a80 \uff08HTTP\u670d\u52a1\u5bf9\u5e94\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\u662f80\uff09\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u7136\u540e\u8fd9\u4e2a\u6570\u636e\u6bb5\uff08Segment\uff09\u88ab\u4ea4\u7ed9\u4e0b\u4e00\u4e2a\u5c42\u5904\u7406\u3002 \u4e0b\u4e00\u5c42\u662f\u7f51\u7edc\u5c42\uff0c\u4e5f\u53eb\u56e0\u7279\u7f51\u5c42\uff08\u7b2c3\u5c42\uff09\uff0c\u5904\u4e8e\u8fd9\u4e2a\u5c42\u7684IP\u534f\u8bae\u4e3a\u8fd9\u4e2a\u4e0a\u5c42\u4e0b\u6765\u7684\u6570\u636e\u5c01\u88c5\u4e00\u4e2a IP\u5934\u90e8\uff08\u5728\u4e4b\u524d\u7684\u57fa\u7840\u4e0a\u53c8\u5957\u4e86\u4e00\u4e2a\u4fe1\u5c01\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0c\u4ee5\u4fbf\u8be5\u6570\u636e\u80fd\u591f\u5728IP\u7f51\u7edc\u4e2d\u88ab\u7f51\u7edc\u8bbe\u5907 \u4ece\u6e90\u8f6c\u53d1\uff08\u8def\u7531\uff09\u5230\u76ee\u7684\u5730\u3002\u5728IP\u5934\u5f53\u4e2d\u6211\u4eec\u91cd\u70b9\u5173\u6ce8\u6e90IP\u5730\u5740\u3001\u76ee\u7684IP\u5730\u5740\u3001\u534f\u8bae\u53f7\u8fd9\u4e09\u4e2a\u5b57\u6bb5\u3002 \u5176\u4e2d\u6e90\u5730\u5740\u586b\u5199\u7684\u662fPC\u81ea\u5df1\u7684IP\u5730\u5740192.168.1.1\uff0c\u76ee\u7684\u5730\u5740\u5b58\u653e\u7684\u662fServer\u7684IP\u5730\u5740192.168.2.1\uff0c \u800c\u534f\u8bae\u53f7\u5b57\u6bb5\u5219\u5b58\u653e\u7684\u662f\u503c6\uff0c\u8fd9\u4e2a\u503c\u662f\u4e00\u4e2a\u4f17\u6240\u5468\u77e5\uff08Well-Known\uff09\uff0c\u4e5f\u5c31\u662f\u884c\u4e1a\u7ea6\u5b9a\u7684\u503c\uff0c\u8be5 \u503c\u5bf9\u5e94\u4e0a\u5c42\u534f\u8bae\u7c7b\u578bTCP\uff0c\u8868\u793a\u8fd9\u4e2aIP\u5934\u540e\u9762\u5c01\u88c5\u7684\u4e0a\u5c42\u534f\u8bae\u4e3aTCP\uff08\u5f62\u8c61\u70b9\u7684\u63cf\u8ff0\u662f\uff0c\u534f\u8bae\u5b57\u6bb5 \u7528\u4e8e\u8868\u793a\u8fd9\u4e2aIP\u4fe1\u5c01\u91cc\u88c5\u7684\u662f\u4e00\u4e2aTCP\u7684\u5185\u5bb9\uff09\u3002\u641e\u5b9a\u4e4b\u540e\uff0c\u8fd9\u4e2a\u6570\u636e\u88ab\u4ea4\u7ed9\u4e0b\u4e00\u5c42\u5904\u7406\u3002 \u4e3a\u4e86\u8ba9\u8fd9\u4e2aIP\u6570\u636e\u5305\u80fd\u591f\u5728\u94fe\u8def\u4e0a\u4f20\u8f93\uff08\u4ece\u94fe\u8def\u7684\u4e00\u4e2a\u8282\u70b9\u4f20\u5230\u53e6\u4e00\u8282\u70b9\uff09\uff0c\u8fd8\u8981\u7ed9\u6570\u636e\u5305\u5c01\u88c5\u4e0a\u4e00\u4e2a\u6570\u636e\u94fe\u8def\u5c42\uff08\u7b2c2\u5c42\uff09\u7684\u5934\u90e8\uff0c\u4ee5\u4fbf\u8be5\u6570\u636e\u80fd\u591f\u5728\u94fe\u8def\u4e0a\u88ab\u987a\u5229\u4f20\u8f93\u5230\u5bf9\u7aef\u3002\u7531\u4e8ePC\u4e0eR1\u4e4b\u95f4\u4e3a\u4ee5\u592a\u7f51\u94fe\u8def\uff0c\u56e0\u6b64\u4e0a\u5c42\u6765\u7684IP\u6570\u636e\u5305\u88ab\u5c01\u88c5\u4e00\u4e2a\u4ee5\u592a\u7f51\u7684\u6570\u636e\u5e27\u5934\uff08\u518d\u589e\u52a0\u4e00\u4e2a\u4fe1\u5c01\uff09\u3002\u8fd9\u4e2a\u5e27\u5934\u4e2d\u5199\u5165\u7684\u6e90MAC\u5730\u5740\u4e3aPC \u7684\u7f51\u5361MAC\uff0c \u90a3\u4e48\u76ee\u7684MAC\u5462\uff1f PC \u77e5\u9053\uff0c \u6570\u636e\u7684\u76ee\u7684\u5730\u662f 192.168.2.1\u8fd9\u4e2aIP\uff0c\u800c\u672c\u673aIP\u662f192.168.1.1/24\uff0c\u663e\u7136\uff0c\u76ee\u7684\u5730\u4e0e\u81ea\u5df1\u5e76\u4e0d\u5728\u540c\u4e00\u4e2aIP\u7f51\u6bb5\uff0c\u56e0\u6b64\u9700\u8981\u6c42\u52a9\u4e8e\u81ea\u5df1\u7684\u9ed8\u8ba4\u7f51\u5173\uff0c\u8ba9\u7f51\u5173\u6765\u5e2e\u52a9\u81ea\u5df1\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u51fa\u53bb\u3002\u90a3\u9996\u5148\u5f97\u628a\u6570\u636e\u8f6c\u53d1\u5230\u7f51\u5173\u5427\uff1f\u56e0\u6b64\u76ee\u7684MAC\u5730\u5740\u586b\u5199\u7684\u5c31\u662f\u7f51\u5173192.168.1.254\u5bf9\u5e94\u7684MAC\u5730\u5740\u3002\u4f46\u662f\u521d\u59cb\u60c5\u51b5\u4e0b\uff0cPC\u53ef \u80fd\u5e76\u4e0d\u77e5\u6653192.168.1.254\u5bf9\u5e94\u7684MAC\u5730\u5740\uff0c\u6240\u4ee5\uff0c\u5b83\u4f1a\u53d1\u9001\u4e00\u4e2aARP\u5e7f\u64ad\u53bb\u8bf7\u6c42192.168.1.254\u7684 MAC\uff0cR1\u7684GE0/0/0\u53e3\u4f1a\u6536\u5230\u8fd9\u4e2aARP\u8bf7\u6c42\u5e76\u4e14\u56de\u9001ARP\u54cd\u5e94\u62a5\u6587\u3002\u5982\u6b64\u4e00\u6765PC\u5c31\u77e5\u9053\u4e86\u7f51\u5173\u7684 MAC\uff0c\u5b83\u5c06\u7f51\u5173MAC 0018-0011-0001\u586b\u5199\u5728\u4ee5\u592a\u7f51\u6570\u636e\u5e27\u5934\u90e8\u7684\u76ee\u7684MAC\u5730\u5740\u5b57\u6bb5\u4e2d\u3002\u53e6\u5916\uff0c \u4ee5\u592a\u7f51\u6570\u636e\u5e27\u5934\u7684\u7c7b\u578b\u5b57\u6bb5\u5199\u4e0a0x0800\u8fd9\u4e2a\u503c\uff0c\u8868\u793a\u8fd9\u4e2a\u6570\u636e\u5e27\u5934\u540e\u9762\u5c01\u88c5\u7684\u662f\u4e00\u4e2aIP\u5305\u3002\u8d39\u4e86\u597d\u5927\u52b2\u513f\uff0c\u8fd9\u4e2a\u6570\u636e\u5e27\uff08Frame\uff09\u7ec8\u4e8e\u641e\u5b9a\u4e86\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u4e8b\u5b9e\u4e0a\u5728\u7269\u7406\u94fe\u8def\u4e2d\u4f20\u8f93\u7684\u662f\u6bd4\u7279\uff08bit\uff09\u6d41\uff0c\u6216\u8005\u7535\u6c14\u5316\u7684\u8109\u51b2\u578b\u53f7\uff0c\u53ea\u4e0d\u8fc7\u4e3a\u4e86\u65b9\u4fbf\u7406\u89e3\u548c\u66f4\u52a0\u76f4\u89c2\u5730\u5206\u6790\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u4ee5IP\u5305\u6216\u8005\u6570\u636e\u5e27\u7684\u5f62\u5f0f\u6765\u9610\u8ff0\u901a\u4fe1\u8fc7\u7a0b\u3002\u6240\u4ee5\u4ece\u7269\u7406\u4e0a\u8bf4\uff0c\u6700\u7ec8\u8fd9\u4e2a\u4ee5\u592a\u7f51\u6570\u636e\u5e27\u53d8\u6210\u4e86\u4e00\u5806\u7684101110101\u4ece\u7f51\u7ebf\u4f20\u5230\u4e86\u8def\u7531\u5668R1\u4e0a\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8def\u7531\u5668R1\u5728\u6536\u5230\u8fd9\u4e00\u4e32\u76841010\u2026\u540e\uff0c\u5148\u5c06\u4ed6\u4eec\u8fd8\u539f\u6210\u6570\u636e\u5e27\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002\u7136\u540e\u4f1a\u91c7\u7528\u76f8\u5e94\u7684\u673a\u5236\u68c0\u67e5\u4e00\u4e0b\u6570\u636e\u5e27\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u662f\u5426\u6709\u635f\u574f\uff0c\u5982\u679c\u6ca1\u6709\u635f\u574f\uff0c\u90a3\u4e48\u5c31\u7785\u7785\u6570\u636e\u5e27\u5934\u90e8\u4e2d\u7684\u76ee\u7684 MAC\u5730\u5740\uff0c\u770b\u770b\u76ee\u7684MAC\u5730\u5740\u662f\u4e0d\u662f\u6211\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\u7684GE0/0/0\u63a5\u53e3\u7684MAC\uff0c\u7ed3\u679c\u53d1\u73b0\u6b63\u597d\u662f\u81ea\u5df1\u7684MAC\uff0c\u90a3\u4e48\u5b83\u4f1a\u5f88\u9ad8\u5174\uff0c\u89c9\u5f97\u8fd9\u4e2a\u6570\u636e\u5e27\u662f\u7ed9\u5b83\u7684\uff0c\u5b83\u67e5\u770b\u6570\u636e\u5e27\u5934\u90e8\u7684\u7c7b\u578b\u5b57\u6bb5\uff0c\u53d1\u73b0\u662f0x0800\uff0c\u4e8e\u662f\u5b83\u77e5\u9053\u91cc\u5934\u88c5\u7684\u662f\u4e00\u4e2aIP\u5305\uff0c\u63a5\u7740\u5b83\u5c06\u4ee5\u592a\u7f51\u5e27\u5934\u5265\u53bb\uff0c\u6216\u8005\u8bf4\u89e3\u5c01\u88c5\uff0c\u7136\u540e\u5c06\u91cc\u9762\u7684\u6570\u636e\u79fb\u4ea4\u7ed9\u4e0a\u5c42\u7684IP\u534f\u8bae\u7ee7\u7eed\u5904\u7406\u3002 \u73b0\u5728R1\u7684IP\u534f\u8bae\u6808\u63a5\u7740\u5904\u7406\u8fd9\u4e2a\u62a5\u6587\u3002\u5b83\u4f1a\u5148\u6821\u9a8c\u4e00\u4e0b\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2dIP\u62a5\u6587\u6709\u6ca1\u6709\u53d7\u635f\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5b83\u5c31\u67e5\u770bIP\u5934\u4e2d\u7684\u76ee\u7684IP\u5730\u5740\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0c\u7ed3\u679c\u53d1\u73b0\u76ee\u7684IP\u5730\u5740\u4e3a192.168.2.1\uff0c\u5e76\u4e0d\u662f\u81ea\u5df1\u7684IP\u5730\u5740\u2014\u2014\u539f\u6765\u8fd9\u4e2a\u6570\u636e\u5305\u662f\u53d1\u7ed9\u522b\u4eba\u7684\uff0c\u4e8e\u662f\u5b83\u5f00\u59cb\u62ff\u7740\u76ee\u7684\u5730\u5740192.168.2.1\u5230\u81ea\u5df1\u7684\u5730\u56fe\uff08\u8def\u7531\u8868\uff09\u91cc\u53bb\u67e5\u8be2\uff0c\u770b\u770b\u6709\u6ca1\u6709\u5230192.168.2.1\u8fd9\u4e2a\u76ee\u7684\u5730\u7684\u8def\u5f84\uff0c\u7ed3\u679c\u53d1\u73b0\u6709\uff0c\u5e76\u4e14\u8fd9\u4e2a\u8def\u7531\u6761\u76ee\u6307\u793a\u5b83\u628a\u6570\u636e\u5305\u4ece\u4eceGE0/0/1\u53e3\u9001\u51fa\u53bb\uff0c\u5e76\u4ea4\u7ed9192.168.12.2\u8fd9\u4e2a\u4e0b\u4e00\u8df3IP\u5730\u5740\u3002\u4e8e\u662f\u5b83\u4e0d\u518d\u7ee7\u7eed\u62c6\u5f00IP\u5934\u770b\u91cc\u5934\u7684\u4e1c\u4e1c\u4e86\uff0c\u800c\u662f\u4e56\u4e56\u7684\u5c06IP\u6570\u636e\u5305\u5f80\u4e0b\u4ea4\u8fd8\u7ed9\u6570\u636e\u94fe\u8def\u5c42\u53bb\u5904\u7406\u3002 \u73b0\u5728\u6570\u636e\u94fe\u8def\u5c42\u7ee7\u7eed\u5904\u7406\u4e0a\u5c42\u4e0b\u6765\u7684IP\u5305\uff0c\u5b83\u4e3a\u8fd9\u4e2aIP\u5305\u5c01\u88c5\u4e0a\u4e00\u4e2a\u65b0\u7684\u4ee5\u592a\u7f51\u5e27\u5934\uff0c\u5e27\u5934\u4e2d\u6e90 MAC\u5730\u5740\u4e3aR1\u7684GE0/0/1\u53e3\u7684MAC\uff1a0018-0011-0002\uff0c\u76ee\u7684MAC\u662f\u8fd9\u4e2a\u6570\u636e\u5305\u5373\u5c06\u4ea4\u7ed9\u7684\u4e0b\u4e00\u8df3\u8def\u7531\u5668192.168.12.2\u5bf9\u5e94\u7684MAC\uff0c\u5f53\u7136\u521d\u59cb\u60c5\u51b5\u4e0bR1\u662f\u4e0d\u77e5\u9053\u8fd9\u4e2aMAC\u7684\uff0c\u56e0\u6b64\u53c8\u662f\u4e00\u8f6eARP\u8bf7\u6c42\u5e7f\u64ad\u53ca\u56de\u5e94\u8fc7\u7a0b\u5e76\u6700\u7ec8\u62ff\u5230\u8fd9\u4e2aMAC\uff1a0018-0022-0001\uff0c\u4e8e\u662f\u5b83\u5c06\u8fd9\u4e2a\u503c\u586b\u5199\u5728\u76ee\u7684MAC\u5b57\u6bb5\u4e2d\u3002\u5b8c\u6210\u4e86\u65b0\u7684\u6570\u636e\u5e27\u5c01\u88c5\u540e\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0cR1\u628a\u8fd9\u4e2a\u6570\u636e\u5e27\u53d8\u62101010101\u2026\u901a\u8fc7\u7535\u6c14\u4fe1\u53f7\u4f20\u9012\u7ed9R2\u3002 R2\u6536\u5230\u8fd9\u4e9b10101\u2026\u540e\uff0c\u540c\u6837\u7684\uff0c\u8fd8\u662f\u5148\u5c06\u5176\u8fd8\u539f\u6210\u5e27\uff0c\u7136\u540e\u67e5\u770b\u5e27\u5934\uff0c\u53d1\u73b0\u76ee\u7684MAC\u586b\u5199\u7684\u5c31\u662f\u81ea\u5df1\u63a5\u53e3\u7684MAC\uff0c\u5e76\u4e14\u5e27\u5934\u4e2d\u7c7b\u578b\u5b57\u6bb5\u5199\u7684\u662f0x0800\uff08\u6307\u793a\u4e0a\u5c42\u534f\u8bae\u662fIP\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u5e27\u5934\u5185\u5c01\u88c5\u7684\u662f\u4e00\u4e2aIP\u5305\uff09\uff0c\u4e8e\u662f\u5c06\u6570\u636e\u5e27\u5934\u5265\u53bb\uff0c\u5c06\u91cc\u5934\u7684IP\u6570\u636e\u5305\u4ea4\u7ed9IP\u534f\u8bae\u53bb\u5904\u7406\u3002 \u800cIP\u534f\u8bae\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u53d1\u73b0\uff0c\u76ee\u7684IP\u5730\u5740\u5e76\u975e\u672c\u8def\u7531\u5668\u7684IP\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0c\u4e8e\u662f\u5b83\u77e5\u9053\u8fd9\u4e2a\u6570\u636e\u5305\u4e0d\u662f\u53d1\u9001\u7ed9\u81ea\u5df1\u7684\uff0c\u5b83\u62ff\u7740\u76ee\u7684IP\u5730\u5740192.168.2.1\u5728\u81ea\u5df1\u8def\u7531\u8868\u4e2d\u67e5\u8be2\uff0c\u7ed3\u679c\u53d1\u73b0\uff0cR2\u7684 GE0/0/1\u53e3\u5c31\u8fde\u63a5\u7740192.168.2.0/24\u7f51\u7edc\uff0c\u539f\u6765\u5bb6\u95e8\u53e3\u5c31\u662f\u4e86\uff0c\u4e8e\u662f\u5b83\u5c06\u8fd9\u4e2aIP\u5305\u4ea4\u8fd8\u7ed9\u4e0b\u5c42\u534f\u8bae\u53bb\u5904\u7406\u3002 \u63a5\u4e0b\u6765\u53c8\u662f\u91cd\u65b0\u5c01\u88c5\u6210\u5e27\uff0cR2\u4e3a\u8fd9\u4e2aIP\u5305\u5c01\u88c5\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u5e27\u5934\u90e8\uff0c\u5e27\u5934\u4e2d\uff0c\u6e90MAC\u4e3aR2\u7684 GE0/0/1\u53e3\u7684MAC\uff0c\u76ee\u7684MAC\u4e3a192.168.2.1\u8fd9\u4e2aIP\u5730\u5740\u5bf9\u5e94\u7684MAC\uff0c\u5982\u679cARP\u8868\u91cc\u6709192.168.2.1 \u5bf9\u5e94\u7684MAC\uff0c\u5219\u76f4\u63a5\u5c06MAC\u5730\u5740\u5199\u5165\u76ee\u7684MAC\u4e2d\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u53d1ARP\u8bf7\u6c42\u62a5\u6587\u53bb\u8bf7\u6c42\u8be5\u5730\u5740\u3002\u53e6\u5916\u7c7b\u578b\u5b57\u6bb5\u4f9d\u7136\u586b\u51990x0800\u3002\u6700\u7ec8\uff0cR2\u5c06\u8fd9\u4e2a\u6570\u636e\u5e27\u4f20\u7ed9\u4e86Server\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u597d\u4e0d\u5bb9\u6613\uff0c\u7ec8\u4e8e\u6570\u636e\u5e27\u5230\u8fbe\u4e86Server\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002Server\u9996\u5148\u5c06\u8fd9\u4e9b\u6bd4\u7279\u6d41\u8fd8\u539f\u6210\u5e27\uff0c\u7136\u540e\u505a\u6821\u9a8c\u770b\u770b\u5e27\u662f\u5426\u635f\u574f\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u67e5\u770b\u6570\u636e\u5e27\u7684\u76ee\u7684MAC\uff0c\u7ed3\u679c\u53d1\u73b0\u5c31\u662f\u81ea\u5df1\u7684\u7f51\u5361MAC\uff0c\u4e8e\u662f\u67e5\u770b\u7c7b\u578b\u5b57\u6bb5\uff0c\u53d1\u73b0\u662f0x0800\uff0c\u77e5\u9053\u8fd9\u91cc\u5934\u88c5\u7684\u662f\u4e00\u4e2aIP\u5305\uff0c\u4e8e\u662f\u5c06\u5e27\u5934\u5265\u53bb\uff0c\u5c06\u5185\u5c42\u7684IP\u6570\u636e\u5305\u4ea4\u7ed9IP\u534f\u8bae\u53bb\u5904\u7406\u3002IP\u534f\u8bae\u5c42\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u4e4b\u540e\uff0c\u9996\u5148\u67e5\u770bIP\u5305\u662f\u5426\u635f\u574f\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u67e5\u770b\u76ee\u7684IP\u5730\u5740\uff0c\u53d1\u73b0\u76ee\u7684IP\u5730\u5740\u662f192.168.2.1\u2014\u2014\u6b63\u662f\u81ea\u5df1\u7684\u7f51\u5361IP\uff0c\u4e8e\u662f\u5b83\u77e5\u9053\uff0c\u8fd9\u4e2aIP\u5305\u662f\u53d1\u7ed9\u81ea\u5df1\u7684\uff0c\u56e0\u6b64\u7ee7\u7eed\u67e5\u770bIP\u5305\u5934\u4e2d\u7684\u534f\u8bae\u5b57\u6bb5\uff0c\u53d1\u73b0\u534f\u8bae\u5b57\u6bb5\u586b\u5199\u7684\u662f6\u8fd9\u4e2a\u503c\uff0c\u539f\u6765\u8fd9\u4e2aIP\u5305\u5934\u540e\u9762\u5c01\u88c5\u7684\u662f\u4e00\u4e2aTCP\u7684\u6570\u636e\uff0c\u4e8e\u662f\u5c06IP\u5305\u5934\u5265\u53bb\uff0c\u5c06\u91cc\u5934\u7684TCP\u6570\u636e\u4ea4\u7ed9\u4e0a\u5c42\u7684TCP\u534f\u8bae\u5904\u7406\u3002\u800cTCP\u5728\u5904\u7406\u8fd9\u4e2a\u6570\u636e\u7684\u65f6\u5019\uff0c\u67e5\u770bTCP\u5934\u90e8\u7684\u76ee\u7684\u7aef\u53e3\u53f7\uff0c\u53d1\u73b0\u76ee\u7684\u7aef\u53e3\u53f7\u662f80\uff0c\u800cServer\u672c\u5730\u7684TCP 80\u7aef\u53e3\u662f\u5f00\u653e\u7684\uff0c\u5f00\u653e\u7ed9HTTP\u5e94\u7528\u4e86\uff0c\u56e0\u6b64\u5b83\u5c06TCP\u5934\u90e8\u5265\u53bb\uff0c\u5c06\u91cc\u5934\u7684\u8f7d\u8377\u4ea4\u7ed9HTTP \u5e94\u7528\u3002\u7ec8\u4e8e\uff0c\u4ecePC\u53d1\u9001\u51fa\u6765\u7684HTTP\u5e94\u7528\u6570\u636e\u5230\u8fbe\u4e86\u76ee\u7684\u5730\u2014\u2014Server\u7684HTTP\u5e94\u7528\u7684\u624b\u4e2d\u3002 IP \u5730\u5740\u7684\u6982\u5ff5\u53ca IP \u5b50\u7f51\u5212\u5206 \u4ec0\u4e48\u662fIP\u5730\u5740 \u00b6 IP\u5730\u5740\u5728\u7f51\u7edc\u4e2d\u7528\u4e8e\u6807\u8bc6\u4e00\u4e2a\u8282\u70b9\uff08\u4f8b\u5982\u4e00\u53f0\u4e3b\u673a\uff0c\u6216\u8005\u4e00\u4e2a\u7f51\u7edc\u8bbe\u5907\u7684\u63a5\u53e3\uff09\u3002 \u5728IP\u7f51\u7edc\u4e2d\uff0c\u6570\u636e\u5305\u7684\u5bfb\u5740\u662f\u57fa\u4e8eIP\u5730\u5740\u6765\u8fdb\u884c\u7684\uff0c\u56e0\u6b64IP\u5730\u5740\u5c31\u50cf\u662f\u73b0\u5b9e\u751f\u6d3b\u4e2d\u7684\u5730\u5740\u4e00\u6837\u3002 IP\u534f\u8bae\u5b9a\u4e49\u4e86IP\u6570\u636e\u62a5\u6587\u7684\u683c\u5f0f\uff0c\u4e5f\u5b9a\u4e49\u4e86\u6570\u636e\u62a5\u6587\u5bfb\u5740\u7684\u65b9\u5f0f\u3002\u76ee\u524d\u6211\u4eec\u5728\u4e1a\u52a1\u73af\u5883\u4e2d\u5e38\u89c1\u7684IP \u4e3b\u8981\u662f\u4e24\u4e2a\u7248\u672c\uff1aIPv4\u53caIPv6\uff0c\u800c\u73b0\u9636\u6bb5\u7f51\u7edc\u4e3b\u4f53\u4ecd\u7136\u662fIPv4\uff0c\u4f46\u662f\u5728\u53ef\u9884\u89c1\u7684\u672a\u6765\uff0c\u4f1a\u9010\u6e10\u5411 IPv6\u8fc7\u6e21\u3002\u672c\u7ae0\u53ea\u4ecb\u7ecdIPv4\u3002 \u4e00\u4e2aIPv4\u5730\u5740\u670932bit\u3002\u5f53\u7136\uff0c\u6211\u4eec\u4e0d\u53ef\u80fd\u7528\u4e8c\u8fdb\u5236\u6765\u4e66\u5199IPv4\u5730\u5740\uff0c\u90a3\u662f\u4f4e\u6548\u7684\uff0c\u6211\u4eec\u901a\u5e38\u91c7\u7528\u5341\u8fdb\u5236\u683c\u5f0f\u6765\u4e66\u5199IP\u5730\u5740\uff0c\u4f46\u662f\u8ba1\u7b97\u673a\u5728\u8fdb\u884cIP\u5730\u5740\u7684\u76f8\u5173\u8ba1\u7b97\u5de5\u4f5c\u65f6\uff0c\u65e0\u7591\u662f\u901a\u8fc7\u4e8c\u8fdb\u5236\u7684\u5f62\u5f0f\u6765\u8fdb\u884c\u3002\u56e0\u6b64\u638c\u63e1\u5341\u8fdb\u5236\u5230\u4e8c\u8fdb\u5236\u7684\u6570\u5236\u8f6c\u6362\u662f\u5fc5\u5907\u7684\u6280\u80fd\u3002 IPv4\u5730\u5740\u901a\u5e38\u91c7\u7528\u201c\u70b9\u5206\u5341\u8fdb\u5236\u201d\u8868\u793a\uff0c\u4ee5\u9002\u5e94\u4eba\u7c7b\u7684\u8bfb\u5199\u4e60\u60ef\uff0c\u4f8b\u5982192.168.1.1\u3002 \u5341\u8fdb\u5236\u4e0e\u4e8c\u8fdb\u5236\u7684\u8f6c\u6362 \u00b6 \u201c\u70b9\u5206\u5341\u8fdb\u5236\u201dIP\u5730\u5740\u8868\u73b0\u5f62\u5f0f\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u66f4\u597d\u7684\u4f7f\u7528\u7f51\u7edc\uff0c\u4f46\u7f51\u7edc\u8bbe\u5907\u5728\u5bf9IP\u8fdb\u884c\u8ba1\u7b97\u65f6\u4f7f\u7528\u7684\u662f\u4e8c\u8fdb\u5236\u7684\u64cd\u4f5c\u65b9\u5f0f\uff0c\u4f8b\u5982\uff1a \u4ee5\u4e0b\u662f192\u8fd9\u4e2a\u6570\u5b57\uff0c\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u7b97\u6cd5\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\uff0c\u8fd9\u662f\u57fa\u672c\u6280\u80fd\u3002 IP\u5730\u5740\u7684\u5206\u7c7b \u00b6 IPv4\u5730\u5740\u7684\u957f\u5ea6\u4e3a32bit\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0cIPv4\u5730\u5740\u7684\u7a7a\u95f4\u4ece0.0.0.0 \u4e00\u76f4\u5230 255.255.255.255\uff0c\u8fd9\u4e48\u5e9e\u5927\u7684\u7a7a\u95f4\uff0c\u5982\u679c\u4e0d\u52a0\u4ee5\u533a\u5206\u548c\u89c4\u5212\uff0c\u52bf\u5fc5\u4e0d\u4fbf\u4e8e\u7edf\u7b79\u7ba1\u7406\u3002\u56e0\u6b64\u6211\u4eec\u5bf9\u6574\u4e2aIPv4\u5730\u5740\u7a7a\u95f4\u8fdb\u884c\u7c7b\u522b\u4e0a\u7684\u5212\u5206\uff0c\u4e00\u5171\u5206\u4e3a5\u7c7b\uff1a \u5730\u5740\u7684\u7c7b\u522b\u4e0a\u7684\u533a\u5206\u4e3b\u8981\u4f53\u73b0\u5728\u7b2c\u4e00\u4e2a\u516b\u4f4d\u7ec4\uff08\u4e00\u4e2aIP\u5730\u5740\u62e5\u67094\u4e2a\u516b\u4f4d\u7ec4\uff09\u4e0a\uff1a \u7b2c\u4e00\u4e2a\u516b\u4f4d\u7ec4\u9996\u4f4d\u6052\u5b9a\u4e3a0\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u5f97\u5230\u4e00\u4e2a\u533a\u95f4\uff1a0.0.0.0\u4e00\u76f4\u5230127.255.255.255\u3002\u8fd9\u662fA\u7c7b\u5730\u5740\uff0c\u5176\u4e2d127.0.0.0/8\u4f5c\u4e3a\u672c\u5730\u56de\u73af\u4f7f\u7528\uff0c\u4f8b\u5982\u4f60ping 127.0.0.1\u5b9e\u9645\u4e0aping\u7684\u662f\u672c\u673a\u3002\u6240\u4ee5\u5982\u679c\u770b\u5230\u4e00\u4e2aIP\u5730\u5740\uff0c\u5b83\u7684\u9996\u4e2a\u516b\u4f4d\u7ec4\u6389\u843d\u57281-126\u533a\u95f4\u5185\uff0c\u90a3\u4e48\u8fd9\u662f\u4e00\u4e2aA\u7c7b\u5730\u5740\u3002 2) \u7b2c\u4e00\u4e2a\u516b\u4f4d\u7ec4\u7684\u6700\u9ad8\u4e24\u4f4d\u6052\u5b9a\u4e3a\u4e8c\u8fdb\u5236\u768410\uff0c\u5c31\u5f97\u5230\u4e00\u4e2a\u533a\u95f4\uff1a128.0.0.0-191.255.255.255\uff0c\u8fd9\u662f B\u7c7b\u5730\u5740\u3002 3) \u7b2c\u4e00\u4e2a\u516b\u4f4d\u7ec4\u7684\u6700\u9ad8\u4e09\u4f4d\u6052\u5b9a\u4e3a110\uff0c\u5c31\u5f97\u5230\u4e00\u4e2a\u533a\u95f4\uff1a192.0.0.0 \u2013 223.255.255.255\uff0c\u8fd9\u662fC\u7c7b\u5730\u5740\u3002 4) \u7b2c\u4e00\u4e2a\u516b\u4f4d\u7ec4\u7684\u6700\u9ad8\u56db\u4f4d\u6052\u5b9a\u4e3a1110\uff0c\u5c31\u5f97\u5230\u4e00\u4e2a\u533a\u95f4\uff1a224.0.0.0 \u2013 239.255.255.255\uff0c\u8fd9\u662fD\u7c7b\u5730\u5740\uff0c\u8fd9\u4e2a\u7c7b\u522b\u7684\u5730\u5740\u4e13\u95e8\u7528\u4e8e\u7ec4\u64ad\u3002\u7b14\u8005\u5b89\u6392\u4e86\u4e13\u95e8\u7684\u7ae0\u8282\u4ecb\u7ecd\u7ec4\u64ad\u7684\u6982\u5ff5\u548c\u5e94\u7528\u3002 5) \u5269\u4e0b\u7684\u662fE\u7c7b\u5730\u5740\uff0c\u8fd9\u7c7b\u5730\u5740\u4fdd\u7559\u4f5c\u4e3a\u7814\u7a76\u4f7f\u7528\u3002 \u7f51\u7edc\u63a9\u7801\uff08Network Mask\uff09 \u00b6 \u4e00\u4e2aIP\u5730\u5740\u5305\u542b\u4e24\u90e8\u5206\uff1a\u7f51\u7edc\u90e8\u5206\u4ee5\u53ca\u4e3b\u673a\u90e8\u5206\u3002\u7f51\u7edc\u90e8\u5206\u7528\u4e8e\u8868\u793a\u8fd9\u4e2aIP\u5730\u5740\u6240\u5904\u7684\u201c\u7a7a\u95f4\u201d\uff0c\u5bf9\u4e8e\u4e00\u53f0\u8def\u7531\u5668\u800c\u8a00\uff0c\u5f53\u5b83\u5728\u4e3a\u6570\u636e\u5305\u5bfb\u5740\u65f6\uff0c\u901a\u5e38\u53ea\u5173\u5fc3IP\u5730\u5740\u7684\u7f51\u7edc\u90e8\u5206\u3002\u90a3\u4e48\u5982\u4f55\u533a\u5206\u4e00\u4e2aIP\u5730\u5740\u4e2d\u7684\u7f51\u7edc\u4e0e\u4e3b\u673a\u90e8\u5206\u5462\u2014\u2014\u7f51\u7edc\u63a9\u7801\uff08Network Mask\uff0c\u7b80\u79f0netmask\uff09\u7528\u4e8e\u548cIP\u5730\u5740\u8fdb\u884c\u5bf9\u5e94\uff0c\u4ece\u800c\u6807\u8bc6\u51faIP\u5730\u5740\u4e2d\u7684\u7f51\u7edc\u4e0e\u4e3b\u673a\u90e8\u5206\u3002 \u7f51\u7edc\u63a9\u7801\u4e3a32bit\uff0c\u4e0eIPv4\u5730\u5740\u7684\u4f4d\u6570\u662f\u4e00\u6837\u7684\u3002 \u7f51\u7edc\u63a9\u7801\u5728\u4e8c\u8fdb\u5236\u7684\u8868\u793a\u4e0a\u662f\u4e00\u5806\u8fde\u7eed\u76841\uff0c\u540e\u9762\u63a5\u8fde\u7eed\u76840\u3002 \u7f51\u7edc\u63a9\u7801\u503c\u4e3a1\u7684bit\u5bf9\u5e94IP\u5730\u5740\u4e2d\u7684\u7f51\u7edc\u4f4d\uff1b\u4e3a0\u7684bit\u5bf9\u5e94IP\u5730\u5740\u4e2d\u7684\u4e3b\u673a\u4f4d\uff0c\u4ee5\u6b64\u6765\u8bc6\u522b\u4e00\u4e2aIP \u5730\u5740\u4e2d\u7684\u7f51\u7edc\u4e0e\u4e3b\u673a\u4f4d\uff0c\u5982\u4e0b\u56fe\uff1a \u4e3a\u4e86\u65b9\u4fbf\u4e66\u5199\uff0c\u6211\u4eec\u5f80\u5f80\u4f7f\u7528\u63a9\u7801\u957f\u5ea6\u7684\u65b9\u5f0f\u6765\u8868\u793a\u4e00\u4e2aIP\u5730\u5740+ \u63a9\u7801\u7ec4\u5408\uff0c\u4f8b\u5982192.168.1.1 255.255.255.0 \u7b49\u540c\u4e8e192.168.1.1/24\u3002\u56e0\u4e3a255.255.255.0\u5199\u6210\u4e8c\u8fdb\u5236\u7684\u8bdd\uff0c\u4ece\u5de6\u5f80\u53f3\u6570\u5c31\u662f24\u4e2a1\uff0c \u6240\u4ee5\u6211\u4eec\u4e5f\u8bf4\uff0c\u5b83\u7684\u63a9\u7801\u957f\u5ea6\u4e3a24\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cA\u7c7bIP\u5730\u5740\u7684\u9996\u4e2a\u516b\u4f4d\u7ec4\u4e3a\u7f51\u7edc\u4f4d\uff0c\u5176\u4ed6\u4f4d\u4e3a\u4e3b\u673a\u4f4d\uff0c\u56e0\u6b64A\u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u5c31\u662f 255.0.0.0\uff0c\u6216\u8005\u8bf4\u63a9\u7801\u957f\u5ea6\u4e3a/8\u3002B\u7c7bIP\u5730\u5740\u524d\u4e24\u4e2a\u516b\u4f4d\u7ec4\u4e3a\u7f51\u7edc\u4f4d\uff0c\u540e\u4e24\u4e2a\u516b\u4f4d\u7ec4\u4e3a\u4e3b\u673a\u4f4d\uff0c\u56e0\u6b64B \u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u5c31\u662f255.255.0.0\u6216\u8005\u63a9\u7801\u957f\u5ea6/16\u3002C\u7c7b\u5730\u5740\u7684\u524d\u4e09\u4e2a\u516b\u4f4d\u7ec4\u4e3a\u7f51\u7edc\u4f4d\uff0c\u6700\u540e\u4e00\u4e2a\u516b\u4f4d\u7ec4\u662f\u4e3b\u673a\u4f4d\uff0c\u56e0\u6b64C\u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u5c31\u662f255.255.255.0\uff0c\u6216\u8005\u63a9\u7801\u957f\u5ea6\u4e3a/24\u3002\u4ece\u8fd9\u91cc\u53ef\u4ee5\u770b\u51fa\uff0c \u5982\u679c\u7533\u8bf7\u5230\u4e00\u4e2aA\u7c7b\u5730\u5740\u6bb5123.0.0.0/8\uff0c\u90a3\u4e48\u8fd9\u662f\u4e00\u4e2a\u76f8\u5f53\u5e9e\u5927\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u7a7a\u95f4\u67092\u768424\u6b21\u65b9\u4e2aIP\u5730\u5740\u3002\u76f8\u5bf9\u7684\uff0c\u4e00\u4e2aB\u7c7b\u7684IP\u7f51\u7edc\u5730\u5740\u7a7a\u95f4\u9ed8\u8ba4\u67092\u768416\u6b21\u65b9\u4e2aIP\u5730\u5740\uff0c\u800c\u6bcf\u4e2aC\u7c7b\u5730\u5740\u6bb5\u6240\u62e5\u6709\u7684\u4e3b\u673a\u6570\u91cf\u5219\u66f4\u5c11\u3002 IP\u5730\u5740\u7c7b\u578b \u00b6 \u7f51\u7edc\u5730\u5740 \uff1a\u7528\u4e8e\u6807\u8bc6\u4e00\u4e2a\u7f51\u7edc\uff0c\u76f8\u5f53\u4e8e\u4e00\u4e2a\u201c\u9762\u201d\u7684\u6982\u5ff5\u3002\u7f51\u7edc\u5730\u5740\u662f\u4e00\u4e2aIP\u5730\u5740\u4e2d\u4e3b\u673a\u4f4d\u4e3a\u51680 \u7684\u5730\u5740\u3002\u4f8b\u5982192.168.10.0/24\uff0c\u8be5\u5730\u5740\u6807\u8bc6\u4e86\u4e00\u4e2a\u7f51\u7edc\uff0c\u5728\u8fd9\u4e2a\u7f51\u7edc\u4e2d\uff0c\u5b58\u5728\u591a\u4e2aIP\u5730\u5740\uff0c\u53ef\u7528\u4e8e\u5206\u914d\u7ed9\u5404\u79cd\u8bbe\u5907\uff0c\u4f8b\u5982192.168.10.1\u3001192.168.10.2\u3001\u2026\u3001192.168.10.254\uff0c\u8fd9\u4e9b\u5730\u5740\u90fd\u5c5e\u4e8e 192.168.10.0/24\u7f51\u7edc\u3002\u7f51\u7edc\u5730\u5740\u4e0d\u80fd\u591f\u88ab\u5206\u914d\u7ed9\u4e3b\u673a\u3002 **\u5e7f\u64ad\u5730\u5740\uff1a**\u7528\u4e8e\u5411\u7f51\u7edc\u4e2d\u7684\u6240\u6709\u8282\u70b9\u53d1\u9001\u6570\u636e\u7684\u7279\u6b8a\u5730\u5740\u3002\u5e7f\u64ad\u5730\u5740\u5373\u4e3b\u673a\u90e8\u5206\u7684\u5404\u6bd4\u7279\u4f4d\u5168\u90e8\u4e3a 1\u7684\u5730\u5740\u3002\u4f8b\u5982192.168.10.255/24\uff0c\u8be5\u5730\u5740\u662f192.168.10.0/24\u8fd9\u4e2a\u7f51\u7edc\u7684\u5e7f\u64ad\u5730\u5740\u3002 3) **\u8282\u70b9\u5730\u5740\uff1a**\u53ef\u5206\u914d\u7ed9\u7f51\u7edc\u4e2d\u7684\u8bbe\u5907\u7684\u5730\u5740\u3002\u4f8b\u5982192.168.10.1/24\u81f3192.168.1.254/24\u3002\u7f51\u7edc\u5730\u5740\u53ca\u5e7f\u64ad\u5730\u5740\u662f\u4e0d\u80fd\u591f\u76f4\u63a5\u88ab\u5206\u914d\u7ed9\u67d0\u4e2a\u8bbe\u5907\uff08\u7684\u7f51\u5361\uff09\u6216\u8005\u7f51\u7edc\u8bbe\u5907\uff08\u7684\u63a5\u53e3\uff09\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u6709\u7279\u6b8a\u7528\u9014\u3002 \u4f8b\uff1a192.168.1.0 \u8fd9\u4e2aC\u7c7b\u5730\u5740\u5bf9\u5e94\u7684\u7f51\u7edc\u5730\u5740\u3001\u5e7f\u64ad\u5730\u5740\u53ca\u53ef\u5206\u914dIP\u5730\u5740\u5206\u522b\u662f\uff1f \u4e3a\u4ec0\u4e48\u8981\u5212\u5206\u5b50\u7f51 \u00b6 \u5047\u8bbe\u4f60\u6709\u4e00\u4e2aB\u7c7b\u5730\u5740\u6bb5172.16.0.0/16\uff0c\u7531\u4e8eB\u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u662f255.255.0.0\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u8fd9\u4e2a\u7f51\u7edc\u5185\u67092\u768416\u6b21\u65b9\u4e2aIP\u5730\u5740\uff0c\u800c\u53ef\u5206\u914d\u7ed9\u8bbe\u5907\u4f7f\u7528\u7684IP\u5730\u5740\u5c31\u67092\u768416\u6b21\u65b9-2\u8fd9\u4e48\u591a\u4e2a\uff0c\u4e3a\u4ec0\u4e48\u8981\u51cf\u53bb2\uff1f \u56e0\u4e3a\u5e7f\u64ad\u5730\u5740\u53ca\u7f51\u7edc\u5730\u5740\u662f\u4e0d\u80fd\u5206\u914d\u7ed9\u8bbe\u5907\u4f7f\u7528\u7684\u3002 \u8bbe\u60f3\u4e00\u4e0b\uff0c\u5982\u679c\u4e00\u4e2a\u7f51\u7edc\u4e2d\u771f\u6709\u8fd9\u4e48\u591a\u53f0PC\uff0c\u8fd9\u4e48\u591a\u4e2aIP\u5730\u5740\u5904\u4e8e\u540c\u4e00\u4e2a\u7f51\u6bb5\u4e2d\u3001\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u4e2d\uff0c \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u90a3\u4e48\u4e00\u65e6\u7f51\u7edc\u4e2d\u53d1\u751f\u5e7f\u64ad\uff0c\u5f71\u54cd\u53ef\u5c31\u5927\u4e86\u3002\u518d\u8005\uff0c\u5728\u5b9e\u9645\u7684\u4e1a\u52a1\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u7ed9\u4e00\u4e2a\u4e1a\u52a1\u5355\u5143\uff08\u4f8b\u5982\u4e00\u4e2a\u516c\u53f8\u5185\u7684\u5404\u4e2a\u90e8\u95e8\uff09\uff0c\u5212\u5206\u4e00\u4e2a\u72ec\u7acb\u7684IP\u7f51\u6bb5\uff0c\u4e0d\u540c\u7684\u4e1a\u52a1\u5355\u5143\u4e0d\u540c\u7684IP\u7f51\u6bb5\uff0c \u90a3\u4e48\u5982\u679c\u670910\u4e2a\u4e1a\u52a1\u5355\u5143\uff0c\u6bcf\u4e2a\u4e1a\u52a1\u5355\u5143\u624d\u51e0\u5341\u8fd1\u767e\u53f0\u8bbe\u5907\uff0c\u4e00\u4e2a\u4e1a\u52a1\u5355\u5143\u5c31\u8017\u8d39\u4e00\u4e2aB\u7c7b\u5730\u5740\u6bb5\uff0c\u8fd9\u5c31\u4f1a\u9020\u6210IP\u5730\u5740\u7684\u6d6a\u8d39\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u63d0\u51fa\u5b50\u7f51\u5212\u5206\u7684\u6982\u5ff5\uff0c\u5b50\u7f51\u5212\u5206\u6240\u4f7f\u7528\u7684\u601d\u7ef4\u662fVLSM\uff08Variable Length Subnet Mask\uff0c\u53ef\u53d8\u957f\u5b50\u7f51\u63a9\u7801\uff09\uff0c\u4e8b\u5b9e\u4e0a\u662f\u62ff\u7f51\u7edc\u63a9\u7801\u53d8\u620f\u6cd5\u3002\u5728\u4e0b\u56fe\u4e2d\u6709\u4e94\u4e2a\u7f51\u6bb5\uff0c\u9700\u8981\u4e94\u4e2aIP\u5730\u5740\u6bb5\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2aB\u7c7b\u5730\u5740\uff08172.16.0.0/16\uff09\u53ef\u7528\uff0c\u90a3\u4e48\u901a\u8fc7\u5b50\u7f51\u5212\u5206\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e2aB\u7c7b\u5730\u5740\u5212\u5206\u6210\u4e00\u4e2a\u4e2a\u5c0f\u4e00\u70b9\u7684\u5b50\u7f51\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u4e00\u4e2a\u5e9e\u5927\u7684\u7f51\u7edc\u5c31\u53ef\u4ee5\u88ab\u5206\u5272\u6210\u5c0f\u7684\u5355\u5143\uff0c\u53e6\u5916IP\u5730\u5740\u7684\u4f7f\u7528\u4e5f\u66f4\u4e3a\u79d1\u5b66\u66f4\u4e3a\u5408\u7406\u3002 \u5982\u4f55\u5212\u5206\u5b50\u7f51 \u00b6 \u73b0\u5728\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2aB\u7c7b\u5730\u5740\u6bb5172.16.0.0/16\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2aB\u7c7b\u5730\u5740\u7684\u63a9\u7801\u4e3a255.255.0.0\uff0c\u524d\u4e24\u4e2a\u516b\u4f4d\u7ec4\u662f\u7f51\u7edc\u4f4d\uff0c\u540e\u4e24\u4e2a\u516b\u4f4d\u7ec4\u662f\u4e3b\u673a\u4f4d\u3002\u90a3\u4e48\u8fd9\u4e2a\u5355\u4e00\u7684\u7f51\u7edc\u4e2d\uff0c\u67092\u768416\u6b21\u65b9\u4e2aIP\u5730\u5740\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u975e\u5e38\u5e9e\u5927\u3002 \u73b0\u5728\uff0c\u5728\u539f\u6709\u7f51\u7edc\u4f4d\u7684\u57fa\u7840\u4e0a\uff0c\u518d\u5411\u4e3b\u673a\u4f4d\u501f\u4e00\u4e2abit\u4f5c\u4e3a\u7f51\u7edc\u4f4d\u7684\u8865\u5145\uff0c\u7f51\u7edc\u4f4d\u5c31\u6269\u5145\u5230\u4e8617bit\uff0c\u76f8\u5bf9\u7684\u4e3b\u673a\u4f4d\u5c31\u53d8\u6210\u4e8615bit\u3002\u90a3\u4e48\u501f\u8fc7\u6765\u7684\u8fd9\u4e00\u4f4d\uff0c\u5c31\u662f\u5b50\u7f51\u4f4d\u4e86\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002\u7531\u4e8e\u6211\u4eec\u501f\u4e86\u8fd9\u4e00\u4f4d\uff0c \u56e0\u6b64\u7f51\u7edc\u63a9\u7801\u5c31\u4ece\u9ed8\u8ba4\u7684255.255.0.0\u53d8\u6210\u4e86255.255.128.0\u6216\u8005\u8bf4\u4ece/16\u53d8\u6210\u4e86/17\u3002 \u4e8e\u662f\u4ece\u539f\u6765\u7684\u53ea\u6709172.16.0.0/16\u7684\u4e00\u4e2a\u5927\u7f51\u6bb5\uff0c\u53d8\u6210\u73b0\u5728\u62e5\u6709172.16.0.0/17\u53ca172.16..128.0/17\u8fd9\u4e24\u4e2a\u5c0f\u4e00\u70b9\u7684\u7f51\u6bb5\uff0c\u8fd9\u5c31\u662f\u5b50\u7f51\u5212\u5206\u3002\u52a1\u5fc5\u8981\u5173\u6ce8\u7f51\u7edc\u63a9\u7801\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u53d1\u6325\u7684\u4f5c\u7528\u3002 \u5b50\u7f51\u5212\u5206\u4f8b\u5b50\u4e00 \u00b6 \u73b0\u5728\u6709\u4e00\u4e2aIP\u5730\u5740\uff1a192.168.1.0\uff0c\u8fd9\u662f\u4e00\u4e2aC\u7c7b\u5730\u5740\uff0c\u9ed8\u8ba4\u7684\u63a9\u7801\u662f/24\uff0c\u6211\u8981\u5bf9\u5b83\u505a\u5b50\u7f51\u5212\u5206\uff0c\u5411\u4e3b\u673a\u4f4d\u501f\u4e00\u4f4d\u4f5c\u4e3a\u5b50\u7f51\u4f4d\uff0c\u4e5f\u5c31\u662f\u63a9\u7801\u957f\u5ea6\u53d8\u6210/25\uff0c\u90a3\u4e48\u6211\u80fd\u5f97\u5230\u51e0\u4e2a\u5b50\u7f51\uff1f\u6bcf\u4e2a\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740\u662f\u591a\u5c11\uff1f\u6bcf\u4e2a\u5b50\u7f51\u7684\u5e7f\u64ad\u5730\u5740\u662f\u591a\u5c11\uff1f\u6bcf\u4e2a\u5b50\u7f51\u7684\u53ef\u7528IP\u5730\u5740\u8303\u56f4\u662f\u591a\u5c11? \u6b65\u9aa4\u5982\u4e0b\uff1a \u5224\u65ad\u7c7b\u522b\uff0c\u627e\u9ed8\u8ba4\u63a9\u7801\uff1a \u00b6 \u9996\u5148\u8fd9\u662f\u4e00\u4e2aC\u7c7b\u5730\u5740\uff0c\u56e0\u6b64\u9ed8\u8ba4\u7684\u63a9\u7801\u957f\u5ea6\u4e3a/24\uff0c\u4f60\u53ef\u4ee5\u5212\u4e00\u6761\u7ad6\u7ebf\u5e2e\u52a9\u8ba1\u7b97\u3002\u7ebf\u7684\u5de6\u8fb9\u4e3a\u7f51\u7edc\u4f4d\uff0c\u53f3\u8fb9\u4e3a\u4e3b\u673a\u4f4d\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002 \u53d8\u66f4\u63a9\u7801\uff0c\u627e\u5b50\u7f51\uff1a \u00b6 \u5728\u539f\u6709\u7684/24\u63a9\u7801\u57fa\u7840\u4e0a\uff0c\u5411\u4e3b\u673a\u4f4d\u501f\u4e00\u4f4d\uff0c\u63a9\u7801\u53d8\u6210/25\u3002\u501f\u51fa\u6765\u7684\u8fd9\u4e00\u4f4d\u5c31\u662f\u5b50\u7f51\u4f4d\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u53ea\u8981\u5c06\u865a\u7ebf\u5f80\u53f3\u79fb\u52a8\u4e00\u683c\u5c31\u884c\u3002\u8fd9\u4e2a\u5b50\u7f51\u4f4d\u7684\u503c\u8981\u4e48\u4e3a0\uff0c\u8981\u4e48\u4e3a1\uff0c\u4e5f\u5c31\u662f\u5b58\u5728\u4e24\u79cd\u53ef\u80fd\u6027\uff0c\u8fd9\u5c31\u521b\u9020\u4e86\u4e24\u4e2a\u5b50\u7f51\uff082\u76841\u6b21\u65b9\uff09\uff0c\u5b50\u7f51\u4f4d\u4e3a0\u65f6\uff0c\u5f97\u5230\u7684\u5b50\u7f51\u5730\u5740\u662f192.168.1.0/25\uff0c\u5b50\u7f51\u4f4d\u4e3a1\u65f6\uff0c\u5f97\u5230\u53e6\u4e00\u4e2a\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740192.168.1.128/25\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5f97\u51fa\u5e7f\u64ad\u5730\u5740\uff1a \u00b6 \u4e0a\u9762\u5206\u522b\u5217\u51fa\u4e86\u5b50\u7f511\u53ca\u5b50\u7f512\u7684\u5e7f\u64ad\u5730\u5740\uff0c\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u628a\u5404\u4e2a\u5b50\u7f51\u7684\u4e3b\u673a\u4f4d\u5168\u90e8\u7f6e1\u5373\u53ef\u3002\u56e0\u6b64\u5b50\u7f51192.168.1.0/25 \u7684\u5e7f\u64ad\u5730\u5740\u4e3a192.168.1.127 \uff1b\u5b50\u7f51192.168.1.128/25 \u7684\u5e7f\u64ad\u5730\u5740\u4e3a192.168.1.255\uff1b \u5f97\u51fa\u6bcf\u4e2a\u5b50\u7f51\u7684\u53ef\u7528IP\u5730\u5740\u6570\u91cf\uff1a \u00b6 \u7ecf\u8fc7\u4e0a\u9762\u7684\u8ba1\u7b97\uff0c\u5f97\u51fa\u4e86\u5b50\u7f511\u53ca\u5b50\u7f512\u7684\u7f51\u7edc\u5730\u5740\u548c\u5e7f\u64ad\u5730\u5740\uff0c\u90a3\u4e48\u6bcf\u4e2a\u5b50\u7f51\u53ef\u7528\u7684IP\u5730\u5740\u4e5f\u5c31\u51fa\u6765\u4e86\uff0c\u56e0\u4e3a\u53ef\u7528IP\u5730\u5740\u5b9e\u9645\u4e0a\u5c31\u662f\u8be5\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740\u4e0e\u5e7f\u64ad\u5730\u5740\u4e4b\u95f4\u5939\u7740\u7684\u90a3\u4e9b\u4e2aIP\u5730\u5740\u3002\u6240\u4ee5\u5b9e\u9645\u4e0a\u6211\u4eec\u5bf9192.168.1.0/24\u8fd9\u4e2aC\u7c7b\u5730\u5740\u6bb5\uff0c\u7528\u4e86\u4e00\u4e2a\u53d8\u957f\u540e\u7684\u5b50\u7f51\u63a9\u7801\u957f\u5ea6\uff1a/25\uff0c\u4e5f\u5c31\u662f\u5411\u4e3b\u673a\u4f4d\u501f1\u4f4d\u540e\u4ea7\u751f\u51fa\u4e862\u4e2a\u5b50\u7f51\uff0c\u6bcf\u4e2a\u5b50\u7f51\u6709126\u4e2a\u53ef\u7528IP\u5730\u5740\u3002\u8fd9\u91cc\u6709\u4e2a\u516c\u5f0f\uff1a \u5b50\u7f51\u5212\u5206\u4f8b\u5b50\u4e8c \u00b6 \u5047\u8bbe\u73b0\u5728\u6709\u4e00\u4e2aIP\u5730\u5740\uff1a192.168.1.64/27\uff0c\u60f3\u628a\u8fd9\u4e2a\u5730\u5740\u914d\u7f6e\u5728\u4e00\u53f0PC\u4e0a\uff0c\u662f\u5426\u53ef\u884c\uff1f \u7531\u4e8e\u8be5\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u957f\u5ea6\u4e3a/24\uff0c\u800c\u65b0\u63a9\u7801\u957f\u5ea6\u4e3a/27\uff0c\u56e0\u6b64\u7f51\u7edc\u4f4d\u5411\u4e3b\u673a\u4f4d\u501f\u4e863\u4f4d\uff0c\u4ea7\u751f\u4e868\u4e2a\u5b50\u7f51\uff0c\u6bcf\u4e2a\u5b50\u7f51\u5185\u5305\u542b\u7684\u6240\u6709IP\u5730\u5740\u6570\u91cf\u4e3a32\uff0c\u4e5f\u5c31\u662f2\u76845\u6b21\u65b9\uff085\u662f\u5269\u4f59\u7684\u4e3b\u673a\u4f4d\u6570\uff09\u3002 \u73b0\u5728\u5f00\u59cb\u628a\u6bcf\u4e2a\u5b50\u7f51\u7f57\u5217\u4e00\u4e0b\uff0c\u7ed3\u679c\u53d1\u73b0192.168.1.64/27\u8fd9\u4e2aIP\u5730\u5740\uff0c\u5176\u5b9e\u662f\u5176\u4e2d\u4e00\u4e2a\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740\uff0c\u65e2\u7136\u662f\u7f51\u7edc\u5730\u5740\uff0c\u5f53\u7136\u662f\u4e0d\u80fd\u5206\u914d\u7ed9PC\u7528\u7684\u4e86\u3002 VRP \u57fa\u7840 Versatile Routing Platform \u901a\u7528\u8def\u7531\u5e73\u53f0\uff0c\u7b80\u79f0VRP\uff0c\u662f\u534e\u4e3a\u6570\u636e\u901a\u4fe1\u4ea7\u54c1\u7684\u901a\u7528\u64cd\u4f5c\u7cfb\u7edf\u5e73\u53f0\uff0c\u5b83\u4ee5IP \u4e1a\u52a1\u4e3a\u6838\u5fc3\uff0c\u91c7\u7528\u7ec4\u4ef6\u5316\u7684\u4f53\u7cfb\u7ed3\u6784\uff0c\u5728\u5b9e\u73b0\u4e30\u5bcc\u529f\u80fd\u53ca\u7279\u6027\u7684\u540c\u65f6\uff0c\u63d0\u4f9b\u57fa\u4e8e\u5e94\u7528\u7684\u53ef\u88c1\u526a\u80fd\u529b\u548c\u53ef\u6269\u5c55\u80fd\u529b\u3002VRP\u5176\u5b9e\u5c31\u662f\u8fd0\u884c\u5728\u534e\u4e3a\u6570\u901a\u4ea7\u54c1\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5c31\u50cfWindows\u7cfb\u7edf\u5bf9\u4e8ePC\uff0ciOS\u7cfb\u7edf\u5bf9\u4e8e\u82f9\u679c\u7ec8\u7aef\u3002\u6211\u4eec\u8c03\u8bd5VRP\u7cfb\u7edf\u7684\u6570\u901a\u8bbe\u5907\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u5c31\u662f\u901a\u8fc7\u547d\u4ee4\u884c\u754c\u9762\uff08CLI\uff09\uff1a \u4e0b\u9762\u6211\u4eec\u521d\u6b65\u4e86\u89e3\u4e00\u4e0bVRP\u7684\u547d\u4ee4\u884c\u754c\u9762\uff1a \u547d\u4ee4\u89c6\u56fe\uff08View\uff09\u7684\u6982\u5ff5 \u00b6 VRP\u7684\u547d\u4ee4\u884c\u754c\u9762\u5b9a\u4e49\u4e86\u5404\u79cd\u547d\u4ee4\u89c6\u56fe\uff08View\uff09\uff0c\u8981\u5bf9\u7279\u5b9a\u534f\u8bae\u6216\u8005\u529f\u80fd\u8fdb\u884c\u914d\u7f6e\u5c31\u9700\u8981\u8fdb\u5165\u5230\u76f8\u5e94 \u7684\u89c6\u56fe\u3002\u89c6\u56fe\u7684\u5b9a\u4e49\u4f7f\u5f97\u547d\u4ee4\u884c\u7684\u914d\u7f6e\u66f4\u6a21\u5757\u5316\uff0c\u4e5f\u66f4\u4e25\u8c28\u3001\u66f4\u5c42\u6b21\u5316\u3002\u4f8b\u5982\u4e00\u53f0\u8def\u7531\u5668\u6709\u591a\u4e2a\u63a5\u53e3\uff0c \u5982\u679c\u8981\u4fee\u6539\u67d0\u4e2a\u63a5\u53e3\u7684IP\u5730\u5740\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u8fdb\u5165\u8be5\u63a5\u53e3\u7684\u914d\u7f6e\u89c6\u56fe\uff0c\u7136\u540e\u8fdb\u884c\u914d\u7f6e\uff0c\u800c\u5728\u8fd9\u4e2a\u63a5\u53e3\u7684\u914d\u7f6e\u89c6\u56fe\u4e2d\u6267\u884c\u7684\u76f8\u5173\u547d\u4ee4\uff0c\u53ea\u4f1a\u5f71\u54cd\u8be5\u63a5\u53e3\u3002\u56e0\u6b64VRP\u89c4\u5b9a\uff0c\u5728\u9002\u5f53\u7684\u89c6\u56fe\u4e0b\u6267\u884c\u9002\u5f53\u7684\u547d\u4ee4\u3002 \u521a\u767b\u9646\u8bbe\u5907\u65f6\u5728\u547d\u4ee4\u884c\u754c\u9762\u4f60\u53ef\u80fd\u4f1a\u770b\u5230\u201c\\<Quidway>\u201d\u6216\u8005\u201c\\<Huawei>\u201d\u8fd9\u6837\u7684\u63d0\u793a\u7b26\uff0c\u201c\\<>\u201d\u5c16\u62ec\u53f7\u63d0\u793a\u4f60\u5f53\u524d\u6240\u5904\u7684\u89c6\u56fe\u662f\u201c\u7528\u6237\u89c6\u56fe\u201d\uff0c\u800c\u201cQuidway\u201d\u6216\u201cHuawei\u201d\u662f\u8be5\u8bbe\u5907\u7684\u540d\u79f0\uff0c\u5f53\u7136\u8bbe\u5907\u540d\u79f0\u662f\u53ef\u4ee5\u4fee\u6539\u7684\u3002\u5728\u4e0d\u540c\u7684\u89c6\u56fe\u4e0b\u6211\u4eec\u4f1a\u770b\u5230\u4e0d\u540c\u7684\u63d0\u793a\u7b26\u3002\u4f8b\u5982\u4e0a\u56fe\u6240\u5217\u4e3e\u7684\u51e0\u79cd\u89c6\u56fe\u4ee5\u53ca\u8fdb\u5165\u8be5\u89c6\u56fe\u4f7f\u7528\u7684\u547d\u4ee4\u3002\u4ece\u5f53\u524d\u89c6\u56fe\u8fdb\u5165\u5230\u4e0b\u4e00\u7ea7\u89c6\u56fe\u9700\u8981\u4f7f\u7528\u76f8\u5e94\u7684\u547d\u4ee4\uff0c\u4ece\u5f53\u524d\u89c6\u56fe\u9000\u56de\u5230\u4e0a\u4e00\u7ea7\u89c6\u56fe\u53ef\u4f7f\u7528\u201cquit\u201d\u547d\u4ee4\uff1a \u57fa\u672c\u547d\u4ee4\u7ed3\u6784 \u00b6 \u5728\u547d\u4ee4\u884c\u754c\u9762\u4e2d\uff0c\u901a\u8fc7\u8f93\u5165\u7279\u5b9a\u7684\u547d\u4ee4\u53ca\u53c2\u6570\u6765\u5b8c\u6210\u5bf9\u8bbe\u5907\u7684\u8c03\u8bd5\uff0c\u4f8b\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c sysname Router1 \uff0c\u8fd9\u6761\u547d\u4ee4\u4e2d\u201c sysname \u201d\u662f\u5173\u952e\u5b57\uff0c\u800c\u201c Router1 \u201d\u662f\u53c2\u6570\uff0c\u8fd9\u6761\u547d\u4ee4\u7684\u610f\u601d\u5c31\u662f\u5c06\u8be5\u8bbe\u5907\u7684\u540d\u79f0\u4fee\u6539\u4e3aRouter1\uff0c\u547d\u4ee4\u8f93\u5165\u5b8c\u6bd5\u540e\u6309\u56de\u8f66\uff0c\u5c31\u4f1a\u53d1\u73b0\u7cfb\u7edf\u7684\u63d0\u793a\u7b26\u53d1\u751f\u4e86\u6539\u53d8\uff0c\u53d8\u6210\u4e86\u201c[Router1]\u201d\u3002\u8fd9\u6761\u547d\u4ee4\u9700\u8981\u5728\u7cfb\u7edf\u89c6\u56fe\u4e0b\u5b8c\u6210\uff0c\u5982\u679c\u5728\u7528\u6237\u89c6\u56fe\u4e0b\u5c1d\u8bd5\u8f93\u5165\u8fd9\u6761\u547d\u4ee4\uff0c\u5219\u4f1a\u62a5\u9519\u3002 \u4f7f\u7528\u547d\u4ee4\u884c\u7684\u5e2e\u52a9\u529f\u80fd \u00b6 \u547d\u4ee4\u63d0\u793a\uff1a \u00b6 \u5728\u8bbe\u5907\u7684\u914d\u7f6e\u8fc7\u7a0b\u4e2d\uff0c\u7531\u4e8e\u547d\u4ee4\u8f83\u591a\uff0c\u51fa\u73b0\u8bb0\u5fc6\u6a21\u7cca\u7684\u60c5\u51b5\u975e\u5e38\u6b63\u5e38\uff0cVRP\u7684\u547d\u4ee4\u540e\u754c\u9762\u4e3a\u6211\u4eec\u8d34\u5fc3\u5730\u63d0\u4f9b\u4e86\u547d\u4ee4\u63d0\u793a\u529f\u80fd\uff0c\u5f53\u4e00\u6761\u547d\u4ee4\u4e2d\u67d0\u4e2a\u5173\u952e\u5b57\u53ea\u8bb0\u5f97\u5f00\u5934\u7684\u51e0\u4e2a\u5b57\u6bcd\u65f6\uff0c\u53ef\u5728\u952e\u5165\u5f00\u5934\u5b57\u6bcd\u540e\u7d27\u63a5\u7740\u952e\u5165\u201c\uff1f\u201d\u95ee\u53f7\uff0c\u4f8b\u5982\u201cip rou?\u201d\uff0c\u6ce8\u610f\u5728\u95ee\u53f7\u524d\u9762\u6ca1\u6709\u7a7a\u683c\uff0c\u7cfb\u7edf\u5373\u4f1a\u81ea\u52a8\u5f39\u51fa\u63d0\u793a\u4fe1\u606f\uff0c\u63d0\u793a\u5f53\u524d\u201crou\u201d\u8fd9\u4e09\u4e2a\u5b57\u6bcd\u5f00\u5934\u7684\u5173\u952e\u5b57\u6709\u54ea\u4e9b\uff1a \u8fd8\u6709\u4e00\u4e9b\u60c5\u51b5\uff0c\u53ef\u80fd\u662f\u5f53\u524d\u5173\u952e\u5b57\u8f93\u5165\u5b8c\u6bd5\u540e\uff0c\u5fd8\u8bb0\u4e86\u4e0b\u4e00\u4e2a\u5173\u952e\u5b57\u6216\u8005\u53c2\u6570\u8be5\u8f93\u5165\u4ec0\u4e48\uff0c\u90a3\u4e48\u5c31 \u53ef\u4ee5\u5728\u5f53\u524d\u5173\u952e\u5b57\u8f93\u5165\u5b8c\u6bd5\u540e\u952e\u5165\u7a7a\u683c\uff0c\u7136\u540e\u518d\u8f93\u5165\u4e00\u4e2a\u201c\uff1f\u201d\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5f39\u51fa\u53ef\u9009\u62e9\u7684\u5173\u952e\u5b57\u6216\u53c2\u6570\u7684\u63d0\u793a\u4fe1\u606f\uff1a \u547d\u4ee4\u8865\u9f50\uff1a \u00b6 \u8f93\u5165\u547d\u4ee4\u65f6\uff0c\u5173\u952e\u5b57\u65e0\u9700\u5b8c\u6574\u8f93\u5165\uff0c\u4f8b\u5982\u8981\u8f93\u5165\u201csystem-view\u201d\uff0c\u53ef\u5148\u8f93\u5165\u201csys\u201d\uff0c\u7136\u540e\u6309tab \u952e\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8865\u9f50sys\u5f00\u5934\u7684\u5173\u952e\u5b57\uff0c\u5982\u679csys\u5f00\u5934\u6709\u591a\u4e2a\u5173\u952e\u5b57\uff0c\u53ef\u4ee5\u591a\u6b21\u6309tab\u952e\u5207\u6362\u5230\u81ea\u5df1\u60f3\u8f93\u5165\u7684\u90a3\u4e00\u4e2a\uff1a \u5728\u547d\u4ee4\u5f04\u719f\u6089\u4e4b\u540e\uff0c\u5176\u5b9e\u53ef\u4ee5\u91c7\u7528\u7b80\u5316\u7684\u547d\u4ee4\u4e66\u5199\u65b9\u5f0f\uff0c\u4f8b\u5982\u201cinterface gigabitEthernet 0/0/0\u201d \u7b49\u540c\u4e8e\u201cint g 0/0/0\u201d\uff0c\u91c7\u7528\u540e\u8005\u6765\u914d\u7f6e\u8bbe\u5907\uff0c\u5de5\u4f5c\u6548\u7387\u5927\u5927\u63d0\u5347\uff0c\u5f53\u7136\u903c\u683c\u4e5f\u8ddf\u7740\u77ac\u95f4\u63d0\u5347\u4e86\u597d\u51e0\u4e2a\u6863\u6b21\u3002 \u8bed\u6cd5\u68c0\u67e5 \u00b6 CLI\u7684\u8bed\u6cd5\u68c0\u67e5\u529f\u80fd\u5e2e\u52a9\u6211\u4eec\u53d1\u73b0\u547d\u4ee4\u4e2d\u7684\u9519\u8bef\uff1a [Huawei]a \u5176\u4ed6\u7684\u63d0\u793a\u5982\u4e0b\uff1a \u57fa\u7840\u914d\u7f6e\u547d\u4ee4 \u00b6 \u4fee\u6539\u8bbe\u5907\u540d\u79f0\uff1a \u00b6 \u914d\u7f6e\u8bbe\u5907\u7684\u63a5\u53e3\uff1a \u00b6 \u8fd9\u91ccGigabitEthernet0/0/0\u6307\u7684\u662f\u5343\u5146\u63a5\u53e3GE0/0/0\uff0c\u5176\u4e2dGigabitEthernet\u8868\u793a\u5343\u5146\u4ee5\u592a\u7f51\u63a5\u53e3\uff0c\u53e6 \u5916\uff0c\u540e\u9762\u7684\u4e09\u4e2a\u6570\u5b57\u5206\u522b\u662f\u201c\u69fd\u4f4d\u53f7/\u5b50\u5361\u53f7/\u63a5\u53e3\u5e8f\u53f7\u201d\uff0c\u5177\u4f53\u7684\u542b\u4e49\u5982\u4e0b\uff1a \u69fd\u4f4d\u53f7\uff1a\u8868\u793a\u8be5\u63a5\u53e3\u6240\u5c5e\u5355\u677f\u6240\u5728\u7684\u69fd\u4f4d\u53f7\u3002 \u5b50\u5361\u53f7\uff1a\u8868\u793a\u8be5\u63a5\u53e3\u6240\u5c5e\u7684\u5b50\u5361\u53f7\u3002 \u63a5\u53e3\u5e8f\u53f7\uff1a\u8868\u793a\u63a5\u53e3\u5728\u677f\u5361\u4e0a\u7684\u7f16\u6392\u987a\u5e8f\u53f7\u3002 \u7ba1\u7406\u53ca\u7ef4\u62a4\u8bbe\u5907\u914d\u7f6e\uff1a \u00b6 \\<SW1> save \u5728\u8bbe\u5907\u4e0a\u7684\u6bcf\u4e00\u4e2a\u914d\u7f6e\u64cd\u4f5c\uff0c\u90fd\u4f1a\u8bb0\u5f55\u5728\u8bbe\u5907\u7684\u5f53\u524d\u914d\u7f6e\u201ccurrent-configuration\u201d\u4e4b\u4e2d\uff0c\u4e5f\u5c31\u662f\u5f53 \u524d\u8fd0\u884c\u4e2d\u7684\u914d\u7f6e\uff0c\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u662f\u4fdd\u5b58\u5728\u52a8\u6001\u5185\u5b58\u4e2d\u7684\u3002\u53ef\u4ee5\u4f7f\u7528**display current-configuration** \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u8fd0\u884c\u4e2d\u7684\u914d\u7f6e\u3002 \u8bbe\u5907\u91cd\u542f\u4e4b\u540ecurrent-configuration\u5c06\u4f1a\u4e22\u5931\u3002\u56e0\u6b64\u4e3a\u4e86\u4fdd\u8bc1\u8bbe\u5907\u91cd\u542f\u540e\u4e0d\u4e22\u5931\u5f53\u524d\u5df2\u7ecf\u5b8c\u6210\u7684\u914d\u7f6e\uff0c\u5219\u8981\u5728\u914d\u7f6e\u53d8\u66f4\u540e\uff0c\u5c06current-configuration\u4fdd\u5b58\u5230saved-configuration\uff0c\u4e5f\u5c31\u662f\u4fdd\u5b58\u5230\u542f\u52a8\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd9\u6837\u7684\u8bdd\uff0c\u8bbe\u5907\u91cd\u542f\u540e\u5c06\u4f1a\u8bfb\u53d6\u5df2\u4fdd\u5b58\u5230\u786c\u76d8\u4e2d\u7684\u542f\u52a8\u914d\u7f6e\u6587\u4ef6\uff0c\u7136\u540e\u5c06\u5176\u52a0\u8f7d\u5230\u5f53\u524d\u914d\u7f6e\u4e2d\u8fd0\u884c\u3002\u4f7f\u7528**save**\u547d\u4ee4\u6765\u5c06current-configuration\u4fdd\u5b58\u5230\u542f\u52a8\u914d\u7f6e\u6587\u4ef6\uff0c**save**\u5173\u952e\u5b57\u5982\u679c\u4e0d\u6307\u5b9a\u53ef\u9009\u53c2\u6570configuration-file\uff08\u6587\u4ef6\u540d\uff09\uff0c\u5219\u914d\u7f6e\u6587\u4ef6\u5c06\u4fdd\u5b58\u4e3a\u201cvrpcfg.zip\u201d\u3002\u201cvrpcfg.zip\u201d\u662f\u7cfb\u7edf\u7f3a\u7701\u547d\u540d\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u521d\u59cb\u72b6\u6001\u662f\u7a7a\u914d\u7f6e\u3002 \u53e6\u5916\uff0c\u5982\u679c\u8981\u6e05\u9664\u5df2\u4fdd\u5b58\u7684\u542f\u52a8\u914d\u7f6e\u6587\u4ef6\uff0c\u4f7f\u5f97\u4e0b\u6b21\u8bbe\u5907\u91cd\u542f\u540e\u80fd\u6062\u590d\u51fa\u5382\u914d\u7f6e\uff0c\u53ef\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff1a \\<SW1> reset saved-configuration \u5982\u679c\u8981\u5907\u4efd\u5df2\u4fdd\u5b58\u7684\u542f\u52a8\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff1a \\<SW1> copy flash:/vrpcfg.zip flash:/cfgbackup.zip \u4f7f\u7528 Console \u63a5\u53e3\u7ba1\u7406\u8bbe\u5907 \u4e00\u822c\u6765\u8bf4\uff0c\u7f51\u7edc\u8bbe\u5907\uff08\u4f8b\u5982\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u3001\u9632\u706b\u5899\u7b49\uff09\u5728\u8bbe\u5907\u9762\u677f\u4e0a\u90fd\u4f1a\u6709\u4e00\u4e2a\u7528\u4e8e\u914d\u7f6e\u548c\u7ba1\u7406\u7684\u4e13\u7528\u63a5\u53e3 \u2013 Console\u53e3\uff08\u6216CON\u53e3\uff09\uff0c\u901a\u8fc7\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5e76\u4f7f\u7528\u4e13\u7528\u7684\u7ebf\u7f06\u5c06\u8be5\u8bbe\u5907\u4e0ePC\uff08\u7f51\u7edc\u7ba1\u7406\u5458\u6240\u4f7f\u7528\u7684\u7535\u8111\uff09\u8fdb\u884c\u8fde\u63a5\uff0c\u5373\u53ef\u5b9e\u73b0\u5bf9\u8bbe\u5907\u7684\u914d\u7f6e\u53ca\u7ba1\u7406\u3002 \u5bf9\u8bbe\u5907\u4e0a\u7ebf\u524d\u7684\u521d\u6b21\u914d\u7f6e\u53ca\u7ba1\u7406\uff0c\u5f80\u5f80\u91c7\u7528\u6b64\u79cd\u65b9\u5f0f\u3002\u6211\u4eec\u901a\u8fc7\u4ee5\u4e0b\u56db\u4e2a\u6b65\u9aa4\u6765\u4e86\u89e3\u4e00\u4e0b\u5982\u4f55\u4f7f\u7528Console \u53e3\u5bf9\u8bbe\u5907\u8fdb\u884c\u7ba1\u7406\u53ca\u914d\u7f6e\uff1a \u8ba4\u8bc6\u8bbe\u5907\u7684Console\u53e3\u3002 \u51c6\u5907\u597d\u76f8\u5173\u7ebf\u7f06\u3002 \u642d\u5efa\u914d\u7f6e\u73af\u5883\u3002 \u901a\u8fc7\u7ec8\u7aef\u7ba1\u7406\u8f6f\u4ef6\u767b\u9646\u8bbe\u5907\u3002 \u8ba4\u8bc6\u8bbe\u5907\u7684Console\u53e3 \u00b6 \u534e\u4e3a\u7f51\u7edc\u8bbe\u5907\u9762\u677f\u4e0a\u7684Console\u53e3\u90fd\u6709\u505a\u76f8\u5173\u6807\u8bb0\uff0c\u6bd4\u8f83\u5bb9\u6613\u8bc6\u522b\uff0c\u5982\u4e0b\u56fe\uff08\u4ee5\u9632\u706b\u5899E1000E\u4e3a\u4f8b\uff09\u3002 \u51c6\u5907\u597d\u76f8\u5173\u7ebf\u7f06 \u00b6 Console\u7ebf\u7f06\uff08\u4e0a\u56fe\u53f3\u4fa7\u7684\u7ebf\u7f06\uff09\u4e00\u7aef\u4e3aRJ45\u6c34\u6676\u5934\uff0c\u4e00\u7aef\u4e3a\u4e32\u53e3\u63a5\u5934\u3002RJ45\u63a5\u5934\u7528\u4e8e\u8fde\u63a5\u7f51\u7edc\u8bbe\u5907\u7684Console\u53e3\uff0c\u7ebf\u7f06\u53e6\u4e00\u7aef\u7684\u4e32\u53e3\u7528\u4e8e\u8fde\u63a5PC\uff0c\u73b0\u5728\u5927\u90e8\u5206\u53f0\u5f0fPC\u5728\u4e3b\u673a\u7bb1\u540e\u90fd\u6709\u4e32\u53e3\u53ef\u4ee5\u76f4\u63a5\u8fde\u63a5 Console\u7ebf\u7f06\u3002\u53ea\u8981\u5c06\u88ab\u914d\u7f6e\u8bbe\u5907\u4e0ePC\u6309\u7167\u4e0a\u8ff0\u65b9\u5f0f\u8fdb\u884c\u8fde\u63a5\uff0c\u5c31\u5b8c\u6210\u4e86\u914d\u7f6e\u73af\u5883\u7684\u642d\u5efa\u3002\u73af\u5883\u5b8c\u6210\u540e\uff0c\u5728PC\u4e0a\u4f7f\u7528\u7ec8\u7aef\u7ba1\u7406\u8f6f\u4ef6\u5373\u53ef\u901a\u8fc7\u7f51\u7edc\u8bbe\u5907\u7684Console\u63a5\u53e3\u3001\u4f7f\u7528\u547d\u4ee4\u884c\u7684\u65b9\u5f0f\u5bf9\u8bbe\u5907\u8fdb\u884c\u7ba1\u7406\u3002 \u4f46\u662f\u5927\u90e8\u5206\u7b14\u8bb0\u672c\u7535\u8111\u4e0a\u5e76\u6ca1\u6709\u4e32\u53e3\uff0c\u56e0\u6b64\u5982\u679c\u4f7f\u7528\u6ca1\u6709\u4e32\u53e3\u7684\u7b14\u8bb0\u672c\u7535\u8111\u8c03\u8bd5\u7f51\u7edc\u8bbe\u5907\uff0c\u5219\u9700\u8981\u53e6\u4e00\u6839\u7ebf\u7f06\u6765\u8f6c\u63a5\uff0c\u8fd9\u5c31\u662f\u4e0a\u56fe\u5de6\u4fa7\u6240\u793a\u7684USB-RS232\u7684\u7ebf\u7f06\uff0c\u8fd9\u6839\u7ebf\u7f06\u53ef\u4ee5\u8bf4\u662f\u7f51\u7edc\u5de5\u7a0b\u5e08\u5fc5\u5907\u7684\u5de5\u5177\uff0c \u5404\u5927\u7535\u5b50\u4ea7\u54c1\u5546\u94fa\u5747\u6709\u9500\u552e\uff08USB-RS232\u9700\u8981\u5b89\u88c5\u9a71\u52a8\u624d\u53ef\u4f7f\u7528\uff0c\u9a71\u52a8\u7a0b\u5e8f\u5b89\u88c5\u5305\u968f\u7ebf\u7f06\u9644\u9001\uff09\u3002 \u642d\u5efa\u914d\u7f6e\u73af\u5883 \u00b6 \u5982\u679c\u4f7f\u7528\u7b14\u8bb0\u672c\u7535\u8111\u6765\u914d\u7f6e\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u6216\u8005\u9632\u706b\u5899\uff0c\u5219\u53ef\u53c2\u8003\u5982\u4e0a\u56fe\u6240\u793a\u7684\u7ebf\u7f06\u8fde\u63a5\u65b9\u6cd5\u3002\u5c06USB- RS232\u7ebf\u7f06\u7684USB\u63a5\u53e3\u63a5\u5230\u7b14\u8bb0\u672c\u7535\u8111\u4e0a\uff0c\u540c\u65f6\u7ebf\u7f06\u7684\u53e6\u4e00\u5934\u8fde\u63a5Console\u7ebf\u7684\u4e32\u53e3\uff0cConsole\u7ebf\u7684\u53e6\u4e00\u7aef\uff0c\u4e5f\u5c31\u662fRJ45\u6c34\u6676\u5934\u8fd9\u4e00\u7aef\u5219\u63a5\u5230\u8bbe\u5907\u7684Console\u53e3\u4e0a\u3002 \u901a\u8fc7\u7ec8\u7aef\u7ba1\u7406\u8f6f\u4ef6\u767b\u9646\u8bbe\u5907 \u00b6 \u5728PC\u4e0a\uff0c\u6211\u4eec\u9700\u8981\u51c6\u5907\u597d\u7ec8\u7aef\u7ba1\u7406\u8f6f\u4ef6\uff0c\u7528\u4e8e\u7ba1\u7406\u548c\u914d\u7f6e\u7f51\u7edc\u8bbe\u5907\u3002\u5e38\u7528\u7684\u7ec8\u7aef\u7ba1\u7406\u8f6f\u4ef6\u6709\uff1aWindows \u81ea\u5e26\u7684\u7ec8\u7aef\u7ba1\u7406\u5de5\u5177\uff08WIN7\u7cfb\u7edf\u6ca1\u6709\u81ea\u5e26\u8be5\u5de5\u5177\uff09\u3001SecureCRT\u4ee5\u53caPutty\u7b49\u3002\u672c\u6587\u6863\u4ee5SecureCRT \u4e3a\u4f8b\u505a\u8bb2\u89e3\u3002\u8bf7\u81ea\u884c\u4e0b\u8f7dSecureCRT\u5e76\u5b89\u88c5\u3002\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u6253\u5f00\u8f6f\u4ef6\u3002 \u5728\u81ea\u52a8\u5f39\u51fa\u7684Connect\u5bf9\u8bdd\u6846\u4e2d\u9009\u62e9\u4e0b\u56fe\u6240\u793a\u7684\u6309\u94ae\u6765\u521b\u5efa\u4e00\u4e2a\u8fde\u63a5\uff1a \u5728\u5f39\u51fa\u7684Quick Connect\u5bf9\u8bdd\u6846\u4e2d\u9009\u62e9\u201cserial\u201d\uff0c\u5373\u4f7f\u7528\u4e32\u884c\u63a5\u53e3\u7ba1\u7406\u8bbe\u5907\uff1a \u8fdb\u4e00\u6b65\u914d\u7f6e\u5982\u4e0b\uff1a \u6ce8\u610f\u5728\u6b64\u5904\uff0cPort\u7684\u9009\u62e9\u89c6\u4e2a\u4eba\u60c5\u51b5\u800c\u5b9a\uff0c\u5f53\u7528\u7b14\u8bb0\u672c\u901a\u8fc7USB-RS232\u7ebf\u7f06\u63a5Console\u7ebf\u7ba1\u7406\u8bbe\u5907\u65f6\uff0c USB-RS232\u7ebf\u7f06\u662f\u9700\u8981\u5728PC\u7684windows\u7cfb\u7edf\u4e0a\u5b89\u88c5\u9a71\u52a8\u7a0b\u5e8f\u7684\uff0c\u5b89\u88c5\u5b8c\u6210\u7684\u7ed3\u679c\u662f\u5728\u7cfb\u7edf\u4e2d\u4f1a\u51fa\u73b0\u4e00\u4e2a\u901a\u8fc7USB\u63a5\u53e3\u6a21\u62df\u7684COM\u53e3\uff0c\u800c\u8be5COM\u53e3\u7684\u7f16\u53f7\u53ef\u5728\u53f3\u952e\u201c\u6211\u7684\u7535\u8111\u201d-\u201c\u8ba1\u7b97\u673a\u7ba1\u7406\u201d-\u201c\u8bbe\u5907\u7ba1\u7406\u201d-\u201c\u7aef\u53e3\uff08COM\u548cLPT\uff09\u201d\u4e2d\u770b\u5230\uff0c\u6b64\u5904\u663e\u793a\u7684\u7f16\u53f7\u8981\u4e0eSecureCRT\u4e2d\u9009\u62e9\u7684Port\u5bf9\u5e94\uff1a \u53e6\u5916\uff0cBand Rate\u4e5f\u5c31\u662f\u6ce2\u7279\u7387\uff0c\u8fd9\u4e00\u9879\u8981\u770b\u8bbe\u5907Console\u53e3\u7684\u9ed8\u8ba4\u53c2\u6570\u800c\u5b9a\uff0c\u6211\u53f8\u7684\u5927\u90e8\u5206\u8def\u7531\u3001\u4ea4\u6362\u53ca\u9632\u706b\u5899\u8bbe\u5907\u6b64\u5904\u8bbe\u7f6e\u7684\u503c\u90fd\u662f9600\u3002 \u5b8c\u6210\u540e\u70b9\u51fb\u201cConnect\u201d\u5373\u53ef\u767b\u9646\u8bbe\u5907\u3002\u5f53\u7136\uff0c\u7b2c\u4e00\u6b21\u4f7f\u7528Console\u767b\u9646\u8bbe\u5907\u624d\u9700\u8981\u4f9d\u7167\u4e0a\u8ff0\u6b65\u9aa4\u6765\u64cd\u4f5c\uff0c\u5f80\u540e\u518d\u6b21\u767b\u9646\uff0c\u5219\u53ef\u4f7f\u7528\u4e0a\u9762\u5df2\u521b\u5efa\u597d\u7684\u8fde\u63a5\u65b9\u5f0f\u5feb\u901f\u767b\u9646\u3002 eNSP \u534e\u4e3a\u5b98\u65b9\u6570\u901a\u6a21\u62df\u5668 eNSP\uff08Enterprise Network Simulation Platform\uff09\u662f\u4e00\u6b3e\u534e\u4e3a\u81ea\u7814\u7684\u3001\u514d\u8d39\u7684\u3001\u53ef\u6269\u5c55\u7684\u3001\u56fe\u5f62\u5316\u64cd\u4f5c\u7684\u7f51\u7edc\u4eff\u771f\u5e73\u53f0\uff0c\u4e3b\u8981\u5bf9\u4f01\u4e1a\u7f51\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u53ca\u9632\u706b\u5899\u7b49\u8bbe\u5907\u8fdb\u884c\u8f6f\u4ef6\u4eff\u771f\uff0c\u5b8c\u7f8e\u5448\u73b0\u771f\u5b9e\u8bbe\u5907\u5b9e\u666f\uff0c\u652f\u6301\u5927\u578b\u7f51\u7edc\u6a21\u62df\uff0c\u8ba9\u5e7f\u5927\u7528\u6237\u6709\u673a\u4f1a\u5728\u6ca1\u6709\u771f\u5b9e\u8bbe\u5907\u7684\u60c5\u51b5\u4e0b\u80fd\u591f\u6a21\u62df\u6f14\u7ec3\uff0c\u5b66\u4e60\u7f51\u7edc\u6280\u672f\u3002 eNSP\u4e0b\u8f7d\u94fe\u63a5\uff1a \u70b9\u51fb\u6b64\u5904 \u3002\u6216\u8005\u5728 http://enterprise.huawei.com/ \u641c\u7d22eNSP\u5373\u53ef\u627e\u5230eNSP\u8f6f\u4ef6\u4e0b\u8f7d\u9875\u9762\u3002 eNSP\u7684\u5b89\u88c5\u975e\u5e38\u7b80\u5355\uff0c\u5b89\u88c5\u5b8c\u6210\u540e\u6253\u5f00\u8f6f\u4ef6\u5373\u53ef\u770b\u5230\u4e3b\u754c\u9762\u3002\u8f6f\u4ef6\u7684\u64cd\u4f5c\u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u9700\u8981\u4ec0\u4e48\u8bbe\u5907\u5c31\u76f4\u63a5\u4ece\u8bbe\u5907\u680f\u62d6\u52a8\u56fe\u6807\u7136\u540e\u5728\u62d3\u6251\u753b\u5e03\u4e0a\u677e\u5f00\u5373\u53ef\u3002\u5b8c\u6210\u62d3\u6251\u7684\u642d\u5efa\u548c\u8fde\u7ebf\u540e\uff0c\u70b9\u51fb\u5de5\u5177\u680f\u4e2d\u7684\u7eff\u8272\u64ad\u653e\u6309\u94ae\u5373\u53ef\u7ecf\u8bbe\u5907\u5f00\u542f\u3002\u7b49\u5f85\u8bbe\u5907\u5b8c\u6210\u5f00\u542f\u540e\uff0c\u53cc\u51fb\u8bbe\u5907\u5373\u53ef\u8fdb\u5165CLI\u63a7\u5236\u53f0\u8fdb\u884c\u914d\u7f6e\u4e86\u3002 eNSP\u4e0d\u4ec5\u652f\u6301AR\u8def\u7531\u5668\u3001S57/S37\u4ea4\u6362\u673a\u3001USG5500\u9632\u706b\u5899\u7b49\u4e3b\u6d41\u6570\u901a\u8bbe\u5907\u7684\u6a21\u62df\uff0c\u8fd8\u652f\u6301\u65e0\u7ebf\u8bbe\u5907\uff0c \u4ee5\u53caDNS\u3001FTP\u3001HTTP\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u6a21\u62df\u7b49\uff0c\u66f4\u52a0\u652f\u6301\u6a21\u62df\u5668\u4e0e\u7269\u7406\u7f51\u5361\u7684\u6865\u63a5\uff0c\u4f7f\u5f97\u5b9e\u9a8c\u7684\u6269\u5c55\u6027 \u5f97\u5230\u6781\u5927\u7684\u63d0\u5347\u3002\u76ee\u524d\uff0c\u534e\u4e3a\u6570\u901a\u8ba4\u8bc1HCIE RS\u7684TroubleShooting\u8003\u8bd5\u4e5f\u662f\u4f7f\u7528NSP\u8f6f\u4ef6\u8fdb\u884c\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4f7f\u7528eNSP\u5b8c\u6210\u7b2c\u4e00\u4e2a\u5b9e\u9a8c\u3002 \u5b9e\u9a8c\u62d3\u6251 \u00b6 \u76ee\u6807\u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\uff1a\u4e00\u53f0PC\u4e0e\u4e00\u53f0\u8def\u7531\u5668\u901a\u8fc7\u7f51\u7ebf\u76f4\u8fde\u3002 \u73b0\u5728\u6211\u4eec\u8981\u5728eNSP\u4e2d\u642d\u5efa\u8fd9\u4e2a\u5b9e\u9a8c\u73af\u5883\uff0c\u5e76\u4e14\u5b8c\u6210PC\u548c\u8def\u7531\u5668\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC\u80fd\u591f\u8bbf\u95ee\u8def\u7531\u5668\uff08\u80fd\u591fping\u901a\u8def\u7531\u5668\uff09\u3002\u4e3aPC\u914d\u7f6e\u7684\u5730\u5740\u662f192.168.1.1/24\uff0c\u7f51\u5173\u5730\u5740\u662f192.168.1.254\uff1b\u4e3a\u8def\u7531\u5668\u7684GE0/0/0\u63a5\u53e3\u914d\u7f6e\u7684\u5730\u5740\u662f192.168.1.254/24\u3002 \u73af\u5883\u642d\u5efa \u00b6 \u4f7f\u7528eNSP\u642d\u5efa\u4e0a\u8ff0\u73af\u5883\u662f\u975e\u5e38\u7b80\u5355\u7684\u3002\u65b0\u5efa\u4e00\u4e2a\u5b9e\u9a8c\u540e\uff0c\u4ece\u5de6\u4fa7\u7684\u8bbe\u5907\u5217\u8868\u4e2d\u9009\u62e9\u201c\u8def\u7531\u5668\u201d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6b64\u5904\u6709\u591a\u79cd\u578b\u53f7\u7684\u8def\u7531\u5668\u53ef\u4ee5\u9009\u62e9\uff0c\u5728\u672c\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u6311\u9009\u7684\u662fAR2220\uff0c\u56e0\u6b64\u7528\u9f20\u6807\u5de6\u952e\u70b9\u4f4fAR2220 \u7684\u56fe\u6807\u4e0d\u653e\uff0c\u7136\u540e\u62d6\u52a8\u5230\u753b\u5e03\u4e2d\u518d\u677e\u5f00\u5373\u53ef\uff1a \u63a5\u4e0b\u6765\u7ee7\u7eed\u6dfb\u52a0PC\uff0c\u70b9\u51fb\u8bbe\u5907\u5217\u8868\u91cc\u7684\u201c\u7ec8\u7aef\u201d\u7c7b\u578b\uff0c\u9009\u62e9PC\uff0c\u7136\u540e\u62d6\u653e\u5230\u753b\u5e03\u4e0a\uff1a \u63a5\u4e0b\u6765\u5b8c\u6210\u8bbe\u5907\u7684\u8fde\u7ebf\uff0c\u5728\u5de6\u4fa7\u8bbe\u5907\u5217\u8868\u4e2d\u9009\u62e9\u201c\u8bbe\u5907\u8fde\u7ebf\u201d\u56fe\u6807\uff0c\u5728\u7ebf\u7f06\u5217\u8868\u4e2d\u9009\u62e9\u94dc\u7f06\u201cCopper\u201d\uff1a \u70b9\u9009\u6210\u529f\u540e\uff0c\u9f20\u6807\u6307\u9488\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u968f\u540e\u5728\u4ea4\u6362\u673a\u548cPC\u4e0a\u5206\u522b\u70b9\u51fb\u5e76\u9009\u62e9\u76f8\u5e94\u7684\u4e92\u8054\u63a5\u53e3\uff0c\u5373\u53ef\u5b9e\u73b0 \u8bbe\u5907\u76f8\u5e94\u7aef\u53e3\u4e4b\u95f4\u7684\u8fde\u7ebf\uff1a \u5982\u6b64\u4e00\u6765\u62d3\u6251\u5c31\u642d\u5efa\u5b8c\u6210\u4e86\uff0c\u73b0\u5728\u70b9\u51fb\u5de5\u5177\u680f\u4e0a\u7684\u542f\u52a8\u6309\u94ae\uff1a \u4e0a\u9762\u7684\u6309\u94ae\u70b9\u51fb\u540e\u4f1a\u5c06\u6240\u6709\u8bbe\u5907\u542f\u52a8\u3002\u5982\u679c\u5b9e\u9a8c\u62d3\u6251\u6bd4\u8f83\u5927\uff0c\u5efa\u8bae\u4e0d\u8981\u4f7f\u7528\u4e0a\u9762\u7684\u542f\u52a8\u6309\u94ae\u96c6\u4f53\u542f\u52a8\u8bbe\u5907\uff0c\u53ef\u4ee5\u5bf9\u8bbe\u5907\u8fdb\u884c\u9010\u53f0\u542f\u52a8\uff0c\u4e5f\u5c31\u662f\u5206\u522b\u5bf9\u8bbe\u5907\u70b9\u51fb\u53f3\u952e\uff0c\u7136\u540e\u9009\u62e9\u542f\u52a8\u3002\u5f85\u6240\u6709\u8bbe\u5907\u90fd\u542f\u52a8\u5b8c\u6bd5\u540e\u5373\u53ef\u5f00\u59cb\u5b9e\u9a8c\u3002 \u914d\u7f6e\u5b9e\u73b0 \u00b6 \u9996\u5148\u5b8c\u6210\u8def\u7531\u5668\u7684\u914d\u7f6e\uff0c\u53cc\u51fb\u8def\u7531\u5668\u7684\u56fe\u6807\u5373\u53ef\u6253\u5f00\u547d\u4ee4\u884c\u754c\u9762\uff1a \u6b64\u65f6\u6253\u5f00\u7684\u4fbf\u662fAR1\u7684\u547d\u4ee4\u884c\u754c\u9762\uff0c\u5728\u8be5\u547d\u4ee4\u884c\u754c\u9762\u4e2d\u5b8c\u6210\u5bf9\u8def\u7531\u5668\u7684\u57fa\u672c\u914d\u7f6e\uff0c\u5982\u4e0b\uff1a \u63a5\u4e0b\u6765\u5f00\u59cb\u914d\u7f6ePC\uff0c\u53cc\u51fbClient1\uff0c\u5728\u51fa\u73b0\u7684\u914d\u7f6e\u754c\u9762\u4e2d\u5982\u4e0b\u586b\u5199\uff1a \u586b\u5199\u5b8c\u6210\u4e4b\u540e\uff0c\u70b9\u51fb\u5e94\u7528\u5373\u53ef\u3002\u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u8fdb\u884c\u8fde\u901a\u6027\u7684\u6d4b\u8bd5\u4e86\uff0c\u53cc\u51fbPC\u7684\u56fe\u6807\uff0c\u9009\u62e9\u201c\u547d\u4ee4\u884c\u201d \u9009\u9879\u5361\uff0c\u7136\u540e\u5c31\u80fd\u770b\u5230CMD\u754c\u9762\uff0c\u5728CMD\u754c\u9762\u4e2d\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u57fa\u672c\u7684ping\u3001tracert\u7b49\u64cd\u4f5c\uff0c\u4f8b\u5982\u6d4b\u8bd5 PC\u5230\u8def\u7531\u5668\u7684\u8054\u901a\u6027\uff0c\u53ef\u4ee5ping 192.168.1.254\uff1a \u4eceping\u7684\u56de\u663e\u80fd\u770b\u5230\uff0cPC\u73b0\u5728\u80fd\u591fping\u901a\u8def\u7531\u5668\u4e86\uff0c\u5230\u6b64\u5b9e\u9a8c\u5c31\u6210\u529f\u4e86\u3002 eNSP\u80fd\u591f\u4fdd\u5b58\u5b9e\u9a8c\u62d3\u6251\u53ca\u914d\u7f6e\u4ee5\u4fbf\u4e0b\u6b21\u7ee7\u7eed\u8fdb\u884c\u64cd\u4f5c\uff0c\u975e\u5e38\u7684\u65b9\u4fbf\u3002\u5982\u679c\u9700\u8981\u4fdd\u5b58\u5b9e\u9a8c\u73af\u5883\u4ee5\u53ca\u62d3\u6251\u4e2d\u5404\u8bbe\u5907\u7684\u914d\u7f6e\uff0c\u5219\u5728\u5b8c\u6210\u5b9e\u9a8c\u64cd\u4f5c\u540e\uff0c\u5148\u4e3a\u5b9e\u9a8c\u62d3\u6251\u4e2d\u6bcf\u53f0\u8bbe\u5907\uff08PC\u3001Client\u65e0\u9700\u505a\u8fd9\u4e2a\u64cd\u4f5c\uff09\u4f7f\u7528 **save**\u547d\u4ee4\u4fdd\u5b58\u914d\u7f6e\uff08\u6ce8\u610f\uff0c\u52a1\u5fc5\u8981\u5148\u5728\u8bbe\u5907\u7684CLI\u754c\u9762\u4e2d\u4f7f\u7528save\u547d\u4ee4\u4fdd\u5b58\u914d\u7f6e\uff09\uff1a \\<huawei> save \u7136\u540e\u518d\u70b9\u51fbeNSP\u5de5\u5177\u680f\u7684\u201c\u4fdd\u5b58\u201d\u6309\u94ae\u5c06\u62d3\u6251\u53ca\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u5728\u6307\u5b9a\u76ee\u5f55\u5373\u53ef\u3002 \u4ea4\u6362\u57fa\u7840 \u00b6 \u4e8c\u5c42\u4ea4\u6362\u57fa\u7840 \u4e00\u4e2a\u5178\u578b\u7684\u6570\u636e\u7f51\u7edc\u662f\u7531\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u3001\u9632\u706b\u5899\u3001\u8d1f\u8f7d\u5747\u8861\u5668\u7b49\u7f51\u7edc\u8bbe\u5907\u6784\u6210\u7684\u3002\u5176\u4e2d\u4ea4\u6362\u673a\u4e00\u822c\u6765\u8bf4\u662f\u8ddd\u79bb\u7ec8\u7aef\u8bbe\u5907\uff08PC\u3001\u670d\u52a1\u5668\u7b49\uff09\u6700\u8fd1\u7684\u7f51\u7edc\u8bbe\u5907\uff0c\u4f8b\u5982\u4e0a\u56fe\u4e2d\u9ec4\u8272\u80cc\u666f\u6240\u6807\u6ce8\u7684\u8bbe\u5907\u3002 \u7f51\u7edc\u63a5\u5165\u5c42\uff08\u53ef\u4ee5\u7406\u89e3\u4e3a\u5728\u4e00\u4e2a\u7f51\u7edc\u4e2d\uff0c\u7528\u4e8e\u7ec8\u7aef\u8bbe\u5907\u63a5\u5165\u7684\u903b\u8f91\u5c42\u6b21\uff09\u7684\u4ea4\u6362\u673a\u4e00\u822c\u4e3a\u4e8c\u5c42\u4ea4\u6362\u673a\uff0c\u6240\u8c13\u7684\u4e8c\u5c42\u4ea4\u6362\u673a\u6307\u7684\u662f\u9488\u5bf9\u6570\u636e\u7684\u4e8c\u5c42\u5934\u90e8\uff08\u4ee5\u592a\u7f51\u5e27\u5934\uff09\u4e2d\u7684MAC\u5730\u5740\u8fdb\u884c\u5bfb\u5740\u5e76\u8f6c\u53d1\u6570\u636e\u7684\u4ea4\u6362\u8bbe\u5907\u3002\u4e8c\u5c42\u4ea4\u6362\u673a\u4e0d\u5177\u5907\u8def\u7531\u529f\u80fd\uff0c\u5b83\u5de5\u4f5c\u5728OSI\u4e03\u5c42\u6a21\u578b\u7684\u7b2c\u4e8c\u5c42\uff0c\u56e0\u6b64\u88ab\u79f0\u4e3a\u4e8c\u5c42\u4ea4\u6362\u673a\u3002 \u4e8c\u5c42\u4ea4\u6362\u662f\u4ee5\u592a\u7f51\u6280\u672f\u7684\u4e00\u4e2a\u975e\u5e38\u57fa\u7840\u7684\u6982\u5ff5\u3002 \u90a3\u4e48\u4ec0\u4e48\u662f\u4ee5\u592a\u7f51\u4e8c\u5c42\u4ea4\u6362\uff08Layer 2 Switching\uff09\u5462\uff1f \u4e3a\u4e86\u5c06\u5185\u7f51\u4e2d\u7684\u591a\u53f0PC\u4e92\u8054\u8d77\u6765\uff0c\u4f7f\u5f97PC\u4e4b\u95f4\u80fd\u591f\u4ee5\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u8fdb\u884c\u901a\u4fe1\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u7528\u4e00\u53f0\u4e8c\u5c42\u4ea4\u6362\u673a\u6765\u8fde\u63a5PC\uff0c\u5982\u4e0b\u56fe\uff1a \u5728\u4e0a\u56fe\u4e2d\uff0cPC1\u3001PC2\u3001PC3\u4e0ePC4\u8fde\u63a5\u5728\u540c\u4e00\u53f0\u4ee5\u592a\u7f51\u4e8c\u5c42\u4ea4\u6362\u673a\uff08\u540e\u7eed\u7b80\u79f0\u4e3a\u4e8c\u5c42\u4ea4\u6362\u673a\uff09\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u7b3c\u7edf\u5730\u8bf4\uff0c\u8fde\u63a5\u5728\u8fd9\u53f0\u4ea4\u6362\u673a\u4e0a\u7684PC\u90fd\u5c5e\u4e8e\u540c\u4e00\u4e2aLAN\u3002\u8fd9\u4e9bPC\u90fd\u62e5\u6709\u540c\u4e00\u4e2a\u7f51\u6bb5\u7684IP\u5730\u5740\uff0c\u540c\u65f6\u4e5f\u5904\u4e8e\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\uff08Broadcast Domain\uff09\u4e2d\uff0c\u6240\u8c13\u7684\u4e00\u4e2a\u5e7f\u64ad\u57df\uff0c\u6307\u7684\u662f\u4e00\u4e2a\u5e7f\u64ad\u6570\u636e\u6240\u80fd\u6cdb\u6d2a\u7684\u8303\u56f4\uff0c\u4e3e\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1aPC1\u53d1\u9001\u4e00\u4e2a\u5e7f\u64ad\u6570\u636e\u5e27\uff0c\u4ea4\u6362\u673a\u6536\u5230\u8fd9\u4e2a\u5e7f\u64ad\u6570\u636e\u5e27\u540e\uff0c\u4f1a\u4e3a\u9664\u4e86\u63a5\u6536\u8be5\u6570\u636e\u5e27\u7684\u63a5\u53e3\u4e4b\u5916\u7684\u5176\u4ed6\u6240\u6709\u63a5\u53e3\u90fd\u62f7\u8d1d\u4e00\u4efd\u7136\u540e\u53d1\u9001\u51fa\u53bb\uff0c\u63a5\u5728\u540c\u4e00\u4ea4\u6362\u673a\u4e0a\u7684\u6240\u6709\u7684PC\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u5e7f\u64ad\u6570\u636e\u5e27\u5e76\u4e14\u90fd\u8981\u53bb\u5206\u6790\u5b83\uff08\u5373\u4f7f\u5b83\u4eec\u53ef\u80fd\u5e76\u4e0d\u9700\u8981\u8fd9\u4e2a\u6570\u636e\u5e76\u4e14\u6700\u7ec8\u5c06\u6536\u5230\u7684\u6570\u636e\u5e27\u4e22\u5f03\uff0c\u4f46check\u6570\u636e\u7684\u8fc7\u7a0b\u4ecd\u7136\u4f1a\u6d88\u8017\u8bbe\u5907\u8d44\u6e90\uff09\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c5e\u4e8e\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u3002 \u73b0\u5728\u6765\u5206\u6790\u4e00\u4e0b\uff0cPC1\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u7ed9PC4\u65f6\uff0c\u90fd\u53d1\u751f\u4e86\u4ec0\u4e48\uff0c\u4ee5\u6b64\u6765\u7406\u89e3\u4e8c\u5c42\u4ea4\u6362\u7684\u5de5\u4f5c\u673a\u5236\u3002 PC1\u6784\u9020IP\u6570\u636e\u5305\uff0cIP\u62a5\u6587\u5934\u90e8\u91cc\u7684\u6e90IP\u5730\u5740\u4e3a\u81ea\u5df1\u7684\u7f51\u5361IP\u5730\u5740\uff0c\u76ee\u7684IP\u5730\u5740\u4e3aPC4\u7684IP\u5730\u5740\u3002\u4e0a\u8ff0 IP\u6570\u636e\u5305\u4e3a\u4e86\u80fd\u591f\u5728\u4ee5\u592a\u7f51\u73af\u5883\u4e2d\u4f20\u8f93\uff0c\u8fd8\u9700\u8981\u5c01\u88c5\u4e00\u4e2a\u4ee5\u592a\u7f51\u7684\u5934\u90e8\uff08\u5e27\u5934\uff09\u3002\u5728\u4ee5\u592a\u7f51\u5934\u90e8\u4e2d\u6e90 \uff08Source\uff0cSrc\uff09MAC\u5730\u5740\u4e3a8c00-BB01-0001\uff0c\u76ee\u7684\uff08Destination\uff0cDst\uff09MAC\u5730\u5740\u4e3a8c00-BB01-0004\uff0c \u5982\u4e0b\u56fe\u6240\u793a\u3002 \u4e0b\u56fe\u53ea\u63cf\u8ff0\u4e86\u6570\u636e\u5e27\u7684\u5e27\u5934\uff08\u6e90\u3001\u76ee\u7684MAC\u5730\u5740\u5b57\u6bb5\uff09\uff0c\u5bf9\u4e8eIP\u5305\u5934\u4ee5\u53ca\u6570\u636e\u8f7d\u8377\u90e8\u5206\u4e0d\u5728\u56fe\u4e2d\u63cf\u8ff0\u3002 \u8fd9\u4e2a\u6570\u636e\u5e27\u88ab\u53d1\u9001\u5230\u4e86PC1\u6240\u8fde\u63a5\u7684\u4ea4\u6362\u673a\u4e0a\u3002\u6211\u4eec\u77e5\u9053\u8def\u7531\u5668\u90fd\u7ef4\u62a4\u4e86\u4e00\u5f20\u8def\u7531\u8868\uff0c\u7528\u4e8e\u6307\u5bfc\u6570\u636e\u8f6c\u53d1\uff0c\u800c\u4ea4\u6362\u673a\u5728\u505a\u4e8c\u5c42\u4ea4\u6362\u7684\u65f6\u5019\u4f9d\u636e\u7684\u662f**MAC\u5730\u5740\u8868\uff08MAC Address Table\uff09 \u3002MAC\u5730\u5740\u8868\u4e2d\u5305\u542b\u7684\u8868\u9879\u6307\u793a\u51faMAC\u5730\u5740\u4e0e\u4ea4\u6362\u673a\u67d0\u4e2a\u63a5\u53e3\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u5728\u521d\u59cb\u60c5\u51b5\u4e0b\uff0c\u4ea4\u6362\u673a\u7684MAC\u5730\u5740\u8868\u662f\u7a7a\u7684\u3002\u5f53\u4ea4\u6362\u673a\u6536\u5230PC1\u53d1\u9001\u51fa\u6765\u7684\u8fd9\u4e2a\u6570\u636e\u5e27\u65f6\uff0c\u5b83\u9996\u5148\u5728\u81ea\u5df1\u7684MAC\u5730\u5740\u8868\u4e2d\u67e5\u8be2\u8be5\u5e27\u7684\u76ee\u7684MAC\u5730\u5740\uff0c \u7531\u4e8e\u6b64\u65f6\u5728MAC\u5730\u5740\u8868\u4e2d\uff0c\u5e76\u6ca1\u67098c00-BB01-0004\u8fd9\u4e2a\u5730\u5740\u7684\u6761\u76ee\uff0c\u56e0\u6b64\u4ea4\u6362\u673a\u5c06\u5bf9\u8fd9\u4e2a\u6570\u636e\u5e27\u8fdb\u884c**\u6cdb\u6d2aFlooding \uff0c\u6240\u8c13\u6cdb\u6d2a\u5c31\u662f\u5c06\u8fd9\u4e2a\u6570\u636e\u5e27\u4ece\u9664\u4e86\u6536\u5230\u5b83\u7684\u63a5\u53e3\u4e4b\u5916\u7684\u5176\u4ed6\u6240\u6709\u63a5\u53e3\u90fd\u53d1\u4e00\u4efd\u62f7\u8d1d\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u4e8b\u5b9e\u4e0a\u662f\uff1a\u201c\u54e5\u4e0d\u77e5\u9053\u4f60\u5728\u54ea\uff0c\u54e5\u7d22\u6027\u5c31\u5168\u90fd\u53d1\u4e00\u4efd\uff0c\u78b0\u78b0\u8fd0\u6c14\u201d\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u63a5\u4e0b\u6765\uff0c\u4ea4\u6362\u673a\u5c06\u8be5\u6570\u636e\u5e27\u7684\u6e90MAC\u5730\u5740\uff08\u4e5f\u5c31\u662fPC1\u7684MAC\u5730\u5740\uff09\u5b66\u4e60\u5230MAC\u5730\u5740\u8868\u4e2d\uff0c\u4e0e\u63a5\u53e3 GE0/0/1\u8fdb\u884c\u5173\u8054\u3002\u8fd9\u6837\uff0c\u4ea4\u6362\u673a\u5c31\u5b66\u4e60\u5230\u4e86\u4e00\u4e2aMAC\u5730\u5740\u6761\u76ee\u3002\u901a\u8fc7\u8be5\u6761\u76ee\uff0c\u4ea4\u6362\u673a\u77e5\u90538c00-BB01- 0001\u8fd9\u4e2aMAC\u5730\u5740\uff0c\u8fde\u63a5\u5728GE0/0/1\u63a5\u53e3\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7531\u4e8e\u4ea4\u6362\u673a\u7684\u6cdb\u6d2a\u884c\u4e3a\uff0c\u5bfc\u81f4\u8fde\u63a5\u5728\u8be5\u53f0\u4ea4\u6362\u673a\u4e0a\u7684\u5176\u4ed6PC\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\uff0c\u9664\u4e86PC4\u4e4b\u5916\u7684\u5176\u4ed6PC\u5728\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\u4e4b\u540e\uff0c\u5c06bit\u6d41\u8fd8\u539f\u6210\u5e27\u5e76\u67e5\u770b\u5e27\u5934\u90e8\u7684\u76ee\u7684MAC\uff0c\u53d1\u73b0\u8be5MAC\u4e0e\u672c\u673a\u7684MAC \u5e76\u4e0d\u4e00\u81f4\uff0c\u56e0\u6b64\u5224\u65ad\u8fd9\u4e2a\u6570\u636e\u5e27\u5e76\u975e\u53d1\u9001\u7ed9\u81ea\u5df1\uff0c\u4e8e\u662f\u4e22\u5f03\u4e4b\u3002\u800cPC4\u5728\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\u5e76\u67e5\u770b\u76ee\u7684 MAC\u53d1\u73b0\uff0c\u8fd9\u4e2a\u6570\u636e\u5e27\u7684\u76ee\u7684MAC\u4e0e\u81ea\u5df1\u7684MAC\u662f\u76f8\u540c\u7684\uff0c\u56e0\u6b64\u5224\u65ad\u8fd9\u4e2a\u6570\u636e\u5e27\u662f\u53d1\u9001\u7ed9\u81ea\u5df1\u7684\uff0c\u4e8e\u662f\u8fdb\u884cCRC\u6821\u9a8c\uff08\u6821\u9a8c\u6570\u636e\u5e27\u7684\u5b8c\u6574\u6027\uff09\uff0c\u6821\u9a8c\u6210\u529f\u540e\u5c06\u4ee5\u592a\u7f51\u5934\u90e8\u89e3\u5c01\u88c5\uff0c\u5c06\u5185\u5c42\u7684IP\u6570\u636e\u5c06\u7ed9IP\u534f\u8bae\u6808\u5904\u7406\u3002\u7136\u540e\uff0c\u8fdb\u4e00\u6b65\u67e5\u770bIP\u5934\u90e8\uff0c\u53d1\u73b0IP\u5934\u90e8\u4e2d\u7684\u76ee\u7684IP\u5730\u5740\u5c31\u662f\u672c\u673a\u7684IP\uff0c\u4e8e\u662f\u5c06IP\u5934\u90e8\u89e3\u5c01\u88c5\uff0c \u5c06\u5185\u5c42\u7684\u8f7d\u8377\u4ea4\u7ed9\u4e0a\u5c42\u534f\u8bae\u5904\u7406\u3002\u5982\u6b64\u4e00\u6765PC1\u53d1\u9001\u7ed9PC4\u7684\u6570\u636e\u5c31\u5b8c\u6210\u4e86\u4f20\u8f93\u3002 \u73b0\u5728\uff0cPC4\u8981\u56de\u9001\u6570\u636e\u7ed9PC1\uff0c\u6570\u636e\u7684\u6784\u9020\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u4ea4\u6362\u673a\u5728\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\u540e\uff0c\u9996\u5148\u5728\u81ea\u5df1\u7684MAC\u5730\u5740\u8868\u4e2d\u67e5\u8be2\u76ee\u7684MAC\u5730\u57408c00-BB01-0001\uff0c\u53d1\u73b0\u6709\u4e00\u4e2a\u5339\u914d\u7684\u8868\u9879\uff0c\u800c\u4e14\u8be5\u8868\u9879\u6307\u793a\u8fd9\u4e2aMAC\u5730\u5740\u8fde\u63a5\u5728GE0/0/1\u63a5\u53e3\u4e0a\uff0c\u4e8e\u662f\u4ea4\u6362\u673a\u5c06\u8fd9\u4e2a\u6570\u636e\u5e27\u4ece GE0/0/1\u63a5\u53e3\u53d1\u9001\u51fa\u53bb\u3002\u540c\u65f6\u4ea4\u6362\u673a\u8fd8\u4f1a\u5c06\u6570\u636e\u5e27\u7684\u6e90MAC\u5730\u57408c00-BB01-0004\u5b66\u4e60\u5230\u81ea\u5df1\u7684MAC\u5730\u5740\u8868\u4e2d\uff0c\u5e76\u4e0e\u63a5\u53e3GE0/0/4\u8fdb\u884c\u5173\u8054\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8fd9\u4e2a\u6570\u636e\u5e27\u6700\u7ec8\u88abPC1\u63a5\u6536\u5230\uff0c\u8fd9\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u5728\u4ee5\u592a\u7f51\u73af\u5883\u4e2d\u7684\u6570\u636e\u4ea4\u4e92\u8fc7\u7a0b\u3002 \u5c0f\u7ed3\u4e00\u4e0b\uff1a\u6240\u8c13\u7684\u4ee5\u592a\u7f51\u73af\u5883\u4e2d\u7684\u4e8c\u5c42\u4ea4\u6362\uff0c\u5c31\u662f\u6307\u7684\u5f53\u4e00\u53f0\u4ea4\u6362\u673a\u6536\u5230\u4e00\u4e2a\u6570\u636e\u5e27\u65f6\uff0c\u5206\u6790\u6570\u636e\u5e27\u5934\u90e8\u7684\u76ee\u7684MAC\u5730\u5740\uff0c\u5728MAC\u5730\u5740\u8868\u4e2d\u67e5\u8be2\u8fd9\u4e2aMAC\u5730\u5740\uff0c\u5982\u679c\u6709\u5339\u914d\u9879\uff0c\u5219\u5c06\u6570\u636e\u5e27\u4ece\u8be5\u5339\u914d\u9879\u6240\u5173\u8054\u7684\u63a5\u53e3\u8f6c\u53d1\u51fa\u53bb\uff1b\u5982\u679c\u6ca1\u6709\u5339\u914d\u9879\uff0c\u5219\u5c06\u6570\u636e\u5e27\u8fdb\u884c\u6cdb\u6d2a\u3002\u6240\u4ee5\uff1a\u4ee5\u592a\u7f51\u4e8c\u5c42\u4ea4\u6362\u662f\u57fa\u4e8e\u6570\u636e\u5e27\u7684\u5e27\u5934\u4e2d\u7684\u76ee\u7684 MAC\u5730\u5740\u8fdb\u884c\u67e5\u8be2\u7684\uff0c\u5e76\u4e14\u662f\u5728MAC\u5730\u5740\u8868\u4e2d\u8fdb\u884c\u67e5\u8be2\u3002\u6240\u4ee5\u638c\u63e1MAC\u5730\u5740\u8868\u7684\u67e5\u8be2\u53ca\u9605\u8bfb\u662f\u975e\u5e38\u6709\u5fc5\u8981\u7684\uff0c\u5728\u534e\u4e3a\u4ea4\u6362\u673a\u4e0a\uff0c\u53ef\u4f7f\u7528**display mac-address**\u547d\u4ee4\u53ef\u770b\u5230MAC\u5730\u5740\u8868\u3002MAC\u5730\u5740\u8868\u662f\u4ea4\u6362\u673a\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u7684\u975e\u5e38\u57fa\u7840\u7684\u6570\u636e\u8868\u3002 VLAN \u53ca Trunk VLAN \u7684\u57fa\u672c\u6982\u5ff5 \u5bf9\u4e8e\u4e00\u53f0\u4e8c\u5c42\u4ea4\u6362\u673a\u6765\u8bf4\uff0c\u7f3a\u7701\u65f6\u6574\u673a\u7684\u6240\u6709\u63a5\u53e3\u5c5e\u4e8e\u4e00\u4e2a\u5e7f\u64ad\u57df\u3002\u8fd9\u610f\u5473\u7740\uff0c\u53ea\u8981\u8fde\u63a5\u5230\u8fd9\u4e2a\u4ea4\u6362\u673a\u7684 PC\u90fd\u914d\u7f6e\u5728\u540c\u4e00\u4e2aIP\u5b50\u7f51\u5185\uff0c\u5373\u53ef\u76f4\u63a5\u8fdb\u884c\u4e92\u76f8\u8bbf\u95ee\uff0c\u800c\u4e14\u66f4\u91cd\u8981\u7684\u4e00\u70b9\u662f\uff0c\u5904\u4e8e\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\u7684\u67d0\u4e2a\u8282\u70b9\u53ea\u8981\u53d1\u9001\u4e00\u4e2a\u5e7f\u64ad\u6570\u636e\u5e27\uff0c\u5728\u8fd9\u4e2a\u5e7f\u64ad\u57df\u5185\u7684\u6240\u6709\u5176\u4ed6\u8282\u70b9\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\uff0c\u5e76\u4e14\u8017\u8d39\u8d44\u6e90\u6765\u5904 \u7406\uff08\u5373\u4f7f\u5b83\u53ef\u80fd\u5e76\u4e0d\u9700\u8981\u8fd9\u4e2a\u6570\u636e\u5e27\uff09\u3002\u5f53\u8fd9\u4e2a\u5e7f\u64ad\u57df\u53d8\u5f97\u7279\u522b\u5927\uff08\u4ea4\u6362\u673a\u4e0a\u8fde\u63a5\u7684\u7528\u6237\u6570\u91cf\u7279\u522b\u591a\uff09\u65f6\u7f51\u7edc\u5c31\u975e\u5e38\u6709\u53ef\u80fd\u88ab\u5927\u91cf\u7684\u5e7f\u64ad\u6d88\u8017\u6389\u5927\u91cf\u8d44\u6e90\u3002 \u53e6\u4e00\u65b9\u9762\uff0c\u5b9e\u9645\u7684\u7f51\u7edc\u4e2d\u7ecf\u5e38\u5b58\u5728\u8fd9\u6837\u7684\u9700\u6c42\uff1a\u8fde\u63a5\u5728\u540c\u4e00\u4e2a\u4ea4\u6362\u673a\u4e0a\u7684\u7528\u6237\u6709\u53ef\u80fd\u662f\u4e0d\u540c\u7684\u4e1a\u52a1\u5355\u5143\u6216\u8005\u90e8\u95e8\u7684\uff0c\u7528\u6237\u5e0c\u671b\u5bf9\u5b83\u4eec\u8fdb\u884c\u9694\u79bb\uff0c\u6216\u8005\u4ee5\u72ec\u7acb\u7684\u7f51\u7edc\u5355\u5143\u8fdb\u884c\u7ba1\u7406\u3002 \u57fa\u4e8e\u4e0a\u8ff0\u9700\u6c42\uff0c\u5f15\u5165\u4e86VLAN\u7684\u6982\u5ff5\uff0c\u6240\u8c13VLAN\uff0c\u4e5f\u5373Virtual LAN\uff0c\u662f\u4e00\u4e2a\u865a\u62df\u7684\u3001\u903b\u8f91\u7684LAN\uff0c\u901a\u8fc7VLAN \u6280\u672f\uff0c\u53ef\u4ee5\u5728\u4ea4\u6362\u673a\u4e0a\uff0c\u6839\u636e\u63a5\u53e3\u7b49\u4fe1\u606f\u8fdb\u884cVLAN\u7684\u5212\u5206\uff0c\u4ece\u800c\u5b9e\u73b0\u8bbe\u5907\u7684\u9694\u79bb\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u7528\u6237\u5728\u4ea4\u6362\u673a\u4e0a\u521b\u5efa\u4e862\u4e2aVLAN\uff0c\u7136\u540e\u5c06\u76f8\u5e94\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u6307\u5b9a\u7684VLAN\u4e2d\u2014\u2014\u5c06\u63a5\u53e31\u30012\u6dfb\u52a0\u5230\u4e86VLAN10\uff0c\u5c06\u63a5\u53e323\u300124\u6dfb\u52a0\u5230\u4e86VLAN20\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u63a5\u53e31\u30012\u6240\u8fde\u63a5\u7684PC\u5c31\u52a0\u5165\u4e86VLAN10\uff0c\u5b83\u4fe9\u5904\u4e8e\u540c\u4e00\u4e2aLAN\u3001\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\uff0c\u8fd9\u4e9bPC\u53ea\u8981\u914d\u7f6e\u540c\u4e00\u4e2a\u7f51\u6bb5\u7684IP\u5730\u5740\uff0c\u5c31\u80fd\u591f\u76f4\u63a5\u8fdb\u884c\u4e92\u8bbf\u4e86\uff08\u6211\u4eec\u5c06\u8fd9\u79cd\u901a\u4fe1\u79f0\u4e3a\u4e8c\u5c42\u4e92\u901a\uff09\u3002\u800c\u63a5\u53e323\u300124\u5904\u4e8eVLAN20\uff0c\u5373\u5904\u4e8e\u53e6\u4e00\u4e2aLAN\u3001\u53e6\u4e00\u4e2a\u5e7f\u64ad\u57df\u3002\u5c5e\u4e8eVLAN20 \u7684PC\u4e4b\u95f4\u80fd\u591f\u76f4\u63a5\u8fdb\u884c\u4e92\u8bbf\u3002\u4e0d\u540c\u7684VLAN\u4e4b\u95f4\uff0c\u7528\u6237\u662f\u88ab\u9694\u79bb\u7684\uff08\u9664\u975e\u501f\u52a9\u8def\u7531\u8bbe\u5907\uff0c\u6b64\u65f6\uff0c\u8fd9\u79cd\u8fd9\u79cd\u901a\u4fe1\u884c\u4e3a\u5c31\u662f\u4e09\u5c42\u901a\u4fe1\u4e86\uff09\uff0c\u5f53\u7136\uff0c\u4e00\u4e2aVLAN\u5185\u7684\u5e7f\u64ad\u6570\u636e\u5e27\u5e76\u4e0d\u4f1a\u88ab\u6cdb\u6d2a\u5230\u53e6\u4e00\u4e2aVLAN\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c5e\u4e8e\u4e0d\u540c\u7684\u5e7f\u64ad\u57df\u3002 \u6709\u4e86VLAN\u6280\u672f\uff0c\u7f51\u7edc\u8bbe\u8ba1\u5c06\u66f4\u52a0\u7075\u6d3b\u3002VLAN\u662f\u4e00\u4e2a\u865a\u62df\u7684LAN\uff0c\u4e0d\u53d7\u5730\u7406\u73af\u5883\u7684\u9650\u5236\u3002\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u7684\u4e1a\u52a1\u9700\u8981\uff0c\u7075\u6d3b\u5730\u8fdb\u884cVLAN\u7684\u89c4\u5212\uff0c\u4f8b\u5982\u5c06\u4e0d\u540c\u7684\u4e1a\u52a1\u90e8\u95e8\u89c4\u5212\u5230\u4e0d\u540c\u7684VLAN\u4e2d\u3002\u53e6\u5916\uff0cVLAN\u8fd8\u53ef\u4ee5\u8de8\u4ea4\u6362\u673a\u5b9e\u73b0\uff0c\u56e0\u6b64VLAN\u7684\u6210\u5458\uff0c\u4f8b\u5982\u4e1a\u52a1PC\uff0c\u6240\u5904\u7684\u4f4d\u7f6e\u5c31\u975e\u5e38\u7075\u6d3b\u4e86\u3002 \u4e0b\u9762\u505a\u4e00\u4e2a\u5c0f\u7ed3\uff1a \u00b6 \u4e00\u4e2aVLAN\u4e2d\u6240\u6709\u8bbe\u5907\u90fd\u5728\u540c\u4e00\u5e7f\u64ad\u57df\u5185\uff0c\u4e0d\u540c\u7684VLAN\u4e3a\u4e0d\u540c\u7684\u5e7f\u64ad\u57df\uff1b \u76f8\u540c\u7684VLAN\u5185\u7684\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u901a\u4fe1\uff0c\u8fd9\u79cd\u901a\u4fe1\u88ab\u79f0\u4e3a\u4e8c\u5c42\u901a\u4fe1\uff0c\u800c\u4e0d\u540c\u7684VLAN\u4e4b\u95f4\u4e92\u76f8\u9694\u79bb\uff0c \u5e7f\u64ad\u6570\u636e\u4e0d\u80fd\u8de8\u8d8aVLAN\u4f20\u64ad\uff0c\u56e0\u6b64\u4e0d\u540cVLAN\u4e4b\u95f4\u7684\u8bbe\u5907\u4e00\u822c\u65e0\u6cd5\u76f4\u63a5\u4e92\u8bbf\uff0c\u9700\u901a\u8fc7\u5177\u5907\u4e09\u5c42\u8def\u7531\u529f\u80fd\u7684\u8bbe\u5907\uff08\u4f8b\u5982\u8def\u7531\u5668\u3001\u4e09\u5c42\u4ea4\u6362\u673a\u6216\u9632\u706b\u5899\u7b49\uff09\u5b9e\u73b0\u76f8\u4e92\u901a\u4fe1\uff1b \u4e00\u4e2aVLAN\u4e00\u822c\u4f7f\u7528\u4e00\u4e2a\u903b\u8f91\u5b50\u7f51\uff08\u6216\u8005\u8bf4\u4e00\u4e2aIP\u5b50\u7f51\uff09\uff1b VLAN\u4e2d\u6210\u5458\u591a\u57fa\u4e8e\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u5206\u914d\uff0c\u6b64\u65f6\u5212\u5206VLAN\u5c31\u662f\u5c06\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u5206\u914d\u5230\u7279\u5b9a\u7684VLAN\u4e2d\uff1b\u53e6\u5916\uff0c\u534e\u4e3a\u4ea4\u6362\u673a\u4e5f\u652f\u6301\u57fa\u4e8eIP\u5730\u5740\u5212\u5206VLAN\u7b49\u5176\u4ed6VLAN\u5212\u5206\u65b9\u5f0f\u3002 VLAN\u5de5\u4f5c\u4e8eOSI\u53c2\u8003\u6a21\u578b\u7684\u7b2c\u4e8c\u5c42\uff1b VLAN\u662f\u4ea4\u6362\u673a\u7684\u4e00\u4e2a\u975e\u5e38\u57fa\u672c\u7684\u5de5\u4f5c\u673a\u5236\u3002 Access \u7c7b\u578b\u7684\u63a5\u53e3 \u4ea4\u6362\u673a\u7684\u7269\u7406\u63a5\u53e3\u7f3a\u7701\u90fd\u662f\u4e8c\u5c42\u63a5\u53e3\uff0c\u6240\u8c13\u7684\u4e8c\u5c42\u63a5\u53e3\uff0c\u7b80\u5355\u7684\u8bf4\u5c31\u662f\u4e0d\u80fd\u76f4\u63a5\u914d\u7f6eIP\u5730\u5740\u3001\u4e0d\u80fd\u9694\u7edd\u5e7f\u64ad\u3001\u65e0\u6cd5\u76f4\u63a5\u5904\u7406IP\u6570\u636e\u5305\u4e09\u5c42\u5934\u90e8\u7684\u63a5\u53e3\uff0c\u8fd9\u79cd\u63a5\u53e3\u53ea\u80fd\u6839\u636e\u6570\u636e\u5e27\u7684\u5934\u90e8\u4fe1\u606f\u8fdb\u884c\u5e27\u5904\u7406\u3002\u5728\u534e\u4e3a\u7684\u4ea4\u6362\u673a\u4e0a\uff0c\u4e8c\u5c42\u63a5\u53e3\u7684\u94fe\u8def\u7c7b\u578b\uff08Link type\uff09\u6709\uff1aAccess\u3001Trunk\u548chybrid\u4e09\u79cd\uff0c\u4ee5S9300\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u5176\u63a5\u53e3\u7f3a\u7701\u4e3ahybrid\u7c7b\u578b\u3002 VLAN\u662f\u4e8c\u5c42\u4ea4\u6362\u673a\u7684\u4e00\u4e2a\u5e95\u5c42\u6280\u672f\uff0c\u4e8c\u5c42\u4ea4\u6362\u673a\u5de5\u4f5c\u7684\u65b9\u65b9\u9762\u9762\u90fd\u53ef\u80fd\u4e0eVLAN\u6709\u5173\u7cfb\uff0c\u5305\u62ec\u63a5\u53e3\u7684\u5de5\u4f5c\u3002\u6211\u4eec\u9700\u8981\u6839\u636e\u5b9e\u9645\u9700\u8981\uff0c\u5c06\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u8bbe\u7f6e\u4e3a\u9002\u5f53\u7684\u7c7b\u578b\u3002 Access\u7c7b\u578b\u7684\u63a5\u53e3\u53ea\u80fd\u52a0\u5165\u4e00\u4e2aVLAN\uff0c\u8fd9\u79cd\u7c7b\u578b\u7684\u63a5\u53e3\u4e00\u822c\u7528\u4e8e\u8fde\u63a5PC\u3001\u670d\u52a1\u5668\u7b49\u7ec8\u7aef\u8bbe\u5907\uff0c\u6216\u8005\u8fde\u63a5\u8def\u7531\u5668\u3001\u9632\u706b\u5899\u7b49\u8bbe\u5907\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002Access\u63a5\u53e3\u53ea\u80fd\u53d1\u9001\u4e0d\u5e26\u6807\u8bb0\u7684\u6570\u636e\u5e27\uff08\u4e5f\u5c31\u662funtagged\u5e27\uff09\uff0c\u901a\u5e38\u4e5f\u53ea\u63a5\u6536untagged\u5e27\u3002 Trunk \u7c7b\u578b\u7684\u63a5\u53e3 \u5728\u4e00\u53f0\u4ea4\u6362\u673a\u4e0a\uff0c\u53ef\u4ee5\u521b\u5efa\u591a\u4e2aVLAN\u4ee5\u4fbf\u5bf9\u5e94\u4e0d\u540c\u7684\u4e1a\u52a1\uff0c\u7136\u540e\u57fa\u4e8e\u4ea4\u6362\u673a\u7684\u63a5\u53e3\uff0c\u5c06\u4e0d\u540c\u7684\u63a5\u53e3\u5212\u5206\u7ed9\u4e0d\u540c\u7684VLAN\u3002 \u5982\u679c\u5206\u522b\u5728\u4e24\u53f0\u4ea4\u6362\u673a\u4e0a\u90e8\u7f72\u4e86VLAN\uff0c\u5e76\u4e14\u505a\u4e86\u7edf\u4e00\u6027\u7684VLAN\u89c4\u5212\uff0c\u8fd9\u65f6\u4e24\u53f0\u4ea4\u6362\u673a\u5bf9\u63a5\u7684\u65f6\u5019\u5c31\u9700\u8981\u8c28\u614e\uff0c\u56e0\u4e3a\u8fd9\u4e24\u53f0\u4ea4\u6362\u673a\u4e4b\u95f4\u4e92\u8054\u7684\u94fe\u8def\u9700\u8981\u627f\u8f7d\u591a\u4e2aVLAN\u7684\u6570\u636e\uff0c\u5982\u679c\u67d0\u4e2a\u7279\u5b9aVLAN\u7684\u6570\u636e\u4ece\u4e00\u53f0\u4ea4\u6362\u673a\u53d1\u9001\u51fa\u6765\uff0c\u7ecf\u8fc7\u4ea4\u6362\u673a\u4e4b\u95f4\u7684\u94fe\u8def\u5230\u8fbe\u53e6\u4e00\u53f0\u4ea4\u6362\u673a\uff0c\u540e\u8005\u5982\u4f55\u5224\u5b9a\u8fd9\u4e2a\u6570\u636e\u5230\u5e95\u5e94\u8be5\u653e\u5165\u54ea\u4e00\u4e2a VLAN\u5462\uff1f\u8fd9\u91cc\u5c31\u9700\u8981\u4e00\u79cd\u201c\u6807\u8bb0\u201d\u624b\u6bb5\u3002\u5728\u5c06\u6570\u636e\u9001\u51fa\u8fd9\u4e2a\u4e92\u8054\u63a5\u53e3\u524d\uff0c\u7ed9\u6570\u636e\u505a\u4e0a\u76f8\u5e94\u7684\u6807\u8bb0\uff08Tag\uff09 \u6765\u6807\u8bb0\u8fd9\u4e2a\u6570\u636e\u662f\u4ece\u54ea\u4e00\u4e2aVLAN\u8dd1\u51fa\u6765\u7684\uff08\u5982\u4e0a\u56fe\u6240\u793a\uff09\uff0c\u8fd9\u6837\uff0c\u5bf9\u7aef\u4ea4\u6362\u673a\u5728\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u4e4b\u540e\uff0c\u5c31\u80fd\u591f\u6839\u636e\u524d\u8005\u5bf9\u6570\u636e\u6240\u505a\u7684\u6807\u8bb0\u6765\u8bc6\u522b\u6570\u636e\u7a76\u7adf\u662f\u5c5e\u4e8e\u54ea\u4e00\u4e2aVLAN\u7684\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u79f0\u4e24\u53f0\u4ea4\u6362\u673a\u4e4b\u95f4\u7684\u4e92\u8054\u94fe\u8def\u4e3a\u4e00\u6bb5\u5e72\u9053\u94fe\u8def\u3002\u8fd9\u91cc\u63d0\u5230\u7684\u201c\u6807\u8bb0\u201d\u624b\u6bb5\uff0c\u5e38\u88ab\u79f0\u4e3a\u5e72\u9053\u534f\u8bae\uff0c\u4e00\u4e2a\u4f17\u6240\u5468\u77e5\u7684\u516c\u6709\u6807\u51c6\u662f802.1q\uff0c \u6216\u8005\u53ebDot1q\uff0c\u7531\u4e8e\u662f\u516c\u6709\u6807\u51c6\uff0c\u56e0\u6b64\u6240\u6709\u7684\u4ea4\u6362\u673a\u5382\u5546\u90fd\u9075\u5faa\u8be5\u6807\u51c6\u3002 Dot1q\u9488\u5bf9\u6570\u636e\u5e27\u7684\u5904\u7406\u65b9\u5f0f\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5728\u539f\u59cb\u7684\u4ee5\u592a\u7f51\u6570\u636e\u5e27\u5934\u4e2d\u63d2\u5165\u4e00\u4e2aDot1q\u7684\u5b57\u6bb5\uff0c\u540c\u65f6\u91cd\u65b0\u505a CRC\u6821\u9a8c\u3002\u5728\u63d2\u5165\u7684Dot1q\u5b57\u6bb5\u4e2d\uff0c\u5c31\u6709VLAN-ID\u5b57\u6bb5\u7528\u6765\u6307\u793a\u8fd9\u4e2a\u6570\u636e\u5e27\u6240\u5c5e\u7684VLAN\uff0c\u6211\u4eec\u5c06\u6ca1\u6709\u643a\u5e26Dot1q Tag\u7684\u6570\u636e\u5e27\u79f0\u4e3a\u539f\u59cb\u4ee5\u592a\u7f51\u6570\u636e\u5e27\u6216\u65e0\u6807\u8bb0\u5e27\uff08Untagged Frame\uff09\uff0c\u5c06\u643a\u5e26\u4e86Dot1q Tag\u5b57\u6bb5\u7684\u6570\u636e\u5e27\u79f0\u4e3a\u6807\u8bb0\u5e27\uff08Tagged Frame\uff09\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u63a5\u53e3\u7c7b\u578b\u5c0f\u7ed3 \u4ee5\u592a\u7f51\u4ea4\u6362\u673a\u7684\u4e8c\u5c42\u63a5\u53e3\u7c7b\u578b \u00b6 \u534e\u4e3a\u4ea4\u6362\u673a\u7684\u4e8c\u5c42\u63a5\u53e3\u652f\u6301\u4e09\u79cd\u94fe\u8def\u7c7b\u578b\uff08Link type\uff09\uff0c\u5f53\u63a5\u53e3\u5de5\u4f5c\u5728\u4e8c\u5c42\u6a21\u5f0f\u65f6\uff0c\u5fc5\u987b\u4f7f\u7528\u8fd9\u4e09\u79cd\u7c7b\u578b\u4e2d\u7684\u4e00\u79cd\uff1a Access\uff1a \u00b6 Access\u63a5\u53e3\u5e38\u7528\u4e8e\u8fde\u63a5PC\u3001\u670d\u52a1\u5668\u6216\u5176\u4ed6\u7ec8\u7aef\uff0c\u6216\u8def\u7531\u5668\u7b49\u8bbe\u5907\u3002Access\u63a5\u53e3\u53ea\u80fd\u52a0\u5165\u4e00\u4e2aVLAN\uff0c \u4e00\u65e6\u52a0\u5165\u7279\u5b9aVLAN\u540e\uff0c\u8be5\u63a5\u53e3\u6240\u8fde\u63a5\u7684\u8bbe\u5907\u4e5f\u5c31\u52a0\u5165\u4e86\u8be5VLAN\u3002 Trunk\uff1a \u00b6 Trunk\u63a5\u53e3\u4e00\u822c\u7528\u4e8e\u4ea4\u6362\u673a\u4e4b\u95f4\u8fde\u63a5\u7684\u7aef\u53e3\uff0ctrunk\u53e3\u53ef\u4ee5\u52a0\u5165\u591a\u4e2aVLAN\uff0c\u53ef\u4ee5\u63a5\u6536\u548c\u53d1\u9001\u591a\u4e2a VLAN\u7684Tagged\u5e27\u3002\u5f53\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u8fde\u63a5\u7684\u5bf9\u7aef\u8bbe\u5907\uff08\u4f8b\u5982\u8def\u7531\u5668\u6216\u9632\u706b\u5899\uff09\u7684\u63a5\u53e3\u90e8\u7f72\u4e86\u4ee5\u592a\u7f51\u5b50\u63a5\u53e3\uff0c\u90a3\u4e48\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\uff0c\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u4e5f\u9700\u914d\u7f6e\u4e3atrunk\u7c7b\u578b\uff08\u6216\u8005Hybrid\u7c7b\u578b\uff09\u3002 Hybrid\uff1a \u00b6 \u53ef\u4ee5\u7528\u4e8e\u4ea4\u6362\u673a\u4e4b\u95f4\u8fde\u63a5\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u63a5\u7528\u6237\u7684\u8ba1\u7b97\u673a\uff0chybrid\u53e3\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2aVLAN\uff0c\u53ef\u4ee5\u63a5\u6536\u548c\u53d1\u9001\u591a\u4e2aVLAN\u7684Tagged\u5e27\u3002\u53ef\u6839\u636e\u9700\u6c42\u7075\u6d3b\u8bbe\u7f6e\u7279\u5b9aVLAN\u7684\u6570\u636e\u5e27\u5728\u53d1\u9001\u65f6\u662f\u5426\u6253\u6807\u8bb0 \uff08Trunk\u63a5\u53e3\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2aVLAN\u5728\u53d1\u9001\u6570\u636e\u5e27\u65f6\u4e0d\u6253\u6807\u8bb0\uff0c\u800chybrid\u63a5\u53e3\u5219\u53ef\u8bbe\u7f6e\u591a\u4e2aVLAN\u5728\u53d1\u9001\u6570\u636e\u5e27\u65f6\u4e0d\u6253\u6807\u8bb0\uff09\u3002 \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u770b\u770b\u5404\u79cd\u7c7b\u578b\u7684\u63a5\u53e3\u5728\u6536\u3001\u53d1\u6570\u636e\u5e27\u65f6\u7684\u7279\u70b9\u3002 Access\u53e3\u63a5\u6536\u5e27 \u00b6 \u5982\u679c\u8be5\u5e27\u662fUntagged\u5e27\uff0c\u5219\u63a5\u6536\u5e27\u5e76\u6253\u4e0a\u63a5\u53e3\u7684PVID\uff08\u4e5f\u5c31\u662f\u8be5Access\u63a5\u53e3\u7684default vlan\u6216\u7f3a\u7701VLAN\uff09\uff1b \u5982\u679c\u8be5\u5e27\u662fTagged\u5e27\uff0c\u5219\u5f53\u5176VLAN-ID\u4e0e\u63a5\u53e3PVID\u76f8\u540c\u65f6\uff0c\u63a5\u6536\u8be5\u5e27\uff0c\u5426\u5219\u4e22\u5f03\u3002 Access\u53e3\u53d1\u9001\u5e27 \u00b6 \u5728\u53d1\u9001\u6570\u636e\u5e27\u65f6\uff0c\u5265\u79bb\u5176Tag\uff0c\u53d1\u51fa\u7684\u5e27\u4e3a\u539f\u59cb\u4ee5\u592a\u7f51\u5e27\uff0c\u4e5f\u5c31\u662fUntagged\u5e27\u3002 \u7531\u4e8eAccess\u63a5\u53e3\u901a\u5e38\u7528\u4e8e\u8fde\u63a5\u7ec8\u7aef\u8bbe\u5907\uff0c\u800c\u7ec8\u7aef\u8bbe\u5907\u901a\u5e38\u662f\u53ea\u80fd\u591f\u8bc6\u522bUntagged\u5e27\u7684\uff0c\u56e0\u6b64Access\u63a5\u53e3\u5728\u53d1\u9001\u6570\u636e\u5e27\u65f6\uff0c\u59cb\u7ec8\u662f\u4e0d\u4f1a\u643a\u5e26\u6807\u8bb0\u7684\u3002 Trunk\u53e3\u63a5\u6536\u5e27 \u00b6 \u82e5\u6536\u5230\u7684\u6570\u636e\u5e27\u662fUntagged\u5e27\uff0c\u5219\u4e3a\u6570\u636e\u5e27\u6253\u4e0a\u63a5\u53e3PVID\u7684\u6807\u8bb0\uff0c\u7136\u540e\uff0c\u5982\u679cPVID\u5728\u63a5\u53e3\u5141\u8bb8\u901a\u884c \uff08Allow-pass\uff09\u7684VLAN\u5217\u8868\u91cc\uff0c\u5219\u63a5\u6536\u8be5\u5e27\uff0c\u82e5PVID\u4e0d\u5728\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u91cc\uff0c\u5219\u4e22\u5f03\u3002\u7f3a\u7701\u65f6\uff0cTrunk\u63a5\u53e3\u7684PVID\u4e3a1\uff0c\u800c\u4e14VLAN1\u7f3a\u7701\u5df2\u7ecf\u5728\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u4e2d\u3002 \u82e5\u6536\u5230\u7684\u6570\u636e\u5e27\u662fTagged\u5e27\uff0c\u4e14\u5176VLAN-ID\u5728\u63a5\u53e3\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u91cc\uff0c\u5219\u63a5\u6536\u8be5\u5e27\u3002\u5426\u5219\u4e22\u5f03\u3002 Trunk\u53e3\u53d1\u9001\u5e27 \u00b6 \u82e5\u8be5\u5e27\u7684VLAN-ID\u4e0e\u63a5\u53e3PVID\u76f8\u540c\uff0c\u4e14\u8be5VLAN\u5728\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u4e2d\uff0c\u5219\u53bb\u6389Tag\uff0c\u53d1\u9001\u6570\u636e\u5e27\u3002\u82e5\u8be5\u5e27\u7684VLAN-ID\u4e0e\u63a5\u53e3PVID\u4e0d\u540c\uff0c\u4e14\u8be5VLAN\u5728\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u4e2d\uff0c\u5219\u4fdd\u6301\u539f\u6709Tag\uff0c\u53d1\u9001\u8be5 Tagged\u5e27\uff0c\u800c\u5982\u679c\u6570\u636e\u5e27\u7684VLAN-ID\u4e0d\u5728\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u4e2d\uff0c\u5219\u7981\u6b62\u4ece\u8be5\u63a5\u53e3\u53d1\u51fa\u3002 Hybrid\u53e3\u63a5\u6536\u5e27 \u00b6 \u82e5\u6570\u636e\u5e27\u662fUntagged\u5e27\uff0c\u5219\u5c06\u5176\u6253\u4e0aPVID\u7684Tag\uff0c\u7136\u540e\uff0c\u82e5PVID\u5728\u63a5\u53e3\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u91cc\u5219\u63a5\u6536\uff0c\u5426\u5219\u4e22\u5f03\u3002 \u82e5\u6570\u636e\u5e27\u662fTagged\u5e27\uff0c\u4e14\u5176VLAN-ID\u5728\u63a5\u53e3\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u91cc\u5219\u63a5\u6536\u8be5\u5e27\uff0c\u5426\u5219\u4e22\u5f03\u3002 Hybrid\u53e3\u53d1\u9001\u5e27 \u00b6 \u5f53\u8be5\u5e27\u7684VLAN-ID\u662f\u63a5\u53e3\u5141\u8bb8\u901a\u884c\u7684VLAN\u65f6\uff0c\u53d1\u9001\u8be5\u5e27\uff0c\u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u8bbe\u7f6e\u53d1\u9001\u65f6\u662f\u5426\u643a\u5e26Tag\u3002 VLAN \u53ca Trunk \u7684\u57fa\u7840\u914d\u7f6e VLAN\u76f8\u5173\u7684\u57fa\u7840\u914d\u7f6e\u547d\u4ee4 \u00b6 \u5728\u4ea4\u6362\u673a\u4e0a\u521b\u5efaVLAN10\u5e76\u8fdb\u5165VLAN10\u7684\u914d\u7f6e\u89c6\u56fe\uff1a \uff08\u53ef\u9009\uff09\u5728\u7279\u5b9a\u7684VLAN\u89c6\u56fe\u4e0b\u6dfb\u52a0VLAN\u63cf\u8ff0\uff1a [Quidway-vlan10] description TechVLAN \u5c06\u7279\u5b9a\u7684\u63a5\u53e3\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\uff0c\u5e76\u52a0\u5165\u7279\u5b9aVLAN\u3002\u4e0b\u9762\u4ee5\u5c06GE0/0/1\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\u5e76\u52a0\u5165 VLAN10\u4e3a\u4f8b\uff1a \u5c06\u7279\u5b9a\u63a5\u53e3\u914d\u7f6e\u4e3atrunk\u7c7b\u578b\uff0c\u7136\u540e\u914d\u7f6etrunk\u63a5\u53e3\u5141\u8bb8\u901a\u884c\u7684VLAN\uff1a \uff08\u53ef\u9009\uff09\u914d\u7f6eTrunk\u63a5\u53e3\u7684PVID\u3002PVID\u6240\u5bf9\u5e94VLAN\u7684\u6d41\u91cf\u4ecetrunk\u63a5\u53e3\u53d1\u9001\u51fa\u53bb\u65f6\u4e0d\u4f1a\u6253Tag\uff08\u4e5f\u5c31\u662f\u4ee5Untagged\u5e27\u53d1\u9001\uff09\uff0c\u53e6\u5916\uff0c\u5982\u679cTrunk\u63a5\u53e3\u6536\u5230Untagged\u5e27\uff0c\u4e5f\u8ba4\u4e3a\u662f\u5c5e\u4e8ePVID\u6240\u5bf9\u5e94\u7684VLAN\u3002\u7f3a\u7701\u65f6PVID\u662f1\u3002\u4ee5\u4e0b\u5c06GE0/0/24\u63a5\u53e3\uff08\u8be5\u63a5\u53e3\u5df2\u7ecf\u88ab\u914d\u7f6e\u4e3aTrunk\u7c7b\u578b\uff09\u7684PVID\u4fee\u6539\u4e3a99\uff1a [Quidway-gigabitEthernet0/0/24] port trunk pvid vlan 99 VLAN\u57fa\u7840\u914d\u7f6e\u793a\u4f8b \u00b6 \u5728\u4ea4\u6362\u673a\u4e0a\u521b\u5efaVLAN10\u53caVLAN20\uff0c\u5c06PC1\uff08\u6240\u5728\u63a5\u53e3\uff09\u5212\u5165VLAN10\uff0c\u5c06PC2\u5212\u5165VLAN20\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5728SW1\u4e0a\u53ef\u8fdb\u884c\u76f8\u5e94\u7684\u67e5\u770b\uff1a \u53e6\u5916\uff0c\u4f7f\u7528**display port vlan**\u547d\u4ee4\u4e5f\u80fd\u67e5\u770b\u6bcf\u4e2a\u63a5\u53e3\u7684link type\u4ee5\u53ca\u6240\u52a0\u5165\u7684VLAN\u7b49\u4fe1\u606f\u3002 VLAN\u53caTrunk\u57fa\u7840\u5b9e\u9a8c \u00b6 \u5728SW1\u3001SW2\u4e0a\u521b\u5efaVLAN10\u53caVLAN20\uff0c\u5c06\u4ea4\u6362\u673a\u8fde\u63a5PC\u7684\u63a5\u53e3\u914d\u7f6e\u4e3aAccess\u7c7b\u578b\u5e76\u6dfb\u52a0\u5230\u5982\u56fe\u6240\u793a\u7684VLAN\u3002\u7136\u540e\uff0c\u5c06\u4e24\u53f0\u4ea4\u6362\u673a\u4e92\u8054\u7684\u63a5\u53e3\u914d\u7f6e\u4e3aTrunk\u7c7b\u578b\uff0c\u5e76\u653e\u901a\u76f8\u5e94\u7684VLAN\uff0c\u4f7f\u5f97\u76f8\u540cVLAN \u5185\u7684PC\u80fd\u591f\u76f4\u63a5\u901a\u4fe1\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u540c\u4e00\u4e2aVLAN\u5185\u7684\u7528\u6237\u5c31\u80fd\u591f\u4e92\u76f8\u901a\u4fe1\u4e86\uff0c\u4f8b\u5982PC1\u53ef\u4ee5ping\u901aPC3\uff0c\u800cPC2\u4e5f\u80fd\u591f ping\u901aPC4\u3002\u4f46\u662f\u4e0d\u540c\u7684VLAN\u4e4b\u95f4\u662f\u65e0\u6cd5\u4e92\u8bbf\u7684\u3002 Hybrid \u63a5\u53e3\u7684\u914d\u7f6e Hybrid\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u4e8c\u5c42\u63a5\u53e3\u7c7b\u578b\u3002\u4e0etrunk\u7c7b\u578b\u7684\u63a5\u53e3\u7c7b\u4f3c\uff0chybrid\u7c7b\u578b\u7684\u63a5\u53e3\u4e5f\u80fd\u591f\u627f\u8f7d\u591a\u4e2aVLAN\u7684\u6570\u636e\u5e27\uff0c\u800c\u4e14\u5b83\u80fd\u591f\u7075\u6d3b\u7684\u8bbe\u7f6e\u63a5\u53e3\u5728\u53d1\u9001\u6570\u636e\u5e27\u65f6\uff0c\u662f\u5426\u643a\u5e26tag\u3002\u53e6\u4e00\u65b9\u9762\uff0chybrid\u7c7b\u578b\u7684\u63a5\u53e3\u8fd8\u80fd\u7528\u4e8e\u90e8\u7f72\u57fa\u4e8eIP\u5730\u5740\u7684VLAN\u5212\u5206\u3002\u4e0b\u9762\u6211\u4eec\u5c06\u9488\u5bf9\u51e0\u79cd\u4f7f\u7528\u573a\u666f\uff0c\u8bb2\u8bb2hrbrid\u63a5\u53e3\u7684\u914d\u7f6e\u3002 Hybrid\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u7ec8\u7aefPC \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cPC1\u8fde\u63a5\u5728SW1\u7684GE0/0/1\u63a5\u53e3\u4e0a\uff0c\u73b0\u5728\u5c06SW1\u7684GE0/0/1\u63a5\u53e3\u505a\u5982\u4e0b\u914d\u7f6e\uff1a \u4ee5\u4e0a\u547d\u4ee4\u5c06GE0/0/1\u63a5\u53e3\u914d\u7f6e\u4e3ahybrid\u7c7b\u578b\uff0c\u4ee5S5300\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u63a5\u53e3\u7f3a\u7701\u5373\u4e3a\u8be5\u7c7b\u578b\uff0c\u800c\u4e14\u7f3a\u7701\u5c06 VLAN1\u8bbe\u7f6e\u4e3aPVID\uff08\u7f3a\u7701VLAN\uff09\uff0c\u5e76\u4e14\u63a5\u53e3\u5df2\u7ecf\u653e\u901aVLAN1\uff08\u7f3a\u7701\u5c31\u914d\u7f6e\u4e86**port hybrid untagged vlan 1**\uff09\u3002\u56e0\u6b64\u5728\u8fd9\u4e2a\u573a\u666f\u4e2d\uff0c\u5982\u679c\u4e3aSW1\u7684Vlanif1\u914d\u7f6e\u4e00\u4e2a192.168.10.0/24\u7f51\u6bb5\u7684IP\u5730\u5740\uff0c\u5219PC1 \u4e0eSW1\u5373\u53ef\u5b9e\u73b0\u4e92\u901a\u3002\u6b64\u65f6PC1\u88ab\u8ba4\u4e3a\u5c5e\u4e8eVLAN1\u3002 \u5982\u679c\u6211\u4eec\u671f\u671b\u5c06PC1\u89c4\u5212\u5728VLAN10\u4e2d\uff0c\u90a3\u4e48\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a \u4e0a\u9762\u914d\u7f6e\u4e2d**port hybrid pvid vlan 10**\u547d\u4ee4\u7528\u4e8e\u5c06\u63a5\u53e3\u7684PVID\u4fee\u6539\u4e3a10\uff0c\u8fd9\u6837\u5f53\u8be5\u63a5\u53e3\u6536\u5230PC1\u53d1\u9001\u51fa \u6765\u7684untagged\u5e27\u65f6\uff0c\u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e9b\u5e27\u6765\u81ea\u4e8eVLAN10\uff1b\u800c**port hybrid untagged vlan 10**\u547d\u4ee4\u5219\u7528\u4e8e\u5c06\u8be5\u63a5\u53e3\u52a0\u5165VLAN10\uff0c\u4f7f\u5f97PC1\u6240\u53d1\u9001\u7684\u6570\u636e\u5e27\u80fd\u591f\u8fdb\u5165GE0/0/1\u63a5\u53e3\uff08\u88ab\u8be5\u63a5\u53e3\u63a5\u6536\uff09\u4ece\u800c\u8fdb\u5165\u4ea4\u6362\u673a\uff0c\u53e6\u5916\uff0c\u8fd9\u6761\u547d\u4ee4\u8fd8\u4f7f\u5f97\u4ea4\u6362\u673a\u5728\u4eceGE0/0/1\u63a5\u53e3\u5411\u5916\u53d1\u9001VLAN10\u7684\u6570\u636e\u5e27\u65f6\uff0c\u4ee5untagged\u7684\u65b9\u5f0f\u53d1\u9001\u3002\u56e0\u6b64\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cPC1\u88ab\u8ba4\u4e3a\u5c5e\u4e8eVLAN10\uff0c\u5e76\u4e14\u80fd\u591fping\u901aSW1\u7684vlanif10\u63a5\u53e3IP\u5730\u5740\uff1a 192.168.10.3\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5728PC1\u53d1\u9001\u7684\u6570\u636e\u5e27\u8fdb\u5165\u4ea4\u6362\u673aSW1\u4e4b\u540e\uff0c\u5982\u679cSW1\u5c06\u6570\u636e\u5e27\u900f\u4f20\u5904\u7406\uff0c\u90a3\u4e48\u8be5\u5e27\u4ece GE0/0/15\u53d1\u51fa\u65f6\uff0c\u662f\u5426\u643a\u5e26tag\uff0c\u5219\u8981\u6839\u636eGE0/0/15\u63a5\u53e3\u7684\u914d\u7f6e\u800c\u5b9a\u3002 Hybric\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u4ea4\u6362\u673a \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cSW1\u53caSW2\u5206\u522b\u8fde\u63a5\u7740PC1\u53caPC2\uff0c\u6211\u4eec\u5c06\u4e24\u53f0\u4ea4\u6362\u673a\u7684GE0/0/1\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\uff0c\u5e76\u4e14\u90fd\u52a0\u5165VLAN10\u3002\u73b0\u5728SW1\u7684GE0/0/15\u88ab\u914d\u7f6e\u4e3atrunk\u7c7b\u578b\uff0c\u5e76\u4e14\u653e\u901a\u4e86VLAN10\uff1a \u73b0\u5728\uff0c\u6765\u770b\u770b\u5982\u679cSW2\u7684GE0/0/15\u63a5\u53e3\u91c7\u7528hybrid\u7c7b\u578b\u8be5\u5982\u4f55\u914d\u7f6e\uff08\u7eaf\u7cb9\u4e3a\u4e86\u8bb2\u89e3hybrid\u7684\u914d\u7f6e\u800c\u4e3e\u4f8b\uff0c \u901a\u5e38\u6211\u4eec\u4f1a\u4e3a\u94fe\u8def\u4e24\u7aef\u7684\u63a5\u53e3\u914d\u7f6e\u76f8\u540c\u7684\u7c7b\u578b\uff09\u3002 \u7531\u4e8e\u5bf9\u7aef\u63a5\u53e3\uff08SW1\u7684GE0/0/15\uff09\u4ee5tagged\u7684\u65b9\u5f0f\u53d1\u9001VLAN10\u7684\u6570\u636e\u5e27\uff0c\u56e0\u6b64SW2\u7684GE0/0/15\u63a5\u53e3\u4e5f\u5fc5\u987b\u5c06VLAN10\u4ee5tagged\u7684\u65b9\u5f0f\u5904\u7406\uff1a **port hybrid tagged vlan 10**\u547d\u4ee4\u7528\u4e8e\u5c06GE0/0/15\u63a5\u53e3\u52a0\u5165VLAN10\uff0c\u5e76\u4e14\u8be5VLAN\u7684\u5e27\u4ee5Tagged\u65b9\u5f0f \u901a\u8fc7\u63a5\u53e3\u3002 \u73b0\u5728\u8003\u8651\u53e6\u4e00\u79cd\u60c5\u51b5\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a SW1\u5de6\u4fa7\u8fde\u63a5\u7740VLAN10\u300120\u4ee5\u53ca1000\uff0c\u73b0\u5728SW1\u7684GE0/0/15\u505a\u4e86\u5982\u4e0b\u914d\u7f6e\uff1a \u4e5f\u5373SW1\u5728\u901a\u8fc7GE0/0/15\u5f80\u5916\u53d1\u9001\u6570\u636e\u5e27\u65f6\uff0c\u5bf9\u4e8eVLAN10\u53caVLAN20\u91c7\u7528tagged\u5e27\u7684\u65b9\u5f0f\u53d1\u9001\uff0c\u800c\u5bf9 \u4e8eVLAN1000\u5219\u91c7\u7528untagged\u5e27\u7684\u65b9\u5f0f\u53d1\u9001\uff0c\u90a3\u4e48\u5982\u679cSW2\u91c7\u7528hybrid\u63a5\u53e3\u4e0e\u5176\u5bf9\u63a5\uff0c\u6b64\u65f6\u8be5\u63a5\u53e3\u7684\u914d\u7f6e\u5e94\u8be5\u5982\u4e0b\uff1a \u57fa\u4e8eIP\u5730\u5740\u8bc6\u522bVLAN\u7684\u529f\u80fd \u00b6 \u901a\u5e38\u6211\u4eec\u5728\u5212\u5206VLAN\u65f6\uff0c\u662f\u91c7\u7528\u57fa\u4e8e\u63a5\u53e3\u5212\u5206VLAN\u7684\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u901a\u8fc7\u547d\u4ee4\uff0c\u5c06\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u52a0\u5165\u67d0\u4e2a\u7279\u5b9a\u7684VLAN\u3002\u67d0\u5c40\u70b9\u9047\u5230\u4e2a\u8f83\u4e3a\u201c\u7279\u6b8a\u201d\u7684\u9700\u6c42\uff1a\u5728\u4e0b\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0cSW2\u4e0b\u6302\u7740\u4e09\u53f0\u670d\u52a1\u5668\uff0c \u5176\u4e2dSW2\u8fde\u63a5Server1\u3001Server2\u7684\u63a5\u53e3\u662fAccess\u7c7b\u578b\u63a5\u53e3\uff0c\u800c\u4e14\u63a5\u53e3\u52a0\u5165\u4e86VLAN1\uff1b\u8fde\u63a5Server3\u7684\u63a5\u53e3\u4e5f\u662fAccess\u7c7b\u578b\uff0c\u4f46\u662f\u52a0\u5165\u4e86VLAN30\u3002\u800cSW2\u4e0a\u8054SW1\u7684\u4e0a\u884c\u53e3\u5219\u662fTrunk\u7c7b\u578b\u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u653e\u901a\u4e86VLAN1\u53caVLAN30\uff0c\u5e76\u4e14PVID\u4e3a1\u3002 \u5982\u6b64\u4e00\u6765\uff0cSW1\u5c06\u4f1a\u5728GE6/0/15\u63a5\u53e3\u4e0a\u6536\u5230\u4e09\u79cd\u7c7b\u578b\u7684\u6d41\u91cf\uff0c\u5206\u522b\u662f\u6e90\u5730\u5740\u4e3a10.10.10.0/24\u7f51\u6bb5\u7684\u65e0\u6807\u8bb0\u5e27\u3001\u6e90\u5730\u5740\u4e3a10.10.20.0/24\u7f51\u6bb5\u7684\u65e0\u6807\u8bb0\u5e27\uff0c\u4ee5\u53caVLAN30\u7684\u6807\u8bb0\u5e27\u3002\u73b0\u5728\u9700\u6c42\u662f\uff0c\u6839\u636e\u89c4\u5212\uff0c\u5c06\u4e0a\u8ff0\u5404\u4e2a\u7f51\u6bb5\u5728\u6838\u5fc3\u4ea4\u6362\u673aCoreSwitch\u4e0a\u5bf9\u5e94\u5230\u4e0d\u540c\u7684VLAN\uff0c\u5e76\u4e14\u5b9e\u73b0\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u76f8\u4e92\u901a\u4fe1\u3002\u7531\u4e8e\u67d0\u79cd\u539f\u56e0\uff0cSW2\u662f\u65e0\u6cd5\u88ab\u76f4\u63a5\u7ba1\u7406\u7684\uff0c\u56e0\u6b64\u53ea\u80fd\u5728SW1\u53caCoreSwitch\u4e0a\u5b8c\u6210\u914d\u7f6e\u3002 \u5b9e\u9645\u7684\u9700\u6c42\u662f\uff0c\u5728SW1\u4e0a\u5b8c\u6210\u76f8\u5e94\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5176\u5728GE6/0/15\u63a5\u53e3\u4e0a\u6536\u5230\u6e90\u5730\u5740\u4e3a10.10.10.0/24\u7f51\u6bb5\u7684\u6570\u636e\u65f6\uff0c\u5c06\u5176\u8bc6\u522b\u4e3aVLAN10\u7684\u6570\u636e\uff0c\u6536\u5230\u6e90\u5730\u5740\u4e3a10.10.20.0/24\u7684\u6570\u636e\u65f6\uff0c\u5c06\u5176\u8bc6\u522b\u4e3aVLAN20\u7684\u6570\u636e\uff0c\u800cVLAN30\u7684\u6570\u636e\u9700\u4e3a\u6807\u8bb0\u5e27\u3002\u56e0\u6b64\u9700\u5728SW1\u4e0a\u90e8\u7f72\u57fa\u4e8eIP\u5730\u5740\u7684VLAN\u5212\u5206\u3002\u5f53\u7136\uff0c\u8fd9\u4e2a\u63a5\u53e3\u5728\u53d1\u9001VLAN10\u53caVLAN20\u7684\u6570\u636e\u5e27\u65f6\uff0c\u4e0d\u80fd\u6253\u6807\u8bb0\uff0c\u800c\u5728\u53d1\u9001VLAN30\u7684\u6570\u636e\u5e27\u65f6\uff0c\u5219\u9700\u8981\u6253\u6807\u8bb0\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CoreSwitch\u7684\u914d\u7f6e\u5982\u4e0b\uff1a QinQ \u5728\u4e0a\u56fe\u4e2d\uff0cCE1\u53caCE2\u4e24\u53f0\u4ea4\u6362\u673a\u90fd\u90e8\u7f72\u4e86VLAN10\u3002\u4e24\u53f0\u4ea4\u6362\u673a\u5206\u522b\u63a5\u5165\u4e86SW1\u53caSW2\u3002SW1\u53caSW2\u662f\u4e24\u53f0\u516c\u7f51\u4ea4\u6362\u673a\uff0c\u4e14\u8fde\u63a5\u7740\u5176\u4ed6\u8bbe\u5907\uff0c\u4e3a\u4e86\u4fdd\u8bc1CE1\u53caCE2\u80fd\u591f\u5728VLAN10\u4e2d\u5b9e\u73b0\u4e8c\u5c42\u901a\u4fe1\uff0c\u800c\u4e14\u4e0d\u4e0e\u5176\u4ed6\u8bbe\u5907\u4ea7\u751f\u51b2\u7a81\uff0c\u516c\u7f51\u4e3a\u8be5\u4e1a\u52a1\u5206\u914d\u4e86\u5916\u5c42VLAN160\u3002 \u5728SW1\u53caSW2\u4e0a\u90e8\u7f72QinQ\u4f7f\u5f97CE1\u80fd\u591f\u8bbf\u95eeCE2\u3002\u56fe\u4e2d\u7684\u4ea4\u6362\u673a\u4ee5S5700 V2R1C00\u7248\u672c\u4e3a\u4f8b\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u4eceCE1\u5373\u53efping\u901a10.1.1.2\u3002\u5728SW1\u53caSW2\u4e4b\u95f4\u53ef\u6355\u83b7\u5982\u4e0bICMP Request\u62a5\u6587\uff1a \u7559\u610f\u5230\u8be5\u62a5\u6587\u643a\u5e26\u4e24\u5c42VLAN-Tag\uff0c\u5176\u4e2d\u5916\u5c42VLAN-ID\u4e3a160\uff0c\u800c\u5185\u5c42\u4e3a10\u3002 \u5728\u4e0d\u540c\u7684\u7f51\u7edc\u89c4\u5212\u6216\u4e0d\u540c\u5382\u5546\u8bbe\u5907\u7684QinQ\u62a5\u6587\u4e2d\uff0cVLAN-Tag\u7684TPID\u5b57\u6bb5\u53ef\u80fd\u88ab\u8bbe\u7f6e\u4e3a\u4e0d\u540c\u7684\u503c\u3002\u4e3a\u4e86\u548c\u73b0\u6709\u7f51\u7edc\u89c4\u5212\u517c\u5bb9\uff0c\u8bbe\u5907\u63d0\u4f9b\u4e86QinQ\u62a5\u6587\u5916\u5c42VLAN-Tag\u7684TPID\u503c\u53ef\u4fee\u6539\u7684\u529f\u80fd\u3002\u7528\u6237\u901a\u8fc7\u914d\u7f6eTPID\u7684\u503c\uff0c \u4f7f\u5f97\u53d1\u9001\u5230\u516c\u7f51\u4e2d\u7684QinQ\u62a5\u6587\u643a\u5e26\u7684TPID\u503c\u4e0e\u5f53\u524d\u7f51\u7edc\u914d\u7f6e\u76f8\u540c\uff0c\u4ece\u800c\u5b9e\u73b0\u4e0e\u73b0\u6709\u7f51\u7edc\u7684\u517c\u5bb9\u3002 \u518d\u770b\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u62d3\u6251\u5982\u4e0b\u56fe\u6240\u793a\u3002\u7f51\u7edc\u4e2d\u7684\u9700\u6c42\u662f\uff0cCE1\u53d1\u5f80SW1\u7684\u6570\u636e\u5e27\u4e2d\uff0c\u643a\u5e26VLAN-Tag 10\u7684\u6d41\u91cf\u589e\u52a0\u4e00\u5c42VLAN-Tag\uff0c\u5916\u5c42VLAN-Tag\u4e3a160\uff1b\u643a\u5e26VLAN-Tag 20\u7684\u6d41\u91cf\u589e\u52a0\u4e00\u5c42VLAN-Tag\uff0c\u5916\u5c42VLAN- Tag\u4e3a170\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u4e8c\u5c42\u63a5\u53e3\u3001\u4e09\u5c42\u63a5\u53e3\u3001\u4ee5\u53ca PVID\u3001VLAN-ID \u7b49\u6982\u5ff5\u6742\u8c08 \u4e8c\u5c42\u63a5\u53e3\uff0c\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u53ea\u5177\u5907\u4e8c\u5c42\u4ea4\u6362\u80fd\u529b\u7684\u63a5\u53e3\uff0c\u4f8b\u5982\u4e8c\u5c42\u4ea4\u6362\u673a\u7684\u7269\u7406\u63a5\u53e3\uff0c\u6216\u8005\u4e09\u5c42\u4ea4\u6362\u673a\u7684\u7269\u7406\u63a5\u53e3\uff08\u4e00\u822c\u800c\u8a00\uff0c\u8fd9\u4e9b\u63a5\u53e3\u7f3a\u7701\u65f6\u4e3a\u4e8c\u5c42\u6a21\u5f0f\uff0c\u67d0\u4e9b\u6b3e\u578b\u5177\u5907\u5207\u6362\u4e3a\u4e09\u5c42\u6a21\u5f0f\u7684\u80fd\u529b\uff09\u3002 \u4e8c\u5c42\u63a5\u53e3\u4e0d\u80fd\u76f4\u63a5\u914d\u7f6eIP\u5730\u5740\uff0c\u5e76\u4e14\u4e0d\u76f4\u63a5\u7ec8\u7ed3\u5e7f\u64ad\u5e27\uff08\u76ee\u7684MAC\u5730\u5740\u4e3a\u5e7f\u64adMAC\u5730\u5740FFFF- FFFF-FFFF\u7684\u6570\u636e\u5e27\uff09\u3002\u4e8c\u5c42\u63a5\u53e3\u6536\u5230\u5e7f\u64ad\u5e27\u540e\uff0c\u4f1a\u5c06\u5176\u4ece\u540c\u5c5e\u4e00\u4e2a\u5e7f\u64ad\u57df\uff08VLAN\uff09\u7684\u6240\u6709\u5176\u4ed6\u63a5\u53e3\u6cdb\u6d2a\u51fa\u53bb\u3002 \u4e09\u5c42\u63a5\u53e3\u7ef4\u62a4IP\u5730\u5740\u4e0eMAC\u5730\u5740\u3002 \u4e09\u5c42\u63a5\u53e3\u4f1a\u7ec8\u7ed3\u5e7f\u64ad\u5e27\uff0c\u4e09\u5c42\u63a5\u53e3\u5728\u6536\u5230\u5e7f\u64ad\u5e27\u540e\uff0c\u4e0d\u4f1a\u8fdb\u884c\u6cdb\u6d2a\u5904\u7406\u3002 \u4e8c\u5c42\u63a5\u53e3\u5728\u6536\u5230\u5355\u64ad\u5e27\u540e\uff0c\u4f1a\u5728MAC\u5730\u5740\u8868\u4e2d\u67e5\u8be2\u8be5\u6570\u636e\u5e27\u7684\u76ee\u7684MAC\u5730\u5740\uff0c\u7136\u540e\u4f9d\u636e\u8868\u9879\u6307\u5f15\u8fdb\u884c\u8f6c\u53d1\uff0c\u5982\u679c\u6ca1\u6709\u4efb\u4f55\u8868\u9879\u5339\u914d\uff0c\u5219\u8fdb\u884c\u6cdb\u6d2a\u3002\u4e09\u5c42\u63a5\u53e3\u5728\u6536\u5230\u5355\u64ad\u5e27\u540e\uff0c\u9996\u5148\u5224\u65ad\u5176\u76ee\u7684MAC \u5730\u5740\u662f\u5426\u4e3a\u672c\u5730MAC\u5730\u5740\uff0c\u5982\u679c\u662f\uff0c\u5219\u5c06\u6570\u636e\u5e27\u89e3\u5c01\u88c5\uff0c\u5e76\u89e3\u6790\u51fa\u62a5\u6587\u76ee\u7684IP\u5730\u5740\uff0c\u7136\u540e\u8fdb\u884c\u8def\u7531\u67e5\u8be2\u53ca\u8f6c\u53d1\u3002\u56e0\u6b64\u4e8c\u5c42\u63a5\u53e3\u4e0e\u4e09\u5c42\u63a5\u53e3\u5728\u6570\u636e\u5904\u7406\u884c\u4e3a\u4e0a\u4e5f\u5b58\u5728\u660e\u663e\u5dee\u5f02\u3002 \u4e8c\u5c42\u63a5\u53e3\u6709\u51e0\u79cd\u7c7b\u578b\uff08\u8fd9\u91cc\u8bf4\u7684\u662f\u4ee5\u592a\u7f51\u4e8c\u5c42\u63a5\u53e3\uff09\uff1aaccess\u3001trunk\u3001hybrid\u3002\u4e09\u5c42\u63a5\u53e3\u5219\u6ca1\u6709\u4e0a\u8ff0\u7c7b\u578b\u3002 \u4e09\u5c42\u63a5\u53e3\u6709\u7269\u7406\u5f62\u6001\u7684\uff0c\u4e5f\u6709\u903b\u8f91\u5f62\u6001\u7684\uff0c\u5178\u578b\u7684\u7269\u7406\u63a5\u53e3\u5982\u8def\u7531\u5668\u7684\u4e09\u5c42\u7269\u7406\u7aef\u53e3\uff1b\u903b\u8f91\u63a5\u53e3\u5982 VLANIF\uff0c\u4ee5\u53ca\u4ee5\u592a\u7f51\u5b50\u63a5\u53e3\uff0c\u4f8b\u5982GE0/0/1.1\u3002\u7b49\u7b49\u3002VLANIF\u4e0e\u5176\u5173\u8054\u7684VLAN\u7684VLAN-ID\u5bf9\u5e94\uff0c \u6b64\u5916\uff1a \u800c\u4ee5\u592a\u7f51\u5b50\u63a5\u53e3\uff0c\u901a\u5e38\u4e5f\u4f1a\u7ed1\u5b9a\u76f8\u5e94\u7684VLAN-ID\uff0c\u4ece\u800c\u4e0e\u76f8\u5e94\u7684VLAN\u5bf9\u63a5\u3002\u8fd9\u4e24\u79cd\u5178\u578b\u7684\u4e09\u5c42\u63a5\u53e3\u5747\u53ef\u4ee5\u76f4\u63a5\u914d\u7f6eIP\u5730\u5740\u3002 \u5728\u4ee5\u592a\u7f51\u4e8c\u5c42\u4ea4\u6362\u7f51\u7edc\u91cc\uff0cVLAN\u662f\u4e00\u4e2a\u975e\u5e38\u57fa\u7840\u7684\u4e1c\u897f\u3002\u6bcf\u4e2aVLAN\u90fd\u662f\u4e00\u4e2a\u903b\u8f91\u7684\u5e7f\u64ad\u57df\uff0c\u6bcf\u4e2aVLAN\u90fd\u4f7f\u7528\u5bf9\u5e94\u7684ID\u8fdb\u884c\u6807\u8bc6\uff0c\u8fd9\u662fVLAN-ID\u3002 \u63a5\u53e3\u7f3a\u7701VLAN\u6807\u8bc6\uff0c\u5373PVID\uff08Port Default VLAN ID\uff09\uff0c\u6307\u7684\u662f\u4e8c\u5c42\u63a5\u53e3\u4e0a\u7684\u7f3a\u7701VLAN-ID\uff08\u6bcf\u4e2a\u4e8c\u5c42\u63a5\u53e3\u4e0a\u6709\u4e14\u53ea\u6709\u4e00\u4e2aVLAN-ID\u4f5c\u4e3aPVID\uff09\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0cPVID\u5fc5\u5b9a\u662f\u67d0\u4e00\u4e2a\u5177\u4f53VLAN\u7684VLAN-ID\u3002PVID\u7684\u4f5c\u7528\u662f\uff0c\u5f53\u8fd9\u4e2a\u4e8c\u5c42\u63a5\u53e3\u6536\u5230\u4e86\u6d41\u91cf\uff0c\u5e76\u4e14\u8be5\u6d41\u91cf\u4e0d\u643a\u5e26\u4efb\u4f55802.1Q Tag \uff08VLAN-ID\u4fe1\u606f\uff09\uff0c\u8be5\u63a5\u53e3\u4fbf\u8ba4\u4e3a\u8fd9\u4e9b\u6d41\u91cf\u5c5e\u4e8ePVID\u5bf9\u5e94\u7684VLAN\u3002\u5f53\u7136\uff0cPVID\u8fd8\u4f1a\u5f71\u54cd\u63a5\u53e3\u53d1\u9001\u6570\u636e\u5e27\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u63a5\u53e3\u7684PVID\u5747\u4e3aVLAN1\u3002 \u5bf9\u4e8eAccess\u63a5\u53e3\uff0c\u7f3a\u7701VLAN\u5c31\u662f\u5b83\u5141\u8bb8\u901a\u8fc7\u7684VLAN\uff0c\u4fee\u6539\u63a5\u53e3\u5141\u8bb8\u901a\u8fc7\u7684VLAN\u5373\u53ef\u66f4\u6539\u63a5\u53e3\u7684\u7f3a\u7701VLAN\u3002 \u5bf9\u4e8eTrunk\u63a5\u53e3\u548cHybrid\u63a5\u53e3\uff0c\u4e00\u4e2a\u63a5\u53e3\u53ef\u4ee5\u5141\u8bb8\u591a\u4e2aVLAN\u901a\u8fc7\uff0c\u4f46\u662f\u53ea\u80fd\u6709\u4e00\u4e2a\u7f3a\u7701VLAN\uff0c \u4fee\u6539\u63a5\u53e3\u5141\u8bb8\u901a\u8fc7\u7684VLAN\u4e0d\u4f1a\u66f4\u6539\u63a5\u53e3\u7684\u7f3a\u7701VLAN\u3002 \u4e09\u5c42\u63a5\u53e3\u672a\u5fc5\u4e00\u5b9a\u5bf9\u5e94VLAN-ID\u3002\u4f8b\u5982\u8def\u7531\u5668\u7684\u4e09\u5c42\u7269\u7406\u63a5\u53e3\uff0c\u8fd9\u79cd\u7c7b\u578b\u7684\u63a5\u53e3\u65e0\u9700\u914d\u7f6eVLAN-ID\u3002 \u5728\u4e09\u5c42\u4ea4\u6362\u673a\u4e0a\uff08\u8def\u7531\u5668\u6216\u9632\u706b\u5899\u7b49\u8bbe\u5907\uff0c\u4e5f\u6709\u652f\u6301VLANIF\u7684\u6b3e\u578b\uff09\uff0c\u6bcf\u4e2aVLAN\u90fd\u6709\u5bf9\u5e94\u7684 VLANIF\uff0cVLANIF\u6307\u7684\u662fVLAN\u5bf9\u5e94\u7684\u903b\u8f91\u4e09\u5c42\u63a5\u53e3\uff0c\u8fd9\u4e2a\u4e09\u5c42\u63a5\u53e3\u5728VLAN\u88ab\u521b\u5efa\u540e\uff0c\u53ef\u4ee5\u76f4\u63a5\u8d4b\u4e88IP\u5730\u5740\uff0c\u4e14\u5177\u5907\u8def\u7531\u8f6c\u53d1\u80fd\u529b\u3002\u4e00\u4e2aVLAN\u5bf9\u5e94\u4e00\u4e2aVLANIF\uff0cVLAN\u4e0eVLANIF\u7684\u6807\u8bc6\u76f8\u540c\u3002 VLAN\u5185\u7684\u7ec8\u7aef\u8bbe\u5907\uff0c\u53ef\u4ee5\u4e0e\u8be5VLAN\u5bf9\u5e94\u7684VLANIF\u76f4\u63a5\u8fdb\u884c\u4e8c\u5c42\u901a\u4fe1\u3002 \u4e8c\u5c42\u9632\u73af\u6280\u672f STP STP\u6280\u672f\u80cc\u666f \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0c\u63a5\u5165\u5c42\u4ea4\u6362\u673aSW3\u5355\u94fe\u8def\u4e0a\u8054\u5230\u6c47\u805a\u4ea4\u6362\u673aSW1\uff0c\u8fd9\u662f\u5b58\u5728\u5355\u94fe\u8def\u6545\u969c\u7684\uff0c\u8fd9\u4e2a\u7f51\u7edc\u7684\u53ef\u9760\u6027\u4e5f\u662f\u6bd4\u8f83\u5dee\u7684\u3002\u5982\u679cSW3\u7684\u4e0a\u8054\u94fe\u8def\u53d1\u751f\u6545\u969c\uff0cSW3\uff08\u4ee5\u53ca\u4e0b\u8054\u7528\u6237\uff09\u5c31\u65ad\u7f51\u4e86\u3002\u7f51\u7edc\u4e2d\u5b58\u5728\u7684\u53e6\u4e00\u4e2a\u5355\u70b9\u6545\u969c\u95ee\u9898\uff0c\u5c31\u662fSW1\u5982\u679c\u5b95\u673a\uff0cSW3\u4e5f\u5c31\u65ad\u7f51\u4e86\u3002\u4e3a\u4e86\u4f7f\u5f97\u7f51\u7edc\u66f4\u52a0\u5065\u58ee\u3001\u66f4\u5177\u6709\u5197\u4f59\u6027\uff0c \u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5c06\u62d3\u6251\u4fee\u6539\u4e3a\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u63a5\u5165\u5c42\u4ea4\u6362\u673aSW3\u91c7\u7528\u53cc\u94fe\u8def\u4e0a\u8054\u5230\u4e24\u53f0\u6c47\u805a\u8bbe\u5907\uff0c\u6784\u6210\u4e00\u4e2a\u7269\u7406\u94fe\u8def\u5197\u4f59\u7684\u4e8c\u5c42\u73af\u5883\uff0c\u89e3\u51b3\u4e86\u5355\u94fe\u8def\u53ca\u5355\u8bbe\u5907\u6545\u969c\u95ee\u9898\u3002 \u4f46\u662f\u8fd9\u5374\u5e26\u6765\u4e86\u53e6\u4e00\u4e2a\u5927\u95ee\u9898\uff1a\u7f51\u7edc\u4e2d\u5b58\u5728\u4e8c\u5c42\u73af\u8def\uff08\u6240\u8c13\u7684\u4e8c\u5c42\u73af\u8def\u6307\u7684\u662f\u7531\u4e8c\u5c42\u94fe\u8def\u6784\u6210\u7684\u73af\u8def\uff09\u3002\u8fd9\u4e2a\u4e09\u89d2\u5f62\u7684\u4e8c\u5c42\u73af\u8def\u4f1a\u4e3a\u7f51\u7edc\u5e26\u6765\u91cd\u5927\u95ee\u9898\u3002\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u4ea4\u6362\u673a\u7684\u5de5\u4f5c\u673a\u5236\uff1a\u5f53\u5176\u6536\u5230\u7ec4\u64ad\u3001\u5e7f\u64ad\u6570\u636e\u5e27\u65f6\uff0c\u4f1a\u76f4\u63a5\u5728VLAN\u5185\u8fdb\u884c\u6cdb\u6d2a\uff0c\u53e6\u5916\uff0c\u5982\u679c\u6536\u5230\u76ee\u7684MAC\u5730\u5740\u672a\u77e5\u7684\u5355\u64ad\u6570\u636e\u5e27\u65f6\uff0c\u540c\u6837\u4f1a\u8fdb\u884c\u6cdb\u6d2a\uff0c\u8fd9\u4e48\u4e00\u6765\uff0c\u5f53\u7f51\u7edc\u4e2d\u51fa\u73b0\u4e8c\u5c42\u73af\u8def\u65f6\uff0c\u5c31\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5e7f\u64ad\u98ce\u66b4\u3001\u591a\u5e27\u590d\u5236\u3001MAC\u5730\u5740\u6f02\u79fb\u7b49\u7b49\u591a\u79cd\u95ee\u9898\uff0c\u4ece\u800c\u7ed9\u7f51\u7edc\u5e26\u6765\u5de8\u5927\u5f71\u54cd\u3002\u5373\u4f7f\u4e0d\u662f\u4eba\u4e3a\u642d\u5efa\u5197\u4f59\u7684\u7269\u7406\u73af\u5883\u800c\u5bfc\u81f4\u7684\u73af\u8def\uff0c\u7f51\u7edc\u4e5f\u6709\u53ef\u80fd\u56e0\u4e3a\u79cd\u79cd\u539f\u56e0\u51fa\u73b0\u4e8c\u5c42\u73af\u8def\u5f15\u53d1\u7684\u6545\u969c\uff0c\u4f8b\u5982\u7531\u4e8e\u4eba\u4e3a\u7684\u8bef\u63a5\u7ebf\u7f06\u7b49\u3002\u90a3\u4e48\u6709\u6ca1\u6709\u4ec0\u4e48\u529e\u6cd5\u89e3\u51b3\u73af\u8def\u7684\u95ee\u9898\u5462\uff1f\u89e3\u51b3\u65b9\u6848\u6709\u8bb8\u591a\uff0c\u5b9e\u9645\u4e0a\u4ee5\u592a\u7f51\u4e2d\u7684\u4e8c\u5c42\u73af\u8def\u95ee\u9898\u662f\u4e00\u4e2a\u4e0d\u5c0f\u7684\u8bfe\u9898\uff0c\u4e1a\u754c\u6709\u8bb8\u591a\u975e\u5e38\u7ecf\u5178\u7684\u89e3\u51b3\u65b9\u6848\u5e94\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0c\u6570\u636e\u8bbe\u5907\u5382\u5546\u4e3a\u4e86\u5e94\u5bf9\u4e8c\u5c42\u73af\u8def\u95ee\u9898\u4e5f\u90fd\u7eb7\u7eb7\u63d0\u51fa\u4e86\u81ea\u5df1\u7684\u6280\u672f\u6216\u65b9\u6cd5\u8bba\uff0c\u4f46\u662f\u8fd9\u91cc\u4e0d\u5f97\u4e0d\u63d0\u5230\u7684\u662f**\u751f\u6210\u6811\uff08Spanning-tree\uff0c\u7b80\u79f0STP\uff09\u534f\u8bae**\uff0c\u8fd9\u662f\u4e00\u4e2a\u7ecf\u5178\u7684\u3001\u516c\u6709\u7684\u534f\u8bae\uff0c\u4e13\u95e8\u7528\u4e8e\u5e94\u5bf9\u4ee5\u592a\u7f51\u4e8c\u5c42\u73af\u8def\u95ee\u9898\u3002 \u901a\u8fc7STP\uff0c\u5728\u903b\u8f91\u4e0a\u5c06\u7279\u5b9a\u63a5\u53e3\u8fdb\u884c\u963b\u585e\uff08Block\uff09\uff0c\u4ece\u800c\u5b9e\u73b0\u4fdd\u6301\u7269\u7406\u4e0a\u7684\u5197\u4f59\u73af\u5883\u540c\u65f6\u3001\u4e8c\u5c42\u73af\u5883\u4e2d\u53c8\u53ef\u6253\u7834\u73af\u8def\u3002\u4f8b\u5982\u5728\u4e0b\u56fe\u4e2d\uff0c\u7f51\u7edc\u662f\u5b58\u5728\u73af\u8def\u7684\uff0c\u5728\u4e09\u53f0\u4ea4\u6362\u673a\u4e0a\u8fd0\u884c\u751f\u6210\u6811\u534f\u8bae\u540e\uff0cSTP\u7ecf\u8fc7\u4e00\u5b9a\u7684\u8ba1\u7b97\uff0c \u6700\u7ec8\u51b3\u5b9a\u963b\u585e\u6389\u4e00\u4e2a\u63a5\u53e3\uff0c\u4ece\u800c\u6253\u7834\u73af\u8def\u3002 \u5f53\u62d3\u6251\u53d1\u751f\u53d8\u66f4\u7684\u65f6\u5019\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0cSTP\u80fd\u591f\u63a2\u6d4b\u5230\u8fd9\u4e9b\u53d8\u5316\uff0c\u5e76\u4e14\u53ca\u65f6\u81ea\u52a8\u7684\u8c03\u6574\u63a5\u53e3\u72b6\u6001\uff0c\u4ece\u800c\u9002\u5e94\u7f51\u7edc\u62d3\u6251\u7684\u53d8\u5316\uff0c\u5b9e\u73b0\u94fe\u8def\u5197\u4f59\u3002 STP\u9700\u8981\u8fd0\u884c\u5728\u7f51\u7edc\u4e2d\u7684\u6240\u6709\u4ea4\u6362\u673a\u4e0a\u4ee5\u9632\u6b62\u7f51\u7edc\u51fa\u73b0\u73af\u8def\u3002\u4e00\u65e6\u5f00\u542fSTP\uff0c\u4ea4\u6362\u673a\u4e4b\u95f4\u5c31\u4f1a\u8fdb\u884cSTP\u62a5\u6587\u7684\u4ea4\u4e92\uff0c\u800cSTP\u7684\u5de5\u4f5c\u53ca\u8ba1\u7b97\u6b63\u662f\u4f9d\u8d56\u4e8e\u8fd9\u4e9b\u62a5\u6587\u7684\u4ea4\u4e92\uff0cSTP\u64cd\u4f5c\u7684\u7ed3\u679c\u662f\u5c06\u7f51\u7edc\u4e2d\u7684\u7279\u5b9a\u63a5\u53e3\u963b\u585e\uff0c\u4ece\u800c\u8fbe\u5230\u6d88\u706d\u73af\u8def\u7684\u76ee\u7684\uff0c\u4f46\u662f\u5177\u4f53\u662f\u4ec0\u4e48\u63a5\u53e3\u88ab\u963b\u585e\uff0c\u53ef\u4e0d\u662f\u968f\u4fbf\u5b9a\u7684\uff0cSTP\u4e00\u5957\u81ea\u5df1\u7684\u8ba1\u7b97\u65b9\u6cd5\u3002\u672c\u7ae0\u6211\u4eec\u4e3b\u8981\u4ecb\u7ecd\u7684\u662fSTP\u7684802.1D\u6807\u51c6\u3002\u8fd9\u4e2a\u6807\u51c6\u5b9e\u9645\u4e0a\u5df2\u7ecf\u975e\u5e38\u53e4\u8001\u800c\u4e14\u57fa\u672c\u4e0d\u518d\u4f7f\u7528\u4e86\uff0c\u4f46\u662f\u5374\u4f9d\u7136\u662f\u5165\u95e8\u751f\u6210\u6811\u6280\u672f\u7684\u5fc5\u7ecf\u4e4b\u8def\uff0c\u540e\u7eed\u7684\u66f4\u65b0\u5b9e\u9645\u4e0a\u90fd\u662f\u57fa\u4e8e\u8fd9\u4e2a\u534f\u8bae\uff0c\u56e0\u6b64\u638c\u63e1\u5b83\u662f\u975e\u5e38\u6709\u5fc5\u8981\u7684\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5148\u4e86\u89e3\u4e00\u4e0b802.1D\u6807\u51c6\u7684STP\u3002 STP\u57fa\u672c\u6982\u5ff5 \u00b6 \u7b80\u5355\u5730\u8bf4STP\u91c7\u7528\u56db\u4e2a\u6b65\u9aa4\u6765\u89e3\u51b3\u4e8c\u5c42\u73af\u8def\u95ee\u9898\uff1a \u00b6 \u5728\u4ea4\u6362\u7f51\u7edc\u4e2d\u9009\u4e3e\u4e00\u4e2a\u6839\u6865\uff08Root Bridge\uff0c\u7b80\u79f0RB\uff09\uff1b \u5728\u6bcf\u4e2a\u975e\u6839\u6865\u4e0a\u9009\u4e3e\u4e00\u4e2a\u6839\u7aef\u53e3\uff08Root Port\uff0c\u7b80\u79f0RP\uff09\uff1b \u5728\u6bcf\u4e2a\u6bb5\u4e2d\u9009\u4e3e\u4e00\u4e2a\u6307\u5b9a\u7aef\u53e3\uff08Designated Port\uff0c\u7b80\u79f0DP\uff09\uff1b \u963b\u585e\u975e\u6307\u5b9a\u7aef\u53e3\uff08Non-Designated Port\uff0c\u7b80\u79f0NDP\uff09\u3002 \u8bf4\u660e\uff1a\u8fd9\u91cc\u7684\u6865\uff08Bridge\uff09\uff0c\u5176\u5b9e\u5c31\u662f\u6307\u4ea4\u6362\u673a\uff0c\u7531\u4e8e\u4ea4\u6362\u673a\u662f\u7531\u65e9\u671f\u7684\u7f51\u6865\u53d1\u5c55\u800c\u6765\uff0c\u56e0\u6b64\u5728\u4e00\u4e9b\u573a\u5408\u4e0b\uff0c\u6211\u4eec\u4f9d\u7136 \u6cbf\u7528\u201c \u7f51\u6865\u201c\u6216\u8005\u201c \u6865\u201c\u6765\u79f0\u547c\u4ea4\u6362\u673a\u3002 \u5173\u952e\u5b57\u6bb5\u53ca\u6bd4\u8f83\u539f\u5219 \u00b6 \u8fd0\u884cSTP\u7684\u4ea4\u6362\u673a\u4e4b\u95f4\u4f1a\u4ea4\u4e92\u4e00\u4e9b\u975e\u5e38\u91cd\u8981\u7684\u534f\u8bae\u62a5\u6587\uff0c\u8be5\u62a5\u6587\u79f0\u4e3a\u7f51\u6865\u534f\u8bae\u6570\u636e\u5355\u5143\uff08Bridge Protocol Data Unit\uff0c\u7b80\u79f0BPDU\uff09\u3002STP\u4e4b\u6240\u4ee5\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u5e76\u6784\u5efa\u4e00\u4e2a\u65e0\u73af\u7684\u7f51\u7edc\uff0c\u662f\u4f9d\u8d56\u4e8eBPDU \u62a5\u6587\u7684\u6cdb\u6d2a\u3002\u8981\u7406\u89e3STP\u7684\u5de5\u4f5c\u8fc7\u7a0b\uff0c\u975e\u5e38\u91cd\u8981\u7684\u4e00\u70b9\u5c31\u662f\u8981\u7406\u89e3BPDU\u4e2d\u5404\u5b57\u6bb5\u7684\u542b\u4e49\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u90fd\u662fSTP\u8d56\u4ee5\u5de5\u4f5c\u7684\u6839\u672c\u3002BPDU\u62a5\u6587\u5305\u542b\u7684\u6240\u6709\u5b57\u6bb5\u5728\u540e\u6587\u4e2d\u6709\u6240\u6d89\u53ca\uff0c\u8fd9\u91cc\u6211\u4eec\u5148\u5173\u6ce8\u51e0\u4e2a\u91cd\u70b9\u5b57\u6bb5 \uff08\u6b64\u5904\u4ecb\u7ecd\u7684\u662fBPDU\u4e2d\u7684\u4e00\u79cd\u5173\u952e\u7c7b\u578b\uff1a\u914d\u7f6eBPDU\uff09\uff1a \u6865ID\uff08Bridge Identifier\uff09 \u00b6 \u5728STP\u4e2d\uff0c\u6bcf\u4e00\u53f0\u4ea4\u6362\u673a\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u6807\u8bc6\u7b26\uff0c\u8fd9\u4e2a\u6807\u8bc6\u7b26\u5c31\u662f\u6865ID\uff0c\u6865ID\u957f\u5ea6\u4e3a8\u4e2a\u5b57\u8282\uff0c\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff1a2\u4e2a\u5b57\u8282\u7684\u6865\u4f18\u5148\u7ea7\u548c6\u4e2a\u5b57\u8282\u7684\u6865MAC\u5730\u5740\uff0c\u5176\u4e2d\u4f18\u5148\u7ea7\u9ed8\u8ba4\u4e3a32768\uff0c\u53ef\u4ee5\u624b\u5de5\u66f4\u6539\u3002\u800c\u6865MAC\u5730\u5740\u4e3a\u7f51\u6865\u7684\u80cc\u677fMAC\uff08\u53ef\u4ee5\u7b80\u5355\u5730\u7406\u89e3\u4e3a\u7cfb\u7edfMAC\uff09\u3002\u4ea4\u6362\u673a\u53d1\u9001\u7684BPDU\u62a5\u6587\u4e2d\uff0c\u6865ID\u5b57\u6bb5\u5b58\u653e\u7684\u5c31\u662f\u81ea\u5df1\u7684\u6865ID\uff0c\u800c\u6839\u6865ID\u5b57\u6bb5\u5b58\u653e\u7684\u5c31\u662f\u7f51\u7edc\u4e2d\u6839\u6865\u7684\u6865ID\u3002 \u6839\u8def\u5f84\u5f00\u9500\uff08Root Path Cost\uff09 \u00b6 \u6839\u8def\u5f84\u5f00\u9500\u662f\u4e00\u4e2a\u7528\u4e8e\u5ea6\u91cf\u63a5\u53e3\u5230\u6839\u6865\u7684\u5f00\u9500\u7684\u503c\uff0c\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u5230\u6839\u6865\u7684\u8def\u5f84\u5f00\u9500\u8d8a\u5c0f\u5219\u88ab\u963b\u585e\u7684\u53ef\u80fd\u6027\u4e5f\u5c31\u8d8a\u5c0f\u3002 \u6839\u6865\u53d1\u9001\u51fa\u6765\u7684BPDU\u4e2d\uff0c\u6839\u8def\u5f84\u5f00\u9500\u5b57\u6bb5\u503c\u90fd\u4e3a0\u3002\u5f53\u975e\u6839\u6865\u5728\u67d0\u4e2a\u63a5\u53e3\u4e0a\u6536\u5230\u8fd9\u4e2aBPDU\u518d\u8fdb \u884cSTP\u8ba1\u7b97\u7684\u65f6\u5019\uff0c\u4f1a\u628a\u8be5BPDU\u4e2d\u6240\u5305\u542b\u7684\u6839\u8def\u5f84\u5f00\u9500\u7d2f\u52a0\u4e0a\u6536\u5230\u8be5BPDU\u7684\u63a5\u53e3\u7684STP Cost\uff0c \u4ece\u800c\u5f97\u5230\u4ece\u8be5\u63a5\u53e3\u5230\u8fbe\u6839\u7684\u603b\u8def\u5f84\u5f00\u9500\u3002 STP\u63a5\u53e3Cost\u4e0e\u63a5\u53e3\u7684\u5e26\u5bbd\u6709\u5173\uff0c\u63a5\u53e3\u5e26\u5bbd\u8d8a\u9ad8\uff0c\u5219\u63a5\u53e3\u7684STP Cost\u8d8a\u5c0f\u3002 \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0cSW1\u662f\u7f51\u7edc\u4e2d\u7684\u6839\u6865\uff0c\u56e0\u6b64\u5b83\u53d1\u9001BPDU\u62a5\u6587\u4e2dRoot Path Cost\u5b57\u6bb5\u4e3a0\uff0cSW2 \u5728GE0/0/0\u6536\u5230\u8fd9\u4e2aBPDU\u540e\u5c31\u53ef\u4ee5\u8fdb\u884c\u76f8\u5e94\u7684\u8ba1\u7b97\uff0c\u5b83\u4eceGE0/0/0\u5230\u8fbe\u6839\u6865\u7684Root Path Cost\u7b49\u4e8e\u81ea\u5df1\u63a5\u53e3\u7684Cost\u52a0\u4e0a\u6240\u6536\u5230\u7684BPDU\u62a5\u6587\u4e2d\u7684Root Path Cost\uff0c\u7ed3\u679c\u5c31\u662f1\uff0c\u968f\u540eSW2\u5c06\u8fd9\u4e2a BPDU\u8f6c\u53d1\u7ed9SW3\uff0c\u6ce8\u610f\u6b64\u65f6BPDU\u4e2d\u7684Root Path Cost\u88ab\u4fee\u6539\u4e3a1\u3002SW3\u5728\u6536\u5230\u8fd9\u4e2aBPDU\u5e76\u8fdb\u884cRoot Path Cost\u8ba1\u7b97\u7684\u65f6\u5019\uff0cRoot Path Cost\u5c31\u7b49\u4e8e\u81ea\u5df1FE0/0/0\u63a5\u53e3\u7684Cost\u52a0\u4e0aBPDU\u62a5\u6587\u4e2d\u7684Root Path Cost\uff0c\u4e5f\u5c31\u662f11\u3002 \u7aef\u53e3ID\uff08Port ID\uff09 \u00b6 \u7aef\u53e3ID\uff082\u5b57\u8282\uff09\u5305\u542b\u4e24\u90e8\u5206\uff1a\u7aef\u53e3\u4f18\u5148\u7ea7\uff081\u5b57\u8282\uff09\u4ee5\u53ca\u7aef\u53e3\u7f16\u53f7\uff081\u5b57\u8282\uff09\u3002\u7f3a\u7701\u65f6\u4f18\u5148\u7ea7\u503c\u4e3a 128\uff0c\u8be5\u503c\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u4fee\u6539\uff0c\u53d6\u503c\u8303\u56f4\u662f0-255\uff0c\u503c\u8d8a\u5c0f\u8d8a\u4f18\u3002 \u8bf4\u660e\uff1a\u5728\u672c\u6587\u4e2d\uff0c\u4ea4\u6362\u673a\u7684\u7aef\u53e3\u6307\u7684\u5c31\u662f\u4ea4\u6362\u673a\u7684\u63a5\u53e3\uff0c\u5728\u63cf\u8ff0\u4ea4\u6362\u673a\u65f6\uff0c\u7b14\u8005\u53ef\u80fd\u540c\u65f6\u4f7f\u7528\u7aef\u53e3\u6216\u63a5\u53e3\u4e00\u8bcd\u3002 \u751f\u6210\u6811\u6784\u9020\u4e00\u4e2a\u65e0\u73af\u8def\u62d3\u6251\u65f6\uff0c\u603b\u662f\u4f7f\u7528\u76f8\u540c\u76844\u6b65\u6765\u5224\u5b9a\uff08\u4e0b\u9762\u7684\u4fe1\u606f\u90fd\u662fBPDU\u4e2d\u7684\u5b57\u6bb5\uff09\uff1a \u00b6 Step1\uff1a\u6700\u5c0f\u7684\u6839\u6865ID Step2\uff1a\u6700\u5c0f\u7684\u6839\u8def\u5f84\u5f00\u9500 Step3\uff1a\u6700\u5c0f\u7684\u6865ID Step4\uff1a\u6700\u5c0f\u7684\u7aef\u53e3ID STP\u64cd\u4f5c \u00b6 \u5728\u4ea4\u6362\u7f51\u7edc\u4e2d\u9009\u4e3e\u4e00\u4e2a\u6839\u6865 \u00b6 \u4ee5\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e3a\u4f8b\uff0c\u6211\u4eec\u5728\u4ea4\u6362\u673a\u4e0a\u90fd\u5f00\u542f\u4e86STP\uff0c\u521d\u59cb\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u7684\u4ea4\u6362\u673a\u90fd\u8ba4\u4e3a\u81ea\u5df1\u5c31\u662f\u7f51\u7edc\u4e2d\u7684\u6839\u6865\uff0c\u4e8e\u662f\u90fd\u5411\u7f51\u7edc\u4e2d\u6cdb\u6d2a\u914d\u7f6eBPDU\uff0c\u5728\u5404\u81ea\u53d1\u9001\u7684\u914d\u7f6eBPDU\u4e2d\uff0c\u90fd\u58f0\u79f0\u81ea\u5df1\u662f\u6839\u6865\u3002\u7ecf\u8fc7 PK\u4e4b\u540e\uff0c\u62e5\u6709\u6700\u5c0f\u6865ID\u7684\u4ea4\u6362\u673a\u80dc\u51fa\uff0c\u6210\u4e3a\u8fd9\u4e2a\u4ea4\u6362\u7f51\u7edc\u771f\u6b63\u7684\u6839\u6865\u3002 \u6839\u6865\u7684\u9009\u4e3e\u8fc7\u7a0b\uff1a\u9996\u5148\u6bd4\u8f83\u6865\u4f18\u5148\u7ea7\uff0c\u4f18\u5148\u7ea7\u503c\u6700\u5c0f\u7684\u4ea4\u6362\u673a\u80dc\u51fa\uff0c\u5982\u679c\u4f18\u5148\u7ea7\u76f8\u7b49\uff0c\u5219\u518d\u6bd4\u8f83\u6865MAC \u5730\u5740\uff0c\u4e5f\u662f\u4f18\u9009\u6700\u5c0f\u7684\u503c\u3002\u6240\u4ee5\u5728\u4e0a\u56fe\u6240\u793a\u7684\u4f8b\u5b50\u4e2d\uff0cSW1\u80dc\u51fa\u6210\u4e3a\u6839\u6865\u3002 \u6839\u6865\u662fSTP\u8ba1\u7b97\u5f97\u51fa\u7684\u65e0\u73af\u7684\u62d3\u6251\uff08\u53ef\u4ee5\u5f62\u8c61\u5730\u7406\u89e3\u4e3a\u4e00\u68f5\u6811\uff09\u7684\u6811\u6839\uff0cSTP\u540e\u7eed\u7684\u8ba1\u7b97\u90fd\u662f\u4ee5\u8fd9\u4e2a\u6811\u6839\u4f5c\u4e3a\u53c2\u8003\u70b9\u7684\u3002\u5f53\u7136\uff0c\u5728\u5b9e\u9645\u7684\u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u662f\u4e0d\u4f1a\u901a\u8fc7MAC\u5730\u5740\u7684\u6bd4\u8f83\u8ba9\u4ea4\u6362\u673a\u81ea\u5df1\u53bb\u9009\u6839\u6865\u7684\uff0c\u4e3a\u4e86\u7f51\u7edc\u7684\u7a33\u5b9a\u548c\u53ef\u63a7\uff0c\u4e00\u822c\u4f1a\u5c06\u6838\u5fc3\u4ea4\u6362\u8bbe\u5907\u914d\u7f6e\u4e3a\u7f51\u7edc\u7684\u6839\u6865\u2014\u2014\u5c06\u5176\u6865\u4f18\u5148\u7ea7\u8c03\u8282\u4e3a\u6700\u5c0f\u503c\uff0c\u4ece\u800c\u786e\u4fdd\u5176\u6210\u4e3a\u6839\u6865\u3002 \u5728\u6bcf\u4e2a\u975e\u6839\u6865\u4e0a\u9009\u4e3e\u4e00\u4e2a\u6839\u7aef\u53e3 \u00b6 \u5728\u9009\u4e3e\u51fa\u6839\u6865\u540e\uff0c\u6839\u6865\u4ecd\u7136\u6301\u7eed\u5411\u7f51\u7edc\u4e2d\u53d1\u9001\u914d\u7f6eBPDU\uff0c\u800c\u975e\u6839\u6865\u5c06\u6301\u7eed\u4e0d\u65ad\u5730\u6536\u5230\u6839\u6865\u53d1\u9001\u7684\u914d\u7f6e BPDU\u3002STP\u8ba1\u7b97\u8fc7\u7a0b\u7684\u7b2c\u4e8c\u6b65\u662f\u5728\u6bcf\u4e2a\u975e\u6839\u6865\u4e0a\u9009\u62e9\u4e00\u4e2a\u6839\u7aef\u53e3\uff0c\u6839\u7aef\u53e3\u662f\u6bcf\u53f0\u4ea4\u6362\u673a\u4e0a\u6536\u5230\u6700\u4f18 BPDU\u7684\u7aef\u53e3\u3002 \u4e00\u53f0\u975e\u6839\u6865\u53ef\u80fd\u4f1a\u6709\u591a\u4e2a\u7aef\u53e3\u8fde\u63a5\u5230\u4ea4\u6362\u7f51\u7edc\uff0c\u6bcf\u4e2a\u975e\u6839\u6865\u4e0a\u5fc5\u987b\u9009\u4e3e\u4e00\u4e2a\u6839\u7aef\u53e3\uff0c\u800c\u4e14\u53ea\u4f1a\u9009\u4e3e\u4e00\u4e2a\u6839\u7aef\u53e3\u3002\u5f53\u5b58\u5728\u591a\u4e2a\u7aef\u53e3\u65f6\uff0c\u4ea4\u6362\u673a\u5728\u8fd9\u4e9b\u7aef\u53e3\u4e0a\u90fd\u4f1a\u6536\u5230\u914d\u7f6eBPDU\uff0c\u4ea4\u6362\u673a\u4f1a\u6bd4\u8f83\u8fd9\u4e9b\u914d\u7f6eBPDU\uff0c\u7136\u540e\u9009\u62e9\u6bd4\u8f83\u7ed3\u679c\u6700\u4f18\u7684\u63a5\u53e3\u4f5c\u4e3a\u6839\u7aef\u53e3\uff0c\u6309\u7167\u5982\u4e0b\u987a\u5e8f\u6bd4\u8f83\uff1a1\uff09\u6bd4\u8f83\u914d\u7f6eBPDU\u4e2d\u7684\u6839\u6865ID\u5b57\u6bb5\uff0c \u9009\u62e9\u503c\u5c0f\u7684\uff1b2\uff09\u5982\u679c\u524d\u8005\u76f8\u7b49\uff0c\u5219\u5c06\u914d\u7f6eBPDU\u4e2d\u7684\u6839\u8def\u5f84\u5f00\u9500\u503c\u8bfb\u53d6\u51fa\u6765\uff0c\u4e0e\u6536\u5230\u8be5BPDU\u7684\u63a5\u53e3\u7684 Cost\u76f8\u52a0\uff0c\u6bd4\u8f83\u76f8\u52a0\u540e\u7684\u503c\uff0c\u9009\u62e9\u503c\u6700\u5c0f\u7684\uff1b3\uff09\u5982\u679c\u524d\u8005\u8fd8\u76f8\u7b49\uff0c\u5219\u6bd4\u8f83\u914d\u7f6eBPDU\u4e2d\u7684\u6865ID\u5b57\u6bb5\uff1b 4\uff09\u5982\u679c\u524d\u8005\u8fd8\u76f8\u7b49\uff0c\u5219\u6bd4\u8f83\u7aef\u53e3ID\u5b57\u6bb5\u3002 \u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0cSW3\u6709\u4e24\u4e2a\u63a5\u53e3\u63a5\u5165\u5230\u8fd9\u4e2a\u4ea4\u6362\u7f51\u7edc\u4e2d\uff1aPort1\u53caPort2\uff0c\u73b0\u5728SW3\u8981\u5728\u4e24\u8005\u4e4b\u95f4\u9009\u4e3e\u4e00\u4e2a\u6839\u7aef\u53e3\u3002SW3\u4f1a\u4ecePort1\u548cPort2\u90fd\u6536\u5230\u914d\u7f6eBPDU\u62a5\u6587\uff08\u4ecePort1\u6536\u5230\u7684\u662fSW1\u76f4\u63a5\u53d1\u9001\u8fc7\u6765\u7684\uff0c\u4ece Port2\u6536\u5230\u7684\u662f\u6839\u6865SW1\u53d1\u5f80SW2\uff0c\u7136\u540e\u7531SW2\u8f6c\u53d1\u8fc7\u6765\u7684\uff09\uff0c\u5728\u62a5\u6587\u4e2d\u90fd\u6709\u643a\u5e26\u201c\u6865ID\u3001\u6839\u8def\u5f84\u5f00\u9500\u3001\u6865ID\u3001\u7aef\u53e3ID\u201d\u7b49\u5173\u952e\u5b57\u6bb5\uff0c\u90a3\u4e48SW2\u5c31\u4f1a\u8fdb\u884cPort1\u53caPort2\u7684PK\uff0cPK\u4ec0\u4e48\u5462\uff1f\u5148PK\u8fd9\u4e24\u4e2a\u7aef\u53e3\u5230\u8fbe\u6839\u6865\u7684\u6839\u8def\u5f84\u5f00\u9500\uff0c\u4f18\u9009\u503c\u66f4\u5c0f\u7684\uff0c\u5982\u679c\u76f8\u7b49\uff0c\u5219PK\u8fd9\u4e24\u4e2a\u63a5\u53e3\u6536\u5230\u7684BPDU\u4e2d\u7684\u6865ID\uff0c\u4e5f\u662f\u4f18\u9009\u503c\u66f4\u5c0f\u7684\uff0c\u5982\u679c\u8fde\u8fd9\u4e2a\u4e5f\u76f8\u7b49\u5462\uff0c\u90a3\u5c31\u8fdb\u4e00\u6b65PK\u8fd9\u4e24\u4e2a\u63a5\u53e3\u6536\u5230\u7684BPDU\u4e2d\u7684\u7aef\u53e3ID\u3002\u5f88\u660e\u663e\uff0c\u8fd9\u91ccPort1 \u5230\u6839\u7684\u6839\u8def\u5f84\u5f00\u9500\u66f4\u5c0f\uff0c\u800c\u4ecePort2\u5230\u6839\u5462\uff0c\u9664\u4e86\u81ea\u5df1\u63a5\u53e3\u7684\u5f00\u9500\u8fd8\u8981\u7d2f\u52a0\u4e0aSW2\u7684Port1\u7684\u5f00\u9500\u3002\u6240\u4ee5 SW3\u4e0a\uff0cPort1\u6210\u4e3a\u4e86\u6839\u7aef\u53e3\u3002 \u4e3a\u6bcf\u4e2a\u6bb5\u9009\u4e3e\u4e00\u4e2a\u6307\u5b9a\u7aef\u53e3\uff08Designated Port\uff09 \u00b6 \u975e\u6839\u6865\u9009\u4e3e\u51fa\u6839\u7aef\u53e3\u540e\uff0c\u4f1a\u5c06\u6839\u7aef\u53e3\u4e0a\u6536\u5230\u7684\u914d\u7f6eBPDU\u8fdb\u884c\u8ba1\u7b97\uff1a\u4e3a\u672c\u4ea4\u6362\u673a\u4e0a\u7684\u5176\u4ed6\u7aef\u53e3\u5404\u8ba1\u7b97\u4e00\u4efd\u914d\u7f6eBPDU\uff0c\u800c\u8fd9\u4e9b\u63a5\u53e3\u4e5f\u4f1a\u4ece\u7f51\u7edc\u4e2d\u6536\u5230\u914d\u7f6eBPDU\uff0c\u6b64\u65f6\u4ea4\u6362\u673a\u4f1a\u6bd4\u8f83\u8fd9\u4e24\u4efd\u914d\u7f6eBPDU\uff0c\u5982\u679c\u524d\u8005\u66f4\u4f18\uff0c\u5219\u8be5\u7aef\u53e3\u6210\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u5982\u679c\u540e\u8005\u66f4\u4f18\uff0c\u5219\u8be5\u7aef\u53e3\u6210\u4e3a\u975e\u6307\u5b9a\u7aef\u53e3\u5e76\u4e14\u5c06\u88ab\u963b\u585e\u3002 \u4ea4\u6362\u673a\u6839\u636e\u6839\u7aef\u53e3\u4e0a\u6536\u5230\u7684\u6700\u4f18\u914d\u7f6eBPDU\u540e\u4e3a\u5176\u4ed6\u7aef\u53e3\u8ba1\u7b97\u914d\u7f6eBPDU\u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a \u914d\u7f6eBPDU\u4e2d\u7684\u6839\u6865ID\u66ff\u6362\u4e3a\u6839\u7aef\u53e3\u7684\u914d\u7f6eBPDU\u7684\u6839\u6865ID\uff1b \u6839\u8def\u5f84\u5f00\u9500\u66ff\u6362\u4e3a\u6839\u7aef\u53e3\u914d\u7f6eBPDU\u7684\u6839\u8def\u5f84\u5f00\u9500\u52a0\u4e0a\u6839\u7aef\u53e3\u7684\u5f00\u9500\uff1b \u6865ID\u66ff\u6362\u4e3a\u81ea\u8eab\u8bbe\u5907\u7684\u6865ID\uff1b \u7aef\u53e3ID\u66ff\u6362\u4e3a\u81ea\u8eab\u7aef\u53e3ID\u3002 \u963b\u585e\u975e\u6307\u5b9a\u7aef\u53e3\uff08Non-Designated Port\uff09 \u00b6 \u6700\u540e\uff0c\u975e\u6307\u5b9a\u7aef\u53e3\u88ab\u963b\u585e\uff0c\u73af\u8def\u5c31\u6253\u7834\u4e86\u3002 STP\u62a5\u6587 \u00b6 STP\u7684BPDU\u6709\u4e24\u79cd\u7c7b\u578b\uff1a\u914d\u7f6eBPDU\uff08Configuration BPDU\uff09\u53caTCN BPDU\uff08Topology Change BPDU\uff09\u3002\u4e24\u79cdBPDU\u5404\u6709\u5404\u7684\u7528\u9014\u3002 \u914d\u7f6eBPDU \u00b6 \u5728\u7f51\u7edc\u521a\u5f00\u59cb\u8fd0\u884c\u7684\u9636\u6bb5\uff0c\u6240\u6709\u4ea4\u6362\u673a\u90fd\u4f1a\u4ece\u6240\u6709\u7aef\u53e3\u53d1\u9001\u914d\u7f6eBPDU\uff0c\u5927\u5bb6\u90fd\u8ba4\u4e3a\u81ea\u5df1\u662f\u6839\u6865\uff0c\u968f\u7740\u914d\u7f6eBPDU\u6cdb\u6d2a\u548c\u6536\u96c6\u3001\u8ba1\u7b97\uff0c\u6839\u636e\u914d\u7f6eBPDU\u4e2d\u6240\u542b\u4fe1\u606f\uff0c\u5927\u5bb6PK\u51fa\u6765\u4e2a\u7ed3\u679c\uff0c\u6839\u6865\u88ab\u9009\u4e3e\u51fa\u6765\u4e86\u3002\u5728\u6b64\u4e4b\u540e\u6839\u6865\u4ee5\u9ed8\u8ba42S\u4e3a\u5468\u671f\u53d1\u9001\u914d\u7f6eBPDU\uff0c\u6240\u6709\u7684\u975e\u6839\u4ea4\u6362\u673a\u4ece\u81ea\u5df1\u7684\u6839\u7aef\u53e3\u6536\u5230\u914d\u7f6eBPDU\uff0c\u518d \u4ece\u81ea\u5df1\u7684\u6307\u5b9a\u7aef\u53e3\u8ba1\u7b97BPDU\u53d1\u51fa\u53bb\u3002\u8fd9\u5c31\u6709\u70b9\u50cf\u6211\u4eec\u4ece\u6839\u6865\u5012\u4e00\u76c6\u6c34\u4e0b\u6765\uff0c\u6c34\u5728\u91cd\u529b\u7684\u7275\u5f15\u4e0b\u987a\u7740\u8fd9\u9897\u65e0\u73af\u7684\u6811\u4ece\u4e0a\u5f80\u4e0b\u4e0d\u65ad\u7684\u5f80\u4e0b\u6d41\u3002\u53e6\u5916\uff0c\u88ab\u963b\u585e\u7684\u975e\u6307\u5b9a\u7aef\u53e3\u4f1a\u6e90\u6e90\u4e0d\u65ad\u7684\u6536\u5230\u94fe\u8def\u4e0a\u7684\u914d\u7f6eBPDU \u5e76\u4e00\u76f4\u4fa6\u542c\u4e4b\uff0c\u5f53\u5176\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u518d\u6536\u5230\u914d\u7f6eBPDU\uff0c\u5219\u8ba4\u4e3a\u94fe\u8def\u51fa\u73b0\u4e86\u6545\u969c\uff0c\u5f00\u59cb\u8fdb\u5165\u65b0\u7684\u6536\u655b\u9636\u6bb5\u3002 \u4e0b\u8868\u662f\u914d\u7f6eBPDU\u7684\u62a5\u6587\u683c\u5f0f\uff1a \u00b6 \u5b57\u8282 \u5b57\u6bb5 \u63cf\u8ff0 2 \u534f\u8bae \u4ee3\u8868\u4e0a\u5c42\u534f\u8bae\uff08BPDU\uff09\uff0c\u8be5\u503c\u603b\u4e3a0 1 \u7248\u672c \uff08\u5bf9\u4e8e802.1D\uff0c\u8be5\u5b57\u6bb5\u603b\u4e3a0\uff09 1 TYPE \u201c\u914d\u7f6eBPDU\u201d\u4e3a0x00\u3001\u201cTCN BPDU\u201d\u4e3a0x80 1 \u6807\u5fd7 LSB\u6700\u4f4e\u6709\u6548\u4f4d\u8868\u793aTC\u6807\u5fd7\uff1bMSB\u6700\u9ad8\u6709\u6548\u4f4d\u8868\u793aTCA\u6807\u5fd7 8 \u6839ID \u6839\u7f51\u6865\u7684\u6865ID 4 \u8def\u5f84\u5f00\u9500 \u5230\u8fbe\u6839\u6865\u7684STP cost 8 \u6865ID BPDU\u53d1\u9001\u6865\u7684ID 2 \u7aef\u53e3ID BPDU\u53d1\u9001\u7f51\u6865\u7684\u7aef\u53e3ID\uff08\u4f18\u5148\u7ea7+\u7aef\u53e3\u53f7\uff09 2 \u6d88\u606f\u5bff\u547d Message age \u4ece\u6839\u7f51\u6865\u53d1\u51faBPDU\u4e4b\u540e\u7684\u79d2\u6570\uff08\u8fd9\u4e2aBPDU\u5b58\u6d3b\u4e86\u591a\u957f\u65f6\u95f4\u4e86\uff09\uff0c\u6bcf\u7ecf \u8fc7\u4e00\u4e2a\u7f51\u6865\u90fd\u51cf1\uff0c\u6240\u4ee5\u5b83\u672c\u8d28\u4e0a\u662f\u5230\u8fbe\u6839\u6865\u7684\u8df3\u6570\u3002 2 \u6700\u5927\u5bff\u547d Max age \u5f53\u4e00\u6bb5\u65f6\u95f4\u672a\u6536\u5230\u4efb\u4f55BPDU\uff0c\u751f\u5b58\u671f\u5230\u8fbeMAX age\u65f6\uff0c\u7f51\u6865\u8ba4\u4e3a\u8be5\u7aef\u53e3 \u8fde\u63a5\u7684\u94fe\u8def\u53d1\u751f\u6545\u969c\u3002\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u8fd9\u4e2aBPDU\u7684\u6700\u5927\u5bff\u547d\uff0c 2 HELLO\u65f6\u95f4 \u6839\u7f51\u6865\u8fde\u7eed\u53d1\u9001\u7684BPDU\u4e4b\u95f4\u7684\u65f6\u95f4\u95f4\u9694\u3002 2 \u8f6c\u53d1\u5ef6\u8fdf \u5728\u76d1\u542c\u548c\u5b66\u4e60\u72b6\u6001\u6240\u505c\u7559\u7684\u65f6\u95f4\u95f4\u9694\u3002 TCN BPDU \u00b6 \u5f53\u7f51\u7edc\u62d3\u6251\u53d1\u751f\u53d8\u5316\u7684\u65f6\u5019\uff0c\u6700\u5148\u610f\u8bc6\u5230\u53d8\u5316\u7684\u4ea4\u6362\u673a\uff08\u5047\u8bbe\u8be5\u4ea4\u6362\u673a\u4e0d\u662f\u6839\u6865\uff09\u4f1a\u4ece\u6839\u7aef\u53e3\u53d1\u9001TCN BPDU\uff08Topology Change Notofication BPDU\uff0c\u62d3\u6251\u53d8\u66f4\u901a\u77e5BPDU\uff0c\u8be5BPDU\u62a5\u6587\u4e2dTYPE\u5b57\u6bb5=0x80\uff09\uff0c \u4e5f\u5c31\u662f\u671d\u7740\u6839\u6865\u7684\u65b9\u5411\u53d1\u9001TCN BPDU\uff0c\u8fd9\u4e2a\u62a5\u6587\u4f1a\u4e00\u8df3\u4e00\u8df3\u5730\u4f20\u9012\u5230\u6839\u4ea4\u6362\u673a\u3002\u4e0a\u8054\u7684\u4ea4\u6362\u673a\u5728\u6536\u5230\u4e86\u8be5\u4ea4\u6362\u673a\u53d1\u9001\u4e0a\u6765\u7684TCN BPDU\u540e\uff0c\u9664\u4e86\u5411\u5b83\u81ea\u5df1\u7684\u4e0a\u4e00\u7ea7\u4ea4\u6362\u673a\u7ee7\u7eed\u53d1\u9001TCN BPDU\u5916\uff0c\u8fd8\u9700\u56de\u9001\u4e00\u4e2aTCA BPDU\uff08FLAG\u5b57\u6bb5\u4e2dTCA\u4f4d\u4e3a1\u7684\u914d\u7f6eBPDU\uff09\u7684\u786e\u8ba4\u4fe1\u606f\u7ed9\u8be5\u4ea4\u6362\u673a\u3002\u5f53\u6839\u6865\u63a5\u6536\u5230 TCN\u540e\u610f\u8bc6\u5230\u4e86\u62d3\u6251\u53d8\u5316\uff0c\u9042\u5411\u6240\u6709\u7f51\u6865\u53d1\u9001TC BPDU\uff08FLAG\u5b57\u6bb5\u4e2dTC\u4f4d\u4e3a1\u7684\u914d\u7f6eBPDU\uff09\u3002 \u4ea4\u6362\u673a\u4eec\u6536\u5230\u6839\u6865\u53d1\u51fa\u6765\u7684TC BPDU\u540e\uff0c\u4f1a\u7acb\u5373\u5220\u9664\u81ea\u5df1\u7684MAC\u5730\u5740\u8868\uff0c\u4ee5\u4fbf\u9002\u5e94\u65b0\u7684\u7f51\u7edc\u62d3\u6251\u3002 STP\u7684\u8ba1\u65f6\u5668 \u00b6 STP\u6709\u4e09\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u8ba1\u65f6\u5668\uff1a Hello Timer\uff1a\u6839\u6865\u5468\u671f\u6027\u53d1\u9001\u914d\u7f6eBPDU\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u7f3a\u7701\u4e3a2s\u3002 \u8f6c\u53d1\u5ef6\u8fdf\u8ba1\u65f6\u5668\uff08Forward Delay Timer\uff09\uff1a\u63a5\u53e3\u4eceListening\u8f6c\u6362\u5230Learning\u72b6\u6001\uff0c\u6216\u8005\u4eceLearning\u8f6c\u6362\u5230Forwarding\u72b6\u6001\u8fc7\u7a0b\u4e2d\u6240\u9700\u7b49\u5f85\u7684\u65f6\u95f4\uff0c\u7f3a\u7701\u4e3a15s\u3002 \u6700\u5927\u751f\u5b58\u65f6\u95f4\uff08Max Age Timer\uff09\uff1a\u5728\u4e22\u5f03\u914d\u7f6eBPDU\u4e4b\u524d\uff0c\u4ea4\u6362\u673a\u7528\u6765\u5b58\u50a8\u914d\u7f6eBPDU\u7684\u65f6\u95f4\uff0c\u7f3a\u7701 \u4e3a20s\u3002\u5982\u679c\u4e00\u4e2a\u88ab\u963b\u585e\u7684\u63a5\u53e3\uff08\u975e\u6307\u5b9a\u7aef\u53e3\uff09\u5728\u6536\u5230\u4e00\u4e2a\u914d\u7f6eBPDU\u540e\uff0c20s\u5185\u6ca1\u6709\u518d\u6b21\u6536\u5230\u914d\u7f6eBPDU\uff0c\u5219\u5207\u6362\u5230Listening\u72b6\u6001\u3002 \u7f51\u7edc\u4e2d\u7684\u751f\u6210\u6811\u62d3\u6251\u4f9d\u9644\u4e8e\u6839\u6865\u7684\u8ba1\u65f6\u5668\uff0c\u6839\u6865\u5c06\u914d\u7f6eBPDU\u4e2d\u7684\u8ba1\u65f6\u5668\u65f6\u95f4\u95f4\u9694\u4f20\u9012\u7ed9\u6240\u6709\u4ea4\u6362\u673a\u3002\u5bf9\u4e8e 802.1D\u6807\u51c6\u7684STP\u800c\u8a00\uff0c\u7aef\u53e3\u4eceBlocking\u5230Forwarding\u901a\u5e38\u898130-50s\uff0830s\u662f15+15\uff0c\u4e5f\u5c31\u662f\u4e24\u4e2a\u8f6c\u53d1\u5ef6\u8fdf\u65f6\u95f4\uff0c50s\u537320+15+15\uff09\u3002 STP\u7aef\u53e3\u72b6\u6001 \u00b6 \u5173\u4e8e\u4e3a\u4ec0\u4e48\u8981\u5b9a\u4e49\u8fd9\u4e48\u591a\u7684\u7aef\u53e3\u72b6\u6001\uff0c\u5176\u5b9e\u5f88\u597d\u7406\u89e3\uff0c\u62ffLearning\u6765\u8bf4\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u8ba9\u7aef\u53e3\u4e00\u65e6\u88ab\u9009\u4e3e\u4e3a\u6307\u5b9a\u7aef\u53e3\u540e\u7acb\u5373\u8fdb\u5165\u8f6c\u53d1\u72b6\u6001\u5462\uff1f\u8bbe\u60f3\u4e00\u4e0b\uff0c\u7aef\u53e3\u6fc0\u6d3b\u540e\uff0c\u4ea4\u6362\u673a\u5728\u8be5\u7aef\u53e3\u662f\u6ca1\u6709\u5b66\u4e60\u5230\u4efb\u4f55\u7684MAC\u5730\u5740\u8868\u9879\u7684\uff0c\u5982\u679c\u6ca1\u6709\u8bbe\u8ba1Learning\u72b6\u6001\u7684\u8bdd\uff0c\u7aef\u53e3\u5c06\u76f4\u63a5\u8fdb\u5165\u8f6c\u53d1\u72b6\u6001\uff0c\u90a3\u4e48\u5c31\u6709\u53ef\u80fd\u5f15\u53d1\u77ed\u6682\u7684\u6570\u636e\u6cdb\u6d2a\uff08\u4ea4\u6362\u673a\u6536\u5230\u76ee\u7684MAC\u5730\u5740\u672a\u77e5\u7684\u6570\u636e\u5e27\u65f6\u4f1a\u8fdb\u884c\u6cdb\u6d2a\uff09\u3002 \u4e0b\u56fe\u662f\u6bcf\u4e2a\u72b6\u6001\u7684\u5207\u6362\u5173\u7cfb\u56fe\uff1a STP\u7684\u57fa\u7840\u914d\u7f6e \u00b6 \u57fa\u7840\u914d\u7f6e \u00b6 \u6307\u5b9a\u751f\u6210\u6811\u534f\u8bae\u7c7b\u578b\uff08STP/RSTP/MSTP\uff09\uff1a \u914d\u7f6e\u4ea4\u6362\u673a\u4f18\u5148\u7ea7\uff1a \u914d\u7f6e\u8be5\u4ea4\u6362\u673a\u6210\u4e3a\u4e3b\u6839\u6865\uff1a \u914d\u7f6e\u8be5\u4ea4\u6362\u673a\u6210\u4e3a\u6b21\u6839\u6865\uff1a \u542f\u7528\u751f\u6210\u6811\uff1a \u914d\u7f6e\u7aef\u53e3STP\u4f18\u5148\u7ea7\uff1a \u914d\u7f6e\u7aef\u53e3\u8def\u5f84\u5f00\u9500\uff1a \u57fa\u7840\u5b9e\u9a8c \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0c\u5728SW1\u3001SW2\u53caSW3\u4e0a\u8fd0\u884cSTP\uff0c\u5e76\u5c06SW1\u6307\u5b9a\u4e3a\u4e3b\u6839\u6865\uff0cSW2\u6307\u5b9a\u4e3a\u6b21\u6839\u6865\uff0c \u6700\u7ec8\u9700\u4f7f\u5f97SW3\u7684GE0/0/22\u63a5\u53e3\u88ab\u963b\u585e\u3002 \u4ece\u62d3\u6251\u6211\u4eec\u80fd\u975e\u5e38\u76f4\u89c2\u7684\u770b\u51fa\uff0c\u5728\u7269\u7406\u4e0a\u8fd9\u662f\u4e00\u4e2a\u5197\u4f59\u7684\u73af\u5883\uff0c\u5e76\u4e14\u5b58\u5728\u4e8c\u5c42\u73af\u8def\u3002\u4e00\u65e6\u5728\u8fd9\u4e2a\u7f51\u7edc\u4e2d\u51fa\u73b0\u6d41\u91cf\uff0c\u90a3\u4e48\u6d41\u91cf\u5c31\u5f88\u6709\u53ef\u80fd\u5728\u73af\u8def\u4e2d\u88ab\u4e0d\u65ad\u6cdb\u6d2a\u4ece\u800c\u5bfc\u81f4\u5e7f\u64ad\u98ce\u66b4\u3002\u5f53\u51fa\u73b0\u5e7f\u64ad\u98ce\u66b4\u65f6\uff0c\u6211\u4eec\u80fd\u4ece\u8bbe\u5907\u7684\u6307\u793a\u706f\u4e0a\u89c2\u5bdf\u5230\u975e\u5e38\u76f4\u89c2\u7684\u73b0\u8c61\uff1a\u8bbe\u5907\u7684\u6307\u793a\u706f\u4f1a\u51fa\u73b0\u975e\u5e38\u89c4\u5f8b\u7684\u201c\u9f50\u95ea\u201d\u3002\u53e6\u5916\uff0c\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u5e26\u5bbd\u5229\u7528\u7387\u53ef\u80fd\u4f1a\u6500\u5347\u5230\u4e00\u4e2a\u6bd4\u8f83\u9ad8\u7684\u503c\uff0c\u800c\u4e14\u5982\u679c\u5e7f\u64ad\u98ce\u66b4\u6bd4\u8f83\u4e25\u91cd\uff0c\u4ea4\u6362\u673a\u7684CPU\u5229\u7528\u7387\u4e5f\u53ef\u80fd\u4f1a\u98d9\u9ad8\uff0c\u4ece\u800c\u5f71\u54cd\u5230\u5176\u5de5\u4f5c\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5728\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cSTP\u5f00\u59cb\u5de5\u4f5c\uff0c\u5e76\u5f00\u59cb\u9009\u4e3e\u6839\u6865\uff0c\u4e09\u53f0\u4ea4\u6362\u673a\u4e2d\uff0cSTP\u6865ID\uff08\u6865\u4f18\u5148\u7ea7\u548c\u6865MAC\uff09 \u6700\u5c0f\u7684\u4ea4\u6362\u673a\u5c06\u6210\u4e3a\u672c\u4ea4\u6362\u7f51\u7edc\u7684\u6839\u6865\u3002\u5f53\u7136\uff0c\u6240\u6709\u7684\u4ea4\u6362\u673a\u9ed8\u8ba4\u7684\u6865\u4f18\u5148\u7ea7\u4e3a32768\uff0c\u8fd9\u6837\u4e00\u6765\u62e5\u6709\u6700\u5c0f\u80cc\u677fMAC\u7684\u4ea4\u6362\u673a\u5c06\u6210\u4e3a\u7f51\u7edc\u7684\u6839\u6865\uff0c\u8fd9\u663e\u7136\u5e26\u6709\u4e00\u5b9a\u7684\u968f\u673a\u6027\uff0c\u5728\u5b9e\u9645\u7684\u7f51\u7edc\u90e8\u7f72\u4e2d\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u624b\u5de5\u6307\u5b9a\u4e00\u53f0\u8bbe\u5907\u6210\u4e3a\u6839\u6865\uff0c\u4ece\u800c\u4fdd\u8bc1\u751f\u6210\u6811\u8ba1\u7b97\u7684\u7a33\u5b9a\u6027\u3002\u4f8b\u5982\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u624b\u5de5\u6307\u5b9aSW1 \u6210\u4e3a\u7f51\u7edc\u7684\u4e3b\u6839\u6865\uff0cSW2\u6210\u4e3a\u7f51\u7edc\u7684\u6b21\u6839\u6865\uff1a SW1\u4e0a\u589e\u52a0\u7684\u914d\u7f6e\u5982\u4e0b\uff1a [SW1] stp root primary SW2\u4e0a\u589e\u52a0\u7684\u914d\u7f6e\u5982\u4e0b\uff1a [SW2] stp root secondary \u73b0\u5728\uff0c\u6211\u4eec\u518d\u770b\u770b\u5b9e\u9a8c\u6548\u679c\uff0c\u5728SW1\u4e0a\u67e5\u770bSTP\u7684\u5168\u5c40\u4fe1\u606f\uff1a \u4ece\u8f93\u51fa\u7684\u4fe1\u606f\u6211\u4eec\u5f97\u77e5\uff0c\u672c\u4ea4\u6362\u673a\u7684\u6865ID\u4e3a 0\uff1a4c1f-cc06-71d8\uff0c\u5176\u4e2d0\u4e3a\u4ea4\u6362\u673a\u7684\u6865\u4f18\u5148\u7ea7\uff0c\u8fd9\u663e\u7136 \u662f\u6211\u4eec\u7684\u547d\u4ee4**stp root primary**\u7684\u4f5c\u7528\uff0c\u4ea4\u6362\u673a\u7684\u4f18\u5148\u7ea7\u88ab\u914d\u7f6e\u4e3a0\u2014\u2014\u6700\u5c0f\u503c\u4e5f\u662f\u6700\u4f18\u7684\u503c\u30024c1f- cc06-71d8\u662f\u672c\u673a\u7684MAC\u5730\u5740\u3002\u800c\u4e0a\u8ff0\u8f93\u51fa\u7684\u4fe1\u606f\u4e2d\uff0c\u6839\u6865\u7684MAC\u4e5f\u662f4c1f-cc06-71d8\uff0c\u8fd9\u5c31\u8868\u660e\uff0c\u672c\u4ea4\u6362\u673a\u5c31\u662f\u7f51\u7edc\u7684\u6839\u6865\u3002\u518d\u6765\u67e5\u770b\u4e0bSW1\u7684\u751f\u6210\u6811\u63a5\u53e3\u72b6\u6001\uff1a \u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770bSTP\u7684\u76f8\u5173\u7b80\u5316\u4fe1\u606f\uff0c\u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u51fa\uff0cSW1\u7684\u4e24\u4e2a\u63a5\u53e3\u90fd\u662f\u6307\u5b9a\u63a5\u53e3\uff08DESI\uff09\uff0c\u5e76\u4e14\u90fd\u662fForwarding\u8f6c\u53d1\u72b6\u6001\u3002 \u518d\u53bbSW2\u4e0a\u770b\u770b\uff1a [SW2] display stp -------[CIST Global Info][Mode STP]------- CIST Bridge :4096 .4c1f-cc34-71cd #\u672c\u673a\u7684\u6865ID Config Times :Hello 2s MaxAge 20s FwDly 15s MaxHop 20 Active Times CIST Root/ERPC :Hello 2s MaxAge 20s FwDly 15s MaxHop 20 :0 .4c1f-cc06-71d8 / 1 #\u6839\u6865\u7684\u6865ID\uff0c\u4e5f\u5c31\u662fSW1 CIST RegRoot/IRPC :4096 .4c1f-cc34-71cd / 0 CIST RootPortId :128.24 BPDU-Protection :Disabled CIST Root Type :Secondary root SW2\u4e3a\u6b21\u6839\u6865\uff0c\u5b83\u5c06\u5728\u68c0\u6d4b\u5230SW1\u51fa\u73b0\u6545\u969c\u540e\uff0c\u66ff\u4ee3\u5b83\u6210\u4e3a\u7f51\u7edc\u7684\u6839\u6865\u3002 \u6211\u60f3\uff0c\u4f60\u5df2\u7ecf\u80fd\u60f3\u5230SW3\u4e0a\u54ea\u4e00\u4e2a\u7aef\u53e3\u5c06\u88abBlocked\u4e86\uff1a SW3\u7684GE0/0/22\u53e3\u73b0\u5728\u662fDiscarding\u72b6\u6001\uff0c\u88ab\u963b\u585e\u4e86\u3002\u8fd9\u662f\u56e0\u4e3a\u8fd9\u4e2a\u63a5\u53e3\u5230\u8fbe\u6839\u6865SW1\u7684\u5f00\u9500\u6700\u5927\u3002 \u5982\u679c\u6b64\u65f6\u5e0c\u671bSW3\u88ab\u963b\u585e\u7684\u4e0d\u662fGE0/0/22\u53e3\uff0c\u800c\u662fGE0/0/21\u53e3\u5462\uff1f\u4e00\u79cd\u53ef\u9009\u7684\u529e\u6cd5\u662f\uff0c\u5c06GE0/0/21 \u7684\u63a5\u53e3\u5f00\u9500\u8c03\u5927\uff0c\u4f7f\u5f97\u4ece\u8fd9\u4e2a\u63a5\u53e3\u4e0a\u6536\u5230\u914d\u7f6eBPDU\u540e\uff0c\u7d2f\u52a0\u7684\u6839\u8def\u5f84\u5f00\u9500\u6bd4GE0/0/22\u53e3\u7684\u7d2f\u52a0\u503c\u8981\u5927\uff0c \u4e5f\u5c31\u662f\u4f7f\u5f97\u8fd9\u4e2a\u63a5\u53e3\u8ddd\u79bb\u6839\u6865SW1\u7684\u201c\u5f00\u9500\u201d\u66f4\u5927\u3001\u201c\u66f4\u8fdc\u201d\u3002 SW3\u589e\u52a0\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u68c0\u67e5\u4e00\u4e0bSW3\u7684\u63a5\u53e3\u89d2\u8272\u548c\u72b6\u6001\uff1a [SW3] display stp brief MSTID Port Role STP State Protection 0 GigabitEthernet0/0/21 ALTE DISCARDING NONE 0 GigabitEthernet0/0/22 ROOT DISCARDING NONE STP \u7684\u7279\u6027\u53ca\u4f18\u5316 STP\u53caBPDU\u53d6\u6d88\u4f7f\u80fd \u00b6 [Switch-GigabitEthernet0/0/1] stp disable \u4e0a\u8ff0\u547d\u4ee4\u7528\u4e8e\u5728\u63a5\u53e3\u4e0a\u5173\u95edSTP\u3002\u5982\u679c\u4ea4\u6362\u673a\u5728\u5168\u5c40\u4f7f\u80fd\u4e86STP\uff0c\u5219\u6240\u6709\u63a5\u53e3\u4e5f\u5c06\u6fc0\u6d3bSTP\u3002\u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\uff0c\u5c06\u4f1a\u5173\u95ed\u67d0\u4e2a\u7279\u5b9a\u63a5\u53e3\u7684STP\uff0c\u8fd9\u6837\u4e00\u6765\u8fd9\u4e2a\u63a5\u53e3\u5c06\u4e0d\u518d\u53c2\u4e0eSTP\u8ba1\u7b97\uff0c\u6b64\u540e\uff0c\u4f7f\u7528**display stp interface** \u547d\u4ee4\u4f1a\u770b\u5230\u8be5\u63a5\u53e3\u7684STP\u88ab\u7981\u7528\uff0c\u4f7f\u7528**display stp brief**\u547d\u4ee4\u5219\u4e0d\u4f1a\u770b\u5230\u8fd9\u4e2a\u63a5\u53e3\u51fa\u73b0\u5728STP\u63a5\u53e3\u5217\u8868\u4e2d\u3002 \u5f53\u4ea4\u6362\u673a\u7684\u4e00\u4e2a\u63a5\u53e3\u8fde\u63a5\u7740\u4e00\u53f0\u8def\u7531\u5668\uff08\u7684\u8def\u7531\u63a5\u53e3\uff09\u6216\u8005\u5176\u4ed6\u4e0d\u53ef\u80fd\u4ea7\u751f\u4e8c\u5c42\u73af\u8def\u7684\u8bbe\u5907\u65f6\uff0c\u5728\u4ea4\u6362\u673a\u7684\u8fd9\u4e2a\u63a5\u53e3\u4e0a\u8fd0\u884cSTP\u5b9e\u9645\u4e0a\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u8003\u8651\u5c06\u8be5\u63a5\u53e3\u7684STP\u5173\u95ed\u3002 [Switch-GigabitEthernet0/0/2] bpdu disable \u63a5\u53e3\u7ea7\u547d\u4ee4**bpdu enable**\u7528\u6765\u914d\u7f6e\u63a5\u53e3\u4e0a\u9001BPDU\u62a5\u6587\uff0c\u63a5\u53e3\u5bf9\u76ee\u7684MAC\u5730\u5740\u5c5e\u4e8eBPDU MAC\u7684\u62a5\u6587\u4e0a\u9001 CPU\u5904\u7406\uff0cBPDU MAC\u53ef\u4ee5\u901a\u8fc7**display bpdu mac-address**\u547d\u4ee4\u67e5\u770b\uff0c\u800c**bpdu disable**\u547d\u4ee4\u5c06\u4f7f\u63a5\u53e3\u628a\u6536\u5230\u7684BPDU\u62a5\u6587\u4e22\u5f03\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u9519\u8bef\u7684\u914d\u7f6e**bpdu disable**\u5c06\u4f1a\u5bfc\u81f4STP\u8ba1\u7b97\u7684\u9519\u8bef\u4ece\u800c\u5bfc\u81f4\u73af\u8def\uff0c\u56e0\u6b64\u8be5\u547d\u4ee4\u8981\u683c\u5916\u7559\u610f\u3002S5300 V100R005C01SPC100\u7248\u672c\u7684\u4ea4\u6362\u673a\u9ed8\u8ba4\u5728STP\u5168\u5c40\u6fc0\u6d3b\u7684\u60c5\u51b5\u4e0b\u63a5\u53e3\u7684bpdu\u662fdisable\u7684 \uff08S5300\u7684\u5176\u4ed6\u8f6f\u4ef6\u7248\u672c\u5219\u8981\u770b\u7248\u672c\u7684\u63cf\u8ff0\uff09\uff0c\u9700\u8981\u6ce8\u610f\u8fd9\u4e00\u70b9\u3002 \u8fb9\u7f18\u7aef\u53e3\uff08Edged-port\uff09 \u00b6 \u57fa\u672c\u6982\u5ff5 \u00b6 \u6211\u4eec\u77e5\u9053\u5728\u8fd0\u884c\u4e86STP\u7684\u4ea4\u6362\u673a\u4e0a\uff0c\u4e00\u4e2a\u7aef\u53e3\u5728UP\u4e4b\u540e\uff0c\u9700\u8981\u7ecf\u8fc7Listening\u3001Learning\u4e24\u4e2a\u72b6\u6001\u624d\u80fd\u591f\u6700\u7ec8\u8fdb\u5165Forwarding\u72b6\u6001\u5f00\u59cb\u8f6c\u53d1\u6570\u636e\u5e27\uff08\u5f53\u7136\u524d\u63d0\u662f\u8be5\u7aef\u53e3\u4e0d\u80fd\u662f\u975e\u6307\u5b9a\u7aef\u53e3\uff09\uff0c\u8fd9\u91cc\u5c31\u8017\u8d39\u4e86\u4e24\u4e2a15s\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002\u8fd9\u5b9e\u9645\u4e0a\u662f\u975e\u5e38\u4f4e\u6548\u7684\u3002 \u4ea4\u6362\u673a\u8fde\u63a5\u7ec8\u7aef\u8bbe\u5907\uff08\u4f8b\u5982PC\u3001\u670d\u52a1\u5668\u7b49\uff09\u7684\u7aef\u53e3\u4e00\u822c\u662f\u4e0d\u4f1a\u4ea7\u751f\u4e8c\u5c42\u73af\u8def\u7684\uff0c\u5176\u5b9e\u5e76\u4e0d\u9700\u8981\u4e0a\u8ff0\u72b6\u6001\u7684\u5207\u6362\u8fc7\u7a0b\uff0c\u53ef\u76f4\u63a5\u8fdb\u5165\u8f6c\u53d1\u72b6\u6001\uff0c\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\u3002\u5c06\u4ea4\u6362\u673a\u8fde\u63a5\u7ec8\u7aef\u8bbe\u5907\u7684\u7aef\u53e3\u914d\u7f6e\u4e3a\u8fb9\u7f18\u7aef\u53e3 \uff08Edge-port\uff09\u5373\u53ef\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002\u8fb9\u7f18\u7aef\u53e3\u4e0d\u53c2\u4e0e\u751f\u6210\u6811\u7684\u8ba1\u7b97\uff0c\u5b83\u53ef\u4ee5\u5728UP\u540e\u7acb\u5373\u8fdb\u5165\u8f6c\u53d1\u72b6\u6001\u3002\u53e6\u5916\uff0c\u8fb9\u7f18\u7aef\u53e3\u7684UP/DOWN\u4e0d\u4f1a\u89e6\u53d1STP\u62d3\u6251\u53d8\u66f4\u800c\u53d1\u751fTC\u62a5\u6587\u3002 \u5728\u6ca1\u6709\u914d\u7f6eBPDU\u4fdd\u62a4\uff08\u5c06\u5728\u540e\u7eed\u7684\u5185\u5bb9\u4e2d\u4ecb\u7ecd\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u8fb9\u7f18\u7aef\u53e3\u4e00\u65e6\u6536\u5230BPDU\uff0c\u5c31\u4e27\u5931\u4e86\u8fb9\u7f18 \u7aef\u53e3\u5c5e\u6027\uff0c\u6210\u4e3a\u4e86\u666e\u901a\u7684STP\u7aef\u53e3\u3002 \u914d\u7f6e\u5b9e\u73b0 \u00b6 \u8fd0\u884c\u4e86STP\u7684\u4ea4\u6362\u673a\uff0c\u5728\u5176\u8fde\u63a5\u7ec8\u7aef\u8bbe\u5907\u7684\u63a5\u53e3\u4e0a\u90fd\u53ef\u4ee5\u5f00\u542f\u8be5\u7279\u6027\u3002 \u5728\u5b9e\u9645\u7684\u9879\u76ee\u4e2d\uff0c\u5982\u679c\u7f51\u7edc\u4e2d\u91c7\u7528ATAE/E9000\u8bbe\u5907\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u90a3\u4e48\u6211\u4eec\u4f1a\u5c06ATAE/E9000\u7684\u4ea4\u6362\u677f\u8fde\u63a5\u4e1a\u52a1\u677f\u7684\u5185\u90e8\u63a5\u53e3\u914d\u7f6e\u4e3a\u8fb9\u7f18\u7aef\u53e3\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u7aef\u53e3\u7528\u4e8e\u8fde\u63a5\u5200\u7247\u670d\u52a1\u5668\u7684\u7f51\u5361\uff08\u7f51\u5361\u5de5\u4f5c\u5728\u4e09\u5c42\u6a21\u5f0f\uff09\uff0c\u5982\u56fe\u4e2d\u6240\u793a\u3002 BPDU\u4fdd\u62a4\uff08Protection\uff09 \u00b6 \u6280\u672f\u80cc\u666f \u00b6 \u8fb9\u7f18\u7aef\u53e3\u4e00\u822c\u7528\u4e8e\u76f4\u63a5\u548c\u7528\u6237\u7ec8\u7aef\u76f8\u8fde\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u8fb9\u7f18\u7aef\u53e3\u4e0d\u4f1a\u6536\u5230BPDU\u62a5\u6587\uff08\u56e0\u4e3a\u8fde\u63a5\u7684\u662f\u7ec8\u7aef\uff0c\u800c\u4e0d\u662f\u4ea4\u6362\u8bbe\u5907\uff09\u3002\u4f46\u662f\u5982\u679c\u653b\u51fb\u8005\u4f2a\u9020BPDU\u6076\u610f\u653b\u51fb\u4ea4\u6362\u673a\u90a3\u5c31\u4f1a\u5b58\u5728\u5b89\u5168\u9690\u60a3\uff08\u6216\u8005\u63a5\u53e3\u8bef\u63a5\u4e86\u4ea4\u6362\u673a\uff0c\u90a3\u4e48\u5c31\u6709\u53ef\u80fd\u4ea7\u751f\u73af\u8def\uff09\uff0c\u5f53\u8fb9\u7f18\u7aef\u53e3\u63a5\u6536\u5230BPDU\u65f6\uff0c\u8bbe\u5907\u4f1a\u81ea\u52a8\u5c06\u8fb9\u7f18\u7aef\u53e3\u8bbe\u7f6e\u4e3a\u975e\u8fb9\u7f18\u7aef\u53e3\uff0c\u5e76\u91cd\u65b0\u8fdb\u884c\u751f\u6210\u6811\u8ba1\u7b97\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u6709\u53ef\u80fd\u5f15\u8d77\u7f51\u7edc\u7684\u9707\u8361\u3002 \u901a\u8fc7\u4f7f\u80fdBPDU\u4fdd\u62a4\u53ef\u4ee5\u9632\u6b62\u4f2a\u9020BPDU\u6076\u610f\u653b\u51fb\u3002 \u57fa\u672c\u6982\u5ff5 \u00b6 \u4ea4\u6362\u673a\u4e0a\u542f\u52a8BPDU\u4fdd\u62a4\u529f\u80fd\u540e\uff0c\u5982\u679c\u8fb9\u7f18\u7aef\u53e3\u6536\u5230BPDU\u62a5\u6587\uff0c\u8bbe\u5907\u5c06\u5173\u95ed\uff08shutdown\uff09\u8fd9\u4e9b\u7aef\u53e3\uff0c \u540c\u65f6\u901a\u77e5\u7f51\u7ba1\u7cfb\u7edf\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u4ea4\u6362\u673a\u7684BPDU\u4fdd\u62a4\u529f\u80fd\u5e76\u672a\u5f00\u542f\u3002 \u914d\u7f6e\u5b9e\u73b0 \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u5728SW3\u4e0a\u5c06GE0/0/1 \u914d\u7f6e\u4e3a\u8fb9\u7f18\u7aef\u53e3\uff0c\u968f\u540e\u5728SW3\u4e0a\u5f00\u542f\u4e86BPDU- Protection\u7279\u6027\u3002\u5f53SW3\u7684GE0/0/1\u53e3\u6536\u5230BPDU\u62a5\u6587\u65f6\uff0c\u4ea4\u6362\u673a\u5c06\u4ea7\u751f\u5982\u4e0b\u63d0\u793a\u4fe1\u606f\uff0c\u5e76\u5c06GE0/0/1\u53e3shutdown\uff1a \u6b64\u65f6\u5728SW3\u4e0a\u67e5\u770b\u63a5\u53e3\u7684STP\u4fe1\u606f\u5982\u4e0b\uff1a \u8981\u6062\u590d\u88abshutdown\u7684BPDU\u53d7\u4fdd\u62a4\u8fb9\u7f18\u7aef\u53e3\uff0c\u53ef\u4f7f\u7528\u624b\u5de5\u5728\u63a5\u53e3\u4e0b\u6267\u884c**undo shutdown**\u547d\u4ee4\u7684\u65b9\u5f0f\uff0c \u6216\u8005\u91c7\u7528\u81ea\u52a8\u6062\u590d\u7684\u65b9\u5f0f\uff0c\u5373\u5728\u7cfb\u7edf\u89c6\u56fe\u4e0b\u6267\u884c\u547d\u4ee4**error-down auto-recovery cause cause-item interval** interval-value \uff0c\u6fc0\u6d3b\u63a5\u53e3\u7ba1\u7406\u72b6\u6001\u81ea\u52a8\u6062\u590d\u4e3aUp\u7684\u529f\u80fd\uff0c\u5e76\u8bbe\u7f6e\u63a5\u53e3\u81ea\u52a8\u6062\u590d\u4e3aUp\u7684\u5ef6\u65f6\u65f6\u95f4\uff0c\u4f7f\u88ab\u5173\u95ed\u7684\u7aef\u53e3\u7ecf\u8fc7\u5ef6\u65f6\u65f6\u95f4\u540e\u80fd\u591f\u81ea\u52a8\u6062\u590d\u3002\u5bf9\u4e8e\u53c2\u6570interval\uff0c\u53d6\u503c\u8303\u56f4\u662f30\uff5e86400\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u914d\u7f6e\u65f6\u9700\u8981\u6ce8\u610f\u4e24\u70b9\uff1a \u53d6\u503c\u8d8a\u5c0f\u8868\u793a\u63a5\u53e3\u7684\u7ba1\u7406\u72b6\u6001\u81ea\u52a8\u6062\u590d\u4e3aUp\u7684\u5ef6\u8fdf\u65f6\u95f4\u8d8a\u77ed\uff0c\u63a5\u53e3Up/Down\u72b6\u6001\u9707\u8361\u9891\u7387\u8d8a\u9ad8\u3002 \u53d6\u503c\u8d8a\u5927\u8868\u793a\u63a5\u53e3\u7684\u7ba1\u7406\u72b6\u6001\u81ea\u52a8\u6062\u590d\u4e3aUp\u7684\u5ef6\u8fdf\u65f6\u95f4\u8d8a\u957f\uff0c\u63a5\u53e3\u6d41\u91cf\u4e2d\u65ad\u65f6\u95f4\u8d8a\u957f\u3002 \u6839\u4fdd\u62a4\uff08Root Protection\uff09 \u00b6 \u6280\u672f\u80cc\u666f \u00b6 \u57fa\u672c\u6982\u5ff5 \u00b6 \u5728SW1\u7684GE0/0/24\u53e3\u4e0a\u90e8\u7f72\u4e86\u6839\u4fdd\u62a4\u540e\uff0c\u5f53\u8be5\u63a5\u53e3\u518d\u6536\u5230\u66f4\u4f18\u7684BPDU\u62a5\u6587\u540e\uff0cSW1\u5c06\u8fd9\u4e2a\u63a5\u53e3\u5207\u6362\u5230Discarding\u72b6\u6001\uff0c\u5982\u6b64\u4e00\u6765SW1\u7684\u6839\u6865\u5b9d\u5ea7\u5c31\u80fd\u591f\u5750\u7684\u5f88\u7a33\u5f53\u3002 \u914d\u7f6e\u5b9e\u73b0 \u00b6 \u5728\u4ea4\u6362\u8bbe\u5907\u4e0a\u914d\u7f6e\u6839\u4fdd\u62a4\u529f\u80fd\uff0c\u901a\u8fc7\u7ef4\u6301\u6307\u5b9a\u7aef\u53e3\u7684\u89d2\u8272\u6765\u4fdd\u62a4\u6839\u4ea4\u6362\u8bbe\u5907\u7684\u5730\u4f4d\u3002\u6839\u4fdd\u62a4\u662f\u6307\u5b9a\u7aef\u53e3\u4e0a\u7684\u7279\u6027\u3002\u5f53\u7aef\u53e3\u7684\u89d2\u8272\u662f\u6307\u5b9a\u7aef\u53e3\u65f6\uff0c\u914d\u7f6e\u7684\u6839\u4fdd\u62a4\u529f\u80fd\u624d\u751f\u6548\u3002\u82e5\u5728\u5176\u4ed6\u7c7b\u578b\u7684\u7aef\u53e3\u4e0a\u914d\u7f6e\u6839\u4fdd\u62a4\u529f\u80fd\uff0c\u5219\u4e0d\u4f1a\u751f\u6548\u3002 \u73af\u8def\u4fdd\u62a4\uff08Loop Protection\uff09 \u00b6 \u6280\u672f\u80cc\u666f \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u73af\u5883\u4e2d\uff0cSW1\u4e3aSTP\u6839\u6865\uff0cSW3\u7684GE0/0/23\u7531\u4e8e\u88ab\u9009\u4e3e\u4e3a\u975e\u6307\u5b9a\u7aef\u53e3\u56e0\u6b64\u5904\u4e8e Discarding\u72b6\u6001\uff0c\u8be5\u63a5\u53e3\u867d\u7136\u5904\u4e8eDiscarding\u72b6\u6001\uff0c\u4f46\u662f\u4ecd\u7136\u4f1a\u6301\u7eed\u4fa6\u542cSW2\u53d1\u6765\u7684BPDU\u62a5\u6587\u3002 \u73b0\u5728\uff0cSW2\u3001SW3\u4e4b\u95f4\u7684\u94fe\u8def\u7a81\u7136\u53d1\u751f\u4e86\u5355\u5411\u94fe\u8def\u6545\u969c\uff0cSW2\u53d1\u9001\u7684\u62a5\u6587\u65e0\u6cd5\u5230\u8fbeSW3\uff0c\u8fd9\u5c06\u5bfc\u81f4SW3\u7684GE0/0/23\u53e3\u65e0\u6cd5\u518d\u6536\u5230BPDU\uff0c\u56e0\u6b64\u5b83\u8ba4\u4e3aSW2\u53d1\u751f\u4e86\u6545\u969c\uff0c\u4e8e\u662f\u91cd\u65b0\u8fdb\u884cSTP\u8ba1\u7b97\uff0c\u6700\u7ec8GE0/0/23 \u53e3\u7684\u89d2\u8272\u5c06\u5207\u6362\u6210\u6307\u5b9a\u7aef\u53e3\uff0c\u800c\u72b6\u6001\u4e5f\u5c06\u5207\u6362\u5230\u8f6c\u53d1\u72b6\u6001\uff0c\u81f3\u6b64\u5c31\u51fa\u73b0\u4e86\u73af\u8def\uff0c\u56e0\u4e3a\u4eceSW3\u5230SW2\u7684\u5355\u5411\u94fe\u8def\u4ecd\u7136\u5728\u5de5\u4f5c\u3002 \u57fa\u672c\u6982\u5ff5 \u00b6 \u4ea4\u6362\u673a\u7684\u6839\u7aef\u53e3\u53ca\u5904\u4e8eDisacarding\u72b6\u6001\u7684\u63a5\u53e3\u4f1a\u6e90\u6e90\u4e0d\u65ad\u7684\u6536\u5230BPDU\u62a5\u6587\uff0c\u5f53\u8fd9\u4e9b\u7aef\u53e3\u7531\u4e8e\u94fe\u8def\u7684 \u5355\u5411\u6545\u969c\u5bfc\u81f4\u6536\u4e0d\u5230BPDU\u62a5\u6587\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u8fdb\u884cSTP\u7684\u91cd\u65b0\u8ba1\u7b97\u3002\u539f\u6765\u7684\u6839\u7aef\u53e3\u5c31\u4f1a\u53d8\u6210\u6307\u5b9a\u7aef\u53e3\uff0c \u539f\u6765\u5904\u4e8eDiscarding\u72b6\u6001\u7684\u7aef\u53e3\u4f1a\u5207\u6362\u5230Forwarding\u72b6\u6001\uff0c\u4ece\u800c\u5bfc\u81f4\u73af\u8def\u7684\u51fa\u73b0\u3002 \u5728\u6839\u7aef\u53e3\u4e0a\u542f\u7528\u4e86Loop Protection\u540e\uff0c\u5982\u679c\u5176\u7aef\u53e3\u89d2\u8272\u53d1\u751f\u53d8\u5316\uff0c\u4f8b\u5982\u5207\u6362\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u90a3\u4e48\u8be5\u7aef\u53e3\u5c06\u4f1a\u88ab\u963b\u585e\uff0c\u4e5f\u5c31\u662f\u8fdb\u5165Discarding\u72b6\u6001\uff0c\u76f4\u5230\u518d\u6b21\u6536\u5230BPDU\u3002\u5728\u963b\u585e\u7aef\u53e3\u4e0a\u542f\u7528\u4e86Loop Protection\u540e\uff0c \u7aef\u53e3\u5c06\u4e00\u76f4\u5904\u4e8eDiscarding\u72b6\u6001\uff0c\u5373\u4f7f\u8be5\u7aef\u53e3\u88ab\u9009\u4e3e\u4e3a\u6307\u5b9a\u7aef\u53e3\u3002\u5728STP\u4e2d\uff0c\u6b64\u529f\u80fd\u53ea\u80fd\u914d\u7f6e\u5728\u6839\u7aef\u53e3\u3001\u66ff\u4ee3\u7aef\u53e3\u53ca\u5907\u4efd\u7aef\u53e3\u4e0a\u3002 \u914d\u7f6e\u5b9e\u73b01\uff08\u8be5\u7279\u6027\u5728\u6839\u7aef\u53e3\u4e0a\u90e8\u7f72\uff09 \u00b6 LOOP Protection \u90e8\u7f72\u524d\uff1a \u00b6 \u5728STP\u5b8c\u6210\u6536\u655b\u540e\uff0cSW3\u7684GE0/0/22\u53e3\u662f\u6839\u7aef\u53e3\uff0cGE0/0/23\u662f\u66ff\u4ee3\u7aef\u53e3\u5904\u4e8eDiscarding\u72b6\u6001\u3002 \u5728SW1\u7684GE0/0/22\u53e3\u4e0a\u6267\u884c**disable stp**\uff0c\u6765\u6a21\u62df\u94fe\u8def\u51fa\u73b0\u5355\u5411\u6545\u969c\u7684\u60c5\u51b5\uff0c\u5982\u6b64\u4e00\u6765SW3\u5c06\u65e0\u6cd5\u518d\u4eceGE0/0/22\u53e3\u6536\u5230ROOT SW1\u53d1\u9001\u8fc7\u6765\u7684BPDU\u4e86\u3002 STP\u518d\u6b21\u5b8c\u6210\u6536\u655b\u540e\uff0cSW3\u7684GE0/0/23\u53e3\u88ab\u9009\u4e3e\u6210\u4e3a\u6839\u7aef\u53e3\uff0c\u800cGE0/0/22\u53e3\u6210\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u73af\u8def\u5c31\u4ea7\u751f\u4e86\u3002 LOOP Protection \u90e8\u7f72\u540e \u00b6 \u73b0\u5728\u6211\u4eec\u5728SW3\u7684GE0/0/22\u53e3\u4e0a\u90e8\u7f72loop protection\u7279\u6027\u3002 SW3\u91cd\u65b0\u8fdb\u884cSTP\u7684\u8ba1\u7b97\uff0cGE0/0/23\u53e3\u6210\u4e3a\u6839\u7aef\u53e3\uff0cGE0/0/22\u53e3\u6210\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u4f46\u662f\u7531\u4e8eGE0/0/22\u53e3\u4e0a\u90e8\u7f72\u4e86Loop Protection\uff0c\u56e0\u6b64\u8be5\u63a5\u53e3\u867d\u7136\u89d2\u8272\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u72b6\u6001\u5374\u4f1a\u4fdd\u6301\u5728Discarding\u72b6\u6001\uff0c \u4ece\u800c\u907f\u514d\u4e86\u73af\u8def\u7684\u51fa\u73b0\u3002 \u914d\u7f6e\u5b9e\u73b02\uff08\u8be5\u7279\u6027\u5728\u66ff\u4ee3\u7aef\u53e3\u4e0a\u90e8\u7f72\uff09 \u00b6 \u53e6\u5916\u4e00\u4e2a\u793a\u4f8b\u662f\uff0cLoopProtection\u90e8\u7f72\u5728\u66ff\u4ee3\u7aef\u53e3\u4e0a\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002 \u90a3\u4e48\u5f53SW2\u53caSW3\u4e4b\u95f4\u51fa\u73b0\u5355\u5411\u94fe\u8def\u6545\u969c\u65f6\uff0cSW3\u5c06\u65e0\u6cd5\u4eceGE0/0/23\u53e3\u518d\u6536\u5230BPDU\uff0c\u4e8e\u662fSW3\u91cd\u65b0\u8fdb\u884cSTP\u8ba1\u7b97\uff0c\u6b64\u65f6GE0/0/23\u53e3\u6210\u4e3a\u4e86\u6307\u5b9a\u7aef\u53e3\uff0c\u4f46\u662f\u7531\u4e8e\u914d\u7f6e\u4e86Loop Protection\u7279\u6027\uff0c\u56e0\u6b64\u8be5\u63a5\u53e3\u4f1a\u4fdd\u6301\u5728Discarding\u72b6\u6001\uff0c\u4ece\u800c\u907f\u514d\u4e86\u73af\u8def\u7684\u4ea7\u751f\u3002 TC Protection \u00b6 \u8bbe\u5907\u5728\u6536\u5230TC-BPDU\u540e\u4f1a\u6267\u884cMAC\u5730\u5740\u8868\u9879\u53caARP\u8868\u9879\u7684\u5220\u9664\u64cd\u4f5c\uff0c\u5982\u679c\u6709\u653b\u51fb\u8005\u4f2a\u9020\u5927\u91cf\u7684TC- BPDU\u62a5\u6587\u5bf9\u4ea4\u6362\u673a\u8fdb\u884c\u653b\u51fb\uff0c\u4ea4\u6362\u673a\u5c06\u9891\u7e41\u7684\u8fdb\u884c\u4e0a\u8ff0\u8868\u9879\u7684\u5220\u9664\u53ca\u5237\u65b0\u64cd\u4f5c\u4ece\u800c\u9020\u6210\u6781\u5927\u7684\u8d1f\u62c5\uff0c \u7ed9\u7f51\u7edc\u7684\u7a33\u5b9a\u5e26\u6765\u5f88\u5927\u7684\u9690\u60a3\u3002 \u5728\u4ea4\u6362\u673a\u4e0a\u5f00\u542fTC-Protection\u540e\uff0c\u4ea4\u6362\u673a\u4f1a\u5728\u6536\u5230TC-BPDU\u540e\u5220\u9664\u4e0a\u8ff0\u8868\u9879\u7684\u540c\u65f6\u542f\u52a8\u5468\u671f\u4e3a10s\u7684\u5b9a\u65f6\u5668\uff0c\u5728\u6b64\u5468\u671f\u5185\uff0c\u5982\u679c\u4ea4\u6362\u673a\u518d\u6b21\u6536\u5230TC-BPDU\u62a5\u6587\uff0c\u5219\u6700\u591a\u53ef\u4ee5\u8fdb\u884c1\u6b21\u5220\u9664\u4e0a\u8ff0\u8868\u9879\u7684\u64cd\u4f5c\uff0c \u4ece\u800c\u5b9e\u73b0\u5bf9\u4ea4\u6362\u673a\u7684\u4fdd\u62a4\u3002 MSTP \u80cc\u666f \u00b6 \u53e4\u8001\u7684STP 802.1D\u6807\u51c6\u662f\u6240\u6709VLAN\u5171\u7528\u4e00\u68f5\u751f\u6210\u6811\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u7ba1\u4ea4\u6362\u7f51\u7edc\u4e2d\u5b58\u5728\u591a\u5c11\u4e2aVLAN\uff0cSTP \u8ba1\u7b97\u7684\u7ed3\u679c\u90fd\u662f\u4e00\u68f5\u751f\u6210\u6811\uff0c\u62ff\u4e0a\u56fe\u6765\u8bf4\uff0cSTP\u6700\u7ec8\u5c06\u5982\u56fe\u6240\u793a\u7684\u63a5\u53e3\u963b\u585e\u6389\uff0c\u8fd9\u5c31\u9020\u6210\u6240\u6709VLAN\u7684\u6d41\u91cf\u5747\u8d70SW3\u7684\u5de6\u4fa7\u94fe\u8def\uff0c\u800c\u53f3\u4fa7\u94fe\u8def\u65e0\u6cd5\u5f97\u5230\u6709\u6548\u7684\u5229\u7528\u3002 \u4e8e\u662f\u540e\u6765\u4e1a\u754c\u53c8\u51fa\u73b0\u4e86perVLAN\u7684\u751f\u6210\u6811\u534f\u8bae\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2aVLAN\u4e00\u68f5\u751f\u6210\u6811\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u6bcf\u4e2aVLAN\u90fd\u6709\u5176\u81ea\u5df1\u72ec\u7acb\u7684\u751f\u6210\u6811\uff0c\u57fa\u4e8e\u4e0d\u540c\u7684VLAN\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u4e0d\u540c\u7684\u4f18\u5148\u7ea7\u3001\u63a5\u53e3\u5f00\u9500\u7684\u914d\u7f6e\u4ece\u800c\u5b9e\u73b0\u963b\u585e\u4e0d\u540c\u7684\u7aef\u53e3\uff0c\u8fd9\u6837\u5c31\u80fd\u591f\u5b9e\u73b0\u4e0d\u540c\u7684VLAN\u6d41\u91cf\u5206\u6d41\u7684\u76ee\u7684\u3002\u4f46\u662f\u8fd9\u79cd\u65b9\u6848\u4e5f\u662f\u6709\u4e00\u5b9a\u5f0a\u7aef\u7684\uff0c\u7531\u4e8e\u7f51\u7edc\u4e2d\u7684\u4ea4\u6362\u673a\u9700\u8981\u4e3a\u6bcf\u4e00\u4e2aVLAN\u5355\u72ec\u8fdb\u884c\u751f\u6210\u6811\u8ba1\u7b97\uff0c\u56e0\u6b64\u5f53VLAN\u6570\u91cf\u8f83\u591a\u65f6\uff0c\u751f\u6210\u6811\u7684\u6570\u91cf\u4e5f\u662f\u975e\u5e38\u591a\u7684\uff0c\u7f51\u7edc\u7684\u6bcf\u4e00\u6b21\u9707\u8361\u90fd\u5c06\u89e6\u53d1\u4ea4\u6362\u673a\u4eec\u7684\u91cd\u65b0\u8ba1\u7b97\uff0c\u8fd9\u662f\u76f8\u5f53\u8017\u8d44\u6e90\u7684\u3002 \u8fd9\u5c31\u63d0\u5230\u4e86\u63a5\u4e0b\u53bb\u8981\u4ecb\u7ecd\u7684**MSTP\uff08Multiple Spanning Tree Protocol\uff09**\uff0cMSTP\u534f\u8bae\u662fIEEE 802.1S\u6807\u51c6\u3002\u6240\u8c13MSTP\u4e5f\u5c31\u662f\u591a\u751f\u6210\u6811\u5b9e\u4f8b\uff0c\u901a\u8fc7\u5c06\u591a\u4e2aVLAN\u6620\u5c04\u5230\u4e00\u4e2a\u751f\u6210\u6811\u5b9e\u4f8b\uff08Instance\uff09\uff0c\u4ece\u800c\u57fa\u4e8e\u5b9e\u4f8b\u6765\u8ba1\u7b97\u751f\u6210\u6811\uff0c\u540c\u5c5e\u4e8e\u4e00\u4e2a\u5b9e\u4f8b\u7684VLAN\u4eab\u6709\u540c\u4e00\u68f5\u751f\u6210\u6811\uff0c\u4e0d\u540c\u7684\u5b9e\u4f8b\u5bf9\u5e94\u4e0d\u540c\u7684\u751f\u6210\u6811\uff0c\u8fd9\u6837\uff0c\u65e2\u53ef\u5b9e\u73b0\u6570\u636e\u5206\u6d41\uff0c\u53c8\u80fd\u591f\u6781\u5927\u7a0b\u5ea6\u7684\u51cf\u5c0f\u4ea4\u6362\u673a\u7684\u8ba1\u7b97\u8d1f\u62c5\u3002 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0c\u6211\u4eec\u5c06VLAN10\u3001VLAN20\u6620\u5c04\u5230MSTP\u5b9e\u4f8b1\uff0c\u5c06VLAN30\u3001VLAN40\u6620\u5c04\u5230MSTP\u5b9e\u4f8b2\uff08\u8981\u6c42\u4e3a\u4e09\u53f0\u4ea4\u6362\u673a\u914d\u7f6e\u5b8c\u5168\u76f8\u540c\u7684VLAN\u4e0e\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb\uff09\uff0c\u7136\u540e\u5c06SW1\u914d\u7f6e\u4e3a\u5b9e\u4f8b1\u7684\u4e3b\u6839\u3001\u5c06 SW2\u914d\u7f6e\u4e3a\u5b9e\u4f8b1\u7684\u6b21\u6839\uff1b\u5c06SW2\u914d\u7f6e\u4e3a\u5b9e\u4f8b2\u7684\u4e3b\u6839\u3001\u5c06SW1\u914d\u7f6e\u4e3a\u5b9e\u4f8b2\u7684\u6b21\u6839\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u7f51\u7edc\u4e2d\u5c31\u4f1a\u9488\u5bf9\u5b9e\u4f8b1\u53ca\u5b9e\u4f8b2\u5206\u522b\u4ea7\u751f\u4e00\u68f5\u751f\u6210\u6811\uff0c\u800c\u4e14\u963b\u585e\u4e0d\u540c\u7684\u63a5\u53e3\u3002\u90a3\u4e48VLAN10\u53caVLAN20\u7684\u6d41\u91cf\u5373\u4f1a\u4ece SW3\u7684\u5de6\u4fa7\u94fe\u8def\u8f6c\u53d1\uff0c\u800cVLAN30\u53caVLAN40\u4f1a\u4ece\u53f3\u4fa7\u94fe\u8def\u8f6c\u53d1\uff0c\u6d41\u91cf\u5373\u53ef\u5b9e\u73b0\u8d1f\u8f7d\u5206\u62c5\u3002 \u57fa\u672c\u672f\u8bed \u00b6 \u7f29\u5199 \u5168\u79f0 \u63cf\u8ff0 MST Region Multiple Spanning Tree Region \u4e00\u4e2a\u57df\u5305\u542b\u57df\u540d\uff08Configuration Name\uff09\u3001\u4fee\u8ba2\u7ea7 \u522b\uff08Revision Level\uff09\u3001\u683c\u5f0f\u9009\u62e9\u5668\uff08Configuration Identifier Format Selector\uff09\u3001VLAN\u4e0e\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb\uff08mapping of VIDs to spanning trees\uff09\u7b49\u4fe1\u606f\u3002 MSTI Multiple Spanning Tree Instance MSTP\u7684\u975e\u5b9e\u4f8b0\u7684\u5176\u4ed6\u5b9e\u4f8b CST Common Spanning Tree \u516c\u5171\u751f\u6210\u6811 \u662f\u8fde\u63a5\u4ea4\u6362\u7f51\u7edc\u5185\u6240\u6709MST\u57df\u7684\u4e00\u68f5\u751f\u6210\u6811\u3002\u5982 \u679c\u628a\u6bcf\u4e2aMST\u57df\u770b\u4f5c\u662f\u4e00\u4e2a\u8282\u70b9\uff0cCST\u5c31\u662f\u8fd9\u4e9b\u8282\u70b9\u901a\u8fc7STP\u6216RSTP\u534f\u8bae\u8ba1\u7b97\u751f\u6210\u7684\u4e00\u68f5\u751f\u6210\u6811\u3002 IST Internal Spanning Tree \u5185\u90e8\u751f\u6210\u6811 \u5185\u90e8\u751f\u6210\u6811IST\uff08Internal Spanning Tree\uff09\u662f\u5404 MST\u57df\u5185\u7684\u4e00\u68f5\u751f\u6210\u6811\u3002 IST\u662f\u4e00\u4e2a\u7279\u6b8a\u7684MSTI\uff0cMSTI\u7684ID\u4e3a0\uff0c\u901a\u5e38\u79f0\u4e3a MSTI0\u3002IST\u662fCIST\u5728MST\u57df\u5185\u7684\u4e00\u4e2a\u7247\u6bb5\u3002 CIST Common Internal Spanning Tree \u516c\u5171\u5185\u90e8\u751f\u6210\u6811 \u8fde\u63a5\u4e00\u4e2a\u4ea4\u6362\u7f51\u7edc\u5185\u6240\u6709\u4ea4\u6362\u8bbe\u5907\u7684\u5355\u751f\u6210\u6811\u3002 \u6240\u6709MST\u57df\u7684IST\u52a0\u4e0aCST\u5c31\u6784\u6210\u4e00\u68f5\u5b8c\u6574\u7684\u751f\u6210\u6811\uff0c\u5373CIST\u3002 CIST Root CIST Root \u603b\u6839 \u603b\u6839\u662f\u4e00\u4e2a\u5168\u5c40\u6982\u5ff5\uff0c\u5bf9\u4e8e\u6240\u6709\u4e92\u8fde\u7684\u8fd0\u884c STP/RSTP/MSTP\u7684\u4ea4\u6362\u673a\u53ea\u80fd\u6709\u4e00\u4e2a\u603b\u6839\uff0c\u4e5f\u5373\u662fCIST\u7684\u6839 \u57df\u6839 Regional Root \u5206\u4e3aIST\uff08Internal Spanning Tree\uff09\u57df\u6839\u548cMSTI \u57df\u6839 \u57df \u00b6 \u5bf9\u4e8e\u4e00\u4e2a\u5927\u578b\u7684\u4ea4\u6362\u7f51\u7edc\uff0c\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u8981\u8fdb\u884cMSTP\u57df\u7684\u89c4\u5212\uff0c\u5f53\u7136\u5982\u679c\u7f51\u7edc\u89c4\u6a21\u6709\u9650\uff0c\u5168\u7f51\u7528\u4e00\u4e2a\u57df\u4e5f\u662f\u5f88\u5e73\u5e38\u7684\u3002\u4e00\u4e2a\u201c\u57df\u201d\u7531\u540c\u5c5e\u4e00\u4e2a\u57df\u7684\u4ea4\u6362\u673a\u7ec4\u6210\u3002\u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0c\u7f51\u7edc\u4e2d\u5b58\u5728\u4e09\u4e2aMSTP\u57df\u3002 \u57df\u5305\u542b\u57df\u540d\uff08Region Name\uff09\u3001\u4fee\u8ba2\u7ea7\u522b\uff08Revision Level\uff09\u3001\u683c\u5f0f\u9009\u62e9\u5668\uff08Configuration Identifier Format Selector\uff09\u3001VLAN\u4e0e\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb\uff08mapping of VIDs to spanning trees\uff09\u7b49\u5185\u5bb9\uff0c\u5176\u4e2d\u57df\u540d\u3001\u683c\u5f0f\u9009\u62e9\u5668\u548c\u4fee\u8ba2\u7ea7\u522b\u5728BPDU\u62a5\u6587\u4e2d\u90fd\u6709\u76f8\u5173\u5b57\u6bb5\uff0c\u800cVLAN\u4e0e\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb\u5728BPDU\u62a5\u6587\u4e2d\u8868\u73b0\u6458\u8981\u4fe1\u606f (Configuration Digest)\uff0c\u8be5\u6458\u8981\u662f\u6839\u636e\u6620\u5c04\u5173\u7cfb\u8ba1\u7b97\u5f97\u5230\u7684\u4e00\u4e2a16\u5b57\u8282\u7b7e\u540d\u3002\u53ea\u6709\u4e0a\u8ff0\u56db\u8005\u90fd\u4e00\u6837\u4e14\u76f8\u4e92\u8fde\u63a5\u7684\u4ea4\u6362\u673a\u624d\u8ba4\u4e3a\u5728\u540c\u4e00\u4e2a\u57df\u5185\u3002 \u540c\u4e00\u4e2a\u57df\u5185\u6240\u6709\u4ea4\u6362\u673a\u90fd\u6709\u76f8\u540c\u7684MST\u57df\u914d\u7f6e\u3002\u7f3a\u7701\u65f6\uff0c\u57df\u540d\u5c31\u662f\u4ea4\u6362\u673a\u7684\u6865MAC\u5730\u5740\uff0c\u4fee\u8ba2\u7ea7\u522b\u7b49\u4e8e0\uff0c \u683c\u5f0f\u9009\u62e9\u5668\u7b49\u4e8e0\uff0c\u6240\u6709\u7684VLAN\u90fd\u6620\u5c04\u5230\u5b9e\u4f8b0\u4e0a\u3002 \u9700\u5f3a\u8c03\u7684\u662f\uff1a\u540c\u4e00\u4e2a\u57df\u5185\u7684\u4ea4\u6362\u673a\uff0cVLAN\u7684\u6620\u5c04\u5fc5\u987b\u5b8c\u5168\u4e00\u81f4\u3002 \u5b9e\u4f8b \u00b6 \u5355\u72ec\u62ff\u4e00\u4e2a\u57df\u6765\u8bf4\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u57df\u540d\u4e3aHuawei\uff0c\u8fd9\u4e2a\u57df\u5305\u542b\u56db\u53f0\u4ea4\u6362\u673a\uff0c\u57df\u5185\u5b58\u5728\u591a\u4e2aVLAN\uff0c\u4e00\u5171\u6709\u4e09\u4e2aMSTP\u5b9e\u4f8b\uff0c\u5b9e\u4f8b\u4e0eVLAN\u7684\u6620\u5c04\u5173\u7cfb\u5982\u4e0b\uff1a MSTI 1\uff1avlan 10 20 MSTI 2\uff1avlan 30 40 MSTI 0\uff1a\u5176\u4ed6\uff08\u9ed8\u8ba4\u6240\u6709\u7684VLAN\u90fd\u6620\u5c04\u5230\u5b9e\u4f8b0\uff09 \u6240\u8c13\u201c\u5b9e\u4f8b\u201d\u5c31\u662f\u591a\u4e2aVLAN\u7684\u4e00\u4e2a\u96c6\u5408\u3002\u5728MSTP\u4e2d\uff0c\u5404\u4e2a\u5b9e\u4f8b\u62d3\u6251\u7684\u8ba1\u7b97\u662f\u72ec\u7acb\u7684\uff0c\u4e00\u4e2aMSTP\u5b9e\u4f8b\u5355\u72ec\u8ba1\u7b97\u4e00\u68f5\u751f\u6210\u6811\uff0c\u5728\u8fd9\u4e9b\u5b9e\u4f8b\u4e0a\u5c31\u53ef\u4ee5\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3002\u4f7f\u7528\u7684\u65f6\u5019\u53ef\u4ee5\u628a\u591a\u4e2a\u76f8\u540c\u62d3\u6251\u7ed3\u6784\u7684VLAN\u6620\u5c04\u5230\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\uff0c\u8fd9\u4e9bVLAN\u5728\u7aef\u53e3\u4e0a\u7684\u8f6c\u53d1\u72b6\u6001\u5c06\u53d6\u51b3\u4e8e\u5bf9\u5e94\u5b9e\u4f8b\u5728MSTP\u91cc\u7684\u8f6c\u53d1\u72b6\u6001\u3002 \u7aef\u53e3\u89d2\u8272 \u00b6 \u5916\u90e8\u8def\u5f84\u5f00\u9500\u548c\u5185\u90e8\u8def\u5f84\u5f00\u9500 \u00b6 \u5916\u90e8\u8def\u5f84\u5f00\u9500\u662f\u76f8\u5bf9\u4e8eCIST\u800c\u8a00\u7684\uff0c\u540c\u4e00\u4e2a\u57df\u5185\u5916\u90e8\u8def\u5f84\u5f00\u9500\u662f\u76f8\u540c\u7684\uff1b\u5185\u90e8\u8def\u5f84\u5f00\u9500\u662f\u57df\u5185\u76f8\u5bf9\u4e8e\u67d0\u4e2a\u5b9e\u4f8b\u800c\u8a00\u7684\uff0c\u540c\u4e00\u7aef\u53e3\u5bf9\u4e8e\u4e0d\u540c\u5b9e\u4f8b\u5bf9\u5e94\u4e0d\u540c\u7684\u5185\u90e8\u8def\u5f84\u5f00\u9500\u3002 \u57df\u8fb9\u7f18\u7aef\u53e3 \u00b6 \u57df\u8fb9\u7f18\u7aef\u53e3\u662f\u6307\u4f4d\u4e8eMST\u57df\u7684\u8fb9\u7f18\u5e76\u8fde\u63a5\u5176\u5b83MST\u57df\u6216SST\u7684\u7aef\u53e3\u3002 \u5728\u8fdb\u884cMSTP\u8ba1\u7b97\u7684\u65f6\u5019\uff0c\u57df\u8fb9\u7f18\u7aef\u53e3\u5728MSTI\u4e0a\u7684\u89d2\u8272\u548cCIST\u5b9e\u4f8b\u7684\u89d2\u8272\u4fdd\u6301\u4e00\u81f4\uff0c\u5373\u5982\u679c\u8fb9\u7f18\u7aef\u53e3\u5728CIST\u5b9e\u4f8b\u4e0a\u7684\u89d2\u8272\u662fMaster\u7aef\u53e3\uff08\u8fde\u63a5\u57df\u5230\u603b\u6839\u7684\u7aef\u53e3\uff09\uff0c\u5219\u5b83\u5728\u57df\u5185\u6240\u6709MST\u5b9e\u4f8b\u4e0a\u7684\u89d2\u8272\u4e5f\u662f Master\u7aef\u53e3\u3002 Alternate\u7aef\u53e3 \u00b6 \u4ece\u53d1\u9001BPDU\u6765\u770b\uff0cAlternate\u7aef\u53e3\u5c31\u662f\u7531\u4e8e\u5b66\u4e60\u5230\u5176\u5b83\u4ea4\u6362\u673a\u7684\u53d1\u9001\u7684BPDU\u800c\u88ab\u963b\u585e\u7684\u7aef\u53e3\u3002\u4ece\u8f6c\u53d1\u7528\u6237\u6d41\u91cf\u6765\u770b\uff0cAlternate\u7aef\u53e3\u63d0\u4f9b\u4e86\u4ece\u6307\u5b9a\u4ea4\u6362\u673a\u5230\u6839\u4ea4\u6362\u673a\u7684\u4e00\u6761\u5907\u4efd\u8def\u5f84\u3002 Alternate\u7aef\u53e3\u662f\u6839\u7aef\u53e3\u7684\u5907\u4efd\u7aef\u53e3\uff0c\u5982\u679c\u6839\u7aef\u53e3\u88ab\u963b\u585e\u540e\uff0cAlternate\u7aef\u53e3\u5c06\u6210\u4e3a\u65b0\u7684\u6839\u7aef\u53e3\u3002 Backup\u7aef\u53e3 \u00b6 \u5f53\u540c\u4e00\u53f0\u4ea4\u6362\u673a\u7684\u4e24\u4e2a\u7aef\u53e3\u4e92\u76f8\u8fde\u63a5\u65f6\u5c31\u5b58\u5728\u4e00\u4e2a\u73af\u8def\uff0c\u6b64\u65f6\u4ea4\u6362\u673a\u4f1a\u5c06\u5176\u4e2d\u4e00\u4e2a\u7aef\u53e3\u963b\u585e\uff0cBackup \u7aef\u53e3\u5c31\u662f\u88ab\u963b\u585e\u7684\u90a3\u4e2a\u7aef\u53e3\u3002 \u4ece\u53d1\u9001BPDU\u6765\u770b\uff0cBackup\u7aef\u53e3\u5c31\u662f\u7531\u4e8e\u5b66\u4e60\u5230\u81ea\u5df1\u53d1\u9001\u7684BPDU\u800c\u88ab\u963b\u585e\u7684\u7aef\u53e3\u3002\u4ece\u8f6c\u53d1\u7528\u6237\u6d41\u91cf\u6765 \u770b\uff0cBackup\u7aef\u53e3\uff0c\u4f5c\u4e3a\u6307\u5b9a\u7aef\u53e3\u7684\u5907\u4efd\uff0c\u63d0\u4f9b\u4e86\u4e00\u6761\u4ece\u6839\u4ea4\u6362\u673a\u5230\u53f6\u8282\u70b9\u7684\u5907\u4efd\u901a\u8def\u3002 Master\u7aef\u53e3 \u00b6 Master\u7aef\u53e3\u662fMST\u57df\u548c\u603b\u6839\u76f8\u8fde\u7684\u6240\u6709\u8def\u5f84\u4e2d\u6700\u77ed\u8def\u5f84\u4e0a\u7684\u7aef\u53e3\uff0c\u5b83\u662f\u4ea4\u6362\u673a\u4e0a\u8fde\u63a5MST\u57df\u5230\u603b\u6839\u7684\u7aef\u53e3\u3002Master\u7aef\u53e3\u662f\u57df\u4e2d\u7684\u62a5\u6587\u53bb\u5f80\u603b\u6839\u7684\u5fc5\u7ecf\u4e4b\u8def\u3002 Master\u7aef\u53e3\u662f\u7279\u6b8a\u57df\u8fb9\u7f18\u7aef\u53e3\uff0cMaster\u7aef\u53e3\u5728IST/CIST\u4e0a\u7684\u89d2\u8272\u662fRoot Port\uff0c\u5728\u5176\u5b83\u5404\u5b9e\u4f8b\u4e0a\u7684\u89d2\u8272\u90fd\u662fMaster\u3002 \u57fa\u7840\u914d\u7f6e\uff1aMSTP\u5355\u5b9e\u4f8b\u90e8\u7f72 \u00b6 \u4e0a\u56fe\u6240\u793a\u7684\u62d3\u6251\u662f\u5178\u578b\u7684\u7535\u4fe1\u8f6f\u4ef6\u6570\u636e\u7f51\u7edc\u7ec4\u7f51\u573a\u666f\uff0c CoreSW1\u53caCoreSW2 \u662f\u4e24\u53f0\u6838\u5fc3\u4ea4\u6362\u673a\uff0c SwitchBlade1\u53caSwitchBlade2\u662fATAE/E9000\u673a\u6846\u7684\u4e24\u5757\u4ea4\u6362\u677f\uff0c\u60a8\u53ef\u4ee5\u628a\u5b83\u4eec\u4e5f\u5f53\u505a\u666e\u901a\u7684\u4ea4\u6362\u673a\u3002\u8fd9\u56db\u53f0\u8bbe\u5907\u6784\u6210\u4e86\u4e00\u4e2a\u53e3\u5b57\u578b\u7684\u4e8c\u5c42\u73af\u8def\u3002\u73b0\u5728\u6211\u4eec\u5728\u56db\u53f0\u8bbe\u5907\u4e0a\u90e8\u7f72MSTP\u6765\u6d88\u9664\u73af\u8def\uff0c\u6240\u6709\u7684\u4ea4\u6362\u673a\u90fd\u52a0\u5165\u76f8\u540c\u7684MSTP\u57df\uff0c\u5e76\u4e14\u90fd\u4f7f\u7528\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u4e5f\u5c31\u662f\u5b9e\u4f8b0\uff0c\u7f3a\u7701\u65f6\u6240\u6709\u7684VLAN\u90fd\u6620\u5c04\u5230\u5b9e\u4f8b0\u3002 \u6211\u4eec\u5c06CoreSW1\u89c4\u5212\u4e3a\u4e3b\u6839\u6865\uff0cCoreSW2\u89c4\u5212\u4e3a\u6b21\u6839\u6865\uff0c\u5e76\u4e14\u5c06SwitchBlade2\u4e0a\u8054\u6838\u5fc3\u4ea4\u6362\u673aCoreSW2\u7684\u63a5\u53e3\u7684STP cost\u8c03\u8282\u6210\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u503c\uff0c\u4ece\u800c\u4f7f\u5f97\u8be5\u63a5\u53e3\u88abMSTP\u963b\u585e\uff0c\u7f51\u7edc\u4e2d\u5b58\u5728\u7684\u4e8c\u5c42\u73af\u8def\u5c31\u6b64\u6253\u7834\u3002\u53e6\u5916\uff0c\u4e3a\u4e86\u4f18\u5316STP\u7684\u8fd0\u884c\uff0c\u5728\u6240\u6709\u4ea4\u6362\u673a\u4e0a\u5f00\u542fTC\u4fdd\u62a4\u53caBPDU\u4fdd\u62a4\u529f\u80fd\u3002\u53c2\u8003\u914d\u7f6e\u5982\u4e0b\uff1a CoreSW1\uff1a CoreSW2\uff1a ATAE/E9000\u4ea4\u6362\u677f1\uff1a ATAE/E9000\u4ea4\u6362\u677f2\uff1a \u5bf9\u4e8eCoreSW1\u800c\u8a00\uff0c\u7531\u4e8e\u5b83\u662f\u6839\u6865\uff0c\u56e0\u6b64\u8be5\u8bbe\u5907\u6240\u6709\u63a5\u53e3\u7684STP\u89d2\u8272\u5e94\u8be5\u90fd\u662f\u6307\u5b9a\u63a5\u53e3\uff08Designated Port\uff0c \u7b80\u5199\u4e3aDESI\uff09\uff0c\u800c\u4e14\u6240\u6709\u7684\u63a5\u53e3\u72b6\u6001\u90fd\u662fForwarding\uff1a \\<CoreSW1>display stp brief MSTID Port Role STP State Protection 0 GigabitEthernet1/0/1 DESI FORWARDING NONE 0 Eth-Trunk12 DESI FORWARDING NONE \u5bf9\u4e8eCoreSW2\uff0c\u5176Eth-trunk12\u8fde\u63a5\u7740\u6839\u6865SW1\uff0c\u8fd9\u4e2a\u63a5\u53e3\u5e94\u8be5\u662f\u6839\u7aef\u53e3\uff08Root Port\uff0c\u7b80\u5199\u4e3aROOT\uff09\uff0cGE1/0/1 \u63a5\u53e3\u5e94\u8be5\u662f\u6307\u5b9a\u7aef\u53e3\uff0c\u800c\u4e14\u6240\u6709\u7684\u63a5\u53e3\u72b6\u6001\u90fd\u662fForwarding\uff1a \u5bf9\u4e8eSwitchBlade1\uff0c\u5176\u76f4\u8fde\u4e3b\u6839\u7684\u63a5\u53e3GE0/0/20\u5e94\u8be5\u4e3a\u6839\u7aef\u53e3\uff0cEth-trunk10\u7aef\u53e3\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u800c\u4e14\u6240\u6709\u7684\u63a5\u53e3\u72b6\u6001\u90fd\u662fForwarding\uff1a \u5bf9\u4e8eSwitchBlade2\uff0c\u5176Eth-trunk10\u63a5\u53e3\u5e94\u8be5\u4e3a\u6839\u7aef\u53e3\uff0c\u800cGE0/0/20\u7aef\u53e3\u5c06\u5904\u4e8eDiscarding\u72b6\u6001\uff0c\u4ece\u800c\u88ab\u963b\u585e\uff0c\u5982\u6b64\u4e00\u6765\u7f51\u7edc\u4e2d\u4e0d\u518d\u5b58\u5728\u4e8c\u5c42\u73af\u8def\uff1a [SwitchBlade2] display stp brief MSTID Port Role STP State Protection 0 GigabitEthernet0/0/20 ALTE DISCARDING NONE 0 Eth-Trunk10 ROOT FORWARDING NONE \u5e38\u89c1\u95ee\u9898 \u00b6 1. \u7531\u4e8e\u5b9e\u4f8b\u4e0eVLAN\u7684\u6620\u5c04\u4e0d\u4e00\u81f4\u5bfc\u81f4MSTP\u72b6\u6001\u5f02\u5e38 \u00b6 SW1\u53caSW2\u8fd0\u884cMSTP\uff0cSW1\u4f5c\u4e3a\u6c47\u805a\u4ea4\u6362\u673a\uff0c\u5176\u4e0a\u6709VLAN\uff1a10\u300120\u300130\u300140\uff1bSW2\u4f5c\u4e3a\u63a5\u5165\u5c42\u4ea4 \u6362\u673a\uff0c\u5176\u4e0a\u53ea\u6709VLAN10\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u53d1\u73b0SW2\u7684\u751f\u6210\u6811\u72b6\u6001\u5f02\u5e38\uff0c\u5b83\u8ba4\u4e3a\u81ea\u5df1\u662f\u5b9e\u4f8b1\u7684\u6839\u3002\u539f\u56e0\u5728\u4e8e\u4e24\u53f0\u4ea4\u6362\u673a\u7684MSTP\u5b9e \u4f8b1\u7684VLAN\u6620\u5c04\u4e0d\u4e00\u81f4\uff0c\u5bfc\u81f4SW2\u5ffd\u7565SW1\u4f20\u9012\u8fc7\u6765\u7684\u5173\u4e8e\u5b9e\u4f8b1\u7684\u4fe1\u606f\uff0c\u56e0\u6b64\u8ba4\u4e3a\u81ea\u5df1\u662f\u6839\u3002\u5c06SW2 \u7684\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a \u5373\u53ef\uff0c\u6ce8\u610fSW2\u4e0a\u4e0d\u9700\u8981\u521b\u5efaVLAN 20 30 40\uff08\u5982\u679c\u8be5\u4ea4\u6362\u673a\u6ca1\u6709\u8fde\u63a5\u8fd9\u51e0\u4e2aVLAN\u7684\u7528\u6237\uff09\uff0c\u4e5f\u5c31\u662f \u8bf4\u5373\u4f7fSW2\u6ca1\u6709\u521b\u5efaVLAN 20 30 40\u4e5f\u662f\u80fd\u591f\u6309\u7167\u4e0a\u8ff0\u914d\u7f6e\uff0c\u5c06VLAN 10 20 30 40\u6620\u5c04\u5230\u5b9e\u4f8b1\u3002 Smart Link \u53ca Monitor Link \u6280\u672f\u80cc\u666f \u00b6 \u5728\u4e00\u4e2a\u4ea4\u6362\u7f51\u7edc\u4e2d\uff0c\u4e3a\u4e86\u63d0\u9ad8\u7f51\u7edc\u7684\u53ef\u9760\u6027\uff0c\u6211\u4eec\u4f1a\u8bbe\u8ba1\u5197\u4f59\u7684\u7269\u7406\u73af\u5883\uff0c\u7136\u800c\u5197\u4f59\u7684\u7269\u7406\u73af\u5883\u4f1a\u5e26\u6765\u4e8c\u5c42\u73af\u8def\u7684\u95ee\u9898\uff0c\u5728\u6b64\u524d\u7684\u7ae0\u8282\u4e2d\u5df2\u7ecf\u4ecb\u7ecd\u4e86STP\u751f\u6210\u6811\u534f\u8bae\uff0c\u5229\u7528STP\u786e\u5b9e\u53ef\u4ee5\u89e3\u51b3\u73af\u8def\u7684\u95ee\u9898\uff0c\u4f46STP\u9996\u5148\u9700\u8981\u5728\u53c2\u4e0e\u5230\u62d3\u6251\u7684\u6bcf\u4e00\u53f0\u4ea4\u6362\u673a\u4e0a\u90fd\u8fdb\u884c\u914d\u7f6e\uff0c\u5e76\u4e14\u91c7\u7528\u517c\u5bb9\u7684STP\u534f\u8bae\u7c7b\u578b\uff0c\u518d\u8005\u9700\u8981\u4f9d\u8d56BPDU\u7684\u6cdb\u6d2a\u624d\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u3002\u53e6\u5916\uff0cSTP\u7684\u8ba1\u7b97\u4e5f\u662f\u6bd4\u8f83\u7f13\u6162\u7684\uff0c\u8fd9\u4f7f\u5f97\u5f53\u62d3\u6251\u53d1\u751f\u53d8\u66f4\u65f6\uff0cSTP\u7684\u6536\u655b\u53ef\u80fd\u9700\u8981\u6570\u79d2\u7684\u65f6\u95f4\uff0c\u800c\u8fd9\u5728\u67d0\u4e9b\u4e1a\u52a1\u573a\u666f\u4e2d\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\uff0c\u4f8b\u5982\u5bf9\u5ef6\u8fdf\u975e\u5e38\u654f\u611f\u7684\u4e1a\u52a1\u3002\u5b9e\u9645\u4e0a\uff0c\u5bf9\u4e8e\u73b0\u4ee3\u56ed\u533a\u7f51\u800c\u8a00\uff0cSTP\u867d\u7136\u66fe\u7ecf\u662f\u4e8c\u5c42\u4ea4\u6362\u7f51\u7edc\u7684\u5178\u578b\u5e94\u7528\uff0c\u4f46\u662f\u6b63\u5728\u88ab\u9010\u6b65\u53d6\u4ee3\u3002 Smart Link\u662f\u4e00\u79cd\u4e3a\u53cc\u4e0a\u884c\u7ec4\u7f51\u91cf\u8eab\u5b9a\u505a\u7684\u89e3\u51b3\u65b9\u6848\u3002\u4ec0\u4e48\u53eb\u53cc\u4e0a\u884c\u7ec4\u7f51\u5462\uff1f\u8bf4\u7684\u597d\u50cf\u5f88\u6d41\u5f0a\u4f3c\u7684\uff0c\u5176\u5b9e\u975e\u5e38\u7b80\u5355\uff0c\u62ff\u4e0a\u9762\u7684\u62d3\u6251\u6765\u8bf4\uff0cSW3\u6709\u4e24\u6839\u94fe\u8def\u4e0a\u8054\u5230\u6838\u5fc3\u4ea4\u6362\u673a\uff0c\u8fd9\u5c31\u662f\u53cc\u4e0a\u884c\u7ec4\u7f51\u3002Smart Link\u5728\u8fd9\u79cd\u7ec4\u7f51\u4e2d\uff0c\u88ab\u90e8\u7f72\u5728SW3\u4e0a\u3002Smart Link\u5177\u6709\u5982\u4e0b\u7279\u70b9\uff1a \u5728\u53cc\u5411\u884c\u7684\u8bbe\u5907\u4e0a\u90e8\u7f72\uff0c\u5f53\u7f51\u7edc\u6b63\u5e38\u65f6\uff0c\u8fd9\u4e24\u6839\u4e0a\u884c\u94fe\u8def\u5176\u4e2d\u4e00\u6839\u5904\u4e8e\u6d3b\u8dc3\u72b6\u6001\uff0c\u800c\u53e6\u4e00\u6839\u94fe\u8def\u5904\u4e8e\u5907\u4efd\u72b6\u6001\u4ece\u800c\u88ab\u963b\u585e\u3002\u5982\u6b64\u4e00\u6765\u73af\u8def\u5c31\u4f1a\u88ab\u6253\u7834\u3002 \u5f53\u4e3b\u7528\u94fe\u8def\u53d1\u751f\u6545\u969c\u540e\uff0c\u6d41\u91cf\u4f1a\u5728**\u6beb\u79d2\u7ea7**\u7684\u65f6\u95f4\u5185\u8fc5\u901f\u5207\u6362\u5230\u5907\u7528\u94fe\u8def\u4e0a\uff0c\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u6b63\u5e38\u8f6c\u53d1\u3002 \u914d\u7f6e\u7b80\u5355\uff0c\u4fbf\u4e8e\u7528\u6237\u64cd\u4f5c\u3002 \u65e0\u9700\u534f\u8bae\u4ea4\u4e92\u62a5\u6587\uff0c\u56e0\u6b64\u5927\u5927\u63d0\u5347\u7684\u6536\u655b\u7684\u901f\u5ea6\u548c\u53ef\u9760\u6027\u3002 Smart Link\u662f\u534e\u4e3a\u79c1\u6709\u7279\u6027\u3002 \u57fa\u7840\u672f\u8bed \u00b6 Smart Link Group \u00b6 Smart Link\u7ec4\uff0c\u4e5f\u79f0\u4e3a\u7075\u6d3b\u94fe\u8def\u7ec4\uff0c\u4e00\u4e2aSmart Link\u7ec4\u5305\u542b\u4e24\u4e2a\u6210\u5458\u63a5\u53e3\uff0c\u4e00\u4e2a\u4e3b\u63a5\u53e3\uff08Master Port\uff09 \u4e00\u4e2a\u4ece\u63a5\u53e3\uff08Slave Port\uff09\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u4e00\u4e2a\u63a5\u53e3\uff08\u4e3b\u63a5\u53e3\u6216\u4ece\u63a5\u53e3\uff09\u5904\u4e8e\u6d3b\u8dc3\uff08Active\uff09\u72b6\u6001\uff0c \u53e6\u4e00\u4e2a\u63a5\u53e3\u5904\u4e8e\u975e\u6d3b\u8dc3\uff08Inactive\uff09\u72b6\u6001\u88ab\u963b\u585e\u3002 \u5f53\u5904\u4e8e\u6d3b\u8dc3\u72b6\u6001\u7684\u63a5\u53e3\u51fa\u73b0\u94fe\u8def\u6545\u969c\u65f6\uff08\u8fd9\u91cc\u7684\u94fe\u8def\u6545\u969c\u5305\u62ec\u63a5\u53e3down\u3001OAM\u5355\u901a\u7b49\uff09\uff0cSmart Link \u7ec4\u4f1a\u81ea\u52a8\u5c06\u8be5\u63a5\u53e3\u963b\u585e\uff0c\u5e76\u5c06\u539f\u963b\u585e\u7684\u3001\u5904\u4e8e\u975e\u6d3b\u8dc3\u72b6\u6001\u7684\u63a5\u53e3\u5207\u6362\u5230\u6d3b\u8dc3\u72b6\u6001\uff0c\u5f00\u59cb\u8f6c\u53d1\u6570\u636e\u3002 Master/Slave\u63a5\u53e3 \u00b6 \u4e3b/\u4ece\u63a5\u53e3\u662fSmart Link\u7ec4\u4e2d\u7684\u4e24\u4e2a\u63a5\u53e3\u89d2\u8272\uff0c\u662f\u901a\u8fc7\u547d\u4ee4\u6307\u5b9a\u7684\u3002\u5f53\u4e24\u4e2a\u63a5\u53e3\u90fd\u6b63\u5e38\u5de5\u4f5c\u65f6\uff0c\u4e3b\u63a5\u53e3\u8fdb\u5165active\u72b6\u6001\uff0c\u800c\u4ece\u63a5\u53e3\u4fdd\u6301inactive\u3002\u5f53\u4e3b\u63a5\u53e3\u6216\u5176\u6240\u5728\u94fe\u8def\u53d1\u751f\u6545\u969c\u65f6\uff0c\u4ece\u63a5\u53e3\u5207\u6362\u4e3aactive\u3002 \u53d1\u9001\u63a7\u5236VLAN \u00b6 \u53d1\u9001\u63a7\u5236VLAN\uff08Send Control VLAN\uff09\u662fSmart Link\u7ec4\u7528\u4e8e\u6cdb\u6d2aflush\u62a5\u6587\u7684VLAN\u3002\u5728\u4e0a\u56fe\u4e2d\uff0c\u5f53SW3 \u4ea4\u6362\u673a\u53d1\u751fSmartLink\u7684\u5207\u6362\u65f6\u2014\u2014\u663e\u7136\u662f\u7f51\u7edc\u62d3\u6251\u53d1\u751f\u4e86\u53d8\u5316\u2014\u2014\u8fd9\u4e2a\u53d8\u5316\u53ef\u80fd\u5bf9\u4e8e\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u8bbe\u5907\u6765\u8bf4\uff08\u4f8b\u5982\u4e0a\u6e38\u4ea4\u6362\u673aCoreSW1\u53caCoreSW2\uff09\u5e76\u4e0d\u4e00\u5b9a\u80fd\u591f\u201c\u611f\u77e5\u201d\uff0c\u6b64\u523b\u5bf9\u4e8e\u5b83\u4eec\u800c\u8a00\u539f\u6709\u7684 MAC\u8868\u7b49\u8868\u9879\u53ef\u80fd\u5df2\u7ecf\u4e0d\u53ef\u7528\u4e86\uff0c\u5fc5\u987b\u5c3d\u5feb\u5237\u65b0\uff0cflush\u62a5\u6587\u5c31\u662f\u7528\u6765\u5237\u65b0\u4ed6\u4eec\u7684\u76f8\u5173\u8868\u9879\u7684\u3002 \u5982\u679c\u5728SW3\u4e0a\u5f00\u542f\u4e86flush\u62a5\u6587\u53d1\u9001\u529f\u80fd\uff0c\u5f53\u53d1\u751f\u94fe\u8def\u5207\u6362\u65f6\uff0c\u8bbe\u5907\u4f1a\u5728\u65b0\u7684\u4e3b\u7528\u94fe\u8def\u4e0a\u3001\u5728\u53d1\u9001\u63a7\u5236 VLAN\u5185\u7ec4\u64ad\u53d1\u9001flush\u62a5\u6587\uff0c\u4ee5\u4fbf\u5237\u65b0\u4e0a\u6e38\u4ea4\u6362\u673a\u7684\u76f8\u5173\u8f6c\u53d1\u8868\u9879\uff0c\u52a0\u5feb\u7f51\u7edc\u6536\u655b\u3002 \u63a5\u6536\u63a7\u5236VLAN \u00b6 \u63a5\u6536\u63a7\u5236VLAN\u662f\u4e0a\u6e38\u8bbe\u5907\u7528\u4e8e\u63a5\u6536\u5e76\u5904\u7406flush\u62a5\u6587\u7684VLAN\u3002\u5982\u679c\u4e0a\u6e38\u8bbe\u5907CoreSW1\u53caCoreSW2\u80fd\u591f\u8bc6\u522bflush\u62a5\u6587\uff0c\u5e76\u5f00\u542f\u4e86flush\u62a5\u6587\u63a5\u6536\u5904\u7406\u529f\u80fd\uff0c\u5f53\u53d1\u751f\u94fe\u8def\u5207\u6362\u65f6\uff0c\u4e0a\u6e38\u8bbe\u5907\u4f1a\u5904\u7406\u6536\u5230\u7684\u5c5e\u4e8e\u63a5\u6536\u63a7\u5236VLAN\u7684flush\u62a5\u6587\uff0c\u8fdb\u800c\u6267\u884cMAC\u5730\u5740\u8f6c\u53d1\u8868\u9879\u548cARP\u8868\u9879\u7684\u5237\u65b0\u64cd\u4f5c\u3002\u8981\u6ce8\u610f\u5728SW3\u4e0a\u914d\u7f6e\u7684\u53d1\u9001\u63a7\u5236VLAN\u8981\u548cCoreSW1\u53caCoreSW2\u4e0a\u914d\u7f6e\u7684\u63a5\u6536\u63a7\u5236VLAN\u4e00\u81f4\u3002 \u5de5\u4f5c\u673a\u5236 \u00b6 \u62d3\u6251\u73af\u5883 \u00b6 \u4e0a\u56fe\u5c55\u793a\u7684\u662f\u4e00\u4e2a\u4f7f\u7528\u4e86ATAE/E9000\u7684\u5178\u578b\u7ec4\u7f51\u3002SW1\u53caSW2\u662f\u6838\u5fc3\u4ea4\u6362\u673a\uff0cSW3\u662f\u90e8\u7f72\u4e86\u5806\u53e0\u7684\u4ea4\u6362\u677f\u5361\uff0c\u53ef\u4ee5\u5c06\u5176\u7406\u89e3\u4e3a\u4e00\u53f0\u4ea4\u6362\u673a\u3002\u6b64\u65f6SW3\u6b63\u662f\u53cc\u94fe\u8def\u4e0a\u884c\uff0c\u8fd9\u4e2a\u573a\u666f\u975e\u5e38\u9002\u5408\u90e8\u7f72Smart Link\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662fSmart Link\u662f\u914d\u7f6e\u5728SW3\u4ea4\u6362\u673a\u4e0a\u7684\uff0c\u5176\u4ed6\u7684\u4ea4\u6362\u673a\u4e0a\u65e0\u9700\u914d\u7f6e\u3002\u5728SW3\u4e0a\u521b\u5efa\u4e00\u4e2aSmart Link\u7ec4\uff0c\u7136\u540e\u5c06Port1\u6dfb\u52a0\u5230\u8be5\u7ec4\u4e2d\uff0c\u5e76\u8bbe\u7f6e\u5176\u63a5\u53e3\u89d2\u8272\u4e3aMaster\uff1b\u540c\u65f6\u5c06Port2\u53e3\u4e5f\u6dfb\u52a0\u5230\u8be5Smart Link\u7ec4\u4e2d\uff0c\u5e76\u8bbe\u7f6e\u5176\u89d2\u8272\u4e3aSlave\u3002 \u7f51\u7edc\u5de5\u4f5c\u6b63\u5e38\u65f6 \u00b6 \u5f53\u7f51\u7edc\u5de5\u4f5c\u6b63\u5e38\u65f6\uff0c\u4e5f\u5c31\u662f\u53cc\u4e0a\u884c\u94fe\u8def\u90fd\u6b63\u5e38\u7684\u60c5\u51b5\u4e0b\uff0cMaster\u53e3Port1\u5904\u4e8e\u6d3b\u8dc3\u72b6\u6001\uff08Active\uff09\uff0c\u5176\u6240\u5728\u7684\u94fe\u8def\u662f\u4e3b\u7528\u94fe\u8def\uff08Master Link\uff09\uff1bSlave\u7aef\u53e3\u5904\u4e8e\u975e\u6d3b\u8dc3\u72b6\u6001\uff08Inactive\uff09\uff0c\u6240\u5728\u94fe\u8def\u662f\u5907\u7528\u94fe\u8def\u3002\u5982\u6b64\u4e00\u6765\uff0cSW3\u7684Port2\u76f8\u5f53\u4e8e\u88ab\u963b\u585e\u4e86\uff0c\u4e0d\u4f1a\u8f6c\u53d1\u6570\u636e\uff0c\u56e0\u6b64\u6570\u636e\u6cbf\u7740\u7ea2\u8272\u7ebf\u6761\u6240\u8868\u793a\u7684\u8def\u5f84\u8fdb\u884c\u4f20\u8f93\uff0c\u7f51\u7edc\u4e2d\u4e0d\u5b58\u5728\u73af\u8def\uff0c\u4e0d\u4f1a\u4ea7\u751f\u5e7f\u64ad\u98ce\u66b4\u3002 \u7f51\u7edc\u53d1\u751f\u6545\u969c\u65f6 \u00b6 \u5f53SW3\u7684Port1\u6216\u8005\u5176\u76f4\u8fde\u7684\u94fe\u8def\u53d1\u751f\u6545\u969c\u65f6\uff0cMaster\u7aef\u53e3Port1\u5207\u6362\u5230Inactive\u72b6\u6001\uff0cSlave\u7aef\u53e3Port2 \u5207\u6362\u5230Active\u72b6\u6001\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u4ee5\u975e\u5e38\u5feb\u7684\u901f\u5ea6\u5b8c\u6210\u7684\uff0c\u56e0\u4e3a\u65e0\u9700\u4efb\u4f55\u7684\u534f\u8bae\u62a5\u6587\u7684\u4ea4\u4e92\uff0c\u5b8c\u5168\u7531SW3 \u8bbe\u5907\u81ea\u5df1\u611f\u77e5\u3001\u5b8c\u6210\u5207\u6362\uff0c\u6240\u4ee5\u6536\u655b\u7684\u901f\u5ea6\u662f\u6beb\u79d2\u7ea7\u522b\u3002 \u7f51\u7edc\u62d3\u6251\u53d8\u66f4\u673a\u5236 \u00b6 \u673a\u5236\u6982\u8ff0 \u00b6 \u5f53 Smart Link \u53d1\u751f\u94fe\u8def\u5207\u6362\u65f6\uff0c\u7f51\u7edc\u4e2d\u5404\u8bbe\u5907\u4e0a\u7684MAC\u5730\u5740\u8f6c\u53d1\u8868\u9879\u548cARP/ND\u8868\u9879\u53ef\u80fd\u5df2\u7ecf\u4e0d\u662f\u6700 \u65b0\u72b6\u6001\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u62a5\u6587\u7684\u6b63\u786e\u53d1\u9001\uff0c\u9700\u8981\u63d0\u4f9b\u4e00\u79cdMAC\u5730\u5740\u8f6c\u53d1\u8868\u9879\u548cARP/ND\u8868\u9879\u7684\u66f4\u65b0\u673a\u5236\u3002\u76ee\u524d\u66f4\u65b0\u673a\u5236\u6709\u4ee5\u4e0b\u4e24\u79cd\uff1a \u7531Smart Link \u8bbe\u5907\u4ece\u65b0\u7684Master \u94fe\u8def\u4e0a\u53d1\u9001flush\u62a5\u6587\u3002\u6b64\u65b9\u5f0f\u9700\u8981\u4e0a\u884c\u7684\u8bbe\u5907\u90fd\u80fd\u591f\u8bc6\u522b SmartLink\u7684flush\u62a5\u6587\u5e76\u8fdb\u884c\u66f4\u65b0MAC\u5730\u5740\u8f6c\u53d1\u8868\u9879\u548cARP/ND\u8868\u9879\u7684\u5904\u7406\u3002 \u81ea\u52a8\u901a\u8fc7\u6d41\u91cf\u5237\u65b0MAC\u5730\u5740\u8f6c\u53d1\u8868\u9879\u548cARP/ND\u8868\u9879\u3002\u6b64\u65b9\u5f0f\u9002\u7528\u4e8e\u548c\u4e0d\u652f\u6301Smart Link\u529f\u80fd\u7684\u8bbe\u5907\uff08\u5305\u62ec\u5176\u4ed6\u5382\u5546\u8bbe\u5907\uff09\u5bf9\u63a5\u7684\u60c5\u51b5\uff0c\u9700\u8981\u6709\u4e0a\u884c\u7684\u6d41\u91cf\u89e6\u53d1\u3002 \u65b9\u5f0f\u4e00\uff1a\u901a\u8fc7flush\u62a5\u6587\u901a\u77e5\u8bbe\u5907\u66f4\u65b0\u8868\u9879 \u00b6 \u8fd9\u79cd\u65b9\u5f0f\u9002\u7528\u4e8e\u4e0a\u6e38\u8bbe\u5907\uff08\u5982\u56fe\u4e2d\u7684SW1\u3001SW2\uff09\u652f\u6301SmartLink\u529f\u80fd\u3001\u80fd\u591f\u8bc6\u522bflush\u62a5\u6587\u7684\u60c5\u51b5\u3002\u4e3a\u4e86\u5b9e\u73b0\u5feb\u901f\u94fe\u8def\u5207\u6362\uff0c\u9700\u8981\u5728SW3\u4e0a\u5f00\u542fflush\u62a5\u6587\u53d1\u9001\u529f\u80fd\uff0c\u53e6\u5916\uff0c\u5728\u4e0a\u6e38\u8bbe\u5907\u6240\u6709\u5904\u4e8e\u53cc\u4e0a\u884c\u7f51\u7edc\u7684\u63a5\u53e3\u5f00\u542f\u63a5\u6536\u5904\u7406flush\u62a5\u6587\u529f\u80fd\u3002 SW3\u53d1\u751f\u94fe\u8def\u5207\u6362\u540e\uff0c\u4f1a\u5728\u65b0\u7684\u4e3b\u7528\u94fe\u8def\u4e0a\u53d1\u9001flush\u62a5\u6587\u3002Flush\u62a5\u6587\u7684VLAN Bitmap\u5b57\u6bb5\u586b\u5145\u94fe\u8def\u5207\u6362\u524d\u7ec4\u5185\u5904\u4e8e\u8f6c\u53d1\u72b6\u6001\u7684Port1\u53e3\u6240\u5728Smart Link\u7ec4\u7684\u4fdd\u62a4VLAN ID\uff0cControl VLAN ID \u5b57\u6bb5\u586b\u5145Smart Link\u7ec4\u914d\u7f6e\u7684\u53d1\u9001\u63a7\u5236VLAN ID\u3002 \u5f53\u4e0a\u6e38\u8bbe\u5907\u6536\u5230flush\u62a5\u6587\u65f6\uff0c\u5224\u65ad\u8be5flush\u62a5\u6587\u7684\u53d1\u9001\u63a7\u5236VLAN\u662f\u5426\u5728\u6536\u5230\u62a5\u6587\u7684\u7aef\u53e3\u914d\u7f6e\u7684\u63a5\u6536\u63a7\u5236 VLAN\u5217\u8868\u4e2d\u3002\u5982\u679c\u4e0d\u5728\u63a5\u6536\u63a7\u5236VLAN\u5217\u8868\u4e2d\uff0c\u8bbe\u5907\u5bf9\u8be5flush\u62a5\u6587\u4e0d\u505a\u5904\u7406\uff0c\u76f4\u63a5\u8f6c\u53d1\uff1b\u5982\u679c\u5728\u63a5\u6536\u63a7\u5236VLAN\u5217\u8868\u4e2d\uff0c\u8bbe\u5907\u5c06\u63d0\u53d6flush\u62a5\u6587\u4e2d\u7684VLAN Bitmap\u6570\u636e\uff0c\u5c06\u8bbe\u5907\u5728\u8fd9\u4e9bVLAN\u5185\u5b66\u4e60\u5230\u7684MAC \u53caARP\u8868\u9879\u5220\u9664\u3002 \u4e3a\u4e86\u4fdd\u8bc1flush\u62a5\u6587\u5728\u53d1\u9001\u63a7\u5236VLAN\u5185\u6b63\u786e\u4f20\u9001\uff0c\u8bf7\u786e\u4fdd\u53cc\u4e0a\u884c\u7f51\u7edc\u4e0a\u7684\u6240\u6709\u7aef\u53e3\u90fd\u5141\u8bb8\u53d1\u9001\u63a7\u5236 VLAN\u901a\u8fc7\uff0c\u5426\u5219\uff0cflush\u62a5\u6587\u5c06\u53d1\u9001\u6216\u8f6c\u53d1\u5931\u8d25\u3002\u5efa\u8bae\u4ee5\u4fdd\u7559Tag\u7684\u65b9\u5f0f\u53d1\u9001flush\u62a5\u6587\uff0c\u82e5\u60f3\u4ee5\u53bb\u6389Tag \u7684\u65b9\u5f0f\u53d1\u9001flush\u62a5\u6587\uff0c\u9700\u786e\u4fdd\u5bf9\u7aef\u7aef\u53e3\u7f3a\u7701VLAN\u548c\u53d1\u9001\u63a7\u5236VLAN\u4e00\u81f4\uff0c\u5426\u5219\u5c06\u5bfc\u81f4flush\u62a5\u6587\u4e0d\u5728\u53d1\u9001\u63a7\u5236VLAN\u5185\u4f20\u9001\u3002 \u65b9\u5f0f\u4e8c\uff1a\u65e0flush\u65b9\u5f0f \u00b6 \u8fd9\u79cd\u65b9\u5f0f\u9002\u7528\u4e8e\u4e0e\u4e0d\u652f\u6301Smart Link\u529f\u80fd\u7684\u8bbe\u5907\uff08\u5305\u62ec\u5176\u4ed6\u5382\u5546\u8bbe\u5907\uff09\u5bf9\u63a5\u7684\u60c5\u51b5\uff0c\u9700\u8981\u6709\u4e0a\u884c\u6d41\u91cf\u89e6\u53d1\u3002\u4f8b\u5982\u4e0a\u56fe\u4e2dSW3\u662f\u652f\u6301Smart Link\u7684\u8bbe\u5907\uff0c\u800cSW1\u3001SW2\u4e0d\u652f\u6301Smart Link\u7684\u60c5\u51b5\u3002 \u5982\u679c\u6ca1\u6709SW3\u7684\u4e0a\u884c\u6d41\u91cf\uff08\u8fd9\u4e9b\u6d41\u91cf\u53ef\u80fd\u6765\u81eaSW3\u4e0b\u8054\u7684\u7ec8\u7aef\uff09\u53bb\u89e6\u53d1SW1\u3001SW2\u7684MAC\u53caARP\u8868\u9879\u66f4\u65b0\uff0c\u90a3\u4e48\u5f53SW1\u3001SW2\u6536\u5230\u76ee\u7684\u8bbe\u5907\u4e3a\u4e1a\u52a1\u5355\u677f\u7684\u6570\u636e\u65f6\uff0c\u6d41\u91cf\u5c31\u53ef\u80fd\u4f1a\u53d1\u751f\u4e2d\u65ad\u3002\u4ee5SW2\u4e3a\u4f8b\uff0c \u5982\u679c\u5176\u5173\u4e8e\u4e0b\u6e38\u4e1a\u52a1\u5355\u677f\u7684MAC\u5730\u5740\u8868\u9879\u7684\u5173\u8054\u63a5\u53e3\u8fd8\u662f\u8001\u65e7\u7684\uff08\u8fd8\u662f\u5173\u8054\u5230\u4e0eSW1\u5bf9\u63a5\u7684\u63a5\u53e3\uff09\uff0c \u90a3\u4e48\u5f53SW2\u6709\u4e0b\u884c\u6d41\u91cf\u8981\u8f6c\u53d1\uff08\u5916\u90e8\u7f51\u7edc\u53d1\u5f80\u4e1a\u52a1\u5355\u677f\u7684\u6d41\u91cf\uff09\u65f6\uff0c\u53ea\u6709\u5728\u5176\u8868\u9879\u81ea\u52a8\u8001\u5316\u3001\u91cd\u65b0\u5b66\u4e60\u540e\uff0c\u6d41\u91cf\u624d\u80fd\u88ab\u6b63\u786e\u53d1\u9001\u5230SW3\u3002\u5f53\u4e1a\u52a1\u5355\u677f\u7684\u4e0a\u884c\u6d41\u91cf\u901a\u8fc7SW3\u5230\u8fbeSW2\u540e\uff0c\u540e\u8005\u4f1a\u66f4\u65b0\u81ea\u5df1\u7684 MAC\u8868\uff0c\u90a3\u4e48\u5f53SW2\u518d\u6536\u5230\u76ee\u7684MAC\u4e3a\u4e1a\u52a1\u5355\u677fMAC\u5730\u5740\u7684\u6570\u636e\u65f6\uff0cSW2\u4f1a\u901a\u8fc7\u5176\u8fde\u63a5SW3\u7684\u63a5\u53e3\u8f6c\u53d1\u51fa\u53bb\uff0c\u62a5\u6587\u624d\u53ef\u4ee5\u7ecf\u7531SW3\u5230\u8fbe\u5355\u677f\u3002\u56e0\u6b64\u8fd9\u79cd\u65b9\u5f0f\u76f8\u6bd4\u4e8e\u901a\u8fc7Flush\u62a5\u6587\u7684\u65b9\u5f0f\u800c\u8a00\uff0c\u6548\u7387\u5c31\u8981\u4f4e\u5f97\u591a\u3002 \u901a\u8fc7flush\u62a5\u6587\u901a\u77e5\u8bbe\u5907\u66f4\u65b0\u7684\u673a\u5236\u65e0\u987b\u7b49\u5230\u8868\u9879\u8001\u5316\u540e\u518d\u8fdb\u884c\u66f4\u65b0\uff0c\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u8868\u9879\u66f4\u65b0\u6240\u9700\u65f6\u95f4\u3002 \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u94fe\u8def\u7684\u6574\u4e2a\u5207\u6362\u8fc7\u7a0b\u53ef\u5728\u6beb\u79d2\u7ea7\u7684\u65f6\u95f4\u5185\u5b8c\u6210\u7684\uff0c\u57fa\u672c\u65e0\u6d41\u91cf\u4e22\u5931\u3002\u4f46\u662f\u8981\u6c42\u4e0a\u8054\u7684\u4ea4\u6362\u673a\u90fd\u652f\u6301Smart Link\u529f\u80fd\u3002 \u94fe\u8def\u6062\u590d\u673a\u5236 \u00b6 \u5728\u4e0a\u56fe\u4e2dSW3\u4ea4\u6362\u673a\u7684Port1\u53e3\u4e3aSmart Link\u7ec4\u7684Master\u63a5\u53e3\uff0cPort2\u53e3\u4e3aSlave\u63a5\u53e3\u3002\u7f3a\u7701\u65f6\uff0cPort1\u4e3aactive \u72b6\u6001\u3002\u73b0\u5728\uff0cPort1\u53e3\u6216\u5176\u76f4\u8fde\u94fe\u8def\u53d1\u751f\u4e86\u6545\u969c\uff0c\u5bfc\u81f4Smart Link\u7ec4\u53d1\u751f\u5207\u6362\uff0cSlave\u63a5\u53e3Port2\u5904\u4e8eactive\u72b6\u6001\uff0c\u90a3\u4e48\u5f53Master\u63a5\u53e3Port1\u6062\u590d\u540e\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\u4e8b\u60c5\u5462\uff1f Smart Link\u7ec4\u652f\u6301\u4e24\u79cd\u6a21\u5f0f\uff1a \u89d2\u8272\u62a2\u5360\u6a21\u5f0f\u548c\u975e\u89d2\u8272\u62a2\u5360\u6a21\u5f0f\u3002 \u89d2\u8272\u62a2\u5360\u6a21\u5f0f\uff1a \u00b6 \u82e5Smart Link\u7ec4\u914d\u7f6e\u4e3a\u89d2\u8272\u62a2\u5360\u6a21\u5f0f\uff0c\u5f53\u4e3b\u7528\u94fe\u8def\u6545\u969c\u6062\u590d\u540e\uff0cMaster\u63a5\u53e3\u5c06\u62a2\u5360\u4e3aactive\u72b6\u6001\uff0cSlave \u63a5\u53e3\u5219\u8fdb\u5165inactive\u72b6\u6001\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002 \u975e\u89d2\u8272\u62a2\u5360\u6a21\u5f0f\uff1a \u00b6 \u82e5Smart Link\u7ec4\u914d\u7f6e\u4e3a\u975e\u89d2\u8272\u62a2\u5360\u6a21\u5f0f\uff0c\u5f53Master Link\u4ece\u6545\u969c\u4e2d\u6062\u590d\u540e\uff0cPort2\u5c06\u7ee7\u7eed\u5904\u4e8eactive\u72b6\u6001\uff0c Master\u53e3Port1\u7ee7\u7eed\u5904\u4e8einactive\u72b6\u6001\uff0c\u8fd9\u6837\u53ef\u4ee5\u4fdd\u6301\u6d41\u91cf\u7684\u7a33\u5b9a\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\u5c31\u662f\u975e\u62a2\u5360\u6a21\u5f0f\u3002\u4f7f\u7528**smart-link manual switch**\u547d\u4ee4\u53ef\u624b\u5de5\u6267\u884c\u94fe\u8def\u5012\u6362\u3002 \u914d\u7f6e\u53ca\u9a8c\u8bc1 \u00b6 \u5b9e\u9a8c\u62d3\u6251 \u00b6 \u5185\u7f51\u6709VLAN10\u53ca20\uff08SW3\u4e0b\u6302\u7684\u7528\u6237\uff0c\u5728\u4e0a\u56fe\u4e2d\u5e76\u672a\u753b\u51fa\uff09\uff1bVLAN99\u4e3aSmart Link\u63a7\u5236VLAN\u3002\u5728SW3\u4e0a\u521b\u5efaSMLK\u7ec4\uff0c GE0/0/21\u4e3aMaster \u53e3\uff1b GE0/0/22\u4e3aSlave\u53e3\u3002\u5185\u7f51\u6d41\u91cf\u5728\u7f51\u7edc\u6b63\u5e38\u65f6\u8d70 GE0/0/21\uff0c\u5f53GE0/0/21\u6302\u6389\u7684\u65f6\u5019\u81ea\u52a8\u5207\u6362\u5230GE0/0/22\uff1b\u5f53GE0/0/21\u6545\u969c\u6062\u590d\u7684\u65f6\u5019\uff0c\u80fd\u91cd\u65b0\u8fdb\u5165\u8f6c \u53d1\u72b6\u6001\uff0c\u6d41\u91cf\u4ecd\u7136\u4eceGE0/0/21\u8fdb\u884c\u8f6c\u53d1\u3002 \u914d\u7f6e\u53ca\u5b9e\u73b0 \u00b6 SW3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a [SW3] vlan batch 10 20 99 #\u914d\u7f6e\u63a5\u53e3\u7c7b\u578b\u4e3atrunk\u5e76\u653e\u884c\u76f8\u5173VLAN\uff08\u7528\u6237VLAN\u53ca\u63a7\u5236VLAN\uff09 [SW3] Interface gigabitethernet0/0/21 [SW3-gigabitethernet0/0/21] port link-type trunk [SW3-gigabitethernet0/0/21] port trunk allow-pass vlan 10 20 99 [SW3] Interface gigabitethernet0/0/22 [SW3-gigabitethernet0/0/22] port link-type trunk [SW3-gigabitethernet0/0/22] port trunk allow-pass vlan 10 20 99 #\u5173\u95ed\u63a5\u53e3\u4e0b\u7684STP\u3002\u52a0\u5165\u5230Smart Link\u7ec4\u7684\u63a5\u53e3\u5fc5\u987b\u5173\u95edSTP\uff1a [SW3] Interface gigabitethernet0/0/21 [SW3-gigabitethernet0/0/21] stp disable [SW3] Interface gigabitethernet0/0/22 [SW3-gigabitethernet0/0/22] stp disable #\u521b\u5efaSmart Link Group1 [SW3] smart-link group 1 [SW3-smlk-group1] port gigabitethernet0/0/21 master #\u6dfb\u52a0\u63a5\u53e3GE0/0/21\u5230Smartlink\u7ec4\u5e76\u6307\u5b9a\u4e3aMaster\u63a5\u53e3 [SW3-smlk-group1] port gigabitethernet0/0/22 slave #\u6dfb\u52a0\u63a5\u53e3GE0/0/22\u5230Smartlink\u7ec4\u5e76\u6307\u5b9a\u4e3aSlave\u63a5\u53e3 [SW3-smlk-group1] flush send control-vlan 99 password simple 123 #\u914d\u7f6e\u53d1\u9001\u63a7\u5236VLAN\u5e76\u8bbe\u7f6e\u5bc6\u7801 [SW3-smlk-group1] restore enable #\u6fc0\u6d3b\u56de\u5207\u529f\u80fd\uff0c\u7f3a\u7701\u65f6\uff0c\u8be5\u529f\u80fd\u4e3a\u5173\u95ed\u72b6\u6001 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u6765\u505a\u4e00\u4e0b\u9a8c\u8bc1\u53ca\u67e5\u770b\uff1a [SW3] display smart-link group 1 Smart Link group 1 information : Smart Link group was enabled Wtr-time is: 30 sec. There is no Load-Balance There is no protected-vlan reference-instance DeviceID: 4c1f-cc2c-1dd9 Control-vlan ID: 99 Member Role State Flush Count Last-Flush-Time ----------------------------------------------------------------------------------------------------------------------- GigabitEthernet0/0/21 Master Active 1 2014/09/02 14:02:34 UTC-08:00 GigabitEthernet0/0/22 Slave Inactive 0 0000/00/00 00:00:00 UTC+00:00 \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cGE0/0/21\u53e3\u76ee\u524d\u5904\u4e8eactive\u72b6\u6001\uff0c\u800cGE0/0/22\u53e3\u5904\u4e8einactive\u72b6\u6001\u3002\u63a5\u4e0b\u53bb\u770b \u770b\u5f53SW3\u7684GE0/0/21\u53e3\u53d1\u751f\u6545\u969c\u65f6\uff0c\u53d1\u751f\u7684\u73b0\u8c61\u3002\u624b\u5de5\u5c06SW3\u7684GE0/0/21\u53e3shutown\u3002 [SW3]display smart-link group 1 Smart Link group 1 information : Smart Link group was enabled Wtr-time is: 30 sec. There is no Load-Balance There is no protected-vlan reference-instance DeviceID: 4c1f-cc2c-1dd9 Control-vlan ID: 99 Member Role State Flush Count Last-Flush-Time ----------------------------------------------------------------------------------------------------------------------- GigabitEthernet0/0/21 Master Inactive 1 2014/09/02 14:02:34 UTC-08:00 GigabitEthernet0/0/22 Slave Active 1 2014/09/02 14:05:34 UTC-08:00 \u6211\u4eec\u770b\u5230GE0/0/21\u53e3\u7684\u72b6\u6001\u53d8\u6210\u4e86inactive\uff0c\u800cGE0/0/22\u53e3\u7684\u72b6\u6001\u53d8\u6210\u4e86active\u3002\u540c\u65f6GE0/0/22\u53e3\u7684 Flush Count\u53d8\u6210\u4e861\uff0c\u8868\u793a\u5728\u62d3\u6251\u53d8\u66f4\u540e\uff0c\u5411GE0/0/22\u53e3\u53d1\u9001\u8fc7\u4e00\u6b21Flush\u62a5\u6587\u3002 Monitor Link \u00b6 \u6280\u672f\u80cc\u666f \u00b6 \u8003\u8651\u4e0a\u9762\u7684\u62d3\u6251\uff0c\u7531\u4e8eSW3\u4ea4\u6362\u673a\u662f\u53cc\u4e0a\u884c\u7684\u7ec4\u7f51\uff0c\u975e\u5e38\u9002\u5408\u90e8\u7f72Smart Link\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u4ea4\u6362\u673a\u7684\u751f\u6210\u6811\u5173\u95ed\uff0c\u5e76\u4e14\u90e8\u7f72Smart Link\uff0c\u5c06Port1\u53e3\u8bbe\u7f6e\u4e3aMaster\u63a5\u53e3\uff0cPort2\u53e3\u8bbe\u7f6e\u4e3aSlave\u63a5\u53e3\u3002\u5f53Port1\u53e3\u6216\u8005\u5176\u76f4\u8fde\u94fe\u8def\u53d1\u751f\u6545\u969c\u65f6\uff0cSW3\u4ea4\u6362\u673a\u80fd\u591f\u611f\u77e5\u5e76\u4e14\u8fc5\u901f\u5207\u6362\uff0c\u4f46\u662f\u5982\u679cSW1\u7684\u4e0a\u884c\u63a5\u53e3\u53d1\u751f\u6545\u969c\uff0c\u5982\u56fe\u6240\u793a\uff0cSW3\u4ea4\u6362\u673a\u662f\u65e0\u6cd5\u611f\u77e5\u7684\uff0c\u56e0\u6b64\u4e5f\u5c31\u65e0\u6cd5\u5b9e\u73b0\u5207\u6362\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u9700\u8981\u4e00\u4e2a\u65b0\u7684\u6280\u672f\u4e0eSmart Link\u642d\u914d\u4f7f\u7528\uff0c\u8fd9\u5c31\u662fMonitor Link\u3002 \u5173\u4e8eMonitor Link \u00b6 Monitor Link\u7ec4\u4e5f\u79f0\u4e3a\u76d1\u63a7\u94fe\u8def\u7ec4\uff0c\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u4e0a\u884c\u548c\u4e0b\u884c\u63a5\u53e3\u7ec4\u6210\u3002\u4e0b\u884c\u63a5\u53e3\u7684\u72b6\u6001\u968f\u4e0a\u884c\u63a5\u53e3\u72b6\u6001\u7684\u53d8\u5316\u800c\u53d8\u5316\u3002 \u4e0a\u884c\u63a5\u53e3\uff08Uplink Port\uff09\u662fMonitor Link\u7ec4\u4e2d\u7684\u76d1\u63a7\u5bf9\u8c61\uff0c\u662f\u901a\u8fc7\u547d\u4ee4\u884c\u6307\u5b9a\u7684Monitor Link\u7ec4\u7684\u4e00\u79cd\u63a5\u53e3\u89d2\u8272\u3002\u5982\u679c\u591a\u4e2a\u63a5\u53e3\u88ab\u914d\u7f6e\u4e3aMonitor Link\u7ec4\u7684\u4e0a\u884c\u63a5\u53e3\uff0c\u53ea\u8981\u8fd9\u4e9b\u63a5\u53e3\u4e2d\u6709\u4e00\u4e2a\u63a5\u53e3\u5904\u4e8e\u8f6c\u53d1\u72b6\u6001\uff0c\u90a3\u4e48Monitor Link\u7ec4\u7684\u72b6\u6001\u5c31\u4e3aUP\uff1b\u53ea\u6709\u5f53\u6240\u6709\u4e0a\u884c\u63a5\u53e3\u90fd\u53d1\u751f\u6545\u969c\u65f6\uff0cMonitor Link \u7ec4\u7684\u72b6\u6001\u624d\u4e3aDown\uff0c\u8fd9\u65f6\u6240\u6709\u4e0b\u884c\u63a5\u53e3\u5c06\u90fd\u5c06\u88ab\u5173\u95ed\u3002\u5f53Monitor Link\u7ec4\u7684\u4e0a\u884c\u63a5\u53e3\u672a\u6307\u5b9a\u65f6\uff0c\u5219\u8ba4\u4e3a\u4e0a\u884c\u63a5\u53e3\u6545\u969c\uff0c\u6240\u6709\u4e0b\u884c\u63a5\u53e3\u90fd\u5c06\u88ab\u5173\u95ed\u3002 \u4e0b\u884c\u63a5\u53e3\uff08Downlink Port\uff09\u662fMonitor Link\u7ec4\u4e2d\u7684\u76d1\u63a7\u8005\uff0c\u662f\u901a\u8fc7\u547d\u4ee4\u884c\u6307\u5b9a\u7684Monitor Link\u7ec4\u7684\u53e6\u5916\u4e00\u79cd\u63a5\u53e3\u89d2\u8272\u3002Monitor Link\u7ec4\u7684\u4e0b\u884c\u63a5\u53e3\u53ef\u4ee5\u662f\u4ee5\u592a\u7f51\u63a5\u53e3\uff08\u7535\u53e3\u6216\u5149\u53e3\uff09\u6216\u805a\u5408\u63a5\u53e3\uff08Eth- trunk\u63a5\u53e3\uff09\u3002 \u5f53Monitor Link\u7ec4\u7684\u4e0a\u884c\u63a5\u53e3\u6062\u590d\u6b63\u5e38\u65f6\uff0cMonitor Link\u53ea\u4f1a\u5f00\u542f\u56e0\u4e0a\u884c\u63a5\u53e3\u6545\u969c\u800c\u88abMonitor Link \u963b\u585e\u7684\u4e0b\u884c\u63a5\u53e3\uff0c\u4e0d\u80fd\u5f00\u542f\u901a\u8fc7\u547d\u4ee4shutdown\u624b\u5de5\u5173\u95ed\u7684\u4e0b\u884c\u63a5\u53e3\u3002\u5e76\u4e14\u67d0\u4e2a\u4e0b\u884c\u63a5\u53e3\u6545\u969c\u5bf9\u4e0a\u884c\u63a5\u53e3\u548c\u5176\u4ed6\u4e0b\u884c\u63a5\u53e3\u6ca1\u6709\u5f71\u54cd\u3002 Smart Link\u4e0eMonitor Link\u7684\u642d\u914d \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u5728SW3\u4ea4\u6362\u673a\u4e0a\u90e8\u7f72Smart Link\u3002\u540c\u65f6\u5728SW1\u4e0a\u90e8\u7f72Monitor Link\uff0c\u5c06SW1\u7684GE0/0/1 \u8bbe\u7f6e\u4e3aUplink\u63a5\u53e3\uff0c\u5c06SW1\u7684GE0/0/2\u8bbe\u7f6e\u4e3aDownlink\u63a5\u53e3\u3002 \u5982\u6b64\u4e00\u6765\uff0c\u5f53SW3\u4ea4\u6362\u673a\u7684Port1\u63a5\u53e3\u6216\u8005\u4e0eSW1\u4e4b\u95f4\u7684\u4e92\u8054\u94fe\u8def\u53d1\u751f\u6545\u969c\uff0cSW3\u4ea4\u6362\u673a\u7684Smart Link \u80fd\u591f\u5b9e\u73b0\u5207\u6362\u3002\u800c\u5f53SW1\u4ea4\u6362\u673a\u7684\u4e0a\u884c\u63a5\u53e3GE0/0/1\u63a5\u53e3\u53d1\u751f\u6545\u969c\u6216\u8005\u5176\u4e0ePublic Network\u4e4b\u95f4\u7684\u94fe\u8def\u53d1\u751f\u6545\u969c\u7684\u8bdd\uff0cSW1\u7684GE0/0/1\u53e3\u5c06\u4f1a\u7acb\u5373down\u6389\uff0c\u800c\u8fd9\u5c06\u5bfc\u81f4SW1\u7684GE0/0/2\u88abMonitor Link\u5173\u95ed\uff0c \u8fd9\u6837\u4e00\u6765SW3\u4ea4\u6362\u673a\u7684Port1\u4e5f\u5c31Down\u4e86\uff0c\u4e8e\u662fSmart Link\u80fd\u591f\u8fdb\u884c\u6b63\u5e38\u7684\u5207\u6362\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5b9e\u9a8c\u9a8c\u8bc1 \u00b6 \u5148\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u6d4b\u8bd5\uff0c\u5728SW1\u9a8c\u8bc1\u4e00\u4e0bMonitor Link: \u5b8c\u6210\u540e\u68c0\u67e5\u4e00\u4e0b\u914d\u7f6e\uff1a Recover-timer is 3 sec. Member Role State Last-up-time Last-down-time GigabitEthernet0/0/1 UpLk UP 0000/00/00 00:00:00 UTC+00:00 0000/00/00 00:00:00 UTC+00:00 GigabitEthernet0/0/2 DwLk[1] UP 0000/00/00 00:00:00 UTC+00:00 0000/00/00 00:00:00 UTC+00:00 \u4ece\u4e0a\u8ff0\u8f93\u51fa\u53ef\u4ee5\u770b\u51fa\uff0cuplink\u63a5\u53e3GE0/0/1\u662fUP\u7684\uff0c\u56e0\u6b64downlink\u63a5\u53e3GE0/0/2\u4e5f\u662fUP\u7684\u3002\u63a5\u7740\u6211\u4eec\u628a GE0/0/1\u53e3shutdown\uff0c\u7136\u540e\u5c31\u80fd\u89c2\u5bdf\u5230\uff1a [SW1] display monitor-link group 1 Monitor Link group 1 information : Recover-timer is 3 sec. Member Role State Last-up-time Last-down-time GigabitEthernet0/0/1 UpLk DOWN 0000/00/00 00:00:00 UTC+00:00 2014/09/09 10:26:40 UTC-08:00 GigabitEthernet0/0/2 DwLk[1] DOWN 0000/00/00 00:00:00 UTC+00:00 2014/09/09 10:26:41 UTC-08:00 \u968f\u7740uplink\u63a5\u53e3down\u6389\uff0cdownlink\u63a5\u53e3GE0/0/2\u4e5f\u88ab\u81ea\u52a8\u5730shutdown\u3002 \u5b9e\u73b0 VLAN \u95f4\u7684\u4e92\u8bbf \u901a\u8fc7\u5b50\u63a5\u53e3\u5b9e\u73b0 VLAN \u95f4\u7684\u4e92\u8bbf \u5728\u4e8c\u5c42\u4ea4\u6362\u73af\u5883\u4e0b\uff0c\u4e00\u4e2aVLAN\u5c31\u662f\u4e00\u4e2a\u5e7f\u64ad\u57df\uff0c\u76f8\u540cVLAN\u5185\u7684\u8282\u70b9\u5982\u679c\u914d\u7f6e\u76f8\u540c\u7f51\u6bb5\u7684IP\u5730\u5740\u5373\u53ef\u76f4\u63a5\u901a\u4fe1\uff0c\u6211\u4eec\u5c06\u8fd9\u79cd\u901a\u4fe1\u79f0\u4e3a\u4e8c\u5c42\u901a\u4fe1\u3002\u4e0d\u540cVLAN\u662f\u4e0d\u540c\u7684\u5e7f\u64ad\u57df\uff0c\u4e00\u822c\u4e5f\u662f\u4e0d\u540c\u7684\u903b\u8f91\u5b50\u7f51\uff0c\u800c\u4e14\u76f8\u4e92\u9694\u79bb\uff0c\u65e0\u6cd5\u76f4\u63a5\u4e92\u8bbf\uff0c\u8fd9\u6837\u80fd\u8d77\u5230\u9694\u7edd\u5e7f\u64ad\u7684\u4f5c\u7528\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002 \u4f46\u662f\u5b9e\u9645\u7f51\u7edc\u4e2d\u5f80\u5f80VLAN\u4e4b\u95f4\u6709\u4e92\u8bbf\u7684\u9700\u6c42\uff0c\u4f8b\u5982\u540c\u4e00\u516c\u53f8\u4e0d\u540c\u7684\u90e8\u95e8\u5212\u5206\u5728\u4e0d\u540c\u7684VLAN\uff0c\u90a3\u4e48\u5982\u679c\u8fd9\u4e9b\u90e8\u95e8\u4e4b\u95f4\u6709\u6570\u636e\u5f80\u6765\u7684\u9700\u6c42\u5462\uff0c\u6b64\u65f6\u4e8c\u5c42\u4ea4\u6362\u673a\u5c31\u65e0\u6cd5\u5b9e\u73b0\u4e86\uff0c\u9700\u8981\u501f\u52a9\u4e09\u5c42\u8bbe\u5907\uff08\u8def\u7531\u8bbe\u5907\uff09\u3002\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u4f7f\u7528\u8def\u7531\u5668\uff1a \u5728\u4e0a\u56fe\u4e2d\uff0c\u4ea4\u6362\u673a\u5c06GE0/0/1\u53caGE0/0/23\u53e3\u90fd\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\u5e76\u90fd\u52a0\u5165VLAN10\uff1b\u5c06GE0/0/2\u53caGE0/0/24 \u90fd\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\u5e76\u90fd\u52a0\u5165VLAN20\u3002\u7136\u540e\u5c06\u8def\u7531\u5668Router\u7684GE0/0/1\u53e3\u4f5c\u4e3aVLAN10\u7528\u6237\u7684\u7f51\u5173\uff0c GE0/0/2\u4f5c\u4e3aVLAN20\u7528\u6237\u7684\u7f51\u5173\uff0c\u4ece\u800c\u5229\u7528\u8def\u7531\u5668\u7684\u8def\u7531\u529f\u80fd\u5b9e\u73b0\u4e24\u4e2aVLAN\u4e4b\u95f4\u7684\u4e92\u8bbf\uff0c\u8fd9\u4e48\u505a\u770b\u4f3c\u53ef\u884c\uff0c\u4f46\u662f\u4e00\u4e2aVLAN\u5c31\u9700\u8981\u8def\u7531\u5668\u62ff\u51fa\u4e00\u4e2a\u63a5\u53e3\uff0c\u90a3\u4e48\u5982\u679c\u5185\u7f51\u670910\u4e2aVLAN\u5462\uff1f\u8def\u7531\u5668\u8868\u793a\u9e2d\u68a8\u5f88\u5927\u3002\u6240\u4ee5\u53e6\u4e00\u79cd\u7a0d\u5fae\u6539\u8fdb\u70b9\u7684\u65b9\u6cd5\u662f\uff0c\u5728\u8def\u7531\u5668\u7684\u4e00\u4e2a\u7269\u7406\u63a5\u53e3\u4e0a\uff0c\u914d\u7f6e\u903b\u8f91\u7684\u5b50\u63a5\u53e3\uff08Sub-interface\uff09\u6765\u5b9e\u73b0\u540c\u6837\u7684\u9700\u6c42\uff0c\u8fd9\u79cd\u89e3\u51b3\u65b9\u6848\u53eb\u5355\u81c2\u8def\u7531\uff1a \u5728\u4e0a\u56fe\u4e2d\uff0c\u4ea4\u6362\u673a\u4e0e\u8def\u7531\u5668\u4e4b\u95f4\u4ec5\u9700\u4e00\u6839\u7269\u7406\u94fe\u8def\u5373\u53ef\uff0c\u8fd9\u6bb5\u94fe\u8def\u7531\u4e8e\u8981\u627f\u8f7d\u591aVLAN\u7684\u6570\u636e\uff0c\u56e0\u6b64\u5728\u4ea4\u6362\u673a\u4e0a\u5c31\u8981\u5c06\u4e0e\u8def\u7531\u5668\u5bf9\u63a5\u7684\u63a5\u53e3\uff08GE0/0/24\uff09\u8bbe\u7f6e\u4e3aTrunk\u7c7b\u578b\u3002\u8def\u7531\u5668\u8fd9\u8fb9\u5462\u867d\u7136\u53ea\u6709\u4e00\u4e2a\u7269\u7406\u63a5\u53e3 \uff08GE0/0/1\uff09\u4e0e\u4ea4\u6362\u673a\u76f8\u8fde\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u57fa\u4e8e\u8fd9\u4e2a\u7269\u7406\u63a5\u53e3\u521b\u5efa\u591a\u4e2a\u5b50\u63a5\u53e3\uff0c\u5b50\u63a5\u53e3GE0/0/1.10\u5bf9\u5e94 VLAN10\uff0c\u5b83\u80fd\u591f\u8bc6\u522bVLAN10\u7684\u6807\u8bb0\uff0c\u5e76\u4e14\u80fd\u591f\u5904\u7406\u5e26VLAN10\u6807\u8bb0\u7684\u6570\u636e\u5e27\uff0c\u540c\u7406GE0/0/1.20\u5bf9\u5e94 VLAN20\u3002\u5982\u6b64\u4e00\u6765\uff0c\u5728\u8def\u7531\u5668\u4e0a\u4ec5\u4f7f\u7528\u4e00\u4e2a\u7269\u7406\u63a5\u53e3\uff0c\u5373\u53ef\u652f\u6301\u591a\u4e2aVLAN\u7684\u6570\u636e\u3002 \u5b50\u63a5\u53e3\u662f\u4e00\u4e2a\u8f6f\u4ef6\u7684\u3001\u903b\u8f91\u7684\u63a5\u53e3\uff0c\u662f\u57fa\u4e8e\u7269\u7406\u63a5\u53e3\u521b\u5efa\u7684\u3002\u8def\u7531\u5668\u4f1a\u628a\u5b50\u63a5\u53e3\u5f53\u6210\u662f\u4e00\u4e2a\u666e\u901a\u63a5\u53e3\u6765\u5bf9\u5f85\u3002\u901a\u8fc7\u5b50\u63a5\u53e3\u7684\u65b9\u5f0f\u6211\u4eec\u53ef\u4ee5\u5927\u5927\u7684\u8282\u7701\u786c\u4ef6\u6210\u672c\u3002\u5177\u4f53\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u5982\u4e0a\u914d\u7f6e\u540e\uff0c\u4ea4\u6362\u673a\u8fde\u63a5PC\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u76f8\u5e94\u7684VLAN\u5219PC\u5373\u53ef\u4e92\u901a\u3002\u4ece\u4e0a\u9762\u8fd9\u4e2a\u7889\u5821\u7684\u56fe\u53ef\u4ee5\u66f4\u52a0\u5f62\u8c61\u5730\u7406\u89e3\u5b50\u63a5\u53e3\u7684\u6982\u5ff5\uff0c\u5176\u5b9e\u5c31\u662f\u76f8\u5f53\u4e8e\u5728\u4e00\u4e2a\u5927\u7ba1\u9053\u91cc\u5957\u7740\u4e24\u4e2a\u5c0f\u7ba1\u9053\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\u4e00\u65e6\u6211\u4eec\u5728\u7269\u7406\u63a5\u53e3\u4e0a\u521b\u5efa\u4e86\u5b50\u63a5\u53e3\uff0c\u90a3\u4e48\u540e\u7eed\u7684\u914d\u7f6e\u5c06\u4e0d\u4f1a\u518d\u5728\u7269\u7406\u63a5\u53e3\u4e0a\u505a\uff0c\u800c\u662f\u5728\u5b50\u63a5\u53e3\u4e0a\u8fdb\u884c\uff0c\u6211\u4eec\u53ea\u8981\u4fdd\u8bc1\u7269\u7406\u63a5\u53e3\u6ca1\u6709\u88abshutdown\u5373\u53ef\u3002 \u4ee5\u592a\u7f51\u5b50\u63a5\u53e3\u6280\u672f\u53ef\u90e8\u7f72\u5728\u8def\u7531\u5668\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u90e8\u7f72\u5728\u9632\u706b\u5899\u4e0a\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50\u3002 \u4e0a\u9762\u662f\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u7ec4\u7f51\u573a\u666f\uff0c\u7ad9\u70b9\u5185\u7f51\u6709\u4e24\u4e2aVLAN\uff0cVLAN10\u53caVLAN20\u3002\u73b0\u5728\u7684\u9700\u6c42\u662f\uff0c\u8981\u6c42VLAN10 \u53caVLAN20\u80fd\u591f\u5b9e\u73b0\u4e92\u8bbf\uff0c\u800c\u4e14\u4e92\u8bbf\u6d41\u91cf\u5fc5\u987b\u7ecf\u8fc7\u9632\u706b\u5899\u505a\u5b89\u5168\u68c0\u67e5\u3002VLAN10\u5185\u7684\u7f51\u5143\u975e\u5e38\u91cd\u8981\uff0c\u5c5e\u4e8e\u9ad8\u5b89\u5168\u7ea7\u522b\u7684\u7f51\u7edc\uff0c\u800cVLAN20\u5185\u7684\u7f51\u7edc\u5219\u5b89\u5168\u7ea7\u522b\u66f4\u4f4e\u3002 \u89e3\u51b3\u7684\u529e\u6cd5\uff1a \u00b6 \u4e0a\u56fe\u4e2d\u7684\u4ea4\u6362\u673a\u5de5\u4f5c\u5728\u4e8c\u5c42\u6a21\u5f0f\uff0c\u8fde\u63a5\u7ec8\u7aef\u7684\u63a5\u53e3\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\u5e76\u4e14\u5206\u522b\u52a0\u5165\u5230\u76f8\u5e94\u7684VLAN\u3002\u540c\u65f6\u4ea4\u6362\u673a\u8fde\u63a5\u9632\u706b\u5899\u7684\u63a5\u53e3GE0/0/24\u914d\u7f6e\u4e3aTrunk\u7c7b\u578b\u5e76\u4e14\u653e\u901aVLAN10\u53caVLAN20\u3002 \u968f\u540e\u5728\u9632\u706b\u5899\u7684GE0/0/1\u53e3\u4e0a\u521b\u5efa\u4e24\u4e2a\u5b50\u63a5\u53e3\uff1aGE0/0/1.10\u53caGE0/0/1.20\uff0c\u5b50\u63a5\u53e3\u7684\u914d\u7f6e\u5982\u56fe\u6240\u793a\uff0c\u8fd9\u4e24\u4e2a\u5b50\u63a5\u53e3\u5206\u522b\u5bf9\u5e94VLAN10\u53caVLAN20\u3002\u6700\u540e\u522b\u5fd8\u4e86\u8981\u5c06\u5b50\u63a5\u53e3\u6dfb\u52a0\u5230\u76f8\u5e94\u7684\u5b89\u5168\u57df\u4e2d\uff0c\u4f8b\u5982VLAN10\u8fd9\u4e2a\u7f51\u7edc\u5982\u679c\u6bd4\u8f83\u91cd\u8981\uff0c\u5219\u53ef\u5c06\u9632\u706b\u5899\u7684GE0/0/1.10\u63a5\u53e3\u6dfb\u52a0\u5230\u9ad8\u5b89\u5168\u7ea7\u522b\u7684\u533a\u57df\uff0c\u5982Trust\uff0c\u800cVLAN20\u53ef\u80fd\u9700\u8981\u63a5\u53d7\u6765\u81ea\u5916\u90e8\u7684\u8bbf\u95ee\uff0c\u56e0\u6b64\u89c4\u5212\u5728DMZ\u57df\uff0c\u6545\u5c06\u5b50\u63a5\u53e3GE0/0/1.20\u6dfb\u52a0\u5230DMZ\u533a\u57df\u3002\u63a5\u4e0b\u53bb\u5c31\u53ef\u4ee5\u90e8\u7f72\u57df\u95f4\u5305\u8fc7\u6ee4\u89c4\u5219\u4e86\u3002 \u901a\u8fc7 vlan-interface \u5b9e\u73b0 VLAN \u95f4\u7684\u4e92\u8bbf \u5728\u7406\u89e3\u4e86\u5b50\u63a5\u53e3\u4e4b\u540e\uff0c\u518d\u6765\u770b\u770b\u4e09\u5c42\u4ea4\u6362\u673a\u662f\u5982\u4f55\u5b9e\u73b0VLAN\u95f4\u7684\u6570\u636e\u4e92\u8bbf\u7684\uff0c\u4ece\u8fd9\u91cc\u5207\u5165\uff0c\u5f00\u59cb\u7406\u89e3\u5e76\u90e8\u7f72\u4e09\u5c42\u4ea4\u6362\u3002\u6211\u4eec\u77e5\u9053\u4e8c\u5c42\u4ea4\u6362\u673a\u662f\u53ef\u4ee5\u5b9e\u73b0\u4e8c\u5c42\u4ea4\u6362\u7684\uff0c\u5b83\u5173\u5fc3\u7684\u662f\u6570\u636e\u5e27\uff0c\u5bf9\u5e27\u5934\u7684\u4e8c\u5c42\u4fe1\u606f\u8fdb\u884c\u8bfb\u53d6\u5e76\u4e14\u6839\u636e\u81ea\u5df1\u7684MAC\u5730\u5740\u8868\u8fdb\u884c\u8f6c\u53d1\u3002\u800c\u4e09\u5c42\u4ea4\u6362\u673a\u76f8\u5f53\u4e8e\u5728\u4e8c\u5c42\u4ea4\u6362\u673a\u7684\u57fa\u7840\u4e0a\uff0c\u591a\u4e86\u4e2a\u8def\u7531\u6a21\u5757\uff0c\u4e8e\u662f\u4e4e\u5b83\u5c31\u80fd\u652f\u6301\u8def\u7531\u529f\u80fd\u4e86\uff1a\u652f\u6301\u8def\u7531\u9009\u62e9\u534f\u8bae\u3001\u652f\u6301\u4e09\u5c42\u6570\u636e\u8f6c\u53d1\u3001\u652f\u6301IP\u8def\u7531\u67e5\u627e\u3001\u652f\u6301\u4e09\u5c42\u63a5\u53e3\u7b49\u7b49\u3002 \u5148\u6765\u8ba4\u8bc6\u4e00\u4e0bvlan-interface\uff08\u7b80\u79f0vlanif\uff09\uff0c\u8fd9\u662f\u4e00\u4e2a\u903b\u8f91\u63a5\u53e3\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u5e76\u4e0d\u662f\u4e00\u4e2a\u771f\u5b9e\u7684\u7269\u7406\u63a5\u53e3\uff0c \u5f53\u6211\u4eec\u5728\u4ea4\u6362\u673a\u4e0a\u521b\u5efa\u4e86\u4e00\u4e2aVLAN\u4e4b\u540e\uff0c\u7d27\u63a5\u7740\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u4e0e\u8fd9\u4e2aVLAN\u5bf9\u5e94\u7684vlanif\uff0c\u4f8b\u5982\u6211\u4eec\u521b\u5efa\u4e86VLAN10\uff0c\u90a3\u4e48VLAN10\u5bf9\u5e94\u7684vlanif\u5c31\u662finterface vlanif 10\uff0c\u8fd9\u4e2avlanif10\u662f\u4e00\u4e2a\u4e09\u5c42\u63a5\u53e3\uff0c\u4f60\u53ef\u4ee5\u4e3a\u8fd9\u4e2a vlanif10\u914d\u7f6eIP\u5730\u5740\uff0c\u4e0eVLAN10\u5185\u7684PC\u7528\u6237\u7684IP\u5730\u5740\u540c\u4e00\u7f51\u6bb5\uff0c\u8fd9\u6837\u4e00\u6765\uff0cVLAN10\u5185\u7684\u7528\u6237\u5c31\u80fd\u591f\u5c06\u7f51 \u5173\u6307\u5411\u8fd9\u4e2avlanif\uff0c\u5f53VLAN10\u7684PC\u9700\u8981\u8bbf\u95ee\u672c\u7f51\u6bb5\u4ee5\u5916\u7684\u7f51\u7edc\u65f6\uff0c\u5b83\u4eec\u5c06\u6570\u636e\u4ea4\u7ed9\u7f51\u5173\uff0c\u4e5f\u5c31\u662fvlanif10\uff0c \u518d\u7531\u4e09\u5c42\u4ea4\u6362\u673a\u53bb\u505a\u8def\u7531\u67e5\u627e\u53ca\u6570\u636e\u8f6c\u53d1\u3002\u5b9e\u9645\u4e0a\uff0c\u5728\u8fd9\u4e2a\u7406\u89e3\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u62ff\u5355\u81c2\u8def\u7531\u90a3\u4e2a\u6a21\u578b\u5bf9\u7c7b\u6bd4\u3002 \u6240\u4ee5\u770b\u4e0a\u9762\u8fd9\u56fe\uff0c\u5728\u4e09\u5c42\u4ea4\u6362\u673a\u4e0a\u521b\u5efa\u4e86\u4e24\u4e2aVLAN\uff1a10\u548c20\uff0c\u540c\u65f6\u4e3a\u4e24\u4e2aVLAN\u7684vlanif\u5206\u914d\u4e86\u5730\u5740\u4f5c\u4e3a\u5404\u81eaVLAN\u7684\u7528\u6237\u7f51\u5173\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u8fd9\u53f0\u4ea4\u6362\u673a\u7684\u8def\u7531\u8868\u91cc\u5c31\u6709\u4e86\u4e24\u4e2aVLAN\u7f51\u6bb5\u7684\u8def\u7531\u3002\u90a3\u4e48\u5f53\u4e24VLAN\u4e4b\u95f4\u8981\u4e92\u8bbf\u65f6\uff0cVLAN10\u7684\u7528\u6237\u5c06\u6570\u636e\u4e22\u7ed9\u81ea\u5df1\u7684\u7f51\u5173\uff0c\u4e5f\u5c31\u662fvlanif10\uff0c\u6570\u636e\u5230\u4e86vlanif10\u4e4b\u540e\uff0c\u4e09\u5c42\u4ea4\u6362\u673a\u67e5\u770b\u6570\u636e\u5305\u7684\u76ee\u7684\u5730\u5740IP\u5e76\u5728\u8def\u7531\u8868\u4e2d\u8fdb\u884c\u5339\u914d\uff0c\u53d1\u73b0\u76ee\u7684\u5730\u662fVLAN20\u7684\u6240\u5728\u7f51\u6bb5\uff0c\u56e0\u6b64\u5c06\u6570\u636e\u4eceVLAN20 \u6254\u51fa\u53bb\uff0c\u6700\u7ec8\u62b5\u8fbe\u76ee\u7684\u5730\u7684VLAN20\u7684PC\u3002 Vlanif\u7684\u57fa\u7840\u914d\u7f6e\uff1a \u00b6 \u5b9e\u9a8c\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\u3002PC1\u53caPC2\u5206\u522b\u4f4d\u4e8eVLAN10\u53caVLAN20\uff0c\u73b0\u5728\u8981\u6c42\u5b8c\u6210\u4e09\u5c42\u4ea4\u6362\u673aSW\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u4e24\u4e2aVLAN\u7684\u7528\u6237\u80fd\u591f\u76f8\u4e92\u901a\u4fe1\u3002 SW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a [SW-vlanif10] ip address 192.168.20.254 24 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cPC1\u5c06\u81ea\u5df1\u7684IP\u5730\u5740\u8bbe\u7f6e\u5728192.168.10.0/24\u7f51\u6bb5\uff0c\u540c\u65f6\u5c06\u7f51\u5173\u914d\u7f6e\u4e3a192.168.10.254\uff1b PC2\u7684IP\u5730\u5740\u5219\u914d\u7f6e\u5728192.168.20.0/24\uff0c\u7f51\u5173\u8bbe\u7f6e\u4e3a192.168.20.254\uff0c\u4e24\u8005\u5c31\u80fd\u591f\u4e92\u76f8\u901a\u4fe1\u4e86\u3002 \u4e8c\u3001\u4e09\u5c42\u4ea4\u6362\u673a\u3001\u8def\u7531\u5668\u7b80\u5355\u7ec4\u7f51\uff1a \u00b6 \u5b9e\u9a8c\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\u3002PC1\u53caPC2\u5206\u522b\u5904\u4e8eVLAN10\u53caVLAN20\uff0c\u5b83\u4eec\u7684\u7f3a\u7701\u7f51\u5173\u90fd\u8bbe\u7f6e\u5728\u4e09\u5c42\u4ea4\u6362\u673aSW2 \u4e0a\u3002SW1\u662f\u63a5\u5165\u5c42\u4ea4\u6362\u673a\uff0c\u53ea\u5177\u5907\u4e8c\u5c42\u4ea4\u6362\u529f\u80fd\u3002SW2\u4e0e\u8def\u7531\u5668Router\u5b9e\u73b0\u4e09\u5c42\u5bf9\u63a5\uff0c\u7528\u4e8e\u4e24\u8005\u5bf9\u63a5\u7684VLAN \u662fVLAN99\u3002\u4e0a\u8ff0\u62d3\u6251\uff0c\u6211\u4eec\u53ef\u4ee5\u753b\u4e00\u4e2a\u903b\u8f91\u56fe\u6765\u5e2e\u52a9\u7406\u89e3\uff1a SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a Router\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u94fe\u8def\u805a\u5408 \u94fe\u8def\u805a\u5408\u6280\u672f\u80cc\u666f \u5728\u4e00\u4e2a\u7f51\u7edc\u4e2d\uff0c\u67d0\u4e9b\u5173\u952e\u94fe\u8def\u627f\u8f7d\u7684\u6d41\u91cf\u53ef\u80fd\u975e\u5e38\u5927\uff0c\u94fe\u8def\u7684\u8d1f\u8f7d\u53ef\u80fd\u4f1a\u5f88\u9ad8\uff0c\u5e26\u5bbd\u5c31\u4f1a\u6210\u4e3a\u6570\u636e\u4f20\u8f93\u7684\u74f6\u9888\u3002\u5982\u679c\u589e\u52a0\u5e26\u5bbd\uff0c\u90a3\u5c31\u9700\u8981\u589e\u52a0\u786c\u4ef6\u6295\u5165\uff0c\u4f8b\u5982\u5c06\u94fe\u8def\u4ece\u5343\u5146\u7535\u53e3\u6362\u6210\u4e07\u5146\u5149\u7ea4\u63a5\u53e3\uff0c\u8fd9\u5c31\u4e0d\u5f97\u4e0d\u589e\u52a0\u6210\u672c\u3002\u53e6\u4e00\u4e2a\u95ee\u9898\u662f\u5355\u70b9\u6545\u969c\u7684\u95ee\u9898\uff0c\u4e00\u65e6\u8fd9\u6839\u94fe\u8def\u53d1\u751f\u6545\u969c\uff0c\u90a3\u4e48\u4e0d\u53ef\u907f\u514d\u7684\u5c06\u5f71\u54cd\u5230\u7f51\u7edc\u7684\u53ef\u8fbe\u6027\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u4ee5\u592a\u7f51\u94fe\u8def\u805a\u5408\u6280\u672f\uff08Link Aggregation\uff09\uff0c\u6216\u8005\u79f0\u4e3a\u7aef\u53e3\u6346\u7ed1\u3001\u94fe\u8def\u6346\u7ed1\u6280\u672f\uff0c\u662f\u4e00\u79cd\u901a\u7528\u7684\u4ee5\u592a\u7f51\u6280\u672f\u3002\u901a\u8fc7\u8be5\u6280\u672f\uff0c\u6211\u4eec\u80fd\u591f\u5c06\u591a\u6761\u4ee5\u592a\u7f51\u94fe\u8def\u8fdb\u884c\u201c\u6346\u7ed1\u201d\uff0c\u6346\u7ed1\u4e4b\u540e\u7684\u8fd9\u4e9b\u7269\u7406\u94fe\u8def\u5c31\u5f62\u6210\u4e86\u903b\u8f91\u4e0a\u7684\u4e00\u6761\u65b0\u7684\u94fe\u8def\uff08Eth-Trunk\uff09\uff0c\u8fd9\u6761\u805a\u5408\u94fe\u8def\u4e0d\u4ec5\u4ec5\u5728\u5e26\u5bbd\u4e0a\u6210\u500d\u7684\u589e\u52a0\uff0c\u8fd8\u540c\u65f6\u63d0\u4f9b\u4e86\u8d1f\u8f7d\u5747\u8861\u53ca\u94fe\u8def\u5197\u4f59\u3002\u6709\u4eba\u53ef\u80fd\u4f1a\u95ee\uff0c\u4e3a\u5565\u8981\u90a3\u4e48\u9ebb\u70e6\uff0c\u4ea4\u6362\u673a\u4e4b\u95f4\u591a\u8fde\u51e0\u6839\u7ebf\u4e0d\u5c31\u5b8c\u4e86\u4e48\uff1f\u591a\u8fde\u51e0\u6839\u7ebf\u5b9e\u9645\u4e0a\u5c31\u591a\u521b\u9020\u4e86\u51e0\u4e2a\u73af\u8def\uff0c\u8fd9\u65f6\u7531\u4e8e\u751f\u6210\u6811\u7684\u4f5c\u7528\uff0c\u5fc5\u7136\u4f1a\u963b\u585e\u6389\u51e0\u4e2a\u7aef\u53e3\uff0c\u5982\u6b64\u4e00\u6765\u4ecd\u7136\u53ea\u6709\u4e00\u6761\u94fe\u8def\u5728\u8f6c\u53d1\u6570\u636e\uff0c\u8fd8\u662f\u8fbe\u4e0d\u5230\u6211\u4eec\u7684\u9884\u671f\u3002\u4f46\u662f\u4f7f\u7528\u94fe\u8def\u805a\u5408\u529f\u80fd\uff0c\u5219\u53ef\u5c06\u8fd9\u51e0\u6839\u94fe\u8def\u6346\u7ed1\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u6761\uff0c\u4ea4\u6362\u673a\u4f1a\u5c06\u6346\u7ed1\u540e\u7684\u8fd9\u6839\u805a\u5408\u94fe\u8def\u5f53\u505a\u4e00\u6761\u94fe\u8def\u6765\u5bf9\u5f85\uff0c\u81ea\u7136\u4e5f\u5c31\u4e0d\u5b58\u5728\u73af\u8def\u7684\u95ee\u9898\u4e86\u3002 \u4e3e\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u4e0a\u56fe\u4e2d\uff0c\u4e24\u53f0\u4ea4\u6362\u673a\u7684GE0/0/1\u5230GE0/0/2\u63a5\u53e3\u4e24\u4e24\u5bf9\u63a5\uff0c\u5982\u679c\u5728SW1\u53caSW2\u4e0a\u5206\u522b\u5c06\u81ea\u5df1\u7684GE0/0/1\u5230GE0/0/2\u63a5\u53e3\u8fdb\u884c\u6346\u7ed1\uff0c\u5219\u4f1a\u4ea7\u751f\u51fa\u4e00\u4e2a\u805a\u5408\u63a5\u53e3\uff0c\u4e5f\u5c31\u662fEth-trunk\u63a5\u53e3\u3002\u94fe\u8def\u805a\u5408\u6280\u672f\u80fd\u591f\u90e8\u7f72\u5728\u4ea4\u6362\u673a\u4e4b\u95f4\u3001\u9632\u706b\u5899\u4e4b\u95f4\u3001\u4ea4\u6362\u673a\u4e0e\u9632\u706b\u5899\u4e4b\u95f4\u3001\u4ea4\u6362\u673a\u4e0e\u7279\u5b9a\u7684\u670d\u52a1\u5668\u4e4b\u95f4\u7b49\u7b49\uff0c\u662f\u4e00\u79cd\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\u7684\u6280\u672f\u3002\u534e\u4e3a\u4ea4\u6362\u673a\u4e0a\u7684Eth-trunk\u652f\u6301\u4e24\u79cd\u5de5\u4f5c\u65b9\u5f0f\uff1a\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u53caLACP\u3002 \u5de5\u4f5c\u65b9\u5f0f\uff1a\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\uff08Manual load-balance\uff09 \u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u65b9\u5f0f\u5141\u8bb8\u5728\u805a\u5408\u7ec4\u4e2d\u624b\u5de5\u52a0\u5165\u591a\u4e2a\u6210\u5458\u63a5\u53e3\uff0c\u5e76\u4e14\u6240\u6709\u7684\u63a5\u53e3\u5747\u5904\u4e8e\u8f6c\u53d1\u72b6\u6001\uff0c\u5206\u62c5\u8d1f\u8f7d\u7684\u6d41\u91cf\u3002\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0cEth-Trunk\u7684\u521b\u5efa\u3001\u6210\u5458\u63a5\u53e3\u7684\u52a0\u5165\u90fd\u9700\u8981\u624b\u5de5\u914d\u7f6e\u5b8c\u6210\uff0c\u6ca1\u6709LACP\uff08link Aggregation Control Protocol\uff09\u534f\u8bae\u62a5\u6587\u7684\u53c2\u4e0e\u3002\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u6a21\u5f0f\u901a\u5e38\u7528\u5728\u5bf9\u7aef\u8bbe\u5907\u4e0d\u652f\u6301LACP\u534f\u8bae\u7684\u60c5\u51b5\u4e0b\u3002 \u57fa\u7840\u914d\u7f6e\u547d\u4ee4\u5982\u4e0b\uff1a [Huawei-Eth-Trunk1] least active-linknumber ? \u5de5\u4f5c\u65b9\u5f0f\uff1aLACP LACP\u65b9\u5f0f\u662f\u4e00\u79cd\u5229\u7528LACP\u534f\u8bae\u8fdb\u884c\u805a\u5408\u53c2\u6570\u534f\u5546\u3001\u786e\u5b9a\u6d3b\u52a8\u63a5\u53e3\u548c\u975e\u6d3b\u52a8\u63a5\u53e3\u7684\u94fe\u8def\u805a\u5408\u65b9\u5f0f\u3002\u8be5\u6a21\u5f0f\u4e0b\uff0c\u9700\u624b\u5de5\u521b\u5efaEth-Trunk\uff0c\u624b\u5de5\u52a0\u5165Eth-Trunk\u6210\u5458\u63a5\u53e3\uff0c\u4f46\u662f\uff0c\u7531LACP\u534f\u8bae\u534f\u5546\u786e\u5b9a\u6d3b\u52a8\u63a5\u53e3\u548c\u975e\u6d3b\u52a8\u63a5\u53e3\u3002 LACP\u6a21\u5f0f\u4e5f\u79f0\u4e3aM\u2236N\u6a21\u5f0f\u3002\u8fd9\u79cd\u65b9\u5f0f\u540c\u65f6\u53ef\u4ee5\u5b9e\u73b0\u94fe\u8def\u8d1f\u8f7d\u5206\u62c5\u548c\u94fe\u8def\u5197\u4f59\u5907\u4efd\u7684\u53cc\u91cd\u529f\u80fd\u3002\u5728\u94fe\u8def\u805a\u5408\u7ec4\u4e2dM\u6761\u94fe\u8def\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff0c\u8fd9\u4e9b\u94fe\u8def\u8d1f\u8d23\u8f6c\u53d1\u6570\u636e\u5e76\u8fdb\u884c\u8d1f\u8f7d\u5206\u62c5\uff0c\u53e6\u5916N\u6761\u94fe\u8def\u5904\u4e8e\u975e\u6d3b\u52a8\u72b6\u6001\u4f5c\u4e3a\u5907\u4efd\u94fe\u8def\uff0c\u4e0d\u8f6c\u53d1\u6570\u636e\u3002\u5f53M\u6761\u94fe\u8def\u4e2d\u6709\u94fe\u8def\u51fa\u73b0\u6545\u969c\u65f6\uff0c\u7cfb\u7edf\u4f1a\u4eceN\u6761\u5907\u4efd\u94fe\u8def\u4e2d\u9009\u62e9\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u63a5\u66ff\u51fa\u73b0\u6545\u969c\u7684\u94fe\u8def\uff0c\u540c\u65f6\u8fd9\u6761\u66ff\u6362\u6545\u969c\u94fe\u8def\u7684\u5907\u4efd\u94fe\u8def\u72b6\u6001\u53d8\u4e3a\u6d3b\u52a8\u72b6\u6001\u5f00\u59cb\u8f6c\u53d1\u6570\u636e\u3002 LACP\u6a21\u5f0f\u4e0e\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u6a21\u5f0f\u7684\u4e3b\u8981\u533a\u522b\u4e3a\uff1aLACP\u6a21\u5f0f\u6709\u5907\u4efd\u94fe\u8def\uff0c\u800c\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u6a21\u5f0f\u6240\u6709\u6210\u5458\u63a5\u53e3\u5747\u5904\u4e8e\u8f6c\u53d1\u72b6\u6001\uff0c\u5206\u62c5\u8d1f\u8f7d\u6d41\u91cf\u3002\u6b64\u5916\uff0cLACP\u6a21\u5f0f\u4e0b\uff0c\u4ea4\u6362\u673a\u4e4b\u95f4\u4f1a\u4ea4\u4e92LACP\u62a5\u6587\u3002 LACP\u6a21\u5f0f\u4e2d\u6709\u4e00\u4e2a\u4e3b\u52a8\u3001\u88ab\u52a8\u7aef\u7684\u6982\u5ff5\u3002\u8bbe\u5907LACP\u4f18\u5148\u7ea7\u8f83\u9ad8\uff08\u503c\u8d8a\u5c0f\u8d8a\u4f18\uff09\u7684\u4e00\u7aef\u4e3a\u4e3b\u52a8\u7aef\uff0c\u8bbe\u5907LACP \u4f18\u5148\u7ea7\u8f83\u4f4e\u7684\u4e00\u7aef\u4e3a\u88ab\u52a8\u7aef\u3002\u5982\u679c\u4e24\u7aef\u8bbe\u5907\u7684LACP\u4f18\u5148\u7ea7\u4e00\u6837\u65f6\uff0c\u5219MAC\u5730\u5740\u5c0f\u7684\u80dc\u51fa\u3002 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cSwitchA\u53caSwitchB\u4e4b\u95f4\u90e8\u7f72\u4e86Eth-Trunk\uff0c\u8be5Eth-Trunk\u4e2d\u5305\u542b\u4e09\u6761\u76f4\u8fde\u94fe\u8def\uff0c\u5e76\u4e14\u91c7\u7528\u7684\u662fLACP\u65b9\u5f0f\u3002\u4e24\u8005\u4f1a\u4ea4\u4e92LACP\u62a5\u6587\u4f7f\u5f97\u805a\u5408\u94fe\u8def\u80fd\u591f\u534f\u5546\u5efa\u7acb\u3002A\u548cB\u4f1a\u6bd4\u8f83\u4e24\u8005\u7684\u8bbe\u5907LACP\u4f18\u5148\u7ea7\uff0c\u503c\u6700\u5c0f\u7684\u80dc\u51fa\u6210\u4e3a\u4e3b\u52a8\u7aef\uff0c\u8fd9\u91cc\u5047\u8bbeA\u80dc\u51fa\u3002\u4ece\u56fe\u4e2d\u6211\u4eec\u770b\u5230A\u9009\u62e9\u4e86\u4e0a\u9762\u4e24\u6761\u94fe\u8def\u4f5c\u4e3a\u6d3b\u52a8\u94fe\u8def\uff0c\u800c B\u9009\u62e9\u4e86\u4e0b\u9762\u4e24\u6761\u94fe\u8def\uff0c\u7531\u4e8eA\u662f\u4e3b\u52a8\u7aef\uff0c\u56e0\u6b64\u6700\u7ec8AB\u4e4b\u95f4\u5efa\u7acb\u8d77\u6765\u7684\u805a\u5408\u94fe\u8def\u4e2d\u7684\u6d3b\u52a8\u94fe\u8def\u7531A\u6765\u786e\u5b9a\uff0c \u4e5f\u5c31\u662f\u4e0a\u9762\u4e24\u6761\u94fe\u8def\u6210\u4e3a\u6d3b\u52a8\u94fe\u8def\u3002 \u57fa\u7840\u914d\u7f6e\u547d\u4ee4\uff08\u6b64\u5904\u4ee5S5700 V200R001C00\u7248\u672c\u4e3a\u4f8b\uff0c\u4e0d\u540c\u7684\u8f6f\u4ef6\u7248\u672c\uff0c\u5728\u914d\u7f6e\u4e0a\u53ef\u80fd\u5b58\u5728\u7ec6\u5fae\u5dee\u5f02\uff09\uff1a \u00b6 #\u521b\u5efaEth-Trunk\uff0c\u5e76\u5c06\u5de5\u4f5c\u65b9\u5f0f\u4fee\u6539\u4e3aLACP\uff1a [Huawei] interface eth-trunk 1 [Huawei] mode lacp-static #\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cEth-Trunk\u7684\u5de5\u4f5c\u6a21\u5f0f\u4e3a\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u65b9\u5f0f\u3002 #\u6dfb\u52a0\u6210\u5458\u63a5\u53e3\u5230Eth-Trunk\u4e2d\uff08\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u6dfb\u52a0\uff09\uff1a [Huawei] interface GigabitEthernet0/0/1 [Huawei-GigabitEthernet0/0/1] eth-trunk 1 [Huawei] interface GigabitEthernet0/0/2 [Huawei-GigabitEthernet0/0/2] eth-trunk 1 [Huawei] interface GigabitEthernet0/0/3 [Huawei-GigabitEthernet0/0/3] eth-trunk 1 #\uff08\u53ef\u9009\uff09\u914d\u7f6eEth-trunk\u6210\u5458\u94fe\u8def\u7684\u8d1f\u8f7d\u5206\u62c5\u6a21\u5f0f\uff1a [Huawei-Eth-Trunk1] load-balance ? #\uff08\u53ef\u9009\uff09\u914d\u7f6e\u8bbe\u5907LACP\u4f18\u5148\u7ea7\uff1a [Huawei] lacp priority ? \u7cfb\u7edfLACP\u4f18\u5148\u7ea7\u503c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edfLACP\u4f18\u5148\u7ea7\u4e3a32768\u3002\u5728\u4e24\u7aef\u8bbe\u5907\u4e2d\u9009\u62e9\u7cfb\u7edfLACP\u4f18\u5148\u7ea7\u8f83\u5c0f\u4e00\u7aef \u4f5c\u4e3a\u4e3b\u52a8\u7aef\uff0c\u5982\u679c\u7cfb\u7edfLACP\u4f18\u5148\u7ea7\u76f8\u540c\u5219\u9009\u62e9MAC\u5730\u5740\u8f83\u5c0f\u7684\u4e00\u7aef\u4f5c\u4e3a\u4e3b\u52a8\u7aef\u3002 #\uff08\u53ef\u9009\uff09\u914d\u7f6e\u63a5\u53e3LACP\u4f18\u5148\u7ea7\uff1a [Huawei-GigabitEthernet0/0/1] lacp priority ? \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u63a5\u53e3\u7684LACP\u4f18\u5148\u7ea7\u662f32768\u3002\u53d6\u503c\u8d8a\u5c0f\uff0c\u8868\u660e\u63a5\u53e3\u7684LACP\u4f18\u5148\u7ea7\u8d8a\u9ad8\u3002\u4f18\u5148\u7ea7\u8d8a\u9ad8\u7684\u63a5\u53e3\u8d8a\u6709\u53ef\u80fd\u6210\u4e3a\u6d3b\u52a8\u7684\u6210\u5458\u63a5\u53e3\u3002 #\uff08\u53ef\u9009\uff09\u914d\u7f6e\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0a\u9650\u9608\u503c\uff1a [Huawei-Eth-Trunk1] max active-linknumber \uff1f \u914d\u7f6e\u94fe\u8def\u805a\u5408\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0a\u9650\u9608\u503c\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0a\u9650\u9608\u503c\u4e3a8\u3002 \u914d\u7f6eLACP\u6a21\u5f0f\u6d3b\u52a8\u63a5\u53e3\u6570\u76ee\u4e0a\u9650\u9608\u503c\u53ef\u4ee5\u63a7\u5236Eth-Trunk\u4e2d\u6d3b\u52a8\u63a5\u53e3\u7684\u6700\u5927\u6570M\uff0c\u5269\u4f59\u7684\u6210\u5458\u63a5\u53e3\u5904\u4e8e\u5907\u4efd\u72b6\u6001\u3002 #\uff08\u53ef\u9009\uff09\u914d\u7f6e\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0b\u9650\u9608\u503c\uff1a [Huawei-Eth-Trunk1] least active-linknumber \uff1f \u914d\u7f6e\u94fe\u8def\u805a\u5408\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0b\u9650\u9608\u503c\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0b\u9650\u9608\u503c\u4e3a1\u3002 \u914d\u7f6eLACP\u6a21\u5f0f\u6d3b\u52a8\u63a5\u53e3\u6570\u76ee\u4e0b\u9650\u9608\u503c\u53ef\u4ee5\u51b3\u5b9aEth-Trunk\u4e2d\u6d3b\u52a8\u63a5\u53e3\u6570\u7684\u6700\u5c0f\u503c\uff0c\u5982\u679c\u9759\u6001\u6a21\u5f0f\u4e0b\u6d3b\u52a8\u63a5\u53e3\u6570\u76ee\u5c0f\u4e8e\u8be5\u503c\uff0c Eth-Trunk\u7684\u63a5\u53e3\u72b6\u6001\u5c06\u53d8\u4e3aDOWN\u7684\u72b6\u6001\u3002 #\uff08\u53ef\u9009\uff09\u4f7f\u80fdLACP\u62a2\u5360\u5e76\u914d\u7f6e\u62a2\u5360\u7b49\u5f85\u65f6\u95f4\uff1a [Huawei-Eth-Trunk1] lacp preempt enable [Huawei-Eth-Trunk1] lacp preempt delay \uff1f \u57fa\u7840\u5b9e\u9a8c \u5b9e\u9a8c1\uff1a\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u6a21\u5f0f \u00b6 SW1\u53caSW2\u901a\u8fc7GE0/0/23\u53ca24\u53e3\u4e92\u8054\uff0c\u914d\u7f6eEth-trunk\u5c06\u8fd9\u4e24\u6761\u94fe\u8def\u8fdb\u884c\u6346\u7ed1\u3002\u6346\u7ed1\u540e\u7684\u94fe\u8def\u914d\u7f6e\u4e3a Trunk\u6a21\u5f0f\uff0c\u4f7f\u5f97\u4e24\u53f0\u4ea4\u6362\u673a\u4e0b\u76f8\u540cVLAN\u5185\u7684\u7528\u6237\u80fd\u591f\u4e92\u8bbf\uff0c\u4e5f\u5c31\u662fPC1\u4e0ePC3\u80fd\u591f\u4e92\u8bbf\uff1bPC2\u4e0ePC4 \u4e5f\u80fd\u591f\u4e92\u8bbf\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5728SW1\u4e0a\u67e5\u770b\u4e00\u4e0b\uff1a PortName Status Weight GigabitEthernet0/0/23 Up 1 GigabitEthernet0/0/24 Up 1 \u5b9e\u9a8c2\uff1aLACP\u65b9\u5f0f \u00b6 SW1\u53caSW2\u7684GE0/0/22\u5230GE0/0/24\u53e3\u5206\u522b\u4e92\u8054\uff0c\u5c06\u8fd9\u4e09\u6761\u94fe\u8def\u6346\u7ed1\u4e3aEth-Trunk\uff0c\u4f7f\u7528LACP\u65b9\u5f0f\uff0c SW1\u4e3a\u4e3b\u52a8\u7aef\uff0c\u5728\u8be5\u805a\u5408\u94fe\u8def\u4e2d\uff0c\u4e24\u6761\u94fe\u8def\u4e3a\u6d3b\u52a8\u94fe\u8def\uff0c\u5176\u4f59\u4e00\u6761\u505a\u5907\u4efd\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u540e\u68c0\u67e5\u4e00\u4e0b\u914d\u7f6e\uff1a System Priority: 1 System ID: 4c1f-ccbe-289e Least Active-linknumber: 1 Max Active-linknumber: 2 Operate status: up Number Of Up Port In Trunk: 2 -------------------------------------------------------------------------------- ActorPortName Status PortType PortPri PortNo PortKey PortState Weight GigabitEthernet0/0/22 Selected 1000TG 32768 23 401 10111100 1 GigabitEthernet0/0/23 Selected 1000TG 32768 24 401 10111100 1 GigabitEthernet0/0/24 Unselect 1000TG 32768 25 401 10100000 1 Partner: -------------------------------------------------------------------------------- ActorPortName SysPri SystemID PortPri PortNo PortKey PortState GigabitEthernet0/0/22 32768 4c1f-cc77-6cf4 32768 23 401 10111100 GigabitEthernet0/0/23 32768 4c1f-cc77-6cf4 32768 24 401 10111100 GigabitEthernet0/0/24 32768 4c1f-cc77-6cf4 32768 25 401 10110000 \u5728\u4e0a\u8ff0\u8f93\u51fa\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230SW1\u7684eth-trunk1\u805a\u5408\u63a5\u53e3\u7684\u72b6\u6001\u3002Operate status\u663e\u793a\u6574\u4e2a\u805a\u5408\u63a5\u53e3\u7684 \u72b6\u6001\u4e3aUP\u3002\u800c\u7531\u4e8e\u6211\u4eec\u8bbe\u7f6e\u4e86max active-linknumber 2\uff0c\u56e0\u6b64\u4e09\u4e2a\u6210\u5458\u63a5\u53e3\u4e2d\uff0c\u4ec5\u6709\u4e24\u4e2a\u63a5\u53e3\uff08\u4e24\u6761\u94fe\u8def\uff09\u662f\u6d3b\u8dc3\u7684\uff0c\u5b83\u4eec\u4f1a\u8f6c\u53d1\u6570\u636e\uff0c\u800c\u5269\u4e0b\u7684\u63a5\u53e3\u5219\u4f5c\u4e3a\u5907\u4efd\u3002\u6211\u4eec\u770b\u5230GE0/0/22\u53caGE0/0/23\u662fSelect \u72b6\u6001\uff0c\u56e0\u6b64\u5b83\u4eec\u662f\u6d3b\u8dc3\u63a5\u53e3\uff0c\u800cGE0/0/24\u662fUnselect\u72b6\u6001\uff0c\u5219\u5b83\u4eec\u662f\u975e\u6d3b\u8dc3\u7684\u5907\u4efd\u63a5\u53e3\u3002\u56e0\u4e3aSW1\u662f\u4e3b\u52a8\u7aef\u8bbe\u5907\uff0c\u56e0\u6b64\u7531\u5b83\u51b3\u5b9a\u54ea\u4e9b\u63a5\u53e3\u662f\u6d3b\u8dc3\uff0c\u54ea\u4e9b\u662f\u975e\u6d3b\u8dc3\u7684\u3002 \u4ea4\u6362\u5b89\u5168 \u7aef\u53e3\u955c\u50cf \u7aef\u53e3\u955c\u50cf\u6982\u8ff0 \u00b6 \u5728\u67d0\u4e9b\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u9700\u8981\u76d1\u63a7\u4ea4\u6362\u673a\u7279\u5b9a\u7aef\u53e3\u7684\u5165\u7ad9\u6216\u51fa\u7ad9\u62a5\u6587\uff0c\u6216\u8005\u9700\u8981\u9488\u5bf9\u7279\u5b9a\u7684\u6d41\u91cf\u8fdb\u884c\u5206\u6790\uff0c\u4f8b\u5982\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u671f\u671b\u6293\u53d6PC1\u6536\u53d1\u7684\u62a5\u6587\u5e76\u8fdb\u884c\u5206\u6790\uff0c\u90a3\u4e48\u4fbf\u53ef\u4ee5\u5728\u4ea4\u6362\u673a\u7684GE0/0/3\u53e3\u63a5\u4e00\u4e2a\u76d1\u63a7PC\uff0c\u5728\u76d1\u63a7PC\u4e0a\u5b89\u88c5\u534f\u8bae\u5206\u6790\u8f6f\u4ef6\uff0c\u7136\u540e\u5728\u4ea4\u6362\u673a\u4e0a\u90e8\u7f72\u7aef\u53e3\u955c\u50cf\uff0c\u5c06GE0/0/2\u7684\u5165\u3001\u51fa\u7ad9\u6d41\u91cf\u955c\u50cf\u5230GE0/0/3\u53e3\u4e0a\u6765\uff0c\u63a5\u4e0b\u6765\u6211\u53ea\u8981\u5728\u76d1\u63a7PC\u4e0a\u901a\u8fc7\u534f\u8bae\u5206\u6790\u8f6f\u4ef6\u67e5\u770b\u62a5\u6587\u5373\u53ef\u3002 \u6ce8\u610f\u5230\uff0c\u5982\u679c\u6ca1\u6709\u7aef\u53e3\u955c\u50cf\u6280\u672f\uff0c\u9664\u975e\u6570\u636e\u5305\u7684\u76ee\u7684\u5730\u662f\u76d1\u63a7PC\uff08\u6240\u8fde\u63a5\u7684\u7aef\u53e3\uff09\uff0c\u5426\u5219\u62a5\u6587\u662f\u4e0d\u4f1a\u53d1\u5411\u8be5\u7aef\u53e3\u7684\u3002\u56e0\u6b64\u4e8b\u5b9e\u4e0a\u7aef\u53e3\u955c\u50cf\u5c31\u662f\u5c06\u67d0\u4e2a\u7279\u5b9a\u7aef\u53e3\u7684\u6d41\u91cf\u62f7\u8d1d\u5230\u67d0\u4e2a\u76d1\u63a7\u7aef\u53e3\uff0c\u5c31\u8fd9\u4e48\u7b80\u5355\u3002 \u7aef\u53e3\u955c\u50cf\u5e38\u7528\u4e8e\uff1a\u6d41\u91cf\u89c2\u6d4b\u53ca\u7edf\u8ba1\uff1b\u6545\u969c\u5b9a\u4f4d\u7b49\u3002 \u955c\u50cf\u7684\u5206\u7c7b\uff1a \u00b6 \u57fa\u4e8e\u7aef\u53e3\u7684\u955c\u50cf\uff1a \u7aef\u53e3\u955c\u50cf\u5c31\u662f\u5c06\u88ab\u76d1\u63a7\u7aef\u53e3\u4e0a\u7684\u6570\u636e\u590d\u5236\u5230\u6307\u5b9a\u7684\u76d1\u63a7\u7aef\u53e3\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u6790\u548c\u76d1\u89c6\u3002 \u57fa\u4e8e\u6d41\u7684\u955c\u50cf\uff1a \u6d41\u955c\u50cf\u5c31\u662f\u5c06\u5339\u914d\u8bbf\u95ee\u63a7\u5236\u5217\u8868\u7684\u4e1a\u52a1\u6d41\u590d\u5236\u5230\u6307\u5b9a\u7684\u76d1\u63a7\u7aef\u53e3\uff0c\u7528\u4e8e\u62a5\u6587\u7684\u5206\u6790\u548c\u76d1\u89c6\u3002 \u57fa\u4e8e\u7aef\u53e3\u7684\u955c\u50cf \u00b6 \u7aef\u53e3\u955c\u50cf\u662f\u6307\u4ea4\u6362\u673a\u590d\u5236\u4e00\u4efd\u4ece\u955c\u50cf\u7aef\u53e3\u6d41\u7ecf\u7684\u62a5\u6587\uff08\u53ef\u4ee5\u6307\u5b9a\u5165\u7ad9\u6216\u51fa\u7ad9\uff09\uff0c\u5e76\u5c06\u6b64\u62a5\u6587\u4f20\u9001\u5230\u6307\u5b9a\u7684\u89c2\u5bdf\u7aef\u53e3\u8fdb\u884c\u5206\u6790\u548c\u76d1\u89c6\u3002\u5728\u7aef\u53e3\u955c\u50cf\u4e2d\uff0c\u955c\u50cf\u7aef\u53e3\u6d41\u7ecf\u7684\u6240\u6709\u62a5\u6587\u90fd\u5c06\u88ab\u590d\u5236\u5230\u89c2\u5bdf\u7aef\u53e3\u3002 \u4ee5\u592a\u7f51\u4ea4\u6362\u673a\u652f\u6301\u591a\u5bf9\u4e00\u7684\u955c\u50cf\uff0c\u5373\u5c06\u591a\u4e2a\u7aef\u53e3\u7684\u62a5\u6587\u590d\u5236\u5230\u4e00\u4e2a\u76d1\u63a7\u7aef\u53e3\u4e0a\u3002\u6ce8\u610f\u533a\u5206\u8fd9\u91cc\u7684\u89c2\u5bdf\u7aef\u53e3\u548c\u955c\u50cf\u7aef\u53e3\u3002 \u7aef\u53e3\u955c\u50cf\u5206\u4e3a\u672c\u5730\u7aef\u53e3\u955c\u50cf\u548c\u8fdc\u7a0b\u7aef\u53e3\u955c\u50cf\uff1a \u672c\u5730\u7aef\u53e3\u955c\u50cf\uff1a\u672c\u5730\u7aef\u53e3\u955c\u50cf\u4e2d\uff0c\u76d1\u63a7PC\u4e0e\u89c2\u5bdf\u7aef\u53e3\u76f4\u63a5\u76f8\u8fde\u3002 \u8fdc\u7a0b\u7aef\u53e3\u955c\u50cf\uff1a\u8fdc\u7a0b\u7aef\u53e3\u955c\u50cf\u4e2d\uff0c\u76d1\u63a7PC\u4e0e\u89c2\u5bdf\u7aef\u53e3\u6240\u5728\u8bbe\u5907\u4e4b\u95f4\u901a\u8fc7\u4e8c\u5c42\u7f51\u7edc\u6216\u4e09\u5c42\u7f51\u7edc\u76f8\u8054\u3002 \u4e8c\u5c42\u7aef\u53e3\u955c\u50cf\uff08RSPAN\uff1aRemote Switched Port Analyzer\uff09\uff1a\u82e5\u901a\u8fc7\u4e8c\u5c42\u7f51\u7edc\u4e92\u8054\uff0c\u4ee5S9300\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u5b83\u5c06\u955c\u50cf\u7aef\u53e3\u7684\u62a5\u6587\u5c01\u88c5VLAN\uff0c\u7136\u540e\u901a\u8fc7\u89c2\u5bdf\u7aef\u53e3\u5c06\u62a5\u6587\u5728\u8fdc\u7a0b\u955c\u50cfVLAN\u4e2d\u8fdb\u884c\u5e7f\u64ad\u3002\u8fdc\u7a0b\u7684\u8bbe\u5907\u6536\u5230\u62a5\u6587\u540e\uff0c\u6bd4\u8f83\u62a5\u6587\u7684VLAN ID\uff0c\u5982\u679c\u76f8\u540c\uff0c\u5219\u5c06\u8be5\u62a5\u6587\u8f6c\u53d1\u5230\u8fdc\u7a0b\u89c2\u5bdf\u7aef\u53e3\u3002 \u4e09\u5c42\u7aef\u53e3\u955c\u50cf\uff08ERSPAN\uff1aEncapsulated Remote SPAN\uff09\uff1a\u82e5\u901a\u8fc7\u4e09\u5c42\u7f51\u7edc\u4e92\u8054\uff0c\u4ee5S9300\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u5b83\u4f7f\u7528GRE\u62a5\u6587\u5934\u5c01\u88c5\u548c\u89e3\u5c01\u88c5\u955c\u50cf\u62a5\u6587\uff0c\u4f7f\u5f97\u955c\u50cf\u62a5\u6587\u53ef\u4ee5\u7a7f\u900f\u4e09\u5c42\u7f51\u7edc\uff0c\u4ece\u800c\u5b9e\u73b0\u955c\u50cf\u7aef\u53e3\u6240\u5728\u8bbe\u5907\u4e0e\u89c2\u5bdf\u7aef\u53e3\u6240\u5728\u8bbe\u5907\u4e4b\u95f4\u901a\u8fc7\u4e09\u5c42\u7f51\u7edc\u76f8\u8fde\u65f6\u7684\u7aef\u53e3\u955c\u50cf\u3002 \u57fa\u4e8e\u6d41\u7684\u955c\u50cf \u00b6 \u6d41\u955c\u50cf\u5c31\u662f\u5c06\u6d41\u955c\u50cf\u7aef\u53e3\u4e0a\u7684\u7279\u5b9a\u6570\u636e\u590d\u5236\u5230\u6307\u5b9a\u7684\u89c2\u5bdf\u7aef\u53e3\u6216CPU\u8fdb\u884c\u5206\u6790\u548c\u76d1\u89c6\u3002\u6d41\u955c\u50cf\u7aef\u53e3\u662f\u6307\u5e94\u7528\u4e86\u5305\u542b\u6d41\u955c\u50cf\u884c\u4e3a\u7684\u6d41\u7b56\u7565\u7684\u63a5\u53e3\uff0c\u4ece\u6d41\u955c\u50cf\u7aef\u53e3\u6d41\u8fc7\u7684\u62a5\u6587\uff0c\u5982\u679c\u5339\u914d\u6b64\u63a5\u53e3\u4e0a\u6d41\u7b56\u7565\u4e2d\u7684\u6d41\u5206\u7c7b\uff0c\u5219\u5c06\u88ab\u590d\u5236\u5e76\u4f20\u9001\u5230\u89c2\u5bdf\u7aef\u53e3\u6216CPU\u3002 \u6d41\u955c\u50cf\u5206\u4e3a\u4e24\u79cd\uff0c\u5373\u6d41\u955c\u50cf\u5230\u63a5\u53e3\u548c\u6d41\u955c\u50cf\u5230CPU\uff1a \u6d41\u955c\u50cf\u5230\u63a5\u53e3\uff0c\u662f\u628a\u901a\u8fc7\u914d\u7f6e\u4e86\u6d41\u955c\u50cf\u7684\u63a5\u53e3\u4e0a\u7684\u7b26\u5408\u8981\u6c42\u7684\u62a5\u6587\u590d\u5236\u4e00\u4efd\uff0c\u7136\u540e\u53d1\u9001\u5230\u89c2\u5bdf\u7aef\u53e3\u4ee5\u4f9b\u5206\u6790\u8bca\u65ad\u3002 \u6d41\u955c\u50cf\u5230CPU\uff0c\u662f\u628a\u901a\u8fc7\u914d\u7f6e\u4e86\u6d41\u955c\u50cf\u7684\u63a5\u53e3\u4e0a\u7684\u7b26\u5408\u8981\u6c42\u7684\u62a5\u6587\u590d\u5236\u4e00\u4efd\uff0c\u7136\u540e\u53d1\u9001\u5230CPU\u4ee5\u4f9b\u5206\u6790\u8bca\u65ad\u3002\u8fd9\u91cc\u7684CPU\u6307\u7684\u662f\u914d\u7f6e\u4e86\u6d41\u955c\u50cf\u7684\u63a5\u53e3\u6240\u5728\u63a5\u53e3\u677f\u4e0a\u7684CPU\u3002 \u914d\u7f6e\u672c\u5730\u7aef\u53e3\u955c\u50cf \u00b6 \u5c06\u4ea4\u6362\u673aGE0/0/2\u7aef\u53e3\u7684\u8fdb\u3001\u51fa\u53e3\u62a5\u6587\u955c\u50cf\u5230GE0/0/3\u3002\u4ea4\u6362\u673a\u914d\u7f6e\u5982\u4e0b\uff1a \u62a5\u6587\u5206\u6790 \u00b6 \u5728IP\u7f51\u7edc\u4e2d\uff0c\u6709\u7740\u5404\u79cd\u5404\u6837\u7684\u6d41\u91cf\u3002\u534f\u8bae\u6216\u4e1a\u52a1\u7684\u6b63\u5e38\u8fd0\u8f6c\u5f97\u76ca\u4e8e\u62a5\u6587\u7684\u6b63\u5e38\u4ea4\u4e92\u3002\u4f8b\u5982\u4e0a\u56fe\u4e2dSW1 \u53caSW2\u8fd0\u884cOSPF\uff0c\u90a3\u4e48\u5b9e\u9645\u4e0a\u5728SW1\u3001SW2\u4e4b\u95f4\u5c31\u5728\u6e90\u6e90\u4e0d\u65ad\u7684\u4ea4\u4e92\u7740OSPF\u7684\u62a5\u6587\uff0c\u4f7f\u5f97OSPF\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u3002\u518d\u5982\u4eceSW1\u53bbtelnet SW2\uff0c\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u884c\u4e3a\u5728\u5e95\u5c42\u4e5f\u662f\u7531\u76f8\u5173\u7684\u62a5\u6587\u4ea4\u4e92\u6765\u5b8c\u6210\u3002\u666e\u901a\u7684\u7f51\u7edc\u7528\u6237\u4ec5\u9700\u8981\u5173\u6ce8\u80fd\u5426ping\u901a\uff0c\u6216\u8005\u8dd1\u5728\u7f51\u7edc\u4e0a\u7684\u4e1a\u52a1\u662f\u5426\u6b63\u5e38\uff0c\u4f46\u662f\u4f5c\u4e3a\u6570\u901a\u5de5\u7a0b\u5e08\u7684\u6211\u4eec\uff0c\u5e94\u8be5\u5177\u5907\u4ece\u62a5\u6587\u5c42\u9762\u7406\u89e3\u534f\u8bae\u6216\u673a\u5236\u7684\u7d20\u8d28\u3002 \u5bf9\u4e8e\u4e00\u4e2a\u804c\u4e1a\u7f51\u7edc\u5de5\u7a0b\u5e08\uff0c\u5e94\u8be5\u80fd\u591f\u4ece\u62a5\u6587\u5c42\u9762\u7406\u89e3IP\u6570\u636e\uff0c\u8fdb\u800c\u7406\u89e3\u5404\u79cd\u534f\u8bae\uff0c\u4ee5\u53ca\u5229\u7528\u8fd9\u79cd\u6280\u672f\u7406\u89e3\u5bf9\u7f51\u7edc\u8fdb\u884c\u7ba1\u7406\u548c\u6392\u969c\u3002\u8bb8\u591a\u7f51\u7edc\u6545\u969c\u90fd\u53ef\u4ee5\u901a\u8fc7\u5206\u6790\u5305\u6587\u6765\u5b9a\u4f4d\u3002\u7f51\u7edc\u5de5\u7a0b\u5e08\u7684\u6210\u957f\u4e4b\u8def\uff1a \u62a5\u6587\u5206\u6790\u5de5\u5177 \u00b6 \u5e38\u7528\u7684\u62a5\u6587\u5206\u6790\u5de5\u5177\u6709\uff1aWireshark\u3001Ethereal\u3001Sniffer\u3002 \u4f8b\u5982\u4e0b\u56fe\u5c31\u662fWireshark\u8f6f\u4ef6\u7684\u754c\u9762\uff0c\u5728\u5b8c\u6210\u8f6f\u4ef6\u5b89\u88c5\u540e\uff0c\u542f\u52a8\u8be5\u8f6f\u4ef6\uff0c\u7136\u540e\u9009\u62e9\u76d1\u542c\u672c\u5730\u7684\u54ea\u4e2a\u7f51\u5361\uff0c \u5373\u53ef\u5f00\u59cb\u5728\u8be5\u7f51\u5361\u4e0a\u4fa6\u542c\u62a5\u6587\u3002\u4e0b\u56fe\u4e2d\u663e\u793a\u7684\u5c31\u662f\u6211\u4eec\u6293\u53d6\u5230\u7684\u5404\u79cd\u62a5\u6587\u3002 \u5c0f\u7ec3\u4e60\uff1a \u6309\u7167\u5982\u56fe\u6240\u793a\u5b8c\u6210PC\u53ca\u4ea4\u6362\u673a\u7684IP\u914d\u7f6e\u3002\u5728\u4ea4\u6362\u673a\u4e0a\u5f00\u542fTelnet\u670d\u52a1\u3002 \u5728PC\u4e0a\u6253\u5f00wireshark\u6293\u5305\u5de5\u5177\uff0c\u76d1\u63a7\u4ee5\u592a\u7f51\u5361\uff0c\u7136\u540e\u4ecePC telnet\u4ea4\u6362\u673a\uff0c\u89c2\u5bdf\u6293\u5230\u7684\u62a5\u6587\uff0ctelnet\u662f\u660e\u6587\u4f20\u8f93\u7684\uff0c\u56e0\u6b64\u80fd\u591f\u901a\u8fc7\u6293\u5305\uff0c\u5c06telnet\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u4ee5\u53catelnet\u4e0a\u4ea4\u6362\u673a\u4e4b\u540e\u8f93\u5165\u7684\u5404\u79cd\u64cd\u4f5c\u90fd\u6293\u53d6\u4e0b\u6765\uff0c\u56e0\u6b64telnet\u534f\u8bae\u5e76\u4e0d\u5b89\u5168\u3002 \u6e29\u99a8\u63d0\u9192\uff1awireshark\u662f\u975e\u6807\u8f6f\u4ef6\uff0c\u64c5\u81ea\u5b89\u88c5\u5c5e\u4fe1\u606f\u5b89\u5168\u8fdd\u89c4\uff0c\u56e0\u6b64\u5982\u82e5\u9700\u5b89\u88c5\u5b66\u4e60\u8be5\u8f6f\u4ef6\u7684\u4f7f\u7528\uff0c\u8bf7\u81ea\u884c\u8d70\u76f8\u5173\u6d41\u7a0b\u6216\u5728\u79c1\u4ebaPC\u4e0a\u5b8c\u6210\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u89c2\u5bdf\u7aef\u53e3\u4e13\u95e8\u7528\u4e8e\u6545\u969c\u5b9a\u4f4d\u6216\u6d41\u91cf\u5206\u6790\uff0c\u4e0d\u80fd\u7528\u4f5c\u666e\u901a\u4e1a\u52a1\u53e3\u3002 \u6355\u83b7\u4e1a\u52a1\u62a5\u6587 \u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u5728\u8fdb\u884c\u95ee\u9898\u5b9a\u4f4d\u53ca\u5206\u6790\u65f6\uff0c\u6211\u4eec\u53ef\u80fd\u5e76\u4e0d\u5177\u5907\u5728\u4ea4\u6362\u673a\u4e0a\u8fdb\u884c\u7aef\u53e3\u955c\u50cf\u7684\u6761\u4ef6\uff0c\u4f8b\u5982\u7ba1\u7406 PC\u4e0d\u5728\u673a\u623f\uff0c\u5de5\u7a0b\u5e08\u901a\u8fc7\u8fdc\u7a0b\u767b\u5f55\u7684\u65b9\u5f0f\u8fde\u63a5\u5230\u7f51\u7edc\u8bbe\u5907\uff0c\u800c\u5982\u679c\u6b64\u65f6\u53c8\u9700\u8981\u8fdb\u884c\u62a5\u6587\u6355\u83b7\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u4f7f\u7528**capture-packet**\u547d\u4ee4\u3002 \u573a\u666f\u4e00\uff1a\u6355\u83b7\u4ea4\u6362\u673a\u63a5\u53e3\u4e0a\u6536\u5230\u7684\u62a5\u6587\uff0c\u5e76\u5c06\u6355\u83b7\u7684\u7ed3\u679c\u8f93\u51fa\u5230\u7ec8\u7aef\u754c\u9762 \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u5e0c\u671b\u5728\u4ea4\u6362\u673a\u4e0a\u6293\u53d6\u63a5\u53e3GE6/0/13\u6536\u5230\u7684\u62a5\u6587\uff0c\u5e76\u5c06\u6355\u83b7\u7684\u62a5\u6587\u5448\u73b0\u5728\u7ec8\u7aef\u754c\u9762\u4e0a\uff0c\u4ee5\u6b64\u8fdb\u884c\u7b80\u5355\u7684\u5224\u65ad\uff1aPC1 ping PC2\u6240\u4ea7\u751f\u7684ICMP\u62a5\u6587\u662f\u5426\u901a\u8fc7\u8be5\u4ea4\u6362\u673a\u3002\u4ee5S9300\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a[SW] capture-packet interface GigabitEthernet 6/0/13 destination terminal \u4ea4\u6362\u673a\u4fbf\u4f1a\u5f00\u59cb\u6355\u83b7\u63a5\u53e3GE6/0/13\u6240\u63a5\u6536\u7684\u6240\u6709\u62a5\u6587\uff0c\u5e76\u5c06\u62a5\u6587\u5448\u73b0\u5728\u7ec8\u7aef\u754c\u9762\u4e0a\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c \u4ea4\u6362\u673a\u4f1a\u6301\u7eed\u5728\u7ec8\u7aef\u754c\u9762\u4e0a\u663e\u793a\u6355\u83b7\u5230\u7684\u62a5\u6587\uff0c\u76f4\u5230\u6355\u83b7\u8d85\u65f6\uff08\u7f3a\u770160s\uff09\uff1a \u5f53PC1\u5f00\u59cbping PC2\u65f6\uff0c\u6211\u4eec\u5c31\u80fd\u5728\u7ec8\u7aef\u754c\u9762\u770b\u5230\u5982\u4e0a\u8f93\u51fa\uff0c\u4e0a\u9762\u622a\u53d6\u4e86\u6355\u83b7\u5230\u7684\u4e24\u4e2a\u62a5\u6587\u3002\u4ee5\u7b2c\u4e00\u4e2a \u62a5\u6587\u4e3a\u4f8b\uff0c\u8fd9\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u6570\u636e\u5e27\uff0c\u7ea2\u8272\u5b57\u4f53\u90e8\u5206\u662f\u8be5\u5e27\u7684\u76ee\u7684MAC\u5730\u5740\uff0c\u84dd\u8272\u5b57\u4f53\u90e8\u5206\u662f\u6e90MAC\u5730\u5740\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e9b\u7b80\u5355\u7684\u4fe1\u606f\u5224\u65ad\u76ee\u6807\u62a5\u6587\u662f\u5426\u5230\u8fbe\uff08\u5b9e\u9645\u4e0a\uff0c\u4f60\u8fd8\u80fd\u5728\u4e0a\u8ff0\u8f93\u51fa\u4e2d\uff0c\u770b\u5230\u62a5\u6587\u7684\u6e90\u3001\u76ee\u7684IP\u5730\u5740\u7b49\u4fe1\u606f\uff09\u3002 \u573a\u666f\u4e8c\uff1a\u6355\u83b7\u4ea4\u6362\u673a\u63a5\u53e3\u4e0a\u6536\u5230\u7684\u7279\u5b9a\u62a5\u6587\uff0c\u5e76\u5c06\u6355\u83b7\u7684\u7ed3\u679c\u8f93\u51fa\u5230\u7ec8\u7aef\u754c\u9762 \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u5728\u4ea4\u6362\u673a\u4e0a\u8fdb\u884c\u62a5\u6587\u6355\u83b7\uff0c\u53ea\u6293\u53d6PC1 Telnet PC2\u7684\u62a5\u6587\u3002\u4f7f\u7528ACL3000\u6765\u5339\u914d\u611f\u5174\u8da3\u7684\u6d41\u91cf\uff0c\u7136\u540e\u7528capture-packet\u6267\u884c\u62a5\u6587\u6355\u83b7\u3002 \u6267\u884c\u4e0a\u8ff0\u547d\u4ee4\u540e\uff0c\u5f53PC1 telnet PC2\u65f6\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a \u53e6\u5916\uff0c\u5728capture-packet interface GigabitEthernet 6/0/13 acl 3000 destination terminal\u547d\u4ee4\u7684\u57fa \u00b6 \u7840\u4e0a\u589e\u52a0**file**\u5173\u952e\u5b57\u5e76\u6307\u5b9a\u6587\u4ef6\u540d\uff0c\u4f8b\u5982**capture-packet interface GigabitEthernet 6/0/13 acl 3000 destination terminal file test.cap**\uff0c\u90a3\u4e48\u5f53\u4ea4\u6362\u673a\u6355\u83b7\u5230\u62a5\u6587\u540e\uff0c\u4e0d\u4ec5\u4f1a\u5728\u7ec8\u7aef\u754c\u9762\u5448\u73b0\uff0c\u8fd8\u4f1a\u5c06\u62a5\u6587\u4fdd\u5b58\u5230\u8be5\u7f51\u7edc\u8bbe\u5907\u7684\u5b58\u50a8\u7a7a\u95f4\u4e2d\uff0c\u4ee5test.cap\u7684\u540d\u5b57\u5b58\u653e\uff0c\u8fd9\u6837\u4fbf\u53ef\u4ee5\u518d\u5b8c\u6210\u6293\u5305\u540e\uff0c\u5c06\u8be5\u6587\u4ef6\u4e0b\u8f7d\u5230\u7ba1\u7406PC\u5e76\u901a\u8fc7\u6293\u5305\u8f6f\u4ef6\u66f4\u52a0\u76f4\u89c2\u5730\u5206\u6790\u6355\u83b7\u7684\u62a5\u6587\u3002 \u518d\u8005\uff0c\u5728**capture-packet**\u547d\u4ee4\u4e2d\u4f7f\u7528**timeout**\u5173\u952e\u5b57\uff0c\u8fd8\u53ef\u5b9a\u4e49\u62a5\u6587\u6355\u83b7\u7684\u8d85\u65f6\u65f6\u95f4\uff1b\u4f7f\u7528**vlan**\u5173\u952e\u5b57\uff0c \u53ef\u4ee5\u6307\u5b9a\u6355\u83b7\u7684vlan\u3002\u8be5\u547d\u4ee4\u76ee\u524d\u53ea\u652f\u6301\u6355\u83b7\u63a5\u53e3\u5165\u65b9\u5411\u62a5\u6587\uff0c\u4e0d\u652f\u6301\u6355\u83b7\u63a5\u53e3\u51fa\u65b9\u5411\u62a5\u6587\u3002\u6355\u83b7\u7684\u62a5\u6587\u6709\u901f\u7387\u9650\u5236\uff0c\u7f3a\u7701\u503c\u662f64kbps\uff0c\u5982\u679c\u6709\u7a81\u53d1\u6d41\u91cf\uff0c\u8d85\u8fc7\u6355\u83b7\u62a5\u6587\u7684\u901f\u7387\u9650\u5236\uff0c\u53ef\u80fd\u4f1a\u5b58\u5728\u4e22\u5305\u73b0\u8c61\u3002\u6700\u540e\uff0c\u8bbe\u5907\u4e0d\u652f\u6301\u6355\u83b7BFD\u548c802.1ag\u3002 \u7aef\u53e3\u9694\u79bb \u57fa\u672c\u6982\u8ff0 \u00b6 \u4e0a\u56fe\u4e2d\uff0cPC1\u30012\u30013\u540c\u5c5e\u4e00\u4e2aVLAN\uff08\u5047\u8bbe\u662fVLAN10\uff09\uff0c\u4f7f\u7528\u76f8\u540c\u7684IP\u5b50\u7f51\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e09\u53f0PC\u53ef\u4e92\u76f8\u8bbf\u95ee\uff0c\u8fd9\u662f\u5178\u578b\u7684\u4e8c\u5c42\u4e92\u8bbf\u3002\u73b0\u5728\u6709\u8fd9\u4e48\u4e00\u4e2a\u9700\u6c42\uff0c\u5728\u4e0d\u4fee\u6539IP\u5b50\u7f51\u53caVLAN\u89c4\u5212\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u5f97PC1- PC2\u4e4b\u95f4\u65e0\u6cd5\u4e92\u8bbf\uff0c\u800cPC1\u4e0ePC3\u53ef\u4e92\u8bbf\u3001PC2\u4e0ePC3\u53ef\u4e92\u8bbf\u3002\u8fd9\u5c31\u53ef\u4ee5\u7528\u5230\u7aef\u53e3\u9694\u79bb\u7279\u6027\u3002 \u8fd9\u91cc\u9700\u8981\u7528\u5230\u7aef\u53e3\u9694\u79bb\u7ec4\u7684\u6982\u5ff5\uff0c\u4ea4\u6362\u673a\u7684\u7aef\u53e3\u53ef\u4ee5\u52a0\u5165\u5230\u7279\u5b9a\u7684\u9694\u79bb\u7ec4\u4e2d\uff0c\u540c\u4e00\u7aef\u53e3\u9694\u79bb\u7ec4\u7684\u7aef\u53e3\u4e4b\u95f4\u4e92\u76f8\u9694\u79bb\uff0c\u4e0d\u540c\u7aef\u53e3\u9694\u79bb\u7ec4\u7684\u7aef\u53e3\u4e4b\u95f4\u4e0d\u9694\u79bb\u3002\u56e0\u6b64\u8981\u5b9e\u73b0\u4e0a\u8ff0\u9700\u6c42\uff0c\u914d\u7f6e\u7684\u601d\u8def\u975e\u5e38\u7b80\u5355\uff0c\u5728\u4ea4\u6362\u673a\u4e0a\u5c06\u7aef\u53e31\u30012\u653e\u7f6e\u5728\u540c\u4e00\u9694\u79bb\u7ec4\u4e2d\uff0c\u7aef\u53e33\u4e0d\u505a\u9694\u79bb\u7ec4\u914d\u7f6e\u6216\u8005\u653e\u5165\u53e6\u4e00\u4e2a\u9694\u79bb\u7ec4\u4e2d\uff0c\u7136\u540e\u5f00\u542f\u7aef\u53e3\u9694\u79bb\u7279\u6027\u5373\u53ef\u3002 \u5b9e\u9a8c\u9a8c\u8bc1 \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cPC1\u3001PC2\u3001PC3\u540c\u5c5eVLAN10\u3001\u540c\u5c5e1.1.1.0/24\u5b50\u7f51\uff0cIP\u5730\u5740\u5982\u4e0a\u56fe\u6240\u793a\u3002\u914d\u7f6e\u7aef\u53e3\u9694\u79bb\uff0c \u4f7f\u5f97PC1\u4e0ePC2\u65e0\u6cd5\u4e92\u8bbf\uff1bPC1\u4e0ePC3\uff0cPC2\u4e0ePC3\u53ef\u4e92\u8bbf\u3002 \u4ea4\u6362\u673a\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u68c0\u67e5\u4e00\u4e0b\uff1a \u5c06\u7aef\u53e31\u53ca\u7aef\u53e32\u90fd\u52a0\u5165\u9694\u79bb\u7ec41\uff0c\u8fd9\u6837PC1\u53caPC2\u5c31\u4e8c\u5c42\u9694\u79bb\u4e86\uff0c\u4e5f\u5c31\u65e0\u6cd5\u4e92\u8bbf\u4e86\u3002\u4f46\u662fPC1\u53caPC2\u90fd \u80fd\u591f\u4e0ePC3\u4e92\u8bbf\u3002**Port-isolate mode l2**\u8fd9\u6761\u547d\u4ee4\u662f\u5c06\u9694\u79bb\u6a21\u5f0f\u8bbe\u7f6e\u4e3a\u4e8c\u5c42\u9694\u79bb\u4e09\u5c42\u4e0d\u9694\u79bb\u3002\u6240\u8c13\u7684\u4e09\u5c42\u4e0d\u9694\u79bb\u6307\u7684\u662f\u540c\u4e00\u4e2a\u9694\u79bb\u7ec4\u7684\u8282\u70b9\u4e4b\u95f4\u4ecd\u7136\u80fd\u591f\u901a\u8fc7\u4e09\u5c42\u8fdb\u884c\u4e92\u8bbf\uff0c\u4f8b\u5982\uff1a PC1\u7684IP\u4e3a1.1.1.1\uff0c\u7f51\u5173\u4e3avlanif10\u7684IP 1.1.1.254\uff0cPC2\u7684IP\u4e3a2.2.2.2\uff0c\u7f51\u5173\u4e3avlanif10\u7684IP 2.2.2.254\uff0c Vlanif10\u914d\u7f6e\u4e86\u4e24\u4e2aIP\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u540c\u4e00\u4e2aVLAN\u6211\u4eec\u7528\u4e86\u4e24\u4e2aIP\u5b50\u7f51\u3002\u90a3\u4e48\u7aef\u53e31\u4e0e\u7aef\u53e32\u73b0\u5728\u867d\u7136\u662f\u4e8c\u5c42\u9694\u79bb\uff0cARP\u5565\u7684\u65e0\u6cd5\u900f\u8fc7\u6765\uff0c\u4f46\u662fPC1\u4e0ePC2\u4ecd\u7136\u80fd\u591f\u501f\u52a9\u81ea\u5df1\u7684\u7f51\u5173\u5b9e\u73b0\u4e09\u5c42\u4e92\u8bbf\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u4e8c\u5c42\u9694\u79bb\u4f46\u662f\u4e09\u5c42\u4e0d\u9694\u79bb\u3002\u90a3\u4e48\u5982\u679c\u8981\u5f7b\u5e95\u5c06\u7aef\u53e31\u53ca\u7aef\u53e32\u9694\u79bb\u5462\uff1f\u4f7f\u7528\u7cfb\u7edf\u89c6\u56fe\u547d\u4ee4**port-isolate mode all**\u5373\u53ef\u3002 \u8def\u7531\u57fa\u7840 \u00b6 IP \u8def\u7531\u57fa\u7840 \u4ec0\u4e48\u662f IP \u8def\u7531 \u5728\u4e00\u4e2aIP\u7f51\u7edc\u4e2d\uff0c\u8def\u7531\uff08Routing\uff09\u662f\u4e2a\u975e\u5e38\u975e\u5e38\u57fa\u672c\u7684\u6982\u5ff5\u3002\u7f51\u7edc\u7684\u57fa\u672c\u529f\u80fd\u662f\u4f7f\u5f97\u5904\u4e8e\u7f51\u7edc\u4e2d\u7684\u4e24\u4e2aIP \u8282\u70b9\u80fd\u591f\u4e92\u76f8\u901a\u4fe1\uff0c\u800c\u901a\u4fe1\u5b9e\u9645\u4e0a\u5c31\u662f\u6570\u636e\u4ea4\u4e92\u7684\u8fc7\u7a0b\uff0c\u6570\u636e\u4ea4\u4e92\u5219\u9700\u8981\u7f51\u7edc\u8bbe\u5907\u5e2e\u52a9\u6211\u4eec\u6765\u5c06\u6570\u636e\u5728\u4e24\u4e2a\u901a\u4fe1\u8282\u70b9\u4e4b\u95f4\u8fdb\u884c\u4f20\u8f93\u3002\u5f53\u8def\u7531\u5668\uff08\u6216\u8005\u5176\u4ed6\u4e09\u5c42\u8bbe\u5907\uff09\u6536\u5230\u4e00\u4e2aIP\u6570\u636e\u5305\u65f6\uff0c\u8def\u7531\u5668\u4f1a\u627e\u51fa\u62a5\u6587\u4e2d\u7684IP \u5934\u91cc\u7684\u76ee\u7684IP\u5730\u5740\uff0c\u7136\u540e\u62ff\u7740\u76ee\u7684IP\u5730\u5740\u5230\u81ea\u5df1\u7684\u8def\u7531\u8868\uff08Routing Table\uff09\u4e2d\u8fdb\u884c\u67e5\u8be2\uff0c\u627e\u5230\u201c\u6700\u5339\u914d\u201d\u7684\u8def\u7531\u6761\u76ee\u540e\uff0c\u5c06\u6570\u636e\u5305\u6839\u636e\u8def\u7531\u6761\u76ee\u6240\u6307\u793a\u7684\u51fa\u63a5\u53e3\u6216\u4e0b\u4e00\u8df3IP\u8f6c\u53d1\u51fa\u53bb\uff0c\u8fd9\u5c31\u662f\u8def\u7531\u3002 \u6bcf\u53f0\u8def\u7531\u5668\u90fd\u4f1a\u5728\u672c\u5730\u7ef4\u62a4\u4e00\u4e2a\u8def\u7531\u8868\uff0c\u8def\u7531\u8868\u4e2d\u88c5\u8f7d\u7740\u8def\u7531\u5668\u901a\u8fc7\u5404\u79cd\u9014\u5f84\u83b7\u77e5\u7684\u8def\u7531\u6761\u76ee\uff08Route\uff09\uff0c \u6bcf\u4e00\u6761\u8def\u7531\u6761\u76ee\u53ef\u80fd\u5305\u542b\uff1a\u76ee\u7684\u7f51\u7edc\u53f7\u53ca\u63a9\u7801\u957f\u5ea6\u3001\u8def\u7531\u534f\u8bae\u7c7b\u578b\u3001\u51fa\u63a5\u53e3\u6216\u4e0b\u4e00\u8df3IP\u3001\u8def\u7531\u534f\u8bae\u4f18\u5148\u7ea7\u3001\u5f00\u9500\u7b49\u4fe1\u606f\u5143\u7d20\u3002\u8def\u7531\u5668\u901a\u8fc7\u76f4\u8fde\u3001\u9759\u6001\u7684\u6216\u8005\u52a8\u6001\u7684\u65b9\u5f0f\u83b7\u53d6\u8def\u7531\u6761\u76ee\u5e76\u7ef4\u62a4\u81ea\u5df1\u7684\u8def\u7531\u8868\uff0c\u8def\u7531\u8868\u662f\u6bcf\u53f0\u652f\u6301\u8def\u7531\u529f\u80fd\u7684\u8bbe\u5907\u8fdb\u884c\u6570\u636e\u8f6c\u53d1\u7684\u4f9d\u636e\u548c\u57fa\u7840\uff0c\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u4efb\u4f55\u4e00\u53f0\u652f\u6301\u8def\u7531\u529f\u80fd\u7684\u8bbe\u5907\u8981\u6267\u884c\u6570\u636e\u8f6c\u53d1\u6216\u8def\u7531\u7684\u52a8\u4f5c\uff0c\u5c31\u5fc5\u987b\u62e5\u6709\u53ca\u7ef4\u62a4\u4e00\u5f20\u8def\u7531\u8868\u3002 IP \u8def\u7531\u8868 \u4efb\u4f55\u4e00\u53f0\u652f\u6301\u8def\u7531\u529f\u80fd\u7684\u8bbe\u5907\u8981\u6267\u884c\u6570\u636e\u8f6c\u53d1\u6216\u8def\u7531\u7684\u52a8\u4f5c\uff0c\u5c31\u5fc5\u987b\u62e5\u6709\u53ca\u7ef4\u62a4\u4e00\u5f20\u8def\u7531\u8868\uff0c\u8def\u7531\u8868\u53ef\u4ee5\u7406\u89e3\u4e3a\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u5230\u7279\u5b9a\u76ee\u7684\u5730\u6240\u4f9d\u636e\u7684\u4e00\u5f20\u201c\u5730\u56fe\u201d\u3002\u5728\u6211\u53f8\u4e09\u5c42\u8bbe\u5907\uff08\u5982\u8def\u7531\u5668\u3001\u9632\u706b\u5899\u3001\u4e09\u5c42\u4ea4\u6362\u673a\u7b49\uff09\u4e0a\u67e5\u770bIP\u8def\u7531\u8868\u7684\u547d\u4ee4\u5982\u4e0b\uff1a [Huawei] display ip routing-table \u00b6 \u6bcf\u4e2a\u8def\u7531\u6761\u76ee\u5fc5\u987b\u5305\u62ec\u4e0b\u9762\u51e0\u4e2a\u4fe1\u606f\u5143\u7d20\uff1a **\u76ee\u7684\u7f51\u7edc/\u63a9\u7801\uff1a**\u4e5f\u88ab\u79f0\u4e3a\u8def\u7531\u524d\u7f00\uff0c\u8fd9\u662f\u8def\u7531\u6761\u76ee\u6240\u5173\u8054\u7684\u76ee\u7684\u7f51\u7edc\u5730\u5740\u53ca\u7f51\u7edc\u63a9\u7801\u3002\u4e00\u6761\u5b8c\u6574\u7684\u8def\u7531\u524d\u7f00\u7531\uff1a\u7f51\u7edc\u5730\u5740+\u524d\u7f00\u957f\u5ea6\uff08\u6216\u8005\u7f51\u7edc\u63a9\u7801\uff09\u6784\u6210\uff0c\u4e24\u8005\u7f3a\u4e00\u4e0d\u53ef\uff0c\u4f8b\u5982192.168.1.0/24\u4e0e192.168.1.0/25\uff0c \u867d\u7136\u7f51\u7edc\u5730\u5740\u76f8\u540c\uff0c\u90fd\u662f192.168.1.0\uff0c\u4f46\u662f\u4e24\u8005\u7edd\u5bf9\u662f\u4e24\u6761\u4e0d\u540c\u7684\u8def\u7531\uff0c\u56e0\u4e3a\u4ed6\u4eec\u7684\u524d\u7f00\u957f\u5ea6\u4e0d\u76f8\u540c\u3002 **\u534f\u8bae\u7c7b\u578b\uff1a**\u672c\u6761\u8def\u7531\u662f\u901a\u8fc7\u4ec0\u4e48\u9014\u5f84\u5b66\u4e60\u5230\u7684\uff0c\u4f8b\u5982\u662f\u76f4\u8fde\u7684\uff0c\u6216\u662f\u9759\u6001\u7684\uff0c\u6216\u8005\u662f\u901a\u8fc7OSPF\u3001IS-IS\u3001 EIGRP\u3001BGP\u7b49\u52a8\u6001\u8def\u7531\u5b66\u4e60\u5230\u7684\u3002 \u4f18\u5148\u7ea7 \uff1a\u4e0e\u534f\u8bae\u7c7b\u578b\u5bf9\u5e94\uff0c\u8def\u7531\u8868\u4e2d\u8def\u7531\u7684\u83b7\u53d6\u6765\u6e90\u6709\u591a\u79cd\uff0c\u6bcf\u79cd\u534f\u8bae\u7c7b\u578b\u5bf9\u5e94\u4e0d\u540c\u7684\u4f18\u5148\u7ea7\uff0c\u4f18\u5148\u7ea7\u503c\u8d8a\u5c0f\u5219\u8def\u7531\u8d8a\u4f18\u3002\u5f53\u4e00\u53f0\u8def\u7531\u5668\u540c\u65f6\u4ece\u591a\u79cd\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\u5b66\u4e60\u5230\u53bb\u5f80\u540c\u4e00\u4e2a\u76ee\u7684\u5730\u7684\u8def\u7531\u65f6\uff0c\u5b83\u5c06\u4f18\u9009\u8def\u7531\u534f\u8bae\u4f18\u5148\u7ea7\u503c\u6700\u5c0f\u7684\u90a3\u6761\u8def\u7531\u3002 **\u5f00\u9500\uff1a**\u8def\u7531\u7684\u5ea6\u91cf\u503c\uff0c\u5728\u8bb8\u591a\u4e66\u7c4d\u6216\u6587\u6863\u4e2d\u4e5f\u4f7f\u7528metric\u6765\u63cf\u8ff0\u3002\u76f4\u8fde\u53ca\u9759\u6001\u8def\u7531\u7684Cost\u4e3a0\u3002\u901a\u8fc7\u52a8\u6001\u8def\u7531\u534f\u8bae\u5b66\u4e60\u5230\u7684Cost\u5219\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u800c\u5b9a\u3002\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\u8ba1\u7b97Cost\u7684\u65b9\u6cd5\u4e0d\u540c\u3002 \u4e0b\u4e00\u8df3 \uff1a\u53bb\u5f80\u76ee\u6807\u7f51\u7edc\u7684\u4e0b\u4e00\u8df3IP\u5730\u5740\u3002 \u51fa\u63a5\u53e3 \uff1a\u53bb\u5f80\u76ee\u6807\u7f51\u7edc\u4ece\u672c\u8bbe\u5907\u7684\u54ea\u4e2a\u63a5\u53e3\u51fa\u53bb\u3002 \u8def\u7531\u4f18\u5148\u7ea7 \u8def\u7531\u5668\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u9014\u5f84\u83b7\u77e5\u8def\u7531\u6761\u76ee\uff1a\u5982\u901a\u8fc7\u9759\u6001\u624b\u5de5\u914d\u7f6e\uff0c\u6216\u901a\u8fc7\u5404\u79cd\u52a8\u6001\u8def\u7531\u534f\u8bae\u5b66\u4e60\u7b49\u7b49\u3002\u5f53\u8def\u7531\u5668\u4ece\u591a\u79cd\u4e0d\u7528\u7684\u534f\u8bae\u83b7\u77e5\u53bb\u5f80\u540c\u4e00\u4e2a\u76ee\u7684\u5730\u7684\u8def\u7531\u65f6\uff0c\u8def\u7531\u5668\u4f1a\u6bd4\u8f83\u8fd9\u4e9b\u8def\u7531\u7684\u4f18\u5148\u7ea7\uff08Preference\uff09\uff0c\u4f18\u9009Preference\u503c\u6700\u5c0f\u7684\u8def\u7531\u3002\u5982\u679cPreference\u503c\u76f8\u7b49\uff0c\u4f8b\u5982\u662f\u540c\u79cd\u8def\u7531\u534f\u8bae\u83b7\u53d6\u5230\u7684\u8def\u7531\uff0c\u5219\u8fdb\u4e00\u6b65\u6bd4\u8f83\u5f00\u9500\u503c\uff08Cost\uff09\uff0c\u5f53\u7136\uff0c\u8fd9\u5176\u4e2d\u8fd8\u7275\u6d89\u5230\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\u5185\u5728\u7684\u5de5\u4f5c\u673a\u5236\u95ee\u9898\uff0c\u8fd9\u5c31\u8981\u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\u5177\u4f53\u8ba8\u8bba\u4e86\uff0c\u6211\u4eec\u8fd9\u91cc\u6682\u65f6\u4e0d\u8ba8\u8bba\u8fd9\u4e48\u6df1\u5165\u3002 \u5982\u4e0b\u56fe\uff0cR3\u4e0eR1\u8fd0\u884c\u7684\u662fRIP\u8def\u7531\u534f\u8bae\uff0cR3\u53c8\u901a\u8fc7OSPF\u4e0eR2\u5efa\u7acb\u90bb\u63a5\u5173\u7cfb\u3002R3\u540c\u65f6\u4eceRIP\u53caOSPF\u5b66\u4e60\u5230\u4e86\u53bb\u5f80\u76ee\u7684\u57301.1.1.0/24\u7684\u8def\u7531\uff0c\u5b83\u6700\u7ec8\u4f1a\u5c06OSPF\u7684\u8def\u7531\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\uff0c\u4e5f\u5c31\u662f\u5c06R2\u4f5c\u4e3a\u5b9e\u9645\u53bb\u5f80 1.1.1.0/24\u7684\u4e0b\u4e00\u8df3\uff0c\u56e0\u4e3aOSPF\u534f\u8bae\u7684\u4f18\u5148\u7ea7\u503c\u6bd4RIP\u8981\u5c0f\u2014\u2014\u4f18\u5148\u7ea7\u66f4\u9ad8\u3002\u5f53\u7136\uff0c\u5982\u679c\u6b64\u65f6R2\u53d1\u751f\u6545\u969c\uff0c \u90a3\u4e48R3\u8def\u7531\u8868\u4e2d\u8be5\u6761OSPF\u8def\u7531\u5931\u6548\uff0c\u5219R3\u5c06RIP\u8def\u7531\u52a0\u8f7d\u5230\u8def\u7531\u8868\u4e2d\u3002 \u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\uff0c\u5bf9\u5e94\u7684\u4f18\u5148\u7ea7\u89c1\u4e0b\u8868\uff0c\u8fd9\u662f\u4e2a\u4f17\u6240\u5468\u77e5\u7684\u7ea6\u5b9a\uff08\u4e0d\u540c\u7684\u5382\u5bb6\uff0c\u53ef\u80fd\u6709\u6240\u4e0d\u540c\uff0c\u4e0b\u8868\u4e2d\u7f57\u5217\u7684\u662f\u6211\u53f8\u7684\u4ea7\u54c1\u7279\u6027\uff09\uff1a \u8def\u7531\u534f\u8bae\u6216\u8def\u7531\u79cd\u7c7b \u4f18\u5148\u7ea7 DIRECT 0 OSPF 10 IS-IS 15 STATIC 60 RIP 100 OSPF ASE 150 OSPF NSSA 150 IBGP 255 EBGP 255 \u9759\u6001\u8def\u7531 \u5173\u4e8e\u9759\u6001\u8def\u7531 \u00b6 \u8def\u7531\u5668\u7684\u5929\u804c\uff0c\u5c31\u662f\u7ef4\u62a4\u8def\u7531\u8868\u4ee5\u53ca\u4f9d\u636e\u8def\u7531\u8868\u8fdb\u884c\u6570\u636e\u8f6c\u53d1\u3002\u800c\u8def\u7531\u8868\u4e2d\u5305\u542b\u901a\u8fc7\u5404\u79cd\u9014\u5f84\u5b66\u4e60\u5230\u7684\u8def\u7531\u8868\u9879\uff08\u8def\u7531\u6761\u76ee\uff09\uff0c\u4e3b\u8981\u6709\u5982\u4e0b\u51e0\u79cd\u9014\u5f84\uff1a \u76f4\u8fde\u8def\u7531\u81ea\u52a8\u5b66\u4e60\uff1b \u901a\u8fc7\u624b\u5de5\u7684\u65b9\u5f0f\u4e3a\u8bbe\u5907\u6dfb\u52a0\u9759\u6001\u8def\u7531\u6761\u76ee\uff1b \u4f7f\u7528\u52a8\u6001\u8def\u7531\u534f\u8bae\u4f7f\u5f97\u8bbe\u5907\u4e4b\u95f4\u80fd\u591f\u8fdb\u884c\u8def\u7531\u4fe1\u606f\u7684\u66f4\u65b0\u53ca\u5b66\u4e60\uff0c\u52a8\u6001\u5730\u7ef4\u62a4\u8def\u7531\u8868\u9879\u3002\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\uff1a PC1\u7684\u7f51\u5173\u8bbe\u7f6e\u4e3a172.16.1.254\uff0c\u4e5f\u5c31\u662fR1\u7684GE0/0/0\u53e3IP\uff1bPC2\u7684\u7f51\u5173\u8bbe\u7f6e\u4e3a172.16.2.254\u4e5f\u5c31\u662fR2 \u7684GE0/0/0\u53e3IP\u3002\u5728\u521d\u59cb\u60c5\u51b5\u4e0b\uff0c\u5bf9\u4e8eR1\u800c\u8a00\uff0c\u5f53\u63a5\u53e3UP\u4ee5\u540e\uff0c\u8def\u7531\u5668\u4f1a\u81ea\u52a8\u5b66\u4e60\u6d3b\u8dc3\u7684\u63a5\u53e3\u6240\u5728\u7f51\u7edc\u7684\u7f51\u7edc\u5730\u5740\u53ca\u63a9\u7801\u5e76\u4e14\u7ef4\u62a4\u81ea\u5df1\u7684\u8def\u7531\u8868\uff0c\u4f8b\u5982R1\u7684\u8def\u7531\u8868\uff0c\u53ef\u80fd\u50cf\u4e0b\u9762\u8fd9\u6837\uff08\u7701\u7565\u4e86\u65e0\u5173\u4fe1\u606f\uff09\uff1a \u76ee\u7684\u7f51\u7edc/\u63a9\u7801 \u534f\u8bae \u4f18\u5148\u7ea7 \u51fa\u63a5\u53e3 \u4e0b\u4e00\u8df3 172.16.1.0/24 Direct 0 GE0/0/0 172.16.1.254 172.16.100.0/24 Direct 0 GE0/0/1 172.16.100.1 R2\u7684\u8def\u7531\u8868\u7c7b\u4f3c\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002\u73b0\u5728\u5f53PC1\u8981\u8bbf\u95eePC2\u65f6\uff0c\u7531\u4e8ePC1\u7684\u7f51\u5173\u8bbe\u7f6e\u4e3aR1\u7684GE0/0/0\u53e3\u7684 IP\u5730\u5740\uff0c\u4e8e\u662fPC1\u5c06\u76ee\u7684\u5730\u5740\u4e3a172.16.2.1\u7684IP\u6570\u636e\u5305\u53d1\u9001\u7ed9\u5b83\u7684\u7f51\u5173\u3002\u800c\u5f53R1\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u65f6\uff0cR1 \u53d1\u73b0\u8fd9\u4e2a\u6570\u636e\u5305\u7684\u76ee\u7684\u5730\u5740\u662f172.16.2.1\uff0c\u5b83\u5c31\u53bb\u67e5\u8be2\u81ea\u5df1\u7684\u8def\u7531\u8868\uff0c\u7ed3\u679c\u53d1\u73b0\u8def\u7531\u8868\u4e2d\uff0c\u5e76\u6ca1\u6709\u5339\u914d 172.16.2.1\u7684\u6761\u76ee\uff0c\u56e0\u6b64\u6570\u636e\u5305\u88ab\u4e22\u5f03\uff0c\u5230\u76ee\u524d\u4e3a\u6b62PC1\u662f\u65e0\u6cd5\u4e0ePC2\u4e92\u8bbf\u7684\u3002\u90a3\u4e48\u5982\u4f55\u624d\u80fd\u4f7fR1\u6b63\u5e38\u8f6c\u53d1\u8fd9\u4e2a\u6570\u636e\u5305\u5462\uff1f\u5f53\u7136\u9700\u8981R1\u7684\u8def\u7531\u8868\u4e2d\u6709\u76f8\u5173\u7684\u6761\u76ee\u6765\u505a\u6307\u793a\u3002 \u6700\u7b80\u5355\u7684\u4e00\u79cd\u65b9\u5f0f\u662f\uff0c\u901a\u8fc7\u624b\u5de5\u7684\u65b9\u5f0f\u4e3aR1\u6dfb\u52a0\u53bb\u5f80172.16.2.0/24\u7684\u8def\u7531\u6761\u76ee\uff0c\u8fd9\u79cd\u65b9\u5f0f\u6dfb\u52a0\u7684\u8def\u7531\u79f0\u4e3a\u9759\u6001\u8def\u7531\u3002 \u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\u7684\u547d\u4ee4\u975e\u5e38\u7b80\u5355\uff1a [Quidway] ip route-static 172.16.2.0 24 172.16.100.2 \u547d\u4ee4\u4e2d\u7684\u7ea2\u8272\u5b57\u4f53\u90e8\u5206\u662f\u8fd9\u6761\u8def\u7531\u7684\u76ee\u7684\u7f51\u7edc\u5730\u5740\uff08172.16.2.0\uff09\u53ca\u63a9\u7801\u957f\u5ea6\uff0824\uff09\uff1b\u84dd\u8272\u5b57\u4f53\u90e8\u5206\u662f \u53bb\u5f80\u8fd9\u4e2a\u76ee\u7684\u5730\u7684\u201c\u4e0b\u4e00\u8df3IP\u5730\u5740\u201d\u3002\u4e8e\u662fR1\u7684\u8def\u7531\u8868\u53d8\u6210\u4e0b\u9762\u8fd9\u4e2a\u6837\u5b50\uff1a \u6211\u4eec\u770b\u5230\uff0cR1\u7684\u8def\u7531\u8868\u91cc\u51fa\u73b0\u4e86\u4e00\u4e2a\u65b0\u589e\u7684\u6761\u76ee\uff0c\u8def\u7531\u524d\u7f00\u662f172.16.2.0/24\uff0c\u534f\u8bae\u7c7b\u578b\u4e3a\u201c\u9759\u6001\u201d\uff0c \u4f18\u5148\u7ea7\u4e3a60\uff0c\u51fa\u63a5\u53e3\u4e3aGE0/0/1\uff0c\u53bb\u5f80\u76ee\u7684\u5730\u7684\u4e0b\u4e00\u8df3IP\u662f172.16.100.2\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5f53R1\u6536\u5230PC1\u53d1\u5f80172.16.2.1\u7684\u6570\u636e\u5305\u65f6\uff0c\u5b83\u67e5\u770b\u8def\u7531\u8868\uff0c\u53d1\u73b0\u8def\u7531\u8868\u4e2d\u6709\u4e00\u4e2a\u6761\u76ee\u5339\u914d\uff0c\u4e8e\u662fR1\u5c06\u8be5\u6570\u636e\u5305\u4e22\u7ed9\u8be5\u6761\u8def\u7531\u6307\u793a\u7684\u4e0b\u4e00\u8df3172.16.100.2\uff0c\u8fd9\u4e2a\u6570\u636e\u5305\u88ab\u8f6c\u53d1\u5230\u4e86R2\uff0c\u518d\u7531R2\u67e5\u5b83\u7684\u8def\u7531\u8868\uff0cR2\u53d1\u73b0\u6570\u636e\u5305\u7684\u76ee\u7684\u5730172.16.2.1\u5728\u672c\u5730\u8def\u7531\u8868\u4e2d\u6709\u8def\u7531\u6761\u76ee\u5339\u914d\uff0c\u800c\u4e14\u662f\u76f4\u8fde\u7f51\u7edc\uff0c\u56e0\u6b64R2\u5c06\u6570\u636e\u5305\u6839\u636e\u8def\u7531\u6761\u76ee\u7684\u6307\u793a\u4eceGE0/0/0\u53e3\u53d1\u9001\u51fa\u53bb\uff0c\u6700\u7ec8PC2\u6536\u5230\u4e86\u8fd9\u4e2a\u6570\u636e\u5305\u3002 \u73b0\u5728\u95ee\u9898\u6765\u4e86\uff0c\u6211\u4eec\u5728R1\u4e0a\u589e\u52a0\u4e86\u8fd9\u6761\u9759\u6001\u8def\u7531\u540e\uff0cPC1\u4e0ePC2\u5c31\u80fd\u591f\u4e92\u901a\u4e86\u4e48\uff1f\u7b54\u6848\u662f\u5426\u5b9a\u7684\uff0c\u4e3a\u4ec0\u4e48\uff1f\u56e0\u4e3a\u4e24\u4e2a\u8282\u70b9\u4e4b\u95f4\u7684\u6570\u636e\u901a\u4fe1\u5f80\u5f80\u662f\u53cc\u5411\u7684\uff0c\u6709\u53bb\u5f97\u6709\u56de\uff0c\u5728R1\u4e0a\u589e\u52a0\u53bb\u5f80172.16.2.0/24\u7684\u9759\u6001\u8def\u7531\u540e\uff0cPC1\u53d1\u5f80PC2\u7684\u6570\u636e\u5305\u662f\u80fd\u591f\u88ab\u8f6c\u53d1\u5230PC2\u7684\uff0c\u4f46\u662f\u5982\u679c\u6b64\u523bPC2\u8981\u56de\u9001\u62a5\u6587\u5462\uff1fPC2\u56de\u9001\u7684\u6570\u636e\u5305\u76ee\u7684IP\u5730\u5740\u5c31\u662f172.16.1.1\uff0c\u8fd9\u4e2a\u6570\u636e\u5305\u9996\u5148\u88abPC2\u53d1\u5f80\u81ea\u5df1\u7684\u7f51\u5173\u4e5f\u5c31\u662fR2\uff0cR2\u67e5\u770b\u8def\u7531\u8868\uff0c\u5374\u6ca1\u6709\u53d1\u73b0\u5339\u914d\u76ee\u7684\u5730\u5740172.16.1.1\u7684\u8def\u7531\uff0c\u4e8e\u662f\u5c31\u4e22\u5305\u3002 \u56e0\u6b64\uff0c\u4e3a\u4e86\u4f7f\u5f97PC1\u4e0ePC2\u4e4b\u95f4\u80fd\u591f\u76f8\u4e92\u901a\u4fe1\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u505a\u4e00\u6b65\u52a8\u4f5c\uff0c\u4e5f\u5c31\u662f\u5728R2\u4e0a\u4e5f\u589e\u52a0\u4e00\u6761\u8def\u7531\uff0c\u8def\u7531\u7684\u76ee\u7684\u5730\u662f172.16.1.0/24\u7f51\u7edc\uff0c\u4e0b\u4e00\u8df3\u5462\uff1f\u5f53\u7136\u5c31\u662f172.16.100.1\u4e86\u3002\u5982\u6b64\u4e00\u6765PC1\u53caPC2\u4e92\u76f8\u901a\u4fe1\u5c31\u6ca1\u6709\u95ee\u9898\u4e86\u3002 \u9759\u6001\u8def\u7531\u7684\u914d\u7f6e \u00b6 \u65b9\u6cd5\u4e00\uff1a\u5173\u8054\u4e0b\u4e00\u8df3IP\u7684\u65b9\u5f0f\uff1a \u00b6 [Quidway] ip route-static 172.16.2.0 24 172.16.100.2 \u7ea2\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u8be5\u8def\u7531\u6761\u76ee\u7684\u7f51\u7edc\u5730\u5740\uff1b \u84dd\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u8be5\u76ee\u7684\u7f51\u7edc\u7684\u7f51\u7edc\u63a9\u7801\u6216\u8005\u63a9\u7801\u957f\u5ea6\uff1b\u6b64\u590424\u7b49\u540c\u4e8e255.255.255.0\u3002\u7eff\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u53bb\u5f80\u8be5\u7f51\u7edc\u7684\u4e0b\u4e00\u8df3IP\u5730\u5740\uff1b \u65b9\u6cd5\u4e8c\uff1a\u5173\u8054\u51fa\u63a5\u53e3\u7684\u65b9\u5f0f\uff1a \u00b6 [Quidway] ip route-static 172.16.2.0 24 GigabitEthernet0/0/1 \u7ea2\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u8be5\u8def\u7531\u6761\u76ee\u7684\u7f51\u7edc\u5730\u5740\uff1b \u84dd\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u7f51\u7edc\u63a9\u7801\u6216\u8005\u63a9\u7801\u957f\u5ea6\uff1b \u7eff\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u53bb\u5f80\u8be5\u7f51\u7edc\u7684\u51fa\u63a5\u53e3\uff0c\u6ce8\u610f\uff0c\u5728\u534e\u4e3a\u8def\u7531\u5668\u4e0a\uff0c\u9759\u6001\u8def\u7531\u53ef\u5173\u8054\u51fa\u63a5\u53e3\u6216\u4e0b\u4e00\u8df3IP\uff0c\u6216\u4e24\u8005\u90fd\u5173\u8054\u3002\u5982\u679c\u8def\u7531\u7684\u51fa\u63a5\u53e3\u4e3a\u70b9\u5bf9\u70b9\u63a5\u53e3\uff08\u4f8b\u5982\u91c7\u7528HDLC\u6216PPP\u5c01\u88c5\u7684\u4e32\u884c\u63a5\u53e3\uff09\uff0c\u5219\u53ef\u53ea\u5173\u8054\u51fa\u63a5\u53e3\u3002\u4f46\u82e5\u51fa\u63a5\u53e3\u4e3a\u5e7f\u64ad\u591a\u8def\u8bbf\u95ee\u578b\u63a5\u53e3\uff0c\u4f8b\u5982\u4ee5\u592a\u7f51\u53e3\uff0c\u90a3\u4e48\u5c31\u5fc5\u987b\u5173\u8054\u4e0b\u4e00\u8df3\uff0c\u5982**ip route-static 172.16.2.0 24 GigabitEthernet0/0/1 172.16.100.2**\uff0c\u6216\u8005**ip route-static 172.16.2.0 24 172.16.100.2**\u3002 \u9759\u6001\u8def\u7531\u7b80\u5355\u5b9e\u9a8c \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0cSW1\u8fde\u63a5\u7740PC1\uff0cPC1\u5c5e\u4e8eVLAN10\uff0c\u4f7f\u7528\u7684\u7f51\u6bb5\u662f192.168.10.0/24\uff1bSW2\u8fde\u63a5\u7740 PC2\uff0cPC2\u5c5e\u4e8eVLAN20\uff0c\u4f7f\u7528\u7684\u7f51\u6bb5\u662f192.168.20.0/24\uff1bPC1\u53caPC2\u7684\u7f51\u5173\u5206\u522b\u4e3aSW1\u53caSW2\u3002\u4e24\u53f0\u4ea4\u6362\u673a\u901a\u8fc7VLAN200\u5b9e\u73b0\u4e09\u5c42\u5bf9\u63a5\uff0c\u8981\u6c42\u5b8c\u6210\u4ea4\u6362\u673a\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC1\u4e0ePC2\u80fd\u591f\u76f8\u4e92\u901a\u4fe1\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cPC1\u5373\u53ef\u4e0ePC2\u76f8\u4e92\u901a\u4fe1\u3002\u5728SW1\u4e0a\u68c0\u67e5\u4e00\u4e0b\u8def\u7531\u8868\uff1a \\<SW1>display ip routing-table Route Flags: R - relay, D - download to fib ------------------------------------------------------------------------------ Routing Tables: Public Destinations : 7 Routes : 7 Destination/Mask Proto Pre Cost Flags NextHop Interface 127.0.0.0/8 Direct 0 0 D 127.0.0.1 InLoopBack0 127.0.0.1/32 Direct 0 0 D 127.0.0.1 InLoopBack0 192.168.10.0/24 Direct 0 0 D 192.168.10.254 Vlanif10 192.168.10.254/32 Direct 0 0 D 127.0.0.1 Vlanif10 192.168.20.0/24 Static 60 0 RD 192.168.200.2 Vlanif200 192.168.200.0/30 Direct 0 0 D 192.168.200.1 Vlanif200 192.168.200.1/32 Direct 0 0 D 127.0.0.1 Vlanif200 \u5728\u4ee5\u4e0a\u8f93\u51fa\u4e2d\u80fd\u770b\u5230\u6211\u4eec\u914d\u7f6e\u7684\u9759\u6001\u8def\u7531\uff0cSW2\u540c\u7406\u3002 \u5f53\u7136\u6b64\u65f6\u5728SW1 \u4e0a\u4e5f\u53ef\u4ee5\u76f4\u63a5ping \u901aPC2 \uff0c \u4f46\u662f\u5b9e\u9645\u4e0a\uff0c SW1 \u5728ping PC2 \u65f6\uff0c \u62a5\u6587\u7684\u6e90IP \u5730\u5740\u662f192.168.200.1 \uff0c \u56e0\u6b64\u5982\u679c\u6211\u4eec\u8981\u9a8c\u8bc1192.168.10.0/24 \u7f51\u6bb5\u5230PC2 \u7684\u53ef\u8fbe\u6027\uff0c\u53ef\u4ee5\u5728SW1 \u6267\u884cping 192.168.20.1\u6d4b\u8bd5\u65f6\uff0c\u5f3a\u5236\u6307\u5b9a\u63a2\u6d4b\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u4e3a192.168.10.254\uff1a \u5728\u7f51\u7edc\u8bbe\u5907\u4e0a\uff0c\u6267\u884cping\u547d\u4ee4\u65f6\uff0c\u5173\u8054-a\u5173\u952e\u5b57\u53ef\u6307\u5b9aICMP\u63a2\u6d4b\u62a5\u6587\u7684\u6e90\u5730\u5740\uff08\u9700\u4e3a\u672c\u8bbe\u5907\u4e0a\u7684IP\u5730\u5740\uff09\u3002 \u9ed8\u8ba4\u8def\u7531\uff08\u7f3a\u7701\u8def\u7531\uff09 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5bf9\u4e8eR1\u800c\u8a00\uff0c\u5982\u679c\u8981\u5230\u8fbeR2\u6240\u76f4\u8fde\u7684172.16.1.0/24\u30012.0/24\u30013.0/24\u7f51\u7edc\uff0c\u5c31\u5fc5\u987b\u6709\u8def\u7531\u3002\u5982\u679c\u91c7\u7528\u9759\u6001\u8def\u7531\u7684\u65b9\u5f0f\u4e3aR1\u6dfb\u52a0\u8def\u7531\uff0c\u4e09\u4e2a\u76ee\u7684\u7f51\u7edc\u5c31\u9700\u8981\u914d\u7f6e\u4e09\u6761\u9759\u6001\u8def\u7531\u3002\u8fd9\u6837\u4e0d\u4ec5\u4ec5\u589e\u52a0\u4e86\u914d\u7f6e\u5de5\u4f5c\u91cf\uff0c\u53e6\u4e00\u65b9\u9762\uff0c\u4e5f\u589e\u52a0\u4e86R1\u7684\u8d1f\u62c5\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u7ef4\u62a4\u66f4\u591a\u7684\u8def\u7531\u6761\u76ee\uff0c\u800c\u627f\u8f7d\u8def\u7531\u6761\u76ee\u7684\u8def\u7531\u8868\u662f\u9700\u8981\u5360\u7528\u8bbe\u5907\u5185\u5b58\u8d44\u6e90\u7684\u3002\u56e0\u6b64\u4ece\u7f51\u7edc\u8bbe\u8ba1\u53ca\u4f18\u5316\u7684\u89d2\u5ea6\uff0c\u6211\u4eec\u5f80\u5f80\u5728\u4fdd\u8bc1\u7f51\u7edc\u8def\u7531\u53ef\u8fbe\u6027\u7684\u540c\u65f6\uff0c\u5c3d\u91cf\u51cf\u5c11\u8def\u7531\u5668\u8def\u7531\u8868\u7684\u6761\u76ee\u6570\u91cf\u3002 \u5728\u8fd9\u4e2a\u73af\u5883\u4e2d\uff0c\u7531\u4e8eR1\u4ec5\u6709\u4e00\u6761\u51fa\u53e3\u7ebf\u8def\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5728R1\u4e0a\u914d\u7f6e\u4e00\u6761**\u9ed8\u8ba4\u8def\u7531\uff08Default route\uff09**\uff0c\u4e0b\u4e00\u8df3\u4e3aR2\uff0c\u5982\u6b64\u5373\u53ef\u5728\u4fdd\u8bc1R1\u5230R2\u540e\u65b9\u4e09\u4e2a\u7f51\u7edc\u53ef\u8fbe\u7684\u540c\u65f6\uff0c\u8def\u7531\u6761\u76ee\u8fbe\u5230\u6700\u7b80\u3002\u5177\u4f53\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u9ed8\u8ba4\u8def\u7531\u7684\u7f51\u7edc\u5730\u5740\u548c\u63a9\u7801\u90fd\u662f\u51680\uff0c\u53ef\u5339\u914d\u4efb\u610f\u76ee\u7684\u7f51\u7edc\u524d\u7f00\uff0c\u53ef\u4f5c\u4e3a\u8def\u7531\u5668\u7684\u201c\u6700\u540e\u6c42\u52a9\u5bf9\u8c61\u201d\u4f7f\u7528\u3002 \u9ed8\u8ba4\u8def\u7531\u7684\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\u3002\u901a\u5e38\u7528\u4e8e\u4e00\u4e2a\u7f51\u7edc\u7684\u51fa\u53e3\u8bbe\u5907\u4e0a\uff0c\u4f8b\u5982\u51fa\u53e3\u8def\u7531\u5668\u6216\u51fa\u53e3\u9632\u706b\u5899\uff0c\u8fd9\u4e9b\u8bbe\u5907\u8fde\u63a5\u5916\u90e8\u7f51\u7edc\uff0c\u5f80\u5f80\u5e76\u4e0d\u80fd\u77e5\u6653\u5916\u90e8\u7f51\u7edc\u7684\u6240\u6709\u7f51\u6bb5\u4fe1\u606f\u2014\u2014\u5f53\u7136\u4e5f\u4e0d\u53ef\u80fd\u5b8c\u5168\u77e5\u6653\uff0c\u90a3\u4e48\u6b64\u65f6\u5c31\u53ef\u4ee5\u5728\u8bbe\u5907\u4e0a\u4e66\u5199\u9ed8\u8ba4\u8def\u7531\uff0c\u6307\u5411\u5916\u90e8\u7f51\u7edc\uff0c\u4ece\u800c\u4f7f\u5f97\u8bbe\u5907\u80fd\u591f\u987a\u5229\u5c06\u53bb\u5f80\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u8f6c\u53d1\u51fa\u53bb\u3002 \u6d6e\u52a8\u9759\u6001\u8def\u7531 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5bf9\u4e8eR3\u53ca\u5176\u4e0b\u6302\u7684\u7f51\u7edc\u800c\u8a00\uff0c\u8981\u53bb\u5f8010.9.9.0/24\u7f51\u7edc\uff0c\u901a\u8fc7R1\u53caR2\u90fd\u53ef\u8fbe\u3002\u90a3\u4e48\u5982\u679c\u5728R3\u4e0a\uff0c \u5206\u522b\u914d\u7f6e\u9759\u6001\u8def\u7531\uff1a \u8fd9\u4e24\u6761\u8def\u7531\u90fd\u662f\u53bb\u5f80\u540c\u4e00\u4e2a\u76ee\u7684\u5730\uff0c\u4f46\u5206\u522b\u91c7\u7528\u4e0d\u540c\u7684\u4e0b\u4e00\u8df3IP\u5730\u5740\uff0c\u540c\u65f6\u8fd9\u4e24\u6761\u8def\u7531\u5177\u5907\u76f8\u540c\u7684\u4f18\u5148\u7ea7\uff0c \u4ee5\u53ca\u76f8\u540c\u7684\u5f00\u9500\uff08Cost\u90fd\u4e3a0\uff09\uff0c\u56e0\u6b64\u8fd9\u4e24\u6761\u53bb\u5f8010.9.9.0/24\u7684\u8def\u7531\u88ab\u540c\u65f6\u88c5\u8f7d\u8fdb\u4e86R3\u7684\u8def\u7531\u8868\u3002\u8fd9\u79cd\u73b0\u8c61\u6211\u4eec\u79f0\u4e3a\u8def\u7531\u7684\u7b49\u4ef7\u8d1f\u8f7d\u5747\u8861\u3002\u6700\u7ec8\u7684\u7ed3\u679c\u662f\uff0cR3\u8f6c\u53d1\u53bb\u5f8010.9.9.0/24\u7684\u6d41\u91cf\u65f6\uff0c\u53ef\u80fd\u4f1a\u540c\u65f6\u91c7\u7528R1\u53caR2 \u4f5c\u4e3a\u4e0b\u4e00\u8df3\u3002\u8fd9\u79cd\u65b9\u6cd5\u662f\u6709\u5229\u5f0a\u7684\uff0c\u4f18\u52bf\u5f88\u660e\u663e\uff0c\u800c\u5f0a\u7aef\u4e4b\u4e00\u662f\u6709\u53ef\u80fd\u51fa\u73b0\u5230\u8fbe\u76ee\u7684\u5730\u7684\u6570\u636e\u5305\u662f\u975e\u987a\u5e8f\u7684\u60c5\u51b5\u3002\u90a3\u4e48\u5982\u679c\u5e0c\u671bR3\u53bb\u5f8010.9.9.0/24\u7684\u6d41\u91cf\u59cb\u7ec8\u5148\u8d70\u5355\u8fb9\uff08\u5982R1\uff09\uff0c\u5f53R1\u5b95\u673a\u6216R1-R3\u4e4b\u95f4\u7684\u4e92\u8054\u94fe\u8def\u51fa\u73b0\u6545\u969c\u65f6\uff0cR3\u80fd\u591f\u81ea\u52a8\u5c06\u6d41\u91cf\u5207\u6362\u5230R2\u5462\uff1f \u8fd9\u91cc\u5c31\u53ef\u4ee5\u4f7f\u7528\u5230\u6d6e\u52a8\u9759\u6001\u8def\u7531\u7684\u6982\u5ff5\u3002\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u4f7f\u7528**ip route-static**\u547d\u4ee4\u53ef\u4ee5\u4e3a\u8bbe\u5907\u6dfb\u52a0\u9759\u6001\u8def\u7531\uff0c \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd9\u6761\u547d\u4ee4\u6240\u6dfb\u52a0\u7684\u9759\u6001\u8def\u7531\u7684\u4f18\u5148\u7ea7\u4e3a60\uff08\u5728\u534e\u4e3a\u8bbe\u5907\u4e0a\uff0c\u9759\u6001\u8def\u7531\u7684\u4f18\u5148\u7ea7\u9ed8\u8ba4\u4e3a60\uff0c \u5176\u4ed6\u8bbe\u5907\u5382\u5546\u53ef\u80fd\u6709\u6240\u4e0d\u540c\uff09\uff0c\u8fd9\u4e2a\u9759\u6001\u8def\u7531\u7684\u4f18\u5148\u7ea7\u4e8b\u5b9e\u4e0a\u662f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7684\uff0c\u4f8b\u5982\uff0c\u5728R3\u4e0a\u914d\u7f6e\u4fee\u6539\u4e3a\uff1a \u4e0a\u8ff0\u914d\u7f6e\u4e2d\uff0c\u6211\u4eec\u4e3aR3\u6dfb\u52a0\u4e86\u4e24\u6761\u9759\u6001\u8def\u7531\uff0c\u76ee\u7684\u7f51\u7edc\u90fd\u662f10.9.9.0/24\uff0c\u4e0b\u4e00\u8df3\u5206\u522b\u4e3a10.1.13.1\u53ca10.1.23.2\uff0c \u7559\u610f\u5230\u4e0b\u4e00\u8df3\u4e3aR1\u7684\u9759\u6001\u8def\u7531\u5e76\u6ca1\u6709\u8bbe\u7f6e\u4f18\u5148\u7ea7\uff0c\u56e0\u6b64\u8be5\u6761\u8def\u7531\u7684\u4f18\u5148\u7ea7\u4e3a\u9ed8\u8ba4\u768460\uff0c\u53e6\u4e00\u6761\u9759\u6001\u8def\u7531\u4f7f\u7528**preference**\u5173\u952e\u5b57\u6307\u5b9a\u4e86\u4f18\u5148\u7ea780\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u7ecf\u8fc7\u4f18\u5148\u7ea7\u6bd4\u8f83\uff0c\u4f18\u5148\u7ea7\u503c\u66f4\u5c0f\u7684\u8def\u7531\u5c06\u88ab\u4f18\u9009\uff0c\u5e76\u653e\u8fdb\u8def\u7531\u8868\u4f5c\u4e3a\u6570\u636e\u8f6c\u53d1\u7684\u4f9d\u636e\uff0c\u53e6\u4e00\u6761\u4f18\u5148\u7ea7\u4e3a80\u7684\u8def\u7531\uff0c\u5219\u201c\u6f5c\u85cf\u201d\u8d77\u6765\uff0c\u5e76\u4e0d\u51fa\u73b0\u5728\u8def\u7531\u8868\u4e2d\u3002 \u5f53R1\u5b95\u673a\uff0c\u6216\u8005R1-R3\u4e4b\u95f4\u7684\u76f4\u8fde\u94fe\u8def\u53d1\u751f\u6545\u969c\u65f6\uff0c**ip route-static 10.9.9.0 24 10.1.13.1**\u8fd9\u6761\u9759\u6001\u8def\u7531\u5931 \u6548\uff0c**ip route-static 10.9.9.0 24 10.1.23.2 preference 80**\u5219\u6d6e\u73b0\u51fa\u6765\u4e86\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u56e0\u6b64\u8fd9\u662f\u4e00\u79cd\u4e0d\u9519\u7684\u8def\u5f84\u5907\u4efd\u673a\u5236\u3002 \u8def\u7531\u6c47\u603b\uff08\u8def\u7531\u805a\u5408\uff09 \u8def\u7531\u6c47\u603b\u6280\u672f\u80cc\u666f \u00b6 \u4e0a\u56fe\u4e2d\uff0c\u5bf9\u4e8eR1\u800c\u8a00\uff0c\u5982\u679c\u8981\u53bb\u5f80R2\u8eab\u540e\u7684172.16.1.0/24\u3001172.16.2.0/24\u3001172.16.3.0/24\u7f51\u7edc\uff0c\u81ea\u7136\u662f\u8981\u6709\u8def\u7531\u7684\uff0c\u5982\u679c\u662f\u91c7\u7528\u9759\u6001\u8def\u7531\u7684\u65b9\u5f0f\uff0c\u610f\u5473\u7740\u8981\u7ed9R1\u914d\u7f6e\u4e09\u6761\u9759\u6001\u8def\u7531\u5206\u522b\u5bf9\u5e94\u4e0a\u8ff0\u4e09\u4e2a\u7f51\u6bb5\uff0c \u524d\u6587\u5df2\u7ecf\u8bf4\u8fc7\u4e86\uff0c\u8fd9\u6837\u7684\u914d\u7f6e\uff0c\u4e00\u6765\u5de5\u4f5c\u91cf\u5927\uff0c\u60f3\u60f3\u770b\uff0c\u5982\u679cR2\u8eab\u540e\u4e0d\u4ec5\u4ec5\u6709\u4e09\u4e2a\u7f51\u7edc\u5462\uff1f\u5982\u679c\u6709100 \u4e2a\u7f51\u7edc\u5462\uff1f\u518d\u8005\u8fd9\u4e5f\u610f\u5473\u7740R1\u7684\u8def\u7531\u8868\u5c06\u53d8\u5f97\u975e\u5e38\u81c3\u80bf\u3002 \u5728\u4e0a\u4e00\u5c0f\u8282\u6211\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u4e86\u9ed8\u8ba4\u8def\u7531\uff0c\u9ed8\u8ba4\u8def\u7531\u56fa\u7136\u53ef\u4ee5\u89e3\u51b3\u4e00\u90e8\u5206\u95ee\u9898\uff0c\u4f46\u662f\u9ed8\u8ba4\u8def\u7531\u7684\u201c\u8def\u7531\u9897\u7c92\u5ea6\u201d\u592a\u5927\uff0c\u65e0\u6cd5\u505a\u5230\u5bf9\u8def\u7531\u66f4\u4e3a\u7ec6\u81f4\u7684\u63a7\u5236\uff0c\u800c\u4e14\u5982\u679cR1\u5de6\u4fa7\uff08\u53e6\u4e00\u4e2a\u63a5\u53e3\uff09\u8fde\u63a5\u4e86\u4e00\u4e2a\u5916\u90e8\u7f51\u7edc\u5e76\u4e14\u5df2\u7ecf\u5360\u7528\u4e86\u9ed8\u8ba4\u8def\u7531\uff0c\u90a3\u4e48\u8fd9\u91cc\u53ea\u80fd\u53e6\u60f3\u4ed6\u6cd5\u4e86\u3002 \u8def\u7531\u6c47\u603b\u53ef\u4ee5\u5f88\u597d\u7684\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a \u4e0eR1\u4f7f\u75283\u6761\u660e\u7ec6\u8def\u7531\u4e0d\u540c\uff0c\u5728\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u4ec5\u4ec5\u4f7f\u7528\u4e00\u6761\u8def\u7531\u5373\u53ef\u5b9e\u73b0\u76f8\u540c\u7684\u6548\u679c\uff0c\u8fd9\u6761\u8def\u7531\u662f\u4e0a\u4e00\u4e2a\u573a\u666f\u4e2d3\u6761\u660e\u7ec6\u8def\u7531\u7684\u6c47\u603b\u8def\u7531\u3002\u8fd9\u6837\u914d\u7f6e\u7684\u4e00\u4e2a\u76f4\u63a5\u7684\u597d\u5904\u5c31\u662f\uff0c\u8def\u7531\u5668\u7684\u8def\u7531\u8868\u6761\u76ee\u6570\u91cf\u5927\u5927\u51cf\u5c11\u4e86\u3002\u8fd9\u79cd\u64cd\u4f5c\u88ab\u79f0\u4e3a\u8def\u7531\u6c47\u603b\u3002\u8def\u7531\u6c47\u603b\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u7f51\u7edc\u8bbe\u8ba1\u601d\u60f3\uff0c\u901a\u5e38\u5728\u4e00\u4e2a\u5927\u4e2d\u578b\u7684\u7f51\u7edc\u4e2d\uff0c\u5fc5\u987b\u65f6\u523b\u8003\u8651\u7f51\u7edc\u53ca\u8def\u7531\u7684\u53ef\u4f18\u5316\u6027\uff0c\u8def\u7531\u6c47\u603b\u5c31\u662f\u4e00\u4e2a\u65f6\u5e38\u9700\u8981\u5173\u6ce8\u7684\u5de5\u5177\u3002\u8fd9\u91cc\u5b9e\u9645\u4e0a\u662f\u90e8\u7f72\u4e86\u9759\u6001\u8def\u7531\u7684\u6c47\u603b\uff0c\u5f53\u7136\u9664\u6b64\u4e4b\u5916\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u52a8\u6001\u8def\u7531\u534f\u8bae\u4e2d\u8fdb\u884c\u8def\u7531\u6c47\u603b\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u52a8\u6001\u8def\u7531\u534f \u8bae\u90fd\u652f\u6301\u8def\u7531\u6c47\u603b\u3002 \u8def\u7531\u7cbe\u786e\u6c47\u603b\u7684\u7b97\u6cd5 \u00b6 \u8def\u7531\u7684\u6c47\u603b\u5b9e\u9645\u4e0a\u662f\u901a\u8fc7\u5bf9\u7f51\u7edc\u63a9\u7801\u7684\u64cd\u4f5c\u6765\u5b8c\u6210\u7684\u3002\u5bf9\u4e8e\u4e0b\u9762\u7684\u4f8b\u5b50\u6765\u8bf4\uff1a \u5728R2\u4e0a\uff0c\u4e3a\u4e86\u5230\u8fbeR1\u5de6\u4fa7\u7684\u7f51\u7edc\uff0cR2\u4f7f\u7528\u4e86\u8def\u7531\u6c47\u603b\uff0c\u914d\u7f6e\u4e86\u4e00\u6761\u6c47\u603b\u8def\u7531\uff1a \u867d\u7136\u8fd9\u786e\u5b9e\u8d77\u5230\u4e86\u7f51\u7edc\u4f18\u5316\u7684\u76ee\u7684\uff0c\u4f46\u662f\uff0c\u8fd9\u6761\u6c47\u603b\u8def\u7531\u592a\u201c\u7c97\u72b7\u201d\u4e86\uff0c\u5b83\u751a\u81f3\u5c06R3\u8fd9\u4e00\u4fa7\u7684\u7f51\u6bb5\u4e5f \u56ca\u62ec\u5728\u5185\uff0c\u6211\u4eec\u79f0\u8fd9\u79cd\u8def\u7531\u6c47\u603b\u884c\u4e3a\u4e0d\u591f\u7cbe\u786e\u3002\u56e0\u6b64\uff0c\u4e00\u79cd\u7406\u60f3\u7684\u65b9\u5f0f\u662f\uff0c\u4f7f\u7528\u4e00\u4e2a\u201c\u521a\u521a\u597d\u201d\u56ca\u62ec\u8fd9\u4e9b\u660e\u7ec6\u8def\u7531\u7684\u6c47\u603b\u8def\u7531\uff0c\u8fd9\u6837\u4e00\u6765\u5c31\u53ef\u4ee5\u907f\u514d\u6c47\u603b\u4e0d\u591f\u7cbe\u786e\u7684\u95ee\u9898\u3002 \u8fd9\u91cc\u4e0d\u5f97\u4e0d\u5f3a\u8c03\u4e00\u70b9\uff0c\u7f51\u7edc\u53ef\u4ee5\u90e8\u7f72\u8def\u7531\u6c47\u603b\u7684\u524d\u63d0\u662f\u7f51\u7edc\u4e2d\u7684IP\u5b50\u7f51\u89c4\u5212\u53ca\u7f51\u7edc\u6a21\u578b\u8bbe\u8ba1\u5177\u5907\u4e00\u5b9a\u7684\u79d1\u5b66\u6027\u548c\u5408\u7406\u6027\u3002\u5982\u679c\u7f51\u7edc\u89c4\u5212\u5f97\u6742\u4e71\u65e0\u7ae0\uff0c\u8def\u7531\u6c47\u603b\u90e8\u7f72\u8d77\u6765\u5c31\u76f8\u5f53\u7684\u56f0\u96be\u4e86\u3002\u90a3\u4e48\u5982\u4f55\u8fdb\u884c\u6c47\u603b\u8def\u7531\u7684\u7cbe\u786e\u8ba1\u7b97\u5462?\u4e0b\u9762\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a \u73b0\u6709\u660e\u7ec6\u8def\u7531\uff1a172.16.1.0/24\u3001172.16.2.0/24\u3001\u2026\u3001172.16.31.0/24\uff0c\u8bf7\u8ba1\u7b97\u6700\u7cbe\u786e\u7684\u6c47\u603b\u8def\u7531\uff1a \u6211\u4eec\u8981\u505a\u7684\u4e8b\u60c5\u975e\u5e38\u7b80\u5355\uff0c\u5c06\u660e\u7ec6\u5b50\u7f51\u90fd\u6362\u7b97\u6210\u4e8c\u8fdb\u5236\uff0c\u7136\u540e\u6392\u5217\u8d77\u6765\u3002\u6240\u8981\u505a\u7684\u4e8b\u60c5\u5c31\u662f\u627e\u51fa\u6bcf\u4e2a\u5b50\u7f51\u4e2d\u7684\u201c\u76f8\u540c\u7684\u6bd4\u7279\u4f4d\u201d\u3002\u7531\u4e8e\u8fd9\u4e9b\u660e\u7ec6\u5b50\u7f51\u662f\u8fde\u7eed\u7684\uff0c\u56e0\u6b64\u5176\u5b9e\u53ea\u8981\u6311\u51fa\u9996\u5c3e\u7684\u4e24\u5230\u4e09\u4e2a\u7f51\u7edc\u53f7\u6765\u8ba1\u7b97\u5c31\u8db3\u591f\u4e86\uff1a \u5c06\u8fd9\u4e9bIP\u5730\u5740\u5199\u6210\u4e8c\u8fdb\u5236\u5f62\u5f0f\uff0c\u5b9e\u9645\u4e0a\u53ea\u8981\u8003\u8651\u7b2c\u4e09\u4e2a8\u4f4d\u7ec4\u5373\u53ef\uff0c\u56e0\u4e3a\u53ea\u6709\u5b83\u662f\u5728\u53d8\u5316\u7684\u3002 \u73b0\u5728\u753b\u4e00\u6839\u7ad6\u7ebf\uff0c\u8fd9\u6839\u7ebf\u7684\u5de6\u4fa7\uff0c\u6bcf\u4e00\u5217\u7684\u4e8c\u8fdb\u5236\u6570\u90fd\u662f\u4e00\u6837\u7684\uff0c\u7ebf\u7684\u53f3\u4fa7\u5219\u662f\u53d8\u5316\u7684\uff0c\u8fd9\u6839\u7ebf\u7684 \u6700\u7ec8\u4f4d\u7f6e\uff0c\u5c31\u662f\u6c47\u603b\u8def\u7531\u7684\u63a9\u7801\u957f\u5ea6\u3002\u6ce8\u610f\u8fd9\u6839\u7ad6\u7ebf\u53ef\u4ee5\u4ece\u9ed8\u8ba4\u7684\u63a9\u7801\u957f\u5ea6\uff0c\u4e5f\u5c31\u662f/24\u5f00\u59cb\uff0c\u4e00\u683c\u4e00\u683c\u7684\u5f80\u5de6\u79fb\uff0c\u76f4\u5230\u4f60\u89c2\u5bdf\u5230\u7ebf\u7684\u5de6\u7aef\u6bcf\u4e00\u5217\u6570\u503c\u90fd\u76f8\u7b49\uff0c\u5373\u53ef\u505c\u4e0b\uff0c\u8fd9\u65f6\u5019\uff0c\u8fd9\u6839\u7ebf\uff0c\u6240\u5904\u7684\u4f4d\u7f6e\u5c31\u521a\u521a\u597d\u3002 \u5982\u4e0a\u56fe\uff0c\u7ebf\u7684\u4f4d\u7f6e\u662f16+3=19\uff0c\u6240\u4ee5\u6211\u4eec\u5f97\u5230\u6c47\u603b\u5730\u5740\uff1a172.16.0.0/19\uff0c\u8fd9\u5c31\u662f\u4e00\u4e2a\u6700\u7cbe\u786e\u7684\u6c47\u603b\u5730\u5740\u3002 \u56e0\u6b64\uff0c\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u4e48\u914d\u7f6e\uff1a \u8def\u7531\u6c47\u603b\u7684\u6f5c\u5728\u95ee\u9898 \u00b6 \u8def\u7531\u6c47\u603b\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u7f51\u7edc\u4f18\u5316\u624b\u6bb5\uff0c\u7136\u800c\u5982\u679c\u4f7f\u7528\u4e0d\u5f53\uff0c\u4e5f\u6709\u53ef\u80fd\u5e26\u6765\u95ee\u9898\uff0c\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u5de6\u4fa7\u6709192.168\u5f00\u5934\u7684\u4e00\u7cfb\u5217\u7f51\u7edc\uff0c\u4e3a\u4e86\u8ba9\u5b83\u4eec\u80fd\u591f\u8bbf\u95eeInternet\uff0cR1\u914d\u7f6e\u4e86\u6307\u5411R2\u7684\u9ed8\u8ba4\u8def\u7531\u3002\u800cR2\u4e3a\u4e86\u8ba9\u6570\u636e\u80fd\u591f\u56de\u7a0b\uff0c\u53c8\u4e3a\u4e86\u7cbe\u7b80\u8def\u7531\u8868\uff0c\u914d\u7f6e\u4e86\u4e00\u6761\u6c47\u603b\u8def\u7531192.168.0.0/16\uff0c\u5e76\u6307\u5411R1\u3002\u8fd9\u4e2a\u7f51\u7edc\u770b\u4f3c\u6ca1\u4ec0\u4e48\u95ee\u9898\uff0c\u4f46\u2026\u2026 \u89e3\u51b3\u529e\u6cd5\uff1a \u5728R1\u4e0a\u914d\u7f6e\u4e00\u6761**ip route-static 192.168.0.0 16 null0**\uff0c\u5373\u53ef\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002\u8fd9\u662f\u4e00\u6761\u9ed1\u6d1e\u8def\u7531\uff0cNull0 \u6709\u70b9\u7c7b\u4f3c\u5783\u573e\u6876\u7684\u6982\u5ff5\u3002\u5f53R1\u6536\u5230\u975e\u6cd5\u626b\u63cf\u62a5\u6587\uff08\u53d1\u5f80192.168\u7f51\u7edc\u4e0b\u4e0d\u5b58\u5728\u7684\u76ee\u7684\uff09\u65f6\uff0c\u8fd9\u4e9b\u62a5\u6587\u5c31\u4f1a\u88abR1\u76f4\u63a5\u4e22\u5f03\uff0c\u800c\u4e0d\u4f1a\u518d\u88ab\u8f6c\u53d1\u7ed9R2\u4e86\uff0c\u8fd9\u5c31\u89e3\u51b3\u4e86\u6570\u636e\u73af\u8def\u7684\u95ee\u9898\u3002\u8fd9\u4e2a\u601d\u8def\u5728\u8def\u7531\u6c47\u603b\u7684\u65f6\u5019\u975e\u5e38\u5173\u952e\uff0c\u8bb8\u591a\u52a8\u6001\u8def\u7531\u534f\u8bae\u5728\u4f7f\u7528\u547d\u4ee4\u6267\u884c\u8def\u7531\u6c47\u603b\u540e\uff0c\u4f1a\u5728\u672c\u5730\u8def\u7531\u8868\u4e2d\u81ea\u52a8\u4ea7\u751f\u4e00\u6761\u6307\u5411null0 \u7684\u6c47\u603b\u8def\u7531\u3002\u56e0\u6b64\uff0c\u65e0\u8bba\u662f\u91c7\u7528\u9759\u6001\u8def\u7531\uff0c\u6216\u8005\u662f\u52a8\u6001\u8def\u7531\u534f\u8bae\u6765\u90e8\u7f72\u8def\u7531\u6c47\u603b\uff0c\u90fd\u5e94\u683c\u5916\u7559\u610f\u8def\u7531\u6c47\u603b\u662f\u5426\u53ef\u80fd\u5f15\u53d1\u6570\u636e\u73af\u8def\u3002 \u6700\u957f\u5339\u914d\u539f\u5219 \u6700\u957f\u5339\u914d\u539f\u5219\u662f\u534e\u4e3a\u652f\u6301IP\u8def\u7531\u7684\u8bbe\u5907\u7684\u9ed8\u8ba4\u8def\u7531\u67e5\u8be2\u65b9\u5f0f\uff08\u4e8b\u5b9e\u4e0a\u51e0\u4e4e\u6240\u6709\u652f\u6301IP\u8def\u7531\u7684\u8bbe\u5907\u90fd\u662f\u8fd9\u79cd\u67e5\u8be2\u65b9\u5f0f\uff09\u3002\u5f53\u8def\u7531\u5668\u6536\u5230\u4e00\u4e2aIP\u6570\u636e\u5305\u65f6\uff0c\u4f1a\u5c06\u6570\u636e\u5305\u7684\u76ee\u7684IP\u5730\u5740\u4e0e\u81ea\u5df1\u672c\u5730\u8def\u7531\u8868\u4e2d\u7684\u8def\u7531\u8868\u9879\u8fdb\u884c bit by bit\u7684\u9010\u4f4d\u67e5\u627e\uff0c\u76f4\u5230\u627e\u5230\u5339\u914d\u5ea6\u6700\u957f\u7684\u6761\u76ee\uff0c\u8fd9\u53eb\u6700\u957f\u5339\u914d\u539f\u5219\u3002 \u770b\u4e0a\u9762\u7684\u56fe\uff0c\u8fd9\u662f\u4e00\u4e2a\u5f62\u8c61\u5316\u7684\u4e8c\u7ef4\u7a7a\u95f4\u56fe\u3002\u6df1\u7070\u8272\u7684\u7a7a\u95f4172.16.0.0/16\uff0c\u8fd9\u4e2a\u7f51\u7edc\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e3b\u7c7b\u7f51\u7edc \uff08Classful Network\uff09\uff0c\u6240\u8c13\u4e3b\u7c7b\u7f51\u7edc\uff0c\u610f\u601d\u662f\u8be5\u7f51\u7edc\u662f\u6309\u7167\u5176\u6240\u5c5e\u7684IP\u5730\u5740\u7c7b\u522b\u533a\u5206\u4e4b\u540e\uff0c\u5bf9\u5e94\u9ed8\u8ba4\u7684\u63a9\u7801\u957f\u5ea6\u540e\u5f97\u5230\u7684\u7f51\u7edc\u3002\u4f8b\u5982172.16.0.0 \uff0c \u8fd9\u662f\u4e00\u4e2aB\u7c7b\u5730\u5740\uff0c B\u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u957f\u5ea6\u662f/16 \uff0c\u56e0\u6b64 172.16.0.0/16\u5c31\u662f\u4e00\u4e2a\u4e3b\u7c7b\u7f51\u7edc\u3002\u518d\u4e3e\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\uff1a10.1.12.0/24\uff0c\u9996\u514810\u5f00\u5934\u7684\u662f\u4e00\u4e2aA\u7c7b\u5730\u5740\uff0cA\u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u662f255.0.0.0\uff08/8\uff09\uff0c\u56e0\u6b6410.1.12.0/24\u7684\u4e3b\u7c7b\u7f51\u7edc\u662f10.0.0.0/8\u300210.1.12.0/24\u88ab\u5305\u542b\u572810.0.0.0/8\u4e4b\u4e2d\u3002 \u56de\u5230\u4e0a\u9762\u7684\u56fe\uff0c\u4ece172.16.0.0/16\u5f00\u59cb\u5f80\u91cc\u8d70\uff0c\u4e0b\u4e00\u4e2a\u770b\u5230\u7684\u7f51\u7edc\u662f172.16.10.0/24\uff0c\u5f88\u660e\u663e\u8fd9\u662f\u5e94\u7528\u4e86VLSM \uff08\u53ef\u53d8\u957f\u5b50\u7f51\u63a9\u7801\uff09\u4e4b\u540e\u5f97\u5230\u7684172.16.0.0/16\u8fd9\u4e2a\u4e3b\u7c7b\u7f51\u7edc\u91cc\u7684\u4e00\u4e2a\u5b50\u7f51\uff08Subnet\uff09\u3002\u6240\u8c13\u5b50\u7f51\uff0c\u6211\u4eec\u53ef\u4ee5\u7406\u89e3\u4e3a\u662f\u5728\u4e00\u4e2a\u7f51\u7edc\u6240\u5c5e\u7c7b\u522b\u7684\u9ed8\u8ba4\u63a9\u7801\u957f\u5ea6\u7684\u57fa\u7840\u4e0a\uff0c\u5c06\u63a9\u7801\u201c\u62c9\u957f\u201d\u6216\u8005\u5411\u4e3b\u673a\u4f4d\u501f\u4f4d\u4ece\u800c\u5f97\u5230\u7684\u4e00\u4e2a\u5b50\u7f51\u7edc\u3002\u5b9e\u9645\u4e0a172.16.0.0/16\u662f\u5c06172.16.10.0/24\u56ca\u62ec\u5728\u5185\u7684\u3002\u90a3\u4e48\u5982\u679c\u6211\u4eec\u6709\u4e00\u4e2aIP\u5730\u5740\uff1a172.16.10.1\uff0c \u5b9e\u9645\u4e0a\u8fd9\u4e2aIP\u5730\u5740\u65e2\u53ef\u4ee5\u7406\u89e3\u4e3a\u5728172.16.0.0/16\u7f51\u7edc\u5185\uff0c\u4e5f\u662f\u5728172.16.10.0/24\u7f51\u7edc\u5185\uff0c\u90a3\u4e48\u8fd9\u4e24\u4e2a\u7f51\u7edc\u5730\u5740\uff0c\u54ea\u4e00\u4e2a\u66f4\u80fd\u7cbe\u786e\u5339\u914d172.16.10.1\u8fd9\u4e2aIP\u5730\u5740\u5462\uff1f\u5f88\u660e\u663e\u662f172.16.10.0/24\u3002 \u5f53\u7136172.16.10.0/24\u8fd8\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5212\u5206\u5b50\u7f51\uff0c\u5f97\u5230172.16.10.0/30\uff0c\u751a\u81f3172.16.10.1/32\uff0c\u90a3\u4e48\u5982\u679c\u8fd9\u4e9b\u524d\u7f00\u90fd\u5b58\u5728\u65f6\uff0c\u5f53\u6211\u8981\u53bb\u67e5\u627e172.16.10.1\uff0c\u8c01\u7684\u5339\u914d\u5ea6\u6700\u9ad8\u5462\uff1f\u5f88\u660e\u663e\uff0c\u662f172.16.10.1/32\u8fd9\u6761\u4e3b\u673a\u524d\u7f00\u3002 \u73b0\u5728\u56de\u5230172.16.0.0/16\u8fd9\u4e2a\u4e3b\u7c7b\u7f51\u7edc\uff0c\u7136\u540e\u5411\u5916\u8d70\u3002172.0.0.0/8\u5b9e\u9645\u4e0a\u662f\u5c06\u8fd9\u4e2aB\u7c7b\u5730\u5740\u7684\u63a9\u7801\u5411\u5de6\u79fb\u4e868bit\uff0c \u6b64\u65f6\u5f97\u5230\u7684\u7f51\u7edc\u5b9e\u9645\u4e0a\u662f\u56ca\u62ec\u4e86172.16.0.0/16\u5728\u5185\u7684\u4e00\u4e2a\u5927\u7684\u7f51\u7edc\uff0c\u6211\u4eec\u79f0\u5176\u4e3a\u8d85\u7f51\u3002 \u4e0b\u9762\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\u6765\u6df1\u5165\u7406\u89e3\u6700\u957f\u5339\u914d\u539f\u5219\uff1a \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u8def\u7531\u8868\u4e00\u5171\u6709\u4e09\u4e2a\u6761\u76ee\uff1a172.16.1.0/24\u3001172.16.2.0/24\u4ee5\u53ca172.16.0.0/16\uff0c\u8fd9\u4e09\u4e2a\u8def\u7531\u6761\u76ee\u5206\u522b\u6307\u5411\u4e0d\u540c\u7684\u51fa\u63a5\u53e3\u3002\u90a3\u4e48\u5f53\u8def\u7531\u5668\u6536\u5230\u53bb\u5f80172.16.2.1\u7684\u6570\u636e\u5305\u65f6\uff0c\u5b83\u8be5\u600e\u4e48\u505a\u51b3\u7b56\u5462\uff1f\u5f88\u7b80\u5355\uff0c \u628a\u4e09\u4e2a\u8def\u7531\u6761\u76ee\u90fd\u5199\u6210\u4e8c\u8fdb\u5236\u683c\u5f0f\uff0c\u5bf9\u5e94\u5404\u81ea\u7684\u7f51\u7edc\u63a9\u7801\uff08\u524d\u7f00\u957f\u5ea6\uff09\uff0c\u63a9\u7801\u4e3a1\u7684\u4f4d\u662f\u9700\u8981\u4e25\u683c\u5339\u914d\u7684\uff0c \u63a9\u7801\u4e3a0\u7684\u4f4d\u5219\u65e0\u6240\u8c13\uff08\u56fe\u4e2d\u6807\u8bc6x\u7684\u4f4d\uff09\u3002\u7136\u540e\u628a\u6570\u636e\u5305\u7684\u76ee\u7684IP\u5730\u5740172.16.2.1\u4e5f\u5199\u6210\u4e8c\u8fdb\u5236\u683c\u5f0f\uff0c\u63a5\u4e0b\u6765\u4e0e\u4e09\u6761\u8def\u7531\u4ece\u5de6\u5f80\u540e\u9010\u4f4d\u5339\u914d\u3002\u5254\u9664\u4e0d\u5339\u914d\u7684\u8def\u7531\u6761\u76ee1\uff0c\u5269\u4e0b\u8def\u7531\u6761\u76ee2\u548c3\uff0c\u7531\u4e8e\u76ee\u7684\u5730\u5740172.16.2.1 \u548c\u8def\u7531\u6761\u76ee172.16.2.0/24\u7684\u5339\u914d\u957f\u5ea6\u6700\u957f\uff0c\u56e0\u6b64\u8def\u7531\u6761\u76ee2\u80dc\u51fa\uff0c\u8be5\u8def\u7531\u7528\u4e8e\u6307\u5bfc\u8def\u7531\u5668\u5982\u4f55\u8f6c\u53d1\u524d\u5f80 172.16.2.1\u7684\u6570\u636e\u3002\u6700\u7ec8\u6570\u636e\u5305\u4ece\u63a5\u53e3S1\u8f6c\u53d1\u51fa\u53bb\u3002\u8fd9\u5c31\u662f\u6700\u957f\u5339\u914d\u539f\u5219\u3002\u4e0b\u9762\u770b\u51e0\u4e2a\u5b8f\u89c2\u7684\u4f8b\u5b50\uff1a \u5728\u4e0a\u56fe\u4e2d\uff0c\u5f53R1\u6536\u5230\u4e00\u4e2a\u53d1\u5f80172.16.1.1\u7684\u6570\u636e\u5305\u65f6\uff0c\u6570\u636e\u5305\u5c06\u547d\u4e2d\u54ea\u4e00\u6761\u8def\u7531\u5462\uff1f\u5b9e\u9645\u4e0a\uff0c172.16.1.1\u662f \u201c\u6389\u843d\u201d\u5728172.16.1.0/24\u53ca172.16.0.0/16\u7f51\u7edc\u4e2d\u7684\uff0c\u4e24\u8005\u8c8c\u4f3c\u7686\u53ef\uff0c\u4f46\u662f172.16.1.0/24\u5339\u914d\u5ea6\u66f4\u957f\uff0c\u56e0\u6b64\uff0c \u6839\u636e\u8def\u7531\u6761\u76ee\u201c172.16.1.0/24\u201d\u7684\u6307\u793a\uff0c\u8fd9\u4e2a\u6570\u636e\u5305\u88ab\u8f6c\u53d1\u7ed9\u4e86R2\u3002 \u518d\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u82e5\u6709\u6570\u636e\u5305\u53bb\u5f80172.16.2.1\u5462\uff1f\u9996\u5148\u8def\u7531\u8868\u4e2d172.16.1.0/24\u8fd9\u6761\u8def\u7531\u80af\u5b9a\u662f\u4e0d\u5339\u914d\u8be5\u76ee\u7684IP \u5730\u5740\u7684\uff0c\u6700\u540e\uff0c172.16.0.0/16\u8fd9\u4e2a\u6761\u76ee\u7684\u5339\u914d\u957f\u5ea6\u6700\u957f\uff0c\u56e0\u6b64\u8def\u7531\u5668\u4f7f\u7528\u8be5\u8def\u7531\u6765\u8f6c\u53d1\u524d\u5f80172.16.2.1\u7684\u6570\u636e\u5305\u3002 \u800c\u5f53\u6709\u6570\u636e\u5305\u53bb\u5f80172.17.1.1\u65f6\uff0c\u7531\u4e8e172.16.1.0/24\u53ca172.16.0.0/16\u8fd9\u4e24\u6761\u8def\u7531\u5747\u4e0d\u5339\u914d\u8be5\u76ee\u7684IP\u5730\u5740\uff0c\u4e8e \u662f\u8def\u7531\u5668\u53ea\u80fd\u201c\u6c42\u52a9\u4e8e\u201d0.0.0.0/0\u8fd9\u6761\u7f3a\u7701\u8def\u7531\uff0c\u5c06\u65e0\u6cd5\u5339\u914d\u4efb\u4f55\u5177\u4f53\u8def\u7531\u7684\u6570\u636e\u5305\u6309\u7167\u9ed8\u8ba4\u8def\u7531\u7684\u6307\u793a\uff0c \u4eceS2\u63a5\u53e3\u8f6c\u53d1\u51fa\u53bb\u3002 \u4e0b\u9762\u603b\u7ed3\u4e00\u4e0b\u8def\u7531\u5668\u5173\u4e8e\u8def\u7531\u67e5\u627e\u7684\u51e0\u4e2a\u5173\u952e\u70b9\uff1a \u4e0d\u540c\u7684\u8def\u7531\u524d\u7f00\uff08\u6ce8\u610f\u8def\u7531\u524d\u7f00\u5305\u542b\u76ee\u7684\u7f51\u7edc\u5730\u5740\u4e0e\u7f51\u7edc\u63a9\u7801\uff0c\u4e24\u8005\u7f3a\u4e00\u4e0d\u53ef\uff09\uff0c\u5728\u8def\u7531\u8868\u4e2d\u5c5e\u4e8e\u4e0d\u540c\u7684\u8def\u7531\u3002\u4f8b\u5982192.168.10.0/24\u53ca192.168.10.0/30\uff0c\u8fd9\u5728\u8def\u7531\u8868\u4e2d\u662f\u4e24\u6761\u4e0d\u540c\u7684\u8def\u7531\u3002 \u76f8\u540c\u7684\u8def\u7531\u524d\u7f00\uff08\u76ee\u7684\u7f51\u7edc\u5730\u5740\u4e0e\u7f51\u7edc\u63a9\u7801\u90fd\u5206\u522b\u76f8\u540c\uff09\uff0c\u5982\u679c\u901a\u8fc7\u4e0d\u540c\u7684\u534f\u8bae\u83b7\u53d6\uff0c\u5219\u5148\u6bd4\u8def\u7531\u7684\u4f18\u5148\u7ea7\uff0c\u4f18\u9009\u4f18\u5148\u7ea7\u503c\u66f4\u5c0f\u7684\u8def\u7531\u52a0\u8f7d\u5230\u8def\u7531\u8868\uff0c\u5982\u679c\u8def\u7531\u6765\u6e90\u4e8e\u76f8\u540c\u7684\u8def\u7531\u534f\u8bae\uff0c\u90a3\u4e48\u5b83\u4eec\u7684\u4f18\u5148\u7ea7\u4fbf\u4f1a\u662f\u76f8\u7b49\u7684\uff0c\u6b64\u65f6\u518d\u6bd4\u8def\u7531\u7684Cost\uff0c\u4f18\u9009Cost\u66f4\u4f18\u7684\u8def\u7531\u52a0\u8f7d\u5230\u8def\u7531\u8868\u3002\u8fd9\u662f\u4e00\u822c\u60c5\u51b5\uff0c\u5f53\u7136\u6709\u4e8c\u822c\u60c5\u51b5\uff0c\u8fd9\u5c31\u8981\u770b\u7279\u5b9a\u7684\u73af\u5883\u548c\u7279\u5b9a\u7684\u8def\u7531\u534f\u8bae\u4e86\u3002 \u8def\u7531\u5668\u9ed8\u8ba4\u91c7\u7528\u6700\u957f\u5339\u914d\u539f\u5219\uff0c\u5728\u5176\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\uff0c\u5e76\u8bd5\u56fe\u627e\u5230\u5339\u914d\u5ea6\u6700\u957f\u7684\u8868\u9879\u3002\u5982\u679c\u627e\u5230\u4e86\u5339\u914d\u7684\u8868\u9879\uff0c\u5219\u8f6c\u53d1\u6570\u636e\u5305\uff1b\u5982\u679c\u6ca1\u6709\u4efb\u4f55\u5177\u4f53\u8def\u7531\u5339\u914d\u8be5\u76ee\u7684IP\u5730\u5740\uff0c\u5219\u6c42\u52a9\u4e8e\u9ed8\u8ba4\u8def\u7531\uff0c \u5982\u679c\u8def\u7531\u8868\u4e2d\u4e0d\u5b58\u5728\u9ed8\u8ba4\u8def\u7531\uff0c\u5219\u53ea\u80fd\u4e22\u5f03\u8be5\u6570\u636e\u5305\u3002 IP\u8def\u7531\u7684\u884c\u4e3a\u662f\u9010\u8df3\u6267\u884c\u7684\uff0c\u56e0\u6b64\u4ece\u6e90\u5230\u76ee\u7684\u7f51\u7edc\u7684\u8def\u5f84\u4e2d\uff0c\u6cbf\u9014\u7684\u6bcf\u4e2a\u8def\u7531\u5668\u90fd\u5fc5\u987b\u62e5\u6709\u5230\u8fbe\u76ee\u7684\u7f51\u7edc\u7684\u8def\u7531\u3002 \u7f51\u7edc\u7684\u901a\u4fe1\u5f80\u5f80\u662f\u53cc\u5411\u7684\uff0c\u56e0\u6b64\u5728\u7f51\u7edc\u4e2d\u8c03\u8bd5\u8bbe\u5907\u7684\u8def\u7531\u529f\u80fd\u65f6\uff0c\u4e00\u822c\u9700\u8003\u8651\u53cc\u5411\u7684\u8def\u7531\u3002 \u52a8\u6001\u8def\u7531\u534f\u8bae\u57fa\u7840 \u4e3a\u4ec0\u4e48\u8981\u6709\u52a8\u6001\u8def\u7531\u534f\u8bae \u00b6 \u8def\u7531\u5668\u662f\u4f9d\u8d56\u81ea\u5df1\u7ef4\u62a4\u7684\u8def\u7531\u8868\u6765\u8fdb\u884c\u6570\u636e\u8f6c\u53d1\u7684\uff0c\u800c\u901a\u5e38\u8def\u7531\u8868\u53c8\u662f\u7531\u8bb8\u591a\u8def\u7531\u6761\u76ee\u6784\u6210\u7684\uff0c\u8def\u7531\u5668\u8981\u5c06\u6570\u636e\u8f6c\u53d1\u5230\u76ee\u7684\u5730\u5c31\u5fc5\u987b\u6709\u8def\u7531\u3002\u4e00\u53f0\u8def\u7531\u5668\u53ef\u4ee5\u4ece\u591a\u79cd\u6765\u6e90\u5b66\u4e60\u8def\u7531\u6761\u76ee\uff1a \u76f4\u8fde\u8def\u7531 \u00b6 \u8def\u7531\u5668\u5728\u521d\u59cb\u542f\u52a8\u540e\uff0c\u5982\u679c\u6211\u4eec\u4e3a\u5176\u63a5\u53e3\u914d\u7f6e\u4e86IP\u5730\u5740\uff0c\u5e76\u4e14\u63a5\u53e3\u7684\u7269\u7406\u53ca\u534f\u8bae\u7684\u72b6\u6001\u90fd\u4e3aUP\uff0c\u5219\u8def\u7531\u5668\u80fd\u591f\u81ea\u52a8\u5730\u5b66\u4e60\u5230\u8fbe\u8be5\u63a5\u53e3\u6240\u5728\u7f51\u7edc\u7684\u76f4\u8fde\u8def\u7531\uff0c\u5e76\u5c06\u8fd9\u6761\u76f4\u8fde\u8def\u7531\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\uff0c\u8fd9\u5176\u5b9e\u5f88\u597d\u7406\u89e3\uff0c\u56e0\u4e3a\u8fd9\u662f\u6211\u201c\u5bb6\u95e8\u53e3\u201d\u7684\u7f51\u7edc\u561b\uff0c\u65e0\u9700\u4eba\u4e3a\u5e72\u9884\uff0c\u81ea\u52a8\u5b66\u4e60\u3002 \u9759\u6001\u8def\u7531 \u00b6 \u8def\u7531\u5668\u5bf9\u4e8e\u5230\u8fbe\u76f4\u8fde\u7f51\u7edc\u7684\u8def\u7531\uff08\u76f4\u8fde\u8def\u7531\uff09\u80fd\u591f\u81ea\u52a8\u5b66\u4e60\uff0c\u53ef\u662f\u5bf9\u4e8e\u5230\u8fbe\u975e\u76f4\u8fde\u7f51\u7edc\u7684\u8def\u7531\u53ef\u5c31\u65e0\u6cd5\u81ea\u52a8\u5b66\u4e60\u4e86\uff0c\u4e00\u79cd\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u901a\u8fc7\u624b\u5de5\u914d\u7f6e\u7684\u65b9\u5f0f\u4e3a\u8def\u7531\u5668\u521b\u5efa\u9759\u6001\u7684\u8def\u7531\u8868\u9879\uff0c\u8fd9\u53eb\u9759\u6001\u8def\u7531\u3002\u9759\u6001\u8def\u7531\u662f\u7f51\u7edc\u7ba1\u7406\u5458\u624b\u5de5\u914d\u7f6e\u7684\uff0c\u56e0\u6b64\u53ef\u7ba1\u7406\u6027\u975e\u5e38\u9ad8\uff0c\u4f46\u662f\u4e5f\u6709\u660e\u663e\u7684\u7f3a\u9677\uff0c\u56e0\u4e3a\u4f60\u8981\u5230\u4e00\u4e2a\u76ee\u7684\u5730\uff0c\u5c31\u5fc5\u987b\u505a\u4e00\u6761\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\uff0c\u90a3\u4e48\u5982\u679c\u7f51\u7edc\u7279\u522b\u5e9e\u5927\u3001\u8bbe\u5907\u6570\u91cf\u7279\u522b\u591a\u5462\uff1f\u5de5\u4f5c\u91cf\u5c31\u76f8\u5f53\u5927\u4e86\uff0c\u8fd9\u662f\u4f4e\u6548\u4e14\u4e0d\u5207\u5b9e\u7684\uff1b\u518d\u8005\u9759\u6001\u8def\u7531\u65e0\u6cd5\u6839\u636e\u7f51\u7edc\u62d3\u6251\u7684\u53d8\u66f4\u505a\u51fa\u52a8\u6001\u54cd\u5e94\uff0c\u56e0\u6b64\u5f53\u7f51\u7edc\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u7ba1\u7406\u5458\u53ef\u80fd\u4e0d\u5f97\u4e0d\u91cd\u65b0\u914d\u7f6e\u6216\u8c03\u6574\u9759\u6001\u8def\u7531\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u8feb\u5207\u9700\u8981\u4e00\u79cd\u52a8\u6001\u7684\u673a\u5236\uff0c\u6765\u5e2e\u52a9\u8def\u7531\u5668\u66f4\u52a0\u7075\u6d3b\u5730\u7ef4\u62a4\u8def\u7531\u4fe1\u606f\u3002 \u52a8\u6001\u8def\u7531\u534f\u8bae\u7684\u5206\u7c7b \u00b6 \u6839\u636e\u4f5c\u7528\u7684\u8303\u56f4\uff0c\u52a8\u6001\u8def\u7531\u534f\u8bae\u53ef\u5206\u4e3a\uff1a \u5185\u90e8\u7f51\u5173\u534f\u8bae\uff08Interior Gateway Protocol\uff0c\u7b80\u79f0IGP\uff09\uff1a\u5728\u4e00\u4e2a\u81ea\u6cbb\u7cfb\u7edf\u5185\u90e8\u8fd0\u884c\u3002 \u5916\u90e8\u7f51\u5173\u534f\u8bae\uff08Exterior Gateway Protocol\uff0c\u7b80\u79f0EGP\uff09\uff1a\u8fd0\u884c\u4e8e\u4e0d\u540c\u81ea\u6cbb\u7cfb\u7edf\u4e4b\u95f4\u3002 BGP\u8def\u7531\u534f\u8bae\u51e0\u4e4e\u662f\u76ee\u524d\u4e1a\u754c\u552f\u4e00\u5728\u4f7f\u7528\u7684EGP\u3002\u7b14\u8005\u5c06\u5728\u672c\u624b\u518c\u7684\u201cBGP\u201d\u4e00\u7ae0\u4e2d\u4ecb\u7ecdBGP\u8def\u7531\u534f\u8bae\u3002 \u6839\u636e\u4f7f\u7528\u7684\u7b97\u6cd5\uff0c\u8def\u7531\u534f\u8bae\u53ef\u5206\u4e3a\uff1a \u8ddd\u79bb\u77e2\u91cf\u534f\u8bae\uff08Distance-Vector\uff09\uff1a\u5178\u578b\u7684\u6709RIP\u548cBGP\u3002\u5176\u4e2d\uff0cBGP\u4e5f\u88ab\u79f0\u4e3a\u8def\u5f84\u77e2\u91cf\u534f\u8bae\uff08Path- Vector\uff09\u3002 \u94fe\u8def\u72b6\u6001\u534f\u8bae\uff08Link-State\uff09\uff1a\u5178\u578b\u7684\u6709OSPF\u548cIS-IS\u3002 \u5173\u4e8e\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae \u00b6 \u8fd0\u884c\u4e86\u8ddd\u79bb\u77e2\u91cf\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\u76f4\u63a5\u5c06\u81ea\u5df1\u7684\u8def\u7531\u8868\u66f4\u65b0\u7ed9\u76f4\u8fde\u7684\u90bb\u5c45\u8def\u7531\u5668\uff0c\u5e76\u4e14\u8fd9\u4e9b\u8def\u7531\u5668\u5e76\u4e0d\u4e86\u89e3\u6574\u4e2a\u62d3\u6251\u7ed3\u6784\uff0c\u8fd9\u5f88\u5bb9\u6613\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u4ea7\u751f\u8bf8\u5982\u8def\u7531\u73af\u8def\u4e4b\u7c7b\u7684\u95ee\u9898\uff08\u56e0\u6b64\u8ddd\u79bb\u77e2\u91cf\u8def\u7531\u534f\u8bae\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u9632\u6b62\u73af\u8def\u7684\u7279\u6027\uff09\u3002 \u76f8\u6bd4\u4e4b\u4e0b\uff0c\u8fd0\u884c\u4e86\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\u4e4b\u95f4\u5219\u66f4\u65b0\u7684\u4e0d\u662f\u8def\u7531\u8868\u6216\u8def\u7531\u6761\u76ee\uff0c\u800c\u662f\u5305\u62ec\u5bf9\u94fe\u8def \uff08\u63a5\u53e3\uff09\u7684\u63cf\u8ff0\u5728\u5185\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u88ab\u79f0\u4e3a\u94fe\u8def\u72b6\u6001\u4fe1\u606f\uff0c\u901a\u8fc7\u94fe\u8def\u72b6\u6001\u4fe1\u606f\u7684\u6cdb\u6d2a\uff0c\u8def\u7531\u5668\u641c\u96c6\u8fd9\u4e9b\u4fe1\u606f\u5e76\u5c06\u5176\u88c5\u8f7d\u8fdb\u94fe\u8def\u72b6\u6001\u6570\u636e\u5e93\uff0c\u968f\u540e\u8fd0\u884c\u7279\u5b9a\u7684\u7b97\u6cd5\uff0c\u8ba1\u7b97\u51fa\u4e00\u4e2a\u65e0\u73af\u7684\u62d3\u6251\u3002\u56e0\u6b64\u8fd0\u884c\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\u662f\u77e5\u6653\u7f51\u7edc\u7684\u62d3\u6251\u7ed3\u6784\u7684\u3002 \u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\u5e94\u8be5\u8bf4\u662f\u76ee\u524d\u4e1a\u5185IGP\u5e94\u7528\u7684\u4e3b\u6d41\uff0c\u5176\u4e2d\u6700\u5177\u4ee3\u8868\u6027\u7684\u5f53\u5c5eOSPF\u548cISIS\u3002 OSPF OSPF \u6982\u8ff0 OSPF\u662f\u5178\u578b\u7684\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\uff0c\u4e5f\u662f\u76ee\u524d\u4f7f\u7528\u5f97\u6700\u4e3a\u5e7f\u6cdb\u7684\u52a8\u6001\u8def\u7531\u534f\u8bae\u4e4b\u4e00\u3002\u4e0b\u9762\u6211\u4eec\u5148\u7b80\u7565\u5730\u4e86\u89e3\u4e00\u4e0bOSPF\u7684\u57fa\u672c\u5de5\u4f5c\u8fc7\u7a0b\uff1a LSA\u7684\u6cdb\u6d2a \u00b6 \u8fd0\u884c\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\u4e4b\u95f4\u9996\u5148\u4f1a\u57fa\u4e8e\u8def\u7531\u534f\u8bae\u5efa\u7acb\u90bb\u5c45\u5173\u7cfb\uff0c\u4e4b\u540e\u5f7c\u6b64\u4e4b\u95f4\u5f00\u59cb\u4ea4\u4e92LSA \uff08Link State Advertisement\uff0c\u94fe\u8def\u72b6\u6001\u901a\u544a\uff09\uff0c\u6ce8\u610f\u8fd9\u91cc\u4ea4\u4e92\u7684\u4e0d\u662f\u8def\u7531\u4fe1\u606f\uff0c\u800c\u662f\u94fe\u8def\u72b6\u6001\u901a\u544a\uff0c\u8fd9\u4e9bLSA\u6709\u52a9\u4e8e\u8def\u7531\u5668\u8fd8\u539f\u7f51\u7edc\u7684\u62d3\u6251\u7ed3\u6784\u3001\u7f51\u6bb5\u4fe1\u606f\uff0c\u5e76\u4f9d\u636e\u8fd9\u4e9b\u4fe1\u606f\u8ba1\u7b97\u6700\u4f73\u8def\u7531\u3002 LSDB\u7684\u7ec4\u5efa \u00b6 \u6bcf\u53f0\u8def\u7531\u5668\u90fd\u4f1a\u4ea7\u751fLSA\uff0c\u8def\u7531\u5668\u5c06\u7f51\u7edc\u4e2d\u6240\u6cdb\u6d2a\u7684LSA\u641c\u96c6\u8d77\u6765\u3001\u653e\u5165\u81ea\u5df1\u7684LSDB\uff08Link State DataBase\uff0c\u94fe\u8def\u72b6\u6001\u6570\u636e\u5e93\uff09\uff0c\u6709\u4e86LSDB\uff0c\u8def\u7531\u5668\u4e5f\u5c31\u6e05\u695a\u4e86\u5168\u7f51\u7684\u62d3\u6251\u3002 SPF\u8ba1\u7b97 \u00b6 \u63a5\u4e0b\u6765\uff0c\u6bcf\u53f0\u8def\u7531\u5668\u57fa\u4e8eLSDB\u3001\u4f7f\u7528SPF\uff08\u6700\u77ed\u8def\u5f84\u7b97\u6cd5\uff09\u8fdb\u884c\u8ba1\u7b97\u3002SPF\u662fOSPF\u8def\u7531\u534f\u8bae\u7684\u4e00\u4e2a\u6838\u5fc3\u7b97\u6cd5\uff0c\u7528\u6765\u5728\u4e00\u4e2a\u590d\u6742\u7684\u7f51\u7edc\u4e2d\u505a\u51fa\u8def\u7531\u4f18\u9009\u7684\u51b3\u7b56\u3002\u7ecf\u8fc7SPF\u7b97\u6cd5\u7684\u8ba1\u7b97\u540e\uff0c\u6bcf\u53f0\u8def\u7531\u5668\u90fd\u8ba1\u7b97\u51fa\u4e00\u68f5\u4ee5\u81ea\u5df1\u4e3a\u6839\u7684\u3001\u65e0\u73af\u7684\u3001\u62e5\u6709\u6700\u77ed\u8def\u5f84\u7684\u201c\u6811\u201d\u3002\u6709\u4e86\u8fd9\u68f5\u201c\u6811\u201d\uff0c\u4e8b\u5b9e\u4e0a\u8def\u7531\u5668\u5c31\u5df2\u7ecf\u77e5\u9053\u4e86\u5230\u8fbe\u7f51\u7edc\u5404\u4e2a\u89d2\u843d\u7684\u6700\u4f18\u8def\u5f84\u3002 \u7ef4\u62a4\u8def\u7531\u8868 \u00b6 \u6700\u540e\uff0c\u8def\u7531\u5668\u5c06\u8ba1\u7b97\u51fa\u6765\u7684\u6700\u4f18\u8def\u5f84\uff0c\u52a0\u8f7d\u8fdb\u81ea\u5df1\u7684\u8def\u7531\u8868\u3002 OSPF\uff08Open Shortest Path First\uff09\u5f00\u653e\u6700\u77ed\u8def\u5f84\u4f18\u5148\u534f\u8bae\uff0c\u662f\u4e00\u79cd\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\uff0c\u4e5f\u662f\u76ee\u524d\u4e1a\u5185\u4f7f\u7528\u5f97\u6700\u4e3a\u5e7f\u6cdb\u7684IGP\u3002OSPF\u4e2d\u7684\u5b57\u6bcdO\u610f\u4e3aOpen\uff0c\u4e5f\u5c31\u662f\u5f00\u653e\u3001\u516c\u6709\u3002\u4e0e\u8ddd\u79bb\u77e2\u91cf\u8def\u7531\u534f\u8bae\u76f4\u63a5\u4ea4\u4e92\u8def\u7531\u5668\u7684\u8def\u7531\u8868\u4e0d\u540c\uff0cOSPF\u4f5c\u4e3a\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\uff0c\u8def\u7531\u5668\u4e4b\u95f4\u4ea4\u4e92\u7684\u662fLSA\uff0c\u8def\u7531\u5668\u5c06\u7f51\u7edc\u4e2d\u6cdb\u6d2a\u7684LSA\u641c\u96c6\u5230\u81ea\u5df1\u7684LSDB\u4e2d\uff0c\u8fd9\u6709\u52a9\u4e8eOSPF\u7406\u89e3\u6574\u5f20\u7f51\u7edc\u62d3\u6251\uff0c\u5e76\u5728\u6b64\u57fa\u7840\u4e0a\u901a\u8fc7SPF\u7b97\u6cd5\u8ba1\u7b97\u51fa\u4ee5\u81ea\u5df1\u4e3a\u6839\u7684\u3001\u5230\u8fbe\u7f51\u7edc\u5404\u4e2a\u89d2\u843d\u7684\u3001\u65e0\u73af\u7684\u6811\uff0c\u6700\u7ec8\uff0c\u8def\u7531\u5668\u5c06\u8ba1\u7b97\u51fa\u6765\u7684\u8def\u7531\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\u4e2d\u3002 OSPF \u57fa\u672c\u6982\u5ff5 Router-ID \u00b6 OSPF Router-ID\u7528\u4e8e\u5728OSPF\u57df\u4e2d\u552f\u4e00\u5730\u6807\u8bc6\u4e00\u53f0OSPF\u8def\u7531\u5668\uff0c\u4eceOSPF\u7f51\u7edc\u8bbe\u8ba1\u7684\u89d2\u5ea6\uff0c\u6211\u4eec\u8981\u6c42\u5168 OSPF\u57df\u5185\uff0c\u7981\u6b62\u51fa\u73b0\u4e24\u53f0\u8def\u7531\u5668\u62e5\u6709\u76f8\u540cRouterID\u7684\u60c5\u51b5\u3002 Router-ID\u7684\u683c\u5f0f\u4e0eIPv4\u5730\u5740\u7684\u683c\u5f0f\u76f8\u540c\uff0c\u4f8b\u5982192.168.1.1\u3002Router-ID\u7684\u8bbe\u5b9a\u53ef\u4ee5\u901a\u8fc7\u624b\u5de5\u914d\u7f6e\u7684\u65b9\u5f0f\u8fdb\u884c\uff0c \u6216\u8005\u901a\u8fc7\u534f\u8bae\u81ea\u52a8\u9009\u53d6\u7684\u65b9\u5f0f\u8fdb\u884c\u3002\u5f53\u7136\uff0c\u5728\u5b9e\u9645\u7f51\u7edc\u90e8\u7f72\u4e2d\uff0c\u5f3a\u70c8\u5efa\u8bae\u7f51\u7edc\u7ba1\u7406\u5458\u624b\u5de5\u914d\u7f6eOSPF\u7684Router-ID\uff0c\u56e0\u4e3a\u8fd9\u5173\u7cfb\u5230\u534f\u8bae\u7684\u7a33\u5b9a\u6027\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4f1a\u5c06\u8def\u7531\u5668\u7684Router-ID\u6307\u5b9a\u4e3a\u8be5\u8bbe\u5907\u4e0a\u7684\u67d0\u4e2a Loopback\u63a5\u53e3\u5730\u5740\u3002 Cost \u00b6 OSPF\u4f7f\u7528\u5f00\u9500\uff08Cost\uff09\u4f5c\u4e3a\u8def\u7531\u5ea6\u91cf\u503c\u3002\u9996\u5148\uff0c\u6bcf\u4e00\u4e2a\u6fc0\u6d3bOSPF\u7684\u63a5\u53e3\u90fd\u6709\u4e00\u4e2a\u63a5\u53e3\u7684Cost\u503c\u3002OSPF \u63a5\u53e3Cost=100M / \u63a5\u53e3\u5e26\u5bbd\uff0c\u5176\u4e2d100M\u4e3aOSPF\u7684\u53c2\u8003\u5e26\u5bbd\uff08Reference-Bandwidth\uff09\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u63a5\u53e3\u7684\u5e26\u5bbd\u8d8a\u9ad8\uff0c\u8be5\u63a5\u53e3\u7684OSPF Cost\u8d8a\u5c0f\u3002\u4e00\u6761OSPF\u8def\u7531\u7684Cost\u7531\u8be5\u8def\u7531\u4ece\u8def\u7531\u7684\u8d77\u6e90\u4e00\u8def\u5230\u8fbe\u672c\u5730\u7684\u6240\u6709\u5165\u63a5\u53e3Cost\u503c\u7684\u603b\u548c\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5bf9\u4e8eR2\u800c\u8a00\uff0c\u5176\u5230\u8fbeR1\u7684\u76f4\u8fde\u7f51\u7edc1.1.1.0/24\u7684OSPF\u8def\u7531\u7684Cost\u503c\u4e3aR1-GE0/0/0\u63a5\u53e3\u7684Cost \u52a0\u4e0aR2-S4/0/0\u63a5\u53e3\u7684Cost\uff0c\u4e5f\u5c31\u662f1+50=51\u3002\u76f8\u5bf9\u7684\uff0cR3\u5982\u679c\u901a\u8fc7OSPF\u5b66\u4e60\u52301.1.1.0/24\u8def\u7531\uff0c\u8be5\u8def\u7531\u7684 Cost\u503c\u5c31\u662f1+50+1=52\u3002 \u53e6\u5916\uff0c\u7531\u4e8e\u9ed8\u8ba4\u7684\u53c2\u8003\u5e26\u5bbd\u662f100M\uff0c\u8fd9\u610f\u5473\u7740\u66f4\u9ad8\u5e26\u5bbd\u7684\u4f20\u8f93\u4ecb\u8d28\uff08\u9ad8\u4e8e100M\uff09\u5728OSPF\u534f\u8bae\u4e2d\u5c06\u4f1a\u8ba1\u7b97\u51fa\u4e00\u4e2a\u5c0f\u4e8e1\u7684\u5206\u6570\uff0c\u8fd9\u5728OSPF\u534f\u8bae\u4e2d\u662f\u4e0d\u5141\u8bb8\u7684\uff08\u4f1a\u88ab\u56db\u820d\u4e94\u5165\u4e3a1\uff09\u3002\u800c\u73b0\u4eca\u7f51\u7edc\u8bbe\u5907\u6ee1\u5730\u90fd\u662f\u5927\u4e8e 100M\u5e26\u5bbd\u7684\u63a5\u53e3\uff0c\u8fd9\u65f6\u5019\u8def\u7531COST\u7684\u8ba1\u7b97\u5176\u5b9e\u5c31\u4e0d\u7cbe\u786e\u4e86\u3002\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528**bandwidth-reference**\u547d\u4ee4\u4fee\u6539\uff0c\u4f46\u662f\u8fd9\u6761\u547d\u4ee4\u8981\u8c28\u614e\u4f7f\u7528\uff0c\u4e00\u65e6\u8981\u914d\u7f6e\uff0c\u5219\u5efa\u8bae\u5168\u7f51OSPF\u8def\u7531\u5668\u90fd\u914d\u7f6e\u3002 \u62a5\u6587\u7c7b\u578b \u00b6 OSPF\u4e00\u5171\u6709\u4e94\u79cd\u62a5\u6587\uff0c\u5404\u6709\u5404\u7684\u7528\u9014\uff1a OSPF\u7684\u4e09\u5f20\u8868 \u00b6 \u90bb\u5c45\u8868\uff08Peer table\uff09\uff1a \u00b6 \u8def\u7531\u5668\u7684OSPF\u90bb\u5c45\u8868\u91cc\u5b58\u653e\u7684\u662f\u8be5\u8def\u7531\u5668\u53d1\u73b0\u7684\u3001\u76f4\u8fde\u94fe\u8def\u4e0a\u7684OSPF\u90bb\u5c45\u3002\u53ea\u6709\u76f4\u8fde\u7684\u8def\u7531\u5668\u4e4b\u95f4\u624d\u80fd\u591f\u5efa\u7acbOSPF\u90bb\u5c45\u5173\u7cfb\u3002OSPF\u901a\u8fc7Hello\u62a5\u6587\u53d1\u73b0\u76f4\u8fde\u94fe\u8def\u4e0a\u7684\u90bb\u5c45\u3002 \u94fe\u8def\u72b6\u6001\u6570\u636e\u5e93LSDB\uff08Link-state Database\uff09\uff1a \u00b6 OSPF\u7528LSA\u6765\u63cf\u8ff0\u7f51\u7edc\u62d3\u6251\u4fe1\u606f\u3001\u7f51\u6bb5\u4fe1\u606f\u6216\u8def\u7531\u4fe1\u606f\u3002\u8def\u7531\u5668\u7528LSDB\u6765\u5b58\u50a8\u7f51\u7edc\u4e2d\u7684LSA\u3002OSPF \u5c06\u81ea\u5df1\u4ea7\u751f\u7684\u4ee5\u53ca\u90bb\u5c45\u901a\u544a\u7684LSA\u641c\u96c6\u5e76\u5b58\u50a8\u5728LSDB\u4e2d\uff0c\u7136\u540e\u57fa\u4e8e\u8fd9\u4e9b\u6570\u636e\uff0c\u8fd0\u884cSPF\u7b97\u6cd5\u5e76\u6700\u7ec8\u5f97\u5230\u4e00\u68f5\u65e0\u73af\u7684\u6811\u3002\u638c\u63e1LSDB\u7684\u67e5\u770b\u4ee5\u53ca\u5bf9LSA\u7684\u6df1\u5165\u5206\u6790\u624d\u80fd\u591f\u6df1\u5165\u7406\u89e3OSPF\u3002 OSPF\u8def\u7531\u8868\uff08Routing table\uff09\uff1a \u00b6 \u57fa\u4e8eLSDB\u8fdb\u884cSPF\u8ba1\u7b97\u540e\u5f97\u51fa\u7684OSPF\u8def\u7531\u88ab\u52a0\u8f7d\u5230OSPF\u8def\u7531\u8868\u4e2d\u3002 OSPF\u90bb\u5c45\u5173\u7cfb\u5efa\u7acb\u8fc7\u7a0b \u00b6 OSPF\u90bb\u5c45\u5173\u7cfb\u7684\u5efa\u7acb\u8fc7\u7a0b\u662f\u6211\u4eec\u5728\u5b66\u4e60OSPF\u8fc7\u7a0b\u4e2d\u7684\u4e00\u4e2a\u91cd\u70b9\uff0c\u800c\u4e14\u975e\u5e38\u5177\u6709\u7814\u7a76\u4ef7\u503c\uff0c\u5c31OSPF\u7684\u5b9e\u9645\u90e8\u7f72\u800c\u8a00\uff0c\u638c\u63e1\u8fd9\u91cc\u5934\u7684\u673a\u5236\u4e5f\u662f\u5f88\u6709\u5fc5\u8981\u7684\uff0c\u56e0\u4e3a\u90bb\u5c45\u5173\u7cfb\u7684\u5efa\u7acb\u662fOSPF\u5de5\u4f5c\u7684\u57fa\u672c\uff0c\u5982\u679c\u8fde\u90bb\u5c45\u5173\u7cfb\u90fd\u5efa\u7acb\u4e0d\u8d77\u6765\uff0c\u5c31\u522b\u8c08\u5176\u4ed6\u7684\u4e86\u3002\u5728\u5b9e\u9645\u4e1a\u52a1\u90e8\u7f72\u4e2d\uff0c\u53ef\u80fd\u4f1a\u78b0\u5230\u5404\u79cd\u95ee\u9898\u5bfc\u81f4OSPF\u90bb\u5c45\u5173\u7cfb\u65e0\u6cd5\u6b63\u5e38\u5efa\u7acb\uff0c\u56e0\u6b64\u8fd9\u4e2a\u5185\u5bb9\u975e\u5e38\u503c\u5f97\u63a8\u6572\u3002 \u672c\u6587\u63cf\u8ff0\u6570\u636e\u901a\u4fe1\u57fa\u7840\u6027\u77e5\u8bc6\uff0c\u56e0\u6b64\u66f4\u52a0\u6df1\u5165\u7684\u5185\u5bb9\u6682\u4e0d\u6d89\u53ca\u3002 OSPF\u7f51\u7edc\u7c7b\u578b \u00b6 \u4e00\u65e6\u6211\u4eec\u5728\u8def\u7531\u5668\u7684\u67d0\u4e2a\u63a5\u53e3\u4e0a\u6fc0\u6d3b\u4e86OSPF\uff0c\u90a3\u4e48\u8def\u7531\u5668\u5c06\u4f1a\u6839\u636e\u8fd9\u4e2a\u63a5\u53e3\u7684\u6570\u636e\u94fe\u8def\u5c42\u5c01\u88c5\u534f\u8bae\uff0c\u9009\u62e9\u5bf9\u5e94\u7684OSPF\u7f51\u7edc\u7c7b\u578b\u5e76\u8fdb\u884c\u5de5\u4f5c\uff0c\u6ce8\u610f\uff0c\u9488\u5bf9\u4e0d\u540c\u7684\u7f51\u7edc\u7c7b\u578b\uff0cOSPF\u5728\u63a5\u53e3\u4e0a\u7684\u64cd\u4f5c\u5c06\u6709\u6240\u4e0d\u540c\u3002\u56e0\u6b64\u7b80\u5355\u5730\u8bf4\uff0cOSPF\u7f51\u7edc\u7c7b\u578b\u5b9e\u9645\u4e0a\u662fOSPF\u7684\u4e00\u4e2a\u63a5\u53e3\u7ea7\u522b\u7684\u5c5e\u6027\uff0c\u5b83\u5c06\u5f71\u54cdOSPF\u5728\u8be5\u63a5\u53e3\u4e0a\u7684\u64cd\u4f5c\u3002 OSPF\u652f\u6301\u7684\u7f51\u7edc\u7c7b\u578b\uff1a \u00b6 \u70b9\u5230\u70b9\u7f51\u7edc\uff08Point-To-Point Network\uff09 \u5e7f\u64ad\u578b\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\uff08Broadcast Multiple Access Network\uff09 \u975e\u5e7f\u64ad\u578b\u591a\u8def\u8bbf\u95ee\u7f51\u8def\uff08Non-Broadcast Multiple Access Network\uff09 \u70b9\u5230\u591a\u70b9\u7f51\u7edc\uff08Point-To- MultiplePoint Network\uff09 \u5e38\u89c1\u6570\u636e\u94fe\u8def\u5c42\u534f\u8bae\u5bf9\u5e94\u7684\u9ed8\u8ba4\u7f51\u7edc\u7c7b\u578b\uff1a \u00b6 \u7f51\u7edc\u7c7b\u578b \u542b\u4e49 \u5e7f\u64ad\u7c7b\u578b \u5f53\u94fe\u8def\u5c42\u534f\u8bae\u662fEthernet\u3001FDDI\u65f6\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cOSPF\u8ba4\u4e3a\u7f51\u7edc\u7c7b\u578b \u662fBroadcast\u3002\u5728\u8be5\u7c7b\u578b\u7684\u7f51\u7edc\u4e2d\uff1a \u901a\u5e38\u4ee5\u7ec4\u64ad\u5f62\u5f0f\u53d1\u9001Hello\u62a5\u6587\u3001LSU\u62a5\u6587\u548cLSAck\u62a5\u6587\u3002\u5176\u4e2d\uff0c 224.0.0.5\u7684\u7ec4\u64ad\u5730\u5740\u4e3aOSPF\u8bbe\u5907\u7684\u9884\u7559IP\u7ec4\u64ad\u5730\u5740\uff1b224.0.0.6\u7684\u7ec4\u64ad\u5730\u5740\u4e3aOSPF DR/BDR\u7684\u9884\u7559IP\u7ec4\u64ad\u5730\u5740\u3002 \u4ee5\u5355\u64ad\u5f62\u5f0f\u53d1\u9001DD\u62a5\u6587\u548cLSR\u62a5\u6587\u3002 NBMA\u7c7b\u578b \u5f53\u94fe\u8def\u5c42\u534f\u8bae\u662f\u5e27\u4e2d\u7ee7\u3001X.25\u65f6\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cOSPF\u8ba4\u4e3a\u7f51\u7edc\u7c7b\u578b\u662f NBMA\u3002 \u5728\u8be5\u7c7b\u578b\u7684\u7f51\u7edc\u4e2d\uff0c\u4ee5\u5355\u64ad\u5f62\u5f0f\u53d1\u9001\u534f\u8bae\u62a5\u6587\uff08Hello\u62a5\u6587\u3001DD\u62a5\u6587\u3001 LSR\u62a5\u6587\u3001LSU\u62a5\u6587\u3001LSAck\u62a5\u6587\uff09\u3002 \u70b9\u5230\u591a\u70b9P2MP\u7c7b\u578b \u6ca1\u6709\u4e00\u79cd\u94fe\u8def\u5c42\u534f\u8bae\u4f1a\u88ab\u7f3a\u7701\u7684\u8ba4\u4e3a\u662fPoint-to-Multipoint\u7c7b\u578b\u3002\u70b9\u5230\u591a \u70b9\u5fc5\u987b\u662f\u7531\u5176\u4ed6\u7684\u7f51\u7edc\u7c7b\u578b\u5f3a\u5236\u66f4\u6539\u7684\u3002\u5e38\u7528\u505a\u6cd5\u662f\u5c06\u975e\u5168\u8fde\u901a\u7684 NBMA\u6539\u4e3a\u70b9\u5230\u591a\u70b9\u7684\u7f51\u7edc\u3002\u5728\u8be5\u7c7b\u578b\u7684\u7f51\u7edc\u4e2d\uff1a \u4ee5\u7ec4\u64ad\u5f62\u5f0f\uff08224.0.0.5\uff09\u53d1\u9001Hello\u62a5\u6587\u3002 \u4ee5\u5355\u64ad\u5f62\u5f0f\u53d1\u9001\u5176\u4ed6\u534f\u8bae\u62a5\u6587\uff08DD\u62a5\u6587\u3001LSR\u62a5\u6587\u3001LSU\u62a5\u6587\u3001 LSAck\u62a5\u6587\uff09\u3002 \u70b9\u5230\u70b9P2P\u7c7b\u578b \u5f53\u94fe\u8def\u5c42\u534f\u8bae\u662fPPP\u3001HDLC\u548cLAPB\u65f6\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cOSPF\u8ba4\u4e3a\u7f51\u7edc \u7c7b\u578b\u662fP2P\u3002 \u5728\u8be5\u7c7b\u578b\u7684\u7f51\u7edc\u4e2d\uff0c\u4ee5\u7ec4\u64ad\u5f62\u5f0f\uff08224.0.0.5\uff09\u53d1\u9001\u534f\u8bae\u62a5\u6587\uff08Hello\u62a5\u6587\u3001DD\u62a5\u6587\u3001LSR\u62a5\u6587\u3001LSU\u62a5\u6587\u3001LSAck\u62a5\u6587\uff09\u3002 \u5982\u679c\u4e00\u4e2a\u63a5\u53e3\u662f\u4ee5\u592a\u7f51\u63a5\u53e3\uff0c\u90a3\u4e48\u8be5\u63a5\u53e3\u6fc0\u6d3bOSPF\u540e\uff0c\u5176\u7f3a\u7701\u7684OSPF\u7f51\u7edc\u7c7b\u578b\u4e3aBroadcast\uff0c\u4e5f\u5c31\u662f\u5e7f\u64ad\u578b\u3002\u800c\u5982\u679c\u4e00\u4e2a\u63a5\u53e3\u662fSerial\u63a5\u53e3\uff0c\u4e8c\u5c42\u5c01\u88c5\u4e3aHDLC\u6216\u8005PPP\uff0c\u90a3\u4e48\u6fc0\u6d3bOSPF\u540e\uff0c\u5176\u7f3a\u7701\u7684OSPF\u7f51\u7edc\u7c7b\u578b\u5c31\u662fP2P\uff08Point-to-Point\uff0c\u70b9\u5bf9\u70b9\uff09\u3002\u63a5\u53e3\u7684OSPF\u7f51\u7edc\u7c7b\u578b\u662f\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u4fee\u6539\u7684\u3002 DR\u3001BDR \u00b6 MA\uff08Multi-Access\uff0c\u591a\u8def\u8bbf\u95ee\uff09\u7f51\u7edc\u6307\u7684\u662f\u4e00\u4e2a\u53ef\u4ee5\u540c\u65f6\u63a5\u5165\u591a\u4e2a\u8282\u70b9\u7684\u7f51\u7edc\uff0c\u5728\u8fd9\u4e2a\u73af\u5883\u4e2d\uff0c\u4efb\u4f55\u4e00\u4e2a\u8282\u70b9\u90fd\u80fd\u901a\u8fc7\u8fd9\u4e2a\u7f51\u7edc\u8bbf\u95ee\u5176\u4ed6\u8282\u70b9\u3002MA\u7f51\u7edc\u53ef\u4ee5\u5206\u4e3aBMA\uff08Broadcast Multi-Access\uff0c\u5e7f\u64ad\u578b\u591a\u8def\u8bbf\u95ee\uff09\u7f51\u7edc\u548cNBMA\uff08Non-Broadcast Multiple Access\uff0c\u975e\u5e7f\u64ad\u578b\u591a\u8def\u8bbf\u95ee\uff09\u7f51\u7edc\u3002\u5bf9\u4e8eBMA\u7f51\u7edc\uff0c\u5178\u578b\u7684\u4ee3\u8868\u662f\u4ee5\u592a\u7f51\uff0c\u800c\u5bf9\u4e8eNBMA\uff0c\u5178\u578b\u7684\u4ee3\u8868\u662f\u5e27\u4e2d\u7ee7\u3002 \u6211\u4eec\u4ee5\u4ee5\u592a\u7f51\u4e3a\u4f8b\uff0c\u4f8b\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6240\u6709\u7684\u8def\u7531\u5668\u90fd\u8fde\u63a5\u5728\u540c\u4e00\u53f0\u4ee5\u592a\u7f51\u4e8c\u5c42\u4ea4\u6362\u673a\u4e0a\uff08\u56fe\u7247\u4e2d\u5e76\u6ca1\u6709\u7ed8\u5236\u51fa\u4ea4\u6362\u673a\uff09\uff0c\u5e76\u4e14\u5c5e\u4e8e\u76f8\u540c\u7684VLAN\uff0c\u800c\u4e14\u89c4\u5212\u76f8\u540c\u7684IP\u7f51\u6bb5\uff0c\u5728\u8fd9\u4e2a\u73af\u5883\u4e2d\uff0c\u4efb\u4f55\u4e00\u53f0\u8def\u7531\u5668\u90fd\u80fd\u901a\u8fc7\u63a5\u5165\u8be5\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u8bbf\u95ee\u5176\u4ed6\u8def\u7531\u5668\uff0c\u8fd9\u5c31\u662f\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\u7684\u4f53\u73b0\u3002\u6b64\u5916\u8fd9\u4e2a\u7f51\u7edc\u8fd8\u652f\u6301\u5e7f\u64ad\u3002\u5728\u8fd9\u4e2a\u7f51\u7edc\u4e2d\uff0c\u5982\u679c\u5c06\u6240\u6709\u8def\u7531\u5668\u7684\u63a5\u53e3\u90fd\u6fc0\u6d3bOSPF\u5e76\u4e14\u8fd9\u4e9b\u63a5\u53e3\u4e24\u4e24\u5efa\u7acbOSPF\u90bb\u5c45\u5173\u7cfb\uff0c\u90a3\u4e48\u8fd9\u5c31\u610f\u5473\u7740\u7f51\u7edc\u4e2d\u5171\u6709\uff1a n(n-1)/2 \u00b6 \u8fd9\u4e48\u591a\u4e2aOSPF\u90bb\u5c45\u5173\u7cfb\uff0c\u7ef4\u62a4\u5982\u6b64\u591a\u7684\u90bb\u5c45\u5173\u7cfb\u4e0d\u4ec5\u4f1a\u5bf9\u8bbe\u5907\u6027\u80fd\u9020\u6210\u5f71\u54cd\uff0c\u66f4\u589e\u52a0\u4e86\u7f51\u7edc\u4e2dLSA\u7684\u6cdb\u6d2a\u6570\u91cf\uff0c\u5982\u4e0a\u56fe\uff08\u53f3\uff09\u6240\u793a\u3002 \u4e3a\u51cf\u5c11MA\u7f51\u7edc\u4e2d\u7684OSPF\u6d41\u91cf\u3001\u4f18\u5316OSPF\u90bb\u5c45\u5173\u7cfb\u7ed3\u6784\uff0cOSPF\u4f1a\u5728\u6bcf\u4e00\u4e2aMA\u7f51\u7edc\u4e2d\u9009\u4e3e\u4e00\u4e2a\u6307\u5b9a\u8def\u7531\u5668 (DR) \u548c\u4e00\u4e2a\u5907\u7528\u6307\u5b9a\u8def\u7531\u5668 (BDR)\u3002 DR\u9009\u4e3e\u89c4\u5219\uff1a\u5728\u4e00\u4e2aMA\u7f51\u7edc\u4e2d\uff0c\u6700\u9ad8OSPF\u63a5\u53e3\u4f18\u5148\u7ea7\u7684\u62e5\u6709\u8005\u88ab\u9009\u4f5cDR\uff0c\u5982\u679c\u4f18\u5148\u7ea7\u76f8\u7b49\uff08\u9ed8\u8ba4\u503c\u4e3a1\uff09\uff0c\u5219\u5177\u6709\u6700\u9ad8\u7684OSPF Router-ID\u7684\u8def\u7531\u5668\u88ab\u9009\u4e3e\u6210DR\u3002DR\u5177\u6709\u975e\u62a2\u5360\u6027\uff0c\u4e5f\u5c31\u662f\u8bf4\u5982\u679c\u8be5MA \u7f51\u7edc\u4e2d\u5df2\u7ecf\u9009\u4e3e\u51fa\u4e86DR\uff0c\u90a3\u4e48\u540e\u7eed\u5373\u4f7f\u6709\u5177\u5907\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u8bbe\u5907\u52a0\u5165\uff0c\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u5f53\u524dDR\u7684\u89d2\u8272\u3002 \u6307\u5b9a\u8def\u7531\u5668 (DR)\uff1aDR\u8d1f\u8d23\u4fa6\u542cMA\u7f51\u7edc\u4e2d\u7684\u62d3\u6251\u53d8\u66f4\u4fe1\u606f\u5e76\u5c06\u53d8\u66f4\u4fe1\u606f\u901a\u77e5\u7ed9\u5176\u4ed6\u8def\u7531\u5668\uff0c\u540c\u65f6\u8d1f\u8d23\u4ee3\u8868\u8be5MA\u7f51\u7edc\u53d1\u9001Type-2 LSA\u3002\u5728\u4e00\u4e2aMA\u7f51\u7edc\u4e2d\uff0c\u6240\u6709\u7684OSPF\u8def\u7531\u5668\u90fd\u4e0eDR\uff08\u4ee5\u53caBDR\uff09\u5efa\u7acb\u5168\u6bd7\u90bb\u7684OSPF\u90bb\u63a5\u5173\u7cfb\u3002 \u5907\u7528\u6307\u5b9a\u8def\u7531\u5668 (BDR)\uff1aBDR\u4f1a\u76d1\u63a7DR\u7684\u72b6\u6001\uff0c\u5e76\u5728\u5f53\u524dDR\u53d1\u751f\u6545\u969c\u65f6\u63a5\u66ff\u5176\u89d2\u8272\u3002 \u6ce8\u610f\uff1aDR\u53caBDR\u7684\u8eab\u4efd\u72b6\u6001\u662f\u57fa\u4e8eOSPF\u63a5\u53e3\u7684\uff0c\u6240\u4ee5\u5982\u679c\u6211\u4eec\u8bf4\uff1a\u201c\u8fd9\u53f0\u8def\u7531\u5668\u662fDR\u201d\uff0c\u90a3\u4e48\u8fd9\u79cd\u8bf4\u6cd5\u662f\u4e0d\u4e25\u8c28\u7684\uff0c\u4e25\u683c\u7684\u8bf4\uff0c\u5e94\u8be5\u662f\uff1a\u201c\u8fd9\u53f0\u8def\u7531\u5668\u7684\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5728\u8fd9\u4e2aMA\u7f51\u7edc\u4e0a\u662fDR\u201d\u3002 \u5728\u4e00\u4e2aMA\u7f51\u7edc\u4e2d\uff0c\u6240\u6709\u7684DRother\u8def\u7531\u5668\uff08\u65e2\u975eDR\uff0c\u53c8\u975eBDR\uff09\u5747\u53ea\u4e0eDR\u548cBDR\u5efa\u7acb\u5168\u6bd7\u90bb\u7684\u90bb\u63a5\u5173\u7cfb\uff0cDRother\u95f4\u4e0d\u5efa\u7acb\u90bb\u63a5\u5173\u7cfb\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u8be5MA\u7f51\u7edc\u4e2d\u7684\u8bbe\u5907\u9700\u8981\u7ef4\u62a4\u7684OSPF\u90bb\u5c45\u5173\u7cfb\u6570\u91cf\u5927\u5e45\u51cf\u5c0f\uff1aM= (n-2)\u00d72+1\uff0c\u8bbe\u5907\u6027\u80fd\u4e5f\u4f1a\u5f97\u5230\u4f18\u5316\u3002 OSPF\u5728Broadcast\u53caNBMA\u7f51\u7edc\u4e2d\u90fd\u4f1a\u9009\u4e3eDR\uff0c\u4f46\u662f\u5728P2P\u6216P2MP\u7f51\u7edc\u4e2d\u5219\u4e0d\u4f1a\u3002\u63a5\u4e0b\u53bb\u770b\u770b\u5728MA\u7f51\u7edc\u4e2d\uff0c\u6709\u4e86DR\u3001BDR\u4e4b\u540e\uff0cLSA\u7684\u6cdb\u6d2a\u8fc7\u7a0b\uff1a \u5047\u8bbe\u7f51\u7edc\u5df2\u7ecf\u5b8c\u6210\u4e86OSPF\u6536\u655b\uff0c\u73b0\u5728\u7a81\u7136R3\u4e0b\u6302\u7684\u4e00\u4e2a\u7f51\u7edc\u53d1\u751f\u4e86\u6545\u969c\uff1b \u8def\u7531\u5668R3\u7528224.0.0.6\uff08\u5373R3\u4ee5\u8be5\u7ec4\u64ad\u5730\u5740\u4e3a\u76ee\u7684IP\u5730\u5740\uff0c\u53d1\u9001OSPF\u62a5\u6587\uff09\u901a\u77e5DR\u53caBDR\uff1b DR\u3001BDR\u76d1\u542c224.0.0.6\u8fd9\u4e00\u7ec4\u64ad\u5730\u5740\uff0c\u83b7\u77e5\u4e86\u8be5\u66f4\u65b0\uff1b DR\u5411\u7ec4\u64ad\u5730\u5740224.0.0.5\u53d1\u9001\u66f4\u65b0\u4ee5\u901a\u77e5\u5176\u5b83\u8def\u7531\u5668\uff1b \u6240\u6709\u7684OSPF\u8def\u7531\u5668\u76d1\u542c224.0.0.5\u8fd9\u4e00\u7ec4\u64ad\u5730\u5740\uff1b \u8def\u7531\u5668\u6536\u5230\u5305\u542b\u53d8\u5316\u540e\u7684LSA\u7684\u66f4\u65b0\u540e\uff0c\u5237\u65b0\u81ea\u5df1\u7684LSDB\uff0c\u8fc7\u4e00\u6bb5\u65f6\u95f4(SPF\u5ef6\u8fdf)\uff0c\u5bf9\u66f4\u65b0\u7684\u94fe\u8def\u72b6\u6001\u6570\u636e\u5e93\u6267\u884cSPF\u7b97\u6cd5\uff0c\u5fc5\u8981\u65f6\u66f4\u65b0\u8def\u7531\u8868\u3002 OSPF\u4f7f\u7528\u4e24\u4e2a\u77e5\u540d\u7684\u7ec4\u64ad\u5730\u5740\uff1a224.0.0.5\u53ca224.0.0.6\uff0c\u8fd9\u662f\u4e00\u4e2a\u5e38\u8bc6\uff0c\u9700\u719f\u8bb0\u3002\u6240\u6709\u7684OSPF\u8def\u7531\u5668\uff08\u7684\u63a5\u53e3\uff09\u90fd\u4f1a\u4fa6\u542c\u53d1\u5411224.0.0.5\u7684\u62a5\u6587\uff0c\u5728\u6b64\u57fa\u7840\u4e4b\u4e0a\uff0cDR/BDR\u4f1a\u4fa6\u542c224.0.0.6\u3002 OSPF \u533a\u57df\uff08Area\uff09\u7684\u6982\u5ff5 \u00b6 \u5355\u533a\u57df\u5b58\u5728\u7684\u95ee\u9898\uff1a \u00b6 \u8bbe\u60f3\u4e00\u4e0b\uff0c\u5982\u679cOSPF\u6ca1\u6709\u591a\u533a\u57df\u7684\u6982\u5ff5\uff0c\u6216\u8005\u6574\u4e2aOSPF\u7f51\u7edc\u5c31\u662f\u4e00\u4e2a\u533a\u57df\uff0c\u90a3\u4e48\u4f1a\u6709\u4ec0\u4e48\u95ee\u9898\uff1f\u5728\u4e00\u4e2a\u533a\u57df\u5185\uff0cLSA\u4f1a\u88ab\u6cdb\u6d2a\u5230\u6574\u4e2a\u533a\u57df\uff0c\u6bcf\u4e00\u53f0\u8def\u7531\u5668\u90fd\u4f1a\u6536\u5230\u533a\u57df\u5185\u7684LSA\u5e76\u4e14\u5b58\u50a8\u5728\u81ea\u5df1\u7684LSDB \u4e2d\uff0cOSPF\u89c4\u5b9a\u540c\u5c5e\u4e8e\u4e00\u4e2a\u533a\u57df\u7684\u8def\u7531\u5668\u5fc5\u987b\u6709\u7edf\u4e00\u7684LSDB\uff0c\u56e0\u4e3a\u53ea\u6709\u8fd9\u6837\u624d\u80fd\u591f\u8ba9OSPF\u8fdb\u884c\u51c6\u786e\u7684\u8ba1\u7b97\u3002 \u5982\u679c\u7f51\u7edc\u89c4\u6a21\u7279\u522b\u5927\uff0c\u5bb9\u7eb3\u7684\u8def\u7531\u5668\u6570\u91cf\u7279\u522b\u591a\uff0c\u5219\u533a\u57df\u5185\u6cdb\u6d2a\u7684LSA\u6570\u91cf\u5c31\u4f1a\u7279\u522b\u591a\uff0c\u90a3\u4e48\u6240\u6709\u7684\u8def\u7531\u5668\u5c06\u4e0d\u5f97\u4e0d\u7ef4\u62a4\u4e00\u4e2a\u5e9e\u5927\u7684LSDB\uff0c\u663e\u7136\u8fd9\u589e\u52a0\u4e86\u8def\u7531\u5668\u7684\u8d44\u6e90\u6d88\u8017\u3002\u53e6\u5916\uff0c\u4e00\u65e6\u7f51\u7edc\u4e2d\u53d1\u751f\u62d3\u6251\u53d8\u66f4\uff0c\u5219\u53c8\u5c06\u5f15\u53d1\u5927\u91cf\u7684LSA\u6cdb\u6d2a\uff0c\u540c\u65f6\u6240\u6709\u7684\u8def\u7531\u5668\u53c8\u8981\u91cd\u65b0\u7684\u8fdb\u884cSPF\u8ba1\u7b97\u3002\u540c\u65f6\uff0c\u6bcf\u53f0\u8def\u7531\u5668\u90fd\u9700\u8981\u7ef4\u62a4\u7684\u8def\u7531\u8868\u8d8a\u6765\u8d8a\u5927\uff0c\u56e0\u4e3a\u5355\u533a\u57df\u5185\u8def\u7531\u65e0\u6cd5\u5b9e\u65bd\u6c47\u603b\u3002 OSPF\u591a\u533a\u57df\uff1a \u00b6 \u57fa\u4e8e\u4e0a\u8ff0\u539f\u56e0\uff0cOSPF\u8bbe\u8ba1\u4e86\u533a\u57df\uff08Area\uff09\u7684\u6982\u5ff5\uff0c\u6bcf\u4e2a\u533a\u57df\u90fd\u4f7f\u7528area-ID\u8fdb\u884c\u6807\u8bc6\uff0c\u901a\u5e38area-ID\u91c7\u7528\u5341\u8fdb\u5236\u5f62\u5f0f\u6807\u8bc6\uff0c\u4f8b\u5982area 0\uff0carea 1\u7b49\uff0c\u4e5f\u53ef\u91c7\u7528\u70b9\u5206\u5341\u8fdb\u5236\u7684\u5f62\u5f0f\uff08\u4e0eIPv4\u5730\u5740\u683c\u5f0f\u76f8\u540c\uff09\u6765\u6807\u8bc6\uff0c \u4f8b\u5982area 0.0.0.0\uff08\u7b49\u540c\u4e8earea 0\uff09\u3002\u5f53\u7136\uff0c\u4e3a\u4e86\u7b80\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u901a\u5e38\u91c7\u7528\u524d\u9762\u4e00\u79cd\u5f62\u5f0f\u3002 \u591a\u533a\u57df\u7684\u8bbe\u8ba1\u51cf\u5c0f\u4e86LSA\u6d2a\u6cdb\u7684\u8303\u56f4\uff0c\u6709\u6548\u5730\u628a\u62d3\u6251\u53d8\u5316\u63a7\u5236\u5728\u533a\u57df\u5185\uff0c\u8fbe\u5230\u7f51\u7edc\u4f18\u5316\u7684\u76ee\u7684\uff1b \u5728\u533a\u57df\u8fb9\u754c\u53ef\u4ee5\u505a\u8def\u7531\u6c47\u603b\uff0c\u51cf\u5c0f\u4e86\u8def\u7531\u8868\u89c4\u6a21\uff1b \u5145\u5206\u5229\u7528OSPF\u7279\u6b8a\u533a\u57df\u7684\u7279\u6027\uff0c\u8fdb\u4e00\u6b65\u51cf\u5c11LSA\u6cdb\u6d2a\uff0c\u4ece\u800c\u4f18\u5316\u8def\u7531\uff1b \u591a\u533a\u57df\u7279\u6027\u63d0\u9ad8\u4e86\u7f51\u7edc\u7684\u53ef\u6269\u5c55\u6027\uff0c\u6709\u5229\u4e8e\u7ec4\u5efa\u5927\u89c4\u6a21\u7684OSPF\u7f51\u7edc\u3002 OSPF\u533a\u57df\u4e2d\u7684\u9aa8\u5e72\u533a\u57dfarea0\uff1a \u00b6 \u5728\u90e8\u7f72OSPF\u65f6\uff0c\u5982\u679c\u5b58\u5728\u591a\u533a\u57df\uff0c\u5219\u8981\u6c42OSPF\u57df\u5185\u5fc5\u987b\u6709\u4e14\u53ea\u80fd\u6709\u4e00\u4e2aarea0\u3002 Area 0\u4e3aOSPF\u7684\u9aa8\u5e72\u533a\u57df\uff0c\u9aa8\u5e72\u533a\u57df\u8d1f\u8d23\u5728\u975e\u9aa8\u5e72\u533a\u57df\u4e4b\u95f4\u53d1\u5e03\u7531\u533a\u57df\u8fb9\u754c\u8def\u7531\u5668\u6c47\u96c6\u7684\u8def\u7531\u4fe1\u606f\uff0c \u4ece\u800c\u5b9e\u73b0\u533a\u57df\u4e4b\u95f4\u7684\u4e92\u901a\u3002\u4e3a\u907f\u514d\u533a\u57df\u95f4\u7684\u8def\u7531\u73af\u8def\uff0c\u975e\u9aa8\u5e72\u533a\u57df\u4e4b\u95f4\u4e0d\u5141\u8bb8\u76f4\u63a5\u76f8\u4e92\u53d1\u5e03\u533a\u57df\u95f4\u8def\u7531\u3002\u56e0\u6b64\uff0c\u6bcf\u4e2a\u975e\u9aa8\u5e72\u533a\u57df\u90fd\u5fc5\u987b\u8fde\u63a5\u5230\u9aa8\u5e72\u533a\u57df\u3002 OSPF\u8def\u7531\u5668\u7684\u89d2\u8272 \u00b6 OSPF\u8def\u7531\u5668\u7684\u89d2\u8272\uff1a \u533a\u57df\u5185\u8def\u7531\u5668\uff08Internal Router\uff09 \u533a\u57df\u8fb9\u754c\u8def\u7531\u5668\uff08Area Border Router\uff09 \u9aa8\u5e72\u8def\u7531\u5668\uff08Backbone Router\uff09 AS\u8fb9\u754c\u8def\u7531\u5668\uff08AS Boundary Router\uff09 OSPF \u7684\u57fa\u7840\u914d\u7f6e \u57fa\u7840\u914d\u7f6e \u00b6 \u521b\u5efa\u4e00\u4e2aOSPF\u8fdb\u7a0b\uff0c\u5e76\u6307\u5b9aOSPF\u8fdb\u7a0b\u53f7\u53caRouter-ID \u00b6 [Router] ospf [ process-id | router-id router-id ] \u5176\u4e2dprocess-id\u4e3a\u8fdb\u7a0b\u53f7\u3002\u53e6\u5916**Router-ID**\u5173\u952e\u5b57\u6307\u5b9a\u7684\u662f\u672c\u53f0\u8def\u7531\u5668\u5728\u8be5OSPF\u8fdb\u7a0b\u4e2d\u4f7f\u7528\u7684Router- ID\uff0c\u5efa\u8bae\u5728\u521b\u5efaOSPF\u8fdb\u7a0b\u65f6\u91c7\u7528\u8be5\u65b9\u6cd5\u624b\u5de5\u914d\u7f6eRouter-ID\u3002\u5982\u679c\u5728\u521b\u5efaOSPF\u8fdb\u7a0b\u65f6\uff0c\u6ca1\u6709\u624b\u5de5\u6307\u5b9aRouter-ID\uff0c\u5219\u8def\u7531\u5668\u4f1a\u81ea\u52a8\u4e3a\u8be5\u8fdb\u7a0b\u6307\u5b9a\u4e00\u4e2aRouter-ID\u3002 \u8fdb\u5165OSPF\u533a\u57df\u89c6\u56fe\uff0c\u5c06\u7279\u5b9a\u7684\u63a5\u53e3\u6fc0\u6d3bOSPF \u00b6 \u4e0a\u9762\u7684**network**\u547d\u4ee4\u7528\u4e8e\u5728\u7279\u5b9a\u63a5\u53e3\u4e0a\u6fc0\u6d3bOSPF\u3002\u5728\u6fc0\u6d3b\u67d0\u4e2a\u63a5\u53e3\u7684OSPF\u529f\u80fd\u65f6\uff0c\u5fc5\u987b\u5148\u8fdb\u5165\u7279\u5b9a \u7684OSPF\u533a\u57df\u914d\u7f6e\u89c6\u56fe\u3002\u5728**network**\u5173\u952e\u5b57\u540e\uff0c\u7d27\u8ddf\u7740\u7684\u662fIP\u5730\u5740\uff0c\u7136\u540e\u662f\u901a\u914d\u7b26\u63a9\u7801\uff0c\u8fd9\u4e24\u8005\u662f\u606f\u606f\u76f8\u5173\u7684\uff0c\u5b83\u4eec\u5728\u4e00\u8d77\u7684\u8fd0\u7b97\u51b3\u5b9a\u4e86\u672c\u8bbe\u5907\u54ea\u4e9b\u63a5\u53e3\u4f1a\u6fc0\u6d3bOSPF\u3002 \u901a\u914d\u7b26\u63a9\u7801Wildcard-mask\uff1a \u00b6 \u901a\u914d\u7b26\u63a9\u7801\u662f\u4e00\u4e2a\u7528\u4e8e\u51b3\u5b9aIP\u5730\u5740\u4e2d\u54ea\u4e9b\u6bd4\u7279\u4f4d\u8be5\u4e25\u683c\u5339\u914d\uff08\u4e3a0\u7684\u6bd4\u7279\u4f4d\u4ee3\u8868\u9700\u4e25\u683c\u5339\u914d\uff09\u3001\u54ea\u4e9b\u6bd4\u7279\u4f4d\u65e0\u9700\u5339\u914d\uff08\u4e3a1\u7684\u6bd4\u7279\u4f4d\uff09\u768432bit\u6570\u503c\u3002\u901a\u914d\u7b26\u63a9\u7801\u4e5f\u5e38\u7528\u4e8e\u5904\u7406\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff08ACL\uff09\u3002\u4e0b\u9762\u770b\u4e00\u4e0b\u7f51\u7edc\u63a9\u7801netmask\u548c\u901a\u914d\u7b26\u63a9\u7801wildcard-mask\u7684\u533a\u522b\uff1a \u63a5\u4e0b\u53bb\u770b\u51e0\u4e2a\u4f8b\u5b50\uff1a \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c\u6211\u4eec\u5728\u8def\u7531\u5668\u4e0a\u91c7\u7528\u5982\u4e0b\u914d\u7f6e\uff1a \u6ce8\u610f\uff0c\u6211\u4eec\u5728**network**\u547d\u4ee4\u540e\u5173\u8054\u7684IP\u5730\u5740\u662f172.16.1.0\uff0c\u901a\u914d\u7b26\u63a9\u7801\u662f0.0.0.255\uff0c\u5c06\u8fd9\u4e24\u4e2a\u6570\u90fd\u8f6c\u6210 \u4e8c\u8fdb\u5236\uff0c\u7136\u540e\u5c06\u5404\u4e2a\u6bd4\u7279\u4f4d\u4e00\u4e00\u5bf9\u5e94\uff08\u5982\u56fe\u6240\u793a\uff09\uff0c\u901a\u914d\u7b26\u4e3a0\u7684\u6bd4\u7279\u4f4d\uff0c\u5fc5\u987b\u4e25\u683c\u5339\u914d\uff0c\u4e3a1\u7684\u4f4d\u5219\u65e0\u6240\u8c13\u3002\u73b0\u5728\uff0c\u6211\u4eec\u770b\u8def\u7531\u5668\u7684\u63a5\u53e3IP\u5730\u5740\uff0c\u5c06\u8fd9\u4e9bIP\u5730\u5740\u62ff\u53bb\u505a\u5bf9\u5e94\uff0c\u5982\u679c\u80fd\u5339\u914d\u4e0a\uff0c\u90a3\u4e48\u63a5\u53e3\u5c31\u6fc0\u6d3b OSPF\uff0c\u5426\u5219\u5c31\u4e0d\u6fc0\u6d3b\u3002\u4f8b\u5982\u8def\u7531\u5668\u914d\u7f6e\u4e86172.16.1.1\u8fd9\u4e2aIP\u5730\u5740\u7684\u63a5\u53e3\uff0c\u7531\u4e8e\u8be5IP\u5730\u5740\u6ee1\u8db3\u8981\u6c42\u2014\u2014 \u524d3\u4e2a\u516b\u4f4d\u7ec4\u4e0e172.16.1.0\u7684\u524d3\u4e2a\u516b\u4f4d\u7ec4\u76f8\u540c\uff0c\u6700\u540e\u4e00\u4e2a\u516b\u4f4d\u7ec4\u65e0\u9700\u76f8\u540c\uff0c\u56e0\u6b64\u8be5\u63a5\u53e3\u4f1a\u6fc0\u6d3bOSPF\u3002\u800c\u53e6\u5916\u4e24\u4e2a\u63a5\u53e3\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u56e0\u6b64\u4e0d\u6fc0\u6d3bOSPF\u3002 \u518d\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a \u7531\u4e8e**network**\u547d\u4ee4\u4f7f\u7528\u7684IP\u5730\u5740\u548c\u901a\u914d\u7b26\u63a9\u7801\u662f172.16.0.0 0.0.255.255\uff0c\u4e5f\u5c31\u662f\u6700\u540e\u4e24\u4e2a\u516b\u4f4d\u7ec4\u65e0\u6240\u8c13\uff0c\u524d\u4e24\u4e2a\u516b\u4f4d\u7ec4\u5fc5\u987b\u662f172.16\uff0c\u56e0\u6b64\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u8def\u7531\u5668\u5c06\u6709\u4e24\u4e2a\u63a5\u53e3\u6fc0\u6d3bOSPF\u3002\u5f53\u7136\uff0c\u5982\u679c\u8fd8\u662f\u4ee5\u4e0a\u56fe\u4e3a\u4f8b\uff0c\u5047\u8bbe\u6211\u4eec\u60f3\u53ea\u6fc0\u6d3b172.16.3.1/24\u8fd9\u4e2a\u63a5\u53e3\uff0c\u800c\u4e14\u8981\u6c42\u5c3d\u53ef\u80fd\u7cbe\u786e\uff0c\u90a3\u4e48**network**\u547d\u4ee4\u5b8c\u5168\u53ef\u4ee5\u8fd9\u4e48\u5199\uff1a network 172.16.3.1 0.0.0.0 \u3002 \u901a\u5e38\uff0c\u6211\u4eec\u5728\u914d\u7f6eOSPF\u65f6\uff0c\u5982\u679c\u60f3\u8981\u5728\u67d0\u4e2a\u63a5\u53e3\u4e0a\u6fc0\u6d3bOSPF\uff0c\u4f8b\u5982\u8be5\u63a5\u53e3\u7684IP\u5730\u5740\u4e3a192.168.1.1/24\uff0c \u90a3\u4e48\u4e00\u822c\u4f1a\u4f7f\u7528\u547d\u4ee4**network 192.168.1.0 0.0.0.255**\uff0c\u7559\u610f\u5230\u63a5\u53e3\u5730\u5740\u7684\u7f51\u7edc\u63a9\u7801\u662f255.255.255.0\uff0c \u800c\u7528\u4e8e\u6fc0\u6d3bOSPF \u7684\u547d\u4ee4\u4e2d\uff0c\u901a\u914d\u7b26\u662f0.0.0.255 \uff0c \u8fd9\u5b9e\u9645\u4e0a\u662f\u7528255.255.255.255 \u4e0e\u7f51\u7edc\u63a9\u7801 255.255.255.0\u505a\u201c\u51cf\u6cd5\u201d\uff0c\u4ece\u800c\u5f97\u52300.0.0.255\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u7ecf\u5e38\u5c06\u901a\u914d\u7b26\u63a9\u7801\u79f0\u4e3a\u201c\u53cd\u63a9\u7801\u201d\u3002 \u793a\u4f8b\uff08\u5355\u533a\u57df\uff09 \u00b6 \u7f51\u7edc\u62d3\u6251\u4e2d\u5305\u542b\u4e09\u53f0\u8def\u7531\u5668\u53ca\u4e24\u53f0PC\uff1b\u6bcf\u53f0\u8def\u7531\u5668\u4f7f\u7528x.x.x.x\u7684\u5730\u5740\u4f5c\u4e3aOSPF\u7684RouterID\uff0c\u5176\u4e2dx\u4e3a\u8bbe\u5907\u7f16\u53f7\uff0c\u4f8b\u5982R1\u7684RouterID\u4e3a1.1.1.1\uff0c\u8bbe\u5907\u7684\u63a5\u53e3\u7f16\u53f7\u53caIP\u7f16\u5740\u5982\u56fe\u6240\u793a\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 \u5b8c\u6210\u914d\u7f6e\u540e\u6211\u4eec\u6765\u505a\u4e00\u4e0b\u67e5\u770b\u53ca\u9a8c\u8bc1\uff0c\u9996\u5148\u770b\u4e00\u4e0bOSPF\u7684\u90bb\u5c45\u5173\u7cfb\uff0c\u8fd9\u662fOSPF\u8def\u7531\u6536\u655b\u7684\u57fa\u7840\uff0c\u5982\u679c\u90bb \u5c45\u5173\u7cfb\u7684\u72b6\u6001\u4e0d\u6b63\u786e\uff0c\u90a3\u4e48\u8def\u7531\u80af\u5b9a\u662f\u65e0\u6cd5\u6b63\u5e38\u83b7\u6089\u7684\uff0c\u9996\u5148\u770b\u4e00\u4e0bR1\u7684\u90bb\u5c45\u8868\uff1a \u4f7f\u7528**display ospf peer**\u547d\u4ee4\u80fd\u67e5\u770bOSPF\u90bb\u5c45\u5173\u7cfb\uff0c\u4e0a\u9762\u7684\u8f93\u51fa\u5c31\u662fR1\u7684OSPF\u90bb\u5c45\u8868\uff0c\u6211\u4eec\u770b\u5230R1\u53d1\u73b0 \u4e86\u4e00\u4e2aOSPF \u90bb\u5c45\uff0c \u8fd9\u4e2aOSPF\u90bb\u5c45\u662f\u8fde\u63a5\u5728R1\u7684GE0/0/0\u53e3\u4e0a\uff0c\u4e14\u5176Router-ID \u4e3a2.2.2.2\uff0c\u63a5\u53e3IP\u4e3a 192.168.12.2\uff0c\u6700\u91cd\u8981\u7684\u662f\u72b6\u6001\u4e3aFull\uff0c\u8868\u793aR1\u4e0eR2\u7684OSPF\u90bb\u5c45\u5173\u7cfb\u5df2\u7ecf\u4e3a\u5168\u6bd7\u90bb\u72b6\u6001\u3002\u4e00\u822c\u6765\u8bb2\uff0c\u4e24\u53f0 \u8bbe\u5907\u5982\u679c\u6b63\u5e38\u5730\u5efa\u7acb\u4e86\u90bb\u63a5\u5173\u7cfb\uff0c\u90a3\u4e48\u72b6\u6001\u5fc5\u987b\u4e3aFull\u3002 \u540c\u7406\u5728R2\u4e0a\u5e94\u8be5\u80fd\u770b\u5230\u4e24\u4e2aOSPF\u90bb\u5c45\uff0c\u800c\u5728R3\u4e0a\u80fd\u770b\u5230\u4e00\u4e2aOSPF\u90bb\u5c45\u3002\u63a5\u4e0b\u53bb\u770b\u770b\u8def\u7531\u8868\u3002 [R1] display ip routing-table Route Flags: R - relay, D - download to fib ------------------------------------------------------------------------------ Routing Tables: Public Destinations : 12 Routes : 12 Destination/Mask Proto Pre Cost Flags NextHop Interface 192.168.1.0/24 Direct 0 0 D 192.168.1.254 GigabitEthernet0/0/1 192.168.1.254/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/1 192.168.1.255/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/1 192.168.2.0/24 OSPF 10 3 D 192.168.12.2 GigabitEthernet0/0/0 192.168.12.0/24 Direct 0 0 D 192.168.12.1 GigabitEthernet0/0/0 192.168.12.1/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/0 192.168.12.255/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/0 192.168.23.0/24 OSPF 10 2 D 192.168.12.2 GigabitEthernet0/0/0 255.255.255.255/32 Direct 0 0 D 127.0.0.1 InLoopBack0 \u5728\u4e0a\u8ff0\u8f93\u51fa\u4e2d\uff0c\u6211\u4eec\u770b\u5230R1\u5df2\u7ecf\u5b66\u4e60\u5230\u4e24\u6761OSPF\u8def\u7531\uff0c\u5206\u522b\u662f192.168.2.0/24\u53ca192.168.23.0/24\uff1b\u540c\u7406\u5728 R2\u5c31R3\u4e0a\u4e5f\u80fd\u770b\u5230\u76f8\u5e94\u7684OSPF\u8def\u7531\u3002\u73b0\u5728PC1\u53caPC2\u5c31\u80fd\u591f\u4e92\u76f8\u901a\u4fe1\u4e86\u3002 \u793a\u4f8b\uff08\u5355\u533a\u57df\u7efc\u5408\u5b9e\u9a8c\uff09 \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cPC1\u53caPC2\u5206\u522b\u5c5e\u4e8eVLAN10\u53caVLAN20\uff0c\u5b83\u4eec\u7684\u7f51\u5173\u90fd\u5728\u6838\u5fc3\u4ea4\u6362\u673aCore-SW\u4e0a\u3002Access-SW \u662f\u63a5\u5165\u5c42\u4ea4\u6362\u673a\uff0c\u53ea\u505a\u4e8c\u5c42\u900f\u4f20\u3002\u8def\u7531\u5668Router\u8fde\u63a5\u7740PC3\uff0c\u5e76\u4e14\u4e0e\u6838\u5fc3\u4ea4\u6362\u673a\u5bf9\u63a5\u3002\u8981\u6c42\u5728\u7f51\u7edc\u4e2d\u90e8\u7f72 OSPF\uff0c\u4f7f\u5f97PC1\u53caPC2\u80fd\u591f\u4e0ePC3\u4e92\u901a\u3002Access-SW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a Core-SW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a Router\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u6765\u505a\u4e00\u4e0b\u76f8\u5173\u9a8c\u8bc1\uff0c\u9996\u5148\u67e5\u770bCore-SW\u7684OSPF\u90bb\u5c45\u8868\uff1a \u4ece\u8f93\u51fa\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u5b83\u5df2\u7ecf\u4e8eRouter\u5efa\u7acb\u4e86\u5168\u6bd7\u90bb\u7684\u90bb\u63a5\u5173\u7cfb\u3002\u518d\u770b\u770b\u5b83\u7684\u8def\u7531\u8868\u4e2d\u7684OSPF\u8def\u7531\uff1a \u6211\u4eec\u770b\u5230Core-SW\u5df2\u7ecf\u5b66\u4e60\u5230\u4e868.8.8.0/24\u8def\u7531\u3002\u540c\u6837\u5728Router\u4e0a\u67e5\u770b\u8def\u7531\u8868\uff0c\u4e5f\u4f1a\u53d1\u73b0\u5176\u5df2\u7ecf\u5b66\u4e60\u5230 192.168.10.0/24\u53ca192.168.20.0/24\u8def\u7531\uff0c\u5982\u6b64\u4e00\u6765\uff0cPC1/PC2\u5373\u53ef\u4e0ePC3\u5b9e\u73b0\u76f8\u4e92\u901a\u4fe1\u3002 \u793a\u4f8b\uff08\u591a\u533a\u57df\uff09 \u00b6 \u7f51\u7edc\u4e2d\u5305\u542b\u4e09\u53f0\u8def\u7531\u5668\u53ca\u4e24\u53f0PC\uff1b\u6bcf\u53f0\u8def\u7531\u5668\u4f7f\u7528x.x.x.x\u7684\u5730\u5740\u4f5c\u4e3aOSPF\u7684RouterID\uff0c\u5176\u4e2dx\u4e3a\u8bbe\u5907\u7f16\u53f7\uff0c \u4f8b\u5982R1\u7684RouterID\u4e3a1.1.1.1\uff1bOSPF\u533a\u57df\u7684\u89c4\u5212\u5982\u56fe\u6240\u793a\uff1b \u8bbe\u5907\u7684\u63a5\u53e3\u7f16\u53f7\u53caIP\u7f16\u5740\u5982\u56fe\u6240\u793a\u3002\u6ce8\u610f\u5230\u6211\u4eec\u5728\u7f51\u7edc\u4e2d\u89c4\u5212\u4e86\u4e24\u4e2aOSPF\u533a\u57df\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8def\u7531\u5668\u7684\u63a5\u53e3\u5fc5\u987b\u5728\u6b63\u786e\u7684\u533a\u57df\u4e2d\u6fc0\u6d3b\u3002\u4e24\u53f0\u76f4\u8fde\u7684\u8bbe\u5907\u8981\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\uff0c\u90a3\u4e48\u76f4\u8fde\u7684\u4e24\u4e2a\u63a5\u53e3\u9700\u5728\u76f8\u540c\u7684\u533a\u57df\u4e2d\u6fc0\u6d3bOSPF\u3002\u4f8b\u5982R1\u7684GE0/0/0\u53caR2\u7684GE0/0/0\u63a5\u53e3\uff0c\u90fd\u5fc5\u987b\u5728area0\u4e2d\u6fc0\u6d3b\uff0c\u800cR2\u7684GE0/0/1\u53caR3\u7684 GE0/0/0\u63a5\u53e3\u5fc5\u987b\u5728area1\u4e2d\u6fc0\u6d3bOSPF\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0cPC1\u4e0ePC2\u5373\u53ef\u4e92\u76f8ping\u901a\u3002 \u67e5\u770b\u53ca\u9a8c\u8bc1 \u00b6 \u67e5\u770bOSPF\u534f\u8bae\u76f8\u5173\u8fd0\u884c\u53c2\u6570\uff1a display ospf brief \u67e5\u770bOSPF\u90bb\u5c45\u8868\uff1a display ospf peer \u67e5\u770bLSDB\u8868\uff1a display ospf lsdb \u67e5\u770bOSPF\u8def\u7531\uff1a display ospf routing OSPF LSA \u53ca\u7279\u6b8a\u533a\u57df OSPF LSA\u7c7b\u578b \u00b6 LSA\u662fOSPF\u4e2d\u975e\u5e38\u5173\u952e\u7684\u6982\u5ff5\uff0c\u4e5f\u662fOSPF\u7f51\u7edc\u6b63\u5e38\u8fd0\u884c\u7684\u6839\u672c\u3002LSA\u662f\u63cf\u8ff0\u7f51\u7edc\u62d3\u6251\u3001\u7f51\u6bb5\u4fe1\u606f\u3001\u8def\u7531\u4fe1\u606f\u7b49\u5185\u5bb9\u7684\u4e00\u7cfb\u5217\u94fe\u8def\u72b6\u6001\u4fe1\u606f\u3002\u5b8c\u6574\u7684LSA\u4fe1\u606f\u53ea\u5728OSPF LSU\u62a5\u6587\u4e2d\u5b58\u5728\u3002 \u5e38\u89c1\u7684OSPF LSA\u7c7b\u578b\u53ca\u63cf\u8ff0\u5982\u4e0b\uff1a LSA\u7c7b\u578b LSA\u540d\u79f0 LSA\u63cf\u8ff0 1 Router-LSA \u6bcf\u4e2a\u8bbe\u5907\u90fd\u4f1a\u4ea7\u751f\uff0c\u63cf\u8ff0\u4e86\u8bbe\u5907\u7684\u94fe\u8def\u72b6\u6001\u548c\u5f00\u9500\uff0c\u5728\u6240\u5c5e\u7684\u533a\u57df\u5185\u4f20\u64ad\u3002 2 Network-LSA \u7531DR\u4ea7\u751f\uff0c\u63cf\u8ff0\u672c\u7f51\u6bb5\u7684\u94fe\u8def\u72b6\u6001\uff0c\u5728\u6240\u5c5e\u7684\u533a\u57df\u5185\u4f20\u64ad\u3002 3 Network-summary-LSA \u7531ABR\u4ea7\u751f\uff0c\u63cf\u8ff0\u533a\u57df\u5185\u67d0\u4e2a\u7f51\u6bb5\u7684\u8def\u7531\uff0c\u5e76\u901a\u544a\u7ed9\u53d1\u5e03\u6216\u63a5\u6536\u6b64LSA\u7684\u975e Totally STUB\u6216NSSA\u533a\u57df\u3002 4 ASBR-summary-LSA \u7531ABR\u4ea7\u751f\uff0c\u63cf\u8ff0\u5230ASBR\u7684\u8def\u7531\uff0c\u901a\u544a\u7ed9\u9664ASBR\u6240\u5728\u533a\u57df\u7684\u5176\u4ed6\u76f8\u5173\u533a\u57df\u3002 5 AS-external-LSA \u7531ASBR\u4ea7\u751f\uff0c\u63cf\u8ff0\u5230AS\u5916\u90e8\u7684\u8def\u7531\uff0c\u901a\u544a\u5230\u6240\u6709\u7684\u533a\u57df\uff08\u9664\u4e86STUB\u533a\u57df\u548c NSSA\u533a\u57df\uff09\u3002 7 NSSA LSA \u7531ASBR\u4ea7\u751f\uff0c\u63cf\u8ff0\u5230AS\u5916\u90e8\u7684\u8def\u7531\uff0c\u4ec5\u5728NSSA\u533a\u57df\u5185\u4f20\u64ad\u3002 \u7279\u6b8a\u533a\u57df\u8be6\u89e3 \u00b6 \u4e3a\u4e86\u4f18\u5316OSPF\u7684\u8fd0\u884c\uff0c\u4f7f\u5f97OSPF\u80fd\u591f\u652f\u6491\u66f4\u5927\u89c4\u6a21\u7684\u7f51\u7edc\uff0cOSPF\u5b9a\u4e49\u4e86\u51e0\u79cd\u7279\u6b8a\u7684\u533a\u57df\u7c7b\u578b\u3002\u9996\u5148\u770b\u4e00\u4e0b\u672c\u5c0f\u8282\u7528\u4e8e\u8bb2\u89e3\u76f8\u5173\u77e5\u8bc6\u70b9\u6240\u4f7f\u7528\u7684\u62d3\u6251\uff1a \u62d3\u6251\u4e2d\u5305\u542b\u56db\u53f0\u8def\u7531\u5668\uff0c\u63a5\u53e3IP\u5730\u5740\u5982\u56fe\u6240\u793a\uff0c\u73b0\u5728\u6309\u7167\u56fe\u793a\u7684\u8981\u6c42\u5b8c\u6210OSPF\u7684\u914d\u7f6e\uff0c\u540c\u65f6\u5728R4\u4e0a\u521b\u5efa Loopback1\u63a5\u53e3\uff0c\u63a5\u53e3\u914d\u7f6eIP\u5730\u57404.4.4.4/32\uff0c\u7136\u540e\u5c06\u8fd9\u6761\u76f4\u8fde\u8def\u7531\u91cd\u53d1\u5e03\u5230OSPF\u4e2d\u3002 \u63a5\u4e0b\u6765\u662f\u6211\u4eec\u7684\u5206\u6790\u6b65\u9aa4\uff1a \u00b6 R1\u3001R2\u3001R3\u3001R4\u8fd0\u884cOSPF\uff0c\u5728\u76f8\u5e94\u7684\u63a5\u53e3\u4e0a\u6fc0\u6d3bOSPF\uff0cOSPF\u7684\u533a\u57df\u89c4\u5212\u5982\u56fe\u6240\u793a\uff1b R4\u5c06Loopback0\u63a5\u53e3\u7684\u76f4\u8fde\u8def\u7531\u91cd\u53d1\u5e03\u5230OSPF\u3002\u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u89c2\u5bdf\u5404\u53f0\u8def\u7531\u5668\u7684\u8def\u7531\u8868\u548cLSDB\uff1b \u5c06area1\u914d\u7f6e\u4e3aStub\u533a\u57df\uff0c\u89c2\u5bdf\u8def\u7531\u548cLSA\u7684\u53d8\u5316\uff1b \u5c06area1\u4fee\u6539\u4e3aTotally-Stub\u533a\u57df\uff0c\u89c2\u5bdf\u8def\u7531\u548cLSA\u7684\u53d8\u5316\uff1b \u5c06area1\u6062\u590d\u4e3a\u5e38\u89c4\u533a\u57df\uff0c\u5728R1\u4e0a\u521b\u5efaLoopback0\u63a5\u53e3\uff0c\u914d\u7f6e\u5730\u5740\uff1a1.1.1.1/32\u5e76\u5c06\u76f4\u8fde\u8def\u7531\u91cd\u53d1\u5e03\u5230 OSPF\uff1b\u5c06area2\u914d\u7f6e\u4e3aNSSA\uff0c\u89c2\u5bdf\u8def\u7531\u53caLSA\u7684\u53d8\u5316\uff1b \u5c06area2\u4fee\u6539\u4e3aTotally NSSA\uff0c\u89c2\u5bdf\u8def\u7531\u548cLSA\u7684\u53d8\u5316\u3002 \u5b8c\u6210\u57fa\u7840\u914d\u7f6e \u00b6 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R4\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u89c2\u5bdf\u4e00\u4e0b\u5404\u4e2a\u8def\u7531\u5668\u7684\u8def\u7531\u8868\u53caLSDB\u3002 [R1] display ip routing-table protocol ospf Destination/Mask Proto Pre Cost Flags NextHop Interface 4.4.4.4/32 O_ASE 150 1 D 10.1.12.2 GigabitEthernet0/0/0 10.1.23.0/24 OSPF 10 2 D 10.1.12.2 GigabitEthernet0/0/0 10.1.34.0/24 OSPF 10 3 D 10.1.12.2 GigabitEthernet0/0/0 R1\u5b66\u4e60\u5230\u4e86\u5168\u7f51\u7684\u8def\u7531\uff0c\u5305\u62ecR4\u6ce8\u5165\u7684\u5916\u90e8\u8def\u75314.4.4.4/32\uff0c\u8fd9\u6761\u5916\u90e8\u8def\u7531\u5728\u8def\u7531\u8868\u4e2d\u6807\u8bb0\u4e3aO_ASE\uff0c \u8868\u793a\u4e3aOSPF AS External\uff0c\u4e5f\u5c31\u662fOSPF\u7684\u57df\u5916\u8def\u7531\u3002\u63a5\u4e0b\u6765\u68c0\u67e5R1\u7684OSPF LSDB\uff1a [R1] display ospf lsdb OSPF Process 1 with Router ID 1.1.1.1 Link State Database Area: 0.0.0.1 Type LinkState ID AdvRouter Age Len Sequence Metric Router 2.2.2.2 2.2.2.2 258 36 80000005 1 Router 1.1.1.1 1.1.1.1 261 36 80000004 1 Network 10.1.12.2 2.2.2.2 258 32 80000002 0 Sum-Net 10.1.23.0 2.2.2.2 294 28 80000001 1 Sum-Net 10.1.34.0 2.2.2.2 227 28 80000001 2 Sum-Asbr 4.4.4.4 2.2.2.2 215 28 80000001 2 AS External Database Type LinkState ID AdvRouter Age Len Sequence Metric External 4.4.4.4 4.4.4.4 222 36 80000001 1 External 10.1.34.0 4.4.4.4 222 36 80000001 1 \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fR1\u7684OSPF LSDB\uff0c\u4ece\u4e2d\u53ef\u4ee5\u770b\u51fa\u5728R1\u7684LSDB\u4e2d\u67091\u30012\u30013\u30014\u30015\u7c7bLSA\u3002\u5176\u4e2d3\u7c7bLSA \uff08\u4e0a\u9762\u663e\u793a\u7684Sum-Net\uff09\u63cf\u8ff0\u7684\u662f\u5230\u8fbe10.1.23.0/24\u53ca10.1.34.0/24\u8fd9\u4e24\u4e2a\u7f51\u6bb5\u7684\u533a\u57df\u95f4\u8def\u7531\u30024\u7c7bLSA \uff08\u4e0a\u9762\u663e\u793a\u7684Sum-Asbr\uff09\u63cf\u8ff0\u7684\u662f\u5230\u8fbeASBR\uff08R4\uff09\u7684\u8def\u7531\uff0c\u8fd9\u6761LSA\u7531ABR R2\u4ea7\u751f\u3002\u53e6\u5916\u8fd8\u67092\u6761 AS\u5916\u90e8LSA\uff08\u4e0a\u9762\u663e\u793a\u7684External\uff09\uff0c\u63cf\u8ff0\u5230\u8fbe4.4.4.4/32\u548c10.1.34.0//24\u7684\u8def\u7531\u3002\u6b64\u65f6R1\u662f\u5168\u7f51\u53ef\u8fbe\u7684\u3002 \u5c06area1\u914d\u7f6e\u4e3aStub\u533a\u57df\uff0c\u89c2\u5bdf\u8def\u7531\u53caLSA\u7684\u53d8\u5316 \u00b6 R1\u7684OSPF\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a R2\u7684OSPF\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a \u6ce8\u610f\uff0c\u4e00\u65e6\u5c06\u67d0\u4e2a\u533a\u57df\u8bbe\u7f6e\u4e3aStub\u533a\u57df\uff0c\u5219\u6240\u6709\u8fde\u63a5\u5230\u8fd9\u4e2a\u533a\u57df\u7684\u8def\u7531\u5668\u90fd\u8981\u5c06\u8be5\u533a\u57df\u914d\u7f6e\u4e3aStub\u533a\u57df\uff0c\u5426\u5219OSPF\u90bb\u5c45\u5173\u7cfb\u5c06\u65e0\u6cd5\u6b63\u786e\u5efa\u7acb\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0carea1\u5c31\u53d8\u6210\u4e86\u4e00\u4e2astub\u533a\u57df\u3002Stub\u533a\u57df\u4f1a\u963b\u6321\u6765\u81ea\u9aa8\u5e72\u533a\u57df\u76845\u7c7bLSA\uff0c\u8fd9\u4f7f\u5f97\u8be5\u533a\u57df\u5185LSA\u6cdb\u6d2a\u7684\u6570\u91cf\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u51cf\u5c11\u4e86\uff0c\u4ece\u800c\u51cf\u5c0f\u8be5\u533a\u57df\u4e2d\u8def\u7531\u5668\u7684\u8def\u7531\u8868\u89c4\u6a21\uff0c\u540c\u65f6\u964d\u4f4e\u8bbe\u5907\u8d1f\u62c5\uff0c \u53e6\u5916\uff0cStub\u533a\u57df\u7684ABR\u4f1a\u4e3a\u8be5\u533a\u57df\u4ea7\u751f\u4e00\u6761\u4f7f\u75283\u7c7bLSA\u63cf\u8ff0\u7684\u7f3a\u7701\u8def\u7531\uff0c\u7528\u4e8eStub\u533a\u57df\u5185\u7684\u8def\u7531\u5668\u8d70\u51fa\u8be5\u533a\u57df\u4ece\u800c\u80fd\u591f\u8bbf\u95eeOSPF\u5916\u90e8\u7f51\u7edc\uff1a \u73b0\u5728\uff0c\u518d\u6765\u89c2\u5bdfR1\u7684\u8def\u7531\u8868\u548cLSDB\u3002 \u76f8\u6bd4\u4e8earea1\u4e3a\u5e38\u89c4\u533a\u57df\u7684\u60c5\u51b5\uff0carea1\u88ab\u8bbe\u7f6e\u4e3aStub\u533a\u57df\u540e\uff0cR1\u7684\u8def\u7531\u8868\u66f4\u7cbe\u7b80\u4e86\uff0c\u90a3\u662f\u56e0\u4e3aR2\u963b\u6321\u6389\u4e86\u6765\u81eaOSPF\u7684\u57df\u5916\u8def\u75314.4.4.4/32\u3002\u5f53\u7136R1\u53ef\u4ee5\u901a\u8fc7\u7f3a\u7701\u8def\u75310.0.0.0/0\u5230\u8fbe\u8fd9\u4e9b\u57df\u5916\u7f51\u7edc\uff0c\u8fd9\u6761\u7f3a\u7701\u8def\u7531\u662fR2\u4e0b\u53d1\u7684\uff0c\u4f7f\u75283\u7c7bLSA\u63cf\u8ff0\uff0c\u4e14\u7f3a\u7701\u8def\u7531\u7684\u5916\u90e8Cost\u4e3a1\uff0c\u53ef\u4ee5\u5728R2\u7684area1\u89c6\u56fe\u4e0b\u4f7f\u7528**default-cost**\u547d\u4ee4\u6765\u4fee\u6539\u8fd9\u4e2a\u7f3a\u7701\u7684Cost\u503c\u3002\u518d\u89c2\u5bdf\u4e00\u4e0bR1\u7684LSDB\uff1a [R1] display ospf lsdb OSPF Process 1 with Router ID 1.1.1.1 Link State Database Area: 0.0.0.1 Type LinkState ID AdvRouter Age Len Sequence Metric Router 2.2.2.2 2.2.2.2 616 36 80000004 1 Router 1.1.1.1 1.1.1.1 615 36 80000004 1 Network 10.1.12.1 1.1.1.1 615 32 80000002 0 Sum-Net 0.0.0.0 2.2.2.2 626 28 80000001 1 Sum-Net 10.1.23.0 2.2.2.2 627 28 80000001 1 Sum-Net 10.1.34.0 2.2.2.2 627 28 80000001 2 \u663e\u7136\uff0cR1\u7684LSDB\u4e5f\u7cbe\u7b80\u4e86\uff0c\u6b64\u65f6\u5728R1\u7684LSDB\u4e2d\uff0c\u6ca1\u67094\u30015\u7c7bLSA\u3002\u4ec5\u67091\u30012\u30013\u7c7bLSA\u3002 \u5c06area1\u914d\u7f6e\u4e3aTotally-Stub\u533a\u57df\uff0c\u89c2\u5bdf\u8def\u7531\u53caLSA\u7684\u53d8\u5316 \u00b6 \u5728\u4e0a\u4e00\u4e2a\u9700\u6c42\u7684\u914d\u7f6e\u57fa\u7840\u4e0a\uff0cR2\u7684OSPF\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a [R2] ospf 1 \u5c06\u4e00\u4e2a\u533a\u57df\u6307\u5b9a\u4e3aTotally-Stub\u540e\uff0c\u8be5\u533a\u57df\u5c06\u4e0d\u4f1a\u518d\u6536\u5230\u6765\u81ea\u9aa8\u5e72\u533a\u57df\u76843\u30014\u30015\u7c7bLSA\uff0c\u4e5f\u5c31\u662f\u5728stub \u533a\u57df\u7684\u57fa\u7840\u4e0a\u8fdb\u4e00\u6b65\u6291\u52363\u7c7bLSA\u7684\u6cdb\u6d2a\uff0c\u540c\u65f6\u8be5\u533a\u57df\u7684ABR\u4e0b\u53d1\u4e00\u67613\u7c7bLSA\u7f3a\u7701\u8def\u7531\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\u518d\u53bbR1\u4e0a\u770b\u770b\u8def\u7531\u8868\u548cLSDB\uff1a \u6b64\u65f6\uff0cR1\u7684\u8def\u7531\u8868\u53d8\u5f97\u975e\u5e38\u7b80\u6d01\uff0c\u53ea\u6709\u4e00\u6761\u7f3a\u7701\u8def\u7531\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u533a\u57df\u95f4\u8def\u753110.1.23.0/24\u300110.1.34.0/24\uff0c\u4ee5\u53ca\u57df\u5916\u8def\u75314.4.4.4/32\u90fd\u5df2\u7ecf\u6d88\u5931\u4e86\uff0cR1\u7684\u8d1f\u62c5\u5c06\u53d8\u5f97\u975e\u5e38\u5c0f\uff0c\u5e76\u4e14\u5f53\u5b83\u9700\u8981\u53bb\u5f80\u8fd9\u4e9b\u7f51\u7edc\u65f6\uff0c\u53c8\u53ef\u4ee5\u901a\u8fc7\u8fd9\u6761\u7f3a\u7701\u8def\u7531\u51fa\u53bb\u3002 \u518d\u67e5\u770b\u4e00\u4e0bR1\u7684LSDB\uff1a [R1] display ospf lsdb OSPF Process 1 with Router ID 1.1.1.1 Link State Database Area: 0.0.0.1 Type LinkState ID AdvRouter Age Len Sequence Metric Router 2.2.2.2 2.2.2.2 347 36 80000005 1 Router 1.1.1.1 1.1.1.1 346 36 80000009 1 Network 10.1.12.1 1.1.1.1 347 32 80000002 0 Sum-Net 0.0.0.0 2.2.2.2 348 28 80000005 1 R1\u7684LSDB\u4e5f\u662f\u975e\u5e38\u7b80\u6d01\u7684\uff0c\u53ea\u67091\u30012\u7c7bLSA\uff0c\u4e5f\u5c31\u662f\u7528\u4e8e\u8ba1\u7b97\u672c\u533a\u57df\u5185\u8def\u7531\u7684LSA\uff0c\u53e6\u5916\u8fd8\u6709\u4e00\u67613 \u7c7bLSA\uff0c\u8fd9\u67613\u7c7bLSA\u662f\u63cf\u8ff00.0.0.0/0\u7f3a\u7701\u8def\u7531\u7684\uff0c\u7531ABR R2\u4ea7\u751f\u3002 \u5c06area1\u8fd8\u539f\u4e3a\u5e38\u89c4\u533a\u57df\uff0c\u5e76\u91cd\u53d1\u5e03\u76f4\u8fde\u8def\u7531\u8fdbOSPF\uff1b\u5c06area2\u914d\u7f6e\u4e3aNSSA\u3002 \u00b6 \u5728\u4e0a\u4e00\u4e2a\u9700\u6c42\u7684\u914d\u7f6e\u57fa\u7840\u4e0a\uff0cR1\u7684\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a \u4ece\u4ee5\u4e0a\u914d\u7f6e\u53ef\u4ee5\u770b\u51fa\uff0cR1\u521b\u5efa\u4e86\u4e00\u4e2aLoopback\u63a5\u53e3\uff0c\u7136\u540earea1\u6062\u590d\u4e3a\u4e86\u5e38\u89c4\u533a\u57df\uff0c\u540c\u65f6\u76f4\u8fde\u8def\u7531\u88ab \u6ce8\u5165OSPF\u30021.1.1.1/32\u8fd9\u6761\u8def\u7531\u662f\u6211\u4eec\u63a5\u4e0b\u53bb\u9700\u89c2\u5bdf\u7684\u76ee\u6807\u8def\u7531\u4e4b\u4e00\u3002 R2\u7684\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a \u6b64\u65f6R4\u7684\u8def\u7531\u8868\u5982\u4e0b\uff1a [R4] display ip routing-table protocol ospf Destination/Mask Proto Pre Cost Flags NextHop Interface 1.1.1.1/32 O_ASE 150 1 D 10.1.34.3 GigabitEthernet0/0/0 10.1.12.0/24 OSPF 10 3 D 10.1.34.3 GigabitEthernet0/0/0 10.1.23.0/24 OSPF 10 2 D 10.1.34.3 GigabitEthernet0/0/0 \u4eceR4\u7684\u8def\u7531\u8868\u53ef\u4ee5\u770b\u51fa\uff0cR4\u6b64\u65f6\u80fd\u591f\u5b66\u4e60\u5230\u533a\u57df\u95f4\u8def\u753110.1.12.0/24\u300110.1.23.0/24\uff0c\u4ee5\u53ca\u57df\u5916\u8def\u7531 1.1.1.1/32\u3002\u73b0\u5728\u628aarea2\u914d\u7f6e\u4e3aNSSA\uff1a R3\u7684\u914d\u7f6e\u4fee\u6539\u4e3a\uff1a R4\u7684\u914d\u7f6e\u4fee\u6539\u4e3a\uff1a \u5f53\u4e00\u4e2a\u533a\u57df\u88ab\u914d\u7f6e\u4e3aNSSA\u533a\u57df\uff08\u975e\u5b8c\u5168\u672b\u68a2\u533a\u57df\uff09\u540e\uff0c\u8be5\u533a\u57df\u5c06\u4e0d\u518d\u5141\u8bb8\u6765\u81ea\u9aa8\u5e72\u533a\u57df\u76844\u30015\u7c7bLSA \u6cdb\u6d2a\uff0c\u4f46\u662f\u5141\u8bb8\u8be5\u533a\u57df\u5185\u7684\u8def\u7531\u5668\u6ce8\u5165\u5916\u90e8\u8def\u7531\uff0c\u8fd9\u4e9b\u5916\u90e8\u8def\u7531\u88ab\u91cd\u53d1\u5e03\u8fdbNSSA\u540e\u4ee57\u7c7bLSA\u63cf\u8ff0\uff0c \u8fd9\u4e9b7\u7c7bLSA\u7531NSSA\u7684ABR\u6267\u884c\u8f6c\u6362\u53d8\u62105\u7c7bLSA\u540e\u8fdb\u5165\u9aa8\u5e72\u533a\u57df\uff1a \u6240\u4ee5\uff0c\u5f53area2\u88ab\u914d\u7f6e\u4e3aNSSA\u540e\uff0cR3\u5c06\u4e0d\u80fd\u518d\u628a4\u30015\u7c7bLSA\u6cdb\u6d2a\u5230area2\u4e2d\uff0c\u56e0\u6b64R1\u5f15\u5165\u7684\u5916\u90e8\u8def\u7531 1.1.1.1/32\u4e0d\u4f1a\u88ab\u6ce8\u5165\u5230area2\u4e2d\u3002\u5f53\u7136\u4e3a\u4e86\u8ba9NSSA\u5185\u7684\u8def\u7531\u5668\u5230\u8fbeAS\u5916\u90e8\uff0cR3\u81ea\u52a8\u4e0b\u53d1\u4e00\u6761\u4f7f\u75287\u7c7b LSA\u63cf\u8ff0\u7684\u7f3a\u7701\u8def\u7531\u3002R3\u4e0d\u4f1a\u963b\u63213\u7c7bLSA\u8fdb\u5165NSSA\uff0c\u6240\u4ee5R4\u4f9d\u7136\u80fd\u591f\u5b66\u4e60\u5230\u53bb\u5f80\u5176\u4ed6\u533a\u57df\u7684\u8def\u7531\u3002 \u53e6\u4e00\u65b9\u9762\uff0cNSSA\u5141\u8bb8\u672c\u533a\u57df\u5185\u7684\u8def\u7531\u5668\u6267\u884c\u8def\u7531\u91cd\u53d1\u5e03\u52a8\u4f5c\uff0c\u8fd9\u4e00\u70b9\u4e0eStub\u533a\u57df\u5b58\u5728\u8f83\u5927\u7684\u533a\u522b\u3002R4 \u4e0a\u6267\u884c\u8def\u7531\u91cd\u53d1\u5e03\u52a8\u4f5c\uff0c\u5c064.4.4.4/32\u8fd9\u6761\u5916\u90e8\u8def\u7531\u5f15\u5165OSPF\uff0c\u8fd9\u6761\u5916\u90e8\u8def\u7531\u88ab\u5f15\u5165\u540e\u662f\u4ee57\u7c7bLSA\u7684\u5f62\u5f0f\u5728NSSA\u5185\u6cdb\u6d2a\uff0c\u5e76\u4e14\u4e0d\u5141\u8bb8\u76f4\u63a5\u8fdb\u5165\u9aa8\u5e72\u533a\u57dfarea0\u3002\u53e6\u4e00\u65b9\u9762\uff0cNSSA\u7684ABR R3\u4f1a\u628a7\u7c7bLSA\u8f6c\u6362\u62105\u7c7bLSA\uff0c\u7136\u540e\u5728\u9aa8\u5e72\u533a\u57df\u4e2d\u6cdb\u6d2a\uff0c\u56e0\u6b64R1\u3001R2\u90fd\u80fd\u5b66\u4e60\u5230\u5916\u90e8\u8def\u75314.4.4.4/32\u3002 \u7efc\u4e0a\uff0cNSSA\u7684\u4f7f\u7528\u573a\u666f\u662f\uff1a\u8fd9\u4e2a\u533a\u57df\u4e0d\u5e0c\u671b\u5b66\u4e60\u5230\u5176\u4ed6\u533a\u57df\u91cd\u53d1\u5e03\u8fdbOSPF\u7684\u57df\u5916\u8def\u7531\uff0c\u4f46\u662f\u8be5\u533a\u57df\u81ea\u5df1\u4f9d\u7136\u6709\u6ce8\u5165\u57df\u5916\u8def\u7531\u7684\u9700\u6c42\u6216\u80fd\u529b\u3002 \u67e5\u770b\u4e00\u4e0bR4\u8def\u7531\u8868\u4e2d\u7684OSPF\u8def\u7531\uff1a [R4] display ip routing-table protocol ospf Destination/Mask Proto Pre Cost Flags NextHop Interface 0.0.0.0/0 O_NSSA 150 1 D 10.1.34.3 GigabitEthernet0/0/0 10.1.12.0/24 OSPF 10 3 D 10.1.34.3 GigabitEthernet0/0/0 10.1.23.0/24 OSPF 10 2 D 10.1.34.3 GigabitEthernet0/0/0 R4\u7684\u8def\u7531\u8868\u4e2d\uff0c\u5df2\u7ecf\u770b\u4e0d\u52301.1.1.1/32\u8fd9\u6761AS\u5916\u90e8\u8def\u7531\u4e86\uff0c\u4f46\u662fR4\u4f9d\u7136\u662f\u80fd\u591f\u8bbf\u95ee1.1.1.1/32\u7684\uff0c\u56e0\u4e3a NSSA\u7684ABR R3\u4e3aNSSA\u4e0b\u53d1\u4e86\u4e00\u67617\u7c7b\u7684\u7f3a\u7701\u8def\u7531\uff0c\u901a\u8fc7\u8fd9\u6761\u7f3a\u7701\u8def\u7531\uff0cR4\u4f9d\u7136\u80fd\u591f\u7a7f\u8d8a\u9aa8\u5e72\u533a\u57df\u8bbf\u95eeAS\u5916\u90e8\u7f51\u7edc\u3002 \u518d\u770b\u4e00\u4e0bR4\u7684LSDB\uff1a Router 4.4.4.4 4.4.4.4 902 36 80000004 1 Router 3.3.3.3 3.3.3.3 901 36 80000006 1 Network 10.1.34.3 3.3.3.3 901 32 80000002 0 Sum-Net 10.1.23.0 3.3.3.3 1103 28 80000001 1 Sum-Net 10.1.12.0 3.3.3.3 1103 28 80000001 2 NSSA 4.4.4.4 4.4.4.4 910 36 80000001 1 NSSA 10.1.34.0 4.4.4.4 910 36 80000002 1 NSSA 0.0.0.0 3.3.3.3 1103 36 80000001 1 R4\u7684LSDB\u4e2d\u5df2\u7ecf\u6ca1\u67095\u7c7bLSA\u4e86\uff0c\u5176\u81ea\u8eab\u91cd\u53d1\u5e03\u8fdbOSPF\u7684\u76f4\u8fde\u8def\u75314.4.4.4/32\u53ca10.1.34.0/24\u4ee57\u7c7b LSA\u7684\u5f62\u5f0f\u88ab\u521b\u5efa\u3002\u53e6\u5916\uff0cR3\u8fd8\u5411NSSA\u4e2d\u653e\u5165\u4e00\u67617\u7c7bLSA\u76840.0.0.0/0\u7f3a\u7701\u8def\u7531\u3002\u770b\u4e00\u4e0bR3\u8def\u7531\u8868\u4e2d\u7684OSPF\u8def\u7531\uff1a R3\u7684\u8def\u7531\u8868\u4e2d\uff0c\u6709\u4e00\u67611.1.1.1/32\u7684\u5916\u90e8\u8def\u7531\uff0c\u8fd9\u662f\u901a\u8fc75\u7c7bLSA\u8ba1\u7b97\u5f97\u51fa\u7684\u3002\u8fd8\u6709\u4e00\u67614.4.4.4/32\u7684\u5916\u90e8\u8def\u7531\uff0c\u8fd9\u662f\u901a\u8fc77\u7c7bLSA\u8ba1\u7b97\u5f97\u51fa\u7684\uff08\u56e0\u6b64\u5728\u8def\u7531\u8868\u4e2d\u7684\u6807\u8bb0\u4e3aO_NSSA\uff09\u3002\u5f53\u7136R3\u4f5c\u4e3aNSSA \u7684 ABR\uff0c\u662f\u4e0d\u5141\u8bb8\u628a7\u7c7bLSA\u76f4\u63a5\u6ce8\u5165\u9aa8\u5e72\u533a\u57df\u7684\uff0c\u800c\u662f\u4f1a\u6267\u884c\u4e00\u4e2a7\u8f6c5\u7684\u52a8\u4f5c\uff0c\u628a7\u7c7bLSA\u8f6c\u6362\u62105\u7c7bLSA\uff0c \u8fd9\u662f\u56e0\u4e3a7\u7c7bLSA\u53ea\u80fd\u5b58\u5728\u4e8eNSSA\u4e2d\u3002 \u800cR2\u8def\u7531\u8868\u4e2d\u7684OSPF\u8def\u7531\uff1a \u6709\u4e24\u6761AS\u5916\u90e8\u8def\u7531\uff0c\u5206\u522b\u662f1.1.1.1/32\u548c4.4.4.4/32\uff0c\u5176\u4e2d1.1.1.1/32\u662f\u7531R1\u5f15\u5165\u7684\uff0c\u800c4.4.4.4/32\u662f\u7ecf\u7531R3\u6267\u884c7\u7c7bLSA\u8f6c5\u7c7bLSA\u540e\u5f15\u5165\u7684\u3002 \u5c06area2\u914d\u7f6e\u4e3aTotally-NSSA \u00b6 \u5728\u4e0a\u9762\u7684\u9700\u6c42\u4e2d\uff0carea2\u53d8\u6210\u4e00\u4e2a\u975e\u5e38\u7279\u6b8a\u7684\u533a\u57df\uff1aNSSA\uff0c\u8be5\u533a\u57df\u5185\u6cdb\u6d2a\u7684LSA\u5176\u5b9e\u662f\u53ef\u4ee5\u8fdb\u4e00\u6b65\u51cf\u5c11\u7684\u3002\u65e2\u7136area2\u5df2\u7ecf\u4eceR3\u83b7\u53d6\u4e00\u6761\u7f3a\u7701\u8def\u7531\uff0c\u901a\u8fc7\u8fd9\u6761\u7f3a\u7701\u8def\u7531\u80fd\u591f\u7a7f\u8d8a\u9aa8\u5e72\u533a\u57df\u5230\u8fbeAS\u5916\u90e8\uff0c\u90a3\u4e48\u4e3a\u4ec0\u4e48\u4e0d\u8fdb\u4e00\u6b65\u628a\u63cf\u8ff0\u533a\u57df\u95f4\u8def\u7531\u76843\u7c7bLSA\u4e5f\u4e00\u5e76\u6291\u5236\u6389\u5462\uff1f\u8fd9\u5c31\u51fa\u73b0\u4e86\u6700\u540e\u4e00\u79cd\u7279\u6b8a\u533a\u57df\uff1a Totally-NSSA\u3002 R3\u7684\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a [R3] ospf 1 \u4e00\u65e6\u5c06area2\u53d8\u6210Totally-NSSA\uff0carea2\u7684ABR\u2014\u2014\u4e5f\u5c31\u662fR3\u5c06\u4f1a\u963b\u63213\u7c7b\u30014\u7c7b\u548c5\u7c7bLSA\u8fdb\u5165\u8be5\u533a\u57df\uff0c \u540c\u65f6\u8fd8\u4f1a\u5411\u8be5\u533a\u57df\u4e0b\u53d1\u4e00\u6761\u4f7f\u75283\u7c7bLSA\u63cf\u8ff0\u7f3a\u7701\u8def\u7531\u3002\u5f53\u7136\u8be5\u533a\u57df\u4f9d\u7136\u662f\u53ef\u4ee5\u4ece\u533a\u57df\u672c\u5730\u6ce8\u5165\u5916\u90e8\u8def\u7531\u7684\uff1a \u6b64\u65f6R4\u8def\u7531\u8868\u4e2d\u7684OSPF\u8def\u7531\uff1a [R4]display ip routing-table protocol ospf Destination/Mask Proto Pre Cost Flags NextHop Interface 0.0.0.0/0 OSPF 10 2 D 10.1.34.3 GigabitEthernet0/0/0 R4\u7684\u8def\u7531\u8868\u5df2\u7ecf\u88ab\u6700\u5927\u9650\u5ea6\u7684\u7b80\u5316\u4e86\uff0c\u6b64\u65f6\u5728\u8def\u7531\u8868\u4e2d\u4ec5\u6709\u4e00\u6761\u7f3a\u7701\u8def\u7531\u3002\u8fd9\u6761\u7f3a\u7701\u8def\u7531\u5b9e\u8d28\u4e0a\u662f\u7531 R3\u4e0b\u53d1\u7684\uff0c\u4f7f\u75283\u7c7bLSA\u63cf\u8ff0\u3002\u67e5\u770b\u4e00\u4e0bR4\u7684LSDB\uff1a \u5728R4\u7684LSDB\u4e2d\uff0c\u9664\u4e86\u4e00\u6761\u63cf\u8ff0\u7f3a\u7701\u8def\u7531\u76843\u7c7bLSA\uff0c\u6ca1\u6709\u5176\u4ed6\u76843\u7c7bLSA\u548c4\u30015\u7c7bLSA\u4e86\u3002 OSPF\u5404\u79cdLSA\u7c7b\u578b\u53ca\u7279\u6b8a\u533a\u57df\u5c0f\u7ed3 \u00b6 3.5.5 OSPF \u9ad8 \u7ea7 \u6700\u8fd1\u6709\u540c\u4e8b\u5728HI 3MS\u4e0a\u95ee\u4e86\u4e2a\u5173\u4e8eOSPF\u7684\u95ee\u9898\uff08 OSPF\u542f\u7528filter-policy import\u540e\u65e0\u6cd5\u6536\u5230NSSA\u8def\u7531\u95ee\u9898 \uff09\uff0c\u7b80\u5355\u7684\u8bf4\uff0c\u573a\u666f\u5982\u4e0b\u56fe\u6240\u793a\uff0cR1\u4e0eR2\u5728Area0\u4e2d\u5efa\u7acb\u4e86OSPF\u90bb\u63a5\u5173\u7cfb\uff0c\u800cR2\u4e0eR3\u5728Area1\u4e2d\u5efa\u7acb\u4e86OSPF \u90bb\u63a5\u5173\u7cfb\u3002Area1\u88ab\u914d\u7f6e\u4e3a\u4e86NSSA\uff0c\u540c\u65f6R3\u5c06\u5916\u90e8\u8def\u7531100.1.1.0/24\u91cd\u53d1\u5e03\uff08Import-route\uff09\u5230\u4e86OSPF\u4e2d\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0cR1\u5e94\u8be5\u80fd\u5b66\u4e60\u5230OSPF\u533a\u57df\u95f4\u8def\u753123.1.1.0/24\uff0c\u4ee5\u53ca\u5916\u90e8\u8def\u7531100.1.1.0/24\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6b64\u65f6\u5982\u679c\u5e0c\u671bR1\u7684\u8def\u7531\u8868\u4e2d\u4eceOSPF\u83b7\u53d6\u5230\u7684\u8def\u7531\u53ea\u51fa\u73b0100.1.1.0/24\uff0c\u5176\u4ed6\u7684OSPF\u8def\u7531\u5168\u90e8\u8fc7\u6ee4\u6389\uff0c\u90a3\u4e48R1\u53ef\u4ee5\u91c7\u7528\u5982\u4e0b\u914d\u7f6e\uff1a \u8fd9\u4e9b\u914d\u7f6e\u770b\u8d77\u6765\u6ca1\u5565\u95ee\u9898\uff0c\u4f46\u662f\u6267\u884c\u5b8c\u6210\u540e\uff0c\u4f60\u4f1a\u53d1\u73b0R1\u7684\u8def\u7531\u8868\u4e2d\u5e76\u6ca1\u6709\u5230\u8fbe100.1.1.0/24\u7684\u8def\u7531\u3002\u4e3a\u4ec0 \u4e48\u914d\u7f6e\u4e2d\u660e\u660e\u5141\u8bb8\u4e86100.1.1.0/24\u8def\u7531\uff0c\u4f46\u662f\u8fd9\u6761\u8def\u7531\u5374\u88ab\u8fc7\u6ee4\u6389\u4e86\u5462\uff1f\u5176\u5b9e\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u57fa\u7840\u7684OSPF\u95ee\u9898\u3002\u4ea7\u751f\u8fd9\u4e2a\u73b0\u8c61\u7684\u5173\u952e\u5728\u4e8eOSPF FA\uff08Forwarding Address\uff0c\u8f6c\u53d1\u5730\u5740\uff09\u3002\u7b80\u5355\u5730\u8bf4\uff0cFA\u662fOSPF Type- 5\u3001Type-7 LSA\u624d\u4f1a\u643a\u5e26\u7684\u4e00\u4e2a\u5b57\u6bb5\uff0c\u4e3b\u8981\u7528\u4e8e\u89c4\u907f\u6b21\u4f18\u8def\u5f84\u95ee\u9898\u3002 FA\u5728OSPF\u5916\u90e8\u8def\u7531\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u7684\u5f71\u54cd \u00b6 \u90fd\u77e5\u9053OSPF\u8def\u7531\u5668\u662f\u4f9d\u636eLSA\u8fdb\u884c\u8def\u7531\u8ba1\u7b97\u7684\uff0c\u800c\u6839\u636eType-5\u3001Type-7 LSA\uff0c\u8def\u7531\u5668\u53ef\u8ba1\u7b97\u51fa\u5230\u8fbe\u57df\u5916\u7684\u8def\u7531\u3002\u4ee5Type-5 LSA\u4e3a\u4f8b\uff0c\u8def\u7531\u5668\u4f7f\u7528\u67d0\u4e2aType-5 LSA\u8ba1\u7b97\u5916\u90e8\u8def\u7531\u65f6\uff0c\u5982\u679c\u53d1\u73b0\u8be5LSA\u6240\u643a\u5e26\u7684FA\u4e3a0.0.0.0\uff0c\u90a3\u4e48\u8def\u7531\u5668\u4f1a\u5c06\u5230\u8fbe\u53d1\u5e03\u8be5LSA\u7684ASBR\u7684\u4e0b\u4e00\u8df3\u89c6\u4e3a\u5230\u8fbe\u8fd9\u4e2a\u57df\u5916\u7f51\u6bb5\u7684\u4e0b\u4e00\u8df3\uff1b\u800c\u5982\u679c\u8be5LSA\u6240\u643a\u5e26\u7684FA\u4e3a\u975e0.0.0.0\uff0c\u90a3\u4e48\u8def\u7531\u5668\u4f1a\u5c06\u5230\u8fbe\u8be5FA\u7684\u4e0b\u4e00\u8df3\u89c6\u4e3a\u5230\u8fbe\u8fd9\u4e2a\u57df\u5916\u7f51\u6bb5\u7684\u4e0b\u4e00\u8df3\u3002 \u7b80\u5355\u70b9\u8bf4\uff0c\u5c31\u662f\u5982\u679cType-5 LSA\u7684FA\u4e3a0.0.0.0\uff0c\u6211\u5c31\u4eceASBR\u51fa\u53bb\u3001\u5230\u8fbe\u5bf9\u5e94\u7684\u5916\u90e8\u7f51\u6bb5\uff1b\u5982\u679cType- 5 LSA\u7684FA\u4e3a\u975e0.0.0.0\uff0c\u6211\u5c31\u8ba4\u4e3a\u8fd9\u4e2aFA\u5c31\u662f\u5230\u8fbe\u5916\u90e8\u7f51\u6bb5\u7684\u201c\u51fa\u53e3\u201d\u3002\u800c\u4e14\uff0c\u5f53Type-5 LSA\u7684FA\u4e3a\u975e0.0.0.0\u65f6\uff0cOSPF\u8def\u7531\u5668\u4f1a\u5728\u5176\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u5230\u8fbeFA\u7684\u8def\u7531\uff0c\u4ec5\u5f53\u5b83\u53d1\u73b0\u8def\u7531\u8868\u4e2d\u5b58\u5728\u5230\u8fbe\u8fd9\u4e2aFA \u7684OSPF\u5185\u90e8\u8def\u7531\u65f6\uff08OSPF\u533a\u57df\u5185\u8def\u7531\u6216OSPF\u533a\u57df\u95f4\u8def\u7531\uff09\uff0c\u8def\u7531\u5668\u624d\u4f1a\u4f7f\u7528\u8fd9\u4e2aType-5 LSA\u8fdb\u884c\u5916\u90e8\u8def\u7531\u8ba1\u7b97\uff0c\u5426\u5219\u5c06\u5ffd\u7565\u8fd9\u4e2aLSA\u3002 \u56de\u5230\u8fd9\u4e2a\u4f8b\u5b50 \u00b6 \u5728\u4e0a\u9762\u63d0\u5230\u7684\u4f8b\u5b50\u4e2d\uff0cR3\u5c06\u5916\u90e8\u8def\u7531100.1.1.0/24\u5f15\u5165OSPF\u540e\uff0c\u5b83\u4f5c\u4e3aASBR\u5c06\u5411Area1\u4e2d\u6ce8\u5165Type- 7 LSA\uff0c\u800cR2\u4f5c\u4e3aABR\uff0c\u5219\u4f1a\u5c06\u8be5LSA\u8f6c\u6362\u6210Type-5 LSA\u5e76\u6ce8\u5165Area0\uff0c\u5728\u6267\u884c\u8f6c\u6362\u7684\u8fc7\u7a0b\u4e2d\uff0c\u7f3a\u7701\u65f6 R2\u4f1a\u4fdd\u7559Type-7 LSA\u7684FA\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u5728R1\u4e0a\u67e5\u770bType-5 LSA\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a \u7559\u610f\u5230\u7528\u4e8e\u63cf\u8ff0\u5916\u90e8\u8def\u7531100.1.1.0/24\u7684Type-5 LSA\u7684FA\u4e3a23.1.1.3\uff08R3\u7684\u63a5\u53e3IP\u5730\u5740\uff09\uff0c\u663e\u7136\u8fd9\u662f\u4e00 \u4e2a\u975e0.0.0.0\u7684\u5730\u5740\u3002R1\u5fc5\u987b\u5728\u5176\u8def\u7531\u8868\u4e2d\u53d1\u73b0\u5230\u8fbe23.1.1.3\u7684OSPF\u5185\u90e8\u8def\u7531\uff0c\u624d\u4f1a\u4f7f\u7528\u8be5LSA\u8ba1\u7b97\u5230\u8fbe100.1.1.0/24\u7684\u5916\u90e8\u8def\u7531\uff0c\u5426\u5219\u5c06\u5ffd\u7565\u8be5Type-5 LSA\u3002 \u800cR1\u6240\u914d\u7f6e\u7684\u5165\u7ad9filter-policy\u867d\u7136\u5141\u8bb8\u4e86\u5916\u90e8\u8def\u7531100.1.1.0/24\uff0c\u4f46\u662f\u5374\u5c06\u5176\u4ed6\u6240\u6709\u7684OSPF\u8def\u7531\u5168\u90e8\u8fc7\u6ee4\uff0c\u5176\u4e2d\u5305\u62ec23.1.1.0/24\u8fd9\u6761\u533a\u57df\u95f4\u8def\u7531\uff0c\u56e0\u6b64\u867d\u7136R1\u7684OSPF LSDB\u4e2d\u5b58\u5728\u5173\u4e8e100.1.1.0/24\u7684Type-5 LSA\uff0c\u4f46\u662f\u5b83\u5374\u65e0\u6cd5\u8ba1\u7b97\u51fa\u5916\u90e8\u8def\u7531\u3002\u8fd9\u5c31\u662f\u95ee\u9898\u7684\u6839\u56e0\u3002 \u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u529e\u6cd5\u6709\u51e0\u4e2a\uff0c\u4f8b\u5982\uff0c\u53ef\u4ee5\u8ba9R2\u5c06Type-7 LSA\u8f6c\u6362\u6210Type-5 LSA\u65f6\uff0c\u628aFA\u5b57\u6bb5\u503c\u64e6\u9664\uff0c \u6539\u5199\u4e3a0.0.0.0\uff0cR2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u8fd9\u6837\u4e00\u6765\uff0cR1\u7684\u8def\u7531\u8868\u4e2d\u4fbf\u4f1a\u51fa\u73b0100.1.1.0/24\u8def\u7531\uff0c\u800c\u4e14\u53ea\u4f1a\u51fa\u73b0\u8fd9\u4e00\u6761OSPF\u8def\u7531\uff08\u5176\u4ed6\u8def\u7531\u90fd\u88ab \u8fc7\u6ee4\u4e86\uff09\u3002R1\u5728\u4f7f\u7528\u8be5Type-5 LSA\u8ba1\u7b97\u5230\u8fbe100.1.1.0/24\u7684\u5916\u90e8\u8def\u7531\u65f6\uff0c\u4ec5\u9700\u4fdd\u8bc1\u81ea\u5df1\u80fd\u591f\u5230\u8fbeASBR \uff08\u4ea7\u751f\u8be5Type-5 LSA\u7684ASBR\u4e3aR2\uff09\u5373\u53ef\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a OSPF\u5f15\u5165\u5916\u90e8\u8def\u7531\u751f\u6210Type-5 LSA\u6216Type-7 LSA\u65f6\uff0cFA\u7684\u586b\u5199\u89c4\u5219\u662f\u4ec0\u4e48 \u00b6 Type-5 LSA\u901a\u8fc7\u5f15\u5165\u5916\u90e8\u8def\u7531\u751f\u6210\u3002\u5f53\u88ab\u5f15\u5165\u8def\u7531\u7684\u51fa\u63a5\u53e3\u5728OSPF\u4e2d\u6fc0\u6d3b\u65f6\uff08\u6ce8\uff1a\u4e0d\u80fd\u88ab\u914d\u7f6e\u4e3aSilent- Interface\uff09\uff0c\u800c\u4e14\u8be5\u51fa\u63a5\u53e3\u4e3aBroadcast\u7c7b\u578b\uff0c\u5219FA\u4e3a\u88ab\u5f15\u5165\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5730\u5740\uff1b\u5426\u5219\u53d6\u503c\u4e3a0\u3002Type-7 LSA\u7684FA\u53d6\u503c\u4e0d\u4f1a\u4e3a0\u3002\u5f53\u88ab\u5f15\u5165\u8def\u7531\u7684\u51fa\u63a5\u53e3\u5728\u540c\u4e00\u4e2aNSSA\u5185\u6fc0\u6d3b\uff0c\u800c\u4e14\u8be5\u51fa\u63a5\u53e3\u4e3a Broadcast\u7c7b\u578b\uff0c\u5219FA\u4e3a\u88ab\u5f15\u5165\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5730\u5740\uff1b\u5426\u5219\uff1a \u5982\u679cASBR\u5728\u8be5NSSA\u5185\u5b58\u5728loopback\u63a5\u53e3\uff0c\u5219FA\u7684\u503c\u9009\u53d6loopback\u63a5\u53e3\u7684IP\u5730\u5740\u3002 \u5982\u679c\u6ca1\u6709loopback\u63a5\u53e3\uff0c\u5219FA\u7684\u503c\u9009\u53d6ASBR\u5728\u8be5NSSA\u5185\u7b2c\u4e00\u4e2aUP\u7684\u63a5\u53e3\u7684IP\u5730\u5740\u3002 \u5728\u672c\u4f8b\u4e2d\uff0cR3\u4f5c\u4e3aNSSA\u7684ASBR\u5f15\u5165\u4e86\u5916\u90e8\u8def\u7531100.1.1.0/24\uff0c\u5b83\u4f1a\u5411Area1\u4e2d\u6ce8\u5165Type-7 LSA\uff0c\u5e76\u4e14\u5c06\u8be5LSA\u7684FA\u8bbe\u7f6e\u4e3a\u81ea\u5df1\u5728Area1\u5185\u7b2c\u4e00\u4e2aUP\u7684\u63a5\u53e3\u7684IP\u5730\u5740\u2014\u201423.1.1.3\u3002 \u4ea4\u6362\u63d0\u9ad8 \u00b6 S5300 \u4ea4\u6362\u673a\u5806\u53e0 \u7406\u8bba\u90e8\u5206 \u5806\u53e0\uff08iStack\uff09/\u96c6\u7fa4\uff08CSS\uff09\u7684\u6280\u672f\u4f7f\u5f97\u591a\u53f0\u7269\u7406\u8bbe\u5907\u80fd\u591f\u534f\u540c\u5de5\u4f5c\uff0c\u4ece\u800c\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u53f0\u8bbe\u5907\uff0c\u8fd9\u9879\u6280\u672f\u5c06\u5927\u5927\u7b80\u5316\u6211\u4eec\u7684\u7f51\u7edc\u903b\u8f91\u67b6\u6784\u3001\u7f51\u7edc\u914d\u7f6e\u548c\u8bbe\u5907\u7ba1\u7406\u3002\u4f8b\u5982\u4e24\u53f0\u539f\u672c\u72ec\u7acb\u5de5\u4f5c\u7684\u4ea4\u6362\u673a\u5728\u90e8\u7f72\u4e86\u5806\u53e0/ \u96c6\u7fa4\u6280\u672f\u4e4b\u540e\uff0c\u53ef\u4ee5\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u53f0\u8bbe\u5907\uff0c\u76f8\u5f53\u4e8e\u4e00\u53f0\u4ea4\u6362\u673a\u3002ATAE3.0/E9000\u4e5f\u652f\u6301\u4ea4\u6362\u677f\u5361\u7684\u5806\u53e0\uff0c \u4e24\u5757\u4ea4\u6362\u677f\u5361\u4e5f\u53ef\u4ee5\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u53f0\u4ea4\u6362\u673a\u3002 \u5806\u53e0\u6280\u672f\u4e3b\u8981\u662f\u5e94\u7528\u4e8e\u534e\u4e3a\u76d2\u5f0f\u4ea4\u6362\u673a\uff0c\u800c\u96c6\u7fa4\u6280\u672f\u5219\u4e3b\u8981\u5e94\u7528\u4e8e\u534e\u4e3a\u6846\u5f0f\u4ea4\u6362\u673a\uff0c\u4e24\u8005\u6280\u672f\u539f\u7406\u4e0d\u540c\uff0c\u4f46\u662f\u6838\u5fc3\u601d\u60f3\u662f\u4e00\u6837\u7684\u3002 \u5982\u4e0a\u56fe\u6240\u793a\uff0cSW1\u53caSW2\u5747\u662fS5300-EI\u4ea4\u6362\u673a\uff0c\u5b83\u4eec\u5747\u914d\u5907\u4e86\u5806\u53e0\u5361\uff0c\u5e76\u4f7f\u7528\u5806\u53e0\u7ebf\u7f06\u8fdb\u884c\u8fde\u63a5\u3002\u5728\u5b8c\u6210\u5806\u53e0\u7cfb\u7edf\u7684\u7ec4\u5efa\u540e\uff0c\u8fd9\u4e24\u53f0\u72ec\u7acb\u7684\u4ea4\u6362\u673a\u5c06\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u53f0\u8bbe\u5907\uff0c\u4f60\u53ef\u4ee5\u7b80\u5355\u5730\u5c06\u8be5\u5806\u53e0\u7cfb\u7edf\u60f3\u8c61\u4e3a\u62e5\u6709\u4e24\u4e2a\u4e1a\u52a1\u677f\u5361\u7684\u6846\u5f0f\u4ea4\u6362\u673a\u3002 S5300-EI\u4ea4\u6362\u673a\u53ea\u652f\u6301\u4f7f\u7528\u5806\u53e0\u5361\u7684\u65b9\u5f0f\u8fdb\u884c\u5806\u53e0\u3002\u5806\u53e0\u5361\u5806\u53e0\u7684\u65b9\u5f0f\u5fc5\u987b\u914d\u5957\u4f7f\u7528ES5D00ETPC00\u5806\u53e0\u540e\u63d2\u5361\u548cPCIe\u7ebf\u7f06\u3002\u9700\u6ce8\u610f\u7684\u662fES5D00ETPC00\u5806\u53e0\u540e\u63d2\u5361\u4e0d\u652f\u6301\u70ed\u63d2\u62d4\uff0c\u56e0\u6b64\u5b89\u88c5\u5806\u53e0\u5361\u65f6\uff0c\u9700\u5148\u5c06\u8bbe\u5907\u4e0b\u7535\u3002\u5806\u53e0\u5361\u7684\u5b89\u88c5\u5982\u4e0b\u56fe\u6240\u793a\uff1a ES5D00ETPC00\u63d0\u4f9b2\u4e2a12Gbit/s\u901f\u7387\u7684\u7535\u63a5\u53e3\u7528\u4e8e\u8bbe\u5907\u95f4\u5806\u53e0\u5361\u5806\u53e0\uff0c\u4f7f\u7528\u4e13\u7528\u7684PCIe\u7535\u7f06\u8fdb\u884c\u8fde\u63a5\uff0c PCIe\u7535\u7f06\u7684\u5916\u89c2\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5806\u53e0\u7ebf\u7f06\u7684\u94fe\u63a5\u5982\u4e0b\u56fe\uff08\u4ee5\u94fe\u5f62\u94fe\u63a5\u4e3a\u4f8b\uff09\uff1a \u4f7f\u7528\u5806\u53e0\u5361\u5806\u53e0\u65f6\uff0c\u53ef\u4ee5\u8fde\u4e00\u6761\u5806\u53e0\u7ebf\uff0c\u4e5f\u53ef\u4ee5\u8fde\u4e24\u6761\uff08\u5f53\u7136\uff0c\u5efa\u8bae\u8fde\u63a5\u4e24\u6839\u7ebf\u7f06\uff09\uff0c\u603b\u4e4b\u662f\u8bbe\u5907A\u7684Stack1 \u63a5\u53e3\u8fde\u8bbe\u5907B\u7684Stack2\u63a5\u53e3\uff0c\u8bbe\u5907A\u7684Stack2\u63a5\u53e3\u8fde\u8bbe\u5907B\u7684Stack1\u63a5\u53e3\uff0c\u4e5f\u5c31\u662f\u4ea4\u53c9\u8fde\u7ebf\u3002 \u914d\u7f6e\u6307\u5bfc \u6b64\u5904\u4ee5\u4e24\u53f0S5300-EI\u4ea4\u6362\u673a\uff08SW1\u53caSW2\uff09\u90e8\u7f72\u5806\u53e0\u4e3a\u4f8b\uff0c\u8bb2\u8ff0\u5806\u53e0\u7684\u6b65\u9aa4\uff1a SW1\u53caSW2\u5148\u4e0b\u7535\uff0c\u5b89\u88c5\u201cES5D00ETPC00\u5806\u53e0\u540e\u63d2\u5361\u201d\uff0c\u7136\u540e\u5c06\u8bbe\u5907\u4e0a\u7535\u3002 \u00b6 ES5D00ETPC00\u5806\u53e0\u540e\u63d2\u5361\u4e0d\u652f\u6301\u70ed\u63d2\u62d4\uff0c\u5982\u679c\u8bbe\u5907\u5904\u4e8e\u4e0a\u7535\u72b6\u6001\uff0c\u5b89\u88c5\u524d\u9700\u8981\u5148\u5c06\u8bbe\u5907\u4e0b\u7535\u3002\u5806\u53e0\u5361\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u624d\u80fd\u8fdb\u884c\u76f8\u5173\u914d\u7f6e\u3002 \u8bbe\u5907\u542f\u52a8\u540e\uff0c\u4f7f\u80fd\u5806\u53e0\u529f\u80fd\u5e76\u914d\u7f6e\u6210\u5458\u4ea4\u6362\u673a\u7684\u5806\u53e0ID\u548c\u4f18\u5148\u7ea7\u3002 \u00b6 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u8bf4\u660e\uff1a\u591a\u53f0\u7269\u7406\u4ea4\u6362\u673a\u53ef\u4ee5\u901a\u8fc7\u90e8\u7f72\u5806\u53e0\u6280\u672f\u5e76\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u53f0\u4ea4\u6362\u673a\uff0c\u6211\u4eec\u5c06\u8fd9\u4e9b\u7269\u7406\u4ea4\u6362\u673a\u79f0\u4e3a\u5806\u53e0\u6210\u5458\u4ea4\u6362\u673a\u3002\u5806\u53e0ID\u4e5f\u88ab\u79f0\u4e3a\u6210\u5458\u4ea4\u6362\u673a\u7684\u69fd\u4f4d\u53f7\uff08Slot ID\uff09\uff0c\u7528\u6765\u6807\u8bc6\u548c\u7ba1\u7406\u6210\u5458\u4ea4\u6362\u673a\uff0c\u5806\u53e0\u4e2d\u6240\u6709\u6210\u5458\u4ea4\u6362\u673a\u7684\u5806\u53e0ID\u90fd\u662f\u552f\u4e00\u7684\u3002\u5f53\u5806\u53e0\u7cfb\u7edf\u5efa\u7acb\u8d77\u6765\u4e4b\u540e\uff0c\u5806\u53e0ID\u8fd8\u7528\u4e8e\u4f53\u73b0\u6210\u5458\u4ea4\u6362\u673a\u5bf9\u5e94\u7684\u201c\u69fd\u4f4d\u53f7\u201d\uff08\u5728\u4ea4\u6362\u673a\u5806\u53e0\u4e4b\u524d\uff0c\u6bcf\u53f0\u8bbe\u5907\u90fd\u662f\u72ec\u7acb\u7684\u4e2a\u4f53\uff0c\u5806\u53e0\u4e4b\u540e\uff0c\u6bcf\u53f0\u8bbe\u5907\u5c31\u76f8\u5f53\u4e8e\u5806\u53e0\u7cfb\u7edf\u7684\u4e00\u4e2a\u69fd\u4f4d\uff09\u3002 \u7f3a\u7701\u60c5\u51b5\u4e0b\u5806\u53e0ID\u4e3a0\uff0c\u5f53\u7136\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4stack slot 0 renumber\u6765\u4fee\u6539\u8fd9\u4e2a\u503c\uff0c\u4fee\u6539\u4e4b\u540e\uff0c\u5fc5\u987b\u91cd\u542f\u4ea4\u6362\u673a\uff0c\u65b0\u7684\u5806\u53e0ID\u624d\u4f1a\u751f\u6548\u3002\u5982\u679c\u53c2\u4e0e\u5806\u53e0\u7684\u4ea4\u6362\u673a\u7684\u5806\u53e0ID\u90fd\u4e3a0\uff0c\u90a3\u4e48\u5728\u5806\u53e0\u7cfb\u7edf\u5efa\u7acb\u65f6\uff0c\u7531 Master\u4ea4\u6362\u673a\u6765\u5206\u914d\u5806\u53e0ID\uff0c\u4ee5\u786e\u4fdd\u5806\u53e0ID\u7684\u552f\u4e00\u6027\u3002 \u5806\u53e0\u4f18\u5148\u7ea7\u662f\u6210\u5458\u4ea4\u6362\u673a\u7684\u4e00\u4e2a\u5806\u53e0\u5c5e\u6027\uff0c\u4e3b\u8981\u7528\u4e8e\u89d2\u8272\u9009\u4e3e\u8fc7\u7a0b\u4e2d\u786e\u5b9a\u6210\u5458\u4ea4\u6362\u673a\u7684\u89d2\u8272\uff0c\u4f18\u5148\u7ea7\u503c\u8d8a\u5927\u8868\u793a\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\u5f53\u9009\u4e3a\u4e3b\u4ea4\u6362\u673a\u7684\u53ef\u80fd\u6027\u8d8a\u5927\u3002 \u5806\u53e0\u7cfb\u7edf\u5efa\u7acb\u5b8c\u6210\u540e\uff0c\u5982\u679c\u67d0\u53f0\u4ea4\u6362\u673a\u7684\u5806\u53e0ID\u4e3a1\uff0c\u90a3\u4e48\u5806\u53e0\u4e4b\u524d\u8be5\u8bbe\u5907\u7684\u63a5\u53e3\u5982\u679c\u7f16\u53f7\u4e3aGE0/0/1\uff0c\u5219\u5806\u53e0\u540e\u53d8\u4e3aGE1/0/1\uff08\u4e09\u4e2a\u6570\u5b57\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6570\u5b57\u4e3a\u5806\u53e0ID\uff09\u3002 \u5c06SW1\u53caSW2\u4e0b\u7535\uff0c\u4f7f\u7528PCIe\u7ebf\u7f06\u6309\u7167\u89c4\u8303\u8fde\u63a5\u5806\u53e0\u7aef\u53e3\uff0c\u7136\u540e\u5c06\u8bbe\u5907\u4e0a\u7535\uff08\u5148\u4e0a\u7535SW1\uff0c\u518d\u4e0a\u7535SW2\uff09\u3002 \u00b6 \u8bbe\u5907\u5b8c\u6210\u542f\u52a8\u540e\uff0c\u5806\u53e0\u7cfb\u7edf\u5c06\u4f1a\u5efa\u7acb\u8d77\u6765\uff0c\u53ef\u4ee5\u4f7f\u7528\u76f8\u5173\u547d\u4ee4\u67e5\u770b\u5806\u53e0\u7cfb\u7edf\u3002 \u00b6 \u6b64\u65f6\u767b\u5f55\u4e00\u53f0\u6210\u5458\u4ea4\u6362\u673a\u5373\u53ef\u7ba1\u7406\u6574\u4e2a\u5806\u53e0\u7cfb\u7edf\u3002 \u5806\u53e0\u7cfb\u7edf\u5efa\u7acb\u5b8c\u6210\u540e\uff0c\u914d\u7f6eMAD\u3002 \u00b6 \u4e24\u53f0\u4ea4\u6362\u673a\u7ec4\u5efa\u5806\u53e0\u7cfb\u7edf\u540e\uff0c\u5b83\u4eec\u4fbf\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u4e2a\u6574\u4f53\uff0c\u5982\u679c\u5806\u53e0\u7ebf\u7f06\u5168\u90e8\u53d1\u751f\u6545\u969c\uff0c\u90a3\u4e48\u5806\u53e0\u7cfb\u7edf\u5c06\u4f1a\u5206\u88c2\uff0c\u8fd9\u4e24\u53f0\u6210\u5458\u4ea4\u6362\u673a\u53d8\u6210\u4e24\u4e2a\u72ec\u7acb\u7684\u4e2a\u4f53\uff0c\u800c\u4e14\u5b83\u4eec\u7684\u914d\u7f6e\u8fd8\u662f\u76f8\u540c\u7684\uff0c\u6b64\u65f6\u5c31\u4f1a\u53d1\u751f\u5404\u79cd\u95ee\u9898\uff0c\u4f8b\u5982IP\u5730\u5740\u51b2\u7a81\u95ee\u9898\u7b49\u3002\u591a\u4e3b\u68c0\u6d4bMAD\uff08Multi-Active Detection\uff09\uff0c\u662f\u4e00\u79cd\u68c0\u6d4b\u548c\u5904\u7406\u5806\u53e0\u5206\u88c2\u7684\u534f\u8bae\uff0c\u7528\u4e8e\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cSW1\u53caSW2\u5b8c\u6210\u5806\u53e0\u7cfb\u7edf\u7684\u7ec4\u5efa\u540e\uff0c\u5728\u4ea4\u6362\u673a\u4e4b\u95f4\u589e\u52a0\u4e00\u6761\u8fde\u7ebf\uff08\u666e\u901a\u7684\u4ee5\u592a\u7f51\u7ebf\u6216\u5149\u7ea4\uff09\uff0c\u5c06\u5806\u53e0\u7ec4\u4e2d\u7684SW1\u7684GE0/0/20\u63a5\u53e3\u4e0eSW2\u7684GE1/0/20\u63a5\u53e3\u4e92\u8054\uff08\u6b64\u65f6SW2\u7684\u65b0\u5806\u53e0ID\u5df2\u7ecf\u751f\u6548\uff09\uff0c\u8fd9\u6761\u7ebf\u7f06\u5c06\u88ab\u914d\u7f6e\u4e3aMAD\u7ebf\u7f06\uff08\u5b83\u5e76\u4e0d\u4f1a\u627f\u8f7d\u4efb\u4f55\u4e1a\u52a1\u6d41\u91cf\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728\u73af\u8def\uff09\uff0c\u5f53\u5806\u53e0\u7cfb\u7edf\u5206\u88c2\u65f6\uff0c \u4e24\u53f0\u4ea4\u6362\u673a\u901a\u8fc7\u8be5\u6761\u7ebf\u7f06\u4ea4\u4e92\u534f\u5546\u62a5\u6587\uff0c\u534f\u5546\u5b8c\u6210\u540e\uff0c\u5176\u4e2d\u4e00\u53f0\u4ea4\u6362\u673a\u4f1a\u7531\u4e8e\u7ade\u4e89\u5931\u8d25\u81ea\u52a8\u5c06\u6240\u6709\u4e1a\u52a1\u63a5\u53e3\u5173\u95ed\uff0c\u4ece\u800c\u89c4\u907f\u5806\u53e0\u5206\u88c2\u540e\u7684IP\u5730\u5740\u51b2\u7a81\u7b49\u95ee\u9898\u3002 MAD\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u68c0\u67e5\u4e00\u4e0b\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a \u00b6 \u5806\u53e0\u7cfb\u7edf\u7ec4\u5efa\u5b8c\u6210\u540e\uff0c\u52a1\u5fc5\u4f7f\u7528display stack\u547d\u4ee4\u786e\u8ba4\u5806\u53e0\u7cfb\u7edf\u7684\u72b6\u6001\u3002 \u5806\u53e0\u7cfb\u7edf\u7ec4\u5efa\u5b8c\u6210\u540e\uff0c\u6240\u6709\u7684\u6210\u5458\u4ea4\u6362\u673a\u5728\u903b\u8f91\u4e0a\u5c31\u662f\u4e00\u4e2a\u6574\u4f53\uff0c\u56e0\u6b64\u5728\u505a\u7f51\u7edc\u89c4\u5212\u65f6\uff0c\u9700\u6ce8\u610f\u6b64\u65f6\u6574\u4e2a\u5806\u53e0\u7cfb\u7edf\u5c31\u662f\u201c\u4e00\u53f0\u5927\u4ea4\u6362\u673a\u201d\u3002 S6300 \u4ea4\u6362\u673a\u5806\u53e0 \u7406\u8bba\u90e8\u5206 \u5806\u53e0\u65b9\u5f0f\u53ca\u7ebf\u7f06 \u00b6 S63\u5168\u7cfb\u5217\u4ea4\u6362\u673a\u652f\u6301\u5806\u53e0\u7279\u6027\u3002S63\u4ea4\u6362\u673a\u7cfb\u5217\u4e0d\u9700\u8981\u989d\u5916\u914d\u7f6e\u5806\u53e0\u5361\uff0c\u53ef\u4ee5\u4f7f\u7528\u524d\u9762\u677f\u4e0a\u4efb\u610f\u7684 10GE\u4e1a\u52a1\u53e3\u5806\u53e0\uff0c\u5806\u53e0\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a \u5149\u7ea4\u8fde\u63a5\uff0c\u652f\u6301\u957f\u8ddd40km\u5806\u53e0\u3002 \u4e13\u7528\u5806\u53e0\u7ebf\u7f06\u8fde\u63a5\uff0c\u5806\u53e0\u7ebf\u7f06\u6709\u5982\u4e0b\u4e09\u79cd\u7c7b\u578b\uff1a S6300\uff0cLS6MCAS01\uff0cSFP+ \u5806\u53e0\u7ebf\u7f06\uff08100cm\uff0c\u542b\u6709\u4e24\u4e2a\u5806\u53e0\u6a21\u5757\uff09\u3002 S6300\uff0cLS6MCAS03\uff0cSFP+ \u5806\u53e0\u7ebf\u7f06\uff08300cm\uff0c\u542b\u6709\u4e24\u4e2a\u5806\u53e0\u6a21\u5757\uff09\u3002 S6300\uff0cLS6MCAS10\uff0cSFP+ \u5806\u53e0\u7ebf\u7f06\uff081000cm\uff0c\u542b\u6709\u4e24\u4e2a\u5806\u53e0\u6a21\u5757\uff09\u3002 \u4ee5LS6MCAS01\u4e13\u7528\u5806\u53e0\u7ebf\u7f06\uff1aSFP+Stacking Cable\uff08100cm, \u542b\u4e24\u4e2a\u5806\u53e0\u5149\u6a21\u5757\uff09\u4e3a\u4f8b\uff0c\u5916\u89c2\u5982\u4e0b\uff08\u7ebf\u7f06\u4e24\u5934\u5404\u81ea\u5e26\u4e00\u4e2a\u5149\u6a21\u5757\uff0c\u56fe\u4e3a\u7ebf\u7f06\u4e00\u7aef\uff09\uff1a Stack-Port\u53ca\u5806\u53e0\u6210\u5458\u7aef\u53e3 \u00b6 \u5806\u53e0\u7aef\u53e3\uff08Stack-Port\uff09\u662f\u4e13\u7528\u4e8e\u5806\u53e0\u7684\u903b\u8f91\u7aef\u53e3\uff0c\u9700\u8981\u548c\u5806\u53e0\u6210\u5458\u7aef\u53e3\uff08\u7269\u7406\u7aef\u53e3\uff09\u7ed1\u5b9a\u3002\u5806\u53e0\u7cfb\u7edf\u7684\u6bcf\u53f0\u6210\u5458\u4ea4\u6362\u673a\u4e0a\u652f\u6301\u4e24\u4e2aStack-Port\uff0c\u5206\u522b\u4e3aStack-Port n/1\u548cStack-Port n/2\uff0c\u5176\u4e2dn\u4e3a\u6210\u5458\u4ea4\u6362\u673a\u7684\u5806\u53e0ID\u3002 \u5806\u53e0\u6210\u5458\u7aef\u53e3\u6307\u7684\u662f\u8bbe\u5907\u4e0a\u7528\u4e8e\u5806\u53e0\u8fde\u63a5\u7684\u7269\u7406\u7aef\u53e3\u3002\u5806\u53e0\u6210\u5458\u7aef\u53e3\u7528\u4e8e\u8f6c\u53d1\u9700\u8981\u8de8\u6210\u5458\u4ea4\u6362\u673a\u7684\u4e1a\u52a1\u62a5\u6587\u6216\u6210\u5458\u4ea4\u6362\u673a\u4e4b\u95f4\u7684\u5806\u53e0\u534f\u8bae\u62a5\u6587\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u5806\u53e0\u7cfb\u7edf\u5bf9\u5806\u53e0\u7aef\u53e3\u7684\u914d\u7f6e\u662f\u6709\u8981\u6c42\u7684\u3002\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u5806\u53e0\u7aef\u53e3\u662f\u4e00\u4e2a\u903b\u8f91\u53e3\uff0c\u4e00\u4e2a\u8bbe\u5907\u4e0a\u652f\u6301\u4e24\u4e2aStack-Port\uff0c\u914d\u7f6e\u5806\u53e0\u65f6\uff0c\u8981\u6c42\u672c\u8bbe\u5907\u7684Stack-Port n/1\u53ea\u80fd\u548c\u90bb\u5c45\u8bbe\u5907\u7684Stack-Port n/2\u76f8\u8fde\uff0c\u800c\u672c\u8bbe\u5907\u7684Stack-Port n/2\u53ea\u80fd\u4e0e\u90bb\u5c45\u8bbe\u5907\u7684Stack-Port n/1\u76f8\u8fde\uff08\u6ce8\uff1aATAE\u4ea4\u6362\u677f\u5728\u8fdb\u884c\u5806\u53e0\u65f6\uff0c\u5219\u6ca1\u6709\u8fd9\u4e2a\u9650\u5236\uff09\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0cS6300-1\u7684XGE0/0/1\u53caXGE0/0/2\u63a5\u53e3\u4f7f\u7528\u5806\u53e0\u7ebf\u7f06\u4e0eS6300-2\u7684XGE0/0/1\u53ca XGE0/0/2\u4e92\u8054\uff0c\u73b0\u5728\u4e24\u53f0\u4ea4\u6362\u673a\u8981\u5efa\u7acb\u5806\u53e0\u7cfb\u7edf\u3002\u6211\u4eec\u5728S6300-1\u4e0a\u5c06XGE0/0/1\u53caXGE0/0/2\u8fd9\u4e24\u4e2a\u5806\u53e0\u6210\u5458\u7aef\u53e3\u6dfb\u52a0\u5230\u5806\u53e0\u7aef\u53e3Stack-Port 0/1\u4e2d\uff08\u5047\u8bbeS6300-1\u7684\u5806\u53e0ID\u4e3a0\uff09\uff0c\u90a3\u4e48\u5728S6300-2\u4e0a\u8fdb\u884c\u914d\u7f6e\u65f6\uff0c\u5c31\u8981\u5c06\u5176XGE0/0/1\u53caXGE0/0/2\u8fd9\u4e24\u4e2a\u5806\u53e0\u6210\u5458\u7aef\u53e3\u6dfb\u52a0\u5230\u5806\u53e0\u7aef\u53e3Stack-Port \u00bd\u4e2d\uff08\u5047\u8bbeS6300-2\u7684\u5806\u53e0ID\u4e3a1\uff09\u3002 \u5806\u53e0\u6ce8\u610f\u4e8b\u9879 \u00b6 S6300\u7cfb\u5217\u8bbe\u5907\u4f7f\u7528\u524d\u9762\u677f\u4e0a\u4efb\u610f10GE\u4e1a\u52a1\u53e3\u505a\u5806\u53e0\u53e3\uff0c\u7531\u4e8e\u8bbe\u5907\u82af\u7247\u7ed3\u6784\u7684\u539f\u56e0\uff0c\u524d\u9762\u677f\u4e0a\u768410GE \u53e3\uff0c\u4ece\u7aef\u53e31\u5f00\u59cb\uff0c\u6bcf4\u4e2a\u53e3\u4e3a\u4e00\u7ec4\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0c\u4e00\u7ec4\u4e2d\u76844\u4e2a\u53e3\u5fc5\u987b\u90fd\u662f\u5806\u53e0\u53e3\u6216\u8005\u90fd\u662f\u4e1a\u52a1\u53e3\uff0c \u56e0\u6b64\uff0c\u53ea\u8981\u4e00\u7ec4\u4e2d\u7684\u5176\u4e2d\u4e00\u4e2a\u88ab\u914d\u7f6e\u4e3a\u5806\u53e0\u53e3\uff0c\u5176\u4ed6\u7684\u90fd\u4e0d\u80fd\u4f5c\u4e3a\u4e1a\u52a1\u53e3\u4f7f\u7528\u3002\u8fd8\u9700\u8981\u518d\u5f3a\u8c03\u4e00\u4e0b\uff0c\u4e00\u65e6\u63a5\u53e3\u88ab\u914d\u7f6e\u4e3a\u5806\u53e0\u6210\u5458\u7aef\u53e3\uff0c\u90a3\u4e48\u8be5\u63a5\u53e3\u5c06\u4e0d\u80fd\u4f5c\u4e3a\u666e\u901a\u4e1a\u52a1\u53e3\u4f7f\u7528\u3002 \u914d\u7f6e\u6307\u5bfc \u5728\u4e0a\u56fe\u6240\u793a\u7684\u62d3\u6251\u4e2d\uff0c\u4e24\u53f0S6300\u4ea4\u6362\u673a\u8fdb\u884c\u5806\u53e0\u3002SW1\u7684XGE0/0/1\u53e3\u901a\u8fc7\u5806\u53e0\u7ebf\u4e0eSW2\u7684XGE0/0/1\u53e3\u4e92\u8054\uff0c\u53e6\u5916SW1\u7684XGE0/0/2\u53e3\u901a\u8fc7\u5806\u53e0\u7ebf\u4e0eSW2\u7684XGE0/0/2\u53e3\u4e92\u8054\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ea4\u6362\u673a\u4e4b\u524d\u91c7\u7528\u4e24\u6761\u5806\u53e0\u7ebf\u7f06\u8fdb\u884c\u5806\u53e0\u3002 \u4e00\u4e2a\u63a8\u8350\u7684\u5806\u53e0\u6d41\u7a0b\u662f\uff0c\u5148\u89c4\u5212\u8bbe\u5907\u7684\u5806\u53e0ID\u5e76\u660e\u786e\u54ea\u4e00\u53f0\u662f\u4e3b\u8bbe\u5907\uff0c\u63a5\u7740\u914d\u7f6e\u8bbe\u5907\u7684\u5806\u53e0ID\u4ee5\u53ca\u5806\u53e0\u4f18\u5148\u7ea7\uff0c\u518d\u914d\u7f6eStack-Port\uff0c\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\u4fdd\u5b58\uff0c\u7136\u540e\u5c06\u8bbe\u5907\u4e0b\u7535\u3001\u8fde\u7ebf\u3001\u518d\u4e0a\u7535\uff0c\u6700\u540e\u5b8c\u6210\u5806\u53e0\u3002 \u8bbe\u5907\u914d\u7f6e\uff08\u8bbe\u5907\u7684Stack-Port\u3001\u5806\u53e0ID\u4ee5\u53ca\u5806\u53e0\u4f18\u5148\u7ea7\uff09 \u00b6 SW1\uff08V200R002\u4e4b\u540e\u7684\u7248\u672c\uff09\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \\<SW1> save SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW1\u53caSW2\u4e0b\u7535\uff0c\u8fde\u63a5\u5806\u53e0\u7ebf\u7f06\u3002 \u00b6 \u5c06SW1\u53caSW2\u4e0a\u7535\uff08\u5148\u5c06SW1\u4e0a\u7535\uff0c\u518d\u5c06SW2\u4e0a\u7535\uff09\u3002 \u00b6 \u5b8c\u6210\u5806\u53e0\u540e\uff0c\u67e5\u770b\u4e00\u4e0b\u5806\u53e0\u7cfb\u7edf\uff1a MAD\u914d\u7f6e \u00b6 \u5728\u4e0a\u56feSW1\u53caSW2\u8fdb\u884c\u5806\u53e0\uff0c\u53cc\u65b9\u7684XGE0/0/1\u53caXGE0/0/2\u662f\u5806\u53e0\u6210\u5458\u7aef\u53e3\u3002\u5f53\u4ea4\u6362\u673a\u5b8c\u6210\u5806\u53e0\u914d\u7f6e\u5e76\u4e14\u5efa\u7acb\u5806\u53e0\u7cfb\u7edf\u540e\uff0cSW1\u53caSW2\u7684\u914d\u7f6e\u662f\u76f8\u540c\u7684\uff0c\u6b64\u65f6\u5b83\u4eec\u662f\u4e00\u4e2a\u6574\u4f53\u3002\u8be5\u5806\u53e0\u7cfb\u7edf\u91c7\u7528\u4e24\u6761\u5806\u53e0\u7ebf\u7f06\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u6761\u53d1\u751f\u6545\u969c\uff0c\u5806\u53e0\u7cfb\u7edf\u4e0d\u4f1a\u5206\u88c2\uff0c\u4f46\u662f\u4e00\u65e6\u6240\u6709\u7684\u5806\u53e0\u7ebf\u5168\u90e8\u53d1\u751f\u6545\u969c\uff0c\u5219SW1\u53caSW2 \u4f1a\u62c6\u5206\u6210\u4e24\u4e2a\u72ec\u7acb\u7684\u201c\u5806\u53e0\u7cfb\u7edf\u201d\uff0c\u6b64\u65f6\u5b83\u4eec\u7684\u914d\u7f6e\u662f\u5b8c\u5168\u76f8\u540c\u7684\uff0c\u5982\u679c\u8fd9\u53f0\u4ea4\u6362\u673a\u4f9d\u7136\u4fdd\u6301\u5728\u73b0\u7f51\u4e2d\uff0c \u5219\u4f1a\u53d1\u751fIP\u5730\u5740\u51b2\u7a81\u7b49\u4e00\u7cfb\u5217\u95ee\u9898\u3002 \u591a\u4e3b\u68c0\u6d4bMAD\uff08Multi-Active Detection\uff09\uff0c\u662f\u4e00\u79cd\u68c0\u6d4b\u548c\u5904\u7406\u5806\u53e0\u5206\u88c2\u7684\u534f\u8bae\u3002\u94fe\u8def\u6545\u969c\u5bfc\u81f4\u5806\u53e0\u7cfb\u7edf\u5206\u88c2\u540e\uff0cMAD\u53ef\u4ee5\u5b9e\u73b0\u5806\u53e0\u5206\u88c2\u7684\u68c0\u6d4b\u3001\u51b2\u7a81\u5904\u7406\u548c\u6545\u969c\u6062\u590d\uff0c\u964d\u4f4e\u5806\u53e0\u5206\u88c2\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002\u5728\u4e0a\u56fe\u4e2d\uff0cSW1\u53caSW2\u5728\u5806\u53e0\u7cfb\u7edf\u7ec4\u5efa\u5b8c\u6210\u540e\uff0c\u589e\u52a0\u4e00\u6761\u4e92\u8054\u7ebf\u7f06\uff08SW1\u7684XGE0/0/5\u53caSW2\u7684XGE1/0/5\u4e92\u8054\uff0c\u6ce8\u610f\u6b64\u65f6\u5806\u53e0\u7cfb\u7edf\u5df2\u7ecf\u5efa\u7acb\uff0cSW2\u7684\u5806\u53e0ID\u88ab\u4fee\u6539\u4e3a1\uff09\uff0c\u8be5\u6761\u7ebf\u7f06\u6ca1\u6709\u7279\u6b8a\u8981\u6c42\uff0c\u53ef\u4ee5\u662f\u666e\u901a\u7684\u7f51\u7ebf\u6216\u5149\u7ea4\uff0c\u4f46\u662f\u7528\u4e8eMAD\u7684\u63a5\u53e3\u5fc5\u987b\u662f\u666e\u901a\u4e1a\u52a1\u53e3\uff0c\u4e0d\u80fd\u662f\u5806\u53e0\u6210\u5458\u7aef\u53e3\u3002 \u968f\u540e\u5728SW1\u53caSW2\u5b8c\u6210\u4ee5\u4e0b\u914d\u7f6e\uff0c\u5c06\u8be5\u4e92\u8054\u63a5\u53e3\u6307\u5b9a\u4e3aMAD\u63a5\u53e3\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u5f53SW1\u53caSW2\u4e4b\u95f4\u7684\u5806\u53e0\u7ebf\u7f06\u5168\u90e8\u6545\u969c\u65f6\uff0cSW1\u53caSW2\u80fd\u591f\u901a\u8fc7MAD\u94fe\u8def\u8fdb\u884c\u534f\u5546\uff0c\u5e76\u4e14\u5c06\u5176\u4e2d\u4e00\u53f0\u4ea4\u6362\u673a\u7684\u6240\u6709\u4e1a\u52a1\u7aef\u53e3\u5173\u95ed\uff0c\u4ece\u800c\u89c4\u907f\u4ee5\u4e0a\u63d0\u53ca\u7684\u51b2\u7a81\u95ee\u9898\u3002 MAD\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u68c0\u67e5\u4e00\u4e0b\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a \u00b6 \u5806\u53e0\u7aef\u53e3\u7684\u914d\u7f6e\u4e0d\u4fdd\u5b58\u5230\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u4f7f\u7528display current-configuration\u547d\u4ee4\u662f\u65e0\u6cd5\u67e5\u770b\u5230\u5806\u53e0\u7684\u76f8\u5173\u914d\u7f6e\u7684\u3002\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528display device\u3001display stack\u53cadisplay stack port\u7b49\u547d\u4ee4\u67e5\u770b\u5806\u53e0\u7684\u76f8\u5173\u4fe1\u606f\u3002 \u5728S6300\u4ea4\u6362\u673a\u4e0a\uff0c\u7531\u4e8e\u82af\u7247\u539f\u56e0\uff0c\u6bcf4\u4e2a10GE\u63a5\u53e3\u4e3a\u4e00\u7ec4\uff0c\u6bcf\u7ec4\u63a5\u53e3\u8981\u4e48\u90fd\u662f\u4e1a\u52a1\u53e3\uff0c\u8981\u4e48\u90fd\u662f\u5806\u53e0\u6210\u5458\u53e3\u3002S6300\u652f\u6301\u9762\u677f\u4e0a\u4efb\u610f10GE\u63a5\u53e3\u4f5c\u4e3a\u5806\u53e0\u6210\u5458\u53e3\u4f7f\u7528\uff0c\u5728\u914d\u7f6e\u5806\u53e0\u65f6\uff0c\u8981\u6ce8\u610f\u540c\u4e00\u4e2a\u7ec4\u5185\u7684\u63a5\u53e3\u90fd\u9700\u5de5\u4f5c\u572810GE\u6a21\u5f0f\uff0c\u5982\u679c\u6709\u540c\u7ec4\u7684\u5176\u4ed6\u95f2\u7f6e\u63a5\u53e3\u5b89\u88c5\u4e86\u5149\u8f6c\u7535\u7684\u6a21\u5757\uff08\u4f7f\u5f97\u8be5\u63a5\u53e3\u7684\u5de5\u4f5c\u901f\u7387\u5728GE\uff09\uff0c\u5219\u5373\u4f7f\u8be5\u63a5\u53e3\u672a\u88ab\u4f7f\u7528\uff08\u751a\u81f3\u6ca1\u6709\u8fde\u7ebf\uff09\uff0c\u4e5f\u53ef\u80fd\u5bfc\u81f4\u540c\u7ec4\u4e2d\u7684\u5176\u4ed6\u63a5\u53e3\u7531\u4e8e\u6a21\u5f0f\u95ee\u9898\u65e0\u6cd5\u88ab\u914d\u7f6e\u6210\u5806\u53e0\u6210\u5458\u53e3\u3002 Traffic-policy \u6d41\u91cf\u7edf\u8ba1 \u573a\u666f\u8bf4\u660e \u00b6 PC1\u3001PC2\u5206\u522b\u5c5e\u4e8eVLAN10\u53caVLAN20\u3002PC1\u53caPC2\u7684\u7f3a\u7701\u7f51\u5173\u90fd\u8bbe\u7f6e\u6210SW\uff08\u76f8\u5e94Vlanif\u7684IP\u5730\u5740\uff09\u3002\u7f3a\u7701\u65f6PC1\u4e0ePC2\u53ef\u76f8\u4e92\u901a\u4fe1\u3002 \u5728SW\u4e0a\u5b8c\u6210\u914d\u7f6e\uff0c\u5bf9PC2 ping PC1\u7684\u8fc7\u7a0b\u4e2d\u6240\u7a7f\u8d8aSW\u7684\u62a5\u6587\u8fdb\u884c\u7edf\u8ba1\u3002 \u914d\u7f6e\u6307\u5bfc \u00b6 SW\uff08\u6b64\u5904\u4ee5S9300\u4ea4\u6362\u673aV2R3\u7248\u672c\u4e3a\u4f8b\uff09\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5f53PC2 ping PC1\u65f6\uff0c\u6240\u4ea7\u751f\u7684ICMP\u6d41\u91cf\u4f1a\u88abSW\u8fdb\u884c\u8bb0\u5f55\uff1a [SW] display traffic policy statistics interface GigabitEthernet 6/0/20 inbound Interface: GigabitEthernet6/0/20 Traffic policy inbound: p1 Rule number: 1 Current status: OK! --------------------------------------------------------------------- Board : 6 Item Packets Bytes --------------------------------------------------------------------- Matched 5 510 +--Passed 5 510 +--Dropped 0 0 +--Filter 0 0 +--CAR 0 0 \u8981\u590d\u4f4d\u4e0a\u8ff0\u7edf\u8ba1\u7ed3\u679c\uff0c\u53ef\u4ee5\u6267\u884creset traffic policy statistics interface GigabitEthernet 6/0/20 inbound \u547d\u4ee4\u3002\u5b8c\u6210\u6d41\u91cf\u7edf\u8ba1\u64cd\u4f5c\u540e\uff0c\u9700\u5c06\u63a5\u53e3\u4e0a\u914d\u7f6e\u7684traffic-policy\u5220\u9664\u3002 VLAN \u6620\u5c04 \u5982\u56fe\u6240\u793a\uff0cSW1\u8fde\u63a5\u7740\u4e00\u4e9bPC\uff0c\u8fd9\u4e9bPC\u90fd\u5c5e\u4e8eVLAN10\uff0c\u4f7f\u752810.1.1.0/24\u7f51\u6bb5\u7684IP\u5730\u5740\u3002\u53e6\u4e00\u65b9\u9762\uff0cSW1 \u4e5f\u901a\u8fc7GE6/0/20\u63a5\u53e3\u8fde\u63a5\u7740SW2\uff0cSW2\u8fde\u63a5\u7740VLAN2\uff0c\u5e76\u4e14\u8be5VLAN\u4f7f\u7528\u7684IP\u5730\u5740\u4e5f\u662f10.1.1.0/24\u7f51\u6bb5\uff08\u5355\u4e2aIP \u5730\u5740\u4e0eSW1 \u4e0a\u63a5\u5165\u7684\u4e3b\u673a\u4e0d\u5b58\u5728\u51b2\u7a81\uff09 \u3002\u73b0\u5728\u8981\u5728SW1 \u4e0a\u90e8\u7f72VLAN Mapping \uff08 \u4e5f\u53eb\u505aVLAN Translation\uff09\uff0c\u4f7f\u5f97SW2\u53ca\u5176\u4e0b\u8054\u7684VLAN2\uff08\u4e2d\u7684\u8bbe\u5907\uff09\u80fd\u591f\u76f4\u63a5\u4e0ePC1\u8fdb\u884c\u4e8c\u5c42\u901a\u4fe1\u3002\u6b64\u65f6\u7f51\u7edc\u7684\u903b\u8f91\u7ed3\u6784\u7c7b\u4f3c\u5982\u4e0b\uff1a SW1\uff08\u4ee5S9300 V2R1\u7248\u672c\u4e3a\u4f8b\uff09\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u4e0a\u8ff0\u914d\u7f6e\u4e2d\uff0c**port vlan-mapping vlan 2 map-vlan 10**\u547d\u4ee4\u4f7f\u5f97\u8be5\u63a5\u53e3\u6536\u5230\u643a\u5e26\u4e86VLAN2 Tag\u7684\u6570\u636e\u5e27\u65f6\uff0c \u5c06\u8be5\u5e27\u7684Tag\u4fee\u6539\u4e3aVLAN10\uff0c\u7136\u540e\u8fdb\u5165\u4ea4\u6362\u673a\u3002\u6570\u636e\u5e27\u8fdb\u5165\u4ea4\u6362\u673a\u540e\uff0c\u4ea4\u6362\u673a\u5c06\u5176\u8bc6\u522b\u4e3aVLAN10\u7684\u6570\u636e\u5e27\uff0c\u56e0\u6b64\u5728SW1\u7684GE6/0/20\u63a5\u53e3\u4e0a\uff0c\u5fc5\u987b\u653e\u901aVLAN10\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff1a SW2\u5373\u53efping\u901aPC1\uff0c\u800c\u53cd\u8fc7\u6765\uff0cPC1\u4e5f\u53ef\u4e3b\u52a8\u8bbf\u95eeSW2\uff0810.1.1.2\uff09\u3002\u53ef\u4ee5\u770b\u51fa\uff0c**port vlan-mapping vlan 2 map-vlan 10**\u8fd9\u6761\u547d\u4ee4\u5b9e\u73b0\u4e86\u53cc\u5411\u7684\u8f6c\u6362\u3002VLAN Mapping\u53d1\u751f\u5728\u62a5\u6587\u4ece\u5165\u7aef\u53e3\u63a5\u6536\u8fdb\u6765\u4e4b\u540e\uff0c\u4ee5\u53ca\u4ece\u51fa\u7aef\u53e3\u8f6c\u53d1\u51fa\u53bb\u4e4b\u524d\u3002\u5f3a\u8c03\u4e00\u4e0b\uff1a\u914d\u7f6eVLAN Mapping\u529f\u80fd\u7684\u63a5\u53e3\u7c7b\u578b\u5fc5\u987b\u4e3aTrunk\u6216Hybrid\uff0c\u63a5\u53e3\u5fc5\u987b\u52a0\u5165 \uff08\u6216\u8005\u8bf4\u653e\u901a\uff09\u6620\u5c04\u540e\u7684map-vlan\u3002 \u8def\u7531\u63d0\u9ad8 \u00b6 5.1 \u8def\u7531\u91cd\u53d1\u5e03 5.1.1 \u6280\u672f\u80cc\u666f \u5728\u540c\u4e00\u4e2a\u7f51\u7edc\u62d3\u6251\u7ed3\u6784\u4e2d\uff0c\u5982\u679c\u5b58\u5728\u4e24\u79cd\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\uff0c\u7531\u4e8e\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\u7684\u5de5\u4f5c\u673a\u5236\u5404\u6709\u4e0d\u540c\uff0c\u5bf9\u8def\u7531\u7684\u7406\u89e3\u4e5f\u4e0d\u76f8\u540c\uff0c\u8fd9\u5c31\u5728\u7f51\u7edc\u4e2d\u9020\u6210\u4e86\u8def\u7531\u4fe1\u606f\u7684\u9694\u79bb\uff0c\u7136\u800c\u7531\u4e8e\u8fd9\u5f88\u6709\u53ef\u80fd\u662f\u540c\u4e00\u4e2a\u81ea\u6cbb\u7cfb\u7edf\u5185\u7684\u7f51 \u7edc\uff0c\u5168\u7f51\u9700\u8981\u4e92\u901a\uff0c\u8fd9\u65f6\u5019\u548b\u529e\uff1f\u4f8b\u5982\u4e00\u4e2a\u7f51\u7edc\u5305\u542b\u4e24\u4e2a\u7247\u533a\uff0c\u6bcf\u4e2a\u7247\u533a\u4f7f\u7528\u81ea\u5df1\u7684\u52a8\u6001\u8def\u7531\u534f\u8bae\uff0c\u5982\u679c\u8981\u5b9e\u73b0\u4e24\u4e2a\u7247\u533a\u7684\u7f51\u7edc\u4e92\u901a\uff0c\u5c31\u9700\u8981\u5728\u4e24\u8005\u4e4b\u95f4\u6253\u901a\u8def\u7531\uff0c\u4f46\u662f\u8fd9\u4e24\u79cd\u52a8\u6001\u8def\u7531\u534f\u8bae\u6bd5\u7adf\u662f\u4e0d\u540c\u7684\u534f\u8bae\uff0c\u8def\u7531\u4fe1\u606f\u662f\u5b8c\u5168\u9694\u79bb\u7684\uff0c\u5982\u4f55\u5b9e\u73b0\u4ea4\u4e92\uff1f\u8fd9\u5c31\u9700\u8981\u4f7f\u7528\u8def\u7531\u91cd\u53d1\u5e03\uff08\u4e5f\u88ab\u79f0\u4e3a\u8def\u7531\u5f15\u5165\uff0croute-importation\uff09\u4e86\u3002 \u6211\u4eec\u770b\u4e0a\u56fe\uff0cR1\u4e0eR2\u4e4b\u95f4\uff0c\u8fd0\u884cRIP\uff08\u8def\u7531\u534f\u8bae\uff09\u6765\u4ea4\u4e92\u8def\u7531\u4fe1\u606f\uff0cR2\u901a\u8fc7RIP\u5b66\u4e60\u5230\u4e86R1\u901a\u544a\u7684 192.168.1.0/24\u53ca2.0/24\u7684\u8def\u7531\u3002\u540c\u65f6R2\u4e0eR3\u53c8\u5efa\u7acb\u4e86OSPF\u90bb\u63a5\u5173\u7cfb\uff0c\u56e0\u6b64R2\u4e5f\u4eceR3\u90a3\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u4e86\u4e24\u6761\u8def\u7531\uff1a3.0\u53ca4.0/24\uff0c\u4e5f\u88c5\u8f7d\u8fdb\u4e86\u8def\u7531\u8868\u3002\u90a3\u4e48\u5bf9\u4e8eR2\u800c\u8a00\uff0c\u5b83\u81ea\u5df1\u5c31\u6709\u4e86\u53bb\u5f80\u5168\u7f51\u7684\u8def\u7531\uff0c\u4f46\u662fR2 \u4e0d\u4f1a\u5c06\u4eceRIP\u5b66\u4e60\u8fc7\u6765\u7684\u8def\u7531\u544a\u8bc9R3\uff0c\u4e5f\u4e0d\u4f1a\u5c06\u4eceOSPF\u5b66\u4e60\u6765\u7684\u8def\u7531\u544a\u8bc9R1\u3002\u5bf9\u4e8eR2\u800c\u8a00\uff0c\u867d\u7136\u5b83\u81ea\u5df1\u7684\u8def\u7531\u8868\u91cc\u6709\u5b8c\u6574\u7684\u8def\u7531\u4fe1\u606f\uff0c\u4f46\u662f\uff0c\u5c31\u597d\u50cf\u51a5\u51a5\u4e4b\u4e2d\uff0cR\u548cO\u7684\u6761\u76ee\u4e4b\u95f4\u6709\u9053\u9e3f\u6c9f\uff0c\u65e0\u6cd5\u903e\u8d8a\u3002\u800cR2\u5c31\u4e5f\u5c31\u6210\u4e86RIP\u53caOSPF\u57df\u7684\u5206\u754c\u70b9\u3002\u90a3\u4e48\u5982\u4f55\u80fd\u591f\u8ba9R1\u5b66\u4e60\u5230\u6765\u81eaOSPF\u7684\u8def\u7531\u3001\u8ba9R3\u5b66\u4e60\u5230\u6765\u81eaRIP\u7684\u8def\u7531\u5462\uff1f\u5173\u952e\u70b9\u5728\u4e8eR2\u4e0a\uff0c\u901a\u8fc7\u5728R2\u4e0a\u90e8\u7f72\u8def\u7531\u91cd\u53d1\u5e03\uff0c\u53ef\u4ee5\u5b9e\u73b0\u8def\u7531\u4fe1\u606f\u5728\u4e0d\u540c\u8def\u7531\u9009\u62e9\u57df\u95f4\u7684\u4f20\u9012\u3002 \u4e0a\u56fe\u662f\u521d\u59cb\u72b6\u6001\u3002R2\u5206\u522b\u4eceRIP\u53caOSPF\u90fd\u5b66\u4e60\u5230\u4e86\u76f8\u5e94\u7684\u8def\u7531\u3002\u4f46\u662f\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u901a\u8fc7\u8fd9\u4e24\u4e2a\u8def\u7531\u534f\u8bae\u6240\u5b66\u4e60\u5230\u7684\u8def\u7531\u662f\u4e92\u76f8\u9694\u79bb\u7684\uff0cR2\u4e0d\u4f1a\u81ea\u52a8\u7684\u5c06OSPF\u8def\u7531\u201c\u7ffb\u8bd1\u201d\u6210RIP\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u90a3\u4e48\u6b64\u65f6\uff0cR1\u81ea\u7136\u662f\u65e0\u6cd5\u8bbf\u95ee\u5230R3\u8fd9\u4e00\u4fa7\u7684\u7f51\u7edc\u7684\uff0cR3\u4e5f\u662f\u4e00\u6837\u3002 \u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u5f00\u59cb\u5728R2\u4e0a\u6267\u884c\u91cd\u53d1\u5e03\u7684\u52a8\u4f5c\uff0c\u6211\u4eec\u5c06OSPF\u7684\u8def\u7531\u201c\u6ce8\u5165\u201d\u4e86RIP\u8fdb\u7a0b\u4e4b\u4e2d\uff0c\u5982\u6b64\u4e00\u6765\uff0cR2 \u5c31\u4f1a\u5c063.0/24\u53ca4.0/24\u8fd9\u4e24\u6761OSPF\u8def\u7531\u201c\u7ffb\u8bd1\u201d\u6210RIP\uff0c\u7136\u540e\u4f20\u9012\u7ed9R1\uff0cR1\u4e5f\u5c31\u80fd\u591f\u5b66\u4e60\u52303.0\u548c4.0\u8def\u7531\u4e86\u3002\u6ce8\u610f\u91cd\u53d1\u5e03\u7684\u6267\u884c\u5730\u70b9\uff0c\u662f\u5728R2\u4e0a\uff0c\u4e5f\u5c31\u662f\u5728\u8def\u7531\u57df\u7684\u5206\u754c\u70b9\u4e0a\u6267\u884c\uff0c\u53e6\u5916\uff0c\u8def\u7531\u91cd\u53d1\u5e03\u662f\u6709\u65b9\u5411\u7684\uff0c \u6211\u4eec\u6267\u884c\u5b8c\u4e0a\u8ff0\u76f8\u5173\u52a8\u4f5c\u540e\uff0cR3\u4ecd\u7136\u662f\u6ca1\u6709RIP\u57df\u5185\u7684\u90a3\u4e9b\u8def\u7531\u7684\uff0c\u9700\u8fdb\u4e00\u6b65\u5728R2\u4e0a\uff0c\u5c06RIP\u8def\u7531\u91cd\u53d1\u5e03\u8fdb OSPF\uff0c\u624d\u80fd\u8ba9R3\u5b66\u4e60\u52301.0/24\u53ca2.0/24\u8def\u7531\u3002 \u5b9e\u65bd\u8981\u70b9 \u90e8\u7f72\u8def\u7531\u91cd\u53d1\u5e03\u7684\u8fc7\u7a0b\u9700\u8981\u8c28\u614e\uff0c\u5c24\u5176\u5728\u4e00\u4e9b\u590d\u6742\u7684\u7f51\u7edc\u73af\u5883\u4e2d\u90e8\u7f72\u91cd\u53d1\u5e03\u65f6\uff0c\u66f4\u52a0\u5e94\u8be5\u8003\u8651\u5468\u7965\u3002\u4e0b\u9762\u9488\u5bf9\u6267\u884c\u91cd\u53d1\u5e03\u7684\u8fc7\u7a0b\u4e2d\u9700\u8981\u5173\u6ce8\u7684\u51e0\u4e2a\u95ee\u9898\u8fdb\u884c\u4ecb\u7ecd\u3002 \u8def\u7531\u4f18\u5148\u7ea7\u95ee\u9898 \u00b6 \u8def\u7531\u4f18\u5148\u7ea7\u95ee\u9898\uff0c\u662f\u5728\u90e8\u7f72\u91cd\u53d1\u5e03\u8fc7\u7a0b\u4e2d\u9700\u8981\u5173\u6ce8\u7684\u95ee\u9898\u4e4b\u4e00\uff0c\u5c24\u5176\u662f\u5728\u53cc\u70b9\u53cc\u5411\u8def\u7531\u91cd\u53d1\u5e03\u7684\u573a\u666f\u4e2d\uff0c\u8fd9\u79cd\u573a\u666f\u4e2d\u4e24\u4e2aASBR\uff08AS\u8fb9\u754c\u8def\u7531\u5668\uff09\u4e0a\u4f1a\u540c\u65f6\u90e8\u7f72\u53cc\u5411\u7684\u8def\u7531\u91cd\u53d1\u5e03\uff0c\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u503c\u5f97\u5173\u6ce8\u7684\u6a21\u578b\u3002 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u73af\u5883\u4e2d\uff0c\u5b58\u5728\u4e24\u4e2a\u8def\u7531\u57df\uff1aBGP\u53caOSPF\u3002R1\u4e0a\u6709\u4e00\u6761\u76f4\u8fde\u8def\u75311.1.1.1/32\u88abnetwork \u8fdbBGP\u5e76\u4f20\u9012\u7ed9\u4e86R2\u53caR3\uff0c\u90a3\u4e48\u6b64\u523bR2\u53caR3\u7684\u8def\u7531\u8868\u4e2d\u662f\u6709\u5230\u8fbe1.1.1.1/32\u7684IBGP\u8def\u7531\u7684\u3002 \u63a5\u4e0b\u53bbR2\u90e8\u7f72\u4e86IBGP\u5230OSPF\u7684\u8def\u7531\u91cd\u53d1\u5e03\uff0c1.1.1./32\u7684\u8def\u7531\u88ab\u5f15\u5165\u4e86OSPF\uff0c\u5f62\u6210\u5916\u90e8\u8def\u7531\u6761\u76ee\u5e76\u4f20\u9012\u7ed9\u4e86R3\u3002\u73b0\u5728R3\u540c\u65f6\u4eceOSPF\u53caIBGP\u5b66\u4e60\u52301.1.1./32\u8def\u7531\uff0cOSPF\u5916\u90e8\u8def\u7531\u7684\u4f18\u5148\u7ea7\u662f150\uff0c\u800cIBGP \u8def\u7531\u4f18\u5148\u7ea7\u4e3a255\uff0c\u56e0\u6b64OSPF\u7684\u5916\u90e8\u8def\u7531\u8981\u4f18\u4e8eIBGP\u8def\u7531\uff0c\u5982\u6b64\u4e00\u6765R3\u4f1a\u628aOSPF\u8def\u75311.1.1.1/32\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\uff0c\u8be5\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u4e3aR4\uff0c\u8fd9\u65f6R3\u5c31\u51fa\u73b0\u4e86\u201c\u6b21\u4f18\u8def\u5f84\u95ee\u9898\u201d\uff0c\u5176\u8bbf\u95ee1.1.1.1/32\u7684\u6d41\u91cf\u8d70\u5411\u662fR4-R2-R1\u2014\u2014\u7ed5\u4e86\u8fdc\u8def\u4e86\u3002 \u9020\u6210\u8fd9\u4e2a\u73b0\u8c61\u7684\u539f\u56e0\u662f\u8def\u7531\u534f\u8bae\u7684\u4f18\u5148\u7ea7\u5728\u8fd9\u91cc\u5f71\u54cd\u4e86R3\u7684\u8def\u7531\u4f18\u9009\uff0c\u4e3a\u4e86\u89c4\u907f\u8fd9\u4e2a\u73b0\u8c61\uff0c\u6211\u4eec\u53ef\u4ee5\u5728R3\u4e0a\u4f7f\u7528\u76f8\u5173\u547d\u4ee4\u6765\u8c03\u82821.1.1.1/32\u8def\u7531\u7684\u4f18\u5148\u7ea7\uff0c\u4f7f\u5f97R3\u4f18\u9009\u6765\u81eaIBGP\u7684\u8def\u7531\u3002 \u8def\u7531\u5012\u704c \u00b6 \u8fd8\u662f\u4e0a\u9762\u7684\u73af\u5883\uff0c\u521a\u624d\u6211\u4eec\u5df2\u7ecf\u5206\u6790\u8fc7\u4e86\uff0c\u5982\u679c\u4e0d\u505a\u4efb\u4f55\u5e72\u9884\uff0cR3\u662f\u4f1a\u5b58\u5728\u6b21\u4f18\u8def\u5f84\u95ee\u9898\u7684\uff0c\u56e0\u4e3aR3 \u4f1a\u4f18\u9009\u5230\u8fbe1.1.1.1/32\u7684OSPF\u8def\u7531\uff0c\u800c\u4e0d\u662fIBGP\u8def\u7531\u3002\u800c\u5982\u679cR3\u53c8\u90e8\u7f72\u4e86OSPF\u5230BGP\u7684\u8def\u7531\u91cd\u53d1\u5e03\uff0c \u90a3\u4e481.1.1.1/32\u8def\u7531\u53c8\u4f1a\u88abR3\u7ed9\u5012\u704c\u56deBGP\uff0c\u8fd9\u5c31\u5b58\u5728\u4e00\u4e2a\u5f15\u53d1\u8def\u7531\u73af\u8def\u7684\u9690\u60a3\u3002 \u89c4\u907f\u65b9\u6cd5\u5728\u4e0a\u4e00\u4e2a\u5c0f\u8282\u4e2d\u5df2\u7ecf\u63a2\u8ba8\u4e86\u4e00\u4e9b\u3002\u56e0\u6b64\uff0c\u53cc\u70b9\u53cc\u5411\u91cd\u53d1\u5e03\u5728\u90e8\u7f72\u8d77\u6765\u7684\u65f6\u5019\uff0c\u9700\u8981\u683c\u5916\u5c0f\u5fc3\u3002 \u8def\u7531\u91cd\u53d1\u5e03\u7684\u914d\u7f6e \u4e0d\u540c\u534f\u8bae\u4e4b\u95f4\u7684\u8def\u7531\u91cd\u53d1\u5e03\u7684\u914d\u7f6e\u5927\u540c\u5c0f\u5f02\uff0c\u6211\u4eec\u5148\u770b\u4e00\u4e0b\u4ece\u5176\u4ed6\u8def\u7531\u534f\u8bae\u6ce8\u5165\u8def\u7531\u5230OSPF\u7684\u914d\u7f6e\uff1a \u5728\u4e00\u53f0\u8bbe\u5907\u4e0a\uff0c\u5c06\u5176\u8def\u7531\u8868\u4e2d\u901a\u8fc7A\u8def\u7531\u534f\u8bae\u5b66\u4e60\u5230\u7684\u8def\u7531\u91cd\u53d1\u5e03\u5230B\u8def\u7531\u534f\u8bae\u4e2d\uff0c\u662f\u5728\u8be5\u8bbe\u5907\u7684B\u8def\u7531\u534f\u8bae\u7684\u914d\u7f6e\u89c6\u56fe\u4e0b\u5b8c\u6210\u76f8\u5173\u914d\u7f6e\u7684\u3002 OSPF\u4e0eRIP\u7684\u4e92\u91cd\u53d1\u5e03 \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u4e0eR2\u8fd0\u884c\u7740RIP\uff0cR2\u4e0eR3\u5219\u5efa\u7acb\u4e86OSPF\u90bb\u63a5\u5173\u7cfb\uff0c\u6211\u4eec\u6700\u7ec8\u8981\u5b9e\u73b0\u7684\u76ee\u6807\u662f\u8ba9\u5168\u7f51\u80fd\u591f\u4e92\u901a\u3002\u9996\u5148R2\u5df2\u7ecf\u901a\u8fc7OSPF\u53caRIP\u5b66\u4e60\u5230\u4e861.1.1.0/24\u53ca3.3.3.0/24\u8def\u7531\uff0c\u5b83\u5df2\u7ecf\u540c\u65f6\u62e5\u6709\u4e86OSPF\u53caRIP\u8def\u7531\u57df\u5185\u7684\u8def\u7531\u3002\u4f46\u662f\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u662f\u4e0d\u4f1a\u5c06OSPF\u8def\u7531\u6ce8\u5165RIP\u57df\u7684\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u90a3\u4e48\u73b0\u5728\u6211\u4eec\u5c31\u8981\u5728R2\u4e0a\u505a\u8def\u7531\u91cd\u53d1\u5e03\u4e86\u3002 \u9996\u5148\u662f\u5c06OSPF\u8def\u7531\u6ce8\u5165RIP\uff1a \u6ce8\u610f\uff0c\u4e0a\u9762\u53ea\u662f\u7ed9\u51fa\u4e86\u5173\u952e\u914d\u7f6e\u3002\u5b8c\u6210\u8fd9\u4e00\u6b65\u52a8\u4f5c\u4e4b\u540e\uff0cR1\u7684\u8def\u7531\u8868\u5c31\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u7531\u4e8eR2\u90e8\u7f72\u4e86\u4eceOSPF \u5230RIP\u7684\u8def\u7531\u91cd\u53d1\u5e03\uff0c\u56e0\u6b64\u5b83\u4f1a\u5c06\u5176\u8def\u7531\u8868\u4e2d\u7684\u6240\u6709OSPF\u8def\u7531\uff083.3.3.0/24\uff09\u4ee5\u53ca\u672c\u5730\u76f4\u8fde\u7684OSPF\u63a5\u53e3\u8def\u7531\uff08192.168.23.0/24\uff09\u90fd\u6ce8\u5165RIP\uff0c\u4ece\u800cR1\u4fbf\u80fd\u591f\u901a\u8fc7RIP\u5b66\u4e60\u5230192.168.23.0/24\u53ca3.3.3.0/24\u8def\u7531\u3002 \u63a5\u7740\u662f\u5c06RIP\u8def\u7531\u6ce8\u5165\u5230OSPF\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cR3\u5373\u53ef\u5b66\u4e60\u5230RIP\u57df\u4e2d\u7684\u8def\u7531192.168.12.0/24\u4ee5\u53ca1.1.1.0/24\u3002\u5982\u6b64\u4e00\u6765\uff0c\u5168\u7f51\u7684\u8def\u7531\u5c31\u4e92\u901a\u4e86\u3002\u56e0\u6b64\u8981\u6ce8\u610f\uff0c\u5c06\u8def\u7531\u534f\u8baeA\u6ce8\u5165\u5230\u8def\u7531\u534f\u8baeB\uff0c\u662f\u5728\u8def\u7531\u534f\u8baeB\u7684\u914d\u7f6e\u89c6\u56fe\u4e2d\u5b8c\u6210\u76f8\u5e94\u7684import-route \u914d\u7f6e\u3002\u5e76\u4e14\uff0c\u8def\u7531\u91cd\u53d1\u5e03\u662f\u5355\u5411\u7684\u3002 \u91cd\u53d1\u5e03\u76f4\u8fde\u8def\u7531\u5230OSPF \u00b6 \u5e38\u89c4\u60c5\u51b5\u4e0b\uff0c\u8981\u5c06\u4e00\u6761\u76f4\u8fde\u8def\u7531\u901a\u544a\u7ed9\u8def\u7531\u57df\uff0c\u5c31\u5fc5\u987bnetwork\u76f8\u5e94\u7684\u76f4\u8fde\u63a5\u53e3\u3002\u5982\u679c\u6ca1\u6709\u4f7f\u7528network\u547d\u4ee4\u5728\u8def\u7531\u8fdb\u7a0b\u4e2d\u6fc0\u6d3b\u76f8\u5e94\u7684\u63a5\u53e3\uff0c\u5219\u5bf9\u4e8e\u8be5\u8def\u7531\u57df\u800c\u8a00\uff0c\u8fd9\u4e2a\u63a5\u53e3\u6240\u5173\u8054\u7684\u7f51\u6bb5\u5c31\u662f\u5916\u90e8\u7f51\u7edc\u3002 \u53e6\u4e00\u79cd\u5c06\u5230\u8fbe\u76f4\u8fde\u7f51\u7edc\u7684\u8def\u7531\u5f15\u5165\u8def\u7531\u57df\u7684\u65b9\u5f0f\u662f\u4f7f\u7528\u8def\u7531\u91cd\u53d1\u5e03\u7684\u65b9\u5f0f\uff0c\u5c06\u76f4\u8fde\u8def\u7531\u6ce8\u5165\uff0c\u4f8b\u5982\u4e0a\u56fe\u4e2d R3\u7684\u521d\u59cb\u914d\u7f6e\u5982\u4e0b\uff1a \u5b83\u5e76\u6ca1\u6709\u914d\u7f6e**network 33.33.33.0 0.0.0.255**\uff0c\u90a3\u4e48R1\u3001R2\u662f\u65e0\u6cd5\u4eceOSPF\u5b66\u4e60\u523033.33.33.0/24\u8def\u7531\u7684\uff0c\u56e0 \u4e3aR3\u7684Loopback1\u63a5\u53e3\u5e76\u672a\u6fc0\u6d3bOSPF\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u6765\u5c06\u76f4\u8fde\u8def\u7531\u6ce8\u5165OSPF\uff08\u4e0b\u9762\u53ea\u662f\u7c98\u8d34\u4e86\u5173\u952e\u914d\u7f6e\uff0c\u7701\u7565\u4e86\u5176\u4ed6\u914d\u7f6e\uff09\uff1a \u5728OSPF\u914d\u7f6e\u89c6\u56fe\u4e2d\u4f7f\u7528**Import-route direct**\u547d\u4ee4\uff0c\u4f1a\u5c06\u8def\u7531\u5668\u4e0a\u6240\u6709\u7684\u76f4\u8fde\u63a5\u53e3\u8def\u7531\u90fd\u6ce8\u5165OSPF\u3002\u56e0\u6b64 \u5f53R3\u6267\u884c\u4e0a\u8ff0\u547d\u4ee4\u65f6\uff0c\u5176\u8def\u7531\u8868\u4e2d\u7684\u76f4\u8fde\u8def\u7531192.168.23.0/24\u4ee5\u53ca33.33.33.0/24\u90fd\u4f1a\u88ab\u6ce8\u5165OSPF\u2014\u2014\u4ee5\u5916\u90e8\u8def\u7531\u7684\u5f62\u5f0f\u3002\u5f53\u7136\uff0c\u5982\u679c\u6b64\u65f6Loopback1\u63a5\u53e3\u5931\u6548\uff0c\u90a3\u4e48\u8be5\u63a5\u53e3\u7684\u76f4\u8fde\u8def\u7531\u91cd\u53d1\u5e03\u4e5f\u5c31\u4f1a\u88ab\u64a4\u9500\u3002 \u91cd\u53d1\u5e03\u9759\u6001\u8def\u7531\u5230OSPF \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u76f4\u8fde\u7740\u7f51\u7edc11.11.11.0/24\uff0cR1\u4e0d\u652f\u6301\u52a8\u6001\u8def\u7531\u534f\u8bae\uff0cR2\u914d\u7f6e\u4e86\u53bb\u5f8011.11.11.0/24\u7684\u9759\u6001\u8def\u7531\uff0c\u4e14\u4e0b\u4e00\u8df3\u4e3aR1\u3002R2\u4e0eR3\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u3002\u73b0\u5728\u5bf9\u4e8e\u6574\u4e2aOSPF\u57df\u800c\u8a00\uff0c\u5b83\u4eec\u662f\u611f\u77e5\u4e0d\u523011.11.11.0/24 \u7f51\u6bb5\u7684\u5b58\u5728\u7684\uff0c\u56e0\u4e3a\u5bf9\u4e8eOSPF\u800c\u8a00\uff0cR2\u6240\u914d\u7f6e\u7684\u9759\u6001\u8def\u7531\u662f\u4e00\u6761\u57df\u5916\u7684\u8def\u7531\u3002\u4e3a\u4e86\u8ba9OSPF\u5185\u7684\u8def\u7531\u5668\u80fd\u591f\u901a\u8fc7OSPF\u5b66\u4e60\u523011.11.11.0/24\u8def\u7531\uff0c\u6211\u4eec\u9700\u8981\u5728R2\u4e0a\u90e8\u7f72\u8def\u7531\u91cd\u53d1\u5e03\uff0c\u5c06\u9759\u6001\u8def\u7531\u91cd\u53d1\u5e03\u5230OSPF\uff1a \u5728OSPF\u914d\u7f6e\u89c6\u56fe\u4e0b\u4f7f\u7528**import-route static**\u547d\u4ee4\u540e\uff0cR2\u4f1a\u5c06\u5176\u8def\u7531\u8868\u4e2d\u6240\u6709\u7684\u9759\u6001\u8def\u7531\u90fd\u4f1a\u91cd\u53d1\u5e03\u5230 OSPF\u3002\u5982\u6b64\u4e00\u6765\uff0cR3\u4fbf\u80fd\u591f\u901a\u8fc7OSPF\u5b66\u4e60\u523011.11.11.0/24\u8def\u7531\u3002 \u8def\u7531\u7b56\u7565 Route-policy \u6982\u8ff0 \u00b6 \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u8981\u5728R2\u4e0a\u90e8\u7f72RIP\u5230OSPF\u7684\u91cd\u53d1\u5e03\uff0c\u7ecf\u8fc7\u524d\u9762\u7684\u5b66\u4e60\uff0c\u5927\u5bb6\u5df2\u7ecf\u80fd\u591f\u5f88\u8f7b\u677e\u5730\u7ed9\u51fa\u914d\u7f6e\uff0c \u5728\u6267\u884c\u91cd\u53d1\u5e03\u7684\u547d\u4ee4\u4e2d\uff0c\u53ef\u4ee5\u5173\u8054**cost**\u5173\u952e\u5b57\u6765\u6307\u5b9a\u8def\u7531\u6ce8\u5165ospf\u4e4b\u540e\u7684cost\u3002\u4f46\u662f\u8fd9\u662f\u9488\u5bf9\u6240\u6709\u88ab\u6ce8\u5165\u7684\u8def\u7531\u7684\u3002\u53e6\u5916**import-route rip**\u547d\u4ee4\u4f1a\u5c06R2\u8def\u7531\u8868\u4e2d\u7684RIP\u8def\u7531\u5168\u90fd\u6ce8\u5165OSPF\u3002 \u5982\u679c\u5e0c\u671b\u53ea\u6ce8\u5165\u7279\u5b9a\u7684\u8def\u7531\uff0c\u6216\u5728\u6ce8\u5165\u8fc7\u7a0b\u4e2d\u8fc7\u6ee4\u6389\u67d0\u4e9b\u8def\u7531\u5462\uff1f\u6216\u8005\u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u5728\u6ce8\u5165\u540e\u8bbe\u7f6e\u4e0d\u540c\u7684OSPF cost\u5462\uff1f\u8fd9\u4e2a\u65f6\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528\u5230route-policy\u4e86\u3002 Route-policy\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u57fa\u7840\u6027\u7b56\u7565\u5de5\u5177\u3002\u4f60\u53ef\u4ee5\u628a\u5b83\u60f3\u8c61\u6210\u4e00\u4e2a\u62e5\u6709\u591a\u4e2a\u8282\u70b9\uff08node\uff09\u7684\u5217\u8868\uff08\u8fd9\u4e9bnode\u6309\u7f16\u53f7\u5927\u5c0f\u8fdb\u884c\u6392\u5e8f\uff09\u3002\u5728\u6bcf\u4e2a\u8282\u70b9\u4e2d\uff0c\u53ef\u4ee5\u5b9a\u4e49\u6761\u4ef6\u8bed\u53e5\u53ca\u6267\u884c\u8bed\u53e5\uff0c\u8fd9\u5c31\u6709\u70b9\u50cf\u7a0b\u5e8f\u8bbe\u8ba1\u91cc\u7684if-then\u8bed\u53e5\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002 route-policy\u6267\u884c\u7684\u65f6\u5019\uff0c\u662f\u81ea\u4e0a\u800c\u4e0b\u8fdb\u884c\u8ba1\u7b97\u7684\u3002\u9996\u5148\u770b\u8282\u70b91\uff08\u8fd9\u91cc\u5047\u8bbe\u7f16\u53f7\u6700\u5c0f\u7684\u8282\u70b9\u4e3a1\uff09\uff0c\u5bf9\u8282\u70b91 \u4e2d\u7684\u201c\u6761\u4ef6\u8bed\u53e5\u201d\u8fdb\u884c\u8ba1\u7b97\uff0c\u5982\u679c\u6240\u6709\u7684\u6761\u4ef6\u90fd\u6ee1\u8db3\uff0c\u5219\u6267\u884c\u8be5\u8282\u70b9\u4e0b\u7684\u201c\u6267\u884c\u8bed\u53e5\u201d\uff0c\u5e76\u4e14\u4e0d\u4f1a\u518d\u7ee7\u7eed\u5f80\u4e0b\u4e00\u4e2a\u8282\u70b9\u8fdb\u884c\u5339\u914d\u4e86\u3002\u800c\u5982\u679c\u8282\u70b91\u4e2d\uff0c\u6709\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u4e0d\u6ee1\u8db3\uff0c\u5219\u7ee7\u7eed\u770b\u4e0b\u4e00\u4e2a\u8282\u70b9\uff0c\u5230\u8282\u70b92\u4e2d\u53bb\u5339\u914d\u6761\u4ef6\u8bed\u53e5\uff0c\u5982\u679c\u5168\u90fd\u6ee1\u8db3\u5219\u6267\u884c\u8be5\u8282\u70b9\u4e2d\u5b9a\u4e49\u7684\u6267\u884c\u8bed\u53e5\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\uff0c\u5219\u7ee7\u7eed\u5f80\u4e0b\u4e00\u4e2a\u8282\u70b9\u8fdb\u884c\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u4e0b\u56fe\u5c31\u662f\u4e00\u4e2aroute-policy\uff1a Route-policy\u7684\u914d\u7f6e \u00b6 \u521b\u5efaroute-policy \u00b6 [Huawei] route-policy name { permit | deny } node node **Permit**\u5173\u952e\u5b57\u6307\u5b9a\u8282\u70b9\u7684\u5339\u914d\u6a21\u5f0f\u4e3a\u5141\u8bb8\u3002\u5f53\u8be5\u8282\u70b9\u4e0b\u6240\u6709\u7684\u6761\u4ef6\u90fd\u88ab\u6ee1\u8db3\u65f6\uff0c\u5c06\u6267\u884c\u8be5\u8282\u70b9\u7684 apply\u5b50\u53e5\uff0c\u4e0d\u8fdb\u5165\u4e0b\u4e00\u4e2a\u8282\u70b9\uff1b\u5982\u679c\u6709\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u4e0d\u6ee1\u8db3\uff0c\u5c06\u8fdb\u5165\u4e0b\u4e00\u4e2a\u8282\u70b9\u7ee7\u7eed\u8ba1\u7b97\u3002 **Deny**\u5173\u952e\u5b57\u6307\u5b9a\u8282\u70b9\u7684\u5339\u914d\u6a21\u5f0f\u4e3a\u62d2\u7edd\uff0c\u8fd9\u65f6apply\u5b50\u53e5\u4e0d\u4f1a\u88ab\u6267\u884c\u3002\u5f53\u8be5\u8282\u70b9\u4e0b\u6240\u6709\u7684\u6761\u4ef6\u90fd\u88ab\u6ee1\u8db3\u65f6\uff0c\u5c06\u88ab\u62d2\u7edd\u901a\u8fc7\u8be5\u8282\u70b9\uff0c\u4e0d\u8fdb\u5165\u4e0b\u4e00\u4e2a\u8282\u70b9\uff1b\u5982\u679c\u6709\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u4e0d\u6ee1\u8db3\uff0c\u5c06\u8fdb\u5165\u4e0b\u4e00\u4e2a\u8282\u70b9\u7ee7\u7eed\u8ba1\u7b97\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u672a\u5339\u914d\u7684\u8def\u7531\u5c06\u88ab\u62d2\u7edd\u901a\u8fc7route-policy\u3002\u5982\u679cRoute-Policy\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a\u4ee5\u4e0a\u7684\u8282\u70b9\uff0c\u5219\u5404\u8282\u70b9\u4e2d\u81f3\u5c11\u5e94\u8be5\u6709\u4e00\u4e2a\u8282\u70b9\u7684\u5339\u914d\u6a21\u5f0f\u662fpermit\u3002 \u914d\u7f6eIf-match\u5b50\u53e5 \u00b6 [Huawei-route-policy] if-match ? \u5bf9\u4e8e\u540c\u4e00\u4e2aroute-policy\u8282\u70b9\uff0c\u547d\u4ee4**if-match acl**\u548c\u547d\u4ee4**if-match ip-prefix**\u4e0d\u80fd\u540c\u65f6\u914d\u7f6e\uff0c\u540e\u914d\u7f6e\u7684 \u547d\u4ee4\u4f1a\u8986\u76d6\u5148\u914d\u7f6e\u7684\u547d\u4ee4\u3002 \u5bf9\u4e8e\u540c\u4e00\u4e2aRoute-Policy\u8282\u70b9\uff0c\u5728\u5339\u914d\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5404\u4e2aif-match\u5b50\u53e5\u95f4\u662f\u201c\u4e0e\u201d\u7684\u5173\u7cfb\uff0c\u5373\u8def\u7531\u4fe1\u606f\u5fc5\u987b\u540c\u65f6\u6ee1\u8db3\u6240\u6709\u5339\u914d\u6761\u4ef6\uff0c\u624d\u53ef\u4ee5\u6267\u884capply\u5b50\u53e5\u7684\u52a8\u4f5c\u3002\u4f46\u547d\u4ee4**if-match route-type**\u548c**if-match** **interface**\u9664\u5916\uff0c\u8fd9\u4e24\u4e2a\u547d\u4ee4\u7684\u5404\u81eaif-match\u5b50\u53e5\u95f4\u662f\u201c\u6216\u201d\u7684\u5173\u7cfb\uff0c\u4e0e\u5176\u5b83\u547d\u4ee4\u7684if-match\u5b50\u53e5\u95f4\u4ecd\u662f\u201c\u4e0e\u201d\u7684\u5173\u7cfb\u3002 \u5982\u4e0d\u6307\u5b9aif-match\u5b50\u53e5\uff0c\u5219\u6240\u6709\u8def\u7531\u4fe1\u606f\u90fd\u4f1a\u901a\u8fc7\u8be5\u8282\u70b9\u7684\u8fc7\u6ee4\u3002 \u914d\u7f6eapply\u5b50\u53e5 \u00b6 Route-policy\u914d\u7f6e\u793a\u4f8b \u00b6 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 \u7531\u4e8eroute-policy\u5728\u672b\u5c3e\u9690\u542b\u201c\u62d2\u7edd\u6240\u6709\u201d\u7684\u8282\u70b9\uff0c\u56e0\u6b64172.16.2.0/24\u53ca172.16.3.0/24\u8def\u7531\u56e0\u4e3a\u6ca1\u6709\u6ee1\u8db3\u4efb \u4f55\u8282\u70b9\u7684if-match\u8bed\u53e5\uff0c\u4ece\u800c\u4e0d\u88ab\u6ce8\u5165\u5230OSPF\u4e2d\u3002 5.2.2 IP-Prefix \u6280\u672f\u80cc\u666f \u00b6 \u5728\u90e8\u7f72\u8def\u7531\u7b56\u7565\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5f80\u5f80\u9700\u8981\u901a\u8fc7\u4e00\u4e9b\u624b\u6bb5\u201c\u6293\u53d6\u201d\u8def\u7531\uff0c\u4ece\u800c\u80fd\u591f\u9488\u5bf9\u7279\u5b9a\u7684\u8def\u7531\u6765\u6267\u884c\u76f8\u5e94\u7684\u7b56\u7565\uff0c\u4ee5\u5b9e\u73b0\u5dee\u5f02\u5316\u3002\u5728\u201c\u6293\u53d6\u201d\u8def\u7531\u7684\u5de5\u5177\u4e2d\uff0cACL\u65e0\u7591\u662f\u6700\u5e38\u7528\u7684\u5de5\u5177\u4e4b\u4e00\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR2\u90e8\u7f72\u4e86RIP\u5230OSPF\u7684\u8def\u7531\u91cd\u53d1\u5e03\uff0c\u5728\u8fd9\u4e2a\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u6709\u4e2a\u7279\u6b8a\u9700\u6c42\uff1a\u5c06\u5f15\u5165OSPF\u540e\u7684\u5916\u90e8\u8def\u7531192.168.1.0/24\u7684cost\u8bbe\u5b9a\u4e3a10\u3001192.168.2.0/24\u7684cost\u8bbe\u5b9a\u4e3a20\uff0c\u90a3\u4e48\u6211\u4eec\u4fbf\u8981\u5148\u5339\u914d\u6216\u8005\u8bf4\u201c\u6293\u53d6\u201d\u76f8\u5173\u8def\u7531\uff0c\u7136\u540e\u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u5728route-policy\u4e2dapply\u4e0d\u540c\u7684cost\uff0c\u4ece\u800c\u5b9e\u73b0\u7b56\u7565\u3002 \u4f7f\u7528ACL\u6765\u5e94\u5bf9\u8fd9\u4e2a\u9700\u6c42\u662f\u5b8c\u5168\u6ca1\u95ee\u9898\u7684\uff0c\u5b9a\u4e49\u4e00\u4e2aACL2001\uff0c\u5339\u914d192.168.1.0\uff0c\u5b9a\u4e49\u4e00\u4e2aACL2002 \u5339\u914d192.168.2.0\uff0c\u7136\u540e\u5728route-policy RP\u4e2d\u5199\u4e24\u4e2anode\u5206\u522b\u9488\u5bf9\u8fd9\u4e24\u6761\u8def\u7531apply\u4e0d\u540c\u7684cost\u503c\uff0c\u5f88\u7b80\u5355\u3002\u4f46\u662f\u2026\u2026 \u4e0a\u9762\u8fd9\u4e2a\u73af\u5883\uff0cACL\u5c31\u65e0\u80fd\u4e3a\u529b\u4e86\u3002\u4e3a\u4ec0\u4e48\u5462\uff1f\u56e0\u4e3aACL\u53ea\u80fd\u591f\u5339\u914d\u8def\u7531\u524d\u7f00\u7684\u7f51\u7edc\u5730\u5740\u90e8\u5206\uff0c\u65e0\u6cd5\u5339\u914d\u8def\u7531\u524d\u7f00\u7684\u7f51\u7edc\u63a9\u7801\uff08\u6216\u8005\u8bf4\u524d\u7f00\u957f\u5ea6\uff09\u3002\u51c6\u786e\u7684\u8bf4\uff0c\u4e00\u6761\u8def\u7531\u524d\u7f00\u662f\u5305\u542b\u7f51\u7edc\u5730\u5740\u548c\u7f51\u7edc\u63a9\u7801\uff08\u524d\u7f00\u957f\u5ea6\uff09\u7684\uff0c\u5bf9\u4e8e192.168.1.0\uff0c\u8fd9\u7b97\u4e0d\u4e0a\u4e00\u6761\u5b8c\u6574\u7684\u8def\u7531\uff0c\u5e94\u8be5\u91c7\u7528192.168.1.0 255.255.255.0\u6216\u8005 192.168.1.0/24\u7684\u65b9\u5f0f\u5448\u73b0\uff0c\u8fd9\u624d\u662f\u4e00\u6761\u5b8c\u6574\u8def\u7531\u3002\u800c\u53ea\u8981\u7f51\u7edc\u5730\u5740\u6216\u8005\u7f51\u7edc\u63a9\u7801\u4e2d\u6709\u4efb\u4f55\u4e00\u9879\u4e0d\u540c\uff0c \u8fd9\u5c31\u662f\u4e24\u6761\u4e0d\u540c\u7684\u8def\u7531\u4e86\uff0c\u4f8b\u5982192.168.1.0/24\u548c192.168.1.0/25\uff0c\u8fd9\u5c31\u662f\u4e24\u6761\u4e0d\u540c\u7684\u8def\u7531\u3002 ACL\u662f\u65e0\u6cd5\u5339\u914d\u8def\u7531\u524d\u7f00\u7684\u63a9\u7801\u90e8\u5206\u7684\uff0c\u56e0\u6b64\u4e0a\u56fe\u6240\u793a\u7684\u9700\u6c42\u7528ACL\u662f\u65e0\u6cd5\u5b8c\u6210\u7684\u3002\u8fd9\u91cc\u987a\u4fbf\u591a\u5634\u4e00\u53e5\uff0c \u5982\u679c\u4f7f\u7528Basic ACL\u5339\u914d\u8def\u7531\uff0c\u90a3\u4e48\u5efa\u8bae\u5728\u4e66\u5199ACL\u65f6\uff0c\u53cd\u63a9\u7801\u4f7f\u75280.0.0.0\uff0c\u5426\u5219\u4f1a\u9020\u6210\u5339\u914d\u4e0d\u7cbe\u786e\u7684\u73b0\u8c61\u3002\u4f8b\u5982\u8981\u5339\u914d192.168.1.0/24\u8fd9\u6761\u8def\u7531\uff0c\u5982\u679cacl\u7684rule\u8fd9\u4e48\u5199\uff1a rule permit source 192.168.1.0 0.0.0.255 \u8fd9\u4e8b\u5b9e\u4e0a\u662f\u4e0d\u4e25\u8c28\u7684\uff0c\u56e0\u4e3a\u5b83\u5c06192.168.1.0\u3001192.168.1.1\u3001192.168.1.2\u3001192.168.1.3\u2026\u2026\u2026\u2026\u7b49\u4f17\u591a \u7f51\u7edc\u5730\u5740\u5168\u5339\u914d\u4f4f\u4e86\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0a\u9762\u76840.0.0.255\uff0c\u5e76\u4e0d\u80fd\u7528\u4e8e\u5339\u914d\u7f51\u7edc\u63a9\u7801255.255.255.0\uff0c\u5b83\u53ea\u4e0d\u8fc7\u662f\u4e0e\u524d\u9762\u7684192.168.1.0\u7ec4\u5408\uff0c\u5e76\u7528\u4e8e\u5339\u914d\u7f51\u7edc\u5730\u5740\u800c\u5df2\u3002\u6240\u4ee5\uff0c\u5efa\u8bae\u8fd9\u4e48\u5199\uff1a rule permit source 192.168.1.0 0.0.0.0 \u6216\u8005\uff1a rule permit source 192.168.1.0 0 IP-Prefix\uff08IP\u524d\u7f00\u5217\u8868\uff09 \u00b6 IP\u524d\u7f00\u5217\u8868\u5339\u914d\u8def\u7531\u7684\u53ef\u63a7\u6027\u6bd4ACL\u9ad8\u5f97\u591a\uff0c\u4e5f\u66f4\u4e3a\u7075\u6d3b\uff1b IP\u524d\u7f00\u5217\u8868\u53ef\u5339\u914d\u8def\u7531\u524d\u7f00\u4e2d\u7684\u7f51\u7edc\u5730\u5740\u53ca\u7f51\u7edc\u63a9\u7801\uff08\u524d\u7f00\u957f\u5ea6\uff09\uff0c\u589e\u5f3a\u4e86\u5339\u914d\u7684\u7cbe\u786e\u5ea6\uff1b IP\u524d\u7f00\u5217\u8868\u9664\u4e86\u80fd\u591f\u5339\u914d\u5177\u4f53\u7684\u7f51\u7edc\u63a9\u7801\u957f\u5ea6\uff0c\u8fd8\u80fd\u591f\u5339\u914d\u63a9\u7801\u957f\u5ea6\u8303\u56f4\uff0c\u975e\u5e38\u7075\u6d3b\u3002 \u4e00\u4e2aIP\u524d\u7f00\u5217\u8868\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u8868\u9879\uff08\u8bed\u53e5\uff09\uff0c\u5728\u5339\u914d\u8fc7\u7a0b\u4e2d\u4f9d\u5e8f\u8fdb\u884c\u8ba1\u7b97\u3002\u8868\u9879\u4e2d\u7684\u7d22\u5f15\u53f7 \uff08\u5e8f\u53f7\uff09\u51b3\u5b9a\u4e86\u6bcf\u4e2a\u8868\u9879\u5728\u6574\u4e2aIP\u524d\u7f00\u5217\u8868\u4e2d\u7684\u4f4d\u7f6e\u3002 IP\u524d\u7f00\u5217\u8868\u7684\u914d\u7f6e \u00b6 \u521b\u5efa\u4e00\u4e2aIP\u524d\u7f00\u5217\u8868\u7684\u914d\u7f6e\u5982\u4e0b\uff1a *Name*\u53c2\u6570\u662f\u672cIP\u524d\u7f00\u5217\u8868\u7684\u540d\u79f0\u3002 **Index**\u5173\u952e\u5b57\u53ca\u53c2\u6570\u6307\u793a\u672c\u8868\u9879\u5728\u672cIP\u524d\u7f00\u5217\u8868\u4e2d\u7684\u5e8f\u53f7\uff08\u6216\u7d22\u5f15\u53f7\uff09\uff0c\u8be5\u5173\u952e\u5b57\u53ca\u53c2\u6570\u662f\u53ef\u9009\u7684\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u8be5\u5e8f\u53f7\u503c\u6309\u7167\u914d\u7f6e\u5148\u540e\u987a\u5e8f\u4f9d\u6b21\u9012\u589e\uff0c\u6bcf\u6b21\u52a010\uff0c\u7b2c\u4e00\u4e2a\u5e8f\u53f7\u503c\u4e3a10\u3002 **Permit**\u53ca**deny**\u5173\u952e\u5b57\u7528\u4e8e\u914d\u7f6e\u672c\u8868\u9879\u7684\u5339\u914d\u6a21\u5f0f\u3002 *ip-address mask-length*\u53c2\u6570\u7528\u4e8e\u5206\u522b\u5236\u5b9aIP\u5730\u5740\u53ca\u63a9\u7801\u957f\u5ea6\u3002 [ greater-equal greater-equal-value ] [ less-equal less-equal-value ]\u662f\u53ef\u9009\u914d\u7f6e\uff0c\u7528\u4e8e\u6307\u5b9a\u63a9\u7801\u957f\u5ea6\u7684\u8303\u56f4\u3002 \u5982\u679c\u5728\u547d\u4ee4\u4e2d\u53ea\u6307\u5b9a\u4e86**greater-equal**\uff0c\u5219\u524d\u7f00\u8303\u56f4\u4e3a[greater-equal-value\uff0c32]\uff1b \u5982\u679c\u5728\u547d\u4ee4\u4e2d\u53ea\u6307\u5b9a\u4e86**less-equal**\uff0c\u5219\u524d\u7f00\u8303\u56f4\u4e3a[mask-length\uff0cless-equal-value]\u3002 IP\u524d\u7f00\u5217\u8868\u7531\u5217\u8868\u540d\u79f0\u8fdb\u884c\u6807\u8bc6\uff0c\u6bcf\u4e2aIP\u524d\u7f00\u5217\u8868\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u8868\u9879\u3002\u4e0b\u9762\u7684\u914d\u7f6e\u5c55\u793a\u4e86\u4e00\u4e2a\u540d\u4e3aabcd\uff0c \u5b83\u5305\u542b\u4e24\u4e2a\u8868\u9879\uff1a \u5728IP\u524d\u7f00\u5217\u8868\u7684\u5339\u914d\u8fc7\u7a0b\u4e2d\uff0c\u8bbe\u5907\u6309\u7d22\u5f15\u53f7\u5347\u5e8f\u4f9d\u6b21\u68c0\u67e5\u5404\u4e2a\u8868\u9879\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u8868\u9879\u6ee1\u8db3\u6761\u4ef6\uff0c\u5c31\u4e0d\u518d \u53bb\u5339\u914d\u540e\u7eed\u8868\u9879\u3002 \u4ee5**ip ip-prefix abcd index 10 deny 1.0.0.0 8**\u4e3a\u4f8b\uff0c\u8fd9\u4e2a\u8868\u9879\u5c5e\u4e8eIP\u524d\u7f00\u5217\u8868abcd\uff0c\u5b83\u7684\u7d22\u5f15\u53f7\u4e3a10\uff0c \u5e76\u4e14\u5339\u914d\u6a21\u5f0f\u4e3a\u62d2\u7edd\uff0c\u5728\u8be5\u8868\u9879\u4e2dIP\u524d\u7f00\u4e3a1.0.0.0\uff0c\u63a9\u7801\u957f\u5ea6\u4e3a8\uff0c\u56e0\u6b64\u8fd9\u4e2a\u8868\u9879\u7528\u4e8e\u5339\u914d\u8def\u75311.0.0.0/8\uff0c \u53ea\u6709\u8be5\u8def\u7531\u624d\u4f1a\u88ab\u5339\u914d\uff0c\u5e76\u4e14\u8be5\u8def\u7531\u5c06\u4f1a\u88ab\u8be5\u8868\u9879\u8fc7\u6ee4\uff08deny\uff09\u3002\u8fd9\u4e2a\u547d\u4ee4\u4e2d\u6ca1\u6709\u5b9a\u4e49\u63a9\u7801\u957f\u5ea6\u8303\u56f4\u3002 \u5982\u679c\u4e00\u6761\u8def\u7531\u65e0\u6cd5\u88ab\u4e00\u4e2aIP\u524d\u7f00\u5217\u8868\u4e2d\u7684\u6240\u6709\u8868\u9879\u5339\u914d\uff0c\u90a3\u4e48\u8fd9\u6761\u8def\u7531\u88ab\u89c6\u4e3a\u88ab\u8be5\u524d\u7f00\u5217\u8868\u62d2\u7edd\u901a\u8fc7\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2aIP\u524d\u7f00\u5217\u8868\u7684\u672b\u5c3e\uff0c\u9690\u542b\u7740\u4e00\u6761\u62d2\u7edd\u6240\u6709\u7684\u8868\u9879\u3002 4 \u914d\u7f6e\u793a\u4f8b \u00b6 \u793a\u4f8b1\uff1a \u5339\u914d\u67d0\u6761\u7279\u5b9a\u8def\u7531192.168.1.0/24\uff1a ip ip-prefix ipprefix1 192.168.1.0 24 \u5339\u914d\u9ed8\u8ba4\u8def\u75310.0.0.0/0\uff1a ip ip-prefix ipprefix2 permit 0.0.0.0 0 \u6ce8\u610f\uff1aIP\u524d\u7f00\u4e3a0.0.0.0\u65f6\u8868\u793a\u901a\u914d\u5730\u5740\u3002\u6b64\u65f6\u4e0d\u8bba\u63a9\u7801\u6307\u5b9a\u4e3a\u591a\u5c11\uff0c\u90fd\u8868\u793a\u63a9\u7801\u957f\u5ea6\u8303\u56f4\u5185\u7684\u6240\u6709 \u8def\u7531\u5168\u88ab\u5339\u914d\u3002 \u5339\u914d\u6240\u6709/32\u4e3b\u673a\u8def\u7531\uff1a ip ip-prefix ipprefix3 permit 0.0.0.0 0 greater-equal 32 \u5339\u914d\u4efb\u610f\u8def\u7531(any)\uff1a ip ip-prefix ipprefix4 permit 0.0.0.0 0 less-equal 32 \u793a\u4f8b2\uff1a \u5339\u914d\u4ee5\u4e0b\u8def\u7531\uff08\u7528\u6700\u7cbe\u786e\u6700\u7b80\u6d01\u7684\u65b9\u5f0f\uff09\uff1a 192.168.4.0/24 192.168.5.0/24 192.168.6.0/24 192.168.7.0/24 ip ip-prefix abcd permit 192.168.4.0 22 greater-equal 24 less-equal 24 \u4e0a\u9762\u8fd9\u6761\u547d\u4ee4\u7684\u610f\u601d\u662f\uff0c\u5141\u8bb8\u90a3\u4e9b\u7f51\u7edc\u5730\u5740\u7684\u524d22bit\u4e0e192.168.4.0\u7684\u524d22bit\u76f8\u540c\uff0c\u5e76\u4e14\u7f51\u7edc\u63a9\u7801 \u957f\u5ea6\u4e3a24\u7684\u8def\u7531\u3002\u6ce8\u610f\u6b64\u5904\u201cgreater-equal 24 less-equal 24\u201d\u8981\u6c42\u7f51\u7edc\u63a9\u7801\u957f\u5ea6\u65e2\u5927\u4e8e\u6216\u7b49\u4e8e24\uff0c\u53c8\u5c0f\u4e8e\u6216\u7b49\u4e8e24\uff0c\u56e0\u6b64\u53ea\u80fd\u662f24\u3002 \u793a\u4f8b3\uff1a \u5728\u4ee5\u4e0a\u914d\u7f6e\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u79f0\u4e3a1\u7684IP\u524d\u7f00\u5217\u8868\uff0c\u8be5\u5217\u8868\u4e2d\u5305\u542b\u4e00\u4e2a\u8868\u9879\uff0c\u8fd9\u4e2a\u8868\u9879\u8981\u6c42\u88ab\u5339\u914d\u8def\u7531\u7684\u7f51\u7edc\u5730\u5740\u7684\u524d16bit\u4e0e192.168.0.0\u7684\u524d16bit\u76f8\u540c\uff0c\u5e76\u4e14\u8def\u7531\u7684\u7f51\u7edc\u63a9\u7801\u957f\u5ea6\u4e3a16\uff0c \u56e0\u6b64\u8be5\u8868\u9879\u53ea\u80fd\u7528\u4e8e\u5339\u914d\u8def\u7531192.168.0.0/16\u3002\u7531\u4e8e\u8be5\u8868\u9879\u7684\u5339\u914d\u6a21\u5f0f\u4e3apermit \uff0c \u56e0\u6b64\u8def\u7531 192.168.0.0/16\u88ab\u8be5IP\u524d\u7f00\u5217\u8868\u5141\u8bb8\u3002 \u968f\u540e\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2aroute-policy RP\uff0c\u5b83\u5305\u542b\u4e00\u4e2a\u8282\u70b9\uff0c\u4e14\u8be5\u8282\u70b9\u7684\u5339\u914d\u6a21\u5f0f\u4e3apermit\u3002\u8be5\u8282\u70b9\u8c03\u7528\u4e86IP\u524d\u7f00\u5217\u88681\uff0c\u5982\u6b64\u4e00\u6765\uff0c192.168.0.0/16\u5c06\u88abroute-policy RP\u6240\u5141\u8bb8\uff0c\u800c\u7531\u4e8eroute-policy\u7684\u672b\u5c3e\u9690\u542b\u7740\u4e00\u4e2a\u62d2\u7edd\u6240\u6709\u7684\u8282\u70b9\uff0c\u56e0\u6b64\u5bf9\u4e8eroute-policy RP\u800c\u8a00\uff0c\u53ea\u5141\u8bb8\u4e86\u8def\u7531192.168.0.0/16\u3002 BGP BGP \u57fa\u672c\u6982\u5ff5 BGP\u6982\u8ff0 \u00b6 IGP\u4e5f\u5373\u5185\u90e8\u7f51\u5173\u8def\u7531\u534f\u8bae\uff0c\u5178\u578b\u4ee3\u8868\u6709OSPF\u3001IS-IS\u7b49\u3002IGP\u5de5\u4f5c\u7684\u201c\u7740\u773c\u70b9\u201d\u5728AS\uff08\u81ea\u6cbb\u7cfb\u7edf\uff09\u5185\u90e8\uff0c \u5b83\u7684\u4e3b\u8981\u804c\u8d23\u5c31\u662f\u8d1f\u8d23AS\u5185\u7684\u8def\u7531\u53d1\u73b0\u548c\u5feb\u901f\u6536\u655b\uff0c\u800c\u4e14\u5176\u627f\u8f7d\u7684\u8def\u7531\u524d\u7f00\u5c31\u662f\u672cAS\u5185\u7684\u524d\u7f00\u3002 \u8fd9\u91cc\u5148\u4ecb\u7ecd\u4e00\u4e0bAS\u7684\u6982\u5ff5\uff0cAS\uff08Autonomous system\uff0c\u81ea\u6cbb\u7cfb\u7edf\uff09\u6307\u7684\u662f\u5728\u540c\u4e00\u4e2a\u7ec4\u7ec7\u6216\u673a\u6784\u7ba1\u7406\u4e0b\u3001\u4f7f\u7528\u76f8\u540c\u7b56\u7565\u7684\u8bbe\u5907\u7684\u96c6\u5408\u3002\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u7684\u5c06AS\u7406\u89e3\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684\u673a\u6784\u6216\u8005\u4f01\u4e1a\u2014\u2014\u4f8b\u5982\u4e2d\u56fd\u8054\u901a\u2014\u2014\u6240\u7ba1\u7406\u7684\u7f51\u7edc\u3002\u53e6\u4e00\u4e2aAS\u7684\u4f8b\u5b50\u662f\u4e00\u5bb6\u5927\u578b\u4f01\u4e1a\u7684\u7f51\u7edc\uff0c\u5728\u7f51\u7edc\u7684\u89c4\u5212\u4e0a\u5c06\u5168\u7403\u5404\u4e2a\u533a\u57df\u5212\u5206\u4e3a\u4e00\u4e2a\u4e2aAS\uff1a \u4e2d\u56fd\u533a\u662f\u4e00\u4e2aAS\uff0c\u5357\u7f8e\u533a\u662f\u4e00\u4e2aAS\u4ee5\u6b64\u7c7b\u63a8\u3002 \u4e0d\u540c\u7684AS\u901a\u8fc7AS\u53f7\u533a\u5206\uff0cAS\u53f7\u53d6\u503c\u8303\u56f41\uff0d65535\uff0c\u5176\u4e2d64512\uff0d65535\u662f\u79c1\u6709AS\u53f7\uff0c\u5728\u79c1\u6709\u7f51\u7edc\u53ef\u968f\u610f\u4f7f\u7528\u3002IANA\u8d1f\u8d23AS\u53f7\u7684\u5206\u53d1\uff0c\u5982\u679c\u8981\u4f7f\u7528\u516c\u6709AS\u53f7\uff0c\u5219\u9700\u8981\u5411IANA\u7533\u8bf7\u3002 BGP\uff08Border Gateway Protocol\uff0c\u8fb9\u754c\u7f51\u5173\u534f\u8bae\uff09 \uff0c\u662f\u4e00\u79cd\u8ddd\u79bb\u77e2\u91cf\u8def\u7531\u534f\u8bae\uff0c\u4e25\u683c\u7684\u8bf4\u5e94\u8be5\u53eb\u8def\u5f84\u77e2\u91cf\u8def\u7531\u534f\u8bae\uff0c\u4e3b\u8981\u7528\u4e8e\u5728AS\u4e4b\u95f4\u4f20\u9012\u8def\u7531\u4fe1\u606f\uff0c\u9002\u7528\u4e8e\u5927\u89c4\u6a21\u7684\u7f51\u7edc\u73af\u5883\uff0cInternet\u7684\u9aa8\u5e72\u7f51\u7edc\u6b63\u662f\u5f97\u76ca\u4e8eBGP\u624d\u80fd\u627f\u8f7d\u5982\u6b64\u5927\u6279\u91cf\u7684\u8def\u7531\u524d\u7f00\u3002\u603b\u7684\u6765\u8bf4\uff0c\u65e0\u8bba\u662f\u5185\u90e8\u7f51\u5173\u8def\u7531\u534f\u8bae\uff0c\u6216\u8005\u5916\u90e8\u7f51\u5173\u8def\u7531\u534f\u8bae\uff0c\u6700\u7ec8\u7684\u76ee\u7684\u90fd\u662f\u4e3a\u4e86\u5b9e\u73b0\u8def\u7531\u7684\u4e92\u901a\uff0c\u4ece\u800c\u6700\u7ec8\u5b9e\u73b0\u6570\u636e\u7684\u4e92\u901a\u3002 BGP\u7684\u534f\u8bae\u7279\u5f81 \u00b6 BGP\u5728\u4f20\u8f93\u5c42\u4f7f\u7528TCP\u4ee5\u786e\u4fdd\u53ef\u9760\u4f20\u8f93\uff0c\u6240\u4f7f\u7528\u7684TCP\u76ee\u7684\u7aef\u53e3\u53f7\u4e3a179\uff1b BGP\u4f1a\u5728\u9700\u8981\u4ea4\u6362\u8def\u7531\u7684\u8def\u7531\u5668\u4e4b\u95f4\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u8fd9\u4e9b\u8def\u7531\u5668\u88ab\u79f0\u4e3aBGP\u5bf9\u7b49\u4f53\uff0c\u4e5f\u53ebBGP\u90bb\u5c45\u3002\u6709\u4e24\u79cdBGP\u90bb\u5c45\u5173\u7cfb\uff1aEBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u4ee5\u53caIBGP\u90bb\u5c45\u5173\u7cfb\u3002 BGP\u7684\u90bb\u5c45\u5173\u7cfb\u53ef\u4ee5\u8de8\u8def\u7531\u5668\u5efa\u7acb\uff0c\u800c\u4e0d\u50cfOSPF\u53caRIP\u90a3\u6837\uff0c\u5fc5\u987b\u8981\u6c42\u76f4\u8fde\u3002 BGP\u5bf9\u7b49\u4f53\u5728\u90bb\u5c45\u5173\u7cfb\u5efa\u7acb\u65f6\u4ea4\u6362\u6574\u4e2aBGP\u8def\u7531\u8868\u3002 \u5728\u90bb\u5c45\u5173\u7cfb\u5efa\u7acb\u5b8c\u6210\u540e\uff0cBGP\u8def\u7531\u5668\u53ea\u53d1\u9001\u589e\u91cf\u66f4\u65b0\u6216\u89e6\u53d1\u66f4\u65b0\uff08\u4e0d\u4f1a\u5468\u671f\u6027\u66f4\u65b0\uff09\u3002 BGP\u5177\u6709\u4e30\u5bcc\u7684\u8def\u5f84\u5c5e\u6027\u548c\u5f3a\u5927\u7684\u7b56\u7565\u5de5\u5177\u3002 BGP\u80fd\u591f\u627f\u8f7d\u5927\u6279\u91cf\u7684\u8def\u7531\u524d\u7f00\uff0c\u7528\u4e8e\u5927\u89c4\u6a21\u7684\u7f51\u7edc\u4e2d\u3002 BGP\u62a5\u6587 \u00b6 BGP\u62a5\u6587\u662f\u88ab\u627f\u8f7d\u5728TCP\u62a5\u6587\u4e4b\u4e0a\u7684\uff0c\u4f7f\u7528\u7aef\u53e3\u53f7179\u3002\u5171\u6709\u4e94\u79cd\u62a5\u6587\uff1a \u62a5\u6587\u540d\u79f0 \u4f5c\u7528\u662f\u4ec0\u4e48 \u4ec0\u4e48\u65f6\u5019\u53d1\u5305 OPEN \u534f\u5546BGP\u90bb\u5c45\u7684\u5404\u9879\u53c2\u6570\uff0c\u5efa\u7acb\u90bb \u5c45\u5173\u7cfb \u901a\u8fc7TCP\u5efa\u7acbBGP\u8fde\u63a5\uff0c\u53d1\u9001open\u62a5\u6587 UPDATE \u8fdb\u884c\u8def\u7531\u4fe1\u606f\u7684\u4ea4\u6362 \u8fde\u63a5\u5efa\u7acb\u540e\uff0c\u6709\u8def\u7531\u9700\u8981\u53d1\u9001\u6216\u8def\u7531\u53d8\u5316\u65f6\uff0c\u53d1\u9001 UPDATE\u901a\u544a\u5bf9\u7aef\u8def\u7531\u4fe1\u606f NOTIFICATION \u62a5\u544a\u9519\u8bef\uff0c\u4e2d\u6b62\u90bb\u5c45\u5173\u7cfb \u5f53BGP\u5728\u8fd0\u884c\u4e2d\u53d1\u73b0\u9519\u8bef\u65f6\uff0c\u8981\u53d1\u9001NOTIFICATION\u62a5\u6587 \u901a\u544aBGP\u5bf9\u7aef KEEPALIVE \u7ef4\u6301\u90bb\u5c45\u5173\u7cfb \u5b9a\u65f6\u53d1\u9001KEEPALIVE\u62a5\u6587\u4ee5\u4fdd\u6301BGP\u90bb\u5c45\u5173\u7cfb\u7684\u6709\u6548\u6027 Route-refresh \u4e3a\u4fdd\u8bc1\u7f51\u7edc\u7a33\u5b9a\uff0c\u89e6\u53d1\u66f4\u65b0\u8def\u7531\u7684 \u673a\u5236 \u5f53\u8def\u7531\u7b56\u7565\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u89e6\u53d1\u8bf7\u6c42\u90bb\u5c45\u91cd\u65b0\u901a\u544a\u8def\u7531 BGP\u5bf9\u7b49\u4f53\u7c7b\u578b \u00b6 \u8fd0\u884cBGP\u7684\u8def\u7531\u5668\u88ab\u79f0\u4e3aBGP speaker\u3002BGP\u8def\u7531\u5668\u4e4b\u95f4\u8981\u4ea4\u4e92BGP\u8def\u7531\uff0c\u524d\u63d0\u662f\u8981\u5efa\u7acb\u6b63\u5e38\u7684BGP\u90bb\u5c45\u5173\u7cfb\u3002\u8981\u5efa\u7acb\u6b63\u786e\u7684BGP\u90bb\u5c45\u5173\u7cfb\uff0c\u9996\u5148BGP\u5bf9\u7b49\u4f53\u4e4b\u95f4\u8981\u5148\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u7531\u4e8eBGP\u662f\u627f\u8f7d\u5728TCP\u4e4b\u4e0a\u7684\uff0c\u56e0\u6b64BGP\u6ca1\u6709\u201c\u90bb\u5c45\u5fc5\u987b\u76f4\u8fde\u201d\u7684\u9650\u5236\u3002 \u6709\u4e24\u79cdBGP\u90bb\u5c45\u5173\u7cfb\uff1a EBGP\u90bb\u5c45\uff08External BGP peer\uff09\uff1a\u4f4d\u4e8e\u4e0d\u540cAS\u7684BGP\u8def\u7531\u5668\u4e4b\u95f4\u7684BGP\u90bb\u5c45\u5173\u7cfb \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u3001R2\u3001R3\u5c5e\u4e8e\u4e00\u4e2aAS\uff0cAS\u53f7\u4e3a100\uff1bR4\u5c5e\u4e8e\u53e6\u4e00\u4e2aAS\uff0cAS\u53f7\u4e3a200\u3002\u7531\u4e8eR3\u53caR4\u5206\u522b\u5c5e\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684AS\uff0c\u56e0\u6b64\u5b83\u4eec\u4e4b\u95f4\u5efa\u7acb\u7684BGP\u90bb\u5c45\u5173\u7cfb\u5c31\u662fEBGP\u90bb\u5c45\u5173\u7cfb\u3002 \u8981\u5efa\u7acbeBGP\u90bb\u63a5\u5173\u7cfb\u5fc5\u987b\u81f3\u5c11\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a1\uff09\u4e24\u4e2aeBGP\u90bb\u5c45\u6240\u5c5eAS\u53f7\u4e0d\u540c\uff1b2\uff09Peer\u547d\u4ee4\u6240\u6307\u5b9a\u7684IP\u5730\u5740\u8981\u8def\u7531\u53ef\u8fbe\uff0c\u5e76\u4e14\u4e24\u8005\u4e4b\u95f4TCP\u8fde\u63a5\u80fd\u591f\u5efa\u7acb\u3002 IBGP\u90bb\u5c45\u5173\u7cfb\uff08Internal BGP peer\uff09\uff1a\u4f4d\u4e8e\u76f8\u540cAS\u7684BGP\u8def\u7531\u5668\u4e4b\u95f4\u7684BGP\u90bb\u63a5\u5173\u7cfb \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5728AS100\u5185\uff0cR1\u3001R2\u3001R3\u8fd0\u884c\u4e86\u4e00\u4e2aIGP\uff0c\u4e5f\u5c31\u662fOSPF\uff0c\u8fd0\u884cOSPF\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u8ba9AS \u5185\u7684\u8def\u7531\u80fd\u591f\u6253\u901a\u3002\u53e6\u4e00\u65b9\u9762\uff0cR1\u4e0eR3\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2aBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u7531\u4e8eR1\u53caR3\u540c\u5c5e\u4e00\u4e2aAS\uff0c\u56e0\u6b64\u5b83\u4eec\u4e4b\u95f4\u5efa\u7acb\u7684BGP\u8fde\u63a5\u662fIBGP\u7684\u90bb\u5c45\u5173\u7cfb\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cR2\u5e76\u6ca1\u6709\u8fd0\u884cBGP\uff0cR1-R3\u4e4b\u95f4\u5e76\u975e\u76f4\u8fde\uff0c\u8fd9\u5728BGP\u4e2d\u662f\u88ab\u5141\u8bb8\u7684\uff0c\u56e0\u4e3aBGP\u662f\u88ab\u627f\u8f7d\u5728TCP\u4e4b\u4e0a\u7684\u3002\u5efa\u7acbIBGP\u90bb\u63a5\u5173\u7cfb\uff0c\u5fc5\u987b\u81f3\u5c11\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a1\uff09\u4e24\u4e2aIBGP\u90bb\u5c45\u6240\u5c5eAS\u53f7\u76f8\u540c\uff1b2\uff09 Peer\u547d\u4ee4\u6240\u6307\u5b9a\u7684IP\u5730\u5740\u8981\u8def\u7531\u53ef\u8fbe\uff0c\u5e76\u4e14TCP\u8fde\u63a5\u80fd\u591f\u5efa\u7acb\u3002\u4e0d\u540c\u7684BGP\u90bb\u5c45\u5173\u7cfb\uff0c\u5bf9\u8def\u7531\u7684\u64cd\u4f5c\u662f\u6709\u660e\u663e\u533a\u522b\u7684\u3002 BGP\u7684\u8def\u5f84\u77e2\u91cf\u7279\u5f81 \u00b6 BGP\u662f\u4e00\u4e2a\u8def\u5f84\u77e2\u91cf\u8def\u7531\u534f\u8bae\u3002\u5728\u67d0\u4e9b\u5c42\u9762\u4e0a\uff0c\u5b83\u4e0eRIP\u975e\u5e38\u76f8\u4f3c\uff0c\u5728BGP\u90bb\u5c45\u4e4b\u95f4\u4e92\u76f8\u66f4\u65b0\u7684\u662f\u8def\u7531\u8868\uff0c BGP\u8def\u7531\u540c\u6837\u6709\u8ddd\u79bb\u7684\u6982\u5ff5\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u91cc\u7684\u8ddd\u79bb\uff0c\u4e0eRIP\u7684\u6240\u8c13\u8df3\u6570\u662f\u5b8c\u5168\u4e0d\u540c\u7684\u3002 BGP\u5728\u5c06\u8def\u7531\u66f4\u65b0\u7ed9\u90bb\u5c45\u65f6\uff0c\u4f1a\u7ed9\u6bcf\u6761\u8def\u7531\u7c98\u9644\u8bb8\u591a\u8def\u5f84\u5c5e\u6027\uff08Path Attribute\uff09\u3002BGP\u5b9a\u4e49\u4e86\u4e30\u5bcc\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u4f7f\u5f97BGP\u5bf9\u8def\u7531\u7684\u64cd\u63a7\u53ca\u7b56\u7565\u90e8\u7f72\u53d8\u5f97\u5f02\u5e38\u7684\u7075\u6d3b\u3002\u6bcf\u6761BGP\u8def\u7531\u90fd\u643a\u5e26\u4e86\u82e5\u5e72\u8def\u5f84\u5c5e\u6027\uff0c\u8def\u5f84\u5c5e\u6027\u662fBGP\u7684\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u57fa\u672c\u6982\u5ff5\uff0c\u53ef\u4ee5\u7406\u89e3\u662f\u4e3a\u7528\u4e8e\u63cf\u8ff0\u6bcf\u6761\u8def\u7531\u7684\u7279\u5f81\u7684\u4e00\u7cfb\u5217\u5c5e\u6027\u503c\u3002\u5c31\u597d\u50cf\u4e00\u4e2a\u4eba\uff0c\u6709\u8eab\u9ad8\u3001\u4f53\u91cd\u3001\u5e74\u9f84\u7b49\u8fd9\u4e48\u4e00\u4e9b\u5c5e\u6027\u3002\u5176\u4e2d\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u8def\u5f84\u5c5e\u6027\u5c31\u662fAS_PATH\uff0c\u79f0\u4e3aAS\u5217\u8868\uff0c \u5b83\u7528\u4e8e\u63cf\u8ff0\u4e00\u6761\u8def\u7531\u7ecf\u8fc7\u7684AS\u53f7\u3002\u6bcf\u6761BGP\u8def\u7531\u90fd\u5fc5\u987b\u643a\u5e26AS_PATH\u5c5e\u6027\u3002 \u76f8\u6bd4\u4e8eIGP\u7740\u773c\u4e8eAS\u5185\uff0cBGP\u7684\u201c\u5fc3\u80f8\u201d\u53ef\u5c31\u5f00\u9614\u5f97\u591a\u4e86\uff0c\u5728BGP\u773c\u91cc\uff0c\u4e00\u8df3\uff0c\u5c31\u662f\u4e00\u4e2aAS\u3002\u5728\u4e0a\u56fe\u4e2d\uff0c AS500\u5185\u6709\u6761\u8def\u753110.1.1.0/24\uff0c\u8fd9\u6761\u8def\u7531\u88abAS500\u7684\u8fb9\u754c\u8def\u7531\u5668\uff08\u5728\u56fe\u4e2d\u672a\u753b\u51fa\uff09\u901a\u544a\u7ed9\u4e86EBGP\u90bb\u5c45R1\u53ca R3\u3002\u5728\u8def\u7531\u4f20\u51faAS500\u7684\u65f6\u5019\uff0c\u8fb9\u754c\u8def\u7531\u5668\u4f1a\u5c06\u8def\u7531\u7684AS_PATH\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a500\u3002\u73b0\u5728R1\u6536\u5230\u4e86\u8fd9\u6761\u8def\u7531\uff0c\u5b83\u53c8\u5c06\u8def\u7531\u901a\u544a\u7ed9\u4e86\u81ea\u5df1\u7684IBGP\u90bb\u5c45R2\uff0c\u7531\u4e8e\u8fd9\u6761\u8def\u7531\u6ca1\u6709\u88ab\u4f20\u51faAS100\uff0c\u56e0\u6b64AS_PATH\u6ca1\u6709\u53d1\u751f\u6539\u53d8\uff0c\u503c\u4f9d\u7136\u4e3a500\u3002\u63a5\u4e0b\u53bbR2\u5c06\u8def\u7531\u901a\u544a\u7ed9\u4e86EBGP\u90bb\u5c45R5\uff0c\u7531\u4e8e\u8fd9\u65f6\u8def\u7531\u8981\u4f20\u51faAS\uff0c\u56e0\u6b64R2\u4e3a\u8def\u7531\u7684 AS_PATH\u63d2\u5165\u4e00\u4e2a\u503c\u4e3a100\u7684\u53f7\u7801\uff08\u4e5f\u5c31\u662f\u672c\u5730AS\u53f7\uff0c\u5728\u5217\u8868\u7684\u524d\u9762\u63d2\u5165\uff09\uff0c\u8fd9\u6837\u4e00\u6765R2\u4f20\u9012\u7ed9R5\u7684BGP \u8def\u753110.1.1.0/24\u4e2d\uff0cAS_PATH\u5c5e\u6027\u503c\u5c31\u53d8\u6210\u4e86100,500\uff0c\u8fd9\u662f\u4e00\u4e2aAS\u7684\u5217\u8868\uff0c\u5f53R5\u6536\u5230\u8fd9\u6761\u8def\u7531\u65f6\uff0c\u5b83\u5c31\u77e5\u9053\uff0c\u6211\u8981\u53bb\u5f8010.1.1.0/24\uff0c\u662f\u9700\u8981\u5148\u5230AS100\uff0c\u7136\u540e\u518d\u5230AS500\uff0c\u53ea\u9700\u8981\u7ecf\u8fc72\u8df3AS\u3002 \u53e6\u4e00\u65b9\u9762\uff0cR5\u4e5f\u4eceR4\u6536\u5230\u4e86\u5173\u4e8e10.1.1.0/24\u7684BGP\u8def\u7531\u66f4\u65b0\uff0cAS_PATH\u4e3a300 200 500\uff0cR5\u5c31\u77e5\u9053\uff0c\u4ece AS300\u4e5f\u80fd\u5230\u8fbe10.1.1.0/24\uff0c\u4e0d\u8fc7\u9700\u8981\u7ecf\u8fc73\u8df3AS\u3002 AS_PATH\u5728BGP\u4e2d\u662f\u975e\u5e38\u91cd\u8981\u7684\u8def\u5f84\u5c5e\u6027\u3002\u4e00\u65b9\u9762\u80fd\u591f\u7528\u6765\u4f5c\u4e3aBGP\u8def\u7531\u4f18\u9009\u7684\u4f9d\u636e\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u7528\u4e8e\u5728 AS\u4e4b\u95f4\u9632\u6b62\u8def\u7531\u73af\u8def\u7684\u53d1\u751f\u3002\u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0cR5\u540c\u65f6\u6536\u5230\u4e24\u6761\u5230\u8fbe10.1.1.0/24\u7684\u8def\u7531\uff0c\u5728\u4e0d\u8003\u8651\u5176\u4ed6\u56e0\u7d20\u7684\u60c5\u51b5\u4e0b\uff0cR5\u4f1a\u4f18\u9009AS_PATH\u66f4\u77ed\u7684\u8def\u7531\uff0c\u56e0\u4e3a\u201c\u8ddd\u79bb\u7684AS\u8df3\u6570\u201d\u66f4\u5c11\uff0c\u6240\u4ee5\u6700\u7ec8\u4f18\u9009\u4eceR2\u8d70\u3002\u53e6\u5916\uff0c 10.1.1.0/24\u88abAS500\u7684\u8fb9\u754c\u8def\u7531\u5668\u901a\u544a\u7ed9R1\u540e\uff0c\u5b8c\u5168\u6709\u53ef\u80fd\u4eceR2-R5-R4-R3\u518d\u901a\u544a\u56de\u6765\uff0c\u8fd9\u5c31\u5f62\u6210\u4e86\u8def\u7531\u73af\u8def\uff0c\u5e86\u5e78\u7684\u662f\u6709AS_PATH\u8fd9\u4e2a\u8def\u5f84\u5c5e\u6027\u3002\u5982\u679cAS500\u7684\u8fb9\u754c\u8def\u7531\u5668\u53d1\u73b0\uff0cEBGP\u90bb\u5c45R3\u901a\u544a\u7ed9\u5b83\u7684\u8def\u7531\u7684AS_PATH\u5c5e\u6027\u503c\u91cc\u51fa\u73b0\u4e86\u81ea\u5df1\u7684AS\u53f7\uff0c\u5b83\u5c31\u8ba4\u4e3a\u51fa\u73b0\u4e86\u73af\u8def\uff0c\u56e0\u6b64\u5c06\u5ffd\u7565\u8fd9\u4e2a\u8def\u7531\u66f4\u65b0\u3002 IBGP\u6c34\u5e73\u5206\u5272 \u00b6 \u5728AS\u4e4b\u95f4\uff0cBGP\u7684\u8def\u7531\u9632\u73af\u5f88\u5927\u7a0b\u5ea6\u4e0a\u662f\u901a\u8fc7AS_PATH\u5b9e\u73b0\u7684\uff0c\u800cAS_PATH\u4ec5\u4ec5\u5728\u8def\u7531\u79bb\u5f00AS\u624d\u4f1a\u88ab\u66f4\u6539\uff0c\u56e0\u6b64\u5728AS\u5185\uff0cIBGP\u8def\u7531\u5c31\u6ca1\u6709EBGP\u8def\u7531\u90a3\u6837\u7684\u9632\u73af\u80fd\u529b\u4e86\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u201cIBGP\u6c34\u5e73\u5206\u5272\u201d\uff1a \u4e3a\u4e86\u9632\u6b62\u8def\u7531\u73af\u8def\u7684\u51fa\u73b0\uff0cBGP\u8def\u7531\u5668\u4e0d\u4f1a\u5c06\u81ea\u5df1\u4eceIBGP\u90bb\u5c45\u5b66\u4e60\u8fc7\u6765\u7684\u8def\u7531\u518d\u901a\u544a\u7ed9\u5176\u4ed6IBGP\u90bb\u5c45 \u3002 IBGP\u6c34\u5e73\u5206\u5272\u5728\u534e\u4e3a\u7f51\u7edc\u8bbe\u5907\u4e0a\u9ed8\u8ba4\u5df2\u7ecf\u5f00\u542f\u3002 IBGP\u6c34\u5e73\u5206\u5272\u52a0\u4e0aAS_PATH\u8def\u5f84\u5c5e\u6027\uff0c\u80fd\u591f\u5728\u6781\u5927\u7a0b\u5ea6\u4e0a\u89e3\u51b3BGP\u7684\u8def\u7531\u73af\u8def\u95ee\u9898\uff0c\u4f46\u662f\uff0c\u5728\u67d0\u4e9b\u73af\u5883\u4e2d\uff0cIBGP\u6c34\u5e73\u5206\u5272\u4e5f\u5e26\u6765\u4e00\u4e9b\u95ee\u9898\u3002 \u5728\u4e0a\u56fe\u4e2d\uff1a\u8def\u7531\u5668A\u5c5e\u4e8eAS65101\u3001\u8def\u7531\u5668BCDE\u5c5e\u4e8eAS65102\u3001\u8def\u7531\u5668F\u5c5e\u4e8eAS65103\uff1b AB\uff0cEF\u4e4b\u95f4\u5efa\u7acbEBGP\u90bb\u5c45\u5173\u7cfb\uff1bBC\uff0cCE\uff0cBD\uff0cDE\u4e4b\u95f4\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\uff1b \u73b0\u5728F\u8def\u7531\u5668\u5c06\u4e00\u6761\u8def\u7531\u901a\u8fc7BGP\u66f4\u65b0\u7ed9\u4e86E\uff0cE\u4eceEBGP\u90bb\u5c45\u5b66\u4e60\u5230\u8fd9\u6761\u8def\u7531\u540e\uff0c\u4f1a\u5c06\u5176\u901a\u544a\u7ed9C\uff0c\u800cC\u4ece\u81ea\u5df1\u7684IBGP\u90bb\u5c45E\u90a3\u5b66\u4e60\u5230\u8fd9\u6761\u8def\u7531\u540e\uff0c\u6839\u636eiBGP\u6c34\u5e73\u5206\u5272\u89c4\u5219\uff0c\u5b83\u4e0d\u80fd\u518d\u5c06\u8be5\u8def\u7531\u901a\u544a\u7ed9\u81ea\u5df1\u7684IBGP\u90bb\u5c45B\u4e86\uff0c\u56e0\u6b64B\u8def\u7531\u5668\u65e0\u6cd5\u5b66\u4e60\u5230\u53bb\u5f80AS65103\u7684\u8def\u7531\u3002\u8fd9\u5c31\u662fIBGP\u6c34\u5e73\u5206\u5272\u5e26\u6765\u7684\u95ee\u9898\u3002 \u90a3\u4e48\uff0c\u4e3a\u4e86\u89c4\u907f\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5c31\u4e0d\u5f97\u4e0d\u5728AS65102\u5185\u5efa\u7acbIBGP\u5168\u4e92\u8054\uff0c\u4e5f\u5c31\u662fBCDE\u56db\u53f0\u8def\u7531\u5668\u4e24\u4e24\u90fd\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\u3002\u8fd9\u79cd\u65b9\u6cd5\u5728\u8def\u7531\u5668\u6570\u91cf\u8f83\u5c11\u7684\u65f6\u5019\u5c1a\u4e14\u53ef\u884c\uff0c\u53ef\u662f\u5982\u679c\u6570\u91cf\u5f88\u591a\uff0c\u8def\u7531\u5668\u5c31\u5c06\u4f1a\u56e0\u4e3a\u9700\u8981\u7ef4\u62a4\u8fc7\u591a\u7684BGP\u90bb\u5c45\u5173\u7cfb\u800c\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cBGP\u8bbe\u8ba1\u4e86\u4e24\u4e2a\u673a\u5236\uff1a\u8def\u7531\u53cd\u5c04\u5668\uff0c \u4ee5\u53ca\u8054\u90a6\uff0c\u8fd9\u5728\u540e\u6587\u4e2d\u8ba8\u8bba\u3002 \u540c\u6b65\u89c4\u5219\u53ca\u4e2d\u8f6cAS\u5185\u7684IBGP\u4e92\u8054\u95ee\u9898 \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff1a \u8def\u7531\u5668A\u5c5e\u4e8eAS65101\uff1b\u8def\u7531\u5668BCDE\u5c5e\u4e8eAS65102\uff1b\u8def\u7531\u5668F\u5c5e\u4e8eAS65103\uff1b BCDE\u8fd0\u884cOSPF\uff0c\u6253\u901aAS65102\u5185\u7684\u8def\u7531\uff1b BE\u8def\u7531\u5668\u8fd0\u884cBGP\uff0c\u4e24\u8005\u4e4b\u95f4\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\uff1bCD\u8def\u7531\u5668\u4e0d\u8fd0\u884cBGP\u3002 A\u4e0a\u6709\u4e2a\u76f4\u8fde\u7f51\u6bb51.1.1.0/24\uff0cA\u5c06\u5230\u8fbe\u8be5\u7f51\u6bb5\u7684\u8def\u7531\u6ce8\u5165BGP\uff0c\u5e76\u4e14\u5c06\u8def\u7531\u901a\u544a\u7ed9B\uff0cB\u53c8\u4f1a\u5c06\u5176\u901a\u544a\u7ed9IBGP\u90bb\u5c45E\uff08\u8fd9\u4e2a\u4f20\u9012\u8fc7\u7a0b\u5176\u5b9e\u662fB\u5c06BGP\u62a5\u6587\u653e\u7f6e\u4e8eIP\u5305\u5185\u7ecf\u8fc7C\u6216D\u6700\u7ec8\u4f20\u9012\u7ed9E\uff0c\u5bf9\u4e8eCD\u800c\u8a00\uff0c\u8fd9\u4e9b\u6570\u636e\u5305\u90fd\u662f\u666e\u901aIP\u5305\uff0c\u76ee\u7684\u5730\u5740\u662fE\uff0c\u56e0\u6b64\u76f4\u63a5\u8f6c\u53d1\u4e0d\u67e5\u770b\uff09\u3002 \u6700\u7ec8E\u5c061.1.1.0/24\u8def\u7531\u4f20\u9012\u5230\u4e86F\u3002\u7136\u800c\uff0c\u867d\u7136F\u80fd\u901a\u544aBGP\u5b66\u4e60\u5230\u8fd9\u6761\u8def\u7531\uff0c\u4f46\u662f\u5f53\u6709\u6570\u636e\u524d\u5f801.1.1.0/24 \u65f6\uff0cF\u5c06\u6570\u636e\u5305\u4e22\u7ed9\u4e0b\u4e00\u8df3E\uff0c\u800cE\u53d1\u73b01.1.1.0/24\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u662fB\uff0cB\u5e76\u975e\u76f4\u8fde\uff0c\u56e0\u6b64\u9700\u9012\u5f52\u5f97\u5230\u5176\u524d\u5f80B \u7684\u4e0b\u4e00\u8df3\uff0c\u5230B\u7684\u4e0b\u4e00\u8df3\u662fD\u6216C\uff08\u901a\u8fc7OSPF\u5f97\u77e5\uff09\uff0c\u4e8e\u662fE\u5c06\u6570\u636e\u5305\u4e22\u7ed9D\u6216C\uff0c\u800cC\u548cD\u662f\u5e76\u4e0d\u77e5\u9053\u5982\u4f55\u5230\u8fbe1.1.1.0/24\u7684\uff08\u5b83\u4eec\u53ea\u8fd0\u884c\u4e86OSPF\uff0c\u6ca1\u6709\u8fd0\u884cBGP\uff09\uff0c\u4e8e\u662f\u5b83\u4eec\u5c06\u6570\u636e\u5305\u4e22\u5f03\uff0c\u81f3\u6b64\u5f62\u6210\u4e86\u8def\u7531\u9ed1\u6d1e\u3002 \u3010BGP\u540c\u6b65\u89c4\u5219\u7684\u6982\u5ff5\u3011BGP\u8def\u7531\u5668\u4eceIBGP\u90bb\u5c45\u5b66\u5230\u4e00\u6761\u8def\u7531\u540e\uff0c\u662f\u4e0d\u542f\u7528\u7684\uff08\u4e0d\u4f18\u9009\u7684\uff09\uff0c\u4e5f\u4e0d\u4f1a\u5c06\u5176\u901a\u544a\u7ed9EBGP\u90bb\u5c45\uff0c\u9664\u975e\u5b83\u518d\u6b21\u4eceIGP\u5b66\u4e60\u5230\u76f8\u540c\u7684\u8def\u7531\uff0c\u624d\u4f1a\u542f\u7528\u5e76\u901a\u544a\u7ed9EBGP\u90bb\u5c45\u3002\u8fd9\u662f\u4e3a\u4e86\u9632\u6b62\u51fa\u73b0\u4e0a\u9762\u6240\u63cf\u8ff0\u7684\u8def\u7531\u9ed1\u6d1e\u95ee\u9898\u3002 \u00b6 \u56de\u5230\u4e0a\u6587\u7684\u573a\u666f\uff0c\u4e3a\u4e86\u89c4\u907f\u8def\u7531\u9ed1\u6d1e\u95ee\u9898\uff0c\u53ef\u4ee5\u8003\u8651\u5728B\u3001E\u4e0a\uff0c\u5c06BGP\u8def\u7531\u91cd\u53d1\u5e03\u8fdbOSPF\uff0c\u8fd9\u6837\u4e00\u6765B\u3001 E\u5c31\u90fd\u80fd\u4eceBGP\uff0c\u4ee5\u53caIGP\u5b66\u4e60\u5230\u8def\u7531\uff0c\u4ece\u800c\u5f62\u6210\u540c\u6b65\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002\u4f46\u8fd9\u4e48\u505a\u540e\u679c\u662f\u4e0d\u53ef\u9884\u4f30\u7684\uff0c\u6bd5\u7adf BGP\u627f\u8f7d\u7684\u8def\u7531\u6761\u76ee\u662f\u76f8\u5f53\u5de8\u5927\u7684\u3002 \u53e6\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\u662fAS\u5185\u8def\u7531\u5668\u90fd\u8fd0\u884cBGP\uff0c\u5e76\u5b9e\u73b0IBGP\u5168\u4e92\u8054\uff0c\u90a3\u4e48\u8be5AS\u5185\u7684\u8def\u7531\u5668\u5c31\u90fd\u80fd\u83b7\u5f97BGP\u8def\u7531\uff0c\u5982\u6b64\u5373\u53ef\u89e3\u51b3\u8def\u7531\u9ed1\u6d1e\u95ee\u9898\u3002\u4f46\u662f\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e2a\u7f3a\u9677\uff0c\u5373\u5982\u679c\u8bbe\u5907\u6570\u91cf\u592a\u591a\uff0c\u7ba1\u7406\u8fd9\u4e9bIBGP\u7684\u90bb\u63a5\u5173\u7cfb\u5c06\u4f1a\u662f\u4e2a\u6311\u6218\uff0c\u5e76\u4e14\u8bbe\u5907\u7684\u8d1f\u62c5\u4e5f\u8f83\u5927\u3002\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528BGP\u8054\u90a6\u6216\u8005\u8def\u7531\u53cd\u5c04\u5668\u6280\u672f\u3002 \u7efc\u4e0a\u6240\u8ff0\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u624b\u6bb5\u89e3\u51b3\u8def\u7531\u9ed1\u6d1e\u95ee\u9898\uff0c\u56e0\u6b64BGP\u540c\u6b65\u89c4\u5219\u4e5f\u5c31\u4e0d\u518d\u6709\u5fc5\u8981\u4e86\u3002\u5b9e\u9645\u4e0a\u8fd9\u662f\u4e00\u4e2a\u5f88\u8001\u65e7\u7684\u7279\u6027\uff0c\u534e\u4e3a\u8def\u7531\u5668\u7f3a\u7701\u65f6\u5173\u95ed\u4e86BGP\u540c\u6b65\u89c4\u5219\u3002\u56e0\u6b64\u5f53BGP\u8def\u7531\u5668\u4eceIBGP\u90bb\u5c45\u5b66\u4e60\u5230\u4e00\u6761\u8def\u7531\u65f6\uff0c\u8be5\u8def\u7531\u5668\u65e0\u9700\u518d\u4eceIGP\u518d\u6b21\u5b66\u4e60\u5230\u76f8\u540c\u8def\u7531\uff0c\u53ef\u4ee5\u76f4\u63a5\u5c06\u8be5BGP\u8def\u7531\u901a\u544a\u7ed9EBGP\u90bb\u5c45\u3002 BGP\u8def\u7531\u901a\u544a\u89c4\u5219\u6982\u8ff0 \u00b6 BGP\u8def\u7531\u5668\u4f1a\u5c06\u5176\u53d1\u73b0\u7684BGP\u8def\u7531\u5b58\u50a8\u5728BGP\u8def\u7531\u8868\u4e2d\u3002\u5f53\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u5730\u5b58\u5728\u591a\u6761BGP\u8def\u5f84\u65f6\uff0c \u8def\u7531\u5668\u4f1a\u5c06\u8fd9\u4e9b\u8def\u5f84\uff08\u8def\u7531\uff09\u90fd\u5b58\u50a8\u5728BGP\u8def\u7531\u8868\u4e2d\uff0c\u4f46\u662f\uff0c\u5230\u8fbe\u6bcf\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\uff0c\u8def\u7531\u5668\u53ea\u4f1a\u9009\u53d6\u6700 \u4f18\uff08Best\uff09\u7684\u8def\u7531\u6765\u4f7f\u7528\uff0c\u5e76\u5c06\u8be5BGP\u8def\u7531\u52a0\u8f7d\u5230\u5168\u5c40\u8def\u7531\u8868\u4e2d\uff08\u5728\u6ca1\u6709\u6fc0\u6d3b\u8def\u7531\u8d1f\u8f7d\u5206\u62c5\u7684\u60c5\u51b5\u4e0b\uff09\u3002 BGP\u8def\u7531\u5668\u53ea\u628a\u81ea\u5df1\u4f7f\u7528\u7684\u3001\u6700\u4f18\u7684\u8def\u7531\u901a\u544a\u7ed9\u5176\u4ed6\u90bb\u5c45\u3002 BGP\u8def\u7531\u5668\u4f1a\u5c06\u5176\u4eceEBGP\u90bb\u5c45\u5b66\u4e60\u5230\u7684\u8def\u7531\u901a\u544a\u7ed9\u6240\u6709BGP\u90bb\u5c45\uff08\u5305\u62ecEBGP\u548cIBGP\u90bb\u5c45\uff09\u3002 BGP\u8def\u7531\u5668\u4e0d\u4f1a\u5c06\u5176\u4eceIBGP\u90bb\u5c45\u5b66\u4e60\u5230\u7684\u8def\u7531\u901a\u544a\u7ed9\u5b83\u7684IBGP\u90bb\u5c45\uff08IBGP\u6c34\u5e73\u5206\u5272\uff1b\u5b58\u5728\u8def\u7531\u53cd\u5c04\u5668\u7684\u60c5\u51b5\u9664\u5916\uff09\u3002 5.3.2 BGP \u5165\u95e8\u5b9e\u9a8c 5.3.2.1 \u57fa\u7840\u914d\u7f6e \u00b6 R1\u3001R2\u3001R3\u5c5e\u4e8eAS 123\uff1bR4\u5c5e\u4e8eAS 400\uff1b R1\u3001R2\u3001R3\u8fd0\u884cOSPF\uff0c\u8fd0\u884cOSPF\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u6253\u901aAS 123\u5185\u7684\u8def\u7531\uff1b R3-R4\u4e4b\u95f4\u5efa\u7acbEBGP\u90bb\u5c45\u5173\u7cfb\uff0cR2\u4e0d\u8fd0\u884cBGP\uff1b R1-R3\u4e4b\u95f4\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\uff1b \u5728R4\u4e0a\uff0c\u5c06\u8def\u75314.4.4.0/24\u53d1\u5e03\u5230BGP\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\uff09\uff1a R2\u7684\u914d\u7f6e\u6bd4\u8f83\u7b80\u5355\uff0c\u5c31\u662f\u8fd0\u884cOSPF\u800c\u5df2\uff0c\u8fd9\u90e8\u5206\u914d\u7f6e\u4e0d\u518d\u8d58\u8ff0\u3002 R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R4\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5728R3\u4e0a\u67e5\u770bBGP\u8def\u7531\u8868\uff1a [R3] display bgp routing-table BGP Local router ID is 10.1.23.3 Status codes: * - valid, > - best, d - damped, h - history, i - internal, s - suppressed, S - Stale Origin : i - IGP, e - EGP, ? - incomplete Total Number of Routes: 1 *> Network 4.4.4.0/24 NextHop 10.1.34.4 MED 0 LocPrf PrefVal 0 Path/Ogn 400 i \u6211\u4eec\u770b\u5230R3\u5df2\u7ecf\u5b66\u4e60\u5230\u4e86R4\u901a\u544a\u8fc7\u6765\u7684BGP\u8def\u75314.4.4.0/24\u3002\u5e76\u4e14\u8be5\u6761BGP\u8def\u7531\u7684NextHop\u5c5e\u6027\u503c\u4e3a 10.1.34.4\uff0c\u8fd9\u4e2a\u4e0b\u4e00\u8df3\u5730\u5740\u662f\u8def\u7531\u53ef\u8fbe\u7684\u3002\u8be5\u6761\u8def\u7531\u5728R3\u7684BGP\u8def\u7531\u8868\u91cc\u6709\u201c* >\u201d \u6807\u8bb0\uff0c\u5176\u4e2d\u201c*\u201d\u8868\u793a\u8fd9\u6761\u8def\u7531\u662f\u53ef\u7528\u7684\uff08valid\uff09\uff0c\u53ea\u6709\u5f53BGP\u8def\u7531\u7684NextHop\u4e3a\u8def\u7531\u53ef\u8fbe\u65f6\uff0c\u8be5BGP\u8def\u7531\u624d\u4f1a\u88ab\u89c6\u4e3a\u53ef\u7528\uff1b\u800c \u201c>\u201d\u5219\u8868\u793a\u8fd9\u6761\u8def\u7531\u662f\u88ab\u4f18\u9009\u7684\u8def\u7531\uff0c\u6216\u8005\u8bf4\u662f\u5230\u8fbe\u8be5\u76ee\u7684\u7f51\u7edc\u7684\u6700\u4f18\u8def\u7531\u3002 BGP\u8def\u7531\u7684NextHop\u5c5e\u6027\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u5c5e\u6027\uff0c\u5b83\u662f\u6240\u6709BGP\u8def\u7531\u90fd\u4f1a\u643a\u5e26\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u5b83\u6307\u793a\u4e86\u5230\u8fbe\u76ee\u7684\u7f51\u7edc\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u3002 \u5728R3\u4e0a\u67e5\u770b\u8def\u7531\u8868\uff1a R3\u5df2\u7ecf\u5c06\u5230\u8fbe4.4.4.0/24\u7684BGP\u8def\u7531\u52a0\u8f7d\u5230\u4e86\u5168\u5c40\u8def\u7531\u8868\u4e2d\u3002 \u5bf9\u4e8eR3\u800c\u8a00\uff0c\u5230\u8fbe4.4.4.0/24\u7684\u8def\u7531\u5df2\u7ecf\u88ab\u4f18\u9009\uff0c\u63a5\u4e0b\u6765\uff0c\u5b83\u4f1a\u5c06\u8be5\u8def\u7531\u901a\u544a\u7ed9IBGP\u90bb\u5c45R1\u3002\u5728R1\u4e0a\u67e5\u770bBGP\u8def\u7531\u8868\uff1a \u6211\u4eec\u770b\u5230\uff0cR1\u7684BGP\u8def\u7531\u8868\u4e2d\u5df2\u7ecf\u51fa\u73b0\u4e864.4.4.0/24\u8def\u7531\uff0c\u800c\u8fd9\u6761\u8def\u7531\u7684NextHop\u5c5e\u6027\u503c\u662f10.1.34.4\uff0c\u4f46\u662f R1\u5728\u672c\u5730\u8def\u7531\u8868\u4e2d\u6ca1\u6709\u5230\u8fbe10.1.34.4\u7684\u8def\u7531\uff0c\u56e0\u6b6410.1.34.4\u4e0d\u53ef\u8fbe\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u8be5BGP\u8def\u7531\u4e5f\u5c31\u4e0d\u53ef\u7528\u4e86 \uff08\u5728BGP\u8def\u7531\u8868\u4e2d\u6ca1\u6709*\u53f7\u6807\u8bb0\uff09\uff0c\u65e2\u7136\u4e0d\u53ef\u7528\uff0c\u81ea\u7136\u5c31\u4e0d\u80fd\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\u4e2d\u4f7f\u7528\u3002 \u90a3\u4e48\u600e\u4e48\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\uff0c\u4e3aR1\u914d\u7f6e\u4e00\u6761\u9759\u6001\u8def\u7531\uff1a ip route-static 10.1.34.0 24 10.1.23.3 \uff0c\u8fd9\u6837\u4e00\u6765R1\u7684\u8def\u7531\u8868\u91cc\u5c31\u6709\u4e86\u5230\u8fbe10.1.34.4\u7684\u8def\u7531\uff0c\u90a3\u4e48BGP\u8def\u75314.4.4.0/24\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u5c31\u53ef\u8fbe\u4e86\uff0c\u5bf9\u5e94\u7684BGP\u8def\u7531\u81ea\u7136\u4e5f\u5c31\u53ef\u7528\u4e86\u3002\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u592a\u201c\u7b28\u62d9\u201d\u3002\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\uff0c\u5728R3\u7684OSPF\u8fdb\u7a0b\u4e2d\u5c0610.1.34.0/24\u7f51\u6bb5\u4e5f\u6ce8\u5165\u8fdb\u53bb\uff0c\u4f7f\u5f97R1\u80fd\u591f\u901a\u8fc7OSPF\u5b66\u4e60\u523010.1.34.0/24\u8def\u7531\uff0c\u8fd9\u79cd\u65b9\u6cd5\u4e5f\u662f\u53ef\u884c\u7684\u3002\u4f46\u662f\u7531\u4e8eR3-R4\u4e4b\u95f4\u7684\u4e92\u8054\u94fe\u8def\u88ab\u89c6\u4e3aAS\u5916\u90e8\u94fe\u8def\uff0c\u56e0\u6b6410.1.34.0/24\u4f5c\u4e3a\u5916\u90e8\u7f51\u6bb5\u5f80\u5f80\u4e0d\u4f1a\u88ab\u5ba3\u544a\u8fdbAS\u5185\u7684IGP\u3002\u90a3\u4e48\u8fd8\u6709\u4ec0\u4e48\u5176\u4ed6\u529e\u6cd5\u80fd\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u4e48\uff1f \u4fee\u6539\u4e0b\u4e00\u8df3\u4e3a\u81ea\u8eab \u00b6 BGP\u8def\u7531\u5668\u5728\u5411EBGP\u5bf9\u7b49\u4f53\u53d1\u5e03\u67d0\u6761\u8def\u7531\u65f6\uff0c\u4f1a\u628a\u8be5\u8def\u7531\u4fe1\u606f\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u672c\u5730\u4e0e\u5bf9\u7aef\u5efa\u7acb BGP\u90bb\u5c45\u5173\u7cfb\u7684\u63a5\u53e3\u5730\u5740\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0cR4\u5c064.4.4.0/24\u901a\u544a\u7ed9R3\u65f6\uff0c\u4e0b\u4e00\u8df3\u4e3a10.1.34.4\uff0c\u4e5f\u5c31\u662fR4 \u7684GE0/0/0\u63a5\u53e3\u5730\u5740\u3002 BGP\u8def\u7531\u5668\u5c06\u672c\u5730\u59cb\u53d1\u8def\u7531\u53d1\u5e03\u7ed9IBGP\u5bf9\u7b49\u4f53\u65f6\uff0c\u4f1a\u628a\u8be5\u8def\u7531\u4fe1\u606f\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u672c\u5730\u4e0e\u5bf9\u7aef\u5efa\u7acbBGP\u90bb\u5c45\u5173\u7cfb\u7684\u63a5\u53e3\u5730\u5740\u3002 BGP\u8def\u7531\u5668\u5728\u5411IBGP\u5bf9\u7b49\u4f53\u53d1\u5e03\u4eceEBGP\u5bf9\u7b49\u4f53\u5b66\u6765\u7684\u8def\u7531\u65f6\uff0c\u5e76\u4e0d\u6539\u53d8\u8be5\u8def\u7531\u4fe1\u606f\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u3002\u4f8b\u5982\u4e0b\u56fe\u6240\u793a\uff0cR3\u6536\u5230R4\u901a\u544a\u7684EBGP\u8def\u7531\uff0c\u8be5\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u503c\u4e3a10.1.34.4\uff0c\u5b83\u5c06\u8be5\u6761\u8def\u7531\u901a\u544a\u7ed9IBGP\u5bf9\u7b49\u4f53R1\u7684\u65f6\u5019\uff0c\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u503c\u4e0d\u4f1a\u53d1\u751f\u6539\u53d8\uff0c\u4ecd\u7136\u4e3a10.1.34.4\u3002 \u8fd9\u5c31\u9020\u6210\u4e86\u6211\u4eec\u4e0a\u9762\u6240\u8ff0\u7684\u95ee\u9898\uff0c\u7531\u4e8eR1\u6ca1\u6709\u5230\u8fbe10.1.34.0/24\u7684\u8def\u7531\uff0c\u56e0\u6b64\u4e0b\u4e00\u8df3\u5730\u574010.1.34.4\u4e0d\u53ef\u8fbe\uff0c \u4ece\u800c\u5bfc\u81f4BGP\u8def\u75314.4.4.0/24\u4e0d\u53ef\u7528\u3002 \u8fd8\u6709\u4e00\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a\u5728R3\u4e0a\u4f7f\u7528**next-hop-local**\u547d\u4ee4\uff0c\u53ef\u4fee\u6539BGP\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u503c\u4e3a\u81ea\u8eab\u3002\u5728\u4e0b\u56fe\u4e2d\uff0c\u6211\u4eec\u5728R3\u4e0a\u589e\u52a0\u4e86**peer 10.1.12.1 next-hop-local**\u547d\u4ee4\uff0c\u90a3\u4e48\u8fd9\u6837\u4e00\u6765\uff0c\u5f53R3\u518d\u5c06EBGP\u8def\u7531\u901a\u544a\u7ed9R1\u7684\u65f6\u5019\uff0c\u4f1a\u5c06\u8fd9\u4e9b\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u503c\u4fee\u6539\u4e3a\u81ea\u5df1\u7684\u66f4\u65b0\u6e90\u5730\u5740\uff0810.1.23.3\uff09\uff0c\u800cR1\u5df2\u7ecf\u901a\u8fc7 OSPF\u83b7\u77e5\u5230\u8fbe10.1.23.0/24\u7684\u8def\u7531\uff0c\u56e0\u6b6410.1.23.3\u662f\u53ef\u8fbe\u7684\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u5728R1\u4e0a\u67e5\u770bBGP\u8def\u7531\u8868\uff1a \u6307\u5b9a\u66f4\u65b0\u6e90IP\u5730\u5740 \u00b6 \u53ef\u4ee5\u624b\u5de5\u6307\u5b9a\u7528\u4e8e\u5efa\u7acbBGP\u8fde\u63a5\u7684\u6e90\u63a5\u53e3\u53ca\u6e90IP\u5730\u5740\u3002\u547d\u4ee4\u5982\u4e0b\uff1a [Router-bgp] peer x.x.x.x connect-interface intf [ ipv4-src-address ] \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cBGP\u4f7f\u7528\u62a5\u6587\u7684\u51fa\u63a5\u53e3\u4f5c\u4e3aBGP\u62a5\u6587\u7684\u6e90\u63a5\u53e3\u3002\u5f53\u7528\u6237\u5b8c\u6210**peer**\u547d\u4ee4\u7684\u914d\u7f6e\u540e\uff0c\u8bbe\u5907\u4f1a\u5728\u81ea \u5df1\u7684\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u5230\u8fbe\u8be5\u5bf9\u7b49\u4f53\u5730\u5740\u7684\u8def\u7531\uff0c\u5e76\u4ece\u8be5\u8def\u7531\u5f97\u5230\u51fa\u63a5\u53e3\u4fe1\u606f\u3002\u5982\u679c**peer**\u547d\u4ee4\u4e2d\u6ca1\u6709\u6307\u5b9a\u63a5\u53e3 \uff08 connect-interface \uff09\u548cIP\u5730\u5740\uff08 ipv4-src-address \uff09\uff0c\u90a3\u4e48\u8bbe\u5907\u5c06\u4f1a\u4f7f\u7528\u524d\u8ff0\u51fa\u63a5\u53e3\u548c\u8be5\u63a5\u53e3\u7684IP\u5730\u5740\u4f5c\u4e3aBGP\u62a5\u6587\u7684\u6e90\u63a5\u53e3\u548c\u6e90\u5730\u5740\u3002 \u4e3a\u4e86\u4f7f\u7269\u7406\u63a5\u53e3\u5728\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u8bbe\u5907\u4ecd\u80fd\u53d1\u9001BGP\u62a5\u6587\uff0c\u53ef\u5c06\u53d1\u9001BGP\u62a5\u6587\u7684\u6e90\u63a5\u53e3\u914d\u7f6e\u6210Loopback\u63a5\u53e3\u3002\u5728\u4f7f\u7528Loopback\u63a5\u53e3\u4f5c\u4e3aBGP\u62a5\u6587\u7684\u6e90\u63a5\u53e3\u65f6\uff0c\u5fc5\u987b\u786e\u8ba4BGP\u5bf9\u7b49\u4f53\u7684Loopback\u63a5\u53e3\u7684\u5730\u5740\u662f\u53ef\u8fbe\u7684\u3002\u7531\u4e8e\u4e00\u4e2aAS\u5185\u5f80\u5f80\u4f1a\u8fd0\u884cIGP\u534f\u8bae\uff0c\u56e0\u6b64AS\u5185\u7684\u8bbe\u5907\u80fd\u591f\u901a\u8fc7\u8be5IGP\u534f\u8bae\u83b7\u77e5\u5230\u8fbe\u5176\u4ed6\u8bbe\u5907\u7684Loopback\u63a5\u53e3\u7684\u8def\u7531\u3002\u5728AS\u5185\u90e8\uff0cIBGP\u90bb\u5c45\u5173\u7cfb\u901a\u5e38\u57fa\u4e8eLoopback\u63a5\u53e3\u5efa\u7acb\u3002 EBGP\u90bb\u5c45\u4e4b\u95f4\u901a\u5e38\u4f7f\u7528\u76f4\u8fde\u63a5\u53e3\u7684IP\u5730\u5740\u4f5c\u4e3aBGP\u62a5\u6587\u6e90\u5730\u5740\uff0c\u5982\u82e5\u4f7f\u7528\u73af\u56de\u63a5\u53e3\u5efa\u7acbEBGP\u90bb\u5c45\u5173\u7cfb\uff0c \u8981\u914d\u7f6e**peer ebgp-max-hop**\u547d\u4ee4\uff0c\u5141\u8bb8EBGP\u901a\u8fc7\u975e\u76f4\u8fde\u65b9\u5f0f\u5efa\u7acb\u90bb\u5c45\u5173\u7cfb\u3002 \u540c\u6837\u662f\u4e0a\u9762\u7684\u73af\u5883\uff0c\u6211\u4eec\u7a0d\u4f5c\u53d8\u66f4\uff0c\u5728R1\u53caR3\u4e0a\u521b\u5efaloopback0\uff0c\u5730\u5740\u5206\u522b\u4e3a1.1.1.1/32\u53ca3.3.3.3/32\uff0c\u7136\u540e\u8bbe\u5907\u5404\u81ea\u5c06loopback0\u5ba3\u544a\u8fdbOSPF\uff0c\u4f7f\u5f97\u5f7c\u6b64\u90fd\u80fd\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u5bf9\u65b9\u7684Loopback0\u8def\u7531\u3002 \u6211\u4eec\u4fee\u6539BGP\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97R1-R3\u4e4b\u95f4\u7684IBGP\u90bb\u5c45\u5173\u7cfb\u57fa\u4e8eLoopback0\u6765\u5efa\u7acb\u3002 R1\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u5173\u952e\u6027\u914d\u7f6e\u5982\u4e0b\uff1a \u6ce8\u610f\uff0c\u52a1\u5fc5\u8981\u5c06R1\u53caR3\u7684Loopback0\u63a5\u53e3\u6fc0\u6d3bOSPF\u3002 \u5b8c\u6210\u8fd9\u4e2a\u5b9e\u9a8c \u00b6 \u7ecf\u8fc7\u524d\u9762\u7684\u8bb2\u89e3\uff0c\u6211\u4eec\u7684\u73af\u5883\u73b0\u5728\u662f\u8fd9\u6837\u7684\uff1aR1-R3\u4e4b\u95f4\u5efa\u7acb\u4e86\u57fa\u4e8eLoopback\u63a5\u53e3\u7684IBGP\u90bb\u5c45\u5173\u7cfb\uff1bR3\u5bf9 R1\u914d\u7f6e\u4e86**next-hop-local**\uff1bR3\u4e0eR4\u4e4b\u95f4\u4ecd\u7136\u7ef4\u6301\u57fa\u4e8e\u76f4\u8fde\u63a5\u53e3\u7684EBGP\u90bb\u5c45\u5173\u7cfb\uff1bR4\u5728BGP\u4e2d\u53d1\u5e03\u8def\u7531 4.4.4.0/24\u3002 \u73b0\u5728R1\u662f\u80fd\u591f\u5b66\u4e60\u5230BGP\u8def\u75314.4.4.0/24\u7684\uff0c\u5e76\u4e14\u8be5\u8def\u7531\u4e5f\u662f\u88ab\u4f18\u9009\u7684\uff0c\u6b64\u65f6\u8fd9\u6761\u8def\u7531\u4f1a\u88abR1\u88c5\u8f7d\u8fdb\u5168\u5c40\u8def\u7531\u8868\u4f7f\u7528\uff0c\u4f46\u662f\uff0c\u8fd9\u662f\u4e0d\u662f\u610f\u5473\u7740R1\u5c31\u80fd\u591fping\u901a4.4.4.4\u4e86\u5462\uff1f\u7ecf\u8fc7\u6d4b\u8bd5\u4f60\u53ef\u80fd\u4f1a\u53d1\u73b0\uff1a\u65e0\u6cd5ping\u901a\uff1f \u56e0\u4e3a\u6570\u636e\u5305\u5728R2\u8fd9\u91cc\u5c31\u88ab\u4e22\u5f03\u4e86\uff0cR2\u5e76\u6ca1\u6709\u8fd0\u884cBGP\uff0c\u56e0\u6b64\u5b83\u65e0\u6cd5\u5b66\u4e60\u5230BGP\u8def\u75314.4.4.0/24\u3002 \u600e\u4e48\u624d\u80fd\u8ba9R1 ping\u901a4.4.4.4\u5462\uff1f\u65b9\u6cd5\u4e4b\u4e00\u662f\u5728R3\u4e0a\u5c06BGP\u8def\u7531\u91cd\u53d1\u5e03\u8fdbOSPF\uff0c\u4f7f\u5f97R2\u80fd\u591f\u901a\u8fc7OSPF\u5b66\u4e60\u5230BGP\u8def\u75314.4.4.0/24\uff0c\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u5b58\u5728\u4e00\u5b9a\u7684\u98ce\u9669\uff0c\u56e0\u4e3a\u6211\u4eec\u77e5\u9053BGP\u627f\u8f7d\u7684\u524d\u7f00\u6570\u91cf\u5f80\u5f80\u662f\u975e\u5e38\u5e9e\u5927\u7684\uff1b\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\uff0c\u8ba9R2\u4e5f\u8fd0\u884cBGP\uff0c\u5e76\u4e0eR1\u3001R3\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u8fd9\u6837\u4e00\u6765\u95ee\u9898\u5c31\u89e3\u51b3\u4e86\u3002\u90a3\u4e48 BGP\u90bb\u5c45\u5173\u7cfb\u5c31\u53d8\u6210\u4e86\u5982\u4e0b\u56fe\u6240\u793a\u3002\u5177\u4f53\u914d\u7f6e\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\u3002 EBGP\u591a\u8df3 \u00b6 \u901a\u5e38\u60c5\u51b5\u4e0b\uff0cEBGP\u90bb\u5c45\u4e4b\u95f4\u5fc5\u987b\u5177\u6709\u76f4\u8fde\u7684\u7269\u7406\u94fe\u8def\uff0cEBGP\u90bb\u5c45\u5173\u7cfb\u4e5f\u5c06\u57fa\u4e8e\u76f4\u8fde\u63a5\u53e3\u6765\u5efa\u7acb\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\u8fd9\u4e00\u8981\u6c42\uff0c\u5219\u5fc5\u987b\u4f7f\u7528**peer ebgp-max-hop**\u547d\u4ee4\u5141\u8bb8\u5b83\u4eec\u4e4b\u95f4\u7ecf\u8fc7\u591a\u8df3\u5efa\u7acbTCP\u8fde\u63a5\u3002 **peer ebgp-max-hop**\u547d\u4ee4\u7528\u6765\u914d\u7f6e\u5141\u8bb8BGP\u540c\u975e\u76f4\u8fde\u7f51\u7edc\u4e0a\u7684\u5bf9\u7b49\u4f53\u5efa\u7acbEBGP\u8fde\u63a5\uff0c\u5e76\u540c\u65f6\u53ef\u4ee5\u6307\u5b9a\u5141\u8bb8\u7684\u6700\u5927\u8df3\u6570\u3002\u547d\u4ee4\u683c\u5f0f\u5982\u4e0b\uff1a [Router-bgp] peer ipv4-address ebgp-max-hop [ hop-count ]\uff0c \u5982\u4e0a\u56fe\u6240\u793a\uff0cR1\u53caR2\u8981\u57fa\u4e8eLoopback\u53e3\u5efa\u7acbEBGP\u90bb\u5c45\u5173\u7cfb\u3002\u8fd9\u79cd\u60c5\u51b5\u4e5f\u5c5e\u4e8eEBGP\u90bb\u5c45\u4e4b\u95f4\u4e0d\u57fa\u4e8e\u76f4\u8fde\u63a5\u53e3\u5efa\u7acb\u90bb\u5c45\u5173\u7cfb\u7684\u573a\u666f\uff0c\u5fc5\u987b\u914d\u7f6e**peer ebgp-max-hop**\u547d\u4ee4\u3002\u56fe\u4e2dR1\u4e0eR2\u4e4b\u95f4\u7684\u4e24\u6761\u7269\u7406\u94fe\u8def\u662f\u4e3a\u4e86\u5197\u4f59\u6027\u8003\u8651\u3002 R1\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a \u5b66\u4f1a\u770b\u4e09\u5f20\u8868 \u00b6 BGP\u90bb\u5c45\u8868 \u00b6 BGP\u8868 \u00b6 \u67e5\u770bBGP\u6761\u76ee\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a \u8def\u7531\u8868\uff0cdisplay ip routing-table \u00b6 BGP \u8def\u5f84\u5c5e\u6027 BGP\u62e5\u6709\u4e30\u5bcc\u7684\u8def\u5f84\u5c5e\u6027\u3002BGP\u7684\u8fd9\u4e9b\u8def\u5f84\u5c5e\u6027\uff0c\u5c06\u5f71\u54cdBGP\u8def\u7531\u7684\u4f18\u9009\uff0c\u540c\u65f6\u4e5f\u4f7f\u5f97BGP\u7684\u8def\u7531\u7b56\u7565\u80fd\u529b\u5f02\u5e38\u5f3a\u5927\u3002 \u8def\u5f84\u5c5e\u6027\u7684\u5206\u7c7b\uff1a \u516c\u8ba4\u5c5e\u6027 \uff08Well-known\uff09 \u516c\u8ba4\u5fc5\u9075 \uff08Well-known mandatory\uff09 \u6240\u6709BGP\u8def\u7531\u5668\u5fc5\u987b\u90fd\u80fd\u8bc6\u522b\uff0c\u4e14\u5fc5\u987b\u5b58 \u5728\u4e8eUpdate\u62a5\u6587\u4e2d\u3002 \u5982\u679c\u7f3a\u5c11\u8fd9\u79cd\u5c5e\u6027\uff0c\u8def\u7531\u4fe1\u606f\u5c31\u4f1a\u51fa\u9519 Origin AS-Path Next hop \u516c\u8ba4\u81ea\u51b3 \uff08Well-known discretionary\uff09 \u6240\u6709BGP\u8def\u7531\u5668\u5fc5\u987b\u90fd\u80fd\u8bc6\u522b\uff0cUpdate \u62a5\u6587\u4e2d\u53ef\u5305\u542b\uff0c\u4e5f\u53ef\u4e0d\u5305\u542b Local-Preference ATOMIC_Aggregate \u53ef\u9009\u5c5e\u6027 \uff08Optional\uff09 \u53ef\u9009\u4f20\u9012 \uff08Optional transitive\uff09 \u53ef\u4ee5\u4e0d\u652f\u6301\u8be5\u5c5e\u6027\uff0c\u4f46\u5373\u4f7f\u4e0d\u652f\u6301\uff0c\u4e5f\u5e94\u5f53\u63a5\u53d7\u5305\u542b\u8be5\u5c5e\u6027\u7684\u8def\u7531\u5e76\u4f20\u9012\u7ed9\u5176\u4ed6\u90bb\u5c45 Community Aggregator \u53ef\u9009\u975e\u4f20\u9012 \uff08Optional non-transitive\uff09 \u53ef\u4ee5\u4e0d\u652f\u6301\u8be5\u5c5e\u6027\uff0c\u4e0d\u8bc6\u522b\u7684BGP\u8fdb\u7a0b\u5ffd \u7565\u5305\u542b\u8fd9\u4e2a\u5c5e\u6027\u7684\u66f4\u65b0\u62a5\u6587\uff0c\u5e76\u4e14\u4e0d\u4f20\u9012\u7ed9\u5176\u4ed6BGP\u90bb\u5c45 MED Originator_ID Cluster_list Weight Preferred-Value \u00b6 \u9996\u9009\u503c\uff08Preferred-Value\uff09\u662f\u534e\u4e3a\u8bbe\u5907\u7684\u7279\u6709\u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u4ec5\u5728\u672c\u5730\u6709\u6548\u3002\u5f53BGP\u8def\u7531\u8868\u4e2d\u5b58\u5728\u5230\u76f8\u540c\u76ee\u7684\u7f51\u7edc\u7684\u8def\u7531\u65f6\uff0c\u5c06\u4f18\u5148\u9009\u62e9\u534f\u8bae\u9996\u9009\u503c\u6700\u5927\u7684\u8def\u7531\u3002 Preferred-Value\u7684\u53d6\u503c\u8303\u56f4\uff1a0~65535\u3002\u8def\u7531\u5668\u672c\u5730\u59cb\u53d1\u7684BGP\u8def\u7531\u9ed8\u8ba4Preferred-Value\u4e3a0\uff0c\u4ece\u5176\u4ed6BGP \u90bb\u5c45\u5b66\u4e60\u5230\u7684\u8def\u7531\uff08\u8be5\u8def\u7531\u662f\u4e0d\u4f1a\u643a\u5e26Preferred-Value\u7684\uff0cPreferred-Value\u53ea\u5728\u672c\u5730\u6709\u6548\uff0c\u4e0d\u4f1a\u88ab\u901a\u544a\u7ed9\u4efb\u4f55\u90bb\u5c45\uff09\uff0c\u52a0\u8f7d\u5230\u672c\u5730\u540e\u9ed8\u8ba4Preferred-Value\u4e5f\u4e3a0\u3002 Preferred-Value\u662f\u4e00\u4e2a\u672c\u5730\u6709\u6548\u7684\u534e\u4e3a\u79c1\u6709\u5c5e\u6027\u3002\u8fd9\u4e2a\u5c5e\u6027\u7684\u542b\u4e49\u6709\u70b9\u50cf\uff1a\u201c\u4e00\u6761\u8def\u7531\u5728\u6211\u5fc3\u76ee\u4e2d\u7684\u6743\u91cd\u201d\u3002\u65e2\u7136\u662f\u5728\u201c\u6211\u5fc3\u76ee\u4e2d\u201d\u7684\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5c5e\u6027\u503c\u81ea\u7136\u662f\u4e0d\u80fd\u4f20\u9012\u7ed9\u522b\u4eba\u7684\uff0c\u53ea\u6709\u81ea\u5df1\u77e5\u9053\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cB\u8def\u7531\u5668\u5c06\u4f1a\u540c\u65f6\u4eceA\u548cC\u5b66\u4e60\u5230\u4e24\u6761BGP\u8def\u7531\uff1a10.0.1.0/24\u53ca10.0.2.0/24\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4eceA\u53ca C\u5b66\u4e60\u5230\u7684\u8fd9\u4e24\u6761\u8def\u7531Preferred-Value\u90fd\u662f0\u3002\u6211\u4eec\u53ef\u4ee5\u5728B\u4e0a\u90e8\u7f72\u7b56\u7565\uff0c\u5c06A\u53d1\u6765\u768410.0.1.0/24\u8def\u7531\u7684 Preferred-Value\u8c03\u8282\u4e3a100\uff0c\u5c06C\u53d1\u6765\u768410.0.2.0/24\u8def\u7531\u7684Preferred-Value\u8c03\u8282\u4e3a100\uff0c\u8fd9\u6837\u4e00\u6765\u5c31\u80fd\u591f\u5b9e\u73b0B\u4e0a\u53bb\u5f8010.0.1.0/24\u7684\u6d41\u91cf\u8d70A\uff0c\u53bb\u5f8010.0.2.0/24\u7684\u6d41\u91cf\u8d70C\u7684\u6548\u679c\u3002\u6ce8\u610f\uff0c\u5728B\u4e0a\u90e8\u7f72\u7684\u8fd9\u4e2a\u7b56\u7565\u53ea\u4f1a\u5f71\u54cdB\u81ea\u8eab\u3002 [B-bgp] display bgp routing-table Local-Preference \u00b6 LP\uff08Local-Preference\uff09\u5c5e\u6027\u662f\u4e00\u4e2a\u516c\u8ba4\u81ea\u51b3\u5c5e\u6027\uff0c\u5c5e\u6027\u503c\u8d8a\u5927\uff0c\u5219\u8def\u7531\u8d8a\u4f18\u3002Local-Preference\u5c31\u662f\u672c\u5730\u4f18\u5148\u7ea7\uff0c\u672c\u5730\u7684\u610f\u601d\u5c31\u662fAS\u5185\u90e8\uff0cLP\u53ea\u80fd\u5728AS\u5185\u90e8\u3001\u5728IBGP\u90bb\u5c45\u4e4b\u95f4\u4f20\u9012\uff0c\u800c\u4e0d\u4f1a\u4f20\u9012\u7ed9EBGP\u90bb\u5c45\u3002 \u4e0a\u56fe\u4e2d\uff0cABC\u540c\u5c5e\u4e00\u4e2aAS\uff0c\u5047\u8bbeA\u53caC\u90fd\u6709\u5230\u8fbe10.0.1.0/24\u7684\u8def\u7531\uff0c\u5e76\u4e14\u90fd\u5c06\u8def\u7531\u66f4\u65b0\u7ed9\u4e86B\uff0c\u90a3\u4e48\u5982\u679c\u6211\u4eec\u5e0c\u671bB\u53bb\u5f8010.0.1.0/24\u7f51\u7edc\u8d70A\uff0c\u5f53A\u6302\u6389\u7684\u65f6\u5019\u81ea\u52a8\u5207\u6362\u5230C\uff0c\u8fd9\u5c31\u53ef\u4ee5\u5728A\u4e0a\u90e8\u7f72\u7b56\u7565\uff0c\u5c06\u4f20\u9012\u7ed9B\u7684 BGP\u8def\u753110.0.1.0/24\u7684LP\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a200\uff0c\u800cC\u4f20\u9012\u7ed9B\u7684\u8def\u7531\u7684LP\u5c5e\u6027\u503c\u4fdd\u6301\u9ed8\u8ba4100\u5373\u53ef\u3002\u8fd9\u6837\u4e00\u6765 B\u5728\u505a\u8def\u7531\u4f18\u9009\u65f6\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u5c31\u4f1a\u4f18\u9009A\u4f20\u9012\u8fc7\u6765\u7684\u8fd9\u676110.0.1.0/24\u8def\u7531\u3002[B-bgp] display bgp routing-table LP\u5c5e\u6027\u53ea\u80fd\u5728IBGP\u90bb\u5c45\u4e4b\u95f4\u4f20\u9012\uff08\u9664\u975e\u505a\u4e86\u7b56\u7565\uff0c\u5426\u5219LP\u503c\u5728AS\u5185\u7684IBGP\u90bb\u5c45\u95f4\u4f20\u9012\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u4e22\u5931\uff09\uff0c\u800c\u4e0d\u80fd\u5728EBGP\u90bb\u5c45\u4e4b\u95f4\u4f20\u9012\u3002\u4f46\u662f\u53ef\u4ee5\u5728AS\u8fb9\u754c\u8def\u7531\u5668\u4e0a\u4f7f\u7528In\u65b9\u5411\u7684\u7b56\u7565\u6765\u4fee\u6539LP\u5c5e\u6027\u503c\u3002 BGP\u8def\u7531\u5668\u5728\u5411\u5176EBGP\u90bb\u5c45\u53d1\u9001\u8def\u7531\u66f4\u65b0\u65f6\uff0c\u6b64\u65f6\u8be5EBGP\u8def\u7531\u4e0d\u80fd\u643a\u5e26LP\u5c5e\u6027\uff0c\u4f46\u662f\u5bf9\u65b9\u6536\u5230\u8be5\u8def\u7531\u540e\uff0c\u4f1a\u5728\u672c\u5730\u4e3a\u8fd9\u6761\u8def\u7531\u8d4b\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff0c\u4e5f\u5c31\u662f100\uff08\u53ef\u901a\u8fc7\u547d\u4ee4\u4fee\u6539\uff09\uff0c\u7136\u540e\u518d\u5c06\u8def\u7531\u4f20\u9012\u7ed9\u81ea\u5df1\u7684IBGP\u90bb\u5c45\u3002 AS_PATH \u00b6 AS_PATH\u5c5e\u6027\u4ecb\u7ecd \u00b6 AS_PATH\u662f\u516c\u8ba4\u5fc5\u9075\u5c5e\u6027\uff0c\u7528\u4e8e\u63cf\u8ff0\u5230\u8fbe\u76ee\u6807\u7f51\u7edc\u6240\u8981\u7ecf\u8fc7\u7684AS\u53f7\u7684\u5e8f\u5217\u3002\u6709\u4e24\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u4f5c\u7528\uff1a \u4e00\u662f\u7528\u4e8e\u5728AS\u4e4b\u95f4\u7684\u8def\u7531\u9632\u73af\uff0c\u5982\u679c\u4e00\u53f0\u8def\u7531\u5668\u6536\u5230\u4e00\u6761BGP\u8def\u7531\uff0c\u8be5\u8def\u7531\u643a\u5e26\u7684AS_PATH\u4e2d\u51fa\u73b0\u4e86\u81ea\u5df1\u6240\u5728AS\u7684AS\u53f7\uff0c\u90a3\u4e48\u5b83\u77e5\u9053\u51fa\u73b0\u4e86\u73af\u8def\uff0c\u56e0\u6b64\u5ffd\u7565\u8be5\u6761\u8def\u7531\u66f4\u65b0\u3002AS_PATH\u7684\u53e6\u4e00\u4e2a\u4f5c\u7528\u662f\u7528\u4e8e\u8def\u7531\u4f18\u9009\uff0c\u6211\u4eec\u77e5\u9053AS_PATH\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5448\u73b0\u51fa\u6765\u5c31\u662f\u4e00\u4e32AS\u53f7\uff0c\u90a3\u4e48\u65e2\u7136\u662f\u5217\u8868\u5b83\u5c31\u6709\u957f\u5ea6\uff0cAS_PATH\u8d8a\u77ed\u5219\u8be5\u8def\u7531\u88ab\u89c6\u4e3a\u8d8a\u4f18\uff0c\u56e0\u4e3a\u8fd9\u6761\u8def\u5f84\u8ddd\u79bb\u76ee\u7684\u5730\u6240\u8981\u7ecf\u8fc7\u7684AS\u8df3\u6570\u66f4\u5c11\u3002 AS_PATH\u7684\u56db\u79cd\u7c7b\u578b \u00b6 AS_SET\uff1a\u4e00\u4e2a\u53bb\u5f80\u7279\u5b9a\u76ee\u7684\u5730\u6240\u7ecf\u8def\u5f84\u4e0a\u7684\u65e0\u5e8fAS\u53f7\u5217\u8868\u3002 AS_SEQENCE\uff1a\u4e00\u4e2a\u6709\u5e8f\u7684AS\u53f7\u5217\u8868\u3002 AS_CONFED_SEQUENCE\uff1a\u8054\u90a6\u5185\u7279\u6709\u7684AS_PATH\u7c7b\u578b\uff0c\u4e00\u4e2a\u53bb\u5f80\u7279\u5b9a\u76ee\u7684\u5730\u6240\u7ecf\u8def\u5f84\u4e0a\u7684\u6709 \u5e8fAS\u53f7\u5217\u8868\uff0c\u5176\u7528\u6cd5\u4e0eAS_SEQUENCE\u4e00\u6837\uff0c\u533a\u522b\u5728\u4e8e\u8be5\u5217\u8868\u4e2d\u7684AS\u53f7\u5c5e\u4e8e\u672c\u5730\u8054\u90a6\u4e2d\u7684AS\u53f7\u3002 AS_CONFED_SET\uff1a\u8054\u90a6\u5185\u7279\u6709\u7684AS_PATH\u7c7b\u578b\uff0c\u4e00\u4e2a\u53bb\u5f80\u7279\u5b9a\u76ee\u7684\u5730\u6240\u7ecf\u8def\u5f84\u4e0a\u7684\u65e0\u5e8fAS\u53f7\u5217\u8868\uff0c\u7528\u65b9\u6cd5\u4e0eAS_SET\u4e00\u6837\uff0c\u533a\u522b\u5728\u4e8e\u5217\u8868\u4e2d\u7684AS\u53f7\u5c5e\u4e8e\u672c\u5730\u8054\u90a6\u4e2d\u7684AS\u53f7\u3002 \u4ee5\u4e0a\u56db\u79cd\u7c7b\u578b\u662f\u901a\u8fc7AS_PATH\u5c5e\u6027\u4e2d\u7684\u7c7b\u578b\u4ee3\u7801\u8fdb\u884c\u533a\u5206\u3002\u5173\u4e8e\u8fd9\u4e24\u4e2a\u8054\u90a6\u7279\u6709\u7684AS_PATH\u7c7b\u578b\uff0c \u8be6\u7ec6\u5185\u5bb9\u8bf7\u89c1\u672c\u6587\u6863\u201c\u8054\u90a6\u201d\u4e00\u5c0f\u8282\u3002 AS_Sequence\u5f88\u597d\u7406\u89e3\uff0c\u4e0a\u56fe\u5728\u4e0d\u505a\u4efb\u4f55\u7b56\u7565\u7684\u60c5\u51b5\u4e0b\uff0c\u4f20\u9012\u5230R4\u7684BGP\u8def\u7531\u643a\u5e26\u7684AS_PATH\u7684\u7c7b\u578b\u5373\u4e3aAS_Sequence\uff0c\u8fd9\u662f\u4e2a\u6709\u5e8f\u7684AS\u53f7\u5217\u8868\uff0c\u5f53R4\u6536\u5230\u8def\u7531\u66f4\u65b0\u7684\u65f6\u5019\uff0cAS_PATH\u4e3a300,100\uff0c R4\u5c31\u77e5\u9053\u8981\u53bb\u76ee\u7684\u5730\uff0c\u9700\u7ecfAS300\u518d\u5230AS100\uff0c\u624d\u53ef\u8fbe\u76ee\u7684\u3002 \u518d\u770b\u4e0a\u9762\u8fd9\u5f20\u56fe\uff0cR1\u901a\u544a\u660e\u7ec6\u8def\u7531\uff1a172.16.1.0/24\u53ca172.16.2.0/24\uff1bR2\u901a\u544a\u660e\u7ec6\u8def\u7531172.16.10.0/24 \u53ca172.16.11.0/24\u3002\u8fd9\u4e9b\u660e\u7ec6\u8def\u7531\u88ab\u901a\u544a\u7ed9\u4e86R3\u3002\u73b0\u5728\u5728R3\u4e0a\u505a\u8def\u7531\u6c47\u603b\uff0c\u8fd9\u6761\u6c47\u603b\u8def\u7531\u7531R3\u4ea7\u751f\u5e76\u4e14\u4f20\u9012\u7ed9\u4e86R4\uff0c\u8fd9\u6761\u6c47\u603b\u8def\u7531\u7684AS_PATH\u4e3a300\uff0c\u4e22\u5931\u4e86\u5176\u4e0b\u7684\u660e\u7ec6\u8def\u7531\u7684AS_PATH\u5c5e\u6027\uff0c\u90a3\u4e48\u5982\u679c R4\u4e0eR1\u6216R2\u4e4b\u95f4\u5982\u679c\u6709EBGP\u7684\u8fde\u63a5\uff0c\u5c31\u6709\u53ef\u80fd\u4ea7\u751f\u8def\u7531\u73af\u8def\uff0cR1\u3001R2\u90fd\u4f1a\u6536\u5230\u8fd9\u6761\u6c47\u603b\u8def\u7531\u5e76\u4e14\u63a5\u53d7\u8def\u7531\u66f4\u65b0\u3002\u8fd9\u662f\u56e0\u4e3a\u8fd9\u6761\u6c47\u603b\u8def\u7531\u5e76\u672a\u643a\u5e26\u4efb\u4f55\u5173\u4e8eAS100\u53caAS200\u7684\u4fe1\u606f\u3002 \u6240\u4ee5\u5176\u5b9e\u8fd8\u662f\u9700\u8981\u5728\u6c47\u603b\u8def\u7531\u4e0a\u4fdd\u7559\u5176\u660e\u7ec6\u8def\u7531\u7684AS_PATH \uff0c \u800c\u81f3\u4e8e\u4fdd\u7559\u4e0b\u6765\u7684\u660e\u7ec6\u8def\u7531\u7684 AS_PATH\u4e2d\u7684AS\u53f7\u662f\u4ec0\u4e48\u987a\u5e8f\u5df2\u7ecf\u4e0d\u91cd\u8981\u4e86\uff0c\u56e0\u4e3a\u51fa\u4e8e\u9632\u73af\u7684\u76ee\u7684\u53ea\u8981AS\u53f7\u5c31\u591f\u4e86\u3002\u4f7f\u7528**aggregate** \u547d\u4ee4\u52a0\u4e0a**as-set**\u5173\u952e\u5b57\uff0c\u53ef\u4ee5\u4f7f\u4ea7\u751f\u7684\u6c47\u603b\u8def\u7531\u7ee7\u627f\u660e\u7ec6\u8def\u7531\u7684\u90e8\u5206\u8def\u5f84\u5c5e\u6027\uff0c\u5176\u4e2d\u5305\u62ecAS_PATH\u5c5e \u6027\u503c\u3002\u6b64\u65f6R3\u4ea7\u751f\u7684\u8fd9\u6761\u6c47\u603b\u8def\u7531\u7684AS_PATH \u5c06\u643a\u5e26\u4e24\u4e2aAS_PATH \u7c7b\u578b\uff08 \u4e24\u6bb5\u4fe1\u606f\uff09 \uff0c\u4e00\u662f AS_Sequence\uff0c\u503c\u4e3a300\uff0c\u53e6\u4e00\u4e2a\u7c7b\u578b\u4e3aAS_Set\uff0c\u5305\u542b{100,200}\u4e24\u4e2aAS\u53f7\uff0c\u5e76\u4e14\u662f\u65e0\u5e8f\u7684\u3002\u4e8e\u662f\u4e4eR4 \u4e0a\u6536\u5230\u7684\u8def\u7531\u6240\u643a\u5e26\u7684AS_PATH\u7efc\u5408\u8d77\u6765\u5c31\u662f300 {100,200}\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e2a\u62ec\u53f7\u91cc\u7684AS\u53f7\uff0c \u5728\u8fdb\u884cAS_PATH\u957f\u5ea6\u8ba1\u7b97\u7684\u65f6\u5019\uff0c\u53ea\u5f53\u4e00\u8df3\u6765\u7b97\uff0c\u5173\u4e8e\u8fd9\u70b9\u7684\u9a8c\u8bc1\uff0c\u8bf7\u770b\u9009\u8def\u89c4\u5219\u7ae0\u8282\u3002 \u4f7f\u7528route-policy\u4fee\u6539AS_PATH \u00b6 \u793a\u4f8b1 \u00b6 \u4e0a\u56fe\u4e2d\uff0cR1\u5c06BGP\u8def\u753110.0.1.0/24\u66f4\u65b0\u7ed9R2\uff0c\u5728\u6ca1\u6709\u90e8\u7f72\u7b56\u7565\u7684\u60c5\u51b5\u4e0b\uff0cR2\u6536\u523010.0.1.0/24\u8def\u7531\u7684AS_PATH\u4e3a\uff1a100\u3002\u6211\u4eec\u53ef\u80fd\u57fa\u4e8e\u67d0\u79cd\u9700\u6c42\uff0c\u5e0c\u671b\u4fee\u6539\u8def\u7531\u7684AS_PATH\uff0c\u4f8b\u5982\u6211\u4eec\u60f3\u63d2\u5165\u4e00\u4e2a AS\u53f7999\uff0c\u5c31\u53ef\u4ee5\u5728route-policy\u4e2d\u4f7f\u7528**apply as-path 999 additive**\u547d\u4ee4\u6765\u5b9e\u73b0\u3002\u6ce8\u610f\u6211\u4eec\u662f\u5728R1 \u4e0a\u5bf9R2\u505aexport\u65b9\u5411\u7684route-policy\uff0c10.0.1.0/24\u8def\u7531\u5728\u6ca1\u6709\u88abR1\u66f4\u65b0\u51fa\u53bb\u4e4b\u524dAS_Path\u662f\u7a7a\u7684\uff0c \u7136\u540e\u88ab\u63d2\u5165\u4e86\u4e0a\u9762\u6240\u8bf4\u7684AS\u53f7999\uff0c\u7d27\u63a5\u7740\u8def\u7531\u88ab\u9001\u7ed9EBGP\u90bb\u5c45R2\uff0c\u90a3\u4e48R1\u6240\u5728\u7684AS\u53f7\u7801100 \u53c8\u88ab\u8ffd\u52a0\u5230\u4e86\u8def\u7531\u7684AS_PATH\u524d\uff0c\u6240\u4ee5\u6700\u7ec8\u8def\u7531\u7684AS_PATH\u5c31\u662f100 999\u3002 \u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u5bf9\u4e8eBGP\u800c\u8a00AS_PATH\u5c5e\u6027\u662f\u4e00\u4e2a\u76f8\u5f53\u91cd\u8981\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u4f7f\u7528route-policy\u56fa\u7136\u80fd\u591f\u6839\u636e\u9700\u6c42\u7075\u6d3b\u7684\u4fee\u6539AS_PATH\uff0c\u4f46\u662f\u4efb\u4f55\u9488\u5bf9AS-PATH\u7684\u7b56\u7565\u90fd\u5fc5\u987b\u8c28\u614e\u6267\u884c\uff0c\u56e0\u4e3aBGP\u7684\u5de5\u4f5c\u2014\u2014\u4f8b\u5982\u9632\u6b62\u8def\u7531\u73af\u8def\u7b49\u5bf9AS_PATH\u7684\u4f9d\u8d56\u5f88\u9ad8\u3002\u5c31\u62ff\u4e0a\u9762\u7684\u4f8b\u5b50\u6765\u8bf4\uff0c\u5b9e\u9645\u4e0a\u6dfb\u52a0999\u7684AS \u53f7\u7801\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u56e0\u4e3a999\u7684AS\u5728\u8fd9\u91cc\u5e76\u4e0d\u5b58\u5728\uff0c\u5982\u679c\u53ea\u662f\u4e3a\u4e86\u52a0\u957fAS_PATH\uff0c\u53ef\u4ee5\u8003\u8651\u6dfb\u52a0\u4e00\u4e2a\u503c\u4e3a100\u7684AS\u53f7\uff0c\u800c\u4e0d\u662f999\u3002 \u793a\u4f8b2 \u00b6 \u4e0a\u56fe\u7684\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u662f\u5728R2\u505aimport\u65b9\u5411\u7684route-policy\uff0c\u540c\u6837\u662f\u4f7f\u7528\u547d\u4ee4**apply as-path 999** additive \uff0c\u7ed3\u679c\u4e0e\u793a\u4f8b1\u662f\u4e0d\u4e00\u6837\u7684\u3002\u7531\u4e8e\u7b56\u7565\u662f\u90e8\u7f72\u5728R2\u4e0a\u7684\uff0c\u56e0\u6b64R1\u5c06\u8def\u7531\u66f4\u65b0\u7ed9R2\u7684\u65f6\u5019\u8def\u7531\u7684AS_PATH\u662f100\uff0cR2\u6536\u5230\u8be5\u8def\u7531\u540e\uff0c\u7531\u4e8e\u914d\u7f6e\u4e86import\u65b9\u5411\u7684route-policy\uff0c\u56e0\u6b64\u5728\u8be5\u8def\u7531\u7684AS_PATH\u524d\u8ffd\u52a0AS\u53f7999\uff0c\u4e8e\u662f\u6700\u7ec8\u5728R2\u7684BGP\u8868\u91cc10.0.1.0/24\u7684\u8def\u7531AS_PATH\u662f999 100\u3002 \u793a\u4f8b3 \u00b6 \u5982\u679c\u4e0d\u662f\u60f3\u5728AS_PATH\u4e2d\u63d2\u5165AS\u53f7\uff0c\u800c\u662f\u60f3\u8986\u76d6AS_PATH\u5462\uff1f\u53ef\u4ee5\u5728route-policy\u4e2d\u4f7f\u7528**apply as-path overwrite**\u547d\u4ee4\u3002\u5728\u4e0a\u56fe\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5728R2\u4e0a\u5bf9R1\u505aimport\u65b9\u5411\u7684route-policy\uff0c\u90a3\u4e48\u5f53 R1\u5c06\u8def\u753110.0.1.0/24\u66f4\u65b0\u7ed9R2\u7684\u65f6\u5019\uff0c\u8def\u7531\u7684AS_PATH\u5c5e\u6027\u503c\u4e3a100\uff0c\u968f\u540e\u7531\u4e8eR2\u90e8\u7f72\u4e86\u7b56\u7565\uff0c \u56e0\u6b64\u8be5\u8def\u7531\u7684AS_PATH\u88ab\u8986\u76d6\u4e3a999\uff0c\u6240\u4ee5\u6700\u7ec8\u5728R2\u7684BGP\u8868\u4e2d\uff0c10.0.1.0/24\u7684\u8def\u7531AS_PATH \u5c5e\u6027\u503c\u4e3a999\u3002 Origin \u00b6 \u516c\u8ba4\u5fc5\u9075\u5c5e\u6027\uff0c\u660e\u786e\u4e86\u8def\u7531\u7684\u6765\u6e90\uff0cBGP\u8def\u7531\u6765\u6e90\u6709\u4e09\u79cd\u9014\u5f84\uff1a \u540d\u79f0 \u6807\u8bb0 \u8bf4\u660e IGP i \u901a\u8fc7BGP network\u7684\u8def\u7531\uff0c\u4e5f\u5c31\u662f\u8d77\u6e90\u4e8eIGP\u7684\u8def\u7531\uff0c\u56e0\u4e3aBGP network\u5fc5\u987b\u4fdd\u8bc1\u8be5\u7f51 \u7edc\u7684\u8def\u7531\u5728\u8def\u7531\u8868\u4e2d EGP e \u662f\u7531EGP\u8fd9\u79cd\u65e9\u671f\u7684\u534f\u8bae\u91cd\u53d1\u5e03\u800c\u6765\u7684\u8def\u7531 Incomplete ? \u4ece\u5176\u4ed6\u6e20\u9053\u5b66\u4e60\u5230\u7684\uff08\u786e\u8ba4\u8be5\u8def\u7531\u6765\u6e90\u7684\u4fe1\u606f\u4e0d\u5b8c\u5168\uff09\uff0c\u91cd\u53d1\u5e03\u8fdbBGP\u7684\u8def\u7531origin\u90fd \u662f\u8fd9\u4e2a\u6807\u8bb0 \u4e0a\u56fe\u4e2d\uff0cR1\u91c7\u7528network\u7684\u65b9\u5f0f\uff0c\u5c06\u76f4\u8fde\u8def\u753110.0.1.0/24\u5f15\u5165\u4e86BGP\uff0c\u90a3\u4e48\u8be5\u6761\u8def\u7531\u7684Origin\u5c5e\u6027\u503c\u5c31\u4e3aIGP\uff0c\u5728BGP\u8868\u4e2d\uff0c\u6807\u8bb0\u4e3ai\uff1a [R2] display bgp routing-table \u5f53\u7136\uff0c\u5982\u679cR1\u6539\u7528\u91cd\u53d1\u5e03\uff08import-route\uff09\u7684\u65b9\u5f0f\u5f15\u5165\u8fd9\u6761\u76f4\u8fde\u8def\u7531\uff0c\u90a3\u4e48\u8be5\u6761\u8def\u7531\u7684origin\u5c5e\u6027\u503c\u5c31\u662f incomplete\uff0c\u5728BGP\u8868\u4e2d\u7684\u6807\u8bb0\u5c31\u662f?\u3002 MED \u00b6 \u5173\u4e8eMED\u5c5e\u6027 \u00b6 MED\uff08MULTI_EXIT_DISC\uff09\u662f\u53ef\u9009\u975e\u4f20\u9012\u5c5e\u6027\uff0c\u662f\u4e00\u79cd\u5ea6\u91cf\u503c\uff0c\u7528\u4e8e\u5411\u5916\u90e8\u90bb\u5c45\u6307\u51fa\u8fdb\u5165AS\u7684\u9996\u9009\u8def\u5f84\uff0c\u5373\u5f53\u5165\u53e3\u6709\u591a\u4e2a\u65f6\uff0cAS\u53ef\u4ee5\u4f7f\u7528MED\u52a8\u6001\u5730\u5f71\u54cd\u5176\u4ed6AS\u5982\u4f55\u9009\u62e9\u8fdb\u5165\u8def\u5f84\u3002MED\u5c5e\u6027\u503c\u8d8a\u5c0f\uff0c \u5219\u8def\u7531\u8d8a\u4f18\u3002MED\u4e3b\u8981\u7528\u4e8e\u5728AS\u4e4b\u95f4\u4ea4\u4e92\uff0cMED\u5c5e\u6027\u503c\u968f\u8def\u7531\u901a\u544a\u7ed9EBGP\u5bf9\u7b49\u4f53\u540e\uff0c\u5bf9\u65b9\u5728AS\u5185\u4f20\u64ad\u8be5\u8def\u7531\u65f6\uff0c\u4f1a\u643a\u5e26\u8be5MED\u5c5e\u6027\u503c\uff0c\u4f46\u662f\uff0c\u8fd9\u4e2aMED\u5c5e\u6027\u503c\u4e0d\u4f1a\u88ab\u901a\u544a\u7ed9\u4e0b\u4e00\u4e2aAS\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cC\u8def\u7531\u5668\u6240\u5728\u7684AS200\u53cc\u5f52\u5c5e\u5230AS100\uff08\u6709\u4e24\u6761\u51fa\u53e3\u8def\u5f84\u5230AS100\uff09\uff0c\u53ef\u4ee5\u5229\u7528MED\u5c5e\u6027\u6765\u63a7\u5236C\u8fdb\u5165AS100\u9009\u62e9\u7684\u8def\u5f84\u3002AS100\u4e2d\u6709\u8def\u75311.1.1.0/24\u88abA\u53caB\u901a\u544a\u7ed9\u4e86C\u3002\u90a3\u4e48\u6211\u4eec\u5728A\u4e0a\u90e8\u7f72\u7b56\u7565\uff0c \u5c06\u8be5\u8def\u7531\u7684MED\u8bbe\u7f6e\u4e3a10\uff1b\u5728B\u4e0a\u90e8\u7f72\u7b56\u7565\uff0c\u5c06MED\u8bbe\u7f6e\u4e3a20\u3002\u8fd9\u6837\u4e00\u6765\u5728C\u4e0a\u5173\u4e8e1.1.1.0/24\u8def\u7531\u5c31\u5206\u522b\u4eceA\u548cB\u5404\u5b66\u4e60\u5230\u4e00\u6761BGP\u8def\u5f84\uff0cC\u4f1a\u6bd4\u8f83\u8fd9\u4e24\u6761\u8def\u5f84\u7684MED\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u4f18\u9009MED\u5c0f\u7684\u8def\u5f84\uff0c\u56e0\u6b64\u6700\u7ec8\u4f18\u9009\u4eceA\u901a\u544a\u8fc7\u6765\u7684\u8def\u7531\u3002 MED\u7684\u6bd4\u8f83\u539f\u5219\u53ca\u914d\u7f6e\u6ce8\u610f\u4e8b\u9879 \u00b6 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53ea\u6bd4\u8f83\u6765\u81ea\u540c\u4e00\u76f8\u90bbAS\u7684BGP\u8def\u7531\u7684MED\u5c5e\u6027\uff0c\u5c31\u662f\u8bf4\u5982\u679c\u540c\u4e00\u4e2a\u76ee\u7684\u5730\u7684\u4e24\u6761\u8def\u7531\u901a\u544a\u81ea\u4e0d\u540c\u7684AS\uff0c\u5219\u4e0d\u8fdb\u884cMED\u7684\u6bd4\u8f83\u3002 MED\u53ea\u5728\u76f4\u63a5\u76f8\u8fde\u7684AS\u95f4\u5f71\u54cd\u4e1a\u52a1\u91cf\uff0c\u800c\u4e0d\u4f1a\u8de8AS\u4f20\u9012\u3002 \u4e00\u53f0BGP\u8def\u7531\u5668\u5c06\u8def\u7531\u901a\u544a\u7ed9EBGP\u90bb\u5c45\u65f6\u662f\u5426\u643a\u5e26MED\u503c\uff0c\u9700\u8981\u6839\u636e\u4ee5\u4e0b\u6761\u4ef6\u8fdb\u884c\u5224\u65ad(\u5728\u4e0d\u5bf9 EBGP\u90bb\u5c45\u4f7f\u7528\u8def\u7531\u7b56\u7565\u7684\u60c5\u51b5\u4e0b)\uff1a \u5982\u679c\u8be5BGP\u8def\u7531\u662f\u672c\u5730\u59cb\u53d1\uff08network\u6216import-route\uff09\u7684\uff0c\u5219\u643a\u5e26MED\u503c\u53d1\u9001\u7ed9EBGP\u90bb\u5c45\u3002 \u5982\u679c\u8be5BGP\u8def\u7531\u662f\u4ece\u5176\u4ed6BGP\u90bb\u5c45\u5b66\u4e60\u8fc7\u6765\u7684\uff0c\u90a3\u4e48\u5c06\u8be5\u8def\u7531\u901a\u544a\u7ed9EBGP\u90bb\u5c45\u65f6\u4e0d\u643a\u5e26 MED\u3002 \u5728IBGP\u90bb\u5c45\u4e4b\u95f4\u4f20\u9012\u8def\u7531\u65f6\uff0cMED\u503c\u4f1a\u88ab\u4fdd\u7559\u5e76\u4f20\u9012\uff0c\u9664\u975e\u90e8\u7f72\u4e86\u7b56\u7565\uff0c\u5426\u5219MED\u503c\u5728\u4f20\u9012\u8fc7\u7a0b\u4e2d\u4e0d\u53d1\u751f\u6539\u53d8\u4e5f\u4e0d\u4f1a\u4e22\u5931\u3002 MED\u9ed8\u8ba4\u503c \u00b6 \u5982\u679cBGP\u8def\u7531\u5668\u901a\u8fc7**IGP\u5b66\u4e60\u5230\u4e00\u6761\u8def\u7531**\uff0c\u5e76\u4e14\u901a\u8fc7network\u6216import-route\u7684\u65b9\u5f0f\u5c06\u8def\u7531\u5f15\u5165BGP\uff0c \u4ea7\u751f\u7684BGP\u8def\u7531\u7684MED\u503c\u7ee7\u627f\u8def\u7531\u5728IGP\u4e2d\u7684metric\u3002\u4f8b\u5982\u4e0a\u56fe\u4e2d\u5982\u679cR2\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u4e86 11.1.1.0/24\u8def\u7531\uff0c\u5e76\u4e14\u8be5\u8def\u7531\u5728R2\u7684\u5168\u5c40\u8def\u7531\u8868\u4e2dOSPF Cost=100\uff0c\u90a3\u4e48\u5f53R2\u5c06\u8def\u7531network\u8fdb BGP\u7684\u65f6\u5019\uff0c\u4ea7\u751f\u7684BGP\u8def\u7531MED\u503c\u5c06\u7ee7\u627f\u8fd9\u6761\u8def\u7531\u7684OSPF Cost\u503c100\u3002 \u5982\u679cBGP\u8def\u7531\u5668\u5c06**\u672c\u5730\u7684\u76f4\u8fde\u8def\u7531**\u901a\u8fc7network\u6216import-route\u7684\u65b9\u5f0f\u5f15\u5165BGP\uff0c\u90a3\u4e48\u8fd9\u6761BGP\u8def\u7531\u7684MED\u9ed8\u8ba4\u4e3a0\uff0c\u56e0\u4e3a\u76f4\u8fde\u8def\u7531cost\u4e3a0\u3002 \u5982\u679cBGP\u8def\u7531\u5668\u5c06**\u672c\u5730\u7684\u9759\u6001\u8def\u7531**\u901a\u8fc7network\u6216import-route\u7684\u65b9\u5f0f\u5f15\u5165BGP\uff0c\u90a3\u4e48\u8fd9\u6761BGP\u8def\u7531\u7684MED\u9ed8\u8ba4\u4e3a0\uff0c\u56e0\u4e3a\u9759\u6001\u8def\u7531cost\u4e3a0\u3002 \u5982\u679cBGP\u8def\u7531\u5668\u901a\u8fc7BGP\u5b66\u4e60\u5230\u5176\u4ed6\u90bb\u5c45\u4f20\u9012\u8fc7\u6765\u7684\u4e00\u6761\u8def\u7531\uff0c\u90a3\u4e48\u5c06\u8def\u7531\u66f4\u65b0\u7ed9\u81ea\u5df1\u7684EBGP \u90bb\u5c45\u65f6\uff0c\u9ed8\u8ba4\u662f\u4e0d\u643a\u5e26MED\u7684\u3002 \u53ef\u4ee5\u4f7f\u7528**default med**\u547d\u4ee4\u4fee\u6539\u9ed8\u8ba4\u7684MED\u503c\uff0c default med**\u547d\u4ee4\u53ea\u5bf9\u672c\u8bbe\u5907\u4e0a\u7528import-route\u547d\u4ee4\u5f15\u5165\u7684\u8def\u7531\u548cBGP\u7684\u6c47\u603b\u8def\u7531\u751f\u6548\u3002\u4f8b\u5982\u5728R2\u4e0a\u914d\u7f6e**default med 999 \uff0c\u90a3\u4e48R2\u901a\u8fc7import-route \u53caaggregate\u547d\u4ee4\u4ea7\u751f\u7684\u8def\u7531\u4f20\u9012\u7ed9R3\u65f6\uff0c\u8def\u7531\u643a\u5e26\u7684MED\u4e3a999\u3002 NEXT_HOP \u00b6 NEXT_HOP\u5c5e\u6027\u662f\u4e00\u4e2a\u516c\u8ba4\u5fc5\u9075\u5c5e\u6027\uff0c\u4e5f\u5c31\u662f\u5728\u6240\u6709\u7684Update\u62a5\u6587\u91cc\u90fd\u5fc5\u987b\u643a\u5e26\u7684\u5c5e\u6027\u3002\u8fd9\u4e2a\u5c5e\u6027\u63cf\u8ff0\u4e86\u53bb\u5f80\u76ee\u7684\u7f51\u7edc\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u3002 NEXT_HOP\u5c5e\u6027\u7684\u9ed8\u8ba4\u64cd\u4f5c \u00b6 \u5c06\u8def\u7531\u66f4\u65b0\u7ed9EBGP\u90bb\u5c45 \u00b6 \u5f53\u4e00\u53f0BGP\u8def\u7531\u5668\u5c06\u8def\u7531\u901a\u544a\u7ed9\u81ea\u5df1\u7684EBGP\u90bb\u5c45\u65f6\uff0c\u8be5\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u5176 BGP\u66f4\u65b0\u6e90IP\u5730\u5740\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u53caR2\u4e4b\u95f4\u4f7f\u7528\u76f4\u8fde\u63a5\u53e3IP\u5730\u5740\u5efa\u7acbEBGP\u8fde\u63a5\uff0c\u90a3\u4e48R1\u5c06\u8def\u753111.1.1.0/24\u901a\u544a\u7ed9R2 \u7684\u65f6\u5019\uff0c\u8def\u7531\u643a\u5e26\u7684NEXT_HOP\u5c5e\u6027\u503c\u5c31\u662fR1\u7684\u63a5\u53e3\u5730\u574010.1.12.1\u3002 R2\u5c06\u6536\u5230\u7684BGP\u8def\u753111.1.1.0/24\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\u540e\uff0c\u8be5\u8def\u7531\u5728\u8def\u7531\u8868\u4e2d\u7684\u4e0b\u4e00\u8df3\u5c31\u662f10.1.12.1\uff0c\u4e5f\u5c31\u662f\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u3002 \u5c06EBGP\u90bb\u5c45\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\u66f4\u65b0\u7ed9\u81ea\u5df1\u7684IBGP\u90bb\u5c45 \u00b6 \u5f53BGP\u8def\u7531\u5668\u628a\u4eceEBGP\u90bb\u5c45\u5b66\u4e60\u5230\u7684\u8def\u7531\u4f20\u9012\u7ed9\u81ea\u5df1\u7684IBGP\u90bb\u5c45\u65f6\uff0c\u4f1a\u4fdd\u7559\u8def\u7531\u7684NEXT_HOP \u5c5e\u6027\u503c\u4e0d\u53d8\u3002\u4f8b\u5982\u4e0a\u56fe\u4e2d\uff0cR2\u4eceEBGP\u90bb\u5c45R1\u5b66\u4e60\u5230\u7684\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u4e3a10.1.12.1\uff0c\u90a3\u4e48\u5f53R2\u5c06\u8def\u7531\u518d\u901a\u544a\u7ed9\u81ea\u5df1\u7684IBGP\u90bb\u5c45R3\u7684\u65f6\u5019\uff0c\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u4fdd\u6301\u4e0d\u53d8\uff0c\u4ecd\u7136\u4e3a 10.1.12.1\u3002 R3\u5c06\u5b66\u4e60\u5230\u7684BGP\u8def\u753111.1.1.0/24\u88c5\u8f7d\u8fdb\u5168\u5c40\u8def\u7531\u8868\u65f6\uff0c\u8be5\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u5c31\u662f10.1.12.1\uff0c\u8fd9\u91cc\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c \u5bf9\u4e8eR3 \u800c\u8a0010.1.12.1 \u5e76\u975e\u5904\u4e8e\u672c\u5730\u76f4\u8fde\u7f51\u7edc\uff0c \u56e0\u6b64\u5f53R3\u8981\u8f6c\u53d1\u6570\u636e\u5230 11.1.1.0/24\u7f51\u7edc\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u4e0a\u8fd8\u9700\u8981\u505a\u4e00\u6b21\u9012\u5f52\uff0c\u4e5f\u5c31\u662f\u9700\u8981\u518d\u5728\u8def\u7531\u8868\u4e2d\u67e5\u627e\u523010.1.12.1\u7684\u8def\u7531\u3002 \u901a\u8fc7aggregate\u547d\u4ee4\u6ce8\u5165\u7684BGP\u6c47\u603b\u8def\u7531\uff0cNEXT_HOP\u5c5e\u6027\u503c\u4e3a\u6267\u884c\u6c47\u603b\u7684\u8def\u7531\u5668\u7684\u66f4\u65b0\u6e90IP\u5730\u5740\u3002 \u00b6 \u5728\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\u4e2d\u7684NEXT_HOP \u00b6 \u5728\u524d\u9762\u7684\u5185\u5bb9\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u4e86\u89e3\u5230\uff1a\u201c\u5f53\u4e00\u53f0BGP\u8def\u7531\u5668\u5c06\u8def\u7531\u66f4\u65b0\u81ea\u5df1\u7684EBGP\u90bb\u5c45\u65f6\uff0c\u8be5\u8def\u7531\u7684 NEXT_HOP\u5c5e\u6027\u503c\u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u5176BGP\u66f4\u65b0\u6e90IP\u5730\u5740\u201d\u3002\u4f46\u662f\u8fd9\u6709\u4e00\u4e2a\u4f8b\u5916\u7684\u60c5\u51b5\u3002 \u5982\u4e0a\u56fe\uff0cABC\u4e09\u53f0\u8def\u7531\u5668\u8fde\u63a5\u5230\u4e00\u4e2a\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\u4e2d\uff0c\u4f8b\u5982\u4ee5\u592a\u7f51\uff0cABC\u7684\u63a5\u53e3\u5c5e\u4e8e\u4e00\u4e2aIP\u5b50\u7f51\u3002ABC \u4e09\u8005\u7684EBGP\u90bb\u5c45\u5173\u7cfb\u5982\u56fe\u6240\u793a\uff0c\u90a3\u4e48\u5f53B\u8def\u7531\u5668\u6709\u6761BGP\u8def\u7531100.100.100.0/24\u66f4\u65b0\u7ed9A\u7684\u65f6\u5019\uff0c\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u4e3aB\u7684\u63a5\u53e3IP\u5730\u5740\u4e5f\u5c31\u662f10.1.123.2\uff0c\u968f\u540e\uff0cA\u6536\u5230\u8fd9\u6761\u8def\u7531\u5e76\u4e14\u51c6\u5907\u66f4\u65b0\u7ed9C\uff0c\u800c\u8fd9\u65f6\u5019\uff0c\u7531\u4e8eABC\u5904\u4e8e\u540c\u4e00\u4e2aIP\u5b50\u7f51\uff0c\u56e0\u6b64A\u5c06\u8def\u7531\u66f4\u65b0\u7ed9EBGP\u90bb\u5c45C\u7684\u65f6\u5019\uff0c\u4f1a\u505a\u4e00\u4e2a\u7279\u6b8a\u5904\u7406\uff1a \u4fdd\u6301\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u4e0d\u53d8\u3002\u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a\u5462\uff1f\u5b9e\u9645\u4e0a\u8fd9\u6837\u64cd\u4f5c\u662f\u975e\u5e38\u6709\u597d\u5904\u7684\uff0c\u56e0\u4e3aC\u6536\u5230\u8fd9\u6761\u8def\u7531\u65f6\uff0c\u53d1\u73b0NEXT_HOP\u5c5e\u6027\u4e3a10.1.123.2\uff0c\u90a3\u4e48\u5f53C\u8f6c\u53d1\u5230\u8fbe100.100.100.0/24\u7684\u62a5\u6587\u65f6\uff0c\u53ea\u9700\u76f4\u63a5\u5c06\u6570\u636e\u8f6c\u53d1\u7ed9\u4e0b\u4e00\u8df310.1.123.2\u5373\u53ef\uff0c\u800c\u4e0d\u7528\u4eceA\u53bb\u7ed5\u4e00\u4e0b\u3002 Community \u00b6 \u5173\u4e8eCommunity\u5c5e\u6027 \u00b6 Community\u4e5f\u88ab\u79f0\u4e3a\u56e2\u4f53\u5b57\uff0c\u662f\u53ef\u9009\u4f20\u9012\u5c5e\u6027\u3002Community\u662f\u4e00\u79cdBGP\u8def\u7531\u6807\u8bb0\uff0c\u7528\u4e8e\u7b80\u5316\u8def\u7531\u7b56\u7565\u7684\u6267\u884c\u3002\u53ef\u4ee5\u5c06\u67d0\u4e9b\u8def\u7531\u5206\u914d\u7279\u5b9a\u7684Community\u5c5e\u6027\u503c\uff0c\u4e4b\u540e\u5c31\u53ef\u4ee5\u57fa\u4e8eCommunity\u503c\u800c\u4e0d\u662f\u57fa\u4e8e\u524d\u7f00\u4fe1\u606f\u6765\u6293\u53d6\u8def\u7531\u5e76\u6267\u884c\u76f8\u5e94\u7684\u7b56\u7565\u4e86\u3002 \u6709\u4e86Community\u5c5e\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u5728AS100\u5f15\u5165\u8fd9\u4e9b\u529e\u516c\u53ca\u751f\u4ea7\u7684\u8def\u7531\u7684\u65f6\u5019\uff0c\u5c31\u5206\u522b\u201c\u6253\u4e0a\u201d\u76f8\u5e94\u7684 Community\u503c\u4ee5\u4f5c\u6807\u8bb0\uff0c\u4f8b\u5982\u4f46\u51e1\u751f\u4ea7\u7684\u8def\u7531\uff0c\u5c31\u6253\u4e0a\u6807\u8bb0100:1\uff0c\u4f46\u51e1\u529e\u516c\u7684\u8def\u7531\u5c31\u6253\u4e0a\u6807\u8bb0100:2\uff0c \u90a3\u4e48\u8fd9\u4e9b\u5c5e\u6027\u503c\u968f\u7740\u8def\u7531\u4f20\u9012\u7ed9\u4e86AS200\uff0c\u5728AS200\u4e0a\u9700\u8981\u5206\u522b\u5bf9\u529e\u516c\u53ca\u751f\u4ea7\u8def\u7531\u505a\u7b56\u7565\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u6293\u53d6\u76f8\u5e94\u7684Community\u503c\u5373\u53ef\u3002\u4f8b\u5982\u6293\u53d6100:1\u7684Community\u5c5e\u6027\u503c\u4e5f\u5c31\u6293\u53d6\u4e86\u6240\u6709\u751f\u4ea7\u7684\u8def\u7531\u3002 Community\u5c5e\u6027\u662f\u4e00\u7ec44\u4e2a8\u4f4d\u7ec4\u7684\u6570\u503c\uff0cRFC1997\u89c4\u5b9a\u524d2B\u8868\u793aAS\u53f7\uff0c\u540e2B\u8868\u793a\u57fa\u4e8e\u7ba1\u7406\u76ee\u7684\u8bbe\u7f6e\u7684\u6807\u793a\u7b26\uff0c\u683c\u5f0f\u4e3aAA\uff1aNN\u3002 Community\u5c5e\u6027\u5bf9\u90bb\u5c45\u8d77\u4f5c\u7528\uff0c\u5728\u8bbe\u7f6e\u540e\uff0c\u9700\u8981\u5411\u90bb\u5c45\u53d1\u9001\u8be5\u5c5e\u6027\uff08advertise-community\uff09\u3002 \u4f7f\u7528route-policy\u8bbe\u7f6eCommunity\u5c5e\u6027\u503c \u00b6 \u51e0\u4e2a\u516c\u8ba4\u7684\u7684Community\u5c5e\u6027\u503c \u00b6 \u4e1a\u5185\u9488\u5bf9\u7279\u6b8a\u7684\u9700\u6c42\u5b9a\u4e49\u4e86\u516c\u8ba4\u7684Community\u5c5e\u6027\u503c\uff0c\u8fd9\u4e9b\u5c5e\u6027\u503c\u6bd4\u8f83\u7279\u6b8a\uff0c\u800c\u4e14\u90fd\u6709\u81ea\u5df1\u7684\u5b9a\u4e49\uff0c\u63a5\u4e0b\u53bb\u6211\u4eec\u5206\u522b\u6765\u770b\u4e00\u4e0b\uff1a no-advertise \u00b6 R1\u5f15\u5165\u4e86\u4e00\u6761BGP\u8def\u7531\uff0c\u5e76\u4e14\u4e3a\u8def\u7531\u6253\u4e0a\u4e86\u201cno-advertise\u201d\u7684Community\u5c5e\u6027\u503c\uff0c\u8fd9\u6761\u8def\u7531\u4f20\u9012\u7ed9\u4e86R2\uff0cR2\u53d1\u73b0\u8def\u7531\u643a\u5e26\u4e86\u201cno-advertise\u201d\u7684Community\u5c5e\u6027\u503c\uff0c\u56e0\u6b64\u8fd9\u6761\u8def\u7531\u81ea\u5df1\u7528\uff0c\u4e0d\u4f1a\u518d\u4f20\u9012\u7ed9\u4efb\u4f55BGP\u90bb\u5c45\u3002 no-export \u00b6 no-export-subconfed \u00b6 Atomic_Aggregate\u53caaggregator \u00b6 \u8def\u7531\u6c47\u603b\u662f\u8bb8\u591a\u52a8\u6001\u8def\u7531\u534f\u8bae\u90fd\u652f\u6301\u7684\u7279\u6027\uff0c\u4e5f\u662f\u4e00\u4e2a\u975e\u5e38\u57fa\u672c\u7684\u534f\u8bae\u7279\u6027\uff0cBGP\u5f53\u7136\u662f\u652f\u6301\u8def\u7531\u6c47\u603b\u7684\u3002\u7136\u800c\u8def\u7531\u6c47\u603b\u5728\u4f18\u5316\u8def\u7531\u6761\u76ee\u6570\u91cf\u7684\u540c\u65f6\uff0c\u4e5f\u5e26\u6765\u4e00\u5b9a\u7684\u95ee\u9898\uff0c\u4f8b\u5982\u660e\u7ec6\u8def\u7531\u5728\u8def\u7531\u6c47\u603b\u7684\u6267\u884c\u70b9\u4e4b\u540e\u5c31\u88ab\u6291\u5236\u4e86\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\u65b0\u4ea7\u751f\u7684\u8fd9\u6761\u6c47\u603b\u8def\u7531\uff0c\u800c\u6c47\u603b\u8def\u7531\u53ef\u80fd\u4f1a\u4e22\u5931\u660e\u7ec6\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u5176\u4e2d\u5305\u62ec\u6700\u91cd\u8981\u7684AS_PATH\u5c5e\u6027\uff0c\u800cAS_PATH\u662fBGP\u8def\u7531\u9632\u73af\u7684\u91cd\u8981\u4f9d\u636e\u3002 \u56e0\u6b64BGP\u5b9a\u4e49\u4e86\u8fd9\u4e24\u4e2a\u8def\u5f84\u5c5e\u6027\uff1aAtomic_Aggregate\u53caAggregator\uff0c\u5206\u522b\u7528\u4e8e\u544a\u8bc9\u4e0b\u6e38BGP\u8def\u7531\u5668\uff1a1\u3001\u8fd9\u662f\u6761\u6c47\u603b\u8def\u7531\uff0c2\u3001\u6c47\u603b\u8def\u7531\u53d1\u751f\u7684\u5730\u65b9\uff08\u4e5f\u5c31\u662f\u6c47\u603b\u8def\u7531\u7684\u59cb\u53d1AS\u548c\u59cb\u53d1\u8def\u7531\u5668\uff09\u3002 R4# display bgp routing-table 172.16.0.0 BGP \u8def\u7531\u7b56\u7565 BGP\u8def\u7531\u6c47\u603b \u00b6 BGP\u8def\u7531\u81ea\u52a8\u6c47\u603b \u00b6 BGP\u652f\u6301\u8def\u7531\u81ea\u52a8\u6c47\u603b\uff0c\u9996\u5148\u9700\u8981\u5728BGP\u89c6\u56fe\u4e0b\u914d\u7f6e**summary automatic**\u547d\u4ee4\uff0c\u8fd9\u6761\u547d\u4ee4\u5f00\u542f\u4e86BGP \u8def\u7531\u81ea\u52a8\u6c47\u603b\u7684\u529f\u80fd\u3002\u53e6\u5916\uff0cBGP\u7684\u81ea\u52a8\u6c47\u603b\u529f\u80fd\u4ec5\u5bf9\u4f7f\u7528import-route\u65b9\u5f0f\u5f15\u5165\u7684\u8def\u7531\u6709\u6548\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u6253\u5f00\u4e86BGP\u81ea\u52a8\u6c47\u603b\u7684\u5f00\u5173\uff0c\u540c\u65f6\u4f7f\u7528import-route\u5f15\u5165\u4e86\u76f4\u8fde\u8def\u75311.1.1.0/24\uff0c\u8fd9\u6761\u8def\u7531\u88ab\u6ce8\u5165BGP\u540e\u5c31\u4f1a\u88ab\u81ea\u52a8\u6c47\u603b\u6210\u4e3b\u7c7b\u8def\u7531\uff1a1.0.0.0/8\uff0c\u7136\u540e\u4f20\u9012\u7ed9R2\u3002 BGP\u624b\u5de5\u8def\u7531\u6c47\u603b\uff08\u4f7f\u7528aggregate\u547d\u4ee4\u6267\u884c\u8def\u7531\u6c47\u603b\uff09 \u00b6 \u5728BGP\u4e2d\u90e8\u7f72\u8def\u7531\u624b\u5de5\u6c47\u603b\u7684\u547d\u4ee4\u5982\u4e0b\uff1a \u6211\u4eec\u770b\u5230**aggregate**\u547d\u4ee4\u5305\u542b\u4e86\u8bb8\u591a\u5173\u952e\u5b57\uff0c\u6bcf\u4e2a\u5173\u952e\u5b57\u90fd\u6709\u7279\u5b9a\u7684\u7528\u9014\uff0c\u63a5\u4e0b\u53bb\u6211\u4eec\u6765\u9010\u4e2a\u5206\u6790\u5206\u6790\uff1a aggregate \u00b6 \u5728\u4e0a\u56fe\u4e2dR1\u6240\u5728\u7684AS100\u5185\u6709\u660e\u7ec6\u8def\u7531172.16.1.0/24\u53ca2.0/24\uff1bR2\u6240\u5728\u7684AS200\u5185\u6709\u660e\u7ec6\u8def\u7531 172.16.10.0/24\u53ca11.0/24\uff0c\u8fd9\u51e0\u6761\u660e\u7ec6\u8def\u7531\u901a\u8fc7BGP\u901a\u544a\u7ed9\u4e86R3\uff0c\u7136\u540eR3\u901a\u544a\u7ed9\u4e86R4\u3002 \u73b0\u5728\u4e3a\u4e86\u4f18\u5316\u7f51\u7edc\u4e2d\u7684\u8def\u7531\u6761\u76ee\u6570\u91cf\uff0c\u6211\u4eec\u5728R3\u4e0a\u90e8\u7f72BGP\u8def\u7531\u6c47\u603b\uff0c\u4f7f\u7528**aggregate 172.16.0.0** **16**\u547d\u4ee4\u4e4b\u540e\uff0cR3\u5c31\u4f1a\u53bb\u68c0\u9a8c\u81ea\u5df1\u7684BGP\u8def\u7531\u8868\uff0c\u53ea\u8981\u8868\u4e2d\u6709172.16.0.0/16\u8fd9\u4e2a\u4e3b\u7c7b\u7f51\u7edc\u7684\u5b50\u7f51\u8def\u7531\u5e76\u4e14\u662f\u88ab\u4f18\u9009\u7684\uff0cR3\u5c31\u4f1a\u4ea7\u751f\u4e00\u6761172.16.0.0/16\u7684\u6c47\u603b\u8def\u7531\uff0c\u5e76\u5c06\u6c47\u603b\u8def\u7531\u901a\u544a\u7ed9BGP\u90bb\u5c45\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u76f4\u63a5\u4f7f\u7528**aggregate 172.16.0.0 16**\u547d\u4ee4\u540e\uff0cR3\u5c06\u540c\u65f6\u628a\u90a3\u56db\u6761\u660e\u7ec6\u8def\u7531\uff0c\u4ee5\u53ca\u6c47\u603b\u8def\u7531\u4e00\u8d77\u901a\u544a\u7ed9R4\uff0c\u53e6\u4e00\u65b9\u9762\uff0c\u6c47\u603b\u8def\u7531172.16.0.0/16\u4e5f\u4f1a\u88ab\u901a\u544a\u7ed9R1\u53caR2\uff0c\u8fd9\u91cc\u4e8b\u5b9e\u4e0a\u6709\u4e00\u4e2a\u8def\u7531\u73af\u8def\u7684\u9690\u60a3\uff08\u81f3\u4e8e\u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u8bf7\u770b\u4e0b\u6587\uff09\u3002 aggregate detail-suppressed \u00b6 \u5982\u679c\u6211\u4eec\u53ea\u5e0c\u671bR3\u901a\u544a\u6c47\u603b\u8def\u7531\u3001\u4e0d\u901a\u544a\u660e\u7ec6\u8def\u7531\u5462\uff1f\u5c31\u5728\u4e0a\u8ff0\u547d\u4ee4\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u4e00\u4e2a**detail-** **suppressed**\u5173\u952e\u5b57\u5373\u53ef\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u770b\u5230\u5728R3\u7684BGP\u8def\u7531\u8868\u91cc\uff0c\u56db\u6761\u660e\u7ec6\u8def\u7531\u90fd\u88ab\u6291\u5236\u4e86\uff0c\u884c\u9996\u7684s\u610f\u601d\u5c31\u662f suppressed\uff08\u6291\u5236\uff09\u3002\u8fd9\u6837\u5c31\u8d77\u5230\u4e86\u8def\u7531\u6570\u91cf\u4f18\u5316\u7684\u4f5c\u7528\uff1a [R3] display bgp routing-table \u518d\u6765\u770b\u4e00\u4e0b\u8fd9\u6761\u6c47\u603b\u8def\u7531\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a [R3] display bgp routing-table 172.16.0.0 \u00b6 Aggregated route\u5b57\u6837\u6307\u793a\u8fd9\u662f\u4e00\u6761\u6c47\u603b\u8def\u7531\u3002AS_PATH Nil\u6307\u793a\u8fd9\u6761\u6c47\u603b\u8def\u7531\u4e22\u5931\u4e86\u660e\u7ec6\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u5176\u4e2d\u5305\u62ecAS_PATH\uff0c\u8fd9\u5c31\u5e26\u6765\u4e86\u4ea7\u751f\u73af\u8def\u7684\u9690\u60a3\uff08\u600e\u4e48\u89c4\u907f\uff0c\u7ee7\u7eed\u770b\u4e0b\u6587\uff09\u3002 aggregate detail-suppressed as-set \u00b6 \u4f7f\u7528**aggregate 172.16.0.0 16 detail-suppressed**\u547d\u4ee4\u7684\u8bdd\uff0cR3\u5c06\u4f1a\u6291\u5236\u660e\u7ec6\u8def\u7531\uff0c\u540c\u65f6\u4ea7\u751f\u4e00\u6761/16\u7684\u6c47\u603b\u8def\u7531\u5e76\u901a\u544a\u51fa\u53bb\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\u8fd9\u6761\u6c47\u603b\u8def\u7531\u5230\u76ee\u524d\u4e3a\u6b62\u662f\u4e00\u6761\u5168\u65b0\u7684\u8def\u7531\uff0c\u7531R3\u59cb\u53d1\uff0c\u5b83\u4e22\u5931\u4e86\u90a3\u56db\u6761\u660e\u7ec6\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u5176\u4e2d\u5c24\u4ee5AS_PATH\u5c5e\u6027\u7684\u4e22\u5931\u6700\u4e3a\u53ef\u6015\u3002 \u6211\u4eec\u770b\u5230\uff0c\u8fd9\u6761\u6c47\u603b\u8def\u7531\u5b9e\u9645\u4e0a\u662f\u88ab\u4f20\u9012\u7ed9\u4e86R1\u3001R2\u53caR4\uff0c\u6ce8\u610f\u5230\u6c47\u603b\u8def\u7531\u88ab\u4f20\u9012\u7ed9R1\u53caR2\u540e\uff0c \u8fd9\u5c31\u4ea7\u751f\u4e86\u8def\u7531\u73af\u8def\u9690\u60a3\uff0cR1\u53caR2\u4f1a\u5c06\u8fd9\u6761\u8def\u7531\u52a0\u8f7d\u8fdb\u8def\u7531\u8868\uff0c\u56e0\u4e3a\u8fd9\u6761\u6c47\u603b\u8def\u7531\u7684AS_PATH \u4e3a300\uff0c\u56e0\u6b64BGP\u4e0d\u8ba4\u4e3a\u5b58\u5728\u73af\u8def\u3002\u90a3\u4e48\u600e\u4e48\u89c4\u907f\u5462\uff1f**aggregate**\u547d\u4ee4\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a**as-set**\u5173\u952e\u5b57\uff0c\u5728\u547d\u4ee4**aggregate 172.16.0.0 16**\u547d\u4ee4\u4e2d\u589e\u52a0**as-set**\u5173\u952e\u5b57\u540e\uff0c\u6240\u4ea7\u751f\u7684\u6c47\u603b\u8def\u7531\u5c06\u7ee7\u627f\u660e\u7ec6\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u6211\u4eec\u91cd\u70b9\u5206\u6790AS_PATH\u5c5e\u6027\u7684\u7ee7\u627f\u3002\u6765\u770b\u4e00\u4e0b\u547d\u4ee4\u914d\u7f6e\u540e\u7684\u6548\u679c\uff1a [R3-bgp] display bgp routing-table 172.16.0.0 \u00b6 \u6ce8\u610f\u5230\u6c47\u603b\u8def\u7531\u7684AS_PATH\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u53d8\u6210\u4e86{100 200}\uff0c\u8fd9\u4e2a\u5b9e\u9645\u4e0a\u662f\u4e00\u79cd\u7279\u6b8a\u7684AS_PATH \u7c7b\u578b\uff08as-set\u7c7b\u578b\uff09\uff0c\u5173\u4e8e\u8fd9\u79cd\u7c7b\u578b\u7684\u8be6\u7ec6\u63cf\u8ff0\u8bf7\u53c2\u8003\u672c\u7cfb\u5217\u6587\u6863\u7684\u8def\u5f84\u5c5e\u6027\u76f8\u5173\u7ae0\u8282\u3002\u5728{}\u4e2d\u7684 AS\u53f7\u662f\u6ca1\u6709\u987a\u5e8f\u7684\uff0c\u56e0\u4e3a\u65b0\u4ea7\u751f\u7684\u6c47\u603b\u8def\u7531\u6240\u6c47\u603b\u7684\u660e\u7ec6\u5206\u522b\u6765\u81ea\u4e8eAS100\u548cAS200\uff0c\u8fd9\u91cc100\u53ca 200\u4f5c\u4e3a\u9632\u73af\u7684\u4f9d\u636e\u65f6\u5176\u987a\u5e8f\u662f\u4e0d\u91cd\u8981\u7684\u3002 \u6c47\u603b\u8def\u7531\u643a\u5e26\u8fd9\u4e2aAS_PATH\u5c5e\u6027\uff0c\u518d\u4f20\u9012\u5230R1\u53caR2\u7684\u65f6\u5019\uff0cAS_PATH\u4f1a\u53d8\u6210300 {100 200}\uff0cR1 \u548cR2\u5728\u8def\u7531\u7684AS_PATH\u4e2d\u770b\u5230\u81ea\u5df1\u672c\u5730\u7684AS\u53f7\uff0c\u56e0\u6b64\u8ba4\u4e3a\u51fa\u73b0\u4e86\u8def\u7531\u73af\u8def\uff0c\u4e8e\u662f\u5ffd\u7565\u8fd9\u4e2a\u8def\u7531\u66f4\u65b0\u3002\u53bbR4\u4e0a\u770b\u770b\u8be5\u6c47\u603b\u8def\u7531\uff1a [R4-bgp] display bgp routing-table 172.16.0.0 \u00b6 aggregate suppress-policy \u00b6 **suppress-policy**\u5173\u952e\u5b57\u7528\u4e8e\u901a\u544a\u6c47\u603b\u8def\u7531\u53ca\u9009\u5b9a\u7684\u660e\u7ec6\u8def\u7531\uff08\u6291\u5236\u7279\u5b9a\u7684\u660e\u7ec6\u8def\u7531\uff09\u3002\u4f7f\u7528**suppress-policy**\u5173\u952e\u5b57\u65f6\uff0c\u9700\u5728\u5176\u540e\u8c03\u7528\u5b9a\u4e49\u597d\u7684route-policy\uff0c\u90a3\u4e9b\u88abroute-policy permit\u7684\u660e\u7ec6\u8def\u7531\u5c06\u88ab\u8fc7\u6ee4\uff0c\u5176\u4ed6\u660e\u7ec6\u8def\u7531\u5219\u88ab\u653e\u884c\u3002**suppress-policy**\u867d\u7136\u8c03\u7528route-policy \uff0c\u4f46\u662froute-policy \u53ea\u80fd\u7528\u4e8e\u5339\u914d\uff08if-match\uff09\uff0c\u4e0d\u80fd\u7528\u4e8e\u8bbe\u7f6e\u5c5e\u6027\uff08\u4e0d\u80fd\u7528apply\u547d\u4ee4\uff09\u3002 aggregate origin-policy \u00b6 **origin-policy**\u5173\u952e\u5b57\u53ef\u8c03\u7528\u4e00\u4e2aroute-policy\uff0c\u5728\u8be5route-policy\u4e2d\u4f7f\u7528if-match\u8bed\u53e5\u53bb\u6293\u53d6\u660e\u7ec6\u8def\u7531\u3002\u5173\u8054origin-policy\u7684aggregate\u547d\u4ee4\u6240\u4ea7\u751f\u7684\u6c47\u603b\u8def\u7531\u76f8\u5f53\u4e8e\u662f\u4e3a\u4e0a\u8ff0route-policy\u4e2d\u6240\u5339\u914d\u7684\u660e\u7ec6 \u8def\u7531\u800c\u751f\u7684\uff0c\u53ea\u8981\u8fd9\u4e9b\u660e\u7ec6\u8def\u7531\u4e2d\u6709\u4e00\u6761\u8def\u7531\u6d3b\u8dc3\uff0c\u90a3\u4e48\u6c47\u603b\u8def\u7531\u5c31\u4f1a\u4ea7\u751f\uff0c\u5982\u679croute-policy\u6240 \u5339\u914d\u7684\u6240\u6709\u660e\u7ec6\u8def\u7531\u90fd\u5931\u6548\uff0c\u90a3\u4e48\u6c47\u603b\u8def\u7531\u4e5f\u5c31\u8ddf\u7740\u6d88\u5931\u3002 \u6ce8\u610f**aggregate 172.16.0.0 16 detail-suppressed origin-policy orimap**\u8fd9\u6761\u547d\u4ee4\u4ea7\u751f\u7684\u6c47\u603b\u8def\u7531172.16.0.0/16\u662f\u4e0eorimap\u4e2d\u6240\u5339\u914d\u7684\u8def\u7531\u5f3a\u5173\u8054\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981orimap\u91cc\u6240\u5339\u914d\u7684\u660e\u7ec6\u8def\u7531\u81f3\u5c11\u6709\u4e00\u6761\u662f\u6d3b\u8dc3\u7684\uff0c\u90a3\u4e48\u6c47\u603b\u8def\u7531\u5c31\u662f\u6d3b\u7684\uff0c\u800c\u5982\u679c\u6240\u5339\u914d\u7684\u8def\u7531\u5168DOWN\u4e86\uff0c\u90a3\u4e48\u6c47\u603b\u8def\u7531\u4e5f\u5c31\u6d88\u5931\u4e86\u3002\u53e6\u5916\uff0c\u6ca1\u6709\u88aborimap\u5339\u914d\u7684\u660e\u7ec6\u8def\u7531\uff0c\u5373\u4f7f\u5b83\u662f172.16.0.0/16\u7684\u5b50\u7f51\u8def\u7531\uff0c\u4e5f\u89c6\u4e3a\u4e0e\u672c\u6c47\u603b\u8def\u7531\u65e0\u5173\uff0c\u56e0\u6b64\u8fd9\u91cc\u5373\u4f7f\u4f7f\u7528 \u4e86 detail-suppressed \u5173\u952e\u5b57\uff0c\u5374\u5e76\u6ca1\u6709 \u6291\u5236\u6389 172.16.10.0/24\u53ca172.16.11.0/24\u8fd9\u4e24\u6761\u8def\u7531\u3002 aggregate attribute-policy \u00b6 \u5728**aggregate**\u547d\u4ee4\u4e2d\u4f7f\u7528**attribute-policy**\u5173\u952e\u5b57\u8c03\u7528\u4e00\u4e2aroute-policy\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u6c47\u603b\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\u3002\u4f8b\u5982\u4e0a\u56fe\u4e2d\uff0c\u5199\u4e00\u4e2aroute-policy\uff0c\u8bbe\u7f6eMED\u4e3a999\uff0c\u7136\u540e\u5728**aggregate**\u547d\u4ee4\u4e2d\u52a0\u4e0a**attribute-** **policy**\u6765\u8c03\u7528\u5b9a\u4e49\u597d\u7684route-policy\uff0c\u5c31\u53ef\u4ee5\u4e3a\u4ea7\u751f\u7684\u8fd9\u6761\u6c47\u603b\u8def\u7531\u8bbe\u7f6eMED\u503c\u3002 as-path-filter\u53ca\u6b63\u5219\u8868\u8fbe\u5f0f \u00b6 \u6b63\u5219\u8868\u8fbe\u5f0f\u6982\u8ff0 \u00b6 \u6b63\u5219\u8868\u8fbe\u5f0f\uff08regular expression\uff09\u662f\u6309\u7167\u4e00\u5b9a\u7684\u6a21\u677f\u6765\u5339\u914d\u5b57\u7b26\u4e32\u7684\u516c\u5f0f\u3002\u662f\u4e00\u79cd\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\u7684\u5de5\u5177\u3002\u6211\u4eec\u65e5\u5e38\u4e0a\u7f51\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e5f\u90fd\u7ecf\u5e38\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u6709\u4ea4\u96c6\uff0c\u4f8b\u5982\u5728\u4e00\u4e2a\u7ad9\u70b9\u6ce8\u518c\u7684\u65f6\u5019\uff0c\u8981\u8f93\u5165\u624b\u673a\u53f7\u7801\uff0c\u90a3\u4e48\u540e\u53f0\u7a0b\u5e8f\u5982\u4f55\u5224\u65ad\u7528\u6237\u8f93\u5165\u7684\u624b\u673a\u53f7\u7801\u662f\u6709\u6548\u7684\u3001\u90fd\u662f\u6570\u5b57\uff1f\u8fd9\u65f6\u5c31\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u5339\u914d\u3002 \u5728BGP\u7b56\u7565\u90e8\u7f72\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u7075\u6d3b\u7684\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u6293\u53d6\u8def\u7531\u3002\u4e00\u6761BGP\u7684\u8def\u7531\u5305\u542bAS_PATH\u5c5e\u6027\uff0c \u800c\u5728\u4e00\u4e2a\u590d\u6742\u7684\u5927\u578b\u7f51\u7edc\u4e2d\uff0cAS_PATH\u80af\u5b9a\u4e5f\u662f\u590d\u6742\u7684\uff0c\u5728\u7279\u5b9a\u7684\u9700\u6c42\u4e0b\uff0c\u53ef\u80fd\u8981\u9488\u5bf9\u7279\u5b9a\u7684AS\u6216\u8005\u7279\u5b9a\u7684AS_PATH\u5185\u5bb9\u6765\u6293\u53d6\u8def\u7531\uff0c\u6b64\u65f6\u5c31\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u4e86\u3002 \u4e00\u822c\u6765\u8bf4\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5305\u542b\u4e24\u79cd\u5b57\u7b26\uff1a\u5e38\u89c4\u5b57\u7b26\uff0c\u4ee5\u53ca\u63a7\u5236\u5b57\u7b26\u3002\u5176\u4e2d\u63a7\u5236\u5b57\u7b26\u53ef\u4ee5\u662f\u539f\u5b50\u5b57\u7b26\u3001\u4e58\u6cd5\u5b57\u7b26\u3001\u8303\u56f4\u5b57\u7b26\u7b49\u3002\u4f8b\u5982\u6b63\u5219\u8868\u8fbe\u5f0f100\uff0c\u975e\u5e38\u7b80\u5355\uff0c\u5c31\u4e00\u4e2a100\uff0c\u8fd9\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u6709\u4ec0\u4e48\u529f\u80fd\u5462\uff1f\u5b83\u80fd\u5339\u914d\u4efb\u4f55\u5305\u542b100\u8fd9\u51e0\u4e2a\u6570\u5b57\u7684\u5b57\u7b26\u4e32\uff0c\u4f8b\u5982100 200\uff0c10000\uff0c21412100\uff0c\u7b49\u7b49\uff0c\u800c\u5982\u679c\u60f3\u8981\u518d\u7cbe\u786e\u70b9\uff0c\u5c31\u53ef\u4ee5\u642d\u914d\u63a7\u5236\u5b57\u7b26\u6765\u8fdb\u4e00\u6b65\u63a7\u5236\u5339\u914d\u7684\u7ed3\u679c\u3002 \u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u80fd\u4f1a\u7528\u5230\u7684\u5404\u79cd\u5b57\u7b26\uff1a \u539f\u5b50\u5b57\u7b26 \u00b6 \u539f\u5b50\u5b57\u7b26\u793a\u4f8b\uff1a ^a.$ \u5339\u914d\u4e00\u4e2a\u4ee5a\u5f00\u59cb\uff0c\u4efb\u610f\u5355\u4e00\u5b57\u7b26\u7ed3\u675f\u7684\u5b57\u7b26\u4e32\uff0c\u5982a0\uff0ca!\u7b49 ^100_ \u5339\u914d100\u3001100 200\u3001100 300 400\u7b49 ^100$ \u5339\u914d100 100$|400$ \u5339\u914d100\u30011400\u3001300 400\u7b49 ^\\(65000\\)$ \u4ec5\u4ec5\u5339\u914d(65000) [123].[7-9] \u5339\u914d123\u4e2d\u7684\u4e00\u4e2a\u52a0\u4e0a\u4efb\u610f\u5b57\u7b26\u518d\u52a0\u4e0a7\u52309\u4e2d\u7684\u4e00\u4e2a\uff0c\u5982167\u30013\u7a7a\u683c7\u7b49 \u4e58\u6cd5\u5b57\u7b26 \u00b6 * \u5339\u914d\u524d\u9762\u5b57\u7b260\u6b21\u6216\u591a\u6b21\u51fa\u73b0 + \u5339\u914d\u524d\u9762\u5b57\u7b261\u6b21\u6216\u591a\u6b21\u51fa\u73b0 \uff1f \u5339\u914d\u524d\u9762\u5b57\u7b26\u76840\u6b21\u62161\u6b21\u51fa\u73b0 \u4e00\u4e2a\u4e58\u6cd5\u5b57\u7b26\u53ef\u4ee5\u5e94\u7528\u4e8e\u4e00\u4e2a\u5355\u5b57\u7b26\u6216\u591a\u4e2a\u5b57\u7b26\uff0c\u5982\u679c\u5e94\u7528\u4e8e\u591a\u5b57\u7b26\uff0c\u9700\u5c06\u5b57\u7b26\u4e32\u653e\u5165\uff08\uff09\u4e2d\u3002 \u4e58\u6cd5\u5b57\u7b26\u793a\u4f8b\uff1a abc*d \u5339\u914dabd\u3001abcd\u3001abccd\u3001abcccd\u7b49 abc+d \u5339\u914dabcd\u3001abccd\u3001abcccd\u7b49 abc?d \u5339\u914dabd\u3001abcd\u3001abcdefg\u7b49 a(bc)?d \u5339\u914dad\u3001abcd\u3001aaabcd\u7b49 \u8303\u56f4\u5b57\u7b26 \u00b6 \u8303\u56f4\u5b57\u7b26\u793a\u4f8b\uff1a [abcd] \u5339\u914d\u53ea\u8981\u51fa\u73b0\u4e86a\u3001b\u3001c\u3001d\u7684\u5185\u5bb9 [a-c 1-2]$ \u5339\u914da\u3001a1\u300162\u30011b\u3001xv2\u7b49 [^act]$ \u5339\u914d\u4e0d\u4ee5a\u6216c\u6216t\u7ed3\u5c3e\u7684\u5185\u5bb9 [123].[7-9] 159 220\u300191 70 \u5173\u4e8eas-path-filter \u00b6 AS_PATH\u53ef\u4ee5\u5f53\u505a\u5b57\u7b26\u4e32\u5e76\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5339\u914d\uff0c\u4f8b\u5982123 495 602\u8fd9\u4e2aAS_PATH\u5c5e\u6027\u503c\uff0c\u5b9e\u9645\u4e0a\u662f\u4e09\u4e2a\u6570\u5b57\u901a\u8fc7\u4e24\u4e2a\u7a7a\u683c\u9694\u5f00\u7684\u8fd9\u4e48\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u901a\u8fc7**as-path-filter**\u547d\u4ee4\uff0c\u642d\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5c31\u53ef\u4ee5\u5339\u914dBGP\u8def\u7531\u7684AS_PATH\u5c5e\u6027\uff0c\u6293\u51fa\u6211\u4eec\u611f\u5174\u8da3\u7684\u8def\u7531\u6765\u8fdb\u4e00\u6b65\u6267\u884c\u7b56\u7565\u3002 \u4e0a\u56fe\u5c31\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u547d\u4ee4\uff1a\u201c ip as-path-filter 1 permit 443 \u201d\u5c31\u5b9a\u4e49\u4e86\u4e00\u4e2aas-path-filter\u8fc7\u6ee4\u5668\uff0c\u5b83\u7684\u540d\u5b57\u4e3a1\uff0c\u4f7f\u7528\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u662f443\uff0c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5b9e\u9645\u4e0a\u662f\u5339\u914d\u4efb\u4f55\u542b\u6709443\u7684\u5b57\u7b26\u4e32\u3002 \u6ce8\u610f\uff0c\u5982\u679cAS_PATH\u5305\u542b\u591a\u4e2aAS\u53f7\uff0c\u90a3\u4e48\u8fd9\u4e9bAS\u53f7\u5b9e\u9645\u4e0a\u662f\u901a\u8fc7\u7a7a\u683c\u5206\u9694\u7684\uff0c\u800c\u8fd9\u4e2a\u7a7a\u683c\u7b26\u4e5f\u662f\u80fd\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u3002\u4e0b\u9762\u770b\u51e0\u4e2a\u4f8b\u5b50\uff1a ^$ \u5339\u914d\u4e0d\u5305\u542b\u4efb\u4f55AS\u53f7\u7684AS_PATH\uff0c\u4e5f\u5c31\u662f\u672cAS\u5185\u7684\u8def\u7531 .* \u4e00\u4e2a\u70b9\u548c\u4e00\u4e2a\u661f\u53f7\uff0c\u5339\u914d\u6240\u6709\uff0c\u4efb\u4f55 ^100$ \u5c31\u5339\u914d100\u7684\u8fd9\u4e2aAS_PATH _100$ \u4ee5100\u7ed3\u675f\u7684AS_PATH\uff0c\u4e5f\u5c31\u662f\u8def\u7531\u8d77\u6e90\u4e8e100AS\u7684\u8def\u7531 ^10[012349]$ \u5339\u914d100\u3001101\u3001102\u3001103\u3001104\u3001109\u8fd9\u4e9bAS_PATH ^10[^0-6]$ \u5339\u914d\u9664\u4e86100~106\u5916\u7684AS_PATH ^10. \u5339\u914d100~109\uff0c\u4ee5\u53ca10\uff0c\u56e0\u4e3a\u201c.\u201d \u4e5f\u5305\u542b\u7a7a\u683c ^(100|200)$ \u5339\u914d\u5305\u542b100\u53ca200\u7684AS_PATH 12(_34)?_56 \u5339 \u914d 12 56 \u53ca 12 34 56 \u4f7f\u7528as-path-filter\u5339\u914d\u8def\u7531 \u00b6 \u5728\u5e94\u7528\u65b9\u5f0f1\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2aas-path-filter\u5e76\u5173\u8054\u4e86\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f^100$\uff0c\u8fd9\u4e2aas-path-filter\u53ef\u4ee5\u5339\u914dAS_PATH\u4e25\u683c\u4e3a100\u7684\u8def\u7531\uff08\u4e0d\u5305\u542b\u4efb\u4f55\u5176\u4ed6\u7684AS\u53f7\u6216\u5176\u4ed6\u6570\u5b57\uff09\uff0c\u968f\u540e\u6211\u4eec\u5c06as-path-filter\u5e94\u7528\u5728\u4e86**peer**\u547d\u4ee4\u4e0a\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u53ea\u6709\u88abas-path-filter 1\u6240\u5339\u914d\u7684\u8def\u7531\uff0c\u624d\u4f1a\u88ab\u901a\u544a\u7ed9BGP\u90bb\u5c4510.1.34.4\u3002 \u5728\u5e94\u7528\u65b9\u5f0f2\u4e2d\uff0c\u6211\u4eec\u5728route-policy\u4e2d\u7684if-match\u547d\u4ee4\u8c03\u7528\u5b9a\u4e49\u597d\u7684as-path-filter\uff0c\u968f\u540e\u4f7f\u7528apply\u547d\u4ee4\u8bbe\u7f6eLP\u8def\u5f84\u5c5e\u6027\u503c\uff0c\u5e76\u5728BGP\u914d\u7f6e\u6a21\u5f0f\u4e0b\u5e94\u7528\u5728\u4e86peer\u547d\u4ee4\u4e0a\uff08import\u65b9\u5411\uff09\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u8be5\u8def\u7531\u5668\u5728\u6536\u5230BGP\u90bb\u5c4510.1.34.4\u6240\u53d1\u9001\u8fc7\u6765\u7684BGP\u8def\u7531\u4e2d\uff0c\u5c06\u6240\u6709\u88abas-path-filter\u5339\u914d\u7684\u8def\u7531\u7684LP\u8def\u5f84\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a100\u3002 as-path-filter\u914d\u7f6e\u793a\u4f8b1 \u00b6 as-path-filter\u914d\u7f6e\u793a\u4f8b2 \u00b6 \u4f7f\u7528Community\u6267\u884c\u7b56\u7565 \u00b6 \u4f7f\u7528route-policy\u8bbe\u7f6e\u8def\u7531\u7684Community\u5c5e\u6027\u503c \u00b6 \u4e3a\u8def\u7531\u8bbe\u7f6eCommunity\u5c5e\u6027\u503c \u00b6 R1\u4f7f\u7528network\u547d\u4ee4\u5411BGP\u53d1\u5e03\u4e86\u4e24\u6761\u8def\u7531\uff1a1.1.1.0/24\u53ca1.2.2.0/24\uff0c\u5e76\u5728BGP\u8fdb\u7a0b\u4e2d\u5bf9R2\u5e94\u7528export \u65b9\u5411\u7684\u7b56\u7565\uff0c\u4e3a1.1.1.0/24\u8fd9\u6761\u8def\u7531\u8bbe\u7f6e\u4e00\u4e2acommunity\u5c5e\u6027\u503c100:1\uff0c\u4ee5\u4fbf\u4e0b\u6e38\u90bb\u5c45\u80fd\u591f\u4f7f\u7528\u8fd9\u4e2a Community\u5c5e\u6027\u503c\u8fdb\u4e00\u6b65\u90e8\u7f72\u7b56\u7565\u3002 Community \u5c5e\u6027\u9ed8\u8ba4\u662f\u4e0d\u4f1a\u8ddf\u968f\u8def\u7531\u66f4\u65b0\u7ed9\u90bb\u5c45\u7684\uff0c \u56e0\u6b64\u4e00\u5b9a\u8981\u52a0\u4e0a**peer x.x.x.x advertise-** **community**\u547d\u4ee4\uff0c\u5728R1\u4e0a\u8981\u505a\u8fd9\u4e00\u6b65\u7684\u914d\u7f6e\uff0c\u5728R2\u4e0a\u4e5f\u8981\u5bf9R3\u914d\u7f6e\u8be5\u6761\u547d\u4ee4\u3002 \u4e0a\u9762\u547d\u4ee4\u4e2d\u7684**route-policy RP permit node 20**\uff0c\u5b9e\u9645\u4e0a\u6709\u70b9\u7c7b\u4f3c\u5141\u8bb8\u6240\u6709\u7684\u610f\u601d\uff0c\u5982\u679c\u4e0d\u914d\u7f6e\u8be5\u6761\u547d\u4ee4\uff0c1.2.2.0/24\u8fd9\u6761\u8def\u7531\u5c31\u4e0d\u4f1a\u88ab\u901a\u544a\u7ed9R2\u4e86\u3002 \u4e3a\u8def\u7531\u8ffd\u52a0Community\u5c5e\u6027\u503c \u00b6 R1\u66f4\u65b0\u4e86\u4e24\u6761\u8def\u7531\uff1a1.1.1.0/24\u53ca1.2.2.0/24\u7ed9R2\uff0c\u540c\u65f61.1.1.0/24\u8fd9\u6761\u8def\u7531\u643a\u5e26\u4e86\u4e00\u4e2aCommunity\u5c5e\u6027\u503c100:1\uff0c\u73b0\u5728R2\u57fa\u4e8e\u67d0\u79cd\u9700\u6c42\uff0c\u8981\u4e3a\u8fd9\u6761\u8def\u7531\u8ffd\u52a0\u4e00\u4e2ano-export\u7684community\u5c5e\u6027\u503c\u3002\u90a3\u4e48\u5728R2\u4e0a\u53ef\u4ee5\u505a\u5982\u4e0a\u914d\u7f6e\uff0c\u5173\u952e\u70b9\u5728**additive**\u5173\u952e\u5b57\uff0c\u5982\u679c\u8be5\u5173\u952e\u5b57\u4e0d\u52a0\uff0c\u5219\u662f\u8986\u76d6\u539f\u6709community\u5c5e\u6027\u503c\u3002 \u5728R3\u4e0a\u67e5\u770b\u914d\u7f6e\u7ed3\u679c\uff1a \u4f7f\u7528ip community-filter\u5339\u914d\u56e2\u4f53\u5c5e\u6027 \u00b6 \u4e0a\u6e38\u8def\u7531\u5668\u4e3a\u8def\u7531\u8bbe\u7f6e\u4e86Community\u5c5e\u6027\u503c\uff0c\u8fd9\u4e9b\u5c5e\u6027\u503c\u4f1a\u968f\u7740\u8def\u7531\u4f20\u9012\u4e0b\u6765\uff0c\u90a3\u4e48\u4e0b\u6e38\u7684\u8def\u7531\u5668\u5c31\u80fd\u591f\u6839\u636eCommunity\u5c5e\u6027\u6765\u5339\u914d\u8def\u7531\u4ece\u800c\u8fdb\u4e00\u6b65\u6267\u884c\u7b56\u7565\u3002 BGP\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5de5\u5177\uff1aip community-filter\uff0c\u8fd9\u4e2a\u5de5\u5177\u53ef\u4ee5\u7528\u6765\u5339\u914dCommunity\u5c5e\u6027\u3002 \u4f7f\u7528ip community-filter\u5339\u914d\u56e2\u4f53\u5c5e\u6027(internet\u5c5e\u6027)\uff1a \u4f7f\u7528ip community-filter\u5339\u914d\u56e2\u4f53\u5c5e\u6027(\u4e25\u683c\u5339\u914d)\uff1a \u5220\u9664\u4e00\u4e2acommunity\u503c\uff1a \u5220\u9664\u591a\u4e2acommunity\u503c\uff1a IP\u524d\u7f00\u5217\u8868 \u00b6 \u5728BGP\u7684\u90e8\u7f72\u4e2d\uff0c\u7ecf\u5e38\u6709\u8fc7\u6ee4\u7279\u5b9a\u8def\u7531\u7684\u9700\u8981\uff0c\u4e8b\u5b9e\u4e0a\u80fd\u591f\u7528\u4e8eBGP\u8def\u7531\u8fc7\u6ee4\u7684\u5de5\u5177\u8fd8\u633a\u591a\uff0c\u6211\u4eec\u5148\u770bIP \u524d\u7f00\u5217\u8868\u3002\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u3001R2\u3001R3\u5404\u81ea\u5904\u4e8e\u4e00\u4e2aAS\uff0c\u5e76\u4e14\u7ef4\u62a4\u7740EBGP\u90bb\u5c45\u5173\u7cfb\u3002R1\u5c06\u4e24\u6761\u76f4\u8fde\u8def\u7531 1.0.1.0.24\u53ca1.0.2.0/24\u5f15\u5165BGP\uff0c\u5e76\u4e14\u4f20\u9012\u7ed9\u4e86R2\u3002\u90a3\u4e48\u5728\u521d\u59cb\u60c5\u51b5\u4e0b\uff0cR2\u4f1a\u5c06\u8fd9\u4e24\u8def\u7531\u66f4\u65b0\u7ed9R3\uff0c\u4f46\u8fd9\u91cc\u6211\u4eec\u6709\u8fd9\u4e48\u4e00\u4e2a\u9700\u6c42\uff0c\u5e0c\u671bR2\u5c06\u8def\u75311.0.2.0/24\u8fc7\u6ee4\u6389\uff0c\u53ea\u66f4\u65b01.0.1.0/24\u7ed9R3\u3002 R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u6211\u4eec\u9996\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2aIP\u524d\u7f00\u5217\u8868\uff0c\u5728\u8be5\u524d\u7f00\u5217\u8868\u4e2d\uff0cdeny\u6389\u4e86\u60f3\u8981\u8fc7\u6ee4\u7684\u8def\u7531\u6761\u76ee\uff0c\u540c\u65f6\u653e\u884c\u5176\u4ed6\u8def\u7531\u6761 \u76ee\u3002\u968f\u540e\u5728BGP\u8fdb\u7a0b\u4e2d\u4f7f\u7528ip-prefix\u8fc7\u6ee4\u5de5\u5177\u8c03\u7528\u5df2\u7ecf\u5b9a\u4e49\u597d\u7684\u524d\u7f00\u5217\u8868\uff0c\u5373\u53ef\u6267\u884c\u8def\u7531\u8fc7\u6ee4\u3002 5.3.4.5 Filter-policy \u00b6 \u53e6\u5916\u4e00\u4e2a\u53ef\u7528\u4e8e\u8def\u7531\u8fc7\u6ee4\u7684\u5de5\u5177\u662ffilter-policy\u3002 \u914d\u7f6e\u793a\u4f8b1 \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u3001R2\u3001R3\u5404\u81ea\u5904\u4e8e\u4e00\u4e2aAS\uff0c\u5e76\u4e14\u7ef4\u62a4\u7740EBGP\u90bb\u5c45\u5173\u7cfb\u3002R1\u5c06\u4e24\u6761\u76f4\u8fde\u8def\u75311.0.1.0.24\u53ca 1.0.2.0/24\u5f15\u5165BGP\uff0c\u5e76\u4e14\u4f20\u9012\u7ed9\u4e86R2\u3002\u90a3\u4e48\u5728\u521d\u59cb\u60c5\u51b5\u4e0b\uff0cR2\u4f1a\u5c06\u8fd9\u4e24\u8def\u7531\u66f4\u65b0\u7ed9R3\uff0c\u4f46\u8fd9\u91cc\u6211\u4eec\u6709\u8fd9\u4e48\u4e00\u4e2a\u9700\u6c42\uff1a\u4e0d\u5e0c\u671bR3\u5b66\u4e60\u523010.0.2.0/24\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728R2\u4e0a\u90e8\u7f72filter-policy\uff0c\u5c061.0.2.0/24\u8def\u7531\u8fc7\u6ee4\u6389\u3002 R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u9996\u5148\u4f7f\u7528acl\u5b9a\u4e49\u9700\u8981\u653e\u884c\u6216\u8005\u8fc7\u6ee4\u7684\u8def\u7531\u3002\u7136\u540e\u5728BGP\u914d\u7f6e\u89c6\u56fe\u4e0b\uff0c\u4f7f\u7528**peer 10.1.23.3 filter-policy 2000** **export**\u547d\u4ee4\uff0c\u8c03\u7528\u5b9a\u4e49\u597d\u7684acl2000\uff0c\u5173\u8054\u90bb\u5c4510.1.23.3\u5e76\u4e14\u65b9\u5411\u4e3aexport\uff0c\u56e0\u6b64\u5f53R2\u66f4\u65b0BGP\u8def\u7531\u7ed9R3 \u7684\u65f6\u5019\uff0c\u53ea\u66f4\u65b0\u88abacl2000\u5141\u8bb8\u7684\u8def\u7531\u3002 \u914d\u7f6e\u793a\u4f8b2 \u00b6 Filter-policy\u9664\u4e86\u80fd\u591f\u5728BGP\u914d\u7f6e\u89c6\u56fe\u4e0b\u5173\u8054**peer**\u4f7f\u7528\uff08\u793a\u4f8b1\u6240\u793a\uff09\uff0c\u8fd8\u80fd\u76f4\u63a5\u4f7f\u7528\u3002\u5173\u8054peer\u4f7f\u7528\u7684\u65f6\u5019\u6240\u5b9a\u4e49\u7684\u8def\u7531\u8fc7\u6ee4\u529f\u80fd\u4ec5\u5bf9\u8be5\u90bb\u5c45\u6709\u6548\uff0c\u800c\u76f4\u63a5\u5728BGP\u914d\u7f6e\u89c6\u56fe\u4e0b\u4f7f\u7528\u5219\u5bf9\u6240\u6709\u90bb\u5c45\u6709\u6548\u3002\u5e76\u4e14\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\uff0c\u9664\u4e86\u80fd\u5173\u8054ACL\uff0c\u8fd8\u80fd\u5173\u8054\u524d\u7f00\u5217\u8868\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u3001R2\u3001R3\u5404\u81ea\u5904\u4e8e\u4e00\u4e2aAS\uff0c\u5e76\u4e14\u7ef4\u62a4\u7740EBGP\u90bb\u5c45\u5173\u7cfb\u3002R1\u5c06\u4e24\u6761\u76f4\u8fde\u8def\u75311.0.1.0.24\u53ca 1.0.2.0/24\u5f15\u5165BGP\uff0c\u5e76\u4e14\u4f20\u9012\u7ed9\u4e86R2\u3002\u90a3\u4e48\u5728\u521d\u59cb\u60c5\u51b5\u4e0b\uff0cR2\u4f1a\u5c06\u8fd9\u4e24\u8def\u7531\u66f4\u65b0\u7ed9R3\uff0c\u73b0\u5728\u6211\u4eec\u4e0d\u5e0c\u671b R3\u5b66\u4e60\u523010.0.2.0/24\uff0c\u540c\u6837\u662f\u8fd9\u4e2a\u9700\u6c42\uff0c\u770b\u770b\u53e6\u4e00\u79cd\u914d\u7f6e\u65b9\u5f0f\uff1a \u5728BGP\u914d\u7f6e\u89c6\u56fe\u4e0b\u76f4\u63a5\u4f7f\u7528filter-policy\u53ef\u8c03\u7528ACL\u6216ip-prefix\u524d\u7f00\u5217\u8868\u3002\u5e76\u4e14\u5bf9\u6240\u6709\u90bb\u5c45\u6709\u6548\u3002 \u8fd9\u79cd\u65b9\u5f0f\u4e00\u822c\u642d\u914dimport-route\u4f7f\u7528\uff1a R1\u5c06\u8def\u75311.0.1.0/24\u53ca1.0.2.0/24\u5f15\u5165\u4e86BGP\uff0c\u8def\u7531\u88ab\u4f20\u9012\u7ed9\u4e86R2\uff0c\u540c\u65f6R2\u4f7f\u7528**import-route**\u547d\u4ee4\u5f15\u5165\u672c\u5730\u4e24\u6761\u76f4\u8fde\u8def\u75312.0.1.0/24\u53ca.0.2.0/24\u5230BGP\uff0c\u73b0\u5728\u8981\u9488\u5bf9\u8fd9\u4e9b\u91cd\u53d1\u5e03\u7684\u76f4\u8fde\u8def\u7531\u8fdb\u884c\u8fc7\u6ee4\uff0c\u5c062.0.2.0/24\u8fc7\u6ee4\u6389\uff0c\u5176\u4ed6\u653e\u884c\u3002 5.3.4.6 Route-policy \u00b6 route-policy\u5728BGP\u7684\u7b56\u7565\u90e8\u7f72\u4e2d\u626e\u6f14\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u89d2\u8272\uff0c\u5e94\u8be5\u8bf4\u662fBGP\u6700\u91cd\u8981\u7684\u7b56\u7565\u5de5\u5177\u4e4b\u4e00\uff0c\u53ef\u4ee5\u6267\u884cBGP\u8def\u7531\u7b56\u7565\uff08\u8bbe\u7f6eBGP\u5404\u79cd\u8def\u5f84\u5c5e\u6027\u503c\uff09\uff0c\u4e5f\u53ef\u7528\u4e8e\u8def\u7531\u7684\u8fc7\u6ee4\u7b49\uff0c\u529f\u80fd\u5f3a\u5927\u3002 \u5728BGP\u4e2d\u4f7f\u7528network\u547d\u4ee4\u5173\u8054route-policy \u00b6 \u5728\u4f7f\u7528**network**\u547d\u4ee4\u5c06\u8def\u7531\u53d1\u5e03\u5230BGP\u65f6\uff0c\u53ef\u4ee5\u5173\u8054route-policy\u6765\u8bbe\u7f6e\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u5c06\u672c\u5730\u4e24\u6761\u76f4\u8fde\u8def\u75311.0.1.0/24\u53ca1.0.2.0/24\u90fdnetwork\u8fdbBGP\uff0c\u5e76\u4e14\u8981\u5c06\u8fd9\u4e24\u6761\u8def\u7531\u5206\u522b\u6253\u4e0a Community\u5c5e\u6027\u503c\uff0c1.0/24\u7684\u8def\u7531\u6253\u4e0acommunity 100:1\uff0c2.0/24\u7684\u8def\u7531\u6253\u4e0acommunity 100:2\uff0cR1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5728BGP\u4e2d\u4f7f\u7528peer\u547d\u4ee4\u5173\u8054route-policy \u00b6 \u540c\u6837\u662f\u4e0a\u9762\u7684\u73af\u5883\u548c\u9700\u6c42\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u53e6\u4e00\u79cd\u65b9\u6cd5\u6765\u914d\u7f6e\uff1a \u4ecd\u7136\u662f\u4f7f\u7528IP\u524d\u7f00\u5217\u8868\u6765\u5339\u914d\u8def\u7531\uff0c\u7136\u540e\u5b9a\u4e49\u4e00\u4e2aroute-policy\u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u8bbe\u7f6e\u4e0d\u540c\u7684Community \u5c5e\u6027\u503c\uff0c\u7136\u540e\u5728BGP\u7684\u914d\u7f6e\u89c6\u56fe\u4e0b\uff0c\u5148\u4f7f\u7528network\u547d\u4ee4\u53d1\u5e03\u4e24\u6761\u76f4\u8fde\u8def\u7531\u5230BGP\uff0c\u4f46\u662f**network**\u547d\u4ee4\u4e0d\u5173\u8054route-policy\uff0c\u800c\u662f\u5728**peer**\u547d\u4ee4\u4e2d\u5173\u8054route-policy\uff0c\u8fd9\u6837\u4e00\u6765\u8be5\u7b56\u7565\u5c06\u53ea\u5bf9R2\u8fd9\u4e2aBGP\u90bb\u5c45\u751f\u6548\u3002 \u5728BGP\u4e2d\u4f7f\u7528peer\u547d\u4ee4\u5173\u8054route-policy\u6765\u8fc7\u6ee4\u8def\u7531 \u00b6 R1\u5728BGP\u4e2d\u53d1\u5e03\u4e86\u4e09\u6761\u8def\u7531\uff0c\u73b0\u5728\u57fa\u4e8e\u67d0\u79cd\u539f\u56e0\uff0c\u6211\u4eec\u4e0d\u5e0c\u671bBGP\u90bb\u5c45R2\u5b66\u4e60\u52301.0.1.0/24\u8fd9\u6761\u8def\u7531\uff0c \u90a3\u4e48\u53ef\u4ee5\u8003\u8651\u5982\u4e0b\u914d\u7f6e\uff1a BGP \u8def\u7531\u53cd\u5c04\u5668 \u8def\u7531\u53cd\u5c04\u5668\u6982\u8ff0 \u00b6 BGP\u5728AS\u4e4b\u95f4\u7684\u8def\u7531\u9632\u73af\u4f9d\u8d56AS_PATH\u5c5e\u6027\uff0c\u4f46\u662fAS_PATH\u5c5e\u6027\u53ea\u5f53\u8def\u7531\u5728EBGP\u90bb\u5c45\u4e4b\u95f4\u4f20\u9012\u65f6\u624d\u4f1a\u53d1\u751f\u6539\u53d8\uff0c\u5728AS\u5185\u90e8\uff0cAS_PATH\u662f\u4e0d\u4f1a\u6539\u53d8\u7684\uff0c\u90a3\u4e48\u5728AS\u5185\u90e8\u7684\u8def\u7531\u9632\u73af\uff0c\u5c31\u65e0\u6cd5\u4f9d\u8d56AS_PATH\u4e86\uff0c\u56e0\u6b64BGP\u5b9a\u4e49**IBGP\u6c34\u5e73\u5206\u5272\uff1a\u4e00\u53f0BGP\u8def\u7531\u5668\u4ece\u5b83\u7684IBGP\u90bb\u5c45\u5b66\u4e60\u5230\u7684BGP\u8def\u7531\u4e0d\u80fd\u518d\u4f20\u9012\u7ed9\u4efb\u4f55IBGP\u90bb** \u5c45 \u3002 \u7531\u4e8e\u5b58\u5728IBGP\u6c34\u5e73\u5206\u5272\uff0c\u4f7f\u5f97AS\u5185\u7684BGP\u8def\u7531\u5668\u4e4b\u95f4\u4e0d\u5f97\u4e0d\u4e24\u4e24\u5efa\u7acbIBGP\u8fde\u63a5\uff08IBGP\u5168\u4e92\u8054\uff09\uff0c\u4ee5\u6c42\u83b7\u5f97\u5b8c\u6574\u7684BGP\u8def\u7531\u66f4\u65b0\uff0c\u7136\u800c\u8fd9\u662f\u4e2a\u6269\u5c55\u6027\u975e\u5e38\u4f4e\u7684\u505a\u6cd5\uff0c\u540c\u65f6\u4e5f\u7ed9\u7f51\u7edc\u8bbe\u5907\u5e26\u6765\u4e86\u8d1f\u62c5\uff0c\u89e3\u51b3IBGP\u6269\u5c55\u6027\u95ee\u9898\u7684\u4e24\u79cd\u6709\u6548\u7684\u529e\u6cd5\u662f\u8def\u7531\u53cd\u5c04\u5668\u53ca\u8054\u90a6\u3002 \u8def\u7531\u53cd\u5c04\u5668\u76f8\u6bd4\u4e8e\u8054\u90a6\uff0c\u4f18\u52bf\u5728\u4e8e\uff0c\u5728\u8054\u90a6\u4e2d\u6240\u6709\u8def\u7531\u5668\u90fd\u9700\u8981\u652f\u6301\u8054\u90a6\u529f\u80fd\uff0c\u800c\u8def\u7531\u53cd\u5c04\u5668\u53ea\u9700\u8981RR\u652f\u6301\u53cd\u5c04\u5668\u529f\u80fd\u5373\u53ef\uff0c\u53e6\u5916\uff0c\u8def\u7531\u53cd\u5c04\u5668\u7684\u5b9e\u73b0\u673a\u5236\u4e5f\u76f8\u5bf9\u7b80\u5355\u4e00\u4e9b\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u7531\u4e8eIBGP\u6c34\u5e73\u5206\u5272\u7684\u9650\u5236\uff0c\u4f7f\u5f97R4\u5728\u6536\u5230IBGP\u90bb\u5c45R3\u53d1\u6765\u7684\u8def\u7531\u66f4\u65b0\u540e\uff0c\u4e0d\u80fd\u518d\u53d1\u9001\u7ed9IBGP \u90bb\u5c45R5\u3002\u5982\u6b64\u4e00\u6765R5\u5c31\u65e0\u6cd5\u6b63\u5e38\u5b66\u4e60\u5230\u8def\u7531\uff0c\u9664\u975e\u5728R3-R5\u4e4b\u95f4\u4e5f\u5efa\u7acb\u4e00\u6761IBGP\u8fde\u63a5\uff0c\u8fd9\u6837\u5c31\u5f62\u6210\u4e86IBGP \u5168\u4e92\u8054\u3002 \u91c7\u7528\u8def\u7531\u53cd\u5c04\u6280\u672f\u5373\u53ef\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u9996\u5148\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2aRR\uff08Route Reflector\uff0c\u8def\u7531\u53cd\u5c04\u5668\uff09\uff0c\u540c\u65f6\u5b9a\u4e49 \u8fd9\u4e2aRR\u7684Client\uff08\u5ba2\u6237\uff09\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u5f53RR\u6536\u5230\u5979\u7684Client\u53d1\u9001\u8fc7\u6765\u7684\u8def\u7531\u65f6\uff0c\u5c31\u53ef\u4ee5\u50cf\u4e00\u9762\u955c\u5b50\u4e00\u6837\uff0c\u5c06\u8def\u7531\u53cd\u5c04\u7ed9\u5176\u4ed6IBGP\u8def\u7531\u5668\u3002\u5982\u4e0a\u56fe\u6240\u793a\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR4\u53ef\u4ee5\u914d\u7f6e\u4e3aRR\uff0c\u4e0e\u5b83\u7684Client R1\u6784\u6210\u4e86\u4e00\u4e2a\u8def\u7531\u53cd\u5c04\u7c07\u3002\u601d\u8003\u8def\u7531\u53cd\u5c04\u5668\u65f6\uff0c\u5c06\u7c07\u5f53\u4f5c\u4e00\u4e2a\u903b\u8f91\u7684\u6574\u4f53\u53bb\u8003\u8651\u5373\u53ef\uff0cRR\u548cClient\u5171\u540c\u6784\u6210\u53cd\u5c04\u7c07\uff0c\u4f46\u662f\u53ea\u6709RR\u77e5\u9053\uff08\u914d\u7f6e\u53ea\u662f\u5728RR\u4e0a\u5b8c\u6210\uff09\u8fd9\u79cd\u8def\u7531\u53cd\u5c04\u5668\u4e0e\u5ba2\u6237\u7684\u5173\u7cfb\u3002\u6ce8\u610fRR\u53ea\u901a\u544a\u6216\u53cd\u5c04\u5b83\u6240\u77e5\u9053\u7684\u6700\u4f73\u8def\u5f84\u3002 \u4e3a\u4e86\u7ef4\u62a4\u4e00\u81f4\u7684BGP\u62d3\u6251\uff0cRR\u5728\u53cd\u5c04\u8def\u7531\u7684\u65f6\u5019\u4e0d\u4fee\u6539\u67d0\u4e9bBGP\u8def\u5f84\u5c5e\u6027\uff0c\u8fd9\u4e9b\u5c5e\u6027\u5305\u62ecNEXT_HOP\u3001 AS_PATH\u3001LOCAL_PREF\u548cMED\uff0c\u5e76\u4e14\u589e\u52a0\u4e86ORIGINATOR_ID\u548cCLUSTER_LIST\u5c5e\u6027\u7528\u4e8e\u9632\u73af\u3002 \u8def\u7531\u53cd\u5c04\u5668\u7684\u53cd\u5c04\u89c4\u5219 \u00b6 \u6211\u4eec\u5148\u770b\u4e00\u4e0b\u8def\u7531\u53cd\u5c04\u7684\u89c4\u5219\uff1a \u5982\u679c\u8def\u7531\u5b66\u4e60\u81ea\u975eClient IBGP\u90bb\u5c45\uff0c\u5219**\u53cd\u5c04**\u7ed9\u6240\u6709Client\uff1b \u5982\u679c\u8def\u7531\u5b66\u4e60\u81eaClient\uff0c\u5219**\u53cd\u5c04**\u7ed9\u6240\u6709\u975eClient IBGP\u90bb\u5c45\u548c\u9664\u4e86\u8be5Client\u4ee5\u5916\u7684\u6240\u6709Client\uff08\u6211\u53f8\u8bbe\u5907\u53ef\u4ee5\u5173\u95edRR\u5728Client\u4e4b\u95f4\u7684\u8def\u7531\u53cd\u5c04\u884c\u4e3a\uff09\uff1b \u5982\u679c\u8def\u7531\u5b66\u4e60\u81eaEBGP\u90bb\u5c45\uff0c\u5219**\u53d1\u9001**\u7ed9\u6240\u6709Client\u548c\u975eClient IBGP\u90bb\u5c45\u3002\u6ce8\u610f\u7ea2\u8272\u5173\u952e\u5b57\uff0c\u9700\u533a\u5206\u53cd\u5c04\u548c\u53d1\u9001\u7684\u533a\u522b\u3002 \u4e0b\u9762\u770b\u51e0\u4e2a\u4f8b\u5b50\uff1a \u6ce8\u610f\u6b64\u5904\u201c\u53cd\u5c04\u201d\u548c\u201c\u53d1\u9001\u201d\u7684\u533a\u522b\u3002\u201c\u53d1\u9001\u201d\u6307\u7684\u662f\u4f20\u7edf\u60c5\u51b5\u4e0b\uff08\u76f8\u5f53\u4e8eRR\u4e0d\u5b58\u5728\u7684\u573a\u666f\u4e0b\uff09\u7684BGP\u8def\u7531\u4f20\u9012\u884c\u4e3a\uff0c\u800c\u201c\u53cd\u5c04\u201d\u6307\u7684\u662f\u9075\u5faa\u8def\u7531\u53cd\u5c04\u89c4\u5219\u7684\u60c5\u51b5\u4e0b\uff0cRR\u6267\u884c\u7684\u8def\u7531\u53cd\u5c04\u52a8\u4f5c\uff0c\u88ab\u53cd\u5c04\u51fa\u53bb\u7684\u8def\u7531\u4f1a\u88abRR\u63d2\u5165\u7279\u6b8a\u7684\u8def\u5f84\u5c5e\u6027\u3002 \u8def\u7531\u53cd\u5c04\u5668\u73af\u5883\u4e0b\u7684\u9632\u73af \u00b6 \u7531\u4e8eAS_PATH\u5c5e\u6027\u5728AS\u5185\u90e8\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\uff08\u4ec5\u5f53\u8def\u7531\u79bb\u5f00\u672cAS\u624d\u4f1a\u88ab\u4fee\u6539\uff09\uff0c\u56e0\u6b64AS\u5185\u624d\u6709\u6c34\u5e73\u5206\u5272\u7684\u673a\u5236\u7528\u4e8e\u9632\u6b62\u73af\u8def\uff0c\u800c\u8def\u7531\u53cd\u5c04\u5668\u5b9e\u9645\u4e0a\u662f\u653e\u5bbd\u4e86\u6c34\u5e73\u5206\u5272\u539f\u5219\uff0c\u8fd9\u5c31\u4f1a\u5f15\u5165\u8def\u7531\u73af\u8def\u9690\u60a3\uff0c\u56e0\u6b64\u8def\u7531\u53cd\u5c04\u5668\u9700\u4f7f\u7528\u4ee5\u4e0b\u4e24\u4e2a\u5c5e\u6027\u9632\u6b62\u73af\u8def\uff1aORIGINATOR_ID\u548cCLUSTER_LIST\u662f\u8def\u7531\u53cd\u5c04\u5668\u4f7f\u7528\u7684\u53ef\u9009\u975e\u4f20\u9012\u5c5e\u6027\uff0c\u7528\u6765\u9632\u6b62\u73af\u8def\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u4e3aR2\u7684Client\uff0cR2\u4e3aRR\u3002R1\u4f20\u9012\u4e00\u6761\u8def\u7531\u7ed9R2\uff0c\u6839\u636e\u8def\u7531\u53cd\u5c04\u5668\u7684\u53cd\u5c04\u89c4\u5219\uff0cR2\u4f5c\u4e3aRR\u5c06\u6765\u81eaClient \u7684\u8def\u7531\u53cd\u5c04\u7ed9\u975eClient R3 \uff0c \u5e76\u4e14\u4e3a\u53cd\u5c04\u7684\u8def\u7531\u52a0\u4e0a\u4e24\u4e2a\u65b0\u7684\u8def\u5f84\u5c5e\u6027\uff1a Originator_ID \u53ca Cluster_list\u3002\u4e0b\u9762\u6211\u4eec\u5206\u522b\u8bb2\u89e3\u4e00\u4e0b\u8fd9\u4e24\u4e2a\u5c5e\u6027\u3002 Originator_ID\u5c5e\u6027 \u00b6 \u6bcf\u5f53\u4e00\u6761\u8def\u7531\u88abRR\u53cd\u5c04\u65f6\uff0cRR\u4f1a\u4e3a\u53cd\u5c04\u540e\u7684\u8def\u7531\u521b\u5efa\u4e00\u4e2aOriginator_ID\u5c5e\u6027\uff0c\u503c\u4e3a\u8be5\u8def\u7531\u7684\u59cb\u53d1IBGP\u8def\u7531\u5668\u7684BGP Router-ID\u3002\u5f53\u4e00\u53f0\u8def\u7531\u5668\u6536\u5230\u90bb\u5c45\u53d1\u6765\u7684IBGP\u8def\u7531\u4e14\u8def\u7531\u7684Originator_ID\u5c5e\u6027\u503c\u4e0e\u81ea\u5df1\u7684Router_ID\u76f8\u540c\u65f6\uff0c\u5b83\u610f\u8bc6\u5230\u53d1\u751f\u4e86\u8def\u7531\u73af\u8def\uff0c\u56e0\u6b64\u5ffd\u7565\u8be5\u6761\u8def\u7531\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c R1\u53d1\u5e03\u4e86\u4e00\u6761BGP\u8def\u7531\uff0c\u8fd9\u6761BGP\u8def\u7531\u5728\u88abR2\u53cd\u5c04\u540e\uff0c\u88ab\u6dfb\u52a0\u4e86\u4e24\u4e2a\u5c5e\u6027\uff0c\u5176\u4e2d Originator_ID\u5c5e\u6027\u503c\u4e3aR1\u7684Router-ID\uff0c\u73b0\u5728\u5047\u8bbeAS123\u662f\u4e00\u4e2a\u9ad8\u5197\u4f59\u5ea6\u7684\u62d3\u6251\u73af\u5883\uff08\u4f8b\u5982\uff0c\u53ef\u80fd\u90e8\u7f72\u4e86\u591a\u4e2a\u8def\u7531\u53cd\u5c04\u851f\uff09\uff0c\u800c\u8fd9\u6761\u8def\u7531\u53c8\u88ab\u4f20\u56de\u4e86R1\u3002R1\u67e5\u770b\u8be5\u8def\u7531\uff0c\u53d1\u73b0\u8def\u7531\u643a\u5e26\u4e86Originator_ID\u5c5e\u6027\u5e76\u4e14\u503c\u4e0e\u81ea\u5df1\u7684Router-ID\u76f8\u7b49\uff0c\u4e8e\u662f\u77e5\u9053\u5b58\u5728\u4e86\u8def\u7531\u73af\u8def\u56e0\u6b64\u5ffd\u7565\u8be5\u8def\u7531\u66f4\u65b0\u3002 Originator_ID\u53caCluster_List\u5c5e\u6027\u5c06\u4f1a\u5f71\u54cdBGP\u8def\u5f84\u51b3\u7b56\u3002 Cluster_List\u5c5e\u6027 \u00b6 \u8def\u7531\u53cd\u5c04\u7c07\uff08Cluster\uff09\u5305\u62ec\u53cd\u5c04\u5668RR\u53ca\u5176Client\u3002\u6bcf\u4e00\u4e2a\u7c07\u90fd\u6709\u552f\u4e00\u7684\u7c07ID\uff08Cluster_ID\uff09\u3002\u6bcf\u5f53\u4e00\u6761\u8def\u7531\u88abRR\u53cd\u5c04\u540e\uff0c\u8be5\u8def\u7531\u53cd\u5c04\u7c07\u7684Cluster_ID\u5c31\u4f1a\u88ab\u6dfb\u52a0\u81f3\u8def\u7531\u7684Cluster_List\u5c5e\u6027\u4e2d\u3002\u5f53RR\u63a5\u6536\u5230\u4e00\u6761\u8def\u7531\u65f6\uff0cRR\u4f1a\u68c0\u67e5Cluster_List\uff0c\u5982\u679cCluster_List\u4e2d\u5df2\u7ecf\u6709\u672c\u5730Cluster_ID\uff0c\u5219\u5ffd\u7565\u8be5\u8def\u7531\uff1b\u5982\u679c\u6ca1\u6709\u672c\u5730Cluster_ID\uff0c\u5219\u5c06\u5176\u52a0\u5165Cluster_List\uff0c\u7136\u540e\u53cd\u5c04\u8be5\u8def\u7531\u3002 \u4e0a\u56fe\u4e2d\uff0cR1\u53d1\u5e03\u4e86\u4e00\u6761BGP\u8def\u7531\uff0c\u8be5\u8def\u7531\u88abR2\u53cd\u5c04\u540e\uff0c\u88ab\u6dfb\u52a0\u4e24\u4e2a\u5c5e\u6027\uff1aOriginator_ID\u53caCluster_List\uff0c \u5176\u4e2dCluster_List\u5c5e\u6027\u503c\u4e2d\u63d2\u5165\u4e86Cluster_ID 2.2.2.2\uff0c\u8fd9\u4e2aCluster_ID\u9ed8\u8ba4\u65f6\u662fRR\u7684Router-ID\uff0c\u6240\u4ee5\u8fd9\u91cc\u503c\u4e3a2.2.2.2\u3002\u5047\u8bbeAS123\u5185\u6709\u4e00\u4e2a\u9ad8\u5ea6\u5197\u4f59\u7684\u7f51\u7edc\u73af\u5883\uff08\u53ef\u80fd\u90e8\u7f72\u4e86\u591a\u4e2a\u8def\u7531\u53cd\u5c04\u851f\uff09\uff0c\u8fd9\u6761\u8def\u7531\u53c8\u88ab\u4f20\u56de\u4e86R2\uff0cR2\u6536\u5230\u8def\u7531\u540e\u53d1\u73b0\u8def\u7531\u643a\u5e26\u4e86Cluster_List\u5c5e\u6027\uff0c\u5e76\u4e14\u5c5e\u6027\u503c\u4e2d\u5305\u542b\u81ea\u5df1\u7684Cluster_ID\uff0c \u5b83\u5c06\u5ffd\u7565\u8be5\u66f4\u65b0\u3002 Cluster_List\u5c5e\u6027\u5bf9\u8def\u7531\u4f18\u9009\u7684\u5f71\u54cd \u00b6 \u73af\u5883\u63cf\u8ff0\uff1aR2\u4e3aRR\uff0c\u8bbe\u7f6eR1\u4e3a\u5176Client\uff1bR3\u4e3aRR\uff0c\u8bbe\u7f6eR1\u4e3a\u5176Client\uff1bR4\u4e3aRR\uff0c\u8bbe\u7f6eR3\u4e3a\u5176Client\uff1b\u4e5f \u5c31\u662f\u8bf4\uff0c\u5728\u8be5\u7f51\u7edc\u4e2d\uff0c\u5b58\u5728\u591a\u4e2a\u8def\u7531\u53cd\u5c04\u851f\u3002\u6240\u6709\u7684\u8def\u7531\u5668\u7684Loopback0\u53e3\u5730\u5740\u4e3ax.x.x.x\uff08\u8def\u7531\u5668\u7684Router- ID\u4e0e\u8be5\u5730\u5740\u76f8\u540c\uff09\uff0cx\u4e3a\u8bbe\u5907\u7f16\u53f7\uff0cIBGP\u90bb\u5c45\u5173\u7cfb\u57fa\u4e8e\u8be5Loopback\u53e3\u5efa\u7acb\u3002 \u73b0\u5728R1\u5c06\u8def\u753111.11.11.0/24\u5f15\u5165BGP\uff0c\u8def\u7531\u4f1a\u901a\u8fc7\u4e24\u6761\u8def\u5f84\u6700\u7ec8\u4f20\u9012\u7ed9R5\uff0c\u6211\u4eec\u770b\u770bR5\u5bf9\u8fd9\u4e24\u6761\u8def\u5f84\u662f\u5982\u4f55\u4f18\u9009\u7684\uff1f \u6211\u4eec\u770b\u5230\u6700\u7ec8R5\u4f18\u9009\u7684\u662f\u7531R2\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\uff0c\u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u4e3a\u4ec0\u4e48\u4eceR4\u4f20\u9012\u8fc7\u6765\u7684\u8fd9\u6761 \u8def\u7531\u6ca1\u6709\u88ab\u4f18\u9009\uff0c\u56e0\u4e3a\uff1a\u201cnot preferred for Cluster List\u201d\uff0c\u5b9e\u9645\u4e0a\u662f\u8f93\u5728\u4e86Cluster_List\u7684\u957f\u5ea6\u4e0a\u3002R1\u53d1\u9001\u7684\u8def\u7531\u4f20\u9012\u7ed9\u4e86R2\uff0c\u88abR2\u53cd\u5c04\u540e\uff0c\u8def\u7531\u4f1a\u88ab\u63d2\u5165\u4e24\u4e2a\u8def\u5f84\u5c5e\u6027\uff1a Originator_ID\u53caCluster_List\uff0c\u5176\u4e2d Cluster_List\u5c5e\u6027\u503c\u4e3a2.2.2.2\uff0c\u7136\u540e\u8fd9\u6761\u8def\u7531\u88ab\u53cd\u5c04\u7ed9\u4e86R5\uff1b\u53e6\u4e00\u8fb9\uff0cR1\u53d1\u9001\u7684\u8def\u7531\u4f20\u9012\u7ed9\u4e86R3\uff0c\u88abR3\u53cd\u5c04\u540e\u63d2\u5165\u4e86\u4e24\u4e2a\u8def\u5f84\u5c5e\u6027\uff1aOriginator_ID\u53caCluster_List\uff0c\u5176\u4e2dCluster_List\u5c5e\u6027\u503c\u4e3a3.3.3.3\uff0c\u63a5\u7740\uff0cR4\u6536\u5230\u4e86\u8fd9\u6761\u8def\u7531\uff0c\u7531\u4e8eR3\u662f\u5b83\u7684Client\uff0c\u56e0\u6b64R4\u7ee7\u7eed\u53cd\u5c04\u8be5\u8def\u7531\uff0c\u5728\u53cd\u5c04\u65f6\u5b83\u53d1\u73b0\u8def\u7531\u4e2d\u5df2\u7ecf\u6709\u4e86Cluster_List \u5c5e\u6027\uff0c\u56e0\u6b64\u5b83\u5c06\u672c\u5730Cluster_ID\u63d2\u5165\u5df2\u6709\u7684Cluster_List\u5c5e\u6027\u4e2d\uff0c\u90a3\u4e48\u8fd9\u6837\u4e00\u6765\u8fd9\u6761\u8def\u7531\u7684Cluster_List\u5c31\u53d8\u6210\u4e86\u201c4.4.4.4 3.3.3.3\u201d\uff0c\u6700\u540e\uff0c\u8def\u7531\u88ab\u66f4\u65b0\u7ed9\u4e86R5\u3002 \u73b0\u5728R5\u6536\u5230\u4e86\u5173\u4e8e1.1.1.0/24\u8def\u7531\u7684\u4e24\u6761\u66f4\u65b0\uff0c\u5b83\u4f1a\u770b\u770b\u8c01\u66f4\u4f18\u3002BGP\u6709\u4e00\u5957\u590d\u6742\u7684\u89c4\u5219\u6765\u5224\u5b9a\u8fd9\u79cd\u60c5\u51b5\uff0c \u6211\u4eec\u79f0\u4e3aBGP\u7684\u9009\u8def\u89c4\u5219\u3002\u9009\u8def\u89c4\u5219\u5305\u542b\u591a\u6761\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0cCluster_List\u6240\u5305\u542b\u7684Cluster_ID \u8d8a\u5c11\uff0c\u6216\u8005\u8bf4Cluster_List\u8d8a\u77ed\uff0c\u5219\u8def\u7531\u8d8a\u4f18\u3002 \u4e0a\u9762\u5c31\u662f\u5728\u4e00\u4e2aUpdate\u62a5\u6587\u4e2d\uff0c\u8fd9\u4e24\u4e2a\u5c5e\u6027\u7684\u5448\u73b0\u3002 \u8def\u7531\u53cd\u5c04\u5668\u7684\u914d\u7f6e \u00b6 \u6240\u6709\u8def\u7531\u5668\u7684Loopback0\u53e3\u5730\u5740\u4e3ax.x.x.x/32\uff0cx\u4e3a\u8bbe\u5907\u7f16\u53f7\u3002 AS123\u5185\u8dd1\u4e00\u4e2aOSPF\uff0c\u5ba3\u544a\u76f4\u8fde\u63a5\u53e3\uff0c\u4ee5\u53ca\u5404\u81ea\u7684Loopback0\u63a5\u53e3\u3002 R1\u3001R2\u3001R3\u6839\u636e\u4e0a\u56fe\u6240\u793a\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u90bb\u5c45\u5173\u7cfb\u57fa\u4e8eLoopback0\u63a5\u53e3\u5efa\u7acb\u3002 \u5728R1\u4e0a\u53d1\u5e0311.11.11.0/24\u8def\u7531\u8fdbBGP\uff0c\u521d\u59cb\u60c5\u51b5\u4e0bR2\u80fd\u591f\u5b66\u4e60\u8fd9\u6761BGP\u8def\u7531\uff0c\u4f46\u662fR3\u65e0\u6cd5\u5b66\u4e60\u5230\u3002\u5c06R2\u914d\u7f6e\u4e3aRR\uff0cR1\u4f5c\u4e3aR2\u7684Client\uff0c\u4f7f\u5f97R3\u80fd\u591f\u5b66\u4e60\u523011.11.11.0/24\u8def\u7531\u3002 R1\u7684\u914d\u7f6e\uff08\u7701\u7565OSPF\u53ca\u63a5\u53e3\u7684\u914d\u7f6e\uff09\uff1a R2\u7684\u914d\u7f6e\uff08\u7701\u7565OSPF\u53ca\u63a5\u53e3\u7684\u914d\u7f6e\uff09\uff1a R3\u7684\u914d\u7f6e\uff08\u7701\u7565OSPF\u53ca\u63a5\u53e3\u7684\u914d\u7f6e\uff09\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5373\u53ef\u5728R3\u4e0a\u9a8c\u8bc1\u4e00\u4e0b\uff0c\u67e5\u770b\u8def\u753111.11.11.0\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a \u53e6\u4e00\u4e2a\u9700\u8981\u5173\u6ce8\u7684\u914d\u7f6e\u662f\u914d\u7f6e\u8def\u7531\u53cd\u5c04\u7c07\u7684Cluster_ID\uff0c\u8fd9\u4e5f\u662f\u5728RR\u4e0a\u5b8c\u6210\u7684\u914d\u7f6e\u3002\u5f53RR\u53cd\u5c04\u4e00\u6761\u8def\u7531\u65f6\uff0c \u5982\u679c\u8be5\u8def\u7531\u4e0d\u5b58\u5728Originator_ID\u53caCluster_list\u5c5e\u6027\uff0c\u5219\u63d2\u5165\u8fd9\u4e24\u4e2a\u5c5e\u6027\uff0c\u540c\u65f6Cluster_list\u5c5e\u6027\u503c\u4e2d\u5199\u5165\u672c\u8def\u7531\u53cd\u5c04\u7c07\u7684Cluster_ID\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cCluster_ID\u4e3aRR\u7684Router-ID\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\uff0c\u53ef\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\uff1b\u5982 \u679cRR\u5728\u53cd\u5c04\u8def\u7531\u65f6\uff0c\u88ab\u53cd\u5c04\u8def\u7531\u4e2d\u5df2\u7ecf\u5b58\u5728Cluster_List\u5c5e\u6027\u4e86\uff0c\u90a3\u4e48RR\u5c06Cluster_ID\u63d2\u5165\u5230\u5df2\u6709\u7684 CLuster_List\u4e2d\u3002 BGP \u8054\u90a6 BGP\u8054\u90a6\u6982\u8ff0 \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cAS345\u662f\u4e00\u4e2aTransit AS\uff0c\u4e5f\u5c31\u662f\u4e2d\u8f6cAS\uff0cR3-R4\uff0cR4-R5\u5404\u7ef4\u62a4\u4e00\u4e2aIBGP\u90bb\u5c45\u5173\u7cfb\u3002 \u7531\u4e8eIBGP\u6c34\u5e73\u5206\u5272\u89c4\u5219\u7684\u9650\u5236\uff0c\u4f7f\u5f97R4\u65e0\u6cd5\u5728\u5c06\u4eceR3\u5b66\u4e60\u5230\u7684IBGP\u8def\u7531\u518d\u66f4\u65b0\u7ed9\u81ea\u5df1\u7684\u53e6\u4e00\u4e2aIBGP\u90bb\u5c45 R5\u3002\u4e0a\u4e00\u5c0f\u8282\u5df2\u7ecf\u8ddf\u5927\u5bb6\u63a2\u8ba8\u8fc7\u201cBGP\u8def\u7531\u53cd\u5c04\u5668\u201d\uff0c\u8fd9\u91cc\u770b\u53e6\u4e00\u4e2a\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u6cd5\uff1aBGP\u8054\u90a6\u3002 \u901a\u8fc7\u5c06AS345\u8fdb\u884c\u91cd\u65b0\u8bbe\u8ba1\uff0c\u6211\u4eec\u5c06\u5176\u53d8\u6210\u4e00\u4e2a\u8054\u90a6AS\uff0c\u53ef\u4ee5\u5f62\u8c61\u7684\u628a\u5b83\u79f0\u4e3a\u201c\u5927AS\u201d\uff0c\u5728\u8fd9\u4e2a\u201c\u5927AS\u201d \u4e2d\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6765\u90e8\u7f72\u201c\u5c0fAS\u201d\uff0c\u4e5f\u5c31\u662f\u8054\u90a6\u6210\u5458AS\uff08Confederation Member AS\uff09\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002\u8fd9\u6837 \u4e00\u6765AS345\u5185\u7684BGP\u90bb\u5c45\u5173\u7cfb\u5c31\u53d1\u751f\u4e86\u53d8\u5316\uff0cR3-R4\uff0c\u5c5e\u4e8e\u6210\u5458AS64512\uff0c\u5b83\u4eec\u4e4b\u95f4\u7ef4\u62a4\u8054\u90a6\u7684IBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u800cR5\u5355\u72ec\u5904\u4e8e\u6210\u5458AS64513\uff0c\u5b83\u4e0eR4\u4e4b\u95f4\u7ef4\u62a4\u7684\u662f\u8054\u90a6EBGP\u90bb\u5c45\u5173\u7cfb\u3002\u6ce8\u610f\uff0c\u8054\u90a6EBGP\u90bb\u5c45\u5173\u7cfb\u4e0e\u5e38\u89c4\u7684EBGP\u90bb\u5c45\u5173\u7cfb\u662f\u6709\u6240\u4e0d\u540c\u7684\u3002\u90a3\u4e48\u65e2\u7136R4-R5\u4e4b\u95f4\u7684\u90bb\u5c45\u5173\u7cfb\u4e3a\u8054\u90a6EBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u5c31\u4e0d\u518d\u6709\u201cIBGP\u6c34\u5e73\u5206\u5272\u89c4\u5219\u201d\u7684\u9650\u5236\u4e86\uff0cR4\u4eceIBGP\u90bb\u5c45R3\u6536\u5230\u7684\u8def\u7531\uff0c\u5c31\u53ef\u4ee5\u4f20\u9012\u7ed9R5\u4e86\u3002 \u8def\u7531\u5728\u8054\u90a6\u5185\u4f20\u9012\u65f6\u7684\u8def\u5f84\u5c5e\u6027 \u00b6 \u5728\u8054\u90a6\u5185\u90e8\u4fdd\u7559\u8054\u90a6\u5916\u90e8\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\uff1b \u516c\u5e03\u7ed9\u8054\u90a6\u7684\u8def\u7531\u7684MED\u5c5e\u6027\u503c\u5728\u6574\u4e2a\u8054\u90a6\u8303\u56f4\u5185\u4e88\u4ee5\u4fdd\u7559\uff1b \u8def\u7531\u7684Local_Preference\u5c5e\u6027\u503c\u5728\u6574\u4e2a\u8054\u90a6\u8303\u56f4\u5185\u4e88\u4ee5\u4fdd\u7559\uff1b \u5728\u8054\u90a6\u8303\u56f4\u5185\uff0c\u5c06\u6210\u5458AS\u53f7\u538b\u5165AS_PATH\uff0c\u4f46\u4e0d\u516c\u5e03\u5230\u8054\u90a6\u5916\uff0c\u5e76\u4e14\u4f7f\u7528TYPE3\u30014\u7684AS_PATH\uff1b AS_PATH\u4e2d\u7684\u8054\u90a6\u6210\u5458AS\u53f7\u7528\u4e8e\u5728\u8054\u90a6\u5185\u90e8\u9632\u73af\uff1b\u8054\u90a6\u5185\u6210\u5458AS\u53f7\u4e0d\u53c2\u4e0eAS_PATH\u957f\u5ea6\u8ba1\u7b97\u3002\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u8054\u90a6\u5916\u90e8\u7684\u8bbe\u5907\u662f\u4e0d\u4f1a\u77e5\u9053\u8054\u90a6\u5185\u90e8\u7684\u6210\u5458AS\u7684\u5b58\u5728\u7684\u3002 \u8054\u90a6\u7684\u914d\u7f6e \u00b6 \u8bbe\u5907\u4e4b\u95f4\u7684\u4e92\u8054IP\u5730\u5740\u91c7\u752810.1.xy.0/24\u683c\u5f0f\uff0c\u5176\u4e2dxy\u4e3a\u8bbe\u5907\u7f16\u53f7\uff1b \u6240\u6709\u8def\u7531\u5668\u7684Loopback0\u63a5\u53e3\u5730\u5740\u4e3ax.x.x.x/32\uff0c\u5176\u4e2dx\u4e3a\u8bbe\u5907\u7f16\u53f7\uff1b AS345\u5185\u8dd1\u4e00\u4e2aOSPF\uff0c\u5ba3\u544a\u76f4\u8fde\u63a5\u53e3\uff0c\u4ee5\u53ca\u5404\u81ea\u7684Loopback0\u63a5\u53e3\uff1b \u8def\u7531\u5668\u6839\u636e\u62d3\u6251\u6240\u793a\u5efa\u7acbBGP\u90bb\u5c45\u5173\u7cfb\u3002\u5176\u4e2dR3-R4\u5efa\u7acb\u57fa\u4e8eLoopback0\u63a5\u53e3\u7684\u8054\u90a6IBGP\u90bb\u5c45\u5173\u7cfb\uff0c R4-R5\u5efa\u7acb\u57fa\u4e8eLoopback0\u63a5\u53e3\u7684\u8054\u90a6EBGP\u90bb\u5c45\u5173\u7cfb\uff1b \u5728R1\u4e0a\u53d1\u5e03100.0.1.0/24\u8def\u7531\u5230BGP\uff0c\u89c2\u5bdf\u8def\u7531\u5728\u8054\u90a6AS\u5185\u7684\u4f20\u9012\uff1b R3\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b: R4\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a R5\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a R1\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\u505a\u4e00\u4e0b\u67e5\u770b\uff1a BGP \u9009\u8def\u89c4\u5219\u8be6\u89e3 BGP\u8def\u7531\u4f18\u9009\u89c4\u5219 \u00b6 \u5728BGP\u7f51\u7edc\u8bbe\u8ba1\u4e2d\uff0c\u9488\u5bf9BGP\u8def\u7531\u7684\u5404\u79cd\u8def\u5f84\u5c5e\u6027\u7684\u64cd\u4f5c\u90fd\u5c06\u5f71\u54cd\u8def\u7531\u7684\u4f18\u9009\uff0c\u4ece\u800c\u5bf9\u7f51\u7edc\u7684\u6d41\u91cf\u4ea7\u751f\u5f71\u54cd\uff0c\u638c\u63e1BGP\u8def\u7531\u7684\u4f18\u9009\u89c4\u5219\u5341\u5206\u4e4b\u91cd\u8981\u3002 \u4e00\u53f0\u8def\u7531\u5668\u6709\u53ef\u80fd\u5b66\u4e60\u5230\u591a\u6761\u53bb\u5f80\u76f8\u540c\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\uff0cBGP\u4f1a\u5728\u8fd9\u4e9b\u8def\u7531\u4e2d\u9009\u62e9\u4e00\u6761\u6700\u4f18\u7684\u8def\u7531\u3002 BGP\u5b9a\u4e49\u4e86\u4e00\u6574\u5957\u8be6\u7ec6\u7684\u9009\u8def\u89c4\u5219\uff0c\u4f7f\u5f97\u8def\u7531\u5668\u80fd\u591f\u5728\u4efb\u4f55\u590d\u6742\u7684\u3001\u5197\u4f59\u7684\u7f51\u7edc\u73af\u5883\u4e0b\uff0c\u51b3\u7b56\u51fa\u4e00\u6761\u6700\u4f18\u7684\u8def\u7531\uff1a \u4f18\u9009\u5177\u6709\u6700\u5927Preferred_Value\u7684\u8def\u7531\uff1b \u4f18\u9009\u5177\u6709\u6700\u5927Local_Preference\u7684\u8def\u7531\uff1b \u4f9d\u6b21\u4f18\u9009\u624b\u52a8\u805a\u5408\u8def\u7531\u3001\u81ea\u52a8\u805a\u5408\u8def\u7531\u3001network\u547d\u4ee4\u5f15\u5165\u7684\u8def\u7531\u3001import-route\u547d\u4ee4\u5f15\u5165\u7684\u8def\u7531\u3001\u4ece\u5bf9\u7b49\u4f53\u5b66\u4e60\u7684\u8def\u7531\uff1b \u4f18\u9009AS_Path\u6700\u77ed\u7684\u8def\u7531\uff1b \u4f9d\u6b21\u4f18\u9009Origin\u7c7b\u578b\u4e3aIGP\u3001EGP\u3001Incomplete\u7684\u8def\u7531\uff1b \u4f18\u9009MED\u6700\u5c0f\u7684\u8def\u7531\uff1b EBGP\u8def\u7531\u4f18\u4e8eIBGP\u8def\u7531\uff1b \u4f18\u9009\u5230BGP\u4e0b\u4e00\u8df3\u7684IGP\u5ea6\u91cf\u503c\u6700\u5c0f\u7684\u8def\u7531\uff1b \u4f18\u9009Cluster_List\u6700\u77ed\u7684\u8def\u7531\uff1b \u4f18\u9009Router-ID\u6700\u5c0f\u7684BGP\u90bb\u5c45\u53d1\u6765\u7684\u8def\u7531\uff1b \u4f18\u9009peer\u5730\u5740\u6700\u5c0f\u7684\u90bb\u5c45\u53d1\u6765\u7684\u8def\u7531\u3002 BGP\u5728\u8fdb\u884c\u8def\u7531\u4f18\u9009\u65f6\uff0c\u6309\u7167\u5982\u4e0a\u89c4\u5219\uff0c\u4f9d\u5e8f\u8fdb\u884c\u5224\u65ad\u3002\u4f8b\u5982\uff0c\u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684 BGP\u8def\u7531\u65f6\uff0c\u62e5\u6709\u6700\u5927Preferred_Value\u503c\u7684\u8def\u7531\u5c06\u4f1a\u88ab\u4f18\u9009\uff0c\u5982\u679c\u8def\u7531\u7684Preferred_Value\u76f8\u7b49\uff0c\u5219\u8fdb\u5165\u4e0b\u4e00\u6761\u89c4\u5219\u8fdb\u884c\u6bd4\u8f83\uff0c\u5373\u4f18\u9009\u5177\u6709\u6700\u5927Local_Preference\u7684\u8def\u7531\uff0c\u5982\u679c\u8def\u7531\u7684Local_Preference\u76f8\u7b49\uff0c\u5219\u7ee7\u7eed\u8fdb\u5165\u4e0b\u4e00\u6761\u89c4\u5219\u8fdb\u884c\u6bd4\u8f83\uff0c\u76f4\u5230\u51b3\u7b56\u51fa\u6700\u4f18\u8def\u7531\u4e3a\u6b62\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u4e0a\u8ff0\u7f57\u5217\u7684\u53ea\u662f\u9009\u8def\u89c4\u5219\u4e2d\u6bd4\u8f83\u6709\u4ee3\u8868\u6027\u7684\u51e0\u6761\uff0c\u5e76\u4e0d\u662f\u5168\u90e8\u89c4\u5219\uff0c\u53e6\u5916\uff0c\u4e0d\u540c\u7684\u5382\u5546\u5728\u89c4\u5219\u7684\u5b9e\u73b0\u4e0a\u5b58\u5728\u4e00\u5b9a\u7684\u5dee\u5f02\uff0c\u800c\u540c\u4e00\u4e2a\u5382\u5546\u7684\u4e0d\u540c\u7cfb\u7edf\u8f6f\u4ef6\u7248\u672c\uff0c\u4e5f\u5b58\u5728\u5b9e\u73b0\u5dee\u5f02\u3002 \u5b9e\u9a8c\u73af\u5883\u4ecb\u7ecd \u00b6 \u62d3\u6251\u53ca\u63cf\u8ff0\uff1a \u00b6 IP\u5730\u5740\u89c4\u5212\u5982\u56fe\u6240\u793a\uff0c\u8bbe\u5907\u4e92\u8054IP\u91c7\u752810.1.xy.0/24\u7684\u7f16\u5740\uff0cx\u53cay\u4e3a\u8bbe\u5907\u7f16\u53f7\u3002\u8fd9\u79cd\u7f16\u5740\u65b9\u5f0f\u80fd\u591f\u5728\u5b9e\u9a8c\u8fc7\u7a0b\u4e2d\u66f4\u597d\u5730\u89c2\u5bdf\u73b0\u8c61\u3002\u540c\u65f6\u6240\u6709\u7684\u8bbe\u5907\u914d\u7f6eLoopback0\u63a5\u53e3\uff0cIP\u4e3ax.x.x.x/32\uff0c\u5176\u4e2dx\u4e3a\u8bbe\u5907\u7f16\u53f7\u3002\u8fd9\u4e2a\u63a5\u53e3\u5730\u5740\u53ea\u4f5c\u4e3a\u8bbe\u5907Router-ID\u4ee5\u53ca\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\u65f6\u4f7f\u7528\u3002 AS345\u4e2d\uff0cR3\u3001R4\u3001R5\u8fd0\u884cOSPF\uff0c\u5728OSPF\u4e2d\uff0c\u5404\u8bbe\u5907\u5ba3\u544a\u81ea\u5df1\u7684\u76f4\u8fde\u63a5\u53e3\u4ee5\u53caLoopback0\u63a5\u53e3\u6240\u5728\u7f51\u6bb5\uff0c\u4f46R3\u4e0d\u5728\u63a5\u53e3GE0/0/0\u53e3\u4e0a\u6fc0\u6d3bOSPF\u3001R5\u4e0d\u5728GE0/0/1\u4e0a\u6fc0\u6d3bOSPF\uff0c\u8fd9\u4e24\u4e2a\u76f4\u8fde\u94fe\u8def\u89c6\u4e3aAS \u5916\u7684\u94fe\u8def\uff0c\u4e0d\u5c06\u5176\u6240\u5728\u7f51\u6bb5\u5f15\u5165OSPF\u4e2d\u3002 \u5404\u8bbe\u5907\u7684BGP\u8fde\u63a5\u60c5\u51b5\u5982\u4e0b\uff1a \u5176\u4e2d\uff0cIBGP\u90bb\u5c45\u5173\u7cfb\u7684\u5efa\u7acb\u57fa\u4e8eLoopback0\u53e3\uff0cEBGP\u90bb\u5c45\u5173\u7cfb\u7684\u5efa\u7acb\u57fa\u4e8e\u76f4\u8fde\u7269\u7406\u63a5\u53e3\u3002 \u521d\u59cb\u5316\u914d\u7f6e\uff1a \u00b6 \u6ce8\uff1a\u4ee5\u4e0b\u7f57\u5217\u7684\u8bbe\u5907\u914d\u7f6e\u4e2d\uff0c\u7701\u7565\u4e86\u8bbe\u5907\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 R4\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 R5\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 \u89c4\u5219\u8be6\u89e3\u53ca\u5b9e\u9a8c\u9a8c\u8bc1 \u00b6 \u4f18\u9009\u5177\u6709\u6700\u5927Preferred_Value\u7684\u8def\u7531 \u00b6 \u89c4\u5219\u63cf\u8ff0 \u00b6 \u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u62e5\u6709\u6700\u5927Preferred_Value\u503c\u7684\u8def\u7531\u5c06\u4f1a\u88ab\u4f18\u9009\u3002 Preferred_Value\u5c5e\u6027\u56de\u987e \u00b6 \u534e\u4e3a\u79c1\u6709\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u8def\u7531\u7684Preferred_value\u53ef\u4ee5\u7406\u89e3\u4e3a\u8be5\u8def\u7531\u5728\u672c\u8def\u7531\u5668\u89c6\u89d2\u7684\u6743\u91cd\u503c\u3002 \u8303\u56f40-65535\uff0c\u9ed8\u8ba4\u503c\u4e3a0\uff0c\u503c\u8d8a\u5927\uff0c\u5219\u8def\u7531\u8d8a\u4f18\u3002 \u4f5c\u7528\u8303\u56f4\u662f\u672c\u8bbe\u5907\uff08\u4e0d\u4f20\u9012\uff09\uff0c\u8be5\u503c\u4e0d\u4f1a\u88ab\u5305\u542b\u5728update\u62a5\u6587\u4e2d\uff0c\u4e0d\u4f1a\u4f20\u9012\u7ed9\u4efb\u4f55BGP\u90bb\u5c45\u3002 \u89c4\u5219\u9a8c\u8bc1 \u00b6 \u73b0\u5728\u6211\u4eec\u5728R1\u548cR2\u4e0a\u914d\u7f6e\u4e00\u4e2aLoopback1\u63a5\u53e3\uff0c\u914d\u7f6eIP\u5730\u5740\uff1a100.0.1.1/24\uff0c\u7136\u540e\u5c06\u8fd9\u6761\u8def\u7531\u53d1\u5e03\u5230 BGP\uff08\u8fd9\u90e8\u5206\u914d\u7f6e\u4e0d\u518d\u8d58\u8ff0\uff09\u3002\u5982\u6b64\u4e00\u6765\uff0cR1\u5c06\u66f4\u65b0\u8def\u7531100.0.1.0/24\u7ed9R3\uff0c\u800cR3\u4ece\u81ea\u5df1\u7684EBGP\u90bb\u5c45R1\u5b66\u4e60\u5230\u8fd9\u6761\u8def\u7531\u540e\uff0c\u4f1a\u66f4\u65b0\u7ed9R4\uff1b\u540c\u7406\uff0cR5\u4e5f\u4f1a\u5c06\u5b66\u4e60\u81eaEBGP\u90bb\u5c45R2\u7684\u8def\u7531100.0.1.0/24\u66f4\u65b0\u7ed9R4\uff0c\u90a3\u4e48\u5bf9\u4e8eR4\u6765\u8bf4\u5c31\u4eceR3\u53caR5\u90fd\u5b66\u4e60\u5230\u4e86\u53bb\u5f80100.0.1.0/24\u7684\u8def\u7531\uff0cR4\u5c06\u5982\u4f55\u4f18\u9009\uff1f \u73b0\u5728\uff0c\u6211\u4eec\u5e0c\u671b\u901a\u8fc7\u64cd\u63a7\u8def\u7531\u7684Preferred_Value\u503c\u6765\u8ba9R4\u4f18\u9009R5\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\u3002 \u5728R4\u914d\u7f6e\u4e0a\u8ff0\u547d\u4ee4\uff0c\u5c06R5\u4f20\u9012\u8fc7\u6765\u7684\u6240\u6709\u8def\u7531\u7684Preferred_Value\uff08\u5728\u6536\u5230\u4e4b\u540e\uff09\u90fd\u8bbe\u7f6e\u4e3a10\uff0c\u800cR3 \u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\u7684Preferred_Value\u5219\u5728\u672c\u5730\u8d4b\u4e88\u9ed8\u8ba4\u503c0\uff0c\u8fd9\u4e48\u4e00\u5bf9\u6bd4\uff0c\u5f53\u7136\u662f\u4f18\u9009R5\u6240\u901a\u544a\u7684\u8def\u7531\u4e86\u3002\u4f46\u662f\u8fd9\u4e2a\u65b9\u6cd5\u201c\u9897\u7c92\u5ea6\u201d\u592a\u5927\uff0c\u5982\u679c\u6211\u4eec\u53ea\u662f\u60f3\u9488\u5bf9\u7279\u5b9a\u7684\u8def\u7531\u8bbe\u7f6ePreferred_Value\u5462\uff1f\u4f8b\u5982\uff1a \u5728R1\u53caR2\u4e0a\u65b0\u589e100.0.2.0/24\u7f51\u6bb5\u5e76\u5c06\u5176\u53d1\u5e03\u5230BGP\u3002R1\u3001R2\u7684\u65b0\u589e\u914d\u7f6e\u4e0d\u518d\u8d58\u8ff0\u3002\u90a3\u4e48\u5b9e\u73b0\u4e0a\u56fe\u63cf\u8ff0\u7684\u9700\u6c42\uff0cR4\u7684\u914d\u7f6e\u53ef\u4ee5\u53d8\u66f4\u6210\uff1a \u6ce8\u610f\uff1a\u4e0a\u8ff0\u914d\u7f6e\u4e2droute-policy RP1 permit node 20\u53caroute-policy RP2 permit node 20\u5fc5\u987b\u914d\u7f6e\uff0c \u00b6 \u56e0\u4e3aroute-policy\u5728\u672b\u5c3e\u9690\u542bdeny any\uff0c\u56e0\u6b64\u5982\u679c\u8fd9\u4e24\u4e2anode\u4e0d\u52a0\u7684\u8bdd\uff0c\u76f8\u5f53\u4e8e\u662f\u53ea\u653e\u884cnode 10\u4e2d\u5141\u8bb8\u7684\u8def\u7531\u3002 Origin : i - IGP, e - EGP, ? - incomplete Total Number of Routes: 4 Network NextHop MED LocPrf PrefVal Path/Ogn *>i 100.0.1.0/24 3.3.3.3 0 100 10 100i * i 5.5.5.5 0 100 0 200i *>i 100.0.2.0/24 5.5.5.5 0 100 10 200i * i 3.3.3.3 0 100 0 100i \u6211\u4eec\u770b\u5230\uff0c\u5728R4\u4e0a\uff0c\u5bf9\u4e8e100.0.1.0/24\u8def\u7531\uff0c\u4f18\u9009\u7684\u662fR3\u4f20\u9012\u8fc7\u6765\u7684\uff1b\u5bf9\u4e8e100.0.2.0/24\u7684\u8def\u7531\uff0c\u4f18\u9009 \u7684\u662fR5\u4f20\u9012\u8fc7\u6765\u7684\u3002\u8fd9\u5c31\u5b9e\u73b0\u4e86\u6211\u4eec\u7684\u9700\u6c42\u3002\u4e8b\u5b9e\u4e0a\u8fd8\u53ef\u4ee5\u8fdb\u4e00\u6b65\u67e5\u770b\u8def\u7531\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u67e5\u770b 100.0.1.0/24\u8fd9\u6761\u8def\u7531\uff1a OK\uff0c\u5b8c\u6210\u4e86\u89c4\u5219\u4e00\u7684\u6d4b\u8bd5\u540e\uff0c\u6211\u4eec\u5c06\u7528\u4e8e\u9a8c\u8bc1\u672c\u6761\u89c4\u5219\u7684\u76f8\u5173\u914d\u7f6e\u5220\u9664\uff0c\u6062\u590d\u6210\u521d\u59cb\u5316\u914d\u7f6e\u3002\u7ee7\u7eed\u770b \u4e0b\u4e00\u6761\u89c4\u5219\u3002 \u4f18\u9009\u5177\u6709\u6700\u5927Local_Preference\u7684\u8def\u7531 \u00b6 \u89c4\u5219\u63cf\u8ff0 \u00b6 \u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u62e5\u6709\u6700\u5927Preferred_Value\u503c\u7684\u8def\u7531\u5c06\u4f1a\u88ab\u4f18\u9009\u3002\u5982\u679c\u8def\u7531\u7684Preferred_Value \u503c\u76f8\u7b49\uff0c \u5219\u6bd4 \u8f83\u8def\u7531\u7684Local_Preference \u503c\uff0c\u4f18\u9009\u5177\u6709\u6700\u5927 Local_Preference\u503c\u7684\u8def\u7531\u3002 Local_Preference\u5c5e\u6027\u56de\u987e \u00b6 \u516c\u8ba4\u81ea\u51b3\u5c5e\u6027\uff0c\u503c\u8d8a\u5927\u5219\u8def\u7531\u8d8a\u4f18\u3002 Local_Preference\u53ea\u80fd\u5728IBGP Peer\u4e4b\u95f4\u4f20\u9012\uff0c\u4e0d\u80fd\u5728EBGP Peer\u4e4b\u95f4\u4f20\u9012\u3002 \u672c\u5730\u59cb\u53d1\u7684\u8def\u7531\u9ed8\u8ba4Local_Preference\u4e3a100\u3002\u53ef\u7528**default local-preference ?** \u547d\u4ee4\u4fee\u6539\u9ed8\u8ba4\u503c\u3002 \u89c4\u5219\u9a8c\u8bc1 \u00b6 \u73b0\u5728\u5b9e\u9a8c\u6062\u590d\u6210\u521d\u59cb\u5316\u73af\u5883\uff0c\u5728R1\u53caR2\u4e0a\u90fd\u914d\u7f6eLoopback1\u53e3\uff0cIP\u5730\u5740\u4e3a100.0.1.1/24\uff0cR1\u53caR2\u90fd\u5c06\u5230\u8fbe100.0.1.0/24\u7684\u8def\u7531\u53d1\u5e03\u5230BGP\u3002 \u6211\u4eec\u8981\u901a\u8fc7\u64cd\u63a7Local_Preference\u8ba9R4\u4f18\u9009R3\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u8def\u7531\u3002\u53ef\u4ee5\u5728R3\u4e0a\u5bf9R4\u505a export\u65b9\u5411\u7684\u7b56\u7565\uff0c\u4fee\u6539\u8def\u7531\u7684Local_Preference\u503c\uff0c\u5c06\u5176\u8bbe\u7f6e\u4e3a200\uff1b\u800cR5\u8fd9\u8fb9\u5219\u4fdd\u6301\u9ed8\u8ba4\uff0c\u4e5f\u5c31\u662f Local_Preference=100\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u5728R4\u4e0a\uff0c\u5230\u8fbe100.0.1.0/24\u7684\u4e24\u6761BGP\u8def\u5f84\uff0c\u9996\u5148Preferred_Value \u76f8\u7b49\uff0c\u7136\u540e\u7ee7\u7eed\u6bd4\u8f83Local_Preference\uff0c\u4f18\u9009\u5927\u7684\uff0c\u56e0\u6b64\u6765\u81eaR3\u7684\u8def\u7531\u88ab\u4f18\u9009\u3002 R3\u7684\u914d\u7f6e\u53d8\u66f4\u5982\u4e0b\uff1a \u5728R4\u4e0a\u9a8c\u8bc1\u4e00\u4e0b\uff1a \u5b8c\u6210\u4e86\u672c\u89c4\u5219\u7684\u9a8c\u8bc1\u540e\uff0c\u6211\u4eec\u5c06\u7528\u4e8e\u9a8c\u8bc1\u672c\u6761\u89c4\u5219\u7684\u76f8\u5173\u914d\u7f6e\u5220\u9664\uff0c\u6062\u590d\u6210\u521d\u59cb\u5316\u914d\u7f6e\u3002\u7ee7\u7eed\u770b\u4e0b\u4e00\u6761\u89c4\u5219\u3002 \u4f18\u9009\u8d77\u6e90\u4e8e\u672c\u5730\u7684\u8def\u7531 \u00b6 \u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP \u8def\u7531\u65f6\uff0c\u5982\u679c\u8def\u7531\u7684Preferred_Value \u503c\u76f8\u7b49\uff0c \u4e14 Local_Preference\u503c\u4e5f\u76f8\u7b49\uff0c\u90a3\u4e48**\u4f9d\u6b21\u4f18\u9009\u624b\u52a8\u805a\u5408\u8def\u7531\u3001\u81ea\u52a8\u805a\u5408\u8def\u7531\u3001network\u547d\u4ee4\u5f15\u5165\u7684\u8def\u7531\u3001import-** route\u547d\u4ee4\u5f15\u5165\u7684\u8def\u7531\u3001\u4ece\u5bf9\u7b49\u4f53\u5b66\u4e60\u7684\u8def\u7531\u3002 \u00b6 \u672c\u6761\u89c4\u5219\u7565\u8fc7\u4e0d\u505a\u9a8c\u8bc1\u3002 \u4f18\u9009AS_PATH\u6700\u77ed\u7684\u8def\u7531 \u00b6 \u89c4\u5219\u63cf\u8ff0 \u00b6 \u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c \u5982\u679c\u8def\u7531\u7684Preferred_Value\u5c5e\u6027\u503c\u3001 Local_Preference\u5c5e\u6027\u503c\u90fd\u76f8\u7b49\uff0c\u5e76\u4e14\u8fd9\u4e9b\u8def\u7531\u90fd\u662f\u5b66\u4e60\u81ea\u5176\u5b83\u90bb\u5c45\u7684\uff0c\u90a3\u4e48AS_PATH\u6700\u77ed\u7684\u8def\u7531\u5c06\u88ab\u4f18\u9009\u3002 \u89c4\u5219\u9a8c\u8bc1 \u00b6 \u73b0\u5728\u5b9e\u9a8c\u73af\u5883\u6062\u590d\u6210\u521d\u59cb\u5316\u73af\u5883\uff0c\u540c\u6837\u8ba9R1\u53caR2\u5f15\u5165100.0.1.0/24\u8def\u7531\u3002\u6211\u4eec\u8981\u901a\u8fc7\u64cd\u63a7AS_PATH\u5c5e\u6027\u8ba9R4\u4f18\u9009R5\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u8def\u7531\u3002\u90a3\u4e48\u53ef\u4ee5\u5728R3\u4e0a\u5bf9R1\u505aimport\u65b9\u5411\u7684\u7b56\u7565\uff0c\u5728\u539f\u6709 AS_PATH\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e00\u4e2a100\u7684AS\u53f7\uff0c\u4f7f\u5f97\u8def\u7531\u7684AS_PATH\u957f\u5ea6\u52a0\u957f\u4e00\u4e2a\u5355\u4f4d\u3002\u5982\u6b64\u4e00\u6765R4\u5c06\u4f18\u9009R5\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u8def\u7531\u3002 R3\u7684\u914d\u7f6e\u53d8\u66f4\u5982\u4e0b: \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5728R4\u4e0a\u9a8c\u8bc1\u4e00\u4e0b\uff1a [R4]display bgp routing-table BGP Local router ID is 4.4.4.4 Status codes: * - valid, > - best, d - damped, h - history, i - internal, s - suppressed, S - Stale Origin : i - IGP, e - EGP, ? - incomplete Total Number of Routes: 2 Network NextHop MED LocPrf PrefVal Path/Ogn *>i 100.0.1.0/24 5.5.5.5 0 100 0 200i * i 3.3.3.3 0 100 0 100 100i \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cR4\u4f18\u9009\u4e86R5\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u8def\u7531\u3002\u5f53\u7136\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u67e5\u770b\u8def\u7531\u7684\u8be6\u7ec6 \u4fe1\u606f\uff1a \u53e6\u5916\uff0c\u4f7f\u7528route-policy\u6765\u4fee\u6539BGP\u8def\u7531\u7684AS_PATH\u65f6\uff0c\u9700\u5173\u6ce8\u5982\u4e0b\u547d\u4ee4\uff1a \u518d\u6709\uff0c\u6267\u884c**bestroute as-path-ignore**\u547d\u4ee4\u540e\uff0cBGP\u5728\u6267\u884c\u9009\u8def\u65f6\uff0c\u5c06\u5ffd\u7565AS_PATH\u7684\u6bd4\u8f83\uff0c\u8be5\u547d\u4ee4 \u9700\u614e\u7528\u3002\u503c\u5f97\u5f3a\u8c03\u7684\u662f\uff1aBGP\u7684\u8def\u7531\u9632\u73af\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f9d\u8d56\u4e8eAS_PATH\uff0c\u56e0\u6b64\u4efb\u4f55\u5bf9AS_PATH\u7684\u7b56\u7565\u5728\u5b9e\u65bd\u7684\u65f6\u5019\u90fd\u5e94\u8be5\u8003\u8651\u5468\u5168\u3002 \u89c4\u5219\u8865\u5145\u4e00 \u00b6 \u89c4\u5219\u8865\u5145\uff1aAS_SET\u7684\u957f\u5ea6\u4e3a1\uff0c\u65e0\u8bbaAS_SET\u4e2d\u5305\u62ec\u591a\u5c11AS\u53f7\uff0c\u90fd\u5c06\u7b97\u4f5c1\u4e2aAS\u53f7\u3002 \u89c4\u5219\u8865\u5145\u4e8c \u00b6 \u89c4\u5219\u8865\u5145\uff1aAS_CONFED_SEQUENCE\u548cAS_CONFED_SET\u957f\u5ea6\u4e0d\u505a\u8ba1\u7b97\u4f9d\u636e\u3002 R1\u5c06\u81ea\u5df1\u7684\u76f4\u8fde\u8def\u753110.0/24\u53d1\u5e03\u5230BGP\u3002R1\u4f1a\u5c0610.0/24\u7684\u8def\u7531\u901a\u8fc7BGP\u66f4\u65b0\u7ed9R4\uff0c\u518d\u7531R4\u5c06\u8def\u7531\u4f20 \u9012\u7ed9R5\uff0c\u6b64\u65f6\u8def\u7531\u7684AS_PATH\u662f\uff1a\u201c\uff0864514\uff09100\u201d\uff0c\u6b64\u5904AS_PATH\u957f\u5ea6\u4e3a1 \uff1b\u53e6\u4e00\u65b9\u9762R1\u4e5f\u4f1a\u5c06\u8def\u7531\u4f20\u9012\u7ed9R2\uff0cR2\u518d\u4f20\u7ed9R3\uff0c\u6700\u540eR3\u5c06\u8def\u7531\u4f20\u7ed9R5\uff0c\u8def\u7531\u4f20\u9012\u7ed9R5\u65f6AS_PATH\u662f\uff1a\u201c300 200 100\u201d\uff0c\u6b64\u5904AS_PATH\u957f\u5ea6\u4e3a3\u3002\u5728R5\u4e0a\u89c2\u5bdf\u5230\u7684\u73b0\u8c61\u662f\uff0c\u5b83\u4f18\u9009R4\u66f4\u65b0\u8fc7\u6765\u7684\u8fd9\u676110.0/24\uff0c\u8fd9\u662f\u56e0\u4e3a\u8be5\u6761\u8def\u7531\u7684AS_PATH\u66f4\u77ed\u3002 \u5728\u4e0a\u4e2a\u73af\u5883\u53ca\u914d\u7f6e\u7684\u57fa\u7840\u4e4b\u4e0a\uff0c\u5728R1\u4e0a\u914d\u7f6eroute-policy\uff0c\u5c0610.0/24\u8def\u7531\u7684AS_PATH\u589e\u52a0\u4e24\u4e2a100\u7684 AS\u53f7\uff0c\u4e5f\u5c31\u662f\u63d2\u5165\u201c100 100 \u201d\u5e76\u4e14\u5c06\u8be5route-policy\u5bf9R4\u751f\u6548\uff08export\u65b9\u5411\uff09\u3002\u5982\u6b64\u4e00\u6765\uff0cR4\u6536\u5230\u7684 10.0/24\u7684BGP\u8def\u7531\uff0cAS_PATH\u4e3a\u201c100 100 100\u201d\uff0c\u800c\u5f53\u5b83\u5c06\u8def\u7531\u53d1\u9001\u7ed9\u8054\u90a6EBGP\u90bb\u5c45R5\u65f6\uff0c\u8def\u7531\u7684AS_PATH\u53d8\u6210\u201c(64514) 100 100 100\u201d\uff0c\u6b64\u65f6AS_PATH\u7684\u957f\u5ea6\u4e3a3\uff0c\u5373\u8054\u90a6\u7684AS\u53f7\u662f\u4e0d\u505a\u957f\u5ea6\u8ba1\u7b97\u7684\u3002 \u53e6\u4e00\u8fb9R3\u4f20\u9012\u8fc7\u6765\u768410.0/24\u7684BGP\u8def\u7531\uff0cAS_PATH\u957f\u5ea6\u8fd8\u662f3\uff0c\u4e24\u8fb9\u7684AS_PATH\u957f\u5ea6\u76f8\u7b49\uff0c\u56e0\u6b64\u6bd4 AS_PATH\u662f\u6bd4\u4e0d\u51fa\u6765\u4e86\uff0c\u53ea\u80fd\u5f80\u540e\u9762\u7684\u89c4\u5219\u7ee7\u7eedPK\u3002 \u4f9d\u6b21\u4f18\u9009Origin\u7c7b\u578b\u4e3aIGP\u3001EGP\u3001Incomplete\u7684\u8def\u7531 \u00b6 \u89c4\u5219\u63cf\u8ff0 \u00b6 \u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u4f9d\u6b21\u4f18\u9009Origin\u5c5e\u6027\u4e3aIGP\u3001EGP\u3001Incomplete\u7684\u8def\u7531\u3002 \u89c4\u5219\u9a8c\u8bc1 \u00b6 \u73b0\u5728\uff0c\u7ee7\u7eed\u5c06\u5b9e\u9a8c\u73af\u5883\u6062\u590d\u6210\u521d\u59cb\u5316\u72b6\u6001\u3002\u5728\u8fd9\u4e2a\u89c4\u5219\u7684\u9a8c\u8bc1\u4e2d\uff0c\u5728R1\u4e0a\uff0c\u6539\u7528**import-route**\u7684\u65b9\u5f0f\u6765\u6ce8\u5165100.0.1.0/24\u8def\u7531\uff0cR2\u5219\u4ecd\u4fdd\u6301**network**\u7684\u65b9\u5f0f\u6ce8\u5165\u3002 \u90a3\u4e48R1\u7684\u914d\u7f6e\u53d8\u66f4\u5982\u4e0b\uff1a \u6216\u8005\u4f7f\u7528route-policy\u6765\u4fee\u6539origin\uff0c\u540c\u6837\u662f\u4fee\u6539R1\u7684\u914d\u7f6e\uff1a \u8fd9\u6837\u4e00\u6765R1\u5f15\u5165\u7684100.0.1.0/24\u8def\u7531\uff0corigin\u5c5e\u6027\u503c\u5c31\u4e3aincomplete\uff0c\u800cR2\u5f15\u5165\u7684100.0.1.0/24\u7684\u8def\u7531 \uff08\u4f7f\u7528**network**\u547d\u4ee4\u53d1\u5e03\uff09\uff0corigin\u5c5e\u6027\u503c\u4e3aIGP\u3002\u5b8c\u6210\u914d\u7f6e\u540e\u9a8c\u8bc1\u4e00\u4e0b\uff1a [R4] display bgp routing-table BGP Local router ID is 4.4.4.4 Status codes: * - valid, > - best, d - damped, h - history, i - internal, s - suppressed, S - Stale Origin : i - IGP, e - EGP, ? - incomplete Total Number of Routes: 2 Network NextHop MED LocPrf PrefVal Path/Ogn *>i 100.0.1.0/24 5.5.5.5 0 100 0 200i * i 3.3.3.3 0 100 0 100**?** \u5f53\u7136\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u770b\u8be6\u7ec6\u4fe1\u606f\uff1a \u4f18\u9009MED\u6700\u5c0f\u7684\u8def\u7531 \u00b6 \u89c4\u5219\u63cf\u8ff0 \u00b6 \u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u6bd4\u8f83\u8fd9\u4e9b\u8def\u7531\u7684 MED\uff0c\u4f18\u9009\u62e5\u6709\u6700\u5c0fMED\u503c\u7684\u8def\u7531\u3002 \u5c5e\u6027\u56de\u987e \u00b6 MED\u5c5e\u6027\u4e3a\u53ef\u9009\u975e\u4f20\u9012\u5c5e\u6027\uff0c\u503c\u8d8a\u5c0f\u5219\u8def\u7531\u8d8a\u4f18\uff0c\u4e00\u822c\u7528\u4e8eAS\u4e4b\u95f4\u5f71\u54cdBGP\u8def\u7531\u51b3\u7b56\u3002 \u89c4\u5219\u8be6\u89e3 \u00b6 BGP\u53ea\u6bd4\u8f83\u6765\u81ea\u540c\u4e00\u4e2a\u76f8\u90bbAS\u7684\u8def\u7531\u7684MED\u503c\u3002 \u5982\u679c\u8def\u7531\u6ca1\u6709MED\u5c5e\u6027\uff0cBGP\u9009\u8def\u65f6\u5c06\u8be5\u8def\u7531\u7684MED\u503c\u6309\u7f3a\u7701\u503c0\u6765\u5904\u7406\uff1b\u800c\u6267\u884c**bestroute med- none-as-maximum**\u547d\u4ee4\u540e\uff0cBGP\u9009\u8def\u65f6\u5c06\u8be5\u8def\u7531\u7684MED\u503c\u6309\u6700\u5927\u503c4294967295\u6765\u5904\u7406\u3002 \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u4e0d\u5141\u8bb8\u6bd4\u8f83\u6765\u81ea\u4e0d\u540cAS\u90bb\u5c45\u7684\u8def\u7531\u8def\u5f84\u7684MED\u5c5e\u6027\u503c\u3002\u800c\u6267\u884c**compare-different- as-med**\u547d\u4ee4\u540e\uff0cBGP\u5c06\u5f3a\u5236\u6bd4\u8f83\u6765\u81ea\u4e0d\u540c\u81ea\u6cbb\u7cfb\u7edf\u4e2d\u7684\u90bb\u5c45\u7684\u8def\u7531\u7684MED\u503c\u3002\u9664\u975e\u80fd\u591f\u786e\u8ba4\u4e0d\u540c\u7684\u81ea\u6cbb\u7cfb\u7edf\u91c7\u7528\u4e86\u540c\u6837\u7684IGP\u548c\u8def\u7531\u9009\u62e9\u65b9\u5f0f\uff0c\u5426\u5219\u4e0d\u8981\u4f7f\u7528**compare-different-as-med**\u547d\u4ee4\uff08\u53ef\u80fd\u4ea7\u751f\u73af\u8def\uff09\u3002 \u89c4\u5219\u9a8c\u8bc1 \u00b6 \u5728\u672c\u89c4\u5219\u7684\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u5c06\u73af\u5883\u505a\u4e86\u5c0f\u5c0f\u7684\u53d8\u66f4\uff0cR2\u4e0d\u518d\u5c5e\u4e8eAS200\u4e86\uff0c\u6211\u4eec\u628a\u4ed6\u89c4\u5212\u5230AS100\uff0c\u81f3\u4e8e\u4e3a\u4ec0\u4e48\uff0c\u8fd9\u91cc\u76f8\u4fe1\u5927\u5bb6\u5df2\u7ecf\u90fd\u60f3\u5230\u4e86\u3002R1\u3001R2\u90fd\u5411BGP\u53d1\u5e03\u8def\u7531100.0.1.0/24\uff0c\u6700\u7ec8R4\u5c06\u5b66\u4e60\u5230\u4e24\u6761\u8def\u7531\u66f4\u65b0\u3002\u73b0\u5728\u6211\u4eec\u7684\u9700\u6c42\u662f\uff0c\u901a\u8fc7\u64cd\u63a7MED\u503c\uff0c\u8ba9R4\u4f18\u9009\u4eceR5\u66f4\u65b0\u8fc7\u6765\u7684\u8def\u7531\u3002 \u65b9\u6cd5\u5f88\u7b80\u5355\uff0cR5\u5c06100.0.1.0/24\u66f4\u65b0\u7ed9R4\u65f6\uff0cMED\u4e3a\u9ed8\u8ba4\u503c0\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u8981\u5728R1\u66f4\u65b0\u8def\u7531\u7ed9R3\u65f6\uff0c \u5c06MED\u8bbe\u7f6e\u4e3a999\uff0c\u8fd9\u6761\u8def\u7531\u518d\u7ecf\u7531R3\u66f4\u65b0\u7ed9R4\u65f6\uff0c\u4e5f\u4f1a\u4e00\u5e76\u5c06MED\u643a\u5e26\uff0c\u6700\u7ec8\uff0cR4\u5c06\u4f18\u9009MED\u5c0f\u7684\u8def\u5f84\uff0c\u4e5f\u5c31\u662fR5\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\u3002 R2\u53caR5\u7684\u914d\u7f6e\u53d8\u66f4\u8fd9\u91cc\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\u3002\u91cd\u70b9\u770bR1\u7684\u914d\u7f6e\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u4ecd\u7136\u5728R4\u4e0a\u9a8c\u8bc1\u4e00\u4e0b\uff1a \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cR4\u4f18\u9009\u4e86R5\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u7684\u8def\u7531\u3002\u56e0\u4e3a\u4eceR3\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531MED \u4e3a999\uff0c\u503c\u66f4\u5927\u3002 \u76f8\u5bf9\u4e8eIBGP\u8def\u7531\uff0c\u4f18\u9009EBGP\u8def\u7531 \u00b6 \u89c4\u5219\u63cf\u8ff0 \u00b6 \u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0cEBGP\u8def\u7531\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8eIBGP\u8def\u7531\u3002 \u89c4\u5219\u9a8c\u8bc1 \u00b6 \u672c\u89c4\u5219\u7684\u9a8c\u8bc1\u73af\u5883\u8981\u53d1\u751f\u4e00\u4e9b\u6539\u53d8\uff0c\u6211\u4eec\u5728R3-R5\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761IBGP\u7684\u90bb\u5c45\u5173\u7cfb\u3002\u8fd9\u6837\u4e00\u6765R3\u4f1a\u5c06\u81ea\u5df1\u4eceR1\u5b66\u4e60\u5230\u7684BGP\u8def\u7531\u4f20\u9012\u7ed9IBGP\u90bb\u5c45R5\uff0c\u800cR5\u53c8\u4f1a\u4ece\u53e6\u4e00\u4fa7\u5b66\u4e60\u5230R2\u66f4\u65b0\u8fc7\u6765\u7684100.0.1.0/24 \u8def\u7531\uff0c\u90a3\u4e48R5\u5c06\u5982\u4f55\u4f18\u9009\u5462\uff1f \u53d8\u66f4\u7684\u914d\u7f6e\u8fd9\u91cc\u5c31\u4e0d\u5728\u8d58\u8ff0\u4e86\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u5c0f\u7ec6\u8282\u8981\u6ce8\u610f\uff0c\u90a3\u5c31\u662fR3\u522b\u5fd8\u4e86\u8981\u914d\u7f6e\u4e00\u6761**peer 5.5.5.5 next-hop-local**\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u5728R5\u4e0a\u89c2\u5bdf\u4e00\u4e0b\uff1a \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230R5\u4f18\u9009\u4e86\u6765\u81eaR2\u7684\u8def\u7531\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u67e5\u770b\u8def\u7531\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a \u4f18\u9009\u5230BGP\u4e0b\u4e00\u8df3IGP\u5ea6\u91cf\u503c\u6700\u5c0f\u7684\u8def\u7531 \u00b6 \u89c4\u5219\u63cf\u8ff0 \u00b6 \u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0cBGP\u5c06\u6bd4\u8f83\u8def\u7531\u5668\u5230\u8fd9\u4e9b\u8def\u7531\u7684Next_hop\u7684IGP\u5ea6\u91cf\u503c\uff0c\u4f18\u9009\u5230Next_hop\u5ea6\u91cf\u503c\u6700\u5c0f\u7684BGP\u8def\u7531\u3002 \u89c4\u5219\u9a8c\u8bc1\u4e00 \u00b6 \u4ecd\u7136\u5c06\u5b9e\u9a8c\u73af\u5883\u6062\u590d\u5230\u521d\u59cb\u5316\u72b6\u6001\u3002R1\u5c06\u8def\u7531100.0.1.0/24\u66f4\u65b0\u7ed9\u4e86R3\uff0cR3\u5c06\u8fd9\u6761\u8def\u7531\u53c8\u66f4\u65b0\u7ed9\u4e86R4\uff0c \u7531\u4e8e\u6211\u4eec\u5728R3\u4e0a\u5bf9R4\u505a\u4e86next-hop-local\uff0c\u56e0\u6b64R4\u5728\u6536\u5230\u8fd9\u6761\u8def\u7531\u65f6\u8def\u7531\u7684Next_hop\u5c5e\u6027\u503c\u4e3a3.3.3.3\uff1b \u540c\u7406\uff0c R4\u4eceR5 \u6536\u5230\u7684\u8def\u7531100.0.1.0/24 \u7684Next_hop \u4e3a5.5.5.5 \u3002\u800cR4\u53c8\u901a\u8fc7OSPF \u5b66\u4e60\u5230\u4e86\u53bb\u5f80 3.3.3.3/32\u53ca5.5.5.5/32\u7684\u8def\u7531\uff0c\u5e76\u4e14\u6b64\u523b\u5728R4\u4e0a\uff0c\u5230\u8fbe3.3.3.3\u53ca5.5.5.5\u7684OSPF\u5ea6\u91cf\u503c\u90fd\u662f\u76f8\u7b49\u7684\u3002\u73b0\u5728\uff0c\u6211\u4eec\u5728R4\u8fde\u63a5R3\u7684\u63a5\u53e3\u4e0a\u589e\u52a0\u914d\u7f6e\uff08\u8be5\u63a5\u53e3\u7684\u7f3a\u7701OSPF\u5ea6\u91cf\u503c\u4e3a1\uff09\uff1a ospf cost 10 \u3002 \u5982\u6b64\u4e00\u6765\uff0cR4\u5230\u8fbe3.3.3.3\u7684OSPF\u5ea6\u91cf\u503c\u5c31\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u53d8\u5f97\u6bd4\u5230\u8fbe5.5.5.5\u7684OSPF\u5ea6\u91cf\u503c\u66f4\u5927\uff0c\u56e0\u6b64\u6700\u7ec8\uff0c\u672c\u89c4\u5219\u5c06\u8ba9R4\u4f18\u9009R5\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u8def\u7531\u3002 \u89c4\u5219\u9a8c\u8bc1\u4e8c \u00b6 \u73b0\u5728\u5c06\u7f51\u7edc\u73af\u5883\u518d\u505a\u70b9\u8c03\u6574\uff1aR3-R5\u4e4b\u95f4\u589e\u52a0\u4e00\u6761IBGP\u8fde\u63a5\u3002R4\u914d\u7f6e\u4e3a\u8def\u7531\u53cd\u5c04\u5668RR\uff0cR3\u662f\u5979\u7684Client\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u9996\u5148\uff0cR3\u901a\u8fc7IBGP\u8fde\u63a5\u76f4\u63a5\u5c06100.0.1.0/24\u7684\u8def\u7531\u4f20\u7ed9\u4e86R5\uff0c\u53e6\u4e00\u65b9\u9762\u53c8\u7ecf\u7531\u8def\u7531\u53cd\u5c04\u5668 R4\u53cd\u5c04\u7ed9\u4e86R5\uff0c\u56e0\u6b64\uff0cR5\u5c06\u540c\u65f6\u4eceR3\u53caR4\u5b66\u4e60\u5230100.0.1.0/24\u7684BGP\u8def\u7531\u3002\u8fd9\u65f6\u5019R5\u600e\u4e48\u51b3\u7b56\uff1f\u6ce8 \u610f\uff0c\u7531\u4e8e\u8fd9\u4e24\u6761BGP\u8def\u7531Next_Hop\u5c5e\u6027\u503c\u90fd\u662f3.3.3.3\uff0c\u56e0\u6b64\uff0c\u672c\u89c4\u5219\u65e0\u6cd5\u505a\u51fa\u51b3\u7b56\uff0c\u56e0\u4e3a\u4e24\u6761\u8def\u7531\u7684 Next_hop\u90fd\u76f8\u7b49\uff0c\u4e0d\u5177\u5907\u5ea6\u91cf\u503c\u7684\u53ef\u6bd4\u6027\u3002\u53ea\u80fd\u518d\u7ee7\u7eed\u5230\u4e0b\u4e00\u6761\u89c4\u5219\u4e2d\u51b3\u7b56\u3002 \u4f18\u9009Cluster-List\u6700\u77ed\u7684\u8def\u7531 \u00b6 \u89c4\u5219\u63cf\u8ff0 \u00b6 \u5982\u679c\u7ecf\u8fc7\u524d\u9762\u7684\u89c4\u5219\uff0c\u90fd\u65e0\u6cd5\u51b3\u7b56\u51fa\u6700\u4f18\u8def\u7531\uff0c\u90a3\u4e48\u5c06\u8fdb\u4e00\u6b65\u6bd4\u8f83\u5019\u9009\u8def\u7531\u7684Cluster_List\u5c5e\u6027\uff0c\u4f18\u9009\u6700\u77edCluster_List\u7684\u8def\u7531\u3002 \u89c4\u5219\u9a8c\u8bc1 \u00b6 \u7565\u3002 \u4f18\u9009Router-ID\u6700\u5c0f\u7684BGP\u90bb\u5c45\u53d1\u6765\u7684\u8def\u7531 \u00b6 \u89c4\u5219\u63cf\u8ff0 \u00b6 \u5982\u679c\u7ecf\u8fc7\u524d\u9762\u7684\u89c4\u5219\uff0c\u90fd\u65e0\u6cd5\u51b3\u7b56\u51fa\u6700\u4f18\u8def\u5f84\uff0c\u90a3\u4e48\u5c06\u4f18\u9009Router-ID\u6700\u5c0f\u7684BGP\u90bb\u5c45\u53d1\u6765\u7684\u8def\u7531\u3002 \u89c4\u5219\u9a8c\u8bc1 \u00b6 \u4ecd\u7136\u662f\u5c06\u5b9e\u9a8c\u73af\u5883\u8fd8\u539f\u6210\u521d\u59cb\u5316\u72b6\u6001\u3002\u5728R1\u53caR2\u4e0a\u90fd\u53d1\u5e03100.0.1.0/24 BGP\u8def\u7531\u3002\u90a3\u4e48\u5728\u4e0d\u505a\u4efb\u4f55\u8def\u7531\u7b56\u7565\u914d\u7f6e\u7684\u60c5\u51b5\u4e0b\uff0cR4\u5c06\u5b66\u4e60\u5230R3\u53caR5\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\uff1a \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cR4\u5df2\u7ecf\u4f18\u9009\u4e86R3\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0cR4\u5c06\u6bd4\u8f83\u901a\u544a\u8fd9\u4e24\u6761\u8def\u7531\u7684\u90bb\u5c45\u7684Router-ID\uff0c\u7531\u4e8eR3\u7684Router-ID 3.3.3.3\u8981\u5c0f\u4e8eR5\u7684Router-ID 5.5.5.5\uff0c\u56e0\u6b64R3\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\u88ab\u4f18\u9009\u3002 \u89c4\u5219\u8865\u5145 \u00b6 \u5982\u679c\u8def\u7531\u643a\u5e26Originator_ID\u5c5e\u6027\uff0c\u5219\u5c06\u4f7f\u7528Originator_ID\u4ee3\u66ffRouter-ID\u8fdb\u884c\u6bd4\u8f83\u3002 \u5728\u4e0a\u9762\u7684\u62d3\u6251\u73af\u5883\u4e2d\uff1a R1\u3001R2\u3001R3\u3001R4\u5c5e\u4e8eAS 1234\uff0cAS\u5185\u8fd0\u884c\u4e86OSPF\uff0c\u8def\u7531\u5668\u90fd\u5ba3\u544a\u5404\u81ea\u7684Loopback0\u63a5\u53e3\uff0c\u63a5\u53e3 IP\u5730\u5740\u4e3ax.x.x.x/32\uff0cx\u4e3a\u8bbe\u5907\u7f16\u53f7\u3002 R1-R4\uff1bR4-R3\uff1bR1-R2\uff1bR2-R3\u57fa\u4e8eLoopback0\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\u3002 R1\u914d\u7f6e\u4e3aRR\uff0cR4\u662f\u5b83\u7684Client\uff1bR3\u914d\u7f6e\u4e3aRR\uff0cR4\u662f\u5b83\u7684Client\u3002 \u5728R4\u4e0a\u53d1\u5e0344.44.44.0/24\u8def\u7531\u8fdbBGP\u3002 \u5f53R1\u6536\u5230R4\u66f4\u65b0\u8fc7\u6765\u7684\u8def\u7531\u540e\uff0c\u4f1a\u5c06\u5176\u53cd\u5c04\u7ed9R2\u5e76\u63d2\u5165Originator_ID\u53caCluster_List\u5c5e\u6027\u3002R3\u540c\u7406\u3002\u90a3\u4e48\u6700\u7ec8R2\u5c06\u5206\u522b\u4eceR1\u548cR3\u5b66\u4e60\u523044.44.44.0/24\u8def\u7531\uff0cR2\u4f1a\u5982\u4f55\u4f18\u9009\uff1f\u8fd9\u4e24\u6761\u8def\u7531\u62e5\u6709\u76f8\u540c\u7684 Preferred_Value\u3001Local_Preference\uff0c\u5e76\u4e14\u90fd\u901a\u544a\u81ea\u90bb\u5c45\uff0cAS_Path\u957f\u5ea6\u4e00\u6837\uff0cOrigin\u4e5f\u76f8\u540c\uff0cMED\u4e5f\u76f8\u7b49\uff0c\u8fd8\u90fd\u662fIBGP\u90bb\u5c45\u901a\u544a\u800c\u6765\uff0c\u8fdeNext_Hop\u5c5e\u6027\u4e5f\u76f8\u540c\uff0c\u53e6\u5916\uff0c\u8def\u7531\u643a\u5e26\u7684Cluster_List\u957f\u5ea6\u4e5f\u76f8\u540c\u3002\u90a3\u4e48\u80fd\u5426\u4f7f\u7528\u672c\u89c4\u5219\u6765\u51b3\u7b56\u5462\uff1f \u6ce8\u610f\uff0c\u7531\u4e8e\u4e24\u6761\u8def\u7531\u90fd\u643a\u5e26\u4e86Originator_ID\u5c5e\u6027\uff0c\u56e0\u6b64\u5728\u8fd9\u4e00\u8f6ePK\u4e2d\uff0c\u5c31\u4e0d\u662f\u6bd4\u8f83R1\u548cR3\u7684Router- ID \u4e86\uff0c \u800c\u662f\u6bd4\u8f83\u8fd9\u4e24\u6761\u8def\u7531\u7684Originator_ID \u5c5e\u6027\u3002\u7ed3\u679c\uff0c \u7531\u4e8e\u8fd9\u4e24\u6761\u8def\u7531\u7684\u8d77\u6e90\u90fd\u662fR4\uff0c\u56e0\u6b64 Originator_ID\u76f8\u7b49\uff0c\u6240\u4ee5\u672c\u6761\u89c4\u5219\u4ecd\u65e0\u6cd5\u51b3\u7b56\u3002\u90a3\u4e48\u53ea\u80fd\u5728\u5f80\u4e0b\u9762\u7684\u89c4\u5219\u7ee7\u7eed\u6bd4\u8f83\u4e86\uff0c\u8bf7\u770b\u4e0b\u6587\u3002 \u4f18\u9009peer IP\u5730\u5740\u6700\u5c0f\u7684\u90bb\u5c45\u53d1\u6765\u7684\u8def\u7531 \u00b6 \u89c4\u5219\u63cf\u8ff0 \u00b6 \u5982\u679c\u7ecf\u8fc7\u524d\u9762\u7684\u4e00\u7cfb\u5217\u89c4\u5219\u4ecd\u7136\u65e0\u6cd5\u4f18\u9009\u51fa\u6700\u4f18\u8def\u7531\uff0c\u90a3\u4e48\u5c06\u6bd4\u8f83\u90bb\u5c45\u7684IP\u5730\u5740\u3002\u8fd9\u4e2aIP\u5730\u5740\u662f\u5728BGP \u8def\u7531\u5668\u7684BGP\u914d\u7f6e\u4e2d\uff0c**peer**\u547d\u4ee4\u540e\u6240\u6307\u7684\u90a3\u4e2aIP\u5730\u5740\u3002 \u89c4\u5219\u9a8c\u8bc1 \u00b6 \u4ecd\u7136\u770b\u4e0a\u4e00\u4e2a\u5c0f\u8282\u6700\u540e\u7684\u5b9e\u9a8c\uff0c\u5728R2\u4e0a\uff0c\u6700\u7ec8\u5c06\u6bd4\u8f83R1\u53caR3\u7684peer ip\uff0c\u5728R2\u4e0a\u914d\u7f6e\u90bb\u5c45R1\u65f6\uff0c\u6211\u4eec\u7528\u7684\u547d\u4ee4\u662f**peer 1.1.1.1 as-number 1234**\uff1b\u914d\u7f6e\u90bb\u5c45R3\u65f6\u7528\u7684\u547d\u4ee4\u662f**peer 3.3.3.3 as-number 1234**\uff0c \u56e0\u6b64R1\u7684\u5730\u5740\u8981\u5c0f\u4e8eR3\uff0c\u6545\u4f18\u9009R1\u4f20\u9012\u8fc7\u6765\u768444.44.44.0/24\u8def\u7531\u3002 5.4 \u865a\u62df\u8def\u7531\u8f6c\u53d1\u5b9e\u4f8b 5.4.1 VPN-Instance \u90e8\u7f72\u6848\u4f8b \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0c\u4e24\u4e2a\u7ad9\u70b9\u7684\u7f51\u7edc\u901a\u8fc7\u6838\u5fc3\u4ea4\u6362\u673a\u4e4b\u95f4\u7684\u4e00\u6761\u4e13\u7ebf\u5b9e\u73b0\u4e86\u8fde\u63a5\u3002\u5177\u4f53\u80cc\u666f\u63cf\u8ff0\u5982\u4e0b\uff1a \u5728\u7ad9\u70b91\u4e2d\uff0c\u6838\u5fc3\u4ea4\u6362\u673a\u4e0a\u5b58\u5728VLAN10\u3001VLAN20\u4e24\u4e2a\u7528\u6237VLAN\uff0c\u5176\u4e2dVLAN10\u662f\u4e1a\u52a1VLAN\uff0c\u800c VLAN20\u662f\u5bb9\u707eVLAN\u3002\u4e24\u4e2aVLAN\u7684\u7f3a\u7701\u7f51\u5173\u90fd\u5728\u6838\u5fc3\u4ea4\u6362\u673aCoreSW-Site1\u4e0a\uff1b CoreSW-Site1\u901a\u8fc7VLAN30\u4e0e\u9632\u706b\u5899FW1/FW2\u5b9e\u73b0\u5bf9\u63a5\uff08\u91c7\u7528\u9759\u6001\u8def\u7531\u7684\u5bf9\u63a5\u65b9\u6848\uff09\u3002\u9632\u706b\u5899\u5bf9\u5185\u63a5\u53e3\u90e8\u7f72\u4e86VRRP\uff0cVRRP\u7684\u865a\u62dfIP\u5730\u5740\u4e3a192.168.30.1\u3002 CoreSW-Site1\u901a\u8fc7VLAN1000\u4e0eCoreSW-Site2\u4e92\u8054\u3002Site1\u7684VLAN20\u4e0eSite2\u7684VLAN21\u9700\u5b9e\u73b0\u4e92\u901a\u3002 \u5bf9\u4e8eSite1\u800c\u8a00\uff0cVLAN10\u4e0eVLAN20\u662f\u9700\u8981\u5b8c\u5168\u9694\u79bb\u7684\u3002 \u8981\u6c42\u5b8c\u6210\u914d\u7f6e\u540e\uff0cVLAN10\u80fd\u591f\u4e0e\u9632\u706b\u5899\u901a\u4fe1\uff0cVLAN20\u80fd\u591f\u4e0eVLAN21\u901a\u4fe1\uff0c\u800cVLAN10\u4e0eVLAN20/21 \u5747\u5b8c\u5168\u9694\u79bb\u3002 \u9700\u8981\u5f3a\u8c03\u7684\u662f\uff0cVLAN10\u53caVLAN20\u7684\u7f51\u5173\u90fd\u653e\u5728\u6838\u5fc3\u4ea4\u6362\u673aCoreSW-Site1\u4e0a\uff0c\u610f\u5473\u7740\u540e\u8005\u5c06\u914d\u7f6eVlanif10 \u53caVlanif20\uff0c\u7531\u4e8e\u8fd9\u4e24\u4e2a\u4e09\u5c42\u63a5\u53e3\u7f3a\u7701\u5df2\u7ecf\u5b9e\u73b0\u4e86\u8def\u7531\u4e92\u901a\uff0c\u56e0\u6b64\u5b9e\u9645\u4e0a\u6b64\u65f6VLAN10\u4e0eVLAN20\u662f\u53ef\u4ee5\u901a\u8fc7CoreSW-Site1\u5b9e\u73b0\u901a\u4fe1\u7684\uff0c\u8fd9\u5c31\u5b58\u5728\u5b89\u5168\u9690\u60a3\uff0c\u4e0d\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\u3002\u5f53\u7136\uff0c\u5728CoreSW-Site1\u4e0a\u90e8\u7f72ACL \u53ef\u4ee5\u8fbe\u5230\u76ee\u7684\uff0c\u4f46\u662f\u8fd9\u672a\u5fc5\u662f\u6700\u4f73\u7684\u3001\u6269\u5c55\u6027\u6700\u9ad8\u7684\u65b9\u6848\u3002 \u53e6\u4e00\u65b9\u6848\u662f\u5728CoreSW-Site1\u4e0a\u521b\u5efaVPN\u5b9e\u4f8b\uff08VPN Instance\uff09\uff0c\u4ece\u800c\u5c06\u4e0d\u540c\u7684\u6d41\u91cf\u5f7b\u5e95\u9694\u79bb\u3002\u5c06VLAN10\u3001 VLAN30\u4fdd\u6301\u5728\u6839\u8bbe\u5907\uff0c\u5c06VLAN20\u3001VLAN1000\u653e\u7f6e\u5728VPN\u5b9e\u4f8b\u4e2d\uff0c\u6839\u8bbe\u5907\u4e0eVPN\u5b9e\u4f8b\u662f\u5f7b\u5e95\u9694\u79bb\u7684\u3002 VPN\u5b9e\u4f8b\uff0c\u53c8\u88ab\u79f0\u4e3a\u865a\u62df\u8def\u7531\u8f6c\u53d1\u5b9e\u4f8b\uff0c\u662f\u4e00\u4e2a\u7c7b\u4f3c\u865a\u62df\u8bbe\u5907\u7684\u6982\u5ff5\u3002\u7f3a\u7701\u65f6\uff0c\u4e00\u4e2a\u7f51\u7edc\u8bbe\u5907\u7684\u6240\u6709\u63a5\u53e3 \uff08\u4f8b\u5982\u9632\u706b\u5899\u7684\u4e09\u5c42\u63a5\u53e3\u6216\u5b50\u63a5\u53e3\uff0c\u6216\u4ea4\u6362\u673a\u7684Vlanif\u7b49\uff0c\u6216\u8def\u7531\u5668\u7684\u4e09\u5c42\u63a5\u53e3\u7b49\uff09\u90fd\u5c5e\u4e8e\u540c\u4e00\u4e2a\u8f6c\u53d1\u5b9e\u4f8b \u2014\u2014\u8bbe\u5907\u7684\u6839\u5b9e\u4f8b\u3002\u5982\u679c\u6211\u4eec\u5728\u8be5\u7f51\u7edc\u8bbe\u5907\u4e0a\u521b\u5efa\u4e00\u4e2aVPN\u5b9e\u4f8b\uff0c\u90a3\u4e48\u5c31\u7b49\u4e8e\u62e5\u6709\u4e86\u4e00\u53f0\u865a\u62df\u8bbe\u5907\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u7279\u5b9a\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u8be5VPN\u5b9e\u4f8b\u4e2d\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u8be5\u63a5\u53e3\u4e13\u95e8\u670d\u52a1\u4e8e\u8fd9\u4e2aVPN\u5b9e\u4f8b\u3002\u6bcf\u4e2aVPN\u5b9e\u4f8b\u4f7f\u7528\u72ec\u7acb\u4e8e\u6839\u8bbe\u5907\u7684\u6570\u636e\u8f6c\u53d1\u8868\uff0c\u4f8b\u5982\u8def\u7531\u8868\u7b49\u7b49\uff0c\u5b83\u4eec\u4f7f\u7528\u4e0d\u540c\u7684\u6570\u636e\u8f6c\u53d1\u5e73\u9762\uff0c\u8fd9\u4f7f\u5f97\u5728\u67d0\u4e2aVPN\u5b9e\u4f8b\uff08\u7684\u63a5\u53e3\uff09\u4e0a\u63a5\u6536\u7684\u6d41\u91cf\uff0c\u4e0d\u4f1a\u88ab\u8f6c\u53d1\u5230\u5176\u4ed6VPN\u5b9e\u4f8b\u6216\u8005\u6839\u8bbe\u5907\u2014\u2014\u5f7b\u5e95\u9694\u79bb\u3002\u8fd9\u4e2a\u6982\u5ff5\u5728MPLS VPN\u4e2d\u6709\u7740\u5173\u952e\u7684\u5e94\u7528\u3002\u5f53\u7136\uff0c\u672c\u6587\u8ba8\u8bba\u7684\u8303\u7574\u4ec5\u9650\u4e8e\u4f7f\u7528VPN\u5b9e\u4f8b\u5b9e\u73b0\u6570\u636e\u9694\u79bb\u7684\u7b80\u5355\u5e94\u7528\u3002 \u7b80\u5355\u7684\u8bf4\u4e0b\u601d\u8def\uff1a \u5728CoreSW-Site1\u4e0a\u521b\u5efaVLAN10\u300120\u300130\u30011000\uff1b \u5728CoreSW-Site1\u4e0a\u914d\u7f6e\u76f8\u5e94\u7684\u4e8c\u5c42\u63a5\u53e3\uff0c\u5c06\u63a5\u53e3\u52a0\u5165\u7279\u5b9a\u7684VLAN\uff1b \u5728CoreSW-Site1\u4e0a\u521b\u5efaVPN\u5b9e\u4f8b\uff0c\u540d\u5b57\u4e3atest\uff1b \u5728CoreSW-Site1\u4e0a\u5c06Vlanif20\u3001Vlanif1000\u6dfb\u52a0\u5230VPN\u5b9e\u4f8btest\uff0c\u4ece\u800c\u8fd9\u4e24\u4e2a\u63a5\u53e3\u4e0e\u6839\u8bbe\u5907\u5f7b\u5e95\u9694\u79bb\uff1b \u4e3aCoreSW-Site1\u7684\u6839\u8bbe\u5907\u914d\u7f6e\u9759\u6001\u9ed8\u8ba4\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3a\u9632\u706b\u5899\u7684VRRP\u865a\u62dfIP\u5730\u5740192.168.30.1\uff1b \u4e3aCoreSW-Site1\u7684VPN\u5b9e\u4f8btest\u914d\u7f6e\u53bb\u5f80VLAN21\u7684\u9759\u6001\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3aCoreSW-Site2\uff1b 7. \u6ce8\uff1aFW1/FW2\u9700\u914d\u7f6e\u5230\u8fbe192.168.10.0/24\u7684\u56de\u7a0b\u8def\u7531\u3002 CoreSW-Site1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a vlan batch 10 20 30 1000 interface GigabitEthernet0/0/11 port link-type access port default vlan 30 description Connect-to-FW1 interface GigabitEthernet0/0/12 port link-type access port default vlan 30 description Connect-to-FW2 interface GigabitEthernet0/0/15 port link-type trunk port trunk allow-pass vlan 1000 undo port trunk allow-pass vlan 1 description Connect-to-CoreSwitchSite2 interface eth-trunk1 port link-type trunk port trunk allow-pass vlan 10 undo port trunk allow-pass vlan 1 description Connect-to-E9000-2X3X interface eth-trunk2 port link-type trunk port trunk allow-pass vlan 20 undo port trunk allow-pass vlan 1 description Connect-to-E9000-1E4E #\u521b\u5efa\u4e00\u4e2a\u540d\u4e3atest\u7684VPN\u5b9e\u4f8b\uff1a ip vpn-instance test route-distinguisher 100:1 #\u914d\u7f6eVLANIF\u63a5\u53e3\uff0c\u5c06VLANIF20\u548cVLANIF1000\u7ed1\u5b9a\u5230VPN\u5b9e\u4f8b test: interface Vlanif10 ip address 192.168.10.1 255.255.255.0 interface Vlanif20 ip binding vpn-instance test ip address 192.168.20.1 255.255.255.0 interface Vlanif30 ip address 192.168.30.4 255.255.255.0 interface Vlanif1000 ip binding vpn-instance test \u6ce8\u610f\uff0c\u6b64\u65f6\u5728CoreSW-Site1\u4e0a\u4f7f\u7528**display ip routing-table**\u547d\u4ee4\u67e5\u770b\u7684\u662f\u6839\u8bbe\u5907\u7684\u8def\u7531\u8868\uff0c\u4f7f\u7528**display ip routing-table vpn-instance test**\u547d\u4ee4\u67e5\u770b\u7684\u662fVPN\u5b9e\u4f8btest\u7684\u8def\u7531\u8868\u3002\u53e6\u5916\u5728CoreSW-Site1\u6267\u884cping\u547d\u4ee4\u65f6\uff0c\u4ea4\u6362\u673a\u5c06\u4f7f\u7528\u6839\u8bbe\u5907\u7684\u63a5\u53e3\u4f5c\u4e3a\u6e90\uff0c\u5e76\u4e14\u5728\u6839\u8bbe\u5907\u7684\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u5230\u8fbe\u76ee\u7684\u5730\u7684\u8def\u7531\u3002\u5982\u679c\u5e0c\u671b\u5728VPN \u5b9e\u4f8b\u7684\u5c42\u9762\u8fdb\u884cping\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982\u5728CoreSW-Site1\u4e0aping CoreSW-Site2\u7684\u5730\u5740192.168.255.2\uff1a \u5197\u4f59\u53ef\u9760 \u00b6 VRRP VRRP \u6982\u8ff0 \u6280\u672f\u80cc\u666f \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cLAN\u5185\u7684PC\u7684\u9ed8\u8ba4\u7f51\u5173\u4e3a192.168.1.254\uff0c\u662f\u56fe\u4e2d\u7684\u8def\u7531\u5668\u3002\u8fd9\u4e2a\u73af\u5883\u5b9e\u9645\u4e0a\u5b58\u5728\u5355\u70b9\u6545\u969c\u7684\u9690\u60a3\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u8def\u7531\u5668\u6216\u8005\u5176\u63a5\u53e3\u53d1\u751f\u6545\u969c\uff0c\u90a3\u4e48\u5c06\u51fa\u73b0\u65ad\u7f51\uff0c\u56e0\u4e3a\u7f51\u5173\u6ca1\u6709\u5197\u4f59\u3002\u800c\u5982\u679c\u589e\u52a0\u4e00\u53f0\u8def\u7531\u5668\u4f5c\u4e3a\u7f51\u5173\u8bbe\u5907\uff0c\u53c8\u610f\u5473\u7740\u5185\u7f51\u7684PC\u9700\u8981\u4fee\u6539\u7f51\u5361\u914d\u7f6e\uff0c\u975e\u5e38\u4f4e\u6548\u3002 VRRP\u6982\u8ff0 \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cLAN\u5185\u6709\u4e24\u53f0\u8def\u7531\u5668\uff0c\u8fd9\u4e24\u53f0\u8def\u7531\u5668\u53ef\u4ee5\u901a\u8fc7VRRP\u534f\u8bae\u4e3aLAN\u5185\u7684PC\u63d0\u4f9b\u5197\u4f59\u7f51\u5173\u3002R1 \u7684GE0/0/0 \u53e3\u53caR2 \u7684GE0/0/0 \u90fd\u8fde\u63a5\u5230\u4e86\u4e00\u53f0\u4e8c\u5c42\u4ea4\u6362\u673a\u4e0a\uff0c IP \u5730\u5740\u5206\u522b\u662f192.168.1.253 \u53ca 192.168.1.252\uff0c\u6b64\u523b\u5b83\u4eec\u5c5e\u4e8e\u4e00\u4e2a\u5e7f\u64ad\u57df\u3002 \u73b0\u5728\u6211\u4eec\u5728R1\u7684GE0/0/0\u53e3\u53caR2\u7684GE0/0/0\u53e3\u4e0a\u6fc0\u6d3bVRRP\uff0c\u5c06\u8fd9\u4e24\u4e2a\u63a5\u53e3\u653e\u5230\u4e00\u4e2aVRRP\u7ec4\u4e2d\uff0cVRRP\u5c06\u4ea7\u751f\u4e00\u53f0\u865a\u62df\u8def\u7531\u5668\uff0c\u8fd9\u53f0\u865a\u62df\u8def\u7531\u5668\u7684IP\u5730\u5740\u4e3a192.168.1.254\u3002LAN\u5185\u7684PC\u5c06\u81ea\u5df1\u7684\u7f51\u5173\u90fd\u6307\u5411\u8fd9\u4e2a\u865a\u62df\u8def\u7531\u5668\u7684IP\u5730\u5740\u3002VRRP\u6765\u51b3\u5b9a\u8be5\u7ec4\u4e2dR1\u8fd8\u662fR2\u6765\u54cd\u5e94PC\u53d1\u5f80192.168.1.254\u7684\u6570\u636e\u8bf7\u6c42\u3002 \u5f53PC\u8981\u8bbf\u95ee\u5916\u7f51\u65f6\uff0c\u9996\u5148\u4f1a\u53d1\u9001ARP\u62a5\u6587\u53bb\u8bf7\u6c42\u7f51\u5173192.168.1.254\u7684MAC\u5730\u5740\uff0c\u8fd9\u65f6\u5019\u7531VRRP\u7684 Master\u8def\u7531\u5668\u6765\u56de\u5e94\u8fd9\u4e2aARP\u8bf7\u6c42\uff0c\u540c\u65f6\u627f\u62c5\u6570\u636e\u8f6c\u53d1\u4efb\u52a1\u3002\u4e8e\u6b64\u540c\u65f6R1\u7684GE0/0/0\u53e3\u4ecd\u7136\u5728\u4ee5\u4e00\u5b9a\u7684\u5468\u671f\u53d1\u9001VRRP\u62a5\u6587\u4ee5\u4fbf\u5411Backup\u8def\u7531\u5668\u901a\u544a\u81ea\u5df1\u7684\u5b58\u6d3b\u72b6\u6001\u3002 \u5f53Master\u8def\u7531\u5668R1\u6302\u6389\u65f6\uff0c\u6216\u8005R1\u7684\u4e0a\u884c\u63a5\u53e3\u53d1\u751f\u6545\u969c\u65f6\uff0cVRRP\u90fd\u6709\u76f8\u5e94\u7684\u673a\u5236\u80fd\u591f\u68c0\u6d4b\u5230\uff0c\u8fd9\u65f6 R2\u5c31\u4f1a\u4eceBackup\u72b6\u6001\u5207\u6362\u5230Master\u72b6\u6001\uff0c\u5e76\u63a5\u66ffR1\u4e4b\u524d\u7684\u5de5\u4f5c\u3002\u6b64\u65f6PC\u5411192.168.1.254\u53d1\u9001\u7684ARP \u8bf7\u6c42\uff0c\u4ee5\u53ca\u4e0a\u884c\u4e1a\u52a1\u6570\u636e\u8f6c\u53d1\u5c31\u7531R2\u5904\u7406\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6574\u4e2a\u5207\u6362\u8fc7\u7a0bPC\u7aef\u65e0\u9700\u505a\u4efb\u4f55\u914d\u7f6e\u53d8\u66f4\u3002 VRRP \u672f\u8bed VRRP\u8def\u7531\u5668 \uff1a\u8fd0\u884cVRRP\u7684\u8def\u7531\u5668\u3002\u4e00\u53f0VRRP\u8def\u7531\u5668\uff08\u7684\u63a5\u53e3\uff09\u53ef\u4ee5\u540c\u65f6\u53c2\u4e0e\u5230\u591a\u4e2aVRRP\u7ec4\u4e2d\uff0c\u5728\u4e0d\u540c\u7684\u7ec4\u4e2d\uff0c\u4e00\u53f0VRRP\u8def\u7531\u5668\u53ef\u4ee5\u5145\u5f53\u4e0d\u540c\u7684\u89d2\u8272\u3002 **VRRP\u7ec4\uff1a**\u4e00\u4e2aVRRP\u7ec4\u7531\u591a\u4e2aVRRP\u8def\u7531\u5668\u7ec4\u6210\uff0c\u5c5e\u4e8e\u540c\u4e00VRRP\u7ec4\u7684VRRP\u8def\u7531\u5668\u4e92\u76f8\u4ea4\u6362\u4fe1\u606f\uff0c\u6bcf\u4e00\u4e2aVRRP\u7ec4\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2aMaster\u3002\u540c\u5c5e\u4e00\u4e2aVRRP\u7ec4\u7684\u8def\u7531\u5668\uff08\u7684\u63a5\u53e3\uff09\u4f7f\u7528\u76f8\u540c\u7684VRID\u3002\u540c\u5c5e\u4e00\u4e2a VRRP\u7ec4\u7684\u8def\u7531\u5668\u4e4b\u95f4\u4ea4\u4e92VRRP\u62a5\u6587\uff0c\u8fd9\u4e9b\u8def\u7531\u5668\u5fc5\u987b\u5904\u4e8e\u76f8\u540c\u7684\u5e7f\u64ad\u57df\u4e2d\u3002 **\u865a\u62df\u8def\u7531\u5668\uff1a**\u5bf9\u4e8e\u6bcf\u4e00\u4e2aVRRP\u7ec4\uff0c\u62bd\u8c61\u51fa\u6765\u7684\u4e00\u4e2a\u903b\u8f91\u8def\u7531\u5668\uff0c\u8be5\u8def\u7531\u5668\u5145\u5f53\u7f51\u7edc\u7528\u6237\u7684\u7f51\u5173\uff0c\u8be5\u8def\u7531\u5668\u5e76\u975e\u771f\u5b9e\u5b58\u5728\uff0c\u4e8b\u5b9e\u4e0a\u5bf9\u4e8e\u7528\u6237\u800c\u8a00\uff0c\u53ea\u9700\u77e5\u9053\u865a\u62df\u8def\u7531\u5668\u7684IP\u5730\u5740\uff0c\u81f3\u4e8e\u865a\u62df\u8def\u7531\u5668\u7684\u89d2\u8272\u7531\u8c01\u6765\u627f\u62c5\u3001\u6570\u636e\u8f6c\u53d1\u4efb\u52a1\u7531\u8c01\u6765\u627f\u62c5\u3001Master\u6302\u6389\u4e4b\u540e\u8c01\u6765\u63a5\u66ff\uff0c\u8fd9\u662fVRRP\u7684\u5de5\u4f5c\u3002 **\u865a\u62dfIP\u5730\u5740\u3001\u865a\u62dfMAC\u5730\u5740\uff1a**\u865a\u62dfIP\u5730\u5740\u662f\u865a\u62df\u8def\u7531\u5668\u7684IP\u5730\u5740\uff0c\u8be5\u5730\u5740\u4e00\u822c\u5c31\u662f\u7528\u6237\u7684\u7f51\u5173\u5730\u5740\u3002\u4e0e\u865a\u62dfIP\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\u4e5f\u662f\u865a\u62df\u7684\uff0c\u8be5MAC\u5730\u5740\u7531\u56fa\u5b9a\u6bd4\u7279\u4f4d\u52a0\u4e0aVRRP VRID\u6784\u6210\uff0c\u5f53PC\u53d1\u9001 ARP\u62a5\u6587\u53bb\u8bf7\u6c42\u865a\u62dfIP\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\u65f6\uff0cMaster\u8def\u7531\u5668\u54cd\u5e94\u8fd9\u4e2aARP\u8bf7\u6c42\u5e76\u544a\u77e5\u865a\u62dfMAC\u5730\u5740\u3002 \u901a\u8fc7VRRP\u5f62\u6210\u7684\u865a\u62df\u8def\u7531\u5668\u4f7f\u7528\u865a\u62dfIP\u5730\u5740\u548c\u865a\u62dfMAC\u4e0e\u7f51\u7edc\u4e2d\u7684PC\u8fdb\u884c\u901a\u4fe1\u3002\u865a\u62dfMAC\u5730\u5740\u7684\u683c\u5f0f\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5176\u4e2dMAC\u5730\u5740\u7684\u6700\u540e1\u4e2a\u5b57\u8282\u586b\u5145VRRP VRID\uff0c\u4f8b\u5982VRID\u662f1\uff0c\u865a\u62dfMAC\u5730\u5740\u4e3a00-00-5E-00-01- 01 \u3002 **Master\u8def\u7531\u5668\u3001Backup\u8def\u7531\u5668\uff1a**Master\u8def\u7531\u5668\u5c31\u662f\u5728VRRP\u7ec4\u4e2d\u7684\u4e3b\u8def\u7531\u5668\uff0c\u5b83\u662f\u5b9e\u9645\u8f6c\u53d1\u4e1a\u52a1\u6570\u636e\u5305\u7684\u8def\u7531\u5668\uff0c\u5728\u6bcf\u4e00\u4e2aVRRP\u7ec4\u4e2d\uff0c\u4ec5\u6709Master\u624d\u4f1a\u54cd\u5e94\u5bf9\u865a\u62dfIP\u5730\u5740\u7684ARP\u8bf7\u6c42\uff0c\u4e5f\u53ea\u6709Master\u624d\u4f1a\u8f6c\u53d1\u4e1a\u52a1\u6570\u636e\u3002Master\u8def\u7531\u5668\u4ee5\u4e00\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u53d1\u9001VRRP\u62a5\u6587\uff0c\u4ee5\u4fbf\u901a\u77e5Backup\u8def\u7531\u5668\u81ea\u5df1\u7684\u5b58\u6d3b\u3002 Backup\u8def\u7531\u5668\u662f\u5728VRRP\u7ec4\u4e2d\u5907\u4efd\u72b6\u6001\u7684\u8def\u7531\u5668\uff0c\u4e00\u65e6Master\u8def\u7531\u5668\u51fa\u73b0\u6545\u969c\uff0c Backup\u8def\u7531\u5668\u5c31\u5f00\u59cb\u63a5\u66ff\u5de5\u4f5c\u3002 **\u9009\u4e3e\u4f9d\u636e\uff1a**\u5148\u6bd4\u8f83\u63a5\u53e3VRRP\u4f18\u5148\u7ea7\uff08\u8d8a\u5927\u8d8a\u4f18\u5148\uff0c\u9ed8\u8ba4\u4e3a100\uff09\uff0c\u5982\u679c\u4f18\u5148\u7ea7\u76f8\u7b49\u5219\u6bd4\u63a5\u53e3IP\u5730\u5740\uff08IP \u5730\u5740\u6700\u5927\u7684\u80dc\u51fa\uff09\u3002 VRRP \u7684\u57fa\u7840\u914d\u7f6e \u57fa\u7840\u5b9e\u9a8c \u00b6 \u5982\u4e0a\u56fe\u6240\u793a\uff0cR1\u3001R2\u53caPC\u8fde\u63a5\u5728\u540c\u4e00\u53f0\u4e8c\u5c42\u4ea4\u6362\u673a\u4e0a\u3002R1\u53caR2\u5c06\u5728GE0/0/0\u63a5\u53e3\u4e0a\u8fd0\u884cVRRP\uff0c\u5b9e\u73b0\u7f51\u5173\u5197\u4f59\u3002\u8981\u6c42\u5728\u6b63\u5e38\u60c5\u51b5\u4e0bR1\u4e3aMaster\uff0c\u5f53R1\u6302\u6389\u65f6\uff0cR2\u80fd\u591f\u6210\u4e3aMaster\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u9700\u6ce8\u610f\uff0c\u7531\u4e8eR1\u4e0eR2\u7684GE0/0/0\u63a5\u53e3\u5de5\u4f5c\u5728\u540c\u4e00\u4e2aVRRP\u7ec4\uff0c\u56e0\u6b64\u53cc\u65b9\u914d\u7f6e\u7684VRID\u5fc5\u987b\u76f8\u540c\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5728R1\u3001R2\u4e0a\u505a\u4e00\u4e0b\u67e5\u770b\uff1a track\u63a5\u53e3\u72b6\u6001 \u00b6 Backup\u8def\u7531\u5668\u4f1a\u4e0d\u65ad\u4fa6\u542cMaster\u53d1\u51fa\u6765\u7684VRRP\u62a5\u6587\u4ee5\u4fbf\u5224\u65ad\u5b83\u7684\u5b58\u6d3b\u72b6\u6001\uff0c\u5f53Master\u8def\u7531\u5668\u53d1\u751f\u6545\u969c\u65f6\uff0cBackup\u8def\u7531\u5668\u80fd\u591f\u611f\u77e5\u5e76\u4e14\u8fdb\u884c\u5207\u6362\u3002\u4f46\u662f\u5982\u679cMaster\u8def\u7531\u5668\u6ca1\u6709\u53d1\u751f\u6574\u673a\u6545\u969c\uff0c\u800c\u53ea\u662f\u5176\u4e0a\u884c\u63a5\u53e3\u6545\u969c\u4e86\u5462\uff1f\u4f8b\u5982\u4e0a\u56fe\u4e2d\uff0cR1\u4f5c\u4e3aMaster\u8def\u7531\u5668\uff0c\u5982\u679c\u5176GE0/0/1\u53e3DOWN\u6389\u4e86\uff0c\u90a3\u4e48\u7528\u6237\u7684\u4e0a\u884c\u6d41\u91cf\u88ab\u5f15\u5bfc\u5230R1\u540e\uff0c\u5c06\u4f1a\u88ab\u4e22\u5f03\u3002 VRRP\u6709\u4e00\u4e2a\u7279\u6027\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a\u901a\u8fc7\u5728R1\u4e0a\u90e8\u7f72VRRP track\uff0c\u4f7f\u5176\u80fd\u591f\u8ddf\u8e2aGE0/0/1\u7684\u72b6\u6001\uff0c\u5982\u679cGE0/0/1\u7684\u7269\u7406\u72b6\u6001\u6216\u8005\u534f\u8bae\u72b6\u6001\u53d8\u4e3aDown\uff0c\u90a3\u4e48R1\u5c31\u4f1a\u4e3b\u52a8\u5c06\u81ea\u5df1\u7684GE0/0/0\u63a5\u53e3VRRP\u4f18\u5148\u7ea7\u51cf\u53bb\u4e00\u4e2a\u503c\uff0c\u4ece\u800c\u4f7f\u5f97R2\u7684\u4f18\u5148\u7ea7\u503c\u66f4\u5927\u3001\u4f18\u5148\u7ea7\u66f4\u9ad8\uff0c\u90a3\u4e48R2\u5c06\u6210\u4e3a\u65b0\u7684Master\uff0cR1\u5219\u6210\u4e3aBackup\uff0c\u7528\u6237\u53d1\u5f80\u9ed8\u8ba4\u7f51\u5173\u7684\u4e0a\u884c\u6d41\u91cf\u4fbf\u4f1a\u88ab\u5f15\u5bfc\u5230R2\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5907\u6ce8\uff1aR2\u7684GE0/0/0\u63a5\u53e3VRRP\u4f18\u5148\u7ea7\u503c\u4e3a\u9ed8\u8ba4\u503c100\u3002 \u8def\u7531\u5668\u4e0a\u8fd0\u884c\u591a\u7ec4VRRP\u5b9e\u73b0\u8d1f\u8f7d\u5206\u62c5 \u00b6 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5728\u4e09\u5c42\u4ea4\u6362\u673a\u4e0a\u90e8\u7f72VRRP \u00b6 SW1\u53caSW2\u90fd\u662f\u4e09\u5c42\u4ea4\u6362\u673a\uff0c\u5185\u7f51\u6709VLAN10\u7684\u7528\u6237\uff0c\u7f51\u6bb5\u4e3a192.168.10.0/24\u3002\u73b0\u5728\u8981\u5728SW1\u53caSW2 \u95f4\u8dd1\u4e00\u7ec4VRRP\u3002\u6b63\u5e38\u60c5\u51b5\u4e0bSW1\u7684vlanif10\u4e3a\u4e3b\uff0cSW2\u4e3a\u5907\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a VRRP+MSTP\u5178\u578b\u7ec4\u7f51 \u00b6 SW1\u53caSW2\u4e3a\u6838\u5fc3\u4ea4\u6362\u673a\uff0cSW3\u4e3a\u63a5\u5165\u5c42\u4ea4\u6362\u673a\u4e0b\u8054PC\u3002\u4e09\u53f0\u4ea4\u6362\u673a\u6784\u6210\u4e00\u4e2a\u4e09\u89d2\u5f62\u5197\u4f59\u73af\u5883\u3002\u5185\u7f51\u5b58\u5728\u56db\u4e2aVLAN\uff1a10\u300120\u300130\u548c40\u3002 \u8981\u6c42\u7f51\u7edc\u6b63\u5e38\u65f6\uff0cVLAN10\u300120\u7684\u7528\u6237\u4e0a\u884c\u7684\u6d41\u91cf\u8d70SW1\uff1bVLAN30\u300140\u7684\u4e0a\u884c\u6d41\u91cf\u8d70SW2\uff0c\u5e76\u4e14\u5f53SW1 \u6216SW2\u53d1\u751f\u6545\u969c\u65f6\uff0c\u80fd\u591f\u8fdb\u884c\u81ea\u52a8\u5207\u6362\u3002 \u8fd9\u91cc\u5b9e\u9645\u4e0a\u9700\u8981\u540c\u65f6\u8003\u8651\u4e24\u4e2a\u56e0\u7d20\uff0c\u4e00\u662fVRRP\uff0c\u4e8c\u662fMSTP\u3002\u4ece\u4e09\u5c42\u7684\u89d2\u5ea6\u6765\u8bf4\uff0cSW1\u662fVLAN10\u3001 20\u7684VRRP Master\uff0cSW2\u662fVLAN30\u300140\u7684VRRP Master\u3002\u4ece\u4e8c\u5c42\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u7f51\u7edc\u91cc\u80af\u5b9a\u662f\u6709\u73af\u8def\u7684\uff0c\u56e0\u6b64\u9700\u8981\u501f\u52a9MSTP\u6765\u6253\u7834\u73af\u8def\uff0c\u4f46\u662f\u4e0d\u80fd\u968f\u4fbf\u963b\u585e\u7aef\u53e3\uff0c\u5e94\u8be5\u4fdd\u8bc1VLAN10\u300120\u7684\u6d41\u91cf\u8d70\u5de6\u4fa7\u7684\u94fe\u8def\u5230SW1\uff0c\u800cVLAN30\u300140\u7684\u6d41\u91cf\u8d70\u53f3\u4fa7\u5230SW2\u3002\u56e0\u6b64MSTP\u7684\u914d\u7f6e\u4e0a\uff0c\u5c06VLAN10\u300120\u53caVLAN30\u3001 40\u5206\u522b\u6620\u5c04\u5230\u4e0d\u540c\u7684MST\u5b9e\u4f8b\u3002\u4f8b\u5982\u5c06VLAN10\u300120\u6620\u5c04\u5230Instance 1\uff0c\u5c06vlan30\u300140\u6620\u5c04\u5230Instance2\uff0c \u7136\u540e\u5c06SW1\u8bbe\u7f6e\u4e3aInstance1\u7684\u4e3b\u6839\u3001SW2\u4e3aInstance1\u7684\u6b21\u6839\uff0c\u5c06SW1\u4e3aInstance2\u7684\u6b21\u6839\uff0cSW2\u4e3a Instance2\u7684\u4e3b\u6839\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5728Instance1\u7684\u751f\u6210\u6811\u4e2d\uff0cSW3\u7684G0/0/23\u5c06\u88ab\u963b\u585e\uff0c\u5728Instance2\u7684\u751f\u6210\u6811\u4e2d\uff0cSW3\u7684GE0/0/22\u5c06\u88ab\u963b\u585e\u3002 SW3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5404VLAN\u7684\u7528\u6237\u90fd\u80fd\u591fping\u901a\u81ea\u5df1\u7684\u7f51\u5173\uff1b\u6211\u4eec\u5728SW3\u4e0a\u770b\u770b\uff1a \u6211\u4eec\u770b\u5230\uff0cMSTP\u5b9e\u4f8b1\u4e2d\u88ab\u963b\u585e\u7684\u7aef\u53e3\u662fGE0/0/23\u53e3\uff1bMSTP\u5b9e\u4f8b2\u4e2d\u88ab\u963b\u585e\u7684\u7aef\u53e3\u662fGE0/0/22\uff0c\u7b26\u5408\u9700\u6c42\u3002\u518d\u53bbSW1\u4e0a\u770b\u770bVRRP\u7ec4\u7684\u72b6\u6001\uff1a [SW1] display vrrp brief VRID State Interface Type Virtual IP -------------------------------------------------------------------------------------------------- 1 Master Vlanif10 Normal 192.168.10.254 2 Master Vlanif20 Normal 192.168.20.254 3 Backup Vlanif30 Normal 192.168.30.254 \u4ece\u4e0a\u8ff0\u8f93\u51fa\u53ef\u4ee5\u770b\u51fa\uff0cSW1\u4e3aVRRP\u7ec41\u53ca\u7ec42\u7684Master\uff0c\u540c\u65f6\u4e5f\u4e3aVRRP\u7ec43\u548c\u7ec44\u7684Backup\u3002 VRRP \u5e38\u89c1\u95ee\u9898 VRRP\u53cc\u4e3b\u95ee\u9898 \u00b6 \u7531\u4e8eVRRP\u534f\u8bae\u62a5\u6587\u662f\u4ee5\u7ec4\u64ad\u7684\u65b9\u5f0f\u53d1\u9001\u7684\uff0c\u8fd9\u5c31\u63d0\u51fa\u4e86\u4e00\u4e2a\u9650\u5236\uff1aVRRP\u7684\u6210\u5458\u63a5\u53e3\u5fc5\u987b\u5904\u4e8e\u4e00\u4e2a LAN\u6216\u8005\u8bf4\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\uff0c\u5426\u5219VRRP\u62a5\u6587\u5c06\u65e0\u6cd5\u6b63\u5e38\u6536\u53d1\uff0c\u5982\u679c\u540c\u4e00\u4e2aVRRP\u7ec4\u5185\u7684\u63a5\u53e3\u65e0\u6cd5\u6b63\u5e38\u6536\u53d1VRRP\u62a5\u6587\uff0c\u5c31\u5bb9\u6613\u51fa\u73b0\u53cc\u4e3b\u6545\u969c\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u53caR2\u7684GE0/0/0\u63a5\u53e3\u63a5\u5165\u540c\u4e00\u4e2a\u4ea4\u6362\u673a\uff0c\u6b64\u65f6R1\u3001R2\u7684GE0/0/0\u63a5\u53e3\u5904\u4e8e\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\uff0c VRRP\u7684\u534f\u8bae\u62a5\u6587\u6536\u53d1\u5e94\u8be5\u6ca1\u6709\u95ee\u9898\uff0c\u6b64\u65f6VRRP\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u3002\u4f46\u662f\u5982\u679c\u4ea4\u6362\u673a\u8fde\u63a5R1\u3001R2\u7684\u8fd9\u4e24\u4e2a\u63a5\u53e3\u88ab\u5212\u5206\u5230\u4e86\u4e24\u4e2a\u4e0d\u540c\u7684VLAN\u4e2d\uff0c\u90a3\u4e48\u5c31\u4f1a\u51fa\u73b0\u53cc\u4e3b\u6545\u969c\u3002\u56e0\u4e3a\u4e00\u53f0\u8def\u7531\u5668\u53d1\u51fa\u7684VRRP\u62a5\u6587\u65e0\u6cd5\u88ab\u53e6\u4e00\u53f0\u63a5\u6536\uff0c\u53cc\u65b9\u611f\u77e5\u4e0d\u5230\u5bf9\u65b9\u7684\u5b58\u5728\u3002 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u4e0b\u884c\u8bbe\u5907\u5747\u4e3a\u8def\u7531\u5668\uff0c\u5982\u679c\u8fd9\u4e9b\u8def\u7531\u5668\u90fd\u91c7\u7528\u4e09\u5c42\u63a5\u53e3\uff08\u800c\u4e0d\u662f\u4e8c\u5c42\u63a5\u53e3\uff09\u4e0e\u4e0a\u9762\u7684\u8bbe\u5907\u5bf9\u63a5\uff0c\u90a3\u4e48\u4e0a\u9762\u7684\u8bbe\u5907\u5c31\u4e0d\u5177\u5907\u8fd0\u884cVRRP\u7684\u6761\u4ef6\uff0c\u56e0\u4e3a\u5728\u8fd9\u79cd\u573a\u666f\u4e2d\uff0cVRRP\u534f\u8bae\u62a5\u6587\u65e0\u6cd5\u88ab\u4e0b\u9762\u7684\u8def\u7531\u5668\u900f\u4f20\u3002\u8fd9\u6837\uff0c\u4e0a\u8ff0\u4e24\u79cd\u7ec4\u7f51\u5c31\u4e0d\u80fd\u591f\u90e8\u7f72VRRP\uff0c\u6b64\u65f6\uff0c\u53ef\u91c7\u7528\u52a8\u6001\u8def\u7531\u534f\u8bae\u3002 \u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185VRRP VRID\u51b2\u7a81 \u00b6 \u5982\u56fe\u4e2d\u6240\u793a\uff0c\u8def\u7531\u5668\u4e0e\u4ea4\u6362\u673a\u4e4b\u95f4\u901a\u8fc7VRRP\u7684\u65b9\u5f0f\u8fdb\u884c\u4e09\u5c42\u5bf9\u63a5\uff0c\u4f46\u4e0a\u3001\u4e0b\u884cVRRP\u7684VRID\u88ab\u8bbe\u7f6e\u4e3a\u4e00\u6837\uff0c\u7531\u4e8eVRRP\u901a\u8fc7VRID\u6765\u533a\u5206\u4e0d\u540c\u7684VRRP\u7ec4\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u51fa\u73b0\u4e0a\u56fe\u8fd9\u7c7b\u60c5\u51b5\u5c31\u4f1a\u9020\u6210VRRP\u7684\u8ba1\u7b97\u6df7\u4e71\uff0c\u8bef\u8ba4\u4e3a\u56db\u53f0\u8bbe\u5907\u7684\u63a5\u53e3\u52a0\u5165\u4e86\u540c\u4e00\u4e2aVRRP\u7ec4\u3002 \u6240\u4ee5\u5728\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\uff0c\u4e0d\u540c\u7684VRRP\u7ec4\u7684VRID\u5207\u8bb0\u4e0d\u80fd\u4ea7\u751f\u51b2\u7a81\u3002 VRRP \u4e0e NQA \u7684\u8054\u52a8 \u6280\u672f\u80cc\u666f \u00b6 NQA\uff08Network Quality Analysis\uff09\u662f\u6211\u53f8\u6570\u901a\u8bbe\u5907\u4e0a\u7528\u4e8e\u7f51\u7edc\u8d28\u91cf\u5206\u6790\u7684\u4e00\u4e2a\u7279\u6027\u3002\u8be5\u7279\u6027\u80fd\u591f\u68c0\u6d4b\u7f51\u7edc\u7684\u5404\u9879\u6027\u80fd\u6307\u6807\uff0c\u6700\u7b80\u5355\u5e94\u7528\u5982\u4f7f\u7528NQA\u68c0\u6d4b\u7f51\u7edc\u4e2d\u67d0\u4e2aIP\u5730\u5740\u7684\u53ef\u8fbe\u6027\u3002\u5f53\u7136NQA\u7684\u529f\u80fd\u975e\u5e38\u4e30\u5bcc\uff0c\u8fd8\u80fd\u591f\u7528\u4e8e\u91c7\u96c6\u7f51\u7edcHTTP\u7684\u603b\u65f6\u5ef6\u3001TCP\u8fde\u63a5\u65f6\u5ef6\u3001\u6587\u4ef6\u4f20\u8f93\u901f\u7387\u3001FTP\u8fde\u63a5\u65f6\u5ef6\u3001DNS\u89e3\u6790\u65f6\u5ef6\u3001DNS\u89e3\u6790\u9519\u8bef\u7387\u7b49\u3002NQA\u7684\u91c7\u96c6\u7ed3\u679c\u53ef\u4ee5\u88ab\u591a\u79cd\u5e94\u7528\u6240\u4f7f\u7528\uff0c\u4f8b\u5982\u548c\u9759\u6001\u8def\u7531\u5173\u8054\uff0c\u4ece\u800c\u4e3a\u9759\u6001\u8def\u7531\u5e26\u6765\u66f4\u597d\u7684\u7075\u6d3b\u6027\uff0c\u6216\u8005\u4e0eVRRP\u8054\u52a8\uff0c\u63d0\u9ad8VRRP\u7684\u53ef\u9760\u6027\u3002 \u4f8b\u5982\u4e0a\u56fe\u6240\u793a\u7684\u73af\u5883\u4e2d\uff0cR1\u4e0eR2\u4e4b\u95f4\u9694\u7740\u4e00\u53f0\u4e8c\u5c42\u4ea4\u6362\u673a\uff0cR1\u914d\u7f6e\u5230\u8fbe8.8.8.0/24\u7f51\u7edc\u7684\u9759\u6001\u8def\u7531\uff0c \u5982\u679cR2\u53d1\u751f\u6545\u969c\uff0c\u6216\u8005\u4ea4\u6362\u673a\u4e0eR2\u4e4b\u95f4\u7684\u4e92\u8054\u7ebf\u8def\u53d1\u751f\u6545\u969c\uff0cR1\u662f\u65e0\u6cd5\u611f\u77e5\u7684\uff0c\u8fd9\u5c31\u4f1a\u4ea7\u751f\u95ee\u9898\u3002\u4e3a \u4e86\u89c4\u907f\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u5728R1\u4e0a\u8fd0\u884c\u4e00\u7ec4NQA\u5b9e\u4f8b\uff0c\u63a2\u6d4b\u5230\u8fbe10.1.12.2\u7684\u53ef\u8fbe\u6027\uff0c\u7136\u540e\uff0c\u9759\u6001\u8def\u7531\u8ddf\u8e2a\u8fd9\u4e2a\u63a2\u6d4b\u7684\u7ed3\u679c\uff0c\u5982\u679c\u63a2\u6d4b\u7684\u7ed3\u679c\u662f\u5931\u8d25\u7684\uff0c\u610f\u5473\u774010.1.12.2\u4e0d\u53ef\u8fbe\u4e86\uff0c\u5219\u5c06\u9759\u6001\u8def\u7531\u5931\u6548\u3002 \u9a8c\u8bc1\u5b9e\u9a8c \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u73af\u5883\u4e2d\uff0cVLAN10\u4e3a\u7528\u6237\u6240\u5728\u7684VLAN\u3002 SW1\u3001SW2\u521b\u5efaVLAN10\u53caVLAN11\uff0c\u5728vlanif10\u4e0a\u8fd0\u884cVRRP\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0bSW1\u4e3a\u4e3b\uff0cSW2\u4e3a\u5907\u3002 PC\u7684\u7f51\u5173\u8bbe\u7f6e\u4e3aVRRP\u7ec4\u7684\u865a\u62dfIP\u5730\u5740\u3002 SW1\u53caSW2\u7684VLAN11\u7528\u4e8e\u4e0a\u8054\uff0c\u4ec5\u505a\u6d4b\u8bd5\uff0c\u4e0d\u90e8\u7f72VRRP\u3002\u5728SW4\u4e0a\u914d\u7f6e\u4e00\u4e2aIP\u4f5c\u4e3a\u6d4b\u8bd5IP\u5730\u5740\u3002 \u8981\u6c42\u7f51\u7edc\u6b63\u5e38\u65f6\uff0cVRRP\u7ec4\u7684Master\u5728SW1\u4e0a\u3002\u5f5311.1.1.100\u4e0d\u53ef\u8fbe\u65f6\uff0cVRRP\u7ec4\u80fd\u591f\u81ea\u52a8\u5207\u6362\u3002 SW1\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a \u5728SW4\u4e0aundo\u6389IP\u5730\u574011.1.1.100\u6765\u6a21\u62df11.1.1.100\u4e0d\u53ef\u8fbe\u3002\u6ce8\u610f\uff0c\u6b64\u523bSW1\u4e0eSW4\u4e4b\u95f4\u7684\u8fde\u7ebf\u4ecd\u7136 \u662f\u6b63\u5e38\u7684\uff0c\u4f20\u7edf\u7684VRRP\u53ea\u80fd\u8ddf\u8e2a\u76f4\u8fde\u63a5\u53e3\u7684\u72b6\u6001\uff0c\u4f46\u662f\u4e0eNQA\u8054\u52a8\u7684VRRP\u80fd\u591f\u611f\u77e5\u5230\u8fdc\u7aefIP\u7684\u53ef\u8fbe\u6027\u3002\u56e0\u6b64\u5728undo\u638911.1.1.100\u8fd9\u4e2a\u5730\u5740\u540e\uff0cSW1\u7684NQA\u5b9e\u4f8b\u4f1a\u68c0\u6d4b\u5230\u76ee\u6807IP\u5730\u5740\u4e0d\u53ef\u8fbe\uff0c\u4ece\u800cNQA\u7684\u6d4b\u8bd5\u5b9e\u4f8b\u72b6\u6001\u4f1a\u53d8\u6210failed\uff0c\u800cVRRP\u4e5f\u4f1a\u68c0\u6d4b\u5230\u8fd9\u4e2a\u53d8\u5316\uff0c\u5e76\u5c06\u81ea\u5df1\u7684\u4f18\u5148\u7ea7\u51cf\u53bb20\uff0c\u5982\u6b64\u4e00\u6765SW2 \u5c31\u4f1a\u6210\u4e3a\u65b0\u7684Master\u3002 \u5f5311.1.1.100\u6062\u590d\u65f6\uff08\u91cd\u65b0\u914d\u7f6e\u4e0a\u8fd9\u4e2aIP\u5730\u5740\uff09\uff0cNQA\u80fd\u591f\u68c0\u6d4b\u5230\uff0c\u6d4b\u8bd5\u7528\u4f8b\u7684\u72b6\u6001\u53d8\u6210Success\uff0cVRRP\u611f\u77e5\u5230\u540e\uff0c\u5c06\u4f18\u5148\u7ea7\u53d8\u56de110\uff0c\u5982\u6b64SW1\u53c8\u62a2\u5360\u56deMaster\uff0cSW2\u5219\u53d8\u6210Backup\u3002 \u6ce8\u610f\uff0c\u5728\u90e8\u7f72NQA\u65f6\uff0c\u5404\u9879\u53c2\u6570\u7684\u914d\u7f6e\u52a1\u5fc5\u6ce8\u610f\uff0c\u5982\u679c\u53c2\u6570\u914d\u7f6e\u4e0d\u5f53\uff0c\u6709\u53ef\u80fd\u4f1a\u5bfc\u81f4NQA\u68c0\u6d4b\u7ed3\u679c\u7684\u5f02\u5e38\u3002\u53c2\u6570\u9700\u9075\u5faa\u5982\u4e0b\u89c4\u5219\uff1a interval * probe-count + timeout \\< fruency \u7f51\u7edc\u5b89\u5168 \u00b6 ACL ACL \u6982\u8ff0 ACL\uff08Access Control List\uff0c\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff09\u662f\u7531\u4e00\u7cfb\u5217permit\u6216deny\u8bed\u53e5\u7ec4\u6210\u7684\u3001\u6709\u5e8f\u7684\u89c4\u5219\u96c6\u5408\uff0c \u5b83\u901a\u8fc7\u5339\u914d\u62a5\u6587\u7684\u76f8\u5173\u5b57\u6bb5\u5b9e\u73b0\u5bf9\u62a5\u6587\u7684\u5206\u7c7b\u3002 ACL\u672c\u8eab\u53ea\u662f\u4e00\u7ec4\u89c4\u5219\uff0c\u53ea\u80fd\u533a\u5206\u67d0\u4e00\u7c7b\u62a5\u6587\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0cACL\u66f4\u50cf\u662f\u4e00\u4e2a\u5de5\u5177\uff0c\u5f53\u6211\u4eec\u5e0c\u671b\u901a\u8fc7ACL \u6765\u5b9e\u73b0\u9488\u5bf9\u7279\u5b9a\u6d41\u91cf\u7684\u8fc7\u6ee4\u65f6\uff0c\u5c31\u9700\u8981\u5728\u9002\u5f53\u7684\u5e94\u7528\u4e2d\u8c03\u7528\u5df2\u7ecf\u5b9a\u4e49\u597d\u7684ACL\u3002 ACL\u662f\u4e00\u4e2a\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\u7684\u5de5\u5177\uff0c\u80fd\u591f\u5728\u591a\u79cd\u573a\u666f\u4e0b\u88ab\u8c03\u7528\u3002 ACL\u7684\u4e3b\u8981\u4f7f\u7528\u573a\u666f\uff1a \u00b6 \u88ab\u6d41\u91cf\u7b56\u7565\u8c03\u7528\uff0c\u7528\u4e8e\u8fc7\u6ee4\u6d41\u91cf\uff08\u53ef\u57fa\u4e8e\u6e90\u3001\u76ee\u7684IP\u5730\u5740\u3001\u534f\u8bae\u7c7b\u578b\u3001\u7aef\u53e3\u53f7\u7b49\u5143\u7d20\uff09\uff1b \u5728route-policy\u4e2d\u88ab\u8c03\u7528\uff0c\u7528\u4e8e\u5339\u914d\u7279\u5b9a\u7684\u8def\u7531\u524d\u7f00\uff0c\u4ece\u800c\u6267\u884c\u8def\u7531\u7b56\u7565\uff1b \u5728VPN\u4e2d\u8c03\u7528\uff0c\u7528\u4e8e\u5339\u914d\u611f\u5174\u8da3\u6570\u636e\u6d41\uff1b \u5728\u9632\u706b\u5899\u7684\u7b56\u7565\u90e8\u7f72\u4e2d\u8c03\u7528\uff0c\u7528\u4e8e\u5339\u914d\u6d41\u91cf\uff1b \u5176\u4ed6\u2026\u2026\u3002 ACL\uff08Access Control List\uff09\u79f0\u4e3a\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff0c\u987e\u540d\u601d\u4e49\u5b83\u662f\u4e00\u4e2a\u5217\u8868\u5f62\u5f0f\u7684\u4e00\u7ec4\u89c4\u5219\u3002ACL\u80fd\u591f\u8bc6\u522b\u4e00\u4e2aIP\u6570\u636e\u5305\u4e2d\u7684\u6e90IP\u5730\u5740\u3001\u76ee\u7684IP\u5730\u5740\u3001\u534f\u8bae\u7c7b\u578b\u3001\u6e90\u76ee\u7684\u7aef\u53e3\u7b49\u5143\u7d20\uff0c\u4ece\u800c\u80fd\u591f\u9488\u5bf9\u4e0a\u8ff0\u5143\u7d20\u8fdb\u884c\u62a5\u6587\u7684\u5339\u914d\u3002\u4f8b\u5982\u4e00\u4e2a\u7f51\u7edc\u8bbe\u5907\u5728\u67d0\u4e2a\u63a5\u53e3\u4e0a\u6e90\u6e90\u4e0d\u65ad\u5730\u63a5\u6536\u5404\u79cd\u7f51\u7edc\u6d41\u91cf\uff0c\u73b0\u5728\u6211\u4eec\u5e0c\u671b\u5bf9\u8fd9\u4e9b\u6d41\u91cf\u4e2d\u7684\u67d0\u4e9b\u7279\u5b9a\u6d41\u91cf\u8fdb\u884c\u8bc6\u522b\uff0c\u4ee5\u4fbf\u505a\u8fdb\u4e00\u6b65\u7684\u52a8\u4f5c\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7528\u5230ACL\u4e86\u3002\u6b64\u5916\uff0c\u9664\u4e86\u80fd\u591f\u7528\u4e8e\u5339\u914d\u6570\u636e\uff0cACL\u8fd8\u80fd\u591f\u7528\u4e8e\u5339\u914d\u8def\u7531\uff0c\u4f7f\u5f97\u6211\u4eec\u80fd\u591f\u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u90e8\u7f72\u4e0d\u540c\u7684\u8def\u7531\u7b56\u7565\u3002 \u4e0a\u56fe\u663e\u793a\u7684\u662f\u4e00\u4e2a\u7f16\u53f7\u4e3axxx\u7684ACL\uff0c\u8fd9\u4e2aACL\u4e2d\u5305\u542b\u4e86\u591a\u6761\u89c4\u5219\uff08Rule\uff09\uff0c\u6bcf\u6761\u89c4\u5219\u90fd\u6709\u4e00\u4e2a\u7f16\u53f7\uff0c\u6240\u6709\u7684\u89c4\u5219\u6309\u7167\u89c4\u5219\u7f16\u53f7\u7684\u5927\u5c0f\u8fdb\u884c\u6392\u5217\uff0c\u7f16\u53f7\u8d8a\u5c0f\uff0c\u6392\u884c\u8d8a\u524d\u3002\u5728\u6bcf\u4e00\u4e2a\u89c4\u5219\u4e2d\uff0c\u90fd\u53ef\u5b9a\u4e49\u5339\u914d\u6761\u4ef6\uff0c\u4ee5\u53ca\u76f8\u5e94\u7684\u5141\u8bb8/\u62d2\u7edd\u7684\u52a8\u4f5c\u3002\u5728ACL\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u8bbe\u5907\u4ece\u8be5ACL\u4e2d\u62e5\u6709\u6700\u5c0f\u7f16\u53f7\u7684\u89c4\u5219\u5f00\u59cb\u8fdb\u884c\u8ba1\u7b97\u4e0e\u5339\u914d\uff0c \u5982\u679c\u88ab\u5339\u914d\u5bf9\u8c61\u6ee1\u8db3\u8be5\u6761\u89c4\u5219\u4e2d\u7684\u5339\u914d\u6761\u4ef6\uff0c\u5219\u6267\u884c\u8be5\u6761\u89c4\u5219\u6240\u5b9a\u4e49\u7684\u52a8\u4f5c\uff0c\u5e76\u4e14\u4e0d\u4f1a\u518d\u5f80\u4e0b\u8ba1\u7b97\u5176\u4ed6\u89c4\u5219\uff1b\u800c\u5982\u679c\u88ab\u5339\u914d\u5bf9\u8c61\u4e0d\u6ee1\u8db3\u8be5\u6761\u89c4\u5219\u4e2d\u7684\u5339\u914d\u6761\u4ef6\uff0c\u5219\u7ee7\u7eed\u5f80\u4e0b\u4e00\u6761\u89c4\u5219\u8fdb\u884c\u5339\u914d\u3002 ACL \u7684\u5206\u7c7b ACL\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u6570\u5b57\u6765\u547d\u540d\uff0c\u4f8b\u5982ACL 2000\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u5b57\u7b26\u4e32\u6765\u547d\u540d\uff0c\u4f8b\u5982Test\u3002\u6211\u4eec\u5728\u521b\u5efaACL \u65f6\uff0c\u53ef\u4ee5\u9009\u62e9\u4e0a\u8ff0\u4e24\u79cd\u547d\u540d\u65b9\u5f0f\u4e2d\u7684\u4e00\u79cd\u3002 \u6309\u7167\u529f\u80fd\u4e0d\u540c\uff0cACL\u5b58\u5728\u591a\u79cd\u7c7b\u578b\uff0c\u5176\u4e2d\u6700\u4e3b\u8981\u7684\u4e24\u79cd\u662f\uff1a \u57fa\u672cACL \u00b6 \u57fa\u672cACL\u53ea\u80fd\u591f\u9488\u5bf9IP\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u7b49\u4fe1\u606f\u8fdb\u884c\u6d41\u91cf\u5339\u914d\u3002\u4f8b\u5982\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u57fa\u672cACL\u6765\u62d2\u7edd\u6e90IP\u5730\u5740\u6bb5\u4e3a192.168.1.0/24\u7684\u62a5\u6587\u3002\u5982\u679c\u5728\u4ea4\u6362\u673a\u4e0a\u4f7f\u7528\u6570\u5b57\u547d\u540d\u7684\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u57fa\u672cACL\uff0c\u90a3\u4e48\u6570\u5b57\u7684\u8303\u56f4\u4e3a2000\uff5e2999\u3002 \u9ad8\u7ea7ACL \u00b6 \u9ad8\u7ea7ACL\u80fd\u591f\u9488\u5bf9IP\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u3001\u76ee\u7684IP\u5730\u5740\u3001\u534f\u8bae\u7c7b\u578b\u3001TCP\u6e90\u6216\u76ee\u7684\u7aef\u53e3\u3001UDP\u6e90\u6216\u76ee\u7684\u7aef\u53e3\u7b49\u5143\u7d20\u8fdb\u884c\u6d41\u91cf\u5339\u914d\u3002\u56e0\u6b64\u5b83\u7684\u529f\u80fd\u76f8\u8f83\u57fa\u7840ACL\u8981\u66f4\u4e30\u5bcc\u4e00\u4e9b\u3002 \u5982\u679c\u5728\u4ea4\u6362\u673a\u4e0a\u4f7f\u7528\u6570\u5b57\u547d\u540d\u7684\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u9ad8\u7ea7ACL\uff0c\u90a3\u4e48\u6570\u5b57\u7684\u8303\u56f4\u4e3a3000\uff5e3999\u3002 ACL \u7684\u914d\u7f6e \u521b\u5efa\u57fa\u672cACL \u00b6 \u4f7f\u7528\u6570\u5b57\u547d\u540d\u7684\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u57fa\u672cACL\uff0c\u5e76\u8fdb\u5165ACL\u89c6\u56fe\uff1a \u5728\u57fa\u672cACL\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2arule\u7684\u5178\u578b\u547d\u4ee4\u5982\u4e0b\uff1a [Huawei-acl-basic- num ] rule [ rule-id ] { deny | permit } [ source { source-address source-wildcard | any }] \u5982\u679c\u4e0d\u6307\u5b9a\u89c4\u5219ID\uff0c\u5219\u589e\u52a0\u4e00\u4e2a\u65b0\u89c4\u5219\u65f6\u8bbe\u5907\u81ea\u52a8\u4f1a\u4e3a\u8fd9\u4e2a\u89c4\u5219\u5206\u914d\u4e00\u4e2aID\uff0cID\u6309\u7167\u5927\u5c0f\u6392\u5e8f\u3002\u5728\u4e0a\u9762 \u7684\u914d\u7f6e\u4e2d\uff0cwildcard\u901a\u914d\u7b26\u63a9\u7801\u7684\u6982\u5ff5\uff0c\u5176\u5b9e\u6211\u4eec\u5728OSPF\u7684\u914d\u7f6e\u4e2d\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u4e86\uff0c\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\u3002 \u521b\u5efa\u9ad8\u7ea7ACL \u00b6 \u4f7f\u7528\u6570\u5b57\u547d\u540d\u7684\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u9ad8\u7ea7ACL\uff0c\u5e76\u8fdb\u5165ACL\u89c6\u56fe\uff1a \u5728\u9ad8\u7ea7ACL\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2arule\u7684\u5178\u578b\u547d\u4ee4\u5982\u4e0b\u3002\u9ad8\u7ea7ACL\u53ef\u4ee5\u7528\u4e8e\u5339\u914d\u591a\u79cd\u534f\u8bae\u7c7b\u578b\uff0c\u4f8b\u5982OSPF\u3001ICMP\u3001 TCP\u3001UDP\u3001IP\u7b49\u7b49\uff0c\u6b64\u5904\u4ee5IP\u4e3a\u4f8b\uff1a ACL \u914d\u7f6e\u5b9e\u4f8b\uff08\u8def\u7531\u5668\uff09 \u57fa\u672cACL\u914d\u7f6e\u793a\u4f8b \u00b6 \u521d\u59cb\u60c5\u51b5\u4e0bPC1\u53caPC2\u90fd\u80fd\u591f\u8bbf\u95eeServer\u3002\u73b0\u5728\u5728GW\u7684\u63a5\u53e3\u4e0a\u5e94\u7528ACL\uff0c\u4f7f\u5f97PC2\u65e0\u6cd5\u8bbf\u95eeServer\uff0c \u800c\u5176\u4ed6\u7528\u6237\u90fd\u80fd\u591f\u8bbf\u95eeServer\u3002 GW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u9ad8\u7ea7ACL\u914d\u7f6e\u793a\u4f8b1 \u00b6 \u521d\u59cb\u60c5\u51b5\u4e0bPC1\u53caPC2\u90fd\u80fd\u591f\u8bbf\u95eeServer\u3002\u73b0\u5728\u5728GW\u7684\u63a5\u53e3\u4e0a\u5e94\u7528ACL\uff0c\u4f7f\u5f97PC2\u65e0\u6cd5\u8bbf\u95eeServer2\uff0c \u653e\u884c\u5176\u4ed6\u6d41\u91cf\u3002GW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u9ad8\u7ea7ACL\u914d\u7f6e\u793a\u4f8b2 \u00b6 \u521d\u59cb\u60c5\u51b5\u4e0bPC1\u53caPC2\u90fd\u80fd\u591f\u8bbf\u95eeServer\u3002\u73b0\u5728\u5728GW\u7684\u63a5\u53e3\u4e0a\u5e94\u7528ACL\uff0c\u53ea\u7981\u6b62PC2\u8bbf\u95eeServer2\u7684 Telnet\u670d\u52a1\uff0c\u653e\u884c\u5176\u4ed6\u6d41\u91cf\u3002 GW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a ACL \u914d\u7f6e\u793a\u4f8b\uff08\u4ea4\u6362\u673a\uff09 \u5728S53\u4ea4\u6362\u673a\u4e0a\u5b8c\u6210ACL\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97R1\u65e0\u6cd5ping\u901aR2\uff0c\u4f46\u5176\u4ed6\u7684\u6240\u6709\u6d41\u91cf\u90fd\u653e\u884c\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0cR1\u65e0\u6cd5ping\u901aR2\u4f46\u662f\u53ef\u4ee5Telnet R2\u3002 \u9632\u706b\u5899\u57fa\u7840 \u9632\u706b\u5899\u6982\u8ff0 \u9632\u706b\u5899\u6982\u8ff0 \u00b6 \u7b80\u5355\u5730\u8bf4\uff0c\u9632\u706b\u5899\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u5212\u5206\u7f51\u7edc\u5b89\u5168\u8fb9\u754c\uff0c\u5b9e\u73b0\u5173\u952e\u7cfb\u7edf\u4e0e\u5916\u90e8\u73af\u5883\u7684\u5b89\u5168\u9694\u79bb\uff0c\u4fdd\u62a4\u5185\u90e8\u7f51\u7edc\u514d\u53d7\u5916\u90e8\u653b\u51fb\u3002\u4e0e\u8def\u7531\u5668\u76f8\u6bd4\u9632\u706b\u5899\u63d0\u4f9b\u4e86\u66f4\u4e30\u5bcc\u7684\u5b89\u5168\u9632\u5fa1\u7b56\u7565\uff0c\u63d0\u9ad8\u4e86\u5b89\u5168\u7b56\u7565\u4e0b\u6570\u636e\u62a5\u8f6c\u53d1\u901f\u7387\u3002\u7531\u4e8e\u9632\u706b\u5899\u7528\u4e8e\u5b89\u5168\u8fb9\u754c\uff0c\u56e0\u6b64\u5f80\u5f80\u517c\u5907NAT\u3001VPN\u7b49\u529f\u80fd\uff0c\u5e76\u4e14\u5728\u8fd9\u65b9\u9762\u7684\u76f8\u6bd4\u8def\u7531\u5668\u66f4\u52a0\u5f3a\u52b2\u3002 \u9632\u706b\u5899\u5206\u7c7b \u00b6 \u5305\u8fc7\u6ee4\u9632\u706b\u5899(Packet Filtering)\uff1a\u5305\u8fc7\u6ee4\u5229\u7528\u5b9a\u4e49\u7684\u7279\u5b9a\u89c4\u5219\u8fc7\u6ee4\u6570\u636e\u5305\uff0c\u9632\u706b\u5899\u76f4\u63a5\u83b7\u5f97\u6570\u636e\u5305\u7684IP\u6e90\u5730\u5740\u3001\u76ee\u7684\u5730\u5740\u3001TCP/ UDP\u7684\u6e90\u7aef\u53e3\u3001\u548cTCP/UDP\u7684\u76ee\u7684\u7aef\u53e3\u3002\u5305\u8fc7\u6ee4\u9632\u706b\u5899\u7b80\u5355\uff0c\u4f46\u662f\u7f3a\u4e4f\u7075\u6d3b\u6027\uff0c\u5bf9\u4e00\u4e9b\u52a8\u6001\u534f\u5546\u7aef\u53e3\u6ca1\u6709\u529e\u6cd5\u8bbe\u7f6e\u89c4\u5219\u3002\u53e6\u5916\u5305\u8fc7\u6ee4\u9632\u706b\u5899\u6bcf\u4e2a\u5305\u90fd\u9700\u8981\u8fdb\u884c\u7b56\u7565\u68c0\u67e5\uff0c\u7b56\u7565\u8fc7\u591a\u4f1a\u5bfc\u81f4\u6027\u80fd\u6025\u5267\u4e0b\u964d\u3002 \u4ee3\u7406\u578b\u9632\u706b\u5899\uff08Application Gateway\uff09\uff1a\u4ee3\u7406\u578b\u9632\u706b\u5899\u4f7f\u5f97\u9632\u706b\u5899\u505a\u4e3a\u4e00\u4e2a\u8bbf\u95ee\u7684\u4e2d\u95f4\u8282\u70b9\uff0c\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u9632\u706b\u5899\u662f\u4e00\u4e2a\u670d\u52a1\u5668\uff0c\u5bf9\u670d\u52a1\u5668\u6765\u8bf4\u9632\u706b\u5899\u662f\u4e00\u4e2a\u5ba2\u6237\u7aef\u3002\u4ee3\u7406\u578b\u9632\u706b\u5899\u5b89\u5168\u6027\u8f83\u9ad8\uff0c\u4f46\u662f\u5f00\u53d1\u4ee3\u4ef7\u5f88\u5927\u3002\u5bf9\u6bcf\u4e00\u79cd\u5e94\u7528\u5f00\u53d1\u4e00\u4e2a\u5bf9\u5e94\u7684\u4ee3\u7406\u670d\u52a1\u662f\u5f88\u96be\u505a\u5230\u7684\uff0c\u56e0\u6b64\u4ee3\u7406\u578b\u9632\u706b\u5899\u4e0d\u80fd\u652f \u6301\u5f88\u4e30\u5bcc\u7684\u4e1a\u52a1\uff0c\u53ea\u80fd\u9488\u5bf9\u67d0\u4e9b\u5e94\u7528\u63d0\u4f9b\u4ee3\u7406\u652f\u6301\u3002 \u72b6\u6001\u68c0\u6d4b\u9632\u706b\u5899\uff1a\u72b6\u6001\u68c0\u6d4b\u662f\u4e00\u79cd\u9ad8\u7ea7\u901a\u4fe1\u8fc7\u6ee4\uff0c\u5b83\u68c0\u67e5\u5e94\u7528\u5c42\u534f\u8bae\u4fe1\u606f\u5e76\u4e14\u76d1\u63a7\u57fa\u4e8e\u8fde\u63a5\u7684\u5e94\u7528\u5c42\u534f\u8bae\u72b6\u6001\u3002\u5bf9\u4e8e\u6240\u6709\u8fde\u63a5\uff0c\u6bcf\u4e00\u4e2a\u8fde\u63a5\u72b6\u6001\u4fe1\u606f\u90fd\u5c06\u88ab\u7ef4\u62a4\u5e76\u7528\u4e8e\u52a8\u6001\u5730\u51b3\u5b9a\u6570\u636e\u5305\u662f\u5426\u88ab\u5141\u8bb8\u901a\u8fc7\u9632\u706b\u5899\u6216\u4e22\u5f03\u3002 \u73b0\u5728\u9632\u706b\u5899\u7684\u4e3b\u6d41\u4ea7\u54c1\u90fd\u4e3a\u72b6\u6001\u68c0\u6d4b\u9632\u706b\u5899\u3002 \u9632\u706b\u5899\u7684\u57fa\u7840\u77e5\u8bc6 7.2.2.1 \u5b89\u5168\u533a\u57df\u7684\u6982\u5ff5 \u00b6 \u5b89\u5168\u533a\u57df\uff08Security Zone\uff09\uff0c\u7b80\u79f0\u4e3a\u533a\u57df\uff08Zone\uff09\uff0c\u662f\u4e00\u4e2a\u5b89\u5168\u6982\u5ff5\uff0c\u8bb8\u591a\u5b89\u5168\u7b56\u7565\u90fd\u57fa\u4e8e\u5b89\u5168\u533a\u57df\u5b9e\u65bd\u3002\u6211\u4eec\u5728\u9632\u706b\u5899\u4e0a\u521b\u5efa\u5b89\u5168\u533a\u57df\uff0c\u5e76\u4e14\u5b9a\u4e49\u8be5\u5b89\u5168\u533a\u57df\u7684\u5b89\u5168\u7ea7\u522b\uff08\u4e5f\u88ab\u79f0\u4e3a\u4f18\u5148\u7ea7\uff0c\u901a\u8fc71\uff5e100\u7684\u6570\u5b57\u8868\u793a\uff0c\u6570\u5b57\u8d8a\u5927\u8868\u793a\u5b89\u5168\u7ea7\u522b\u8d8a\u9ad8\uff09\uff0c\u7136\u540e\u5c06\u9632\u706b\u5899\u7684\u63a5\u53e3\u5173\u8054\u5230\u4e00\u4e2a\u5b89\u5168\u533a\u57df\uff0c\u90a3\u4e48\u8be5\u63a5\u53e3\u6240\u8fde\u63a5\u7684\u7f51\u7edc\u5c31\u5c5e\u4e8e\u8fd9\u4e2a\u5b89\u5168\u533a\u57df\u3002\u5c5e\u4e8e\u540c\u4e00\u4e2a\u5b89\u5168\u533a\u57df\u7684\u7528\u6237\u5177\u6709\u76f8\u540c\u7684\u5b89\u5168\u5c5e\u6027\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u5c06\u9632\u706b\u5899\u7684GE1/0/1\u63a5\u53e3\u6dfb\u52a0\u5230Trust\u533a\u57df\u4e2d\uff0c\u90a3\u4e48\u8fd9\u4e2a\u63a5\u53e3\u6240\u8fde\u63a5\u7684\u7f51\u7edc\u5c31\u88ab\u89c6\u4e3a\u5904\u4e8eTrust \u533a\u57df\u3002\u540c\u7406Internet\u88ab\u89c6\u4e3a\u5904\u4e8eUntrust\u533a\u57df\uff0c\u800c\u670d\u52a1\u5668Servers\u5219\u5904\u4e8eDMZ\u533a\u57df\u3002\u5f53\u56fe\u4e2d\u7684PC\u8bbf\u95eeInternet\u65f6\uff0c \u4ecePC\u53d1\u5f80Internet\u7684\u6d41\u91cf\u5230\u8fbe\u9632\u706b\u5899\u540e\uff0c\u9632\u706b\u5899\u8ba4\u4e3a\u8fd9\u4e9b\u6d41\u91cf\u662f\u4eceTrust\u533a\u57df\u53bb\u5f80Untrust\u533a\u57df\u7684\u6d41\u91cf\u3002 \u534e\u4e3aEudemon\u9632\u706b\u5899\u7f3a\u7701\u5df2\u7ecf\u521b\u5efa\u5982\u4e0b\u5b89\u5168\u533a\u57df\uff1a \u00b6 Zone \u4f18\u5148\u7ea7 \u63cf\u8ff0 Trust 85 \u8f83\u9ad8\u7ea7\u522b\u7684\u5b89\u5168\u533a\u57df\uff0c\u901a\u5e38\u7528\u4e8e\u5b9a\u4e49\u5185\u7f51\u7528\u6237\u6240\u5728\u7f51\u7edc Untrust 5 \u4f4e\u7ea7\u7684\u5b89\u5168\u533a\u57df\uff0c\u901a\u5e38\u7528\u4e8e\u5b9a\u4e49Internet\u7b49\u4e0d\u5b89\u5168\u7684\u3001\u5916\u90e8\u7684\u7f51\u7edc DMZ 50 \u4e2d\u5ea6\u7ea7\u522b\u7684\u5b89\u5168\u533a\u57df\uff0c\u901a\u5e38\u7528\u4e8e\u5b9a\u4e49\u5185\u7f51\u670d\u52a1\u5668\u6240\u5728\u533a\u57df\u3002\u56e0\u4e3a\u8fd9\u4e9b\u670d\u52a1\u5668\u867d\u7136\u90e8\u7f72\u5728\u5185 \u7f51\uff0c\u4f46\u662f\u7ecf\u5e38\u9700\u8981\u88ab\u5916\u7f51\u8bbf\u95ee\uff0c\u5b58\u5728\u4e00\u5b9a\u7684\u5b89\u5168\u9690\u60a3\uff0c\u540c\u65f6\u4e00\u822c\u53c8\u4e0d\u5141\u8bb8\u5176\u4e3b\u52a8\u8bbf\u95ee\u5916\u7f51\uff0c \u6240\u4ee5\u5c06\u5176\u90e8\u7f72\u4e00\u4e2a\u5b89\u5168\u7ea7\u522b\u6bd4Trust\u4f4e\uff0c\u4f46\u6bd4Untrust\u9ad8\u7684\u5b89\u5168\u533a\u57df\u4e2d\u3002 Local 100 \u6700\u9ad8\u7ea7\u522b\u7684\u5b89\u5168\u533a\u57df\uff0cLocal\u533a\u57df\u5b9a\u4e49\u7684\u662f\u8bbe\u5907\u672c\u8eab\uff0c\u5305\u62ec\u8bbe\u5907\u7684\u5404\u63a5\u53e3\u3002\u51e1\u662f\u7531\u9632\u706b\u5899\u81ea \u8eab\u6784\u9020\u5e76\u4e3b\u52a8\u53d1\u51fa\u7684\u62a5\u6587\u5747\u53ef\u8ba4\u4e3a\u662f\u4eceLocal\u533a\u57df\u4e2d\u53d1\u51fa\uff0c\u51e1\u662f\u76ee\u7684\u5730\u4e3a\u9632\u706b\u5899\u7684\u62a5\u6587\u5747\u53ef\u8ba4\u4e3a\u662f\u7531Local\u533a\u57df\u63a5\u6536\u3002\u7528\u6237\u4e0d\u80fd\u6539\u53d8Local\u533a\u57df\u672c\u8eab\u7684\u4efb\u4f55\u914d\u7f6e\uff0c\u5305\u62ec\u5411\u5176\u4e2d\u6dfb\u52a0\u63a5\u53e3 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7f3a\u7701\u5df2\u7ecf\u521b\u5efa\u7684\u8fd9\u4e9b\u5b89\u5168\u533a\u57df\u662f\u4e0d\u80fd\u88ab\u5220\u9664\u7684\u3002\u7528\u6237\u53ef\u4ee5\u81ea\u884c\u8bbe\u7f6e\u65b0\u7684\u5b89\u5168\u533a\u57df\u5e76\u5b9a\u4e49\u5176 \u5b89\u5168\u4f18\u5148\u7ea7\u3002 \u5728\u4ee5\u4e0a\u5b89\u5168\u533a\u57df\u4e2d\uff0c\u5f88\u591a\u4eba\u4e0d\u592a\u7406\u89e3Local\u533a\u57df\u3002\u4e0b\u9762\u6765\u91cd\u70b9\u8bb2\u8bb2\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u9632\u706b\u5899\u7684GE0/0/1\u63a5\u53e3\u88ab\u6dfb\u52a0\u5230Trust\u5b89\u5168\u533a\u57df\uff0cGE0/0/3\u63a5\u53e3\u88ab\u6dfb\u52a0\u5230Untust\u533a\u57df\u3002PC1\u53d1\u5f80 192.168.1.254\u7684\u6d41\u91cf\uff0c\u88ab\u8ba4\u4e3a\u662f\u4eceTrust\u533a\u57df\u5230Local\u533a\u57df\u7684\u6d41\u91cf\uff08\u8be5\u6d41\u91cf\u7684\u76ee\u7684\u5730\u5c31\u9632\u706b\u5899\u81ea\u8eab\uff09\uff1bPC1 \u8bbf\u95eePC2\u7684\u6d41\u91cf\uff0c\u88ab\u8ba4\u4e3a\u662f\u4eceTrust\u533a\u57df\u5230Untrust\u533a\u57df\u7684\u6d41\u91cf\uff1b \u4ece\u9632\u706b\u5899\u76f4\u63a5\u8bbf\u95ee\uff08\u4f8b\u5982ping\uff09PC1\u7684\u6d41\u91cf\uff0c\u5219\u88ab\u8ba4\u4e3a\u662f\u4eceLocal\u533a\u57df\u5230Trust\u533a\u57df\u7684\u6d41\u91cf\u3002 \u5b89\u5168\u533a\u57df\u7684\u89c4\u5212\uff1a \u00b6 \u7528\u6237\u53ef\u81ea\u5b9a\u4e49\u5b89\u5168\u533a\u57df\uff0c\u4e5f\u53ef\u4f7f\u7528\u7cfb\u7edf\u81ea\u5e26\u7684\u5b89\u5168\u533a\u57df\uff0c\u9632\u706b\u5899\u7684\u4e00\u4e2a\u63a5\u53e3\u53ea\u80fd\u5c5e\u4e8e\u4e00\u4e2a\u7279\u5b9a\u533a\u57df\uff0c\u800c\u4e00\u4e2a\u533a\u57df\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u63a5\u53e3\uff0c\u63a5\u53e3\u53ea\u6709\u5212\u5206\u5230\u533a\u57df\u4e2d\u624d\u80fd\u6b63\u5e38\u5904\u7406\u62a5\u6587\u3002 \u5185\u90e8\u7f51\u7edc\u5e94\u5b89\u6392\u5728\u5b89\u5168\u7ea7\u522b\u8f83\u9ad8\u7684\u533a\u57df\u3002\u5916\u90e8\u7f51\u7edc\u5e94\u5b89\u6392\u5728\u5b89\u5168\u7ea7\u522b\u6700\u4f4e\u7684\u533a\u57df\u3002 \u4e00\u4e9b\u53ef\u5bf9\u5916\u90e8\u7528\u6237\u63d0\u4f9b\u6709\u6761\u4ef6\u670d\u52a1\u7684\u7f51\u7edc\u5e94\u5b89\u6392\u5728\u5b89\u5168\u7ea7\u522b\u4e2d\u7b49\u7684DMZ\u533a\u57df\u3002 \u5b89\u5168\u533a\u57df\u7684\u9650\u5236\u6216\u6ce8\u610f\u4e8b\u9879\uff1a \u00b6 \u5728\u4e00\u53f0\u9632\u706b\u5899\u4e0a\u4e0d\u5141\u8bb8\u521b\u5efa\u4e24\u4e2a\u76f8\u540c\u5b89\u5168\u7ea7\u522b\uff08Priority\uff09\u7684\u5b89\u5168\u533a\u57df\uff1b \u9632\u706b\u5899\u7684\u63a5\u53e3\u5fc5\u987b\u52a0\u5165\u4e00\u4e2a\u5b89\u5168\u533a\u57df\uff0c\u5426\u5219\u4e0d\u80fd\u6b63\u5e38\u8f6c\u53d1\u6d41\u91cf\u3002 \u9632\u706b\u5899\u7684\u4e00\u4e2a\u63a5\u53e3\u53ea\u80fd\u5c5e\u4e8e\u4e00\u4e2a\u5b89\u5168\u533a\u57df\uff1b \u9632\u706b\u5899\u7684\u4e00\u4e2a\u5b89\u5168\u533a\u57df\u53ef\u4ee5\u62e5\u6709\u591a\u4e2a\u63a5\u53e3\uff1b \u7cfb\u7edf\u81ea\u5e26\u7684\u7f3a\u7701\u5b89\u5168\u533a\u57df\u4e0d\u80fd\u5220\u9664\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u5b89\u5168\u533a\u57df\uff1b \u5bf9\u4e8eE1000E-N\u9632\u706b\u5899V1R1C30\u7684\u7cfb\u7edf\u8f6f\u4ef6\u7248\u672c\u800c\u8a00\uff0c\u6839\u7cfb\u7edf\u6700\u591a\u652f\u6301100\u4e2a\u5b89\u5168\u533a\u57df\uff08\u5305\u62ec4\u4e2a\u4fdd\u7559\u533a\u57df\uff09\uff0c\u6bcf\u4e2a\u865a\u62df\u7cfb\u7edf\u6700\u591a\u652f\u63018\u4e2a\u5b89\u5168\u533a\u57df\uff08\u5305\u62ec4\u4e2a\u4fdd\u7559\u533a\u57df\uff09\u3002 \u533a\u57df\u95f4\u7684\u6982\u5ff5 \u00b6 \u5b89\u5168\u57df\u95f4\uff08Interzone\uff09\u8fd9\u4e2a\u6982\u5ff5\u7528\u6765\u63cf\u8ff0\u6d41\u91cf\u7684\u4f20\u8f93\u901a\u9053\uff0c\u5b83\u662f\u4e24\u4e2a\u201c\u533a\u57df\u201d\u4e4b\u95f4\u7684\u552f\u4e00\u201c\u9053\u8def\u201d\u3002\u5982\u679c\u5e0c\u671b\u5bf9\u7ecf\u8fc7\u8fd9\u6761\u901a\u9053\u7684\u6d41\u91cf\u8fdb\u884c\u68c0\u6d4b\u7b49\uff0c\u5c31\u5fc5\u987b\u5728\u901a\u9053\u4e0a\u8bbe\u7acb\u201c\u5173\u5361\u201d\uff0c\u5982ASPF\u7b49\u529f\u80fd\u3002\u4efb\u610f\u4e24\u4e2a\u5b89\u5168\u533a\u57df\u90fd\u6784\u6210\u4e00\u4e2a\u5b89\u5168\u57df\u95f4\uff0c\u5e76\u5177\u6709\u5355\u72ec\u7684\u5b89\u5168\u57df\u95f4\u89c6\u56fe\u3002 Inbound\u53caOutbound \u00b6 \u5b89\u5168\u57df\u95f4\u7684\u6570\u636e\u6d41\u52a8\u5177\u6709\u65b9\u5411\u6027\uff0c\u5305\u62ec\u5165\u65b9\u5411\uff08Inbound\uff09\u548c\u51fa\u65b9\u5411\uff08Outbound\uff09\uff1a \u5165\u65b9\u5411\uff08inbound\uff09\uff1a\u6570\u636e\u7531\u4f4e\u7ea7\u522b\u5b89\u5168\u533a\u57df\u5411\u9ad8\u7ea7\u522b\u5b89\u5168\u533a\u57df\u4f20\u8f93\u7684\u65b9\u5411\uff1b \u51fa\u65b9\u5411\uff08outbound\uff09\uff1a\u6570\u636e\u7531\u9ad8\u7ea7\u522b\u5b89\u5168\u533a\u57df\u5411\u4f4e\u7ea7\u522b\u5b89\u5168\u533a\u57df\u4f20\u8f93\u7684\u65b9\u5411\u3002 \u5b89\u5168\u7b56\u7565 \u00b6 \u5b89\u5168\u7b56\u7565\u6982\u8ff0 \u00b6 \u5b89\u5168\u7b56\u7565\uff08Security Policy\uff09\u662f\u63a7\u5236\u8bbe\u5907\u5bf9\u6d41\u91cf\u7684\u8f6c\u53d1\uff0c\u4ee5\u53ca\u5bf9\u6d41\u91cf\u8fdb\u884c\u5185\u5bb9\u5b89\u5168\u4e00\u4f53\u5316\u68c0\u6d4b\u7684\u7b56\u7565\u3002 \u8bbe\u5907\u80fd\u591f\u8bc6\u522b\u51fa\u6d41\u91cf\u7684\u5c5e\u6027\uff0c\u5e76\u5c06\u6d41\u91cf\u7684\u5c5e\u6027\u4e0e\u5b89\u5168\u7b56\u7565\u7684\u6761\u4ef6\u8fdb\u884c\u5339\u914d\u3002\u5982\u679c\u6240\u6709\u6761\u4ef6\u90fd\u5339\u914d\uff0c \u5219\u6b64\u6d41\u91cf\u6210\u529f\u5339\u914d\u5b89\u5168\u7b56\u7565\uff0c\u8bbe\u5907\u5c06\u4f1a\u6267\u884c\u5b89\u5168\u7b56\u7565\u7684\u52a8\u4f5c\uff08\u4f8b\u5982\u5141\u8bb8\u6d41\u91cf\u901a\u884c\uff0c\u6216\u62d2\u7edd\uff09\u3002 \u5185\u5bb9\u5b89\u5168\u4e00\u4f53\u5316\u68c0\u6d4b\u662f\u6307\u4f7f\u7528\u8bbe\u5907\u7684\u667a\u80fd\u611f\u77e5\u5f15\u64ce\u5bf9\u4e00\u6761\u6d41\u91cf\u7684\u5185\u5bb9\u53ea\u8fdb\u884c\u4e00\u6b21\u68c0\u6d4b\u548c\u5904\u7406\uff0c\u5c31\u80fd\u5b9e\u73b0\u5305\u62ec\u53cd\u75c5\u6bd2\u3001\u5165\u4fb5\u9632\u5fa1\u548cURL\u8fc7\u6ee4\u5728\u5185\u7684\u5185\u5bb9\u5b89\u5168\u529f\u80fd\u3002 \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c NGFW\u7684local\u533a\u57df\u5230\u5176\u4ed6\u5b89\u5168\u533a\u57df\uff0c\u4ee5\u53ca\u57df\u5185\u7684\u5b89\u5168\u7b56\u7565\uff08\u5982trust\u5230trust\uff09\u90fd\u662f\u7981\u6b62\u7684\u3002 \u5728\u65e5\u5e38\u4e2d\uff0c\u5b89\u5168\u7b56\u7565\u6700\u4e3b\u8981\u7684\u5e94\u7528\u4e4b\u4e00\uff0c\u5c31\u662f\u5141\u8bb8\u6216\u62d2\u7edd\u6d41\u7ecf\u9632\u706b\u5899\u7684\u6570\u636e\u3002\u5b89\u5168\u7b56\u7565\u5728\u9632\u706b\u5899\u7684 security-policy\u914d\u7f6e\u89c6\u56fe\u4e0b\u5b8c\u6210\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u8be5\u89c6\u56fe\u4e0b\u6839\u636e\u9700\u8981\u521b\u5efa\u5b89\u5168\u89c4\u5219\uff08Rule\uff09\u3002 \u5982\u4e0a\u56fe\u6240\u793a\uff0csecurity-policy\u4e2d\u53ef\u4ee5\u5305\u542b\u591a\u6761\u89c4\u5219\uff0c\u5f53\u5b89\u5168\u7b56\u7565\u4e2d\u914d\u7f6e\u4e86\u591a\u6761\u89c4\u5219\u65f6\uff0c\u8bbe\u5907\u5c06\u6309\u7167\u89c4\u5219\u5728\u754c\u9762\u4e0a\u7684\u6392\u5217\u987a\u5e8f\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u5339\u914d\uff0c\u53ea\u8981\u5339\u914d\u4e86\u4e00\u6761\u89c4\u5219\u4e2d\u7684\u6240\u6709\u6761\u4ef6\uff0c\u5219\u6309\u7167\u8be5\u89c4\u5219\u4e2d\u5b9a\u4e49\u7684\u52a8\u4f5c\u3001\u9009\u9879\u8fdb\u884c\u5904\u7406\uff0c\u4e0d\u518d\u7ee7\u7eed\u5339\u914d\u5269\u4e0b\u7684\u89c4\u5219\u3002\u6240\u4ee5\u5728\u914d\u7f6e\u65f6\uff0c\u5efa\u8bae\u5c06\u6761\u4ef6\u66f4\u7cbe\u786e\u7684\u89c4\u5219\u914d\u7f6e\u5728\u524d\u9762\uff0c \u6761\u4ef6\u66f4\u5bbd\u6cdb\u7684\u89c4\u5219\u914d\u7f6e\u5728\u540e\u9762\u3002 \u5173\u4e8e\u5b89\u5168\u7b56\u7565\u4e2d\u7684\u89c4\u5219 \u00b6 \u5728\u4e00\u6761\u89c4\u5219\u7684\u6761\u4ef6\u8bed\u53e5\u4e2d\uff0c\u76f8\u540c\u7c7b\u578b\u7684\u6761\u4ef6\u5185\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a\u503c\uff0c\u591a\u4e2a\u503c\u4e4b\u95f4\u662f\u201c\u6216\u201d\u7684\u5173\u7cfb\uff0c\u62a5\u6587\u7684\u5c5e\u6027\u53ea\u8981\u5339\u914d\u4efb\u610f\u4e00\u4e2a\u503c\uff0c\u5c31\u8ba4\u4e3a\u62a5\u6587\u7684\u5c5e\u6027\u5339\u914d\u4e86\u8fd9\u4e2a\u6761\u4ef6\u3002\u4f8b\u5982\u4e00\u6761\u89c4\u5219\u4e2d\u6307\u5b9a\u4e86\u6e90IP\u5730\u5740 \u6761\u4ef6\uff0c\u90a3\u4e48\u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\u6e90\u5730\u5740\uff0c\u62a5\u6587\u53ea\u9700\u8981\u5339\u914d\u5176\u4e2d\u4e00\u4e2a\u5730\u5740\uff0c\u5373\u88ab\u8ba4\u4e3a\u5339\u914d\u8be5\u6761\u4ef6\u7c7b\u578b\u3002 \u6bcf\u6761\u89c4\u5219\u4e2d\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u5339\u914d\u6761\u4ef6\uff0c\u5982\u6e90\u3001\u76ee\u7684\u5b89\u5168\u533a\u57df\uff0c\u6e90\u3001\u76ee\u7684\u5730\u5740\uff0c\u7528\u6237\u6216\u5e94\u7528\u7c7b\u578b\u7b49\u3002\u5404\u4e2a\u5339\u914d\u6761\u4ef6\u4e4b\u95f4\u662f\u201c\u4e0e\u201d\u7684\u5173\u7cfb\uff0c\u62a5\u6587\u7684\u5c5e\u6027\u4e0e\u5404\u4e2a\u6761\u4ef6\u5fc5\u987b\u5168\u90e8\u5339\u914d\uff0c\u624d\u8ba4\u4e3a\u8be5\u62a5\u6587\u5339\u914d\u8fd9\u6761\u89c4\u5219\u3002\u4f8b\u5982\u5728\u67d0\u6761\u89c4\u5219\u4e2d\uff0c\u5b9a\u4e49\u4e86\u6e90\u5730\u5740\u4e0e\u76ee\u7684\u5730\u5740\u6761\u4ef6\uff0c\u90a3\u4e48\u62a5\u6587\u5fc5\u987b\u540c\u65f6\u5339\u914d\u8be5\u6e90\u3001\u76ee\u7684\u5730\u5740\u624d\u88ab\u89c6\u4e3a\u5339\u914d\u8be5\u6761\u4ef6\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\u6240\u6709\u7684\u6761\u4ef6\u5747\u4e3aany\uff08\u4e5f\u5373\u8be5\u89c4\u5219\u4e2d\u6ca1\u6709\u5b9a\u4e49\u4efb\u4f55\u6761\u4ef6\u65f6\uff09\uff0c\u5373\u6240\u6709\u6d41\u91cf\uff08\u5305\u62ec\u57df\u5185\u6d41\u91cf\uff09\u5747\u53ef\u4ee5\u547d\u4e2d\u8be5\u89c4\u5219\u3002 \u5982\u679c\u914d\u7f6e\u4e86\u591a\u6761\u5b89\u5168\u89c4\u5219\uff0c\u5219\u8bbe\u5907\u4f1a\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u8fdb\u884c\u5339\u914d\u3002\u5982\u679c\u6d41\u91cf\u5339\u914d\u4e86\u67d0\u4e2a\u5b89\u5168\u89c4\u5219\uff0c\u5c06\u4e0d\u518d\u8fdb\u884c\u4e0b\u4e00\u4e2a\u89c4\u5219\u7684\u5339\u914d\u3002\u6240\u4ee5\u9700\u8981\u5148\u914d\u7f6e\u6761\u4ef6\u7cbe\u786e\u7684\u7b56\u7565\uff0c\u518d\u914d\u7f6e\u5bbd\u6cdb\u7684\u7b56\u7565\u3002 \u8bbe\u5907\u9ed8\u8ba4\u5b58\u5728\u4e00\u6761\u7f3a\u7701\u5b89\u5168\u89c4\u5219\uff0c\u5982\u679c\u4e0d\u540c\u5b89\u5168\u533a\u57df\u95f4\u7684\u6d41\u91cf\u6ca1\u6709\u5339\u914d\u5230\u7ba1\u7406\u5458\u5b9a\u4e49\u7684\u5b89\u5168\u89c4\u5219\uff0c \u90a3\u4e48\u5c31\u4f1a\u547d\u4e2d\u7f3a\u7701\u5b89\u5168\u89c4\u5219\uff08\u6761\u4ef6\u5747\u4e3aany\uff0c\u52a8\u4f5c\u9ed8\u8ba4\u4e3a\u7981\u6b62\uff09\u3002 \u4e0d\u540c\u5b89\u5168\u533a\u57df\u95f4\u4f20\u8f93\u7684\u6d41\u91cf\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u4eceFW\u53d1\u51fa\u7684\u6d41\u91cf\u3001FW\u63a5\u6536\u7684\u6d41\u91cf\u3001\u4e0d\u540c\u5b89\u5168\u533a\u57df\u95f4\u4f20\u8f93\u7684\u6d41\u91cf\uff09\uff0c\u53d7\u7f3a\u7701\u5b89\u5168\u7b56\u7565\u63a7\u5236\uff0c\u7f3a\u7701\u8f6c\u53d1\u52a8\u4f5c\u4e3a\u7981\u6b62\u3002 \u540c\u4e00\u5b89\u5168\u533a\u57df\u5185\u4f20\u8f93\u7684\u6d41\u91cf\u4e0d\u53d7\u7f3a\u7701\u5b89\u5168\u7b56\u7565\u63a7\u5236\uff0c\u7f3a\u7701\u8f6c\u53d1\u52a8\u4f5c\u4e3a\u5141\u8bb8\u3002\u5982\u9700\u5bf9\u57df\u5185\u6d41\u91cf\u8fdb\u884c\u8f6c\u53d1\u63a7\u5236\uff0c\u8bf7\u914d\u7f6e\u5177\u4f53\u7684\u5b89\u5168\u7b56\u7565\u3002 \u4f1a\u8bdd\u8868 \u00b6 NGFW\u91c7\u7528\u4e86\u57fa\u4e8e\u201c\u72b6\u6001\u201d\u7684\u62a5\u6587\u63a7\u5236\u673a\u5236\uff1a\u53ea\u5bf9\u9996\u5305\u6216\u8005\u5c11\u91cf\u62a5\u6587\u8fdb\u884c\u68c0\u6d4b\u5c31\u786e\u5b9a\u4e00\u6761\u8fde\u63a5\u7684\u72b6\u6001\uff0c\u5927\u91cf\u62a5\u6587\u76f4\u63a5\u6839\u636e\u6240\u5c5e\u8fde\u63a5\u7684\u72b6\u6001\u8fdb\u884c\u63a7\u5236\u3002\u8fd9\u79cd\u72b6\u6001\u68c0\u6d4b\u673a\u5236\u8fc5\u901f\u63d0\u9ad8\u4e86\u9632\u706b\u5899\u7684\u68c0\u6d4b\u548c\u8f6c\u53d1\u6548\u7387\u3002 \u800c\u4f1a\u8bdd\u8868\u6b63\u662f\u4e3a\u4e86\u8bb0\u5f55\u8fde\u63a5\u7684\u72b6\u6001\u800c\u5b58\u5728\u7684\u3002\u8bbe\u5907\u5728\u8f6c\u53d1TCP\u3001UDP\u548cICMP\u62a5\u6587\u65f6\u90fd\u9700\u8981\u67e5\u8be2\u4f1a\u8bdd\u8868\uff0c\u6765\u5224\u65ad\u8be5\u62a5\u6587\u6240\u5c5e\u7684\u8fde\u63a5\u4ee5\u53ca\u76f8\u5e94\u7684\u5904\u7406\u63aa\u65bd\u3002 \u67e5\u770b\u4f1a\u8bdd\u8868 \u00b6 \u4e00\u4e2a\u4f1a\u8bdd\u7684\u62a5\u6587\u80fd\u591f\u6b63\u5e38\u88ab\u9632\u706b\u5899\u8f6c\u53d1\uff0c\u901a\u5e38\u9700\u8981\u5177\u5907\u4ee5\u4e0b\u51e0\u4e2a\u6761\u4ef6\uff1a \u9632\u706b\u5899\u7684\u8def\u7531\u8868\u4e2d\u5b58\u5728\u4e0e\u8be5\u62a5\u6587\u76ee\u7684IP\u5730\u5740\u76f8\u5339\u914d\u7684\u8def\u7531\uff0c\u6216\u8005\u9ed8\u8ba4\u8def\u7531\uff1b \u9632\u706b\u5899\u7684\u5b89\u5168\u7b56\u7565\u5141\u8bb8\u8be5\u4f1a\u8bdd\u7684\u62a5\u6587\u901a\u8fc7\u3002 \u5f53\u4e00\u4e2a\u4f1a\u8bdd\u7684\u62a5\u6587\u88ab\u9632\u706b\u5899\u6b63\u5e38\u8f6c\u53d1\u65f6\uff0c\u6211\u4eec\u5e94\u8be5\u80fd\u591f\u5728\u9632\u706b\u5899\u4e0a\u770b\u5230\u76f8\u5e94\u7684\u4f1a\u8bdd\u8868\u9879\uff08Session Entry\uff09\u3002 \u9632\u706b\u5899\u7ef4\u62a4\u7740\u4e00\u4e2a\u975e\u5e38\u5173\u952e\u7684\u8868\u9879\uff1a\u4f1a\u8bdd\u8868\uff0c\u6bcf\u4e00\u4e2a\u88ab\u9632\u706b\u5899\u5141\u8bb8\u7684\u4f1a\u8bdd\u90fd\u80fd\u5728\u5176\u4e2d\u627e\u5230\u76f8\u5e94\u7684\u8868\u9879\uff0c \u5728\u8868\u9879\u4e2d\uff0c\u6211\u4eec\u80fd\u770b\u5230\u4f1a\u8bdd\u7684\u6e90IP\u5730\u5740\u3001\u76ee\u7684IP\u5730\u5740\u3001\u6e90\u7aef\u53e3\u53f7\u3001\u76ee\u7684\u7aef\u53e3\u53f7\u4ee5\u53ca\u534f\u8bae\u7c7b\u578b\u7b49\u4fe1\u606f\uff0c\u6b64\u5916\uff0c\u8fd8\u6709\u8be5\u4f1a\u8bdd\u7684\u5165\u7ad9\u533a\u57df\u3001\u51fa\u7ad9\u533a\u57df\u3001\u53bb\u5411\u62a5\u6587\u4e2a\u6570\u4ee5\u53ca\u56de\u7a0b\u62a5\u6587\u4e2a\u6570\u7b49\u3002 \u5f53\u7f51\u7edc\u51fa\u73b0\u6545\u969c\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u9632\u706b\u5899\u7684\u4f1a\u8bdd\u8868\u8fdb\u884c\u57fa\u672c\u7684\u6545\u969c\u5b9a\u4f4d\u3002\u4f8b\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5982\u679c\u7f51\u7edc\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u53d1\u73b0Server1\u65e0\u6cd5ping\u901a\u5916\u90e8\u7f51\u7edc\uff08External Network\uff09\u4e2d\u768410.8.8.8\u5730\u5740\uff0c\u800c\u53c8\u65e0\u6cd5\u76f4\u89c2\u5730\u5224\u65ad\u51fa\u95ee\u9898\u51fa\u73b0\u5728\u5185\u90e8\u6216\u8005\u5916\u90e8\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u5728\u9632\u706b\u5899\u4e0a\u67e5\u770b\u4f1a\u8bdd\uff1a \u4f7f\u7528**display firewall session table** \u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u9632\u706b\u5899\u7684\u4f1a\u8bdd\u8868\u3002\u4ece\u4e0a\u8ff0\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\u4ece 192.168.10.5\u8bbf\u95ee10.8.8.8\u7684\u4f1a\u8bdd\uff0c\u8be5\u4f1a\u8bdd\u7684\u534f\u8bae\u7c7b\u578b\u4e3aICMP\u3002\u4f7f\u7528**display firewall session table** **verbose**\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u4f1a\u8bdd\u7684\u8be6\u7ec6\u5185\u5bb9\uff1a HRP_A\\<FW1> display firewall session table verbose \u4e0a\u9762\u663e\u793a\u7684\u662f192.168.10.5 ping 19.8.8.8\u7684\u4f1a\u8bdd\u8be6\u7ec6\u3002\u4ece\u4e2d\u6211\u4eec\u80fd\u53d1\u73b0\u8fd9\u4e2a\u4f1a\u8bdd\u662f\u4eceTrust\u533a\u57df\u5230 Untrust\u533a\u57df\uff0c\u51fa\u7ad9\u63a5\u53e3\u4e3aGE1/0/7\uff0c\u4e0b\u4e00\u8df3\u5730\u5740\u4e3a10.1.1.2\uff0c\u53e6\u5916\u8be5\u4f1a\u8bdd\u547d\u4e2d\u7684\u662f\u5b89\u5168\u89c4\u5219test1\u3002\u5173\u6ce8\u7ea2\u8272\u5b57\u4f53\u90e8\u5206\uff0c\u8fd9\u90e8\u5206\u663e\u793a\u7684\u662f\u8fd9\u4e2a\u4f1a\u8bdd\u7684\u53bb\u5411\u53ca\u56de\u7a0b\u7684\u62a5\u6587\u4e2a\u6570\uff0c\u4ece\u4e2d\u6211\u4eec\u80fd\u770b\u5230192.168.10.5\u53d1\u9001\u4e865\u4e2a\u6570\u636e\u5305\u51fa\u53bb\uff0c\u4f46\u662f\u6536\u5230\u4e860\u4e2a\u6570\u636e\u5305\uff0c\u56e0\u6b64\u4ece\u8fd9\u4e2a\u4fe1\u606f\u53ef\u4ee5\u7b80\u5355\u7684\u5224\u65ad\u51fa\uff0c192.168.10.5 ping 10.8.8.8\u7684\u8fc7\u7a0b\u4e2d\uff0cICMP Request\u62a5\u6587\u5df2\u7ecf\u9001\u8fbe\u4e86\u9632\u706b\u5899\uff0c\u5e76\u4e14\u88ab\u5b83\u8f6c\u53d1\u51fa\u53bb\uff0c\u540c\u65f6\u9632\u706b\u5899\u6ca1\u6709\u6536\u5230\u56de\u7a0b\u7684\u62a5\u6587\uff0c\u56e0\u6b64\u95ee\u9898\u53ef\u80fd\u5e76\u4e0d\u51fa\u5728\u5185\u90e8\u3002 \u5728\u5b9e\u9645\u7684\u9879\u76ee\u4e2d\uff0c\u9632\u706b\u5899\u7684\u4f1a\u8bdd\u8868\u9879\u53ef\u80fd\u662f\u975e\u5e38\u591a\u7684\uff0c\u76f4\u63a5\u67e5\u770b\u6574\u4e2a\u4f1a\u8bdd\u8868\uff0c\u6050\u6015\u65e0\u6cd5\u51c6\u786e\u5b9a\u4f4d\u611f\u5174\u8da3\u7684\u4f1a\u8bdd\u3002\u53ef\u4ee5\u5728**display firewall session table verbose**\u547d\u4ee4\u540e\u9762\u589e\u52a0\u4e00\u4e9b\u5173\u952e\u5b57\uff0c\u8fbe\u5230\u7b5b\u9009\u7684\u76ee\u7684\u3002\u4f8b\u5982**display firewall session table verbose source inside 192.168.10.5**\u547d\u4ee4\u67e5\u770b\u7684\u662f\u6e90IP\u5730\u5740 \uff08inside\u5173\u952e\u5b57\u8868\u793a\u5982\u679c\u5b58\u5728NAT\uff0c\u5219\u4e3aNAT\u4e4b\u524d\u7684IP\u5730\u5740\uff09\u4e3a192.168.10.5\u7684\u4f1a\u8bdd\u3002\u518d\u5982**display firewall session table verbose service http**\u547d\u4ee4\u67e5\u770b\u7684\u662f\u534f\u8bae\u7c7b\u578b\u4e3aHTTP\uff08\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a80\uff09 \u7684\u4f1a\u8bdd\u3002 \u5982\u679c\u5728\u6d4b\u8bd5\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u73b0\u5728\u9632\u706b\u5899\u4e0a\u627e\u4e0d\u5230\u76f8\u5e94\u7684\u4f1a\u8bdd\u8868\u9879\uff0c\u90a3\u4e48\u8bf4\u660e\u8be5\u4f1a\u8bdd\u7684\u6d41\u91cf\u53ef\u80fd\u6ca1\u6709\u5230\u8fbe\u9632\u706b\u5899\uff0c\u6216\u8005\u5230\u8fbe\u4e86\u9632\u706b\u5899\uff0c\u4f46\u662f\u9632\u706b\u5899\u6ca1\u6709\u76f8\u5e94\u7684\u8def\u7531\u4fe1\u606f\u6307\u5bfc\u62a5\u6587\u8f6c\u53d1\uff0c\u53c8\u6216\u8005\u6709\u8def\u7531\u4fe1\u606f\u4f46\u662f\u8be5\u62a5\u6587\u6ca1\u6709\u88ab\u5b89\u5168\u7b56\u7565\u653e\u884c\u7b49\u3002\u6b64\u65f6\u9700\u8981\u8fdb\u4e00\u6b65\u5b9a\u4f4d\u95ee\u9898\u3002 \u914d\u7f6e\u4f1a\u8bdd\u8868\u7684\u8001\u5316\u65f6\u95f4 \u00b6 \u5f53\u6d41\u91cf\u7684\u7b2c\u4e00\u4e2a\u62a5\u6587\u88ab\u9632\u706b\u5899\u8f6c\u53d1\u65f6\uff0c\u9632\u706b\u5899\u4f1a\u4f1a\u8bdd\u8868\u8001\u5316\u65f6\u95f4\u51b3\u5b9a\u4e00\u6761\u4f1a\u8bdd\u5728\u6ca1\u6709\u76f8\u5e94\u7684\u62a5\u6587\u5339\u914d\u7684\u60c5\u51b5\u4e0b\uff0c\u4f55\u65f6\u88ab\u7cfb\u7edf\u5220\u9664\u3002\u5f53\u7f3a\u7701\u7684\u4f1a\u8bdd\u8868\u8001\u5316\u65f6\u95f4\u4e0d\u80fd\u6ee1\u8db3\u73b0\u6709\u7f51\u7edc\u7684\u9700\u6c42\u65f6\uff0c\u624d\u9700\u8981\u91cd\u65b0\u8bbe\u7f6e\u3002 \u5bf9\u4e8e\u4e00\u4e2a\u5df2\u7ecf\u5efa\u7acb\u7684\u4f1a\u8bdd\u8868\u8868\u9879\uff0c\u53ea\u6709\u5f53\u5b83\u4e0d\u65ad\u88ab\u62a5\u6587\u5339\u914d\u624d\u6709\u5b58\u5728\u7684\u5fc5\u8981\u3002\u5982\u679c\u957f\u65f6\u95f4\u6ca1\u6709\u62a5\u6587\u5339\u914d\uff0c\u5219\u8bf4\u660e\u53ef\u80fd\u901a\u4fe1\u53cc\u65b9\u5df2\u7ecf\u65ad\u5f00\u4e86\u8fde\u63a5\uff0c\u4e0d\u518d\u9700\u8981\u8be5\u6761\u4f1a\u8bdd\u8868\u9879\u4e86\u3002\u6b64\u65f6\uff0c\u4e3a\u4e86\u8282\u7ea6\u7cfb\u7edf\u8d44\u6e90\uff0c\u7cfb\u7edf\u4f1a\u5728\u4e00\u6761\u8868\u9879\u8fde\u7eed\u672a\u88ab\u5339\u914d\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5c06\u5176\u5220\u9664\uff0c\u5373\u4f1a\u8bdd\u8868\u9879\u5df2\u7ecf\u8001\u5316\u3002 \u5982\u679c\u5728\u4f1a\u8bdd\u8868\u9879\u8001\u5316\u4e4b\u540e\uff0c\u53c8\u6709\u548c\u8fd9\u6761\u8868\u9879\u76f8\u540c\u7684\u4e94\u5143\u7ec4\u7684\u62a5\u6587\u901a\u8fc7\uff0c\u5219\u7cfb\u7edf\u4f1a\u91cd\u65b0\u6839\u636e\u5b89\u5168\u7b56\u7565\u51b3\u5b9a\u662f\u5426\u4e3a\u5176\u5efa\u7acb\u4f1a\u8bdd\u8868\u9879\u3002\u5982\u679c\u4e0d\u80fd\u5efa\u7acb\u4f1a\u8bdd\u8868\u9879\uff0c\u5219\u8fd9\u4e2a\u62a5\u6587\u662f\u4e0d\u80fd\u88ab\u8f6c\u53d1\u7684\u3002 \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u7cfb\u7edf\u7f3a\u7701\u7684\u4f1a\u8bdd\u8868\u8001\u5316\u65f6\u95f4\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\uff0c\u9700\u8981\u9996\u5148\u5bf9\u5b9e\u9645\u7f51\u7edc\u4e2d\u6d41\u91cf\u7684\u7c7b\u578b\u548c\u8fde\u63a5\u6570\u4f5c\u51fa\u4f30\u8ba1\u548c\u5224\u65ad\u3002\u5bf9\u4e8e\u67d0\u4e9b\u9700\u8981\u8fdb\u884c\u957f\u65f6\u95f4\u8fde\u63a5\u7684\u7279\u6b8a\u4e1a\u52a1\uff0c\u5efa\u8bae\u914d\u7f6e\u957f\u8fde\u63a5\u529f\u80fd\uff08\u5728\u4e0b\u4e00\u4e2a\u5c0f\u8282\u4ecb\u7ecd\uff09\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5c06\u4e00\u79cd\u534f\u8bae\u7c7b\u578b\u7684\u6d41\u91cf\u7684\u8001\u5316\u65f6\u95f4\u5168\u90e8\u5ef6\u957f\u3002 [FW] firewall session aging-time service-set session-type aging-time \u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\u4fee\u6539\u67d0\u4e2a\u7279\u5b9a\u670d\u52a1\u7684\u4f1a\u8bdd\u8d85\u65f6\u65f6\u95f4\u3002\u4f8b\u5982\u547d\u4ee4\uff1a firewall session aging-time service- set ftp 1200 \uff0c\u8fd9\u6761\u547d\u4ee4\u4f1a\u9488\u5bf9\u6240\u6709FTP\u6d41\u91cf\u751f\u6548\uff0c\u5c06\u8868\u9879\u7684\u8001\u5316\u65f6\u95f4\u4fee\u6539\u4e3a1200s\u3002\u8be5\u547d\u4ee4\u9700\u8c28\u614e\u914d\u7f6e\u3002 [FW] display firewall session aging-time \u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u4e2d\u5404\u7c7b\u4f1a\u8bdd\u8868\u9879\u7684\u8001\u5316\u65f6\u95f4\u3002 7.2.2.6 \u957f\u8fde\u63a5 \u00b6 \u9632\u706b\u5899\u91c7\u7528\u4f1a\u8bdd\u8868\u6765\u7ba1\u7406\u6570\u636e\u6d41\uff0c\u901a\u8fc7\u9996\u5305\u521b\u5efa\u4f1a\u8bdd\u8868\u9879\u540e\uff0c\u540e\u7eed\u62a5\u6587\u5982\u679c\u547d\u4e2d\u4f1a\u8bdd\u8868\u9879\uff0c\u5219\u6839\u636e\u8be5\u8868\u9879\u8fdb\u884c\u8f6c\u53d1\u3002\u5982\u679c\u67d0\u4e2a\u62a5\u6587\u65e2\u4e0d\u662f\u9996\u5305\uff0c\u53c8\u6ca1\u6709\u547d\u4e2d\u4f1a\u8bdd\u5c31\u4f1a\u88ab\u4e22\u5f03\u3002\u800c\u4e3a\u4e86\u4fdd\u8bc1\u7f51\u7edc\u5b89\u5168\u4ee5\u53ca\u4f1a\u8bdd\u8d44\u6e90\u7684\u5408\u7406\u5229\u7528\uff0c\u8bbe\u5907\u4e0a\u7684\u5404\u79cd\u4f1a\u8bdd\u7f3a\u7701\u8001\u5316\u65f6\u95f4\u90fd\u76f8\u5bf9\u8f83\u77ed\uff0c\u4e00\u822c\u53ea\u6709\u51e0\u5206\u949f\u3002\u5f53\u4e00\u4e2aTCP\u4f1a\u8bdd\u7684\u4e24\u4e2a\u8fde\u7eed\u62a5\u6587\u5230\u8fbe\u8bbe\u5907\u7684\u65f6\u95f4\u95f4\u9694\u5927\u4e8e\u8be5\u4f1a\u8bdd\u7684\u8001\u5316\u65f6\u95f4\u65f6\uff0c\u8bbe\u5907\u5c06\u4ece\u4f1a\u8bdd\u8868\u4e2d\u5220\u9664\u76f8\u5e94\u4f1a\u8bdd\u4fe1\u606f\u3002\u540e\u7eed\u62a5\u6587\u5230\u8fbe\u8bbe\u5907\u540e\uff0c\u8bbe\u5907\u6839\u636e\u81ea\u8eab\u7684\u8f6c\u53d1\u673a\u5236\uff0c\u5c06\u4e22\u5f03\u8be5\u62a5\u6587\uff0c\u5bfc\u81f4\u8fde\u63a5\u4e2d\u65ad\u3002 \u5728\u67d0\u4e9b\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4e00\u4e2aTCP\u4f1a\u8bdd\u7684\u4e24\u4e2a\u8fde\u7eed\u62a5\u6587\u53ef\u80fd\u95f4\u9694\u65f6\u95f4\u5f88\u957f\u3002\u4f8b\u5982\uff1a\u7528\u6237\u9700\u8981\u67e5\u8be2\u6570\u636e\u5e93\u670d\u52a1\u5668\u4e0a\u7684\u6570\u636e\uff0c\u8fd9\u4e9b\u67e5\u8be2\u64cd\u4f5c\u7684\u65f6\u95f4\u95f4\u9694\u8fdc\u5927\u4e8eTCP\u7684\u4f1a\u8bdd\u8001\u5316\u65f6\u95f4\u3002 \u4e3a\u4e86\u89e3\u51b3FTP\u670d\u52a1\u3001\u7f51\u7ba1\u670d\u52a1\u3001TUXEDO\u670d\u52a1\u548c\u6570\u636e\u5e93\u670d\u52a1\u7b49\u4e1a\u52a1\u7684\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728\u5b89\u5168\u57df\u95f4\u914d\u7f6e\u957f\u8fde\u63a5\u529f\u80fd\uff0c\u53ef\u4ee5\u5bf9\u7279\u5b9a\u7684\u6570\u636e\u6d41\u8bbe\u7f6e\u8d85\u957f\u8001\u5316\u65f6\u95f4\uff0c\u4fdd\u8bc1\u8fd9\u4e9b\u5e94\u7528\u7684\u4f1a\u8bdd\u8868\u8868\u9879\u4e0d\u88ab\u5220\u9664\uff0c\u8fd9\u6837\u5f53\u8fd9\u4e9b\u4f1a\u8bdd\u7684\u62a5\u6587\u957f\u65f6\u95f4\u6ca1\u6709\u5230\u8fbe\u8bbe\u5907\u540e\u518d\u6b21\u5230\u8fbe\u65f6\uff0c\u4ecd\u7136\u80fd\u591f\u901a\u8fc7\u8bbe\u5907\u3002\u4ece\u800c\u4f7f\u8fd9\u4e9b\u5e94\u7528\u4e0d\u88ab\u4e2d\u65ad\u3002 \u5bf9\u4e8eNGFW\uff0c\u957f\u8fde\u63a5\u529f\u80fd\u5728\u5b89\u5168\u89c4\u5219\u914d\u7f6e\u89c6\u56fe\u4e0b\u6fc0\u6d3b\uff0c\u4f8b\u5982\uff1a \u9632\u706b\u5899\u7684\u57fa\u7840\u914d\u7f6e \u9632\u706b\u5899\u767b\u9646\u53ca\u7ba1\u7406 \u00b6 \u9632\u706b\u5899\u7684\u63a5\u53e3\u670d\u52a1\u7ba1\u7406 \u00b6 \u63a5\u53e3\u914d\u7f6e\u89c6\u56fe\u4e0b\u7684**service-manage**\u547d\u4ee4\u7528\u6765\u5141\u8bb8\u6216\u62d2\u7edd\u7ba1\u7406\u5458\u901a\u8fc7HTTP\u3001HTTPS\u3001Ping\u3001SSH\u3001SNMP \u4ee5\u53caTelnet**\u8bbf\u95ee\u9632\u706b\u5899\u81ea\u8eab**\uff0c\u8be5\u547d\u4ee4\u914d\u7f6e\u5728\u9632\u706b\u5899\u7684\u63a5\u53e3\u4e0a\u3002 \u5728\u63a5\u53e3\u4e0a\u542f\u7528\u8bbf\u95ee\u7ba1\u7406\u529f\u80fd\u540e\uff0c\u5373\u4f7f\u6ca1\u6709\u5f00\u542f\u8be5\u63a5\u53e3\u6240\u5728\u533a\u57df\u548cLocal\u533a\u57df\u4e4b\u95f4\u7684\u5b89\u5168\u7b56\u7565\uff0c\u7ba1\u7406\u5458\u4e5f\u80fd\u901a\u8fc7\u8be5\u63a5\u53e3\u8bbf\u95ee\u8bbe\u5907\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u7ba1\u7406\u63a5\u53e3\uff08GE0/0/0\uff09\u5141\u8bb8\u7ba1\u7406\u5458\u901a\u8fc7HTTP\u3001HTTPS\u3001Ping\u3001SSH\u3001SNMP \u4ee5\u53caTelnet\u8bbf\u95ee\u8bbe\u5907\uff0c\u975e\u7ba1\u7406\u63a5\u53e3\u4e0d\u5141\u8bb8\u7ba1\u7406\u5458\u901a\u8fc7HTTP\u3001HTTPS\u3001Ping\u3001SSH\u3001SNMP\u4ee5\u53caTelnet\u8bbf\u95ee\u8bbe\u5907\u3002 \u53ea\u6709\u5728\u62a5\u6587\u7684\u5165\u63a5\u53e3\u5f00\u542f\u4e86\u8bbf\u95ee\u7ba1\u7406\u529f\u80fd\uff0c\u624d\u53ef\u4ee5\u901a\u8fc7\u5bf9\u5e94\u7684\u63a5\u53e3\u8bbf\u95ee\u9632\u706b\u5899\u3002\u4f8b\u5982\u9700\u8981\u8bbf\u95ee\u9632\u706b\u5899\u7684 GE1/0/2\u63a5\u53e3\uff0c\u4f46\u62a5\u6587\u4eceGE1/0/1\u63a5\u53e3\u8fdb\u5165\u8bbe\u5907\uff0c\u6b64\u65f6\u5fc5\u987b\u5f00\u542fGE1/0/1\u63a5\u53e3\u7684\u8bbf\u95ee\u7ba1\u7406\u529f\u80fd\uff0c\u65b9\u53ef\u4ee5\u8bbf\u95ee GE1/0/2\u63a5\u53e3\u3002 \u63a5\u53e3\u4e0b**service-manage**\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u5b89\u5168\u7b56\u7565\uff08Security-policy\uff09\u3002\u4f8b\u5982\u867d\u7136\u5b89\u5168\u7b56\u7565\u6ca1\u6709\u653e\u901a\u63a5\u53e3GE1/0/1\u6240\u5728\u533a\u57df\u8bbf\u95eeLocal\u63a5\u53e3\u7684ping\u6d41\u91cf\uff0c\u4f46\u662fGE1/0/1\u4e0b\u914d\u7f6e\u4e86**service-manage ping permit**\uff0c\u5219\u6240\u5728\u533a\u57df\u5185\u7684\u7528\u6237\u4f9d\u7136\u80fdping\u901a\u8be5\u63a5\u53e3\u7684IP\u5730\u5740\u3002\u5f53\u7136\u5982\u679cGE1/0/1\u63a5\u53e3\u4e0b\u914d\u7f6e\u4e86**service-manage ping deny**\uff0c\u5219\u5373\u4f7f\u5b89\u5168\u7b56\u7565\u4e2d\u914d\u7f6e\u4e86\u76f8\u5e94\u7684\u89c4\u5219\u5141\u8bb8ping\u6d41\u91cf\uff0c\u6240\u5728\u533a\u57df\u5185\u7684\u7528\u6237\u4e5f\u65e0\u6cd5ping\u901a\u8be5\u63a5\u53e3\uff0c\u9664\u975e\u5c06**service-** manage\u529f\u80fd\u5173\u95ed\uff08undo service-manage enable\uff09\u3002 \u00b6 \u63a5\u53e3\u53ca\u5b89\u5168\u533a\u57df\u914d\u7f6e \u00b6 \u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5b8c\u6210\u9632\u706b\u5899\u63a5\u53e3IP\u5730\u5740\u914d\u7f6e\uff0c\u5e76\u5c06\u63a5\u53e3\u6dfb\u52a0\u5230\u76f8\u5e94\u7684\u5b89\u5168\u533a\u57df\u3002\u5176\u4e2d\uff0cGE1/0/2\u53e3\u6dfb\u52a0\u5230\u65b0\u5efa\u7684\u5b89\u5168\u533a\u57dfom\u3002 SSH\u670d\u52a1\u914d\u7f6e \u00b6 PC\u8fde\u63a5\u5728FW\u7684GE1/0/1\u63a5\u53e3\u4e0a\uff0c\u914d\u7f6e\u4e0e\u9632\u706b\u5899\u76f8\u540c\u7f51\u6bb5\u7684IP\u5730\u5740\u3002\u73b0\u5728\u8981\u6c42PC\u80fd\u591f\u901a\u8fc7SSH\u7684\u65b9\u5f0f\uff0c\u8bbf\u95ee FW\u7684GE1/0/1\u63a5\u53e3\u4ece\u800cSSH\u5230\u9632\u706b\u5899\u3002 \u5b89\u5168\u7b56\u7565\u7684\u57fa\u7840\u914d\u7f6e \u00b6 \u4e0b\u56fe\u901a\u8fc7\u7b80\u5355\u7684\u65b9\u5f0f\u5c55\u793a\u4e86\u5b89\u5168\u7b56\u7565\uff08Security-policy\uff09\u4e0e\u5b89\u5168\u89c4\u5219\uff08Security rule\uff09\u7684\u5173\u7cfb\uff1a \u4e0b\u56fe\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u5b89\u5168\u89c4\u5219\u914d\u7f6e\u8303\u4f8b\uff1a \u4e0b\u9762\uff0c\u518d\u770b\u51e0\u4e2a\u4f8b\u5b50\uff1a \u7528\u6237\u53ef\u4ee5\u5728\u9632\u706b\u5899\u7684Security-Policy\u89c6\u56fe\u4e0b\uff0c\u5b9a\u4e49\u591a\u4e2arule\uff0c\u6765\u6ee1\u8db3\u4e0d\u540c\u7684\u4e1a\u52a1\u9700\u6c42\u3002 \u7cfb\u7edf\u9ed8\u8ba4\u5b58\u5728\u4e00\u6761\u7f3a\u7701\u5b89\u5168\u89c4\u5219\uff0c\u5982\u679c\u6d41\u91cf\u6ca1\u6709\u5339\u914d\u5230\u7ba1\u7406\u5458\u5b9a\u4e49\u7684\u5b89\u5168\u89c4\u5219\uff0c\u5c31\u4f1a\u547d\u4e2d\u7f3a\u7701\u5b89\u5168\u7b56\u7565\uff08\u6761\u4ef6\u4e3aany\uff0c\u52a8\u4f5c\u9ed8\u8ba4\u4e3adeny\uff09\u3002 \u5728\u5b89\u5168\u7b56\u7565\u4e2d\u4f7f\u7528\u5bf9\u8c61 \u00b6 \u5728\u9632\u706b\u5899\u4e2d\uff0c\u5bf9\u8c61\u7684\u7c7b\u578b\u6709\u591a\u79cd\uff0c\u4f8b\u5982\u5730\u5740\u5bf9\u8c61\u3001\u670d\u52a1\u5bf9\u8c61\u3001\u5e94\u7528\u5bf9\u8c61\u7b49\u7b49\u3002\u5728\u8bbe\u5907\u914d\u7f6e\u8fc7\u7a0b\u4e2d\uff0c\u4f8b\u5982\u4e3a\u9632\u706b\u5899\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff0c\u5982\u679c\u4e0d\u540c\u7684\u5b89\u5168\u89c4\u5219\u4e2d\uff0c\u9700\u8981\u9891\u7e41\u4f7f\u7528\u5230\u4e00\u4e2a\u76f8\u540c\u7684\u5730\u5740\u8303\u56f4\uff0c\u8fd9\u4e2a\u5730\u5740\u8303\u56f4\u5185\u5305\u542b\u591a\u4e2a\u5730\u5740\uff0c\u90a3\u4e48\u91cd\u590d\u5728\u8fd9\u4e9b\u89c4\u5219\u4e2d\u4e66\u5199\u8fd9\u4e9b\u5730\u5740\u662f\u5f88\u7e41\u7410\u7684\uff0c\u53e6\u5916\uff0c\u5982\u679c\u8fd9\u4e2a\u5730\u5740\u8303\u56f4\u8981\u53d8\u66f4\uff0c\u90a3\u4e48\u6240\u6709\u76f8\u5173\u7684\u89c4\u5219\u90fd\u9700\u8981\u8fdb\u884c\u914d\u7f6e\uff0c\u589e\u52a0\u4e86\u5de5\u4f5c\u91cf\u3002 \u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5730\u5740\u5173\u8054\u5230\u4e00\u4e2a\u5730\u5740\u5bf9\u8c61\u4e2d\uff0c\u7136\u540e\u76f4\u63a5\u5728\u5b89\u5168\u7b56\u7565\u91cc\u8c03\u7528\u8be5\u5730\u5740\u5bf9\u8c61\u5373\u53ef\u3002\u5f53\u9700\u8981\u8c03\u6574\u5730\u5740\u8303\u56f4\u65f6\uff0c\u4e5f\u53ea\u9700\u5bf9\u5730\u5740\u5bf9\u8c61\u8fdb\u884c\u4fee\u6539\u3002\u5728\u5b89\u5168\u7b56\u7565\u7684\u914d\u7f6e\u8fc7\u7a0b\u4e2d\uff0c\u4e3b\u8981\u4f7f\u7528\u5230\u7684\u5bf9\u8c61\u6709\u4e24\u79cd\uff1a\u5730\u5740\u5bf9\u8c61\u53ca\u670d\u52a1\u5bf9\u8c61\u3002\u5728\u534e\u4e3a\u9632\u706b\u5899\u4e0a\uff0c\u4f7f\u7528**ip address-set**\u547d\u4ee4\u53ef\u4ee5\u521b\u5efa\u5730\u5740\u5bf9\u8c61\uff0c\u4f7f\u7528**ip service-set**\u547d\u4ee4\u53ef\u4ee5\u521b\u5efa\u670d\u52a1\u5bf9\u8c61\u3002\u5bf9\u8c61\u521b\u5efa\u5b8c\u6210\u4e4b\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u5b89\u5168\u89c4\u5219\u4e2d\u5f15\u7528\u5b83\u3002\u4ee5\u4e0b\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684\u573a\u666f\uff0c\u4ee5\u53ca\u4e00\u4e9b\u7b80\u5355\u7684\u914d\u7f6e\u6765\u4e86\u89e3\u5bf9\u8c61\u7684\u5e94\u7528\u3002 \u9700\u6c42 \u9632\u706b\u5899\u5b89\u5168\u7b56\u7565\u914d\u7f6e \u5907\u6ce8 Trust \u533a\u57df\u7684PC1 \u53caPC2 \u90fd\u80fd \u8bbf \u95ee DMZ \u4e2d\u7684 PC3 \u7684 Telnet\u670d\u52a1 security-policy rule name test1 source-zone trust destination-zone dmz source-address 192.168.10.5 32 source-address 192.168.10.6 32 destination-address 192.168.20.11 32 service telnet action permit \u672c\u4f8b\u4e2d\uff0c\u4e24\u6761source-address\u4e4b\u95f4\u662f\u201c\u6216\u201d\u7684\u5173\u7cfb\u3002 Trust \u533a\u57df\u7684PC1 \u53caPC2 \u90fd\u80fd \u8bbf \u95ee DMZ \u4e2d\u7684 PC3 \u7684 Telnet\u670d\u52a1\uff0c\u4f7f\u7528\u5730\u5740\u5bf9\u8c61\u5b8c\u6210\u4e0a\u8ff0\u9700\u6c42 ip address-set add1 type object address 192.168.10.5 mask 32 address 192.168.10.6 mask 32 security-policy rule name test1 source-zone trust destination-zone dmz destination-address 192.168.20.11 32 source-address address-set add1 service telnet action permit \u521b\u5efa\u5730\u5740\u5bf9\u8c61\u540e\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u5730\u5740\uff0c\u6216\u5730\u5740\u8303\u56f4\u6dfb\u52a0\u5230\u8be5\u5bf9\u8c61\u4e2d\uff0c\u5e76\u5728\u5b89\u5168\u7b56\u7565\u4e2d\u8c03\u7528\uff0c\u4ece\u800c\u7b80\u5316\u914d\u7f6e Trust\u533a\u57df\u7684\u4efb\u610fPC\u90fd\u80fd\u8bbf\u95ee DMZ \u4e2d \u7684 PC3 \u7684 TCP9931\u7aef\u53e3\uff0c\u4f7f\u7528\u670d\u52a1\u5bf9\u8c61\u5b8c\u6210\u4e0a\u8ff0\u9700\u6c42 ip service-set port1 type object service protocol tcp destination-port 9931 security-policy rule name test1 source-zone trust destination-zone dmz destination-address 192.168.20.11 32 service port1 action permit \u670d\u52a1\u4ee3\u8868\u4e86\u6d41\u91cf\u7684\u534f\u8bae\u7c7b\u578b\u3002\u521b\u5efa\u670d\u52a1\u5bf9\u8c61\u540e\uff0c\u53ef\u4ee5\u5c06\u4e00\u79cd\u6216\u591a\u79cd\u534f\u8bae\u7c7b\u578b\uff0c\u6216\u8005TCP/UDP\u7aef\u53e3\u53f7\u6dfb\u52a0\u5230\u8be5\u5bf9\u8c61\u4e2d\uff0c\u5e76\u5728\u5b89\u5168\u7b56\u7565\u4e2d\u8c03\u7528\uff0c\u4ece\u800c\u7b80\u5316\u914d\u7f6e Trust\u533a\u57df\u7684\u4efb\u610fPC\u90fd\u80fd\u8bbf\u95ee DMZ \u4e2d \u7684 PC3 \u7684 TCP9931 \u3001 TCP9932 \u3001 TCP9933\u3001UDP2281\u7aef\u53e3 ip service-set port1 type object service protocol tcp destination-port 9931 to 9933 service protocol udp destination-port 2281 security-policy rule name test1 source-zone trust destination-zone dmz destination-address 192.168.20.11 32 service port1 action permit \u9632\u706b\u5899\u7684OSPF\u914d\u7f6e \u00b6 ATAE3.0/E9000\u673a\u6846\u901a\u8fc7Fabric\u4ea4\u6362\u677f\u5806\u53e0\u7ec4\u8fde\u63a5\u5230\u9632\u706b\u5899\u3002 Server\u7684\u7f3a\u7701\u7f51\u5173\u8bbe\u7f6e\u4e3aFW\u7684GE1/0/1\u63a5\u53e3\u3002 \u5b8c\u6210FW \u7684\u914d\u7f6e\uff0c \u4e0eSW \u5efa\u7acbOSPF \u90bb\u63a5\u5173\u7cfb\uff0c \u4ea4\u4e92OSPF \u8def\u7531\u3002\u4f7f\u5f97SW \u80fd\u591f\u4eceOSPF \u83b7\u77e5\u5230\u8fbe 192.168.10.0/24\u7684\u8def\u7531\u3002 FW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u9996\u5148\u67e5\u770b\u4e00\u4e0bOSPF\u90bb\u63a5\u5173\u7cfb\u7684\u5efa\u7acb\u60c5\u51b5\uff1a \u518d\u770b\u4e00\u4e0bSW\u7684\u8def\u7531\u8868\uff1a SW\u5df2\u7ecf\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u4e86192.168.10.0/24\u7684\u8def\u7531\u3002\u6b64\u65f6Server\u5373\u53efping\u901aSW\uff0810.1.1.2\uff09\u3002 \u9632\u706b\u5899\u57fa\u7840\u914d\u7f6e\u793a\u4f8b \u00b6 \u9632\u706b\u5899\u7684\u4e09\u4e2a\u63a5\u53e3\u7684IP\u5730\u5740\u5982\u56fe\u6240\u793a\uff1b \u5b8c\u6210\u63a5\u53e3\u914d\u7f6e\uff0c\u5e76\u5c06\u9632\u706b\u5899\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u76f8\u5e94\u7684\u5b89\u5168\u533a\u57df\uff1b \u5b8c\u6210\u9632\u706b\u5899\u7684\u5b89\u5168\u7b56\u7565\u914d\u7f6e\uff0c\u4f7f\u5f97PC1\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eePC2\uff0c\u4f46\u662fPC2\u65e0\u6cd5\u4e3b\u52a8\u8bbf\u95eePC1\uff1b \u5b8c\u6210\u9632\u706b\u5899\u7684\u5b89\u5168\u7b56\u7565\u914d\u7f6e\uff0c\u4f7f\u5f97PC2\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eeWebServer\u7684WEB\u670d\u52a1\u3002\u9632\u706b\u5899\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cPC1\u5373\u53ef\u4e3b\u52a8\u53d1\u8d77\u8bbf\u95eePC2\uff0c\u800cPC2\u65e0\u6cd5\u4e3b\u52a8\u8bbf\u95eePC1\uff1b\u53e6\u5916\uff0cPC2\u80fd\u591f\u8bbf\u95eeWebServer \u7684HTTP\u670d\u52a1\u3002 \u62a5\u6587\u6355\u83b7 \u00b6 \u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u80fd\u9700\u8981\u5728\u9632\u706b\u5899\u4e0a\u8fdb\u884c\u6293\u5305\uff0c\u5e76\u5bf9\u6355\u83b7\u7684\u62a5\u6587\u8fdb\u884c\u5206\u6790\uff0c\u6b64\u65f6\u53ef\u4ee5\u5728\u9632\u706b\u5899\u4e0a\u914d\u7f6e\u4e94\u5143\u7ec4\u6293\u5305\u3002\u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0c\u5728\u9632\u706b\u5899FW1\u4e0a\u6355\u83b7Server1\u53d1\u5f80100.1.1.2\u7684\u62a5\u6587\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u53ef\u4ee5\u5728FW1\u4e0a\u67e5\u770b\u751f\u6548\u7684\u914d\u7f6e\uff1a HRP_A[FW1]display packet-capture configuration capture number: 1000 capture mode: verbose send mode: manual interface-name packet-direction acl-number queue-id capt-type GigabitEthernet1/0/0 inbound 3001 0 IPv4 GigabitEthernet1/0/0 outbound 3001 0 IPv4 \u73b0\u5728\uff0cFW1\u5c06\u4f1a\u5f00\u59cb\u6293\u53d6\u7b26\u5408\u6761\u4ef6\u7684\u62a5\u6587\u3002\u6b64\u65f6\u5982\u679cServer1 ping 100.1.1.2\uff0c\u800c\u4e14ping\u4e865\u4e2a\u62a5\u6587\uff0c\u90a3\u4e48\u53ef \u4ee5\u5728FW1\u4e0a\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a \u73b0\u5728\uff0c\u8fd9\u4e9b\u62a5\u6587\u5df2\u7ecf\u88abFW1\u7f13\u5b58\u5728\u961f\u52170\u4e2d\uff0c\u5982\u679c\u8981\u5c06\u62a5\u6587\u4fdd\u5b58\u4e0b\u6765\u8fdb\u884c\u5206\u6790\uff0c\u5219\u53ef\u4ee5\u5c06\u961f\u52170\u4e2d\u7684\u62a5\u6587\u4fdd\u5b58\u5728FW1\u7684\u78c1\u76d8\u7a7a\u95f4\u4e2d\uff0c\u5f62\u6210*.cap\u6587\u4ef6\uff0c\u4f8b\u5982\u4fdd\u5b58\u4e3apkt222.cap\u6587\u4ef6\u3002 HRP_A[FW1] packet-capture queue 0 to-file pkt222.cap \u6b64\u65f6\u4f7f\u7528dir\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770b\u5230\u8be5\u6587\u4ef6\uff1a HRP_A\\<FW1>dir Directory of hda1:/ Idx Attr Size(Byte) Date Time FileName 0 -rw- 119309177 Jan 13 2014 17:39:02 suampua10v1r1c00spc100.bin 1 -rw- 61 Jun 26 2017 10:28:58 private-data.txt 2 \u2026\u2026 drw- - Jan 13 2014 17:48:10 isp 21 -rw- 594 Jul 11 2017 11:38:34 pkt222.cap \u901a\u8fc7FTP/SFTP\u7b49\u65b9\u5f0f\u4eceFW1\u4e0a\u4e0b\u8f7d\u8be5\u6587\u4ef6\uff0c\u5373\u53ef\u5bf9\u62a5\u6587\u8fdb\u884c\u5206\u6790\u3002 \u5b8c\u6210\u6293\u5305\u540e\uff0c\u9700\u8981\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a \u00b6 \u914d\u7f6e\u4e94\u5143\u7ec4\u6293\u5305\u4f1a\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u5f71\u54cd\u8bbe\u5907\u6027\u80fd\uff0c\u56e0\u6b64\u901a\u5e38\u53ea\u5728\u7f51\u7edc\u95ee\u9898\u5b9a\u4f4d\u65f6\u4f7f\u7528\u3002\u5728\u7f51\u7edc\u95ee\u9898\u5b9a\u4f4d\u7ed3\u675f\u540e\uff0c\u5fc5\u987b\u505c\u6b62\u6293\u5305\u8fdb\u7a0b\uff0c\u5e76\u4e14\u6e05\u7a7a\u6293\u5305\u961f\u5217\uff0c\u91ca\u653e\u5185\u5b58\u3002 \u542f\u52a8\u6293\u5305\u9700\u5728\u6570\u901a\u5de5\u7a0b\u5e08\u7684\u6307\u5bfc\u4e0b\u8fdb\u884c\uff0c\u5e76\u9009\u62e9\u4e1a\u52a1\u6d41\u91cf\u8f83\u5c0f\u7684\u65f6\u95f4\u8fdb\u884c\uff0c\u4ee5\u9632\u64cd\u4f5c\u5931\u8bef\u5f15\u8d77\u4e1a\u52a1\u4e2d\u65ad\u3002\u7981\u6b62\u968f\u610f\u5f00\u542f\u6293\u5305\u3002 \u547d \u4ee4 packet-capture { no-ip-packet | all-packet | ipv4-packet acl-number | ipv6-packet acl6- number } [ inbound | outbound ] [ queue queue-id ] interface interface-type interface-number\u7528\u4e8e\u914d\u7f6e\u6293\u5305\u63a5\u53e3\u3001\u65b9\u5411\u4ee5\u53ca\u8be5\u63a5\u53e3\u7528\u6765\u5b58\u50a8\u6293\u5305\u7684\u961f\u5217\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u540c\u65f6\u6293\u53d6\u5165\u65b9\u5411\u548c\u51fa\u65b9\u5411\u7684\u62a5\u6587\uff0c\u5b58\u50a8\u6293\u5305\u7684\u961f\u5217\u4e3a0\u3002\u8bbe\u5907\u63d0\u4f9b\u56db\u4e2a\u961f\u5217\u7528\u4e8e\u5b58\u50a8\u6293\u53d6\u7684\u62a5\u6587\u3002\u8bbe\u5907\u5355\u6b21\u5355\u5411\u6700\u5927\u6293\u5305\u6570\u76ee\u4e3a 1000\u4e2a\u62a5\u6587\u3002\u51fa\u5165\u65b9\u5411\u6700\u591a\u5404\u5b58\u50a81000\u4e2a\u62a5\u6587\uff0c\u6bcf\u4e2a\u961f\u5217\u6700\u591a\u5b58\u50a8\u51712000\u4e2a\uff0c\u961f\u5217\u62a5\u6587\u8d85\u8fc72000 \u540e\uff0c\u65b0\u7684\u62a5\u6587\u5c06\u88ab\u4e22\u5f03\uff0c\u4e0d\u518d\u8fdb\u5165\u961f\u5217\u3002\u5728\u961f\u5217\u5b58\u50a8\u52302000\u4e2a\u62a5\u6587\u4ee5\u540e\u5982\u9700\u91cd\u65b0\u6293\u5305\uff0c\u53ef\u4ee5\u914d\u7f6e\u8be5\u63a5\u53e3\u53e6\u4e00\u4e2a\u961f\u5217\uff0c\u6216\u8005\u4f7f\u7528reset packet-capture queue queue-id\u547d\u4ee4\u6e05\u7a7a\u8be5\u961f\u5217\u3002 \u5728\u672c\u4f8b\u4e2d\uff0c\u53ea\u8981Server1\u53d1\u5f80100.1.1.2\u7684\u62a5\u6587\u5230\u8fbeFW1\u7684GE1/0/0\u63a5\u53e3\uff0c\u4fbf\u4f1a\u88ab\u6355\u83b7\uff0c\u5373\u4f7fFW1\u7684\u5b89\u5168\u7b56\u7565\u5e76\u672a\u5141\u8bb8Server1\u4e3b\u52a8\u8bbf\u95ee100.1.1.2\u3002 NAT NAT \u6982\u8ff0 NAT\uff08Network Address Translation\uff0c\u7f51\u7edc\u5730\u5740\u8f6c\u6362\uff09\u662f\u7f13\u89e3IPv4\u516c\u7f51\u5730\u5740\u67af\u7aed\u7684\u4e00\u4e2a\u91cd\u8981\u529f\u81e3\uff0c\u901a\u8fc7\u5728\u7f51\u7edc\u8bbe\u5907\u4e0a\u90e8\u7f72NAT\uff0c\u7f51\u7edc\u8bbe\u5907\u80fd\u591f\u5bf9\u7279\u5b9a\u62a5\u6587\u7684IP\u5730\u5740\u548c\uff08\u6216\uff09\u7aef\u53e3\u53f7\u8fdb\u884c\u8f6c\u6362\u3002 IP\u5730\u5740\u6709\u4e24\u79cd\u7c7b\u578b\uff1a\u516c\u7f51\u53ca\u79c1\u7f51\uff08Public and Private\uff09\u3002\u5176\u4e2d\u79c1\u7f51IP\u53ea\u80fd\u5728\u672c\u5730\u7f51\u7edc\uff08\u5c40\u57df\u7f51\uff09\u4e2d\u4f7f\u7528\uff0c\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u516c\u7f51\uff08Internet\uff09\uff0c\u8fd9\u610f\u5473\u7740\u5c40\u57df\u7f51PC\u8981\u8bbf\u95ee\u516c\u7f51\u5c31\u5fc5\u987b\u62e5\u6709\u516c\u7f51IP\uff0c\u800c\u516c\u7f51IP\u8d44\u6e90\u672c\u8eab\u5c31\u975e\u5e38\u7a00\u7f3a\uff0c\u90a3\u4e48\uff0c\u80fd\u5426\u5728\u5c40\u57df\u7f51\u5185\u7edf\u4e00\u90e8\u7f72\u79c1\u7f51IPv4\u5730\u5740\u7a7a\u95f4\uff0c\u7136\u540e\u53c8\u80fd\u591f\u8ba9\u7f51\u5185\u7528\u6237\u8bbf\u95eeInternet\u5462\uff1fNAT\u6280\u672f\u80fd\u591f\u5bf9IP\u62a5\u6587\u4e2d\u7684\u6e90\u6216\u76ee\u7684\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u4ece\u800c\u5f53\u6e90\u5730\u5740\u4e3a\u79c1\u7f51IP\u5730\u5740\u7684\u6570\u636e\u5305\u5230\u8fbe\u7f51\u7edc\u51fa\u53e3\u65f6\uff0c\u7531NAT \u8bbe\u5907\u5bf9\u79c1\u7f51\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u8f6c\u6362\u6210\u4e00\u4e2a\u5408\u6cd5\u7684\u516c\u7f51IP\u5e76\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u5230\u516c\u7f51\uff0c\u800c\u5f53\u56de\u7a0b\u6570\u636e\u5305\u5230\u8fbe\u65f6\uff0c\u53c8\u5c06\u76ee\u7684IP\u4fee\u6539\u4e3a\u6b64\u524d\u7684\u90a3\u4e2a\u79c1\u7f51IP\u5730\u5740\u3002 NAT\u7684\u4f18\u7f3a\u70b9\uff1a \u00b6 NAT \u7c7b\u578b\u8be6\u89e3 \u6211\u4eec\u7b80\u5355\u7684\u5c06NAT\u5206\u4e3a\u4e24\u7c7b\uff1a \u6e90IP\u5730\u5740\u8f6c\u6362\uff08Source IP address-based NAT\uff09: \u00b6 No-Port\u5730\u5740\u8f6c\u6362\uff08No-Port Address Translation\uff0cNo-PAT\uff09 \u7f51\u7edc\u5730\u5740\u53ca\u7aef\u53e3\u8f6c\u6362\uff08Network Address Port Translation\uff0cNAPT\uff09 \u76ee\u7684IP\u5730\u5740\u8f6c\u6362\uff08Destination IP address-based NAT\uff09: \u00b6 NAT Server \u76ee\u7684NAT 7.3.2.1 NAT\u7c7b\u578b1\uff1a\u6e90IP\u5730\u5740\u8f6c\u6362\u4e4bNo-PAT \u00b6 No-PAT\u4e5f\u53ef\u4ee5\u79f0\u4e3a\u201c\u4e00\u5bf9\u4e00\u5730\u5740\u8f6c\u6362\u201d\uff0c\u5728\u5730\u5740\u8f6c\u6362\u8fc7\u7a0b\u4e2d\uff0c\u6570\u636e\u5305\u7684\u6e90IP\u5730\u5740\u7531\u79c1\u7f51\u5730\u5740\u8f6c\u6362\u4e3a\u516c\u7f51\u5730\u5740\uff0c\u4f46\u7aef\u53e3\u53f7\uff08TCP\u6216UDP\u7aef\u53e3\u53f7\uff09\u4e0d\u505a\u8f6c\u6362\u3002\u8bbe\u5907\u4f1a\u5c06\u8f6c\u6362\u524d\u540e\u7684\u5730\u5740\u7684\u6240\u6709\u7aef\u53e3\u8fdb\u884c\u4e00\u4e00\u5bf9\u5e94\u3002\u8fd9\u79cd\u5e94\u7528\u7684\u4f18\u70b9\u662f\u79c1\u7f51\u5730\u5740\u7684\u6240\u6709\u7aef\u53e3\u4e0d\u505a\u8f6c\u6362\uff0c\u7f3a\u70b9\u662f\u8be5\u516c\u7f51\u5730\u5740\u4e0d\u80fd\u88ab\u5176\u4ed6\u79c1\u7f51\u5730\u5740\u4f7f\u7528\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u79c1\u7f51\u5730\u5740\u9700\u72ec\u5360\u4e00\u4e2a\u516c\u7f51\u5730\u5740\u3002\u4f8b\u5982\uff0c\u82e5\u5730\u5740\u6c60\u4e2d\u7684\u516c\u7f51IP\u5730\u5740\u53ea\u67092\u4e2a\uff0c\u7531\u4e8e\u4e00\u53f0\u79c1\u7f51\u4e3b\u673a\u5728\u501f\u7528\u5176\u4e2d\u7684\u4e00\u4e2a\u516c\u7f51IP\u8bbf\u95ee\u516c\u7f51\u65f6\u4f1a\u5360\u7528\u8fd9\u4e2aIP\u7684\u6240\u6709\u7aef\u53e3\uff0c\u56e0\u6b64\u8fd9\u79cd\u60c5\u51b5\u53ea\u5141\u8bb8\u6700\u591a\u6709\u4e24\u53f0\u79c1\u7f51\u4e3b\u673a\u540c\u65f6\u8bbf\u95ee\u516c\u7f51\uff0c\u5176\u4ed6\u7684\u79c1\u7f51\u4e3b\u673a\u8981\u7b49\u5230\u5176\u4e2d\u4e00\u53f0\u4e3b\u673a\u4e0d\u518d\u8bbf\u95ee\u516c\u7f51\u4e14\u5b83\u5360\u7528\u7684\u516c\u7f51IP\u5730\u5740\u88ab\u91ca\u653e\u540e\uff0c\u624d\u53ef\u518d\u8fdb\u884c\u516c\u7f51\u8bbf\u95ee\u3002 \u4ee5\u4e0a\u56fe\u4e3a\u4f8b\uff0c\u5047\u8bbe\u7f51\u7edc\u7ba1\u7406\u5458\u7533\u8bf7\u5230\u4e00\u4e2a\u516c\u7f51\u5730\u5740\uff08200.1.1.100\uff09\uff0c\u5e76\u4e14\u5728\u9632\u706b\u5899\u4e0a\u90e8\u7f72No-PAT\u3002\u73b0\u5728 192.168.1.1\u8fd9\u53f0PC\u8981\u8bbf\u95ee\u516c\u7f51\u76848.8.8.8\uff0c\u59cb\u53d1\u6570\u636e\u5305\u7684\u6e90\u76ee\u7684IP\u5730\u5740\u5982\u56fe\u6240\u793a\u3002\u6570\u636e\u5305\u5230\u8fbe\u4e86\u9632\u706b\u5899\u540e\uff0c \u9632\u706b\u5899\u6839\u636eNAT\u6620\u5c04\u8868\u9879\uff0c\u5c06\u6e90\u5730\u5740192.168.1.1\u4fee\u6539\u4e3a200.1.1.100\uff08\u7aef\u53e3\u53f7\u4e0d\u8f6c\u6362\uff09\uff0c\u7136\u540e\u5c06\u62a5\u6587\u8f6c\u53d1\u51fa \u53bb\uff0c\u8fd9\u4e2a\u62a5\u6587\u5728Internet\u4e2d\u6700\u7ec8\u88ab\u8f6c\u53d1\u52308.8.8.8\u3002\u73b0\u57288.8.8.8\u8981\u56de\u590d\u62a5\u6587\uff0c\u6570\u636e\u5305\u7684\u76ee\u7684\u5730\u5740\u4e3a200.1.1.100 \uff08\u6ce8\u610f\uff0c\u516c\u7f51\u662f\u65e0\u8bba\u5982\u4f55\u4e5f\u4e0d\u77e5\u6653192.168.1.1\u5b58\u5728\u7684\uff09\u3002\u8fd9\u4e2a\u6570\u636e\u5305\u5230\u8fbe\u4e86\u9632\u706b\u5899\u540e\uff0c\u9632\u706b\u5899\u6839\u636eNAT\u6620\u5c04\u8868\u9879\uff0c\u5c06\u76ee\u7684IP\u4fee\u6539\u4e3a192.168.1.1\u5e76\u8f6c\u53d1\u51fa\u53bb\uff0c\u6700\u7ec8\uff0c\u8fd9\u4e2a\u6570\u636e\u5305\u56de\u5230\u4e86192.168.1.1\u3002\u8fd9\u5c31\u662fNAT\u4e00\u5bf9\u4e00\u6620\u5c04\u7684\u5de5\u4f5c\u539f\u7406\u3002\u4ece\u4e0a\u9762\u7684\u63cf\u8ff0\u53ef\u4ee5\u770b\u51fa\u6765\uff0c\u5176\u5b9e\u8fd9\u79cdNAT\u7c7b\u578b\u5e76\u6ca1\u6709\u7f13\u89e3\u516c\u7f51IP\u5730\u5740\u8017\u5c3d\u7684\u95ee\u9898\uff0c\u56e0\u4e3a\u4f60\u5982\u679c\u670910\u53f0\u5185\u7f51PC\u8981\u8bbf\u95ee\u516c\u7f51\uff0c\u76f8\u5f53\u4e8e\u8981\u670910\u4e2a\u516c\u7f51IP\u3002 \u5728\u5b9e\u9645\u7684\u90e8\u7f72\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u57fa\u4e8eIP\u5730\u5740\u6c60\u7684No-PAT\uff0c\u4e5f\u5c31\u662f\u5c06\u7533\u8bf7\u5230\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u516c\u7f51IP\u5730\u5740\u653e\u7f6e\u5728\u4e00\u4e2aIP\u5730\u5740\u6c60\u4e2d\uff0c\u7136\u540e\u5c06\u8be5\u5730\u5740\u6c60\u5e94\u7528\u4e8e\u6e90\u5730\u5740\u8f6c\u6362\u3002\u6b64\u65f6\u5f53\u67d0\u4e2a\u5185\u7f51\u8bbe\u5907\u53d1\u9001\u7684\u62a5\u6587\u9700\u8981\u8fdb\u884cNAT\u65f6\uff0c \u9632\u706b\u5899\u5c06\u4f1a\u4ece\u5730\u5740\u6c60\u4e2d\u9009\u62e9\u4e00\u4e2a\u7a7a\u95f2\u7684\u5730\u5740\uff0c\u5e76\u521b\u5efa\u4e00\u4e2aNAT\u6620\u5c04\u8868\u9879\uff0c\u7136\u540e\u5bf9\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\u3002\u800c\u5f53\u53e6\u4e00\u4e2a\u8bbe\u5907\u9700\u8981\u8bbf\u95ee\u5916\u7f51\u65f6\uff0c\u9632\u706b\u5899\u4ece\u5730\u5740\u6c60\u4e2d\u9009\u62e9\u53e6\u4e00\u4e2a\u7a7a\u4f59\u7684\u516c\u7f51\u5730\u5740\u3002\u8fd9\u79cd\u65b9\u5f0f\u5b9e\u9645\u4e0a\u8fd8\u662f\u4e00\u4e2a\u79c1\u7f51\u5730\u5740\u5bf9\u4e00\u4e2a\u516c\u7f51\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\u3002 7.3.2.2 NAT\u7c7b\u578b2\uff1aNAPT \u00b6 NAPT\u662f\u6307\u5728\u8fdb\u884cNAT\u8f6c\u6362IP\u5730\u5740\u7684\u540c\u65f6\uff0c\u8fd8\u5bf9\u7aef\u53e3\u53f7\u8fdb\u884c\u8f6c\u6362\uff0c\u8fd9\u79cd\u6280\u672f\u53ef\u4ee5\u5b9e\u73b0\u591a\u4e2a\u79c1\u7f51\u7528\u6237\u5171\u7528\u4e00\u4e2a\u516c\u7f51IP\u3002NAPT\u4e5f\u88ab\u79f0\u4e3a\u201c\u5730\u5740\u590d\u7528\u201d\uff0c\u901a\u8fc7\u914d\u7f6eNAPT\u529f\u80fd\uff0c\u7f51\u7edc\u8bbe\u5907\u5c06\u540c\u65f6\u5bf9\u62a5\u6587\u7684\u7aef\u53e3\u53f7\u548cIP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u5141\u8bb8\u591a\u4e2a\u79c1\u7f51IP\u5730\u5740\u540c\u65f6\u6620\u5c04\u5230\u540c\u4e00\u4e2a\u516c\u7f51IP\u5730\u5740\uff0c\u8be5\u516c\u7f51IP\u5730\u5740\u901a\u8fc7\u4e0d\u540c\u7684\u7aef\u53e3\u53f7\u533a\u5206\u4e0d\u540c\u7684\u79c1\u7f51IP\u5730\u5740\uff0c\u4ece\u800c\u5b9e\u73b0\u591a\u5bf9\u4e00\u6216\u591a\u5bf9\u591a\u7684\u5730\u5740\u8f6c\u6362\u3002\u6b63\u662f\u8fd9\u79cd\u89e3\u51b3\u65b9\u6848\u6781\u5927\u7684\u7f13\u89e3\u4e86\u516c\u7f51IP\u5730\u5740\u7d27\u7f3a\u7684\u95ee\u9898\u3002\u6211\u4eec\u4ec5\u9700\u8d2d\u4e70\u4e00\u4e2a\u6216\u591a\u4e2a\u516c\u7f51IP\u5730\u5740\uff0c\u5373\u53ef\u6ee1\u8db3\u5185\u7f51\u5927\u91cfPC\u540c\u65f6\u8bbf\u95ee\u516c\u7f51\u7684\u9700\u6c42\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5185\u7f51\u5730\u5740192.168.1.1\u53ca192.168.1.2\u5728\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u5171\u7528200.1.1.100\u8fd9\u4e2a\u516c\u7f51\u5730\u5740\u3002\u5f53 192.168.1.1 \u4ee5TCP \u6e90\u7aef\u53e3\u53f71023 \u5411\u5916\u7f51\u53d1\u9001\u62a5\u6587\u65f6\uff0c \u9632\u706b\u5899\u4e3a\u8be5\u4f1a\u8bdd\u521b\u5efa\u4e00\u4e2aNAT \u6620\u5c04\u8868\u9879\uff0c \u5c06 192.168.1.1:1023\u6620\u5c04\u5230200.1.1.100:39612\uff0c\u7136\u540e\u5c06\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u53ca\u6e90TCP\u7aef\u53e3\u53f7\u8fdb\u884c\u8f6c\u6362\uff0c\u518d\u5c06\u8f6c\u6362\u540e\u7684\u62a5\u6587\u53d1\u9001\u51fa\u53bb\uff0c\u5f53\u9632\u706b\u5899\u6536\u5230\u56de\u7a0b\u7684\u62a5\u6587\u65f6\uff0c\u4e5f\u4f1a\u6839\u636eNAT\u6620\u5c04\u8868\u9879\uff0c\u5c06\u56de\u7a0b\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u53ca\u7aef\u53e3\u53f7\u8fdb\u884c\u8f6c\u6362\u3002\u800c\u5f53\u5185\u7f51\u5730\u5740192.168.1.2\u4f7f\u7528TCP\u6e90\u7aef\u53e3\u53f71569\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u9632\u706b\u5899\u5219\u5c06\u8fd9\u4e2a\u4f1a\u8bdd\u6620\u5c04\u5230 200.1.1.100\u768439613\u7aef\u53e3\uff0c\u4ece\u800c\u901a\u8fc7\u7aef\u53e3\u53f7\u5bf9\u8fd9\u4e24\u4e2a\u4f1a\u8bdd\u8fdb\u884c\u533a\u5206\u3002 7.3.2.3 NAT\u7c7b\u578b3\uff1aNAT Server \u00b6 NAT Server\u662f\u6700\u5e38\u7528\u7684\u76ee\u7684\u5730\u5740\u8f6c\u6362\u6280\u672f\u3002\u6211\u4eec\u7ecf\u5e38\u80fd\u89c1\u5230\u8fd9\u6837\u7684\u573a\u666f\uff1a\u5185\u7f51\u5b58\u5728\u4e00\u53f0\u4f7f\u7528\u79c1\u7f51IP\u5730\u5740\u7684\u670d\u52a1\u5668\uff0c\u4f8b\u5982WEB\u670d\u52a1\u5668\uff0c\u8fd9\u53f0\u670d\u52a1\u5668\u5982\u679c\u9700\u5bf9\u5916\u7f51\u63d0\u4f9b\u670d\u52a1\uff0c\u90a3\u4e48\u5916\u7f51\u7684\u7528\u6237\u663e\u7136\u662f\u4e0d\u53ef\u80fd\u4f7f\u7528\u8be5\u670d\u52a1\u5668\u7684\u771f\u5b9eIP\u5730\u5740\u5bf9\u5176\u8fdb\u884c\u8bbf\u95ee\u7684\u3002\u6b64\u65f6\u5373\u53ef\u4f7f\u7528NAT Server\uff0c\u5c06\u8be5\u79c1\u7f51IP\u5730\u5740\u6620\u5c04\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u516c\u7f51\u5730\u5740\uff0c \u4ece\u800c\u4f7f\u5f97\u516c\u7f51\u7528\u6237\u80fd\u591f\u901a\u8fc7\u8bbf\u95ee\u8be5\u516c\u7f51\u5730\u5740\u4ece\u800c\u8bbf\u95ee\u5185\u7f51\u670d\u52a1\u5668\u3002\u5177\u4f53\u793a\u4f8b\u5982\u4e0a\u56fe\u6240\u793a\u3002 NAT Server\u4f7f\u5f97\u5185\u90e8\u670d\u52a1\u5668\u53ef\u4ee5\u4f9b\u5916\u90e8\u7f51\u7edc\u8bbf\u95ee\u3002\u5916\u90e8\u7f51\u7edc\u7684\u7528\u6237\u8bbf\u95ee\u5185\u90e8\u670d\u52a1\u5668\u65f6\uff0cNAT\u5c06\u8bf7\u6c42\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u8f6c\u6362\u6210\u5185\u90e8\u670d\u52a1\u5668\u7684\u771f\u5b9e\u5730\u5740\uff08\u79c1\u7f51\u5730\u5740\uff09\u3002\u5bf9\u4e8e\u5185\u90e8\u670d\u52a1\u5668\u7684\u56de\u5e94\u62a5\u6587\uff0cNAT\u8fd8\u4f1a\u81ea\u52a8\u5c06\u62a5\u6587\u7684\u6e90\u5730\u5740\uff08\u79c1\u7f51\u5730\u5740\uff09\u8f6c\u6362\u6210\u516c\u7f51\u5730\u5740\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5185\u7f51\u670d\u52a1\u5668192.168.1.10\uff08\u7684TCP80\u7aef\u53e3\uff09\u9700\u8981\u5bf9\u5916\u63d0\u4f9b\u8bbf\u95ee\uff0c\u53ef\u5728\u9632\u706b\u5899\u4e0a\u90e8\u7f72NAT Server \u5c06 192.168.1.10 \u7684 TCP80 \u7aef\u53e3 \u6620\u5c04\u5230 200.1.1.100 \u7684 TCP8080 \u7aef\u53e3 \u3002 \u5982 \u6b64 \u4e00\u6765 \uff0c\u5f53\u516c\u7f51\u7528\u6237 \u8bbf\u95ee 200.1.1.100:8080\u65f6\uff0c\u5b9e\u9645\u4e0a\u8bbf\u95ee\u7684\u5c31\u662f\u8be5\u5185\u7f51\u670d\u52a1\u5668\u7684WEB\u670d\u52a1\u3002 NAT \u5728\u9632\u706b\u5899\uff08NGFW\uff09\u4e0a\u7684\u90e8\u7f72 \u57fa\u4e8e\u5730\u5740\u6c60\u7684\u6e90\u5730\u5740NAPT \u00b6 \u5982\u4e0a\u56fe\u6240\u793a\uff0cServer\u901a\u8fc7\u4ea4\u6362\u673a\u8fde\u63a5\u5230\u9632\u706b\u5899\uff0cServer\u7684\u7f3a\u7701\u7f51\u5173\u8bbe\u7f6e\u4e3aFW\u7684GE1/0/1\u63a5\u53e3\u3002\u51fa\u4e8e\u5b89\u5168\u7684\u8003\u8651\uff0c\u8981\u6c42Server\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff08External Network\uff09\u65f6\uff0c\u6e90IP\u5730\u5740\u9700\u88ab\u8f6c\u6362\uff0c\u8f6c\u6362\u621010.1.1.5\u81f310.1.1.10\u8fd9\u4e2a\u8303\u56f4\u5185\u7684IP\u5730\u5740\u3002 FW\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5f53Server\uff08\u4f8b\u5982192.168.10.5\uff09\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff08\u4f8b\u5982ping 10.1.1.2\uff09\u65f6\uff0c\u53ef\u4ee5\u770b\u5230\u7c7b\u4f3c\u5982\u4e0b\u4f1a\u8bdd\u8868\u9879\uff1a \u4ee5\u4e0a\u4e2d\u62ec\u53f7\u5185\u7684IP\u5730\u5740\uff0c\u5c31\u662f\u5c06\u6e90IP\u5730\u5740192.168.10.5\u88ab\u8f6c\u6362\u540e\u6240\u4f7f\u7528\u7684IP\u5730\u5740\u3002 NAT Server \u00b6 \u5982\u4e0a\u56fe\u6240\u793a\uff0cServer\u901a\u8fc7\u4ea4\u6362\u673a\u8fde\u63a5\u5230\u9632\u706b\u5899\uff0cServer\u7684\u7f3a\u7701\u7f51\u5173\u8bbe\u7f6e\u4e3aFW\u7684GE1/0/1\u63a5\u53e3\u3002\u51fa\u4e8e\u5b89\u5168\u7684\u8003\u8651\uff0c\u6211\u4eec\u5e76\u4e0d\u5e0c\u671b\u670d\u52a1\u5668\u5355\u677f\u7684\u771f\u5b9eIP\u5730\u5740\u66b4\u9732\u5728\u5916\u90e8\u7f51\u7edc\uff0c\u4f46\u662f\u53c8\u5e0c\u671b\u67d0\u4e9b\u670d\u52a1\u5668\u80fd\u591f\u88ab\u5916\u90e8\u7f51\u7edc\u8bbf\u95ee\u3002\u53ef\u5728FW\u4e0a\u90e8\u7f72NAT Server\uff0c\u4ee5192.168.10.5\u8fd9\u53f0\u5185\u90e8\u670d\u52a1\u5668\u4e3a\u4f8b\uff0c\u5c06\u5176\u6620\u5c04\u5230\u5916\u90e8\u7f51\u7edcIP\u5730\u574010.1.1.11\uff0c \u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u7528\u6237\u80fd\u591f\u901a\u8fc7\u8bbf\u95ee\u8be5IP\u5730\u5740\uff0c\u4ece\u800c\u8bbf\u95ee192.168.10.5\u3002 \u6b64\u5904\u5047\u8bbeServer\u5904\u4e8eTrust\u5b89\u5168\u533a\u57df\uff0cExternal Network\u5904\u4e8eUntrust\u533a\u57df\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5f53\u5916\u90e8\u7f51\u7edc\u7528\u6237\uff08\u4f8b\u598210.1.1.2\uff09\u8bbf\u95ee10.1.1.11\uff08\u4f8b\u5982ping 10.1.1.11\uff09\u65f6\uff0c\u53ef\u4ee5\u5728FW\u4e0a \u770b\u5230\u5982\u4e0b\u4f1a\u8bdd\u8868\u9879\uff1a \u4ee5\u4e0a\u4e2d\u62ec\u53f7\u4e2d\u7684\u5730\u5740\uff0c\u5c31\u662f\u88abNAT\u8f6c\u6362\u540e\u7684\u76ee\u7684IP\u5730\u5740\u3002 NAT Server\u7684\u51e0\u79cd\u914d\u7f6e\u573a\u666f \u00b6 \u547d\u4ee4**nat server s1 zone untrust global 10.1.1.11 inside 192.168.10.5**\u7528\u4e8e\u521b\u5efa\u4e00\u4e2aNAT Server\uff0c\u540d\u79f0\u4e3a s1\uff08\u53ef\u81ea\u5b9a\u4e49\uff09\uff0c\u8be5\u547d\u4ee4\u5c06\u5185\u90e8IP\u5730\u5740192.168.10.5\u6620\u5c04\u5230\u5916\u90e8IP\u5730\u574010.1.1.11\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u5904\u4e8euntrust\u533a\u57df\u7684\u7528\u6237\u8bbf\u95ee\u76ee\u7684IP\u5730\u574010.1.1.11\u65f6\uff0c\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\u4f1a\u88ab\u8f6c\u6362\u6210192.168.10.5\u3002 NAT Server\u547d\u4ee4\u5b58\u5728\u591a\u79cd\u914d\u7f6e\u53d8\u5316\uff0c\u4e0d\u540c\u7684\u914d\u7f6e\u65b9\u5f0f\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u4e1a\u52a1\u573a\u666f\uff0c\u4ee5\u4e0b\u5c06\u5206\u522b\u8fdb\u884c\u8bf4\u660e\uff1a \u914d\u7f6e\u65b9\u5f0f\u4e00\uff1a \u00b6 [FW] nat server s1 global 200.1.1.100 inside 172.16.1.1 \u8fd9\u79cdNAT\u914d\u7f6e\u65b9\u5f0f\u76f8\u5f53\u4e8eIP\u4e00\u5bf9\u4e00\u6620\u5c04\uff0c\u4e5f\u5373\u5f53FW\u6536\u5230\u53d1\u5f80200.1.1.100\u7684\u62a5\u6587\uff08\u4efb\u610f\u76ee\u7684\u7aef\u53e3\u53f7\uff09\uff0c\u90fd\u4f1a \u5c06\u5176\u76ee\u7684\u5730\u5740\u8f6c\u6362\u6210172.16.1.1\u3002\u800c\u5f53\u9632\u706b\u5899\u6536\u5230Server\uff08172.16.1.1\uff09\u4e3b\u52a8\u53d1\u51fa\u7684\u3001\u8bbf\u95eeClient\u7684\u62a5\u6587\uff0c\u4e5f\u4f1a\u5c06\u6e90\u5730\u5740\u8f6c\u6362\u6210200.1.1.100\u3002\u6240\u4ee5\u91c7\u7528\u8fd9\u79cd\u914d\u7f6e\u65b9\u5f0f\uff0cInternet\u7528\u6237\u80fd\u591f\u8bbf\u95eeServer\uff0c\u800cServer\u4e5f\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eeInternet\u3002 \u914d\u7f6e\u65b9\u5f0f\u4e8c\uff1a \u00b6 [FW] nat server s2 zone untrust global 200.1.1.100 inside 172.16.1.1 \u5728\u201c\u914d\u7f6e\u65b9\u5f0f\u4e00\u201d\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e86**zone**\u5173\u952e\u5b57\u548c\u53c2\u6570**untrust**\uff0c\u5219\u8be5\u6761NAT Server\u53ea\u5411untrust\u533a\u57df\u4ea7\u751f\u4f5c\u7528\uff0c\u4e5f\u5c31\u662f\u53ea\u6709\u5728\u8be5\u533a\u57df\u7684\u63a5\u53e3\u4e0a\u6536\u5230\u7684\u62a5\u6587\uff0c\u624d\u4f1a\u8fdb\u884c\u76ee\u7684\u5730\u5740\u8f6c\u6362\u3002 \u914d\u7f6e\u65b9\u5f0f\u4e09\uff1a \u00b6 [FW] nat server s3 zone untrust protocol tcp global 200.1.1.200 22323 inside 172.16.1.1 8080 \u589e\u52a0\u4e86**protocol**\u5173\u952e\u5b57\u53ca**tcp**\u53c2\u6570\uff0c\u5219\u5f53FW\u5728\u5176untrust\u63a5\u53e3\u6536\u5230\u53d1\u5f80200.1.1.200:22323\u7684TCP\u62a5\u6587\u65f6\uff0cFW \u4f1a\u5c06\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\u8f6c\u6362\u6210172.16.1.1\u3001\u5c06\u76ee\u7684TCP\u7aef\u53e3\u53f7\u8f6c\u6362\u62108080\u3002 \u914d\u7f6e\u65b9\u5f0f\u56db\uff1a \u00b6 \u591a\u4e2a\u4e0d\u540c\u5185\u90e8\u670d\u52a1\u5668\uff08\u5982\u4e0a\u56fe\u4e2d\u7684Server1\u3001Server2\uff09\u4f7f\u7528\u4e00\u4e2a\u516c\u7f51IP\u5730\u5740\u5bf9\u5916\u53d1\u5e03\u65f6\uff0c\u53ef\u4ee5\u591a\u6b21\u4f7f\u7528nat server\u547d\u4ee4\u5bf9\u5176\u8fdb\u884c\u914d\u7f6e\uff0c\u4f46\u662fglobal-port\uff08\u4ee5\u4e0a\u914d\u7f6e\u4e2d\u6807\u8bb0\u7ea2\u8272\u7684\u53c2\u6570\uff09\u4e0d\u80fd\u76f8\u540c\u3002\u5982\u6b64\u4e00\u6765Client\u8bbf\u95ee 200.1.1.200:21111\u65f6\uff0c\u5b9e\u9645\u8bbf\u95ee\u7684\u5c31\u662fServer1\uff0c\u800c\u8bbf\u95ee200.1.1.200:21112\u65f6\uff0c\u5b9e\u9645\u8bbf\u95ee\u7684\u5c31\u662fServer2\u3002 \u914d\u7f6e\u65b9\u5f0f\u4e94\uff1a \u00b6 \u5bf9\u4e8e\u540c\u4e00\u4e2a\u5185\u90e8\u670d\u52a1\u5668\u53d1\u5e03\u591a\u4e2a\u516c\u7f51IP\u4f9b\u5916\u90e8\u7f51\u7edc\u8bbf\u95ee\u7684\u573a\u666f\uff0c\u5982\u679c\u4e0d\u540c\u516c\u7f51IP\u6240\u5728\u7684\u94fe\u8def\u89c4\u5212\u5728\u4e0d\u540c\u7684\u5b89\u5168\u533a\u57df\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u9488\u5bf9\u4e0d\u540c\u7684\u5b89\u5168\u533a\u57df\u53d1\u5e03\u4e0d\u540c\u7684\u516c\u7f51IP\u7684NAT Server\u6765\u5b9e\u73b0\u3002 \u914d\u7f6e\u65b9\u5f0f\u516d\uff1a \u00b6 \u5bf9\u4e8e\u540c\u4e00\u4e2a\u5185\u90e8\u670d\u52a1\u5668\u53d1\u5e03\u591a\u4e2a\u516c\u7f51IP\u4f9b\u5916\u90e8\u7f51\u7edc\u8bbf\u95ee\u7684\u573a\u666f\uff0c\u5982\u679c\u4e0d\u540c\u516c\u7f51IP\u6240\u5728\u7684\u94fe\u8def\u89c4\u5212\u5728\u540c\u4e00\u4e2a\u5b89\u5168\u533a\u57df\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6307\u5b9a**no-reverse**\u53c2\u6570\u7684NAT Server\u6765\u5b9e\u73b0\u3002\u6307\u5b9a**no-reverse**\u53c2\u6570\u540e\uff0c\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2aglobal\u5730\u5740\u548c\u540c\u4e00\u4e2ainside\u5730\u5740\u5efa\u7acb\u6620\u5c04\u5173\u7cfb\u3002 \u6307\u5b9a**no-reverse**\u53c2\u6570\u540e\uff0c\u5185\u90e8\u670d\u52a1\u5668\u4e3b\u52a8\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u8bbe\u5907\u65e0\u6cd5\u5c06\u5185\u90e8\u670d\u52a1\u5668\u7684\u79c1\u7f51\u5730\u5740\u8f6c\u6362\u6210\u516c\u7f51\u5730\u5740\uff0c\u5185\u90e8\u670d\u52a1\u5668\u4e5f\u5c31\u65e0\u6cd5\u4e3b\u52a8\u5411\u5916\u53d1\u8d77\u8fde\u63a5\u3002\u56e0\u6b64\uff0c\u901a\u8fc7\u6307\u5b9a**no-reverse**\u53c2\u6570\u53ef\u4ee5\u7981\u6b62\u5185\u90e8\u670d\u52a1\u5668\u4e3b\u52a8\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002\u7531\u4e8e\u914d\u7f6e\u4e86**no-reverse**\u53c2\u6570\uff0c\u5185\u90e8\u670d\u52a1\u5668\u5c06\u65e0\u6cd5\u4e3b\u52a8\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002\u6b64\u65f6\uff0c\u5982\u679c\u5185\u90e8\u670d\u52a1\u5668\u60f3\u8981\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff0c\u9700\u8981\u5728\u5185\u90e8\u670d\u52a1\u5668\u6240\u5728\u533a\u57df\u548c\u5916\u90e8\u7f51\u7edc\u6240\u5728\u533a\u57df\u7684\u57df\u95f4\u914d\u7f6e\u6e90NAT\u7b56\u7565\uff0c\u5c06\u670d\u52a1\u5668\u7684\u79c1\u7f51\u5730\u5740\u8f6c\u6362\u4e3a\u516c\u7f51\u5730\u5740\u3002\u6e90NAT\u7b56\u7565\u4e2d\u5f15\u7528\u7684\u5730\u5740\u6c60\u53ef\u4ee5\u662fglobal\u5730\u5740\u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\u7684\u516c\u7f51\u5730\u5740\u3002 \u5185\u7f51PC\u901a\u8fc7NAT server\u516c\u7f51\u5730\u5740\u8bbf\u95ee\u5185\u90e8\u670d\u52a1\u5668 \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0cPC-Station\u53caServer\u540c\u5c5e\u4e00\u4e2aLAN\uff0c\u7f51\u5173\u90fd\u5728\u9632\u706b\u5899FW\u7684GE0/0/1\u53e3\u4e0a\uff0c\u90fd\u5c5e\u4e8etrust \u533a\u57df\u3002\u4e3a\u4e86\u8ba9Internet\u7528\u6237\uff08\u5728\u56fe\u4e2d\u5e76\u672a\u753b\u51fa\uff09\u80fd\u591f\u8bbf\u95eeServer\uff0cFW\u4e0a\u90e8\u7f72\u4e86Nat Server\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a nat server s1 global 200.1.1.100 inside 192.168.1.100 \uff0c\u4e5f\u5c31\u662f\u5c06\u516c\u7f51\u5730\u5740200.1.1.100\u6620\u5c04\u5230192.168.1.100\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cInternet\u7528\u6237\u80fd\u591f\u901a\u8fc7200.1.1.100\u8fd9\u4e2a\u516c\u7f51IP\u8bbf\u95eeServer\u3002\u4f46\u662f\u5185\u7f51\u7684PC-Station\u5728\u8bbf\u95ee Server\u7684\u65f6\u5019\uff0c\u5374\u5b58\u5728\u4e00\u70b9\u95ee\u9898\uff1aPC-Station\u901a\u8fc7\u76ee\u7684\u79c1\u7f51IP\u5730\u5740192.168.1.100\u80fd\u591f\u8bbf\u95eeServer\u7684Web\u670d\u52a1\uff0c\u4f46\u662f\u5f53PC-Station\u4f7f\u7528\u8be5\u670d\u52a1\u5668\u6620\u5c04\u540e\u7684\u516c\u7f51\u5730\u5740200.1.1.100\u8bd5\u56fe\u8bbf\u95eeServer\u7684\u65f6\u5019\uff0c\u5374\u53d1\u73b0\u59cb\u7ec8\u65e0\u6cd5\u6210\u529f\u3002\u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0bPC-Station\u4f7f\u7528\u516c\u7f51\u5730\u5740\u8bbf\u95eeServer\u7684\u8fc7\u7a0b\uff1a PC-Station\u53bb\u8bbf\u95ee\u5730\u5740200.1.1.100\uff0c \u9996\u5148\u8981\u5efa\u7acbTCP\u4e09\u6b21\u63e1\u624b\uff0c TCP\u63e1\u624b\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u4e3a 192.168.1.1\uff0c\u76ee\u7684\u5730\u5740\u4e3a200.1.1.100\uff0c\u6570\u636e\u5305\u88ab\u9001\u5230\u7f51\u5173\u9632\u706b\u5899\u3002 \u7531\u4e8e\u9632\u706b\u5899\u90e8\u7f72\u4e86NAT server\uff0c\u56e0\u6b64\u5b83\u5c06\u6570\u636e\u5305\u7684\u76ee\u7684IP 200.1.1.100\u8f6c\u6362\u6210192.168.1.100\uff0c\u7136\u540e \u67e5\u627e\u8def\u7531\u8868\uff0c\u53d1\u73b0\u76ee\u7684\u7f51\u7edc192.168.1.0/24\u5c31\u662fGE0/0/1\u53e3\u76f4\u8fde\u3002 \u9632\u706b\u5899\u5c06\u5730\u5740\u8f6c\u6362\u540e\u7684\u6570\u636e\u5305\u53d1\u5411Server\u3002 Server\u6536\u5230\u6570\u636e\u5305\u540e\uff0c\u5f97\u56de\u5305\u5427\uff0c\u7531\u4e8eWeb Servre\u6536\u5230\u7684\u8fd9\u4e2a\u6570\u636e\u5305\u6e90\u5730\u5740\u4e3a192.168.1.1\uff0c\u56e0\u6b64\u5b83\u5728\u4ea7\u751f\u56de\u7a0b\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u56de\u7a0b\u6570\u636e\u5305\u7684\u76ee\u7684\u5730\u5740\u5c31\u662f192.168.1.1\uff0c\u800c192.168.1.1\u53c8\u662f\u672c\u5730\u76f4\u8fde\u7f51\u7edc\u5185\u7684\u8282\u70b9IP\uff0c\u56e0\u6b64Web Server\u76f4\u63a5\u5c06\u8fd9\u4e2a\u6e90\u4e3a192.168.1.100\uff0c\u76ee\u7684\u5730\u5740\u4e3a192.168.1.1\u7684\u6570\u636e\u5305\u53d1\u9001\u7ed9\u4e86PC-Station\uff0c\u800c\u4e0d\u4f1a\u518d\u7ed5\u56deFW\u3002 PC\u5728\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u6570\u636e\u5305\u7684\u6e90\u5730\u5740\u662f192.168.1.100\uff0c\u8fd9\u4e2a\u5730\u5740\u662f\u54ea\u91cc\u5192\u51fa\u6765\u7684\uff1f \u5b83\u7b49\u5019\u7684\u662f200.1.1.100\u7684\u56de\u7a0b\u62a5\u6587\uff0c\u53ef\u662f\u73b0\u5728\u5374\u6536\u5230\u4e86192.168.1.100\u7684\u6570\u636e\u5305\uff0c\u4e8e\u662f\u5b83\u5c06\u8be5\u62a5\u6587\u4e22\u5f03\u3002 \u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\uff0cPC\u65e0\u6cd5\u901a\u8fc7\u670d\u52a1\u5668\u7684NAT server\u6620\u5c04\u7684\u516c\u7f51IP\u6765\u8bbf\u95ee\u670d\u52a1\u5668\u7684\u539f\u56e0\u3002\u6570\u636e\u5305\u6ca1\u6709\u7ed5\u56deFW\uff0c \u5bfc\u81f4PC\u6536\u5230\u7684\u56de\u7a0b\u6570\u636e\u5305\u7684\u6e90\u5730\u5740\u6ca1\u6709\u88ab\u6b63\u786e\u8f6c\u6362\uff0c\u4ece\u800c\u5bfc\u81f4TCP\u4e09\u6b21\u63e1\u624b\u4e0d\u6210\u529f\u3002\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5c31\u9700\u8981\u8ba9\u56de\u7a0b\u7684\u6d41\u91cf\u80fd\u591f\u56de\u5230FW\uff0c\u7136\u540e\u8ba9FW\u5c06\u6e90\u5730\u5740\u8f6c\u6362\u6210200.1.1.100\u518d\u53d1\u7ed9PC\u3002 \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5728FW\u4e0a\u4e3aPC\u521b\u5efa\u4e00\u4e2aNAT\u6c60\uff0c\u7136\u540e\u90e8\u7f72trust\u5b89\u5168\u57df\u5185\u7684\u6e90\u5730\u5740\u8f6c\u6362\u5373\u53ef\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u518d\u5206\u6790\u4e00\u4e0b\u6570\u636e\u5305\u4ea4\u4e92\u7684\u8fc7\u7a0b\uff1a PC\u8bd5\u56fe\u8bbf\u95ee200.1.1.100\uff0c\u9996\u5148\u8981\u5efa\u7acbTCP\u4e09\u6b21\u63e1\u624b\uff0cTCP\u63e1\u624b\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u4e3a192.168.1.1\uff0c\u76ee\u7684\u5730\u5740\u4e3a200.1.1.100\uff0c\u6570\u636e\u5305\u88ab\u9001\u5230\u7f51\u5173\u9632\u706b\u5899\u3002 \u7531\u4e8e\u9632\u706b\u5899\u90e8\u7f72\u4e86NAT Server\u4ee5\u53ca\u6e90\u5730\u5740\u8f6c\u6362\uff0c\u56e0\u6b64\u5b83\u5c06\u6570\u636e\u5305\u7684\u6e90IP\u5730\u5740192.168.1.1\u8f6c\u6362\u6210 200.1.1.10\uff0c\u76ee\u7684IP\u5730\u5740200.1.1.100\u8f6c\u6362\u6210192.168.1.100\u3002 \u9632\u706b\u5899\u5c06\u5730\u5740\u8f6c\u6362\u540e\u7684\u6570\u636e\u5305\u53d1\u5411Server\uff1a \u670d\u52a1\u5668\u6536\u5230\u6570\u636e\u5305\u540e\u8981\u53d1\u56de\u7a0b\u62a5\u6587\uff0c\u56de\u7a0b\u62a5\u6587\u7684\u6e90\u5730\u5740\u4e3a192.168.1.100\uff0c\u76ee\u7684\u5730\u5740\u4e3a200.1.1.10\uff0c \u8fd9\u4e2a\u6570\u636e\u5305\u88ab\u53d1\u5411\u4e86Server\u7684\u7f51\u5173192.168.1.254\uff0c\u4e5f\u5c31\u662f\u9632\u706b\u5899\u3002 \u9632\u706b\u5899\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u540e\uff0c\u7531\u4e8e\u672c\u5730\u5df2\u7ecf\u6709\u4e86NAT \u7684\u6620\u5c04\u6761\u76ee\uff0c \u56e0\u6b64\u5c06\u6570\u636e\u5305\u7684\u6e90\u5730\u5740 192.168.1.100\u66ff\u6362\u6210200.1.1.100\uff0c\u5c06\u76ee\u7684\u5730\u5740200.1.1.10\u66ff\u6362\u6210192.168.1.1\u3002 FW\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u7ed9PC\u3002 PC\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u540e\uff0c\u53d1\u73b0\u6b63\u662f\u81ea\u5df1\u671f\u5f85\u7684200.1.1.100\u7684\u56de\u5305\uff0c\u56e0\u6b64TCP\u4e09\u6b21\u63e1\u624b\u6210\u529f\u3002 7.3.4 NAT \u5728\u8def\u7531\u5668\u4e0a\u7684\u90e8\u7f72 7.3.4.1 \u9759\u6001NAT\u6620\u5c04 \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cOR\u662f\u51fa\u53e3\u8def\u7531\u5668\uff0c\u5b83\u8fde\u63a5\u7740\u5185\u7f51PC\u53caInternet\u3002\u73b0\u5728\u5185\u7f51\u7684PC\u9700\u8981\u8bbf\u95eeInternet\uff0c\u5728OR\u4e0a\u90e8\u7f72\u9759\u6001\u4e00\u5bf9\u4e00IP\u6620\u5c04\u4f7f\u5f97PC\u80fd\u591f\u8bbf\u95ee\u5916\u7f51\uff0c\u5206\u914d\u7ed9\u5185\u7f51PC 192.168.1.1 \u7684\u516c\u7f51\u5730\u5740\u662f200.1.1.100\u3002 OR\u8def\u7531\u5668\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\uff09\uff1a \u4e0a\u8ff0\u914d\u7f6e\u4e2d\uff0c**nat static global 200.1.1.100 inside 192.168.1.1**\u547d\u4ee4\u5373\u914d\u7f6e\u9759\u6001NAT\u6620\u5c04\uff0c\u5c06\u5185\u7f51IP\u5730\u5740 192.168.1.1\u6620\u5c04\u5230200.1.1.100\u3002\u5982\u6b64\u4e00\u6765\uff0c\u5f53\u6e90IP\u5730\u5740\u4e3a192.168.1.1\u7684\u62a5\u6587\u51c6\u5907\u4eceOR\u7684GE0/0/1\u63a5\u53e3\u53d1\u9001\u51fa\u53bb\u65f6\uff0c\u8def\u7531\u5668\u5c06\u8be5\u5730\u5740\u8f6c\u6362\u6210200.1.1.100\u3002\u53e6\u5916\uff0c\u5f53\u76ee\u7684IP\u5730\u5740\u4e3a200.1.1.100\u7684\u62a5\u6587\u5230\u8fbeOR\u8def\u7531\u5668\u7684 GE0/0/1\u63a5\u53e3\u65f6\uff0c\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\u4f1a\u88ab\u8f6c\u6362\u6210192.168.1.1\u3002 \u57fa\u4e8e\u52a8\u6001\u5730\u5740\u6c60\u7684No-PAT \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cOR\u662f\u51fa\u53e3\u8def\u7531\u5668\uff0c\u5b83\u8fde\u63a5\u7740\u5185\u7f51PC\u53caInternet\u3002\u73b0\u5728\u5185\u7f51192.168.1.0/24\u7f51\u6bb5\u7684\u7528\u6237\u9700\u8981\u8bbf\u95ee Internet\uff0c\u8be5\u7f51\u7edc\u4ece\u8fd0\u8425\u5546\u7533\u8bf7\u5230\u7684\u516c\u7f51\u5730\u5740\u533a\u95f4\u662f200.1.1.100 \u2013 200.1.1.116\uff0c\u5b8c\u6210\u57fa\u4e8e\u5730\u5740\u6c60\u7684No-PAT \u914d\u7f6e\uff0c\u4f7f\u5f97\u5185\u7f51\u7528\u6237\u80fd\u591f\u8bbf\u95eeInternet\u3002 OR\u8def\u7531\u5668\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\uff09\uff1a \u57fa\u4e8e\u52a8\u6001\u5730\u5740\u6c60\u7684NAPT \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cOR\u662f\u51fa\u53e3\u8def\u7531\u5668\uff0c\u5b83\u8fde\u63a5\u7740\u5185\u7f51PC\u53caInternet\u3002\u73b0\u5728\u5185\u7f51192.168.1.0/24\u7f51\u6bb5\u7684\u7528\u6237\u9700\u8981\u8bbf\u95ee Internet\uff0c\u8be5\u7f51\u7edc\u4ece\u8fd0\u8425\u5546\u7533\u8bf7\u5230\u7684\u516c\u7f51\u5730\u5740\u533a\u95f4\u662f200.1.1.100 \u2013 200.1.1.105\uff0c\u5b8c\u6210\u57fa\u4e8e\u5730\u5740\u6c60\u7684NAPT\u914d\u7f6e\uff0c\u4f7f\u5f97\u5185\u7f51\u7528\u6237\u80fd\u591f\u8bbf\u95eeInternet\u3002 OR\u51fa\u53e3\u8def\u7531\u5668\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\uff09\uff1a \u6e90\u5730\u5740\u8f6c\u6362\u4e2d\uff0cNAPT\u7684\u914d\u7f6e\u4e0eNo-PAT\u7684\u914d\u7f6e\u5dee\u5f02\u5f88\u5c0f\uff0c\u9700\u8981\u683c\u5916\u7559\u610f\u3002\u4e00\u822c\u5728\u9879\u76ee\u4e2d\u4f7f\u7528NAPT\u7684\u65b9\u5f0f\u8f83 \u591a\uff0c\u6bd5\u7adf\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u591a\u4e2a\u79c1\u7f51IP\u5730\u5740\u5171\u7528\u4e00\u4e2a\u516c\u7f51IP\u5730\u5740\u7684\u9700\u6c42\u3002 NAT Server \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cOR\u662f\u51fa\u53e3\u8def\u7531\u5668\uff0c\u5b83\u8fde\u63a5\u7740\u5185\u7f51Server\u53caInternet\u3002\u5185\u7f51\u6709\u4e00\u53f0WEB\u670d\u52a1\u5668192.168.1.100\uff0c\u5176 TCP80\u7aef\u53e3\u9700\u8981\u9762\u5411Internet\u63d0\u4f9b\u670d\u52a1\uff0c\u8be5\u7f51\u7edc\u4ece\u8fd0\u8425\u5546\u7533\u8bf7\u5230\u7684\u516c\u7f51\u5730\u5740\u662f200.1.1.30\uff0c\u5728\u8def\u7531\u5668\u4e0a\u5b8c\u6210NAT Server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97Internet\u7528\u6237\u80fd\u591f\u901a\u8fc7\u8bbf\u95ee200.1.1.30\uff1a8080\uff0c\u4ece\u800c\u8bbf\u95ee192.168.1.100\uff1a80\u3002 OR\u8def\u7531\u5668\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\uff09\uff1a \u9632\u706b\u5899\u53cc\u673a\u70ed\u5907 \u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u6982\u8ff0 \u6280\u672f\u80cc\u666f \u00b6 \u4e0a\u56fe\u662f\u4e00\u4e2a\u5178\u578b\u7684\u7ec4\u7f51\u73af\u5883\u3002\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u5982\u679c\u6ca1\u6709\u53cc\u673a\u70ed\u5907\u6280\u672f\uff0c\u7f51\u7edc\u4e2d\u53ef\u80fd\u4f1a\u5b58\u5728\u4ec0\u4e48\u95ee\u9898\u3002 \u9996\u5148\u4e24\u53f0\u9632\u706b\u5899\uff08NGFW1\u548cNGFW2\uff09\u662f\u72ec\u7acb\u7684\u7f51\u7edc\u8bbe\u5907\uff0c\u9700\u8981\u72ec\u7acb\u914d\u7f6e\u53ca\u7ba1\u7406\uff0c\u5305\u62ec\u5b89\u5168\u7b56\u7565\u3001\u5bf9\u8c61\u3001NAT\u7b56\u7565\u3001\u5730\u5740\u6c60\u7b49\u90fd\u9700\u8981\u5206\u522b\u8fdb\u884c\u914d\u7f6e\uff0c\u65e0\u6cd5\u540c\u6b65\u3002\u6b64\u5916\uff0c\u672c\u573a\u666f\u4e2d\u53ef\u80fd\u90e8\u7f72\u4e86VRRP\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u7f51\u7edc\u4e2d\u5b58\u57282\u4e2aVRRP\u7ec4\uff0c\u5206\u522b\u7528\u4e8e\u4e0a\u884c\u548c\u4e0b\u884c\uff0c\u8fd9\u4e24\u4e2aVRRP\u7ec4\u7684\u72b6\u6001\u662f\u72ec\u7acb\u7684\u3002\u4e0b\u884c\u7684\u8bbe\u5907 \uff08SW1/SW2\uff09\u5c06\u5230\u8fbePublic\u7684\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u6307\u5411VRRP VRID1\u7684\u865a\u62dfIP\u5730\u5740192.168.1.1\uff0c\u800c\u4e0a\u884c\u7684\u8bbe\u5907\uff08C1/C2\uff09\u5219\u5c06\u5230\u8fbePrivate\u7684\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u6307\u541110.1.1.1\u3002 \u5f53\u8fd9\u4e24\u4e2aVRRP\u7ec4\u7684\u72b6\u6001\u4e00\u81f4\u65f6\uff08\u4f8b\u5982\u4e3b\u8bbe\u5907\u90fd\u4e3aNGFW1\u3001\u5907\u8bbe\u5907\u90fd\u4e3aNGFW2\uff09\uff0c\u4e0a\u3001\u4e0b\u884c\u7684\u6570\u636e\u8f6c\u53d1\u662f\u4e0d\u4f1a\u6709\u95ee\u9898\u7684\u3002\u5728NGFW1\u9996\u6b21\u6536\u5230\u4e00\u4e2a\u4e0a\u884c\u6d41\u91cf\u7684\u62a5\u6587\u65f6\uff0c\u5b83\u4f1a\u4e3a\u8fd9\u4e2a\u6d41\u91cf\u521b\u5efa\u4e00\u4e2a\u4f1a\u8bdd\u8868\u9879\uff0c \u5f53\u56de\u7a0b\u7684\u62a5\u6587\u53d1\u9001\u5230NGFW1\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u6d41\u91cf\u547d\u4e2d\u4e86\u4f1a\u8bdd\u8868\u9879\uff0c\u56e0\u6b64\u88ab\u653e\u884c\uff0c\u8fd9\u6837\uff0c\u6570\u636e\u7684\u901a\u4fe1\u662f\u6ca1\u6709\u95ee\u9898\u7684\u3002 \u7136\u800c\u5982\u679c\u6d41\u91cf\u7684\u5f80\u8fd4\u8def\u5f84\u4e0d\u4e00\u81f4\u7684\u8bdd\uff0c\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\u4e86\u3002\u9632\u706b\u5899\u662f\u57fa\u4e8e\u4f1a\u8bdd\u8868\u8fdb\u884c\u62a5\u6587\u68c0\u6d4b\u7684\uff0cNGFW2\u6ca1\u6709\u6536\u5230\u4e0a\u884c\u6d41\u91cf\u7684\u8bdd\uff0c\u5c31\u4e0d\u4f1a\u5efa\u7acb\u76f8\u5173\u4f1a\u8bdd\u8868\u9879\uff0c\u6b64\u65f6\u5f53\u5b83\u6536\u5230\u56de\u7a0b\u6d41\u91cf\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u6ca1\u6709\u4efb\u4f55\u5339\u914d\u7684\u4f1a\u8bdd\u8868\u9879\uff0c\u56e0\u6b64\u8fd9\u4e9b\u6d41\u91cf\u6700\u7ec8\u5c06\u88ab\u4e22\u5f03\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86\u65ad\u7f51\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u9020\u6210\u8fd9\u79cd\u73b0\u8c61\u7684\u5178\u578b\u95ee\u9898\u662fVRRP\u7ec4\u7684\u72b6\u6001\u4e0d\u4e00\u81f4\uff0c\u4f8b\u5982VRRP VRID1\u7684\u4e3b\u8bbe\u5907\u4e3aNGFW1\uff0c\u800cVRRP VRID100\u7684\u4e3b\u8bbe\u5907\u5374\u4e3aNGFW2\u3002\u4e4b\u6240\u4ee5\u4f1a\u6709\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u6839\u56e0\u662f\u4e24\u53f0\u9632\u706b\u5899\u5e76\u975e\u4e00\u4e2a\u7edf\u4e00\u7684\u7cfb\u7edf\uff0c\u8fdb\u800c\u4e24\u7ec4VRRP\u4e92\u76f8\u72ec\u7acb\uff0c\u65e0\u6cd5\u534f\u540c\u914d\u5408\u3002 \u53cc\u673a\u70ed\u5907\u4e3b\u8981\u529f\u80fd\u7ec4\u4ef6 \u00b6 \u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u57fa\u7840 VRRP \u00b6 VRRP\uff08Virtual Router Redundancy Protocol\uff0c\u865a\u62df\u8def\u7531\u5668\u5197\u4f59\u534f\u8bae\uff09\u662f\u4e00\u79cd\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\u7684\u7f51\u5173\u5c42\u5197\u4f59\u534f\u8bae\uff0c\u9002\u7528\u4e8e\u652f\u6301\u7ec4\u64ad\u6216\u5e7f\u64ad\u7684\u5c40\u57df\u7f51\uff08\u5982\u4ee5\u592a\u7f51\u7b49\uff09\u3002\u5982\u9700\u6df1\u5165\u4e86\u89e3VRRP\u7684\u5de5\u4f5c\u539f\u7406\uff0c\u53ef\u67e5\u9605\u672c\u624b\u518c\u7684\u201cVRRP\u201d\u4e00\u7ae0\u3002\u4e0b\u9762\u5148\u7b80\u5355\u5730\u770b\u770b\uff0c\u5728\u9632\u706b\u5899\u53cc\u673a\u7ec4\u7f51\u7684\u573a\u666f\u4e0b\uff0c\u53ea\u90e8\u7f72VRRP\u7684\u8bdd\uff0c\u4f1a\u5b58\u5728\u4ec0\u4e48\u95ee\u9898\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u5728\u9632\u706b\u5899\u4e0a\u90e8\u7f72\u4e86VRRP\u3002\u9632\u706b\u5899NGFW1\u7684GE1/0/1\u53e3\u3001NGFW2\u7684GE1/0/1\u53e3\u7ec4\u6210\u4e86\u4e00\u4e2aVRRP\u7ec4\uff0c\u8fd9\u4e2aVRRP\u7ec4\u5c06\u4ea7\u751f\u4e00\u53f0\u865a\u62df\u8bbe\u5907\uff0c\u5176\u865a\u62dfIP\u5730\u5740\u4e3a192.168.1.1\u3002\u5728\u8be5VRRP\u7ec4\u4e2d\uff0c NGFW1\u5145\u5f53Active\uff08\u4e3b\uff09\u8bbe\u5907\uff0c\u627f\u62c5\u62a5\u6587\u8f6c\u53d1\u7684\u4efb\u52a1\uff0c\u540c\u65f6\u54cd\u5e94\u5185\u7f51PC\u5173\u4e8e192.168.1.1\u7684ARP\u8bf7\u6c42\uff1b \u5728\u8be5VRRP\u7ec4\u4e2d\uff0cNGFW2\u5145\u5f53Standby\uff08\u5907\u4efd\uff09\u8bbe\u5907\uff0c\u5b83\u4f1a\u4fa6\u542cNGFW1\u7684VRRP\u62a5\u6587\u4ee5\u4fbf\u786e\u8ba4NGFW1 \u7684\u6d3b\u8dc3\u72b6\u6001\uff0c\u5e76\u4e14\u51c6\u5907\u968f\u65f6\u63a5\u66ff\u5b83\u7684\u5de5\u4f5c\u6210\u4e3aActive\u3002 \u9632\u706b\u5899\u7684VRRP\u534f\u8bae\u6a21\u5757\u76d1\u89c6\u901a\u4fe1\u63a5\u53e3\u72b6\u6001\uff0c\u5e76\u901a\u8fc7\u7ec4\u64ad\u65b9\u5f0f\u5411Backup\u9632\u706b\u5899\u53d1\u9001\u901a\u544a\u62a5\u6587\u3002\u5982\u679c Active\u9632\u706b\u5899\u7684\u63a5\u53e3\u6216\u94fe\u8def\u51fa\u73b0\u6545\u969c\uff0c\u65e0\u6cd5\u6b63\u5e38\u53d1\u9001VRRP\u901a\u544a\u62a5\u6587\uff0c\u5bfc\u81f4Backup\u8bbe\u5907\u5728\u6307\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u6536\u5230VRRP\u901a\u544a\u62a5\u6587\uff0cVRRP\u534f\u8bae\u5c31\u4f1a\u628aBackup\u9632\u706b\u5899\u7684VRRP\u72b6\u6001\u53d8\u6210active\uff0c\u4ece\u800c\u5c06\u76f8\u5173\u901a\u4fe1\u5207\u6362\u5230\u65b0\u7684Active\u9632\u706b\u5899NGFW2\u4e0a\u3002\u56e0\u6b64\uff0c\u91c7\u7528VRRP\u6280\u672f\u5b9e\u73b0\u4e86\u5185\u90e8\u7f51\u7edc\u4e2d\u7684\u4e3b\u673a\u4e0d\u95f4\u65ad\u5730\u4e0e\u5916\u90e8\u7f51 \u7edc\u8fdb\u884c\u901a\u4fe1\uff0c\u53ef\u9760\u6027\u5f97\u5230\u4fdd\u8bc1\u3002\u5bf9\u4e8e\u53e6\u4e00\u7ec4VRRP\uff1aVRID100\uff0c\u539f\u7406\u76f8\u540c\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002 \u6211\u4eec\u53ef\u4ee5\u5728\u540c\u4e00\u53f0\u8bbe\u5907\u4e0a\u90e8\u7f72\u591a\u4e2aVRRP\u7ec4\uff0c\u4f8b\u5982\u4e0b\u56fe\u4e2d\uff0cNGFW1\u7684GE1/0/1\u53e3\u53caNGFW2\u7684GE1/0/1 \u53e3\u52a0\u5165\u4e86\u4e00\u4e2aVRRP\u7ec4\uff0c\u865a\u62dfIP\u4e3a192.168.1.1\uff0cNGFW1\u7684GE1/0/1\u53e3\u4e3aVRRP\u7684Active\uff0c\u8fd9\u7ec4VRRP\u7528\u6765\u5b9e\u73b0\u5185\u7f51PC\u7684\u7f51\u5173\u5197\u4f59\uff1b\u53e6\u5916NGFW1\u7684GE1/0/3\u53e3\u53caNGFW2\u7684GE1/0/3\u53e3\u8fd0\u884c\u4e86\u53e6\u4e00\u7ec4VRRP\uff0c\u865a\u62dfIP\u4e3a10.1.1.1\uff0cNGFW1\u7684GE1/0/3\u53e3\u4e3aActive\u3002 \u8fd9\u7ec4VRRP\u7528\u6765\u4e0eInternet\u5bf9\u63a5\u3002 \u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0b\u6570\u636e\u4f20\u8f93\u7684\u8fc7\u7a0b\uff1a \u73b0\u5728PC\u8981\u8bbf\u95eeInternet\u3002\u6570\u636e\u5305\u53d1\u9001\u7ed9\u81ea\u5df1\u7684\u7f51\u5173192.168.1.1\u3002192.168.1.1\u662fVRRP\u7ec41\u7684\u865a\u62dfIP \u5730\u5740\uff0c\u800c\u6b64\u523bNGFW1\u7684GE1/0/1\u53e3\u662f\u8be5VRRP\u7ec4\u7684Active\uff0c\u56e0\u6b64\u6570\u636e\u5305\u7531NGFW1\u8fdb\u884c\u5904\u7406\u548c\u8f6c\u53d1\u3002 \u7531\u4e8e\u8fd9\u662f\u6b64\u6570\u636e\u6d41\u7684\u9996\u4e2a\u62a5\u6587\uff0c\u56e0\u6b64NGFW1\u5efa\u7acb\u4f1a\u8bdd\u8868\u9879\uff0c\u5e76\u5c06\u6570\u636e\u5305\u901a\u8fc7\u4e0a\u884c\u7ebf\u8def\u9001\u5230Internet\u3002 Internet\u56de\u7a0b\u7684\u6570\u636e\u5305\u53d1\u541110.1.1.1\u8fd9\u4e2a\u5730\u5740\uff0c\u8fd9\u662fVRRP\u7ec4100\u7684\u865a\u62dfIP\u5730\u5740\uff0c\u800c\u6b64\u523bNGFW1\u7684 GE1/0/3\u53e3\u4e3aActive\uff0c\u56e0\u6b64\u6570\u636e\u5305\u53d1\u7ed9\u4e86NGFW1\u3002 NGFW1\u6536\u5230\u6570\u636e\u5305\u540e\uff0c\u53d1\u73b0\u6570\u636e\u5305\u5728\u4f1a\u8bdd\u8868\u4e2d\u6709\u5339\u914d\u7684\u8868\u9879\uff0c\u56e0\u6b64\u653e\u884c\u8fd9\u4e9b\u56de\u7a0b\u62a5\u6587\uff0c\u6700\u7ec8PC\u6536\u5230\u56de\u7a0b\u7684\u6570\u636e\u5305\uff0c\u6570\u636e\u4ea4\u4e92\u5b8c\u6210\uff0c\u901a\u4fe1\u6ca1\u6709\u95ee\u9898\u3002 \u7136\u800c\uff0c\u7531\u4e8e\u8fd9\u4e2a\u73af\u5883\u4e2d\uff0cVRRP\u7ec41\u53caVRRP\u7ec4100\u662f\u76f8\u4e92\u72ec\u7acb\u7684\uff0c\u90a3\u4e48\u5c31\u6709\u53ef\u80fd\u51fa\u73b0\u4e0b\u56fe\u6240\u793a\u7684\u60c5\u51b5\uff0c \u4e5f\u5373VRRP\u7ec41\u4e2dNGFW1\u7684GE1/0/1\u53e3\u4e3aActive\uff1b\u800cVRRP\u7ec4100\u4e2dNGFW2\u7684GE1/0/3\u53e3\u4e3aActive\u3002\u8fd9\u6837\u4f1a\u4ea7\u751f\u4ec0\u4e48\u95ee\u9898\u5462\uff1f PC\u8981\u8bbf\u95eeInternet\uff0c\u6570\u636e\u5305\u53d1\u9001\u7ed9\u81ea\u5df1\u7684\u7f51\u5173192.168.1.1\uff0c\u7531NGFW1\u8fdb\u884c\u5904\u7406\u548c\u8f6c\u53d1\u3002 NGFW1\u5efa\u7acb\u4f1a\u8bdd\u8868\u9879\uff0c\u5e76\u5c06\u6570\u636e\u5305\u901a\u8fc7\u4e0a\u884c\u7ebf\u8def\u9001\u5230Internet\u3002 \u56de\u7a0b\u7684\u6570\u636e\u5305\u53d1\u541110.1.1.1\uff0c\u8fd9\u662fVRRP\u7ec4100\u7684\u865a\u62dfIP\u5730\u5740\uff0c\u800c\u6b64\u523bNGFW2\u7684GE1/0/3\u53e3\u4e3aActive\uff0c \u56e0\u6b64\u6570\u636e\u5305\u53d1\u7ed9\u4e86NGFW2\u3002 NGFW2\u6536\u5230\u6570\u636e\u5305\u540e\uff0c\u53d1\u73b0\u6570\u636e\u5305\u5728\u672c\u5730\u6ca1\u6709\u5339\u914d\u7684\u4f1a\u8bdd\u8868\u9879\uff0c\u56e0\u6b64\u4e22\u5f03\u8be5\u62a5\u6587\uff0c \u4ece\u8fd9\u4e2a\u4f8b\u5b50\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u9632\u706b\u5899\u4e0aVRRP\u7ec4\u7684\u4e3b/\u5907\u72b6\u6001\u7684\u7edf\u4e00\u662f\u975e\u5e38\u91cd\u8981\u7684\uff0c\u5426\u5219\u5c31\u53ef\u80fd\u4f1a\u9020\u6210\u6570\u636e\u5f80\u8fd4\u8def\u5f84\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002\u7136\u800c\u4f20\u7edf\u7684VRRP\u4e2d\uff0c\u7ec4\u4e0e\u7ec4\u4e4b\u95f4\u662f\u76f8\u4e92\u72ec\u7acb\u8fd0\u4f5c\u7684\uff0c\u65e0\u6cd5\u5b9e\u73b0\u7edf\u4e00\u7684\u7ba1\u7406\uff0c \u8fd9\u5c31\u9700\u8981VGMP\u4e86\u3002 VGMP \u00b6 \u4e00\u53f0\u8bbe\u5907\u53ef\u4ee5\u914d\u7f6e\u591a\u7ec4VRRP\uff0c\u800c\u4e14\u8fd9\u4e9bVRRP\u7ec4\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0c\u56e0\u6b64\u6709\u53ef\u80fd\u51fa\u73b0\u7684\u60c5\u51b5\u662f\uff1a\u5bf9\u4e8e\u7279\u5b9a\u7684\u7ec4\u800c\u8a00\uff0c\u672c\u8bbe\u5907\u662fActive\u8bbe\u5907\uff0c\u800c\u5bf9\u4e8e\u5176\u4ed6\u7ec4\uff0c\u672c\u8bbe\u5907\u53c8\u662fBackup\u8bbe\u5907\u3002VGMP\uff08VRRP Group Management Protocol\uff0cVRRP\u7ec4\u7ba1\u7406\u534f\u8bae\uff09\u7528\u4e8e\u7edf\u4e00\u7ba1\u7406\u5404\u4e2aVRRP\u7ec4\uff0c\u4ece\u800c\u5b9e\u73b0VRRP\u7ec4\u4e4b\u95f4\u7684\u7684\u8bbe\u5907\u72b6\u6001\u7edf\u4e00\u3002\u4ee5\u4e0b\u662fVGMP\u7684\u4e3b\u8981\u529f\u80fd\u4ecb\u7ecd\uff1a \u63a5\u53e3\u96c6\u4e2d\u76d1\u63a7\uff1a \u00b6 \u5c06\u8bbe\u5907\u7684\u6240\u6709VRRP\u7ec4\u90fd\u52a0\u5165\u5230VGMP\u7ba1\u7406\u7ec4\u4e2d\uff0c\u7531VGMP\u7ba1\u7406\u7ec4\u7edf\u4e00\u76d1\u63a7\u7ec4\u5185\u6240\u6709\u7684VRRP\u7ec4\u72b6\u6001\u3002\u8fd9\u6837VGMP\u7ba1\u7406\u7ec4\u5c31\u53ef\u4ee5\u901a\u8fc7VRRP\u7edf\u4e00\u76d1\u63a7\u7cfb\u7edf\u7684\u63a5\u53e3\u72b6\u6001\u3002 \u5c06\u8bbe\u5907\u7684\u4e1a\u52a1\u63a5\u53e3\u52a0\u5165\u5230VGMP\u7ba1\u7406\u7ec4\u4e2d\uff0c\u7531VGMP\u7ba1\u7406\u7ec4\u7edf\u4e00\u76d1\u63a7\u7ec4\u5185\u6240\u6709\u63a5\u53e3\u72b6\u6001\uff08HRP Track\uff09\u3002 \u8bbe\u5907\u72b6\u6001\u7edf\u4e00\u7ba1\u7406\uff1a \u00b6 NGFW\u662f\u901a\u8fc7VGMP\u7ba1\u7406\u7ec4\u6765\u8fdb\u884c\u8bbe\u5907\u72b6\u6001\u7ba1\u7406\u7684\u3002VGMP\u7ba1\u7406\u7ec4\u7684\u4e3b\u5907\u72b6\u6001\u51b3\u5b9a\u4e86\u53cc\u673a\u70ed\u5907\u7ec4\u7f51\u4e2d\u8bbe\u5907\u7684\u4e3b\u5907\u72b6\u6001\uff0c\u51b3\u5b9a\u4e86VGMP\u7ba1\u7406\u7ec4\u5185\u7684\u6210\u5458\u63a5\u53e3\u548cVRRP\u7ec4\u7684\u72b6\u6001\u3002 \u5f53\u4e00\u53f0\u8bbe\u5907\u7684VGMP\u7ba1\u7406\u7ec4\u7684\u72b6\u6001\u4e3aActive\u65f6\uff0c\u7ec4\u5185\u6240\u6709\u6210\u5458\u7684\u63a5\u53e3\u72b6\u6001\u7edf\u4e00\u4e3aActive\uff0c\u8be5\u8bbe\u5907\u6210 \u4e3a\u4e3b\u8bbe\u5907\u3002\u53e6\u5916\u4e00\u53f0\u8bbe\u5907\u7684VGMP\u7ba1\u7406\u7ec4\u72b6\u6001\u4e3aStandby\uff0c\u5219\u8be5\u8bbe\u5907\u4e3a\u5907\u7528\u8bbe\u5907\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cNGFW1\u53caNGFW2\u7684\u4e24\u7ec4VRRP\u90fd\u52a0\u5165VGMP\u7ba1\u7406\u7ec4\uff0c\u7531VGMP\u7ba1\u7406\u7ec4\u7edf\u4e00\u7ba1\u7406\u4e24\u7ec4VRRP \u7684\u4e3b\u5907\u72b6\u6001\u548c\u5207\u6362\u3002\u7f51\u7edc\u7ba1\u7406\u5458\u5c06NGFW1\u914d\u7f6e\u4e3a\u521d\u59cb\u65f6\u7684\u4e3b\u9632\u706b\u5899\u3001NGFW2\u4e3a\u5907\u9632\u706b\u5899\u3002\u5728\u6b63\u5e38\u60c5\u51b5\u4e0bNGFW1\u4e3aVGMP\u7684Active\uff0c\u5b83\u662f\u4e24\u4e2aVRRP\u7ec4\uff08VRRP VRID1\u4e0e100\uff09\u7684Active\u8bbe\u5907\u3002 \u73b0\u5728NGFW1\u7684GE1/0/1\u53e3\u7684\u76f4\u8fde\u94fe\u8def\u53d1\u751f\u6545\u969c\uff0cVGMP\u7ba1\u7406\u7ec4\u68c0\u6d4b\u5230\u94fe\u8def\u7684\u53d8\u5316\uff0c\u56e0\u6b64\u53d1\u751fVGMP\u7ba1\u7406\u7ec4\u7684\u4e3b\u5907\u5207\u6362\uff0cNGFW2\u6210\u4e3aVGMP\u7684Active\uff0c\u800cNGFW1\u4e3aStandby\u3002\u4e00\u65e6VGMP\u7684\u4e3b\u5907\u53d1\u751f\u5207\u6362\uff0c \u8bbe\u5907\u4e0a\u6240\u6709\u52a0\u5165VGMP\u7ba1\u7406\u7ec4\u7684VRRP\u7ec4\u90fd\u53d1\u751f\u5207\u6362\u5e76\u4fdd\u6301\u4e3b\u5907\u72b6\u6001\u4e00\u81f4\u3002\u56e0\u6b64NGFW2\u6210\u4e3aVRRP\u7ec41 \u53ca\u7ec4100\u7684Active\u8bbe\u5907\u3002\u5982\u6b64\u4e00\u6765\uff0c\u7531VRRP\u7ec4\u72b6\u6001\u4e0d\u4e00\u81f4\u5bfc\u81f4\u7684\u5f80\u8fd4\u8def\u5f84\u4e0d\u4e00\u81f4\u95ee\u9898\u5c31\u53ef\u4ee5\u5f97\u5230\u89e3\u51b3\u3002 HRP \u00b6 FW\u901a\u8fc7\u6267\u884c\u547d\u4ee4\uff08\u901a\u8fc7Web\u914d\u7f6e\u5b9e\u9645\u4e0a\u4e5f\u662f\u5728\u6267\u884c\u547d\u4ee4\uff09\u6765\u5b9e\u73b0\u7528\u6237\u6240\u9700\u7684\u5404\u79cd\u529f\u80fd\u3002\u5982\u679c\u5907\u7528\u8bbe\u5907\u5207\u6362\u4e3a\u4e3b\u7528\u8bbe\u5907\u524d\uff0c\u914d\u7f6e\u547d\u4ee4\u6ca1\u6709\u5907\u4efd\u5230\u5907\u7528\u8bbe\u5907\uff0c\u5219\u5907\u7528\u8bbe\u5907\u65e0\u6cd5\u5b9e\u73b0\u4e3b\u7528\u8bbe\u5907\u7684\u76f8\u5173\u529f\u80fd\uff0c\u4ece\u800c\u5bfc\u81f4\u4e1a\u52a1\u4e2d\u65ad\u3002 FW\u5c5e\u4e8e\u72b6\u6001\u68c0\u6d4b\u9632\u706b\u5899\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u52a8\u6001\u751f\u6210\u7684\u8fde\u63a5\uff0c\u90fd\u6709\u4e00\u4e2a\u4f1a\u8bdd\u8868\u9879\u4e0e\u4e4b\u5bf9\u5e94\u3002\u4e3b\u7528\u8bbe\u5907\u5904\u7406\u4e1a\u52a1\u8fc7\u7a0b\u4e2d\u521b\u5efa\u4e86\u5f88\u591a\u52a8\u6001\u4f1a\u8bdd\u8868\u9879\uff1b\u800c\u5907\u7528\u8bbe\u5907\u6ca1\u6709\u62a5\u6587\u7ecf\u8fc7\uff0c\u56e0\u6b64\u6ca1\u6709\u521b\u5efa\u4f1a\u8bdd\u8868\u9879\u3002\u5982\u679c\u5907\u7528\u8bbe\u5907\u5207\u6362\u4e3a\u4e3b\u7528\u8bbe\u5907\u524d\uff0c\u4f1a\u8bdd\u8868\u9879\u6ca1\u6709\u5907\u4efd\u5230\u5907\u7528\u8bbe\u5907\uff0c\u5219\u4f1a\u5bfc\u81f4\u540e\u7eed\u4e1a\u52a1\u62a5\u6587\u65e0\u6cd5\u5339\u914d\u4f1a\u8bdd\u8868\uff0c\u4ece\u800c\u5bfc\u81f4\u4e1a\u52a1\u4e2d\u65ad\u3002 \u56e0\u6b64\u4e3a\u4e86\u5b9e\u73b0\u4e3b\u7528\u8bbe\u5907\u51fa\u73b0\u6545\u969c\u65f6\u5907\u7528\u8bbe\u5907\u80fd\u5e73\u6ed1\u5730\u63a5\u66ff\u5de5\u4f5c\uff0c\u5fc5\u987b\u5728\u4e3b\u7528\u548c\u5907\u7528\u8bbe\u5907\u4e4b\u95f4\u5907\u4efd\u5173\u952e\u914d\u7f6e\u547d\u4ee4\u548c\u4f1a\u8bdd\u8868\u7b49\u72b6\u6001\u4fe1\u606f\u3002\u4e3a\u6b64\u534e\u4e3a\u9632\u706b\u5899\u5f15\u5165\u4e86HRP\uff08 Huawei Redundancy Protocol\uff09\u534f\u8bae\uff0c \u5b9e\u73b0\u9632\u706b\u5899\u53cc\u673a\u4e4b\u95f4\u52a8\u6001\u72b6\u6001\u6570\u636e\u548c\u5173\u952e\u914d\u7f6e\u547d\u4ee4\u7684\u5907\u4efd\u3002 \u5728\u53cc\u673a\u70ed\u5907\u7ec4\u7f51\u4e2d\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u6307\u5b9a\u5fc3\u8df3\u7ebf\u4f5c\u4e3a\u4e13\u95e8\u7684\u5907\u4efd\u901a\u9053\uff0c\u7528\u4e8e\u5907\u4efd\u914d\u7f6e\u547d\u4ee4\u548c\u72b6\u6001\u4fe1\u606f\u3002\u4e3b\u5907\u8bbe\u5907\u901a\u8fc7\u5fc3\u8df3\u7ebf\u4ea4\u4e92\u62a5\u6587\u4e86\u89e3\u5bf9\u65b9\u72b6\u6001\uff0c\u4ee5\u53ca\u5b9e\u73b0\u914d\u7f6e\u547d\u4ee4\u548c\u72b6\u6001\u4fe1\u606f\u7684\u5907\u4efd\u3002\u5fc3\u8df3\u7ebf\u4e24\u7aef\u7684\u8bbe\u5907\u4e0a\u7684\u63a5\u53e3\u79f0\u4e3a\u5fc3\u8df3\u63a5\u53e3\u3002 \u9632\u706b\u5899\u53cc\u673a\u914d\u7f6e\u6b65\u9aa4 \u914d\u7f6e\u6848\u4f8b 1\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u7269\u7406\u63a5\u53e3\u90e8\u7f72 VRRP\uff09 \u573a\u666f\u8bf4\u660e\uff1a \u00b6 \u5982\u56fe\u6240\u793a\uff0cATAE3.0/E9000\u673a\u6846\u901a\u8fc7\u6838\u5fc3\u4ea4\u6362\u673a\u5806\u53e0\u7ec4\uff08Switch-Stack\uff09\u8fde\u63a5\u5230\u9632\u706b\u5899FW1\u53caFW2\u3002 ATAE3.0/E9000\u76ee\u524d\u53ea\u89c4\u5212\u4e861\u4e2aVLAN\uff0c\u670d\u52a1\u5668\u5355\u677f\uff08Server1\u53caServer2\uff09\u4f7f\u7528192.168.10.0/24\u7f51\u6bb5\uff0c\u4e14\u7f3a\u7701\u7f51\u5173\u8bbe\u7f6e\u4e3aFW1/FW2\u3002 \u9632\u706b\u5899FW1\u53caFW2\u90e8\u7f72\u53cc\u673a\u70ed\u5907\uff0c\u5de5\u4f5c\u65b9\u5f0f\u4e3a\u4e3b\u5907\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0bFW1\u4e3a\u4e3b\uff0cFW2\u4e3a\u5907\u3002 \u9632\u706b\u5899FW1\u53caFW2\u4e0a\u4e0b\u884c\u5747\u8fde\u63a5\u7740\u4ea4\u6362\u673a\uff0c\u5176\u4e2dCSW1\u53caCSW2\u4e3a\u5916\u7f51\uff08\u6216\u5ba2\u6237\uff09\u4ea4\u6362\u673a\uff0c\u6309\u56fe\u793a\u8fd0\u884c VRRP\u3002 \u4e24\u53f0\u9632\u706b\u5899\u7684GE1/0/0\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u5185\u7f51\uff08Trust\u5b89\u5168\u533a\u57df\uff09\uff0c\u8fd0\u884c\u4e00\u7ec4VRRP\uff0c\u4f7f\u7528\u7684VRID\u4e3a1\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.10.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3a\u670d\u52a1\u5668\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\uff1b\u4e24\u53f0\u9632\u706b\u5899\u7684GE1/0/7\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u5916\u7f51\uff08Untrust\u5b89\u5168\u533a\u57df\uff09\uff0c\u8fd0\u884c\u53e6\u4e00\u7ec4VRRP\uff0c\u4f7f\u7528\u7684VRID\u4e3a3\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a10.1.1.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3a\u5916\u90e8\u4ea4\u6362\u673aCSW1\u53caCSW2\u7684\u3001\u5230\u8fbe\u5185\u90e8\u7f51\u6bb5\u7684\u9759\u6001\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u3002 \u8981\u6c42Server1\u53caServer2\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002 \u914d\u7f6e\u6307\u5bfc\uff1a \u00b6 \u5b8c\u6210FW1\u548cFW2\u7684\u63a5\u53e3\u57fa\u672c\u914d\u7f6e\u3001\u63a5\u53e3\u52a0\u57df \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210FW1\u548cFW2\u7684VRRP\u914d\u7f6e \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u6ce8\u610f\uff1a\u5728\u914d\u7f6e\u9632\u706b\u5899VRRP\u65f6\uff0c\u4e3b\u9632\u706b\u5899\u7684\u6240\u6709VRRP\u90fd\u9700\u52a0\u5165Active\u7ba1\u7406\u7ec4\uff0c\u800c\u5907\u4efd\u9632\u706b\u5899\u7684\u6240\u6709 VRRP\u90fd\u9700\u52a0\u5165Standby\u7ba1\u7406\u7ec4\u3002 \u5b8c\u6210FW1\u548cFW2\u7684HRP\u914d\u7f6e \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cFW1\u4e0eFW2\u4fbf\u4f1a\u5f00\u59cb\u4ee5\u53cc\u673a\u7684\u65b9\u5f0f\u5de5\u4f5c\u3002\u7531\u4e8eFW1\u662f\u7f3a\u7701\u7684\u4e3b\u9632\u706b\u5899\uff0c\u56e0\u6b64\u5176\u8bbe\u5907 \u540d\u79f0\u5c06\u53d8\u6210HRP_A[FW1] \uff0c \u5176\u4e2dA\u8868\u793aActive\uff1b\u800cFW2\u7531\u4e8e\u662f\u5907\u9632\u706b\u5899\uff0c \u56e0\u6b64\u5176\u8bbe\u5907\u540d\u79f0\u5c06\u53d8\u6210 HRP_S[FW2]\uff0c\u5176\u4e2dS\u8868\u793aStandby\u3002 \u5728FW1\u4e0a\u4f7f\u7528display hrp group\u547d\u4ee4\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a \u800c\u5728FW2\u4e0a\u4f7f\u7528\u8be5\u547d\u4ee4\uff0c\u8f93\u51fa\u5982\u4e0b\uff1a HRP_S[FW2] display hrp group \u53e6\u5916\uff0c\u4f7f\u7528**display hrp state**\u547d\u4ee4\uff08\u663e\u793a\u5f53\u524dHRP\u7684\u72b6\u6001\uff0c\u5305\u62ec\u7ba1\u7406\u7ec4\u7684\u63a5\u53e3\u548ctrack\u63a5\u53e3\u7b49\uff09\uff0c\u5728FW1 \u4e0a\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a HRP_A[FW1] display hrp state The firewall's config state is: ACTIVE Backup channel usage: 0.01% Time elapsed after the last switchover: 0 days, 0 hours, 2 minutes Current state of virtual routers configured as active: GigabitEthernet1/0/7 vrid 3 : active GigabitEthernet1/0/0 vrid 1 : active \u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e \u00b6 FW1\u53caFW2\u4f5c\u4e3a\u670d\u52a1\u5668\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\uff0c\u8981\u8d1f\u8d23\u5c06\u670d\u52a1\u5668\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u9700\u5177\u5907\u76f8\u5e94\u7684\u8def\u7531\u4fe1\u606f\u3002\u5728\u672c\u573a\u666f\u4e2d\uff0c\u5f88\u660e\u663e\uff0c\u4e0e\u5916\u90e8\u7f51\u7edc\u5bf9\u63a5\u91c7\u7528\u7684\u662f\u201c\u9759\u6001\u8def\u7531+VRRP\u201d\u7684\u65b9\u6848\u3002\u56e0\u6b64\uff0c \u9700\u5728FW1\u53caFW2\u4e0a\u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\uff0c\u6b64\u5904\u6211\u4eec\u5c06\u4e3a\u5b83\u4eec\u5404\u914d\u7f6e\u4e00\u6761\u9ed8\u8ba4\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3a\u5ba2\u6237\u4ea4\u6362\u673a\u7684VRRP\u865a\u62dfIP\u5730\u574010.1.1.5\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_A[FW1] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_S[FW2] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u7f3a\u7701\u65f6\uff0c\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\u4e0d\u4f1a\u81ea\u52a8\u4ece\u4e3b\u5899\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\uff0c \u56e0\u6b64\u9759\u6001\u8def\u7531\u9700\u5206\u522b\u5728FW1\u53caFW2\u4e0a\u8fdb\u884c\u914d\u7f6e\u3002 \u6ce8\u610f\uff1a\u4e3a\u4e86\u8ba9Server\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u56de\u7a0b\u6d41\u91cf\u80fd\u591f\u4ece\u5ba2\u6237\u4ea4\u6362\u673aCSW\u987a\u5229\u5730\u8fd4\u56deFW1/FW2\u5e76\u5230\u8fbe Server\uff0c\u5728\u672c\u6b65\u9aa4\u4e2d\uff0c\u9700\u786e\u4fdd\u5ba2\u6237\u4ea4\u6362\u673aCSW1\u53caCSW2\u62e5\u6709\u5230\u8fbe192.168.10.0/24\u7f51\u6bb5\u7684\u56de\u7a0b\u8def\u7531\uff0c\u8be5\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5e94\u4e3a10.1.1.1\u3002 \u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u7684\u914d\u7f6e \u00b6 \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u5728\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff08Security-Policy\uff09\u65f6\uff0c\u9700\u5728\u4e3b\u9632\u706b\u5899\u4e0a\u5b8c\u6210\u76f8 \u5e94\u7684\u914d\u7f6e\uff0c\u6240\u505a\u7684\u5b89\u5168\u7b56\u7565\u7684\u76f8\u5173\u914d\u7f6e\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\u3002\u56e0\u6b64\u4e0a\u8ff0test1\u5b89\u5168\u89c4\u5219\u4f1a\u81ea\u52a8\u540c\u6b65\u5230FW2\u3002 \u5230\u76ee\u524d\u4e3a\u6b62\uff0cServer1\u53caServer2\u5df2\u7ecf\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u4e86\u3002 \uff08\u589e\u52a0\u9700\u6c42\uff09\u6e90\u5730\u5740NAT\u914d\u7f6e \u00b6 \u73b0\u5728\u7f51\u7edc\u4e2d\u51fa\u73b0\u4e86\u65b0\u589e\u7684\u9700\u6c42\uff0c\u8981\u6c42\u5185\u90e8\u7f51\u6bb5192.168.10.0/24\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u5c06\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c \u8f6c\u6362\u6210\u5730\u5740\u6c6010.1.1.10~10.1.1.20\u4e2d\u7684\u5ba2\u6237\u5927\u7f51IP\u5730\u5740\uff0810.1.1.10~10.1.1.20\u5730\u5740\u6bb5\u9700\u5411\u5ba2\u6237\u7533\u8bf7\uff09\u3002 \u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u5b8c\u6210NAT\u7b56\u7565\u7684\u914d\u7f6e\uff1a \u6ce8\u610f\uff1a\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u6267\u884c\u7684\u4e0a\u8ff0NAT\u5730\u5740\u6c60\u53caNAT\u7b56\u7565\u914d\u7f6e\uff0c\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899FW2\u3002 \u4ee5\u4e0a\u7684\u914d\u7f6e\u4e2d\uff0cNAT\u7b56\u7565\u89c4\u5219policy1\u7528\u4e8e\u4f7f\u9632\u706b\u5899\u5728\u6536\u5230Trust\u533a\u57df\u8bbf\u95eeUntrust\u533a\u57df\u7684\u3001\u6e90IP\u5730\u5740\u4e3a 192.168.10.0/24\u7f51\u6bb5\u7684\u62a5\u6587\u65f6\uff0c\u5c06\u8fd9\u4e9b\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u8f6c\u6362\u6210\u5730\u5740\u6c60pool1\u4e2d\u7684\u67d0\u4e2aIP\u5730\u5740\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cServer1\u5373\u53ef\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002\u5f53Server1 ping\u5916\u90e8\u7f51\u7edcIP\u5730\u574010.1.1.30\u65f6\uff0c\u6211\u4eec\u80fd\u5728 FW1\u4e0a\u770b\u5230\u5982\u4e0b\u4f1a\u8bdd\uff1a \u4ee5\u4e0a\u8f93\u51fa\u4e2d\uff0c\u4e2d\u62ec\u53f7\u5185\u7684IP\u5730\u5740\u4e3a\u8f6c\u6362\u540e\u7684IP\u5730\u5740\u3002 \uff08\u589e\u52a0\u9700\u6c42\uff09NAT Server\u914d\u7f6e \u00b6 \u73b0\u5728\u7f51\u7edc\u4e2d\u51fa\u73b0\u4e86\u65b0\u589e\u7684\u9700\u6c42\uff0c\u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a10.1.1.29\uff1a2121\u3002\u8981\u5b9e\u73b0\u8fd9\u4e2a\u9700\u6c42\uff0c\u81f3\u5c11\u6709\u4e24\u4e2a\u914d\u7f6e\u9700\u8981\u5b8c\u6210\uff0c\u5176\u4e00\u662f\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u7528\u6237\u80fd\u591f\u8bbf\u95eeTrust\u533a\u57df\u4e2d\u7684Server2\uff08192.168.10.100\uff09\u7684FTP\u670d\u52a1\uff1b\u5176\u4e8c\u662f\u914d\u7f6eNAT Server\uff0c\u5c06\u8be5\u5185\u90e8\u4e1a\u52a1192.168.10.100\uff1a21\u6620\u5c04\u523010.1.1.29\uff1a2121\u3002 \u53e6\u5916\uff0cFW\u8fd8\u9700\u589e\u52a0NAT server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7528\u6237\u80fd\u591f\u4f7f\u7528\u76ee\u7684IP\u5730\u574010.1.1.29\uff1a2121\u6765\u8bbf\u95ee Server2\u7684FTP\u670d\u52a1\uff1a HRP_A[FW1] nat server s2 zone untrust protocol tcp global 10.1.1.29 2121 inside 192.168.10.100 21 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5916\u90e8\u7f51\u7edc\u7528\u6237\u5373\u53ef\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\u3002\u5728FW1\u4e0a\u80fd\u770b\u5230\u5982\u4e0b\u4f1a\u8bdd\uff1a \u6700\u540e\uff0c\u5728\u672c\u4f8b\u4e2d\uff0cATAE3.0/E9000\u5185\u53ea\u89c4\u5212\u4e86\u4e00\u4e2aVLAN\u3002\u800c\u9632\u706b\u5899FW1\u53caFW2\u7684GE1/0/0\u63a5\u53e3\u53ea\u9700\u4e3a\u8be5VLAN\u63d0\u4f9b\u7f51\u5173\u670d\u52a1\uff0c\u56e0\u6b64\u6211\u4eec\u76f4\u63a5\u5728FW1\u53caFW2\u7684GE1/0/0\u63a5\u53e3\u4e0a\u8fdb\u884cIP\u5730\u5740\u53caVRRP\u529f\u80fd\u7684\u914d\u7f6e\uff0c \u5728\u8fd9\u4e2a\u573a\u666f\u4e2d\uff0c\u6838\u5fc3\u4ea4\u6362\u673a\u5806\u53e0\u7ec4Switch-Stack\u7684GE0/0/11\u53caGE0/0/12\u63a5\u53e3\u9700\u914d\u7f6e\u4e3aAccess\u7c7b\u578b\uff0c\u5e76\u4e14\u52a0\u5165\u76f8\u5e94\u7684VLAN\u3002 \u4e0e\u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u76f8\u5173\u7684\u5176\u4ed6\u547d\u4ee4 hrp standby config enable \u00b6 \u8be5\u547d\u4ee4\u7528\u4e8e\u5141\u8bb8\u914d\u7f6e\u5907\u7528\u8bbe\u5907\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u672a\u542f\u7528\u5141\u8bb8\u914d\u7f6e\u5907\u7528\u8bbe\u5907\u7684\u529f\u80fd\u3002\u6240\u6709\u53ef\u4ee5\u5907\u4efd\u7684\u4fe1\u606f\u90fd\u53ea\u80fd\u5728\u4e3b\u9632\u706b\u5899\u4e0a\u914d\u7f6e\uff0c\u4e0d\u80fd\u5728\u5907\u9632\u706b\u5899\u4e0a\u914d\u7f6e\u3002\u542f\u7528\u5141\u8bb8\u914d\u7f6e\u5907\u7528\u8bbe\u5907\u7684\u529f\u80fd\u540e\uff0c\u6240\u6709\u53ef\u4ee5\u5907\u4efd\u7684\u4fe1\u606f\u90fd\u53ef\u4ee5\u76f4\u63a5\u5728\u5907\u9632\u706b\u5899\u4e0a\u8fdb\u884c\u914d\u7f6e\u3002\u4e14\u5907\u9632\u706b\u5899\u4e0a\u7684\u914d\u7f6e\u53ef\u4ee5\u540c\u6b65\u5230\u4e3b\u9632\u706b\u5899\u3002 hrp mirror session enable \u00b6 \u8be5\u547d\u4ee4\u7528\u4e8e\u542f\u7528\u4f1a\u8bdd\u5feb\u901f\u5907\u4efd\u3002\u914d\u7f6e\u4f1a\u8bdd\u5feb\u901f\u5907\u4efd\u529f\u80fd\u540e\uff0c\u4e3b\u9632\u706b\u5899\u7684\u4f1a\u8bdd\u4fe1\u606f\u4f1a\u7acb\u5373\u540c\u6b65\u81f3\u5907\u9632\u706b\u5899\u3002\u5f53\u4e3b\u9632\u706b\u5899\u51fa\u73b0\u6545\u969c\u65f6\uff0c\u62a5\u6587\u80fd\u591f\u5e73\u6ed1\u5730\u88ab\u5907\u9632\u706b\u5899\u8f6c\u53d1\u51fa\u53bb\uff0c\u4ece\u800c\u4fdd\u8bc1\u5185\u5916\u90e8\u7528\u6237\u7684\u4f1a\u8bdd\u4e0d\u4e2d\u65ad\u3002\u5f00\u542f\u8be5\u529f\u80fd\u65f6\uff0c\u5982\u679c\u7f51\u7edc\u4e2d\u5b58\u5728\u5927\u91cf\u7684\u4f1a\u8bdd\uff0c\u90a3\u4e48\u4e24\u53f0\u9632\u706b\u5899\u4e4b\u95f4\u7684\u5fc3\u8df3\u7ebf\u53ef\u80fd\u9700\u89c4\u5212\u8f83\u5927\u7684\u53ef\u7528\u5e26\u5bbd\uff0c\u4f8b\u5982\u53ef\u4f7f\u7528\u805a\u5408\u63a5\u53e3\uff08Eth-trunk\uff09\u4f5c\u4e3a\u5fc3\u8df3\u63a5\u53e3\u3002 undo hrp preempt \u00b6 \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cVGMP\u7ba1\u7406\u7ec4\u7684\u62a2\u5360\u529f\u80fd\u4e3a\u5f00\u542f\u72b6\u6001\uff0c\u62a2\u5360\u5ef6\u8fdf\u65f6\u95f4\u4e3a60s\uff08\u8be5\u65f6\u95f4\u4f7f\u7528**hrp preempt** **delay**\u547d\u4ee4\u4fee\u6539\uff09\u3002\u5982\u679c\u914d\u7f6e**undo hrp preempt**\u5219\u62a2\u5360\u529f\u80fd\u88ab\u5173\u95ed\u3002 \u914d\u7f6e\u6848\u4f8b 2\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u4e0b\u884c \u5b50\u63a5\u53e3\u90e8\u7f72 VRRP\uff09 \u573a\u666f\u8bf4\u660e\uff1a \u00b6 1) \u5982\u56fe\u6240\u793a\uff0cATAE3.0/E9000\u673a\u6846\u901a\u8fc7\u6838\u5fc3\u4ea4\u6362\u673a\u5806\u53e0\u7ec4\uff08Switch-Stack\uff09\u8fde\u63a5\u5230\u9632\u706b\u5899FW1\u53caFW2\u3002 2) ATAE3.0/E9000 \u76ee \u524d \u89c4 \u5212 \u4e86 2 \u4e2a VLAN \uff0c VLAN10 \u4f7f\u7528 192.168.10.0/24 \u7f51\u6bb5\uff0c VLAN20 \u4f7f\u7528 192.168.20.0/24\u7f51\u6bb5\u3002\u5176\u4e2dVLAN10\u88ab\u89c4\u5212\u5728\u4e86\u9632\u706b\u5899\u7684Trust\u533a\u57df\uff0c\u800cVLAN20\u88ab\u89c4\u5212\u5728\u4e86DMZ\u533a\u57df\u3002 \u9632\u706b\u5899FW1\u53caFW2\u90e8\u7f72\u53cc\u673a\u70ed\u5907\uff0c\u5de5\u4f5c\u65b9\u5f0f\u4e3a\u4e3b\u5907\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0bFW1\u4e3a\u4e3b\uff0cFW2\u4e3a\u5907\u3002 \u9632\u706b\u5899FW1\u53caFW2\u4e0a\u4e0b\u884c\u5747\u8fde\u63a5\u7740\u4ea4\u6362\u673a\uff0c\u5176\u4e2dCSW1\u53caCSW2\u4e3a\u5916\u7f51\uff08\u6216\u5ba2\u6237\uff09\u4ea4\u6362\u673a\uff0c\u6309\u56fe\u793a\u8fd0\u884c VRRP\u3002 \u4e24\u53f0\u9632\u706b\u5899\u7684GE1/0/0\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u5185\u7f51\uff0c\u7531\u4e8e\u8be5\u7269\u7406\u63a5\u53e3\u9700\u5bf9\u63a5\u4e24\u4e2aVLAN\uff0c\u56e0\u6b64\u9700\u521b\u5efa\u4e24\u4e2a\u5b50\u63a5\u53e3\u3002\u4e3a\u4e86\u63d0\u4f9b\u5197\u4f59\u7684\u7f51\u5173\uff0cFW1\u53caFW2\u90fd\u9700\u5728\u81ea\u5df1GE1/0/0\u7684\u4e24\u4e2a\u5b50\u63a5\u53e3\u4e0a\u5404\u8fd0\u884c\u4e00\u7ec4VRRP\uff0c\u5176\u4e2dVLAN10\u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a1\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.10.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN10\u4e1a\u52a1\u7684\u7f51\u5173\uff1bVLAN20 \u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a2\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.20.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN20\u4e1a\u52a1\u7684\u7f51\u5173\u3002 \u4e24\u53f0\u9632\u706b\u5899\u7684GE1/0/7\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u5916\u7f51\uff08Untrust\u533a\u57df\uff09\uff0c\u8fd0\u884c\u53e6\u4e00\u7ec4VRRP\uff0c\u4f7f\u7528\u7684VRID\u4e3a3\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a10.1.1.1\u3002 \u8981\u6c42\u5185\u90e8\u7f51\u6bb5192.168.10.0/24\u80fd\u4e3b\u52a8\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff0c\u800c\u4e14\u5f53\u5176\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u9632\u706b\u5899\u5c06\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u8f6c\u6362\u6210\u5730\u5740\u6c6010.1.1.10~10.1.1.20\u4e2d\u7684IP\u5730\u5740\u3002\u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c \u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a10.1.1.29\uff1a2121\u3002 \u914d\u7f6e\u6307\u5bfc\uff1a \u00b6 \u5b8c\u6210FW1\u548cFW2\u7684\u63a5\u53e3\u57fa\u672c\u914d\u7f6e\u3001\u63a5\u53e3\u52a0\u57df \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210FW1\u548cFW2\u7684VRRP\u914d\u7f6e \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210FW1\u548cFW2\u7684HRP\u914d\u7f6e \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cFW1\u4e0eFW2\u4fbf\u4f1a\u5f00\u59cb\u4ee5\u53cc\u673a\u7684\u65b9\u5f0f\u5de5\u4f5c\u3002FW1\u7531\u4e8e\u662f\u7f3a\u7701\u7684\u4e3b\u9632\u706b\u5899\uff0c\u56e0\u6b64\u5176\u8bbe\u5907 \u540d\u79f0\u5c06\u53d8\u6210HRP_A[FW1] \uff0c \u5176\u4e2dA\u8868\u793aActive\uff1b\u800cFW2\u7531\u4e8e\u662f\u5907\u9632\u706b\u5899\uff0c \u56e0\u6b64\u5176\u8bbe\u5907\u540d\u79f0\u5c06\u53d8\u6210 HRP_S[FW2]\uff0c\u5176\u4e2dS\u8868\u793aStandby\u3002 \u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e \u00b6 FW1\u53caFW2\u4f5c\u4e3a\u670d\u52a1\u5668\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\uff0c\u8981\u8d1f\u8d23\u5c06\u670d\u52a1\u5668\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u9700\u5177\u5907\u76f8\u5e94\u7684\u8def\u7531\u4fe1\u606f\u3002\u5728\u672c\u573a\u666f\u4e2d\uff0c\u5f88\u660e\u663e\uff0c\u4e0e\u5916\u90e8\u7f51\u7edc\u5bf9\u63a5\u91c7\u7528\u7684\u662f\u201c\u9759\u6001\u8def\u7531+VRRP\u201d\u7684\u65b9\u6848\u3002\u56e0\u6b64\uff0c \u9700\u5728FW1\u53caFW2\u4e0a\u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\uff0c\u6b64\u5904\u6211\u4eec\u5c06\u4e3a\u5b83\u4eec\u5404\u914d\u7f6e\u4e00\u6761\u9ed8\u8ba4\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3a\u5ba2\u6237\u4ea4\u6362\u673a\u7684VRRP\u7684\u865a\u62dfIP\u5730\u574010.1.1.5\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_A[FW1] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_S[FW2] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u7f3a\u7701\u65f6\uff0c\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\u4e0d\u4f1a\u81ea\u52a8\u4ece\u4e3b\u5899\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\uff0c \u56e0\u6b64\u9759\u6001\u8def\u7531\u9700\u5206\u522b\u5728FW1\u53caFW2\u4e0a\u8fdb\u884c\u914d\u7f6e\u3002 \u5b8c\u6210\u5b89\u5168\u7b56\u7565\u53ca\u6e90IP\u5730\u5740NAT\u914d\u7f6e\uff0c\u4f7f\u5f97Server1\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc \u00b6 \u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff1a \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u5728\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff08Security-Policy\uff09\u65f6\uff0c\u9700\u5728\u4e3b\u9632\u706b\u5899\u4e0a\u5b8c\u6210\u76f8 \u5e94\u7684\u914d\u7f6e\uff0c\u6240\u505a\u7684\u5b89\u5168\u7b56\u7565\u7684\u76f8\u5173\u914d\u7f6e\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\u3002\u56e0\u6b64\u4e0a\u8ff0test1\u5b89\u5168\u89c4\u5219\u4f1a\u81ea\u52a8\u540c\u6b65\u5230FW2\u3002 \u5728FW1\u4e0a\u8fdb\u884c\u6e90\u5730\u5740NAT\u914d\u7f6e\u3002\u8981\u6c42\u5185\u90e8\u7f51\u6bb5192.168.10.0/24\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u5c06\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c \u8f6c\u6362\u6210\u5730\u5740\u6c6010.1.1.10\u81f310.1.1.20\u4e2d\u7684\u516c\u7f51IP\u5730\u5740\u3002 \u6ce8\u610f\uff1a\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u8fd0\u884c\u7684\u4e0a\u8ff0\u914d\u7f6e\uff0c\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899FW2\u3002\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cServer1\u5373\u53ef\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002 \u5b8c\u6210\u5b89\u5168\u7b56\u7565\u53caNAT Server\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1 \u00b6 \u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a 10.1.1.29\uff1a2121\u3002\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a \u4e0a\u8ff0\u914d\u7f6e\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\u3002 \u53e6\u5916\uff0cFW\u8fd8\u9700\u589e\u52a0NAT server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u7528\u6237\u80fd\u591f\u4f7f\u7528\u76ee\u7684IP\u5730\u574010.1.1.29:2121\u6765\u8bbf\u95ee Server2\u7684FTP\u670d\u52a1\uff1a HRP_A[FW1] nat server s2 zone untrust protocol tcp global 10.1.1.29 2121 inside 192.168.20.5 21 \u6700\u540e\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u6838\u5fc3\u4ea4\u6362\u673aSwitch-Stack\u7684GE0/0/11\u53caGE0/0/12\u63a5\u53e3\u5fc5\u987b\u914d\u7f6e\u4e3aTrunk\u7c7b\u578b\uff0c\u5e76\u4e14\u653e \u901aVLAN10\u53ca20\u3002 \u914d\u7f6e\u6848\u4f8b 3\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u4e0b\u884cEth-trunk \u5b50\u63a5\u53e3\u90e8\u7f72 VRRP\uff09 \u573a\u666f\u8bf4\u660e\uff1a \u00b6 1) \u5982\u56fe\u6240\u793a\uff0cATAE3.0/E9000\u673a\u6846\u901a\u8fc7\u6838\u5fc3\u4ea4\u6362\u673a\u5806\u53e0\u7ec4\uff08Switch-Stack\uff09\u8fde\u63a5\u5230\u9632\u706b\u5899FW1\u53caFW2\u3002 2) ATAE3.0/E9000 \u76ee \u524d \u89c4 \u5212 \u4e86 2 \u4e2a VLAN \uff0c VLAN10 \u4f7f\u7528 192.168.10.0/24 \u7f51\u6bb5\uff0c VLAN20 \u4f7f\u7528 192.168.20.0/24\u7f51\u6bb5\u3002\u5176\u4e2dVLAN10\u88ab\u89c4\u5212\u5728\u4e86\u9632\u706b\u5899\u7684Trust\u5b89\u5168\u533a\u57df\uff0cVLAN20\u88ab\u89c4\u5212\u5728\u4e86DMZ\u5b89\u5168\u533a\u57df\u3002 \u9632\u706b\u5899FW1\u53caFW2\u90e8\u7f72\u53cc\u673a\u70ed\u5907\uff0c\u5de5\u4f5c\u65b9\u5f0f\u4e3a\u4e3b\u5907\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0bFW1\u4e3a\u4e3b\uff0cFW2\u4e3a\u5907\u3002 \u9632\u706b\u5899FW1\u53caFW2\u4e0a\u4e0b\u884c\u5747\u8fde\u63a5\u7740\u4ea4\u6362\u673a\uff0c\u5176\u4e2dCSW1\u53caCSW2\u4e3a\u5916\u7f51\uff08\u6216\u5ba2\u6237\uff09\u4ea4\u6362\u673a\uff0c\u6309\u56fe\u793a\u8fd0\u884c VRRP\u3002 \u4e3a\u4e86\u589e\u52a0\u9632\u706b\u5899\u4e0e\u4ea4\u6362\u673aSwitch-Stack\u4e4b\u95f4\u4e92\u8054\u94fe\u8def\u7684\u53ef\u9760\u6027\uff0cFW1\u3001FW2\u4e0eSwitch-Stack\u4e4b\u95f4\u90e8\u7f72\u94fe\u8def\u805a\u5408\u3002\u4e3a\u4e86\u589e\u52a0FW1\u4e0eFW2\u4e4b\u95f4\u7684\u5fc3\u8df3\u94fe\u8def\u7684\u53ef\u9760\u6027\u548c\u5e26\u5bbd\uff0c\u4e24\u53f0\u9632\u706b\u5899\u4e4b\u95f4\u91c7\u7528\u805a\u5408\u63a5\u53e3\u4e92\u8054\uff0c \u5c06\u8be5\u805a\u5408\u63a5\u53e3\u7528\u4e8eHRP\u5fc3\u8df3\u3002 \u4e24\u53f0\u9632\u706b\u5899\u7684\u805a\u5408\u63a5\u53e3Eth-trunk1\u7528\u4e8e\u8fde\u63a5\u5185\u7f51\uff0c\u7531\u4e8e\u8be5\u805a\u5408\u63a5\u53e3\u9700\u5bf9\u63a5\u4e24\u4e2aVLAN\uff0c\u56e0\u6b64\u9700\u521b\u5efa\u4e24\u4e2a\u5b50\u63a5\u53e3\u3002\u4e3a\u4e86\u63d0\u4f9b\u5197\u4f59\u7684\u7f51\u5173\uff0cFW1\u53caFW2\u9700\u5728Eth-trunk1\u7684\u4e24\u4e2a\u5b50\u63a5\u53e3\u4e0a\u5404\u8fd0\u884c\u4e00\u7ec4VRRP\uff0c\u5176\u4e2d VLAN10\u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a1\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.10.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN10\u4e1a\u52a1\u7684\u7f51\u5173\uff1b VLAN20\u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a2\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.20.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN20\u4e1a\u52a1\u7684\u7f51\u5173\uff1b \u4e24\u53f0\u9632\u706b\u5899\u7684GE1/0/7\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u5916\u7f51\uff0c\u8fd0\u884c\u53e6\u4e00\u7ec4VRRP\uff0c\u4f7f\u7528\u7684VRID\u4e3a3\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a 10.1.1.1\u3002 \u8981 \u6c42 \u5185 \u90e8 \u7f51 \u6bb5 192.168.10.0/24 \u8bbf \u95ee \u5916 \u90e8 \u7f51 \u7edc \u65f6 \uff0c \u5c06 \u6e90 IP \u5730 \u5740 \u8fdb \u884c \u8f6c \u6362 \uff0c \u8f6c \u6362 \u6210 \u5730 \u5740 \u6c60 10.1.1.10~10.1.1.20\u4e2d\u7684IP\u5730\u5740\u3002\u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a10.1.1.29\uff1a2121\u3002 \u914d\u7f6e\u6307\u5bfc\uff1a \u00b6 \u5b8c\u6210FW1\u548cFW2\u7684\u63a5\u53e3\u57fa\u672c\u914d\u7f6e\u3001\u63a5\u53e3\u52a0\u57df \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210FW1\u548cFW2\u7684VRRP\u914d\u7f6e \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210FW1\u548cFW2\u7684HRP\u914d\u7f6e \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e \u00b6 FW1\u53caFW2\u4f5c\u4e3a\u670d\u52a1\u5668\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\uff0c\u8981\u8d1f\u8d23\u5c06\u670d\u52a1\u5668\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u9700\u5177\u5907\u76f8\u5e94\u7684\u8def\u7531\u4fe1\u606f\u3002\u5728\u672c\u573a\u666f\u4e2d\uff0c\u5f88\u660e\u663e\uff0c\u4e0e\u5916\u90e8\u7f51\u7edc\u5bf9\u63a5\u91c7\u7528\u7684\u662f\u201c\u9759\u6001\u8def\u7531+VRRP\u201d\u7684\u65b9\u6848\u3002\u56e0\u6b64\uff0c \u9700\u5728FW1\u53caFW2\u4e0a\u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\uff0c\u6b64\u5904\u6211\u4eec\u5c06\u4e3a\u5b83\u4eec\u5404\u914d\u7f6e\u4e00\u6761\u9ed8\u8ba4\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3a\u5ba2\u6237\u4ea4\u6362\u673a\u7684VRRP\u7684\u865a\u62dfIP\u5730\u574010.1.1.5\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_A[FW1] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_S[FW2] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u7f3a\u7701\u65f6\uff0c\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\u4e0d\u4f1a\u81ea\u52a8\u4ece\u4e3b\u5899\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\uff0c \u56e0\u6b64\u9759\u6001\u8def\u7531\u9700\u5206\u522b\u5728FW1\u53caFW2\u4e0a\u8fdb\u884c\u914d\u7f6e\u3002 \u5b8c\u6210\u5b89\u5168\u7b56\u7565\u53ca\u6e90IP\u5730\u5740NAT\u914d\u7f6e\uff0c\u4f7f\u5f97Server1\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc \u00b6 \u5728FW1\u4e0a\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u914d\u7f6e\uff1a \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u5728\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff08Security-Policy\uff09\u65f6\uff0c\u9700\u5728\u4e3b\u9632\u706b\u5899\u4e0a\u5b8c\u6210\u76f8\u5e94\u7684\u914d\u7f6e\uff0c\u6240\u505a\u7684\u5b89\u5168\u7b56\u7565\u7684\u76f8\u5173\u914d\u7f6e\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\u3002\u56e0\u6b64\u4e0a\u8ff0test1\u5b89\u5168\u89c4\u5219\u4f1a\u81ea\u52a8\u540c\u6b65\u5230FW2\u3002 \u8981\u6c42\u5185\u90e8\u7f51\u6bb5192.168.10.0/24\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u5c06\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u8f6c\u6362\u6210\u5730\u5740\u6c6010.1.1.10\u81f3 10.1.1.20\u4e2d\u7684\u516c\u7f51IP\u5730\u5740\u3002\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u5b8c\u6210NAT\u7b56\u7565\u7684\u914d\u7f6e\uff1a \u6ce8\u610f\uff1a\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u8fd0\u884c\u7684\u4e0a\u8ff0\u914d\u7f6e\uff0c\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899FW2\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cServer1\u5373\u53ef\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002 \u5b8c\u6210\u5b89\u5168\u7b56\u7565\u53caNAT Server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1 \u00b6 \u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a 10.1.1.29\uff1a2121\u3002\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a \u53e6\u5916\uff0cFW\u8fd8\u9700\u589e\u52a0NAT server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u7528\u6237\u80fd\u591f\u4f7f\u7528\u76ee\u7684IP\u5730\u574010.1.1.29:2121\u6765\u8bbf\u95ee Server2\u7684FTP\u670d\u52a1\uff1a HRP_A[FW1] nat server s2 zone untrust protocol tcp global 10.1.1.29 2121 inside 192.168.20.5 21 \u6700\u540e\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u6838\u5fc3\u4ea4\u6362\u673aSwitch-Stack\u7684Eth-trunk1\u53caEth-trunk2\u63a5\u53e3\u5fc5\u987b\u914d\u7f6e\u4e3aTrunk\u7c7b\u578b\uff0c\u5e76\u4e14 \u653e\u901aVLAN10\u53ca20\u3002 \u914d\u7f6e\u6848\u4f8b4\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0b\u884c\u8fde\u63a5\u5185\u90e8\u4ea4\u6362\u673a\u5e76\u5728Eth- trunk \u5b50\u63a5\u53e3\u90e8\u7f72 VRRP\u3001\u4e0a\u884c\u8fde\u63a5\u5916\u90e8\u4ea4\u6362\u673a\u5e76\u8fd0\u884c OSPF\uff09 \u573a\u666f\u8bf4\u660e\uff1a \u00b6 1) \u5982\u56fe\u6240\u793a\uff0cATAE3.0/E9000\u673a\u6846\u901a\u8fc7\u6838\u5fc3\u4ea4\u6362\u673a\u5806\u53e0\u7ec4\uff08Switch-Stack\uff09\u8fde\u63a5\u5230\u9632\u706b\u5899FW1\u53caFW2\u3002 2) ATAE3.0/E9000 \u76ee \u524d \u89c4 \u5212 \u4e86 2 \u4e2a VLAN \uff0c VLAN10 \u4f7f\u7528 192.168.10.0/24 \u7f51\u6bb5\uff0c VLAN20 \u4f7f\u7528 192.168.20.0/24\u7f51\u6bb5\u3002\u5176\u4e2dVLAN10\u88ab\u89c4\u5212\u5728\u4e86\u9632\u706b\u5899\u7684Trust\u5b89\u5168\u533a\u57df\uff0cVLAN20\u88ab\u89c4\u5212\u5728\u4e86DMZ\u5b89\u5168\u533a\u57df\u3002 \u9632\u706b\u5899FW1\u53caFW2\u90e8\u7f72\u53cc\u673a\u70ed\u5907\uff0c\u5de5\u4f5c\u65b9\u5f0f\u4e3a\u4e3b\u5907\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0bFW1\u4e3a\u4e3b\uff0cFW2\u4e3a\u5907\u3002 \u9632\u706b\u5899FW1\u53caFW2\u4e0a\u4e0b\u884c\u5747\u8fde\u63a5\u7740\u4ea4\u6362\u673a\uff0c\u5176\u4e2dCSW1\u53caCSW2\u4e3a\u5916\u7f51\uff08\u6216\u5ba2\u6237\uff09\u4ea4\u6362\u673a\uff0c\u6309\u56fe\u793a\u8fd0\u884c OSPF\u3002\u4e5f\u5373FW1\u4e0eCSW1\u3001FW2\u4e0eCSW2\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u3002 \u4e3a\u4e86\u589e\u52a0\u9632\u706b\u5899\u4e0e\u4ea4\u6362\u673aSwitch-Stack\u4e4b\u95f4\u4e92\u8054\u94fe\u8def\u7684\u53ef\u9760\u6027\uff0cFW1\u3001FW2\u4e0eSwitch-Stack\u4e4b\u95f4\u90e8\u7f72\u94fe\u8def\u805a\u5408\u3002\u4e3a\u4e86\u589e\u52a0FW1\u4e0eFW2\u4e4b\u95f4\u7684\u5fc3\u8df3\u94fe\u8def\u7684\u53ef\u9760\u6027\u548c\u5e26\u5bbd\uff0c\u4e24\u53f0\u9632\u706b\u5899\u4e4b\u95f4\u91c7\u7528\u805a\u5408\u63a5\u53e3\u4e92\u8054\uff0c \u5c06\u8be5\u805a\u5408\u63a5\u53e3\u7528\u4e8eHRP\u5fc3\u8df3\u3002 \u4e24\u53f0\u9632\u706b\u5899\u7684\u805a\u5408\u63a5\u53e3Eth-trunk1\u7528\u4e8e\u8fde\u63a5\u5185\u7f51\uff0c\u7531\u4e8e\u8be5\u805a\u5408\u63a5\u53e3\u9700\u5bf9\u63a5\u4e24\u4e2aVLAN\uff0c\u56e0\u6b64\u9700\u521b\u5efa\u4e24\u4e2a\u5b50\u63a5\u53e3\u3002\u4e3a\u4e86\u63d0\u4f9b\u5197\u4f59\u7684\u7f51\u5173\uff0cFW1\u53caFW2\u9700\u5728Eth-trunk1\u7684\u4e24\u4e2a\u5b50\u63a5\u53e3\u4e0a\u5404\u8fd0\u884c\u4e00\u7ec4VRRP\uff0c\u5176\u4e2d VLAN10\u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a1\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.10.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN10\u4e1a\u52a1\u7684\u7f51\u5173\uff1b VLAN20\u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a2\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.20.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN20\u4e1a\u52a1\u7684\u7f51\u5173\uff1b \u8981\u6c42\u5185\u90e8\u7f51\u6bb5192.168.10.0/24\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff08\u4e0d\u505a\u6e90\u5730\u5740NAT\uff09\u3002 \u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a 10.10.10.10\uff1a2121\u3002 \u914d\u7f6e\u6307\u5bfc\uff1a \u00b6 \u5b8c\u6210FW1\u548cFW2\u7684\u63a5\u53e3\u57fa\u672c\u914d\u7f6e\u3001\u63a5\u53e3\u52a0\u57df \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210FW1\u548cFW2\u7684VRRP\u914d\u7f6e\uff0c\u4ee5\u53caHRP Track\u914d\u7f6e \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u8bf4\u660e\uff1a\u5728\u90e8\u7f72\u4e86VRRP\u7684\u63a5\u53e3\u4e0a\uff0c\u9632\u706b\u5899\u53ef\u4ee5\u901a\u8fc7VRRP\u7684\u72b6\u6001\u6765\u76d1\u63a7\u63a5\u53e3\u7684\u72b6\u6001\uff0c\u4ece\u800c\u5728\u63a5\u53e3\u6545\u969c\u65f6\u611f\u77e5\u5230\u95ee\u9898\u7684\u53d1\u751f\uff0c\u5e76\u89e6\u53d1\u9632\u706b\u5899\u4e3b\u5907\u5207\u6362\u3002\u7136\u800cFW1\u53caFW2\u7684GE1/0/7\u53e3\u5728\u672c\u573a\u666f\u4e2d\u5e76\u672a\u8fd0\u884cVRRP\uff0c \u56e0\u6b64\u65e0\u6cd5\u901a\u8fc7VRRP\u76d1\u63a7\u8be5\u63a5\u53e3\uff0c\u6240\u4ee5\u9700\u8981\u914d\u7f6e**hrp track**\u547d\u4ee4\uff0c\u4f7f\u5f97\u9632\u706b\u5899\u7684VGMP\u80fd\u591f\u76d1\u63a7\u8fd9\u4e2a\u63a5\u53e3\u7684\u72b6\u6001\u3002\u5728\u4e3b\u9632\u706b\u5899\u7684\u63a5\u53e3\u4e0a\u9700\u4f7f\u7528**hrp track active**\u547d\u4ee4\uff0c\u800c\u5907\u5899\u4f7f\u7528**hrp track standby**\u3002 \u5b8c\u6210FW1\u548cFW2\u7684HRP\u914d\u7f6e \u00b6 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210OSPF\u7684\u914d\u7f6e \u00b6 FW1\u53caFW2\u4f5c\u4e3a\u670d\u52a1\u5668\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\uff0c\u8981\u8d1f\u8d23\u5c06\u670d\u52a1\u5668\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u9700\u5177\u5907\u76f8\u5e94\u7684\u8def\u7531\u4fe1\u606f\u3002\u5728\u672c\u573a\u666f\u4e2d\uff0cFW1\u53caFW2\u4e0e\u5916\u90e8\u4ea4\u6362\u673a\u91c7\u7528OSPF\u7684\u65b9\u5f0f\u5bf9\u63a5\uff0c\u8fdb\u884c\u8def\u7531\u4ea4\u4e92\u3002\u5178\u578b\u7684\u5bf9\u63a5\u573a\u666f\u5982\u4e0b\u3002 FW1\u4e0eCSW1\u91c7\u752810.1.1.0/30\u7684\u7f51\u6bb5\u4e92\u8054\uff1b\u57fa\u4e8e\u8be5\u76f4\u8fde\u63a5\u53e3\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u3002 FW2\u4e0eCSW2\u91c7\u752810.1.1.4/30\u7684\u7f51\u6bb5\u4e92\u8054\uff0c\u57fa\u4e8e\u8be5\u76f4\u8fde\u63a5\u53e3\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u3002 CSW1\u4e0eCSW2\u91c7\u7528\u53e6\u4e00\u4e2a\u4e92\u8054\u7f51\u6bb5\uff0c\u5e76\u4e14\u4e5f\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u3002 \u4e0a\u8ff0\u5efa\u7acb\u90bb\u63a5\u5173\u7cfb\u7684\u63a5\u53e3\u5fc5\u987b\u89c4\u5212\u5728\u76f8\u540c\u7684OSPF\u533a\u57df\uff08Area-ID\u5fc5\u987b\u76f8\u540c\uff0c\u4f8b\u5982\u90fd\u662fArea0\uff09\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u7f3a\u7701\u65f6\uff0cOSPF\u7684\u914d\u7f6e\u4e0d\u4f1a\u81ea\u52a8\u4ece\u4e3b\u5899\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\uff0c\u56e0\u6b64 OSPF\u9700\u5206\u522b\u5728FW1\u53caFW2\u4e0a\u8fdb\u884c\u914d\u7f6e\u3002\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u7684\u914d\u7f6e\uff1a \u6ce8\u610f\uff1a\u5728\u4e0a\u8ff0\u5b89\u5168\u7b56\u7565\u7684\u914d\u7f6e\u4e2d\uff0c\u201cOSPF1\u201d\u81f3\u201cOSPF4\u201d\u89c4\u5219\u7528\u4e8e\u5141\u8bb8FW\u4e0eCSW\u4ea4\u4e92\u7684OSPF\u62a5\u6587\uff0c \u4f7f\u5f97\u4e24\u8005\u80fd\u591f\u6b63\u786e\u5730\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u5e76\u4ea4\u4e92\u8def\u7531\u3002\u5982\u679c\u4e0d\u914d\u7f6e\u76f8\u5173\u5b89\u5168\u89c4\u5219\uff0c\u5219FW\u4e0eCSW\u53ef\u80fd\u5c06\u65e0\u6cd5\u6b63\u786e\u5efa\u7acbOSPF\u90bb\u63a5\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u9700\u5728\u9632\u706b\u5899\u4e0a\u68c0\u67e5OSPF\u90bb\u63a5\u5173\u7cfb\u72b6\u6001\u53ca\u8def\u7531\uff0c\u786e\u4fdd\u9632\u706b\u5899\u5b66\u4e60\u5230\u4e86\u5ba2\u6237\u6240\u901a\u544a\u7684\u8def\u7531\u3002 \u4ee5FW1\u4e3a\u4f8b\uff0c\u67e5\u770b\u5176OSPF\u90bb\u5c45\u8868\uff1a \u5b83\u5df2\u7ecf\u4e0eCSW1\u5efa\u7acb\u4e86\u5168\u6bd7\u90bb\uff08Full\uff09\u7684\u90bb\u63a5\u5173\u7cfb\u3002 \u5b8c\u6210\u5b89\u5168\u7b56\u7565\u914d\u7f6e\uff0c\u4f7f\u5f97Server1\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc \u00b6 \u5728FW1\u4e0a\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u914d\u7f6e\uff1a \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u5728\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff08Security-Policy\uff09\u65f6\uff0c\u9700\u5728\u4e3b\u9632\u706b\u5899\u4e0a\u5b8c\u6210\u76f8 \u5e94\u7684\u914d\u7f6e\uff0c\u6240\u505a\u7684\u5b89\u5168\u7b56\u7565\u7684\u76f8\u5173\u914d\u7f6e\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\u3002\u56e0\u6b64\u4e0a\u8ff0test1\u5b89\u5168\u89c4\u5219\u4f1a\u81ea\u52a8\u540c\u6b65\u5230FW2\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cServer1\u5373\u53ef\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002 \u5b8c\u6210\u5b89\u5168\u7b56\u7565\u53caNAT Server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1 \u00b6 \u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a 10.1.1.29\uff1a2121\u3002\u5728\u4e3b\u9632\u706b\u5899\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a \u53e6\u5916\uff0cFW\u8fd8\u9700\u589e\u52a0NAT server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u7528\u6237\u80fd\u591f\u4f7f\u7528\u76ee\u7684IP\u5730\u574010.1.1.29:2121\u6765\u8bbf\u95ee Server2\u7684FTP\u670d\u52a1\uff1a HRP_A[FW1]nat server s2 zone untrust protocol tcp global 10.1.1.29 2121 inside 192.168.20.5 21 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u672c\u573a\u666f\u4e2d\uff0cFW1\u4e0eCSW1\u91c7\u752810.1.1.0/30\u7f51\u6bb5\u76f4\u8fde\uff0cFW2\u4e0eCSW2\u91c7\u752810.1.1.4/30\u7f51 \u6bb5\u76f4\u8fde\uff0c\u800c\u5206\u914d\u7ed9Server2\u7684\u5916\u7f51IP\u5730\u5740\u662f10.1.1.29\uff0c\u8fd9\u4e2a\u5730\u5740\u5f53\u7136\u662f\u9700\u8981\u5916\u90e8\u7f51\u7edc\uff08\u4f8b\u5982\u5ba2\u6237\uff09\u5206\u914d\u7684\u3002\u76ee\u524d\u8fd9\u4e2a\u5730\u5740\u5e76\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u8bbe\u5907\uff0c\u4ec5\u4ec5\u7528\u4e8e\u76ee\u7684\u5730\u5740NAT\uff0c\u4e3a\u4e86\u8ba9\u5916\u90e8\u7f51\u7edc\u8bbf\u95ee10.1.1.29\u7684\u6d41\u91cf\u80fd\u591f\u987a\u5229\u5230\u8fbeFW1\u6216FW2\uff0c\u9632\u706b\u5899\u5c31\u9700\u8981\u901a\u8fc7OSPF\u5411\u5916\u90e8\u901a\u544a10.1.1.29/32\u8def\u7531\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cFW1\u53caFW2\u4fbf\u4f1a\u5c06\u5176\u8def\u7531\u8868\u4e2d\u768410.1.1.29/32\u8def\u7531\u6ce8\u5165OSPF\uff0c\u5e76\u5411CSW1\u53caCSW2 \u8fdb\u884c\u901a\u544a\uff0c\u800c\u540e\u8005\u5373\u53ef\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u76f8\u5e94\u7684\u8def\u7531\u3002 \u9632\u706b\u5899\u53cc\u673a\u914d\u7f6e\u6ce8\u610f\u4e8b\u9879 7.4.9.1 \u53cc\u673a\u70ed\u5907\u4e2d\u7684OSPF\u53caNAT \u00b6 \u5728\u4e0a\u56fe\u4e2d\uff0cFW1/FW2\u4e0eC1\u8fd0\u884cOSPF\u3002\u73b0\u5728\u5ba2\u6237\u4e3a\u9632\u706b\u5899\u5206\u914d\u4e86\u4e00\u4e2a\u5730\u5740\u6bb510.1.1.16/30\u4f5c\u4e3aNAT\u4f7f\u7528\u3002\u9632\u706b\u5899\u4f7f\u7528\u8fd9\u4e2a\u516c\u7f51\u5730\u5740\u6bb5\u4f5c\u4e3aNAT\u5730\u5740\u6c60\uff0c\u7136\u540e\u90e8\u7f72\u4e86nat-policy\uff0c\u5f53S1/S2\u8bbf\u95ee\u5ba2\u6237\u7f51\u7edc\u65f6\uff0c\u5c06\u6e90\u5730\u5740\u8fdb\u884c\u8f6c\u6362\u3002\u4e3a\u4e86\u8ba9\u8bbf\u95ee\u5ba2\u6237\u7f51\u7edc\u7684\u4e1a\u52a1\u6d41\u91cf\u80fd\u591f\u6b63\u5e38\u5f80\u8fd4\uff0c \u9700\u8981\u901a\u8fc7OSPF \u5411\u5ba2\u6237\u8bbe\u5907C1\u901a\u544a\u8fd9\u6761\u8def\u7531 10.1.1.16/30\u3002\u5728FW1/FW2\u914d\u7f6e10.1.1.16/30\u7684\u9ed1\u6d1e\u8def\u7531\uff0c\u7136\u540e\u91cd\u53d1\u5e03\u5230OSPF\u5373\u53ef\u3002 \u53e6\u5916\uff0c10.1.1.16\u523010.1.1.19\u8fd9\u56db\u4e2a\u5730\u5740\u90fd\u662f\u53ef\u7528\u7684\uff0c\u4e5f\u5c31\u662f\u7f51\u7edc\u5730\u574010.1.1.16\u53ca\u5e7f\u64ad\u5730\u574010.1.1.19\u90fd\u53ef\u7528\u4e8eNAT\uff0c\u56de\u7a0b\u7684\u6d41\u91cf\u4e0d\u4f1a\u6709\u95ee\u9898\uff0c\u5b9e\u6d4b\u53ef\u884c\u3002 7.5 \u9632\u706b\u5899\u5e38\u89c1\u95ee\u9898 \u9632\u706b\u5899\u53cc\u673a\u90e8\u7f72VRRP\u65f6\u53d1\u9001\u6570\u636e\u7684\u6e90\u5730\u5740 \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cFW1\u53caFW2\u8fd0\u884c\u53cc\u673a\u70ed\u5907\u3002\u5728\u53cc\u65b9\u7684\u5916\u7f51\u63a5\u53e3GE0/0/3\u4e0a\u90e8\u7f72\u4e86\u4e00\u7ec4VRRP\uff0c\u865a\u62dfIP \u5730\u5740\u4e3a192.168.30.1\uff0c\u5f53\u6211\u4eec\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0aping 192.168.30.100\u65f6\uff0c\u7531\u4e8e\u9632\u706b\u5899\u7684\u5916\u7f51\u63a5\u53e3\u4e0e\u76ee\u6807IP\u5730\u5740192.168.30.100\u76f4\u8fde\u53ef\u8fbe\uff0c\u56e0\u6b64\u6e90\u5730\u5740\u4e3aFW1\u7684GE0/0/3\u63a5\u53e3IP\u5730\u5740\uff0c\u540c\u7406\u5728FW2\u4e0aping\u76ee\u6807IP\u5730\u5740\u7684\u8bdd\uff0c \u6570\u636e\u5305\u6e90\u5730\u5740\u4e3aFW2\u7684GE0/0/2\u63a5\u53e3\u5730\u5740\u3002\u5f53\u6211\u4eec\u8981\u6d4b\u8bd5\u9632\u706b\u5899VRRP\u865a\u62dfIP\u5730\u5740\u5230\u76ee\u6807IP\u7684\u53ef\u8fbe\u6027\u65f6\uff0c\u5219\u4f7f\u7528ping -a 192.168.30.1 192.168.30.100\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u7ec6\u8282\uff0c\u90a3\u5c31\u662f\u5f53\u6211\u4eec\u5728FW1\u53caFW2\u4e0a\u914d\u7f6eVRRP\u540e\uff0c \u5728\u4e24\u53f0\u9632\u706b\u5899\u7684\u8def\u7531\u8868\u4e2d\uff0c\u4f1a\u51fa\u73b0\u4e00\u6761192.168.30.1/32\u7684\u4e3b\u673a\u8def\u7531\uff0c\u4e5f\u5c31\u662f\u63cf\u8ff0\u8fd9\u4e2a\u865a\u62dfIP\u5730\u5740\u7684\u4e3b\u673a\u8def\u7531\u3002 \u8003\u8651\u53e6\u5916\u4e00\u79cd\u60c5\u51b5\uff0c\u90a3\u5c31\u662f\u5982\u679cFW1\u53caFW2\u7684GE0/0/3\u63a5\u53e3\u7684VRRP\u865a\u62dfIP\u5730\u5740\u4e0e\u63a5\u53e3\u7684\u5b9e\u9645IP\u5e76\u4e0d\u5728\u540c\u4e00\u4e2a\u7f51\u6bb5\u7684\u60c5\u51b5\uff0c\u4f8b\u5982\u865a\u62dfIP\u5730\u5740\u4e3a192.168.50.1/24\uff0c\u8fd9\u5728\u9632\u706b\u5899\u4e0a\u662f\u5141\u8bb8\u7684\u3002\u5b8c\u6210VRRP\u7684\u914d\u7f6e\u540e\uff0cFW1\u53ca FW2\u5728\u672c\u5730\u8def\u7531\u8868\u4e2d\u4f1a\u4ea7\u751f192.168.50.0/24\u7f51\u6bb5\u8def\u7531\uff08\u4e0eGE0/0/3\u63a5\u53e3\u5173\u8054\uff09\u4ee5\u53ca192.168.50.1/32\u4e3b\u673a\u8def\u7531\u3002\u6b64\u65f6\uff0c\u5f53FW1\u76f4\u63a5ping 192.168.50.100\u65f6\uff0c\u6570\u636e\u5305\u7684\u6e90\u5730\u5740\u5c31\u662f192.168.50.1\uff08\u56e0\u4e3a\u5b83\u5728\u8be5\u7f51\u6bb5\u4e2d\u4ec5\u62e5\u6709\u8fd9\u4e2aIP\u5730\u5740\uff09\u3002\u5f53\u7136\uff0c\u6b64\u65f6FW\u53bb\u8bbf\u95ee192.168.50.100\u7684\u6570\u636e\u5305\uff0c\u662f\u53d7\u63a7\u4e8eLocal\u5230untrust\u7684\u57df\u95f4\u5305\u8fc7\u6ee4\u89c4\u5219\u7684\u3002\u4ee5\u4e0a\u73b0\u8c61\u5747\u5728E1000E-X V300R001C00SPC700\u7248\u672c\u4e0a\u9a8c\u8bc1\u8fc7\u3002 \u9632\u706b\u5899\u5bf9\u56de\u7a0b\u6d41\u91cf\u7684\u5904\u7406\u7ec6\u8282\u4e0e\u76f8\u5173\u6848\u4f8b \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0cSW\u5c06\u9ed8\u8ba4\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u8bbe\u7f6e\u4e3a12.1.1.2\u3002\u5f53PC\u8bbf\u95ee11.1.1.1\u65f6\uff0c\u4f8b\u5982PC ping 11.1.1.1\uff0c \u6d41\u91cf\u7684\u8f6c\u53d1\u8def\u5f84\u5982\u56fe\u6240\u793a\u3002\u4e00\u4e2a\u5173\u952e\u7684\u7ec6\u8282\u662f\uff0cFW\u5c06PC ping 11.1.1.1\u7684\u53bb\u7a0b\u6d41\u91cf\u4eceGE0/0/4\u53d1\u51fa\uff0c\u5e76\u521b\u5efa Session\uff0c\u800c\u5728\u5176GE0/0/7\u63a5\u53e3\u4e0a\u63a5\u6536\u56de\u7a0b\u6d41\u91cf\uff0c\u7531\u4e8e\u8fd9\u4e9b\u56de\u7a0b\u6d41\u91cf\u80fd\u591f\u547d\u4e2d\u5df2\u5b58\u5728\u7684Session\uff08\u4e94\u5143\u7ec4\uff09\uff0c \u56e0\u6b64FW\u5c06GE0/0/7\u63a5\u53e3\u4e0a\u63a5\u6536\u7684\u56de\u7a0b\u6d41\u91cf\u653e\u884c\u3002\u5f53\u7136\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u53ea\u662f\u60f3\u8ba8\u8bba\u9632\u706b\u5899\u5bf9\u8fd9\u79cd\u6d41\u91cf\u7684\u5904\u7406\u65b9\u5f0f \uff08\u662f\u8f6c\u53d1\uff0c\u800c\u4e0d\u662f\u4e22\u5f03\uff09\uff0c\u4e0d\u8fc7\u8fd9\u79cd\u6d41\u91cf\u7684\u4f20\u8f93\u8def\u5f84\u5e76\u4e0d\u88ab\u8ba4\u4e3a\u662f\u5408\u7406\u7684\u3002 \u518d\u770b\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5728\u4e0a\u56fe\u4e2d\uff0cSW\u4f9d\u7136\u5c06\u9ed8\u8ba4\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u8bbe\u7f6e\u4e3a12.1.1.2\uff0c\u800c\u9632\u706b\u5899\u5219\u914d\u7f6e\u53bb\u5f802.2.2.2/32 \uff08SW\u7684Loopback\u7ba1\u7406\u5730\u5740\uff09\u7684\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u5219\u4e3a11.1.1.1\u3002\u5982\u6b64\u4e00\u6765\uff0c\u5f53SW\u4ee52.2.2.2\u4e3a\u6e90\u53bbping PC\u65f6\uff0c \u6d41\u91cf\u7684\u8f6c\u53d1\u8def\u5f84\u5982\u56fe\u6240\u793a\u3002\u4e00\u4e2a\u6709\u8da3\u7684\u7ec6\u8282\u662f\uff0c\u867d\u7136\u6d41\u91cf\u662f\u4ece\u9632\u706b\u5899\u7684DMZ\u63a5\u53e3\u8fdb\u5165\uff0c\u4eceUntrust\u63a5\u53e3\u51fa\u53bb\uff0c \u4f46\u662f\u8fd9\u4e2a\u6d41\u91cf\u5728FW\u4e0a\u7559\u4e0b\u7684Session\u5982\u4e0b\uff1a \u5728\u5904\u7406\u56de\u7a0b\u6d41\u91cf\u65f6\uff0cFW\u7ecf\u8fc7\u8def\u7531\u67e5\u8be2\uff0c\u53d1\u73b0\u53bb\u5f802.2.2.2\u7684\u6570\u636e\u9700\u4eceGE0/0/4\u8f6c\u53d1\uff0c\u800c\u8be5\u63a5\u53e3\u5c5e\u4e8eTrust\u533a\u57df\uff0c \u56e0\u6b64\u5b83\u4fee\u6539Session\uff0c\u5c06\u5165\u7ad9\u533a\u57df\u4fee\u6539\u4e3aTrust\u3002\u4e0b\u9762\u6765\u770b\u4e00\u4e2a\u5b9e\u9645\u7684\u4f8b\u5b50\uff1a FW1/FW2\u90e8\u7f72\u53cc\u673a\u4e3b\u5907\u3002\u4e24\u53f0\u9632\u706b\u5899\u7684GE0/0/3\u63a5\u53e3\u90fd\u52a0\u5165untrust\u533a\u57df\uff0cGE0/0/1\u63a5\u53e3\u52a0\u5165Trust\u533a\u57df\u3002 FW1/FW2\u4e0e\u5ba2\u6237\u91c7\u7528VRRP+\u9759\u6001\u8def\u7531\u7684\u65b9\u5f0f\u8fdb\u884c\u5bf9\u63a5\u3002 \u73b0\u5728\u5ba2\u6237\u7f51\u7edc\u4e2d\u768410.10.10.1\u5ba2\u6237\u7aef\u53ef\u4ee5\u8bbf\u95ee\u4e3b\u9632\u706b\u5899\u7684\u7ba1\u7406\u5730\u5740\u2014\u2014Loopback0 11.1.1.1/32\uff0c\u4f46\u662f\u65e0\u6cd5\u8bbf\u95ee\u5907\u4efd\u9632\u706b\u5899FW2\u7684Loopback0\u3002\u5f5310.10.10.1\u5728ping 11.1.1.2\u65f6\uff0c\u53ef\u4ee5\u5728FW2\u4e0a\u67e5\u770b\u5230\u5982\u4e0bSession\uff1a \u7559\u610f\u5230\uff0cinbound\u65b9\u5411\u7684\u6d41\u91cf\u6b63\u597d\u662f5\u4e2a\u62a5\u6587\uff08\u5b9e\u9645ping\u4e865\u4e2a\u62a5\u6587\uff09\uff0c\u800coutbound\u5374\u662f0\uff0c\u56e0\u6b64\u6000\u7591\u62a5\u6587\u662f \u5df2\u7ecf\u5230\u8fbe\u4e86FW2\uff0c\u800cFW2\u5e76\u6ca1\u6709\u56de\u590d\u8fd9\u4e9bICMP\u62a5\u6587\uff0c\u68c0\u67e5FW2\u7684\u8def\u7531\u540e\u53d1\u73b0\uff0c\u5176\u5e76\u6ca1\u6709\u53bb\u5f8010.10.10.0/24 \u7f51\u6bb5\u7684\u8def\u7531\u3002\u589e\u52a0\u8def\u7531\u540e\uff0c\u95ee\u9898\u89e3\u51b3\u3002\u53e6\u5916\uff0c\u5728\u4e0a\u8ff0session\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230\u62a5\u6587\u662f\u4ecetrust\u533a\u57df\u8fdb\u6765\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u5224\u65ad10.10.10.1\u8bbf\u95ee11.1.1.2\u7684\u62a5\u6587\u662f\u4eceFW1\u8fdb\u6765\uff0c\u7136\u540e\u7531FW1\u8f6c\u53d1\u7ed9FW2\uff0c\u6700\u7ec8FW2\u5728\u81ea\u5df1\u7684 GE0/0/1\u53e3\u4e0a\u6536\u5230\u8fd9\u4e2a\u62a5\u6587\uff0c\u56e0\u6b64\u5f62\u6210\u8fd9\u6837\u7684\u8868\u9879\u3002 \u5728FW2\u589e\u52a0\u53bb\u5f8010.10.10.1\u7684\u8def\u7531\uff08\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u76f4\u63a5\u6307\u5411\u5ba2\u6237\u5730\u5740\uff09\u540e\uff0c10.10.10.1\u5373\u53ef\u8bbf\u95ee11.1.1.2\uff0c\u800c\u6d41\u91cf\u5982\u4e0b\u6240\u793a\uff1a \u5f53FW2\u589e\u52a0\u53bb\u5f8010.10.10.1\u7684\u8def\u7531\u540e\uff0c\u5f53\u540e\u8005\u8bbf\u95ee11.1.1.2\u65f6\uff0cFW2\u7684session\u5982\u4e0b\uff1a \u62a5\u6587\u660e\u660e\u662f\u4eceFW2\u7684GE0/0/1\u63a5\u53e3\uff08trust\u533a\u57df\uff09\u8fdb\u6765\uff0c\u800c\u5b9e\u9645session\u663e\u793a\u7684\u5374\u662f\u4eceuntrust\u533a\u57df\u8fdb\u6765\uff08\u5b9e\u9645\u4e0a \u8fd9\u662f\u7b26\u5408\u4e8b\u5b9e\u7684\uff09\uff0c\u56e0\u6b64\uff0c\u663e\u7136\u662f\u9632\u706b\u5899\u5728\u987a\u5229\u5730\u5c06\u56de\u7a0b\u62a5\u6587\u8f6c\u53d1\u51fa\u53bb\u540e\uff08\u4eceuntrust\u533a\u57df\u9001\u51fa\uff09\uff0c\u4fee\u6b63\u4e86 session\u91cc\u7684\u57df\u95f4\u4fe1\u606f\u3002 \u6ce8\uff1a\u8fd9\u91cc\u6240\u8ba8\u8bba\u7684\u9632\u706b\u5899\uff0c\u5747\u662fEudemon1000E-X\uff08V300R001C00SPC700\uff09\u3002 VPN VPN \u57fa\u7840\u77e5\u8bc6 \u00b6 VPN\u6982\u8ff0 \u00b6 \u5047\u8bbe\u6211\u6709\u4e00\u4e2a\u516c\u53f8\uff0c\u5728\u5168\u56fd\u5404\u5730\u6709\u7740\u8bb8\u591a\u5206\u652f\u673a\u6784\u548c\u7f51\u70b9\uff0c\u540c\u65f6\u53c8\u6709\u5916\u51fa\u516c\u5e72\u7684\u804c\u5458\uff0c\u5982\u679c\u8fd9\u4e9b\u7f51\u7edc\u4e4b\u95f4\u9700\u8981\u8fdb\u884c\u4e92\u8bbf\uff0c\u4e00\u79cd\u6700\u7ecf\u6d4e\u7684\u65b9\u5f0f\u662f\u8d2d\u4e70Internet\u63a5\u5165\u7ebf\u8def\uff0c\u4f8b\u5982ADSL\u7684\u7ebf\u8def\uff0c\u5ec9\u4ef7\u4e14\u4f7f\u7528\u65b9\u4fbf\uff0c\u4f46\u662f\u5982\u679c\u76f4\u63a5\u5728Internet\u8fd9\u4e2a\u516c\u7f51\u4e0a\u4f20\u8f93\u4f01\u4e1a\u5185\u90e8\u6570\u636e\uff0c\u5c06\u9762\u4e34\u7740\u5f88\u9ad8\u7684\u5b89\u5168\u98ce\u9669\uff0c\u56e0\u4e3aInternet\u4f5c\u4e3a\u4e00\u4e2a\u5168\u7403\u6027\u8d28\u7684\u516c\u6709\u7f51\u7edc\uff0c\u5b89\u5168\u6027\u662f\u975e\u5e38\u4f4e\u7684\u3002\u57fa\u4e8e\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u8003\u8651\u5728\u901a\u4fe1\u7f51\u7edc\u4e4b\u95f4\u67b6\u8bbe\u4e13\u7528\u7ebf\u8def\uff0c\u4e5f\u5c31\u662f\u4e13\u7ebf\uff0c\u4e13\u7ebf\u867d\u7136\u80fd\u63d0\u9ad8\u5b89\u5168\u6027\u5e76\u63d0\u4f9b\u7ebf\u8def\u7684\u4e13\u7528\u6027\uff0c\u4f46\u662f\u4ef7\u683c\u8f83\u4e3a\u6602\u8d35\uff0c\u90a3\u4e48\u6709\u6ca1\u6709\u4e00\u79cd\u6bd4\u8f83\u5ec9\u4ef7\u3001\u5b89\u5168\u3001\u53ef\u9760\u3001\u53ef\u4fe1\u8d56\u3001\u7075\u6d3b\u7684\u65b9\u5f0f\u5b9e\u73b0\u6211\u4eec\u8de8\u516c\u7f51\u7684\u79c1\u6709\u901a\u4fe1\u9700\u6c42\u5462\uff1f Virtual Private Network\uff0c\u7b80\u79f0VPN\u3002\u5c31\u662f\u4e00\u79cd\u975e\u5e38\u7406\u60f3\u7684\u89e3\u51b3\u65b9\u6848\u3002IETF\u8349\u6848\u7406\u89e3\u57fa\u4e8eIP\u7684VPN\u4e3a\uff1a \" \u4f7f\u7528IP\u673a\u5236\u4eff\u771f\u51fa\u4e00\u4e2a\u79c1\u6709\u7684\u5e7f\u57df\u7f51\"\uff0c\u662f\u901a\u8fc7\u79c1\u6709\u7684\u96a7\u9053\u6280\u672f\u5728\u516c\u5171\u6570\u636e\u7f51\u7edc\u4e0a\u4eff\u771f\u4e00\u6761\u70b9\u5230\u70b9\u7684\u4e13\u7ebf\u6280\u672f \u3002\u8bf4\u767d\u70b9\u5c31\u662f\uff0c\u6211\u4eec\u8fd0\u7528VPN\u6280\u672f\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5229\u7528\u516c\u6709\u7f51\u7edc\u5b9e\u73b0\u79c1\u6709\u7684\u6570\u636e\u901a\u4fe1\uff0c\u76f8\u5f53\u4e8e\u6211\u4eec\u5728\u901a\u4fe1\u8282\u70b9\u4e4b\u95f4\uff0c\u8de8\u516c\u6709\u7f51\u7edc\u5efa\u7acb\u4e00\u4e2a\u79c1\u6709\u7684\u3001\u4e13\u7528\u7684\u865a\u62df\u901a\u4fe1\u96a7\u9053\uff0c\u800c\u4e14\u57fa\u4e8e\u4e0d\u540c\u7684VPN\u6280\u672f\uff0c\u6211\u4eec\u8fd8\u80fd\u8ba9\u8fd9\u4e2a\u901a\u4fe1\u96a7\u9053\u5177\u6709\u5b89\u5168\u6027\u3001\u53ef\u4fe1\u4efb\u3001\u53ef\u9760\u6027\u3001\u5b8c\u6574\u6027\u68c0\u9a8c\u7b49\u7279\u70b9\u3002 VPN\u6709\u4e24\u4e2a\u663e\u8457\u7684\u7279\u70b9\uff1a\u4e13\u7528\u578b\u3001\u865a\u62df\u6027\u3002 VPN\u7684\u5206\u7c7b \u00b6 \u6309\u4e1a\u52a1\u7528\u9014\u5206\u7c7b \u00b6 Access VPN \u00b6 \u8fdc\u7a0b\u62e8\u5165VPN\uff0c\u8fd9\u79cdVPN\u7c7b\u578b\u53ef\u4ee5\u63d0\u4f9b\u5185\u90e8\u5458\u5de5\u5728\u51fa\u5dee\u65f6\u7684\u8fdc\u7a0bVPN\u62e8\u5165\u670d\u52a1\u3002\u901a\u8fc7\u5728\u4f01\u4e1a\u7684\u5b89\u5168\u8bbe\u5907\u4e0a\u90e8\u7f72\u8be5\u79cdVPN\u6280\u672f\uff0c\u5458\u5de5\u53ef\u4ee5\u5728\u4efb\u4f55\u80fd\u591f\u63a5\u5165\u516c\u7f51\u7684\u89d2\u843d\uff0c\u901a\u8fc7\u8fdc\u7a0b\u62e8\u5165VPN \u62e8\u5165\u5230\u4f01\u4e1a\u5185\u7f51\uff0c\u4ece\u800c\u8bbf\u95ee\u5185\u7f51\u8d44\u6e90\u3002 Intranet VPN \u00b6 \u8fd9\u79cdVPN\u662f\u5229\u7528VPN\u6280\u672f\uff0c\u5b9e\u73b0\u5728\u516c\u7f51\u4e0a\u5c5e\u4e8e\u8be5\u4f01\u4e1a\u7684\u4e0d\u540c\u7ad9\u70b9\u6216\u529e\u4e8b\u5904\u4e4b\u95f4\u7684\u79c1\u6709\u901a\u4fe1\u3002 Extranet VPN \u00b6 \u5b9e\u73b0\u4f01\u4e1a\u5185\u90e8\u7f51\u7edc\u4e0e\u5408\u4f5c\u4f19\u4f34\u6216\u6388\u6743\u673a\u6784\u4e4b\u95f4\u7684\u865a\u62df\u4e13\u7528\u7f51\u7edc\u3002 \u6309\u5b9e\u73b0\u7684\u5c42\u6b21\u5206\u7c7b \u00b6 Lay3\u96a7\u9053VPN \u00b6 VPN\u7684\u5de5\u4f5c\u5c42\u5728\u7f51\u7edc\u5c42\u3002\u4f8b\u5982\uff1aGRE\u3001IPSec\u7b49\u3002 Lay2\u96a7\u9053VPN \u00b6 VPN\u7684\u5de5\u4f5c\u5c42\u5728\u6570\u636e\u94fe\u8def\u5c42\u3002\u4f8b\u5982L2TP\u3001PPTP\u7b49\u3002 VPN\u7684\u5e38\u89c1\u6280\u672f \u00b6 \u96a7\u9053\u6280\u672f\uff1a \u00b6 \u5229\u7528\u5c01\u88c5\u53ca\u89e3\u5c01\u88c5\u6280\u672f\uff0c\u80fd\u591f\u5728\u901a\u4fe1\u7ad9\u70b9\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2a\u70b9\u5230\u70b9\u7684\u865a\u62df\u901a\u4fe1\u96a7\u9053\u3002\u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0c\u4e3a\u4e86\u5b9e\u73b0192.168.1.0/24\u53ca192.168.2.0/24\u4e24\u4e2a\u4fe1\u606f\u5c9b\u5c7f\u7684\u4e92\u901a\uff0c\u6211\u4eec\u53ef\u80fd\u8981\u8ba9\u4e2d\u95f4\u7684\u4f20\u8f93\u7f51\u7edc\u90fd\u6709\u5173\u4e8e\u8fd9\u4e24\u4e2a\u7f51\u7edc\u7684\u8def\u7531\uff0c\u4f46\u8fd9\u5c31\u76f8\u5f53\u4e8e\u66b4\u9732\u4e86\u8fd9\u4e24\u4e2a\u7f51\u7edc\uff1b\u53c8\u6216\u8005\u6211\u4eec\u5e76\u4e0d\u5e0c\u671b\u4e2d\u95f4\u7684\u4f20\u8f93\u7f51\u7edc\u77e5\u9053\u8fd9\u4e24\u4e2a\u7f51\u7edc\u7684\u5b58\u5728\uff0c\u90a3\u4e48\u53ef\u4ee5\u91c7\u7528\u96a7\u9053\u6280\u672f\uff0c\u5728\u4e24\u4e2a\u8fb9\u754c\u8def\u7531\u5668\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761\u96a7\u9053\uff08Tunnel\uff09\uff0c\u8fd9\u6761tunnel\u4e00\u65e6\u5efa\u7acb\u597d\u4e4b\u540e\uff0c\u76f8\u5f53\u4e8e\u5728\u4e24\u4e2a\u7f51\u7edc\u95f4\u5efa\u7acb\u8d77\u4e00\u6761\u76f4\u8fde\u7684\u901a\u9053\uff0c\u5f53192.168.1.1\u7528\u6237\u8981\u8bbf\u95ee192.168.2.1\u65f6\uff0c\u62a5\u6587\u5728\u88ab\u8fb9\u754c\u8def\u7531\u5668\u9001\u5230\u516c\u7f51\u7f51\u7edc\u524d\u4f1a\u5c01\u88c5\u4e0a\u4e00\u5c42\u65b0\u7684IP\u5934\u90e8\uff0c\u800c\u8fd9\u5c42IP\u5934\u90e8\u4e2d\u6e90IP\u5730\u5740\u4e3a\u96a7\u9053\u7684\u672c\u5730\u6e90\u5730\u5740\uff0c\u76ee\u7684IP\u5730\u5740\u4e3a\u96a7\u9053\u7684\u76ee\u7684\u7aefIP\uff0c\u6570\u636e\u5305\u968f\u540e\u88ab\u9001\u5165\u516c\u6709\u7f51\u7edc\uff0c\u800c\u516c\u6709\u7f51\u7edc\u4e2d\u7684\u8def\u7531\u5668\u53ea\u4f1a\u9488\u5bf9\u62a5\u6587\u7684\u5916\u5c42IP\u5934\u90e8\u4e5f\u5c31\u662f\u96a7\u9053IP\u5934\u8fdb\u884c\u8def\u7531\uff0c\u6700\u7ec8\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u5230\u53e6\u4e00\u7aef\u7684\u8fb9\u754c\u8def\u7531\u5668\u4e0a\uff0c\u7531\u5176\u89e3\u5c01\u88c5\uff0c \u5e76\u8fd8\u539f\u6210\u539f\u59cb\u7684IP\u62a5\u6587\u8f6c\u53d1\u5230\u76ee\u7684\u5730\u3002\u96a7\u9053\u673a\u5236\u662f\u4e00\u79cd\u975e\u5e38\u91cd\u8981\u7684\u601d\u60f3\uff0c\u88ab\u5e7f\u6cdb\u5e94\u7528\u5728\u5404\u79cdVPN\u6280\u672f\u4e2d\u3002 \u8eab\u4efd\u8ba4\u8bc1\u6280\u672f\uff1a \u00b6 \u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u6280\u672f\uff0c\u53ef\u4ee5\u5bf9\u5efa\u7acb\u901a\u4fe1\u96a7\u9053\u7684\u4e24\u7aef\u8bbe\u5907\u8fdb\u884c\u76f8\u4e92\u8ba4\u8bc1\uff0c\u4e5f\u53ef\u4ee5\u5bf9\u8fdc\u7a0b\u63a5\u5165\u7f51\u7edc\u7684\u7528\u6237\u8fdb\u884c\u8ba4\u8bc1\uff0c\u786e\u4fdd\u6570\u636e\u4ea4\u4e92\u548c\u7f51\u7edc\u63a5\u5165\u7684\u5b89\u5168\u6027\u3002 \u6570\u636e\u52a0\u5bc6\u6280\u672f\uff1a \u00b6 \u6570\u636e\u52a0\u5bc6\u6280\u672f\u7528\u4e8e\u5b9e\u73b0VPN\u7684\u5b89\u5168\u6027\u3002\u901a\u8fc7\u6570\u636e\u52a0\u5bc6\u6280\u672f\uff0c\u660e\u6587\u7684\u3001\u53d7\u4fdd\u62a4\u7684\u6570\u636e\u4f1a\u88ab\u6570\u636e\u53d1\u9001\u65b9\u4f7f\u7528\u52a0\u5bc6\u7b97\u6cd5\u52a0\u5bc6\u4ece\u800c\u5f62\u6210\u5bc6\u6587\uff0c\u5bc6\u6587\u5728\u4f20\u8f93\u5230\u6570\u636e\u63a5\u6536\u65b9\u540e\u518d\u7531\u63a5\u6536\u65b9\u89e3\u5bc6\uff0c\u8fd9\u6837\u4e00\u6765\u6211\u4eec\u7684\u6570\u636e\u5728\u516c\u7f51\u4e2d\u4f20\u8f93\u65f6\u5b89\u5168\u6027\u5c31\u5f97\u5230\u4e86\u63d0\u9ad8\u3002 \u76ee\u524d\u52a0\u5bc6\u7b97\u6cd5\u4e3b\u8981\u5206\u4e3a\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u53ca\u975e\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u3002\u5728\u8bb2\u89e3\u8fd9\u4e24\u4e2a\u7b97\u6cd5\u4e4b\u524d\u6211\u4eec\u5148\u4e86\u89e3\u52a0\u5bc6\u7b97\u6cd5\u548c\u79d8\u94a5\u7684\u6982\u5ff5\u3002\u4e3e\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u4f8b\u5b50\uff1a\u5047\u8bbe\u6570\u5b572\u662f\u6211\u4eec\u7684\u660e\u6587\uff0c\u73b0\u5728\u8981\u628a\u660e\u6587\u52a0\u5bc6\uff0c\u6211\u91c7\u7528\u4e00\u4e2a \u201c\u4e58\u65b9\u201d\u7684\u52a0\u5bc6\u7b97\u6cd5\uff0c\u628a\u8fd9\u4e2a\u660e\u6587\u52a0\u5bc6\uff0c\u52a0\u5bc6\u540e\u7684\u5bc6\u6587\u662f\u5728\u660e\u6587\u7684\u57fa\u7840\u4e0a\u76843\u6b21\u65b9\uff0c\u6240\u4ee5\u5bc6\u6587\u5c31\u662f8\uff0c\u56e0\u6b64\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6211\u7528\u7684\u52a0\u5bc6\u7b97\u6cd5\u662f\u201c\u4e58\u65b9\u201d\uff0c\u800c\u79d8\u94a5\u662f\u201c3\u201d\uff0c\u660e\u6587\u662f\u201c2\u201d\uff0c\u52a0\u5bc6\u540e\u7684\u5bc6\u6587\u662f\u201c8\u201d\u3002 \u5728\u5b89\u5168\u9886\u57df\uff0c\u52a0\u5bc6\u7b97\u6cd5\u90fd\u662f\u516c\u5f00\u7684\uff0c\u4f8b\u5982\u4e0a\u9762\u4e3e\u7684\u8fd9\u4f8b\u5b50\uff0c\u4e58\u65b9\u8fd9\u4e2a\u6570\u5b66\u7b97\u6cd5\u5927\u5bb6\u90fd\u77e5\u9053\uff0c\u4f46\u662f\u6211\u4eec\u4f7f\u7528\u7684\u8fd9\u4e2a\u79d8\u94a5\uff0c\u4e5f\u5c31\u201c\u4e58\u51e0\u6b21\u65b9\u201d\uff0c\u5374\u662f\u7531\u52a0\u3001\u89e3\u5bc6\u53cc\u65b9\u7ea6\u5b9a\u7684\uff0c\u8fd9\u624d\u662f\u5173\u952e\u3002 \u76ee\u524d\u6709\u4e24\u79cd\u52a0\u5bc6\u7b97\u6cd5\uff1a\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u3001\u975e\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u3002\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u6307\u7684\u662f\u52a0\u5bc6\u548c\u89e3\u5bc6\u8fc7\u7a0b\u4f7f\u7528\u76f8\u540c\u7684\u79d8\u94a5\u3002\u800c\u975e\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u5219\u4e0d\u540c\uff0c\u5b83\u4f7f\u7528\u4e24\u628a\u79d8\u94a5\uff0c\u52a0\u5bc6\u8fc7\u7a0b\u4f7f\u7528\u7684\u662f\u516c\u94a5\uff0c\u89e3\u5bc6\u8fc7\u7a0b\u4f7f\u7528\u79c1\u94a5\uff0c\u516c\u94a5\u548c\u79c1\u94a5\u662f\u6210\u5bf9\u7684\u3002\u76ee\u524d\u4e1a\u5185\u6709\u591a\u79cd\u52a0\u5bc6\u7b97\u6cd5\uff0c\u8fd9\u4e9b\u7b97\u6cd5\u53ef\u4ee5\u88abVPN\u6280\u672f\u6574\u5408\u4f7f\u7528\uff0c\u4ee5\u63d0\u9ad8\u5b89\u5168\u6027\u3002\u8be6\u7ec6\u7684\u5185\u5bb9\u8bf7\u89c1IPSecVPN\u7ae0\u8282\u3002 \u79d8\u94a5\u7ba1\u7406\u6280\u672f\uff1a \u00b6 \u4e0a\u9762\u5df2\u7ecf\u8bf4\u4e86\uff0c\u65e0\u8bba\u662f\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\uff0c\u6216\u8005\u662f\u975e\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\uff0c\u7b97\u6cd5\u662f\u516c\u5f00\u7684\uff0c\u4f46\u662f\u79d8\u94a5\u662f\u5fc5\u987b\u8981\u59a5\u5584\u4fdd\u5b58\u7684\uff0c\u5982\u679c\u79d8\u94a5\u6cc4\u9732\uff0c\u90a3\u4e48\u6570\u636e\u4f20\u8f93\u5c31\u6ca1\u6709\u4efb\u4f55\u5b89\u5168\u6027\u53ef\u8a00\uff0c\u52a0\u5bc6\u7b97\u6cd5\u4e5f\u5c31\u5931\u53bb\u4e86\u610f\u4e49\u3002\u56e0\u6b64\u79d8\u94a5\u7684\u4ea7\u751f\u3001\u5206\u53d1\u548c\u7ba1\u7406\u5c31\u5f02\u5e38\u91cd\u8981\u3002 \u6570\u636e\u9a8c\u8bc1\u6280\u672f\uff1a \u00b6 \u6570\u636e\u9a8c\u8bc1\u6280\u672f\uff0c\u4e5f\u79f0\u4e3a\u54c8\u5e0c\u7b97\u6cd5\uff0c\u7528\u4e8e\u68c0\u9a8c\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u662f\u5426\u88ab\u7be1\u6539\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u539f\u59cb\u6570\u636e123456\uff0c\u8fd9\u4e2a\u6570\u636e\u5982\u679c\u76f4\u63a5\u5c31\u8fd9\u4e48\u4f20\u8f93\u5230\u63a5\u6536\u65b9\uff0c\u63a5\u6536\u65b9\u5982\u4f55\u786e\u5b9a\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u6ca1\u6709\u88ab\u7be1\u6539\u5462\uff1f\u4f7f\u7528\u54c8\u5e0c\u7b97\u6cd5\u53ef\u4ee5\u641e\u5b9a\u8fd9\u4e2a\u95ee\u9898\u3002\u5728\u53d1\u9001\u65b9\uff0c\u4f7f\u7528\u54c8\u5e0c\u7b97\u6cd5\uff08\u5982MD5\uff09 \u5bf9\u539f\u59cb\u6570\u636e\u505a\u54c8\u5e0c\u53ef\u5f97\u5230\u4e00\u4e2a\u54c8\u5e0c\u7ed3\u679c\u3002\u54c8\u5e0c\u7b97\u6cd5\u6709\u8fd9\u4e48\u51e0\u4e2a\u7279\u70b9\uff1a\u7406\u8bba\u4e0a\u7684\u4e0d\u53ef\u9006\u3001\u5b9a\u957f\u7684\u8f93\u51fa\u3001\u96ea\u5d29\u6548\u5e94\u7b49\u3002\u539f\u59cb\u6570\u636e\u7ecf\u8fc7\u54c8\u5e0c\u7b97\u6cd5\u8ba1\u7b97\u5f97\u5230\u7684\u54c8\u5e0c\u7ed3\u679c\u662f\u56fa\u5b9a\u957f\u5ea6\u7684\u6570\u636e\uff0c\u8fd9\u4e2a\u6570\u636e\u770b\u4e0a\u53bb\u5c31\u662f\u4e00\u5806\u4e71\u7801\uff0c\u800c\u4e14\u7406\u8bba\u4e0a\u662f\u65e0\u6cd5\u901a\u8fc7\u54c8\u5e0c\u7ed3\u679c\u63a8\u5bfc\u5230\u539f\u59cb\u6570\u636e\u7684\uff0c\u53e6\u5916\uff0c\u539f\u59cb\u6570\u636e\u5373\u4f7f\u53ea\u6709\u4e00\u4e2a\u6781\u5176\u7ec6\u5fae\u7684\u53d8\u5316\uff0c\u5f97\u5230\u7684\u54c8\u5e0c\u7ed3\u679c\u662f\u622a\u7136\u4e0d\u540c\u7684\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u96ea\u5d29\u6548\u5e94\u3002 \u53d1\u9001\u65b9\u5c06\u539f\u59cb\u6570\u636e\u548c\u81ea\u5df1\u9488\u5bf9\u539f\u59cb\u6570\u636e\u505a\u4e86\u54c8\u5e0c\u4e4b\u540e\u5f97\u5230\u7684\u7ed3\u679c\u4e00\u5e76\u53d1\u9001\u7ed9\u63a5\u6536\u65b9\uff0c\u90a3\u4e48\u63a5\u6536\u65b9\u5728\u5176\u672c\u5730\uff0c\u4e5f\u5bf9\u63a5\u6536\u5230\u7684\u6570\u636e\u4f7f\u7528\u76f8\u540c\u7684\u7b97\u6cd5\u505a\u54c8\u5e0c\uff0c\u7136\u540e\u5c06\u81ea\u5df1\u8ba1\u7b97\u5f97\u5230\u7684\u54c8\u5e0c\u7ed3\u679c\u4e0e\u5bf9\u65b9\u53d1\u9001\u8fc7\u6765\u7684\u54c8\u5e0c\u7ed3\u679c\u505a\u6bd4\u5bf9\uff0c\u5982\u679c\u6bd4\u5bf9\u76f8\u540c\uff0c\u5219\u8bf4\u660e\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u6ca1\u6709\u88ab\u7be1\u6539\uff0c\u56e0\u6b64\uff0c\u4f7f\u7528\u54c8\u5e0c\u7b97\u6cd5\uff0c\u53ef\u4ee5\u786e\u4fdd\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7684\u5b8c\u6574\u6027\u3002 GRE \u00b6 GRE\u7684\u57fa\u672c\u6982\u5ff5 \u00b6 GRE\u6982\u8ff0 \u00b6 Generic Routing Encapsulation\uff0c\u7b80\u79f0GRE\uff0c\u662f\u4e00\u79cdVPN\u6280\u672f\uff0c\u901a\u8fc7GRE\u6280\u672f\uff0c\u6211\u4eec\u80fd\u591f\u5bf9\u7f51\u7edc\u5c42\u6570\u636e\u8fdb\u884c\u5c01\u88c5\uff0c\u5c01\u88c5\u540e\u7684\u6570\u636e\u80fd\u591f\u5728\u516c\u5171\u7f51\u7edc\u4e2d\u4f20\u8f93\u3002 GRE\u63d0\u4f9b\u4e86\u4e00\u79cd\u96a7\u9053\u673a\u5236\u3002 \u6211\u4eec\u770b\u4e0a\u56fe\uff0c\u4e24\u4e2a\u4fe1\u606f\u5c9b\u5c7f192.168.1.0/24\u53ca192.168.2.0/24\u8981\u4e92\u76f8\u901a\u4fe1\uff0c\u4e00\u79cd\u6700\u76f4\u63a5\u7684\u529e\u6cd5\u5c31\u662f\u6253\u901a\u5168\u7f51\u7684\u8def\u7531\uff0c\u8ba9\u4e2d\u95f4\u7684\u516c\u6709\u4f20\u8f93\u7f51\u7edc\u4e2d\u7684\u6240\u6709\u8def\u7531\u5668\u90fd\u6709\u5230\u8fbe\u8fd9\u4e24\u4e2a\u7f51\u6bb5\u7684\u8def\u7531\u3002\u4f46\u662f\u53ef\u80fd\u6709\u8fd9\u6837\u7684\u9700\u6c42\uff1a\u4e0d\u5e0c\u671b\u4e2d\u95f4\u7684\u516c\u6709\u7f51\u7edc\u77e5\u9053\u8fd9\u4e24\u4e2a\u7f51\u6bb5\u7684\u5b58\u5728\uff0c\u4f46\u662f\u4ecd\u7136\u5e0c\u671b\u4ed6\u4eec\u80fd\u591f\u4e92\u8bbf\u3002 \u8fd9\u91cc\u5c31\u53ef\u4ee5\u4f7f\u7528GRE\u8fd9\u79cdVPN\u6280\u672f\u3002GRE\u7684\u5de5\u4f5c\u673a\u5236\u975e\u5e38\u7b80\u5355\uff0c\u5c31\u662f\u5728\u539f\u59cb\u7684IP\u62a5\u6587\u7684\u57fa\u7840\u4e0a\uff0c\u52a0\u4e0a\u4e00\u4e2a\u65b0\u7684GRE\u7684\u5934\u90e8\uff0c\u7136\u540e\u518d\u5957\u4e0a\u4e00\u4e2a\u65b0\u7684\u96a7\u9053IP\u5934\u3002\u8fd9\u4e2a\u65b0\u7684\u96a7\u9053IP\u5934\u90e8\u7528\u4e8e\u5728\u4e2d\u95f4\u7684\u516c\u6709\u7f51\u7edc\u4e2d\u4f20\u8f93\u88ab\u5c01\u88c5\u7684\u539f\u59cbIP\u6570\u636e\u5305\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5373\u4f7f\u4e2d\u95f4\u516c\u6709\u7f51\u7edc\u6ca1\u6709192.168.1.0/24\u53ca2.0/24\u7684\u8def\u7531\uff0c\u4e24\u4e2a\u4fe1\u606f\u5c9b\u5c7f\u4e5f\u80fd\u901a\u8fc7\u6211\u4eec\u9884\u5148\u5efa\u7acb\u597d\u7684\u96a7\u9053\u8fdb\u884c\u6570\u636e\u4e92\u901a\uff0c\u4e92\u8bbf\u6570\u636e\u88ab\u96a7\u9053\u8fb9\u754c\u8bbe\u5907\u5c01\u88c5\u4e0aGRE\u5934\u90e8\u4ee5\u53ca\u65b0\u7684\u96a7\u9053\u5934\u90e8\uff0c\u7136\u540e\u9001\u5165\u516c\u6709\u7f51\u7edc\uff0c\u6570\u636e\u5305\u5728\u516c\u6709\u7f51\u7edc\u4e2d\u4f20\u8f93\u65f6\uff0c\u8f6c\u53d1\u6570\u636e\u5305\u7684\u4e2d\u95f4\u8bbe\u5907\u53ea\u4f1a\u67e5\u770b\u96a7\u9053IP\u5934\u5e76\u8fdb\u884c\u8def\u7531\uff0c\u6700\u7ec8\u6570\u636e\u5305\u88ab\u8f6c\u53d1\u5230\u96a7\u9053\u5bf9\u7aef\u7684\u8fb9\u754c\u8def\u7531\u5668\u4e0a\uff0c\u5b83\u5c06\u6570\u636e\u5305\u7684\u96a7\u9053IP\u5934\u53caGRE\u5934\u90e8\u89e3\u9664\u5c01\u88c5\uff0c\u7136\u540e\u5c06\u91cc\u5934\u627f\u8f7d\u7684\u539f\u59cbIP\u62a5\u6587\u8f6c\u53d1\u5230\u76ee\u7684\u5730\u3002 GRE\u7684\u7279\u70b9 \u00b6 \u53ef\u7528\u4e8e\u5728\u7ad9\u70b9\u4e4b\u95f4\u5efa\u7acb\u70b9\u5230\u70b9\u7684\u4e13\u7528\u901a\u4fe1\u96a7\u9053\uff1b GRE\u5934\u90e8\u7684\u901a\u7528\u6027\u975e\u5e38\u9ad8\uff0c\u80fd\u627f\u8f7d\u5404\u79cd\u7c7b\u578b\u7684\u4e0a\u5c42\u534f\u8bae\uff0c\u4f8b\u5982IPv4\u3001IPv6\u7b49\u62a5\u6587\uff1b GRE\u7684\u5b9e\u73b0\u673a\u5236\u53ca\u914d\u7f6e\u975e\u5e38\u7b80\u5355\uff0c\u91c7\u7528\u624b\u5de5\u65b9\u5f0f\u5efa\u7acb\u96a7\u9053\uff1b \u4e0d\u63d0\u4f9b\u6570\u636e\u52a0\u5bc6\u529f\u80fd\uff0c\u53ef\u914d\u5408IPSec\u6765\u589e\u5f3a\u5b89\u5168\u6027\uff1b \u4e0d\u63d0\u4f9bQoS\u80fd\u529b\uff1b \u5efa\u7acb\u597d\u7684GRE\u96a7\u9053\u652f\u6301\u52a8\u6001\u8def\u7531\u534f\u8bae\u3002 GRE\u7684\u914d\u7f6e\u53ca\u5b9e\u73b0 \u00b6 \u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\u3002\u5176\u4e2d\uff0cR2\u53ea\u914d\u7f6e\u63a5\u53e3IP\u5730\u5740\uff0c\u5e76\u4e0d\u914d\u7f6e\u4efb\u4f55\u9759\u6001\u8def\u7531\uff0c\u4e5f\u4e0d\u8fd0\u884c\u52a8\u6001\u8def\u7531\u534f\u8bae\u3002\u5728 R1\u53caR2\u4e4b\u95f4\u5efa\u7acbGRE\u96a7\u9053\uff0c\u4f7f\u5f97192.168.1.0/24\u4e0e192.168.2.0/24\u7f51\u6bb5\u80fd\u591f\u4e92\u901a\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 \u5728\u4ee5\u4e0a\u914d\u7f6e\u4e2d\uff0c**source gigabitEthernet0/0/0**\u547d\u4ee4\u7528\u4e8e\u6307\u5b9a\u96a7\u9053\u5728\u672c\u8bbe\u5907\u7684\u6e90\u63a5\u53e3\uff0c\u8fd9\u6761\u547d\u4ee4\u540c\u65f6\u4f1a\u5c06\u96a7 \u9053\u7684\u6e90\u5730\u5740\u6307\u5b9a\u4e3a\u8be5\u63a5\u53e3\u7684\u5730\u5740\uff0c\u4e5f\u537310.1.12.1\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u4f7f\u7528**source 10.1.12.1**\u547d\u4ee4\u53ef\u4ee5\u5b9e\u73b0\u7c7b\u4f3c\u7684\u6548\u679c\u3002 R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 \u5b8c\u6210\u914d\u7f6e\u540e\uff0cPC1\u5373\u53ef\u4e0ePC2\u76f8\u4e92\u901a\u4fe1\u3002\u5b9e\u9645\u7684\u62a5\u6587\u4ea4\u4e92\u8fc7\u7a0b\u5982\u4e0b\uff1a IPSecVPN \u00b6 \u6280\u672f\u80cc\u666f \u00b6 \u4e0a\u56fe\u6240\u793a\u662f\u4e00\u5bb6\u89c4\u6a21\u4e0d\u5c0f\u7684\u516c\u53f8\uff0c\u5b83\u9664\u4e86\u4e2d\u5fc3\u7ad9\u70b9\u5916\u8fd8\u6709\u5206\u5e03\u5728\u5168\u56fd\u5404\u5730\u7684\u591a\u4e2a\u5206\u652f\u673a\u6784\u6216\u529e\u4e8b\u5904\uff0c\u4ee5\u53ca\u51fa\u5dee\u5728\u5916\u7684\u79fb\u52a8\u529e\u516c\u4eba\u5458\uff0c\u8fd9\u4e9b\u8282\u70b9\u4e4b\u95f4\u8981\u60f3\u4e92\u76f8\u901a\u4fe1\uff0c\u4e00\u79cd\u6700\u7b80\u5355\u6700\u7ecf\u6d4e\u7684\u65b9\u6cd5\u5c31\u662f\u5229\u7528Internet\u7ebf\u8def\u6765\u5b9e\u73b0\u6570\u636e\u4e92\u8bbf\uff0c\u4f46\u662fInternet\u6bd5\u7adf\u662f\u4e00\u4e2a\u5171\u4eab\u7684\u7f51\u7edc\u73af\u5883\uff0c\u5b58\u5728\u592a\u591a\u7684\u5b89\u5168\u5a01\u80c1\uff0c\u76f4\u63a5\u5728Internet\u4e0a\u4f20\u8f93\u516c\u53f8\u7684\u673a\u5bc6\u6570\u636e\u662f\u6781\u4e3a\u5371\u9669\u7684\u3002\u5982\u679c\u79df\u7528\u4e13\u7ebf\u5462\uff1f\u4e13\u7ebf\u662f\u4e00\u79cd\u4e13\u6709\u7ebf\u8def\uff0c\u56fa\u7136\u66f4\u52a0\u5b89\u5168\uff0c\u4f46\u662f\u5374\u4e5f\u66f4\u4e3a\u6602\u8d35\uff0c\u800c\u4e14\u4e13\u7ebf\u53c8\u65e0\u6cd5\u63d0\u4f9b\u5bf9\u79fb\u52a8\u6027\u7684\u652f\u6301\u3002IPSecVPN\u53ef\u4ee5\u5b8c\u7f8e\u7684\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002 IPSecVPN\u662f\u4e00\u79cd\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\u3001\u975e\u5e38\u6210\u719f\u7684VPN\u6280\u672f\u3002\u5229\u7528IPSecVPN\u6211\u4eec\u53ef\u4ee5\u653e\u5fc3\u7684\u5728\u516c\u7f51\u4e0a\u4f20\u8f93\u673a\u5bc6\u6570\u636e\uff0c\u56e0\u4e3aIPSec\u53ef\u4ee5\u63d0\u4f9b\u5b89\u5168\u6027\u3001\u5b8c\u6574\u6027\u3001\u8eab\u4efd\u8ba4\u8bc1\u3001\u9632\u91cd\u653e\u653b\u51fb\u7b49\u7b49\u591a\u79cd\u7279\u6027\u3002IPSecVPN\u7684\u7ec4\u7f51\u4e5f\u662f\u5f88\u7075\u6d3b\uff0c\u9664\u4e86\u5178\u578b\u7684\u7ad9\u70b9\u5230\u7ad9\u70b9\u7684IPSecVPN\u7ec4\u7f51\uff0c\u8fd8\u652f\u6301\u8fdc\u7a0b\u62e8\u5165\u5f0f\u7684\u7ec4\u7f51\u3002 IPSecVPN\u521d\u76f8\u8bc6 \u00b6 \u4e0a\u56fe\u6240\u793a\u7684\u4e24\u4e2a\u7ad9\u70b9\uff0c\u5982\u679c\u76f4\u63a5\u5728Internet\u4e0a\u8fdb\u884c\u6570\u636e\u4f20\u8f93\uff0c\u662f\u5b58\u5728\u8bf8\u591a\u5b89\u5168\u9690\u60a3\u7684\u3002\u4f7f\u7528IPSecVPN\u6280\u672f\u80fd\u591f\u4e3a\u6570\u636e\u4f20\u8f93\u4fdd\u9a7e\u62a4\u822a\uff0c\u8fd9\u662f\u4e00\u4e2a\u5178\u578b\u7684\u7ad9\u70b9\u5230\u7ad9\u70b9\uff08Site to Site\u6216\u8005LAN to LAN\uff09\u7684IPSecVPN\u5e94\u7528\u573a\u666f\uff0c \u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u8de8Internet\u901a\u4fe1\uff0c\u5728\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e0a\u90e8\u7f72IPSecVPN\u4ece\u800c\u4fdd\u62a4\u4e24\u5730\u5185\u7f51\u7684\u4e92\u8bbf\u6d41\u91cf\u3002\u5728\u5b8c\u6210 IPSecVPN\u7684\u90e8\u7f72\u540e\uff0c\u4e24\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e4b\u95f4\u5c06\u4f1a\u8fdb\u884cIPSecVPN\u96a7\u9053\u7684\u5efa\u7acb\uff1a \u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u4e24\u7aef\u9996\u5148\u4f1a\u534f\u5546\u7528\u4e8e\u4fdd\u62a4\u96a7\u9053\u7684\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u7b49\uff0c\u5728\u5bf9\u9f50\u6240\u7528\u7684\u5404\u79cd\u7b97\u6cd5\u6216\u7b56\u7565\u540e\uff0c \u8fdb\u884c\u516c\u5171\u503c\u7684\u4ea4\u6362\u4ee5\u4fbf\u4e24\u8005\u80fd\u591f\u751f\u6210\u76f8\u5339\u914d\u7684\u79d8\u94a5\u7528\u4e8e\u540e\u7eed\u7684\u52a0\u5bc6\u53ca\u54c8\u5e0c\uff0c\u7136\u540e\u8fdb\u884c\u5bf9\u7b49\u4f53\u8eab\u4efd\u8ba4\u8bc1\uff0c\u4e5f\u5c31\u662f\u9a8c\u8bc1\u4e24\u53f0\u9632\u706b\u5899\u7684\u8eab\u4efd\u3002\u4e24\u7aef\u7528\u4e8e\u8eab\u4efd\u8ba4\u8bc1\u6240\u4ea4\u4e92\u7684\u62a5\u6587\u5c31\u662f\u4f7f\u7528\u4e0a\u6587\u6240\u63d0\u53ca\u7684\u52a0\u5bc6\u7b97\u6cd5\u548c\u54c8\u5e0c\u7b97\u6cd5\u8fdb\u884c\u4fdd\u62a4\u7684\u3002 \u4e0a\u9762\u7684\u5de5\u4f5c\u5b8c\u6210\u540e\uff0c\u53cc\u65b9\u8fd8\u4f1a\u8fdb\u4e00\u6b65\u534f\u5546\u7528\u4e8e\u4fdd\u62a4\u4e24\u5730\u7ad9\u70b9\u5185\u7f51\u4e4b\u95f4\u901a\u4fe1\u6d41\u91cf\u7684\u5404\u79cd\u5b89\u5168\u7b56\u7565\uff08IPSec Proposal\uff09\uff1a\u5b89\u5168\u534f\u8bae\u7c7b\u578b\u3001\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u7b49\u7b49\u3002\u4e0a\u8ff0\u5de5\u4f5c\u90fd\u5b8c\u6210\u4e4b\u540e\uff0c\u4e00\u6761IPSecVPN\u7684\u96a7\u9053\u5c31\u5efa\u7acb\u8d77\u6765\u4e86\u3002 \u8fd9\u76f8\u5f53\u4e8e\u5728Internet\u4e0a\u62c9\u8d77\u4e86\u4e00\u6761\u9690\u5f62\u7684\u3001\u53d7\u4fdd\u62a4\u7684\u901a\u4fe1\u901a\u9053\uff0c\u7ad9\u70b91\u30012\u4e4b\u95f4\u7684\u53d7\u4fdd\u62a4\u6d41\u91cf\uff08\u4e5f\u79f0\u4e3aIPSecVPN \u611f\u5174\u8da3\u6d41\u91cf\uff09\u5728\u4f20\u8f93\u65f6\u4f1a\u201c\u8fdb\u5165\u201d\u8be5\u96a7\u9053\u5185\u8fdb\u884c\u4f20\u8f93\uff0c\u4f20\u8f93\u7684\u8fc7\u7a0b\u4e2d\u6570\u636e\u662f\u88ab\u52a0\u5bc6\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u4fdd\u8bc1\u901a\u4fe1\u7684 \u673a\u5bc6\u6027\uff0c\u540c\u65f6\u6570\u636e\u8fd8\u4f1a\u88ab\u8fdb\u884c\u5b8c\u6574\u6027\u6821\u9a8c\uff0c\u4ee5\u4fbf\u68c0\u6d4b\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u662f\u5426\u88ab\u7be1\u6539\u3002\u5c31\u62ff\u4e0a\u9762\u7684\u8fd9\u5f20\u56fe\u6765 \u8bf4\uff0c\u53d7\u4fdd\u62a4\u7684\u6570\u636e\u662f\u7eff\u8272\u7684\u7ba1\u9053\uff0c\u8fd9\u90e8\u5206\u6570\u636e\u5728\u9001\u5230\u7ad9\u70b9\u9632\u706b\u5899\u540e\u4f1a\u88ab\u8bc6\u522b\u4e3aIPSecVPN\u611f\u5174\u8da3\u7684\u6d41\u91cf\uff0c\u4e8e \u662f\u88ab\u52a0\u5bc6\u4ee5\u53ca\u54c8\u5e0c\uff0c\u5e76\u5957\u4e0a\u4e00\u4e2a\u5b89\u5168\u534f\u8bae\u7684\u5934\u90e8\uff08\u4f8b\u5982ESP\u5934\u90e8\uff09\uff0c\u4e4b\u540e\u4e3a\u4e86\u8ba9\u8fd9\u4e2a\u6570\u636e\u5305\u80fd\u591f\u5728Internet \u4e0a\u4f20\u8f93\u5230\u53e6\u4e00\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\uff0c\u6211\u4eec\u8fd8\u4f1a\u5728\u4e0a\u8ff0\u57fa\u7840\u4e0a\uff0c\u518d\u4e3a\u6570\u636e\u5957\u4e0a\u4e00\u4e2a\u65b0\u7684IP\u5934\uff0c\u6216\u79f0\u4e3a\u65b0\u7684\u96a7\u9053\u5934\u90e8\u3002 \u4e0a\u56fe\u5c31\u662f\u4e00\u4e2a\u5728IPSecVPN\u73af\u5883\u4e0b\u6570\u636e\u4f20\u8f93\u7684\u793a\u4f8b\uff0c\u7ad9\u70b91\u7684192.168.1.0/24\u7f51\u7edc\u6709\u4e00\u4e2a\u8282\u70b9\u8981\u60f3\u8bbf\u95ee\u7ad9\u70b92\uff0c \u6b64\u523b\u5b83\u53ef\u76f4\u63a5\u4f7f\u7528192.168.2.x\u5f62\u5f0f\u7684\u76ee\u6807IP\u5730\u5740\u6765\u8bbf\u95ee\u7ad9\u70b92\uff0c\u8fd9\u662f\u5f97\u76ca\u4e8eIPSecVPN\u7684\u96a7\u9053\u5316\u6280\u672f\uff0c\u4f7f\u5f97 \u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u53ef\u4ee5\u4f7f\u7528\u5bf9\u7aef\u7684\u771f\u5b9eIP\u5730\u5740\u6765\u8fdb\u884c\u4e92\u8bbf\u3002 \u660e\u6587\u7684\u6570\u636e\u5305\u5230\u8fbe\u7ad9\u70b91\u7684\u51fa\u53e3\u9632\u706b\u5899\u540e\uff0c\u9632\u706b\u5899\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2aIPSecVPN\u611f\u5174\u8da3\u7684\u6d41\u91cf\uff0c\u56e0\u6b64\u5c06\u8be5\u62a5\u6587\u4f7f\u7528\u9884\u5148\u534f\u5546\u597d\u7684\u52a0\u5bc6\u7b56\u7565\u548c\u79d8\u94a5\u8fdb\u884c\u52a0\u5bc6\uff0c\u540c\u65f6\u5bf9\u52a0\u5bc6\u540e\u7684\u6570\u636e\u8fdb\u884c\u54c8\u5e0c\u8ba1\u7b97\uff0c\u6700\u540e\u5c06\u8fd9\u4e9b\u5904\u7406\u540e\u7684\u6570\u636e \u5305\u5728\u4e00\u4e2a\u5b89\u5168\u534f\u8bae\u7684\u5934\u90e8\u540e\u9762\uff0c\u7136\u540e\u518d\u5957\u4e0a\u4e00\u5c42\u65b0\u7684IP\u5934\u90e8\uff0c\u8fd9\u5c42\u65b0\u7684IP\u5934\u90e8\u79f0\u4e3a\u96a7\u9053\u5934\uff0c\u5176\u6e90\u5730\u5740\u4e3a 100.1.1.1\uff0c\u76ee\u7684\u5730\u5740\u4e3a200.2.2.2\u3002\u6ce8\u610f\uff0c\u8fd9\u4e2a\u6e90\u3001\u76ee\u7684\u5730\u5740\u90fd\u662f\u516c\u7f51IP\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u5728\u9632\u706b\u5899\u5916\u7f51\u63a5\u53e3\u4e0a\u7684IP\u5730\u5740\uff0c\u6700\u540e\u8fd9\u4e2a\u6570\u636e\u5305\u5c31\u88ab\u9001\u4e0a\u4e86Internet\u4f20\u8f93\u5230\u5bf9\u7aef\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e0a\u3002 \u7531\u4e8e\u6570\u636e\u5305\u5df2\u7ecf\u88ab\u5b89\u5168\u5904\u7406\u8fc7\uff0c\u56e0\u6b64\u6211\u4eec\u5e76\u4e0d\u62c5\u5fc3\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u88ab\u7a83\u542c\uff0c\u6216\u8005\u88ab\u7be1\u6539\u3002\u6570\u636e\u5305\u5728\u5230\u8fbe\u7ad9\u70b92\u7684\u9632\u706b\u5899\u540e\uff0c\u5b83\u5c06\u6570\u636e\u5305\u7684\u96a7\u9053\u5934\u5265\u53bb\uff0c\u5229\u7528\u5b89\u5168\u534f\u8bae\u5305\u5934\u4e2d\u7684\u76f8\u5173\u4fe1\u606f\u67e5\u8be2\u5230\u5b58\u50a8\u5728\u672c\u5730\u7684\u3001\u76f8\u5e94\u7684\u5b89\u5168\u7b56\u7565\u3001\u79d8\u94a5\u7b49\u4fe1\u606f\uff0c\u7136\u540e\u5bf9\u6570\u636e\u5305\u8fdb\u884c\u5b8c\u6574\u6027\u6821\u9a8c\u3001\u89e3\u5bc6\uff0c\u6700\u7ec8\u5c06\u89e3\u5bc6\u540e\u7684\u660e\u6587\u6570\u636e\u53d1\u5230\u76ee\u7684\u5730 192.168.2.0/24\u7f51\u7edc\u3002 IPSec\u534f\u8bae\u6846\u67b6 \u00b6 \u6982\u8ff0 \u00b6 IPSec\u662f\u4e00\u79cd\u5f00\u653e\u7684\u6807\u51c6\u6846\u67b6\u7ed3\u6784\uff0c\u662f\u7531IETF\u6307\u5b9a\u7684\u6807\u51c6\uff0c\u662f\u7279\u5b9a\u7684\u901a\u4fe1\u65b9\u4e4b\u95f4\u5728IP\u5c42\u901a\u8fc7\u52a0\u5bc6\u548c\u6570\u636e\u6458\u8981\uff08hash\uff09\u7b49\u624b\u6bb5\uff0c\u6765\u4fdd\u8bc1\u6570\u636e\u5305\u5728\u516c\u7f51\u4e0a\u4f20\u8f93\u65f6\u7684\u673a\u5bc6\u6027(confidentiality) \u3001\u5b8c\u6574\u6027(data integrity) \u548c\u771f\u5b9e\u6027(origin authentication)\u7b49\u3002IPSec\u53ea\u80fd\u5de5\u4f5c\u5728IP\u5c42\uff0c\u8981\u6c42\u4e58\u5ba2\u534f\u8bae\u548c\u627f\u8f7d\u534f\u8bae\u90fd\u662fIP\u534f\u8bae\u3002 IPSec\u5e76\u4e0d\u662f\u4e00\u4e2a\u5355\u4e00\u7684\u534f\u8bae\uff0c\u800c\u662f\u4e00\u4e2a\u6846\u67b6\u3002 \u534f\u8bae\u6846\u67b6 \u00b6 IPSec\u7684\u6846\u67b6\u5305\u542b\u82e5\u5e72\u4e2a\u534f\u8bae\u3002\u6700\u91cd\u8981\u7684\u5c31\u662fIKE\u548c\u4e24\u4e2a\u5b89\u5168\u534f\u8bae\uff08AH\u3001ESP\uff09\u3002\u5176\u4e2dIKE\uff08Internet\u79d8\u94a5\u4ea4\u6362\u534f\u8bae\uff09\u662f\u6838\u5fc3\u548c\u6839\u672c\uff0c\u8fd9\u662f\u4e2a\u6df7\u5408\u534f\u8bae\uff0c\u5b83\u5305\u542b\u4e09\u4e2a\u534f\u8bae\uff1a \u5176\u5b9e\u6211\u4eec\u53ea\u8981\u5173\u6ce8\u5176\u4e2d\u6700\u91cd\u8981\u7684\u534f\u8bae\uff0cISAKMP\u5c31\u597d\u4e86\uff0c\u5b83\u662f\u6574\u4e2aIKE\u7684\u6838\u5fc3\uff0c\u56e0\u6b64\u7ecf\u5e38\u5728\u5404\u79cd\u573a\u5408\u4e0b\u7684\u6280\u672f\u4ea4\u6d41\u4e2d\uff0c\u6211\u4eec\u4f1a\u5c06ISAKMP\u548cIKE\u7b3c\u7edf\u7684\u7b49\u540c\u8d77\u6765\u8bf4\u3002 ISAKMP\u8d1f\u8d23IPSecVPN\u4e2d\u975e\u5e38\u91cd\u8981\u7684\u51e0\u9879\u5de5\u4f5c\uff1a\u8d1f\u8d23\u5efa\u7acb\u548c\u7ef4\u62a4SA\uff08IKE SA\u53caIPsecSA\uff09\u3001\u534f\u5546\u534f\u8bae\u53c2\u6570\uff08\u5982\u52a0\u5bc6\u3001\u9a8c\u8bc1\u534f\u8bae\u7b49\uff09\u3001\u5bf9\u7b49\u4f53\u8eab\u4efd\u9a8c\u8bc1\u3001\u534f\u5546\u5bc6\u94a5\u3001\u4ee5\u53ca\u5bf9\u5bc6\u94a5\u7684\u7ba1\u7406\u3002ISAKMP\u8fd8\u5b9a\u4e49\u4e86\u6d88\u606f\u4ea4\u6362\u7684\u4f53\u7cfb\u7ed3\u6784\uff0c\u5305\u542b\u5bf9\u7b49\u4f53\u4e4b\u95f4\u7528\u4e8eIPSec\u534f\u5546\u7684\u62a5\u6587\u683c\u5f0f\u3001\u72b6\u6001\u673a\u7b49\u3002 IPSec\u534f\u8bae\u6846\u67b6\u7684\u53e6\u4e00\u4e2a\u91cd\u8981\u7684\u534f\u8bae\u7c7b\u578b\uff1a\u5b89\u5168\u534f\u8bae\uff0c\u5b83\u662f\u771f\u6b63\u8d1f\u8d23\u4fdd\u62a4\u7528\u6237\u6570\u636e\u7684\u534f\u8bae\uff0c\u5305\u62ec\u4e24\u4e2a\uff1a AH\u53caESP\uff1a \u5176\u4e2dAH\u534f\u8bae\u80fd\u591f\u63d0\u4f9b\u6570\u636e\u5b8c\u6574\u6027\u6821\u9a8c\u3001\u6e90\u8ba4\u8bc1\u3001\u9632\u91cd\u653e\u653b\u51fb\u7b49\uff0c\u4f46\u77ed\u677f\u662f\u4e0d\u652f\u6301\u6570\u636e\u52a0\u5bc6\u3002ESP\u5219\u652f\u6301\u6570\u636e\u6e90\u8ba4\u8bc1\u3001\u5b8c\u6574\u6027\u6821\u9a8c\u3001\u9632\u91cd\u653e\u653b\u51fb\u53ca\u6570\u636e\u52a0\u5bc6\u3002 IKE\u7684\u4e24\u4e2a\u9636\u6bb5 \u00b6 \u5f53\u6211\u4eec\u5728\u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u90e8\u7f72IPSecVPN\u65f6\uff0cIPSecVPN\u7684\u4e00\u4e2a\u611f\u5174\u8da3\u62a5\u6587\u5230\u8fbe\u540e\uff0c\u5c06\u89e6\u53d1IKE\u7684\u5de5\u4f5c\u3002IKE\u901a\u8fc7\u4e24\u4e2a\u9636\u6bb5\u5efa\u7acb\u4e00\u6761\u5b89\u5168\u7684IPSecVPN\u96a7\u9053\uff0c\u4f7f\u5f97\u53d7\u4fdd\u62a4\u7684\u6d41\u91cf\u80fd\u591f\u5728\u516c\u7f51\u4e2d\u5b89\u5168\u7684\u4f20\u8f93\uff0c\u8fd9\u4e24\u4e2a\u9636\u6bb5\u5c31\u662f\u5b89\u5168\u9886\u57df\u7ecf\u5178\u7684IKE\u9636\u6bb5\u4e00\uff0c\u53ca\u9636\u6bb5\u4e8c\u3002 IKE\u9636\u6bb5\u4e00 \u00b6 \u9636\u6bb5\u4e00\u7684\u4e3b\u8981\u5de5\u4f5c\u5185\u5bb9\u662f\u534f\u5546\u5b89\u5168\u7b56\u7565\u3001\u8fdb\u884cDH\u4ea4\u6362\u3001\u5bf9\u7b49\u4f53\u8ba4\u8bc1\u3002 \u4e0e\u5b89\u5168\u7b56\u7565\u534f\u5546\u76f8\u5173\u7684\u5185\u5bb9\uff0c\u5728\u534e\u4e3a\u7684\u8bbe\u5907\u4e0a\u7684\u914d\u7f6e\u5c31\u662fIKE Proposal\uff0c\u5305\u62ec\u7528\u4e8eIKE\u96a7\u9053\u7684\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u3001DH\u7b97\u6cd5\u7ec4\u7b49\u7b56\u7565\uff0c\u4e24\u4e2a\u7ad9\u70b9\u7684\u7b56\u7565\u8981\u4e00\u81f4\u3002 DH\u4ea4\u6362\u5c31\u662f\u4ea4\u6362\u516c\u5171\u503c\uff0cDH\u7b97\u6cd5\u662f\u4e00\u4e2a\u795e\u5947\u7684\u7b97\u6cd5\uff0c\u4e24\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e4b\u95f4\u901a\u8fc7\u4ea4\u6362\u51e0\u4e2a\u516c\u5171\u503c\uff0c\u518d\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u6570\u5b66\u8fd0\u7b97\uff0c\u6700\u7ec8\u5f97\u5230\u4e09\u628a\u79d8\u94a5\u3002\u800c\u5373\u4f7f\u6709\u4eba\u4fa6\u542c\u4e86DH\u516c\u5171\u503c\u4ea4\u6362\u7684\u62a5\u6587\uff0c\u4e5f\u65e0\u6cd5\u63a8\u5bfc\u51fa\u8fd9\u4e09\u628a\u79d8\u94a5\u3002 \u63a5\u4e0b\u53bb\u5c31\u662f\u5bf9\u7b49\u4f53\u7684\u8eab\u4efd\u8ba4\u8bc1\uff0c\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u9884\u5171\u4eab\u79d8\u94a5\u7684\u65b9\u5f0f\uff0c\u4e24\u4e2a\u7ad9\u70b9\u5728\u9632\u706b\u5899\u4e0a\u914d\u7f6e\u4e00\u4e2a\u7edf\u4e00\u7684\u5bc6\u7801\uff0c\u5982\u679c\u5bc6\u7801\u4e00\u81f4\u5219\u8bf4\u660e\u4e24\u4e2a\u5bf9\u7b49\u4f53\u662f\u53ef\u4fe1\u8d56\u7684\u3002 \u9636\u6bb5\u4e00\u5b8c\u6210\u7684\u6807\u5fd7\u662fIKE SA\u7684\u5efa\u7acb\uff0cSA\uff08Security Associations\uff0c\u5b89\u5168\u5173\u8054\uff09\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3aIPSec\u5bf9\u7b49\u4f53\u53cc\u65b9\u7684\u4e00\u5171\u5b89\u5168\u5171\u8bc6\u3002SA\u4e00\u5171\u6709\u4e24\u79cd\uff0c\u4e00\u79cd\u662f\u8fd9\u91cc\u63d0\u5230\u7684IKE SA\uff0cIKE\u5bf9\u7b49\u4f53\u53cc\u65b9\u6709\u4e00\u4e2a\u5171\u540c\u7684IKE SA\u3002\u53e6\u4e00\u79cdSA\u662fIPSec SAs\uff0c\u4e00\u4e2aIPSec\u4f1a\u8bdd\u6709\u4e24\u4e2aIPSec SAs\uff0c\u5728\u4e0b\u6587\u4f1a\u4ecb\u7ecd\u3002 \u9636\u6bb5\u4e00\u6709\u4e24\u4e2a\u6a21\u5f0f\uff0c\u6211\u4eec\u4e0a\u6587\u4e2d\u63cf\u8ff0\u7684\u662f\u4e3b\u6a21\u5f0f\uff0c\u4e5f\u662f\u5e94\u7528\u7684\u8f83\u4e3a\u5e7f\u6cdb\u7684\u6a21\u5f0f\uff0c\u53e6\u4e00\u79cd\u6a21\u5f0f\u662f\u91ce\u86ee\u6a21\u5f0f\uff0c\u8fd9\u91cc\u4e0d\u505a\u4ecb\u7ecd\u3002 \u9636\u6bb5\u4e00\u7684\u5de5\u4f5c\u53ef\u4ee5\u7406\u89e3\u4e3a\u662f\u5728\u4e3a\u9636\u6bb5\u4e8c\u505a\u94fa\u57ab\uff0c\u9636\u6bb5\u4e00\u534f\u5546\u59a5\u5f53\u7684\u76f8\u5173\u5b89\u5168\u7b56\u7565\u5982\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u7b49\uff0c\u90fd\u662f\u4e3a\u4e86\u4fdd\u62a4\u7b2c\u4e8c\u9636\u6bb5\u7684\u76f8\u5173ISAKMP\u6570\u636e\u3002 IKE\u9636\u6bb5\u4e8c \u00b6 IKE\u7b2c\u4e00\u9636\u6bb5\u5b8c\u6210\u540e\uff0c\u5c31\u4f1a\u8fdb\u5165IKE\u7b2c\u4e8c\u9636\u6bb5\uff0c\u5728\u9636\u6bb5\u4e8c\u6700\u4e3b\u8981\u7684\u4efb\u52a1\u662f\u660e\u786e\u7b2c\u4e8c\u9636\u6bb5\u7684\u7b56\u7565\uff08\u5728\u534e\u4e3a\u8bbe\u5907\u7684\u914d\u7f6e\u4e2d\u5c31\u662fIPSec Proposal\uff09\uff0c\u8fd9\u4e9b\u7b56\u7565\u5305\u62ec\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u7b49\u7b49\uff0c\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684\u8fd9\u4e9b\u7b56\u7565\uff0c \u8981\u548c\u9636\u6bb5\u4e00\u7684\u7b56\u7565\u533a\u5206\u5f00\u6765\uff0c\u8fd9\u91cc\u6240\u534f\u5546\u7684\u7b56\u7565\u662f\u6700\u7ec8\u7528\u4e8e\u4fdd\u62a4\u5b9e\u9645\u4e1a\u52a1\u6d41\u91cf\u7684\u7b56\u7565\uff0c\u800c\u9636\u6bb5\u4e00\u7684\u90a3\u4e9b\u7b56\u7565\u662f\u7528\u4e8e\u4fdd\u62a4IPSec\u534f\u5546\u7684\u6570\u636e\uff08\u4e3b\u8981\u662f\u4e3a\u4e86\u4fdd\u62a4IKE\u9636\u6bb5\u4e8c\u7684\u534f\u5546\u8fc7\u7a0b\uff09\u3002 \u9636\u6bb5\u4e8c\u5b8c\u6210\u7684\u6807\u5fd7\u662f\u53cc\u65b9\u90fd\u660e\u786e\u4e86IPSec SAs\uff0c\u8fd9\u91cc\u7684IPSec SAs\u5b9e\u9645\u4e0a\u662f\u5305\u542b\u4e24\u4e2aSA\uff1a\u5165\u7ad9\u53ca\u51fa\u7ad9\u3002 FW1\u4e0a\u7684\u51fa\u7ad9SA\u7528\u4e8e\u4fdd\u62a4\u4eceFW1\u53d1\u5f80FW2\u7684\u6570\u636e\uff0c\u8fd9\u4e2aSA\u5bf9\u5e94FW2\u4e0a\u7684\u5165\u7ad9SA\uff0c\u800cFW1\u7684\u5165\u7ad9SA\u5bf9\u5e94FW2\u7684\u51fa\u7ad9SA\u3002 IKE\u4e24\u4e2a\u9636\u6bb5\u5b8c\u6210\u540e\uff1a \u00b6 IKE\u4e24\u4e2a\u9636\u6bb5\u5b8c\u6210\u540e\uff0cIPSecVPN\u7684\u96a7\u9053\u5c31\u7b97\u662f\u5efa\u7acb\u8d77\u6765\u4e86\uff0c\u4e0a\u9762\u8bf4\u4e86\u6807\u5fd7\u6027\u7684\u91cc\u7a0b\u7891\u5c31\u662fIPSec SAs \u7684\u5efa\u7acb\uff0c\u5982\u679cIPSecVPN\u96a7\u9053\u6b63\u786e\u5efa\u7acb\uff0c\u7ad9\u70b9\u7684IPSecVPN\u5b89\u5168\u8bbe\u5907\u4e0a\u5e94\u8be5\u6709\u4e24\u4e2aIPSec SAs\uff0c\u4e00\u4e2a\u662f\u51fa\u7ad9\u7684outbound SA\uff0c\u4e00\u4e2a\u662f\u5165\u7ad9\u7684Inbound SA\u3002\u7ad9\u70b91\u7684\u51fa\u7ad9SA\u5bf9\u5e94\u7ad9\u70b92\u7684\u5165\u7ad9SA\uff0c\u7ad9\u70b91\u7684\u5165\u7ad9 SA\u5bf9\u5e94\u7ad9\u70b92\u7684\u51fa\u7ad9SA\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 IPSec SAs\u4e2d\u4fdd\u5b58\u7740\u53cc\u65b9\u534f\u5546\u597d\u7684\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u3001\u79d8\u94a5\u4fe1\u606f\u7b49\u7b49\u3002\u5f53\u7ad9\u70b91\u7684FW\u6536\u5230\u6765\u81ea\u672c\u5730\u5185\u7f51\u7684\u6d41\u91cf\uff0c\u5982\u679c\u8be5\u6d41\u91cf\u5339\u914d\u4e86IPSecVPN\u7684\u611f\u5174\u8da3\u6570\u636e\u6d41\uff0c\u5b83\u5c31\u4f1a\u6839\u636e\u51fa\u7ad9SA\u4e2d\u6307\u793a\u7684\u52a0\u5bc6\u7b97\u6cd5\uff0c\u4ee5\u53ca \u79d8\u94a5\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff0c\u5e76\u505a\u52a0\u5bc6\u540e\u7684\u6570\u636e\u505a\u54c8\u5e0c\uff0c\u5c06\u5904\u7406\u597d\u7684\u6570\u636e\u5c01\u88c5\u5728ESP\uff08\u5b89\u5168\u534f\u8bae\uff0c\u6b64\u5904\u4ee5ESP \u4e3a\u4f8b\uff09\u540e\uff0c\u5e76\u5728ESP\u5934\u90e8\u4e2d\u5199\u5165\u660e\u786eSA\u7684SPI\uff08\u7d22\u5f15\u503c\uff0c\u8fd9\u4e2a\u7d22\u5f15\u503c\u5bf9\u5e94Site2-FW\u7684\u5165\u7ad9SA\uff09\uff0c\u7136\u540e\u518d\u5c01\u88c5\u4e0a\u65b0\u7684IP\u5934\u4ee5\u4fbf\u6570\u636e\u80fd\u591f\u5728\u516c\u7f51\u4e2d\u4f20\u8f93\u3002 Site2-FW\u6536\u5230\u6570\u636e\u540e\uff0c\u5c06\u96a7\u9053IP\u5934\u90e8\u53bb\u9664\uff0c\u53d1\u73b0\u91cc\u5934\u662f\u4e2aESP\u5c01\u88c5\u7684\u62a5\u6587\uff0c\u4e8e\u662f\u4eceESP\u5934\u90e8\u4e2d\u7684SPI\u5728\u672c\u5730\u67e5\u627e\uff0c\u627e\u5230SPI\u503c\u5bf9\u5e94\u7684SA\uff0c\u4e5f\u5c31\u662f\u5339\u914d\u7684\u5165\u7ad9SA\uff0c\u5c06\u6570\u636e\u505a\u5b8c\u6574\u6027\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u540e\u5bf9\u6570\u636e\u8fdb\u884c\u89e3\u5bc6\uff0c\u6700\u540e\u5f97\u5230\u660e\u6587\u7684\u539f\u59cb\u62a5\u6587\uff0c\u7136\u540e\u5c06\u62a5\u6587\u4f20\u9012\u5230\u672c\u5730\u5185\u7f51\u76ee\u6807\u8282\u70b9\u3002 \u8def\u7531\u5668\u4e0a\u7684LAN-to-LAN IPSec VPN\uff08IKE\u534f\u5546\uff09 \u00b6 \u5b9e\u9a8c\u62d3\u6251\u53ca\u9700\u6c42\uff1a \u00b6 \u5728R1\u53caR3\u4e0a\u914d\u7f6e\u9ad8\u7ea7ACL\u7528\u4e8e\u5339\u914dIPSecVPN\u611f\u5174\u8da3\u6d41\u91cf\u3002 \u5728R1\u53caR3\u4e0a\u521b\u5efaIKE Proposal\uff0c\u7528\u4e8e\u6307\u5b9aIKE\u9636\u6bb5\u4e00\u7684\u7b56\u7565\u3002 \u5728R1\u53caR3\u4e0a\u914d\u7f6eIKE peer\uff0c\u7528\u4e8e\u6307\u793a\u5bf9\u7b49\u4f53\uff08\u5730\u5740\u7b49\u4fe1\u606f\uff09\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u4f7f\u7528\u7684\u662f\u57df\u5171\u4eab\u79d8\u94a5\u7684\u65b9\u5f0f\u8fdb\u884c\u5bf9\u7b49\u4f53\u8eab\u4efd\u9a8c\u8bc1\u3002 \u5728R1\u53caR3\u4e0a\u521b\u5efaIPSec Proposal\uff0c\u7528\u4e8e\u6307\u5b9aIKE\u9636\u6bb5\u4e8c\u7684\u7b56\u7565\uff0c\u4ee5\u4fbf\u534f\u5546IPSec SA\u3002 \u5728R1\u53caR3\u4e0a\u521b\u5efaIPSec Policy\uff0c\u7528\u4e8e\u5c06ACL\u3001IKE Proposal\u3001IPSec Proposal\u3001IKE Peer\u7b49\u4fe1\u606f\u8fdb\u884c\u5173\u8054\u3002 \u5728R1\u53caR3\u4e0a\u5c06IPSec Policy\u5e94\u7528\u5728\u63a5\u53e3\u4e0a\u3002 \u5b9e\u9a8c\u6b65\u9aa4\u53ca\u914d\u7f6e\uff1a \u00b6 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u00b6 \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u53ef\u5728PC1\u4e0a\u53bbping PC2\u7684\u5730\u5740\uff0c\u8fd9\u6837\u4e00\u6765\u5c06\u5728R1\u4e0a\u89e6\u53d1IPsec VPN\u7684\u611f\u5174\u8da3\u6d41\u91cf\uff0cR1-R3 \u4e4b\u95f4\u5c31\u4f1a\u5f00\u59cb\u8fdb\u884cIKE\u7684\u534f\u5546\u3002\u534f\u5546\u6210\u529f\u7684\u6807\u5fd7\u662f\uff0c\u5728R1\u53caR3\u4e0a\u751f\u6210\u5b89\u5168\u5173\u8054SA\uff1a IPSecVPN\u7684NAT\u7a7f\u8d8a\u95ee\u9898 \u00b6 IPSecVPN\u7684NAT\u7a7f\u8d8a\u95ee\u9898\uff08NAT Server\u573a\u666f\uff09 \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u73af\u5883\u4e2d\uff0cPC1\u3001FW1\u4e3a\u7ad9\u70b91\u7684\u8bbe\u5907\uff0cNAT-Device\u3001FW2\u53caPC2\u4e3a\u7ad9\u70b92\u7684\u8bbe\u5907\uff0c\u5176\u4e2dFW1\u3001 FW2\u4e3aIPSecVPN\u7f51\u5173\uff0c\u6b32\u5728\u4e8c\u8005\u4e4b\u95f4\u5efa\u7acb\u7ad9\u70b9\u5230\u7ad9\u70b9\u7684IPSecVPN\u96a7\u9053\u3002\u7531\u4e8e\u7ad9\u70b92\u7684IPSecVPN\u7f51\u5173\u8eb2\u5728\u8be5\u7ad9\u70b9\u7684NAT\u8bbe\u5907\u4e4b\u540e\u5e76\u4e14\u4f7f\u7528\u79c1\u6709IP\u5730\u5740\u7a7a\u95f4\uff0c\u4e3a\u4e86\u4fdd\u8bc1FW1\u80fd\u591f\u4e0eFW2\u5bf9\u8bdd\uff0c\u5728NAT-Device \u4e0a\u90e8\u7f72\u4e86NAT Server\uff0c\u5c06\u516c\u7f51\u5730\u5740200.2.2.2\u7684UDP500\u7aef\u53e3\u6620\u5c04\u5230\u4e8610.0.0.2\u7684UDP500\u7aef\u53e3\u3002FW1\u4f7f\u7528200.2.2.2\u6765\u8bbf\u95eeFW2\u3002 \u5148\u8003\u8651\u4e00\u4e0b\u5f53FW1\u53caFW2\u5173\u95edNAT Traversal\uff08\u6216\u8005FW1\u3001FW2\u4e0d\u652f\u6301NAT Traversal\uff09\u65f6IPSecVPN\u96a7\u9053\u7684\u5efa\u7acb\u95ee\u9898\u3002\u7531\u4e8eIPSecVPN\u7684\u534f\u5546\u5de5\u4f5c\u7531ISAKMP\u5b8c\u6210\uff0c\u800cISAKMP\u662f\u57fa\u4e8eUDP\u7684\uff0c\u4e14\u4f7f\u7528\u7684\u6e90\u3001\u76ee\u7684\u7aef\u53e3\u5747\u4e3aUDP500\uff0c\u56e0\u6b64ISAKMP\u62a5\u6587\u80fd\u591f\u987a\u5229\u88abNAT-Device\u5b8c\u6210\u5730\u5740\u8f6c\u6362\uff0c\u6700\u7ec8IPSecVPN\u662f\u80fd\u591f\u5efa\u7acb\u8d77\u6765\u7684\uff0c\u5728FW1\u53caFW2\u4e0a\u67e5\u770bIPSec SAs\u662f\u80fd\u591f\u770b\u5230\u5df2\u7ecf\u534f\u5546\u5efa\u7acb\u597d\u7684SAs\u3002\u4f46\u662f\u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4 PC\u7684\u4e92\u8bbf\u5374\u51fa\u73b0\u4e86\u95ee\u9898\u3002\u6211\u4eec\u8003\u8651PC1\u53bb\u8bbf\u95eePC2\u7684\u60c5\u51b5\uff1a PC1\u53d1\u51fa\u7684\u6570\u636e\u5305\u5982\u56fe\u6240\u793a\u3002\u6570\u636e\u5305\u5230\u8fbeFW1\u540e\uff0c\u5339\u914d\u4e0a\u4e86IPSecVPN\u7684\u611f\u5174\u8da3\u6d41\u91cf\uff0c\u56e0\u6b64\u62a5\u6587\u88ab\u52a0\u5bc6\u3001\u54c8\u5e0c\uff0c\u7136\u540e\u5957\u4e0aESP\u7684\u5934\u90e8\uff0c\u53c8\u5c01\u88c5\u4e0a\u65b0\u7684IP\u5934\u3002\u8fd9\u4e2a\u88ab\u5904\u7406\u540e\u7684\u6570\u636e\u5305\u5c31\u88ab\u9001\u4e0a\u4e86\u516c\u7f51\uff0c\u4f20\u8f93\u5230\u4e86NAT-Device\u4e0a\uff0c\u867d\u7136NAT-Device\u4e0a\u90e8\u7f72\u4e86NAT Server\u7aef\u53e3\u6620\u5c04\uff0c\u4f46\u662f\u63a5\u6536\u5230\u7684\u8fd9\u4e2a\u5305\u662f\u4e00\u4e2aIP\u5305\uff0c IP \u5305\u5934\u7684\u540e\u9762\u5c31\u662fESP\u7684\u5934\u90e8\u4e86\uff0c\u6ca1\u6709UDP\u5934\u90e8\uff0cNAT\u8bbe\u5907\u5c31\u4e0d\u53ef\u80fd\u5c06\u62a5\u6587\u505a\u5730\u5740\u8f6c\u6362\u5e76\u4e22\u7ed9FW2 \uff0c\u56e0\u6b64\u8be5\u62a5\u6587\u5c31\u4f1a\u88abNAT-Device\u4e22\u5f03\u3002\u8fd9\u5c31\u5bfc\u81f4\u867d\u7136IPSecVPN\u96a7\u9053\u5df2\u7ecf\u5efa\u7acb\u8d77\u6765\u4e86\uff0c\u4f46\u662f\u7ad9\u70b9\u95f4\u7684\u53d7\u4fdd\u62a4\u6d41\u91cf\u65e0\u6cd5\u4e92\u8bbf\u7684\u95ee\u9898\u3002 \u89e3\u51b3\u7684\u529e\u6cd5\u5c31\u662f\u5728FW1\u53caFW2\u4e0a\u6253\u5f00NAT trasversal\u529f\u80fd\uff0c\u8be5\u529f\u80fd\u6fc0\u6d3b\u540e\uff0c\u5728FW1\u53caFW2\u7684IKE\u7b2c\u4e00\u9636\u6bb5\u4e2d\u5c31\u4f1a\u8fdb\u884cNAT trasversal\u7684\u534f\u5546\uff0c\u540c\u65f6\u8fd8\u80fd\u591f\u901a\u8fc7ISAKMP\u62a5\u6587\u7684\u4ea4\u4e92\u5224\u65ad\u4e24\u53f0\u9632\u706b\u5899\u4e4b\u95f4\u662f\u5426\u6709 NAT\u8bbe\u5907\u3002\u5982\u679c\u5b58\u5728NAT\u8bbe\u5907\uff0c\u5219\u4eceIKE\u9636\u6bb5\u4e00\u7684\u7b2c5,6\u4e2a\u62a5\u6587\u548c\u540e\u7eed\u7684\u5feb\u901f\u6a21\u5f0f\u7684\u4e09\u4e2aISAKMP\u5305\uff0c\u4ee5\u53ca\u7528\u4e8e\u627f\u8f7d\u7528\u6237\u6570\u636e\u7684ESP\u62a5\u6587\uff0c\u90fd\u4f1a\u4f7f\u7528UDP\u6e90\u3001\u76ee\u7684\u7aef\u53e34500\u8fdb\u884c\u4f20\u8f93\u3002\u8fd9\u6837\uff0c\u62a5\u6587\u7a7f\u8d8aNAT- Device\u65f6\u5c31\u80fd\u591f\u88ab\u6b63\u786e\u7684\u5730\u5740\u8f6c\u6362\u3002\u8fd9\u91cc\u6709\u4e00\u70b9\u5fc5\u987b\u6ce8\u610f\u7684\u662f\u5728NAT-Device\u4e0a\u8981\u589e\u52a04500\u7684\u7aef\u53e3\u6620\u5c04\u3002 \u5982\u6b64\u4e00\u6765\u5f53PC1\u53d1\u51fa\u7684\u6570\u636e\u5230\u8fbeFW1\u65f6\uff0cFW1\u5c06\u62a5\u6587\u5904\u7406\u540e\u5c01\u88c5\u4e0aESP\u5934\u90e8\uff0c\u7136\u540e\u518d\u5c01\u88c5\u4e0a\u4e00\u4e2aUDP \u5934\u90e8\uff0c\u6e90\u3001\u76ee\u7684\u7aef\u53e3\u53f7\u90fd\u4f7f\u75284500\uff08\u8fd9\u4e2a\u7aef\u53e3\u53f7\u4e13\u7528\u4e8eIPSec-NAT\uff09\uff0c\u6700\u540e\u518d\u5c01\u88c5\u4e0a\u96a7\u9053\u7684IP\u5934\u90e8\u3002\u5b8c\u6210\u540e\u62a5\u6587\u88ab\u9001\u8fbeNAT-Device\u3002NAT-Device\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2aUDP\u5305\uff0c\u76ee\u7684\u7aef\u53e3\u4e3a4500\uff0c\u800c\u672c\u5730\u914d\u7f6e\u4e86\u7aef\u53e3\u6620\u5c04\uff0c\u5c06200.2.2.2:4500\u6620\u5c04\u5230\u4e8610.0.0.2:4500\uff0c\u56e0\u6b64\u5c06\u76ee\u7684IP\u8f6c\u6362\u621010.0.0.2\u5e76\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u7ed9FW2\uff0c \u63a5\u4e0b\u6765\u7684\u8fc7\u7a0b\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\u3002 IPSecVPN\u7684NAT\u7a7f\u8d8a\u914d\u7f6e\u793a\u4f8b\uff08NAT Server\u573a\u666f\uff09 \u00b6 \u5b9e\u9a8c\u62d3\u6251\u53caIP\u7f16\u5740\u5982\u4e0a\u56fe\u6240\u793a\u3002FW1\u53caPC1\u4e3a\u7ad9\u70b91\u7684\u8bbe\u5907\uff1bNAT-Device\u3001FW2\u53caPC2\u4e3a\u7ad9\u70b92\u7684\u8bbe\u5907\uff1b FW1\u53caFW2\u4e3aIPSecVPN\u7f51\u5173\uff0c\u4e24\u8005\u4e4b\u95f4\u90e8\u7f72LAN to LAN IPSecVPN\uff1b\u7ad9\u70b92\u7533\u8bf7\u5230\u7684\u3001\u7528\u4e8eIPSecVPN \u7684\u5730\u5740\u662f200.2.2.2\uff1b\u5728NAT\u8bbe\u5907\u4e0a\u914d\u7f6eNAT Server\uff0c\u5c06200.2.2.2\u7684UDP500\u548cUDP4500\u6620\u5c04\u523010.0.0.2\u7684UDP500\u548cUDP4500\u3002Internet\u53ef\u4f7f\u7528\u4e00\u53f0\u8def\u7531\u5668\u6a21\u62df\uff0c\u53ea\u914d\u7f6e\u63a5\u53e3IP\uff0c\u4e0d\u914d\u7f6e\u4efb\u4f55\u8def\u7531\u4fe1\u606f\u3002 \u8bf7\u6ce8\u610f\uff0c\u672c\u6848\u4f8b\u91c7\u7528Eudemon1000E-X\u9632\u706b\u5899\u4e3e\u4f8b\u8bb2\u89e3\uff0c\u4e0d\u540c\u7684\u9632\u706b\u5899\u578b\u53f7\uff0c\u5728\u914d\u7f6e\u4e0a\u5b58\u5728\u5dee\u5f02\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u3001\u5b89\u5168\u533a\u57df\u7b49\u914d\u7f6e\uff09\uff1a \u00b6 #\u914d\u7f6e\u9ed8\u8ba4\u8def\u7531 [FW1] ip route-static 0.0.0.0 0.0.0.0 200.1.1.2 #\u5b9a\u4e49IPSecVPN\u611f\u5174\u8da3\u6570\u636e\u6d41\uff0c\u4f7f\u7528ACL3000\u6765\u5339\u914d\u611f\u5174\u8da3\u6d41\u91cf\uff1a [FW1] acl number 3000 [FW1-acl-adv-3000] rule permit ip source 10.1.1.0 0.0.0.255 destination 10.2.2.0 0.0.0.255 #\u914d\u7f6eIKE Proposal\uff0c\u8fd9\u662fIKE\u9636\u6bb5\u4e00\u7684\u7b56\u7565\uff1a [FW1] ike proposal 1 [FW1-ike-proposal-1] authentication-method pre-share [FW1-ike-proposal-1] authentication-algorithm sha1 [FW1-ike-proposal-1] encryption-algorithm 3des-cbc #\u914d\u7f6eIPsec proposal\uff0c\u8fd9\u662fIKE\u9636\u6bb5\u4e8c\u7684\u7b56\u7565\uff1a [FW1] ipsec proposal myset [FW1-ipsec-proposal-myset] transform esp [FW1-ipsec-proposal-myset] esp authentication-algorithm sha1 [FW1-ipsec-proposal-myset] esp encryption-algorithm 3des #\u914d\u7f6eIKE peer\uff0c\u5b9a\u4e49\u9884\u5171\u4eab\u79d8\u94a5\u3001\u5173\u8054IKE proposal\u5e76\u6307\u5b9a\u96a7\u9053\u5bf9\u7aef\u8282\u70b9IP\uff1a [FW1] ike peer fw2 [FW1-ike-peer-fw2] pre-shared-key Huawei123 [FW1-ike-peer-fw2] ike-proposal 1 [FW1-ike-peer-fw2] remote-address 200.2.2.2 [FW1-ike-peer-fw2] remote-address authentication-address 10.0.0.2 [FW1-ike-peer-fw2] nat traversal #\u914d\u7f6eIPsec Policy\uff1a [FW1] ipsec policy mymap 1 isakmp [FW1-ipsec-policy-isakmp-mymap-1] security acl 3000 [FW1-ipsec-policy-isakmp-mymap-1] ike-peer fw2 [FW1-ipsec-policy-isakmp-mymap-1] proposal myset #\u5e94\u7528IPsec Policy\u5230\u63a5\u53e3\uff1a [FW1] interface GigabitEthernet0/0/2 [FW1-GigabitEthernet0/0/2] ipsec policy mymap #\u653e\u5f00\u9632\u706b\u5899\u81ea\u8eab\u5230Untrust\u533a\u57df\u7684\u6d41\u91cf\uff0c\u4f7f\u5f97\u9632\u706b\u5899FW1\u80fd\u591f\u4e3b\u52a8\u53d1\u9001ISAKMP\u3001\u53ca\u96a7\u9053\u5efa\u7acb\u540e\u7684\u52a0\u5bc6\u6d41\u91cf\u5230FW2\uff1a [FW1] policy interzone local untrust outbound [FW1-policy-interzone-local-untrust-outbound] policy 0 [FW1-policy-interzone-local-untrust-outbound-0] policy destination 200.2.2.2 0 [FW1-policy-interzone-local-untrust-outbound-0] action permit #\u653e\u5f00IPSecVPN\u96a7\u9053\u5bf9\u7aef\u9632\u706b\u5899\u53d1\u9001\u8fc7\u6765\u7684\u6d41\u91cf\uff1a [FW1] policy interzone local untrust inbound [FW1-policy-interzone-local-untrust-inbound] policy 0 [FW1-policy-interzone-local-untrust-inbound-0] policy source 200.2.2.2 0 [FW1-policy-interzone-local-untrust-inbound-0] action permit #\u653e\u5f00\u5bf9\u7aef\u7ad9\u70b9\u5185\u7f51\u8fc7\u6765\u7684\u6d41\u91cf\uff1a [FW1] policy interzone trust untrust inbound [FW1-policy-interzone-trust-untrust-inbound] policy 0 [FW1-policy-interzone-trust-untrust-inbound-0] policy source 10.2.2.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-inbound-0] policy destination 10.1.1.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-inbound-0] action permit #\u653e\u5f00\u672c\u5730\u7ad9\u70b9\u5185\u7f51\u5230\u5bf9\u7aef\u7ad9\u70b9\u5185\u7f51\u7684\u6d41\u91cf\uff1a [FW1] policy interzone trust untrust outbound [FW1-policy-interzone-trust-untrust-outbound] policy 0 [FW1-policy-interzone-trust-untrust-outbound-0] policy source 10.1.1.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-outbound-0] policy destination 10.2.2.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-outbound-0] action permit FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u3001\u5b89\u5168\u533a\u57df\u914d\u7f6e\u7b49\uff09\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a\u7531\u4e8e\u8fd9\u4e2a\u73af\u5883\u4e2d\uff0cFW1\u91c7\u7528\u7684\u914d\u7f6e\u4e0d\u662f\u57fa\u4e8e\u6a21\u677f\u7684IPSec\uff0cFW1\u4f7f\u7528200.2.2.2\u4f5c\u4e3a\u8fdc\u7aef\u5bf9\u7b49\u4f53\u5730\u5740\u5bf9FW2\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7136\u800c\u5b9e\u9645\u4e0aFW2\u7684\u771f\u5b9eIP\u5730\u5740\u662f10.0.0.2\uff0c\u800c\u5e76\u975e200.2.2.2\uff0c\u8fd9\u4e48\u4e00\u6765\uff0c FW1\u5bf9FW2\u8fdb\u884cIPSec\u5bf9\u7b49\u4f53\u8ba4\u8bc1\u7684\u65f6\u5019\u5c31\u4f1a\u5931\u8d25\uff0c\u56e0\u4e3aFW2\u4f7f\u752810.0.0.2\u4e0eFW1\u8fdb\u884c\u8ba4\u8bc1\uff08\u8fd9\u4e2a\u5730\u5740\u88ab\u5c01\u88c5\u5728ISAKMP\u62a5\u6587\u4e4b\u4e2d\uff09\u3002 \u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u65b9\u6cd5\u4e4b\u4e00\u662f\u5728FW1\u4e0a\u624b\u5de5\u6307\u5b9a\u8fdc\u7aef\u5bf9\u7b49\u4f53FW2\u7528\u4e8e\u8eab\u4efd\u8ba4\u8bc1\u7684\u5730\u5740\uff0c\u5728FW1\u7684peer\u89c6\u56fe\u4e0b\u4f7f\u7528\u547d\u4ee4**authentication-address**\u6765\u6307\u5b9a\u5bf9\u7aef\u7528\u4e8e\u8eab\u4efd\u8ba4\u8bc1\u7684\u5730\u5740\uff08\u4e5f\u5c31\u662fFW2\u7684\u771f\u5b9eIP 10.0.0.2\uff09\u3002\u8fd9\u5c31\u662f\u672c\u4f8b\u6240\u7528\u7684\u65b9\u6cd5\u3002 \u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u4e0d\u4f7f\u7528IP\u5730\u5740\u4f5c\u4e3a\u8eab\u4efd\u8ba4\u8bc1\u7684\u4f9d\u636e\uff08\u9ed8\u8ba4\u5c31\u662f\u4f7f\u7528IP\u5730\u5740\uff09\uff0c\u800c\u662f\u4f7f\u7528name\u6765\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0cFW1\u4e0a\u7684\u5173\u952e\u6027\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a FW2\u4e0a\u7684\u5173\u952e\u6027\u914d\u7f6e\u53ef\u4fee\u6539\u5982\u4e0b\uff1a \u914d\u7f6e\u5b8c\u6210\u540e\uff0cPC\u4e4b\u95f4\u5373\u53ef\u4e92\u901a\u3002 IPSecVPN\u7684NAT\u7a7f\u8d8a\uff08NAT address-group\u573a\u666f\uff09 \u00b6 \u6211\u4eec\u518d\u6765\u770b\u53e6\u4e00\u79cd\u60c5\u51b5\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0cFW1\u53caPC1\u4e3a\u7ad9\u70b91\u7684\u8bbe\u5907\uff1bNAT-Device\u3001FW2\u3001PC2\u4e3a\u7ad9\u70b92 \u7684\u8bbe\u5907\u3002\u5728NAT-Device\u4e0a\u90e8\u7f72\u4e86\u57fa\u4e8e\u5730\u5740\u6c60\u7684\u6e90\u5730\u5740\u8f6c\u6362\uff08NAPT\uff09\uff0c\u7ad9\u70b92\u7684\u5185\u7f51\u8bbe\u5907\uff08\u5305\u62ecFW2\uff09 \u4f7f\u7528\u516c\u7f51\u5730\u5740200.2.2.2\u8bbf\u95ee\u5916\u7f51\u3002 \u9996\u5148\u8003\u8651FW1\u53caFW2\u6ca1\u6709\u5f00\u542fNAT Trasversal\u7684\u60c5\u51b5\uff0c\u7531\u4e8eIPSecVPN\u96a7\u9053\u7684\u534f\u5546\u662fISAKMP\u5b9e\u73b0\u7684\uff0c \u800cISAKMP\u62a5\u6587\u4f7f\u7528UDP\u6e90\u3001\u76ee\u7684\u7aef\u53e3500\uff0c\u56e0\u6b64\u62a5\u6587\u4f1a\u88abNAT-Device\u987a\u5229\u5b8c\u6210\u5730\u5740\u8f6c\u6362\uff08\u5fc5\u987b\u7531FW2 \u4e3b\u52a8\u53d1\u8d77IPSecVPN\u96a7\u9053\u534f\u5546\uff09\uff0c\u4ece\u800cIPSecVPN\u96a7\u9053\u7684\u5efa\u7acb\u662f\u6ca1\u6709\u95ee\u9898\u7684\u3002 \u4f46\u662f\u5728IPSecVPN\u96a7\u9053\u5efa\u7acb\u8d77\u6765\u4e4b\u540e\uff1a PC2\u8bbf\u95eePC1\u7684\u6570\u636e\u5728FW2\u88ab\u5904\u7406\u540e\uff0c\u5c01\u88c5ESP\u5934\u90e8\u3001\u5c01\u88c5\u65b0\u7684IP\u5934\uff0c\u7136\u540e\u9001\u5230\u4e86NAT-Device\uff0c\u6ce8\u610f\uff0c NAT-Device\u90e8\u7f72\u7684\u662fNAPT\uff0c\u4e5f\u5c31\u662f\u591a\u4e2a\u5185\u7f51\u5730\u5740\u5171\u7528\u4e00\u4e2a\u516c\u7f51\u5730\u5740\u8bbf\u95ee\u5916\u7f51\u3001\u5e76\u4f7f\u7528\u7aef\u53e3\u53f7\u533a\u5206\u5185\u7f51IP\u5730\u5740\u7684NAT\u65b9\u5f0f\u3002\u800c\u6b64\u523bNAT-Device\u6536\u5230\u7684\u62a5\u6587\u662f\u4e00\u4e2aIP\u5305\uff0c\u5728IP\u5305\u5934\u540e\u9762\u5c31\u662fESP\u7684\u62a5\u6587\u5934\u90e8\uff0c \u518d\u5f80\u540e\u5c31\u662f\u88ab\u52a0\u5bc6\u7684\u6570\u636e\u4e86\uff0cNAT-Device\u65e0\u6cd5\u6839\u636e\u73b0\u6709\u7684\u6570\u636e\u5f62\u6210NAT\u8868\u9879\u5e76\u5b8c\u6210\u5730\u5740\u8f6c\u6362\u3002NAT\u4f1a\u8bdd\u8868\u9879\u4e00\u822c\u5305\u62ec\u534f\u8bae\u7c7b\u578b\u3001\u6e90\u5730\u5740\u3001\u6e90\u7aef\u53e3\u3001\u76ee\u7684\u5730\u5740\u3001\u76ee\u7684\u7aef\u53e3\u7b49\u4e94\u5143\u7ec4\uff0c\u800c\u6b64\u523b\u6570\u636e\u5143\u7d20\u4e0d\u8db3\uff0c NAT-Device\u65e0\u6cd5\u521b\u5efaNAT\u8868\u9879\u3001\u65e0\u6cd5\u5bf9\u8be5\u62a5\u6587\u8fdb\u884c\u5730\u5740\u8f6c\u6362\uff0c\u56e0\u6b64\u5b83\u76f4\u63a5\u628a\u8fd9\u4e2a\u62a5\u6587\u8f6c\u53d1\u51fa\u53bb\uff0c\u663e\u7136\uff0c \u8fd9\u4e2a\u62a5\u6587\u662f\u65e0\u6cd5\u5728\u516c\u7f51\u4e0a\u4f20\u8f93\u7684\uff0c\u56e0\u4e3a\u5b83\u7684\u6e90IP\u5730\u5740\u662f10.0.0.2\uff0c\u8fd9\u662f\u4e00\u4e2a\u79c1\u6709IP\u3002 \u73b0\u5728\uff0cFW1\u53caFW2\u542f\u7528NAT Trasversal\uff0c\u53cc\u65b9\u7ecf\u8fc7\u534f\u5546\u4e4b\u540e\uff0c\u4f1a\u5728\u53d7\u4fdd\u62a4\u62a5\u6587\u7684ESP\u5934\u90e8\u524d\u589e\u52a0\u4e00\u4e2a UDP\u5934\u90e8\uff0c\u6e90\u3001\u76ee\u7684\u7aef\u53e3\u53f7\u4e3a4500\uff0c\u6709\u4e86\u8fd9\u4e2a\u5934\u90e8\uff0c\u62a5\u6587\u5728\u7ecf\u8fc7NAT-Device\u7684\u65f6\u5019\u5c31\u80fd\u591f\u88ab\u6b63\u786e\u7684\u8fdb\u884c\u5730\u5740\u8f6c\u6362\uff1a IPSecVPN\u7684NAT\u7a7f\u8d8a\u914d\u7f6e\u793a\u4f8b\uff08NAT address-group\u573a\u666f\uff09 \u00b6 \u5b9e\u9a8c\u62d3\u6251\u53caIP\u7f16\u5740\u5982\u4e0a\u56fe\u6240\u793a\u3002FW1\u53caPC1\u4e3a\u7ad9\u70b91\u7684\u8bbe\u5907\uff1bNAT-Device\u3001FW2\u53caPC2\u4e3a\u7ad9\u70b92\u7684\u8bbe\u5907\uff1b FW1\u53caFW2\u4e3aIPSecVPN\u7f51\u5173\uff0c\u4e24\u8005\u4e4b\u95f4\u90e8\u7f72LAN to LAN IPSecVPN\uff1bNAT-Device\u4e0a\u90e8\u7f72\u4e86NAPT\u6e90\u5730\u5740\u8f6c\u6362\uff0c\u7533\u8bf7\u5230\u7684\u3001\u7528\u4e8e\u5730\u5740\u8f6c\u6362\u7684\u516c\u7f51IP\u662f200.2.2.2\u3002Internet\u53ef\u4f7f\u7528\u4e00\u53f0\u8def\u7531\u5668\u6a21\u62df\uff0c\u53ea\u914d\u7f6e\u63a5\u53e3IP\uff0c\u4e0d\u914d\u7f6e\u4efb\u4f55\u8def\u7531\u4fe1\u606f\u3002 \u6ce8\u610f\u5728\u672c\u573a\u666f\u4e2d\uff0cFW1\u4e0a\u90e8\u7f72\u57fa\u4e8e\u6a21\u677f\u7684IPSecVPN\uff08\u56e0\u4e3aFW2\u4fa7\u90e8\u7f72\u4e86\u6e90NAT\uff0c\u56e0\u6b64FW1\u53ef\u80fd\u4e8b\u5148\u65e0\u6cd5\u77e5\u9053FW2\u7684\u516c\u7f51\u5730\u5740\uff09\uff0cFW2\u4f5c\u4e3aIPSecVPN\u96a7\u9053\u534f\u5546\u7684\u53d1\u8d77\u7aef\u3002 \u8bf7\u6ce8\u610f\uff0c\u672c\u6848\u4f8b\u91c7\u7528Eudemon1000E-X\u9632\u706b\u5899\u4e3e\u4f8b\u8bb2\u89e3\uff0c\u4e0d\u540c\u7684\u9632\u706b\u5899\u578b\u53f7\uff0c\u5728\u914d\u7f6e\u4e0a\u5b58\u5728\u5dee\u5f02\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u3001\u5b89\u5168\u533a\u57df\u914d\u7f6e\u7b49\uff09\uff1a \u00b6 #\u914d\u7f6e\u9ed8\u8ba4\u8def\u7531\uff1a [FW1] ip route-static 0.0.0.0 0.0.0.0 200.1.1.2 #\u5b9a\u4e49IPSecVPN\u611f\u5174\u8da3\u6570\u636e\u6d41\uff0c\u4f7f\u7528ACL3000\u6765\u5339\u914d\u611f\u5174\u8da3\u6d41\u91cf\uff1a [FW1] acl number 3000 [FW1-acl-adv-3000] rule permit ip source 10.1.1.0 0.0.0.255 destination 10.2.2.0 0.0.0.255 #\u914d\u7f6eIKE Proposal\uff0c\u8fd9\u662fIKE\u9636\u6bb5\u4e00\u7684\u7b56\u7565\uff1a [FW1] ike proposal 1 [FW1-ike-proposal-1] authentication-method pre-share [FW1-ike-proposal-1] authentication-algorithm sha1 [FW1-ike-proposal-1] encryption-algorithm 3des-cbc #\u914d\u7f6eIKE peer\uff0c\u5b9a\u4e49\u9884\u5171\u4eab\u79d8\u94a5\u3001\u5173\u8054IKE proposal\u5e76\u6307\u5b9a\u96a7\u9053\u5bf9\u7aef\u8282\u70b9IP\u5730\u5740\uff1a [FW1] ike peer fw2 [FW1-ike-peer-fw2] pre-shared-key Huawei123 [FW1-ike-peer-fw2] ike-proposal 1 [FW1-ike-peer-fw2] nat traversal #\u914d\u7f6eIPsec proposal\uff0c\u8fd9\u662fIKE\u9636\u6bb5\u4e8c\u7684\u7b56\u7565\uff1a [FW1] ipsec proposal myset [FW1-ipsec-proposal-myset] transform esp [FW1-ipsec-proposal-myset] esp authentication-algorithm sha1 [FW1-ipsec-proposal-myset] esp encryption-algorithm 3des #\u914d\u7f6eIPsec policy\u6a21\u677f\uff1a [FW1] ipsec policy-template policy_temp 1 [FW1-ipsec-policy-template-policy_temp-1] security acl 3000 [FW1-ipsec-policy-template-policy_temp-1] ike-peer fw2 [FW1-ipsec-policy-template-policy_temp-1] proposal myset #\u914d\u7f6eIPsec Policy\uff1a [FW1] ipsec policy mymap 1 isakmp template policy_temp #\u5e94\u7528IPsec Policy\u5230\u63a5\u53e3\uff1a [FW1] interface GigabitEthernet0/0/2 [FW1-GigabitEthernet0/0/2] ipsec policy mymap #\u653e\u5f00\u9632\u706b\u5899\u81ea\u8eab\u5230Untrust\u533a\u57df\u7684\u6d41\u91cf\uff0c\u4f7f\u5f97\u9632\u706b\u5899FW1\u80fd\u591f\u4e3b\u52a8\u53d1\u9001ISAKMP\u3001\u53ca\u96a7\u9053\u5efa\u7acb\u540e\u7684\u52a0\u5bc6\u6d41\u91cf\u5230FW2\uff1a [FW1] policy interzone local untrust outbound [FW1-policy-interzone-local-untrust-outbound] policy 0 [FW1-policy-interzone-local-untrust-outbound-0] policy destination 200.2.2.2 0 [FW1-policy-interzone-local-untrust-outbound-0] action permit #\u653e\u5f00IPSecVPN\u96a7\u9053\u5bf9\u7aef\u9632\u706b\u5899\u53d1\u9001\u8fc7\u6765\u7684\u6d41\u91cf\uff1a [FW1] policy interzone local untrust inbound [FW1-policy-interzone-local-untrust-inbound] policy 0 [FW1-policy-interzone-local-untrust-inbound-0] policy source 200.2.2.2 0 [FW1-policy-interzone-local-untrust-inbound-0] action permit #\u653e\u5f00\u5bf9\u7aef\u7ad9\u70b9\u5185\u7f51\u8fc7\u6765\u7684\u6d41\u91cf\uff1a [FW1] policy interzone trust untrust inbound [FW1-policy-interzone-trust-untrust-inbound] policy 0 [FW1-policy-interzone-trust-untrust-inbound-0] policy source 10.2.2.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-inbound-0] policy destination 10.1.1.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-inbound-0] action permit #\u653e\u5f00\u672c\u5730\u7ad9\u70b9\u5185\u7f51\u5230\u5bf9\u7aef\u7ad9\u70b9\u5185\u7f51\u7684\u6d41\u91cf\uff1a [FW1] policy interzone trust untrust outbound [FW1-policy-interzone-trust-untrust-outbound] policy 0 [FW1-policy-interzone-trust-untrust-outbound-0] policy source 10.1.1.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-outbound-0] policy destination 10.2.2.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-outbound-0] action permit FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u3001\u5b89\u5168\u533a\u57df\u914d\u7f6e\u7b49\uff09\uff1a \u5f53PC2\u8bbf\u95eePC1\u65f6\uff0c\u6d41\u91cf\u5c06\u89e6\u53d1FW2\u4e0eFW1\u8fdb\u884cIPSecVPN\u96a7\u9053\u7684\u534f\u5546\u3002 IKE\u9636\u6bb5\u4e00\u7684\u7b2c1,2\u4e24\u4e2a\u62a5\u6587\u4f7f\u7528\u6e90\u3001\u76ee\u7684UDP\u7aef\u53e3500\uff0c\u6d41\u91cf\u5728\u7ecf\u8fc7NAT\u8bbe\u5907\u65f6\u5730\u5740\u88ab\u8f6c\u6362\uff0c\u51fa\u73b0\u5982\u4e0b NAT\u8868\u9879\uff1a [NAT] display firewall session table \u8fd9\u4e9b\u62a5\u6587\u8fd8\u4f1a\u8fdb\u884cNAT Traversal\u7684\u534f\u5546\uff0c\u53caNAT\u8bbe\u5907\u7684\u53d1\u73b0\u3002\u7ecf\u8fc7\u534f\u5546\u540e\u53cc\u65b9\u51b3\u5b9a\u4f7f\u7528UDP\u7aef\u53e34500 \u6765\u8fdb\u884c\u62a5\u6587\u4ea4\u4e92\uff0c\u968f\u540e\u7528\u4e8e\u5bf9\u7b49\u4f53\u9a8c\u8bc1\u7684ISAKMP\u5305\u4f7f\u7528UDP\u6e90\u3001\u76ee\u7684\u7aef\u53e34500\uff0c\u6d41\u91cf\u5728\u7ecf\u8fc7NAT\u8bbe\u5907\u65f6\u88ab\u5730\u5740\u8f6c\u6362\uff0c\u51fa\u73b0\u5982\u4e0bNAT\u8868\u9879\uff1a udp VPN:public --> public 10.0.0.2:4500[200.2.2.2:2048]-->200.1.1.1:4500 \u5728IPSecVPN\u96a7\u9053\u5efa\u7acb\u8d77\u6765\u540e\uff0c\u53d7\u4fdd\u62a4\u7684\u6d41\u91cf\u4f9d\u7136\u4f1a\u4f7f\u7528UDP4500\u7aef\u53e3\u8fdb\u884c\u901a\u4fe1\uff0c\u7531\u4e8eNAT\u8bbe\u5907\u5df2\u7ecf\u6709\u4e86\u4e0a\u8ff0\u8868\u9879\uff0c\u56e0\u6b64\u62a5\u6587\u540c\u884c\u7545\u901a\uff08\u5f53\u7136\uff0c\u5728IPSecVPN\u96a7\u9053\u5efa\u7acb\u8d77\u6765\u4e4b\u540e\uff0c\u7531\u4e8eNAT\u8bbe\u5907\u5df2\u7ecf\u6709\u4e86\u76f8\u5173\u7684\u8868\u9879\uff0c\u56e0\u6b64PC1\u4e5f\u53ef\u4ee5\u4e3b\u52a8\u53d1\u8d77\u6d41\u91cf\u8bbf\u95eePC2\uff09\u3002 VPN Client\u5ba2\u6237\u7aef\u901a\u8fc7L2TP over IPSec\u62e8\u5165\u9632\u706b\u5899 \u00b6 \u6240\u8c13\u201cIPSecVPN\u8fdc\u7a0b\u62e8\u5165\u573a\u666f\u201d\uff0c\u4e5f\u5c31\u662f\u7528\u6237\u4ece\u516c\u7f51\u901a\u8fc7VPN\u62e8\u5165\u9632\u706b\u5899\uff0c\u4ece\u800c\u5bf9\u9632\u706b\u5899\u6240\u4fdd\u62a4\u7684\u5185\u7f51\u8d44\u6e90\u8fdb\u884c\u8bbf\u95ee\u3002\u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cPC\u53caFirewall\u90fd\u63a5\u5165\u4e00\u4e2a\u516c\u5171\u7f51\u7edc\uff08Public network\uff09\uff0cFirewall\u7684GE0/0/1\u63a5\u53e3\u8fde\u63a5\u7740SiteA\u7684\u5185\u7f51\uff08Trust\u5b89\u5168\u57df\uff09\uff0c\u5185\u7f51\u4e2d\u6709\u670d\u52a1\u5668Server\u3002\u73b0\u5728PC\u80fd\u591f\u901a\u8fc7Public network\u8bbf\u95ee\u5230 Firewall\u7684\u5916\u7f51\u63a5\u53e3GE0/0/2\u3002\u6211\u4eec\u8981\u5728Firewall\u4e0a\u90e8\u7f72IPSecVPN\u8fdc\u7a0b\u62e8\u5165\uff0c\u5c06Firewall\u914d\u7f6e\u4e3a\u4e00\u53f0VPN\u670d\u52a1\u5668\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u80fd\u591f\u901a\u8fc7Public network\uff0c\u4f7f\u7528VPN\u5ba2\u6237\u7aef\u8f6f\u4ef6\u62e8\u5165Firewall\uff0c\u4ece\u800c\u8bbf\u95eeSiteA\u7684\u5185\u7f51\u8d44\u6e90\u3002\u5728\u672c\u65b9\u6848\u4e2d\uff0cPC\u9700\u4f7f\u7528VPN\u5ba2\u6237\u7aef\u8f6f\u4ef6\u8fdb\u884c\u62e8\u53f7\uff0c\u62e8\u53f7\u6210\u529f\u540e\uff0cPC\u4e0e\u9632\u706b\u5899\u4e4b\u95f4\u4f1a\u5efa\u7acb\u4e00\u6761\u52a0\u5bc6\u7684\u96a7\u9053\uff0c \u540c\u65f6PC\u4f1a\u83b7\u5f97\u4e00\u4e2aSiteA\u6240\u5206\u914d\u7684\u5185\u7f51\u5730\u5740\uff0c\u5b83\u53ef\u4f7f\u7528\u8be5\u5730\u5740\u76f4\u63a5\u5bf9\u5f00\u653e\u7684\u5185\u7f51\u8d44\u6e90\u8fdb\u884c\u8bbf\u95ee\u3002 \u6ce8\u610f\uff1a\u672c\u4f8b\u4e2d\u6240\u4f7f\u7528\u7684\u9632\u706b\u5899\u662fEudemon1000E-X\u3002\u4e0d\u540c\u7684\u9632\u706b\u5899\u578b\u53f7\uff0c\u5728\u914d\u7f6e\u4e0a\u5b58\u5728\u5dee\u5f02\u3002 IP\u5730\u5740\u8d44\u6e90\u7684\u89c4\u5212\u5982\u4e0b\uff1a \u4f7f\u7528\u65b9 \u5730\u5740 \u5907\u6ce8 PC\uff08VPN\u5ba2\u6237\u7aef\uff09 192.168.56.1/24 \u7f51\u5173192.168.56.254\u3002 Interface virtual- template 1 192.168.255.1/24 \u8fd9\u4e2a\u5730\u5740\u662fVPN\u5ba2\u6237\u7aef\u62e8\u53f7\u6210\u529f\u540e\uff0c\u865a\u62df \u7f51\u5361\u7684\u7f51\u5173\u5730\u5740\u3002\u53ef\u81ea\u5b9a\u4e49\u3002 PC\u7684\u5730\u5740\u6c60 1.1.1.1\u81f31.1.1.100 VPN\u5ba2\u6237\u7aef\u6210\u529f\u62e8\u5165\u540e\uff0c\u9632\u706b\u5899\u6240\u5206\u914d\u7684 \u52a8\u6001\u5730\u5740\u6c60\u3002\u8fd9\u4e2a\u5730\u5740\u6c60\u6700\u597d\u4e0e\u5185\u7f51\u4e1a\u52a1\u7684\u7f51\u6bb5\u533a\u5206\u5f00\uff0c\u53ef\u5355\u72ec\u89c4\u5212\u4e00\u4e2a\u5730\u5740\u6bb5\u3002 Firewall\u7684\u57fa\u7840\u914d\u7f6e\u5982\u4e0b\uff1a Firewall\u7684VPN\u670d\u52a1\u914d\u7f6e\u5982\u4e0b\uff1a authentication-algorithm sha1 encryption-algorithm des-cbc dh group2 #\u914d\u7f6eIKE\u5bf9\u7b49\u4f53\uff1a ike peer peer1 exchange-mode aggressive local-id-type fqdn lns ike-proposal 1 pre-shared-key abcde remote-id-type fqdn client1 \u6ce8\uff1a\u5982\u679c\u662f\u5728*eNSP*\u6a21\u62df\u5668\u4e2d\u5b8c\u6210\u8be5\u5b9e\u9a8c\uff0c\u5219\u4e0a\u8ff0\u914d\u7f6e\uff08*IKE*\u5bf9\u7b49\u4f53\u7684\u914d\u7f6e\uff09\u6539\u4e3a\uff1a ike peer peer1 exchange-mode aggressive local-id-type fqdn ike-proposal 1 pre-shared-key abcde remote-id client1 quit ike local-name lns #\u914d\u7f6eVPN\u611f\u5174\u8da3\u6570\u636e\u6d41\uff0c1701\u7aef\u53e3\u4e3a\u9632\u706b\u5899\u4f5c\u4e3a\u96a7\u9053\u54cd\u5e94\u7aef\u5904\u7406L2TP\u62a5\u6587\u7684\u7aef\u53e3\uff1a acl number 3001 rule permit udp source-port eq 1701 #\u914d\u7f6eIKE\u7b2c\u4e8c\u9636\u6bb5\u7684\u7b56\u7565\uff1a ipsec proposal p1 esp encryption-algorithm des esp authentication-algorithm md5 # \u914d\u7f6eIPSec\u5b89\u5168\u7b56\u7565\uff0c\u672c\u7aef\u4f7f\u7528\u6a21\u677f\u65b9\u5f0f\u5efa\u7acbIPSec\u5b89\u5168\u7b56\u7565\uff0c\u7528\u6765\u63a5\u6536\u4e0d\u540cPC\u53d1\u8d77\u8fde\u63a5\uff1a ipsec policy-template template1 1 ike-peer peer1 proposal p1 security acl 3001 ipsec policy mypolicy 1 isakmp template template1 #\u5728Firewall\u7684\u5916\u7f51\u63a5\u53e3\u4e0a\u5e94\u7528IPSec Policy\uff1a interface GigabitEthernet 0/0/2 ipsec policy mypolicy \u5047\u8bbe\u76ee\u524d\u9632\u706b\u5899\u7684\u7f3a\u7701\u57df\u95f4\u5305\u8fc7\u6ee4\u89c4\u5219\u662fdeny any\uff0c\u90a3\u4e48\u6211\u4eec\u8fd8\u9700\u8981\u5728\u9632\u706b\u5899\u4e0a\u914d\u7f6euntrust\u5230local\u7684\u57df\u95f4\u5b89\u5168\u7b56\u7565\uff0c\u4f7f\u5f97Public network\u7684\u7528\u6237\u53d1\u8d77\u7684VPN\u6d41\u91cf\u80fd\u591f\u987a\u5229\u88ab\u9632\u706b\u5899\u5904\u7406\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5728PC\u4e0a\u5b89\u88c5VPN Client\uff08\u6b64\u5904\u4ee5Huawei VPN Client V100R001C02SPC701\u4e3a\u4f8b\uff09\u3002 \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u8fdb\u5165\u4e3b\u754c\u9762\uff0c\u5728\u4e0b\u56fe\u6240\u793a\u7684\u4e3b\u754c\u9762\u4e2d\uff0c\u70b9\u51fb\u65b0\u5efa\u6309\u94ae\uff1a \u8fdb\u5165\u65b0\u5efa\u8fde\u63a5\u5411\u5bfc\uff1a \u5728\u4e0a\u8ff0\u754c\u9762\u4e2d\uff0c\u9009\u62e9\u901a\u8fc7\u8f93\u5165\u53c2\u6570\u521b\u5efa\u8fde\u63a5\uff0c\u7136\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\uff1a \u5728\u4e0a\u8ff0\u754c\u9762\u4e2d\u8f93\u5165LNS\u670d\u52a1\u5668\u7684\u5730\u5740192.168.56.254\uff0c\u4e5f\u5c31\u662f\u9632\u706b\u5899\u7684\u5916\u7f51\u63a5\u53e3\u5730\u5740\uff0c\u4ee5\u53caVPN\u8d26\u53f7\u53ca\u5bc6\u7801\uff0c \u8be5\u8d26\u53f7\u53ca\u5bc6\u7801\u662f\u4f7f\u7528local-user vpdnuser password cipher userpassw123\u547d\u4ee4\u5728\u9632\u706b\u5899\u4e0a\u5b9a\u4e49\u7684\uff0c\u6240\u8f93\u5165\u7684\u5185\u5bb9\u9700\u4e0e\u9632\u706b\u5899\u7684\u914d\u7f6e\u4e00\u81f4\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\uff1a \u5728 \u4e0a \u8ff0 \u754c \u9762 \u4e2d \u8f93 \u5165 L2TP \u53c2\u6570 \uff0c \u5176\u4e2d \u96a7 \u9053 \u9a8c \u8bc1 \u5bc6 \u7801 \u5b57 \u6bb5 \u5bf9 \u5e94 \u9632 \u706b \u5899 \u4e0a tunnel password cipher TunnelPassw123\u547d\u4ee4\u6240\u5b9a\u4e49\u7684\u5bc6\u7801\uff0c\u4e5f\u5c31\u662fTunnelPassw123\u3002\u800c\u9884\u5171\u4eab\u79d8\u94a5\u5219\u5bf9\u5e94pre-shared-key abcde \u547d\u4ee4\u6240\u5b9a\u4e49\u7684\u5bc6\u7801\uff0c\u4e5f\u5c31\u662fabcde\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\uff1a \u5728\u4e0a\u8ff0\u754c\u9762\u4e2d\uff0c\u9009\u62e9\u4f7f\u7528LNS\u670d\u52a1\u5668\u5730\u5740\u3002\u7136\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\uff1a \u6309\u7167\u4e0a\u8ff0\u754c\u9762\u6240\u793a\u586b\u5199\u76f8\u5173\u53c2\u6570\u3002\u70b9\u51fb\u4e0b\u4e00\u6b65\uff0c\u7136\u540e\u5b8c\u6210\u914d\u7f6e\u3002 \u53f3\u952e\u521a\u521b\u5efa\u597d\u7684\u8fde\u63a5\uff0c\u70b9\u51fb\u8fde\u63a5\u6309\u94ae\uff0c\u5f00\u59cbVPN\u62e8\u5165\uff1a \u8fde\u63a5\u6210\u529f\u540e\uff0c\u5ba2\u6237\u5728PC\u4e0a\u67e5\u770b\u5230\u83b7\u53d6\u7684IP\u5730\u5740\uff1a \u5728\u9632\u706b\u5899\u4e0a\u4e5f\u80fd\u67e5\u770b\u5230\u76f8\u5173\u4fe1\u606f\uff1a \u5728\u9632\u706b\u5899\u4e0a\u67e5\u770bIKE SA\uff1a \u5728\u9632\u706b\u5899\u4e0a\u67e5\u770bIPSec SA\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5ba2\u6237\u7aef\u5df2\u7ecf\u80fd\u591f\u6b63\u5e38\u62e8\u5165Firewall\uff0c\u5728PC\u62e8\u53f7\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5e94\u8be5\u80fd\u5728Firewall\u4e0a\u67e5\u770b\u5230\u5982\u4e0b \u4f1a\u8bdd\uff1a \u6ce8\u610f\uff0c\u6b64\u65f6\u867d\u7136PC\u5df2\u7ecf\u6210\u529f\u62e8\u5165\u4e86Firewall\uff0c\u4f46\u662f\u8fd8\u4e0d\u80fd\u591f\u8bbf\u95ee\u5185\u7f51\u8d44\u6e90\uff08\u5047\u8bbe\u5f53\u524d\u9632\u706b\u5899\u7684\u7f3a\u7701\u57df\u95f4\u5305\u8fc7 \u6ee4\u89c4\u5219\u662fdeny any\uff09\u7684\u3002\u5b9e\u9645\u4e0a\uff0c\u62e8\u53f7\u6210\u529f\u540e\uff0cPC\u4e0eFirewall\u4e4b\u95f4\u5c31\u5efa\u7acb\u8d77\u4e00\u6761\u52a0\u5bc6\u7684\u96a7\u9053\uff0c\u4ece\u8fd9\u4e2a\u5c42\u9762\u4e0a\u770b\uff0c\u6211\u4eec\u53ef\u4ee5\u5f62\u8c61\u5730\u5c06PC\u7406\u89e3\u4e3a\u903b\u8f91\u4e0a\u662f\u76f4\u63a5\u8fde\u63a5\u5728Firewall\u4e0a\u7684\uff0c\u800c\u4e14\u5c5e\u4e8einterface Virtual-Template 1 \u8fd9\u4e2a\u63a5\u53e3\u6240\u52a0\u5165\u7684\u5b89\u5168\u57df\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u8ba9PC\u80fd\u591f\u6b63\u5e38\u8bbf\u95ee\u7ad9\u5185\u8d44\u6e90\uff0c\u6211\u4eec\u8fd8\u8981\u5c06Virtual-Template\u653e\u7f6e\u5230\u5b89\u5168\u57df\uff0c\u5e76\u4e14\u914d\u7f6eVirtual-Template\u6240\u5728\u5b89\u5168\u57df\u5230trust\u57df\u7684\u7b56\u7565\uff0c\u4f7f\u5f97VPN\u5ba2\u6237\u7aef\u5728\u62e8\u5165\u6210\u529f\u540e\uff0c\u80fd\u591f\u4f7f\u7528\u6240\u5206\u914d\u7684IP\u5730\u5740\u8bbf\u95ee\u5185\u7f51\u8d44\u6e90\uff1a \u5982\u6b64\u4e00\u6765\uff0cPC\u5373\u53ef\u8bbf\u95ee10.1.1.1\u3002 \u7ad9\u70b9\u5185\u79c1\u7f51\u5730\u5740\u51b2\u7a81\u65f6\u7684LAN-to-LAN IPSecVPN\u90e8\u7f72 \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cX\u516c\u53f8\u5b58\u5728\u4e09\u4e2a\u7ad9\u70b9\uff0c\u5176\u4e2d\u7ad9\u70b91\u662f\u4e3b\u7ad9\u70b9\uff0c\u7ad9\u70b92\u53ca3\u662f\u5206\u652f\u7ad9\u70b9\u30023\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u90fd\u901a\u8fc7\u5e7f\u57df\u7f51\u94fe\u8def\u63a5\u5165Internet\u3002\u73b0\u5728\uff0c\u5ba2\u6237\u8981\u6c42\u5728\u7ad9\u70b91\u4e0e\u7ad9\u70b92\u3001\u7ad9\u70b91\u4e0e\u7ad9\u70b93\u4e4b\u95f4\u90e8\u7f72LAN-to-LAN IPSecVPN\uff08\u5982\u56fe\u6240\u793a\uff09\uff0c\u6700\u7ec8\u4f7f\u5f97Server1\u4e0eServer2\u3001Server1\u4e0eServer3\u80fd\u591f\u5b89\u5168\u5730\u4e92\u901a\u3002\u6709\u8da3\u7684\u662f\uff0c\u6bcf\u4e2a\u7ad9\u70b9\u7684Server\u90fd\u4f7f\u7528\u4e86\u91cd\u53e0\u7684\u79c1\u7f51IP\u5730\u5740\uff0c\u4ee5\u56fe\u4e2d\u7684\u670d\u52a1\u5668\u4e3a\u4f8b\uff0c3\u4e2a\u7ad9\u70b9\u7684Server\uff0c\u90fd\u4f7f\u7528192.168.1.1 \u8fd9\u4e2aIP\u5730\u5740\u3002\u663e\u7136\uff0c\u5ba2\u6237\u5e76\u4e0d\u5e0c\u671b\u8c03\u6574\u7f51\u7edc\u7684IP\u7f16\u5740\u4ee5\u4fbf\u9002\u5e94\u65b0\u7684\u9700\u6c42\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u80fd\u4ece\u65b9\u6848\u7684\u89d2\u5ea6\u601d\u8003\u662f\u5426\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002 \u7b80\u5355\u5730\u8bf4\u4e00\u4e0b\u5b9e\u73b0\u601d\u8def\uff1a\u9996\u5148\u5728\u6bcf\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e0a\u90e8\u7f72NAT Server\uff0c\u5c06\u672c\u7ad9\u70b9Server\uff08192.168.1.1\uff09\u6620\u5c04\u5230\u4e00\u4e2a\u516c\u7f51\u5730\u5740\uff0c\u4f8b\u5982\u5728FW1\u4e0a\uff0c\u5c06192.168.1.1\u6620\u5c04\u52301.1.1.1\uff1b\u5728FW2\u4e0a\u5c06192.168.1.1\u6620\u5c04\u52302.2.2.2\uff1b \u5728FW3\u4e0a\u5c06192.168.1.1\u6620\u5c04\u52303.3.3.3\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002\u63a5\u4e0b\u6765\uff0c\u5728FW1\u4e0eFW2\u4e4b\u95f4\u3001FW1\u4e0eFW3\u4e4b\u95f4\u90e8\u7f72 IPSecVPN\u96a7\u9053\u3002\u4ee5FW1\u4e3a\u4f8b\uff0c\u5176\u4e0eFW2\u4e4b\u95f4\u7684IPSecVPN\u96a7\u9053\u7684\u611f\u5174\u8da3\u6d41\u91cf\u662f\u4ece1.1.1.1\u8bbf\u95ee2.2.2.2\u7684\u6d41\u91cf\uff1b \u800cFW2\u4e0eFW1\u4e4b\u95f4\u7684IPSecVPN\u96a7\u9053\u7684\u611f\u5174\u8da3\u6d41\u91cf\u662f\u4ece2.2.2.2\u8bbf\u95ee1.1.1.1\u7684\u6d41\u91cf\uff1b\u540c\u7406\uff0cFW3\u4e0eFW1\u4e4b\u95f4\u7684IPSecVPN\u96a7\u9053\u7684\u611f\u5174\u8da3\u6d41\u91cf\u662f\u4ece3.3.3.3\u8bbf\u95ee1.1.1.1\u7684\u6d41\u91cf\u3002 \u5b8c\u6210IPSecVPN\u53caNAT\u7684\u90e8\u7f72\u540e\uff0c\u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0b\u6570\u636e\u5305\u4ea4\u4e92\u7684\u8fc7\u7a0b\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002\u4ee5Server1\u8bbf\u95eeServer2 \u4e3a\u4f8b\uff0c\u8bbf\u95ee\u65f6\u9700\u4f7f\u7528\u76ee\u7684\u5730\u57402.2.2.2\uff0c\u6d41\u91cf\u5230\u8fbeFW1\u540e\uff0c\u5148\u6267\u884cNAT\uff0c\u6e90IP\u5730\u5740\u88ab\u8f6c\u6362\u62101.1.1.1\uff0c\u968f\u540e\u62a5\u6587\u88ab\u8def\u7531\u5230\u51fa\u63a5\u53e3GE0/0/2\uff0c\u78b0\u649e\u5230\u90e8\u7f72\u5728\u51fa\u63a5\u53e3\u4e0a\u7684IPSec Policy\uff0c\u56e0\u4e3a\u6d41\u91cf\u5339\u914dIPSecVPN\u611f\u5174\u8da3\u6d41\u91cf\uff0c\u4ece\u800c\u6570\u636e\u88ab\u52a0\u5bc6\u3001\u54c8\u5e0c\uff0c\u7136\u540e\u5c01\u88c5\u4e00\u5c42\u96a7\u9053\u5934\u90e8\u3002\u5904\u7406\u540e\u7684\u62a5\u6587\u88ab\u53d1\u5f80FW2\u3002FW2\u5c06\u62a5\u6587\u7684\u96a7\u9053\u5934\u90e8\u5265\u9664\uff0c \u8fdb\u884c\u5b8c\u6574\u6027\u6821\u9a8c\u3001\u89e3\u5bc6\uff0c\u5f97\u5230\u660e\u6587\uff0c\u968f\u540e\u5c06\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u57402.2.2.2\u8f6c\u6362\u6210192.168.1.1\uff0c\u6700\u540e\u53d1\u5f80\u672c\u7ad9\u70b9 Server1\u3002Server\u95f4\u7684\u5176\u4ed6\u4e92\u8bbf\u6d41\u91cf\u540c\u7406\u3002 \u672c\u6587\u91cd\u70b9\u5173\u6ce8IPSecVPN\u7684\u914d\u7f6e\uff0c\u9632\u706b\u5899\u7684\u63a5\u53e3\u914d\u7f6e\u3001\u63a5\u53e3\u52a0Zone\u3001\u5b89\u5168\u7b56\u7565\u7b49\u59d1\u4e14\u5ffd\u7565\u3002 FW1\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a FW3\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u4eceServer1 ping Server2\u65f6\uff0c\u53ef\u4ee5\u5728FW1\u4e0a\u770b\u5230\u5982\u4e0bSession\uff1a \u53ef\u4ee5\u5728FW2\u4e0a\u770b\u5230\u5982\u4e0bSession\uff1a \u5176\u4e2desp\u662f\u52a0\u5bc6\u540e\u7684\u62a5\u6587\u3002 NGFW:\u63a5\u5165\u7528\u6237\u91c7\u7528VPN Client\u8f6f\u4ef6\u901a\u8fc7L2TP over IPSec\u65b9\u5f0f\u63a5\u5165\u603b\u90e8VPN \u00b6 \u8fdc\u7a0b\u7528\u6237\u91c7\u7528VPN Client\u8f6f\u4ef6\u901a\u8fc7L2TP over IPSec\u65b9\u5f0f\u63a5\u5165\u603b\u90e8VPN\uff0c\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u62e8\u5165\u5f0fVPN\u5e94\u7528\u3002\u672c\u4f8b\u4e2d\u7684\u9632\u706b\u5899\u4e3aE1000E-N\uff08NGFW\uff09\uff0c\u5e76\u4e14\u8f6f\u4ef6\u7248\u672c\u4e3aV5R1C10\u3002\u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5176\u4e2d\u5916\u90e8PC\u5b89 \u88c5\u4e86HUAWEI VPN Client\u8f6f\u4ef6\uff0c\u8be5PC\u8fde\u63a5\u5230\u4e86\u5916\u90e8\u7f51\u7edc\uff0c\u800c\u4e14\u5b83\u53ef\u4ee5\u901a\u8fc7\u5916\u90e8\u7f51\u7edc\u5230\u8fbe\u9632\u706b\u5899FW\u3002\u73b0\u5728\u7684\u9700\u6c42\u662f\uff1a\u5916\u90e8PC\u901a\u8fc7\u62e8\u53f7\u7684\u65b9\u5f0f\uff0c\u8fde\u63a5\u5230FW\u6240\u4fdd\u62a4\u7684\u5185\u90e8\u7f51\u7edc\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbf\u95ee100.1.1.0/24\u3002 \u672c\u4f8b\u5728FW\u4e0a\u90e8\u7f72L2TP over IPSec\uff0c\u4f7f\u5f97\u5916\u90e8PC\u80fd\u591f\u4f7f\u7528\u6307\u5b9a\u7684\u8d26\u53f7\u62e8\u5165\uff0c\u62e8\u5165\u6210\u529f\u540e\uff0c\u5916\u90e8PC\u5c06\u83b7\u5f97 10.1.1.0~10.1.1.20\u8303\u56f4\u5185\u7684IP\u5730\u5740\uff0c\u5e76\u4e14\u76f4\u63a5\u8bbf\u95ee\u76ee\u6807\u7f51\u6bb5100.1.1.0/24\u3002 \u9632\u706b\u5899FW\uff08\u6ce8\u610f\uff0c\u672c\u4f8b\u4ee5\u8f6f\u4ef6\u7248\u672cV5R1C10\u4e3a\u4f8b\uff0c\u4e0d\u540c\u7684\u8f6f\u4ef6\u7248\u672c\uff0c\u914d\u7f6e\u65b9\u5f0f\u6709\u6240\u4e0d\u540c\uff09\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u4ee5\u4e0a\u662f\u4e00\u4e9b\u57fa\u672c\u914d\u7f6e\uff0c\u63a5\u4e0b\u6765\u5f00\u59cbL2TP Over IPSec\u7684\u914d\u7f6e\uff1a l2tp enable l2tp-group 1 allow l2tp virtual-template 1 remote remoteTunnelName tunnel name lns tunnel authentication tunnel password cipher TunnelPwd123 \u63a5\u4e0b\u6765\u5f00\u59cbIPSec\u7684\u76f8\u5173\u914d\u7f6e\uff1a #\u521b\u5efaACL3000\uff0c\u7528\u4e8e\u5339\u914dL2TP\u6d41\u91cf\uff0c\u8fd9\u4e9b\u6d41\u91cf\u9700\u8981\u53d7IPSec\u4fdd\u62a4\uff08\u52a0\u5bc6\u3001\u9a8c\u8bc1\uff09\uff1a acl 3000 rule permit udp source-port eq 1701 rule permit udp destination-port eq 1701 #\u914d\u7f6eIPSec\u5b89\u5168\u63d0\u8bae\uff1a ipsec proposal tran1 transform esp esp authentication-algorithm sha1 esp encryption-algorithm aes-256 #\u914d\u7f6eIKE\u5b89\u5168\u63d0\u8bae\uff1a ike proposal 10 authentication-method pre-share authentication-algorithm sha1 encryption-algorithm 3des dh group5 #\u914d\u7f6eIKE\u5bf9\u7b49\u4f53\uff1a ike peer a ike-proposal 10 pre-shared-key IPSecPreSKey123 #\u914d\u7f6eIPSec\u7b56\u7565\u6a21\u677f\uff0c\u540d\u79f0\u53ef\u81ea\u5b9a\u4e49\uff0c\u6b64\u5904\u4e3apolicy_temp\uff0c\u5728\u5176\u4e2d\u5173\u8054ACL3000\u3001IPSec\u5b89\u5168\u63d0\u8bae\u4ee5\u53ca\u5bf9\u7b49\u4f53\uff1a ipsec policy-template policy_temp 1 security acl 3000 proposal tran1 ike-peer a #\u521b\u5efaIPSec\u7b56\u7565mypolicy\uff0c\u5728\u5e8f\u53f710\uff08\u5e8f\u53f7\u53ef\u81ea\u5b9a\u4e49\uff09\u4e2d\u6307\u5b9aIPSec\u7b56\u7565\u6a21\u677f\uff1a ipsec policy mypolicy 10 isakmp template policy_temp \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5916\u90e8PC\u5b89\u88c5VPN\u5ba2\u6237\u7aef\u8f6f\u4ef6\uff0c\u6b64\u5904\u4ee5Secoway VPN Client\u8f6f\u4ef6\u4e3a\u4f8b\u3002\u5728VPN Client\u8f6f\u4ef6\u7684\u4e3b\u754c\u9762\u4e2d\uff0c\u70b9\u51fb\u201c\u65b0\u5efa\u201d\u6309\u94ae\uff1a \u5f39\u51fa\u5982\u4e0b\u754c\u9762\uff1a \u5728\u4ee5\u4e0a\u5f39\u51fa\u7684\u754c\u9762\u4e2d\uff0c\u9009\u62e9\u201c\u901a\u8fc7\u8f93\u5165\u53c2\u6570\u521b\u5efa\u8fde\u63a5\u201d\uff0c\u5f39\u51fa\u5982\u4e0b\u754c\u9762\uff1a \u5728\u4ee5\u4e0a\u754c\u9762\u4e2d\uff0cLNS\u670d\u52a1\u5668\u5730\u5740\u4e3a\u9632\u706b\u5899\u5916\u7f51\u63a5\u53e3\u7684IP\u5730\u5740\uff0c\u7528\u6237\u540d\u53ca\u5bc6\u7801\u5219\u6309\u7167\u6240\u914d\u7f6e\u7684\u8f93\u5165\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u201c\u4e0b\u4e00\u6b65\u201d\uff1a \u5728\u4ee5\u4e0a\u754c\u9762\u4e2d\uff0c\u6309\u56fe\u793a\u8f93\u5165\u96a7\u9053\u540d\u79f0\u3001\u96a7\u9053\u9a8c\u8bc1\u5bc6\u7801\u4ee5\u53caIPSec\u9884\u5171\u4eab\u5bc6\u7801\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u8fd9\u4e9b\u5bc6\u7801\u6211\u90fd\u7279\u610f\u8bbe\u7f6e\u6210\u4e0e\u5176\u529f\u80fd\u6709\u4e00\u5b9a\u5173\u8054\u6027\u7684\u5b57\u7b26\u4e32\uff0c\u4ee5\u4fbf\u5e2e\u52a9\u8bfb\u8005\u7406\u6e05\u5bc6\u7801\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u201c\u4e0b\u4e00\u6b65\u201d\uff1a \u5728\u4ee5\u4e0a\u754c\u9762\u4e2d\uff0c\u9009\u62e9\u201c\u4f7f\u7528LNS\u670d\u52a1\u5668\u5730\u5740\u201d\uff0c \u5b8c\u6210\u540e\u70b9\u51fb\u201c\u4e0b\u4e00\u6b65\u201d\uff1a \u5728\u4ee5\u4e0a\u754c\u9762\u4e2d\uff0c\u9009\u62e9\u4e0e\u9632\u706b\u5899FW\u6240\u5339\u914d\u7684IKE\u5b89\u5168\u63d0\u8bae\u3001IPSec\u5b89\u5168\u63d0\u8bae\u3002\u9700\u6ce8\u610f\u7684\u662f\uff0cVPN Client\u8f6f\u4ef6\u6240\u652f\u6301\u7684\u52a0\u5bc6\u3001\u9a8c\u8bc1\u7b97\u6cd5\u53ef\u80fd\u4f1a\u6bd4\u9632\u706b\u5899\u6240\u652f\u6301\u7684\u66f4\u5c11\uff0c\u4e3a\u4e86\u786e\u4fddVPN\u62e8\u53f7\u6210\u529f\uff0c\u9632\u706b\u5899\u8981\u5bf9\u5e94\u5730\u8fc1\u5c31\u4e00\u4e0bVPN Client\uff0c\u9009\u62e9\u5bf9\u65b9\u652f\u6301\u7684\u7b97\u6cd5\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u201c\u4e0b\u4e00\u6b65\u201d\uff1a \u5728\u4ee5\u4e0a\u754c\u9762\u4e2d\uff0c\u70b9\u51fb\u201c\u5b8c\u6210\u201d\uff0cVPN\u8fde\u63a5\u5c31\u521b\u5efa\u597d\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u4e3b\u754c\u9762\u4e2d\u770b\u5230\u521b\u5efa\u597d\u7684VPN\u8fde\u63a5\uff0c\u6b64\u65f6\u53cc\u51fb\u8be5\u8fde\u63a5\u5373\u53ef\u89e6\u53d1VPN\u62e8\u53f7\u3002\u7f3a\u7701\u65f6\uff0c\u7528\u6237VPN\u62e8\u53f7\u6210\u529f\u540e\uff0c\u5728\u903b\u8f91\u4e0a\u4fbf\u4f1a\u88ab\u8ba4\u4e3a\u4e0e\u9632\u706b\u5899\u76f4\u8fde\uff0c\u5e76\u4e14\u53ea\u80fd\u8bbf\u95ee\u9632\u706b\u5899\u6240\u4fdd\u62a4\u7684\u5185\u90e8\u7f51\u7edc\u3002 \u2018 \u5982\u679c\u5e0c\u671b\u5ba2\u6237\u7aef\u5728\u62e8\u5165VPN\u4e4b\u540e\uff0c\u9664\u4e86\u53ef\u4ee5\u8bbf\u95ee\u5185\u7f51100.1.1.0/24\u7f51\u6bb5\uff0c\u540c\u65f6\u8fd8\u53ef\u4ee5\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff08\u4f8b\u5982 Internet\uff09\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728VPN Client\u8f6f\u4ef6\u7684\u754c\u9762\u4e0a\u53f3\u51fb\u672c\u6b21\u521b\u5efa\u7684\u201c\u6211\u7684\u8fde\u63a5\u201d\u56fe\u6807\uff0c\u9009\u62e9\u201c\u5c5e\u6027\u201d\uff0c\u5f39\u51fa\u5982\u4e0b\u7a97\u53e3\uff1a \u5728\u4e0a\u8ff0\u7a97\u53e3\u4e2d\uff0c\u52fe\u9009\u201c\u8fde\u63a5\u6210\u529f\u540e\u5141\u8bb8\u8bbf\u95eeInternet\u201d\uff0c\u51fa\u73b0\u201c\u8def\u7531\u8bbe\u7f6e\u201d\u9009\u9879\u5361\uff0c\u70b9\u51fb\u8be5\u9009\u9879\u5361\uff0c\u5728\u8be5\u9009\u9879\u5361\u7684\u754c\u9762\u4e2d\u70b9\u51fb\u201c\u6dfb\u52a0\u201d\u6309\u94ae\uff0c\u6309\u5982\u4e0b\u8f93\u5165\uff1a \u5b8c\u6210\u4e0a\u8ff0\u64cd\u4f5c\u540e\uff0c\u91cd\u65b0\u62e8\u53f7\u5373\u53ef\u3002\u4e0a\u8ff0\u64cd\u4f5c\u7684\u76ee\u7684\u662f\u8ba9VPN Client\u8f6f\u4ef6\u62e8\u53f7\u6210\u529f\u540e\uff0c\u4e0d\u5728VPN\u865a\u62df\u7f51\u5361\u4e0a\u8bbe\u7f6e\u9ed8\u8ba4\u7f51\u5173\uff0c\u800c\u662f\u5728\u5ba2\u6237\u7aefPC\u7684\u8def\u7531\u8868\u4e2d\u5199\u5165\u4e00\u6761\u5230\u8fbe100.1.1.0/24\u7684\u8def\u7531\uff0c\u5e76\u5c06\u8be5\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u6307\u5b9a\u4e3a10.1.1.1\uff08\u9632\u706b\u5899Virtual-Template 1\u63a5\u53e3\u7684IP\u5730\u5740\uff09\u3001\u51fa\u63a5\u53e3\u4e3aVPN\u865a\u62df\u7f51\u5361\u3002 \u5982\u6b64\u4e00\u6765\uff0c\u5f53VPN\u5ba2\u6237\u7aef\u8bbf\u95eeInternet\u65f6\uff0c\u6d41\u91cf\u53ef\u4ee5\u4ece\u7269\u7406\u7f51\u5361\u51fa\u53bb\uff0c\u800c\u5f53\u5ba2\u6237\u7aef\u8bbf\u95ee100.1.1.0/24\u65f6\uff0c\u6d41\u91cf\u4f1a\u4eceVPN\u865a\u62df\u7f51\u5361\u51fa\u53bb\uff0c\u5e76\u8fdb\u5165L2TP\u96a7\u9053\u3001\u88ab\u52a0\u5bc6\u540e\u9001\u5f80\u9632\u706b\u5899\u3002 \u62e8\u53f7\u6210\u529f\u540e\uff0c\u5ba2\u6237\u7aef\u663e\u793a\u5982\u4e0b\uff1a \u5728\u9632\u706b\u5899\u4e0a\u67e5\u770bL2TP\u96a7\u9053\uff1a 1\uff09\u672c\u6848\u4f8b\u53ef\u5728eNSP\u4e2d\u5b8c\u6210\uff0c\u9700\u5728eNSP\u4e2d\u914d\u7f6eCloud\uff0c\u5e76\u4e0e\u7535\u8111\u7684\u7f51\u5361\u8fdb\u884c\u6865\u63a5\u3002 2\uff09\u5728\u672c\u4f8b\u4e2d\uff0cCoreSwitch\u5fc5\u987b\u62e5\u6709\u5230\u8fbe10.1.1.10~10.1.1.20\u8fd9\u4e9bIP\u5730\u5740\u6240\u5728\u7f51\u6bb5\u7684\u8def\u7531\uff0c\u5e76\u4e14\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u9700\u4e3a\u9632\u706b\u5899\u3002\u6700\u7b80\u5355\u7684\u65b9\u5f0f\uff0c\u5373\u5728CoreSwitch\u4e0a\u914d\u7f6e\u5230\u8fbe10.1.1.0/24\u7684\u9759\u6001\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3aFW\u3002 \u914d\u7f6e\u6848\u4f8b1\uff1aNGFW\u53cc\u673a\u4e3b\u5907\u573a\u666f\u4e0b\u91c7\u7528OSPF\u8fde\u63a5\u5916\u90e8\u7f51\u7edc\u65f6\u90e8\u7f72 \u00b6 IPSecVPN \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u4e24\u4e2a\u7ad9\u70b9\u7684\u7f51\u7edc\u8bbe\u5907\u901a\u8fc7\u4e2d\u95f4\u7684\u5916\u90e8\u7f51\u7edc\u8fdb\u884c\u5bf9\u63a5\u3002NGFW1\u53caNGFW2\uff08E1000E- N\uff0c\u8f6f\u4ef6\u7248\u672c\u4e3aV1R1C30\uff09\u662f\u7ad9\u70b91\u7684\u8bbe\u5907\uff0c\u800cFW1\u53caFW2\uff08E1000E-X\uff09\u662f\u7ad9\u70b92\u7684\u8bbe\u5907\u3002\u4e24\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u901a\u8fc7\u70b9\u5bf9\u70b9\u94fe\u8def\u3001\u91c7\u7528OSPF\u8def\u7531\u534f\u8bae\u4e0e\u5916\u90e8\u5bf9\u63a5\u3002 \u73b0\u5728\uff0c\u6211\u4eec\u8981\u5728\u4e24\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e4b\u95f4\u90e8\u7f72Site-to-Site IPSecVPN\uff0c\u4f7f\u5f97\u4e24\u5730\u5185\u7f51\u7684\u7528\u6237\uff08\u56fe\u4e2d\u7684PC1\u4e0e PC2\uff09\u80fd\u591f\u5b89\u5168\u5730\u901a\u4fe1\u3001\u80fd\u591f\u91c7\u7528\u5b9e\u9645\u5185\u7f51IP\u5730\u5740\u8fdb\u884c\u4e92\u901a\u3002\u7f51\u7edc\u6b63\u5e38\u65f6\uff0cNGFW1\u662f\u7ad9\u70b91\u7684\u4e3b\u7528\u5899\uff0c\u800c FW1\u5219\u662f\u7ad9\u70b92\u7684\u4e3b\u7528\u5899\uff0c\u4e24\u5730\u5185\u7f51\u7684\u4e92\u901a\u6d41\u91cf\u901a\u8fc7\u4e24\u53f0\u4e3b\u7528\u5899\u4e4b\u95f4\u5efa\u7acb\u7684IPSecVPN\u96a7\u9053\u8fdb\u884c\u4ea4\u4e92\u3002\u5f53 NGFW1\u6216FW1\uff08\u6216\u5176\u5916\u7f51\u7ebf\u8def\uff09\u53d1\u751f\u6545\u969c\u65f6\uff0c\u4e24\u5730\u5185\u7f51\u4e92\u8bbf\u7684\u6d41\u91cf\u53ef\u4ee5\u5e73\u6ed1\u5730\u5207\u6362\u3002 \u8fd9\u4e2a\u65b9\u6848\u7684\u7279\u70b9\u5728\u4e8e\uff0c\u4ee5\u53cc\u673a\u4e3b\u5907\u65b9\u5f0f\u5de5\u4f5c\u7684\u9632\u706b\u5899\u5bf9\u5916\u4e0e\u8def\u7531\u8bbe\u5907\u5bf9\u63a5\uff0c\u800c\u4e14\u8fd0\u884c\u4e86\u52a8\u6001\u8def\u7531\u534f\u8bae \uff08OSPF\uff09\uff0c\u6211\u4eec\u8981\u5728\u8fd9\u4e2a\u573a\u666f\u4e2d\u90e8\u7f72IPSecVPN\uff0c\u8981\u6c42VPN\u96a7\u9053\u5728\u4e3b\u5907\u5899\u4e4b\u95f4\u80fd\u591f\u5b9e\u73b0\u9ad8\u53ef\u9760\u6027\u3002\u5b9e\u9645\u4e0a\u8981\u5b9e\u73b0\u8fd9\u4e2a\u9700\u6c42\uff0c\u65b9\u6848\u5b58\u5728\u51e0\u79cd\uff0c\u672c\u6587\u5c06\u4ecb\u7ecd\u57fa\u4e8eTunnel\u63a5\u53e3\u5efa\u7acbIPSecVPN\u96a7\u9053\u7684\u65b9\u6848\u3002 \u5728NGFW1\u53caNGFW2\u4e0a\u5404\u521b\u5efa\u4e00\u4e2aTunnel0\u63a5\u53e3\uff0c\u4e3a\u8be5\u63a5\u53e3\u5206\u914d\u76f8\u540c\u7684IP\u5730\u5740\uff08100.1.1.1/32\uff09\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u4e24\u4e2a\u9632\u706b\u5899\u5bf9\u5916\u53ef\u5448\u73b0\u51fa\u4e00\u4e2aIP\u5730\u5740\u3002\u5f53\u7136\u8fd9\u4e2aIP\u5730\u5740\u9700\u662f\u5916\u90e8\u7f51\u7edc\u4e2d\u8def\u7531\u53ef\u8fbe\u7684\uff0cNGFW1\u53ca NGFW2\u5c06\u8be5\u5730\u5740\u901a\u8fc7OSPF\u901a\u544a\u5230\u5916\u90e8\u7f51\u7edc\uff08NGFW\u4f1a\u81ea\u52a8\u5c06\u5907\u5899\u901a\u544a\u7684\u8def\u7531\u7684Cost\u8c03\u5927\uff0c\u4f7f\u5f97\u8bbf\u95ee 100.1.1.1/32\u7684\u6d41\u91cf\u5230\u8fbe\u4e3b\u5899\uff09\u3002\u540c\u7406\u7ad9\u70b92\u7684FW1\u53caFW2\u5404\u81ea\u521b\u5efa\u4e00\u4e2aTunnel0\u63a5\u53e3\uff0c\u4e14\u5206\u914d\u76f8\u540c\u7684IP\u5730\u5740\uff08100.2.2.2/32\uff09\uff0c\u7136\u540e\u90fd\u5c06\u8be5\u5730\u5740\u901a\u544a\u5230OSPF\u7f51\u7edc\u3002\u968f\u540e\u4e24\u5bf9\u9632\u706b\u5899\u90e8\u7f72\u57fa\u4e8eTunnel0\u63a5\u53e3\u7684 IPSecVPN\u96a7\u9053\u3002 NGFW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a firewall zone untrust add interface GigabitEthernet 1/0/7 firewall zone name ha set priority 99 add interface GigabitEthernet 1/0/6 hrp interface GigabitEthernet 1/0/6 hrp mirror session enable hrp ospf-cost adjust-enable hrp enable ospf 1 router-id 1.1.1.1 area 0 network 11.1.1.1 0.0.0.0 quit quit # \u5c06\u76f4\u8fde\u8def\u7531100.1.1.1/32\u901a\u544a\u5230OSPF\uff1a ip ip-prefix 1 permit 100.1.1.1 32 route-policy Direct_to_OSPF permit node 10 if-match ip-prefix 1 quit ospf 1 import-route direct route-policy Direct_to_OSPF quit # IPSecVPN\u90e8\u7f72\uff1a acl number 3000 rule permit ip source 192.168.1.0 0.0.0.255 destination 192.168.2.0 0.0.0.255 quit ike proposal 1 authentication-method pre-share encryption-algorithm 3des-cbc authentication-algorithm sha2-256 integrity-algorithm hmac-sha1-96 dh group2 quit ike peer e1000ex ike-proposal 1 pre-shared-key Huawei123 remote-address 100.2.2.2 //100.2.2.2\u662f\u5bf9\u7aef\u7ad9\u70b9\u9632\u706b\u5899\u7684Tunnel0\u63a5\u53e3\u5730\u5740 undo version 1 //\u4f7f\u7528IKE v2\u5bf9\u63a5 quit ipsec proposal myset transform esp esp authentication-algorithm sha1 esp encryption-algorithm 3des quit ipsec policy mypolicy 1 isakmp security acl 3000 ike-peer e1000ex proposal myset local-address 100.1.1.1 //100.1.1.1\u662f\u672c\u9632\u706b\u5899\u7684Tunnel0\u63a5\u53e3\u5730\u5740 quit int tunnel 0 ip address 100.1.1.1 32 //\u4e3aTunnel0\u63a5\u53e3\u914d\u7f6eIP\u5730\u5740 tunnel-protocol ipsec //Tunnel\u63a5\u53e3\u7684\u5c01\u88c5\u6a21\u5f0f\u4e3aIPSec ipsec policy mypolicy //\u5c06IPSec\u7b56\u7565\u5e94\u7528\u5728Tunnel\u63a5\u53e3\u4e0a firewall zone untrust add interface Tunnel 0 //\u6ce8\u610f\uff0c\u5fc5\u987b\u5c06Tunnel0\u63a5\u53e3\u52a0\u5165\u5b89\u5168\u533a\u57df quit ip route-static 192.168.2.0 24 tunnel 0 //\u8fd9\u6761\u8def\u7531\u975e\u5e38\u5173\u952e\uff0c\u5b83\u7528\u4e8e\u5c06\u672c\u5730\u7528\u6237\u8bbf\u95ee\u5bf9\u7aef\u7ad9\u70b9\u5185\u7f51\u7528\u6237\u7684 \u6d41\u91cf\u7275\u5f15\u5230Tunne0\u63a5\u53e3\uff0c\u800cTunnel0\u63a5\u53e3\u5219\u662fIPSecVPN\u96a7\u9053\u7684\u7aef\u70b9 # \u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff0c\u6b64\u5904\u6709\u4e24\u79cd\u5b89\u5168\u7b56\u7565\u9700\u8981\u5173\u6ce8\uff0c1\u662f\u5141\u8bb8\u672c\u9632\u706b\u5899\u4e0e\u5bf9\u7aef\u7ad9\u70b9\u9632\u706b\u5899\u4ea4\u4e92\u7528\u4e8e\u534f\u5546IPSecVPN\u96a7\u9053\u7684\u76f8\u5173\u62a5\u6587\u7684\u7b56\u7565\uff0c2\u662f\u5141\u8bb8\u672c\u5730\u5185\u7f51\u7528\u6237\u4e0e\u5bf9\u7aef\u5185\u7f51\u7528\u6237\u4e92\u8bbf\u7684\u7b56\u7565\uff1a security-policy rule name IPsecVPN_From_Local source-zone local destination-zone untrust NGFW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u7ad9\u70b92\u7684\u9632\u706b\u5899FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a firewall zone trust add interface GigabitEthernet 0/0/1 firewall zone untrust add interface GigabitEthernet 0/0/8 firewall zone name ha set priority 99 add interface GigabitEthernet 0/0/6 hrp interface GigabitEthernet 0/0/6 hrp mirror session enable hrp ospf-cost adjust-enable hrp enable ospf 1 router-id 3.3.3.3 area 0 network 13.1.1.1 0.0.0.0 quit quit # ip ip-prefix 1 permit 100.2.2.2 32 route-policy Direct_to_OSPF permit node 10 if-match ip-prefix 1 quit ospf 1 import-route direct route-policy Direct_to_OSPF quit # IPSecVPN\u90e8\u7f72\uff1a acl number 3000 rule permit ip source 192.168.2.0 0.0.0.255 destination 192.168.1.0 0.0.0.255 quit ike proposal 1 authentication-method pre-share encryption-algorithm 3des-cbc integrity-algorithm hmac-sha1-96 dh group2 quit ike peer ngfw ike-proposal 1 pre-shared-key Huawei123 remote-address 100.1.1.1 undo version 1 quit ipsec proposal myset transform esp esp authentication-algorithm sha1 esp encryption-algorithm 3des quit ipsec policy mypolicy 1 isakmp security acl 3000 ike-peer ngfw proposal myset local-address 100.2.2.2 quit int tunnel 0 ip address 100.2.2.2 32 tunnel-protocol ipsec ipsec policy mypolicy firewall zone untrust add interface Tunnel 0 quit ip route-static 192.168.1.0 24 tunnel 0 # \u90e8\u7f72\u5b89\u5168\u7b56\u7565\uff1a policy interzone local untrust inbound policy 10 action permit policy source 100.1.1.1 0 policy destination 100.2.2.2 0 policy interzone local untrust outbound policy 10 FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5f53PC1\u4e0ePC2\u5f00\u59cb\u9996\u6b21\u4e92\u8bbf\u65f6\uff0c\u6d41\u91cf\u5c06\u89e6\u53d1\u9632\u706b\u5899\u8fdb\u884cIPSecVPN\u96a7\u9053\u534f\u5546\uff0c\u96a7\u9053\u5efa\u7acb\u540e\uff0cPC1 \u4e0ePC2\u5373\u53ef\u5b9e\u73b0\u76f8\u4e92\u901a\u4fe1\u3002\u6b64\u65f6\u4ee5NGFW1\u4e3a\u4f8b\uff0c\u67e5\u770bIKE SA\uff1a \u5173\u952e\u662f\u67e5\u770bIPSec SA\uff1a \u5f53\u7f51\u7edc\u6b63\u5e38\u65f6\uff0c\u7ad9\u70b9\u95f4\u4e92\u8bbf\u6d41\u91cf\u7684\u4ea4\u4e92\u8fc7\u7a0b\uff0c\u4ee5PC1\u8bbf\u95eePC2\u4e3a\u4f8b\uff0c\u62a5\u6587\u88abPC1\u9001\u5230\u7f51\u5173\uff0c\u4e5f\u5c31\u662fNGFW1\uff0c \u56e0\u4e3a\u5b83\u662f\u6b64\u65f6\u7684\u4e3b\u5899\uff0c\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\u662f192.168.2.222\uff0c\u4e5f\u5c31\u662fPC2\u7684\u5730\u5740\u3002NGFW1\u67e5\u8be2\u81ea\u5df1\u7684\u8def\u7531\u8868\uff0c\u53d1\u73b0\u9700\u8981\u5c06\u62a5\u6587\u9001\u81f3Tunnel0\u63a5\u53e3\uff0c\u56e0\u6b64\u5224\u65ad\u62a5\u6587\u4eceTrust\u533a\u57df\u8fdb\u3001Untrust\u533a\u57df\u51fa\uff0c\u7136\u540e\u68c0\u67e5\u5b89\u5168\u7b56\u7565\uff0c\u53d1\u73b0\u62a5\u6587\u88ab\u5141\u8bb8\u901a\u884c\u3002\u7531\u4e8eTunnel0\u63a5\u53e3\u7684\u5c01\u88c5\u7c7b\u578b\u4e3aIPSec\uff0c\u52a0\u4e0a\u8be5\u6d41\u91cf\u6ee1\u8db3ACL3000\uff08IPSecVPN\u611f\u5174\u8da3\u7684\u6570\u636e\u6d41\u91cf\uff09\u7684\u89c4\u5219\uff0c\u56e0\u6b64NGFW1\u5728\u672c\u5730\u67e5\u8be2IPSec SA\uff0c\u7136\u540e\u5c06\u6d41\u91cf\u8fdb\u884c\u52a0\u5bc6\u7b49\u64cd\u4f5c\uff0c\u518d\u5c01\u88c5\u4e00\u4e2a\u65b0\u7684IP\u5934\u90e8\uff0c\u8be5IP\u5934\u90e8\u7684\u6e90\u5730\u5740\u4e3a100.1.1.1\uff0c\u76ee\u7684\u5730\u5740\u4e3a100.2.2.2\u3002NGFW1\u5c06\u5904\u7406\u8fc7\u7684\u62a5\u6587\u8f6c\u53d1\u5230\u5916\u90e8\u7f51\u7edc\u3002\u5916\u90e8\u7f51\u7edc\u5c06\u62a5\u6587\u8def\u7531\u5230FW1\uff0c\u7531\u540e\u8005\u505a\u5b8c\u6574\u6027\u6821\u9a8c\u3001\u89e3\u5bc6\u7b49\u64cd\u4f5c\uff0c\u6700\u7ec8\u5c06\u539f\u59cb\u62a5\u6587\u8f6c\u53d1\u7ed9PC2\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5f53NGFW1\u8fde\u63a5\u5916\u7f51\u7684\u8fde\u63a5\u53d1\u751f\u6545\u969c\u65f6\uff0c\u7acb\u5373\u53d1\u751f\u4e3b\u5907\u5207\u6362\uff0c\u6d41\u91cf\u88ab\u5438\u5f15\u5230NGFW2\uff0c\u6b64\u65f6\u7531NGFW2\u5df2\u7ecf\u62e5\u6709\u4e86\u4e3b\u5899\u6b64\u524d\u534f\u5546\u597d\u7684IPSec SA\uff0c\u56e0\u6b64\u53ef\u4ee5\u7acb\u5373\u5c06\u6d41\u91cf\u8fdb\u884c\u52a0\u5bc6\u7b49\u5904\u7406\uff0c\u7136\u540e\u4ece\u96a7\u9053\u8f6c\u53d1\u51fa\u53bb\uff1a \u4ece\u5b9e\u5730\u6d4b\u8bd5\u7684\u7ed3\u679c\u770b\uff0c\u5728PC1\u6301\u7eedping PC2\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u751f\u4e0a\u8ff0\u6545\u969c\u65f6\uff0c\u4ec5\u4ec5\u4f1a\u4e22\u59312\u4e2aICMP\u5305\uff0c\u968f\u540e\u901a\u4fe1\u5373\u53ef\u6062\u590d\u6b63\u5e38\u3002 \u7f51\u7edc\u7ba1\u7406 \u00b6 SNMP \u6280\u672f\u80cc\u666f \u00b6 \u5047\u8bbe\u4f60\u4f5c\u4e3a\u4e00\u4e2a\u7f51\u7edc\u7684\u7ba1\u7406\u5458\uff0c\u8981\u5b9e\u73b0\u5bf9\u7f51\u7edc\u7684\u7ba1\u7406\uff0c\u8981\u77e5\u9053\u6bcf\u53f0\u7f51\u7edc\u8bbe\u5907\u7684\u8fd0\u884c\u72b6\u51b5\uff0c\u5e76\u4e14\u5728\u7f51\u7edc\u8bbe\u5907\u53d1\u751f\u4e00\u4e9b\u5173\u952e\u6027\u4e8b\u4ef6\u7684\u65f6\u5019\u7b2c\u4e00\u65f6\u95f4\u6355\u6349\u5230\uff0c\u8be5\u5982\u4f55\u5b9e\u73b0\u5462\uff1f\u8fd9\u91cc\u5c31\u8981\u7528\u5230SNMP\uff08Simple Network Management Protocol\uff09\u4e86\u3002 \u968f\u7740\u7f51\u7edc\u4e1a\u52a1\u7684\u65e5\u76ca\u53d1\u5c55\uff0c\u73b0\u6709\u7684\u7f51\u7edc\u4e2d\uff0c\u8bbe\u5907\u6570\u91cf\u65e5\u76ca\u5e9e\u5927\uff0c\u4e14\u8fd9\u4e9b\u8bbe\u5907\u4e0e\u7f51\u7edc\u7ba1\u7406\u5458\u6240\u5728\u7684\u4e2d\u5fc3\u673a\u623f\u8ddd\u79bb\u8f83\u8fdc\u3002\u5f53\u8fd9\u4e9b\u8bbe\u5907\u53d1\u751f\u6545\u969c\u65f6\uff0c\u5982\u679c\u8bbe\u5907\u65e0\u6cd5\u4e3b\u52a8\u4e0a\u62a5\u6545\u969c\uff0c\u5bfc\u81f4\u7f51\u7edc\u7ba1\u7406\u5458\u65e0\u6cd5\u53ca\u65f6\u611f\u77e5\u3001\u53ca\u65f6\u5b9a\u4f4d\u548c\u6392\u9664\u6545\u969c\uff0c\u90a3\u4e48\u5c06\u5bfc\u81f4\u7f51\u7edc\u7684\u7ef4\u62a4\u6548\u7387\u964d\u4f4e\uff0c\u7ef4\u62a4\u5de5\u4f5c\u91cf\u5927\u5927\u589e\u52a0\u3002 \u5229\u7528SNMP\u7b80\u5355\u7f51\u7edc\u7ba1\u7406\u534f\u8bae\uff0c\u7f51\u7ba1\u670d\u52a1\u5668\u53ef\u4ee5\u8fdc\u7a0b\u8be2\u95ee\u8bbe\u5907\u7684\u72b6\u6001\uff0c\u540c\u6837\u8bbe\u5907\u4e5f\u80fd\u591f\u5728\u7279\u5b9a\u7c7b\u578b\u7684\u4e8b\u4ef6\u53d1\u751f\u65f6\u5411\u7f51\u7edc\u7ba1\u7406\u5de5\u4f5c\u7ad9\u53d1\u51fa\u8b66\u544a\u3002SNMP\u662f\u89c4\u5b9a\u7f51\u7ba1\u7ad9\u548c\u8bbe\u5907\u4e4b\u95f4\u5982\u4f55\u4f20\u9012\u7ba1\u7406\u4fe1\u606f\u7684\u5e94\u7528\u5c42\u534f\u8bae\u3002SNMP\u5b9a\u4e49\u4e86\u7f51\u7ba1\u7ba1\u7406\u8bbe\u5907\u7684\u51e0\u79cd\u64cd\u4f5c\uff0c\u4ee5\u53ca\u8bbe\u5907\u6545\u969c\u65f6\u80fd\u5411\u7f51\u7ba1\u4e3b\u52a8\u53d1\u9001\u544a\u8b66\u3002 \u7f51\u7ba1\u4f7f\u7528SNMP\u534f\u8bae\u7ba1\u7406\u8bbe\u5907\u65f6\uff0c\u5b58\u5728\u7f51\u7ba1\u7ad9\u3001Agent\u548c\u88ab\u7ba1\u7406\u8bbe\u5907\u4e09\u4e2a\u89d2\u8272\u3002\u5173\u4e8e\u89d2\u8272\u3001MIB\u548c\u64cd\u4f5c\u7684\u5b9a\u4e49\u548c\u4f5c\u7528\u8bf7\u53c2\u8003\u4e0b\u9762\u7684\u5177\u4f53\u5185\u5bb9\u3002 SNMP\u6982\u8ff0 \u00b6 SNMP\uff08Simple Network Management Protocol\uff0c\u7b80\u5355\u7f51\u7edc\u7ba1\u7406\u534f\u8bae\uff09\u662f\u5e7f\u6cdb\u7528\u4e8eTCP/IP\u7f51\u7edc\u7684\u7f51\u7edc\u7ba1\u7406\u6807\u51c6\u534f\u8bae\uff0c\u662f\u4e00\u4e2a\u516c\u6709\u7684\u6807\u51c6\u3002SNMP\u63d0\u4f9b\u4e86\u4e00\u79cd\u901a\u8fc7\u8fd0\u884c\u7f51\u7edc\u7ba1\u7406\u8f6f\u4ef6\u7684\u4e2d\u5fc3\u8ba1\u7b97\u673a\uff08\u5373\u7f51\u7edc\u7ba1\u7406\u5de5\u4f5c\u7ad9NMS\uff09\u6765\u7ba1\u7406\u7f51\u5143\u7684\u65b9\u6cd5\u3002\u5171\u6709\u4e09\u4e2a\u7248\u672cSNMPv1\u3001SNMPv2c\u548cSNMPv3\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\u9009\u62e9\u540c\u65f6\u914d\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a\u7248\u672c\u3002 SNMP\u7684\u89d2\u8272\u8ba4\u77e5 \u00b6 **\u7f51\u7ba1\u7ad9\uff08Network Management Station\uff09\uff1a**\u5411\u88ab\u7ba1\u7406\u8bbe\u5907\u53d1\u9001\u5404\u79cd\u67e5\u8be2\u62a5\u6587\uff0c\u4ee5\u53ca\u63a5\u6536\u88ab\u7ba1\u7406\u8bbe\u5907\u53d1\u9001\u7684\u544a\u8b66\u3002\u5728\u5b9e\u9645\u7684\u7f51\u7edc\u73af\u5883\u4e2d\u5c31\u662f\u5b89\u88c5\u4e86\u7f51\u7ba1\u8f6f\u4ef6\u7684\u670d\u52a1\u5668\u3002 **\u88ab\u7ba1\u7406\u8bbe\u5907\uff08Devices\uff09\uff1a**\u4e5f\u5c31\u662f\u7f51\u7edc\u4e2d\u7684\u5404\u79cd\u63a5\u53d7\u7f51\u7ba1\u7684\u8bbe\u5907\uff0c\u5e38\u89c1\u7684\u5982\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u3001\u9632\u706b\u5899\u4ee5\u53ca\u5176\u4ed6\u652f\u6301SNMP\u7ba1\u7406\u7684\u8bbe\u5907\u3002 **\u4ee3\u7406\uff08Agent\uff09\uff1a**\u9a7b\u7559\u5728\u88ab\u7ba1\u7406\u8bbe\u5907\u4e0a\u7684\u4e00\u4e2a\u8fdb\u7a0b\u3002Agent\u7684\u4f5c\u7528\u5982\u4e0b\u3002 \u63a5\u6536\u3001\u89e3\u6790\u6765\u81ea\u7f51\u7ba1\u7ad9\u7684\u67e5\u8be2\u62a5\u6587\u3002 \u6839\u636e\u62a5\u6587\u7c7b\u578b\u5bf9\u7ba1\u7406\u53d8\u91cf\u8fdb\u884cRead\u6216Write\u64cd\u4f5c\uff0c\u5e76\u751f\u6210\u54cd\u5e94\u62a5\u6587\uff0c\u8fd4\u56de\u7ed9\u7f51\u7ba1\u7ad9\u3002 \u6839\u636e\u5404\u534f\u8bae\u6a21\u5757\u5bf9\u544a\u8b66\u89e6\u53d1\u6761\u4ef6\u7684\u5b9a\u4e49\uff0c\u5f53\u53d1\u751f\u67d0\u4e2a\u4e8b\u4ef6\uff08\u5982\u7aef\u53e3UP/DOWN\uff0cSTP\u62d3\u6251\u53d8\u66f4\u3001 OSPF\u90bb\u5c45\u5173\u7cfbDOWN\u6389\u7b49\uff09\u7684\u65f6\u5019\uff0c\u4e3b\u52a8\u89e6\u53d1\u4e00\u4e2a\u544a\u8b66\uff0c\u5411\u7f51\u7ba1\u7ad9\u62a5\u544a\u8be5\u4e8b\u4ef6\u3002 SNMP\u7684\u57fa\u672c\u5de5\u4f5c\u539f\u7406 \u00b6 \u4e0a\u9762\u662f\u4e00\u4e2a\u6700\u7b80\u5316\u7684\u5448\u73b0\u65b9\u5f0f\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4fdd\u8bc1\u88ab\u7f51\u7ba1\u8bbe\u5907\u4e0e\u7f51\u5173\u7ad9\u4e4b\u95f4\u662fIP\u53ef\u8fbe\u7684\uff0c\u5c31\u53ef\u4ee5\u5229\u7528 SNMP\u5b9e\u73b0\u7f51\u7ba1\u3002\u4e00\u79cd\u5178\u578b\u7684\u7f51\u7ba1\u65b9\u5f0f\u662fNM Station\u53d1\u9001\u76f8\u5173\u7684\u62a5\u6587\u53bb\u67e5\u8be2\u88ab\u7f51\u7ba1\u8bbe\u5907\u7684\u76f8\u5173\u8fd0\u884c\u4fe1\u606f \uff08\u4f8b\u5982\u67e5\u770b\u8bbe\u5907\u7684CPU\u5229\u7528\u7387\uff09\uff0c\u88ab\u7f51\u7ba1\u8bbe\u5907\u9488\u5bf9\u8fd9\u4e2a\u67e5\u8be2\u8fdb\u884c\u54cd\u5e94\uff0c\u6b64\u65f6\uff0cNM Station\u8bbf\u95ee\u7684\u662f\u88ab\u7f51\u7ba1\u8bbe\u5907\u7684UDP161\u7aef\u53e3\u3002 \u53e6\u4e00\u79cd\u5178\u578b\u7684\u7f51\u7ba1\u65b9\u5f0f\u662f\uff0c\u88ab\u7f51\u7ba1\u8bbe\u5907\u5728\u67d0\u4e2a\u4e8b\u4ef6\u53d1\u751f\u540e\uff0c\u89e6\u53d1\u4e86\u4e00\u4e2a\u544a\u8b66\uff0c\u5b83\u5c06\u8be5\u544a\u8b66\u901a\u8fc7Trap\u62a5\u6587\u53d1\u5f80NM Station\u7684UDP 162\u7aef\u53e3\u3002\u4ece\u800c\u7f51\u7ba1\u7ad9\u80fd\u591f\u5728\u7b2c\u4e00\u65f6\u95f4\u4e86\u89e3\u5230\u7f51\u7edc\u4e2d\u7684\u5404\u79cd\u7a81\u53d1\u4e8b\u4ef6\u3002 MIB \u00b6 \u60f3\u8c61\u4e00\u4e0b\u6bcf\u4e00\u4e2a\u88ab\u7f51\u7ba1\u7684\u8bbe\u5907\u90fd\u6709\u4e00\u68f5\u201c\u6811\u201d\uff0c\u8fd9\u68f5\u6811\u6709\u8bb8\u591a\u5206\u652f\u548c\u8282\u70b9\uff0c\u5728\u8282\u70b9\u4e0a\u6302\u7740\u679c\u5b9e\uff0c\u8981\u4e86\u89e3\u8be5\u8bbe\u5907\u7684\u67d0\u4e2a\u4fe1\u606f\uff0c\u5c31\u53bb\u6458\u53d6\u4e00\u4e2a\u7279\u5b9a\u7684\u679c\u5b9e\uff0c\u8fd9\u68f5\u6811\u5c31\u662fMIB\u3002 \u6bcf\u4e00\u4e2a\u88ab\u7f51\u7ba1\u8bbe\u5907\u7684Agent\u90fd\u7ef4\u62a4\u4e00\u4e2aMIB\u5e93\uff0cMIB\uff08Management Information Base\uff0c\u7ba1\u7406\u4fe1\u606f\u5e93\uff09\u662f\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u6811\u5f62\u7ed3\u6784\u7684\u6570\u636e\u5e93\uff0c\u5176\u4e2d\u542b\u6709\u5927\u91cf\u5bf9\u8c61\uff08Objects\uff09\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u4e2d\u5b58\u50a8\u7740\u8be5\u8bbe\u5907\u7684\u5404\u79cd\u4fe1\u606f\uff0c \u800cMIB\u5c31\u662f\u6240\u6709\u5bf9\u8c61\u7684\u96c6\u5408\u3002\u53ef\u4ee5\u901a\u8fc7\u5bf9MIB\u7684\u8bfb\u53d6\u6216\u5199\u5165\u6765\u5b9e\u73b0\u5bf9\u8bbe\u5907\u7684\u7ba1\u7406\uff0c\u4e0b\u56fe\u5c31\u662fMIB\u7684\u4e00\u4e2a\u7b80\u5355\u5448\u73b0\uff1a MIB\u662f\u4ee5\u6811\u72b6\u7ed3\u6784\u8fdb\u884c\u5b58\u50a8\u7684\uff0c\u6811\u7684\u8282\u70b9\u8868\u793a\u7ba1\u7406\u5bf9\u8c61Object\uff0c\u5728\u5bf9\u8c61\u4e2d\u5c31\u5b58\u50a8\u7740\u53ef\u7528\u4e8e\u7f51\u7ba1\u7684\u4fe1\u606f\uff0c \u5bf9\u8c61\u53ef\u4ee5\u7528\u4ece\u6839Root\u5f00\u59cb\u7684\u4e00\u6761\u8def\u5f84\u6765\u552f\u4e00\u7684\u8bc6\u522b\uff0c\u8fd9\u5c31\u662fOID\uff08Object Identifier\uff0c\u5373\u5bf9\u8c61\u6807\u793a\u7b26\uff09\uff0c \u901a\u8fc7OID\u5c31\u53ef\u4ee5\u51c6\u786e\u7684\u5b9a\u4f4d\u5230\u67d0\u4e2a\u5bf9\u8c61\uff0c\u4f8b\u5982\u4e0b\u56fe\u4e2d\uff0c\u8981\u627einternet\u8282\u70b9\uff0c\u5c31\u4f7f\u7528{1.3.6.1}\uff1a \u901a\u8fc7OID\u6811\uff0c\u53ef\u4ee5\u9ad8\u6548\u4e14\u65b9\u4fbf\u5730\u7ba1\u7406\u5176\u4e2d\u6240\u5b58\u50a8\u7684\u7ba1\u7406\u4fe1\u606f\uff0c\u540c\u65f6\u4e5f\u65b9\u4fbf\u4e86\u5bf9\u5176\u4e2d\u7684\u4fe1\u606f\u8fdb\u884c\u6279\u91cf\u67e5\u8be2\u3002 \u7279\u522b\u5730\uff0c\u5f53\u7528\u6237\u5728\u914d\u7f6eAgent\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7MIB\u89c6\u56fe\u6765\u9650\u5236NMS\u80fd\u591f\u8bbf\u95ee\u7684MIB\u5bf9\u8c61\u3002MIB\u89c6\u56fe\u5b9e\u9645\u4e0a\u662fMIB\u7684\u5b50\u96c6\u5408\u3002 \u76ee\u524dSNMPv1 \u5728\u73b0\u7f51\u4e2d\u5df2\u7ecf\u51e0\u4e4e\u4e0d\u518d\u4f7f\u7528\uff0c SNMPv2c \u4e5f\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c SNMPv3 \u7684\u5b9e\u73b0\u539f\u7406\u548c SNMPv1/SNMPv2c\u57fa\u672c\u4e00\u81f4\uff0c\u552f\u4e00\u7684\u533a\u522b\u662fSNMPv3\u589e\u52a0\u4e86\u8eab\u4efd\u9a8c\u8bc1\u548c\u52a0\u5bc6\u5904\u7406\u3002\u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0c\u5efa\u8bae\u4f7f\u7528SNMPv3\u3002 SNMPv3 \u7684\u57fa\u7840\u914d\u7f6e SW\u4e3a\u4ee5\u592a\u7f51\u4ea4\u6362\u673a\uff08\u4ee5S5300\u4ea4\u6362\u673a\u7684V2R3\u7cfb\u7edf\u8f6f\u4ef6\u7248\u672c\u4e3a\u4f8b\uff09\uff0c\u6309\u56fe\u4e2d\u6240\u793a\u8fde\u63a5\u7740\u7f51\u7edc\u7ba1\u7406\u7cfb\u7edf\uff08NMS\uff09\uff0c\u5178\u578b\u7684NMS\u5982I2000\u3002\u5b8c\u6210SW\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97NMS\u80fd\u591f\u901a\u8fc7SNMP\u7ba1\u7406SW\uff0c\u800c\u4e14SW\u4e5f\u80fd\u591f\u5c06\u544a\u8b66\u901a\u8fc7SNMP Trap\u4e0a\u62a5\u7ed9NMS\u3002 SW\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a \u6ce8\u610f\uff1a\u4e0a\u8ff0\u914d\u7f6e\u4ec5\u5448\u73b0\u4ea4\u6362\u673aSNMP\u53ca\u544a\u8b66\u76f8\u5173\u7684\u914d\u7f6e\uff0c\u5176\u4ed6\u7684\u8bf8\u5982\u4ea4\u6362\u673aVLAN\u3001Vlanif\u53ca\u63a5\u53e3\u7c7b\u578b\u7b49\u914d\u7f6e\u4e0d\u518d\u8d58\u8ff0\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a \u00b6 \u5728\u90e8\u7f72\u7f51\u7edc\u8bbe\u5907\u4e0eNMS\uff08\u4f8b\u5982I2000\u7f51\u7ba1\u7cfb\u7edf\uff09\u5bf9\u63a5\u65f6\uff0c\u52a1\u5fc5\u786e\u4fdd\u4e24\u8005\u4e4b\u95f4\u5404\u9879\u53c2\u6570\u7684\u7edd\u5bf9\u5339\u914d\uff0c\u4f8b\u5982 SNMP\u7248\u672c\u3001SNMP\u52a0\u5bc6\u6216\u9274\u6743\u65b9\u5f0f\u53ca\u5bc6\u7801\u7b49\u7b49\u3002 \u8981\u6c42\u91c7\u7528SNMPv3\u7248\u672c\u8fdb\u884c\u90e8\u7f72\uff0c\u800c\u4e0d\u662f\u5b89\u5168\u6027\u8f83\u4f4e\u7684SNMPv2c\u6216SNMPv1\u3002 \u5728\u5b9e\u9645\u90e8\u7f72\u7f51\u7edc\u8bbe\u5907\u4e0eNMS\u7684\u5bf9\u63a5\u65f6\uff0c\u5efa\u8bae\u9996\u5148\u786e\u4fdd\u4e24\u8005\u4e4b\u95f4\u901a\u4fe1\u7684\u6b63\u5e38\uff0c\u4ee5\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u53ef\u5728\u8bbe\u5907\u4e0aping\u7f51\u7ba1\u7cfb\u7edf\u3002\u5728\u6d4b\u8bd5\u8bbe\u5907\u544a\u8b66\u65f6\uff0c\u9700\u5728\u8bbe\u5907\u4e0a\u6267\u884c\u5e26\u6e90IP\u5730\u5740\u7684ping\u6d4b\u8bd5\uff0c\u5176\u4e2d\u6e90IP\u5730\u5740\u4e3a\u8bbe\u5907\u544a\u8b66\u62a5\u6587\u7684\u6e90IP\u5730\u5740\uff0c\u4e5f\u5c31\u662fsnmp-agent trap source\u547d\u4ee4\u6240\u6307\u5b9a\u7684\u63a5\u53e3IP\u5730\u5740\uff0c\u7f3a\u7701\u65f6\uff0c\u8be5IP\u5730\u5740\u4e3a\u544a\u8b66\u62a5\u6587\u51fa\u63a5\u53e3\u7684IP\u5730\u5740\u3002 NTP \u7684\u57fa\u7840\u914d\u7f6e \u7f51\u7edc\u4e2d\u90e8\u7f72\u4e86NTP\u670d\u52a1\u5668\uff08NTPServer\uff09\uff0c\u4e3a\u4e3b\u673a\u53ca\u7f51\u7edc\u8bbe\u5907\u63d0\u4f9b\u65f6\u949f\u6e90\u3002 \u5b8c\u6210SW\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97SW\u80fd\u591f\u4e0eNTPServer\u540c\u6b65\u65f6\u949f\u3002 SW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u8bf4\u660e\uff1a\u5176\u4e2d192.168.1.1\u662fNTP\u670d\u52a1\u7aef\u8bbe\u5907\uff0c\u670d\u52a1\u7aef\u8bbe\u5907\u53ef\u4ee5\u662fLinux\u5e73\u53f0\u7684\u670d\u52a1\u5668\uff0c\u4e5f\u53ef\u4ee5\u662f\u7f51\u7edc\u8bbe\u5907\u3002\u534e \u4e3aS\u7cfb\u5217\u4ea4\u6362\u673a\u652f\u6301\u7684NTP\u7248\u672c\u662f1-3\uff0c\u7f3a\u7701\u4f7f\u7528\u7684\u662f\u7248\u672c3\u3002\u5982\u679cNTP\u670d\u52a1\u5668\u662fLinux\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5e76\u4e14\u4f7f\u7528 NTPv4\uff0c\u662f\u53ef\u4ee5\u4e0e\u4ea4\u6362\u673a\u7684NTPv3\u517c\u5bb9\u7684\u3002\u5982\u679c\u53cc\u65b9\u6fc0\u6d3b\u4e86authentication\uff0c\u90a3\u4e48\u8981\u786e\u4fdd\u4e24\u7aefauthentication- keyid\u548cKey\u90fd\u662f\u5206\u522b\u4e00\u81f4\u7684\u3002 \u7ec4\u64ad\u6280\u672f \u00b6 \u7ec4\u64ad\u57fa\u7840 \u7ec4\u64ad\u6982\u8ff0 \u4ec0\u4e48\u662f\u5355\u64ad\uff08Unicast\uff09 \u00b6 \u5355\u64ad\u901a\u4fe1\u5e94\u8be5\u662f\u6211\u4eec\u73b0\u5b9e\u4e2d\u89c1\u5f97\u6700\u591a\u7684\u901a\u4fe1\u65b9\u5f0f\uff0c\u51e0\u4e4e\u968f\u5904\u53ef\u89c1\u3002 \u6240\u8c13\u7684\u5355\u64ad\uff0c\u5c31\u662f\u4e00\u5bf9\u4e00\u7684\u6570\u636e\u901a\u4fe1\u8fc7\u7a0b\uff0c\u4e00\u4e2a\u5355\u64ad\u6570\u636e\u5305\u53ea\u53d1\u7ed9\u4e00\u4e2a\u7279\u5b9a\u7684\u76ee\u6807\u8bbe\u5907\uff0c\u8fd9\u4e2a\u76ee\u6807\u8bbe\u5907\u662f\u6570\u636e\u5305\u7684\u76ee\u7684IP\u5730\u5740\u7684\u62e5\u6709\u8005\u3002 \u5f53\u6e90\u9700\u8981\u5c06\u4e00\u4efd\u76f8\u540c\u7684\u6570\u636e\u540c\u65f6\u53d1\u9001\u7ed9\u591a\u4e2a\u63a5\u6536\u8005\u65f6\uff0c\u6e90\u9700\u53d1\u9001\u4e0e\u63a5\u6536\u8005\u6570\u76ee\u76f8\u540c\u7684\u5355\u64ad\u6570\u636e\u5305\u3002\u8fd9\u79cd\u9700\u6c42\u5e38\u89c1\u4e8e\u591a\u5a92\u4f53\u76f4\u64ad\u7b49\u4e1a\u52a1\u3002 \u5f53\u63a5\u53d7\u8005\u589e\u52a0\u5230\u6210\u767e\u4e0a\u5343\u65f6\uff0c\u5c06\u6781\u5927\u52a0\u91cd\u670d\u52a1\u5668\u4e3a\u76f8\u540c\u6570\u636e\u521b\u5efa\u548c\u53d1\u9001\u591a\u4efd\u62f7\u8d1d\u7684\u8d1f\u62c5\uff0c\u7f51\u7edc\u8bbe\u5907\u4e5f\u5c06\u627f\u53d7\u66f4\u5927\u7684\u6027\u80fd\u635f\u8017\u3002\u4f8b\u5982\u89c6\u9891\u7c7b\u7684\u670d\u52a1\uff0c\u5982\u679c\u91c7\u7528\u5355\u64ad\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u6050\u6015\u5c31\u6709\u6bd4\u8f83\u5927\u7684\u77ed\u677f\u3002 \u4ec0\u4e48\u662f\u5e7f\u64ad\uff08Broadcast\uff09 \u00b6 \u5e7f\u64ad\u6570\u636e\u5305\u88ab\u9650\u5236\u5728\u5e7f\u64ad\u57df\u4e2d\uff1b\u5e7f\u64ad\u57df\u7684\u4e00\u4e2a\u5178\u578b\u7684\u4f8b\u5b50\u662fVLAN\uff0c\u4e00\u4e2aVLAN\u5c31\u662f\u4e00\u4e2a\u5e7f\u64ad\u57df\u3002\u8def\u7531\u5668\u80fd\u591f\u9694\u79bb\u5e7f\u64ad\u57df\uff0c\u5e7f\u64ad\u6570\u636e\u5305\u5230\u8fbe\u8def\u7531\u5668\u7684\u4e09\u5c42\u63a5\u53e3\u540e\uff0c\u5373\u5230\u8fbe\u4e86\u4f20\u64ad\u7684\u8fb9\u754c\u3002 \u5728\u4e00\u4e2a\u5e7f\u64ad\u57df\u4e2d\uff0c\u4e00\u65e6\u6709\u8282\u70b9\u53d1\u9001\u5e7f\u64ad\u6570\u636e\uff0c\u90a3\u4e48\u5e7f\u64ad\u57df\u5185\u7684\u6240\u6709\u8bbe\u5907\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u5e76\u4e14\u4e0d\u5f97\u4e0d\u8017\u8d39\u8d44\u6e90\u53bb\u5904\u7406\uff0c\u5927\u91cf\u7684\u5e7f\u64ad\u6570\u636e\u5305\u5c06\u6d88\u8017\u7f51\u7edc\u7684\u5e26\u5bbd\u53ca\u8bbe\u5907\u8d44\u6e90\uff1b \u5728IPv6\u4e2d\uff0c\u5e7f\u64ad\u7684\u62a5\u6587\u4f20\u8f93\u65b9\u5f0f\u88ab\u53d6\u6d88\uff1b \u56e0\u6b64\u5728\u540c\u4e00\u4efd\u6570\u636e\u5b58\u5728\u591a\u4e2a\u63a5\u6536\u8005\u7684\u573a\u666f\u4e0b\uff0c\u5e7f\u64ad\u4f9d\u7136\u4e0d\u592a\u5408\u9002\u3002 \u4ec0\u4e48\u662f\u7ec4\u64ad\uff08Multicast\uff09 \u00b6 \u7ec4\u64ad\u7684\u6570\u636e\u4f20\u8f93\u65b9\u5f0f\u662f\u4e00\u5bf9\u591a\u7684\u6a21\u578b\uff0c\u53ea\u6709\u52a0\u5165\u5230\u7279\u5b9a\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\uff0c\u624d\u4f1a\u6536\u5230\u53d1\u5f80\u8be5\u7ec4\u7684\u7ec4\u64ad\u6570\u636e\u3002\u4ee5\u7ec4\u64ad\u5730\u5740\u4e3a\u76ee\u7684\u5730\u5740\u7684\u6570\u636e\u53d1\u5f80\u591a\u4e2a\u63a5\u6536\u8005\u3002 \u5f53\u4e00\u4e2a\u7ec4\u5185\u5b58\u5728\u591a\u4e2a\u6210\u5458\u65f6\uff0c\u6570\u636e\u53d1\u9001\u6e90\u65e0\u9700\u6bcf\u6b21\u53d1\u9001\u591a\u4e2a\u6570\u636e\u62f7\u8d1d\uff0c\u800c\u662f\u6bcf\u6b21\u4ec5\u9700\u53d1\u9001\u4e00\u4efd\u5373\u53ef\uff0c\u7ec4\u64ad\u8def\u7531\u5668\uff08\u8fd0\u884c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\uff0c\u6b64\u5904\u4e5f\u6307\u5176\u4ed6\u7c7b\u578b\u7684\u8bbe\u5907\uff0c\u4f8b\u5982\u4ea4\u6362\u673a\u7b49\uff09\u4f1a\u6839\u636e\u9700\u8981\u8f6c\u53d1\u6216\u62f7\u8d1d\u7ec4\u64ad\u6570\u636e\u3002 \u7ec4\u64ad\u6570\u636e\u6d41\u53ea\u53d1\u9001\u7ed9\u52a0\u5165\u8be5\u7ec4\u64ad\u7ec4\u7684\u7528\u6237\uff0c\u800c\u4e0d\u9700\u8981\u8be5\u6570\u636e\u7684\u8bbe\u5907\u5219\u4e0d\u4f1a\u6536\u5230\u8be5\u7ec4\u64ad\u6d41\u91cf\u3002 \u76f8\u540c\u7684\u7ec4\u64ad\u4e1a\u52a1\u6d41\u91cf\uff0c\u5728\u4e00\u6bb5\u94fe\u8def\u4e0a\u4ec5\u6709\u4e00\u4efd\u6570\u636e\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u7f51\u7edc\u8d44\u6e90\u7684\u5229\u7528\u7387\u3002 \u7ec4\u64ad\u7684\u7279\u70b9\u548c\u5e94\u7528 \u00b6 \u7ec4\u64ad\u7684\u7279\u70b9\uff1a \u63d0\u9ad8\u6548\u7387\uff1a\u5728\u4e00\u5bf9\u591a\u7684\u901a\u4fe1\u573a\u666f\u4e0b\uff0c\u964d\u4f4e\u7f51\u7edc\u6d41\u91cf\u3001\u51cf\u8f7b\u786c\u4ef6\u8d1f\u8377\uff1b \u4f18\u5316\u6027\u80fd\uff1a\u5728\u4e00\u5bf9\u591a\u7684\u901a\u4fe1\u573a\u666f\u4e0b\uff0c\u51cf\u5c11\u5197\u4f59\u6d41\u91cf\u3001\u8282\u7ea6\u7f51\u7edc\u5e26\u5bbd\u3001\u964d\u4f4e\u7f51\u7edc\u8d1f\u8f7d\uff1b \u7ec4\u64ad\u7684\u5e94\u7528\uff1a \u7ec4\u64ad\u9002\u7528\u4e8e\u591a\u63a5\u6536\u8005\u671f\u671b\u6536\u53d6\u76f8\u540c\u6d41\u91cf\u7684\u573a\u666f\uff1b \u7ec4\u64ad\u9002\u7528\u4e8e\u63a5\u6536\u8005\u5730\u5740\uff08\u6216\u4f4d\u7f6e\uff09\u672a\u77e5\u7684\u573a\u666f\uff1b \u591a\u5a92\u4f53\u76f4\u64ad\uff1b \u57f9\u8bad\u3001\u591a\u5a92\u4f53\u4f1a\u8bae\u3001\u8054\u5408\u4f5c\u4e1a\u573a\u5408\u7684\u901a\u4fe1\uff1b \u6570\u636e\u4ed3\u5e93\u3001\u91d1\u878d\u5e94\u7528\uff08\u80a1\u7968\uff09\u3002 \u7ec4\u64ad\u6a21\u578b \u4e0a\u56fe\u5c31\u662f\u4e00\u4e2a\u5178\u578b\u7684\u7ec4\u64ad\u6a21\u578b\u3002\u901a\u5e38\u6211\u4eec\u5c06\u7ec4\u64ad\u6a21\u578b\u5206\u4e3a\u4e09\u4e2a\u6a21\u5757\u3002 \u7ec4\u64ad\u6e90\uff0c\u4e0e\u8ddf\u5176\u76f4\u8fde\u7684\u7ec4\u64ad\u8def\u7531\u5668\uff08\u7b2c\u4e00\u8df3\u8def\u7531\u5668\uff09\u6784\u6210\u4e86\u7b2c\u4e00\u4e2a\u6a21\u5757\uff0c\u8fd9\u4e2a\u6a21\u5757\u4e2d\u5e76\u6ca1\u6709\u7279\u6b8a\u7684\u4fe1\u4ee4\u6216\u63a7\u5236\u534f\u8bae\uff0c\u7ec4\u64ad\u6e90\u76f4\u63a5\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u7b2c\u4e00\u8df3\u8def\u7531\u5668\u4f1a\u6536\u5230\u8fd9\u4e9b\u7ec4\u64ad\u6570\u636e\u3002 \u7f51\u7edc\u4e2d\u7684\u7ec4\u64ad\u8def\u7531\u5668\uff0c\u4e5f\u5c31\u662f\u8fd0\u884c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\u6784\u6210\u4e86\u7b2c\u4e8c\u4e2a\u6a21\u5757\u3002\u7f51\u7edc\u4e2d\u7684\u8fd9\u4e9b\u7ec4\u64ad\u8def\u7531\u5668\u90fd\u5c06\u8fd0\u884c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\uff0c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u5de5\u4f5c\u7684\u76ee\u7684\u5c31\u662f\u5728\u7f51\u7edc\u4e2d\u6784\u5efa\u51fa\u4e00\u68f5\u65e0\u73af\u7684\u7ec4\u64ad\u5206\u53d1\u201c\u6811\u201d\uff0c\u4f7f\u5f97\u7ec4\u64ad\u6d41\u91cf\u4ece\u7b2c\u4e00\u8df3\u8def\u7531\u5668\u6cbf\u7740\u6784\u5efa\u597d\u7684\u7ec4\u64ad\u5206\u53d1\u6811\u8f6c\u53d1\u5230\u6bcf\u4e00\u4e2a\u7ec4\u64ad\u7528\u6237\u6240\u5728\u7684\u7f51\u6bb5\uff0c\u800c\u5bf9\u4e8e\u4e0d\u9700\u8981\u8fd9\u4e9b\u7ec4\u64ad\u6570\u636e\u7684\u7528\u6237\u6216\u7f51\u7edc\u5206\u652f\u5219\u4e0d\u4f1a\u6536\u5230\u7ec4\u64ad\u6d41\u91cf\u3002 \u7ec4\u64ad\u63a5\u6536\u8005\u4e0e\u5176\u76f4\u8fde\u7684\u8def\u7531\u5668\uff08\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\uff09\u6784\u6210\u4e86\u7b2c\u4e09\u4e2a\u6a21\u5757\u3002\u5728\u8fd9\u4e2a\u6a21\u5757\u4e2d\uff0c\u6709\u4e00\u4e2a\u534f\u8bae\u975e\u5e38\u9700\u8981\u5173\u6ce8\uff0c\u90a3\u5c31\u662fIGMP\uff08\u56e0\u7279\u7f51\u7ec4\u7ba1\u7406\u534f\u8bae\uff09\uff0c\u8fd9\u4e2a\u534f\u8bae\u5e2e\u52a9\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u4e86\u89e3\u5176\u63a5\u53e3\u6240\u8fde\u63a5\u7684\u7f51\u6bb5\u4e2d\u662f\u5426\u5b58\u5728\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\uff0c\u540c\u65f6\u534f\u52a9\u7ef4\u62a4\u7ec4\u6210\u5458\u5173\u7cfb\u3002\u7ec4\u64ad\u7528\u6237\uff08\u7ec8\u7aef\u8bbe\u5907\uff09\u5982\u679c\u8981\u52a0\u5165\u7ec4\u64ad\u7ec4\uff0c\u5219\u4f7f\u7528IGMP\u534f\u8bae\u62a5\u6587\u8fdb\u884c\u7533\u8bf7\uff0c\u800c\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u4e5f\u4f7f\u7528IGMP\u534f\u8bae\u62a5\u6587\u53bb\u67e5\u8be2\u76f4\u8fde\u7684\u7f51\u6bb5\u4e2d\u662f\u5426\u5b58\u5728\u7ec4\u6210\u5458\u3002 \u7ec4\u64ad\u7f51\u7edc\u7684\u6b63\u5e38\u5de5\u4f5c\u6b63\u662f\u7531\u4e0a\u9762\u6211\u4eec\u6240\u63cf\u8ff0\u7684\u5404\u4e2a\u7ec4\u4ef6\u534f\u540c\u5de5\u4f5c\u800c\u5b9e\u73b0\u7684\u3002 \u7ec4\u64ad\u5206\u53d1\u6811 \u7ec4\u64ad\u5730\u5740 \u7ec4\u64adIP\u5730\u5740\u7a7a\u95f4 \u00b6 \u5728IPv4\u5730\u5740\u7a7a\u95f4\u4e2d\uff0cD\u7c7b\u5730\u5740\uff08224.0.0.0/4\uff09\u88ab\u7528\u4e8e\u7ec4\u64ad\u3002\u7ec4\u64adIP\u5730\u5740\u4ee3\u8868\u4e00\u4e2a\u63a5\u6536\u8005\u7684\u96c6\u5408\u3002IANA\u5bf9 D\u7c7b\u5730\u5740\u505a\u4e86\u8fdb\u4e00\u6b65\u7684\u5b9a\u4e49\uff0c\u51e0\u79cd\u4e3b\u8981\u7684\u7ec4\u64ad\u5730\u5740\u5982\u4e0b\u8868\u6240\u793a\uff1a \u7ec4\u64adIP\u5730\u5740\u662f\u7ec4\u64ad\u7ec4\u7684\u6807\u8bc6\u7b26\u3002\u4e00\u4e2a\u5178\u578b\u7684\u7ec4\u64ad\u5e94\u7528\u573a\u666f\u662f\u89c6\u9891\u76f4\u64ad\u3002\u4f8b\u5982\u67d0\u4e2a\u89c6\u9891\u76f4\u64ad\u9891\u9053\u4f7f\u7528\u7ec4\u64ad IP\u5730\u5740239.1.1.1\u4f5c\u4e3a\u4e1a\u52a1\u5730\u5740\uff0c\u90a3\u4e48\u8be5\u89c6\u9891\u76f4\u64ad\u7684\u53d1\u9001\u6e90\uff08\u53ef\u80fd\u662f\u4e00\u53f0\u591a\u5a92\u4f53\u670d\u52a1\u5668\uff09\u4f1a\u6301\u7eed\u4ee5\u8be5\u7ec4\u64ad\u5730\u5740\u4e3a\u76ee\u7684IP\u5730\u5740\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u8fd9\u4e9b\u7ec4\u64ad\u6570\u636e\u4f1a\u88ab\u9001\u5165\u7ec4\u64ad\u7f51\u7edc\uff0c\u7ec4\u64ad\u7f51\u7edc\u4e2d\u7684\u7ec4\u64ad\u8bbe\u5907\uff08\u4f8b\u5982\u7ec4\u64ad\u8def\u7531\u5668\u6216\u8005\u7ec4\u64ad\u4ea4\u6362\u673a\uff09\u4f1a\u6839\u636e\u9700\u8981\u590d\u5236\u53ca\u8f6c\u53d1\u8fd9\u4e9b\u7ec4\u64ad\u62a5\u6587\uff0c\u6700\u7ec8\u7ec4\u64ad\u62a5\u6587\u6cbf\u7740\u4e00\u6761\u65e0\u73af\u7684\u8def\u5f84\u5230\u8fbe\u7ec4\u64ad\u63a5\u6536\u8005\u6240\u5728\u7684\u7f51\u6bb5\u3002\u5728\u8be5\u573a\u666f\u4e2d\uff0c\u7ec4\u64ad\u63a5\u6536\u8005\u53ef\u80fd\u662f\u4e00\u4e9b\u9700\u8981\u89c2\u770b\u8be5\u89c6\u9891\u76f4\u64ad\u7684PC\uff0c\u5b83\u4eec\u5fc5\u987b\u901a\u8fc7IGMP\u534f\u8bae\u62a5\u6587\u5ba3\u544a\u81ea\u5df1\u52a0\u5165\u4e86239.1.1.1\u8fd9\u4e2a\u7ec4\u64ad\u7ec4\uff0c\u968f\u540e\uff0c\u5f00\u59cb\u4fa6\u542c\u53d1\u5f80239.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\u3002 \u7ec4\u64adIP\u5730\u5740\u4e0eMAC\u5730\u5740\u7684\u6620\u5c04 \u00b6 \u5728\u4ee5\u592a\u7f51\u4e2d\uff0cIP\u6570\u636e\u5305\u5fc5\u987b\u589e\u52a0\u4ee5\u592a\u7f51\u5c01\u88c5\uff0c\u624d\u80fd\u5728\u4ee5\u592a\u7f51\u94fe\u8def\u4e0a\u4f20\u8f93\u3002\u5728\u4ee5\u592a\u7f51\u5c01\u88c5\u7684\u5e27\u5934\u4e2d\uff0c\u9700\u5199\u5165\u8be5\u6570\u636e\u5e27\u7684\u6e90\u548c\u76ee\u7684MAC\u5730\u5740\u3002\u5bf9\u4e8e\u5355\u64ad\u6570\u636e\u800c\u8a00\uff0c\u5176IP\u5305\u5934\u4e2d\u7684\u76ee\u7684IP\u5730\u5740\u662f\u5355\u64ad\u5730\u5740\uff0c\u800c\u4ee5\u592a \u7f51\u5e27\u5934\u4e2d\u7684\u76ee\u7684MAC\u5730\u5740\u5219\u662f\u94fe\u8def\u5c42\u9762\u4e0a\u7684\u4e0b\u4e00\u8df3\u8bbe\u5907\u7684MAC\u5730\u5740\uff0c\u8be5MAC\u5730\u5740\u4e5f\u662f\u5355\u64ad\u5730\u5740\u3002\u5bf9\u4e8e\u4e00\u4e2a\u7ec4\u64ad\u6570\u636e\u800c\u8a00\uff0c\u5176\u76ee\u7684IP\u5730\u5740\u5f53\u7136\u662f\u7ec4\u64adIP\u5730\u5740\uff0c\u90a3\u4e48\u5b83\u7684\u76ee\u7684MAC\u5730\u5740\u5462\uff1f\u5f53\u7136\uff0c\u4e0d\u53ef\u80fd\u662f\u4e00\u4e2a\u5355\u64adMAC\u5730\u5740\uff0c\u56e0\u4e3a\u8be5\u6570\u636e\u53d1\u5f80\u4e00\u7ec4\u63a5\u6536\u8005\uff0c\u800c\u4e0d\u662f\u5355\u4e00\u7684\u63a5\u6536\u8005\u3002\u5b9e\u9645\u4e0a\uff0c\u6b64\u5904\u4f7f\u7528\u7684MAC\u5730\u5740\u5fc5\u987b\u662f\u7ec4\u64adMAC\u5730\u5740\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u9700\u8981\u660e\u786e\u7ec4\u64adIP\u5730\u5740\u4e0e\u7ec4\u64adMAC\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\u3002\u5f53\u4e00\u4e2a\u7ec4\u64adIP \u62a5\u6587\u88ab\u5c01\u88c5\u4ee5\u592a\u7f51\u5e27\u5934\u65f6\uff0c\u8bbe\u5907\u4f1a\u6839\u636e\u62a5\u6587\u7684\u7ec4\u64adIP\u5730\u5740\u8fdb\u884c\u6620\u5c04\uff0c\u4ece\u800c\u5f97\u5230\u5bf9\u5e94\u7684\u7ec4\u64adMAC\u5730\u5740\uff0c \u5c06\u5176\u5199\u5165\u5e27\u5934\u7684\u76ee\u7684MAC\u5730\u5740\u5b57\u6bb5\u4e2d\u3002\u4e0b\u56fe\u63cf\u8ff0\u4e86\u4e00\u4e2a\u7ec4\u64adIP\u5730\u5740\u5230\u5bf9\u5e94\u7684\u7ec4\u64adMAC\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\uff1a IGMP IGMP \u6982\u8ff0 IGMP\uff08Internet Group Manage Protoco\uff0c\u56e0\u7279\u7f51\u7ec4\u7ba1\u7406\u534f\u8bael\uff09\u7528\u4e8e\u4e3b\u673a\u548c\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u4e4b\u95f4\u3002\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u662f\u76f4\u8fde\u7ec4\u64ad\u7ec4\u6210\u5458\u7684\u8def\u7531\u5668\uff0c\u5b83\u9700\u8981\u4e00\u79cd\u534f\u8bae\u6765\u89e3\u51b3\u7ec4\u6210\u5458\u7ba1\u7406\u7684\u95ee\u9898\uff0cIGMP\u5c31\u662f\u7528\u6765\u89e3\u51b3\u8fd9\u7c7b\u95ee\u9898\u7684\u3002 \u4e3b\u673a\u4f7f\u7528IGMP\u534f\u8bae\u62a5\u6587\u5411\u8def\u7531\u5668\u7533\u8bf7\u52a0\u5165\u548c\u9000\u51fa\u7ec4\u64ad\u7ec4\u3002\u5f53\u8def\u7531\u5668\u4ece\u63a5\u53e3\u4e0a\u6536\u5230\u76f4\u8fde\u7f51\u6bb5\u4e2d\u7684\u4e3b\u673a\u53d1\u9001\u51fa\u6765\u7684IGMP\u534f\u8bae\u62a5\u6587\u4e14\u8be5\u62a5\u6587\u7528\u4e8e\u5ba3\u544a\u5176\u52a0\u5165\u7ec4\u64ad\u7ec4\u65f6\uff0c\u8def\u7531\u5668\u4e5f\u5c31\u77e5\u9053\u4e86\u5728\u8be5\u76f4\u8fde\u7f51\u6bb5\u4e2d\u5b58\u5728\u7279\u5b9a\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\uff0c\u4ece\u800c\u5f53\u8def\u7531\u5668\u6536\u5230\u53d1\u5f80\u8be5\u7ec4\u64ad\u7ec4\u7684\u6d41\u91cf\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5411\u8be5\u63a5\u53e3\u8f6c\u53d1\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u8def\u7531\u5668\u901a\u8fc7IGMP \u534f\u8bae\u62a5\u6587\u67e5\u8be2\u7f51\u6bb5\u4e0a\u662f\u5426\u6709\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u3002 IGMP\u662f3\u5c42\u534f\u8bae\uff0c\u76f4\u63a5\u88ab\u5c01\u88c5\u5728IP\u4e2d\uff0c\u534f\u8bae\u53f7\u4e3a2\uff0cIGMP\u6570\u636e\u5305\u53ea\u5728\u672c\u7f51\u6bb5\u5185\u6709\u6548\uff0c\u62a5\u6587\u7684TTL\u53c2\u6570\u4e3a1\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0cIGMP\u6709\u4e09\u4e2a\u7248\u672c\uff1a IGMPv1\u7248\u672c\uff08\u7531RFC 1112\u5b9a\u4e49\uff09\uff0c\u5df2\u7ecf\u57fa\u672c\u4e0d\u518d\u4f7f\u7528\u3002 IGMPv2\u7248\u672c\uff08\u7531RFC 2236\u5b9a\u4e49\uff09 IGMPv3\u7248\u672c\uff08\u7531RFC 3376\u5b9a\u4e49\uff09 IGMPv1\uff08RFC1112\uff09 \u00b6 \u62a5\u6587\u683c\u5f0f \u00b6 IGMPv2\u7684\u62a5\u6587\u683c\u5f0f\u5982\u4e0a\uff0c\u4e00\u5171\u6709\u4e24\u79cd\u62a5\u6587\uff1a \u5f53TYPE\u5b57\u6bb5\u4e3a1\u65f6\uff0c\u62a5\u6587\u4e3a\u6210\u5458\u5173\u7cfb\u67e5\u8be2\uff08Host membership query\uff09 \u5f53TYPE\u5b57\u6bb5\u4e3a2\u65f6\uff0c\u62a5\u6587\u4e3a\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff08host membership report\uff09 Version\u5b57\u6bb5\u7684\u503c\u6052\u5b9a\u4e3a1\uff0c\u56e0\u4e3a\u8fd9\u662fIGMPv1\u7684\u62a5\u6587\u3002 \u5bf9\u4e8eGroup address\u5b57\u6bb5\uff0c\u5f53\u62a5\u6587\u4e3a\u6210\u5458\u5173\u7cfb\u62a5\u544a\u65f6\u4e00\u822c\u8be5\u5b57\u6bb5\u586b\u5145\u4e3a\u7279\u5b9a\u7ec4\u64ad\u7ec4\u7684IP\u5730\u5740\uff0c\u5f53\u62a5\u6587\u4e3a\u6210\u5458\u5173\u7cfb\u67e5\u8be2\u65f6\uff0c\u672c\u5b57\u6bb5\u4e3a\u51680\u3002 \u62a5\u6587\u53d1\u9001\u65f6\u5404\u9879\u5b57\u6bb5\u7684\u5185\u5bb9 \u00b6 \u6210\u5458\u5173\u7cfb\u67e5\u8be2 \u6210\u5458\u5173\u7cfb\u62a5\u544a \u6e90IP\u5730\u5740 \u8def\u7531\u5668\u63a5\u53e3IP \u4e3b\u673a\u63a5\u53e3IP \u76eeIP\u5730\u5740 224.0.0.1 \u7ec4\u64ad\u7ec4IP TTL 1 1 \u62a5\u6587\u4e2d\u7684Group Address 0.0.0.0 \u7ec4\u64ad\u7ec4IP IGMPv1\u67e5\u8be2\u53ca\u54cd\u5e94\u8fc7\u7a0b \u00b6 R1\u4f5c\u4e3a\u8fd9\u4e2a\u5b50\u7f51\u4e2d\u7684IGMPv1\u67e5\u8be2\u5668\uff0c\u4f1a\u5468\u671f\u6027\u5730\uff08\u9ed8\u8ba460s\u4e00\u6b21\uff09\u4e0b\u53d1IGMPv1\u6210\u5458\u5173\u7cfb\u67e5\u8be2\u62a5\u6587\u6765\u8be2 \u95ee\u8fd9\u4e2a\u5b50\u7f51\u4e2d\u662f\u5426\u5b58\u5728\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u3002\u6ce8\u610f\uff0cIGMPv1\u7684\u6210\u5458\u5173\u7cfb\u67e5\u8be2\u4e0d\u80fd\u9488\u5bf9\u7279\u5b9a\u7684\u7ec4\u64ad\u7ec4\uff0c\u53ea\u80fd\u8fdb\u884c\u666e\u904d\u7ec4\uff08\u4e5f\u5c31\u662f\u6240\u6709\u7ec4\uff09\u67e5\u8be2\uff0c\u8be5\u67e5\u8be2\u5305\u7684\u76ee\u7684\u5730\u5740\u662f224.0.0.1\uff08\u6240\u6709\u4e3b\u673a\uff09\uff0c\u4e14\u62a5\u6587\u4e2dgroup address \u5b57\u6bb5\u4e3a0.0.0.0\u3002 \u4e3b\u673a\u4eec\u6536\u5230\u4e86\u67e5\u8be2\u5305\uff0c\u7eb7\u7eb7\u53d1\u9001IGMPv1\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0c\u5982PC1\u5411224.1.1.1\u53d1\u9001\uff0cPC2\u5411224.2.2.2\u53d1\u9001\u6210\u5458\u5173\u7cfb\u62a5\u544a\u3002PC3\u6bd4\u8f83\u7279\u6b8a\uff0c\u5b83\u53ef\u80fd\u52a8\u4f5c\u6162\u4e00\u70b9\uff0c\u8fd8\u6ca1\u53d1\u5462\u5c31\u6536\u5230\u4e86PC1\u7684\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff08\u8fd9\u91cc\u5176\u5b9e\u6709\u4e2areport delay\u7684\u968f\u673a\u8ba1\u65f6\u5668\uff0c\u5f53\u7ec8\u7aef\u6536\u5230\u4e00\u4e2a\u67e5\u8be2\u540e\uff0c\u4f1a\u4ea7\u751f\u4e00\u4e2a\u968f\u673a\u65f6\u95f4\uff0c\u8fd9\u4e2a\u65f6\u95f4\u5012\u8ba1\u65f6\u4e3a0\u540e\u624d\u53d1\u9001\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0c\u800c\u5f53\u7ec8\u7aef\u6536\u5230\u540c\u4e00\u4e2a\u7ec4\u64ad\u7ec4\u7684\u5176\u4ed6\u6210\u5458\u53d1\u51fa\u7684\u6210\u5458\u5173\u7cfb\u62a5\u544a\u540e\uff0c\u81ea\u5df1\u5c31\u4e0d\u518d\u53d1\u4e86\uff0c\u56e0\u4e3a\u53ea\u9700\u8981\u8ba9\u67e5\u8be2\u5668\u77e5\u9053\u8fd9\u4e2a\u5b50\u7f51\u4e2d\u6709\u8be5\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u5373\u53ef\uff0c\u81f3\u4e8e\u5b58\u5728\u591a\u5c11\u4e2a\uff0c\u5176\u5b9e\u6ca1\u5fc5\u8981\u77e5\u9053\u3002\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u540c\u7ec4\u5185\u7684\u6210\u5458\u91cd\u590d\u53d1\u9001\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0c\u8d77\u5230\u4f18\u5316\u7f51\u7edc\u6d41\u91cf\u7684\u76ee\u7684\uff09\uff0c\u53d1\u73b0\u662f\u81ea\u5df1\u540c\u4e00\u7ec4\u64ad\u7ec4\u7684\u63a5\u6536\u8005\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u91cd\u590d\u53d1\u9001\uff0c\u5c31\u6291\u5236\u4e86\u81ea\u5df1\u62a5\u544a\u3002 IGMPv1\u67e5\u8be2\u5668 \u00b6 \u5982\u679c\u5728\u540c\u4e00\u7f51\u6bb5\u4e2d\uff0c\u5b58\u5728\u591a\u4e2aIGMP\u8def\u7531\u5668\uff0c\u5c31\u50cf\u4e0a\u56fe\uff0c\u8fd9\u79cd\u60c5\u51b5\u5982\u679cA\u548cB\u90fd\u53d1IGMP\u67e5\u8be2\uff0c\u5c31\u663e\u5f97\u6709\u70b9\u591a\u4f59\u4e86\uff0c\u56e0\u6b64\u5728\u5b83\u4eec\u4e4b\u95f4\u9009\u51fa\u4e00\u4e2a\u67e5\u8be2\u5668\uff08Querier\uff09\uff0c\u7531\u8fd9\u4e2a\u67e5\u8be2\u5668\u6765\u53d1\u67e5\u8be2\u3002\u4f46\u662fRFC1112\u6ca1\u6709\u6307\u5b9a\u5982\u4f55\u9009\u62e9IGMPv1\u67e5\u8be2\u5668\uff0c\u6ca1\u529e\u6cd5\uff0cIGMPv1\u53ea\u80fd\u501f\u52a9\u7ec4\u64ad\u534f\u8bae\u5982PIM\u3001DVMRP\u7b49\u3002 IGMPv1\u52a0\u5165\u673a\u5236 \u00b6 \u5f53\u5b50\u7f51\u4e2d\uff0c\u6709\u4e3b\u673a\u60f3\u52a0\u5165\u67d0\u4e2a\u7ec4\u64ad\u7ec4\u65f6\uff0c\u5b83\u53ef\u4ee5\u65e0\u9700\u7b49\u5f85\u67e5\u8be2\u5668\u7684\u4e0b\u4e00\u4e2a\u6210\u5458\u5173\u7cfb\u67e5\u8be2\u5305\u7684\u5230\u6765\uff0c\u800c\u662f\u76f4\u63a5\u5411\u81ea\u5df1\u611f\u5174\u8da3\u7684\u7ec4\u64ad\u7ec4\u7684IP\u5730\u5740\u53d1\u9001IGMPv1\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0c\u6765\u5ba3\u544a\u81ea\u5df1\u52a0\u5165\u7ec4\u64ad\u7ec4\u3002 IGMPv1\u79bb\u5f00\u673a\u5236 \u00b6 IGMPv1\u6ca1\u6709\u5b9a\u4e49\u4e3b\u673a\u9000\u51fa\u7ec4\u64ad\u7ec4\u7684\u673a\u5236\uff0c\u56e0\u6b64\u4e3b\u673a\u4f1a\u201c\u9ed8\u9ed8\u201d\u79bb\u5f00\u3002\u5728\u5b50\u7f51\u4e2d\u6700\u540e\u4e00\u4e2a\u7ec4\u64ad\u7ec4\u6210\u5458\u79bb\u5f00\u540e\uff0cIGMPv1\u4f1a\u5728\u4e00\u5b9a\u7684\u8d85\u65f6\u65f6\u95f4\u540e\u5c31\u77e5\u9053\u8be5\u7ec4\u5185\u6ca1\u6709\u6210\u5458\u4e86\uff0c\u4e8e\u662f\u4fbf\u4e0d\u4f1a\u518d\u5411\u8be5\u5b50\u7f51\u8f6c\u53d1\u7ec4\u64ad\u6d41\u91cf\u3002\u4ece\u8fd9\u91cc\u53ef\u4ee5\u770b\u51fa\uff0cIGMPv1\u7684\u79bb\u5f00\u673a\u5236\u5b9e\u9645\u4e0a\u662f\u4e0d\u5408\u7406\u7684\uff0c\u56e0\u4e3a\u6709\u53ef\u80fd\u5b50\u7f51\u4e2d\u5df2\u7ecf\u6ca1\u6709\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u4e86\uff0c \u7ec4\u64ad\u8def\u7531\u5668\u4f9d\u7136\u5411\u8be5\u5b50\u7f51\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u76f4\u5230\u4e00\u6bb5\u65f6\u95f4\u540e\u8ba1\u65f6\u5668\u8d85\u65f6\u53d1\u73b0\u786e\u5b9e\u6ca1\u6709\u7ec4\u64ad\u7528\u6237\u4e86\uff0c\u624d\u4f1a\u505c\u6b62\u8f6c\u53d1\u7ec4\u64ad\u6570\u636e\u3002 IGMPv2\uff08RFC2236\uff09 \u00b6 \u62a5\u6587\u683c\u5f0f \u00b6 \u5b57\u6bb5 \u63cf\u8ff0 Type \u4e0d\u540cType\u5b57\u6bb5\u5bf9\u5e94\u4e0d\u540c\u7684IGMPv2\u62a5\u6587\u7c7b\u578b\uff0c\u8bf7\u770b\u62a5\u6587\u7c7b\u578b\u5c0f\u8282 Max Response Time \u6700\u5927\u54cd\u5e94\u65f6\u95f4\uff08\u53ea\u5728\u67e5\u8be2\u62a5\u6587\u4e2d\u8bbe\u7f6e\uff0c\u5176\u4ed6\u62a5\u6587\u4e2d\u4e3a0x00\uff09\u662f\u4e3b\u673a \u7528\u6210\u5458\u5173\u7cfb\u62a5\u544a\u6765\u54cd\u5e94\u67e5\u8be2\u62a5\u6587\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff0c\u9ed8\u8ba410s Group address \u5f53\u62a5\u6587\u4e3a\u5e38\u89c4\u67e5\u8be2\u5305\u65f6\uff0c\u8be5\u5b57\u6bb5\u4e3a\u51680\uff1b\u5f53\u62a5\u6587\u4e3a\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u65f6 \u8be5\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u6240\u67e5\u8be2\u7684\u7ec4\u64ad\u7ec4\u7684\u5730\u5740\u3002 \u5f53\u62a5\u6587\u4e3a\u6210\u5458\u5173\u7cfb\u62a5\u544a\u6216\u79bb\u7ec4\u62a5\u6587\u65f6\uff0c\u8be5\u5b57\u6bb5\u7684\u503c\u8bbe\u7f6e\u4e3a\u76ee\u6807\u7ec4\u64ad\u7ec4\u5730\u5740\u3002 \u62a5\u6587\u7c7b\u578b \u00b6 \u6210\u5458\u5173\u7cfb\u67e5\u8be2Membership Query\uff08TYPE\u5b57\u6bb5\uff1a0x11\uff09 \u00b6 IGMPv2\u7684\u6210\u5458\u5173\u7cfb\u67e5\u8be2\u5305\u62ec\u4e24\u79cd\u62a5\u6587\uff1a \u5e38\u89c4\u67e5\u8be2General Query \u00b6 \u5e38\u89c4\u67e5\u8be2\u62a5\u6587\u53c8\u53eb\u505a\u666e\u904d\u7ec4\u67e5\u8be2\uff0c\u7528\u4e8eIGMP\u67e5\u8be2\u5668\u7684\u5e38\u89c4\u6027\u7684\u3001\u9488\u5bf9\u6240\u6709\u7ec4\u64ad\u7ec4\u7684\u67e5\u8be2\u3002\u8be5\u62a5\u6587\u7684\u76ee\u7684IP\u662f224.0.0.1\uff0c\u62a5\u6587\u4e2d\u7684\u7ec4\u5730\u5740\u5b57\u6bb5\u8bbe\u7f6e\u4e3a0.0.0.0\u3002 \u5e38\u89c4\u67e5\u8be2\u62a5\u6587\u9ed8\u8ba460s\u53d1\u9001\u4e00\u6b21\u3002 \u8fd9\u4e2a\u67e5\u8be2\u4e2d\u540c\u65f6\u5305\u542bMax Response Time\uff0c\u8fd9\u4e2a\u503c\u544a\u8bc9\u4e3b\u673a\u7528\u6210\u5458\u5173\u7cfb\u62a5\u544a\u62a5\u6587\u56de\u5e94\u8fd9\u4e2a\u67e5\u8be2\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff0c\u8be5\u65f6\u95f4\u9ed8\u8ba410s\u3002 \u7279\u5b9a\u7ec4\u67e5\u8be2Group-Specific Query \u00b6 \u8def\u7531\u5668\u7684\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u662f\u5f53\u5b50\u7f51\u4e2d\u7684\u4e3b\u673a\u53d1\u51fa\u79bb\u7ec4\u62a5\u6587\u800c\u89e6\u53d1\u7684\uff0c\u5f53\u8def\u7531\u5668\u6536\u5230\u79bb\u7ec4\u62a5\u6587\u65f6\uff0c\u8def\u7531\u5668\u77e5\u9053\u6709\u7279\u5b9a\u7684\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u8981\u79bb\u5f00\u8be5\u7ec4\uff0c\u5b83\u5fc5\u987b\u5224\u65ad\u662f\u5426\u4ecd\u6709\u8be5\u7ec4\u64ad\u7ec4\u7684\u5176\u4ed6\u7ec4\u5458\u5b58\u5728\uff0c\u56e0\u6b64\u4f7f\u7528\u8be5\u62a5\u6587\u3002\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u4e3a\u53d1\u51fa\u79bb\u7ec4\u62a5\u6587\u7684\u4e3b\u673a\u6240\u5728\u7ec4\u7684\u7ec4\u5730\u5740\u3002 \u4e3a\u4e86\u907f\u514d\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u88ab\u610f\u5916\u4e22\u5f03\u6216\u88ab\u7834\u574f\u5bfc\u81f4\u8def\u7531\u5668\u8bef\u4ee5\u4e3a\u7ec4\u5185\u6ca1\u6709\u6210\u5458\u4e86\uff0c\u67e5\u8be2\u8def\u7531\u5668\u4ee51s\u7684\u65f6\u95f4\u95f4\u9694\u8fde\u7eed\u53d1\u9001\u4e24\u4e2a\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\uff0c\u5982\u679c\u4f9d\u7136\u6ca1\u6709\u6210\u5458\u54cd\u5e94\uff0c\u8def\u7531\u5668\u5220\u9664\u8be5\u7ec4\u3002 \u6210\u5458\u5173\u7cfb\u62a5\u544aMembership Report\uff08Type\u5b57\u6bb5\uff1a0x16\uff09 \u00b6 \u4e3b\u673a\u4f7f\u7528\u8be5\u62a5\u6587\u5ba3\u544a\u81ea\u5df1\u52a0\u5165\u67d0\u4e2a\u7ec4\u64ad\u7ec4\u3002\u8fd9\u4e2a\u62a5\u6587\u5728\u4e00\u53f0\u4e3b\u673a\u7b2c\u4e00\u6b21\u52a0\u5165\u7ec4\u64ad\u7ec4\u65f6\u53d1\u9001\u3002\u53e6\u5916\uff0c \u4e5f\u7528\u6765\u54cd\u5e94IGMP\u8def\u7531\u5668\u53d1\u51fa\u7684\u67e5\u8be2\u62a5\u6587\u3002\u8be5\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u662f\u8be5\u4e3b\u673a\u671f\u671b\u52a0\u5165\u7684\u7ec4\u64ad\u7ec4\u5730\u5740\u3002 Version1 Membership Report\uff08Type\u5b57\u6bb5\uff1a0x12\uff09 \u00b6 \u4f5c\u7528\u540c\u4e0a\uff0c\u4e0d\u8fc7\u8be5\u62a5\u6587\u662f\u4e3a\u517c\u5bb9IGMPv1\u800c\u8bbe\u5b9a\u7684\u62a5\u6587\u3002 \u79bb\u7ec4\u62a5\u544aLeave Group\uff08Type\u5b57\u6bb5\uff1a0x17\uff09 \u00b6 \u5f53\u4e3b\u673a\u8981\u79bb\u5f00\u7ec4\u64ad\u7ec4\u65f6\u53d1\u9001\uff0c\u8be5\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u4e3a224.0.0.2\u3002 \u8fd9\u4e2a\u62a5\u6587\u5305\u542b\u4e3b\u673a\u671f\u671b\u9000\u51fa\u7684\u7ec4\u64ad\u7ec4\u7684\u5730\u5740\u3002\u5f53IGMP\u8def\u7531\u5668\u6536\u5230\u4e00\u4e2a\u79bb\u5f00\u62a5\u6587\u7684\u65f6\u5019\uff0c\u4f1a\u5411\u8fd9\u4e2a\u7279\u5b9a\u7ec4\u53d1\u9001\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\uff0c\u8fd9\u6837\uff0c\u5982\u679c\u8fd9\u4e2a\u7ec4\u5185\u8fd8\u6709\u5176\u4ed6PC\uff0c\u5219\u6709\u4eba\u4f1a\u56de\u5e94\uff0c\u5982\u679c\u6ca1\u6709\u4eba\u56de\u5e94\uff0c \u5219\u8def\u7531\u5668\u5c06\u4e0d\u5411\u8be5\u7ec4\u53d1\u9001\u7ec4\u64ad\u62a5\u6587\u3002 \u67e5\u8be2\u53ca\u54cd\u5e94\u673a\u5236 \u00b6 IGMP\u8def\u7531\u5668\u4f1a\u5468\u671f\u6027\u5730\u5411\u76f4\u8fde\u7f51\u6bb5\u4e2d\u53d1\u9001IGMPv2\u5e38\u89c4\u67e5\u8be2\u62a5\u6587\u3002 PC1\u53caPC3\u4f1a\u6536\u5230\u8fd9\u4e2a\u67e5\u8be2\u5305\uff0c\u968f\u540e\u4f1a\u5404\u81ea\u542f\u52a8\u4e00\u4e2a\u201c\u62a5\u544a\u5ef6\u8fdf\u8ba1\u65f6\u5668\u201d\uff0c\u8fd9\u4e2a\u8ba1\u65f6\u5668\u662f\u7531\u4e3b\u673a\u81ea\u5df1\u968f\u673a\u4ea7\u751f\u7684\uff0c\u65f6\u95f4\u8303\u56f4\u662f0-10s\uff0810s\u53d6\u81eaA\u53d1\u9001\u7684\u67e5\u8be2\u62a5\u6587\u4e2d\u7684Max Response Time\uff09\u4e4b\u95f4\u7684\u4e00\u4e2a\u503c\uff0c\u8be5\u8ba1\u65f6\u5668\u542f\u52a8\u540e\u5f00\u59cb\u5012\u8ba1\u65f6\uff0c\u8ba1\u6570\u52300\u540e\u4e3b\u673a\u5c31\u4f1a\u53d1\u9001IGMPv2\u6210\u5458\u5173\u7cfb\u62a5\u544a\u3002 \u5047\u8bbe\u5728\u4e0a\u56fe\u4e2d\uff0cPC1\u7684\u62a5\u544a\u5ef6\u8fdf\u8ba1\u65f6\u5668\u5148\u8ba1\u65f6\u52300\uff0c\u90a3\u4e48\u5b83\u4f1a\u54cd\u5e94\u4e00\u4e2a\u6210\u5458\u5173\u7cfb\u62a5\u544a\u4ee5\u4fbf\u901a\u77e5A\u8def\u7531\u5668\u7ec4\u64ad\u7ec4224.1.1.1\u5185\u6709\u81ea\u5df1\u8fd9\u4e48\u4e00\u4e2a\u6210\u5458\u5728\u3002\u800c\u6b64\u65f6PC3\u7684\u62a5\u544a\u5ef6\u8fdf\u8ba1\u65f6\u5668\u8fd8\u672a\u8d85\u65f6\uff0c\u56e0\u6b64\u5f53\u5b83\u6536\u5230\u540c\u4e00\u4e2a\u7ec4\u64ad\u7ec4\u7684PC1\u53d1\u9001\u7684\u6210\u5458\u5173\u7cfb\u62a5\u544a\u540e\uff0c\u5c06\u6291\u5236\u81ea\u5df1\u7684\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff08\u56e0\u4e3a\u6ca1\u6709\u5fc5\u8981\u91cd\u590d\u53d1\u9001\uff09\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u7f51\u7edc\u4e2d\u51fa\u73b0\u5927\u91cf\u7684\u6210\u5458\u5173\u7cfb\u62a5\u544a\u3002 \u79bb\u5f00\u673a\u5236 \u00b6 PC1\u8981\u79bb\u5f00\u7ec4224.1.1.1\uff0c\u5b83\u4e3b\u52a8\u5411\u7f51\u7edc\u4e2d\u53d1\u9001IGMPv2\u79bb\u7ec4\u62a5\u6587\u7528\u4e8e\u5ba3\u544a\u81ea\u5df1\u79bb\u5f00\u7ec4\u64ad\u7ec4224.1.1.1\uff0c\u8be5\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u662f224.0.0.2\u3002 R1\u6536\u5230\u8be5\u62a5\u6587\u540e\uff0c\u4ee51s\u4e3a\u95f4\u9694\u8fde\u7eed\u53d1\u9001IGMP\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\uff08\u5171\u8ba1\u53d1\u90012\u4e2a\uff09\uff0c\u4ee5\u4fbf\u786e\u8ba4\u8be5\u7f51\u6bb5\u4e2d\u662f\u5426\u8fd8\u6709224.1.1.1\u7ec4\u7684\u5176\u4ed6\u6210\u5458\u3002 PC3\u4ecd\u7136\u662f\u7ec4224.1.1.1\u7684\u6210\u5458\uff0c\u56e0\u6b64\u5b83\u5c06\u7acb\u5373\u54cd\u5e94\u8be5\u7279\u5b9a\u7ec4\u67e5\u8be2\u3002\u5982\u6b64\u4e00\u6765R1\u4fbf\u77e5\u9053\u8be5\u5b50\u7f51\u4e2d\u4ecd\u7136\u5b58\u5728\u8be5\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u3002 \u73b0\u5728\uff0cPC2\u8981\u79bb\u5f00\u7ec4\u64ad\u7ec4224.2.2.2\uff0c\u5b83\u4e3b\u52a8\u5411\u7f51\u7edc\u4e2d\u53d1\u9001IGMPv2\u79bb\u7ec4\u62a5\u6587\u3002 R1\u6536\u5230\u8be5\u62a5\u6587\u540e\uff0c\u4ee51s\u4e3a\u95f4\u9694\u8fde\u7eed\u53d1\u9001IGMP\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\uff08\u5171\u8ba1\u53d1\u90012\u4e2a\uff09\uff0c\u4ee5\u4fbf\u786e\u8ba4\u8be5\u7f51\u6bb5\u4e2d\u662f\u5426\u8fd8\u6709224.2.2.2\u7684\u5176\u4ed6\u6210\u5458\u3002 \u73b0\u5728\u7ec4224.2.2.2\u5df2\u7ecf\u6ca1\u6709\u6210\u5458\u4e86\uff0c\u56e0\u6b64\u6ca1\u6709\u4e3b\u673a\u54cd\u5e94\u8fd9\u4e2a\u67e5\u8be2\u3002R1\u4fbf\u8ba4\u4e3a\u8be5LAN\u4e2d\u5df2\u7ecf\u6ca1\u6709 224.2.2.2\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u4e86\uff0c\u5c06\u4e0d\u4f1a\u518d\u5411\u8fd9\u4e2aLAN\u4e2d\u8f6c\u53d1\u8be5\u7ec4\u7684\u7ec4\u64ad\u6d41\u91cf\u3002 IGMPv2\u67e5\u8be2\u5668 \u00b6 \u5982\u679c\u4e00\u4e2a\u7f51\u6bb5\u4e2d\u6709\u591a\u53f0IGMP\u8def\u7531\u5668\uff0c\u8fd9\u4e9b\u8def\u7531\u5668\u90fd\u53d1\u9001IGMP\u67e5\u8be2\u7684\u8bdd\u90a3\u5c31\u663e\u5f97\u975e\u5e38\u591a\u4f59\u4e14\u4f4e\u6548\u3002 IGMP\u4f1a\u5728\u8fd9\u4e9b\u8def\u7531\u5668\uff08\u7684\u63a5\u53e3\uff09\u4e2d\u9009\u4e3e\u51fa\u4e00\u4e2aIGMP\u67e5\u8be2\u5668\u3002IGMPv2\u5b9a\u4e49\u4e86\u67e5\u8be2\u5668\u7684\u9009\u4e3e\u529e\u6cd5\uff1aIP\u5730\u5740\u6700\u5c0f\u7684\u8def\u7531\u5668\u5145\u5f53\u8be5\u7f51\u6bb5\u7684IGMP\u67e5\u8be2\u5668\uff0c\u7531\u5b83\u6765\u53d1\u9001\u67e5\u8be2\u62a5\u6587\u3002\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u7684GE0/0/0\u63a5\u53e3\u5730\u5740\u6bd4R2\u7684GE0/0/0\u63a5\u53e3\u5730\u5740\u66f4\u5c0f\uff0c\u56e0\u6b64\u5b83\uff08\u7684\u63a5\u53e3\uff09\u6210\u4e3a\u8be5\u7f51\u6bb5\u7684IGMP\u67e5\u8be2\u5668\u3002 \u82e5\u975e\u67e5\u8be2\u5668\uff08\u4f8b\u5982\u672c\u4f8b\u4e2d\u7684R2\u7684GE0/0/0\u63a5\u53e3\uff09\u5728\u201cOther Querier Present Timer\u201d\u8ba1\u65f6\u5668\uff08\u9ed8\u8ba4125s\uff09 \u8d85\u65f6\u540e\u4f9d\u7136\u6ca1\u6709\u6536\u5230\u67e5\u8be2\u5668\u53d1\u9001\u7684IGMP\u67e5\u8be2\u62a5\u6587\uff0c\u90a3\u4e48\u5b83\u4f1a\u8ba4\u4e3a\u67e5\u8be2\u5668\u5df2\u7ecf\u6545\u969c\uff0c\u65b0\u4e00\u8f6e\u7684\u67e5\u8be2\u5668\u9009\u4e3e\u5c06\u4f1a\u88ab\u89e6\u53d1\u3002 \u51e0\u4e2a\u8ba1\u65f6\u5668 \u00b6 Robustness Variable \u00b6 Robustness Variable\uff08\u6216\u8005robust-count\uff09\uff0c\u5065\u58ee\u6027\u53d8\u91cf\uff0c\u9ed8\u8ba4\u503c\u4e3a2\u3002\u8fd9\u4e2a\u7cfb\u6570\u6216\u8005\u8bf4\u53d8\u91cf\u4f1a\u5f71\u54cdIGMP \u7684\u67d0\u4e9b\u64cd\u4f5c\uff0c\u4f8b\u5982\u4f5c\u4e3a\u8ba1\u7b97\u67d0\u4e2a\u8ba1\u65f6\u5668\u65f6\u4f7f\u7528\u7684\u4e00\u4e2a\u53c2\u6570\u7b49\u3002\u5065\u58ee\u7cfb\u6570\u8d8a\u5927\uff0cIGMP\u8def\u7531\u5668\u5c31\u8d8a\u5065\u58ee\uff0c \u4f46\u662f\u7ec4\u8d85\u65f6\u7684\u65f6\u95f4\u4e5f\u5c31\u8d8a\u957f\u3002 \u6267\u884c\u547d\u4ee4**robust-count robust-value**\u914d\u7f6eIGMP\u5065\u58ee\u7cfb\u6570\u3002\u5065\u58ee\u7cfb\u6570\u4e3b\u8981\u7528\u4e8e\uff1a \u5f53\u8def\u7531\u5668\u542f\u52a8\u65f6\uff0c\u53d1\u9001\u201c\u5065\u58ee\u7cfb\u6570\u201d\u6b21\u7684\u201c\u666e\u904d\u7ec4\u67e5\u8be2\u62a5\u6587\u201d\uff0c\u53d1\u9001\u95f4\u9694\u4e3a\u201cIGMP\u5e38\u89c4\u67e5\u8be2\u62a5\u6587\u7684\u53d1\u9001\u95f4\u9694Query interval\u201d\u7684\u00bc\u3002 \u5f53\u8def\u7531\u5668\u6536\u5230\u79bb\u5f00\u62a5\u6587\u540e\uff0c \u5bf9\u4e8eIGMPv2\uff0c\u8def\u7531\u5668\u53d1\u9001\u201c\u5065\u58ee\u7cfb\u6570\u201d\u6b21\u7684\u201c\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u201d\uff0c\u53d1\u9001\u95f4\u9694\u4e3a\u201cIGMP\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u7684\u53d1\u9001\u95f4\u9694Lastmember-queryinterval\u201d\u3002 \u5bf9\u4e8eIGMPv3\uff0c\u8def\u7531\u5668\u53d1\u9001\u201c\u5065\u58ee\u7cfb\u6570\u201d\u6b21\u7684\u201c\u7279\u5b9a\u7ec4/\u6e90\u67e5\u8be2\u62a5\u6587\u201d\uff0c\u53d1\u9001\u95f4\u9694\u4e3a\u201cIGMP\u7279\u5b9a\u7ec4/\u6e90\u67e5\u8be2\u62a5\u6587\u7684\u53d1\u9001\u95f4\u9694\u201d\u3002 IGMPv1\u4e0ev2\u7684\u533a\u522b \u00b6 IGMPv2\u5b9a\u4e49\u4e86\u67e5\u8be2\u5668\u7684\u9009\u4e3e\u673a\u5236\uff0cIGMPv1\u6ca1\u6709\uff0c\u540e\u8005\u9700\u4f9d\u8d56\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u3002 IGMPv2\u5728\u67e5\u8be2\u62a5\u6587\u4e2d\u589e\u52a0\u201c\u6700\u5927\u54cd\u5e94\u65f6\u95f4\u201d\u5b57\u6bb5\uff0cIGMPv1\u6ca1\u6709\u5b9a\u4e49\u8be5\u5b57\u6bb5\u3002 IGMPv2\u589e\u52a0\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\uff0cIGMPv1\u6ca1\u6709\u5b9a\u4e49\u8be5\u62a5\u6587\u3002 IGMPv2\u5b9a\u4e49\u4e86\u79bb\u7ec4\u673a\u5236\uff0c\u800cIGMPv1\u4e2d\u7ec4\u64ad\u7ec4\u6210\u5458\u662f\u9ed8\u9ed8\u7684\u79bb\u5f00\u3002 IGMP \u914d\u7f6e\u53ca\u5b9e\u73b0 \u00b6 \u914d\u7f6e\u547d\u4ee4 \u00b6 \u6fc0\u6d3b\u8def\u7531\u5668\u7684\u7ec4\u64ad\u8def\u7531\u529f\u80fd \u00b6 [Huawei] multicast routing-enable \u5728\u63a5\u53e3\u4e0a\u6fc0\u6d3bIGMP\u5e76\u9009\u62e9IGMP\u7684\u7248\u672c \u00b6 \u914d\u7f6eIGMP\u67e5\u8be2 \u00b6 IGMPv2\u914d\u7f6e\u793a\u4f8b \u00b6 \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u53ef\u5728\u8def\u7531\u5668\u4e0a\u67e5\u770bIGMP\u7684\u76f8\u5173\u53c2\u6570\uff1a \u4e5f\u53ef\u4ee5\u8fdb\u4e00\u6b65\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f\uff1a \u73b0\u5728PC1\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\uff0c\u7136\u540e\u6211\u4eec\u5728A\u4e0a\u505a\u67e5\u770b\uff1a \u53ef\u4f7f\u7528**display igmp group verbose**\u518d\u8fdb\u4e00\u6b65\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f\u3002\u63a5\u7740PC1\u79bb\u5f00\u7ec4\u64ad\u7ec4224.1.1.1\uff1a A\u4f1a\u4ee51s\u4e3a\u95f4\u9694\u8fde\u7eed\u53d1\u9001\u4e24\u4e2a\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u3002\u5728\u786e\u5b9a\u8be5\u7ec4\u7f51\u4e2d\u4e0d\u518d\u6709224.1.1.1\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u540e\uff0cA\u5c06\u8be5\u7ec4\u64ad\u7ec4\u5220\u9664\u3002 \u7ec4\u64ad\u8def\u7531\u534f\u8bae\u6982\u8ff0 \u5173\u4e8e\u7ec4\u64ad\u8def\u7531\u534f\u8bae \u5355\u64ad\u6570\u636e\u5305\u7684\u8f6c\u53d1\uff0c\u662f\u4e00\u4e2a\u4e00\u5bf9\u4e00\u7684\u8fc7\u7a0b\uff0c\u8def\u7531\u5668\u5c06IP\u6570\u636e\u5305\u9001\u5230\u5b83\u7684\u76ee\u7684\u5730\uff0c\u5355\u64ad\u8def\u7531\u5668\u5e76\u4e0d\u5173\u5fc3\u6570\u636e\u5305\u7684\u6e90\u5730\u5740\u3002\u800c\u7ec4\u64ad\u6570\u636e\u662f\u7531\u7ec4\u64ad\u6e90\u4ea7\u751f\u3001\u53d1\u5411\u4e00\u7ec4\u63a5\u6536\u8005\u7684\uff0c\u7ec4\u64ad\u8def\u7531\u5668\u5c06\u6570\u636e\u5305\u4ece\u6e90\u5206\u53d1\u4e0b\u53bb\uff0c \u4e00\u76f4\u5230\u7ec4\u64ad\u7684\u63a5\u6536\u8005\u3002\u90a3\u4e48\u7ec4\u64ad\u8def\u7531\u5668\u5982\u4f55\u77e5\u9053\uff0c\u8be5\u5c06\u7ec4\u64ad\u6570\u636e\u5411\u54ea\u91cc\u53bb\u8f6c\u53d1\uff0c\u54ea\u4e9b\u63a5\u53e3\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\uff1f\u7ec4\u64ad\u6d41\u91cf\u8981\u8d70\u4ec0\u4e48\u8def\u5f84\uff1f\u8fd9\u5c31\u8981\u7528\u5230\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u4e86\u3002 \u53e6\u5916\u4e00\u70b9\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u7ec4\u64ad\u6d41\u91cf\u4e0e\u5355\u64ad\u6d41\u91cf\u4e0d\u540c\uff0c\u7ec4\u64ad\u6d41\u91cf\u53d1\u5f80\u4e00\u7ec4\u63a5\u6536\u8005\uff0c\u5982\u679c\u7f51\u7edc\u4e2d\u6709\u73af\u8def\u5b58\u5728\uff0c\u90a3\u4e48\u60c5\u51b5\u6bd4\u5355\u64ad\u73af\u8def\u4e25\u91cd\u5f97\u591a\uff0c\u56e0\u6b64\u6240\u6709\u7684\u7ec4\u64ad\u8def\u7531\u5668\u5fc5\u987b\u77e5\u9053\u7ec4\u64ad\u7684\u6e90\uff0c\u4e5f\u5fc5\u987b\u628a\u7ec4\u64ad\u6570\u636e\u5305\u4ece\u6e90\uff08\u6765\u7684\u65b9\u5411\uff09\u5411\u76ee\u6807\u8f6c\u53d1\u3002\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u4ece\u4e0a\u6e38\u8f6c\u53d1\u5230\u4e0b\u6e38\uff0c\u6bcf\u4e00\u4e2a\u7ec4\u64ad\u8def\u7531\u5668\u90fd\u7ef4\u62a4\u4e00\u4e2a\u7ec4\u64ad\u524d\u4f20\u8868\uff08\u7ec4\u64ad\u8def\u7531\u8868\uff09\u3002 \u7ec4\u64ad\u8def\u7531\u8868\u9879 \u5728\u4e00\u4e2a\u7ec4\u64ad\u7f51\u7edc\u4e2d\uff0c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u9700\u8981\u8fd0\u884c\u5728\u7f51\u7edc\u8bbe\u5907\uff08\u4f8b\u5982\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u7b49\uff09\u4e0a\uff0c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u5728\u7f51\u7edc\u4e2d\u5de5\u4f5c\u540e\u7684\u6700\u4e3b\u8981\u7684\u6210\u679c\u4e4b\u4e00\u4fbf\u662f\u6784\u5efa\u4e00\u68f5\u65e0\u73af\u7684\u7ec4\u64ad\u5206\u53d1\u6811\uff0c\u8fd9\u68f5\u6811\u63cf\u7ed8\u4e86\u7ec4\u64ad\u6d41\u91cf\u5728\u7ec4\u64ad\u7f51\u7edc\u4e2d\u7684\u8f6c\u53d1\u8def\u5f84\u3002\u800c\u8fd9\u4e2a\u6240\u8c13\u7684\u6811\u5f53\u7136\u662f\u5b9e\u9645\u4e2d\u5e76\u4e0d\u5b58\u5728\u7684\uff0c\u53ea\u662f\u4eba\u4e3a\u62bd\u8c61\u51fa\u6765\u7684\u3002\u8fd9\u4e2a\u6811\u5728\u6bcf\u4e00\u53f0\u7ec4\u64ad\u7f51\u7edc\u8bbe\u5907\u4e0a\u7684\u4f53\u73b0\uff0c\u4fbf\u662f\u7ec4\u64ad\u8def\u7531\u8868\u9879\u3002\u7ec4\u64ad\u8def\u7531\u8868\u9879\u7c7b\u4f3c\u5355\u64ad\u8def\u7531\u4e2d\u7684\u8def\u7531\u8868\u3002 \u672c\u624b\u518c\u53ea\u4ecb\u7ecdPIM\u8fd9\u4e00\u4e2a\u7ec4\u64ad\u8def\u7531\u534f\u8bae\uff0c\u56e0\u6b64\u6b64\u5904\u4ee5PIM\u4e3a\u4f8b\u8fdb\u884c\u8bb2\u89e3\u3002 PIM\u8def\u7531\u8868\u9879\u5373\u901a\u8fc7PIM\u534f\u8bae\u5efa\u7acb\u7684\u7ec4\u64ad\u8def\u7531\u8868\u9879\u3002PIM\u7f51\u7edc\u4e2d\u5b58\u5728\u4e24\u79cd\u8def\u7531\u8868\u9879\uff1a\uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\u6216\uff08*\uff0c G\uff09\u8def\u7531\u8868\u9879\u3002S\u8868\u793a\u7ec4\u64ad\u6e90\uff0cG\u8868\u793a\u7ec4\u64ad\u7ec4\uff0c*\u8868\u793a\u4efb\u610f\u3002 \uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\u77e5\u9053\u7ec4\u64ad\u6e90S\u7684\u4f4d\u7f6e\uff0c\u4e3b\u8981\u7528\u4e8e\u5728PIM\u8def\u7531\u5668\u4e0a\u5efa\u7acbSPT\u3002\u5bf9\u4e8ePIM-DM\u7f51\u7edc\u548cPIM- SM\u7f51\u7edc\u9002\u7528\u3002 \uff08*\uff0cG\uff09\u8def\u7531\u8868\u9879\u7531\u4e8e\u53ea\u77e5\u9053\u7ec4\u64ad\u7ec4G\u7684\u5b58\u5728\uff0c\u4e3b\u8981\u7528\u4e8e\u5728PIM\u8def\u7531\u5668\u4e0a\u5efa\u7acbRPT\u3002\u5bf9\u4e8ePIM-SM\u7f51\u7edc\u548c\u53cc\u5411PIM\u7f51\u7edc\u9002\u7528\u3002 PIM\u8def\u7531\u5668\u4e0a\u53ef\u80fd\u540c\u65f6\u5b58\u5728\u4e24\u79cd\u8def\u7531\u8868\u9879\u3002\u5f53\u6536\u5230\u6e90\u5730\u5740\u4e3aS\uff0c\u7ec4\u5730\u5740\u4e3aG\u7684\u7ec4\u64ad\u62a5\u6587\uff0c\u4e14\u901a\u8fc7RPF\u68c0\u67e5\u7684\u60c5\u51b5\u4e0b\uff0c\u6309\u7167\u5982\u4e0b\u7684\u89c4\u5219\u8f6c\u53d1\uff1a \u5982\u679c\u5b58\u5728\uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\uff0c\u5219\u7531\uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\u6307\u5bfc\u62a5\u6587\u8f6c\u53d1\u3002 \u5982\u679c\u4e0d\u5b58\u5728\uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\uff0c\u53ea\u5b58\u5728\uff08*\uff0cG\uff09\u8def\u7531\u8868\u9879\uff0c\u5219\u5148\u4f9d\u7167\uff08*\uff0cG\uff09\u8def\u7531\u8868\u9879\u521b\u5efa\uff08S\uff0cG\uff09 \u8def\u7531\u8868\u9879\uff0c\u518d\u7531\uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\u6307\u5bfc\u62a5\u6587\u8f6c\u53d1\u3002 \u7ec4\u64ad\u5206\u53d1\u6811 \u7ec4\u64ad\u5206\u53d1\u6811\uff08Multicast Distribution Trees\uff09\uff0c\u662f\u7528\u4e8eIP\u7ec4\u64ad\u6570\u636e\u5305\u5728\u7f51\u7edc\u4e2d\u4f20\u8f93\u7684\u8def\u5f84\u3002\u7ec4\u64ad\u5206\u6811\u7531\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u6784\u5efa\u53ca\u7ef4\u62a4\uff0c\u6709\u4e86\u8fd9\u68f5\u6811\uff0c\u7ec4\u64ad\u6d41\u91cf\u4e5f\u5c31\u660e\u786e\u4e86\u8f6c\u53d1\u8def\u5f84\u3002 \u6709\u4e24\u79cd\u7ec4\u64ad\u5206\u53d1\u6811\uff1a\u6e90\u6811\uff08\u6216\u8005\u79f0\u4e3a\u6700\u77ed\u8def\u5f84\u6811\uff09\u53ca\u5171\u4eab\u6811\uff1a \u6e90\u6811\uff08Source Distribution tree\uff09\uff1a\u6216\u53eb\u6700\u77ed\u8def\u5f84\u6811\uff08Shortest-path trees\uff0cSPT\uff09\uff0c\u6811\u6839\u662f\u7ec4\u64ad\u6e90\uff0c\u6e90\u6811\u7684\u5206\u652f\u5f62\u6210\u4e86\u901a\u8fc7\u7f51\u7edc\u5230\u8fbe\u7ec4\u64ad\u63a5\u6536\u8005\u7684\u5206\u5e03\u6811\u3002\u56e0\u4e3a\u6e90\u6811\u4ee5\u6700\u77ed\u7684\u8def\u5f84\u8d2f\u7a7f\u7f51\u7edc\uff0c\u6240\u4ee5\u53c8\u53eb\u6700\u77ed\u8def\u5f84\u6811SPT\u3002\u6e90\u6811\u4f7f\u7528\uff08S\uff0cG\uff09\u7684\u7ec4\u64ad\u8868\u9879\u6807\u8bb0\uff0c\u6b64\u6807\u8bb0\u6697\u793a\u6bcf\u4e2a\u7ec4\u5355\u72ec\u7684\u6e90\u90fd\u6709\u4e00\u4e2aSPT\u3002 \u6e90\u6811\u7684\u6839\u662f\u7ec4\u64ad\u6e90\uff0c\u53ef\u4ee5\u5f88\u76f4\u89c2\u7684\u770b\u5230\u6e90\u6811\u7684\u5f0a\u7aef\uff1a\u5047\u8bbe\u5728\u4e00\u4e2a\u7ec4\u64ad\u57df\u4e2d\u6709200\u4e2a\u7ec4\u64ad\u7ec4\uff0c\u5e73\u5747\u6bcf\u4e2a\u7ec4 30\u4e2a\u6e90\uff0c\u90a3\u4e48\u6bcf\u4e2a\u8def\u7531\u5fc5\u987b\u4e3a\u4e00\u4e2a\u7ec4\u8bb0\u5f5530\u4e2a\uff08S\uff0cG\uff09\u5bf9\uff08\u4ea4\u4e92\u5f0f\u7684\u7ec4\u64ad\u5e94\u7528\u4e2d\uff0c\u8bb8\u591a\u7ec4\u5458\uff0c\u4e5f\u5373\u63a5\u53d7\u8005\u540c\u65f6\u4e5f\u662f\u4e00\u4e2a\u6e90\uff0c\u4e5f\u5373\u53d1\u8d77\u8005\uff09\uff0c\u90a3\u4e48\u5c31\u662f30*200\u4e2a\u3002\u5982\u6b64\u4e00\u6765\u6bcf\u53f0\u7ec4\u64ad\u8def\u7531\u5668\u9700\u8981\u7ef4\u62a4\u7684\u7ec4\u64ad\u8868\u9879\u5c31\u975e\u5e38\u591a\uff0c\u6240\u6d88\u8017\u7684\u8d44\u6e90\u81ea\u7136\u4e5f\u5c31\u4e0a\u53bb\u4e86\u3002 \u5171\u4eab\u6811\uff08Shared Tree\uff09\uff1a\u4e0e\u6e90\u6811\u4f7f\u7528\u7ec4\u64ad\u6e90\u4f5c\u4e3a\u6839\u4e0d\u540c\uff0c\u5171\u4eab\u6811\u4f7f\u7528RP\u4f5c\u4e3a\u6c47\u805a\u70b9\u3002\u5171\u4eab\u6811\u7684\u901a\u7528\u540d\uff1a RPT\u3002\u5171\u4eab\u6811\u4f7f\u7528\uff08*\uff0cG\uff09\u7684\u7ec4\u64ad\u8def\u7531\u8868\u9879\u6807\u8bb0\u3002\u591a\u4e2a\u7ec4\u64ad\u7ec4\u53ef\u4ee5\u5171\u7528\u4e00\u4e2aRP\uff0c\u671f\u671b\u63a5\u6536\u7ec4\u64ad\u6d41\u91cf\u7684\u8def\u7531\u5668\u901a\u8fc7\u7ec4\u64ad\u534f\u8bae\u5728\u81ea\u5df1\u4e0eRP\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761RPT\u7684\u5206\u652f\uff0c\u7ec4\u64ad\u6d41\u91cf\u9996\u5148\u9700\u8981\u4ece\u6e90\u53d1\u9001\u5230RP\uff0c\u7136\u540e\u518d\u7531RP\u5c06\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\u4e0b\u6765\uff0c\u7ec4\u64ad\u6d41\u91cf\u987a\u7740RPT\u6700\u7ec8\u5230\u8fbe\u5404\u4e2a\u63a5\u6536\u8005\u6240\u5728\u7684\u7ec8\u7aef\u7f51\u7edc\u3002 RPF \u00b6 \u524d\u9762\u5df2\u7ecf\u8bf4\u4e86\uff0c\u5728\u7ec4\u64ad\u7684\u73af\u5883\u4e0b\uff0c\u5982\u679c\u6570\u636e\u51fa\u73b0\u73af\u8def\u5f71\u54cd\u662f\u975e\u5e38\u5927\u7684\u3002\u8def\u7531\u5668\u5982\u4f55\u786e\u4fdd\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\u7684\u65e0\u73af\u5462\uff1f\u7ec4\u64ad\u8def\u7531\u5668\u6536\u5230\u7ec4\u64ad\u6570\u636e\u62a5\u6587\u540e\uff0c\u53ea\u6709\u786e\u8ba4\u8fd9\u4e2a\u6570\u636e\u62a5\u662f\u4ece\u81ea\u5df1\u671d\u5411\u7ec4\u64ad\u6e90\u7684\u63a5\u53e3\u4e0a\u6536\u5230\u7684\uff0c\u8be5\u62a5\u6587\u624d\u4f1a\u88ab\u8f6c\u53d1\uff0c\u5426\u5219\u88ab\u4e22\u5f03\uff0c\u8fd9\u5c31\u662fRPF\uff08Reverse Path Forwarding\uff09\u68c0\u67e5\u3002 \u8bdd\u53c8\u8bf4\u56de\u6765\u4e86\uff0c\u8def\u7531\u5668\u5982\u4f55\u77e5\u9053\uff0c\u8be5\u63a5\u53e3\u662f\u5426\u662f\u201c\u671d\u5411\u201d\u7ec4\u64ad\u6e90\u7684\u63a5\u53e3\u5462\uff1f\u6700\u5e38\u89c1\u7684\u505a\u6cd5\u662f\u8def\u7531\u5668\u901a\u8fc7\u5355\u64ad\u8def\u7531\u8868\u6765\u534f\u52a9\u505aRPF\uff0c\u4e5f\u5c31\u662f\u770b\u5355\u64ad\u8def\u7531\u8868\u4e2d\uff0c\u5230\u8fbe\u6e90\u7684\u5355\u64ad\u8def\u7531\uff0c\u8be5\u8def\u7531\u7684\u51fa\u63a5\u53e3\u5373\u4e3a\u671d\u5411\u6e90\u7684\u63a5\u53e3\u3002 \u5728\u5355\u64ad\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u5230\u7ec4\u64ad\u62a5\u6587\u6e90\u5730\u5740\u7684\u5355\u64ad\u8def\u7531\u3002 \u5982\u679c\u8be5\u8def\u7531\u7684\u51fa\u63a5\u53e3\u5c31\u662f\u7ec4\u64ad\u62a5\u6587\u7684\u5165\u63a5\u53e3\uff0c\u5219\u62a5\u6587\u901a\u8fc7RPF\u68c0\u67e5\uff0c\u7ec4\u64ad\u62a5\u6587\u5c06\u4ece\u4e0b\u6e38\u63a5\u53e3\u8f6c\u53d1\u51fa\u53bb\u3002 \u5426\u5219\uff0c\u62a5\u6587\u88ab\u4e22\u5f03\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5047\u8bbe\u5728R1\u7684\u5355\u64ad\u8def\u7531\u8868\u4e2d\uff0c\u5230\u8fbe\u7ec4\u64ad\u6e9011.6.3.2\u7684\u5355\u64ad\u8def\u7531\u7684\u51fa\u63a5\u53e3\u4e3aGE0/0/0\uff0c\u90a3\u4e48\u5982\u679c\u5728 GE0/0/1\u4e0a\u6536\u5230Source\u53d1\u6765\u7684\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u5219\u8fd9\u4e9b\u6570\u636e\u5305\u65e0\u6cd5\u901a\u8fc7RPF\u68c0\u67e5\uff0c\u6570\u636e\u5305\u4f1a\u88ab\u4e22\u5f03\u3002\u6ce8\u610f\uff0c\u7ec4\u64ad\u6570\u636e\u662f\u7edd\u5bf9\u4e0d\u4f1a\u4eceRPF\u63a5\u53e3\u5f80\u56de\u53d1\u7684\u3002 PIM \u6982\u8ff0 \u6700\u5e38\u89c1\u3001\u4e5f\u662f\u4f7f\u7528\u6700\u4e3a\u5e7f\u6cdb\u7684\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u4e4b\u4e00\u5c31\u662fPIM\uff08(Protocol Independent Multicast\uff0c\u534f\u8bae\u65e0\u5173\u7ec4\u64ad\u534f\u8bae\u65e0\u5173\u7ec4\u64ad\uff09\u3002PIM\u72ec\u7acb\u4e8e\u5355\u64ad\u8def\u7531\u9009\u62e9\u534f\u8bae\uff0c\u5b83\u7684\u5de5\u4f5c\u4f9d\u8d56\u5355\u64ad\u8def\u7531\u9009\u62e9\u534f\u8bae\u63d0\u4f9b\u7684\u4fe1\u606f\uff08\u5355\u64ad\u8def\u7531\u8868\uff09\uff0c\u800c\u53c8\u4e0e\u5177\u4f53\u7684\u5355\u64ad\u8def\u7531\u534f\u8bae\u65e0\u5173\u3002PIM\u4f7f\u7528\u5355\u64ad\u8def\u7531\u8868\u53bb\u5b9e\u73b0RPF\u68c0\u9a8c\u529f\u80fd\u3002 PIM\u7684\u62a5\u6587\u4f7f\u7528IP\u5934\u534f\u8bae\u53f7\uff1a103\uff0c\u4f7f\u7528\u4fdd\u7559\u7684\u7ec4\u64ad\u5730\u5740\uff1a224.0.0.13\u3002 PIM\u6709\u4e24\u79cd\u5de5\u4f5c\u6a21\u5f0f\uff1a PIM-DM\u5bc6\u96c6\u6a21\u5f0f \u00b6 \u4f7f\u7528\u201c\u63a8\u201d\uff08Push\uff09\u6a21\u578b\uff08PIM-DM\u5047\u8bbe\u7f51\u7edc\u4e2d\u6bcf\u4e00\u4e2a\u5206\u652f\u90fd\u6709\u7ec4\u64ad\u7ec4\u6210\u5458\uff0c\u56e0\u6b64\u60f3\u4e0d\u7ba1\u4e09\u4e03\u4e8c\u5341\u4e00\u628a\u7ec4\u64ad\u6d41\u91cf\u6269\u6563\u5230\u6bcf\u4e00\u4e2a\u89d2\u843d\uff09\u3002 \u4e0b\u6e38\u4e0d\u60f3\u63a5\u6536\u7ec4\u64ad\u6570\u636e\u7684\u8bdd\u5219\u5c06\u81ea\u5df1\u6240\u5728\u7684\u5206\u652f\u526a\u679d\uff08Prune\uff09\u6389\u3002 \u5b8c\u6210\u526a\u679d\u540e\uff0c\u7ec4\u64ad\u8def\u5f84\u6811\uff08\u6e90\u6811\uff09\u4e5f\u5c31\u6700\u7ec8\u6210\u578b\u4e86\uff0c\u7ec4\u64ad\u6d41\u91cf\u6e90\u6e90\u4e0d\u65ad\u7684\u987a\u7740\u6784\u5efa\u597d\u7684\u6e90\u6811\u8fdb\u884c\u8f6c\u53d1\u3002 PIM-SM \u7a00\u758f\u6a21\u5f0f \u00b6 \u4f7f\u7528\u201c\u62c9\u201d\uff08Pull\uff09 \u7684\u6a21\u578b\uff0c\u9664\u975e\u663e\u5f0f\u52a0\u5165\u7ec4\u64ad\u6811\uff0c\u5426\u5219\u4e0d\u7ed9\u4f60\u53d1\u7ec4\u64ad\u6d41\u91cf\u3002 \u4f7f\u7528\u6c47\u805a\u70b9RP\uff0c\u652f\u6301\u5171\u4eab\u6811\u548c\u6e90\u6811\u3002 \u53d1\u9001\u65b9\u5411RP\u6ce8\u518c\uff0c\u628a\u7ec4\u64ad\u6570\u636e\u53d1\u7ed9RP\uff0cRP\u5c06\u7ec4\u64ad\u6570\u636e\u62f7\u8d1d\u53d1\u9001\u7ed9\u6ce8\u518c\u7684\u63a5\u6536\u65b9\u3002 \u76f4\u8fde\u7740\u7ec4\u64ad\u63a5\u6536\u8005\u7684\u6700\u540e\u4e00\u8df3\u7684\u8def\u7531\u5668\u77e5\u9053\u53bbRP\u7684\u6700\u77ed\u8def\u5f84\uff0c\u5b83\u671d\u7740RP\u7684\u65b9\u5411\u53d1\u51faJoin\u62a5\u6587\uff0c Join\u62a5\u6587\u9010\u8df3\u5230\u8fbeRP\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4fbf\u521b\u5efa\u4e86\u5171\u4eab\u6811\u7684\u4e00\u4e2a\u5206\u652f\u3002 PIM-DM \u534f\u8bae\u6982\u8ff0 PIM-DM\uff08PIM-DenseMode\uff09\u4f7f\u7528\u4e8e\u7f51\u7edc\u89c4\u6a21\u8f83\u5c0f\u3001\u7ec4\u64ad\u63a5\u6536\u8005\u8f83\u4e3a\u5bc6\u96c6\u7684\u7ec4\u7f51\u4e2d\u3002PIM-DM\u5047\u8bbe\u7f51\u7edc\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5206\u652f\u90fd\u6709\u7ec4\u64ad\u63a5\u6536\u8005\uff0c\u56e0\u6b64\u5728\u7ec4\u64ad\u6e90\u5f00\u59cb\u53d1\u9001\u7ec4\u64ad\u6d41\u91cf\u65f6\uff0cPIM-DM\u5c06\u7ec4\u64ad\u6d41\u91cf\u6269\u6563\u7f51\u7edc\u7684\u6bcf\u4e00\u4e2a\u89d2\u843d\uff0c\u8fd9\u79cd\u65b9\u5f0f\u6211\u4eec\u79f0\u4e4b\u4e3a\u201c\u63a8\u201d\uff08Push\uff09\u3002 \u5982\u679c\u7f51\u7edc\u4e2d\u7684\u4e00\u4e2a\u5206\u652f\u6ca1\u6709\u8be5\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\uff0c\u5219PIM-DM\u5c06\u8fd9\u4e2a\u5206\u652f\u526a\u679dPrune\u6389\uff08\u6211\u8fd9\u91cc\u4e0d\u9700\u8981\uff0c\u628a\u6211\u526a\u6389\u5427\uff0c\u522b\u7ed9\u6211\u53d1\u7ec4\u64ad\u6570\u636e\u4e86\uff09\u3002 \u88ab\u526a\u679d\u7684\u5206\u652f\uff0c\u5176\u526a\u679d\u72b6\u6001\u662f\u6709\u65f6\u95f4\u9650\u5236\u7684\uff0c\u5982\u679c\u67d0\u4e2a\u5206\u652f\u4e00\u76f4\u4e0d\u9700\u8981\u7ec4\u64ad\u7ec4\u7684\u6d41\u91cf\uff0c\u5219\u9700\u8981\u5468\u671f\u6027\u7684\u53d1\u9001\u526a\u679d\u62a5\u6587\uff0c\u9664\u975e\u8be5\u5206\u652f\u4e0b\u6709\u4e86\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u3002 \u5982\u679c\u6b64\u524d\u4e0d\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\u7684\u5206\u652f\uff08\u5df2\u88ab\u526a\u679d\u7684\u5206\u652f\uff09\u73b0\u5728\u6709\u4e86\u7ec4\u64ad\u6210\u5458\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528Graft\u5ac1\u63a5\u673a\u5236\u6765\u6062\u590d\u7ec4\u64ad\u6d41\u91cf\u7684\u8f6c\u53d1\u3002 PIM-DM\u4f7f\u7528\u6e90\u6811\uff0c\u6216\u79f0\u4e3a\u6700\u77ed\u8def\u5f84\u6811SPT\u3002 \u534f\u8bae\u62a5\u6587 PIM\u534f\u8bae\u7684\u62a5\u6587\u5c01\u88c5\u5728IP\u62a5\u6587\u4e2d\uff0cIP\u62a5\u5934\u7684\u534f\u8bae\u53f7\u4e3a103\u3002PIM\u534f\u8bae\u7684\u62a5\u5934\u5982\u4e0b\uff1a \u5176\u4e2dType\u5b57\u6bb5\u5bf9\u5e94\u4e0d\u540c\u7684PIM\u534f\u8bae\u62a5\u6587\uff1a \u7ea2\u8272\u5b57\u4f53\u6807\u8bc6\u7684\u62a5\u6587\u4e3aPIM-DM\u4e2d\u4f7f\u7528\u7684\u534f\u8bae\u62a5\u6587 \u90bb\u5c45\u5173\u7cfb \u4e0a\u9762\u7684\u73af\u5883\u4e2d\uff0cR1\u4e0eR2\u90fd\u5728\u5404\u81ea\u7684\u63a5\u53e3\u4e0a\u6fc0\u6d3b\u4e86PIM\uff0c\u968f\u540e\u63a5\u53e3\u5f00\u59cb\u53d1\u9001PIM Hello\u5305\u53bb\u53d1\u73b0\u94fe\u8def\u4e0a\u7684\u5176\u4ed6 PIM\u8def\u7531\u5668\u3002 [R1] display pim neighbor VPN-Instance: public net Total Number of Neighbors = 1 Neighbor Interface Uptime Expires Dr-Priority BFD-Session 10.1.12.2 GE0/0/0 00:02:47 00:01:27 1 N Hello\u62a5\u6587\u5982\u4e0b\uff1a \u62a5\u6587\u4e2d\u7684PIM Parameters\u90fd\u662fTLV\u7684\u683c\u5f0f\uff0c\u5176\u4e2dHoldtime\u5c31\u662fPIM\u90bb\u5c45\u7684\u4fdd\u6d3b\u65f6\u95f4\uff0c\u9ed8\u8ba4105s\u3002 Hello\u62a5\u6587\u9ed8\u8ba4\u6bcf\u969430s\u53d1\u9001\u4e00\u6b21\uff0c\u5f53PIM\u8def\u7531\u5668\u6536\u5230\u90bb\u5c45\u53d1\u6765\u7684Hello\u62a5\uff0c\u5219\u90bb\u5c45\u7684\u4fdd\u6d3b\u8ba1\u65f6\u5668\u56de\u5230105s\u91cd\u65b0\u5f00\u59cb\u5012\u8ba1\u65f6\u3002 \u6269\u6563\uff08Flood\uff09\u3001\u526a\u679d\uff08Prune\uff09\u53ca\u5ac1\u63a5\uff08Graft\uff09 \u521d\u59cb\u5316\u65f6\u7684\u6269\u6563 \u00b6 \u5728\u4e0a\u9762\u7684\u573a\u666f\u4e2d\uff0cABCDEF\u8def\u7531\u5668\u90fd\u6fc0\u6d3b\u4e86\u7ec4\u64ad\u8def\u7531\u529f\u80fd\uff0c\u540c\u65f6\u8fd0\u884cPIM-DM\u3002\u73b0\u5728\u7ec4\u64ad\u6e90Source 10.10.10.10\u5f00\u59cb\u5411\u7ec4\u64ad\u7ec4224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u7684\u76ee\u7684\u5730\u5740\u90fd\u662f224.1.1.1\u3002\u6570\u636e\u5305\u5230\u8fbe\u7b2c\u4e00\u8df3\u8def\u7531\u5668A\u540e\uff0cA\u5c06\u7ec4\u64ad\u6570\u636e\u4ece\u6240\u6709\u63a5\u53e3\uff08\u9664\u4e86\u6570\u636e\u5305\u8fdb\u5165\u7684\u63a5\u53e3\uff09\u6269\u6563\u51fa\u53bb\uff0cBE\u4e5f\u5c31\u6536\u5230\u4e86\u7ec4\u64ad\u6570\u636e\uff0c\u4ed6\u4eec\u540c\u6837\u5c06\u7ec4\u64ad\u6570\u636e\u6269\u6563\u3002\u5982\u6b64\u4e00\u6765\uff0c\u7ec4\u64ad\u6570\u636e\u5c31\u88ab\u6269\u6563\u5230\u4e86\u6574\u4e2a\u7f51\u7edc\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u7ec4\u64ad\u8def\u7531\u4e5f\u662f\u6709\u8def\u7531\u8868\u9879\u7684\uff0c\u7ec4\u64ad\u8def\u7531\u8868\u9879\u7c7b\u4f3c\u8fd9\u6837\uff08\u4e0b\u56fe\u4e0e\u672c\u8282\u7684\u793a\u4f8b\u65e0\u5173\uff09\uff1a \u4e00\u4e2a\u7ec4\u64ad\u8def\u7531\u8868\u9879\u9996\u5148\u6709\u4e00\u4e2a\u6807\u8bc6\uff0c\u5f62\u5f0f\u53ef\u4ee5\u662f\uff08S,G\uff09\uff0c\u6216\u8005\u662f\uff08*\uff0cG\uff09\uff0c\uff08S,G\uff09\u7528\u4e8e\u6e90\u6811\uff0c\u800c\uff08*\uff0c G\uff09\u7528\u4e8e\u5171\u4eab\u6811\u3002PIM-DM\u4f7f\u7528\u7684\u662f\u6e90\u6811\uff0c\u6240\u4ee5\u5f53\u8def\u7531\u5668\u6536\u5230\u7ec4\u64ad\u6570\u636e\u65f6\u521b\u5efa\u7684\u662f\uff08S,G\uff09\u8868\u9879\uff0cS\u6807\u8bc6\u7ec4\u64ad\u6e90\uff0cG\u6807\u8bc6\u7ec4\u64ad\u7ec4\uff0c\u6240\u4ee5\uff0c\u5728\u672c\u8282\u5f00\u59cb\u65f6\u5c55\u793a\u7684\u4f8b\u5b50\u4e2d\uff0c\u7ec4\u64ad\u8868\u9879\u662f\uff0810.10.10.10\uff0c224.1.1.1\uff09\u3002 \u4e00\u4e2a\u7ec4\u64ad\u8def\u7531\u8868\u9879\u542b\u6709\u4e24\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u5185\u5bb9\uff0c\u4e00\u662fUpstream Interface\u6216\u8005Incoming Interface\uff0c\u8fd9\u662f RPF\u63a5\u53e3\uff0c\u4e5f\u5c31\u662f\u201c\u671d\u5411\u201d\u7ec4\u64ad\u6e90\u7684\u63a5\u53e3\uff08\u6216\u79f0\u4e3a\u4e0a\u884c\u63a5\u53e3\uff09\uff0cPIM\u901a\u8fc7\u5355\u64ad\u8def\u7531\u8868\u6765\u505aRPF\u68c0\u67e5\uff0c\u5728\u5355\u64ad\u8def\u7531\u8868\u4e2d\u67e5\u627e\u5230\u7ec4\u64ad\u6e9010.10.10.10\u7684\u8def\u7531\u5e76\u627e\u5230\u51fa\u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u5c31\u662f\u8fd9\u91cc\u7684\u4e0a\u884c\u63a5\u53e3\u3002\u7ec4\u64ad\u6570\u636e\u53ea\u6709\u4ece\u6b63\u786e\u7684\u4e0a\u884c\u63a5\u53e3\uff08RPF\u63a5\u53e3\uff09\u6536\u5230\u624d\u4f1a\u8fdb\u884c\u5904\u7406\uff0c\u5982\u679c\u7ec4\u64ad\u6570\u636e\u4e0d\u662f\u5728RPF\u63a5\u53e3\u88ab\u6536\u5230\uff0c\u5219\u88ab\u4e22\u5f03\u3002\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\u7684\u65e0\u73af\u3002 \u53e6\u4e00\u4e2a\u91cd\u8981\u7684\u5185\u5bb9\u662fDownstream Interface List\uff08\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff09\u6216\u8005Outgoing Interface List\uff0c\u8fd9\u662f\u4e00\u4e2a\u63a5\u53e3\u5217\u8868\uff0c\u5f53PIM-DM\u7ec4\u64ad\u8def\u7531\u5668\u4ece\u4e0a\u884c\u63a5\u53e3\u6536\u5230\u4e00\u4e2a\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u521d\u59cb\u60c5\u51b5\u4e0b\u4f1a\u4ece\u6240\u6709\u63a5\u53e3\uff08\u5f53\u7136\u9664\u4e86\u4e0a\u884c\u63a5\u53e3\uff09\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u6b64\u65f6\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u91cc\u5934\u7f57\u5217\u7684\u5c31\u662f\u90a3\u4e9b\u63a5\u53e3\u3002 \u5f53\u7f51\u7edc\u4e2d\u7684\u5206\u652f\u5f00\u59cb\u526a\u679d\u7684\u65f6\u5019\uff0c\u88ab\u526a\u679d\u6389\u7684\u63a5\u53e3\u5c06\u4ece\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u53bb\u9664\u3002 \u526a\u679d \u00b6 \u7ee7\u7eed\u4e0a\u9762\u7684\u573a\u666f\uff0c\u73b0\u5728\u7ec4\u64ad\u6d41\u91cf\u5df2\u7ecf\u88ab\u6269\u6563\u5230\u5168\u7f51\u3002F\u6709\u4e00\u4e2a\u76f4\u8fde\u7684\u7f51\u6bb5\u8fde\u63a5\u7740\u7528\u6237\u7ec8\u7aef\uff0c\u5b83\u901a\u8fc7IGMP \u4e86\u89e3\u5230\u8fd9\u4e2a\u5b50\u7f51\u4e2d\u5b58\u5728\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u63a5\u6536\u8005\uff0c\u6b64\u523bF\u662f\u4e00\u53f0\u201c\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u201d\uff0c\u56e0\u4e3a\u5b83\u76f4\u8fde\u7740\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u6210\u5458\uff0c\u56e0\u6b64F\u662f\u9700\u8981\u8fd9\u4e9b\u7ec4\u64ad\u6d41\u91cf\u7684\u3002\u4f46\u662fF\u4ece\u4e24\u4e2a\u63a5\u53e3\u90fd\u6536\u5230\u4e86\u7ec4\u64ad\u6d41\u91cf\uff0c\u6211\u4eec\u5047\u8bbe F\u7684\u5355\u64ad\u8def\u7531\u8868\u4e2d\uff0c\u5230\u8fbe10.10.10.0/24\u7f51\u7edc\u7684\u8def\u7531\u4e0b\u4e00\u8df3\u662fE\uff0c\u6240\u4ee5RPF\u63a5\u53e3\u5c31\u662f\u8fde\u63a5E\u7684\u90a3\u4e2a\u63a5\u53e3\uff0c\u90a3\u4eceB\u6536\u5230\u7684\u7ec4\u64ad\u6d41\u91cf\u5c31\u4e0d\u80fd\u901a\u8fc7RPF\u68c0\u67e5\u4e86\uff0c\u56e0\u6b64F\u5411B\u53d1\u9001\u4e00\u4e2aPIM\u526a\u679d\uff08Prune\uff09\u62a5\u6587\uff0c\u8ba9B\u522b\u518d\u7ed9\u81ea\u5df1\u53d1\u7ec4\u64ad\u6d41\u91cf\u3002 B\u8def\u7531\u5668\u6536\u5230F\u53d1\u9001\u8fc7\u6765\u7684\u526a\u679d\u62a5\u6587\uff0c\u5b83\u5c06\u81ea\u5df1\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u4ece\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u5220\u9664\uff0c \u4ee5\u540e\u5c31\u4e0d\u518d\u5411\u8be5\u63a5\u53e3\u53d1\u9001\u7ec4\u64ad\u6d41\u91cf\u4e86\u3002 D\u8def\u7531\u5668\u662f\u4e00\u53f0\u53f6\u8def\u7531\u5668\uff0c\u6ca1\u6709\u4efb\u4f55\u7ec4\u64ad\u7ec4\u6210\u5458\u76f4\u8fde\uff0c\u56e0\u6b64\u5b83\u4e0d\u9700\u8981\u8fd9\u4e9b\u7ec4\u64ad\u6d41\u91cf\uff0c\u4e8e\u662f\u5411\u4e0a\u6e38\u53d1\u9001PIM Prune\u62a5\u6587\u8bf7\u6c42\u5c06\u81ea\u5df1\u4ece\u7ec4\u64ad\u6811\u4e0a\u526a\u9664\uff0cC\u4f1a\u6536\u5230\u8fd9\u4e2a\u526a\u679d\u62a5\u6587\uff0c\u5b83\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u4ece\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u5220\u9664\uff0c\u968f\u540e\u53d1\u73b0\u6b64\u523b\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\uff0c\u4e8e\u662f\u8ba4\u4e3a\u81ea\u5df1\u4e0d\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\uff0c\u6240\u4ee5\u5411\u4e0a\u6e38\u8def\u7531\u5668\u4e5f\u5c31\u662fB\u8def\u7531\u5668\u53d1\u9001\u4e86\u526a\u679d\u62a5\u6587\uff0c\u800c\u6b64\u523bB\u8def\u7531\u5668\u540c\u6837\u53d1\u73b0\u81ea\u5df1\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u7a7a\u4e86\uff0c \u4e8e\u662f\u5411\u4e0a\u6e38\u8def\u7531\u5668A\u53d1\u9001\u526a\u679d\u62a5\u6587\u3002 \u6700\u540e\uff0c\u7ecf\u8fc7\u4e00\u7cfb\u5217\u526a\u679d\u6d3b\u52a8\u4e4b\u540e\u7684\u6e90\u6811\u5982\u4e0b\uff1a \u81f3\u6b64\u7ec4\u64ad\u6d41\u91cf\u5c06\u6cbf\u7740PIM-DM\u6784\u5efa\u597d\u7684\u6e90\u6811\u8fdb\u884c\u8f6c\u53d1\uff0c\u4e0d\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\u7684\u8282\u70b9\u662f\u4e0d\u4f1a\u6536\u5230\u7ec4\u64ad\u6d41\u91cf\u7684\u3002 \u5ac1\u63a5 \u00b6 \u5728\u4e0a\u6587\u573a\u666f\u7684\u57fa\u7840\u4e0a\uff0cD\u8def\u7531\u5668\u76f4\u8fde\u7684\u7f51\u7edc\u4e2d\u51fa\u73b0\u4e86\u4e00\u4e2a\u65b0\u589e\u7684\u7ec4\u64ad\u7ec4\u7528\u6237\uff0c\u8fd9\u4e2a\u7528\u6237\u901a\u8fc7IGMP\u6210\u5458\u5173\u7cfb\u62a5\u544a\u5ba3\u79f0\u81ea\u5df1\u8981\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\uff0cD\u5c06\u4f1a\u6536\u5230\u8fd9\u4e2aIGMP\u62a5\u6587\u5e76\u4e14\u77e5\u9053\u4e86\u8be5\u5b50\u7f51\u4e2d\u6709\u4e86\u7ec4\u64ad\u7ec4 224.1.1.1\u7684\u6210\u5458\uff0c\u4e8e\u662f\u5b83\u5c06\u8fde\u63a5\u8fd9\u4e2a\u5b50\u7f51\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u7ec4\u64ad\u8868\u9879\uff0810.10.10.10\uff0c224.1.1.1\uff09\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u5e76\u5411\u4e0a\u6e38\u8def\u7531\u5668C\u53d1\u9001\u4e00\u4e2aPIM Graft\u5ac1\u63a5\u62a5\u6587\uff0c\u8bd5\u56fe\u5c06\u7ec4\u64ad\u6d41\u91cf\u62c9\u8fc7\u6765\u3002C\u6536\u5230\u8fd9\u4e2aPIM Graft \u62a5\u6587\uff0c\u5c06\u6536\u5230\u8fd9\u4e2a\u62a5\u6587\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u7ec4\u64ad\u8868\u9879\uff0810.10.10.10\uff0c224.1.1.1\uff09\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u7136\u540e\u4ee5\u4e00\u4e2aGraft-ACK\u62a5\u6587\u56de\u590d\u7ed9D\uff0c\u5e76\u5411\u81ea\u5df1\u7684\u4e0a\u6e38\u8def\u7531\u5668B\u53d1\u9001Graft\u5ac1\u63a5\u62a5\u6587\uff0cB\u505a\u7684\u64cd\u4f5c\u7c7b\u4f3c\uff0c\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\uff0c\u5ac1\u63a5\u62a5\u6587\u4f1a\u9010\u6e10\u4f20\u9012\u5230A\u3002 \u6700\u7ec8\u7ec4\u64ad\u6d41\u91cf\u7684\u4f20\u8f93\u8def\u5f84\u5982\u4e0b\uff1a Assert \u65ad\u8a00\u673a\u5236 \u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0cR1\u3001R3\u90fd\u4ece\u5176RPF\u63a5\u53e3\u6536\u5230Source\u53d1\u5f80224.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u4ed6\u4eec\u90fd\u4f1a\u8fdb\u884c\u7ec4\u64ad\u6570\u636e\u8f6c\u53d1\uff0c\u8fd9\u4e48\u4e00\u6765R4\u5c06\u6536\u5230\u4e24\u4efd\u91cd\u590d\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u4e00\u65b9\u9762\u9020\u6210\u94fe\u8def\u5e26\u5bbd\u8d44\u6e90\u6d6a\u8d39\uff0c\u4e5f\u52a0\u91cd\u4e86\u8bbe\u5907\u8d1f\u62c5\u3002 \u8fd9\u65f6\u5019\u5c31\u8981\u9009\u51fa\u8f6c\u53d1\u8def\u7531\u5668\uff08\u5728R1\u3001R3\u4e0eR4\u6240\u63a5\u5165\u7684\u8fd9\u4e2aLAN\u4e2d\uff0c\u7a76\u7adf\u7531\u8c01\u6765\u8f6c\u53d110.10.10.10\u53d1\u5f80\u7ec4\u64ad\u7ec4 224.1.1.1\u7684\u6d41\u91cf\uff09\uff0c\u8fd9\u662f\u901a\u8fc7Assert\u62a5\u6587\u5b9e\u73b0\u7684\uff0c\u8fd9\u4e2a\u673a\u5236\u4e5f\u88ab\u79f0\u4e3a\u201c\u65ad\u8a00\u673a\u5236\u201d\uff0cAssert\u62a5\u6587\u5185\u5305\u62ec\u6e90\u548c\u7ec4\u7684\u5730\u5740\u3001\u5230\u6e90\u7684\u5355\u64ad\u8def\u7531\u7684\u5ea6\u91cf\u503c\uff0c\u4ee5\u53ca\u53d1\u73b0\u8fd9\u6761\u8def\u7531\u7684\u8def\u7531\u534f\u8bae\u7684\u4f18\u5148\u7ea7\u7b49\u5173\u952e\u4fe1\u606f\u3002 \u5f53R1\u6216\u8005R3\u4ece\u81ea\u5df1\u7684GE0/0/1\u53e3\uff0c\u4e5f\u5c31\u662f\uff0810.10.10.10 , 224.1.1.1\uff09\u7ec4\u64ad\u7ec4\u7684\u4e0b\u884c\u63a5\u53e3\u4e0a\u6536\u5230\uff0810.10.10.10 , 224.1.1.1\uff09\u7ec4\u64ad\u7ec4\u7684\u6570\u636e\uff0c\u5b83\u4eec\u5c31\u610f\u8bc6\u5230\u5728\u8fd9\u4e2a\u63a5\u53e3\u4e0a\u8fd8\u6709\u5176\u4ed6\u7684\u7ec4\u64ad\u8def\u7531\u5668\u5728\u8f6c\u53d1\u76f8\u540c\u7684\u7ec4\u64ad\u6d41\u91cf\uff0c\u8fd9\u5c06\u89e6\u53d1R1\u53caR3\u53d1\u9001PIM Assert \u62a5\u6587\uff0c \u62a5\u6587\u7684\u5927\u81f4\u5185\u5bb9\u5982\u4e0a\u56fe\u6240\u793a\u3002\u4e0a\u56fe\u5047\u8bbeR1\u901a\u8fc7OSPF \u5b66\u4e60\u5230 /24\u8def\u7531\uff0c\u5ea6\u91cf\u503cCost=2\uff1bR3\u901a\u8fc7\u9759\u6001\u8def\u7531\u83b7\u77e510.10.10.0/24\u8def\u7531\uff0cCost=0\u3002\u5728\u6536\u5230\u5bf9\u65b9\u7684Assert \u62a5\u6587\u540e\uff0c\u53cc\u65b9\u5f00\u59cbPK\uff1a \u9996\u5148PK\u53cc\u65b9\u5230\u7ec4\u64ad\u6e90\u7684\u5355\u64ad\u8def\u7531\u7684\u4f18\u5148\u7ea7\uff0c\u4f18\u9009\u503c\u5c0f\u7684\uff1b \u5982\u679c\u4e0a\u9762\u8fd9\u9879\u76f8\u7b49\uff0c\u5219\u518dPK\u5230\u7ec4\u64ad\u6e90\u7684\u5ea6\u91cf\u503c\uff0c\u4f18\u9009\u503c\u5c0f\u7684\uff1b \u5982\u679c\u4e0a\u9762\u8fd9\u9879\u8fd8\u76f8\u7b49\uff0c\u5219\u8fdb\u4e00\u6b65\u6bd4\u8f83\u672c\u5730\u63a5\u53e3IP\u5730\u5740\uff0c\u4f18\u9009IP\u5927\u7684\u3002 \u6240\u4ee5\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u7531\u4e8eR1\u5230\u8fbe10.10.10.0/24\u8def\u7531\u7684\u4f18\u5148\u7ea7\u4e3a10\uff0c\u4f18\u4e8eR3\uff0c\u56e0\u6b64R1\u7684GE0/0/1\u53e3\u5f00\u59cb\u8f6c\u53d1\u7ec4\u64ad\u6570\u636e\uff0c\u800cR3\u5219\u4e0d\u8f6c\u53d1\uff0c\u6b64\u523b\u7531\u4e8eR3\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\uff0c\u56e0\u6b64R3\u901a\u8fc7\u5176\u4e0a\u884c\u63a5\u53e3\u5411R2\u53d1\u9001\u4e00\u4e2aPrune \u526a\u679d\u62a5\u6587\uff0c\u5c06\u81ea\u5df1\u4ece\u7ec4\u64ad\u6811\u4e0a\u526a\u9664\u3002 9.5.6 \u914d\u7f6e\u793a\u4f8b \u5b9e\u9a8c\u62d3\u6251 \u00b6 \u5b9e\u9a8c\u9700\u6c42 \u00b6 \u7f51\u7edc\u62d3\u6251\u3001IP\u5730\u5740\u89c4\u5212\u5982\u4e0a\u56fe\u6240\u793a\uff1b R1\u3001R2\u3001R3\u3001R4\u8fd0\u884cOSPF\u534f\u8bae\uff0c\u6253\u901a\u7f51\u7edc\u7684\u5355\u64ad\u8def\u7531\uff1b R1\u3001R2\u3001R3\u3001R4\u540c\u65f6\u4e5f\u662f\u7ec4\u64ad\u8def\u7531\u5668\uff0c\u8fd0\u884cPIM-DM\uff1b Receiver\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\uff0c\u5728R4\u4e0a\u89c2\u5bdfIGMP\u4fe1\u606f\uff1b Source\u5f00\u59cb\u5411\u7ec4\u64ad\u7ec4224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u89c2\u5bdfAssert\u73b0\u8c61\u3001Prune\u73b0\u8c61\u3002 \u914d\u7f6e\u5b9e\u73b0 \u00b6 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R4\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u9996\u5148\u505a\u4e2a\u67e5\u770b\uff1a Total Number of Neighbors = 2 Neighbor Interface Uptime Expires Dr-Priority BFD-Session 10.1.12.1 GE0/0/0 00:02:08 00:01:37 1 N 10.1.23.3 GE0/0/1 00:01:20 00:01:25 1 N \u4e0a\u9762\u8f93\u51fa\u7684\u662fR2\u7684PIM\u90bb\u5c45\uff0c\u53ef\u4ee5\u770b\u5230R2\u6709\u4e24\u4e2aPIM\u90bb\u5c45\uff0c\u5206\u522b\u662fR1\u53caR3\u3002 \u73b0\u5728\uff0c\u5404\u53f0\u8def\u7531\u5668\u90fd\u5df2\u7ecf\u5c31\u7eea\u4e86\uff0c\u6211\u4eec\u4e3b\u8981\u5206\u6790\u4ee5\u4e0b\u51e0\u4e2a\u5185\u5bb9\uff1a \u7ec4\u6210\u5458\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1 \u00b6 \u73b0\u5728\u8ba9Reciver\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\uff0c\u4e00\u822c\u7ec4\u64ad\u63a5\u6536\u8005\u5c31\u662f\u6211\u4eec\u7684\u7535\u8111\u6216\u8005\u5176\u4ed6\u4fbf\u643a\u8bbe\u5907\uff0c\u4f8b\u5982\u89c6\u9891\u7684\u4e1a\u52a1\uff0c\u5728\u7535\u8111\u4e0a\u5b89\u88c5\u4e00\u4e2a\u89c6\u9891\u5ba2\u6237\u7aef\uff0c\u6253\u5f00\u5ba2\u6237\u7aef\u8fdb\u884c\u7b80\u5355\u7684\u64cd\u4f5c\u5c31\u4f1a\u89e6\u53d1\u7535\u8111\u53d1\u9001IGMP\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0c\u5ba3\u79f0\u81ea\u5df1\u6240\u8981\u52a0\u5165\u7684\u7ec4\u64ad\u7ec4\uff08\u53ef\u4ee5\u534e\u4e3a\u81ea\u7814\u7684\u6a21\u62df\u5668eNSP\u6765\u6a21\u62df\u672c\u5b9e\u9a8c\uff09\u3002 \u73b0\u5728\u5728\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668R4\u4e0a\u67e5\u770b\uff1a R4\u5df2\u7ecf\u53d1\u73b0\u4e86\u7ec4\u64ad\u7ec4224.1.1.1\u5185\u6709\u4e00\u4e2a\u7ec4\u64ad\u6210\u545810.1.1.1\uff0c\u4f46\u662f\u7531\u4e8e\u73b0\u5728R4\u8fd8\u6ca1\u6709\u6536\u5230\u7ec4\u64ad\u6570\u636e\uff0c\u6240 \u4ee5\u81ea\u7136\u6ca1\u6709\u7ec4\u64ad\u6570\u636e\u8f6c\u53d1\u7ed9\u63a5\u6536\u8005\u3002 \u7ec4\u64ad\u6e90\u5f00\u59cb\u53d1\u9001\u7ec4\u64ad\u6570\u636e\u89c2\u5bdf\u6269\u6563\u8fc7\u7a0b\u3001Assert\u673a\u5236 \u00b6 \u73b0\u5728\u7ec4\u64ad\u6e90Source\u5f00\u59cb\u5411\u7ec4\u64ad\u7ec4224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u7ec4\u64ad\u6570\u636e\u5230\u8fbe\u7b2c\u4e00\u8df3\u8def\u7531\u5668R2\uff0c\u5219R2\u521b\u5efa\u7ec4\u64ad\u8def\u7531\u8868\u9879\uff0810.10.10.10\uff0c224.1.1.1\uff09\uff1a \u5728\u8be5\u8868\u9879\u4e2d\uff0c\u4e0a\u884c\u63a5\u53e3\u671d\u5411\u6e90\uff0c\u6240\u4ee5\u5c31\u662fGE0/0/2\u53e3\uff0c\u800c\u7531\u4e8e\u8fd0\u884c\u7684\u662fPIM-DM\u6a21\u5f0f\uff0c\u56e0\u6b64R2\u5c06GE0/0/1 \u53caGE0/0/0\u63a5\u53e3\u90fd\u6dfb\u52a0\u5230\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u7136\u540e\u5c06\u7ec4\u64ad\u6570\u636e\u4eceGE0/0/0\u53e3\u548cGE0/0/1\u53e3\u90fd\u8f6c\u53d1\u4e0b\u53bb\u3002 \u968f\u540eR1\u53caR3\u90fd\u4f1a\u6536\u5230R2\u8f6c\u53d1\u4e0b\u6765\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u4ed6\u4eec\u4e5f\u662f\u521b\u5efa\u4e00\u4e2a\u7ec4\u64ad\u8def\u7531\u8868\u9879\uff0c\u7136\u540e\u5c06\u6240\u6709\u63a5\u53e3\uff08\u9664 \u4e86RPF\u63a5\u53e3\uff09\u90fd\u6dfb\u52a0\u5230\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u5e76\u5f00\u59cb\u5411\u4e0b\u884c\u63a5\u53e3\u53d1\u9001\u6570\u636e\u6570\u636e\u3002 \u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0cR1\u53caR3\u90fd\u4f1a\u5411\u81ea\u5df1\u7684GE0/0/1\u53e3\u8f6c\u53d1\u7ec4\u64ad\u6d41\u91cf\uff0c\u4e00\u65e6\u53cc\u65b9\u5728\u81ea\u5df1\u7684GE0/0/1\u53e3\u4e0a\u6536\u5230 \uff0810.10.10.10,224.1.1.1\uff09\u7ec4\u64ad\u7ec4\u7684\u6570\u636e\u65f6\uff0c\u5b83\u4eec\u5c31\u77e5\u9053\u5728\u8fd9\u4e2aLAN\u4e2d\u6709\u4e24\u53f0\u7ec4\u64ad\u8def\u7531\u5668\u5728\u8f6c\u53d1\u6570\u636e\uff0c \u8fd9\u5c06\u89e6\u53d1Assert\u673a\u5236\uff0cR1\u53caR3\u4f1a\u53d1\u9001Assert\u62a5\u6587\uff0c\u5728R1\u6216R2\u7684GE0/0/1\u53e3\u4e0a\u6293\u5305\u53ef\u4ee5\u770b\u5230\uff1a \u770b\u4e00\u4e0bR1\u53d1\u9001\u7684Assert\u62a5\u6587\uff1a \u53ef\u4ee5\u770b\u5230\u62a5\u6587\u91cc\u5305\u542b\u7ec4\u64ad\u7ec4\u5730\u5740\u3001\u6e90\u5730\u5740\u3001\u4f18\u5148\u7ea7\u548c\u5ea6\u91cf\u503c\u3002R3\u53d1\u51fa\u7684Assert\u62a5\u6587\u7c7b\u4f3c\uff0c\u7531\u4e8e\u6b64\u65f6R1 \u53caR3\u90fd\u662f\u901a\u8fc7OSPF\u5b66\u4e60\u523010.10.10.0/24\u8def\u7531\u7684\uff0c\u5e76\u4e14\u8def\u7531\u7684\u5ea6\u91cf\u503c\u76f8\u7b49\uff0c\u90fd\u662f2\uff0c\u56e0\u6b64\u63a5\u53e3IP\u5730\u5740\u5927\u7684\u8def\u7531\u5668\uff0c\u4e5f\u5c31\u662fR3\u4f1a\u4ece\u65ad\u8a00\u673a\u5236\u4e2d\u80dc\u51fa\uff0c\u5b83\u7ee7\u7eed\u541110.1.134.0/24\u7f51\u7edc\u6765\u8f6c\u53d1\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u6570\u636e\u3002 \u5982\u6b64\u4e00\u6765R1\u5c31\u4e0d\u9700\u8981\u7ec4\u64ad\u6570\u636e\u4e86\uff0c\u56e0\u6b64\u5b83\u4f1a\u5411\u4e0a\u884c\u63a5\u53e3\u53d1\u9001\u4e00\u4e2aPrune\u526a\u679d\u62a5\u6587\uff0c\u5c06\u81ea\u5df1\u4ece\u7ec4\u64ad\u6811\u4e0a\u526a\u9664\uff0cR1\u7684\u7ec4\u64ad\u8def\u7531\u8868\u5c31\u53d8\u6210\uff1a \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cR1\u7684\uff0810.10.10.10,224.1.1.1\uff09\u7ec4\u64ad\u8868\u9879\u6ca1\u6709\u4e0b\u884c\u63a5\u53e3\u3002 R2\u7684\u7ec4\u64ad\u8868\u9879\u5c31\u53d8\u6210\uff1a \uff0810.10.10.10,224.1.1.1\uff09\u8868\u9879\u4e2d\uff0c\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u53ea\u6709\u4e00\u4e2a\u63a5\u53e3\u4e86\uff0c\u4e5f\u5c31\u662fGE0/0/1\u53e3\u3002 R4\u5728\u6536\u5230\u7ec4\u64ad\u6570\u636e\u540e\uff0c\u4e5f\u662f\u521b\u5efa\u4e00\u4e2a\u7ec4\u64ad\u8868\u9879\uff1a \u7136\u540e\u5c06\u7ec4\u64ad\u6570\u636e\u4eceGE0/0/1\u53e3\u8f6c\u53d1\u51fa\u53bb\uff0c\u5982\u6b64\u4e00\u6765\u63a5\u6536\u8005\u4e5f\u5c31\u6536\u5230\u7ec4\u64ad\u6570\u636e\u4e86\u3002 \u56e0\u6b64\uff0c\u6700\u7ec8\u7f51\u7edc\u7a33\u5b9a\u4e0b\u6765\u4e4b\u540e\uff0c\u7ec4\u64ad\u6d41\u91cf\u7684\u4f20\u8f93\u8def\u5f84\u662f\u8fd9\u6837\u7684\uff1a \u7ec4\u64ad\u6210\u5458\u79bb\u7ec4\u3001\u89c2\u5bdfPrune\u526a\u679d\u8fc7\u7a0b \u00b6 \u73b0\u5728\uff0c\u7ec4\u64ad\u6e90\u4ecd\u7136\u5728\u4e0d\u65ad\u7684\u53d1\u9001\u7ec4\u64ad\u6d41\u91cf\uff0c\u6211\u4eec\u8ba9\u63a5\u6536\u8005Receiver\u79bb\u5f00\u7ec4\u64ad\u7ec4224.1.1.1\u3002 \u7531\u4e8eReceiver\u4e00\u65e6\u79bb\u5f00\u7ec4\u64ad\u7ec4\uff0cR4\u7684GE0/0/1\u53e3\u4e0a\u5173\u4e8e224.1.1.1\u7684\u7ec4\u64ad\u7ec4\u5c31\u6ca1\u6709\u6210\u5458\u4e86\uff0c\u56e0\u6b64\u5b83\u5c06\u63a5 \u53e3GE0/0/1\u4ece\u81ea\u5df1\u7684\uff0810.10.10.10,224.1.1.1\uff09\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u53bb\u9664\uff0c\u5982\u6b64\u4e00\u6765\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e5f\u5c31\u7a7a\u4e86\uff0cR4\u77e5\u9053\u81ea\u5df1\u4e0d\u518d\u9700\u8981224.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u4e8e\u662f\u5b83\u4ece\u4e0a\u884c\u63a5\u53e3GE0/0/0\u53d1\u4e00\u4e2aPrune\u526a\u679d\u62a5\u6587\uff0c\u8bf7\u6c42\u5c06\u81ea\u5df1\u4ece\u7ec4\u64ad\u6811\u4e0a\u526a\u9664\u3002 R3\u6536\u5230\u8fd9\u4e2a\u526a\u679d\u62a5\u6587\u540e\uff0c\u5c06\u81ea\u5df1\u7684GE0/0/1\u53e3\u4ece\uff0810.10.10.10,224.1.1.1\uff09\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u53bb\u9664\uff0c\u7136\u540e\u5b83\u53d1\u73b0\u63a5\u53e3\u5217\u8868\u7a7a\u4e86\uff0c\u4e8e\u662f\u4e5f\u53d1\u73b0\u81ea\u5df1\u4e0d\u518d\u9700\u8981\u7ec4\u64ad\u6570\u636e\u4e86\uff0c\u56e0\u6b64\u5411\u4e0a\u884c\u63a5\u53e3\u53d1\u9001Prune\u62a5\u6587\uff0c\u6b64\u523bR3\u7684\u7ec4\u64ad\u8def\u7531\u8868\u5982\u4e0b\uff1a R2\u6536\u5230R3\u53d1\u51fa\u7684Prune\u62a5\u6587\u540e\uff0c\u5176\u7ec4\u64ad\u8868\u5982\u4e0b\uff1a \u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\uff0c\u56e0\u6b64\u76f4\u63a5\u5c06\u6e90\u53d1\u9001\u8fc7\u6765\u7684\u7ec4\u64ad\u6570\u636e\u4e22\u5f03\uff0c\u4e0d\u4ece\u4efb\u4f55\u63a5\u53e3\u8f6c\u53d1\u3002 \u7ec4\u64ad\u6210\u5458\u518d\u6b21\u52a0\u7ec4\uff0c\u89c2\u5bdfGraft\u5ac1\u63a5\u8fc7\u7a0b \u00b6 \u7ecf\u8fc7\u524d\u9762\u7684\u6b65\u9aa4\uff0c\u867d\u7136\u7ec4\u64ad\u6e90\u4ecd\u7136\u5728\u4e0d\u65ad\u7684\u5411224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u4f46\u662f\u7531\u4e8e\u7f51\u7edc\u4e2d\u4e0d\u5b58\u5728\u4efb\u4f55\u7684\u7ec4\u6210\u5458\uff0c\u56e0\u6b64\u7ec4\u64ad\u6d41\u91cf\u88abR2\u76f4\u63a5\u4e22\u5f03\u3002 \u73b0\u5728\u6211\u4eec\u518d\u6b21\u8ba9Receiver\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\u3002PC\u53d1\u9001IGMP\u6210\u5458\u5173\u7cfb\u62a5\u6587\uff0cR4\u5728\u6536\u5230\u8fd9\u4e2a\u62a5\u544a\u4e4b\u540e\u610f \u8bc6 \u5230 \u63a5 \u53e3 GE0/0/1 \u4e0b \u51fa \u73b0 \u4e86 \u7ec4 \u64ad \u7ec4 224.1.1.1 \u7684 \u6210 \u5458 \uff0c \u4e8e \u662f \u5c06 GE0/0/1 \u63a5 \u53e3 \u6dfb \u52a0 \u5230 \uff0810.10.10.10,224.1.1.1\uff09\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u5e76\u5411R3\u53d1\u9001\u4e00\u4e2a\u5ac1\u63a5Graft\u62a5\u6587\uff1a \u8fd9\u4e2a\u62a5\u6587\u662f\u4e00\u4e2a\u5355\u64ad\u5305\uff0cR3\u6536\u5230\u4e4b\u540e\u5c06\u63a5\u53e3GE0/0/1\u6dfb\u52a0\u5230\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff0c\u5e76\u5411R4\u56de\u9001\u4e00\u4e2aGraft-ACK\u62a5\u6587\u4ee5\u4f5c\u786e\u8ba4\u3002\u540c\u65f6R3\u5411\u81ea\u5df1\u7684\u4e0a\u884cPIM\u90bb\u5c45R2\u53d1\u9001\u4e00\u4e2aGraft\u62a5\u6587\u3002R2\u5728\u6536\u5230\u8fd9\u4e2a\u62a5\u6587\u7684\u65f6\u5019\uff0c\u4e5f\u662f\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3GE0/0/2\u6dfb\u52a0\u5230\uff0810.10.10.10,224.1.1.1\uff09\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff0c\u968f\u540e\u5f00\u59cb\u5411\u8be5\u63a5\u53e3\u8f6c\u53d1224.1.1.1\u7684\u7ec4\u64ad\u6d41\u91cf\u3002\u81ea\u6b64\uff0c\u7ec4\u64ad\u6811\u53c8\u91cd\u65b0\u6784\u5efa\u5b8c\u6210\u3002 PIM-SM \u57fa\u7840\u77e5\u8bc6 \u534f\u8bae\u6982\u8ff0 \u00b6 PIM-DM\u9002\u7528\u4e8e\u7f51\u7edc\u89c4\u6a21\u8f83\u5c0f\u3001\u7ec4\u64ad\u63a5\u6536\u8005\u8f83\u4e3a\u5bc6\u96c6\u7684\u573a\u666f\uff0c\u800cPIM-SM\u5219\u9002\u7528\u4e8e\u7f51\u7edc\u89c4\u6a21\u8f83\u5927\u3001\u7ec4\u64ad\u63a5\u6536\u8005\u8f83\u4e3a\u5206\u6563\u7684\u573a\u666f\u3002PIM-SM\u91c7\u7528Pull\uff08\u62c9\uff09\u7684\u65b9\u5f0f\u5de5\u4f5c\uff0c\u521d\u59cb\u60c5\u51b5\u4e0b\u4e0d\u4f1a\u5411\u7f51\u7edc\u5206\u652f\u7684\u4efb\u4f55\u89d2\u843d\u6269\u6563\u7ec4\u64ad\u6d41\u91cf\uff0c\u9664\u975e\u67d0\u4e2a\u5206\u652f\u663e\u5f0f\u7684\u7533\u8bf7\u3002 PIM-SM\u652f\u6301\u6e90\u6811\u53ca\u5171\u4eab\u6811\u3002 \u5f15\u5165\u6c47\u805a\u70b9RP\u7684\u6982\u5ff5\uff0cRP\u4f5c\u4e3a\u5171\u4eab\u6811\u7684\u6811\u6839\u3002 \u5171\u4eab\u6811\u5230\u6e90\u6811\u7684\u5207\u6362\u673a\u5236\u4f7f\u5f97\u7ec4\u64ad\u6d41\u91cf\u7684\u8f6c\u53d1\u66f4\u52a0\u79d1\u5b66\u548c\u9ad8\u6548\u3002 \u6c47\u805a\u70b9RP\uff08Rendezvous Point\uff09 \u00b6 \u6c47\u805a\u70b9RP\uff0c\u662f\u5171\u4eab\u6811RPT\u7684\u6811\u6839\uff0c\u8d1f\u8d23\u5c06\u6765\u81ea\u4e8e\u6e90\uff08Source\uff09\u7684\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\u5230\u63a5\u6536\u8005\u3002\u5728PIM\u7a00\u758f\u6a21\u5f0f\u4e2d\uff0c\u6e90\u53d1\u5411\u7ec4\u64ad\u7ec4\u7684\u6d41\u91cf\u5148\u662f\u9001\u5230RP\uff0c\u518d\u7531RP\u5c06\u7ec4\u64ad\u6d41\u91cf\u6cbf\u7740RPT\u5f80\u4e0b\u6e38\u8f6c\u53d1\u3002\u7f51\u7edc\u4e2d\u7684\u5206\u652f\u5982\u679c\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\uff0c\u5219\u7531\u7ec4\u64ad\u8def\u7531\u5668\u671d\u7740RP\u7684\u65b9\u5411\u53d1\u9001PIM Join\u62a5\u6587\uff0c\u5c06\u81ea\u5df1\u62c9\u5230RPT\u4e0a\u3002 \u4e00\u4e2aRP\uff0c\u53ef\u4ee5\u8d1f\u8d23\u4e00\u4e2a\u6216\u591a\u4e2a\u7ec4\u64ad\u7ec4\u7684\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\uff0c\u4e00\u4e2a\u7ec4\u64ad\u7ec4\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u6709\u4e00\u4e2aRP\uff08\u53ef\u4ee5\u4f7f\u7528\u52a8\u6001\u53d1\u73b0\u673a\u5236\u8fdb\u884c\u4e3b\u5907\u5207\u6362\uff09\u3002 RP\u7684\u53d1\u73b0\u673a\u5236\uff1a \u9759\u6001\u624b\u5de5\u6307\u5b9a\uff08\u9700\u5728\u6240\u6709\u7ec4\u64ad\u8def\u7531\u5668\u4e0a\u914d\u7f6e\uff09\u3002 \u52a8\u6001\u53d1\u73b0\uff1aBSR\u3002 PIM-SM RPF\u68c0\u67e5 \u00b6 PIM-SM\u652f\u6301RPT\uff08\u5171\u4eab\u6811\uff09\u53caSPT\uff08\u6e90\u6811\uff09\uff0cRPF \u7684\u68c0\u67e5\uff1a \u5bf9\u4e8e\u6e90\u6811\uff0c\u4f7f\u7528\u7ec4\u64ad\u6e90\u7684\u5730\u5740\u8fdb\u884cRPF\u68c0\u67e5\u3002 \u5bf9\u4e8e\u5171\u4eab\u6811\uff0c\u4f7f\u7528RP\u7684\u5730\u5740\u8fdb\u884cRPF\u68c0\u67e5\u3002 \u5de5\u4f5c\u673a\u5236 1\uff1a\u5171\u4eab\u6811\u52a0\u5165 PIM-SM\u4e0ePIM-DM\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0d\u540c\uff0cPIM-SM\u9700\u8981\u663e\u5f0f\u7684PIM Join\u62a5\u6587\u6784\u5efa\u5171\u4eab\u6811\u7684\u5206\u652f\u3002 \u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u62d3\u6251\u4e2d\uff0c\u6240\u6709\u7684\u7ec4\u64ad\u8def\u7531\u5668\u5747\u8fd0\u884cPIM-SM\u3002\u521d\u59cb\u5316\u60c5\u51b5\u4e0b\uff0c\u7ec4\u64ad\u6d41\u91cf\u4e0d\u4f1a\u88ab\u8f6c\u53d1\u7ed9\u7f51\u7edc\u7684\u4efb\u4f55\u5206\u652f\u3002\u73b0\u5728E\u76f4\u8fde\u7684\u7f51\u7edc\u4e2d\u51fa\u73b0\u4e86\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u63a5\u6536\u8005\uff0c\u4e3b\u673a\u901a\u8fc7\u53d1\u9001IGMP\u6210\u5458\u5173\u7cfb\u62a5\u544a\u5ba3\u79f0\u81ea\u5df1\u8981\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\u3002 \u6700\u540e\u4e00\u8df3\u8def\u7531\u5668E\u6536\u5230\u8fd9\u4e2aIGMP\u62a5\u6587\uff0c\u5b83\u5728\u81ea\u5df1\u7684\u7ec4\u64ad\u8def\u7531\u8868\u4e2d\u521b\u5efa(*\uff0c224.1.1.1)\u8868\u9879\u3001\u5c06\u6536\u5230IGMP \u62a5\u6587\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u8be5\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u5e76\u671d\u7740RP\u7684\u65b9\u5411\u53d1\u9001\uff08*\uff0c224.1.1.1\uff09\u7684 PIM Join \u62a5\u6587\u3002\u6ce8\u610fE\u8def\u7531\u5668\u77e5\u9053RP\u7684\u5730\u5740\uff08\u53ef\u80fd\u662f\u56fe\u4e2d\u6240\u793a\u7684RP\u8def\u7531\u5668\u7684Loopback\u63a5\u53e3IP\u5730\u5740\uff09\uff0c\u5e76\u4e14\u4e5f\u80fd\u591f\u901a\u8fc7\u5355\u64ad\u8def\u7531\u534f\u8bae\uff08\u5982OSPF\uff09\u5b66\u4e60\u5230\u8be5\u5730\u5740\u7684\u8def\u7531\uff0c\u56e0\u6b64\u5b83\u501f\u52a9\u5355\u64ad\u8def\u7531\u534f\u8bae\u6765\u5224\u65ad\u8c01\u662f\u6bd4\u81ea\u5df1\u79bb RP\u66f4\u8fd1\u7684\u4e0a\u6e38PIM\u90bb\u5c45\u3002 RP\u6536\u5230\u4e86E\u8def\u7531\u5668\u53d1\u9001\u8fc7\u6765\u7684PIM Join\u62a5\u6587\uff0c\u5b83\u521b\u5efa\uff08*\uff0c224.1.1.1\uff09\u7ec4\u64ad\u8def\u7531\u8868\u9879\uff0c\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u7531\u4e8e\u5b83\u672c\u8eab\u5c31\u662fRP\uff0c\u56e0\u6b64\u5982\u679c\u6b64\u523b\u5b83\u5df2\u7ecf\u4ece\u6e90\u63a5\u6536\u5230\u53d1\u5f80 224.1.1.1\u7ec4\u64ad\u7ec4\u7684\u6d41\u91cf\uff0c\u5219\u5f00\u59cb\u5411\u4e0b\u884c\u63a5\u53e3\u8f6c\u53d1\u7ec4\u64ad\u6d41\u91cf\uff1a \u73b0\u5728\u8def\u7531\u5668F\u76f4\u8fde\u7684\u7f51\u6bb5\u4e5f\u51fa\u73b0\u4e86\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u6210\u5458\uff0c\u8be5\u6210\u5458\u53d1\u9001IGMP\u6210\u5458\u5173\u7cfb\u62a5\u544a\u5ba3\u79f0\u81ea\u5df1\u52a0\u5165\u7ec4\u64ad\u7ec4\u3002 F\u8def\u7531\u5668\u521b\u5efa\u7ec4\u64ad\u8def\u7531\u8868\u9879\uff08*\uff0c224.1.1.1\uff09\u3001\u5c06\u6536\u5230\u8be5IGMP\u62a5\u6587\u7684\u63a5\u53e3\u52a0\u5165\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c \u7136\u540e\u5411\u4e0a\u884c\u63a5\u53e3\u53d1\u9001\uff08*\uff0c224.1.1.1\uff09\u7684PIM Join\u62a5\u6587\uff0c\u8bf7\u6c42\u52a0\u5165\u5171\u4eab\u6811\uff1a E\u5c06\u6536\u5230F\u53d1\u9001\u8fc7\u6765\u7684Join\u62a5\u6587\u7684\u63a5\u53e3\u52a0\u5165\uff08*\uff0c224.1.1.1\uff09\u7ec4\u64ad\u8f6c\u53d1\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u7531\u4e8e\u6b64\u523b E\u5df2\u7ecf\u662f\u5171\u4eab\u6811\u7684\u4e00\u4e2a\u5206\u652f\u4e86\uff0c\u56e0\u6b64\u5b83\u53ea\u662f\u7b80\u5355\u7684\u5c06\u63a5\u53e3\u6dfb\u52a0\u5230\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff0c\u5e76\u5411\u8fd9\u4e2a\u63a5\u53e3\u8f6c\u53d1\u7ec4\u64ad\u6d41\u91cf\uff1a \u6700\u7ec8\u6784\u5efa\u8d77\u6765\u7684RPT\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5de5\u4f5c\u673a\u5236 2\uff1a\u5171\u4eab\u6811\u526a\u679d \u7ee7\u7eed\u4e0a\u6587\u7684\u573a\u666f\uff0c\u73b0\u5728F\u8def\u7531\u5668\u76f4\u8fde\u7684\u7f51\u6bb5\u539f\u6709\u7684\u7ec4224.1.1.1\u7684\u6210\u5458\u90fd\u79bb\u7ec4\u4e86\uff0c\u5b83\u4eec\u53d1\u9001IGMP leave\u62a5\u6587\u5ba3\u79f0\u81ea\u5df1\u79bb\u7ec4\uff1a F\u6536\u5230\u8fd9\u4e9bIGMP\u62a5\u6587\uff0c\u77e5\u9053\u8be5\u5b50\u7f51\u4e2d\u6ca1\u6709\u7ec4\u64ad\u6210\u5458\u4e86\uff0c\u56e0\u6b64\u5c06\u63a5\u53e3\u4ece\u7ec4\u64ad\u8f6c\u53d1\u8868\u9879\uff08*\uff0c224.1.1.1\uff09\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u79fb\u9664\uff0c\u4e00\u79fb\u9664\u5b83\u5c31\u53d1\u73b0\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\u4e86\uff0c\u5b83\u77e5\u9053\u81ea\u5df1\u4e0d\u518d\u9700\u8981\u7ec4224.1.1.1\u7684\u6d41\u91cf\uff0c\u56e0\u6b64\u5411\u4e0a\u6e38\u63a5\u53e3\u53d1\u9001\u4e00PIM Prune\u62a5\u6587\uff0c\u8bf7\u6c42\u5c06\u81ea\u5df1\u4ece\uff08*\uff0c224.1.1.1\uff09\u7684\u5171\u4eab\u6811\u4e0a\u526a\u9664\u3002 E\u8def\u7531\u5668\u4f1a\u6536\u5230\u8fd9\u4e2aPIM Prune\u62a5\u6587\uff0c\u5b83\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u4ece\uff08*\uff0c224.1.1.1\uff09\u8f6c\u53d1\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u79fb\u9664\uff0c\u7531\u4e8e\u79fb\u9664\u4e4b\u540e\uff0c\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u4ecd\u7136\u8fd8\u6709\u4e00\u4e2a\u63a5\u53e3\uff0c\u56e0\u6b64E\u4ecd\u7136\u4fdd\u6301\u81ea\u5df1\u5728RPT\u4e0a\u3002\u8fd9\u6837\u7ec4\u64ad\u6d41\u91cf\u4ecd\u7136\u662f\u4eceRP\u8f6c\u53d1\u4e0b\u6765\u7ed9E\uff0c\u800cE\u53ea\u5c06\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\u7ed9\u672c\u5730\u76f4\u8fde\u7684\u3001\u5b58\u5728\u7ec4\u64ad\u6210\u5458\u7684\u7f51\u6bb5\uff0c\u800c\u4e0d\u4f1a\u8f6c\u53d1\u7ed9F\u3002 \u5f53E\u8def\u7531\u5668\u4e0a\u76f4\u8fde\u7684\u7ec4\u64ad\u7ec4\u7528\u6237\u4e5f\u79bb\u7ec4\u65f6\uff0cE\u8def\u7531\u5668\u5c31\u4f1a\u53d1\u73b0\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\uff0c\u56e0\u6b64\u4e5f\u671d\u7740\u4e0a\u884c\u63a5\u53e3\u53d1\u9001 Prune\u62a5\u6587\uff0c\u5c06\u81ea\u5df1\u4ece\u5171\u4eab\u6811\u4e0a\u526a\u9664\u3002 \u5de5\u4f5c\u673a\u5236 3\uff1a\u6e90\u6ce8\u518c \u4e0a\u6587\u8ba8\u8bba\u7684\u662fRP\u4e0e\u63a5\u6536\u8005\u4e4b\u95f4\u7684\u95ee\u9898\uff0c\u73b0\u5728\u6765\u8ba8\u8bba\u7ec4\u64ad\u6e90\u548cRP\u4e4b\u95f4\u7684\u95ee\u9898\u3002\u53ea\u6709\u628a\u8fd9\u4e24\u4e2a\u95ee\u9898\u4e32\u8d77\u6765\uff0c\u7ec4\u64ad\u6570\u636e\u624d\u80fd\u6700\u7ec8\u6253\u901a\uff0c\u4ece\u6e90\u6d41\u5411\u63a5\u6536\u8005\u3002 \u521d\u59cb\u60c5\u51b5\u4e0b\uff0c\u7f51\u7edc\u4e2d\u662f\u6ca1\u6709\u7ec4\u64ad\u6d41\u91cf\u5728\u6d41\u52a8\u7684\uff0c\u5f53\u6e90\u5f00\u59cb\u5411\u7ec4\u64ad\u7ec4224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\u65f6\uff0c\u8fd9\u4e9b\u6570\u636e\u9996\u5148\u662f\u88ab\u7b2c\u4e00\u8df3\u8def\u7531\u5668A\u63a5\u6536\u3002 A\u6536\u5230\u4e4b\u540e\u8981\u5c06\u7ec4\u64ad\u6570\u636e\u53d1\u5411RP\u3002A\u77e5\u9053RP\u7684\u5730\u5740\uff0c\u4e5f\u901a\u8fc7\u5355\u64ad\u8def\u7531\u534f\u8bae\u53d1\u73b0\u4e86\u5230\u8fbeRP\u7684\u8def\u7531\u3002\u5b83\u5c06\u7ec4\u64ad\u6570\u636e\u5c01\u88c5\u5728PIM Register\u62a5\u6587\u4e2d\uff0cPIM Register\u62a5\u6587\u662f\u5355\u64ad\u5305\uff0c\u76ee\u7684\u5730\u5740\u662fRP\u7684\u5730\u5740\u3002A\u5c06\u6570\u636e\u5305\u53d1\u7ed9B\uff0c\u7531B\u8f6c\u53d1\u7ed9RP\u3002 \u5c01\u88c5\u7740\u7ec4\u64ad\u6570\u636e\u7684PIM Register\u62a5\u6587\u88ab\u8def\u7531\u5230\u4e86RP\u4e0a\uff0cRP\u5c06\u6570\u636e\u89e3\u5c01\u88c5\uff0c\u5f97\u5230\u7ec4\u64ad\u6570\u636e\uff0c\u5b83\u5c06\u7ec4\u64ad\u6570\u636e\u6cbf\u7740\u5df2\u7ecf\u5efa\u7acb\u597d\u7684RPT\u8f6c\u53d1\u4e0b\u53bb\u3002 A\u4e0d\u65ad\u7684\u5c06\u6e90\u53d1\u9001\u51fa\u6765\u7684\u7ec4\u64ad\u6570\u636e\u5c01\u88c5\u5728\u5355\u64ad\u7684Register\u62a5\u6587\u4e2d\u53d1\u5f80RP\uff0c\u8fd9\u663e\u7136\u662f\u4f4e\u6548\u7684\uff0c\u56e0\u4e3a\u7ec4\u64ad\u6d41\u91cf\u5f80\u5f80\u6bd4\u8f83\u591a\uff0c\u6301\u7eed\u7684\u5c01\u88c5\u548c\u89e3\u5c01\u88c5\u65e0\u7591\u662f\u589e\u52a0A\u548cRP\u7684\u8d1f\u62c5\uff0c\u8fd9\u662f\u6ca1\u6709\u610f\u4e49\u7684\u3002\u4e8e\u662fRP\u671d\u7740\u6e90\u7684\u65b9\u5411\u53d1\u9001\uff0810.1.1.1,224.1.1.1\uff09\u7684\uff08S,G\uff09PIM Join\u62a5\u6587\uff0c\u8bd5\u56fe\u5728\u81ea\u5df1\u548c\u6e90\u4e4b\u95f4\u6784\u5efa\u4e00\u68f5\u6700\u77ed\u8def\u5f84\u6811\uff0c\u4e5f\u5c31\u662f\u6e90\u6811\uff0c\u4ece\u800c\u80fd\u591f\u4ece\u6e90\u76f4\u63a5\u6536\u5230\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u800c\u4e0d\u662f\u88ab\u5c01\u88c5\u7684\u5355\u64ad\u5305\uff1a \u8fd9\u4e2a\uff08S,G\uff09\u7684PIM Join\u62a5\u6587\u671d\u7740\u6e90\u4e00\u8df3\u4e00\u8df3\u7684\u4f20\u8f93\u8fc7\u53bb\uff0c\u8fd9\u5c31\u5728RP\u548c\u7b2c\u4e00\u8df3\u8def\u7531\u5668A\u4e4b\u95f4\u5efa\u7acb\u8d77\u4e86\u4e00\u68f5\u6e90\u6811\uff0c\u7ec4\u64ad\u6d41\u91cf\u5c31\u53ef\u4ee5\u987a\u7740\u8fd9\u68f5\u6e90\u6811\u6d41\u5411RP\uff0c\u518d\u4eceRP\u4e0a\u6cbf\u7740\u6784\u5efa\u597d\u7684\u5171\u4eab\u6811\u6d41\u5411\u6240\u6709\u5206\u652f\uff1a \u4e0a\u4e00\u6b65\u5b8c\u6210\u4e4b\u540e\uff0c\u7531\u4e8e\u5df2\u7ecf\u6784\u5efa\u597d\u4e86\u4eceA\u5230RP\u7684\u6e90\u6811\uff0c\u56e0\u6b64A\u5c06\u7ec4\u64ad\u6d41\u91cf\u76f4\u63a5\u53d1\u5f80B\uff08\u518d\u7531B\u987a\u7740SPT\u53d1\u5f80RP\uff09\uff0c\u53e6\u4e00\u65b9\u9762\uff0cA\u4ecd\u7136\u5728\u5355\u64ad\u7684Register\u62a5\u6587\u4e2d\u5c01\u88c5\u7ec4\u64ad\u6570\u636e\u7136\u540e\u53d1\u5f80RP\uff0c\u8fd9\u5c06\u5bfc\u81f4RP\u6536\u5230\u4e24\u4efd\u76f8\u540c\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u663e\u7136\u662f\u6ca1\u6709\u610f\u4e49\u7684\u3002\u5b9e\u9645\u4e0a\u7531\u4e8e\u6e90\u6811\u5df2\u7ecf\u5efa\u7acb\u597d\u4e86\uff0cRP\u6ca1\u6709\u5fc5\u8981\u518d\u4eceA\u6536\u5230Register \u62a5\u6587\u4e86\uff0c\u56e0\u6b64\u5b83\u5411A\u53d1\u9001\u4e00\u4e2aPIM\u7684Register-STOP\u62a5\u6587\uff1a PIM Register\u62a5\u6587\u88abA\u6536\u5230\u4e4b\u540e\uff0cA\u5c31\u4e0d\u518d\u4f7f\u7528Register\u62a5\u6587\u5411RP\u53d1\u9001\u7ec4\u64ad\u6570\u636e\u4e86\uff0c\u7ec4\u64ad\u6570\u636e\u4e5f\u5c31\u53ea\u662f\u987a\u7740\u6e90\u6811\u6d41\u5411RP\u3002 \u5230\u6b64\u7f51\u7edc\u4e2d\u5b58\u5728\u7684\u6e90\u6811\u548c\u5171\u4eab\u6811\u5982\u4e0b\uff1a \u7ec4\u64ad\u6570\u636e\u4ece\u7b2c\u4e00\u8df3\u8def\u7531\u5668A\u987a\u7740\u6e90\u6811\u6d41\u5230RP\uff0c\u518d\u7531RP\u987a\u7740\u5171\u4eab\u6811\u4e0b\u884c\u5230\u6240\u6709\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\u7684\u5206\u652f\u3002\u4ed4\u7ec6\u4e00\u7422\u78e8\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u5176\u5b9e\u8fd9\u91cc\u4e5f\u5b58\u5728\u4e0d\u5408\u7406\u7684\u73b0\u8c61\uff0c\u5176\u5b9e\u7ec4\u64ad\u6d41\u91cf\u5b8c\u5168\u53ef\u4ee5\u4eceB\u76f4\u63a5\u6d41\u5230E\u7684\uff0c\u6ca1\u6709\u5fc5\u8981\u518d\u7ecf\u7531RP\u8f6c\u5230E\u3002\u8bf7\u7ee7\u7eed\u5f80\u4e0b\u770b\u3002 \u5de5\u4f5c\u673a\u5236 4\uff1aRPT \u5230 SPT \u7684\u5207\u6362 \u4e0a\u6587\u63d0\u5230\u7684\u95ee\u9898\uff0cPIM-SM\u6709\u89e3\u51b3\u529e\u6cd5\uff0c\u90a3\u5c31\u662fRPT\u5230SPT\u7684\u5207\u6362\u673a\u5236\u3002PIM-SM\u4e2d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u4e00\u65e6\u4eceRPT\u6536\u5230\u4e00\u4e2a\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u5219\u9a6c\u4e0a\u5c1d\u8bd5\u5728\u81ea\u5df1\u4e0e\u7ec4\u64ad\u6e90\u4e4b\u95f4\u5efa\u7acb\u4e00\u68f5\u6e90\u6811SPT\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9\u81ea\u5df1\u4ece\u6700\u4f18\u7684\u8def\u5f84\u83b7\u5f97\u6765\u81ea\u7b2c\u4e00\u8df3\u8def\u7531\u5668\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u800c\u4e0d\u7528\u4eceRP\u62d0\u8fc7\u6765\u3002 F\u6700\u4e3a\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\uff0c\u5f53\u5b83\u4eceRP\u6536\u5230\u4e00\u4e2a224.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u5b83\u7acb\u5373\u5411\u6e90\u7684\u65b9\u5411\u53d1\u9001\u4e00\u4e2a \uff0810.1.1.1,224.1.1.1\uff09\u7684PIM Join\u62a5\u6587\uff0c\u8bd5\u56fe\u5728\u81ea\u5df1\u4e0e\u6e90\u4e4b\u95f4\u5efa\u7acb\u4e00\u68f5\u6e90\u6811\u3002\u5b83\u901a\u8fc7\u5355\u64ad\u8def\u7531\u8868\u6765\u5224\u65ad\u54ea\u4e2a\u63a5\u53e3\u662f\u671d\u5411\u6e90\u7684RPF\u63a5\u53e3\uff08\u6e90\u6811\u4f7f\u7528\u7ec4\u64ad\u6e90\u505aRPF\u68c0\u67e5\uff09\u3002B\u8def\u7531\u5668\u662fE\u53bb\u5f8010.1.1.1\u7684\u4e0b\u4e00\u8df3\uff0c\u56e0\u6b64E\u5c06Join \u62a5\u6587\u53d1\u5411B\uff1a B\u8def\u7531\u5668\u6536\u5230\u8fd9\u4e2aJoin\u62a5\u6587\u540e\uff0c\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\uff0810.1.1.1,224.1.1.1\uff09\u7684\u7ec4\u64ad\u8868\u9879\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff1a \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u7f51\u8def\u4e2d\u7684\u7ec4\u64ad\u8def\u5f84\u6811\u5982\u4e0b\uff1a \u6211\u4eec\u53d1\u73b0F\u5c06\u6536\u5230\u540c\u4e00\u4e2a\u7ec4\u64ad\u6570\u636e\u7684\u4e24\u4efd\u62f7\u8d1d\uff0c\u8fd9\u663e\u7136\u662f\u65e0\u610f\u4e49\u7684\u3002\u65e2\u7136\u5df2\u7ecf\u80fd\u591f\u4eceSPT\u62ff\u5230\u7ec4\u64ad\u6570\u636e\uff0c\u5c31\u6ca1\u6709\u5fc5\u8981\u518d\u4eceRPT\u62ff\u7ec4\u64ad\u6570\u636e\u4e86\uff0c\u56e0\u6b64F\u671d\u7740RP\u7684\u65b9\u5411\u53d1\u9001\u4e00\u4e2a\uff08*\uff0c224.1.1.1\uff09\u7684Prune\u62a5\u6587\uff0c\u8bf7\u6c42\u5c06\u81ea\u5df1\u4eceRPT\u4e0a\u526a\u9664\uff0cE\u4f5c\u4e3aSPT\u548cRPT\u7684\u5206\u53c9\u53e3\u5e76\u4e14\u5df2\u7ecf\u80fd\u591f\u4eceSPT\u76f4\u63a5\u83b7\u53d6\u5230\u6765\u81eaSource\u7684\u7ec4\u64ad\u6570\u636e\uff0cE\u5411 RP\u53d1\u9001(S,G)RP\u4f4d\u526a\u679d\u62a5\u6587\uff0c\u5c06\u81ea\u5df1\u4ece\u5171\u4eab\u6811\u4e0a\u526a\u679d\uff1a RP\u6536\u5230\u8fd9\u4e2a\u526a\u679d\u62a5\u6587\u540e\uff0c\u5c06\u63a5\u53e3\u4ece(S,G)\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u53bb\u9664\uff0c\u7136\u540e\u671d\u7740\u6e90\u7684\u65b9\u5411\u53d1\u9001Prune\u62a5\u6587\uff0c B\u6536\u5230\u8fd9\u4e2a\u62a5\u6587\u540e\uff0c\u5c06\u63a5\u6536\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u4ece\uff08S,G\uff09\u8868\u9879\u4e2d\u79fb\u9664\u3002 \u6700\u7ec8\uff0c\u7ec4\u64ad\u8def\u5f84\u6811\u5982\u4e0b\uff1a PIM-SM DR \u6307\u5b9a\u8def\u7531\u5668 PIM\u5728\u6bcf\u4e00\u4e2a\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\uff0c\u90fd\u4f1a\u9009\u4e3e\u4e00\u4e2aDR\uff08DesignatedRouter\uff0c\u6307\u5b9a\u8def\u7531\u5668\uff09\uff0cDR\u7684\u8eab\u4efd\u662f\u53ef\u4ee5\u62a2\u5360\u7684\uff0c\u5229\u7528Hello\u8fdb\u884c\u9009\u4e3e\u3002 \u5728PIM-DM\u4e2d\uff0c\u53ea\u6709\u5f53IGMPv1\u88ab\u7528\u5728\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019DR\u624d\u4f1a\u6709\u610f\u4e49\uff0c\u8fd9\u662f\u56e0\u4e3aIGMPv1\u6ca1\u6709\u5b9a\u4e49IGMP \u67e5\u8be2\u5668\u9009\u62e9\u673a\u5236\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u88ab\u9009\u62e9\u7684DR\u4e5f\u6709IGMP\u67e5\u8be2\u529f\u80fd\u3002PIM-SM\u4e2d\uff0c\u6307\u5b9a\u8def\u7531\u5668\u7684\u4f5c\u7528\u66f4\u5927\uff1a \u9760\u8fd1\u6e90\u7684DR\uff08\u5982\u4e0a\u56fe\u4e2d\u7684R2\uff09\u8d1f\u8d23\u5411RP\u53d1\u9001PIM Register\u62a5\u6587\u53ca\u7ec4\u64ad\u6570\u636e \u00b6 \u4e0a\u56fe\u4e2d\uff0cR1\u4e0eR2\u90fd\u548c\u7ec4\u64ad\u8def\u7531\u5728\u540c\u4e00\u4e2aLAN\u4e2d\uff0c\u4ed6\u4eec\u90fd\u4f1a\u6536\u5230\u7ec4\u64ad\u6e90\u53d1\u51fa\u6765\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u5982\u679c\u4e24\u8005\u90fd\u5411RP\u53d1\u9001Register\u62a5\u6587\u6216\u8005\u7ec4\u64ad\u6d41\u91cf\uff0c\u8fd9\u663e\u7136\u662f\u591a\u4f59\u7684\uff0c\u56e0\u6b64R1\u53caR2\u8fde\u63a5\u5230\u8be5LAN\u7684\u63a5\u53e3\u5c31\u4f1a\u901a\u8fc7PIM Hello\u5305\u8fdb\u884cPK\uff0c\u5148\u6bd4\u8f83DR-Priority\uff08\u9ed8\u8ba4\u4e3a1\uff09\uff0c\u5982\u679c\u76f8\u7b49\u5219\u518d\u6bd4\u8f83\u63a5\u53e3IP\uff0c\u9009\u62e9IP\u8f83\u5927\u7684\u3002\u5047\u8bbeR2\u7684 \u63a5\u53e3\u6210\u4e3aDR\uff0c\u90a3\u4e48\u5c31\u7531R2\u6765\u5411RP\u6ce8\u518c\uff0c\u4ee5\u53ca\u53d1\u9001\u540e\u7eed\u7684\u7ec4\u64ad\u62a5\u6587\u3002 \u9760\u8fd1\u63a5\u6536\u8005\u7684DR\uff08\u5982\u4e0a\u56fe\u7684R4\uff09\u8d1f\u8d23\u5411RP\u53d1\u9001Join\u62a5\u6587\u4ece\u800c\u5f62\u6210\u5171\u4eab\u6811\uff0c\u4e5f\u5c31\u662f\u8d1f\u8d23\u5c06\u63a5\u53d7\u8005\u62c9\u5230\u5171\u4eab\u6811\uff08\u540c\u65f6\u8d1f\u8d23\u5c06\u6765\u81ea\u6e90\u7684\u7ec4\u64ad\u6570\u636e\u8f6c\u53d1\u7ed9\u63a5\u6536\u8005\uff09\u3002 \u00b6 \u5e76\u975e\u6240\u6709\u7684PIM\u8def\u7531\u5668\u90fd\u652f\u6301DR\u4f18\u5148\u7ea7\u9009\u9879\uff0c\u4e0d\u652f\u6301\u7684\u8def\u7531\u5668\u5728\u53d1\u9001PIM HELLO\u7684\u65f6\u5019\u4e0d\u643a\u5e26\u8fd9\u4e2a\u9009\u9879\uff0c \u5f53PIMv2\u8def\u7531\u5668\u6536\u5230\u4e00\u4e2a\u4e0d\u5305\u542bDR\u4f18\u5148\u7ea7\u9009\u9879\u7684hello\u65f6\uff08\u6216\u6b64\u62a5\u6587\u4e2d\u7684\u4f18\u5148\u7ea7=0\uff09\uff0c\u90a3\u4e48\u63a5\u6536\u65b9\u5c31\u77e5\u9053\uff0c \u53d1\u9001\u8005\u4e0d\u652f\u6301\u8fd9\u4e2a\u4f18\u5148\u7ea7\u9009\u9879\uff0c\u56e0\u6b64\u8fd9\u4e2a\u5b50\u7f51\u4e2d\u7684DR\u9009\u4e3e\u5c06\u4f7f\u7528IP\u5730\u5740\u5927\u5c0f\u8fdb\u884cPK\u3002 \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5728\u63a5\u53e3\u4e0a\u4fee\u6539DR\u4f18\u5148\u7ea7\uff1a [Router-GigabitEthernet0/0/0] pim hello-option dr-priority ? \u914d\u7f6e\u793a\u4f8b \u5b9e\u9a8c\u62d3\u6251 \u00b6 \u5b9e\u9a8c\u9700\u6c42 \u00b6 \u7f51\u7edc\u62d3\u6251\u3001IP\u5730\u5740\u89c4\u5212\u5982\u4e0a\u56fe\u6240\u793a\uff1b R1\u3001R2\u3001R3\u3001R4\u8fd0\u884cOSPF\u534f\u8bae\uff0c\u6253\u901a\u7f51\u7edc\u7684\u5355\u64ad\u8def\u7531\uff1b R1\u3001R2\u3001R3\u3001R4\u540c\u65f6\u4e5f\u662f\u7ec4\u64ad\u8def\u7531\u5668\uff0c\u8fd0\u884cPIM-SM\uff1b R3\u4e3aRP\uff0c\u914d\u7f6eLoopback0\uff0cIP\u5730\u5740\u4e3a3.3.3.3\uff0c\u8be5\u5730\u5740\u4f5c\u4e3aRP\u7684\u5730\u5740\uff1b Receiver\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\uff1b\u89c2\u5bdfRPT\u7684\u6784\u5efa\uff1b \u5728R4\u4e0a\u5c06RPT-SPT\u7684\u5207\u6362\u8bbe\u7f6e\u4e3a\u6c38\u8fdc\u4e0d\u5207\u6362\uff0c\u540c\u65f6\u4ece\u6e90\u5f00\u59cb\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u89c2\u5bdf\u6e90\u7684\u6ce8\u518c\u8fc7\u7a0b\u3001 RP\u5230\u6e90\u7684SPT\u5efa\u7acb\u8fc7\u7a0b\u3001\u7ec4\u64ad\u6d41\u91cf\u6cbf\u7740RPT\u4e0b\u884c\u7684\u8fc7\u7a0b\u3002 \u5728R4\u4e0a\u5c06RPT-SPT\u7684\u5207\u6362\u6062\u590d\u4e3a\u9ed8\u8ba4\u503c\uff0c\u540c\u65f6\u5c06R4\u7684GE0/0/1\u53e3\u7684OSPF Cost\u503c\u7a0d\u7a0d\u8c03\u5927\uff0c\u89c2\u5bdf RPT\u5230SPT\u7684\u5207\u6362\u8fc7\u7a0b\u3002 \u672c\u5b9e\u9a8c\u53ef\u4f7f\u7528\u534e\u4e3a\u81ea\u7814\u6a21\u62df\u5668eNSP\u5b8c\u6210\u3002 \u914d\u7f6e\u5b9e\u73b0 \u00b6 R1\u7684\u57fa\u7840\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u57fa\u7840\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u57fa\u7840\u914d\u7f6e\u5982\u4e0b\uff1a R4\u7684\u57fa\u7840\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5148\u505a\u4e00\u4e0b\u521d\u6b65\u7684\u9a8c\u8bc1\uff1a \\<R4>display pim neighbor VPN-Instance: public net Total Number of Neighbors = 2 Neighbor Interface Uptime Expires Dr-Priority BFD-Session 10.1.14.1 GE0/0/0 00:53:40 00:01:24 1 N 10.1.34.3 GE0/0/1 00:53:39 00:01:37 1 N \u4e0a\u8ff0\u8f93\u51fa\u7684\u662fR4\u7684PIM\u90bb\u5c45\u8868\uff0c\u53ef\u4ee5\u770b\u5230R4\u53d1\u73b0\u4e86\u4e24\u4e2aPIM\u90bb\u5c45\u3002\u5728\u5176\u4ed6\u8def\u7531\u5668\u4e0a\u4e5f\u505a\u76f8\u5e94\u7684\u67e5\u770b\uff0c\u786e\u4fdd PIM\u90bb\u5c45\u90fd\u53d1\u73b0\u5b8c\u6574\u4e86\u3002 \u4e0a\u9762\u7684\u8f93\u51fa\u67e5\u770b\u7684\u662fR4\u7684PIM RP\u4fe1\u606f\uff0c\u6211\u4eec\u4e3aR4\u624b\u5de5\u544a\u77e5\u4e86RP\u7684\u5730\u5740\uff0c3.3.3.3\uff0c\u5176\u5b9e\u4e5f\u5c31\u662fR3\u3002 \u7ec4\u64ad\u7528\u6237\u52a0\u5165\u7ec4224.1.1.1\uff0c\u67e5\u770bRPT\u7684\u5efa\u7acb\u8fc7\u7a0b\uff1a \u00b6 \u73b0\u5728PC\u52a0\u5165\u7ec4224.1.1.1\uff0c\u8fd9\u5c06\u89e6\u53d1PC\u53d1\u9001IGMP\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0cR4\u6700\u4e3a\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u4f1a\u4eceGE0/0/2 \u53e3\u4e0a\u6536\u5230\u8fd9\u4e2a\u62a5\u544a\uff0c\u5b83\u4fbf\u77e5\u9053\u8be5\u63a5\u53e3\u4e0b\u51fa\u73b0\u4e86\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u6210\u5458\uff0c\u5b83\u5c06\u5efa\u7acb\uff08* , 224.1.1.1\uff09\u7684\u7ec4\u64ad\u8def\u7531\u8868\u9879\u3002 \u968f\u540eR4\u4f1a\u5411RPF\u4e0a\u884c\u63a5\u53e3\u53d1\u9001\uff08*,G\uff09PIM Join\u62a5\u6587\uff0c\u8bf7\u6c42\u52a0\u5165\u5171\u4eab\u6811RPT\u3002R4\u5982\u4f55\u5224\u65ad\u54ea\u4e2a\u63a5\u53e3\u662fRPF \u4e0a\u884c\u63a5\u53e3\u5462\uff1fR4\u901a\u8fc7\u5355\u64ad\u8def\u7531\u8868\u6765\u5224\u65ad\uff0c\u5bf9\u4e8eRPT\uff0cPIM\u8def\u7531\u5668\u5728\u505aRPF\u68c0\u67e5\u7684\u65f6\u5019\u662f\u671d\u5411RP\u7684\uff0c\u56e0\u6b64R4\u5728\u5355\u64ad\u8def\u7531\u8868\u4e2d\u67e5\u627e\u5230\u8fbeRP3.3.3.3\u7684\u8def\u7531\uff0c\u9009\u62e9\u8def\u7531\u7684\u51fa\u63a5\u53e3\u4f5c\u4e3aRPF\u63a5\u53e3\uff0c\u4f46\u662f\u8fd9\u91cc\u7531\u4e8e\u5168\u7f51\u63a5\u53e3COST\u90fd\u662f\u9ed8\u8ba4\u503c\uff0c\u56e0\u6b64R4\u4e0a\u5173\u4e8e3.3.3.3\u7684OSPF\u8def\u7531\u5728R1\u53caR3\u4e0a\u51fa\u73b0\u7b49\u4ef7\u8d1f\u8f7d\u5747\u8861\uff0c\u8fd9\u65f6R4\u4f1a\u9009\u62e9R1\u53caR3\u4e2d\u63a5\u53e3IP\u8f83\u5927\u7684\u4f5c\u4e3aRPF\u7684\u4e3b\u90bb\u5c45\uff0c\u4e5f\u5c31\u662fR3\uff0c\u56e0\u6b64R4\u7684GE0/0/1\u6210\u4e3aRPF\u63a5\u53e3\u3002\u8fd9\u4e0e\u4e0a\u9762\u7684\u8f93\u51fa\u543b\u5408\u3002 R3\u5728\u6536\u5230R4\u53d1\u4e0a\u6765\u7684PIM Join\u62a5\u6587\u540e\uff0c\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2a\uff08*\uff0c224.1.1.1\uff09\u8868\u9879\uff0c\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3GE0/0/1 \u6dfb\u52a0\u5230\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u7531\u4e8e\u81ea\u5df1\u5c31\u662fRP\u4e86\uff0c\u56e0\u6b64\u5171\u4eab\u6811\u7684\u4e00\u4e2a\u5206\u652f\u5c31\u6b64\u5efa\u7acb\u5b8c\u6210\u3002 \u6e90\u6ce8\u518c\u3001RP\u5230\u6e90\u7684SPT\u5efa\u7acb\u8fc7\u7a0b\u3001\u7ec4\u64ad\u62a5\u6587\u7684\u4f20\u8f93\u8fc7\u7a0b\uff1a \u00b6 \u63a5\u4e0b\u53bb\u6211\u4eec\u6765\u89c2\u5bdf\u4e00\u4e0b\u6e90\u6ce8\u518c\u3001RP\u5230\u6e90\u7684SPT\u5efa\u7acb\u8fc7\u7a0b\u53ca\u7ec4\u64ad\u62a5\u6587\u7684\u4f20\u8f93\u8fc7\u7a0b\u3002\u9996\u5148\u5728R4\u4e0a\u5c06RPT- SPT\u7684\u5207\u6362\u8bbe\u7f6e\u4e3a\u6c38\u8fdc\u4e0d\u5207\u6362\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u7279\u6027\u6211\u4eec\u5728\u4e0b\u4e00\u6b65\u4e2d\u518d\u53bb\u5173\u6ce8\uff0c\u8fd9\u91cc\u6682\u65f6\u5ffd\u7565\u6389\u3002 \u4f7f\u7528\u4e0a\u8ff0\u914d\u7f6e\u5c06R4\u7684PIM SPT\u5207\u6362\u7279\u6027\u8bbe\u7f6e\u4e3a\u6c38\u8fdc\u4e0d\u5207\u6362\u3002 \u73b0\u5728\u7ec4\u64ad\u6e90\u5f00\u59cb\u5411\u7ec4\u64ad\u7ec4224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff08\u8fd9\u53ef\u4ee5\u901a\u8fc7ping 224.1.1.1\u6765\u6a21\u62df\uff09\u3002\u7ec4\u64ad\u6570\u636e\u5230\u8fbe\u7b2c\u4e00\u8df3\u8def\u7531\u5668R2\u540e\uff0cR2\u4f1a\u5c06\u7ec4\u64ad\u6570\u636e\u5c01\u88c5\u5728\u5355\u64ad\u7684PIM Register\u62a5\u6587\u4e2d\u53d1\u5f80RP\u4e5f\u5c31\u662fR3\u3002 \u901a\u8fc7\u5728R2\u7684GE0/0/1\u53e3\u4e0a\u6293\u5305\uff0c\u53ef\u4ee5\u770b\u5230Register\u62a5\u6587\uff0c\u8fd9\u662f\u4e00\u4e2a\u5355\u64ad\u5305\uff0c\u76ee\u7684\u5730\u5740\u662f3.3.3.3\u3002R3\u5728\u6536\u5230\u8fd9\u4e2a\u5305\u540e\uff0c\u89e3\u5c01\u88c5\u53d1\u73b0\u91cc\u5934\u662f\u4e2a\uff0810.10.10.10\uff0c224.1.1.1\uff09\u7684\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u56e0\u6b64\u5728\u672c\u5730\u521b\u5efa\u4e00\u4e2a \uff0810.10.10.10\uff0c224.1.1.1\uff09\u8868\u9879\uff0c\u540c\u65f6\u5c06\u7ec4\u64ad\u6570\u636e\u5305\u6cbf\u7740RPT\u5148\u4f20\u4e0b\u53bb\uff08\u4eceGE0/0/1\u53e3\u53d1\u51fa\u53bb\uff09\u3002\u53e6\u4e00\u65b9\u9762\uff0cR3\u7d27\u63a5\u7740\u5411\u6e90\u7684\u65b9\u5411\uff08\u540c\u6837\u662f\u501f\u52a9\u5355\u64ad\u8def\u7531\u8868\u67e5\u627e\u523010.10.10.10\u7684\u8def\u7531\u6765\u83b7\u5f97RPF\u63a5\u53e3\uff09\u53d1\u9001 \uff0810.10.10.10,224.1.1.1\uff09\u7684PIM Join\u62a5\u6587\uff0c\u8bd5\u56fe\u5728\u81ea\u5df1\u4e0e\u6e90\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761\u6e90\u6811SPT\u3002 \\<R3>display pim routing-table R2\u6536\u5230\u8fd9\u4e2aJoin\u62a5\u6587\u540e\uff0c\u5c06GE0/0/1\u53e3\u6dfb\u52a0\u5230\uff0810.10.10.10\uff0c224.1.1.1\uff09\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c \u7136\u540e\u5c06\u7ec4\u64ad\u6d41\u91cf\u6cbf\u7740\u5efa\u7acb\u597d\u7684SPT\u8f6c\u53d1\u5230RP\uff0c\u800c\u4e0d\u518d\u5c06\u7ec4\u64ad\u6d41\u91cf\u5c01\u88c5\u5230Register\u62a5\u6587\u4e2d\u3002 SPT\u7684\u5207\u6362\u8fc7\u7a0b\uff1a \u00b6 \u73b0\u5728\uff0c\u5c06R4\u4e0a\u4e4b\u524d\u914d\u7f6e\u7684SPT\u5207\u6362\u7684\u76f8\u5173\u914d\u7f6e\u53bb\u9664\uff08 undo spt-switch-threshold \uff09\uff0c\u6062\u590d\u6210\u9ed8\u8ba4\u3002\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cR4\u4f5c\u4e3a\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\uff0c\u53ea\u8981\u4e00\u6536\u5230224.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u5219\u7acb\u5373\u8fdb\u884cSPT\u7684\u5207\u6362\u3002\u63a5\u7740\u5c06R4\u7684GE0/0/1\u53e3OSPF Cost\u7a0d\u7a0d\u8c03\u5927\uff0c\u8c03\u8282\u4e3a2\uff08\u9ed8\u8ba4\u662f1\uff09\uff0c\u6211\u4eec\u901a\u8fc7\u8fd9\u4e2a\u52a8\u4f5c\uff0c\u6765\u6a21\u62df\u8fd9\u6837\u4e00\u4e2a\u4e8b\u5b9e\uff1a\u201cR4\u4eceR1\u5230\u8fbe\u6e90\uff0c\u6bd4\u4eceR3\u5230\u8fbe\u6e90\u8981\u66f4\u8fd1\u201d\u3002 \u73b0\u5728\uff0c\u5f53R4\u4eceGE0/0/1\u53e3\u6536\u5230\u7b2c\u4e00\u4e2a224.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\u5305\u65f6\uff0c\u5c06\u542f\u52a8SPT\u5207\u6362\u673a\u5236\uff0c\u671d\u7740\u6e90\u7684\u65b9\u5411 \uff08\u66f4\u4f18\u7684\u4e0b\u4e00\u8df3\u662fR1\uff09\u53d1\u9001\uff0810.10.10.10\uff0c224.1.1.1\uff09\u7684PIM Join\u62a5\u6587\uff0c\u8bf7\u6c42\u52a0\u5165SPT\u3002 R1\u6536\u5230\u8fd9\u4e2aJoin\u62a5\u6587\u540e\uff0c\u521b\u5efa\uff0810.10.10.10\uff0c224.1.1.1\uff09\u8868\u9879\uff0c\u5c06GE0/0/1\u53e3\u6dfb\u52a0\u5230\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff0c\u540c\u65f6\u5411R2\u53d1\u9001Join\u62a5\u6587\u3002R2\u6536\u5230\u8fd9\u4e2aJoin\u62a5\u6587\u540e\uff0c\u5c06\u81ea\u5df1\u7684GE0/0/0\u53e3\u6dfb\u52a0\u5230\uff0810.10.10.10\uff0c224.1.1.1\uff09 \u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff0c\u5e76\u5f00\u59cb\u5411GE0/0/0\u53e3\u4e0b\u4f20\u7ec4\u64ad\u6570\u636e\u3002 \u8fd9\u4e00\u6b65\u5b8c\u6210\u4e4b\u540e\uff0c\u7f51\u7edc\u4e2d\u7684\u7ec4\u64ad\u8def\u5f84\u6811\u5982\u4e0b\u6240\u793a\uff1a \u73b0\u5728R4\u4f1a\u4eceR1\u53caR3\u6536\u5230\u7ec4\u64ad\u6570\u636e\u7684\u4e24\u4efd\u62f7\u8d1d\uff0c\u8fd9\u663e\u7136\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u56e0\u6b64\u5b83\u5411R3\u53d1\u9001\u4e00\u4e2aPrune\u62a5\u6587\uff0c \u5c06\u81ea\u5df1\u4eceRPT\u4e0a\u526a\u9664\u3002R3\u6536\u5230\u8fd9\u4e2a\u62a5\u6587\u540e\uff0c\u5c06\u63a5\u53e3GE0/0/1\u4ece\uff08*\uff0c224.1.1.1\uff09\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u5220\u9664\uff0c\u4e5f\u5c31\u4e0d\u518d\u5411GE0/0/1\u53e3\u53d1\u9001\u7ec4\u64ad\u6d41\u91cf\u4e86\uff0c\u7136\u540e\u53d1\u73b0\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\uff0c\u56e0\u6b64\u5411R2\u53d1\u9001\u4e00\u4e2aPrune \u62a5\u6587\uff0c\u8bf7\u6c42\u5c06\u81ea\u5df1\u4eceSPT\u4e0a\u4fee\u526a\u6389\uff0c\u56e0\u4e3a\u5b83\u4e0d\u518d\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\u4e86\u3002R2\u6536\u5230\u8fd9\u4e2aPrune\u62a5\u6587\u540e\uff0c\u5c06GE0/0/1 \u53e3\u4ece\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u5220\u9664\u3002 \u6700\u7ec8R2\u7684\u7ec4\u64ad\u8868\u9879\u5982\u4e0b\uff1a \u7ec4\u64ad\u8def\u5f84\u6811\u5982\u4e0b\uff1a IPv6 \u57fa\u7840 \u00b6 IPv6 \u57fa\u7840 \u6982\u8ff0 \u00b6 IPv4\u5b58\u5728\u7684\u95ee\u9898 \u00b6 IPv4\u516c\u7f51\u5730\u5740\u8017\u5c3d\u3002\u8fd9\u5e94\u8be5\u662f\u5f53\u524dIPv6\u66ff\u4ee3IPv4\u7684\u6700\u5927\u539f\u52a8\u529b\u3002\u968f\u7740\u6700\u540e\u4e00\u5757IPv4\u516c\u7f51\u5730\u5740\u5206\u914d\u5149\uff0c\u52a0\u4e0a\u63a5\u5165\u516c\u7f51\u7684\u7528\u6237\u53ca\u8bbe\u5907\u8d8a\u6765\u8d8a\u591a\uff0cIPv4\u5730\u5740\u67af\u7aed\u7684\u95ee\u9898\u65e5\u76ca\u52a0\u5267\u3002 Internet\u7528\u6237\u5feb\u901f\u589e\u957f\uff0c\u968f\u7740\u79d1\u6280\u884c\u4e1a\u7684\u53d1\u5c55\uff0c\u6709\u66f4\u591a\u7684\u7528\u6237\u3001\u66f4\u591a\u79cd\u7c7b\u7684\u8bbe\u5907\u63a5\u5165\u516c\u7f51\u3002 IPv4\u7f3a\u4e4f\u771f\u6b63\u7684\u7aef\u5230\u7aef\u901a\u4fe1\u6a21\u578b\u3002\u4e3a\u4e86\u7f13\u89e3\u5730\u5740\u7d27\u7f3a\u7684\u95ee\u9898\uff0c\u79c1\u6709IPv4\u5730\u5740\u7a7a\u95f4\u88ab\u5927\u91cf\u7684\u90e8\u7f72\uff0c\u5e94\u8be5\u8bf4\u79c1\u6709\u5730\u5740\u7a7a\u95f4\u7684\u5b9a\u4e49\u6781\u5927\u7a0b\u5ea6\u4e0a\u7f13\u89e3\u4e86IPv4\u5730\u5740\u67af\u7aed\u7684\u95ee\u9898\uff0c\u4efb\u4f55\u4eba\u5728\u4efb\u4f55\u672c\u5730\u79c1\u6709\u7684\u7f51\u7edc\u4e2d\u90fd\u80fd\u591f\u968f\u610f\u4f7f\u7528IPv4\u79c1\u6709\u5730\u5740\uff0c\u53ea\u662f\u8fd9\u4e9b\u5730\u5740\u65e0\u6cd5\u4e0a\u516c\u7f51\uff0c\u5982\u679c\u9700\u8981\u8bbf\u95ee\u516c\u7f51\uff0c\u6216\u8005\u88ab\u516c\u7f51\u8bbf\u95ee\uff0c \u90a3\u5c31\u9700\u8981\u7528\u5230NAT\u3002NAT\u786e\u5b9e\u80fd\u89e3\u51b3\u79c1\u6709\u5730\u5740\u7a7a\u95f4\u4e0e\u516c\u7f51\u4e92\u8bbf\u7684\u95ee\u9898\uff0c\u4f46\u662f\u5374\u7834\u574f\u4e86\u7aef\u5230\u7aef\u901a\u4fe1\u7684\u5b8c\u6574\u6027\u3002 IPv4\u65e0\u6cd5\u9002\u5e94\u65b0\u6280\u672f\u7684\u53d1\u5c55\uff0c\u5982\u7269\u8054\u7f51\u7b49\u3002\u6240\u6709\u884c\u4e1a\u90fd\u662fIPv6\u7684\u6f5c\u5728\u7528\u6237\u3002 \u5e7f\u64ad\u673a\u5236\u7684\u5b58\u5728\uff0c\u5bf9ARP\u7684\u4f9d\u8d56\u7b49\uff0c\u4f7f\u5f97IPv4\u5c40\u57df\u7f51\u7684\u76f8\u5173\u8fd0\u4f5c\u95ee\u9898\u9891\u53d1\u3002 IPv4\u5bf9\u79fb\u52a8\u6027\u7684\u652f\u6301\u4e0d\u591f\u7406\u60f3\u3002 IPv6\u7684\u7279\u70b9\u53ca\u4f18\u52bf \u00b6 IPv6\u5730\u5740\u91c7\u7528128bit\u957f\u5ea6\uff0c\u5730\u5740\u7a7a\u95f4\u975e\u5e38\u5e9e\u5927\uff0c\u4e3a\u672a\u6765\u6570\u5341\u5e74\u63d0\u4f9b\u4e86\u5de8\u5927\u7684\u5730\u5740\u7a7a\u95f4\u3002 \u591a\u7b49\u7ea7\u5c42\u6b21\u6709\u52a9\u4e8e\u8def\u7531\u805a\u5408\uff0c\u6781\u5927\u7a0b\u5ea6\u4e0a\u4f18\u5316\u4e86\u9aa8\u5e72\u7f51\u8def\u7531\u3002\u516c\u7f51\u5730\u5740\u5206\u914d\u66f4\u52a0\u5408\u7406\u6709\u5e8f\u3002 \u72ec\u7279\u7684\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u529f\u80fd\u4f7f\u5f97IPv6\u7ec8\u7aef\u80fd\u591f\u5373\u63d2\u5373\u7528\uff0c\u7701\u53bb\u4e86\u5730\u5740\u914d\u7f6e\u7684\u9ebb\u70e6\u3002 \u524d\u7f00\u91cd\u7f16\u5740\u673a\u5236\u4f7f\u5f97IPv6\u63d0\u4f9b\u5546\u4e4b\u95f4\u7684\u8f6c\u6362\u5bf9\u6700\u7ec8\u7528\u6237\u900f\u660e\u3001\u66f4\u5e73\u6ed1\u3002 \u4ec5\u5b58\u5728\u7279\u5b9a\u9700\u6c42\u7684\u573a\u666f\u4e2d\u90e8\u7f72NAT\uff0c\u786e\u4fdd\u7aef\u5230\u7aef\u901a\u4fe1\u7684\u5b8c\u6574\u6027\u3002 IPv6\u4e2d\u53d6\u6d88\u4e86\u5e7f\u64ad\u8fd9\u4e00\u5728IPv4\u4e2d\u5e26\u6765\u8bf8\u591a\u95ee\u9898\u7684\u4f20\u8f93\u673a\u5236\u3002\u5728IPv4\u4e2d\u6240\u6709\u9700\u8981\u501f\u52a9\u5e7f\u64ad\u6765\u5de5\u4f5c\u7684\u534f\u8bae\uff0c\u5728IPv6\u4e2d\u5747\u91c7\u7528\u7ec4\u64ad\u66ff\u4ee3\u3002 IPv6\u4e2d\u53d6\u6d88\u4e86ARP\uff0c\u4f7f\u7528ND\u62a5\u6587\u5b9e\u73b0\u5730\u5740\u89e3\u6790\uff0c\u5730\u5740\u89e3\u6790\u8bf7\u6c42\u901a\u8fc7\u7ec4\u64ad\u7684\u65b9\u5f0f\u53d1\u9001\u3002 IPv6\u7684\u5305\u5934\u6bd4IPv4\u66f4\u7b80\u6d01\u3001\u5b57\u6bb5\u66f4\u5c11\u3002\u5b9a\u957fIPv6\u57fa\u672c\u62a5\u5934\u63d0\u9ad8\u4e86\u7f51\u7edc\u8bbe\u5907\u7684\u5904\u7406\u6548\u7387\u3002 \u65b0\u5b9a\u4e49\u7684\u6269\u5c55\u5305\u5934\u66ff\u4ee3\u4e86IPv4\u7684\u9009\u9879\u5b57\u6bb5\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u7075\u6d3b\u6027\u3001\u6269\u5c55\u6027\u3002 \u66f4\u6709\u6548\u5730\u652f\u6301\u79fb\u52a8\u6027\u548c\u5b89\u5168\u6027\u3002 IPv4\u5230IPv6\u7f51\u7edc\u7684\u8fc7\u6e21\u6280\u672f\u4e30\u5bcc\u591a\u5f69\u3002 \u62a5\u6587\u683c\u5f0f \u00b6 IPv6\u57fa\u672c\u5305\u5934 \u00b6 \u4ee5\u4e0a\u662fIPv4\u4e0eIPv6\u5305\u5934\u7ed3\u6784\u7684\u5bf9\u6bd4\uff08\u53ef\u4ee5\u4ece\u56fe\u4e2d\u770b\u5230\u5bf9\u4e8eIPv4\u800c\u8a00\uff0cIPv6\u7684\u5934\u90e8\u53d1\u751f\u7684\u53d8\u5316\uff0c\u4ee5\u53ca\u88ab\u4fdd\u7559\u3001\u53d6\u6d88\u548c\u65b0\u589e\u7684\u5b57\u6bb5\uff09\u3002IPv4\u7684\u5305\u5934\u6700\u5c0f\u4e3a20byte\uff0c\u6700\u5927\u5219\u4e3a60byte\uff0c\u7531\u4e8e\u5305\u542b\u4e86\u53ef\u9009\u9879\u53ca\u586b\u5145\u5b57\u6bb5\uff0c \u56e0\u6b64\u5305\u5934\u957f\u5ea6\u4e0d\u56fa\u5b9a\u3002IPv6\u7684\u57fa\u672c\u5305\u5934\u76f8\u6bd4\u4e8eIPv4\u867d\u7136\u957f\u5ea6\u52a0\u957f\u4e86\uff0c\u53d8\u6210\u4e8640byte\uff0c\u4f46\u662f\u5305\u5934\u957f\u5ea6\u662f\u56fa\u5b9a\u7684\uff0c\u800c\u4e14\u53d8\u5f97\u66f4\u52a0\u7b80\u6d01\uff0c\u5b83\u5c06\u539f\u6765IPv4\u4e2d\u7684\u53ef\u9009\u9879\u3001\u586b\u5145\u5b57\u6bb5\u4ee5\u53ca\u90e8\u5206\u5176\u4ed6\u5b57\u6bb5\u7684\u529f\u80fd\u901a\u8fc7\u201c\u6269\u5c55\u5305\u5934\u201d\u6765\u5b9e\u73b0\u3002 \u5728IPv6\u57fa\u672c\u5305\u5934\u4e2d\uff0c\u201cTraffic Class\u201d\u5b57\u6bb5\u7c7b\u4f3cIPv4\u4e2d\u7684ToS\u3002\u201cHop Limit\u201d\u5b57\u6bb5\u76f8\u5f53\u4e8eTTL\uff0c\u53e6\u5916\u201cNext Header\u201d\u5b57\u6bb5\u7528\u6765\u6307\u793aIPv6\u57fa\u672c\u5305\u5934\u540e\u9762\u7684\u62a5\u6587\u7c7b\u578b\uff0c\u76f8\u5f53\u4e8eIPv4\u4e2d\u7684Protocol\u5b57\u6bb5\u3002\u65b0\u589e\u7684\u201cFlow Label\u201d\u5b57\u6bb5\u7528\u6765\u6807\u8bb0\u540c\u5c5e\u4e00\u4e2a\u6d41\u7684\u62a5\u6587\u3002\u8f6c\u53d1\u8def\u5f84\u4e0a\u7684\u7f51\u7edc\u8bbe\u5907\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u503c\u6765\u533a\u5206\u6d41\u5e76\u8fdb\u884c\u5904\u7406\uff0c \u7531\u4e8eFlow Label\u5728V6\u7684\u5305\u5934\u4e2d\u643a\u5e26\uff0c\u56e0\u6b64\u76f8\u6bd4IPv4\u90a3\u6837\u8fd8\u8981\u901a\u8fc7\u6e90\u76ee\u7684IP\u3001\u6e90\u76ee\u7684\u7aef\u53e3\u53f7\u548c\u534f\u8bae\u7c7b\u578b \uff08\u4e94\u5143\u7ec4\u4fe1\u606f\uff09\u6765\u786e\u5b9a\u4e00\u4e2a\u6d41\uff0c\u6548\u7387\u5c31\u8981\u9ad8\u5f97\u591a\u3002 \u4e00\u4e2aIPv6\u6570\u636e\u5305\u62e5\u6709\u4e00\u4e2aIPv6\u57fa\u672c\u5305\u5934\uff0c\u4ee5\u53ca0\u4e2a\u6216\u591a\u4e2a\u6269\u5c55\u5305\u5934\uff0c\u5728\u6269\u5c55\u5305\u5934\u4e4b\u540e\uff0c\u4fbf\u662f\u6570\u636e\u8f7d\u8377\u3002 IPv6\u6269\u5c55\u5305\u5934 \u00b6 \u5728IPv6\u4e2d\uff0c\u539f\u6765IPv4\u5305\u5934\u4e2d\u7684\u9009\u9879\u5b57\u6bb5\u7b49\u7684\u76f8\u5173\u529f\u80fd\u901a\u8fc7IPv6\u6269\u5c55\u5305\u5934\u5b9e\u73b0\u3002\u4e00\u4e2aIPv6\u6570\u636e\u5305\u53ef\u80fd\u5305\u62ec 0\u4e2a\u6216\u591a\u4e2a\u6269\u5c55\u5305\u5934\uff0c\u5f53\u4f7f\u7528\u591a\u4e2a\u6269\u5c55\u5305\u5934\u65f6\uff0c\u901a\u8fc7\u524d\u9762\u7684\u5305\u5934\u7684Next Head\u5b57\u6bb5\u6307\u660e\u8be5\u5305\u5934\u540e\u7684\u6269\u5c55\u5305\u5934\u7c7b\u578b\u3002\u6709\u4e86\u6269\u5c55\u5305\u5934\uff0c\u4e2d\u95f4\u8def\u7531\u5668\u5c31\u4e0d\u9700\u8981\u5904\u7406\u6bcf\u4e00\u4e2a\u53ef\u80fd\u51fa\u73b0\u7684\u9009\u9879\uff0c\u63d0\u9ad8\u4e86\u8def\u7531\u5668\u5904\u7406\u6570\u636e\u5305\u7684\u6548\u7387\uff0c\u63d0\u9ad8\u4e86\u5176\u8f6c\u53d1\u6027\u80fd\u3002\u5728\u6269\u5c55\u62a5\u5934\u94fe\u7684\u6700\u540e\u5c31\u662f\u6709\u6548\u8d1f\u8f7d\u3002 \u6269\u5c55\u62a5\u5934\u662f\u53ef\u9009\u7684\uff0c\u53ea\u6709\u9700\u8981\u8be5\u6269\u5c55\u62a5\u5934\u5bf9\u5e94\u7684\u529f\u80fd\u65f6\uff0c\u6570\u636e\u7684\u53d1\u9001\u8005\u624d\u4f1a\u6dfb\u52a0\u76f8\u5e94\u6269\u5c55\u62a5\u5934\u3002 RFC 2460\u4e2d\u5b9a\u4e49\u4e866\u4e2aIPv6\u6269\u5c55\u5934\u3002\u5f53\u8d85\u8fc7\u4e00\u79cd\u6269\u5c55\u62a5\u5934\u88ab\u7528\u5728\u540c\u4e00\u4e2aIPv6\u62a5\u6587\u91cc\u65f6\uff0c\u62a5\u5934\u5fc5\u987b\u6309\u7167\u4e0b\u5217\u987a\u5e8f\u51fa\u73b0\uff1a IPv6\u57fa\u672c\u62a5\u5934 \u9010\u8df3\u9009\u9879\u6269\u5c55\u62a5\u5934 \u76ee\u7684\u9009\u9879\u6269\u5c55\u62a5\u5934 \u8def\u7531\u6269\u5c55\u62a5\u5934 \u5206\u6bb5\u6269\u5c55\u62a5\u5934 \u8ba4\u8bc1\u6269\u5c55\u62a5\u5934 \u5c01\u88c5\u5b89\u5168\u6709\u6548\u8f7d\u8377\u6269\u5c55\u62a5\u5934 \u76ee\u7684\u9009\u9879\u6269\u5c55\u62a5\u5934 \u4e0a\u5c42\u534f\u8bae\u6570\u636e\u62a5\u6587 IPv6 \u7f16\u5740 IPv6 \u5730\u5740 \u00b6 IPv6\u5730\u5740\u4e00\u5171128bit\uff0c\u56e0\u6b64\u5730\u5740\u7a7a\u95f4\u662f\u76f8\u5f53\u5e9e\u5927\u7684\uff0c\u53ef\u63d0\u4f9b\u7ed9PC\u3001\u65e0\u7ebfIP\u7535\u8bdd\u3001\u673a\u9876\u76d2\u3001\u89c6\u9891\u8bbe\u5907\u3001\u5b89\u4fdd\u76d1\u63a7\u8bbe\u5907\u7b49\u7b49\u3002IPv6\u5730\u5740\u4e0d\u518d\u50cfV4\u90a3\u6837\u4f7f\u7528\u201c\u70b9\u5206\u5341\u8fdb\u5236\u201d\u7684\u683c\u5f0f\u6765\u8868\u73b0\uff0c\u800c\u662f\u4f7f\u7528\u201c\u5192\u53f7\u5206\u9694\u5341\u516d\u8fdb\u5236\u201d \u683c\u5f0f\u8868\u793a\u4f8b\u59822001\uff1a0da8\uff1a0207\uff1a0000\uff1a0000\uff1a0000\uff1a0000\uff1a8207\u3002\u4e4d\u4e00\u770b\u8fd9\u5730\u5740\u786e\u5b9e\u5f88\u957f\uff0c\u4e66\u5199\u8d77\u6765\u6709\u8bf8\u591a\u4e0d\u4fbf\uff0c\u4f46\u662f\u4e0d\u7528\u62c5\u5fc3\uff0cIPv6\u5b9a\u4e49\u4e86\u5730\u5740\u7b80\u5199\u65b9\u5f0f\uff1a \u4ee5\u4e0b\u662f\u51e0\u4e2a\u7b80\u5199\u7684\u4f8b\u5b50\uff1a \u5730\u5740\u7c7b\u578b \u00b6 \u5355\u64ad\u5730\u5740\uff08Unicast Address\uff09\uff1a\u6807\u8bc6\u4e00\u4e2a\u63a5\u53e3\uff0c\u76ee\u7684\u5730\u5740\u4e3a\u5355\u64ad\u5730\u5740\u7684\u62a5\u6587\u4f1a\u88ab\u9001\u5230\u88ab\u6807\u8bc6\u7684\u63a5\u53e3\u3002\u5728IPv6\u4e2d\uff0c\u4e00\u4e2a\u63a5\u53e3\u62e5\u6709\u591a\u4e2aIPv6\u5730\u5740\u662f\u975e\u5e38\u5e38\u89c1\u7684\u73b0\u8c61\u3002 \u7ec4\u64ad\u5730\u5740\uff08Multicast Address\uff09\uff1a\u6807\u8bc6\u591a\u4e2a\u63a5\u53e3\uff0c\u76ee\u7684\u5730\u5740\u4e3a\u7ec4\u64ad\u5730\u5740\u7684\u62a5\u6587\u4f1a\u88ab\u9001\u5230\u88ab\u6807\u8bc6\u7684\u6240\u6709\u63a5\u53e3\u3002\u53ea\u6709\u52a0\u5165\u76f8\u5e94\u7ec4\u64ad\u7ec4\u7684\u8bbe\u5907\u63a5\u53e3\u624d\u4f1a\u4fa6\u542c\u53d1\u5f80\u8be5\u7ec4\u64ad\u5730\u5740\u7684\u62a5\u6587\u3002 \u4efb\u64ad\u5730\u5740\uff08Anycast Address\uff09\uff1a\u4efb\u64ad\u5730\u5740\u6807\u8bc6\u4e00\u7ec4\u7f51\u7edc\u63a5\u53e3\uff08\u901a\u5e38\u5c5e\u4e8e\u4e0d\u540c\u7684\u8282\u70b9\uff09\u3002\u76ee\u6807\u5730\u5740\u662f\u4efb\u64ad\u5730\u5740\u7684\u6570\u636e\u5305\u5c06\u53d1\u9001\u7ed9\u5176\u4e2d\u8def\u7531\u610f\u4e49\u4e0a\u6700\u8fd1\u7684\u4e00\u4e2a\u7f51\u7edc\u63a5\u53e3\u3002 IPv6\u6ca1\u6709\u4f7f\u7528\u5e7f\u64ad\u5730\u5740\uff08Broadcast Address\uff09\u3002 \u53ef\u4ee5\u901a\u8fc7IANA\u7f51\u7ad9\u4e86\u89e3\u76ee\u524d\u7684IPv6\u5730\u5740\u7a7a\u95f4\u5206\u914d\u60c5\u51b5\uff1a Internet Protocol Version 6 Address Space \u5355\u64ad\u5730\u5740 \u00b6 \u53ef\u805a\u5408\u5168\u5c40\u5355\u64ad\u5730\u5740\uff08Aggregatable Global Unicast Address\uff09 \u00b6 \u53ef\u805a\u5408\u5168\u5c40\u5355\u64ad\u5730\u5740\u4e5f\u88ab\u79f0\u4e3a\u5168\u5c40\u5355\u64ad\u5730\u5740\uff0c\u8be5\u7c7b\u5730\u5740\u5168\u7403\u552f\u4e00\uff0c\u76f8\u5f53\u4e8eIPv4\u7684\u516c\u7f51\u5730\u5740\u3002 \u76ee\u524dIANA\u4e3a\u8fd9\u7c7b\u5730\u5740\u5206\u914d\u4e86\u524d\u7f002000::/3\u3002\u5e38\u89c1\u7684\u60c5\u51b5\u662f\uff0c\u4ece\u8fd0\u8425\u5546\u7533\u8bf7\u5230\u7684IPv6\u5730\u5740\u7a7a\u95f4\u4e3a/48\uff0c \u518d\u7531\u81ea\u5df1\u6839\u636e\u9700\u8981\u8fdb\u4e00\u6b65\u89c4\u5212\u3002 \u5982\u4e0b\u56fe\uff0c\u5206\u914d\u7ed9\u7ec8\u7aef\u7684IPv6\u5730\u5740\u53ef\u80fd\u662f\u8fd9\u6837\u7684\u7ed3\u6784\uff1a \u5168\u5c40\u8def\u7531\u524d\u7f00\uff1a\u7531\u63d0\u4f9b\u5546\u6307\u5b9a\u7ed9\u4e00\u4e2a\u7ec4\u7ec7\u673a\u6784\uff0c\u4e00\u822c\u81f3\u5c11\u4e3a48bit\uff08\u52a0\u4e0a\u524d\u9762\u56fa\u5b9a\u76843bit\uff09\u3002\u76ee\u524d\u5df2\u7ecf\u5206\u914d\u7684\u5168\u5c40\u8def\u7531\u524d\u7f00\u7684\u524d3bit\u5747\u4e3a001\u3002\u56e0\u6b64\u524d\u7f00\u4e3a2000::/3\u3002 \u5b50\u7f51ID\uff1a\u7ec4\u7ec7\u673a\u6784\u53ef\u4ee5\u7528\u5b50\u7f51ID\u6765\u6784\u5efa\u672c\u5730\u7f51\u7edc\u3002 \u63a5\u53e3ID\uff1a\u7528\u6765\u6807\u8bc6\u4e00\u4e2a\u8bbe\u5907\uff08\u7684\u63a5\u53e3\uff09\u3002\u4e0eIPv4\u4e2d\u7684\u4e3b\u673a\u5730\u5740\u7684\u6982\u5ff5\u7c7b\u4f3c\u3002 \u7ad9\u70b9\u672c\u5730\u5730\u5740\uff08Site-Local Address\uff09 \u00b6 \u7c7b\u4f3cIPv4\u4e2d\u7684\u79c1\u6709\u5730\u5740\u3002\u8be5\u5730\u5740\u4ee5FEC0::/10\u4e3a\u524d\u7f00\u3002\u4e5f\u5c31\u662f\u8bf4\u6700\u9ad810bit\u56fa\u5b9a\u4e3a1111111011\uff0c\u7d27\u8ddf\u5728\u540e\u9762\u7684\u662f\u8fde\u7eed38bit\u76840\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u7ad9\u70b9\u672c\u5730\u5730\u5740\u6765\u8bf4\uff0c\u524d48bit\u603b\u662f\u56fa\u5b9a\u7684\u3002 \u5728\u5730\u5740\u6700\u540e\u7684\u63a5\u53e3ID\u548c\u9ad8\u4f4d48bit\u7279\u5b9a\u524d\u7f00\u4e4b\u95f4\u670916bit\u5b50\u7f51ID\uff0c\u4f9b\u673a\u6784\u5728\u5185\u90e8\u6784\u5efa\u5b50\u7f51\u3002\u7ad9\u70b9\u672c\u5730\u5730\u5740\u53ea\u80fd\u591f\u5728\u672c\u5730\u6216\u8005\u79c1\u6709\u73af\u5883\u4e2d\u4f7f\u7528\uff0c\u4e0d\u80fd\u8bbf\u95ee\u516c\u7f51\u3002 RFC1884\u5b9a\u4e49\u4e86FEC0::/10\u5730\u5740\u5757\u7528\u4e8e\u7ad9\u70b9\u672c\u5730\u5730\u5740,\u8fd9\u4e9b\u5730\u5740\u53ea\u80fd\u591f\u5728\u79c1\u6709\u7684IPv6\u201c\u7ad9\u70b9\u201d\u5185\u4f7f\u7528\uff0c\u4f46\u662f\u7531\u4e8e\u5386\u53f2\u539f\u56e0\uff0c\u7ad9\u70b9\u672c\u5730\u5730\u5740\u7684\u4f7f\u7528\u4e00\u5ea6\u51fa\u73b0\u6df7\u4e71\uff0c\u6700\u7ec8\u5bfc\u81f4\u8be5\u7c7b\u5730\u5740\u4e0d\u518d\u88ab\u4f7f\u7528\u3002 \u552f\u4e00\u672c\u5730\u5730\u5740\uff08Unique Local Address\uff09 \u00b6 \u552f\u4e00\u672c\u5730\u5730\u5740\uff0c\u6982\u5ff5\u4e0a\u76f8\u5f53\u4e8e\u79c1\u6709\u5730\u5740\uff0c\u4ec5\u80fd\u591f\u5728\u672c\u5730\u7f51\u7edc\u4f7f\u7528\uff0c\u5728IPv6 Internet\u4e0a\u4e0d\u53ef\u88ab\u8def\u7531\u3002\u4e0a\u9762\u63d0\u5230\u7684\u7ad9\u70b9\u672c\u5730\u5730\u5740\u7531\u4e8e\u8d77\u521d\u7684\u6807\u51c6\u5b9a\u4e49\u6a21\u7cca\u800c\u88ab\u5f03\u7528\uff0c\u800c\u540eRFC\u53c8\u91cd\u65b0\u5b9a\u4e49\u4e86\u552f\u4e00\u672c\u5730\u5730\u5740\u4ee5\u6ee1\u8db3\u672c\u5730\u73af\u5883\u4e2d\u79c1\u6709IPv6\u5730\u5740\u7684\u4f7f\u7528\u3002 \u5728RFC4193\u4e2d\u6807\u51c6\u5316\u4e86\u8fd9\u79cd\u7528\u6765\u5728\u672c\u5730\u901a\u4fe1\u4e2d\u53d6\u4ee3\u7ad9\u70b9\u672c\u5730\u5355\u64ad\u5730\u5740\u7684\u7c7b\u578b\u3002\u552f\u4e00\u672c\u5730\u5730\u5740\u62e5\u6709\u56fa\u5b9a\u524d\u7f00FC00::/7\uff0c\u5b83\u88ab\u5206\u4e3a\u4e24\u5757\uff0c\u5176\u4e2dFC00::/8\u6682\u672a\u5b9a\u4e49\uff0c\u53e6\u4e00\u5757\u662fFD00::/8\uff0c\u5176\u683c\u5f0f\u5982\u4e0b\uff1a \u552f\u4e00\u672c\u5730\u5730\u5740\u867d\u7136\u53ea\u5728\u6709\u9650\u8303\u56f4\u5185\u6709\u6548\uff0c\u4f46\u4e5f\u5177\u6709\u5168\u7403\u552f\u4e00\u7684\u524d\u7f00\uff08\u4e25\u683c\u6765\u8bf4\uff0c\u5e94\u8be5\u662f\u51e0\u4e4e\u53ef\u80fd\u662f\u5168\u7403\u552f\u4e00\uff09\u3002\u8fd9\u662f\u56e0\u4e3a\uff0c\u5730\u5740\u524d\u7f00\u4e2d\u7684Global ID\u662f\u901a\u8fc7\u4f2a\u968f\u673a\u7684\u65b9\u5f0f\u4ea7\u751f\u7684\uff0cRFC4193\u7ed9\u51fa\u4e86\u4e00\u4e9b\u5173\u4e8e\u4ea7\u751f\u65b9\u5f0f\u7684\u5efa\u8bae\uff0c\u4f8b\u5982\u201cObtain the current time of day in 64-bit NTP format [NTP]\u201d\u7b49 \u3002 \u94fe\u8def\u672c\u5730\u5730\u5740\uff08Link-local Address\uff09 \u00b6 \u94fe\u8def\u672c\u5730\u5730\u5740\u662f\u4e00\u7c7b\u975e\u5e38\u91cd\u8981\u7684\u5730\u5740\uff0c\u5b83\u7684\u6709\u6548\u8303\u56f4\u4ec5\u4ec5\u5728\u6240\u5904\u94fe\u8def\u4e0a\u3002\u5b83\u4ee5FE80::/10\u4e3a\u524d\u7f00\uff0c\u5176\u4e2d\u5de6\u8fb9\u6570\u8d77\u7b2c11-64bit\u4e3a0\uff0c\u5916\u52a0\u4e00\u4e2a64bit\u7684\u63a5\u53e3ID\u3002\u683c\u5f0f\u5982\u4e0b\uff1a IPv6\u4e3b\u673a\u7684\u7f51\u5361\uff0c\u6216\u8005\u7f51\u7edc\u8bbe\u5907\u7684\u63a5\u53e3\u53ef\u4ee5\u62e5\u6709\u591a\u4e2a\u53ef\u805a\u5408\u5168\u5c40\u5355\u64ad\u5730\u5740\uff0c\u4f46\u662f\u8fd9\u4e9b\u63a5\u53e3\u8981\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u7684\u8bdd\uff0c\u5c31\u5fc5\u987b\u6709\u4e00\u4e2a\u94fe\u8def\u8303\u56f4\u5185\u552f\u4e00\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\uff0c\u8be5\u5730\u5740\u7531\u4e8e\u5176\u7a33\u5b9a\u6027\u3001\u94fe\u8def\u552f\u4e00\u6027\uff0c\u88ab\u7528\u4e8e IGP\u90bb\u5c45\u5173\u7cfb\u6784\u5efa\u3001\u81ea\u52a8\u5730\u5740\u914d\u7f6e\u3001\u90bb\u5c45\u53d1\u73b0\u3001\u8def\u7531\u5668\u53d1\u73b0\u7b49\u673a\u5236\u4e2d\u3002 \u6e90\u6216\u76ee\u7684IPv6\u5730\u5740\u4e3a\u94fe\u8def\u672c\u5730\u5730\u5740\u7684\u6570\u636e\u5305\u5c06\u4e0d\u4f1a\u88ab\u8f6c\u53d1\u51fa\u59cb\u53d1\u7684\u94fe\u8def\u4e4b\u5916\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u94fe\u8def\u672c\u5730\u5730\u5740\u7684\u6709\u6548\u8303\u56f4\u4ec5\u4ec5\u662f\u5176\u6240\u5c5e\u7684\u672c\u5730\u94fe\u8def\u3002 \u6bcf\u4e00\u4e2aIPv6\u63a5\u53e3\u90fd\u5fc5\u987b\u5177\u5907\u4e00\u4e2a\u94fe\u8def\u672c\u5730\u5730\u5740\u3002\u534e\u4e3a\u8bbe\u5907\u652f\u6301\u81ea\u52a8\u751f\u6210\u53ca\u624b\u5de5\u6307\u5b9a\u4e24\u79cd\u914d\u7f6e\u65b9\u5f0f\u3002\u5728\u534e\u4e3a\u8def\u7531\u5668\u4e0a\uff0c\u5f53\u63a5\u53e3\u83b7\u5f97\u4e00\u4e2aIPv6\u5168\u7403\u5355\u64ad\u5730\u5740\u540e\uff0c\u8bbe\u5907\u4f1a\u81ea\u52a8\u4e3a\u8be5\u63a5\u53e3\u914d\u7f6e\u94fe\u8def\u672c\u5730\u5730\u5740\u3002 \u5982\u679c\u8bbe\u5907\u63a5\u53e3\u4e0a\u5e76\u672a\u914d\u7f6e\u5168\u5c40\u5355\u64adIPv6\u5730\u5740\uff0c\u5219\u9700\u4f7f\u7528**ipv6 address auto link-local**\u547d\u4ee4\u624b\u5de5\u4f7f\u8bbe\u5907\u81ea\u52a8\u4ea7\u751f\u4e00\u4e2a\u94fe\u8def\u672c\u5730\u5730\u5740\uff0c\u5728\u9632\u706b\u5899\u3001\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u7b49\u8bbe\u5907\u4e0a\uff0c\u8be5\u81ea\u52a8\u751f\u6210\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\u91c7\u7528EUI-64\u89c4\u8303\u7684\u63a5\u53e3ID\u751f\u6210\u3002\u5982\u679c\u8bbe\u5907\u63a5\u53e3\u4e0a\u914d\u7f6e\u4e86\u5168\u5c40\u5355\u64adIPv6\u5730\u5740\uff0c\u5219\u65e0\u9700\u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\u8ba9\u8bbe\u5907\u81ea\u52a8\u751f\u6210\u94fe\u8def\u672c\u5730\u5730\u5740\uff0c\u4e00\u65e6\u63a5\u53e3\u83b7\u5f97IPv6\u5168\u5c40\u5355\u64ad\u5730\u5740\uff0c\u4f1a\u81ea\u52a8\u4ea7\u751f\u94fe\u8def\u672c\u5730\u5730\u5740\u3002\u5173\u4e8eEUI-64\u89c4\u8303\uff0c \u5c06\u5728\u540e\u6587\u4ecb\u7ecd\u3002 \u7279\u6b8a\u7684\u5730\u5740 \u00b6 \u672a\u6307\u5b9a\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u51680\u5730\u5740\u201c::/128\u201d\u6216\u8005\u201c0:0:0:0:0:0/128\u201d \u00b6 \u8be5\u5730\u5740\u4f5c\u4e3a\u67d0\u4e9b\u62a5\u6587\u7684\u6e90\u5730\u5740\uff0c\u6bd4\u5982\u4f5c\u4e3a\u91cd\u590d\u5730\u5740\u68c0\u6d4b\u65f6\u53d1\u9001\u7684\u90bb\u5c45\u8bf7\u6c42\u62a5\u6587\uff08NS\uff09\u7684\u6e90\u5730\u5740\uff0c \u6216\u8005DHCPv6\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\u5ba2\u6237\u7aef\u6240\u53d1\u9001\u7684\u8bf7\u6c42\u62a5\u6587\u7684\u6e90\u5730\u5740\u3002 \u56de\u73af\u5730\u57400:0:0:0:0:1/128\uff0c\u6216\u8005::1/128 \u00b6 \u7528\u4e8e\u672c\u5730\u56de\u73af\uff0c\u53d1\u5f80::/1\u7684\u6570\u636e\u5305\u5b9e\u9645\u4e0a\u5c31\u662f\u53d1\u7ed9\u672c\u5730\uff0c\u53ef\u7528\u4e8e\u672c\u5730\u534f\u8bae\u6808\u56de\u73af\u6d4b\u8bd5\u3002 IPv4\u517c\u5bb9\u5730\u5740 \u00b6 \u5728\u8fc7\u6e21\u6280\u672f\u4e2d\u4f1a\u4f7f\u7528\u5230\u4e00\u4e9b\u5305\u542bIPv4\u5730\u5740\u7684IPv6\u5730\u5740\uff0c\u4e3a\u4e86\u8ba9IPv4\u5730\u5740\u663e\u5f97\u66f4\u52a0\u7a81\u51fa\u4e00\u4e9b\uff0c\u5b9a\u4e49\u4e86\u5185\u5d4cIPv4\u5730\u5740\u7684IPv6\u5730\u5740\u683c\u5f0f\u3002\u5185\u5d4cIPv4\u5730\u5740\u683c\u5f0f\u662f\u8fc7\u6e21\u673a\u5236\u4e2d\u4f7f\u7528\u7684\u4e00\u79cd\u7279\u6b8a\u8868\u793a\u65b9\u6cd5\u3002\u5728\u8fd9\u79cd \u8868\u793a\u65b9\u6cd5\u4e2d\uff0cIPv6\u5730\u5740\u7684\u90e8\u5206\u4f7f\u7528\u5341\u516d\u8fdb\u5236\u8868\u793a\uff0cIPv4\u5730\u5740\u90e8\u5206\u53ef\u7528\u5341\u8fdb\u5236\u683c\u5f0f\u3002\u4f8b\u5982\uff1a IPv4\u517c\u5bb9\u5730\u5740\u7528\u4e8e\u8fc7\u6e21\u673a\u5236\uff0c\u5982\u81ea\u52a8IPv4\u517c\u5bb9\u96a7\u9053\u53caNAT-PT\u7b49\u3002\u8be5\u5730\u5740\u5df2\u7ecf\u51e0\u4e4e\u4e0d\u518d\u4f7f\u7528\u3002 \u63a5\u53e3 ID \u00b6 \u63a5\u53e3ID\u7684\u6982\u5ff5 \u00b6 \u63a5\u53e3ID\uff08Interface Identification\uff0c\u63a5\u53e3\u6807\u8bc6\uff09\u7684\u957f\u5ea6\u4e3a64bit\uff0c\u7528\u4e8e\u6807\u8bc6\u94fe\u8def\u4e0a\u7684\u63a5\u53e3\u3002\u5728\u6bcf\u6761\u94fe\u8def\u4e0a\uff0c \u63a5\u53e3ID\u5fc5\u987b\u552f\u4e00\u3002\u63a5\u53e3ID\u6709\u8bb8\u591a\u7528\u9014\uff0c\u6700\u5e38\u89c1\u7684\u7528\u4e8e\u5c31\u662f\u9ecf\u8d34\u5728\u94fe\u8def\u672c\u5730\u5730\u5740\u524d\u7f00\u540e\u9762\uff0c\u5f62\u6210\u63a5\u53e3\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\u3002\u6216\u8005\u5728\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u4e2d\uff0c\u9ecf\u8d34\u5728\u83b7\u53d6\u5230\u7684IPv6\u5168\u5c40\u5355\u64ad\u5730\u5740\u524d\u7f00\u540e\u9762\uff0c\u6784\u6210\u63a5\u53e3\u7684\u5168\u5c40\u5355\u64ad\u5730\u5740\u3002 \u63a5\u53e3ID\u7684\u8bbe\u7f6e \u00b6 \u63a5\u53e3ID\u53ef\u901a\u8fc73\u79cd\u65b9\u6cd5\u751f\u6210\uff1a\u624b\u5de5\u914d\u7f6e\u3001\u7cfb\u7edf\u81ea\u52a8\u751f\u6210\uff0c\u6216\u57fa\u4e8eIEEE EUI-64\u89c4\u8303\u751f\u6210\u3002\u5176\u4e2d\uff0c\u57fa\u4e8eIEEE EUI-64\u89c4\u8303\u81ea\u52a8\u751f\u6210\u7684\u65b9\u5f0f\u6700\u4e3a\u5e38\u7528\u3002EUI-64\u89c4\u8303\u5c06\u63a5\u53e3\u7684MAC\u5730\u5740\u8f6c\u6362\u4e3aIPv6\u63a5\u53e3ID\u3002 \u624b\u5de5\u4e3a\u63a5\u53e3\u914d\u7f6e\u63a5\u53e3ID\u3002 \u53ef\u4ee5\u6839\u636eIEEE\u7684EUI-64\u89c4\u8303\u5c06\u63a5\u53e3\u768448bit MAC\u5730\u5740\u8f6c\u5316\u4e3a64bit\u7684\u63a5\u53e3ID\u3002 \u67d0\u4e9b\u7cfb\u7edf\u652f\u6301\u81ea\u52a8\u751f\u6210\u968f\u673a\u63a5\u53e3ID\uff08\u4f8b\u5982Windows7\uff09\u3002 \u901a\u8fc7EUI-64\u89c4\u8303\u6839\u636eMAC\u5730\u5740\u751f\u6210\u63a5\u53e3ID \u00b6 \u5047\u8bbe\u4e00\u4e2a\u63a5\u53e3\u7684MAC\u5730\u5740\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u90a3\u4e48\u91c7\u7528EUI-64\u89c4\u8303\uff0c\u63a5\u53e3\u53ef\u6839\u636e\u8be5MAC\u5730\u5740\u8ba1\u7b97\u5f97\u5230\u63a5\u53e3ID\uff0c \u7531\u4e8eMAC\u5730\u5740\u5168\u5c40\u552f\u4e00\uff0c\u56e0\u6b64\u8be5\u63a5\u53e3ID\u4e5f\u76f8\u5e94\u7684\u5177\u5907\u5168\u5c40\u552f\u4e00\u6027\u3002\u8ba1\u7b97\u8fc7\u7a0b\u5982\u4e0b\u3002 \u5c0648bit\u7684MAC\u5730\u5740\u5bf9\u534a\u5288\u5f00\uff0c\u7136\u540e\u63d2\u5165\u201cFFFE\u201d\uff0c\u518d\u5bf9\u4ece\u5de6\u6570\u8d77\u7684\u7b2c7\u4f4d\uff0c\u4e5f\u5c31\u662fU/L\u4f4d\u53d6\u53cd\uff0c\u5373\u53ef\u5f97 \u5230\u5bf9\u5e94\u7684\u63a5\u53e3ID\u3002 \u5728\u5355\u64adMAC\u5730\u5740\u4e2d\uff0c\u7b2c1\u4e2aByte\u7684\u7b2c7bit\u662fU/L\uff08Universal/Local\uff0c\u4e5f\u79f0\u4e3aG/L\uff0c\u5176\u4e2dG\u8868\u793aGlobal\uff09\u4f4d\uff0c \u7528\u4e8e\u8868\u793aMAC\u5730\u5740\u7684\u552f\u4e00\u6027\u3002\u5982\u679cU/L=0\uff0c\u5219\u8be5MAC\u5730\u5740\u662f\u5168\u5c40\u7ba1\u7406\u5730\u5740\uff0c\u662f\u7531\u62e5\u6709OUI\u7684\u5382\u5546\u6240\u5206\u914d\u7684MAC\u5730\u5740\uff1b\u5982\u679cU/L=1\uff0c\u5219\u662f\u672c\u5730\u7ba1\u7406\u5730\u5740\uff0c\u662f\u7f51\u7edc\u7ba1\u7406\u5458\u57fa\u4e8e\u4e1a\u52a1\u76ee\u7684\u81ea\u5b9a\u4e49\u7684MAC\u5730\u5740\u3002 \u800c\u5728\u5728EUI-64\u63a5\u53e3ID\u4e2d\uff0c\u7b2c7bit\u7684\u542b\u4e49\u4e0eMAC\u5730\u5740\u6b63\u597d\u76f8\u53cd\uff0c0\u8868\u793a\u672c\u5730\u7ba1\u7406\uff0c1\u8868\u793a\u5168\u7403\u7ba1\u7406\uff0c\u6240\u4ee5\u4f7f\u7528EUI-64\u683c\u5f0f\u7684\u63a5\u53e3ID\uff0cU/L\u4f4d\u4e3a1\uff0c\u5219\u5730\u5740\u662f\u5168\u7403\u552f\u4e00\u7684\uff0c\u5982\u679c\u4e3a0\uff0c\u5219\u4e3a\u672c\u5730\u552f\u4e00\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u8981\u53cd\u8f6c\u8be5\u4f4d\u3002 \u7ec4\u64ad\u5730\u5740 \u00b6 \u7ec4\u64adIPv6\u5730\u5740\u7ed3\u6784 \u00b6 \u4e00\u4e2aIPv6\u7ec4\u64ad\u5730\u5740\u7531\u524d\u7f00\uff08FF00::/8\uff09\u3001\u6807\u5fd7\uff08Flag\uff09\u5b57\u6bb5\u3001\u8303\u56f4\uff08Scope\uff09\u5b57\u6bb5\u4ee5\u53ca\u7ec4\u64ad\u7ec4ID\uff08Group ID\uff094\u4e2a\u90e8\u5206\u7ec4\u6210\u3002 \u77e5\u540d\u7684\u7ec4\u64adIPv6\u5730\u5740 \u00b6 \u4e00\u4e9b\u5e38\u89c1\u7684\u77e5\u540d\u7ec4\u64adIPv6\u5730\u5740\uff1a FF02:0:0:0:0:0:0:1 All Nodes Address FF02:0:0:0:0:0:0:2 All Routers Address FF02:0:0:0:0:0:0:4 DVMRP Routers FF02:0:0:0:0:0:0:5 OSPFIGP FF02:0:0:0:0:0:0:6 OSPFIGP Designated Routers FF02:0:0:0:0:0:0:9 RIP Routers FF02:0:0:0:0:0:0:D All PIM Routers FF02:0:0:0:0:0:0:12 VRRP FF02:0:0:0:0:0:0:16 All MLDv2-capable routers IPv6\u7ec4\u64ad\u5730\u5740\u7684MAC\u5730\u5740\u6620\u5c04 \u00b6 \u5728\u4ee5\u592a\u7f51\u73af\u5883\u4e2d\uff0c\u4e00\u4e2a\u7ec4\u64adIPv6\u62a5\u6587\u5fc5\u987b\u6267\u884c\u4ee5\u592a\u7f51\u5c01\u88c5\u3002\u7ec4\u64adIPv6\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\u662f\u7ec4\u64adIPv6\u5730\u5740\uff0c\u800c\u76ee\u7684MAC\u5730\u5740\u5219\u5fc5\u987b\u662f\u7ec4\u64adMAC\u5730\u5740\uff0c\u5e76\u4e14\u8be5\u5730\u5740\u5fc5\u987b\u4e0e\u7ec4\u64adIPv6\u5730\u5740\u5bf9\u5e94\u3002\u4e0e\u7ec4\u64adIPv6\u5730\u5740\u5bf9\u5e94\u7684\u7ec4\u64adMAC\u5730\u5740\uff0c\u5176\u6620\u5c04\u5173\u7cfb\u5982\u4e0a\u56fe\u6240\u793a\u300233-33\u662f\u4e13\u95e8\u4e3aIPv6\u7ec4\u64ad\u9884\u7559\u7684MAC\u5730\u5740\u524d\u7f00\uff0cMAC \u5730\u5740\u7684\u540e32bit\u4ece\u5bf9\u5e94\u7684\u7ec4\u64adIPv6\u5730\u5740\u7684\u540e32bit\u62f7\u8d1d\u800c\u6765\u3002 \u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740 \u00b6 \u5728IPv6\u7ec4\u64ad\u5730\u5740\u4e2d\uff0c\u6709\u4e00\u79cd\u7279\u522b\u7684\u7ec4\u64ad\u5730\u5740\uff0c\u53eb\u505a\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\uff08Solicited-Node Multicast Address\uff09\u3002\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u57fa\u4e8e\u8282\u70b9\u7684\u5355\u64ad\u6216\u4efb\u64ad\u5730\u5740\u751f\u6210\u3002 \u5f53\u4e00\u4e2a\u8282\u70b9\u5177\u6709\u4e86\u5355\u64ad\u6216\u4efb\u64ad\u5730\u5740\uff0c\u5c31\u4f1a\u81ea\u52a8\u52a0\u5165\u4e0e\u4e4b\u76f8\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u7ec4\u3002\u4e00\u4e2a\u5355\u64ad\u5730\u5740\u6216\u4efb\u64ad\u5730\u5740\u5bf9\u5e94\u4e00\u4e2a\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u7ec4\u3002\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u7ec4\u91c7\u7528\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u6807\u8bc6\uff0c\u8be5\u5730\u5740\u4e3b\u8981\u7528\u4e8e\u5730\u5740\u89e3\u6790\u3001\u90bb\u5c45\u53d1\u73b0\u673a\u5236\u548c\u5730\u5740\u91cd\u590d\u68c0\u6d4b\u7b49\u529f\u80fd\u3002 \u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u7531\u56fa\u5b9a\u524d\u7f00FF02::1:FF00:0/104\u548c\u5bf9\u5e94IPv6\u5730\u5740\u7684\u6700\u540e24bit\u7ec4\u6210\u3002\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u7684\u6709\u6548\u8303\u56f4\u4e3a\u672c\u5730\u94fe\u8def\u8303\u56f4\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a \u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u7684\u4f5c\u7528\u7a76\u7adf\u662f\u4ec0\u4e48\u5462\uff1f\u4e3e\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u56de\u987e\u4e00\u4e0bIPv4\u4e2d\u7684ARP\uff0c\u8fd9\u4e2a\u534f\u8bae\u4e3b\u8981\u7528\u4e8e\u5730\u5740\u89e3\u6790\uff0c\u5f53\u8bbe\u5907\u9700\u8981\u89e3\u6790\u67d0\u4e2aIP\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\u65f6\uff0c\u5c31\u4f1a\u53d1\u9001\u4e00\u4e2a\u5e7f\u64adARP Request\u5e27\uff0c\u4e4b\u6240\u4ee5\u8981\u53d1\u9001\u5e7f\u64ad\u5e27\uff0c\u662f\u56e0\u4e3a\u5b83\u8981\u786e\u4fdd\u5e7f\u64ad\u57df\u5185\u6240\u6709\u8282\u70b9\u90fd\u80fd\u6536\u5230\uff08\u5b83\u4e0d\u77e5\u9053\u76ee\u6807\u8282\u70b9\u7684\u5177\u4f53\u4f4d\u7f6e\uff09\u3002\u7136\u800c\u9664\u4e86\u76ee\u6807\u8282\u70b9\u4e4b\u5916\uff0c\u8be5\u5e27\u5bf9\u4e8e\u5176\u4ed6\u8282\u70b9\u800c\u8a00\u662f\u4e2a\u56f0\u6270\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e0d\u5f97\u4e0d\u53bb\u89e3\u6790\u8fd9\u4e2a\u5e27\uff08\u4ece\u6570\u636e\u94fe\u8def\u5c42\u5c01\u88c5\u4e00\u76f4\u89e3\u6790\u5230ARP\u8f7d\u8377\uff09\uff0c\u8fd9\u4e2a\u52a8\u4f5c\u5c06\u4f1a\u6d6a\u8d39\u8bbe\u5907\u7684\u8d44\u6e90\u3002 \u5728IPv6\u4e2d\uff0cARP\u53ca\u5e7f\u64ad\u90fd\u88ab\u53d6\u6d88\uff0c\u5f53\u8bbe\u5907\u9700\u8981\u8bf7\u6c42\u67d0\u4e2aIPv6\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\u65f6\uff0c\u8bbe\u5907\u4f9d\u7136\u9700\u8981\u53d1\u9001\u8bf7 \u6c42\u62a5\u6587\uff0c\u4f46\u662f\u8be5\u62a5\u6587\u662f\u4e00\u4e2a\u7ec4\u64ad\u62a5\u6587\uff0c\u5176\u76ee\u7684IPv6\u5730\u5740\u662f\u76ee\u6807IPv6\u5355\u64ad\u5730\u5740\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\uff0c\u800c \u76ee\u7684MAC\u5730\u5740\u5219\u662f\u8be5\u7ec4\u64ad\u5730\u5740\u5bf9\u5e94\u7684\u7ec4\u64adMAC\u5730\u5740\u3002\u7531\u4e8e\u53ea\u6709\u76ee\u6807\u8282\u70b9\u624d\u4f1a\u4fa6\u542c\u8fd9\u4e2a\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\uff0c \u56e0\u6b64\u5f53\u5176\u4ed6\u8bbe\u5907\u6536\u5230\u8be5\u5e27\u65f6\uff0c\u8fd9\u4e9b\u8bbe\u5907\u53ef\u4ee5\u901a\u8fc7\u76ee\u7684MAC\u5730\u5740\u3001\u5728\u7f51\u5361\u5c42\u9762\u5c31\u5224\u65ad\u51fa\u4e0d\u9700\u8981\u5904\u7406\u5b83\u5e76\u5c06\u5e27 \u4e22\u5f03\u3002 \u57fa\u7840\u914d\u7f6e \u57fa\u7840\u914d\u7f6e\u547d\u4ee4 \u00b6 \u5168\u5c40\u6fc0\u6d3b\u8bbe\u5907\u7684IPv6\u529f\u80fd\uff1a \u00b6 [Quidway] ipv6 \u5728\u7f51\u7edc\u8bbe\u5907\u4e0a\u8fdb\u884cIPv6\u7684\u5404\u79cd\u914d\u7f6e\u4e4b\u524d\uff0c\u5fc5\u987b\u9996\u5148\u5728\u7cfb\u7edf\u89c6\u56fe\u4e0b\u6fc0\u6d3b\u8bbe\u5907\u7684IPv6\u529f\u80fd\u3002 \u6fc0\u6d3b\u8bbe\u5907\u63a5\u53e3\u7684IPv6\u529f\u80fd\uff1a \u00b6 [Quidway-GigabitEthernet0/0/0] ipv6 enable \u5728\u63a5\u53e3\u4e0a\u8fdb\u884cIPv6\u7684\u5404\u79cd\u914d\u7f6e\u4e4b\u524d\uff0c\u5fc5\u987b\u9996\u5148\u5728\u63a5\u53e3\u4e0a\u6fc0\u6d3bIPv6\u529f\u80fd\u3002 \u914d\u7f6e\u8bbe\u5907\u63a5\u53e3\u7684IPv6\u5168\u5c40\u5355\u64ad\u5730\u5740\uff1a \u00b6 [Quidway-GigabitEthernet0/0/0] ipv6 address 2001::1 64 \u4e0a\u9762\u7684\u547d\u4ee4\u7528\u4e8e\u4e3a\u63a5\u53e3\u6307\u5b9a\u5177\u4f53\u7684IPv6\u5730\u5740\uff0c\u5176\u4e2d\u5305\u62ec\u524d\u7f00\u53ca\u63a5\u53e3ID\u3002\u5f53\u7136\uff0c\u4e5f\u53ef\u4e3a\u63a5\u53e3\u6307\u5b9a\u5177\u4f53\u7684 IPv6\u524d\u7f00\uff0c\u800c\u63a5\u53e3ID\u5219\u8ba9\u8bbe\u5907\u901a\u8fc7EUI-64\u89c4\u8303\u81ea\u52a8\u4ea7\u751f\uff0c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff1a [Quidway-GigabitEthernet0/0/0] ipv6 address 2001:: 64 eui-64 \u914d\u7f6e\u8bbe\u5907\u63a5\u53e3\u7684IPv6\u94fe\u8def\u672c\u5730\u5730\u5740\uff1a \u00b6 \u5f53\u4e00\u4e2a\u63a5\u53e3\u6fc0\u6d3bIPv6\u540e\uff0c\u8be5\u63a5\u53e3\u6ca1\u6709\u4efb\u4f55IPv6\u5730\u5740\uff0c\u4e3a\u4e86\u8ba9\u63a5\u53e3\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\uff0c\u9700\u8981\u4e3a\u63a5\u53e3\u914d\u7f6eIPv6\u5730 \u5740\uff0c\u5f53\u7528\u6237\u4e3a\u63a5\u53e3\u914d\u7f6e\u5168\u5c40IPv6\u5355\u64ad\u5730\u5740\u540e\uff0c\u63a5\u53e3\u5c06\u81ea\u52a8\u914d\u7f6e\u94fe\u8def\u672c\u5730\u5730\u5740\uff0c\u65e0\u9700\u4eba\u4e3a\u5e72\u9884\u3002 \u4f46\u662f\u5982\u679c\u63a5\u53e3\u6ca1\u6709\u83b7\u5f97\u4efb\u4f55IPv6\u5355\u64ad\u5730\u5740\uff0c\u800c\u6211\u4eec\u53c8\u5e0c\u671b\u63a5\u53e3\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u90a3\u4e48\u9700\u9009\u7528\u4e0a\u9762\u4e24\u6761\u547d\u4ee4\u4e2d\u7684\u4e00\u6761\u8fdb\u884c\u94fe\u8def\u672c\u5730\u5730\u5740\u7684\u914d\u7f6e\u3002 \u5b9e\u9a8c 1\uff1aIPv6 \u5165\u95e8\u5b9e\u9a8c \u00b6 \u62d3\u6251\u53ca\u9700\u6c42 \u00b6 \u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\uff0cPC\u7684\u9ed8\u8ba4\u7f51\u5173\u4e3aSwitch\uff0c\u5b8c\u6210\u6240\u6709\u8bbe\u5907\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC\u80fd\u591fping\u901aRouter\u7684 Loopback0\u63a5\u53e3\u3002 \u914d\u7f6e\u53ca\u5b9e\u73b0 \u00b6 Switch\u7684\u914d\u7f6e\u5982\u4e0b\uff1a Router\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PC\u7684\u7f51\u5361\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cPC\u5373\u53efping\u901a2001:2222::1\u3002\u6b64\u65f6\u770b\u4e00\u4e0b\u8def\u7531\u5668\u7684\u76f8\u5173\u53c2\u6570\uff1a [Router] display ipv6 interface brief *down: administratively down (l): loopback (s): spoofing Interface Physical Protocol GigabitEthernet0/0/0 [IPv6 Address] 2012::2 up up LoopBack0 up up(s) [IPv6 Address] 2001:2222::1 \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fRouter\u7684IPv6\u63a5\u53e3\u6458\u8981\uff0c\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u914d\u7f6e\u7684\u4e24\u4e2a\u63a5\u53e3\u7684IPv6\u5730\u5740\u3002 \u53ef\u4ee5\u8fdb\u4e00\u6b65\u67e5\u770b\u67d0\u4e2a\u63a5\u53e3\u7684\u8be6\u7ec6\u53c2\u6570\uff1a \u518d\u67e5\u770b\u4e00\u4e0b\u8def\u7531\u5668\u7684IPv6\u8def\u7531\u8868\u4e2d\u7684\u9759\u6001\u8def\u7531\uff1a \u5b9e\u9a8c 2\uff1a\u65e0\u72b6\u6001\u5730\u5740\u81ea\u52a8\u914d\u7f6e \u00b6 \u62d3\u6251\u53ca\u9700\u6c42 \u00b6 \u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5176\u4e2dPC\u7684\u9ed8\u8ba4\u7f51\u5173\u4e3aSwitch\u3002PC\u901a\u8fc7\u65e0\u72b6\u6001\u5730\u5740\u81ea\u52a8\u914d\u7f6e\u7684\u65b9\u5f0f\u83b7\u5f97\u5176\u5168\u5c40\u5355\u64adIPv6\u5730\u5740\u53ca\u9ed8\u8ba4\u7f51\u5173\u5730\u5740\u3002\u5b8c\u6210\u6240\u6709\u8bbe\u5907\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC\u80fd\u591fping\u901aRouter\u7684Loopback0\u63a5\u53e3\u3002 \u914d\u7f6e\u53ca\u5b9e\u73b0 \u00b6 Router\u7684\u914d\u7f6e\u5982\u4e0b\uff1a Switch\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PC\u7f51\u5361\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u7531\u4e8eRouter\u5f00\u542f\u4e86RA\uff08Router Advertisement\uff0c\u8def\u7531\u5668\u901a\u544a\uff09\u62a5\u6587\u7684\u901a\u544a\u529f\u80fd\uff0c\u56e0\u6b64\u4f1a\u4ecevlanif10\u63a5\u53e3\u53d1\u9001RA\u62a5\u6587\uff0c\u800cRA\u62a5\u6587\u4e2d\u5305\u542b\u4e86vlanif10\u7684IPv6\u5168\u5c40\u5355\u64ad\u5730\u5740\u524d\u7f00\u4fe1\u606f\uff082001::/64\uff09\uff0c PC\u7f51\u5361\u5728\u63a5\u6536\u5230\u8fd9\u4e2a\u4fe1\u606f\u540e\uff0c\u5c31\u53ef\u4ee5\u6839\u636e\u524d\u7f00\u4fe1\u606f\u518d\u52a0\u4e0a\u81ea\u5df1\u7f51\u5361\u7684\u6807\u8bc6\u7b26\u6784\u6210IPv6\u5168\u5c40\u5355\u64ad\u5730\u5740\u3002 PC\u7f51\u5361\u83b7\u53d6\u7684\u5730\u5740\uff1a TCPIP \u4e0a \u7684 NetBIOS . . . . . . . : \u5df2 \u542f \u7528 \u5982\u6b64\u4e00\u6765PC\u5c31\u80fd\u591fping\u901a2001:2222::1\u4e86\u3002 ICMPv6 ICMPv6 \u6982\u8ff0 \u00b6 ICMPv6\u662fIPv6\u7684\u57fa\u7840\u534f\u8bae\u4e4b\u4e00\u3002\u5728IPv6\u4e2d\uff0cICMPv6\u9664\u4e86\u63d0\u4f9bICMPv4\u7684\u5bf9\u5e94\u529f\u80fd\u4e4b\u5916\uff0c\u8fd8\u662f\u5176\u5b83\u4e00\u4e9b\u529f\u80fd\u7684\u57fa\u7840\uff0c\u5982\u90bb\u5c45\u53d1\u73b0\u3001\u65e0\u72b6\u6001\u5730\u5740\u914d\u7f6e\u3001\u91cd\u590d\u5730\u5740\u68c0\u6d4b\u3001PMTU\u53d1\u73b0\u7b49\u3002 ICMPv6\u62a5\u6587\u6709\u4e24\u79cd\uff1a\u5dee\u9519\u62a5\u6587\u53ca\u4fe1\u606f\u62a5\u6587\u3002 IANA\u5728IPv6\u5305\u5934\u7684NextHeader\u5b57\u6bb5\u4e2d\uff0c\u4e3aICMPv6\u5206\u914d\u7684\u503c\u662f58\u3002\u5982\u679c\u62a5\u6587\u5b58\u5728IPv6\u6269\u5c55\u5305\u5934\uff0c\u90a3\u4e48ICMPv6 \u8f7d\u8377\u4e0eTCP\u3001UDP\u8f7d\u8377\u4e00\u6837\uff0c\u5fc5\u987b\u4f4d\u4e8e\u6240\u6709\u6269\u5c55\u5305\u5934\u4e4b\u540e\u3002\u5728IPv6\u5305\u5934\u4e2d\uff0cNextHead=58\u5219\u8868\u793aIPv6\u5305\u5934\u540e\u5c01\u88c5\u7740\u4e00\u4e2aICMPv6\u62a5\u6587\u3002 \u5728ICMPv6\u7684\u62a5\u6587\u5934\u90e8\u4e2d\uff0cType\u5b57\u6bb5\u7528\u4e8e\u6307\u793a\u62a5\u6587\u7c7b\u578b\uff0cCode\u5b57\u6bb5\u7528\u4e8e\u8fdb\u4e00\u6b65\u6307\u793a\u62a5\u6587\u7684\u4f5c\u7528\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684ICMPv6\u62a5\u6587\u7c7b\u578b\uff1a \u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u62a5\u6587\uff0c\u4e3aNDP\u800c\u5b9a\u4e49\uff0c\u540e\u7eed\u4ecb\u7ecd\u3002 NDP \u00b6 NDP\u6982\u8ff0 \u00b6 NDP\uff08Neighbor Discovery Protocol\uff0c\u90bb\u5c45\u53d1\u73b0\u534f\u8bae\uff09\u5728RFC2462\u53caRFC4861\u4e2d\u5b9a\u4e49\u3002NDP\u5b9e\u73b0\u4e86IPv6\u4e2d\u8bf8\u591a\u91cd\u8981\u673a\u5236\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a **\u8def\u7531\u5668\u53d1\u73b0\uff1a**\u8be5\u529f\u80fd\u5e2e\u52a9\u8bbe\u5907\u53d1\u73b0\u94fe\u8def\u4e0a\u7684\u8def\u7531\u5668\uff0c\u5e76\u83b7\u5f97\u8def\u7531\u5668\u901a\u544a\u7684\u4fe1\u606f\u3002 **\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\uff1a**\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u662fIPv6\u7684\u4e00\u4e2a\u4eae\u70b9\u529f\u80fd\uff0c\u5b83\u4f7f\u5f97IPv6\u4e3b\u673a\u80fd\u591f\u975e\u5e38\u4fbf\u6377\u5730\u8fde\u5165\u5230IPv6 \u7f51\u7edc\u4e2d\uff0c\u5373\u63d2\u5373\u7528\uff0c\u65e0\u9700\u624b\u5de5\u914d\u7f6e\u7e41\u5197\u7684IPv6\u5730\u5740\uff0c\u65e0\u9700\u90e8\u7f72\u5e94\u7528\u670d\u52a1\u5668\uff08\u4f8b\u5982DHCP\u670d\u52a1\u5668\uff09\u4e3a\u4e3b\u673a\u5206\u53d1\u5730\u5740\u3002\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u673a\u5236\u4f7f\u7528\u5230\u4e86ICMPv6\u4e2d\u7684\u8def\u7531\u5668\u8bf7\u6c42\u62a5\u6587\uff08RS\uff09\u53ca\u8def\u7531\u5668\u901a\u544a\u62a5\u6587\uff08RA\uff09\u3002 **\u91cd\u590d\u5730\u5740\u68c0\u6d4b\uff1a**\u91cd\u590d\u5730\u5740\u68c0\u6d4b\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u673a\u5236\uff0c\u4e00\u4e2aIPv6\u5730\u5740\u5fc5\u987b\u7ecf\u5386\u91cd\u590d\u5730\u5740\u68c0\u6d4b\u5e76\u901a\u8fc7\u68c0\u6d4b\u4e4b\u540e\u624d\u80fd\u591f\u542f\u7528\u3002\u91cd\u590d\u5730\u5740\u68c0\u6d4b\u7528\u4e8e\u53d1\u73b0\u94fe\u8def\u4e0a\u662f\u5426\u5b58\u5728IPv6\u5730\u5740\u51b2\u7a81\u3002 **\u5730\u5740\u89e3\u6790\uff1a**\u5728IPv6\u4e2d\uff0c\u53d6\u6d88\u4e86IPv4\u4e2d\u7684ARP\u534f\u8bae\uff0c\u4f7f\u7528NDP\u6240\u5b9a\u4e49\u7684\u90bb\u5c45\u8bf7\u6c42\u62a5\u6587\uff08NS\uff09\u53ca\u90bb\u5c45\u901a\u544a\u62a5\u6587\uff08NA\uff09\u6765\u5b9e\u73b0\u5730\u5740\u89e3\u6790\u529f\u80fd\u3002 **\u90bb\u5c45\u7684\u72b6\u6001\u8ddf\u8e2a\uff1a**IPv6\u5b9a\u4e49\u4e86\u8282\u70b9\u4e4b\u95f4\u90bb\u5c45\u7684\u72b6\u6001\u673a\uff0c\u540c\u65f6\u8fd8\u7ef4\u62a4\u90bb\u5c45IPv6\u5730\u5740\u4e0e\u4e8c\u5c42\u5730\u5740\u5982MAC\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u76f8\u5e94\u7684\u8868\u9879\u5b58\u50a8\u4e8e\u8bbe\u5907\u7684IPv6\u90bb\u5c45\u8868\u4e2d\u3002 **\u524d\u7f00\u91cd\u7f16\u5740\uff1a**IPv6\u8def\u7531\u5668\u80fd\u591f\u901a\u8fc7ICMPv6\u7684\u8def\u7531\u5668\u901a\u544a\u62a5\u6587\uff08RA\uff09\u5411\u94fe\u8def\u4e0a\u901a\u544aIPv6\u524d\u7f00\u4fe1\u606f\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u4e3b\u673a\u80fd\u591f\u4eceRA\u4e2d\u6240\u5305\u542b\u7684\u524d\u7f00\u4fe1\u606f\u81ea\u52a8\u6784\u5efa\u81ea\u5df1\u7684IPv6\u5355\u64ad\u5730\u5740\u3002\u5f53\u7136\u8fd9\u4e9b\u81ea\u52a8\u83b7\u53d6\u7684\u5730\u5740\u662f\u6709\u751f\u5b58\u65f6\u95f4\u7684\u3002\u901a\u8fc7\u5728RA\u4e2d\u901a\u544aIPv6\u5730\u5740\u524d\u7f00\uff0c\u5e76\u4e14\u7075\u6d3b\u5730\u8bbe\u5b9a\u5730\u5740\u7684\u751f\u5b58\u65f6\u95f4\uff0c\u80fd\u591f\u5b9e\u73b0\u7f51\u7edc\u4e2dIPv6\u65b0\u3001\u8001\u524d\u7f00\u7684\u5e73\u6ed1\u8fc7\u6e21\uff0c\u800c\u65e0\u9700\u5728\u4e3b\u673a\u7ec8\u7aef\u4e0a\u6d88\u8017\u5927\u91cf\u7684\u624b\u5de5\u52b3\u52a8\u91cd\u65b0\u914d\u7f6e\u5730\u5740\u3002 **\u8def\u7531\u5668\u91cd\u5b9a\u5411\uff1a**\u8def\u7531\u5668\u5411\u4e00\u4e2aIPv6\u8282\u70b9\u53d1\u9001ICMPv6\u7684\u91cd\u5b9a\u5411\u62a5\u6587\uff0c\u901a\u77e5\u5b83\u5728\u76f8\u540c\u7684\u672c\u5730\u94fe\u8def\u4e0a\u6709\u4e00\u4e2a\u66f4\u597d\u7684\u3001\u5230\u8fbe\u76ee\u7684\u5730\u7684\u4e0b\u4e00\u8df3\u3002IPv6\u4e2d\u7684\u91cd\u5b9a\u5411\u529f\u80fd\u4e0eIPv4\u4e2d\u7684\u662f\u4e00\u6837\u7684\u3002 NDP\u4f7f\u7528ICMPv6\u7684\u76f8\u5173\u62a5\u6587\u5b9e\u73b0\u5176\u529f\u80fd\uff1a \u5730\u5740\u89e3\u6790 \u00b6 \u4e24\u4e2a\u8282\u70b9\u4e4b\u95f4\u8981\u8fdb\u884cIP\u901a\u4fe1\uff0c\u9664\u4e86\u9700\u77e5\u6653\u53cc\u65b9\u7684\u7f51\u7edc\u5730\u5740\uff0c\u8fd8\u9700\u8981\u77e5\u9053\u7f51\u7edc\u5730\u5740\u5bf9\u5e94\u7684\u6570\u636e\u94fe\u8def\u5c42\u5730\u5740\u4ee5\u4fbf\u7ec4\u88c5\u6570\u636e\u5e27\uff0c\u5728\u4ee5\u592a\u7f51\u73af\u5883\u4e2d\uff0c\u8fd9\u4e2a\u6570\u636e\u94fe\u8def\u5c42\u5730\u5740\u5c31\u662fMAC\u5730\u5740\u3002\u5728IPv4\u4e2dARP\u7528\u4e8e\u5e2e\u52a9\u8282\u70b9\u83b7\u53d6\u76ee\u6807 IP\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\u3002ARP\u4f7f\u7528\u5e7f\u64ad\u7684\u65b9\u5f0f\u53d1\u9001Request\u62a5\u6587\u4ee5\u4fbf\u8bf7\u6c42\u76ee\u6807\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\uff0c\u8fd9\u5b9e\u9645\u4e0a\u9020\u6210\u4e86\u94fe\u8def\u4e0a\u5176\u4ed6\u8282\u70b9\u7684\u989d\u5916\u8d1f\u62c5\u3002 NDP\u4f7f\u7528Type 135\uff08\u90bb\u5c45\u8bf7\u6c42\u62a5\u6587NS\uff09\u53caType 136\uff08\u90bb\u5c45\u901a\u544a\u62a5\u6587NA\uff09\u6765\u66ff\u4ee3ARP\u5b9e\u73b0\u5730\u5740\u89e3\u6790\u3002\u5177\u4f53\u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cPC1\u8981\u8bf7\u6c42PC2\u76842001::2\u8fd9\u4e2a\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\uff0cPC1\u5c06\u53d1\u9001\u4e00\u4e2aNS\u62a5\u6587\u8fbe\u5230\u8fd9\u4e2a\u76ee\u7684\u3002\u8fd9\u4e2aNS\u62a5\u6587\u7684\u6e90\u5730\u5740\u662f2001::1\uff0c\u76ee\u7684\u5730\u5740\u5219\u662f2001::2\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u3002 \u7136\u540eIPv6\u6570\u636e\u5305\u53c8\u88ab\u5c01\u88c5\u4e0a\u6570\u636e\u5e27\u7684\u5934\u90e8\uff0c\u5176\u4e2d\u6e90MAC\u5730\u5740\u662fPC1\u7684MAC\u5730\u5740\uff0c\u76ee\u7684MAC\u5730\u5740\u5219\u662f2001::2 \u8fd9\u4e2a\u76ee\u6807\u5730\u5740\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u6620\u5c04\u5f97\u5230\u7684MAC\u5730\u5740\uff0c\u8fd9\u662f\u4e00\u4e2a\u7ec4\u64adMAC\u5730\u5740\u3002 \u9664PC2\u5916\u7684\u5176\u4ed6\u8282\u70b9\u4e5f\u4f1a\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\uff0c\u5728\u8bfb\u53d6\u6570\u636e\u5e27\u5934\u7684\u65f6\u5019\u53d1\u73b0\u76ee\u7684MAC\u5730\u5740\u662f\u4e00\u4e2a\u7ec4\u64adMAC\u5730\u5740\uff0c \u800c\u8be5\u7ec4\u64adMAC\u5730\u5740\u5728\u672c\u5730\u5e76\u4e0d\u4fa6\u542c\uff0c\u56e0\u6b64\u5728\u7f51\u5361\u5c42\u9762\u5c31\u5c06\u6570\u636e\u5e27\u4e22\u5f03\u800c\u4e0d\u518d\u5f80\u62a5\u6587\u91cc\u770b\u4e86\u3002 PC2\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\u540e\uff0c\u7531\u4e8e\u672c\u5730\u7f51\u5361\u63a5\u6536\u76ee\u7684MAC\u5730\u5740\u4e3a3333-FF00-0002\u7684\u6570\u636e\u5e27\uff0c\u56e0\u6b64\u5728\u5bf9\u6570\u636e\u5e27\u505a\u6821\u9a8c\u4e4b\u540e\u4ece\u5e27\u5934\u7684\u7c7b\u578b\u5b57\u6bb5\u5f97\u77e5\u91cc\u5934\u662f\u4e2aIPv6\u62a5\u6587\uff0c\u4e8e\u662f\u5c06\u5e27\u5934\u62c6\u6389\uff0c\u628aIPv6\u62a5\u6587\u4e0a\u9001IPv6\u534f\u8bae\u6808\u5904\u7406\u3002 IPv6 \u534f\u8bae\u6808\u4ece\u62a5\u6587\u7684IPv6 \u5934\u90e8\u4e2d\u7684\u76ee\u7684IPv6 \u5730\u5740\u5f97\u77e5\u8fd9\u4e2a\u6570\u636e\u5305\u662f\u53d1\u5f80\u4e00\u4e2a\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740 FF02::1:FF00:2\uff0c\u800c\u672c\u5730\u7f51\u5361\u52a0\u5165\u4e86\u8fd9\u4e2a\u7ec4\u64ad\u7ec4\u3002\u63a5\u7740\uff0c\u4eceIPv6\u5305\u5934\u7684NextHeader\u5b57\u6bb5\u5f97\u77e5IPv6\u5305\u5934\u540e\u9762\u5c01\u88c5\u7740\u4e00\u4e2aICMPv6\u7684\u62a5\u6587\uff0c\u56e0\u6b64\u5c06IPv6\u5305\u5934\u62c6\u9664\uff0c\u5c06ICMPv6\u62a5\u6587\u4ea4\u7ed9ICMPv6\u534f\u8bae\u53bb\u5904\u7406\u3002\u6700\u540eICMPv6 \u53d1\u73b0\u8fd9\u662f\u4e2aNS\u62a5\u6587\uff0c\u8981\u8bf7\u6c42\u81ea\u5df12001::2\u5bf9\u5e94\u7684MAC\u5730\u5740\uff0c\u4e8e\u662f\u56de\u9001\u4e00\u4e2aNA\u62a5\u6587\u7ed9PC1\uff0c\u5728\u8be5\u62a5\u6587\u4e2d\u5c31\u5305\u542b\u7740PC2\u7684MAC\u5730\u5740\u3002 \u5728windows7\u91cc\uff0c\u53ef\u4ee5\u4f7f\u7528**netsh interface ipv6 show neighbors**\u547d\u4ee4\u67e5\u770b\u90bb\u5c45\u7f13\u5b58\u7684\u5185\u5bb9\u3002IPv6\u4e0d\u50cfIPv4 \u90a3\u6837\u4f7f\u7528ARP\u8868\u6765\u7f13\u5b58IP\u4e0eMAC\u5730\u5740\u7684\u6620\u5c04\uff0c\u800c\u662f\u7ef4\u62a4\u4e00\u4e2aIPv6\u90bb\u5c45\u8868\u3002\u5728\u534e\u4e3a\u6570\u901a\u8bbe\u5907\u4e0a\u5219\u4f7f\u7528**display ipv6 neighbors**\u547d\u4ee4\u6765\u67e5\u770bIPv6\u90bb\u5c45\u8868\u3002 \u4ee5\u4e0b\u662f\u67d0\u53f0\u8bbe\u5907\u7684IPv6\u90bb\u5c45\u8868\uff1a \u91cd\u590d\u5730\u5740\u68c0\u6d4b \u00b6 DAD\uff08Duplicate Address Detection\uff0c\u91cd\u590d\u5730\u5740\u68c0\u6d4b\uff09\uff0c\u7528\u4e8e\u786e\u4fddIPv6\u5355\u64ad\u5730\u5740\u5728\u94fe\u8def\u4e0a\u4e0d\u5b58\u5728\u51b2\u7a81\uff08\u91cd\u590d\uff09 \u6240\u6709IPv6\u5355\u64ad\u5730\u5740\u90fd\u9700\u8981\u901a\u8fc7DAD\u68c0\u6d4b\uff08\u5305\u62ec\u94fe\u8def\u672c\u5730\u5730\u5740\uff09\uff0c\u786e\u4fdd\u65e0\u51b2\u7a81\u540e\u624d\u80fd\u591f\u6b63\u5f0f\u542f\u7528\u3002\u4e00\u4e2aIPv6\u5730\u5740\u5728\u901a\u8fc7DAD\u68c0\u6d4b\u4e4b\u524d\u662f\u201ctentative\u201d\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u8bd5\u9a8c\u6027\u5730\u5740\u3002\u63a5\u53e3\u6682\u65f6\u8fd8\u4e0d\u80fd\u4f7f\u7528\u8fd9\u4e2a\u5730\u5740\u8fdb\u884c\u6b63\u5e38\u7684 IPv6\u901a\u8baf\uff0c\u4f46\u662f\u4f1a\u52a0\u5165\u8be5\u5730\u5740\u6240\u5bf9\u5e94\u7684Solicited-Node\u7ec4\u64ad\u7ec4\u3002 DAD\u4f7f\u7528NS\uff08\u90bb\u5c45\u8bf7\u6c42\uff09\u548cNA\uff08\u90bb\u5c45\u901a\u544a\uff09\u6765\u5b9e\u73b0\u5176\u529f\u80fd\u3002 DAD\u7684\u57fa\u672c\u673a\u5236\uff1a\u8282\u70b9\u5411IPv6\u5730\u5740\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u7ec4\u5730\u5740\u53d1\u9001\u4e00\u4e2aNS\u62a5\u6587\uff0c\u5982\u679c\u6536\u5230NA\u62a5\u6587\uff0c\u5c31\u8bc1\u660e\u8be5\u5730\u5740\u5df2\u88ab\u94fe\u8def\u4e0a\u7684\u5176\u4ed6\u8bbe\u5907\u4f7f\u7528\u4e86\uff0c\u5b83\u5c06\u4e0d\u80fd\u4f7f\u7528\u8be5\u5730\u5740\uff0c\u5426\u5219\uff0c\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5982\u679c\u6ca1\u6709\u8bbe\u5907\u56de\u5e94\uff0c\u5219\u6b63\u5f0f\u542f\u7528\u8be5\u5730\u5740\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR2\u5df2\u662f\u5728\u7ebf\u7684\u8bbe\u5907\uff0c\u8be5\u8bbe\u5907\u5df2\u7ecf\u4f7f\u7528\u4e86\u5982\u56fe\u6240\u793a\u7684\u5730\u5740\uff0c\u73b0\u5728\u6211\u4eec\u4e3aR1\u65b0\u914d\u7f6eIPv6\u7684\u5730\u5740 2001::FFFF/64\uff0c\u89c2\u5bdf\u4e00\u4e0b\u4f1a\u53d1\u751f\u4ec0\u4e48\u4e8b\u60c5\u3002R1\u7684\u63a5\u53e3\u914d\u7f6e2001::FFFF/64\u5730\u5740\u540e\uff0c\u8be5\u5730\u5740\u7acb\u5373\u8fdb\u5165tentative \u72b6\u6001\uff0c\u6b64\u65f6\u4ecd\u7136\u662f\u4e0d\u53ef\u7528\u7684\uff0c\u9664\u975e\u8be5\u5730\u5740\u901a\u8fc7DAD\u68c0\u6d4b\u3002 R1\u5411\u94fe\u8def\u4e0a\u4ee5\u7ec4\u64ad\u7684\u65b9\u5f0f\u53d1\u9001\u4e00\u4e2aNS\u62a5\u6587\uff0c\u8be5NS\u7684\u6e90IPv6\u5730\u5740\u4e3a\u201c::\u201d\uff0c\u76ee\u7684IPv6\u5730\u5740\u4e3a\u8981\u8fdb\u884cDAD \u68c0\u6d4b\u76842001::FFFF\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\uff0c\u4e5f\u5c31\u662fFF02::1:FF00:FFFF\u3002\u8fd9\u4e2aNS\u91cc\u5305\u542b\u7740\u8981\u505a DAD\u68c0\u6d4b\u7684\u76ee\u6807\u5730\u57402001::FFFF\u3002 \u94fe\u8def\u4e0a\u7684\u8282\u70b9\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u7ec4\u64ad\u7684NS\u62a5\u6587\uff0c\u6ca1\u6709\u914d\u7f6e2001::FFFF\u7684\u8282\u70b9\u63a5\u53e3\u7531\u4e8e\u6ca1\u6709\u52a0\u5165\u8be5\u5730\u5740\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u7ec4\uff0c\u56e0\u6b64\u5728\u6536\u5230\u8fd9\u4e2aNS\u7684\u65f6\u5019\u9ed8\u9ed8\u4e22\u5f03\u3002\u800cR2\u5728\u6536\u5230\u8fd9\u4e2aNS\u540e\uff0c\u7531\u4e8e\u5b83\u7684\u63a5\u53e3\u914d\u7f6e\u4e862001::FFFF\u5730\u5740\uff0c\u56e0\u6b64\u63a5\u53e3\u4f1a\u52a0\u5165\u7ec4\u64ad\u7ec4FF02::1:FF00:FFFF\uff0c\u800c\u6b64\u523b\u6240\u6536\u5230\u7684\u62a5\u6587\u53c8\u662f\u4ee5\u8be5\u5730\u5740\u4e3a\u76ee\u7684\u5730\u5740\uff0c\u56e0\u6b64\u5b83\u4f1a\u89e3\u6790\u8be5\u62a5\u6587\uff0c\u5b83\u53d1\u73b0\u5bf9\u65b9\u8fdb\u884cDAD\u7684\u76ee\u6807\u5730\u5740\u4e0e\u81ea\u5df1\u672c\u5730\u63a5\u53e3\u5730\u5740\u76f8\u540c\uff0c\u4e8e\u662f\u7acb\u5373\u56de\u9001\u4e00\u4e2aNA\u62a5\u6587\uff0c\u8be5\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u662fFF02::1\uff0c\u4e5f\u5c31\u662f\u6240\u6709\u8282\u70b9\u7ec4\u64ad\u5730\u5740\uff0c\u540c\u65f6\u5728\u62a5\u6587\u5185\u5199\u5165\u76ee\u6807\u5730\u57402001::FFFF\uff0c\u4ee5\u53ca\u81ea\u5df1\u63a5\u53e3\u7684MAC\u5730\u5740\u3002 \u5f53R1\u6536\u5230\u8fd9\u4e2aNA\u540e\uff0c\u5b83\u5c31\u77e5\u90532001::FFFF\u5728\u94fe\u8def\u4e0a\u5df2\u7ecf\u6709\u4eba\u5728\u7528\u4e86\uff0c\u56e0\u6b64\u5c06\u8be5\u5730\u5740\u6807\u8bb0\u4e3aDuplicate \uff08\u91cd\u590d\u7684\uff09\uff0c\u8be5\u5730\u5740\u5c06\u4e0d\u80fd\u7528\u4e8e\u901a\u4fe1\u3002\u6b64\u65f6\u5728R1\u4e0a\u53ef\u4ee5\u89c2\u5bdf\u5230\u5982\u4e0b\u73b0\u8c61\uff1a \u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e \u00b6 \u5728IPv6\u4e2d\uff0c\u8bbe\u5907\u53ef\u4ee5\u901a\u8fc7\u624b\u5de5\u6216\u8005\u52a8\u6001\u7684\u65b9\u5f0f\u83b7\u53d6\u5730\u5740\u3002\u5728\u52a8\u6001\u83b7\u53d6\u5730\u5740\u7684\u65b9\u5f0f\u4e2d\uff0c\u5b58\u5728DHCPv6\u53ca\u65e0\u72b6\u6001\u5730\u5740\u81ea\u52a8\u914d\u7f6e\u4e24\u79cd\u65b9\u5f0f\u3002 IPv6\u5730\u5740\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\uff08StateLess Address AutoConfiguration\uff0cSLAAC\uff09\u662fIPv6\u7684\u6807\u51c6\u529f\u80fd\uff0c\u5728RFC2462\u4e2d\u5b9a\u4e49\u3002\u4f7f\u7528IPv6\u5730\u5740\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u540e\uff0c\u8bbe\u5907\u7684IPv6\u5730\u5740\u65e0\u9700\u8fdb\u884c\u624b\u5de5\u914d\u7f6e\uff0c\u800c\u662f\u5373\u63d2\u5373\u7528\uff0c\u8fd9\u51cf\u8f7b\u7f51\u7edc\u7ba1\u7406\u7684\u8d1f\u62c5\u3002\u76f8\u6bd4\u4e8eDHCPv6\u8fd9\u79cd\u52a8\u6001\u5730\u5740\u5206\u914d\u6280\u672f\u800c\u8a00\uff0cSLAAC\u65e0\u9700\u90e8\u7f72\u5e94\u7528\u670d\u52a1\u5668\uff0c\u66f4\u52a0\u8f7b\u91cf\u3002\u5f53\u7136\uff0c \u5b83\u4e5f\u6709\u7f3a\u70b9\uff0c\u4f8b\u5982SLAAC\u65e0\u6cd5\u5bf9\u7ec8\u7aef\u6240\u4f7f\u7528\u7684\u5730\u5740\u8fdb\u884c\u7ba1\u7406\uff0c\u4e5f\u5e76\u4e0d\u8bb0\u5f55\u5730\u5740\u5206\u914d\u7ed3\u679c\u3002 \u5927\u81f4\u7684\u5de5\u4f5c\u8fc7\u7a0b\u5982\u4e0b\uff1a \u00b6 \u4e3b\u673a\u6839\u636e\u672c\u5730\u63a5\u53e3ID\u81ea\u52a8\u4ea7\u751f\u7f51\u5361\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\u3002 \u4e3b\u673a\u5bf9\u94fe\u8def\u672c\u5730\u5730\u5740\u8fdb\u884cDAD\u68c0\u6d4b\uff0c \u5982\u679c\u8be5\u5730\u5740\u4e0d\u5b58\u5728\u51b2\u7a81\u5219\u53ef\u4ee5\u542f\u7528\u3002 \u4e3b\u673a\u53d1\u9001RS\u62a5\u6587\u5c1d\u8bd5\u5728\u94fe\u8def\u4e0a\u53d1\u73b0IPv6\u8def\u7531\u5668\uff0c\u8be5\u62a5\u6587\u7684\u6e90\u5730\u5740\u4e3a\u4e3b\u673a\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\u3002 \u8def\u7531\u5668\u56de\u590dRA\u62a5\u6587\uff08\u643a\u5e26IPv6\u524d\u7f00\u4fe1\u606f\uff0c\u8def\u7531\u5668\u5728\u672a\u6536\u5230RS\u65f6\u4e5f\u80fd\u591f\u901a\u8fc7\u914d\u7f6e\u4e3b\u52a8\u53d1\u51faRA\u62a5\u6587\uff09\u3002 \u4e3b\u673a\u6839\u636e\u8def\u7531\u5668\u56de\u5e94\u7684RA\u62a5\u6587\uff0c\u83b7\u5f97IPv6\u5730\u5740\u524d\u7f00\u4fe1\u606f\uff0c\u4f7f\u7528\u8be5\u5730\u5740\u524d\u7f00\uff0c\u52a0\u4e0a\u672c\u5730\u4ea7\u751f\u7684\u63a5\u53e3ID\uff0c \u5f62\u6210\u5355\u64adIPv6\u5730\u5740\u3002 \u4e3b\u673a\u5bf9\u751f\u6210\u7684IPv6\u5730\u5740\u8fdb\u884cDAD\u68c0\u6d4b\uff0c\u5982\u679c\u6ca1\u6709\u68c0\u6d4b\u5230\u51b2\u7a81\uff0c\u90a3\u4e48\u8be5\u5730\u5740\u624d\u80fd\u591f\u542f\u7528\u3002 \u534e\u4e3a\u8def\u7531\u5668\u548c\u4ea4\u6362\u673a\u90fd\u53ef\u4ee5\u914d\u7f6eRA\u901a\u544a\u529f\u80fd\uff0c\u5728RA\u62a5\u6587\u4e2d\u901a\u544aIPv6\u5730\u5740\u524d\u7f00\u3002 \u8def\u7531\u5668\u53d1\u73b0 \u00b6 \u8def\u7531\u5668\u53d1\u73b0\u529f\u80fd\u7528\u6765\u53d1\u73b0\u4e0e\u672c\u5730\u94fe\u8def\u76f8\u8fde\u7684\u8def\u7531\u5668\uff08\u4e5f\u53ef\u4ee5\u662f\u4ea4\u6362\u673a\u7b49\uff09\uff0c\u5e76\u83b7\u53d6\u4e0e\u5730\u5740\u81ea\u52a8\u914d\u7f6e\u76f8\u5173\u7684\u524d\u7f00\u548c\u5176\u4ed6\u914d\u7f6e\u53c2\u6570\u3002\u7ecf\u8fc7\u524d\u9762\u7684\u4ecb\u7ecd\uff0c\u6211\u4eec\u5df2\u7ecf\u77e5\u9053IPv6\u5730\u5740\u652f\u6301\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\uff0c\u5373\u4e3b\u673a\u901a\u8fc7\u8def\u7531\u5668\u53d1\u9001\u7684RA\u62a5\u6587\u83b7\u53d6\u7f51\u7edc\u524d\u7f00\u4fe1\u606f\uff0c\u7136\u540e\u4e3b\u673a\u81ea\u5df1\u751f\u6210\u5730\u5740\u7684\u63a5\u53e3\u6807\u8bc6\u90e8\u5206\uff0c\u5e76\u81ea\u52a8\u914d\u7f6eIPv6\u5730\u5740\u3002 \u8def\u7531\u5668\u53d1\u73b0\u529f\u80fd\u662fIPv6\u5730\u5740\u81ea\u52a8\u914d\u7f6e\u529f\u80fd\u7684\u57fa\u7840\uff0c\u4e3b\u8981\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u62a5\u6587\u5b9e\u73b0\uff1a RA\uff08Router Advertisement\uff0c\u8def\u7531\u5668\u901a\u544a\uff09\u62a5\u6587\uff1a\u6bcf\u53f0\u8bbe\u5907\u4e3a\u4e86\u8ba9\u4e8c\u5c42\u7f51\u7edc\u4e0a\u7684\u4e3b\u673a\u548c\u8bbe\u5907\u77e5\u9053\u81ea\u5df1\u7684\u5b58\u5728\uff0c\u53ef\u4ee5\u5b9a\u65f6\u4ee5\u7ec4\u64ad\u65b9\u5f0f\u53d1\u9001RA\u62a5\u6587\uff0cRA\u62a5\u6587\u4e2d\u4f1a\u5e26\u6709\u7f51\u7edc\u524d\u7f00\u4fe1\u606f\uff0c\u53ca\u5176\u4ed6\u4e00\u4e9b\u6807\u5fd7\u4f4d\u4fe1\u606f\u3002RA \u62a5\u6587\u7684Type\u5b57\u6bb5\u503c\u4e3a134\u3002 RS\uff08Router Solicitation\uff0c\u8def\u7531\u5668\u8bf7\u6c42\uff09\u62a5\u6587\uff1a\u5f88\u591a\u60c5\u51b5\u4e0b\u4e3b\u673a\u63a5\u5165\u7f51\u7edc\u540e\u5e0c\u671b\u5c3d\u5feb\u83b7\u53d6\u7f51\u7edc\u524d\u7f00\u8fdb\u884c\u901a\u4fe1\uff0c\u6b64\u65f6\u4e3b\u673a\u53ef\u4ee5\u7acb\u523b\u53d1\u9001RS\u62a5\u6587\uff0c\u7f51\u7edc\u4e0a\u7684\u8bbe\u5907\u5c06\u56de\u5e94RA\u62a5\u6587\u3002RS\u62a5\u6587\u7684Tpye\u5b57\u6bb5\u503c\u4e3a133\u3002 RA\u62a5\u6587\u89e3\u6790 \u00b6 RA\u62a5\u6587\u683c\u5f0f\u5982\u4e0b\uff1a RA\u62a5\u6587\u4e2d\u7684\u53ef\u9009\u5b57\u6bb5\uff1a\u524d\u7f00\u4fe1\u606f \u00b6 \u5728\u4e00\u4e2aRA\u62a5\u6587\u4e2d\uff0c\u53ef\u4ee5\u5305\u542b\u591a\u4e2aICMPv6 Option\uff08\u53ef\u9009\u9879\uff09\uff0c\u8def\u7531\u5668\u5411\u94fe\u8def\u901a\u544a\u7684IPv6\u5730\u5740\u524d\u7f00\u4fe1\u606f\u5c31\u662f\u4ee5ICMPv6 Option\u7684\u5f62\u5f0f\u88abRA\u62a5\u6587\u643a\u5e26\u7684\u3002\u4e00\u4e2aRA\u62a5\u6587\u53ef\u4ee5\u5305\u542b0\u4e2a\u30011\u4e2a\u6216\u8005\u591a\u4e2aIPv6\u524d\u7f00\uff0c\u6bcf\u4e2a\u524d\u7f00\u90fd\u4ee5\u4e00\u4e2aOption\u6765\u643a\u5e26\u3002 \u4e0b\u9762\u6211\u4eec\u770b\u770b\u7528\u4e8e\u643a\u5e26IPv6\u524d\u7f00\u7684Option\u6709\u4ec0\u4e48\u8fdb\u4e00\u6b65\u7684\u5185\u5bb9\uff1a \u4ece\u62a5\u6587\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u7528\u4e8e\u643a\u5e26IPv6\u524d\u7f00\u7684Option\u5185\uff0c\u9664\u4e86\u6709\u524d\u7f00\u4fe1\u606f\uff0c\u4ee5\u53ca\u524d\u7f00\u957f\u5ea6\uff0c\u8fd8\u6709\u51e0\u4e2a\u6807\u5fd7\u4f4d\uff0c\u548c\u4e24\u4e2alifetime\u3002\u5173\u4e8e\u6807\u5fd7\u4f4d\u4e0a\u9762\u5df2\u7ecf\u6709\u6240\u4ecb\u7ecd\u4e86\uff0c\u800c\u8fd9\u4e24\u4e2alifetime\u8bf7\u770b\u4e0b\u6587\u3002 \u524d\u9762\u5df2\u7ecf\u8bf4\u4e86\uff0c\u8def\u7531\u5668\u53d1\u9001\u7684RA\u4e2d\u53ef\u4ee5\u5305\u542bIPv6\u524d\u7f00\u4fe1\u606f\uff0c\u4e3b\u673a\u5728\u6536\u5230RA\u540e\uff0c\u5c31\u80fd\u591f\u4f7f\u7528RA\u4e2d\u6240\u643a\u5e26\u7684IPv6\u524d\u7f00\u6765\u6784\u9020\u81ea\u5df1\u7684IPv6\u5355\u64ad\u5730\u5740\u3002\u5728RA\u6240\u643a\u5e26\u7684\u6bcf\u4e2aIPv6\u524d\u7f00\u4fe1\u606f\u4e2d\u90fd\u5404\u81ea\u6346\u7ed1\u4e86\u4e24\u4e2a lifetime\uff0c\u5176\u4e2d\u4e00\u4e2a\u662fvalid lifetime\uff0c\u53e6\u4e00\u4e2a\u662fpreferred lifetime\u3002 \u5728\u4e3b\u673a\u4f7f\u7528RA\u4e2d\u7684\u524d\u7f00\u6784\u9020IPv6\u5355\u64ad\u5730\u5740\u540e\uff0c\u8be5\u5730\u5740\u9700\u8981\u5148\u7ecf\u8fc7DAD\uff0c\u5728DAD\u8fc7\u7a0b\u4e2d\u7684\u5730\u5740\u72b6\u6001\u4e3a tantative\uff0c\u8fd8\u4e0d\u80fd\u591f\u542f\u7528\u3002DAD\u901a\u8fc7\u540e\u5730\u5740\u5373\u53ef\u6b63\u5f0f\u542f\u7528\uff0c\u5730\u5740\u542f\u7528\u540e\u8fdb\u5165Preferred\u72b6\u6001\uff0c\u540c\u65f6\u542f\u52a8\u8ba1\u65f6\u5668\uff0c\u5f53\u5730\u5740\u751f\u5b58\u65f6\u95f4\u8d85\u8fc7preferred lifetime\u65f6\uff0c\u5730\u5740\u8fdb\u5165deprecated\u72b6\u6001\uff0c\u5904\u4e8e\u8be5\u72b6\u6001\u7684\u5730\u5740\u53ea\u80fd\u7528\u4e8e\u88ab\u52a8\u63a5\u6536\u8fde\u63a5\uff0c\u800c\u4e0d\u80fd\u591f\u7528\u4e8e\u4e3b\u52a8\u53d1\u8d77\u7684\u8fde\u63a5\u3002\u5f53\u5730\u5740\u7684\u751f\u5b58\u65f6\u95f4\u8d85\u51favalid lifetime\u540e\uff0c\u5730\u5740\u5c31\u53d8\u6210\u4e86invalid\uff0c\u4e0d\u518d\u53ef\u7528\u3002 \u4fee\u6539RA\u62a5\u6587\u7684\u76f8\u5173\u53c2\u6570 \u00b6 RA\u62a5\u6587\u7684\u76f8\u5173\u53c2\u6570\u7684\u4fee\u6539\u5728\u63a5\u53e3\u4e0a\u5b8c\u6210\uff1a ipv6 nd ra halt \u00b6 \u6291\u5236\u63a5\u53e3\u7684RA\u62a5\u6587\u5468\u671f\u6027\u53d1\u9001\uff0c\u8be5\u547d\u4ee4\u9ed8\u8ba4\u5f00\u542f\uff0c\u4e5f\u5c31\u662f\u8bf4\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u63a5\u53e3\u4e0d\u4f1a\u5468\u671f\u6027\u53d1\u9001RA \u62a5\u6587\uff0c\u4f7f\u7528**undo**\u5173\u952e\u5b57\u53ef\u5c06\u8be5\u547d\u4ee4\u53d6\u6d88\u3002 ipv6 nd ra hop-limit \u00b6 \u4fee\u6539RA\u62a5\u6587\u4e2dhop-limit\u5b57\u6bb5\u7684\u503c\uff0c\u8be5\u503c\u4f5c\u4e3a\u4e3b\u673a\u53d1\u9001\u51fa\u6765\u7684IPv6\u62a5\u6587\u7684hop-limit\u3002 ipv6 nd ra max-interval \u53ca ipv6 nd ra min-interval \u00b6 \u5468\u671f\u6027\u53d1\u9001RA\u62a5\u6587\u7684\u6700\u5927\u53ca\u6700\u5c0f\u65f6\u95f4\u95f4\u9694\u3002 ipv6 nd ra prefix \u00b6 \u4fee\u6539RA\u62a5\u6587\u6240\u643a\u5e26\u7684IPv6\u524d\u7f00\u53ca\u524d\u7f00\u6240\u5173\u8054\u7684\u53c2\u6570\uff0c\u8fd9\u6761\u547d\u4ee4\u7684\u8be6\u7ec6\u5185\u5bb9\u8bf7\u89c1\u4e0b\u6587\u3002 ipv6 nd ra router-lifetime \u00b6 \u4fee\u6539RA\u62a5\u6587\u4e2drouter-lifetime\u7684\u503c\uff0c\u9ed8\u8ba41800s\u3002 \u4f7f\u7528**ipv6 nd ra prefix**\u547d\u4ee4\uff0c\u53ef\u4ee5\u4fee\u6539RA\u62a5\u6587\u6240\u643a\u5e26\u7684IPv6\u524d\u7f00\u53ca\u5176\u6240\u5173\u8054\u7684\u53c2\u6570\uff1a 1. ipv6 nd ra prefix 2001:: 64 360000 180000 \u4fee\u6539\u7279\u5b9a\u524d\u7f00\u7684**valid lifetime**\u53ca**preferred lifetime** \uff0c\u6ce8\u610f\u524d\u8005\u4e00\u5b9a\u8981\u6bd4\u540e\u8005\u5927\u3002 2. ipv6 nd ra prefix 2001:: 64 360000 180000 no-autoconfig \u5c06\u8be5\u524d\u7f00\u7684A\u6bd4\u7279\u8bbe\u7f6e\u4e3a0\uff0c\u8be5\u524d\u7f00\u5c06\u4e0d\u80fd\u88ab\u7528\u4e8e\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u3002 3. ipv6 nd ra prefix 2001:: 64 360000 180000 off-link \u5c06\u8be5\u524d\u7f00\u7684L\u6bd4\u7279\u8bbe\u7f6e\u4e3a0\u3002 IPv6 \u8fc7\u6e21\u6280\u672f \u6982\u8ff0 \u00b6 \u73b0\u4ecaIP\u7f51\u7edc\u4ecd\u7136\u662f\u4ee5IPv4\u4e3a\u4e3b\u4f53\uff0cIPv6\u7f51\u7edc\u53ea\u662f\u5f97\u5230\u5c0f\u8303\u56f4\u7684\u90e8\u7f72\u548c\u5546\u7528\uff0c\u56e0\u6b64\u5fc5\u7136\u4f1a\u5728\u5f88\u957f\u7684\u4e00\u4e2a\u65f6\u671f\u5185\uff0cIPv4\u53caIPv6\u7f51\u7edc\u4f1a\u6709\u5171\u5b58\u7684\u573a\u666f\uff0c\u90a3\u5c31\u9700\u8981\u8003\u8651V4V6\u5e76\u5b58\u7684\u7b56\u7565\u548c\u6280\u672f\u3002 \u540c\u65f6\u4eceIPv4\u8fc7\u6e21\u5230IPv6\u4e0d\u53ef\u80fd\u4e00\u6c14\u5475\u6210\uff0c\u8fd9\u662f\u4e00\u4e2a\u7efc\u5408\u653f\u6cbb\u3001\u7ecf\u6d4e\u3001\u5546\u4e1a\u3001\u6280\u672f\u3001\u65b9\u6cd5\u3001\u7b56\u7565\u7b49\u5404\u79cd\u56e0\u7d20\u7684\u95ee\u9898\uff0c\u56e0\u6b64IPv4\u5230IPv6\u7684\u8fc7\u6e21\u9700\u8981\u4e00\u4e2a\u6f2b\u957f\u7684\u8fc7\u7a0b\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u5c31\u4e0d\u5f97\u4e0d\u8003\u8651\u8fc7\u6e21\u7684\u7b56\u7565\u548c\u65b9\u6cd5\u3002\u4ee5\u4e0b\u662f\u4e09\u79cd\u5e38\u89c1\u7684\u5171\u5b58\u7b56\u7565\u548c\u8fc7\u6e21\u6280\u672f\uff1a \u53cc\u6808DualStack \u00b6 \u6240\u8c13\u7684\u53cc\u6808\u5c31\u662f\u4e3b\u673a\u6216\u8005\u7f51\u7edc\u8bbe\u5907\u540c\u65f6\u652f\u6301IPv4\u53caIPv6\u53cc\u534f\u8bae\u6808\uff0c\u5982\u679c\u8282\u70b9\u652f\u6301\u53cc\u6808\uff0c\u90a3\u4e48\u5b83\u80fd\u591f\u540c\u65f6\u4f7f\u7528V4\u548cV6\u7684\u534f\u8bae\u6808\u3001\u540c\u65f6\u5904\u7406IPv4\u53caIPv6\u7684\u6570\u636e\u3002 \u5728\u53cc\u6808\u8bbe\u5907\u4e0a\uff0c\u4e0a\u5c42\u5e94\u7528\u4f1a\u4f18\u5148\u9009\u62e9IPv6\u534f\u8bae\u6808\uff0c\u800c\u4e0d\u662fIPv4\u3002\u6bd4\u5982\uff0c\u4e00\u4e2a\u540c\u65f6\u652f\u6301v4\u548cv6\u7684\u5e94\u7528\u8bf7\u6c42\u901a\u8fc7DNS\u8bf7\u6c42\u5730\u5740\uff0c\u4f1a\u5148\u8bf7\u6c42AAAA\u8bb0\u5f55\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u518d\u8bf7\u6c42A\u8bb0\u5f55\u3002 \u5c31\u62ff\u4e0a\u56fe\u6765\u8bf4\uff0c\u8def\u7531\u5668\u5c31\u662f\u4e00\u4e2a\u53cc\u6808\u8bbe\u5907\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8def\u7531\u5668\u672c\u8eab\u5c31\u5df2\u7ecf\u652f\u6301IPv4\uff0c\u63a5\u53e3\u4e0a\u4e5f\u914d\u7f6e\u4e86 IPv4\u7684\u5730\u5740\uff0c\u5df2\u7ecf\u80fd\u591f\u6b63\u5e38\u8f6c\u53d1IPv4\u7684\u62a5\u6587\uff0c\u6b64\u523b\u5728\u6fc0\u6d3b\u8def\u7531\u5668\u7684IPv6\u6570\u636e\u8f6c\u53d1\u80fd\u529b\uff0c\u518d\u4e3a\u63a5\u53e3\u5206\u914d IPv6\u7684\u5355\u64ad\u5730\u5740\uff0c\u90a3\u4e48\u8fd9\u4e2a\u63a5\u53e3\u53c8\u6709\u4e86IPv6\u6570\u636e\u8f6c\u53d1\u80fd\u529b\u3002\u5f53\u7136\uff0c\u6b64\u65f6\u5bf9\u4e8e\u8def\u7531\u5668\u800c\u8a00\uff0cIPv4\u53caIPv6\u534f\u8bae\u6808\u4e92\u4e0d\u5e72\u6270\uff0c\u72ec\u7acb\u5de5\u4f5c\u3002 \u53cc\u6808\u662fV4\u3001V6\u5e76\u5b58\u53caIPv6\u8fc7\u6e21\u6280\u672f\u7684\u57fa\u7840\u3002 \u96a7\u9053\u6280\u672f \u00b6 \u96a7\u9053\u6280\u672f\u662f\u4e00\u79cd\u975e\u5e38\u7ecf\u5178\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u88ab\u5e94\u7528\u5728\u5404\u79cd\u573a\u666f\u4e2d\u89e3\u51b3\u6570\u636e\u901a\u4fe1\u95ee\u9898\u3002\u7b80\u5355\u5730\u8bf4\u5c31\u662f\u5728\u4e24\u4e2a\u901a\u4fe1\u5b64\u5c9b\u4e4b\u95f4\u642d\u5efa\u4e00\u6761\u865a\u62df\u901a\u9053\uff0c\u4f7f\u5f97\u6b64\u4e8c\u8005\u80fd\u591f\u901a\u8fc7\u8fd9\u6761\u96a7\u9053\u3001\u7a7f\u8d8a\u4e2d\u95f4\u7684\u7f51\u7edc\u8fdb\u884c\u901a\u4fe1\u3002\u96a7\u9053\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u5176\u5b9e\u5c31\u662f\u5c06\u4e00\u79cd\u534f\u8bae\u7684\u6570\u636e\u62a5\u6587\u5c01\u88c5\u5728\u53e6\u4e00\u79cd\u534f\u8bae\u4e2d\uff0c\u4f8b\u5982\u5c06IPv6\u62a5\u6587\u5c01\u88c5\u5728IPv4\u5934\u90e8\u540e\uff0c\u4f7f\u5f97IPv6\u6d41\u91cf\u80fd\u591f\u7a7f\u8d8aIPv4\u7f51\u7edc\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 \u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cR1\u53caR2\u90fd\u8fde\u63a5\u5230\u540c\u4e00\u4e2aIPv4\u7f51\u7edc\u4e2d\uff0c\u540c\u65f6\u8fd8\u5404\u81ea\u8fde\u63a5\u4e00\u4e2aIPv6\u7f51\u7edc\u3002\u6b64\u523bR1\u53caR2 \u5747\u662f\u53cc\u6808\u8def\u7531\u5668\uff0c\u800c\u4e24\u8005\u5404\u81ea\u4e0b\u6302\u7684\u8fd9\u4e24\u4e2aIPv6\u7f51\u7edc\u5176\u5b9e\u662f\u4fe1\u606f\u5b64\u5c9b\uff0c\u5f7c\u6b64\u4e4b\u95f4\u65e0\u6cd5\u4e92\u76f8\u901a\u4fe1\uff0c\u56e0\u4e3a\u8981\u901a\u4fe1\u5c31\u9700\u8981\u7ecf\u8fc7\u4e2d\u95f4\u7684\u7f51\u7edc\uff0c\u800c\u4e2d\u95f4\u7684\u7f51\u7edc\u662fIPv4\u7684\uff0c\u6839\u672c\u65e0\u6cd5\u8bc6\u522bIPv6\u6570\u636e\u3002 \u8fd9\u4e2a\u573a\u666f\u76f8\u4fe1\u5728\u5982\u4eca\u7684\u7f51\u7edc\u4e2d\u662f\u5e38\u89c1\u7684\uff0c\u6bd5\u7adf\u5982\u4ecaIP\u7f51\u7edc\u7684\u4e3b\u4f53\u8fd8\u662fIPv4\uff0cIPv6\u7684\u7ad9\u70b9\u53ea\u662f\u96f6\u661f\u5efa\u7acb\uff0c \u90a3\u4e48\u5982\u4f55\u5b9e\u73b0IPv6\u7ad9\u70b9\u4e4b\u95f4\u7684\u76f8\u4e92\u901a\u4fe1\u5462\u3002 \u5229\u7528\u96a7\u9053\u6280\u672f\u53ef\u4ee5\u5728R1\u53caR2\u4e4b\u95f4\u5efa\u7acb\u8d77\u4e00\u6761\u70b9\u5230\u70b9\u7684\u901a\u9053\uff0c\u8fd9\u6761\u865a\u62df\u901a\u9053\u7a7f\u8d8a\u4e86\u4e2d\u95f4\u7684IPv4\u7f51\u7edc\uff0c\u4f7f\u5f97\u4e24\u4e2a\u4fe1\u606f\u5b64\u5c9b\u4e4b\u95f4\u80fd\u591f\u4e92\u901a\u3002\u5b9e\u9645\u4e0a\u5b64\u5c9b\u4e4b\u95f4\u7684IPv6\u4e92\u8bbf\u6d41\u91cf\u8fd8\u662f\u7ecf\u8fc7\u4e2d\u95f4\u7684IPv4\u7f51\u7edc\u8fdb\u884c\u8f6c\u53d1\uff0c\u53ea\u4e0d\u8fc7\u5728\u88ab\u8f6c\u53d1\u7684IPv6\u62a5\u6587\u57fa\u7840\u4e4b\u4e0a\u589e\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684IPv4\u5934\u90e8\uff0c\u8fd9\u4e2a\u5934\u90e8\u6211\u4eec\u79f0\u4e4b\u4e3a\u96a7\u9053\u5934\uff0c\u6b63\u662f\u8fd9\u4e2a\u96a7\u9053IPv4\u5934\u90e8\uff0c\u4f7f\u5f97IPv6\u62a5\u6587\u80fd\u591f\u88ab\u5305\u88f9\u5728\u5176\u4e2d\u4ece\u800c\u7a7f\u8d8a\u4e2d\u95f4\u7684IPv4\u7f51\u7edc\u3002 NAT64 \u00b6 NAT64\u6280\u672f\u5b9e\u9645\u4e0a\u662f\u4e00\u79cd\u534f\u8bae\u8f6c\u6362\u6280\u672f\uff0c\u80fd\u591f\u5c06\u5206\u7ec4\u5728V4\u53caV6\u683c\u5f0f\u4e4b\u95f4\u7075\u6d3b\u8f6c\u6362\u3002\u5f53IPv4\u7f51\u7edc\u7684\u8282\u70b9\u9700\u8981\u76f4\u63a5\u4e0eIPv6\u7f51\u7edc\u7684\u8282\u70b9\u8fdb\u884c\u901a\u4fe1\u65f6\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5f53\u7136\u662f\u884c\u4e0d\u901a\u7684\uff0c\u56e0\u4e3a\u4e24\u4e2a\u534f\u8bae\u6808\u65e0\u6cd5\u517c\u5bb9\u3002\u4f46\u662f\u501f\u52a9\u4e00\u53f0\u8bbe\u5907\uff0c\u7531\u8be5\u8bbe\u5907\u6765\u5b9e\u73b0IPv6\u4e0eIPv4\u7684\u4e92\u8f6c\uff0c\u90a3\u4e48\u4e0a\u8ff0\u901a\u4fe1\u9700\u6c42\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e86\u3002 IPv6 Over IPv4 \u624b\u5de5\u96a7\u9053 \u00b6 \u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cR1\u53caR2\u90fd\u8fde\u63a5\u5230\u540c\u4e00\u4e2aIPv4\u7f51\u7edc\u4e2d\uff0cR1\u4f7f\u7528\u5730\u574010.1.1.1\u63a5\u5165IPv4\u7f51\u7edc\uff0cR2\u4f7f\u7528 10.2.2.2\u63a5\u5165IPv4\u7f51\u7edc\uff0c\u4e24\u8005\u7684IPv4\u5730\u5740\u80fd\u591f\u4e92\u901a\u3002 \u6b64\u5916R1\u3001R2\u8fd8\u8fde\u63a5\u5230\u4e00\u4e2aIPv6\u7f51\u7edc\uff0c\u800c\u4e24\u8005\u5404\u81ea\u4e0b\u6302\u7684\u8fd9\u4e24\u4e2aIPv6\u7f51\u7edc\u5176\u5b9e\u662f\u4fe1\u606f\u5b64\u5c9b\uff0c\u5f7c\u6b64\u4e4b\u95f4\u65e0\u6cd5\u4e92\u76f8\u901a\u4fe1\uff0c\u56e0\u4e3aIPv6\u62a5\u6587\u4e0d\u53ef\u80fd\u76f4\u63a5\u88ab\u9001\u5230IPv4\u7f51\u7edc\uff0c\u8fd9\u79cd\u62a5\u6587\u5728\u4e2d\u95f4\u7684\u7f51\u7edc\u662f\u4e0d\u53ef\u88ab\u8def\u7531\u7684\u3002 \u5728R1\u53caR2\u4e4b\u95f4\u5229\u7528\u96a7\u9053\u6280\u672f\u53ef\u4ee5\u5efa\u7acb\u8d77\u4e00\u6761\u70b9\u5230\u70b9\u7684\u901a\u9053\uff0c\u6211\u4eec\u8fd9\u91cc\u4f7f\u7528\u7684\u662fIPv6 Over IPv4\u7684\u624b\u5de5\u96a7\u9053\uff0c \u4e5f\u5c31\u662f\u5728R1\u53caR2\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761\u865a\u62df\u7684\u624b\u5de5\u96a7\u9053\uff0c\u5728R1\u4e0a\u96a7\u9053\u7684\u6e90\u662f10.1.1.1\uff0c\u76ee\u7684\u662f10.2.2.2\uff0c\u53ea\u8981\u662fPC1 \u8bbf\u95eePC2\u7684\u6d41\u91cf\u5c31\u5f80\u96a7\u9053\u91cc\u6254\u3002R2\u540c\u7406\uff0c\u96a7\u9053\u7684\u6e90\u662f10.2.2.2\uff0c\u76ee\u7684\u662f10.1.1.1\u3002 \u73b0\u5728\u5f53PC1\u8981\u8bbf\u95eePC2\u65f6\uff0cPC1\u53d1\u9001\u51fa\u6765\u7684\u662fIPv6\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u88ab\u4e22\u7ed9\u9ed8\u8ba4\u7f51\u5173R1\uff0cR1\u7ecf\u8fc7IPv6\u8def\u7531\u8868\u67e5\u8be2\u540e\u53d1\u73b0\u8fd9\u4e9b\u6570\u636e\u8981\u9001\u5f80\u96a7\u9053\u63a5\u53e3\uff0c\u4e8e\u662f\u8fd9\u4e9bIPv6\u62a5\u6587\u88ab\u5c01\u88c5\u4e0a\u4e00\u4e2a\u96a7\u9053\u7684IPv4\u5934\u90e8\uff0c\u5728IPv4\u5934\u90e8\u4e2d\u6e90IP \u5730\u5740\u4e3a\u96a7\u9053\u7684\u6e90\u5730\u574010.1.1.1\uff0c\u76ee\u7684IP\u5730\u5740\u4e3a\u96a7\u9053\u7684\u76ee\u7684\u5730\u574010.2.2.2\u3002\u7136\u540e\u8fd9\u4e2a\u88ab\u5c01\u88c5\u7684\u62a5\u6587\u5c31\u9001\u5165\u4e86IPv4 \u7f51\u7edc\uff0c\u7531\u4e8e\u62a5\u6587\u5916\u5934\u5c01\u88c5\u4e86\u4e00\u4e2aIPv4\u7684\u5934\u90e8\uff0c\u56e0\u6b64IPv4\u7f51\u7edc\u4e2d\u7684\u8bbe\u5907\u5c06\u53ea\u4f1a\u89e3\u6790\u8fd9\u4e2aIPv4\u5934\u90e8\uff0c\u800c\u4e0d\u4f1a\u5173\u5fc3\u91cc\u5934\u88c5\u7684\u662f\u4ec0\u4e48\uff0c\u8fd9\u4e2a\u62a5\u6587\u88ab\u4e00\u8def\u8f6c\u53d1\u6700\u7ec8\u5230\u8fbe10.2.2.2\uff0c\u4e5f\u5c31\u662fR2\u3002R2\u518d\u5c06\u62a5\u6587\u7684IPv4\u5934\u90e8\u62c6\u9664\uff0c\u7136\u540e\u5c06\u91cc\u5934\u7684IPv6\u539f\u59cb\u6570\u636e\u8f6c\u53d1\u7ed9PC2\u3002 \u5b9e\u9a8c\u62d3\u6251\u53ca\u9700\u6c42 \u00b6 \u8bbe\u5907\u914d\u7f6e\u53ca\u5b9e\u73b0 \u00b6 R3\u7684\u914d\u7f6e\u5982\u4e0b R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u51e0\u4e2a\u6ce8\u610f\u4e8b\u9879\uff1a \u96a7\u9053\u4e24\u7aef\u7684\u5730\u5740\uff1a10.1.1.1\u53ca10.2.2.2\u5fc5\u987b\u8def\u7531\u53ef\u8fbe\uff0c\u5426\u5219\u96a7\u9053\u5efa\u7acb\u4e0d\u6210\u529f\u3002 IPv6 Over IPv4\u624b\u5de5\u96a7\u9053\u9700\u8981\u5728\u96a7\u9053\u63a5\u53e3\u7684\u914d\u7f6e\u4e2d\u624b\u5de5\u6307\u5b9a\u96a7\u9053\u7684\u6e90\u548c\u76ee\u7684\u3002 Ipv6 route-static 2001:1111:: 64 tunnel0/0/0\u8fd9\u6761\u8def\u7531\uff0c\u5c06\u53bb\u5f80\u8be5IPv6\u7f51\u7edc\u7684\u6570\u636e\u5305\u9001\u5230\u96a7\u9053\u63a5\u53e3\uff0c\u8fd9\u4e9b\u6570\u636e\u5c31\u4f1a\u88ab\u5c01\u88c5\u4e0a\u96a7\u9053IPv4\u7684\u5934\u90e8\u7136\u540e\u9001\u5230IPv4\u7f51\u7edc\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u505a\u4e00\u4e9b\u57fa\u672c\u7684\u9a8c\u8bc1\u53ca\u67e5\u770b\uff1a \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fR1\u4e0a\u63a5\u53e3IPv6\u6458\u8981\u4fe1\u606f\uff0c\u53ef\u4ee5\u770b\u5230\u4e3aGE0/0/1\u53e3\u914d\u7f6e\u7684IPv6\u5730\u5740\uff0c\u4ee5\u53caTunnel0/0/0\u53e3\u7684\u94fe\u8def \u672c\u5730\u5730\u5740\u3002 GRE \u96a7\u9053 \u00b6 GRE\uff08Generic Routing Encapsulation\uff0c\u901a\u7528\u8def\u7531\u5c01\u88c5\uff09\u662f\u4e00\u79cd\u96a7\u9053\u534f\u8bae\uff0c\u53ef\u4ee5\u5728\u865a\u62df\u70b9\u5bf9\u70b9\u94fe\u8def\u4e2d\u5c01\u88c5\u591a\u79cd\u4e0a\u5c42\u534f\u8bae\uff0c\u5b83\u5728RFC 2784\u4e2d\u5b9a\u4e49\uff0c\u5b83\u7684\u901a\u7528\u6027\u7279\u522b\u9ad8\uff0c\u80fd\u591f\u652f\u6301\u5404\u79cd\u5404\u6837\u7684\u4e0a\u5c42\u534f\u8bae\u3002 \u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u5176\u5b9e\u91c7\u7528GRE\u96a7\u9053\uff0c\u4e0e\u4e0a\u6587\u4ecb\u7ecd\u7684IPv6 Over IPv4\u624b\u5de5\u96a7\u9053\u5728\u673a\u5236\u4e0a\u5e76\u6ca1\u6709\u592a\u5927\u7684\u533a\u522b\uff0c \u90fd\u662f\u4e3a\u539f\u59cb\u7684IPv6\u6570\u636e\u5305\u5c01\u88c5\u4e0a\u65b0\u7684\u5934\u90e8\uff0c\u53ea\u4e0d\u8fc7GRE\u8fd9\u79cd\u673a\u5236\u9664\u4e86\u4f1a\u4e3aIPv6\u6570\u636e\u5c01\u88c5\u4e0a\u65b0\u7684\u96a7\u9053IPv4\u5934\u90e8\u5916\uff0c\u8fd8\u4f1a\u52a0\u4e0a\u4e00\u4e2aGRE\u7684\u5934\u90e8\u3002 \u5b9e\u9a8c\u62d3\u6251\u53ca\u9700\u6c42 \u00b6 \u8bbe\u5907\u914d\u7f6e\u53ca\u5b9e\u73b0 \u00b6 R3\u7684\u914d\u7f6e\u5982\u4e0b R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u4e3a\u4e86\u5b8c\u6210\u8fd9\u4e2a\u5b9e\u9a8c\uff0c\u6211\u4eec\u5728R1\u53caR2\u4e0a\u914d\u7f6e\u4e86IPv6\u9759\u6001\u8def\u7531\uff0c\u7136\u800c\u9759\u6001\u8def\u7531\u662f\u9700\u8981\u624b\u5de5\u914d\u7f6e\u7684\uff0c\u800c\u4e14\u6b20\u7f3a\u7075 \u6d3b\u6027\uff0c\u91c7\u7528\u52a8\u6001\u8def\u7531\u534f\u8bae\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u4f46\u662fR1-R3\u5e76\u975e\u76f4\u8fde\u8def\u7531\u5668\uff0c\u5982\u4f55\u80fd\u591f\u8fd0\u884cIPv6\u52a8\u6001\u8def\u7531\u534f\u8bae\uff1f \u5f97\u76ca\u4e8eR1-R2\u4e4b\u95f4\u5df2\u7ecf\u5efa\u7acb\u8d77\u6765\u7684GRE\u96a7\u9053\uff0cR1\u3001R2\u76f8\u5f53\u4e8e\u6253\u901a\u4e86\u4e00\u6761\u627f\u8f7d\u5728IPv4\u7f51\u7edc\u4e0a\u7684IPv6\u70b9\u5230\u70b9\u201c\u76f4\u8fde\u94fe\u8def\u201d\u2014\u2014\u867d\u7136\u8fd9\u6761\u94fe\u8def\u662f\u865a\u62df\u7684\u3002\u57fa\u4e8e\u8fd9\u6761\u76f4\u8fde\u94fe\u8def\uff0cR1\u3001R2\u5373\u53ef\u8fd0\u884cIPv6\u52a8\u6001\u8def\u7531\u534f\u8bae\u4ece\u800c\u52a8\u6001\u5730\u4ea4\u4e92\u8def\u7531\u4fe1\u606f\u3002 \u73b0\u5728\uff0c\u53bb\u6389R1\u3001R2\u4e0a\u914d\u7f6e\u7684IPv6\u9759\u6001\u8def\u7531\uff08\u547d\u4ee4\u4e0d\u518d\u8d58\u8ff0\uff09\u3002\u7136\u540e\u5728R1\u53caR2\u4e0a\u589e\u8865\u914d\u7f6e\uff1a R1\u7684\u589e\u8865\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u589e\u8865\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cR1\u3001R2\u5373\u4f1a\u901a\u8fc7GRE Tunnel\u53d1\u9001OSPFv3 Hello\u4ece\u800c\u53d1\u73b0\u90bb\u5c45\uff0c\u968f\u540e\u5efa\u7acbOSPFv3\u90bb\u5c45\u5173\u7cfb\u3002\u6b64\u65f6\u5728R1\u4e0a\u67e5\u770bOSPFv3\u90bb\u5c45\u8868\u5982\u4e0b\uff1a \u5728R1\u4e0a\u67e5\u770bIPv6\u8def\u7531\u8868\u4e2d\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u7684\u8def\u7531\uff1a R1\u5df2\u7ecf\u5b66\u4e60\u52302001:2::/64\u8def\u7531\uff0cR2\u4e5f\u5b66\u5230\u4e862001:1::/64\u8def\u7531\uff0c\u56e0\u6b64PC1\u53caPC2\u80fd\u591f\u4e92\u76f8ping\u901a\uff0c\u901a\u8fc7\u6293\u5305\u53ef\u4ee5\u89c2\u5bdf\u5230OSPFv3\u5728GRE\u96a7\u9053\u4e0a\u7684\u5de5\u4f5c\u8fc7\u7a0b\u3002\u5b9e\u9645\u4e0a\u6211\u4eec\u5e76\u672a\u7ed9Tunnel\u63a5\u53e3\u914d\u7f6e\u5168\u5c40\u5355\u64adIPv6\u5730\u5740\uff0c\u4f46\u662f OSPFv3\u4f9d\u7136\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\uff0c\u8fd9\u662f\u56e0\u4e3aR1\u53caR2\u4f7f\u7528\u7684\u662fTunnel\u63a5\u53e3\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\u5efa\u7acbOSPFv3\u90bb\u5c45\u5173\u7cfb\uff0c \u4ee5\u53ca\u4f5c\u4e3a\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u3002 \u4f7f\u7528IPv6 Over IPv4\u624b\u5de5\u96a7\u9053\u65f6\uff0c\u4e5f\u53ef\u4ee5\u50cf\u672c\u4f8b\u8fd9\u6837\uff0c\u5728\u96a7\u9053\u7aef\u70b9\u8bbe\u5907\u4e4b\u95f4\u5efa\u7acbOSPFv3\u90bb\u63a5\u5173\u7cfb\u4ece\u800c\u4ea4\u4e92 OSPF\u8def\u7531\uff0c\u4f46\u662f\u76f8\u5bf9\u7684\uff0cGRE\u7684\u901a\u7528\u6027\u8f83\u597d\uff0c\u53ef\u7528\u4e8e\u627f\u8f7d\u5404\u79cd\u4e0a\u5c42\u534f\u8bae\uff0c\u56e0\u6b64\u5728\u9762\u5bf9IS-IS\u8fd9\u6837\u7684\u8def\u7531\u534f\u8bae\u65f6\u95f4\uff0cIPv6 Over IPv4\u624b\u5de5\u96a7\u9053\u573a\u666f\u5c31\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\uff0c\u800cGRE\u5219\u4e0d\u4f1a\u6709\u95ee\u9898\u3002 6to4 \u81ea\u52a8\u96a7\u9053 \u00b6 \u4e0a\u6587\u4ecb\u7ecd\u7684\u4e24\u79cd\u96a7\u9053\u673a\u5236\u6709\u4e2a\u5171\u540c\u7684\u7279\u70b9\uff0c\u5c31\u662f\u96a7\u9053\u7684\u5bf9\u7aef\u9700\u660e\u786e\u6307\u5b9a\uff0c\u4f8b\u5982\u5728R1\u4e0a\u5efa\u96a7\u9053\uff0c\u9700\u8981\u6307\u5b9a\u96a7\u9053\u7684\u76ee\u7684\u7aef\u4e3a10.2.2.2\uff0c\u8fd9\u79cd\u624b\u5de5\u5efa\u96a7\u9053\u7684\u65b9\u5f0f\u5728\u7ad9\u70b9\u5c11\u3001\u800c\u4e14\u5730\u5740\u56fa\u5b9a\u7684\u60c5\u51b5\u4e0b\u53ef\u884c\uff0c\u4f46\u662f\u53ef\u5c55\u6027\u592a\u5dee\u3002 \u76f8\u6bd4\u4e4b\u4e0b\uff0c6to4\u81ea\u52a8\u96a7\u9053\u5219\u8981\u7075\u6d3b\u8bb8\u591a\u30026to4\u81ea\u52a8\u96a7\u9053\u5229\u7528IPv6\u5355\u64ad\u5730\u5740\u4e2d\u76846to4\u5730\u5740\u30026to4\u5730\u5740\u662f\u4e00\u7c7b\u7279\u6b8a\u7684IPv6\u5355\u64ad\u5730\u5740\uff0c\u5b83\u901a\u8fc7IPv4\u5730\u5740\u6620\u5c04\u800c\u6765\u3002\u4f8b\u5982R1\u5df2\u7ecf\u6709IPv4\u5730\u5740200.1.1.1\uff0c\u90a3\u4e48\u8be5IPv4\u5730\u5740\u5bf9\u5e94\u76846to4 IPv6\u5730\u5740\u5c31\u662f2002: C801:0101 :: /48\uff0c\u5176\u4e2d**C801:0101**\u5c31\u662f200.1.1.1\u768416\u8fdb\u5236\u5f62\u5f0f\u3002\u5982\u6b64\u4e00\u6765\u5c31\u5f97\u5230\u4e86/48\u7684IPv6\u5730\u5740\u524d\u7f00\uff0c\u8fd9\u4e2a\u524d\u7f00\u53ef\u8fdb\u4e00\u6b65\u8fdb\u884c\u5b50\u7f51\u5212\u5206\uff0c\u6700\u7ec8\u5f62\u6210/64\u7684IPv6\u524d\u7f00\u7528\u4e8e\u7ec8\u7aef\u3002R2\u8fd9\u4e00\u4fa7\u7684 IPv6\u7f51\u7edc\u540c\u7406\u3002 \u73b0\u5728\u5f53PC1\u8981\u8bbf\u95eePC2\u8fd9\u4e00\u4fa7\u7684IPv6\u7f51\u7edc\u65f6\uff0c\u5176\u53d1\u51fa\u7684\u62a5\u6587\u7684\u76ee\u7684IPv6\u5730\u5740\u5c31\u662f2002: C802:0202 ::/48\u8fd9\u4e00\u524d\u7f00\u4e0b\u7684\u67d0\u4e2aIPv6\u5730\u5740\uff0c\u800c\u8fd9\u4e2aIPv6\u6570\u636e\u5305\u5230\u8fbeR1\u540e\uff0cR1\u4ece\u76ee\u7684IPv6\u5730\u5740\u4e2d\u53d6\u51faIPv4\u5730\u5740\u7684\u6620\u5c04\u90e8\u5206\uff0c\u4e5f\u5c31\u662fC802\uff1a0202\uff0c\u8fdb\u800c\u5f97\u5230200.2.2.2\uff0c\u8fd9\u5c31\u662f\u96a7\u9053\u7684\u76ee\u7684\u5730\u5740\u3002IPv6\u62a5\u6587\u88ab\u5c01\u88c5\u4e0a\u96a7\u9053\u7684IPv4\u5934\u90e8\uff0c\u6e90\u5730\u5740\u4e3a200.1.1.1\uff0c\u76ee\u7684\u5730\u5740\u4e3a200.2.2.2\u3002 \u5b9e\u9a8c\u62d3\u6251\u53ca\u9700\u6c42 \u00b6 \u8bbe\u5907\u914d\u7f6e\u53ca\u5b9e\u73b0 \u00b6 Internet Router\u7684\u914d\u7f6e\u5982\u4e0b R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u57286to4 \u81ea\u52a8\u96a7\u9053\u7684\u89e3\u51b3\u65b9\u6848\u4e2d\uff0c\u6211\u4eec\u5229\u7528\u4e862002::/16\u76846to4\u77e5\u540d\u5730\u5740\u7a7a\u95f4\u3002 \u9996\u5148R1\u53caR2\u90fd\u5df2\u7ecf\u6709\u4e86200.1.1.1\u53ca200.2.2.2\u7684IPv4\u5730\u5740\u3002\u62ffR1\u6765\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7R1\u7684\u5730\u5740200.1.1.1\u6620\u5c04\u5f97\u5230\u8be5IP\u5bf9\u5e94\u76842002::/16\u524d\u7f00\u76846to4 IPv6\u5730\u5740\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5bf9\u4e8eR1\u6240\u5728\u7684\u7ad9\u70b9\uff0c\u5f97\u5230\u76846to4 IPv6\u5730\u5740\u7a7a\u95f4\u5c31\u662f2002:C801:0101::/48\uff0c\u524d\u7f00\u4e2d\u7684\u524d16bit\u4e5f\u5c31\u662f2002\u662f\u56fa\u5b9a\u7684\uff0c\u540e\u9762\u768432bit\u5c31\u662f200.1.1.1\u8fd9\u4e2a\u5730\u5740\u5bf9\u5e94\u768416\u8fdb\u5236\u6570\uff0c\u7ec4\u88c5\u540e\u5c31\u5f97\u5230/48bit\u7684IPv6\u5730\u5740\u524d\u7f00\uff0c\u8fd9\u6837\u4e00\u6765PC1\u6240\u5728\u7f51\u7edc\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2aIPv6\u5730\u5740\u6765\u7ec4\u5efa\u7f51\u7edc\uff1a \u5f53PC1\u8981\u8bbf\u95ee2002:C802:0202::/48\u7f51\u7edc\u65f6\uff1a \u6570\u636e\u5305\u5230\u8fbeR1\u540e\uff0cR1\u53d1\u73b0\u76ee\u7684\u5730\u5740\u662fIPv6\u5730\u5740\uff0c\u800c\u4e14\u662f2002\u5f00\u5934\u7684\u5730\u5740\uff0c\u8fd9\u662f\u4e2a6to4\u7684IPv6\u5730\u5740\uff0c\u4e8e\u662f\u4ece\u8be5\u5730\u5740\u4e2d\u62bd\u79bb\u51faC802:0202\uff0c\u5f97\u5230200.2.2.2\u8fd9\u4e2aIPv4\u5730\u5740\u3002\u7136\u540e\uff1a R1\u5728\u539f\u59cbIPv6\u62a5\u6587\u7684\u57fa\u7840\u4e0a\u52a0\u88c5IPv4\u5934\u90e8\uff0cIPv4\u5934\u90e8\u7684\u6e90\u5730\u5740\u4e3a6to4tunnel\u7684\u6e90\u5730\u5740\uff0c\u800c\u76ee\u7684\u5730\u5740\u4e3a 200.2.2.2\u3002\u6570\u636e\u5305\u88ab\u8def\u7531\u5230R2\u540e\uff0cR2\u5c06\u5916\u5c42\u7684IPv4\u5934\u90e8\u5265\u9664\uff0c\u5c06\u91cc\u5934\u7684IPv6\u62a5\u6587\u8f6c\u53d1\u7ed9PC2\u3002 NAT64 \u6982\u8ff0 \u00b6 \u573a\u666f1\uff1aNAT64\uff08\u52a8\u6001\u6620\u5c04\uff09 \u00b6 NAT64\u52a8\u6001\u6620\u5c04\u53ea\u9002\u7528\u4e8eIPv6\u7528\u6237\u4e3b\u52a8\u53d1\u8d77\u8bbf\u95eeIPv4 Server\u7684\u573a\u666f\u3002 IPv6\u7528\u6237\u53d1\u8d77AAAA DNS\u8bf7\u6c42(huawei.com)\u3002 DNS64\u6536\u5230\u8bf7\u6c42\u62a5\u6587\u540e\uff0c\u5148\u89e3\u6790AAAA\u8bf7\u6c42\uff0c\u5982\u679c\u89e3\u6790\u4e0d\u5230IPv6\u5730\u5740\uff0c\u518d\u53d1\u8d77A\u8bf7\u6c42\uff0c\u901a\u8fc7\u89e3\u6790\u53d1\u73b0\u6b64 \u670d \u52a1 \u5730 \u5740 \u4e3a IPv4 \u5730 \u5740 \uff0c \u6839 \u636e \u914d \u7f6e \u7684 Prefix64::/n \uff08 \u5728 \u672c \u4f8b \u4e2d \u662f 9b::/96 \uff09 \uff0c \u5408 \u6210 NAT64 \u5730\u5740 \uff0864:FF9B::0A01:0101\uff09\u3002 DNS64\u5c06\u5e94\u7b54\u53d1\u7ed9\u7528\u6237\u3002 \u7528\u6237\u6536\u5230DNS64\u7684\u56de\u590d\u540e\uff0c\u53d1\u9001IPv6\u62a5\u6587\u7ed9\u8be5\u76ee\u6807\u670d\u52a1\u5668\u3002 FW\u6536\u5230\u7528\u6237\u53d1\u51fa\u7684IPv6\u62a5\u6587\u540e\uff0c\u4f7f\u7528\u5730\u5740\u8f6c\u6362\u7b97\u6cd5\u63d0\u53d6\u51faIPv6\u62a5\u6587\u4e2d\u7684IPv4\u5730\u5740(10.1.1.1)\uff0c\u4ee5\u6b64IPv4 \u5730\u5740\u4f5c\u4e3aIPv4\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u3002\u7136\u540e\u6839\u636eNAT64\u7b56\u7565\u914d\u7f6e\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u4ee5NAT\u5730\u5740\u6c60\u4e2d\u7684\u5730\u5740\u4e3aIPv4 \u62a5\u6587\u7684\u6e90\u5730\u5740(\u4f8b\u598210.1.1.100)\uff0c\u5c06IPv6\u62a5\u6587\u8f6c\u6362\u4e3aIPv4\u62a5\u6587\uff0c\u53d1\u9001\u7ed9IPv4\u7f51\u7edc\u4e2d\u7684\u670d\u52a1\u5668\u3002\u5e76\u751f\u6210\u6709\u5730\u5740\u5bf9\u5e94\u5173\u7cfb\u7684\u4f1a\u8bdd\u8868\u3002 \u670d\u52a1\u5668\u6536\u5230\u62a5\u6587\u540e\uff0c\u56de\u590d\u54cd\u5e94\u62a5\u6587\u3002 NAT64\u6536\u5230IPv4\u7f51\u7edc\u4e2d\u670d\u52a1\u5668\u7684\u54cd\u5e94\u62a5\u6587\u540e\uff0c\u6839\u636e\u4f1a\u8bdd\u8868\u5c06IPv4\u62a5\u6587\u8f6c\u6362\u4e3aIPv6\u62a5\u6587\uff0c\u7136\u540e\u53d1\u9001\u81f3IPv6 \u7528\u6237\u3002 \u9700\u8981DNS64\u914d\u5408\uff1b\u53ef\u7528\u77e5\u540dNAT64\u524d\u7f0064:FF9B::/96\u6216\u81ea\u5b9a\u4e49\u524d\u7f00\uff1b\u914d\u7f6eDNS64\u65f6\uff0c\u9700\u786e\u4fddNAT64\u524d\u7f00\u548c\u524d\u7f00\u957f\u5ea6\u4e0eFW\u4e0a\u7684\u914d\u7f6e\u76f8\u540c \u573a\u666f2\uff1aNAT64\uff08\u9759\u6001\u6620\u5c04\uff09 \u00b6 \u9759\u6001NAT64\u4e0d\u4ec5\u53ef\u4ee5\u5b9e\u73b0IPv6\u7528\u6237\u8bbf\u95eeIPv4\u670d\u52a1\u5668\uff0c\u4e5f\u4e3aIPv4\u7528\u6237\u8bbf\u95eeIPv6\u670d\u52a1\u5668\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u6848\u3002 IPv4\u7528\u6237\u5411DNS\u53d1\u8d77A\u8bf7\u6c42\uff08Huawei.com\uff09\u3002 DNS\u6536\u5230\u8bf7\u6c42\u62a5\u6587\u540e\uff0c\u89e3\u6790\u57df\u540d\u5bf9\u5e94\u7684IPv4\u5730\u5740100.1.1.1\uff08A\u8bf7\u6c42\u5982\u679c\u65e0\u6cd5\u89e3\u6790IPv4\u5730\u5740\uff0c\u62a5\u6587\u5c06\u4e22\u5f03\u3002\u6b64\u573a\u666f\u4e2d\uff0c\u57df\u540d\u4e0e\u5730\u5740\u5173\u7cfb\u4e00\u822c\u5df2\u7ecf\u63d0\u524d\u5728DNS\u8bbe\u5b9a\u597d\uff09\uff0c\u7136\u540e\u53d1\u9001\u56de\u590d\u62a5\u6587\u7ed9\u7528\u6237\u3002 \u7528\u6237\u6536\u5230DNS\u7684\u56de\u590d\u62a5\u6587\u540e\uff0c\u628a\u89e3\u6790\u7684\u5730\u5740\u4f5c\u4e3a\u76ee\u7684\u5730\u5740\u53d1\u5f80\u8fdc\u7aef\u670d\u52a1\u5668\u3002 NAT64\u8bbe\u5907\u6536\u5230\u7528\u6237\u53d1\u51fa\u7684IPv4\u62a5\u6587\u540e\uff0c\u6839\u636e\u4e8b\u5148\u8bbe\u7f6e\u597d\u7684\u9759\u6001\u6620\u5c04\u5173\u7cfb\uff08\u4f1a\u4ea7\u6210Server-Map\u8868\uff09\uff0c\u628a\u62a5\u6587\u7684\u76ee\u7684IPv4\u5730\u5740\u8f6c\u6362\u6210\u5bf9\u5e94\u7684IPv6\u5730\u57403000::2\uff0c\u4ee5\u6b64IPv6\u5730\u5740\u4f5c\u4e3aIPv6\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\uff0c\u628a IPv4\u62a5\u6587\u4e0e\u8bbe\u7f6e\u597d\u7684NAT64\u524d\u7f00\u5408\u6210IPv6\u62a5\u6587\u7684\u6e90\u5730\u5740\uff0864:ff9b::c801:0101\uff09\uff0c\u5b8c\u6210IPv4\u62a5\u6587\u5230IPv6 \u62a5\u6587\u7684\u8f6c\u6362\uff0c\u53d1\u9001\u7ed9IPv6\u7f51\u7edc\u4e2d\u7684\u670d\u52a1\u5668\u3002\u5e76\u751f\u6210\u4f1a\u8bdd\u8868\u3002 \u670d\u52a1\u5668\u6536\u5230\u62a5\u6587\u540e\uff0c\u56de\u590d\u54cd\u5e94\u62a5\u6587\u3002 NAT64\u6536\u5230IPv6\u7f51\u7edc\u4e2d\u670d\u52a1\u5668\u7684\u54cd\u5e94\u62a5\u6587\u540e\uff0c\u6839\u636e\u4f1a\u8bdd\u8868\u5c06IPv6\u62a5\u6587\u8f6c\u6362\u4e3aIPv4\u62a5\u6587\uff0c\u7136\u540e\u53d1\u9001\u81f3 IPv4\u7528\u6237\u3002 \u9700\u5728NAT64\u8bbe\u5907\u4e0a\u914d\u7f6eIPv4\u5730\u5740\u4e0eIPv6\u5730\u5740\u7684\u9759\u6001\u6620\u5c04\uff0c\u8be5\u6620\u5c04\u4e0d\u4f1a\u8001\u5316\u3002 NAT64\uff08IPv6 \u8282\u70b9\u4e3b\u52a8\u8bbf\u95ee IPv4 \u670d\u52a1\u5668\uff09 \u00b6 \u62d3\u6251\u53ca\u9700\u6c42 \u00b6 PC1\u662fIPv4\u7f51\u7edc\u7684\u4e00\u4e2a\u8282\u70b9\uff0c\u5904\u4e8eTrust\u5b89\u5168\u57df\u3002 PC2\u662fIPv6\u7f51\u7edc\u7684\u4e00\u4e2a\u8282\u70b9\uff08\u53ef\u80fd\u662f\u4e00\u53f0\u670d\u52a1\u5668\uff09\uff0c\u5904\u4e8eUntrust\u5b89\u5168\u57df\u3002 \u5728\u9632\u706b\u5899\u4e0a\u5b8c\u6210NAT64\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC2\u80fd\u591f\u4e3b\u52a8\u53d1\u8d77\u6d41\u91cf\u8bbf\u95eePC1\u3002 \u5728\u672c\u5b9e\u9a8c\u4e2d\uff0c\u9632\u706b\u5899\u4ee5\u534e\u4e3aUSG6000 V5R1C60\u7684\u914d\u7f6e\u4e3a\u4f8b\u8fdb\u884c\u4ecb\u7ecd\u3002 \u914d\u7f6e\u53ca\u5b9e\u73b0 \u00b6 FW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u6ca1\u6709\u8bbe\u7f6eDNS64\uff0c\u56e0\u6b64PC2\u76f4\u63a5\u4f7f\u75283001::0101:0102\u8fd9\u4e2a\u5730\u5740\u6765\u8bbf\u95eePC1\uff0c\u4f46\u662f\u4e3a\u4ec0\u4e48\u662f\u8fd9\u4e2a\u5730\u5740\uff1f3001::/96\u8fd9\u4e2a\u524d\u7f00\u662f\u6211\u4eec\u5728\u914d\u7f6e\u7684\u65f6\u5019\u6307\u5b9a\u7684\uff0c\u800c\u8fd9\u4e2a\u76ee\u7684\u5730\u5740\u7684\u6700\u540e32bit\u4e5f\u5c31\u662f 0101:0102\uff0c\u6362\u7b97\u621010\u8fdb\u5236\u5c31\u662f1.1.1.2\uff0c\u56e0\u6b64\u5f53\u9632\u706b\u5899\u6536\u5230\u76ee\u7684\u5730\u5740\u4e3a3001::0101:0102\u7684IPv6\u6570\u636e\u5305\u65f6\uff0c\u6839\u636e\u8be5\u5730\u5740\u7684\u6700\u540e32bit\u8ba1\u7b97\u5f97\u5230IPv4\u5730\u5740\uff0c \u8fd9\u5c31\u662f\u534f\u8bae\u8f6c\u6362\u540e\u7684IPv4\u76ee\u7684\u5730\u5740\uff0c\u800cIPv4\u6e90\u5730\u5740\u5219\u4eceNAT64\u5730\u5740\u6c60\u4e2d\u6311\u4e00\u4e2a\u3002 \u6b64\u65f6\u5728\u9632\u706b\u5899\u4e0a\u80fd\u770b\u5230\u5982\u4e0bIPv6\u4f1a\u8bdd\u8868\u9879\uff1a NAT64\uff08IPv4 \u8282\u70b9\u4e3b\u52a8\u8bbf\u95ee IPv6 \u670d\u52a1\u5668\uff09 \u00b6 \u62d3\u6251\u53ca\u9700\u6c42 \u00b6 PC1\u662fIPv4\u7f51\u7edc\u7684\u4e00\u4e2a\u8282\u70b9\uff0c\u5904\u4e8eTrust\u5b89\u5168\u57df\uff1bPC2\u662fIPv6\u7f51\u7edc\u7684\u4e00\u4e2a\u8282\u70b9\uff0c\u5904\u4e8eUntrust\u5b89\u5168\u57df\u3002\u5728\u9632\u706b\u5899\u4e0a\u5b8c\u6210NAT64\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC1\u80fd\u591f\u4e3b\u52a8\u53d1\u8d77\u6d41\u91cf\u8bbf\u95eePC2\u3002 \u5728\u672c\u5b9e\u9a8c\u4e2d\uff0c\u9632\u706b\u5899\u4ee5\u534e\u4e3aUSG6000 V5R1C60\u7684\u914d\u7f6e\u4e3a\u4f8b\u8fdb\u884c\u4ecb\u7ecd\u3002 \u914d\u7f6e\u53ca\u5b9e\u73b0 \u00b6 FW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a [FW] interface GigabitEthernet 1/0/1 [FW-GigabitEthernet1/0/1] ip address 1.1.1.1 24 [FW] firewall zone trust [FW-zone-trust] add interface GigabitEthernet1/0/1 [FW] ipv6 [FW] interface GigabitEthernet 1/0/2 [FW-GigabitEthernet1/0/2] ipv6 enable [FW-GigabitEthernet1/0/2] ipv6 address 2001::2 64 #\u6fc0\u6d3b\u63a5\u53e3\u7684NAT64\u529f\u80fd [FW-GigabitEthernet1/0/2] nat64 enable [FW] firewall zone untrust [FW-zone-untrust] add interface GigabitEthernet1/0/2 #\u914d\u7f6eNAT64\u524d\u7f00\uff0cPC1\u8bbf\u95eePC2\u7684\u62a5\u6587\u5728IPv6\u7f51\u7edc\u4e2d\u4f20\u8f93\u65f6\u4f7f\u7528\u7684\u6e90\u5730\u5740\u7531NAT64\u524d\u7f00\u548cPC1\u7684IPv4\u5730\u5740\u7ec4\u5408\u800c\u6210\uff1a [FW] nat64 prefix 3001:: 96 #\u914d\u7f6eNAT64\u9759\u6001\u6620\u5c04\u5173\u7cfb\uff0c\u5c06PC2\u7684IPv6\u5730\u57402001::1\u6620\u5c04\u4e3aIPv4\u5730\u57401.1.1.10\uff0cPC1\u5c06\u4ee51.1.1.10\u4e3a\u76ee\u7684\u5730\u5740\u8bbf\u95eePC2\uff1a [FW] nat64 static 2001::1 1.1.1.10 unr-route #\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff1a [FW] security-policy [FW-policy-security] rule name policy_sec_1 [FW-policy-security-rule-policy_sec_1] source-zone trust [FW-policy-security-rule-policy_sec_1] destination-zone untrust [FW-policy-security-rule-policy_sec_1] destination-address 2001::1 64 [FW-policy-security-rule-policy_sec_1] action permit \u5b8c\u6210\u914d\u7f6e\u540e\uff0cPC1\u5373\u53efping\u901a1.1.1.10\uff0c\u4e5f\u5373PC2\u3002\u5728FW\u4efb\u610f\u89c6\u56fe\u4e0b\u6267\u884c**display firewall ipv6 session** table \uff0c\u67e5\u770bNAT64\u7684\u4f1a\u8bdd\u8868\u4fe1\u606f\u3002 MPLS \u4e0e MPLS VPN \u00b6 MPLS \u57fa\u7840 MPLS \u6982\u8ff0 \u00b6 IP\u8def\u7531\u5176\u5b9e\u5df2\u7ecf\u6709\u4e0d\u77ed\u7684\u5386\u53f2\u4e86\uff0c\u5728IP\u53d1\u5c55\u7684\u8fc7\u7a0b\u4e2d\uff0c\u66fe\u7ecf\u51fa\u73b0\u8fc7\u8bb8\u591a\u7684\u4e89\u8bba\uff0c\u4f8b\u5982\u8def\u7531\u548c\u4ea4\u6362\u901f\u5ea6\u4e4b\u4e89\uff0c \u8def\u7531\u548c\u6807\u7b7e\u4ea4\u6362\u7684\u5730\u4f4d\u4e4b\u4e89\u7b49\u7b49\u3002\u65e9\u5148\u7684\u901a\u8fc7\u8f6f\u4ef6\u5b9e\u73b0\u7684\u8def\u7531\u662f\u201c\u5f88\u6162\u7684\u201d\uff0c\u662f\u201c\u8017\u65f6\u3001\u8017\u8bbe\u5907\u8d44\u6e90\u7684\u201d\uff0c \u52a0\u4e4b\u67e5\u8868\u7684\u673a\u5236\u3001\u76f8\u5173\u6570\u636e\u5b57\u6bb5\u7684\u91cd\u5199\u4f7f\u5f97\u5176\u901f\u5ea6\u66f4\u52a0\u7f13\u6162\uff0c\u800c\u5bf9\u4e8e\u4ea4\u6362\u6280\u672f\uff0c\u7531\u4e8e\u5bf9\u6570\u636e\u5e27\u7684\u8bfb\u53d6\u201c\u8f83\u6d45\u201d\uff0c\u52a0\u4e0a\u672c\u8eab\u7684\u673a\u5236\u3001\u901a\u8fc7\u4e13\u7528\u7684\u786c\u4ef6\u5b9e\u73b0\u4f7f\u5f97\u5176\u901f\u5ea6\u6709\u5f88\u5927\u7a0b\u5ea6\u7684\u63d0\u5347\u3002 \u4e3a\u4e86\u52a0\u5feb\u7f51\u7edc\u7684\u5bf9\u6570\u636e\u7684\u8f6c\u53d1\u901f\u5ea6\uff0c\u4ee5\u53ca\u63d0\u9ad8\u7f51\u7edc\u7684\u53ef\u670d\u52a1\u6027\u548c\u5bf9\u591a\u6837\u5316\u4e1a\u52a1\u7684\u652f\u6301\uff0c\u884c\u4e1a\u4e2d\u4e00\u5ea6\u6d8c\u73b0\u4e86\u8bb8\u591a\u65b0\u7684\u6280\u672f\uff0c\u4f8b\u5982ATM\u3001\u5e27\u4e2d\u7ee7\u7b49\u7b49\u3002\u5176\u4e2d\u6709\u4e00\u4e2a\u6280\u672f\u4e0d\u5f97\u4e0d\u63d0\uff0c\u90a3\u5c31\u662fMPLS\u3002\u867d\u7136\u968f\u7740\u6570\u636e\u901a\u4fe1\u6280\u672f\u7684\u98de\u901f\u53d1\u5c55\uff0cIP\u8def\u7531\u7684\u901f\u5ea6\u5df2\u7ecf\u5f97\u5230\u5de8\u5927\u7684\u63d0\u5347\uff0c\u63a7\u5236\u548c\u6570\u636e\u5c42\u9762\u7684\u673a\u5236\u90fd\u6709\u4e86\u9769\u547d\u6027\u7684\u7a81\u7834\uff0c\u4f7f\u5f97\u901f\u5ea6\u4e0a\u7684\u52a3\u52bf\u51e0\u4e4e\u6d88\u9664\uff0c\u4f46\u662fMPLS\u5e26\u6765\u7684\u9769\u547d\u6027\u7a81\u7834\uff0c\u548c\u4e30\u5bcc\u7684\u4e1a\u52a1\u652f\u6301\u80fd\u529b\u4f9d\u7136\u4f7f\u5f97\u5b83\u5728\u8fd0\u8425\u5546\u7f51\u7edc\u4e2d\u5f97\u5230\u5e7f\u6cdb\u7684\u90e8\u7f72\u3002 \u9996\u5148\u56de\u987e\u4e00\u4e0bIP\u8def\u7531\u7684\u6982\u5ff5\uff0c\u4ec0\u4e48\u662fIP\u8def\u7531\uff1f\u53ef\u4ee5\u7b80\u5355\u7684\u5c06\u8def\u7531\u7406\u89e3\u4e3a\u5f53\u4e09\u5c42\u8bbe\u5907\uff08Layer3 Device\uff09\u6536\u5230 \u4e00\u4e2aIP\u6570\u636e\u5305\u65f6\uff0c\u5b83\u62ff\u7740\u6570\u636e\u5305\u7684\u76ee\u7684IP\u5730\u5740\u5728\u81ea\u5df1\u7684\u8def\u7531\u8868\u4e2d\u8fdb\u884c\u67e5\u627e\uff0c\u5982\u679c\u627e\u5230\u76f8\u5339\u914d\u7684\u8868\u9879\uff0c\u5219\u5c06\u6570\u636e\u5305\u4f9d\u7167\u8868\u9879\u6240\u6307\u793a\u7684\u51fa\u63a5\u53e3\u548c\u4e0b\u4e00\u8df3IP\u5730\u5740\u8f6c\u53d1\u51fa\u53bb\u3002 \u7b80\u5355\u7684\u4e00\u53e5\u8bdd\uff0c\u5305\u542b\u7684\u4e1c\u897f\u5374\u662f\u975e\u5e38\u591a\u7684\uff0c\u5b9e\u9645\u4e0a\u8def\u7531\u7684\u52a8\u4f5c\u4ece\u5fae\u89c2\u5c42\u9762\u6765\u63a2\u8ba8\uff0c\u53ef\u4ee5\u62c6\u89e3\u6210\u590d\u6742\u7684\u8fc7\u7a0b\uff0c \u4f8b\u5982\u5f53\u76ee\u7684\u5730\u5740\u5728\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u65f6\uff0c\u9ed8\u8ba4\u91c7\u7528\u201c\u6700\u957f\u5339\u914d\u539f\u5219\u201d\uff0c\u9010\u4f4d\uff08Bit by Bit\uff09\u5730\u5c06\u76ee\u7684IP\u5730\u5740\u4e0e\u8def\u7531\u8868\u4e2d\u7684\u5404\u4e2a\u8def\u7531\u524d\u7f00\u8fdb\u884c\u5339\u914d\uff0c\u8fd9\u663e\u7136\u662f\u975e\u5e38\u8017\u65f6\u7684\uff0c\u518d\u52a0\u4e0a\u5982\u679c\u627e\u5230\u5339\u914d\u9879\uff0c\u800c\u6240\u5339\u914d\u9879\u7684\u4e0b\u4e00\u8df3\u5982\u679c\u5e76\u975e\u76f4\u8fde\uff0c\u5219\u8fd8\u8981\u8fdb\u4e00\u6b65\u9012\u5f52\uff1b\u518d\u5982\u8def\u7531\u67e5\u627e\u8fc7\u7a0b\u5b8c\u6210\u540e\uff0c\u8fd8\u9700\u5bf9\u6570\u636e\u5305\u7684IP\u5934\u90e8\u8fdb\u884c\u4fee\u6539\uff08TTL\u503c\u51cf\u4e00\u7b49\uff09\uff0c \u5e76\u91cd\u5199\u6570\u636e\u5e27\u5934\u90e8\uff0c\u800c\u5982\u679c\u6570\u636e\u5e27\u5934\u90e8\u91cd\u5199\u8fc7\u7a0b\u4e2d\u7f3a\u5c11\u4e8c\u5c42\u4fe1\u606f\uff08\u5982MAC\uff09\uff0c\u90a3\u4e48\u5c31\u8fd8\u9700\u8981\u542f\u52a8\u76f8\u5173\u7684\u534f\u8bae\u6216\u673a\u5236\u53bb\u67e5\u627e\uff08\u5982ARP\uff09\u3002\u56e0\u6b64\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\uff0cIP\u8def\u7531\u4e00\u5ea6\u88ab\u8ba4\u4e3a\u662f\u901f\u5ea6\u7f13\u6162\u7684\u3002 MPLS\u6280\u672f\u7684\u53d1\u5c55\uff0c\u7ed9\u884c\u4e1a\u5e26\u6765\u4e86\u8bb8\u591a\u9769\u65b0\uff0c\u4e5f\u5e26\u6765\u4e86\u8bb8\u591a\u5e94\u7528\u548c\u5546\u673a\u3002\u521d\u671f\u6700\u663e\u8457\u7684\u4eae\u70b9\u81ea\u7136\u662f\u5728\u901f\u5ea6\u4e0a\u5feb\u4e8eIP\u8def\u7531\uff0c\u56e0\u4e3a\u8f6c\u53d1\u6807\u7b7e\u6570\u636e\u65f6\u4ec5\u9700\u5bf9\u6807\u7b7e\u8fdb\u884c\u67e5\u8be2\u3002\u7136\u800cMPLS\u7684\u4eae\u70b9\u8fdc\u4e0d\u53ea\u662f\u901f\u5ea6\u4e0a\u7684\u4f18\u52bf\uff0c\u968f\u7740IP \u8def\u7531\u6280\u672f\u7684\u53d1\u5c55\uff0c\u5176\u901f\u5ea6\u4e0a\u7684\u77ed\u677f\u5df2\u7ecf\u5f97\u5230\u6781\u5927\u7684\u6539\u8fdb\uff0c\u4f46\u662f\u8fd9\u5b8c\u5168\u65e0\u6cd5\u963b\u6321MPLS\u7684\u5e7f\u6cdb\u90e8\u7f72\u548c\u5e94\u7528\u3002 \u7b80\u5355\u7684\u8bf4\uff0cMPLS\u7684\u601d\u60f3\u5c31\u662f\u5728IP\u62a5\u6587\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u201c\u6807\u7b7e\u5934\u90e8\u201d\uff0c\u8fd9\u4e2a\u6807\u7b7e\u5934\u90e8\u53ef\u4ee5\u89c6\u4e3a\u662f2.5\u5c42\u7684\u6982\u5ff5\uff0c \u4e5f\u5c31\u662f\u8bf4\u6807\u7b7e\u5934\u90e8\u662f\u538b\u5728IP\u5934\u4e4b\u524d\u3001\u4e8c\u5c42\u5e27\u5934\u4e4b\u540e\u7684\u3002\u538b\u4e86MPLS\u6807\u7b7e\u5934\u7684\u6570\u636e\u79f0\u4e3a\u6807\u7b7e\u62a5\u6587\uff08Labeled Packet\uff09\uff0c\u6807\u7b7e\u62a5\u6587\u5728MPLS\u7f51\u7edc\u4e2d\u88ab\u8f6c\u53d1\u65f6\uff0c\u8f6c\u53d1\u8bbe\u5907\u53ea\u9700\u67e5\u770b\u6807\u7b7e\u5934\u4e2d\u7684\u6807\u7b7e\u503c\uff0c\u5373\u53ef\u5feb\u901f\u7684\u505a\u51fa\u51b3\u7b56\u5e76\u5c06\u62a5\u6587\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u901f\u5ea6\u5f88\u5feb\u3002\u518d\u8005\u7531\u4e8e\u52a0\u4e86\u4e00\u5c42\u6807\u7b7e\uff0c\u8fd9\u4f7f\u5f97IP\u62a5\u6587\u80fd\u591f\u88ab\u201c\u9690\u85cf\u201d\u5728\u6807\u7b7e\u5934\u540e\u9762\uff0c \u8fd9\u5c31\u53ef\u4ee5\u89e3\u51b3\u8bf8\u591a\u95ee\u9898\uff0c\u4f8b\u5982BGP\u8def\u7531\u9ed1\u6d1e\u7684\u95ee\u9898\u7b49\uff0c\u5f53\u7136\u66f4\u52a0\u5e26\u6765\u4e86\u8bf8\u591a\u65b0\u7684\u4e1a\u52a1\uff0c\u4f8b\u5982VPN\u4e1a\u52a1\uff0c\u6d41\u91cf\u5de5\u7a0b\u5e94\u7528\u7b49\u7b49\u3002 MPLS \u672f\u8bed \u00b6 LSR \u00b6 LSR\uff08Label Switch Router\uff0c\u6807\u7b7e\u4ea4\u6362\u8def\u7531\u5668\uff09\u662f\u652f\u6301\u5e76\u6fc0\u6d3bMPLS\u7684\u8def\u7531\u5668\u3002LSR\u80fd\u591f\u7406\u89e3MPLS\u6807\u7b7e\u5e76\u4e14\u80fd\u591f\u5bf9MPLS\u6807\u7b7e\u5305\u8fdb\u884c\u4ea4\u6362\u3002\u6709\u4e09\u79cd\u7c7b\u578b\u7684LSR\uff1a Ingress LSR\uff1a\u6216\u8005\u53eb\u5165\u7ad9LSR\u3002\u5982\u4e0a\u56fe\u6240\u793a\uff0cR1\u3001R2\u3001R3\u6784\u5efa\u4e86MPLS\u57df\uff0c\u5176\u4e2dR1\u53caR3\u8eab\u5904MPLS \u57df\u8fb9\u754c\uff0c\u5b83\u4eec\u4e00\u4fa7\u8fde\u63a5\u7740MPLS\u7f51\u7edc\uff0c\u53e6\u4e00\u4fa7\u8fde\u63a5\u7740IP\u7f51\u7edc\u3002\u5f53\u6211\u4eec\u8003\u8651IP\u6570\u636e\u5305\u4eceR1\u5de6\u4fa7\u7684IP\u7f51\u7edc\u5230\u8fbeR1\uff0c\u7136\u540e\u88abR1\u8f6c\u53d1\u5230MPLS\u7f51\u7edc\u65f6\uff0c\u6211\u4eec\u79f0R1\u4e3a\u201c\u5165\u7ad9LSR\u201d\uff0c\u5b83\u6b64\u523b\u8d1f\u8d23\u5c06\u6536\u5230\u7684IP\u62a5\u6587\u538b\u4e0aMPLS\u6807\u7b7e\uff0c\u7136\u540e\u8f6c\u53d1\u5230MPLS\u7f51\u7edc\u3002 Intermediate LSR\uff1aR2\u5c31\u662f\u4e00\u53f0Intermediate LSR\uff08\u4e5f\u53ebtransit LSR\uff09\uff0c\u5b83\u6ca1\u6709\u8fde\u63a5\u4efb\u4f55\u7684IP\u7f51\u7edc\uff0c \u800c\u662f\u5b8c\u5168\u8eab\u5904MPLS\u7f51\u7edc\uff0c\u53ea\u8d1f\u8d23\u6807\u7b7e\u6570\u636e\u4ea4\u6362\u3002 Egress LSR\uff1a\u51fa\u7ad9LSR\uff0c\u4f8b\u5982\u4e0a\u56fe\u6240\u793a\u7684R3\uff0c\u5bf9\u4e8e\u4ece\u5de6\u5411\u53f3\u7684\u6570\u636e\u6d41\u6765\u8bf4\uff0c\u5b83\u4eec\u88abR1\u538b\u4e0aMPLS \u6807\u7b7e\u540e\uff0c\u88abR2\u8f6c\u53d1\u7ed9\u4e86R3\uff0c\u73b0\u5728\u8fd9\u4e9b\u6570\u636e\u8981\u4eceMPLS\u7f51\u7edc\u8f6c\u53d1\u5230IP\u7f51\u7edc\uff0cR3\u8d1f\u8d23\u5c06\u8fd9\u4e9b\u6570\u636e\u7684\u6807\u7b7e\u6808\u79fb\u9664\uff0c\u518d\u5c06\u5f97\u5230\u7684IP\u62a5\u6587\u8f6c\u53d1\u5230\u76ee\u7684\u57303.3.3.0.24\u3002 FEC \u00b6 FEC\uff08Forwarding Equivalence Class\uff0c\u8f6c\u53d1\u7b49\u4ef7\u7c7b\uff09\uff0c\u662f\u5728\u8f6c\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u5177\u6709\u76f8\u540c\u5904\u7406\u65b9\u5f0f\u548c\u5904\u7406\u5f85\u9047\u7684\u6570\u636e\u6d41\uff0c\u53ef\u901a\u8fc7\u5730\u5740\u3001\u96a7\u9053\u3001CoS\u7b49\u65b9\u5f0f\u6765\u6807\u8bc6\uff0c\u901a\u5e38\u5728\u4e00\u53f0\u8bbe\u5907\u4e0a\uff0c\u5bf9\u4e8e\u4e00\u4e2aFEC\u5206\u914d\u76f8\u540c\u7684\u6807\u7b7e\u3002\u5c5e\u4e8e\u4e00\u4e2aFEC\u7684\u6d41\u91cf\u5177\u6709\u76f8\u540c\u7684\u8f6c\u53d1\u65b9\u5f0f\u3001\u8f6c\u53d1\u8def\u5f84\u548c\u8f6c\u53d1\u5f85\u9047\u3002\u4f46\u662f\u5e76\u4e0d\u662f\u6240\u6709\u62e5\u6709\u76f8\u540c\u6807\u7b7e\u7684\u62a5\u6587\u90fd\u5c5e\u4e8e\u4e00\u4e2aFEC\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u62a5\u6587\u7684EXP\u503c\u53ef\u80fd\u4e0d\u76f8\u540c\uff0c\u6267\u884c\u65b9\u5f0f\u53ef\u80fd\u4e0d\u540c\uff0c\u56e0\u6b64\u5b83\u4eec\u53ef\u80fd\u5c5e\u4e8e\u4e0d\u540c\u7684FEC\u3002\u51b3\u5b9a\u62a5\u6587\u5c5e\u4e8e\u54ea\u4e00\u4e2aFEC\u7684\u8def\u7531\u5668\u662f\u5165\u7ad9LSR\uff0c\u56e0\u4e3a\u662f\u5b83\u5bf9\u62a5\u6587\u8fdb\u884c\u5206\u7c7b\u548c\u538b\u5165\u6807\u7b7e\u3002 \u4e0b\u9762\u662f\u4e00\u4e9bFEC\u7684\u8303\u4f8b\uff1a \u76ee\u7684IP\u5730\u5740\u5339\u914d\u540c\u4e00\u4e2a\u7279\u5b9a\u524d\u7f00\u7684\u62a5\u6587\uff1b \u5c5e\u4e8e\u67d0\u4e2a\u7279\u5b9a\u7ec4\u64ad\u7ec4\u7684\u7ec4\u64ad\u62a5\u6587\uff1b \u6839\u636e\u8fdb\u7a0b\u6216\u8005IP DSCP\u5b57\u6bb5\u6709\u76f8\u540c\u5904\u7406\u65b9\u5f0f\u7684\u62a5\u6587\u3002 \u6ce8\uff1a\u4e00\u6761FEC\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u6d41\uff0c\u4f46\u4e0d\u662f\u4e00\u4e2a\u6d41\u4e00\u4e2aFEC\uff0c\u6bd4\u5982\u4e00\u53f0\u4e3b\u673a\u5728\u770b\u65b0\u6d6a\u7684\u7f51\u9875\uff0c\u8fd9\u662f\u4e00\u4e2a\u6d41\uff0c\u53c8\u5728\u770b\u65b0\u6d6a\u7684\u89c6 LSP \u00b6 LSP\uff08Label Switched Path\uff0c\u6807\u7b7e\u4ea4\u6362\u8def\u5f84\uff09\uff0c\u6807\u7b7e\u62a5\u6587\u7a7f\u8d8aMPLS\u7f51\u7edc\u5230\u8fbe\u76ee\u7684\u5730\u6240\u8d70\u7684\u8def\u5f84\u3002MPLS \u7f51\u7edc\u901a\u8fc7\u6807\u7b7e\u5206\u914d\u534f\u8bae\u81ea\u884c\u8fdb\u884c\u6807\u7b7e\u7684\u5206\u914d\u548c\u5b66\u4e60\uff0c\u4e3a\u6d41\u91cf\u5efa\u7acb\u4e00\u6761\u6807\u7b7e\u8f6c\u53d1\u7684\u901a\u9053\u3002LSP\u662f\u5355\u5411\u7684\u3002\u5b9e\u9645\u4e0a\uff0cLSP\u662f\u62a5\u6587\u5728\u7a7f\u8d8aMPLS\u7f51\u7edc\u6216\u8005\u90e8\u5206MPLS\u7f51\u7edc\u65f6\u7684\u8def\u5f84\u3002\u4e3a\u4e86\u6ee1\u8db3\u901a\u4fe1\u8282\u70b9\u4e4b\u95f4\u7684\u53cc\u5411\u901a\u4fe1\uff0c\u6211\u4eec\u5f80\u5f80\u9700\u8981\u5efa\u7acb\u53cc\u5411\u7684LSP\u3002 LSP\u5206\u4e3a\u9759\u6001LSP\u548c\u52a8\u6001LSP\u4e24\u79cd\u3002\u9759\u6001LSP\u7531\u7ba1\u7406\u5458\u624b\u5de5\u914d\u7f6e\uff0c\u52a8\u6001LSP\u5219\u5229\u7528\u8def\u7531\u534f\u8bae\u548c\u6807\u7b7e\u53d1\u5e03\u534f\u8bae\u52a8\u6001\u5efa\u7acb\u3002 \u9759\u6001LSP\u662f\u7528\u6237\u901a\u8fc7\u624b\u5de5\u4e3a\u5404\u4e2a\u8f6c\u53d1\u7b49\u4ef7\u7c7b\u5206\u914d\u6807\u7b7e\u800c\u5efa\u7acb\u7684\u3002\u624b\u5de5\u5206\u914d\u6807\u7b7e\u9700\u8981\u9075\u5faa\u7684\u539f\u5219\u662f\uff1a\u4e0a\u6e38LSR \u51fa\u6807\u7b7e\u7684\u503c\u5c31\u662f\u4e0b\u6e38LSR\u5165\u6807\u7b7e\u7684\u503c\u3002 \u7531\u4e8e\u9759\u6001LSP\u6cbf\u9014\u7684\u5404LSR\u4e0d\u80fd\u76f8\u4e92\u611f\u77e5\u5230\u6574\u4e2aLSP\u7684\u60c5\u51b5\uff0c\u56e0\u6b64\u9759\u6001LSP\u662f\u4e00\u4e2a\u672c\u5730\u7684\u6982\u5ff5\u3002 \u9759\u6001LSP\u4e0d\u4f7f\u7528\u6807\u7b7e\u53d1\u5e03\u534f\u8bae\uff0c\u4e0d\u9700\u8981\u4ea4\u4e92\u63a7\u5236\u62a5\u6587\uff0c\u56e0\u6b64\u6d88\u8017\u8d44\u6e90\u6bd4\u8f83\u5c0f\uff0c\u9002\u7528\u4e8e\u62d3\u6251\u7ed3\u6784\u7b80\u5355\u5e76\u4e14\u7a33\u5b9a\u7684\u5c0f\u578b\u7f51\u7edc\u3002\u4f46\u901a\u8fc7\u9759\u6001\u65b9\u5f0f\u5206\u914d\u6807\u7b7e\u5efa\u7acb\u7684LSP\u4e0d\u80fd\u6839\u636e\u7f51\u7edc\u62d3\u6251\u53d8\u5316\u52a8\u6001\u8c03\u6574\uff0c\u9700\u8981\u7ba1\u7406\u5458\u5e72\u9884\u3002 MPLS \u6807\u7b7e \u00b6 \u4e00\u4e2aIP\u6570\u636e\u5305\u5982\u679c\u8981\u8fdb\u5165MPLS\u7f51\u7edc\uff0c\u4f1a\u88abLSR\u538b\u5165\u6807\u7b7e\u6808\uff0c\u4e00\u4e2a\u6807\u7b7e\u6808\u4e2d\u53ef\u80fd\u5305\u542b\u4e00\u5c42\u6807\u7b7e\uff0c\u4e5f\u53ef\u80fd\u5305\u542b\u591a\u5c42\u6807\u7b7e\u3002\u6807\u7b7e\u5934\u90e8\u7684\u5b57\u6bb5\u683c\u5f0f\u5982\u4e0a\u56fe\u6240\u793a\u3002\u4ee5\u4e0b\u5c55\u793a\u7684\u662f\u4e00\u4e2a\u643a\u5e26\u591a\u4e2a\u6807\u7b7e\u5934\u90e8\u7684\u6807\u7b7e\u62a5\u6587\uff1a \u4e00\u4e2aIP\u6570\u636e\u5305\u53ef\u4ee5\u88ab\u538b\u5165\u4e00\u5c42MPLS\u6807\u7b7e\uff0c\u4e5f\u53ef\u4ee5\u662f\u591a\u5c42\u6807\u7b7e\u3002\u4f8b\u5982\u4e0a\u56fe\u6240\u793a\u7684IP\u6570\u636e\u5305\uff0c\u5c31\u88ab\u538b\u5165\u4e86\u4e09\u5c42\u6807\u7b7e\u3002\u5728\u6bcf\u5c42\u6807\u7b7e\u5934\u90e8\u4e2d\u90fd\u6709\u4e00\u4e2aBoS\u4f4d\u6765\u6807\u8bc6\u672c\u6807\u7b7e\u5934\u90e8\u662f\u5426\u662f\u6807\u7b7e\u6808\u7684\u6808\u4f4e\uff08\u6bcf\u4e2a\u6807\u7b7e\u5934\u90e8\u90fd\u62e5\u6709\u5b8c\u6574\u7684\u56db\u4e2a\u5b57\u6bb5\uff09\uff0c\u5982\u679c\u672c\u6807\u7b7e\u5934\u5df2\u7ecf\u662f\u6808\u5e95\uff0c\u4e5f\u5c31\u662f\u6700\u540e\u4e00\u5c42\u6807\u7b7e\uff0c\u6216\u8005\u8bf4\u540e\u9762\u5c31\u662fIP\u5934\u90e8\u4e86\uff0c\u90a3\u4e48\u8be5\u5c42\u6807\u7b7e\u5934\u90e8\u7684BoS\u6bd4\u7279\u503c\u88ab\u8bbe\u7f6e\u4e3a1\uff0c\u5426\u5219\u8bbe\u7f6e\u4e3a0\u3002 MPLS \u6807\u7b7e\u64cd\u4f5c \u00b6 \u6807\u7b7e\u7684\u64cd\u4f5c\u7c7b\u578b\u5305\u62ec\u6807\u7b7e\u538b\u5165\uff08Push\uff0c\u6216Insert\uff09\u3001\u6807\u7b7e\u4ea4\u6362\uff08Swap\uff09\u548c\u6807\u7b7e\u5f39\u51fa\uff08Pop\uff09\uff0c\u5b83\u4eec\u662f\u6807\u7b7e\u8f6c\u53d1\u7684\u57fa\u672c\u52a8\u4f5c\uff0c\u662f\u6807\u7b7e\u8f6c\u53d1\u4fe1\u606f\u8868\u7684\u7ec4\u6210\u90e8\u5206\u3002 Push\uff1a\u6307\u5f53IP\u62a5\u6587\u8fdb\u5165MPLS\u57df\u65f6\uff0cMPLS\u8fb9\u754c\u8bbe\u5907\u5728\u62a5\u6587\u4e8c\u5c42\u5934\u90e8\u548cIP\u5934\u90e8\u4e4b\u95f4\u63d2\u5165\u4e00\u4e2a\u65b0\u6807\u7b7e\uff1b\u6216\u8005MPLS\u4e2d\u95f4\u8bbe\u5907\u6839\u636e\u9700\u8981\uff0c\u5728\u6807\u7b7e\u6808\u9876\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u6807\u7b7e\uff08\u5373\u6807\u7b7e\u5d4c\u5957\u5c01\u88c5\uff09\u3002 Swap\uff1a\u5f53\u62a5\u6587\u5728MPLS\u57df\u5185\u8f6c\u53d1\u65f6\uff0c\u6839\u636e\u6807\u7b7e\u8f6c\u53d1\u8868\uff0c\u7528\u4e0b\u4e00\u8df3\u5206\u914d\u7684\u6807\u7b7e\uff0c\u66ff\u6362MPLS\u62a5\u6587\u7684\u6808\u9876\u6807\u7b7e\u3002 Pop\uff1a\u5f53\u62a5\u6587\u79bb\u5f00MPLS\u57df\u65f6\uff0c\u5c06MPLS\u62a5\u6587\u7684\u6807\u7b7e\u53bb\u6389\u3002 \u5728\u6700\u540e\u4e00\u8df3LSR\uff0c\u6807\u7b7e\u5df2\u7ecf\u6ca1\u6709\u4f7f\u7528\u4ef7\u503c\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u5229\u7528\u5012\u6570\u7b2c\u4e8c\u8df3\u5f39\u51fa\u7279\u6027PHP\uff08Penultimate Hop Popping\uff09\uff0c\u5728\u5012\u6570\u7b2c\u4e8c\u8df3LSR\u5904\u5c06\u6807\u7b7e\u5f39\u51fa\uff0c\u51cf\u5c11\u6700\u540e\u4e00\u8df3\u7684\u8d1f\u62c5\u3002\u6700\u540e\u4e00\u8df3LSR\u76f4\u63a5\u8fdb\u884cIP\u8f6c\u53d1\u6216\u8005\u4e0b\u4e00\u5c42\u6807\u7b7e\u8f6c\u53d1\u3002 PHP\u5728Egress LSR\u4e0a\u914d\u7f6e\u3002\u652f\u6301PHP\u7684Egress LSR\u5206\u914d\u7ed9\u5012\u6570\u7b2c\u4e8c\u8df3LSR\u7684\u6807\u7b7e\u503c\u4e3a3\u3002 \u4e0b\u9762\u662f\u4e00\u4e2a\u5c0f\u4f8b\u5b50\uff1a \u4f8b\u5982\u4e0a\u56fe\u6240\u793a\uff0cR1\u5728\u6536\u5230\u4e00\u4e2aIP\u6570\u636e\u5305\u4e4b\u540e\uff0c\u7ecf\u8fc7FIB\u8868\uff08\u8f6c\u53d1\u4fe1\u606f\u8868\uff09\u67e5\u8be2\uff0c\u5b83\u53d1\u73b0\u53bb\u5f803.3.3.0/24\u7684\u4e0b\u4e00\u8df3\u662fR2\uff0c\u5e76\u4e14\u62a5\u6587\u9700\u8981\u538b\u5165\u4e00\u5c42\u6807\u7b7e\uff0c\u6807\u7b7e\u503c\u4e3a1028\u3002\u56e0\u6b64R1\u5c06IP\u6570\u636e\u5305\u538b\u5165\u4e00\u5c42\u6807\u7b7e\u7136\u540e\u8f6c\u53d1\u7ed9R2\u3002 R2\u6536\u5230\u8fd9\u4e2a\u643a\u5e26\u4e86\u6807\u7b7e\u7684\u6807\u7b7e\u5305\uff0c\u5b83\u53d6\u51fa\u6807\u7b7e\u503c\u5e76\u5728\u81ea\u5df1\u7684\u6807\u7b7e\u8f6c\u53d1\u8868\u91cc\u8fdb\u884c\u67e5\u8be2\uff0c\u53d1\u73b0\u5165\u7ad9\u6807\u7b7e1028\u5bf9\u5e94\u51fa\u7ad9\u6807\u7b7e1026\uff0c\u4e14\u4e0b\u4e00\u8df3\u4e3aR3\uff0c\u56e0\u6b64\u5b83\u5c06\u62a5\u6587\u7684\u6807\u7b7e\u7f6e\u6362\uff08SWAP\uff09\u62101026\u5e76\u8f6c\u53d1\u7ed9R3\u3002\u540c\u6837\u7684\uff0cR3\u6536\u5230\u8fd9\u4e2a\u6807\u7b7e\u62a5\u6587\u540e\uff0c\u5728\u5176\u6807\u7b7e\u8f6c\u53d1\u8868\u91cc\u67e5\u8be2\u5165\u7ad9\u6807\u7b7e1026\uff0c\u7ed3\u679c\u53d1\u73b0\u5165\u7ad9\u6807\u7b7e1026\u5bf9\u5e94\u7684\u51fa\u7ad9\u52a8\u4f5c\u662f3\uff08\u6807\u7b7e\u503c3\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u3001\u88ab\u4fdd\u7559\u7684\u6807\u7b7e\u503c\uff0c\u5f53\u51fa\u7ad9\u6807\u7b7e\u4e3a3\u65f6\uff0c\u610f\u5473\u7740\u8981\u5f39\u51fa\u6807\u7b7e\u5934\uff09\uff0c\u56e0\u6b64\u5c06\u6807\u7b7e\u5934\u5f39\u51fa\uff0c\u8fd9\u5c31\u5f97\u5230\u4e86\u539f\u59cb\u7684IP\u62a5\u6587\uff0c\u6700\u540eR3\u5c06\u8fd9\u4e2aIP\u6570\u636e\u5305\u8f6c\u53d1\u51fa\u53bb\u3002 LSP\u7684\u5165\u53e3LSR\u88ab\u79f0\u4e3aIngress LSR\uff08\u5165\u7ad9LSR\uff09\u3002\u4f4d\u4e8eLSP\u4e2d\u95f4\u7684LSR\u88ab\u79f0\u4e3a\u4e2d\u95f4LSR\uff08Transit LSR\uff09\u3002 LSP\u7684\u51fa\u53e3LSR\u88ab\u79f0\u4e3aEgress LSR\uff08\u51fa\u7ad9LSR\uff09\u3002Ingress LSR\u53caEgress LSR\u90fd\u662fLER\u3002\u5728\u4e0a\u56fe\u4e2d\uff0c\u5bf9\u4e8e\u53bb\u5f803.3.3.0/24\u7684\u6570\u636e\u6d41\u91cf\u800c\u8a00\uff0cR1\u662fIngress LSR\uff0cR2\u662fTransit LSR\uff0cR3\u662fEgress LSR\u3002\u4e00\u6761LSP\u53ef\u4ee5\u6709 0\u4e2a\u30011\u4e2a\u6216\u591a\u4e2aTransit LSR \uff0c\u4f46\u6709\u4e14\u53ea\u6709\u4e00\u4e2aIngress LSR\u548c\u4e00\u4e2aEgress LSR \u3002 \u503c\u5f97\u4e00\u63d0\u7684\u662f\u5728\u672c\u4f8b\u4e2d\uff0cR1\u662fIngress LER\uff0c\u4e5f\u53ca\u662f\u5165\u7ad9\u7684\u8fb9\u754c\u6807\u7b7e\u4ea4\u6362\u8def\u7531\u5668\uff0c\u5b83\u5de6\u4fa7\u8fde\u63a5\u7740IP\u7f51\u7edc\uff0c\u800c\u53f3\u4fa7\u8fde\u63a5\u7740MPLS\u7f51\u7edc\u3002\u5f53R1\u6536\u5230\u4e00\u4e2aIP\u6570\u636e\u5305\u65f6\uff0c\u5b83\u4f1a\u600e\u4e48\u5904\u7406\uff1f\u5b83\u4f1a\u5728FIB\u8868\u4e2d\u67e5\u627e\u8be5IP\u62a5\u6587\u7684\u76ee\u7684IP \u5730\u5740\uff0c\u5982\u679c\u6709\u5339\u914d\u7684\u8868\u9879\u5e76\u4e14\u8be5\u8868\u9879\u6240\u6307\u793a\u7684\u4e0b\u4e00\u8df3\u662f\u4e00\u4e2aIP\u8bbe\u5907\u800c\u4e0d\u662fLSR\uff0c\u90a3\u4e48\u8fd9\u4e2a\u62a5\u6587\u4f1a\u88ab\u76f4\u63a5\u8def\u7531\u3002\u4f46\u662f\u5982\u679cFIB\u4e2d\u7684\u8868\u9879\u6307\u793a\u4e0b\u4e00\u8df3\u662f\u4e00\u53f0LSR\u5e76\u4e14\u9700\u8981\u538b\u5165\u6807\u7b7e\uff0c\u60c5\u51b5\u5c31\u4e0d\u540c\u4e86\uff0cR1\u4f1a\u7ed9IP\u62a5\u6587\u538b\u5165\u6807\u7b7e\uff0c \u7136\u540e\u518d\u628a\u8fd9\u4e2a\u6807\u7b7e\u5305\u8f6c\u53d1\u51fa\u53bb\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0cIP\u6570\u636e\u5305\u5c31\u901a\u8fc7R1\u8fdb\u5165\u4e86MPLS\u7f51\u7edc\u3002\u4e00\u65e6\u4ee5\u6807\u7b7e\u5305\u7684\u5f62\u6001\u8fdb\u5165 MPLS\u7f51\u7edc\uff0c\u5728\u8f6c\u53d1\u7684\u8fc7\u7a0b\u4e2d\u6240\u6709LSR\uff08\u9664\u4e86\u51fa\u7ad9LSR\uff09\u5c31\u53ea\u770b\u6570\u636e\u5305\u7684\u6807\u7b7e\u5934\uff0c\u5bf9\u5176\u8fdb\u884c\u67e5\u627e\u53ca\u4ea4\u6362\uff0c\u800c\u4e0d\u4f1a\u53bb\u7406\u4f1a\u6807\u7b7e\u5934\u91cc\u5934\u7684IP\u5934\u90e8\u3002\u800c\u81f3\u4e8e\u7ed9\u8fd9\u4e2a\u62a5\u6587\u538b\u5165\u7684\u6807\u7b7e\u503c\u662f\u591a\u5c11\uff0c\u6807\u7b7e\u503c\u662f\u600e\u4e48\u786e\u5b9a\u7684\uff0c\u8bf7\u7ee7\u7eed\u770b\u4e0b\u6587\u3002 MPLS \u8f6c\u53d1\u8fc7\u7a0b\u8be6\u89e3 \u00b6 \u9996\u5148\uff0c\u6211\u4eec\u8981\u638c\u63e1\u4e00\u4e9b\u57fa\u672c\u6982\u5ff5\uff1a NHLFE\uff08Next Hop Label Forwarding Entry\uff0c\u4e0b\u4e00\u8df3\u6807\u7b7e\u8f6c\u53d1\u8868\u9879\uff09\u7528\u4e8e\u6307\u5bfcMPLS\u62a5\u6587\u7684\u8f6c\u53d1\u3002 \u00b6 NHLFE\u5305\u62ec\uff1aTunnel ID\u3001\u51fa\u63a5\u53e3\u3001\u4e0b\u4e00\u8df3\u3001\u51fa\u6807\u7b7e\u3001\u6807\u7b7e\u64cd\u4f5c\u7c7b\u578b\u7b49\u4fe1\u606f\u3002 FTN \uff08FEC-to-NHLFE\uff0c FEC\u5230\u4e00\u7ec4NHLFE\u7684\u6620\u5c04\uff09 \u00b6 \u901a\u8fc7\u67e5\u770bFIB\u8868\u4e2dTunnel ID\u503c\u4e0d\u4e3a0x0\u7684\u8868\u9879\uff0c\u80fd\u591f\u83b7\u5f97FTN\u7684\u8be6\u7ec6\u4fe1\u606f\u3002FTN\u53ea\u5728Ingress\u5b58\u5728\u3002 ILM \uff08Incoming Label Map\uff0c\u5165\u6807\u7b7e\u5230\u4e00\u7ec4\u4e0b\u4e00\u8df3\u6807\u7b7e\u8f6c\u53d1\u8868\u9879\u7684\u6620\u5c04\uff09 \u00b6 ILM\u5305\u62ec\uff1aTunnel ID\u3001\u5165\u6807\u7b7e\u3001\u5165\u63a5\u53e3\u3001\u6807\u7b7e\u64cd\u4f5c\u7c7b\u578b\u7b49\u4fe1\u606f\u3002 ILM\u5728Transit LSR\u7684\u4f5c\u7528\u662f\u5c06\u6807\u7b7e\u548cNHLFE\u7ed1\u5b9a\u3002\u901a\u8fc7\u6807\u7b7e\u7d22\u5f15ILM\u8868\uff0c\u5c31\u76f8\u5f53\u4e8e\u4f7f\u7528\u76ee\u7684IP\u5730\u5740\u67e5\u8be2 FIB\uff0c\u80fd\u591f\u5f97\u5230\u6240\u6709\u7684\u6807\u7b7e\u8f6c\u53d1\u4fe1\u606f\u3002 Tunnel ID \u00b6 \u4e3a\u4e86\u7ed9\u4f7f\u7528\u96a7\u9053\u7684\u4e0a\u5c42\u5e94\u7528\uff08\u5982VPN\u3001\u8def\u7531\u7ba1\u7406\uff09\u63d0\u4f9b\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u7cfb\u7edf\u81ea\u52a8\u4e3a\u96a7\u9053\u5206\u914d\u4e86\u4e00\u4e2aID\uff0c\u4e5f\u79f0\u4e3aTunnel ID\u3002\u8be5Tunnel ID\u7684\u957f\u5ea6\u4e3a32\u6bd4\u7279\uff0c\u53ea\u662f\u672c\u5730\u6709\u6548\u3002 \u5728\u62a5\u6587\u7684\u8f6c\u53d1\u8fc7\u7a0b\u4e2d\uff1a \u5728Ingress LSR\uff0c\u901a\u8fc7\u67e5\u8be2FIB\u8868\u548cNHLFE\u8868\u6307\u5bfc\u62a5\u6587\u7684\u8f6c\u53d1\u3002 \u5f53IP\u62a5\u6587\u8fdb\u5165MPLS\u57df\u65f6\uff0c\u9996\u5148\u67e5\u770bFIB\u8868\uff0c\u68c0\u67e5\u76ee\u7684IP\u5730\u5740\u5bf9\u5e94\u7684Tunnel ID\u503c\u662f\u5426\u4e3a0x0\u3002\u5982\u679cTunnel ID\u503c\u4e3a0x0\uff0c\u5219\u8fdb\u5165\u6b63\u5e38\u7684IP\u8f6c\u53d1\u6d41\u7a0b\u3002\u5982\u679cTunnel ID\u503c\u4e0d\u4e3a0x0\uff0c\u5219\u8fdb\u5165MPLS\u8f6c\u53d1\u6d41\u7a0b\u3002 \u5728Transit LSR\uff0c\u901a\u8fc7\u67e5\u8be2ILM\u8868\u548cNHLFE\u8868\u6307\u5bfcMPLS\u62a5\u6587\u7684\u8f6c\u53d1\u3002 \u5728Egress LSR\uff0c\u901a\u8fc7\u67e5\u8be2ILM\u8868\u6307\u5bfcMPLS\u62a5\u6587\u7684\u8f6c\u53d1\u6216\u67e5\u8be2\u8def\u7531\u8868\u6307\u5bfcIP\u62a5\u6587\u8f6c\u53d1\u3002 Ingress LSR\u7684\u5904\u7406\uff1a \u00b6 Transit LSR\u7684\u5904\u7406\uff1a \u00b6 Egress LSR\u7684\u5904\u7406\uff1a \u00b6 \u5c0f\u7ed3\uff1a \u00b6 LDP LDP \u6982\u8ff0 \u00b6 \u6807\u7b7e\u62a5\u6587\u5728MPLS\u7f51\u7edc\u6cbf\u7740\u6807\u7b7e\u4ea4\u6362\u8def\u5f84\u8f6c\u53d1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e2d\u95f4LSR\u90fd\u53ea\u662f\u67e5\u770b\u6570\u636e\u7684\u6807\u7b7e\u503c\uff0c\u5e76\u4e14\u9488\u5bf9\u8be5\u6807\u7b7e\u8fdb\u884c\u67e5\u8be2\u3001\u7f6e\u6362\u7b49\u64cd\u4f5c\u3002\u90a3\u4e48\u5165\u7ad9LSR\u7a76\u7adf\u8be5\u4e3aIP\u6570\u636e\u5305\u538b\u4ec0\u4e48\u6807\u7b7e\u5462\uff1f\u6807\u7b7e\u4ea4\u6362\u8def\u5f84\u662f\u600e\u6837\u7684\uff1f\u5982\u4f55\u786e\u4fdd\u8fd9\u4e2aIP\u6570\u636e\u5305\u80fd\u591f\u987a\u5229\u7684\u7a7f\u8d8aMPLS\u7f51\u7edc\uff1f\u8fd9\u4e9b\u90fd\u662f\u63a7\u5236\u5c42\u9762\u7684\u95ee\u9898\uff0c\u80af\u5b9a\u662f\u9700\u8981\u534f\u8bae\u6765\u89e3\u51b3\u7684\uff0c\u800c\u4e14\u5e94\u8be5\u5728IP\u6570\u636e\u5305\u5230\u8fbe\u4e4b\u524d\u5c31\u628a\u6240\u6709\u7684\u4e8b\u60c5\u51c6\u5907\u597d\u3002 \u6240\u6709\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u534f\u8bae\uff0c\u8fd9\u4e2a\u534f\u8bae\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u4e3a\u7279\u5b9a\u7684\u6d41\u91cf\u5efa\u7acbLSP\uff0c\u80fd\u591f\u4e3aFEC\uff08\u4f8b\u5982\u7279\u5b9a\u7684\u8def\u7531\u524d\u7f00\uff09\u5206\u914d\u6807\u7b7e\uff0c\u5e76\u4e14\u5c06\u6807\u7b7e\u6620\u5c04\u4f20\u9012\uff08\u6216\u8005\u8bf4\u5206\u53d1\uff09\u7ed9\u5176\u4ed6\u7684\u6807\u7b7e\u4ea4\u6362\u8def\u7531\u5668\u3002 \u5982\u679c\u8ba9OSPF\u3001ISIS\u8fd9\u6837\u7684\u534f\u8bae\u6765\u5206\u53d1\u6807\u7b7e\u662f\u4e0d\u53ef\u80fd\u7684\u4e86\uff08\u81f3\u5c11\u5728\u672a\u5bf9\u534f\u8bae\u505a\u6269\u5c55\u4e4b\u524d\u662f\u4e0d\u53ef\u80fd\u7684\uff09\u3002\u90a3\u4e48\u5c31\u9700\u8981\u4e00\u4e2a\u65b0\u7684\u534f\u8bae\uff0c\u72ec\u7acb\u4e8e\u6240\u6709\u7684\u8def\u7531\u534f\u8bae\u5e76\u4e14\u80fd\u591f\u7ed3\u5408\u8def\u7531\u534f\u8bae\u4e00\u8d77\u4f7f\u7528\uff0c\u8fd9\u4e2a\u534f\u8bae\u80fd\u591f\u4e3a\u7279\u5b9a\u7684FEC \u6346\u7ed1\u6807\u7b7e\uff0c\u5e76\u4e14\u5c06\u6807\u7b7e\u5206\u53d1\u7ed9\u5176\u4ed6\u7684LSR\u3002LDP\uff08Label Distribution Protocol\u6807\u7b7e\u5206\u53d1\u534f\u8bae\uff09\u5c31\u662f\u4e00\u4e2a\u8fd9\u6837\u7684\u534f\u8bae\u3002 \u6bcf\u4e00\u53f0\u8fd0\u884cLDP\u7684LSR\u90fd\u4f1a\u4e3a\u81ea\u5df1\u8def\u7531\u8868\u4e2d\u7684\u8def\u7531\u524d\u7f00\u6346\u7ed1\u6807\u7b7e\uff0c\u7136\u540e\u518d\u5c06\u6240\u5206\u914d\u7684\u6807\u7b7e\u5206\u53d1\u7ed9\u6240\u6709\u7684LSR \u90bb\u5c45\u3002LDP\u90bb\u5c45\u5c06\u8fd9\u4e9b\u63a5\u6536\u5230\u7684\u6807\u7b7e\u89c6\u4e3a\u51fa\u7ad9\u6807\u7b7eOutgoing label\uff08\u6216\u8005\u8fdc\u7aef\u6807\u7b7e\uff09\uff0c\u4e4b\u540e\u90bb\u5c45\u5c06\u8be5\u51fa\u7ad9\u6807\u7b7e\u548c\u5176\u81ea\u5df1\u672c\u5730\u7684\u6807\u7b7e\u5b58\u50a8\u4e8e\u4e00\u5f20\u7279\u6b8a\u7684\u8868\u4e2d\u3002\u901a\u5e38\u4e00\u53f0LDP\u8def\u7531\u5668\u4f1a\u6709\u591a\u4e2aLDP\u90bb\u5c45\uff0c\u90a3\u4e48\u8fd9\u4e9b\u90bb\u5c45\u90fd\u4f1a\u7ed9\u8def\u7531\u5206\u914d\u6807\u7b7e\u7136\u540e\u5c06\u8fd9\u4e9b\u6807\u7b7e\u4f20\u7ed9\u81ea\u5df1\u3002 \u4e00\u53f0LSR\u6709\u53ef\u80fd\u4f1a\u6536\u5230\u591a\u4e2aLDP\u90bb\u5c45\u5206\u53d1\u7684\u6807\u7b7e\uff0c\u53ef\u80fd\u5bf9\u4e8e\u540c\u4e00\u4e2aFEC\uff0c\u4f1a\u540c\u65f6\u6536\u5230\u591a\u4e2a\u90bb\u5c45\u5206\u53d1\u7684\u6807\u7b7e\uff0c \u901a\u5e38\u8def\u7531\u5668\u53ea\u4f7f\u7528\u5176\u4e2d\u4e00\u4e2a\u6807\u7b7e\u4f5c\u4e3a\u8be5\u524d\u7f00\u7684\u51fa\u7ad9\u6807\u7b7e\u3002\u5b83\u901a\u8fc7RIB\u4e5f\u5c31\u662fIP\u8def\u7531\u8868\u5f97\u5230\u8be5IPv4\u524d\u7f00\u7684\u4e0b\u4e00\u8df3\uff0c\u5b83\u5c06\u4f7f\u7528\u8fd9\u4e2a\u4e0b\u4e00\u8df3LSR\u6240\u5206\u53d1\u7684\u6807\u7b7e\u4f5c\u4e3a\u6700\u7ec8\u7684\u51fa\u7ad9\u6807\u7b7e\u3002 \u5728LDP\u5b8c\u6210\u5de5\u4f5c\u540e\uff0c\u4e00\u6761LSP\u5c31\u5efa\u7acb\u8d77\u6765\u4e86\u3002 LDP ID \u00b6 LDP-ID\u662f\u957f\u5ea6\u4e3a6Byte\u7684LDP\u6807\u8bc6\u7b26\uff0c\u5305\u542b4Byte\u7684LSR-ID\u53ca2Byte\u7684\u6807\u7b7e\u7a7a\u95f4\u503c\uff0c\u4f8b\u5982192.168.255.1:0\u3002 \u5176\u4e2d4Byte\u7684LSR-ID\u4e3a\u7cfb\u7edf\u89c6\u56fe\u547d\u4ee4mpls lsr-id\u6240\u6307\u5b9a\u7684\u6807\u8bc6\u7b26\uff0c\u4e5f\u5c31\u662fLSR\u7684\u6807\u8bc6\u7b26 \uff08\u5728\u5bf9\u8bbe\u5907\u505aMPLS \u914d\u7f6e\u4e4b\u524d\uff0c\u9700\u8981\u9996\u5148\u5728\u7cfb\u7edf\u89c6\u56fe\u4e0b\u6307\u5b9aLSR-ID\uff0cLSR-ID\u4e0eIPv4\u5730\u5740\u7684\u683c\u5f0f\u76f8\u540c\uff0c\u4f8b\u5982192.168.255.1\uff09\u3002 \u6807\u7b7e\u7a7a\u95f4\u503c\u4e00\u822c\u4e3a0\uff0c\u8868\u793a\u6807\u7b7e\u662f\u57fa\u4e8e\u8bbe\u5907\u6216\u8005\u8bf4\u662f\u57fa\u4e8e\u5e73\u53f0\u7684\uff08Per-Platform\uff09\uff1b\u5982\u679c\u662f\u975e0\uff0c\u5c31\u8bf4\u660e\u7528\u7684\u662f\u57fa\u4e8e\u63a5\u53e3\u7684\u6807\u7b7e\u7a7a\u95f4\u3002 \u6807\u7b7e\u7a7a\u95f4 \u00b6 \u9ed8\u8ba4\u7684LDP\u6807\u7b7e\u7a7a\u95f4\u662f\u57fa\u4e8e\u8bbe\u5907\u6216\u8005\u8bf4\u57fa\u4e8e\u5e73\u53f0\u7684\uff08per-platform\uff09\u3002\u4ec0\u4e48\u610f\u601d\u5462\uff0c\u770b\u4e0a\u56fe\u4e2d\u7684B\u8def\u7531\u5668\uff0c\u5b83\u4e3a\u524d\u7f00X\u6346\u7ed1\u4e86\u6807\u7b7e1088\uff0c\u5e76\u4e14\u5c06\u8fd9\u4e2a\u6807\u7b7e\u6346\u7ed1\u4fe1\u606f\u53d1\u5e03\u7ed9\u6240\u6709\u7684LDP\u90bb\u5c45\uff0c\u7ed9\u5927\u5bb6\u7684\u90fd\u4e00\u6837\u800c\u4e14\u4eba\u4eba\u6709\u4efd\uff0c\u90fd\u662f\u6807\u7b7e1088\u3002\u8fd9\u5c31\u662f\u57fa\u4e8e\u5e73\u53f0\u7684\u610f\u601d\u3002\u9664\u6b64\u4e4b\u5916\u8fd8\u6709\u57fa\u4e8e\u63a5\u53e3\u7684\u6807\u7b7e\u7a7a\u95f4\u3002 Label Space ID\u4e00\u822c\u4e3a0\uff0c\u8868\u793a\u6211\u4eec\u7684\u6807\u7b7e\u662f\u57fa\u4e8e\u5e73\u53f0\uff08Per-platform\uff09\u7684\u6807\u7b7e\u7a7a\u95f4\u3002 \u4e3a\u524d\u7f00\u5206\u914d\u7684\u6807\u7b7e\u5728\u672c\u5730\u4efb\u610fMPLS\u63a5\u53e3\u53ef\u7528\u5e76\u4e14\u4f1a\u5206\u53d1\u7ed9\u6240\u6709LSR\u90bb\u5c45\u3002 \u672c\u5730\u5206\u914d\u7684\u6807\u7b7e\u4f1a\u5206\u53d1\u7ed9\u90bb\u5c45\uff0c\u5982\u679c\u4e0e\u5355\u4e2a\u90bb\u5c45\u6709\u591a\u6761\u8fde\u63a5\uff0c\u5219\u8be5\u6807\u7b7e\u5728\u6240\u6709\u8fde\u63a5\u4e0a\u5747\u6709\u6548\u3002\u90a3\u4e48\u4e0d\u7ba1 \u672c\u5730\u4ece\u54ea\u4e2a\u63a5\u53e3\u4e0a\u6536\u5230\u4e00\u4e2a\u6807\u7b7e\u5305\uff0c\u53ea\u8981\u6709\u8fd9\u4e2a\u6807\u7b7e\uff0c\u90fd\u4f1a\u5bf9\u5176\u8fdb\u884c\u4ea4\u6362\u3002 \u4f20\u8f93\u5730\u5740 \u00b6 \u4e24\u53f0LSR\u4e4b\u95f4\u5728\u5efa\u7acbLDP\u4f1a\u8bdd\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u4ee5\u4fbf\u8fdb\u884cLDP\u534f\u8bae\u62a5\u6587\u7684\u4ea4\u6362\u3002 \u4e92\u4e3a\u90bb\u5c45\u7684LSR\u9700\u57fa\u4e8e\u53cc\u65b9\u7684\u4f20\u8f93\u5730\u5740\uff08Transport Address\uff09\u5efa\u7acbTCP\u8fde\u63a5\u3002 \u5728LDP Hello\u62a5\u6587\u4e2d\uff0c\u5305\u542b\u8bbe\u5907\u7684\u4f20\u8f93\u5730\u5740\uff0cLSR\u901a\u8fc7Hello\u62a5\u6587\u77e5\u6653\u90bb\u5c45\u7684\u4f20\u8f93\u5730\u5740\u3002 \u5728\u4f7f\u7528Hello\u62a5\u6587\u53d1\u73b0\u90bb\u5c45\u5e76\u4e14\u77e5\u9053\u4e86\u5bf9\u65b9\u7684\u4f20\u8f93\u5730\u5740\u540e\uff0c\u90bb\u5c45\u4e4b\u95f4\u5c31\u4f1a\u5f00\u59cb\u5c1d\u8bd5TCP\u4e09\u6b21\u63e1\u624b\uff08\u57fa\u4e8e\u4f20\u8f93\u5730\u5740\uff09\uff0c\u5e76\u4e14\u4ea4\u4e92LDP\u7684\u521d\u59cb\u5316\u62a5\u6587\u3001\u6807\u7b7e\u6620\u5c04\u62a5\u6587\u7b49\uff0c\u8fd9\u4e9b\u62a5\u6587\u90fd\u4f7f\u7528\u53cc\u65b9\u7684\u4f20\u8f93\u5730\u5740\u4f5c\u4e3a\u6e90\u3001\u76ee\u7684IP\u5730\u5740\u3002 \u4f20\u8f93\u5730\u5740\u4f1a\u88ab\u7528\u6765\u4e0e\u90bb\u5c45\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u56e0\u6b64LSR\u5fc5\u987b\u62e5\u6709\u5230\u8fbe\u90bb\u5c45\u7684\u4f20\u8f93\u5730\u5740\u7684\u8def\u7531\u3002 \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u516c\u7f51\u7684LDP\u4f20\u8f93\u5730\u5740\u7b49\u4e8e\u8bbe\u5907\u7684LSR-ID\uff0c\u79c1\u7f51\u7684\u4f20\u8f93\u5730\u5740\u7b49\u4e8e\u63a5\u53e3\u7684\u4e3bIP\u5730\u5740\u3002 \u5728\u63a5\u53e3\u89c6\u56fe\u4e0b\uff0c\u4f7f\u7528mpls ldp transport-address\u547d\u4ee4\uff0c\u53ef\u4ee5\u4fee\u6539\u4f20\u8f93\u5730\u5740\u3002 LDP \u7684\u57fa\u672c\u5de5\u4f5c\u8fc7\u7a0b \u00b6 Step1\uff1a \u00b6 Step2\uff1a \u00b6 Step3\uff1a \u00b6 Step4\uff1a \u00b6 Step5\uff1a \u00b6 Step6\uff1a \u00b6 Step7\uff1a \u00b6 \u5728MPLS\u4e2d\uff0c\u8fd0\u884cLDP\u534f\u8bae\u7684LSR\u7684\u64cd\u4f5c\u5c0f\u7ed3\uff1a \u00b6 LSR\u9996\u5148\u901a\u8fc7\u8fd0\u884cIGP\u534f\u8bae\uff08\u4f8b\u5982OSPF\u3001IS-IS\u7b49\uff09\u6765\u6784\u5efa\u8def\u7531\u8868\u3001FIB\u8868\uff1b LDP\u6839\u636e\u76f8\u5e94\u7684\u6a21\u5f0f\uff0c\u4e3a\u8def\u7531\u8868\u4e2d\u7684\u8def\u7531\u524d\u7f00\uff08FEC\uff09\u5206\u914d\u6807\u7b7e\uff1b LDP\u6839\u636e\u76f8\u5e94\u7684\u6a21\u5f0f\uff0c\u5c06\u81ea\u5df1\u4e3a\u8def\u7531\u524d\u7f00\u5206\u914d\u7684\u6807\u7b7e\uff0c\u901a\u8fc7LDP\u6807\u7b7e\u6620\u5c04\u62a5\u6587\u901a\u544a\u7ed9LDP\u90bb\u5c45\uff1b LSR\u5c06\u81ea\u5df1\u4e3a\u8def\u7531\u524d\u7f00\u5206\u914d\u7684\u6807\u7b7e\uff0c\u4ee5\u53caLDP\u90bb\u5c45\u4e3a\u8be5\u8def\u7531\u524d\u7f00\u901a\u544a\u7684\u6807\u7b7e\u5b58\u50a8\u8d77\u6765\uff0c\u5e76\u5f62\u6210\u5173\u8054\uff1b \u5f53LSR\u8f6c\u53d1\u5230\u8fbe\u76ee\u7684\u7f51\u7edc\u7684\u6807\u7b7e\u62a5\u6587\u65f6\uff0c\u6240\u4f7f\u7528\u7684\u51fa\u7ad9\u6807\u7b7e\u603b\u662f\u4e0b\u6e38LDP\u90bb\u5c45\u6240\u901a\u544a\u7684\u6807\u7b7e\uff0c\u6b64\u5904\u6240\u6307\u7684\u4e0b\u6e38\u90bb\u5c45\uff0c\u662f\u8bbe\u5907\u7684\u8def\u7531\u8868\u4e2d\u5230\u8fbe\u8be5\u76ee\u7684\u7f51\u7edc\u7684\u4e0b\u4e00\u8df3\u8bbe\u5907\u3002 PHP \u00b6 PHP\uff08Penultimate Hop Poppoing\uff0c\u6b21\u672b\u8df3\u5f39\u51fa\u6216\u8005\u5012\u6570\u7b2c\u4e8c\u8df3\u5f39\u51fa\uff09\uff0c\u8fd9\u662fMPLS\u7684\u4e00\u4e2a\u57fa\u7840\u6027\u673a\u5236\u3002\u4e0b\u9762\uff0c\u6765\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a \u5728\u4e0a\u56fe\u4e2d\uff0cR3\u6536\u5230\u53d1\u5f801.0.0.0/8\u7684\u6807\u7b7e\u62a5\u6587\u540e\uff0c\u9700\u9996\u5148\u5728ILM\u4e2d\u67e5\u8be2\u6807\u7b7e\u503c\uff0c\u7136\u540e\u6839\u636e\u6307\u793a\u5c06\u6807\u7b7e\u5934\u90e8\u5f39\u51fa\uff0c\u518d\u5230FIB\u8868\u4e2d\u67e5\u8be2IP\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\uff0c\u6700\u540e\u5c06IP\u62a5\u6587\u8f6c\u53d1\u51fa\u53bb\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cR3\u9700\u8981\u6267\u884c\u4e24\u6b21\u67e5\u8be2\u64cd\u4f5c\u3002\u5b9e\u9645\u4e0a\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u8fc7\u7a0b\u6765\u8bf4\uff0c\u662f\u5b58\u5728\u4f18\u5316\u7a7a\u95f4\u7684\u3002 R3\u5982\u679c\u6fc0\u6d3b\u4e86PHP\u7279\u6027\uff0c\u90a3\u4e48\u5f53\u5b83\u4e3a\u672c\u5730\u76f4\u8fde\u8def\u75311.0.0.0/8\u5206\u914d\u6807\u7b7e\u65f6\uff0c\u4f1a\u5206\u914d\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u7b7e\uff0c\u8be5\u6807\u7b7e\u88ab\u79f0\u4e3a\u9690\u5f0f\u7a7a\u6807\u7b7e\uff08Implicit NULL Label\uff09\uff0c\u5176\u503c\u4e3a3\u3002R3\u5c06\u8be5\u6807\u7b7e\u503c\u901a\u544a\u7ed9R2\u3002\u5f53LSR\u8f6c\u53d1\u4e00\u4e2a\u6807\u7b7e\u62a5\u6587\u65f6\uff0c\u5982\u679c\u53d1\u73b0\u76f8\u5e94\u7684\u5165\u7ad9\u6807\u7b7e\u5bf9\u5e94\u7684\u51fa\u7ad9\u6807\u7b7e\u503c\u4e3a3\uff0c\u90a3\u4e48\u8be5LSR\u5c06\u628a\u62a5\u6587\u7684\u6807\u7b7e\u5934\u90e8\u5f39\u51fa\uff0c\u7136\u540e\u5c06\u91cc\u9762\u6240\u5c01\u88c5\u7684\u6570\u636e\u8f6c\u53d1\u7ed9\u4e0b\u6e38LSR\uff0c\u4e5f\u5c31\u662f\u6267\u884cPHP\uff08 Penultimate hop popping\uff0c\u6b21\u672b\u8df3\u5f39\u51fa\uff09\u64cd\u4f5c\u3002 R2\u4f5c\u4e3a\u5230\u8fbe1.0.0.0/8\u7684\u6b21\u672b\u8df3\uff08\u5012\u6570\u7b2c\u4e8c\u8df3\uff09\uff0c\u6536\u5230\u53d1\u5f801.1.1.3\u7684\u6807\u7b7e\u62a5\u6587\u540e\uff0c\u53d1\u73b0\u51fa\u7ad9\u6807\u7b7e\u503c\u4e3a3\uff0c\u4e8e\u662f\u5c06\u6807\u7b7e\u5934\u90e8\u5f39\u51fa\uff0c\u5c06IP\u62a5\u6587\u8f6c\u53d1\u7ed9R3\uff0c\u800cR3\u5219\u4ec5\u9700\u6267\u884c\u4e00\u6b21\u67e5\u8be2\u64cd\u4f5c\uff08\u67e5\u8be2FIB\u8868\uff09\u5373\u53ef\u83b7\u5f97\u76f8\u5e94\u7684\u8f6c\u53d1\u4fe1\u606f\uff0c\u8f6c\u53d1\u6548\u7387\u5f97\u5230\u4e86\u63d0\u5347\u3002 LDP\u5728\u5e27\u6a21\u5f0fFrame Mode\u4e0b\uff08\u73b0\u5728\u57fa\u672c\u90fd\u7528\u5e27\u6a21\u5f0f\u4e86\uff09\uff0cLSR\u4f1a\u4e3a\u672c\u5730\u8def\u7531\u6346\u7ed1\u6807\u7b7e\u503c3\uff0c3\u662f\u4e00\u4e2aLDP\u4fdd\u7559\u7684\u6807\u7b7e\uff0c\u53eb\u505a\u201cimpilict null\u9690\u5f0f\u7a7a\u201d\u6807\u7b7e\u3002 \u5012\u6570\u7b2c\u4e8c\u8df3\u5f39\u51fa\u673a\u5236\uff08PHP\uff09\u6709\u4e24\u79cd\u6807\u7b7e\uff0c\u4e00\u662fimplicit nul\uff08l \u9690\u5f0f\u7a7a\uff09\uff0c\u5728LDP\u4e2d\u6807\u7b7e\u503c\u4e3a3\uff1b\u53e6\u4e00\u4e2a\u662fexplicit null\uff08\u663e\u5f0f\u7a7a\uff09\uff0c\u5728LDP\u4e2d\u6807\u7b7e\u503c\u4e3a0\u3002\u5982\u679c\u6536\u5230LDP\u90bb\u5c45\u53d1\u9001\u6765\u7684\u5173\u4e8e\u67d0\u6761\u8def\u7531\u5206\u914d\u7684\u6807\u7b7e\u503c\u4e3a3\uff0c\u5219\u6211\u53d1\u9001\u524d\u5f80\u8be5\u76ee\u6807\u7f51\u6bb5\u7684\u6570\u636e\u7ed9\u8be5\u90bb\u5c45\u65f6\uff0c\u6211\u4f1a\u5c06\u8be5\u6807\u7b7e\u5f39\u51fa\uff0c\u518d\u5c06\u5185\u5c42\u6570\u636e\u8f6c\u7ed9\u90bb\u5c45\u3002\u800c\u5982\u679c\u90bb\u5c45\u5173\u4e8e\u67d0\u6761\u8def\u7531\u5206\u914d\u7684\u6807\u7b7e\u503c\u4e3a0\uff0c\u90a3\u4e48\u672c\u5730\u5728\u8f6c\u6570\u636e\u7ed9\u90bb\u5c45\u65f6\uff0c\u4f1a\u5e26\u4e0a\u6807\u7b7e\u5934\uff08\u6807\u7b7e\u503c\u4e3a0\u7684\uff09\uff0c\u4e00\u5e76\u53d1\u7ed9\u90bb\u5c45\u3002 \u5728MPLS\u89c6\u56fe\u4e0b\uff0c\u4f7f\u7528\u201c label advertise explicit-null \u201d\u547d\u4ee4\uff0c\u53ef\u4ee5\u8ba9\u8bbe\u5907\u5411\u5012\u6570\u7b2c\u4e8c\u8df3\u5206\u914d\u663e\u5f0f\u7a7a\u6807\u7b7e\uff1b \u201c label advertise implicit-null \u201d\u547d\u4ee4\uff08\u9ed8\u8ba4\u5373\u5f00\u542f\uff09\u5219\u4f1a\u4f7f\u5f97\u8bbe\u5907\u5411\u5012\u6570\u7b2c\u4e8c\u8df3\u5206\u914d\u9690\u5f0f\u7a7a\u6807\u7b7e\u3002\u201c label advertise non-null \u201d\u547d\u4ee4\u5219\u76f8\u5f53\u4e8e\u5173\u95edPHP\u673a\u5236\uff0c\u4f7f\u5f97\u8bbe\u5907\u6b63\u5e38\u5206\u914d\u6807\u7b7e\u800c\u4e0d\u4f7f\u7528\u7a7a\u6807\u7b7e\u3002 MPLS \u7684\u57fa\u7840\u914d\u7f6e \u57fa\u7840\u547d\u4ee4 \u00b6 \u914d\u7f6e\u8bbe\u5907\u7684LSR ID \u00b6 [Huawei] mpls lsr-id x.x.x.x \u914d\u7f6eLSR ID\u662f\u8fdb\u884c\u6240\u6709MPLS\u914d\u7f6e\u7684\u524d\u63d0\uff0cLSR\u6ca1\u6709\u7f3a\u7701\u7684LSR ID\uff0c\u5fc5\u987b\u624b\u5de5\u914d\u7f6e\u3002 \u5168\u5c40\u6fc0\u6d3bMPLS \u00b6 [Huawei] mpls \u5168\u5c40\u6fc0\u6d3bLDP \u00b6 [Huawei] mpls ldp \u5728\u63a5\u53e3\u4e0a\u6fc0\u6d3bMPLS \u00b6 [Huawei-GigabitEthernet2/0/0] mpls \u5728\u63a5\u53e3\u4e0a\u6fc0\u6d3bLDP \u00b6 [Huawei-GigabitEthernet2/0/0] mpls ldp \uff08\u53ef\u9009\uff09\u914d\u7f6e\u8bbe\u5907\u7684LDP\u4f20\u8f93\u5730\u5740Transport Address \u00b6 [Huawei-GigabitEthernet2/0/0] mpls ldp transport-address intf . \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u516c\u7f51\u7684LDP\u4f20\u8f93\u5730\u5740\u7b49\u4e8e\u8282\u70b9\u7684LSR ID\uff0c\u79c1\u7f51\u7684\u4f20\u8f93\u5730\u5740\u7b49\u4e8e\u63a5\u53e3\u7684\u4e3bIP\u5730\u5740\u3002 \uff08\u53ef\u9009\uff09\u914d\u7f6eLSP\u5efa\u7acb\u7684\u89e6\u53d1\u7b56\u7565 \u00b6 [Huawei-mpls] lsp-trigger { all | host | ip-prefix ip-prefix-name | none } \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u89e6\u53d1\u7b56\u7565\u4e3ahost\uff0c\u537332\u4f4d\u5730\u5740\u7684\u4e3b\u673aIP\u8def\u7531\uff08\u4e0d\u5305\u62ec\u63a5\u53e3\u768432\u4f4d\u5730\u5740\u7684\u4e3b\u673aIP\u8def\u7531\uff09\u89e6\u53d1 \u5efa\u7acbLSP\u3002\u5982\u679c\u89e6\u53d1\u7b56\u7565\u4e3aall\uff0c\u5219\u6240\u6709\u9759\u6001\u8def\u7531\u548cIGP\u8def\u7531\u89e6\u53d1\u5efa\u7acbLSP\u3002BGP\u516c\u7f51\u8def\u7531\u4e0d\u80fd\u89e6\u53d1\u5efa\u7acb LSP\u3002\u5982\u679c\u89e6\u53d1\u7b56\u7565\u4e3aip-prefix\uff0c\u5219\u53ea\u6709\u901a\u8fc7IP\u5730\u5740\u524d\u7f00\u5217\u8868\u8fc7\u6ee4\u7684FEC\u9879\u80fd\u591f\u89e6\u53d1\u5efa\u7acbLSP\u3002\u5982\u679c\u89e6\u53d1\u7b56\u7565\u4e3anone\uff0c\u5219\u4e0d\u89e6\u53d1\u5efa\u7acbLSP \u57fa\u7840\u5b9e\u9a8c \u00b6 \u8bbe\u5907\u4e92\u8054\u5730\u5740\u5982\u56fe\u6240\u793a\uff1b\u6240\u6709\u8bbe\u5907\u5f00\u8bbeLoopback0\u53e3\uff0c\u8be5\u63a5\u53e3IP\u5730\u5740\u4e3ax.x.x.x/32\uff0c\u5176\u4e2dx\u4e3a\u8bbe\u5907\u7f16\u53f7\u3002 Loopback0\u7684IP\u5730\u5740\u4f5c\u4e3aOSPF RouterID\u4ee5\u53caLSR ID\u3001LDP\u4f20\u8f93\u5730\u5740\u3002 R1\u3001R2\u3001R3\u3001R4\u8fd0\u884cOSPF\uff0c\u901a\u544a\u76f4\u8fde\u63a5\u53e3\u53caLoopback0\u3002 \u6240\u6709\u8bbe\u5907\u6fc0\u6d3bMPLS\uff0c\u57fa\u4e8e\u76f4\u8fde\u5efa\u7acbLDP\u90bb\u5c45\uff0c\u89c2\u5bdf\u6807\u7b7e\u7684\u5206\u53d1\u60c5\u51b5\u3002 \u89c2\u5bdf1.1.1.1\u8bbf\u95ee4.4.4.4\u6570\u636e\u5305\uff0c\u5206\u6790\u6570\u636e\u5305\u7a7f\u8d8aMPLS\u7f51\u7edc\u7684\u8fc7\u7a0b\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R4\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u6765\u505a\u4e00\u4e9b\u67e5\u770b\u548c\u9a8c\u8bc1\uff1a \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fR1\u7684LDP\u90bb\u5c45\u8868\uff0c\u4ece\u8868\u4e2d\u53ef\u4ee5\u770b\u51faR1\u5df2\u7ecf\u53d1\u73b0\u4e86\u4e00\u4e2aLDP\u90bb\u5c45\uff0c\u90a3\u5c31\u662fR2\u3002 \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fLDP\u4f1a\u8bdd\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u90bb\u5c45\u7684\u72b6\u6001\u5fc5\u987b\u4e3aOperational\u624d\u662f\u6700\u7ec8\u7684\u7a33\u6001\uff0c\u53e6\u5916\u4eceTCP\u8fde\u63a51.1.1.1 \\< 2.2.2.2\u53ef\u4ee5\u9a8c\u8bc1\u4e00\u70b9\uff0cLDP\u7684\u4f1a\u8bdd\u5efa\u7acb\u662f\u7531\u4f20\u8f93\u5730\u5740\u5927\u7684\u4e00\u65b9\u53d1\u8d77\u7684\u3002 \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fR1\u7684\u6807\u7b7e\u8f6c\u53d1\u5e93\uff0c\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u5efa\u7acb\u597d\u7684LSP\u3002 \u5b9e\u9645\u4e0a\uff0c\u5f53\u6211\u4eec\u518dR1\u3001R2\u3001R3\u3001R4\u4e0a\u8fd0\u884cOSPF\u540e\uff0c\u5168\u7f51\u7684\u8def\u7531\u5df2\u7ecf\u88ab\u6253\u901a\uff0c\u4e5f\u5c31\u662f\u6bcf\u53f0\u8def\u7531\u5668\u90fd\u62e5\u6709\u5168\u7f51\u7684\u8def\u7531\uff0c\u5176\u4e2d\u5305\u62ec\u4e92\u8054\u7f51\u6bb5\u7684\u8def\u7531\uff0c\u4ee5\u53ca\u5404\u8bbe\u5907\u7684Loopback\u8def\u7531\u3002\u968f\u540e\u6211\u4eec\u6fc0\u6d3b\u5404\u8bbe\u5907\u7684MPLS\u548cLDP\uff0c \u6bcf\u53f0\u8bbe\u5907\u4f1a\u57fa\u4e8e\u81ea\u5df1\u7684\u8def\u7531\u8868\u4e2d\u7684\u8def\u7531\u524d\u7f00\u8fdb\u884c\u6807\u7b7e\u6346\u7ed1\uff0c\u5e76\u4e14\u5c06\u4e3a\u8def\u7531\u524d\u7f00\uff08FEC\uff09\u6240\u6346\u7ed1\u7684\u6807\u7b7e\u5206\u53d1\u7ed9\u81ea\u5df1\u7684LDP\u90bb\u5c45\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5728\u6211\u53f8\u7684\u8bbe\u5907\u4e0a\uff0c\u4ec5\u4e3a/32\u7684\u4e3b\u673a\u8def\u7531\u5206\u53d1\u6807\u7b7e\u3002 \u73b0\u5728\uff0c\u6765\u6d4b\u8bd5\u4e00\u4e0b\uff0c\u4eceR1\u53bbtracert 4.4.4.4\uff1a \u4ecetracert\u7684\u7ed3\u679c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6570\u636e\u5305\u884c\u8d70\u7684\u8def\u5f84\uff0c\u4ee5\u53ca\u88ab\u538b\u5165\u7684\u6807\u7b7e\u3002 \u62a5\u6587\u7684\u8f6c\u53d1\u8fc7\u7a0b\u5b9e\u9645\u4e0a\u7c7b\u4f3c\u4e0b\u9762\u8fd9\u6837\uff08\u8bfb\u8005\u5728\u5b9e\u9a8c\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u4f1a\u53d1\u73b0\u5b9e\u9645\u7684\u6807\u7b7e\u503c\u4e0e\u672c\u6587\u6863\u7684\u4e0d\u76f8\u540c\uff0c\u8fd9\u662f\u6b63\u5e38\u7684\uff09\uff1a MPLS VPN \u672c\u6587\u6863\u63cf\u8ff0\u7684MPLS VPN\u662f\u4e09\u5c42\u7684BGP/MPLS IP VPN\u3002 BGP/MPLS IP VPN\u662f\u4e00\u79cdL3VPN\uff08Layer 3 Virtual Private Network\uff09\u3002\u5b83\u4f7f\u7528BGP\u5728\u670d\u52a1\u63d0\u4f9b\u5546\u9aa8\u5e72\u7f51\u4e0a\u53d1\u5e03VPN\u8def\u7531\uff0c\u4f7f\u7528MPLS\u5728\u670d\u52a1\u63d0\u4f9b\u5546\u9aa8\u5e72\u7f51\u4e0a\u8f6c\u53d1VPN\u62a5\u6587\u3002\u8fd9\u91cc\u7684IP\u662f\u6307VPN\u627f\u8f7d\u7684\u662fIP\u62a5\u6587\u3002 BGP/MPLS IP VPN\u57fa\u4e8e\u5bf9\u7b49\u4f53\u6a21\u578b\uff0c\u8fd9\u79cd\u6a21\u578b\u4f7f\u5f97\u670d\u52a1\u63d0\u4f9b\u5546\u548c\u7528\u6237\u53ef\u4ee5\u4ea4\u6362\u8def\u7531\uff0c\u670d\u52a1\u63d0\u4f9b\u5546\u8f6c\u53d1\u7528\u6237\u7ad9\u70b9\u95f4\u7684\u6570\u636e\u800c\u4e0d\u9700\u8981\u7528\u6237\u7684\u53c2\u4e0e\u3002\u76f8\u6bd4\u8f83\u4f20\u7edf\u7684VPN\uff0cBGP/MPLS IP VPN\u66f4\u5bb9\u6613\u6269\u5c55\u548c\u7ba1\u7406\u3002\u65b0\u589e\u4e00\u4e2a\u7ad9\u70b9\u65f6\uff0c\u53ea\u9700\u8981\u4fee\u6539\u63d0\u4f9b\u8be5\u7ad9\u70b9\u4e1a\u52a1\u7684\u8fb9\u7f18\u8282\u70b9\u7684\u914d\u7f6e\u3002 BGP/MPLS IP VPN\u652f\u6301\u5730\u5740\u7a7a\u95f4\u91cd\u53e0\u3001\u652f\u6301\u91cd\u53e0VPN\u3001\u7ec4\u7f51\u65b9\u5f0f\u7075\u6d3b\u3001\u53ef\u6269\u5c55\u6027\u597d\uff0c\u5e76\u80fd\u591f\u65b9\u4fbf\u5730\u652f\u6301MPLS QoS\u548cMPLS TE\uff0c\u6210\u4e3a\u5728IP\u7f51\u7edc\u8fd0\u8425\u5546\u63d0\u4f9b\u589e\u503c\u4e1a\u52a1\u7684\u91cd\u8981\u624b\u6bb5\uff0c\u56e0\u6b64\u5f97\u5230\u8d8a\u6765\u8d8a\u591a\u7684\u5e94\u7528\u3002 MPLS VPN \u7684\u67b6\u6784 \u00b6 **CE\uff08Customer Edge\uff09\uff1a**\u5ba2\u6237\u7f51\u7edc\u8fb9\u7f18\u8bbe\u5907\uff0c\u8be5\u8bbe\u5907\u5c5e\u4e8e\u5ba2\u6237\uff0c\u5b83\u9664\u4e86\u8fde\u63a5\u7740\u5ba2\u6237\u7f51\u7edc\uff0c\u8fd8\u6709\u63a5\u53e3\u76f4\u63a5\u4e0eMPLS VPN\u7f51\u7edc\u76f8\u8fde\u3002CE\u8bbe\u5907\u53ef\u4ee5\u662f\u8def\u7531\u5668\u6216\u4ea4\u6362\u673a\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u53f0\u4e3b\u673a\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cCE\u201c\u611f\u77e5\u201d\u4e0d\u5230VPN\u7684\u5b58\u5728\uff0c\u4e5f\u4e0d\u9700\u8981\u652f\u6301MPLS\u3002 **PE\uff08Provider Edge\uff09\uff1a**\u662f\u670d\u52a1\u63d0\u4f9b\u5546\u7f51\u7edc\u7684\u8fb9\u7f18\u8bbe\u5907\uff0c\u4e0eCE\u76f4\u63a5\u76f8\u8fde\u3002\u5728MPLS\u7f51\u7edc\u4e2d\uff0c\u5bf9VPN\u7684\u6240\u6709\u5904\u7406\u90fd\u53d1\u751f\u5728PE\u4e0a\uff0c\u5bf9PE\u6027\u80fd\u8981\u6c42\u8f83\u9ad8\u3002 **P\uff08Provider\uff09\uff1a**\u670d\u52a1\u63d0\u4f9b\u5546\u7f51\u7edc\u4e2d\u7684\u9aa8\u5e72\u8bbe\u5907\uff0c\u4e0d\u4e0eCE\u76f4\u63a5\u76f8\u8fde\u3002P\u8bbe\u5907\u53ea\u9700\u8981\u5177\u5907\u57fa\u672cMPLS\u8f6c\u53d1\u80fd\u529b\uff0c\u4e0d\u7ef4\u62a4VPN\u4fe1\u606f\uff0c\u4e5f\u4e0d\u7ef4\u62a4\u5ba2\u6237VPN\u8def\u7531\u3002 MPLS VPN \u521d\u4f53\u9a8c \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0c\u4e2d\u95f4\u662f\u8fd0\u8425\u5546\u642d\u5efa\u7684\u201cMPLS VPN Backbone\u201d\u4e5f\u5c31\u662fMPLS VPN\u9aa8\u5e72\u7f51\u7edc\uff0c\u8fd9\u4e2a\u7f51\u7edc\u9762\u5411\u5ba2\u6237\u63d0\u4f9bVPN\u4e1a\u52a1\uff0c\u4f7f\u5f97\u4e0d\u540c\u7684\u5ba2\u6237\u7684\u8def\u7531\u3001\u6570\u636e\u90fd\u80fd\u591f\u901a\u8fc7\u8fd9\u4e2a\u516c\u5171\u7684\u7f51\u7edc\u8fdb\u884c\u4f20\u8f93\uff0c\u800c\u4e14\u4e92\u76f8\u4e0d\u5e72\u6270\u3002\u5ba2\u6237\u4e4b\u95f4\u7684\u8def\u7531\u53ca\u6570\u636e\u662f\u5b8c\u5168\u9694\u79bb\u7684\uff0c\u5373\u4f7f\u4ed6\u4eec\u901a\u8fc7\u540c\u4e00\u5f20\u8fd0\u8425\u5546\u7684\u7f51\u7edc\u8fdb\u884c\u627f\u8f7d\u3002\u73b0\u5728\u6211\u4eec\u6765\u770b\u770bMPLS VPN\u7a76\u7adf\u662f\u600e\u4e48\u4e00\u56de\u4e8b\u3002 \u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u62ff\u4e86\u4e24\u4e2a\u5ba2\u6237\u505a\u793a\u4f8b\uff1a\u5ba2\u6237A\u53ca\u5ba2\u6237B\uff0c\u4ed6\u4eec\u5404\u81ea\u6709\u4e24\u4e2a\u7ad9\u70b9\u3002\u73b0\u5728\u8981\u6c42\u5ba2\u6237A\u7684\u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u80fd\u591f\u4e92\u901a\uff0c\u5ba2\u6237B\u7684\u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u80fd\u591f\u4e92\u901a\uff0c\u800c\u5ba2\u6237A\u3001B\u4e4b\u95f4\u662f\u5b8c\u5168\u9694\u79bb\u7684\u3002\u518d\u8005\uff0c\u540c\u4e00\u4e2a\u5ba2\u6237\u7684\u4e24\u7ad9\u70b9\u4e4b\u95f4\uff0c\u8981\u80fd\u591f\u52a8\u6001\u7684\u4ea4\u4e92\u8def\u7531\u4fe1\u606f\uff0c\u4e5f\u5c31\u662f\u8bf4\u5ba2\u6237A\u7684\u7ad9\u70b91\u7684CE\u8def\u7531\u5668\u8981\u80fd\u591f\u52a8\u6001\u7684\u5b66\u4e60\u5230\u7ad9\u70b92\u5185\u7684\u8def\u7531\u3002 \u9996\u5148\u5ba2\u6237A\u7ad9\u70b91\u7684CE\u8def\u7531\u5668\u53ca\u5ba2\u6237B\u7ad9\u70b91\u7684CE\u8def\u7531\u5668\u4e0ePE\u8def\u7531\u5668\u5747\u8fd0\u884c\u8def\u7531\u534f\u8bae\uff08\u4e5f\u5c31\u662fPE-CE\u4e4b\u95f4\u7684\u8def\u7531\u534f\u8bae\uff09\uff0c\u4f8b\u5982BGP\u6216\u8005OSPF\uff0c\u6216\u8005\u5e72\u8106\u9759\u6001\u8def\u7531\u90fd\u884c\uff0c\u8fd9\u4e48\u505a\u7684\u76ee\u7684\u662f\u628a\u672c\u5730\u7ad9\u70b9\u7684\u8def\u7531\u4ea4\u7ed9PE1\uff0c \u7136\u540e\u8ba9PE1\u5e2e\u5fd9\u4f20\u9012\u7ed9PE2\uff0c\u518d\u7531PE2\u4ea4\u7ed9\u5ba2\u6237A\u7ad9\u70b92\u7684CE\u8def\u7531\u5668\uff0c\u4ece\u800c\u5c06\u8def\u7531\u6253\u901a\u3002 \u73b0\u5728\u7b2c\u4e00\u4e2a\u95ee\u9898\u6765\u4e86\u3002PE\u8def\u7531\u5668\u5982\u4f55\u533a\u5206\u4e0d\u540c\u5ba2\u6237\u7684\u8def\u7531\u5462\uff1f\u800c\u4e14\u4ece\u56fe\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u5ba2\u6237A\u7684\u7ad9\u70b91\u53ca\u5ba2\u6237B\u7684\u7ad9\u70b91\u5730\u5740\u7a7a\u95f4\u662f\u91cd\u53e0\u7684\uff0c\u90fd\u662f10.1.1.0/24\uff0cPE\u662f\u5982\u4f55\u533a\u5206\u7684\uff1f \u8fd9\u5c31\u8981\u63d0\u5230MPLS VPN\u7684\u4e00\u4e2a\u7ec4\u4ef6\uff1aVRF\uff08VPN Routing & Forwarding Instance\uff09\uff0c\u865a\u62df\u8def\u7531\u53ca\u8f6c\u53d1\u5b9e\u4f8b\uff0c \u5728\u6211\u53f8\u7684\u5e73\u53f0\u4e0a\u662fVPN-Instance\u3002\u6240\u8c13\u7684VPN\u5b9e\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\u662f\u201c\u4e00\u53f0\u865a\u62df\u8def\u7531\u5668\u201d\uff0c\u901a\u8fc7\u5728PE1\u4e0a\u521b\u5efa\u4e24\u4e2aVPN\u5b9e\u4f8b\uff0c\u7528\u4e8e\u5206\u522b\u9762\u5411\u5ba2\u62371\u53ca\u5ba2\u62372\u63d0\u4f9b\u670d\u52a1\u3002\u5728PE1\u521b\u5efa\u7684\u8fd9\u4e24\u4e2aVPN\u5b9e\u4f8b\u76f8\u5f53\u4e8e\u4e24 \u53f0\u865a\u62df\u8def\u7531\u5668\uff0c\u5b83\u4eec\u5404\u81ea\u6709\u5b8c\u5168\u72ec\u7acb\u7684\u8def\u7531\u8868\u3001\u8f6c\u53d1\u8868\u3001\u8def\u7531\u534f\u8bae\u8fdb\u7a0b\u3001\u63a5\u53e3\u3001\u7b49\u7b49\uff0c\u7531\u4e8e\u662f\u5b8c\u5168\u72ec\u7acb\u7684\u4e24\u53f0\u201c\u865a\u62df\u8def\u7531\u5668\u201d\uff0c\u56e0\u6b64\u5373\u4f7f\u4ece\u4e24\u4e2a\u4e0d\u540c\u7684\u5ba2\u6237\u5b66\u4e60\u5230\u540c\u4e00\u4e2a\u7f51\u6bb5\u7684\u8def\u7531\u4e5f\u4e0d\u7528\u62c5\u5fc3\u51b2\u7a81\u7684\u95ee\u9898\u3002 \u73b0\u5728PE1\u4e0a\u521b\u5efa\u4e86\u4e24\u4e2aVPN\u5b9e\u4f8b\uff0c\u7528\u4e8e\u5206\u522b\u548c\u5ba2\u62371\u53ca\u5ba2\u62372\u4ea4\u4e92VPN\u8def\u7531\uff08\u5ba2\u6237\u7684\u8def\u7531\uff09\uff0c\u90a3\u4e48\u4e3a\u4e86\u5c06\u8def\u7531\u4f20\u9012\u5230PE2\u6211\u4eec\u8981\u8003\u8651\u51e0\u4e2a\u95ee\u9898\uff1a 1\u3001 \u7528\u4ec0\u4e48\u8def\u7531\u534f\u8bae\u6765\u201c\u642c\u8fd0\u201d\u8fd9\u4e9b\u5ba2\u6237\u7684VPN\u8def\u7531\uff08\u5c06\u5b83\u4eec\u4ecePE1\u642c\u8fd0\u5230PE2\uff09\uff1fPE\u80af\u5b9a\u662f\u9762\u5411\u5927\u91cf\u5ba2\u6237\u7684\uff0c\u56e0\u6b64\u8def\u7531\u524d\u7f00\u7684\u6570\u91cf\u80af\u5b9a\u975e\u5e38\u5e9e\u5927\u3002 2\u3001 MPLS VPN Backbone\u7684P\u8def\u7531\u5668\u4e3b\u8981\u7684\u529f\u80fd\u662f\u9ad8\u901f\u5730\u8f6c\u53d1\u6570\u636e\uff0c\u5982\u679c\u8981\u5b83\u4eec\u4e5f\u4e00\u8d77\u7ef4\u62a4\u5ba2\u6237\u7684\u8def\u7531\u80af\u5b9a\u4f1a\u589e\u52a0\u8d1f\u62c5\uff0c\u5982\u4f55\u89c4\u907f\u8fd9\u4e2a\u95ee\u9898\uff1f \u4f60\u53ef\u80fd\u5df2\u7ecf\u60f3\u5230\uff0c\u6709\u4e00\u4e2a\u534f\u8bae\u80fd\u591f\u80dc\u4efb\u8fd9\u4e2a\u5de5\u4f5c\uff0c\u90a3\u5c31\u662fBGP\uff0cBGP\u80fd\u591f\u627f\u8f7d\u5927\u91cf\u7684\u8def\u7531\u524d\u7f00\uff0c\u662f\u4e00\u4e2a\u5728\u9aa8\u5e72\u7f51\u7edc\u4e2d\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684\u8def\u7531\u534f\u8bae\uff0c\u800c\u4e14\u5b83\u5177\u6709\u4e30\u5bcc\u7684\u8def\u5f84\u5c5e\u6027\u548c\u8def\u7531\u7b56\u7565\u5de5\u5177\uff0c\u4f7f\u5f97\u7f51\u7edc\u7684\u90e8\u7f72\u53d8\u5f97\u975e\u5e38\u7075\u6d3b\u548c\u5f39\u6027\u3002\u53e6\u5916\uff0cBGP\u8fd8\u6709\u4e00\u4e2a\u975e\u5e38\u7a81\u51fa\u7684\u4f18\u52bf\uff0c\u90a3\u5c31\u662f\u5b83\u662f\u57fa\u4e8eTCP\u5de5\u4f5c\u7684\uff0c\u5b83\u4e0d\u7528\u50cfOSPF\u90a3\u6837\u8981\u6c42\u90bb\u5c45\u5fc5\u987b\u76f4\u8fde\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5728PE1\u53caPE2\u4e4b\u95f4\u6765\u5efa\u7acbiBGP\u7684\u90bb\u5c45\u5173\u7cfb\uff0c\u8fd9\u6837\u5ba2\u6237\u7684\u8def\u7531\u5c31\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7BGP\u4f20\u9012\uff0c\u800cP\u8def\u7531\u5668\u5219\u65e0\u9700\u8fd0\u884cBGP\uff0c\u4e5f\u65e0\u9700\u7ef4\u62a4\u5ba2\u6237\u7684\u8def\u7531\u3002 \u5f53\u7136\u4e3a\u4e86\u8ba9PE1\u53caPE2\u80fd\u591f\u5efa\u7acb\u8d77iBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u6211\u4eec\u8981\u6253\u901aMPLS Backbone\u5185\u7684\u8def\u7531\uff08\u6ce8\u610f\uff0c\u53ea\u662f\u9aa8\u5e72\u7f51\u5185\u90e8\uff0c\u4e0d\u5305\u542b\u4efb\u4f55\u5ba2\u6237\u7684\u8def\u7531\uff09\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5728Backbone\u5185\u7684PE\u53caP\u8def\u7531\u5668\u4e0a\u8fd0\u884c\u4e00\u4e2aIGP\uff0c\u4f8b\u5982OSPF \u6216\u8005ISIS\uff0c\u4f7f\u5f97\u9aa8\u5e72\u7f51\u7edc\u5185\u90e8\u7684\u8def\u7531\u80fd\u591f\u6253\u901a\uff0c\u4e3a\u540e\u9762\u7684\u5de5\u4f5c\u505a\u94fa\u57ab\u3002 \u73b0\u5728PE1\u53caPE2\u4e4b\u95f4\u6709\u4e86BGP\u8fde\u63a5\uff0cPE1\u901a\u8fc7PE-CE\u95f4\u7684\u8def\u7531\u534f\u8bae\u6240\u5b66\u4e60\u5230\u7684\u5ba2\u6237A\u53ca\u5ba2\u6237B\u7684\u8def\u7531\u5c31\u80fd\u591f \u901a\u8fc7BGP\u4f20\u9012\u7ed9PE2\uff08\u53cd\u4e4b\u4ea6\u7136\uff09\uff0c\u4f46\u662f\u95ee\u9898\u53c8\u6765\u4e86\uff0c\u5ba2\u6237A\u7684\u7ad9\u70b91\u53ca\u5ba2\u6237B\u7684\u7ad9\u70b91\u4f7f\u7528\u91cd\u53e0\u7684\u5730\u5740\u7a7a\u95f4\uff0c \u90fd\u662f10.1.1.0/24\uff0cPE1\u4e0a\u867d\u7136\u6709VPN\u5b9e\u4f8b\u7528\u4e8e\u533a\u5206\uff0c\u4f46\u662f\u73b0\u5728\u8981\u628a\u8fd9\u4e9b\u8def\u7531\u901a\u901a\u4f20\u9012\u7ed9PE2\uff0c\u90a3\u4e48\u5982\u4f55\u4fdd\u8bc1\u8fd9\u4e9b\u8def\u7531\u5728MPLS VPN Backbone\u4e2d\u4f20\u9012\u65f6\u7684\u552f\u4e00\u6027\u5462\uff1f\u5982\u4f55\u89c4\u907f\u4ed6\u4eec\u7684\u91cd\u53e0\u95ee\u9898\uff1f\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u4e3a\u8def\u7531 10.1.1.0/24\u589e\u52a0\u4e00\u4e2a\u201c\u524d\u7f00\u201d\uff0c\u8fd9\u4e2a\u524d\u7f00\u79f0\u4e3aRD\uff08Route Distinguisher\uff09\uff0cRD\u503c\u7684\u957f\u5ea6\u4e3a64bit\uff0c\u8868\u73b0\u5f62\u5f0f\u901a\u5e38\u4e3a\u7c7b\u4f3c123\uff1a11\u8fd9\u6837\uff0c\u4e5f\u5c31\u662fAS\uff1aNN\u7684\u5f62\u5f0f\u3002 \u6211\u4eec\u7ed9PE\u4e0a\u7684\u6bcf\u4e00\u4e2aVPN\u5b9e\u4f8b\u5747\u8bbe\u7f6e\u4e00\u4e2a\u552f\u4e00\u7684RD\u503c\uff0c\u4f8b\u5982\u4e3a\u5ba2\u62371\u8bbe\u7f6e\u4e00\u4e2a6812\uff1a1\uff0c\u4e3a\u5ba2\u62372\u8bbe\u7f6e\u4e00\u4e2a 6812\uff1a2\uff0c\u7136\u540e\u5f53\u8981\u628a\u5ba2\u62371\u7684\u8def\u7531\u653e\u8fdbBGP\u642c\u8fd0\u7ed9PE2\u65f6\uff0c\u5c06IPv4\u7684\u8def\u7531\u524d\u7f0010.1.1.0/24\u524d\u9762\u589e\u52a0\u8be5VPN \u7684RD\u503c\uff0c\u5f97\u52306812\uff1a1\uff1a10.1.1.0/24\uff0c\u8fd9\u6837\u5c31\u6784\u6210\u4e86\u4e00\u4e2a64+32bit\u4e5f\u5c31\u662f96bit\u7684\u65b0\u524d\u7f00\uff0c\u8fd9\u4e2a\u524d\u7f00\u6211\u4eec\u79f0\u4e4b\u4e3aVPNv4\u524d\u7f00\uff0c\u5ba2\u6237B\u7684\u7ad9\u70b91\u8def\u7531\u5728BGP\u4e2d\u4f20\u9012\u65f6\u5c31\u53d8\u6210\u4e866812\uff1a2\uff1a10.1.1.0/24\uff0c\u5982\u6b64\u5219\u53ef\u89e3\u51b3\u5730\u5740\u91cd\u53e0\u7684\u95ee\u9898\uff0c\u4fdd\u8bc1\u6240\u6709\u5ba2\u6237\u8def\u7531\u7684\u552f\u4e00\u6027\u3002 \u4f20\u7edf\u7684BGP\u53ea\u80fd\u591f\u8fd0\u8f7d10.1.1.0/24\u8fd9\u6837\u7684IPv4\u8def\u7531\u524d\u7f00\uff0c\u73b0\u5728\u6211\u4eec\u8981\u8ba9BGP\u8fd0\u8f7d6812\uff1a1\uff1a10.1.1.0/24\u8fd9\u6837\u7684VPNv4\u524d\u7f00\uff0c\u5c31\u9700\u8981\u5bf9BGP\u8fdb\u884c\u6269\u5c55\u4e86\uff0c\u6269\u5c55\u4ee5\u540e\u7684BGP\u6211\u4eec\u79f0\u4e4b\u4e3aMP-BGP\uff0c\u4e5f\u5c31\u662fMulti-Protocol BGP\uff0c\u7ffb\u8bd1\u4e3a\u591a\u534f\u8baeBGP\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u73b0\u5728\u5ba2\u6237A\u53ca\u5ba2\u6237B\u7684\u8def\u7531\u7ec8\u4e8e\u4f20\u9012\u5230\u4e86PE2\u4e0a\uff0c\u63a5\u4e0b\u53bbPE2\u5c31\u8981\u628a\u5ba2\u6237A\u7ad9\u70b91\u7684\u8def\u7531\u4f20\u9012\u7ed9\u5ba2\u6237A\u7ad9\u70b92\u7684 CE\u8def\u7531\u5668\u3001\u628a\u5ba2\u6237B\u7ad9\u70b91\u7684\u8def\u7531\u4f20\u9012\u7ed9\u5ba2\u6237B\u7ad9\u70b92\u7684CE\u8def\u7531\u5668\u3002\u95ee\u9898\u53c8\u6765\u4e86\uff0cPE2\u5982\u4f55\u77e5\u9053\u8be5\u628a\u54ea\u6761VPN \u8def\u7531\u4ea4\u7ed9\u54ea\u4e2a\u5ba2\u6237\u7684CE\u5462\uff1f\u663e\u7136\u5728PE2\u4e0a\u4e3a\u4e86\u533a\u5206\u5b83\u81ea\u5df1\u6240\u76f4\u8fde\u7684\u4e0d\u540c\u5ba2\u6237\uff0c\u4e5f\u9700\u8981\u521b\u5efaVPN\u5b9e\u4f8b\uff0c\u4f46\u662f\u4ecePE1\u6536\u5230\u7684\u8fd9\u4e48\u4e00\u5927\u5768\u7684\u8def\u7531\u524d\u7f00\uff0c\u54ea\u4e9b\u662f\u8981\u653e\u8fdb\u54ea\u4e00\u4e2aVPN\u5b9e\u4f8b\u7684\u73b0\u5728\u8fd8\u662f\u65e0\u4ece\u5f97\u77e5\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u65b0\u7684\u6807\u8bb0\u6765\u5e2e\u52a9PE\uff0c\u8fd9\u5c31\u662fRT\uff08Route Target\uff09\u503c\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff0cPE1\u5728\u5c06\u5ba2\u6237A\u7ad9\u70b91\u7684\u8def\u7531\u901a\u8fc7MP-BGP\u4f20\u9012\u7ed9PE2\u4e4b\u524d\u4e3a\u8def\u7531\u6253\u4e0a\u201c\u6807\u8bb0\u201d\uff0c\u4e5f\u5c31\u662fRT\u503c 6812\uff1a1\uff0c\u800c\u4e3a\u5ba2\u6237B\u7ad9\u70b91\u7684\u8def\u7531\u6253\u4e0a\u6807\u8bb06812\uff1a2\uff0c\u8fd9\u4e9bRT\u7684\u6807\u8bb0\u5b9e\u9645\u4e0a\u662f\u201c\u7c98\u8d34\u201d\u7740VPNv4\u524d\u7f00\u4e00\u5757\u513f\u4f20\u7ed9PE2\u7684\uff0c\u5176\u5b9e\u5b83\u4eec\u662f\u4ee5BGP\u7684\u6269\u5c55Community\u7684\u5f62\u5f0f\u6765\u5b58\u50a8\u7684\u3002\u5982\u6b64\u4e00\u6765\u8def\u7531\u5230\u4e86PE2\u540e\uff0cPE2\u5c31\u80fd\u591f\u6839\u636eRT\u503c\u6765\u5c06\u4e0d\u540c\u7684\u8def\u7531\u5bfc\u5165\u5230\u5bf9\u5e94\u7684\u672c\u5730VPN\u5b9e\u4f8b\u4e2d\u3002 \u7ec8\u4e8e\uff0c\u8def\u7531\u5343\u8f9b\u4e07\u82e6\u88ab\u4f20\u9012\u5230\u4e86\u8fdc\u7aef\u7ad9\u70b9\u7684CE\u8def\u7531\u5668\u4e0a\u3002\u4f46\u662f\uff0c\u4e8b\u60c5\u8fd8\u6ca1\u6709\u7ed3\u675f\u3002\u8bbe\u60f3\u4e00\u4e0b\uff0c\u867d\u7136\u5ba2\u6237A\u7684\u7ad9\u70b92\u7684CE\u8def\u7531\u5668\u5df2\u7ecf\u5b66\u4e60\u5230\u7ad9\u70b91\u768410.1.1.0/24\u8def\u7531\uff0c\u73b0\u5728\u5b83\u53d1\u9001\u6570\u636e\u5230\u7ad9\u70b91\uff0c\u8fd9\u4e2aIP\u6570\u636e\u5305\u5148\u662f\u9001\u5230 PE2\uff0cPE2\u901a\u8fc7VPN\u8def\u7531\u8868\u7684\u67e5\u627e\u627e\u5230\u5339\u914d\u7684\u6761\u76ee\u6765\u81eaBGP\u90a3\u4e48\u63a5\u4e0b\u53bb\u5462\uff1f\u76f4\u63a5\u628aIP\u6570\u636e\u5305\u9001\u51fa\u53bb\u4e48\uff1f\u80af\u5b9a\u662f\u6709\u95ee\u9898\u7684\uff0c\u56e0\u4e3aIP\u6570\u636e\u5305\u5982\u679c\u76f4\u63a5\u9001\u51fa\u53bb\uff0cP\u8def\u7531\u5668\u63a5\u6536\u4e86\u94c1\u5b9a\u5c31\u4e22\u5305\u4e86\uff0c\u56e0\u4e3a\u5b83\u5e76\u6ca1\u6709\u8fd0\u884cBGP\u4e5f\u6ca1\u6709VPN\u5ba2\u6237\u7684\u8def\u7531\uff0c\u5b83\u53ea\u6709MPLS Backbone\u5185\u7684\u8def\u7531\uff0c\u8fd9\u5c31\u51fa\u73b0\u4e86\u8def\u7531\u9ed1\u6d1e\u3002\u600e\u4e48\u529e\uff0c\u5f97\u4e3a\u8fd9\u4e2aIP\u6570\u636e\u5305\u7a7f\u4e0a\u4e00\u4ef6\u9a6c\u7532\uff0c\u8fd9\u4e2a\u9a6c\u7532\u6574\u4e2aMPLS Backbone\u90fd\u80fd\u8ba4\u8bc6\uff0c\u800c\u4e14\u80fd\u5e2e\u52a9\u6211\u4eec\u628a\u8fd9\u7a7f\u4e86\u9a6c\u7532\u7684\u6570\u636e\u5305\u4ecePE2\u9001\u5230PE1\u53bb\uff0c\u8fd9\u5c31\u662fMPLS\u6807\u7b7e\u3002\u5f53PE2\u628a\u6765\u81eaVPN\u5ba2\u6237\u7684IP\u6570\u636e\u5305\u9001\u5230MPLS VPN Backbone\u4e4b\u524d\uff0c\u8981\u4e3a\u6570\u636e\u5305\u538b\u5165\u4e00\u5c42\u6807\u7b7e\uff1a \u8fd9\u5c42\u6807\u7b7e\u663e\u7136\u662fP\u8def\u7531\u5668\u7ed9\u5206\u53d1\u7684\uff0c\u4e3a\u8c01\u5206\u53d1\u7684? \u4e3aPE1\u8def\u7531\u5668\u7684Loopback\u8def\u7531\u5206\u53d1\u7684\u6807\u7b7e\uff0c\u800c\u8fd9\u4e2a Loopback\u5730\u5740\uff0c\u5c31\u662fPE2\u4e0a\u53bb\u5f80\u76ee\u6807\u7f51\u6bb5\u8def\u7531\uff08\u5ba2\u6237A\u7684\u7ad9\u70b91\uff09\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u3002PE2\u4e3a\u6570\u636e\u5305\u538b\u5165\u6807\u7b7e\u540e\uff0c \u9001\u5230P\u8def\u7531\u5668\uff0cP\u8def\u7531\u5668\u6cbf\u7740\u5efa\u7acb\u597d\u7684LSP\u5c06\u6807\u7b7e\u5305\u9001\u5230PE1\u8def\u7531\u5668\u3002\u5f53\u7136\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u6574\u4e2aMPLS VPN Backbone\u80fd\u591f\u5efa\u7acbLSP\uff0c\u8981\u5728\u8bbe\u5907\u4e0a\u90fd\u6fc0\u6d3bMPLS\u548cLDP\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u79f0\u4e4b\u4e3aMPLS VPN\u3002 \u4f46\u662f\uff0c\u6807\u7b7e\u5305\u662f\u5230\u4e86PE1\uff0cPE1\u8be5\u5982\u4f55\u5904\u7406\u91cc\u5934\u7684\u6570\u636e\u5462\uff1f\u8fd9\u4e2a\u5305\u662f\u53bb\u5f8010.1.1.0/24\u7f51\u7edc\u7684\uff0c\u800c\u81ea\u5df1\u6709\u4e24\u4e2a 10.1.1.0/24\u7f51\u7edc\u76f4\u8fde\u554a\uff0c\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5c31\u9700\u8981\u4e3a\u6570\u636e\u5305\u518d\u538b\u5165\u4e00\u5c42\u6807\u7b7e\uff1a PE2\u5c06IP\u6570\u636e\u5305\u9001\u4e0aMPLS VPN Backbone\u4e4b\u524d\uff0c\u4e3a\u6570\u636e\u5305\u538b\u5165\u4e24\u5c42\u6807\u7b7e\uff0c\u5176\u4e2d\u5916\u5c42\u6807\u7b7e\uff0c\u4e5f\u5c31\u662f\u6807\u7b7e1011 \u6211\u4eec\u79f0\u4e4b\u4e3aIGP\u6807\u7b7e\uff0c\u5b83\u662f\u7531P\u8def\u7531\u5668\u901a\u8fc7LDP\u534f\u8bae\u5206\u53d1\u7684\u3002\u800c1233\u6807\u7b7e\u662f\u5185\u5c42\u6807\u7b7e\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3aVPN\u6807\u7b7e\uff0c \u5b83\u662f\u7531PE1\u8def\u7531\u5668\u901a\u8fc7MP-BGP\u5206\u53d1\u7ed9PE2\u7684\u3002 \u5916\u5c42\u6807\u7b7e\u662f\u4e3a\u4e86\u5c06\u6570\u636e\u6cbf\u7740LSP\u9001\u5230PE1\uff0c\u800c\u5185\u5c42\u6807\u7b7e\u662f\u4e3a\u4e86\u5728\u6570\u636e\u5230\u8fbePE1\u540e\uff0c\u8ba9PE1\u5224\u65ad\u8be5\u6570\u636e\u5305\u7a76\u7adf\u662f\u5e94\u8be5\u9001\u5230\u54ea\u4e00\u4e2aVPN\uff0c\u56e0\u4e3aVPN\u6807\u7b7e\u662fPE1\u5206\u914d\u7684\u6240\u4ee5\u5b83\u80af\u5b9a\u4e0d\u4f1a\u641e\u9519\u3002\u5b8c\u7f8e\u7684\u89e3\u51b3\u65b9\u6848\u3002 \u6570\u636e\u5305\u7ec8\u4e8e\u7a7f\u8d8a\u4e86\u6574\u4e2aMPLS VPN\u7f51\u7edc\uff0c\u5230\u8fbe\u4e86\u7ad9\u70b91\u3002\u8fd9\u5c31\u662fMPLS VPN\u3002 VPN \u5b9e\u4f8b \u00b6 MPLS VPN\u4e00\u4e2a\u975e\u5e38\u5438\u5f15\u4eba\u7684\u5730\u65b9\uff0c\u5c31\u662f\u53ef\u4ee5\u8ba9\u4e0d\u540c\u5ba2\u6237\u7684\u8def\u7531\u53ca\u6570\u636e\u7a7f\u8d8a\u8fd0\u8425\u5546\u7684MPLS VPN Backbone\uff0c \u800c\u4e14\u8fd9\u4e9b\u8def\u7531\u548c\u6570\u636e\u53c8\u662f\u76f8\u4e92\u9694\u79bb\u548c\u72ec\u7acb\u7684\uff0c\u5373\u4f7f\u4e0d\u540c\u7684\u5ba2\u6237\u62e5\u6709\u76f8\u540c\u7684IPv4\u5730\u5740\u7a7a\u95f4\u4e5f\u4e0d\u8981\u7d27\u3002\u4e0e\u5ba2\u6237\u7684 CE\u8def\u7531\u5668\u4ea4\u4e92\u201cVPN\u5ba2\u6237\u8def\u7531\u201d\u7684PE\u8def\u7531\u5668\uff0c\u5c31\u663e\u5f97\u975e\u5e38\u91cd\u8981\u4e86\u3002 \u5728PE\u4e0a\u6709\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\u2014VRF\uff08\u4e25\u683c\u7684\u8bf4\uff0cVRF\u7684\u4f5c\u7528\u73b0\u5728\u5df2\u7ecf\u6269\u5c55\u4e86\uff0c\u6211\u4eec\u8fd9\u91cc\u91cd\u70b9\u8ba8\u8bba\u5728MPLS VPN\u4e2d\u7684\u8fd0\u7528\uff09\u3002 VRF\uff1aVirtual Routing and Forwarding\uff0c\u7ffb\u8bd1\u6210\u865a\u62df\u8def\u7531\u53ca\u8f6c\u53d1\uff08\u5728\u6211\u53f8\u7684\u8bbe\u5907\u4e0a\u4e5f\u88ab\u79f0\u4e3aVPN-Instance\uff09\uff0c \u5b83\u662f\u4e00\u79cdVPN\u8def\u7531\u548c\u8f6c\u53d1\u5b9e\u4f8b\u3002\u4e00\u53f0PE\u8def\u7531\u5668\uff0c\u7531\u4e8e\u53ef\u80fd\u540c\u65f6\u8fde\u63a5\u4e86\u591a\u4e2aVPN\u7528\u6237\uff0c\u8fd9\u4e9b\u7528\u6237\uff08\u7684\u8def\u7531\u548c\u6570\u636e\uff09\u5f7c\u6b64\u4e4b\u95f4\u9700\u8981\u76f8\u4e92\u9694\u79bb\uff0c\u8fd9\u65f6\u5019\u5c31\u7528\u5230\u4e86VRF\u3002PE\u8def\u7531\u5668\u4e0a\u6bcf\u4e00\u4e2aVPN\u90fd\u6709\u4e00\u4e2aVRF\u3002PE\u8def\u7531\u5668\u9664\u4e86\u7ef4\u62a4\u5168\u5c40IP\u8def\u7531\u8868\u4e4b\u5916\uff0c\u8fd8\u4e3a\u6bcf\u4e2aVRF\u7ef4\u62a4\u4e00\u5f20\u72ec\u7acb\u7684IP\u8def\u7531\u8868\uff0c\u8fd9\u5f20\u8def\u7531\u8868\u79f0\u4e3aVRF\u8def\u7531\u8868\u3002\u8981\u6ce8\u610f\u7684\u662f\u5168\u5c40IP\u8def\u7531\u8868\u4ee5\u53ca\u6bcf\u4e2aVRF\u7684\u8def\u7531\u8868\u90fd\u662f\u76f8\u4e92\u72ec\u7acb\u6216\u8005\u8bf4\u76f8\u4e92\u9694\u79bb\u7684\u3002\u56e0\u4e3a\u6bcf\u4e00\u4e2aVPN\u90fd\u6709\u4e00\u5f20\u72ec\u7acb\u7684 VRF\u8def\u7531\u8868\uff0c\u6240\u4ee5PE\u8def\u7531\u5668\u4e0a\u6bcf\u4e00\u4e2aVPN\u4e5f\u4f1a\u6709\u4e00\u5f20\u72ec\u7acb\u7684FIB\u8868\u6765\u8f6c\u53d1\u8fd9\u4e9b\u62a5\u6587\uff0c\u8fd9\u5c31\u662fVRF FIB\u8868\u3002 \u4e00\u65e6\u5728PE\u8def\u7531\u5668\u4e0a\u521b\u5efa\u4e86\u4e00\u4e2aVPN\u7684\u5b9e\u4f8b\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06\u7279\u5b9a\u7684\u63a5\u53e3\uff08\u7269\u7406\u6216\u903b\u8f91\u7684\uff09\u7ed1\u5b9a\u5230\u8fd9\u4e2aVPN\u5b9e\u4f8b\uff0c\u90a3\u4e48\u8fd9\u4e2a\u63a5\u53e3\u5c06\u4e0d\u518d\u5c5e\u4e8e\u5168\u5c40IP\u8def\u7531\u8868\u6216\u5176\u4ed6\u4efb\u4f55VPN\u5b9e\u4f8b\uff0c\u53ea\u4e3a\u8be5VPN\u670d\u52a1\u3002 RD \u00b6 \u4f20\u7edfBGP\u65e0\u6cd5\u6b63\u786e\u5904\u7406\u5730\u5740\u7a7a\u95f4\u91cd\u53e0\u7684VPN\u7684\u8def\u7531\u3002\u5047\u8bbe\u5ba2\u6237A\u548c\u5ba2\u6237B\u90fd\u4f7f\u7528\u4e861.1.1.0/24\u7f51\u6bb5\u7684\u5730\u5740\uff0c\u5e76\u5404\u81ea\u53d1\u5e03\u4e86\u4e00\u6761\u53bb\u5f80\u6b64\u7f51\u6bb5\u7684\u8def\u7531\u3002\u867d\u7136\u672c\u7aefPE\u901a\u8fc7\u4e0d\u540c\u7684VRF\u53ef\u4ee5\u533a\u5206\u5730\u5740\u7a7a\u95f4\u91cd\u53e0\u7684VPN\u7684\u8def\u7531\uff0c\u4f46\u662f\u8fd9\u4e9b\u8def\u7531\u53d1\u5f80\u5bf9\u7aefPE\u540e\uff0c\u5bf9\u7aefPE\u5c06\u6839\u636eBGP\u9009\u8def\u89c4\u5219\u53ea\u9009\u62e9\u5176\u4e2d\u4e00\u6761VPN\u8def\u7531\uff0c\u4ece\u800c\u5bfc\u81f4\u53bb\u5f80\u53e6\u4e00\u4e2a VPN\u7684\u8def\u7531\u4e22\u5931\u3002 PE\u4e4b\u95f4\u4f7f\u7528MP-BGP\uff08Multiprotocol Extensions for BGP-4\uff0cBGP-4\u7684\u591a\u534f\u8bae\u6269\u5c55\uff09\u6765\u53d1\u5e03VPN\u8def\u7531\uff0c\u5e76\u4f7f\u7528VPN-IPv4\u5730\u5740\u6765\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002VPN-IPv4\u5730\u5740\u5171\u670996bit\uff0c\u5305\u62ec64bit\u7684RD\uff08Route Distinguisher\uff0c\u8def\u7531\u6807\u8bc6\u7b26\uff09\u548c32bit\u7684IPv4\u5730\u5740\u524d\u7f00\u3002RD\u7528\u4e8e\u533a\u5206\u4f7f\u7528\u76f8\u540c\u5730\u5740\u7a7a\u95f4\u7684IPv4\u524d\u7f00\uff0c\u589e\u52a0\u4e86RD\u7684IPv4\u5730\u5740\u79f0\u4e3aVPN-IPv4\u5730\u5740\uff08\u5373VPNv4\u5730\u5740\uff09\u3002PE\u4eceCE\u63a5\u6536\u5230IPv4\u8def\u7531\u540e\uff0c\u8f6c\u6362\u4e3a\u5168\u5c40\u552f\u4e00\u7684VPNv4\u8def\u7531\uff0c\u7136\u540e\u5c06\u5176\u901a\u544a\u7ed9\u8fdc\u7aefPE\u3002RD\u503c\u5728VPN\u5b9e\u4f8b\u4e2d\u8fdb\u884c\u914d\u7f6e\u3002 RD\u7528\u4e8e\u5728MP-BGP\u8fd0\u8f7dVPN\u524d\u7f00\u65f6\uff0c\u786e\u4fdd\u8fd9\u4e9b\u524d\u7f00\u7684\u552f\u4e00\u6027\u3002\u4f46\u662fRD\u5e76\u4e0d\u4f1a\u8bf4\u660e\u8be5\u524d\u7f00\u5c5e\u4e8e\u54ea\u4e00\u4e2aVRF \uff08\u9700\u8981\u642d\u914dRT\uff09\uff0cRD\u7684\u529f\u80fd\u5e76\u4e0d\u662fVPN\u6807\u793a\u7b26\uff0c\u56e0\u4e3a\u5728\u4e00\u4e9b\u590d\u6742\u7684VPN\u73af\u5883\u4e2d\uff0c\u53ef\u80fd\u4e00\u4e2aVPN\u5b58\u5728\u591a\u4e2aRD\u3002 RD\u7684\u6700\u91cd\u8981\u7684\u4e24\u4e2a\u529f\u80fd\uff1a \u4e0e32bit\u7684IPv4\u524d\u7f00\u4e00\u8d77\u6784\u621096bit\u7684VPNv4\u524d\u7f00\uff1b \u5982\u679c\u4e0d\u540c\u7684VPN\u5ba2\u6237\u5b58\u5728\u76f8\u540c\u7684IPv4\u5730\u5740\u7a7a\u95f4\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u4e0d\u540c\u7684RD\u503c\u4ece\u800c\u4fdd\u8bc1\u524d\u7f00\u7684\u552f\u4e00\u6027\u3002 RD\u53ef\u4ee5\u6709\u4e24\u79cd\u8868\u73b0\u5f62\u5f0f\uff1aAS:nn\u6216\u8005IP-address:nn\u3002\u5176\u4e2dnn\u4ee3\u8868\u7f16\u53f7\u3002\u6700\u5e38\u7528\u7684\u683c\u5f0f\u662fAS:nn\uff0c\u5176\u4e2dAS\u4ee3\u8868AS\u53f7\u3002\u901a\u5e38AS\u662fIANA\u5206\u914d\u7ed9\u670d\u52a1\u63d0\u4f9b\u5546\u7684AS\u53f7\uff0cnn\u662f\u670d\u52a1\u63d0\u4f9b\u5546\u5206\u914d\u7ed9VRF\u7684\u552f\u4e00\u53f7\u7801\u3002\u4ea7\u751f\u7684VPNv4 \u524d\u7f00\u901a\u8fc7MP-BGP\u5728PE\u8def\u7531\u5668\u4e4b\u95f4\u88ab\u4f20\u9012\u3002 RT \u00b6 Route Targets\uff08\u5728\u6211\u53f8\u7684\u8bbe\u5907\u4e0a\u4e5f\u53ebVPN-Target\uff09\uff0cRT\u503c\u7528\u4e8e\u533a\u5206VPN\u5b9e\u4f8b\u3001\u63a7\u5236VPN\u8def\u7531\u7684\u6536\u53d1\uff0c\u5b83\u5b9a\u4e49\u4e86\u4e00\u6761VPNv4\u8def\u7531\u53ef\u4ee5\u4e3a\u54ea\u4e9b\u7ad9\u70b9\u6240\u63a5\u6536\uff0c\u4ee5\u53caPE\u53ef\u4ee5\u63a5\u6536\u54ea\u4e9b\u7ad9\u70b9\u53d1\u9001\u6765\u7684\u8def\u7531\u3002RT\u503c\u5176\u5b9e\u662f\u4e00\u79cd\u7c7b\u4f3c\u201c\u8def\u7531\u6807\u8bb0\u201d\u7684\u4e1c\u897f\uff0c\u76f8\u5f53\u4e8e\u6211\u4eec\u7ed9VPNv4\u8def\u7531\u6253\u4e0a\u6807\u8bb0\u4e86\uff0c\u7136\u540e\u518d\u57fa\u4e8e\u8fd9\u4e9b\u6807\u8bb0\u6765\u51b3\u5b9a\u54ea\u4e9b\u8def\u7531\u662f\u8981\u653e\u5165\u54ea\u4e00\u4e2aVPN\u5b9e\u4f8b\u7684\u3002 \u6bcf\u4e2aVRF\u5173\u8054\u4e00\u4e2a\u6216\u591a\u4e2aRT\u3002\u6709\u4e24\u7c7bRT\uff1a **Export RT\uff1a**PE\u4ece\u672c\u5730\u76f4\u8fde\u7684\u7ad9\u70b9\u5b66\u5230IPv4\u5ba2\u6237\u8def\u7531\u540e\uff0c\u5c06\u5176\u8f6c\u6362\u4e3aVPNv4\u8def\u7531\uff0c\u5e76\u4e3a\u8fd9\u4e9b\u8def\u7531\u8bbe\u7f6e RT\u503c\uff0c\u8be5RT\u503c\u7b49\u4e8eVRF\u4e2d\u6307\u5b9a\u7684Export RT\u3002RT\u503c\u4f5c\u4e3aBGP\u7684\u6269\u5c55Community\u5c5e\u6027\u968f\u8def\u7531\u53d1\u5e03\u7ed9\u8fdc\u7aef PE\u3002 **Import RT\uff1a**PE\u6536\u5230\u5176\u5b83PE\u901a\u544a\u8fc7\u6765\u7684VPNv4\u8def\u7531\u65f6\uff0c\u5c06\u68c0\u67e5\u8def\u7531\u7684RT\uff0c\u5f53\u8def\u7531\u7684RT\u4e0e\u8be5PE\u4e0a\u67d0\u4e2a VRF\u7684Import RT\u5339\u914d\u65f6\uff0cPE\u5c31\u628a\u8def\u7531\u6ce8\u5165\u5230\u8be5VRF\u4e2d\u3002 Export RT\u548cImport RT\u7684\u8bbe\u7f6e\u76f8\u4e92\u72ec\u7acb\uff0c\u5e76\u4e14\u90fd\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a\u503c\uff0c\u80fd\u591f\u5b9e\u73b0\u7075\u6d3b\u7684VPN\u8bbf\u95ee\u63a7\u5236\uff0c\u4ece\u800c\u5b9e\u73b0\u591a\u79cdVPN\u7ec4\u7f51\u65b9\u6848\u3002\u4f8b\u5982\uff1a\u67d0VRF\u7684Import RT\u5305\u542b100:1\uff0c200:1\u548c300:1\uff0c\u5f53\u6536\u5230\u7684\u8def\u7531\u7684RT\u4e3a100:1\u3001200:1\u3001 300:1\u4e2d\u7684\u4efb\u610f\u503c\u65f6\uff0c\u90fd\u53ef\u4ee5\u88ab\u6ce8\u5165\u5230\u8be5VRF\u4e2d\u3002 \u524d\u9762\u5df2\u7ecf\u8bf4\u4e86\uff0cVPN\u5ba2\u6237\u7684\u8def\u7531\u5728MPLS VPN Backbone\u5185\u4f20\u8f93\u65f6\uff0c\u662f\u901a\u8fc7MP-BGP\u6765\u8fd0\u8f7d\u7684\uff0c\u5e76\u4e14\u5728\u8fd0\u8f7d\u7684\u8fc7\u7a0b\u4e2d\u662f\u4ee5VPNv4\u8def\u7531\u524d\u7f00\u7684\u5f62\u5f0f\u88ab\u8fd0\u8f7d\uff0cRD\u503c\u7528\u4e8e\u548c32bit\u7684IPv4\u524d\u7f00\u6784\u621096bit\u7684VPNv4\u524d\u7f00\u3002\u800c\u4e0e\u8def\u7531\u524d\u7f00\u5171\u540c\u88ab\u8fd0\u8f7d\u7684\u8fd8\u6709\u5176\u4ed6\u7684BGP\u8def\u5f84\u5c5e\u6027\uff0c\u4f8b\u5982AS_PATH\u3001LP\u3001OriginCode\u7b49\uff0c\u9664\u6b64\u4e4b\u5916\u8fd8\u6709\u975e\u5e38\u91cd\u8981\u7684RT\u503c\uff0cRT\u88ab\u5b58\u50a8\u5728\u6269\u5c55Community\u5c5e\u6027\u4e2d\uff0c\u4e0eVPNv4\u8def\u7531\u4e00\u540c\u88ab\u8fd0\u8f7d\u5230\u5bf9\u7aefPE\u8def\u7531\u5668\u3002\u5bf9\u7aefPE\u4e5f\u90e8\u7f72\u4e86VPN\u5b9e\u4f8b\uff0cRT\u503c\uff08\u5305\u62ecImport RT\u548cExport RT\u4e24\u4e2a\u503c\uff09\u662f\u5173\u8054\u5728VPN\u5b9e\u4f8b\u4e2d\u7684\u3002\u5f53PE\u63a5\u6536\u5230\u4e00\u5927\u5768 VPNv4\u8def\u7531\u65f6\uff0c\u5b83\u53ea\u5c06\u90a3\u4e9b\u5339\u914dVPN\u5b9e\u4f8b\u4e2d\u7684Import RT\u7684\u8def\u7531\u653e\u5165\u8be5VPN\u5b9e\u4f8b\u3002 \u57fa\u7840\u5b9e\u9a8c \u00b6 \u62d3\u6251\u8bf4\u660e \u00b6 Device Port IP Address Description CE1\uff08R1\uff09 GE0/0/0 10.1.12.1/24 Loopback0 1.1.1.1/32 \u6a21\u62df\u7ad9\u70b91\u7684\u5185\u7f51\u8def\u7531 PE1\uff08R2\uff09 GE0/0/0 10.1.12.2/24 \u63a5\u53e3\u6dfb\u52a0\u5230VPN\u5b9e\u4f8bABC GE0/0/1 10.1.23.2/24 Loopback0 2.2.2.2/32 P1\uff08R3\uff09 GE0/0/0 10.1.23.3/24 GE0/0/1 10.1.34.3/24 Loopback0 3.3.3.3/32 P2\uff08R4\uff09 GE0/0/0 10.1.34.4/24 GE0/0/1 10.1.45.4/24 Loopback0 4.4.4.4/32 PE2\uff08R5\uff09 GE0/0/0 10.1.45.5/24 \u63a5\u53e3\u6dfb\u52a0\u5230VPN\u5b9e\u4f8bABC GE0/0/1 10.1.56.5/24 Loopback0 5.5.5.5/32 CE2\uff08R6\uff09 GE0/0/0 10.1.56.6/24 Loopback0 6.6.6.6/32 \u6a21\u62df\u7ad9\u70b92\u7684\u5185\u7f51\u8def\u7531 CE1\u6a21\u62df\u5ba2\u6237A\u7684\u7ad9\u70b91\u8bbe\u5907\uff0cCE2\u6a21\u62df\u5ba2\u6237A\u7684\u7ad9\u70b92\u8bbe\u5907\uff0cCE1\u53caCE2\u4e0a\u5404\u6709\u4e00\u4e2aLoopback\u63a5\u53e3 \u7528\u6765\u6a21\u62df\u7ad9\u70b9\u5185\u7684\u5ba2\u6237\u8def\u7531\u3002CE1\u4e0ePE1\u4e4b\u95f4\uff0cCE2\u4e0ePE2\u4e4b\u95f4\u8fd0\u884c\u7684PE-CE\u8def\u7531\u534f\u8bae\u662fOSPF\uff0c \u4f7f\u7528\u8fdb\u7a0b\u53f71\u3002 Backbone\u5185\u4f7f\u7528OSPF\u6253\u901a\u9aa8\u5e72\u5185\u7684\u8def\u7531\uff0cOSPF\u4f7f\u7528\u8fdb\u7a0b\u53f7100\u3002 PE1\u53caPE2\u5efa\u7acb\u57fa\u4e8eLoopback\u7684MP-iBGP\u90bb\u5c45\u5173\u7cfb\u3002 \u5b8c\u6210\u76f8\u5173\u914d\u7f6e\uff0c\u4f7f\u5f97\u5ba2\u6237A\u7684\u4e24\u4e2a\u7ad9\u70b9\u80fd\u591f\u4e92\u901a\u3002 \u914d\u7f6e\u6b65\u9aa4 \u00b6 Backbone\u5185\u8fd0\u884cOSPF\uff0c\u7edf\u4e00\u4f7f\u7528\u8fdb\u7a0b\u53f7100 \u00b6 \u5728PE1\u3001P1\u3001P2\u3001PE2\u4e0a\u8fd0\u884cOSPF\u3002\u8fd0\u884c\u8be5OSPF\u8fdb\u7a0b\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u6253\u901aBackbone\u5185\u7684\u8def\u7531\uff0c\u56db\u53f0\u8def\u7531\u5668\u90fd\u8981\u901a\u544a\u81ea\u5df1\u7684Loopback0\u7f51\u6bb5\u8def\u7531\u3002\u8fd9\u4e2aIGP\u6253\u901a\u7684\u8def\u7531\u4e00\u65b9\u9762\u662f\u4e3a\u4e86LDP\u80fd\u591f\u5efa\u7acb\u8d77\u90bb\u63a5\u5173\u7cfb\uff0c\u5e76\u4e14\u80fd\u591f\u6b63\u5e38\u7684\u5206\u53d1\u6807\u7b7e\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u662f\u4e3a\u4e86PE1\u53caPE2\u4e4b\u95f4\u80fd\u591f\u5efa\u7acb\u8d77\u57fa\u4e8eLoopback \u7684MP-iBGP\u90bb\u5c45\u5173\u7cfb\u3002 Backbone\u5185\u8fd0\u884cLDP \u00b6 \u5728PE1\u3001P1\u3001P2\u3001PE2\u4e0a\u8fd0\u884cMPLS\u53caLDP\u3002LDP\u5f00\u59cb\u5de5\u4f5c\u540e\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\u5373\u4f1a\u4e3a/32\u7684\u4e3b\u673a\u8def\u7531\u6346\u7ed1\u5e76\u5206\u53d1\u6807\u7b7e\u3002\u9aa8\u5e72\u7f51\u5185\u56db\u53f0\u8def\u7531\u5668\u7684Loopback\u8def\u7531\u90fd\u4f1a\u5efa\u7acbLSP\u3002\u8fd9\u4e3a\u540e\u7eed\u7684\u5ba2\u6237\u6570\u636e\u8f6c\u53d1\u505a\u4e86\u94fa\u57ab\u3002 PE1\u53caPE2\u521b\u5efaVPN\u5b9e\u4f8b\uff0c\u5e76\u8fd0\u884cPE-CE\u8def\u7531\u534f\u8bae \u00b6 \u5728PE1\u53caPE2\u4e0a\u521b\u5efa\u4e00\u4e2aVPN\u5b9e\u4f8b\uff0c\u547d\u4ee4\u4e3aABC\uff0c\u5c06\u8fde\u63a5\u5230CE\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u8fd9\u4e2aVPN\u5b9e\u4f8b\u4e2d\u3002\u540c\u65f6PE1\u3001PE2\u5747\u4e0e\u81ea\u5df1\u76f4\u8fde\u7684CE\u8def\u7531\u5668\u8fd0\u884c\u4e00\u4e2a\u57fa\u4e8eVPN\u5b9e\u4f8b\u7684OSPF\u8fdb\u7a0b\uff0c\u7edf\u4e00\u4f7f\u7528\u8fdb\u7a0b\u53f71\u3002\u52a1\u5fc5\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u4e2aOSPF\u8fdb\u7a0b\u662f\u57fa\u4e8eVPN\u5b9e\u4f8bABC\uff08\u4e5f\u5c31\u662f\u57fa\u4e8e\u865a\u62df\u8def\u7531\u5668\uff09\u7684\uff0c\u800c\u4e0d\u662f\u57fa\u4e8e\u5168\u5c40\u8def\u7531\u5668\u7684\u3002 PE1\u53caPE2\u521b\u5efaMP-BGP\u8fdb\u7a0b\uff0c\u5e76\u4e14\u5efa\u7acbMP-iBGP\u90bb\u5c45\u5173\u7cfb \u00b6 PE1\u53caPE2\u57fa\u4e8eLoopback\u5efa\u7acbMP-iBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u6fc0\u6d3b\u4e8c\u8005\u7684VPNv4\u8fde\u63a5\u3002 PE1\u53caPE2\u4e0a\u914d\u7f6eVPN\u8def\u7531\u4e0eBGP\u8def\u7531\u7684\u4e92\u91cd\u53d1\u5e03 \u00b6 \u7531\u4e8ePE-CE\u4e4b\u95f4\u9009\u7528\u7684\u8def\u7531\u534f\u8bae\u662fOSPF\uff0c\u56e0\u6b64\u4e3a\u4e86\u5c06\u8def\u7531\u62c9\u901a\uff0c\u9700\u8981\u5728\u4e24\u53f0PE\u4e0a\u914d\u7f6eOSPF\u8fdb\u7a0b 1\uff0c\u4ee5\u53caMP-BGP\u7684\u8def\u7531\u53cc\u5411\u91cd\u53d1\u5e03\u3002 \u67e5\u770b\u53ca\u9a8c\u8bc1 \u00b6 \u8bbe\u5907\u914d\u7f6e \u00b6 \u5404\u8bbe\u5907\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u4e86\u3002 Backbone\u5185\u8fd0\u884cOSPF \u00b6 Backbone\u5185\u7684\u8bbe\u5907\uff1aPE1\u3001PE2\u3001P1\u3001P2\u8fd0\u884cOSPF\uff0c\u7edf\u4e00\u4f7f\u7528\u8fdb\u7a0b\u53f7100\u3002\u8fd0\u884c\u8be5OSPF\u8fdb\u7a0b\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u6253\u901a\u9aa8\u5e72\u7f51\u5185\u7684\u8def\u7531\uff0c\u56db\u53f0\u8bbe\u5907\u5728\u4e92\u8054\u63a5\u53e3\u4e0a\u6fc0\u6d3bOSPF\uff0c\u5e76\u4e14\u901a\u544a\u81ea\u5df1\u7684Loopback0 \u63a5\u53e3\u8def\u7531\u3002 PE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a P1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a P2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5728\u5404\u8bbe\u5907\u4e0a\u67e5\u770b\u8def\u7531\uff0c\u786e\u4fdd\u8def\u7531\u8868\u662f\u6b63\u786e\u7684\u3002 Backbone\u5185\u8fd0\u884cMPLS\u53caLDP \u00b6 PE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a P1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a P2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u786e\u4fdd\u6240\u6709\u7684LDP\u90bb\u5c45\u5173\u7cfb\u90fd\u6b63\u786e\u7684\u5efa\u7acb\uff1a \u5176\u4ed6\u8bbe\u5907\u7684\u67e5\u770b\u4e0d\u518d\u8d58\u8ff0\u3002 \\<PE1>display mpls lsp ------------------------------------------------------------------------------- LSP Information: LDP LSP ------------------------------------------------------------------------------- FEC In/Out Label In/Out IF Vrf Name 2.2.2.2/32 3/NULL -/- 3.3.3.3/32 NULL/3 -/GE0/0/1 3.3.3.3/32 1024/3 -/GE0/0/1 4.4.4.4/32 NULL/1025 -/GE0/0/1 4.4.4.4/32 1025/1025 -/GE0/0/1 5.5.5.5/32 NULL/1026 -/GE0/0/1 5.5.5.5/32 1026/1026 -/GE0/0/1 \u4e0a\u9762\u8f93\u51fa\u7684\u662fPE1\u7684\u6807\u7b7e\u8f6c\u53d1\u8868\u3002\u6211\u4eec\u770b\u5230\u5173\u4e8e\u7f51\u7edc\u4e2d\u7684/32\u4e3b\u673a\u8def\u7531\u90fd\u5df2\u7ecf\u6536\u5230\u4e86\u6807\u7b7e\u3002 PE1\u53caPE2\u521b\u5efaVPN\u5b9e\u4f8b\uff0c\u5e76\u8fd0\u884cPE-CE\u8def\u7531\u534f\u8bae \u00b6 PE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u786e\u4fddPE\u80fd\u591f\u5b66\u4e60\u5230\u76f4\u8fdeCE\u7684\u5ba2\u6237\u8def\u7531\uff1a Destinations : 5 Routes : 5 Destination/Mask Proto Pre Cost Flags NextHop Interface 1.1.1.1/32 OSPF 10 1 D 10.1.12.1 GigabitEthernet0/0/0 10.1.12.0/24 Direct 0 0 D 10.1.12.2 GigabitEthernet0/0/0 10.1.12.2/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/0 10.1.12.255/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/0 255.255.255.255/32 Direct 0 0 D 127.0.0.1 InLoopBack0 PE1\u4e0aVPN\u5b9e\u4f8bABC\u7684\u8def\u7531\u8868\u4e2d\u5df2\u7ecf\u901a\u8fc7OSPF\u5b66\u4e60\u5230CE1\u7684\u5ba2\u6237\u8def\u75311.1.1.1/32\u3002 PE1\u53caPE2\u521b\u5efaMP-BGP\u8fdb\u7a0b\uff0c\u5e76\u4e14\u5efa\u7acbMP-iBGP\u90bb\u5c45\u5173\u7cfb \u00b6 PE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PE1\u53caPE2\u4e0a\u914d\u7f6ePE-CE\u534f\u8bae\u4e0eBGP\u7684\u4e92\u91cd\u53d1\u5e03 \u00b6 PE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u786e\u8ba4\u4e0bCE1\u662f\u5426\u5df2\u7ecf\u6536\u5230\u53bb\u5f80CE2\u7684\u8def\u7531\uff1a CE1\u5df2\u7ecf\u5b66\u4e60\u5230\u4e86CE2\u6240\u5728\u7ad9\u70b9\u7684\u8def\u7531\u3002\u53cd\u4e4b\u540c\u7406\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002 \u67e5\u770b\u53ca\u9a8c\u8bc1 \u00b6 \u5728PE1\u4e0a\u67e5\u770b\u8def\u75316.6.6.6/32\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u8be5\u6761\u8def\u7531\u662f\u901a\u8fc7MP-iBGP\u4ecePE2\u4f20\u9012\u8fc7\u6765\u7684\u3002\u4ece\u8be6\u7ec6\u4fe1\u606f\u7684 \u8f93\u51fa\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u662f5.5.5.5\u3002\u5e76\u4e14\u8be5\u8def\u7531\u6346\u7ed1\u7684VPN\u6807\u7b7e\u662f1027\u3002\u56e0\u6b64\u5f53PE1\u6536\u5230IP\u6570\u636e\u5305\u8981\u53bb\u5f806.6.6.6\u65f6\uff0c\u4f1a\u4e3a\u6570\u636e\u5305\u538b\u5165VPN\u6807\u7b7e1027\uff0c\u540c\u65f6\u4e3a\u4e86\u8ba9\u8fd9\u4e2a\u6807\u7b7e\u5305\u80fd\u591f\u6b63\u5e38\u7684\u7a7f\u8d8a\u9aa8\u5e72\u7f51\u5e76\u5230\u8fbePE2\u4e0a\uff0c\u8fd8\u9700\u4e3a\u8be5\u6807\u7b7e\u5305\u518d\u589e\u52a0\u4e00\u5c42\u6807\u7b7e\u3002\u7531\u4e8e\u53bb\u5f806.6.6.6\u7684\u4e0b\u4e00\u8df3\u662f5.5.5.5\uff0c\u56e0\u6b64\u5728\u5916\u5c42\u538b\u5165 5.5.5.5\u8def\u7531\u5bf9\u5e94\u7684\u6807\u7b7e\uff1a 3.3.3.3/32 NULL/3 -/GE0/0/1 3.3.3.3/32 1024/3 -/GE0/0/1 4.4.4.4/32 NULL/1025 -/GE0/0/1 4.4.4.4/32 1025/1025 -/GE0/0/1 5.5.5.5/32 NULL/1026 -/GE0/0/1 5.5.5.5/32 1026/1026 -/GE0/0/1 \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u6211\u4eec\u53ef\u4ee5\u770b\u5230PE1\u7684\u6807\u7b7e\u8f6c\u53d1\u8868\u4e2d\uff0c5.5.5.5\u7684\u51fa\u7ad9\u6807\u7b7e\u662f1026\u3002\u6240\u4ee5\u6700\u7ec8\u53bb\u5f806.6.6.6\u7684 IP\u5305\u88ab\u538b\u5165\u4e24\u5c42\u6807\u7b7e\u3002\u5185\u5c42VPN\u6807\u7b7e\u503c\u662f1027\uff0c\u5916\u5c42LDP\u6807\u7b7e\u662f1026\u3002\u62a5\u6587\u88ab\u5904\u7406\u540e\u8f6c\u53d1\u7ed9\u4e86P1\u3002P1 \u5728\u6536\u5230\u8fd9\u4e2a\u6807\u7b7e\u5305\u540e\u67e5\u770b\u81ea\u5df1\u7684\u6807\u7b7e\u8f6c\u53d1\u8868\uff0c\u6ce8\u610f\uff0c\u5b83\u53ea\u4f1a\u67e5\u770b\u5916\u5c42\u6807\u7b7e\u3002 \u4eceP1\u7684\u8f6c\u53d1\u8868\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c1026\u7684\u5165\u7ad9\u6807\u7b7e\uff0c\u5bf9\u5e94\u7684\u51fa\u7ad9\u6807\u7b7e\u662f1026\uff0c\u5e76\u4e14\u51fa\u7ad9\u63a5\u53e3\u662fGE0/0/1\u3002\u56e0\u6b64\u5b83\u5c06\u6536\u5230\u7684\u6807\u7b7e\u5305\u7684\u5916\u5c42\u6807\u7b7e\u4ece1026\u7f6e\u6362\u62101026\uff08\u78b0\u5de7\u7f6e\u6362\u524d\u540e\u6807\u7b7e\u503c\u662f\u4e00\u6837\u7684\uff09\uff0c\u7136\u540e\u4ece GE0/0/1\u53e3\u53d1\u51fa\u53bb\u3002P2\u5c06\u6536\u5230\u8fd9\u4e2a\u6807\u7b7e\u5305\uff0c\u4e5f\u662f\u67e5\u6807\u7b7e\u8f6c\u53d1\u8868\uff1a P2\u53d1\u73b0\uff0c1026\u7684\u5165\u7ad9\u6807\u7b7e\uff0c\u5bf9\u5e94\u7684\u51fa\u7ad9\u6807\u7b7e\u662f3\uff0c\u800c3\u662f\u4e00\u4e2a\u4fdd\u7559\u6807\u7b7e\uff0c\u610f\u5473\u7740\u8981\u5c06\u8be5\u9876\u5c42\u6807\u7b7e\u5f39\u51fa\u3002\u4e8e\u662f\u5b83\u5c06\u6536\u5230\u7684\u6807\u7b7e\u6570\u636e\u7684\u9876\u5c42\u6807\u7b7e\u5f39\u51fa\uff0c\u7136\u540e\u5269\u4f59\u7684\u6570\u636e\u4eceGE0/0/1\u53e3\u9001\u51fa\u53bb\u3002PE2\u5c06\u6700\u7ec8\u6536\u5230\u4ecd\u7136 \u643a\u5e26\u8005VPN\u6807\u7b7e\u7684\u6570\u636e\u3002\u7531\u4e8e\u8fd9\u4e2aVPN\u6807\u7b7e\u662f\u5b83\u81ea\u5df1\u53d1\u7ed9PE1\u7684\uff0c\u56e0\u6b64\u5b83\u77e5\u9053\u8fd9\u4e2a\u6807\u7b7e\u503c\u610f\u5473\u7740\u4ec0\u4e48\u3001\u4e0e\u54ea\u4e00\u4e2aVPN\u5b9e\u4f8b\u5bf9\u5e94\u3002\u56e0\u6b64\u6700\u7ec8\u5b83\u5c06VPN\u6807\u7b7e\u5265\u53bb\uff0c\u7136\u540e\u5c06IP\u6570\u636e\u5305\u8f6c\u53d1\u7ed9CE2\u3002 \u5728PE1\u4e0aTracert 6.6.6.6\uff0c\u53ef\u4ee5\u67e5\u770b\u5230\u6574\u4e2a\u6570\u636e\u5c42\u9762\u7684\u8fc7\u7a0b\uff1a \u5b9e\u9645\u4e0a\u662f\u8fd9\u6837\u7684\uff1a \u670d\u52a1\u8d28\u91cf \u00b6 12.1 \u6d41\u91cf\u5206\u7c7b\u4e0e\u6807\u8bb0 12.1.1 \u4fee\u6539\u6d41\u91cf\u7684 DSCP \u00b6 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cSW1\u5e76\u672a\u5bf9R1\u53d1\u5f80SW2\u7684IP\u6d41\u91cf\u505aDSCP\u503c\u7684\u8bbe\u7f6e\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u9a8c\u8bc1\u65b9\u6cd5\u662f\u5728SW2\u4e0a\u4f7f\u7528\uff1a\u201ccapture-packet acl xxx interface GigabitEthernet 6/0/15 destination terminal\u201d\uff08\u5176\u4e2dXXX\u4e3a\u4e8b\u5148\u5b9a\u4e49\u597d\u7684ACL\uff09\u6765\u6355\u83b7R1\u53d1\u8fc7\u6765\u7684\u62a5\u6587\uff0c\u4f8b\u5982\u5f53R1 ping 1.1.1.3\u65f6\uff0c\u53ef\u4ee5\u6355\u83b7\u5982\u4e0bICMP\u62a5\u6587\uff1a \u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u6b64\u65f6\u62a5\u6587\u7684ToS\u5b57\u6bb5\uff08\u7ea2\u8272\u5b50\u56fe\u90e8\u5206\uff09\u503c\u4e3a0x00\uff0c\u56e0\u6b64DSCP\u503c\u4e5f\u4e3a\u7f3a\u7701\u76840\u3002\u73b0\u5728\uff0c\u6211\u4eec\u5728SW1\u4e0a\u5b8c\u6210\u5982\u4e0b\u914d\u7f6e\uff0c\u4f7f\u5f97SW1\u5c06\u6240\u6709\u4eceGE0/0/15\u63a5\u53e3\u51fa\u7ad9\u7684ICMP\u62a5\u6587\u7684DSCP\u503c\u8bbe\u7f6e\u4e3aEF\uff0c\u4ece\u800c\u8ba9\u4e0a\u6e38\u4ea4\u6362\u673aSW2\u80fd\u591f\u6709\u9488\u5bf9\u6027\u5730\u5904\u7406\u8fd9\u4e9b\u6d41\u91cf\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u8ba9R1 ping 1.1.1.3 \u65f6\uff0c\u5c06\u770b\u5230\u5728SW3\u4e0a\u6355\u83b7\u5230\u5982\u4e0b\u62a5\u6587\uff1a \u53ef\u4ee5\u770b\u5230ToS\u5b57\u6bb5\u7684\u503c\u53d8\u6210\u4e860xB8\uff0c\u6362\u7b97\u6210\u4e8c\u8fdb\u5236\u4e5f\u5c31\u662f10111000\uff0c\u8fd9\u5c31\u662fEF\u5bf9\u5e94\u7684\u503c\u3002\u800c\u5bf9\u4e8e\u5176\u4ed6\u975e ICMP\u62a5\u6587\uff08\u6ca1\u6709\u88abACL3000\u5339\u914d\u7684\u6d41\u91cf\uff09\uff0cSW1\u5c06\u76f4\u63a5\u653e\u884c\uff08\u4e0a\u8ff0\u573a\u666f\u5728S5300\u4ea4\u6362\u673a\u4e0a\u9a8c\u8bc1\uff09\u3002 \u6545\u969c\u5904\u7406 \u00b6 \u7f51\u7edc\u6545\u969c\u5904\u7406\u6982\u8ff0 \u7f51\u7edc\u95ee\u9898\u5904\u7406\u7684\u4e00\u822c\u6d41\u7a0b\uff1a \u00b6 \u7efc\u5408\u7f51\u7edc\u95ee\u9898\u5b9a\u4f4d\u53ca\u5904\u7406\u65b9\u6cd5\uff08\u5b8f\u89c2\uff09\uff1a \u00b6 \u4ec0\u4e48\u662f\u5206\u5c42\u5904\u7406\u6cd5\uff1a \u00b6 \u5206\u5c42\u6cd5\u601d\u60f3\u5f88\u7b80\u5355\uff1a\u6240\u6709\u901a\u4fe1\u90fd\u9075\u5faa\u76f8\u540c\u7684\u57fa\u672c\u524d\u63d0\u2014\u2014\u5f53\u53c2\u8003\u6a21\u578b\u7684\u6240\u6709\u4f4e\u5c42\u7ed3\u6784\u5de5\u4f5c\u6b63\u5e38\u65f6\uff0c\u5b83\u7684\u9ad8\u5c42\u7ed3\u6784\u624d\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002 \u5206\u5c42\u6cd5\u5904\u7406\u6848\u4f8b\uff1a \u00b6 \u5206\u6bb5\u6545\u969c\u5904\u7406\u6848\u4f8b\uff1a \u00b6 \u66ff\u6362\u6cd5\uff1a\u66ff\u6362\u6cd5\u662f\u68c0\u67e5\u786c\u4ef6\u95ee\u9898\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u4e4b\u4e00\uff1a \u00b6 \u5f53\u6000\u7591\u662f\u7f51\u7ebf\u95ee\u9898\u65f6\uff0c\u66f4\u6362\u4e00\u6839\u786e\u5b9a\u662f\u597d\u7684\u7f51\u7ebf\u8bd5\u4e00\u8bd5\uff1b \u5f53\u6000\u7591\u662f\u63a5\u53e3\u6a21\u5757\u6709\u95ee\u9898\u65f6\uff0c\u66f4\u6362\u4e00\u4e2a\u5176\u5b83\u63a5\u53e3\u6a21\u5757\u8bd5\u4e00\u8bd5 \uff1b \u5728\u5b9e\u9645\u7f51\u7edc\u6545\u969c\u6392\u9519\u65f6\uff0c\u53ef\u4ee5\u5148\u91c7\u7528\u5206\u6bb5\u6cd5\u786e\u5b9a\u6545\u969c\u70b9\uff0c\u518d\u901a\u8fc7\u5206\u5c42\u6216\u5176\u5b83\u65b9\u6cd5\u6392\u9664\u6545\u969c \u3002 \u7f51\u7edc\u6545\u969c\u5904\u7406\u6848\u4f8b \u6848\u4f8b 1\uff1a\u67d0\u5c40\u70b9\u5355\u677f\u65e0\u6cd5\u8bbf\u95ee\u5ba2\u6237\u7f51\u7edc\u8bbe\u5907 \u00b6 \u6545\u969c\u80cc\u666f \u00b6 \u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\u3002\u6838\u5fc3\u4ea4\u6362\u673aCO-SW\u662f\u4e24\u53f0S6300\u4ea4\u6362\u673a\uff08\u5806\u53e0\u7ec4\uff09\uff0cCO-SW\u4f5c\u4e3aATAE3.0\u4e1a\u52a1\u5355\u677f\u7684\u7f51\u5173\u8bbe\u5907\u3002CO-SW\u4e0eFW1/FW2\u91c7\u7528\u72ec\u7acb\u7684VLAN\u8fdb\u884c\u4e09\u5c42\u5bf9\u63a5\uff0c\u91c7\u7528\u9759\u6001\u8def\u7531\u7684\u5bf9\u63a5\u65b9\u6848\u3002CO-SW\u914d\u7f6e\u9ed8\u8ba4\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3a\u9632\u706b\u5899\u3002FW1/FW2\u4ee5\u4e3b\u5907\u65b9\u5f0f\u5de5\u4f5c\uff0cFW1\u88ab\u914d\u7f6e\u4e3a\u521d\u59cb\u65f6\u7684\u4e3b\u5899\u3002FW1/FW2\u914d\u7f6e\u4e86 HRP\u975e\u62a2\u5360\uff0c\u5f00\u542f\u4e86HRP\u4f1a\u8bdd\u5feb\u901f\u955c\u50cf\uff0c\u6b64\u524d\u7531\u4e8e\u8fdb\u884c\u8fc7\u5207\u6362\u6d4b\u8bd5\uff0c\u56e0\u6b64FW2\u662f\u5f53\u524d\u7684\u4e3b\u5899\u3002\u4e00\u7ebf\u53cd\u9988ATAE3.0\u4e2d\u7684\u670d\u52a1\u5668\u5355\u677f\u5b58\u5728\u5982\u4e0b\u95ee\u9898\uff1a \u5355\u677f\u80fdping\u901a\u7f51\u5173\uff08CO-SW\uff09\uff0c\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\u662fCO-SW\u7684Vlanif\uff1b \u5355\u677f\u80fdping\u901a192.168.1.1\uff08\u8be5\u5730\u5740\u662f\u9632\u706b\u5899\u5185\u90e8\u63a5\u53e3\uff0c\u6216\u8005\u8bf4\u4e0b\u884c\u63a5\u53e3\u7684VRRP\u6d6e\u52a8IP\u5730\u5740\uff09\uff1b \u5355\u677f\u80fdping\u901a10.1.1.1\uff08\u8be5\u5730\u5740\u662f\u9632\u706b\u5899\u5bf9\u5916\u63a5\u53e3\uff0c\u6216\u8005\u8bf4\u4e0a\u884c\u63a5\u53e3\u7684VRRP\u6d6e\u52a8IP\u5730\u5740\uff09\uff1b \u5355\u677f\u65e0\u6cd5ping\u901a10.1.1.5\uff1b\uff08C1/C2\u4e3a\u5ba2\u6237\u4ea4\u6362\u673a\uff09\uff1b \u5355\u677f\u65e0\u6cd5ping\u901a\u5ba2\u6237\u7f51\u7edc\u4e2d\u7684\u67d0\u4e2a\u8bbe\u590710.3.97.6\u3002 \u6545\u969c\u5206\u6790 \u00b6 \u68c0\u67e5\u5f53\u524d\u4e3b\u5899FW2\u7684\u914d\u7f6e\uff0c\u53d1\u73b0\u4e0a\u884c\u63a5\u53e3\u3001\u4e0b\u884c\u63a5\u53e3\u5747\u88ab\u653e\u7f6e\u5728trust\u533a\u57df\uff0c\u800cNGFW\uff08\u73b0\u573a\u662fE1000E- N\u9632\u706b\u5899\uff09\u5bf9\u4e8e\u76f8\u540c\u533a\u57df\u5185\u3001\u4e0d\u540c\u63a5\u53e3\u95f4\u7684\u6d41\u91cf\u7f3a\u7701\u7981\u6b62\uff0c\u56e0\u6b64\u5355\u677f\u8bbf\u95ee\u5ba2\u6237\u7f51\u7edc\uff08\u6d41\u91cf\u662f\u4ecetrust\u5230trust\uff09 \u81ea\u7136\u662f\u4e0d\u901a\u7684\u3002 \u4e00\u7ebf\u6309\u7167\u8981\u6c42\u5c06FW1/FW2\u4e0a\u884c\u63a5\u53e3\u6539\u4e3a\u653e\u7f6e\u5728untrust\u533a\u57df\uff0c\u4e14\u914d\u7f6e\u4e86trust\u5230untrust\u533a\u57df\u7684\u5b89\u5168\u7b56\u7565\uff0c \u53d1\u73b0\u5355\u677f\u53ef\u4ee5ping\u901a10.1.1.5\uff0c\u4f46\u662f\u4f9d\u7136\u65e0\u6cd5ping\u901a\u5ba2\u6237\u7f51\u7edc\u4e2d\u7684\u670d\u52a1\u566810.3.97.6\u3002\u5728\u6267\u884cping\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5728\u5f53\u524d\u4e3b\u5899FW2\u4e0a\u65e0\u6cd5\u89c2\u5bdf\u5230Session\uff0c\u8bf4\u660e\u53ef\u80fd\u62a5\u6587\u6ca1\u6709\u5230\u8fbeFW2\uff0c\u6216\u8005\u5230\u8fbe\u4e86\u5374\u6ca1\u88ab\u5b89\u5168\u7b56\u7565\u653e\u901a\uff0c\u53c8\u6216\u8005FW2\u6ca1\u6709\u5916\u51fa\u7684\u8def\u7531\uff08\u4f7f\u5f97\u5176\u65e0\u6cd5\u5224\u65ad\u62a5\u6587\u7684\u51fa\u63a5\u53e3\u53ca\u51fa\u7ad9\u533a\u57df\uff09\uff0c\u68c0\u67e5FW2\u7684\u7b56\u7565\u53ca\u8def\u7531\u914d\u7f6e\u53d1\u73b0\u5747\u65e0\u95ee\u9898\u3002 \u5728\u4e00\u7ebf\u53cd\u9988\u7684\u6570\u636e\u4e2d\u89c2\u5bdf\u5230\uff0c\u5355\u677f\u8bbf\u95ee10.1.1.5\u65f6\uff0c\u5728\u5f53\u524d\u4e3b\u5899FW2\u770b\u5230\u7684Session\u5982\u4e0b\uff1a Session\u5e26\u6709remote\u5b57\u6837\uff0c\u8bf4\u660e\u8be5\u4f1a\u8bdd\u662f\u4eceFW1\u540c\u6b65\u8fc7\u6765\u7684\uff08\u9632\u706b\u5899\u914d\u7f6e\u4e86hrp mirror session enable\uff09\uff0c \u90a3\u4e48\u6d41\u91cf\u5e94\u8be5\u662f\u4eceFW1\u5916\u51fa\u7684\u3002\u7531\u6b64\u53ef\u731c\u6d4b\uff0c\u4ea4\u6362\u673a\u5230\u8fbe\u5ba2\u6237\u7f51\u7edc\u7684\u9ed8\u8ba4\u8def\u7531\u4e0b\u4e00\u8df3\u53ef\u80fd\u8bbe\u7f6e\u5728FW1 \u7684\u63a5\u53e3\u5b9e\u9645IP\u5730\u5740\u4e0a\uff0c\u800c\u4e0d\u662fVRRP\u865a\u62dfIP192.168.1.1\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5355\u677f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u4e0d\u662f\u4ece FW2\u5916\u51fa\uff0c\u800c\u662f\u4eceFW1\u3002 \u68c0\u67e5FW1\u7684\u914d\u7f6e\uff0c\u53d1\u73b0\u5176\u914d\u7f6e\u7684\u9759\u6001\u8def\u7531\u4e2d\uff0c\u5e76\u6ca1\u6709\u5230\u8fbe10.3.97.6\u7684\u8def\u7531\uff0c\u56e0\u6b64\u5355\u677f\u8bbf\u95ee\u8be5IP\u5730\u5740\u7684\u6d41\u91cf\u5230\u8fbeFW1\u540e\uff0c\u65e0\u6cd5\u88ab\u6b63\u5e38\u8f6c\u53d1\u3002 \u89e3\u51b3\u65b9\u6848 \u00b6 \u4fee\u6539\u6838\u5fc3\u4ea4\u6362\u673a\u7684\u914d\u7f6e\uff0c\u5c06\u5230\u8fbe\u5ba2\u6237\u7f51\u7edc\u7684\u8def\u7531\u6307\u5411192.168.1.1\uff1b \u5728FW1\u4e0a\u589e\u52a0\u5230\u8fbe\u5ba2\u6237\u7f51\u7edc\u7684\u8def\u7531\u3002 \u6848\u4f8b 2 \u00b6 \u4eceClient ping 10.1.20.5\uff0c\u53d1\u73b0\u65e0\u6cd5ping\u901a\uff0c\u95ee\u9898\u5b58\u5728\u3002 \u4eceClient tracert \u76ee\u6807\u8282\u70b9\u7684\u8f93\u51fa\u6765\u770b\uff0c\u6570\u636e\u5305\u5e94\u8be5\u662f\u5230\u8fbe\u4e86\u9632\u706b\u5899\uff0c\u68c0\u67e5\u9632\u706b\u5899\u7b56\u7565\uff0c\u53d1\u73b0\u5df2\u7ecf\u57df\u95f4\u7b56\u7565\u5df2\u7ecf\u653e\u901a\u4e86\u76f8\u5e94\u7684\u6d41\u91cf\u3002 \u4eceClient ping 10.1.20.5\u65f6\uff0c\u5728\u9632\u706b\u5899\u67e5\u770b\u4f1a\u8bdd\u8868\uff0c\u53d1\u73b0\u51fa\u73b0\u4e86\u76f8\u5e94\u8868\u9879\uff0c\u8bc1\u660e\u6570\u636e\u5305\u5df2\u7ecf\u7a7f\u8d8a\u9632\u706b\u5899\u8fdb\u5165\u4e86\u5185\u7f51\u3002 \u4ece\u9632\u706b\u5899ping 10.1.20.5\uff0c\u53d1\u73b0\u80fd\u591fping\u901a\uff0c\u8bf4\u660e\u5982\u679c\u62a5\u6587\u5230\u8fbe\u9632\u706b\u5899\uff0c\u56e0\u6b64\u9632\u706b\u5899\u662f\u6709\u80fd\u529b\u62a5\u6587\u8f6c\u53d1\u5230\u76ee\u7684\u5730\u7684\u3002 \u521d\u6b65\u6000\u7591Client\u8bbf\u95eeServer\u7684Base\u7f51\u5361\u7684\u6d41\u91cf\u5df2\u7ecf\u5230\u8fbe\u4e86\u5355\u677f\uff0c\u4f46\u662f\u56de\u7a0b\u6d41\u91cf\u5b58\u5728\u95ee\u9898\uff0c\u5728\u9632\u706b\u5899\u4e0a\u67e5\u770b\u76f8\u5e94\u4f1a\u8bdd\u8868\u7684\u660e\u7ec6\u4fe1\u606f\uff08verbose\uff09\uff0c\u53d1\u73b0\u5728Client ping 10.1.20.5\u65f6\uff0c\u53bb\u7a0b\u7684\u62a5\u6587\u4e2a\u6570\u59cb\u7ec8\u5728\u589e\u52a0\uff0c \u800c\u56de\u7a0b\u62a5\u6587\u4e2a\u6570\u4e3a0\uff0c\u8fdb\u4e00\u6b65\u9a8c\u8bc1\u4e86\u6211\u4eec\u7684\u731c\u6d4b\u3002 \u68c0\u67e5Server\u7684\u8def\u7531\u914d\u7f6e\uff1a \u56e0\u6b64\uff0c\u6545\u969c\u6839\u56e0\u5982\u4e0b\uff1a \u6848\u4f8b 3 \u00b6 \u6848\u4f8b 4 \u00b6 \u7ecf\u68c0\u67e5\u540e\uff0c\u53d1\u73b0\u6839\u56e0\u5982\u4e0b\uff1a \u6848\u4f8b 5 \u00b6 \u6848\u4f8b 6 \u00b6 \u6848\u4f8b 7 \u00b6 \u6848\u4f8b 8 \u00b6 \u6848\u4f8b 9 \u00b6","title":"\u6570\u901a\u77e5\u8bc6\u5b9d\u5178"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_1","text":"\u7248\u6743\u6240\u6709 \u4fb5\u6743\u5fc5\u7a76","title":"\u534e\u4e3a\u6280\u672f\u6709\u9650\u516c\u53f8"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_2","text":"\u65e5\u671f \u7248\u672c \u63cf\u8ff0 \u4f5c\u8005/\u4fee\u8ba2\u4eba 2014-07-01 1.0 \u521d\u7a3f\u5b8c\u6210 \u6731\u4ed5\u803f 00261992 2014-07-20 1.1 \u589e\u52a0VRP\u914d\u7f6e\u57fa\u7840\uff1b\u4fee\u8ba2NAT\u7684\u90e8\u5206\u5185\u5bb9\uff1b \u589e\u52a0GREOver IPSec\uff1b\u589e\u52a0IPv6\u5185\u5bb9 \u6731\u4ed5\u803f 00261992 2014-08-01 1.2 \u589e\u52a0Smart Link\uff1b\u589e\u52a0\u7ec4\u64ad\u5185\u5bb9\uff1b\u4fee\u8ba2\u90e8\u5206\u7ae0\u8282 \u6731\u4ed5\u803f 00261992 2015-10-20 1.3 \u4fee\u8ba2\u90e8\u5206\u7ae0\u8282\u53ca\u5df2\u77e5\u6587\u6863\u9519\u8bef\uff1b\u589e\u52a0\u5806\u53e0\u6280\u672f\u5185\u5bb9 \u6731\u4ed5\u803f 00261992 2017-04-28 1.5 \u4fee\u8ba2\u90e8\u5206\u7ae0\u8282\uff0c\u4f18\u5316\u6587\u6863\u7ed3\u6784\uff0c\u4fee\u6539\u5df2\u77e5\u6587\u6863\u9519\u8bef\uff1b\u589e\u52a0\u7f51 \u7edc\u6545\u969c\u5904\u7406\u7b49\u7ae0\u8282\uff1b\u5237\u65b0\u9632\u706b\u5899\u914d\u7f6e\uff08\u57fa\u4e8eNGFW\uff09 \u6731\u4ed5\u803f 00261992 2017-08-09 1.6 \u589e\u52a0MPLS\u4e0eMPLS VPN\u7ae0\u8282\uff0c\u5220\u9664\u90e8\u5206\u8001\u65e7\u5185\u5bb9 \u6731\u4ed5\u803f 00261992","title":"\u4fee\u8ba2\u8bb0\u5f55"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_3","text":"\u6570\u636e\u901a\u4fe1\u4e0e\u7f51\u7edc \u77e5\u8bc6\u5730\u56fe 10#_bookmark0 \u7f51\u7edc\u57fa\u7840 11 \u5229\u7528TCP/IP\u6a21\u578b\u7406\u89e3\u6570\u636e\u901a\u4fe1\u8fc7\u7a0b 11 IP\u5730\u5740\u7684\u6982\u5ff5\u53caIP\u5b50\u7f51\u5212\u5206 19 VRP\u57fa\u7840 27 \u4f7f\u7528Console\u63a5\u53e3\u7ba1\u7406\u8bbe\u5907 32 eNSP\u534e\u4e3a\u5b98\u65b9\u6570\u901a\u6a21\u62df\u5668 37 \u4ea4\u6362\u57fa\u7840 43 \u4e8c\u5c42\u4ea4\u6362\u57fa\u7840 43 VLAN\u53caTrunk 47 VLAN\u7684\u57fa\u672c\u6982\u5ff5 47 Access\u7c7b\u578b\u7684\u63a5\u53e3 49 Trunk\u7c7b\u578b\u7684\u63a5\u53e3 50 \u63a5\u53e3\u7c7b\u578b\u5c0f\u7ed3 51 VLAN\u53caTrunk\u7684\u57fa\u7840\u914d\u7f6e 54 Hybrid\u63a5\u53e3\u7684\u914d\u7f6e 57 QinQ 62 \u4e8c\u5c42\u63a5\u53e3\u3001\u4e09\u5c42\u63a5\u53e3\u3001\u4ee5\u53caPVID\u3001VLAN-ID\u7b49\u6982\u5ff5\u6742\u8c08 65 \u4e8c\u5c42\u9632\u73af\u6280\u672f 66 STP 66 STP\u7684\u7279\u6027\u53ca\u4f18\u5316 79 MSTP 89 Smart Link\u53caMonitor Link 98 \u5b9e\u73b0VLAN\u95f4\u7684\u4e92\u8bbf 115 \u901a\u8fc7\u5b50\u63a5\u53e3\u5b9e\u73b0VLAN\u95f4\u7684\u4e92\u8bbf 115 \u901a\u8fc7vlan-interface\u5b9e\u73b0VLAN\u95f4\u7684\u4e92\u8bbf 118 \u94fe\u8def\u805a\u5408 122 \u94fe\u8def\u805a\u5408\u6280\u672f\u80cc\u666f 122 \u5de5\u4f5c\u65b9\u5f0f\uff1a\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\uff08Manual load-balance\uff09 123 \u5de5\u4f5c\u65b9\u5f0f\uff1aLACP 124 \u57fa\u7840\u5b9e\u9a8c 126 \u4ea4\u6362\u5b89\u5168 130 \u7aef\u53e3\u955c\u50cf 130 \u6355\u83b7\u4e1a\u52a1\u62a5\u6587 135 \u7aef\u53e3\u9694\u79bb 138 \u8def\u7531\u57fa\u7840 141 IP\u8def\u7531\u57fa\u7840 141 \u4ec0\u4e48\u662fIP\u8def\u7531 141 IP\u8def\u7531\u8868 142 \u8def\u7531\u4f18\u5148\u7ea7 143 \u9759\u6001\u8def\u7531 144 \u9759\u6001\u8def\u7531\u7b80\u5355\u5b9e\u9a8c 146 \u9ed8\u8ba4\u8def\u7531\uff08\u7f3a\u7701\u8def\u7531\uff09 149 \u6d6e\u52a8\u9759\u6001\u8def\u7531 150 \u8def\u7531\u6c47\u603b\uff08\u8def\u7531\u805a\u5408\uff09 151 \u6700\u957f\u5339\u914d\u539f\u5219 155 \u52a8\u6001\u8def\u7531\u534f\u8bae\u57fa\u7840 159 OSPF 161 OSPF\u6982\u8ff0 161 OSPF\u57fa\u672c\u6982\u5ff5 164 OSPF\u7684\u57fa\u7840\u914d\u7f6e 172 OSPF LSA\u53ca\u7279\u6b8a\u533a\u57df 182 OSPF\u9ad8\u7ea7 192 \u4ea4\u6362\u63d0\u9ad8 196 4.1 S5300\u4ea4\u6362\u673a\u5806\u53e0 196 \u7406\u8bba\u90e8\u5206 196 \u914d\u7f6e\u6307\u5bfc 198 4.2 S6300\u4ea4\u6362\u673a\u5806\u53e0 200 \u7406\u8bba\u90e8\u5206 200 \u914d\u7f6e\u6307\u5bfc 202 Traffic-policy\u6d41\u91cf\u7edf\u8ba1 205 VLAN\u6620\u5c04 206 \u8def\u7531\u63d0\u9ad8 207 \u8def\u7531\u91cd\u53d1\u5e03 207 \u6280\u672f\u80cc\u666f 207 \u5b9e\u65bd\u8981\u70b9 210 \u8def\u7531\u91cd\u53d1\u5e03\u7684\u914d\u7f6e 211 \u8def\u7531\u7b56\u7565 215 Route-policy 215 IP-Prefix 218 5.3 BGP 222 BGP\u57fa\u672c\u6982\u5ff5 222 BGP\u5165\u95e8\u5b9e\u9a8c 230 BGP\u8def\u5f84\u5c5e\u6027 238 BGP\u8def\u7531\u7b56\u7565 253 BGP\u8def\u7531\u53cd\u5c04\u5668 275 BGP\u8054\u90a6 285 BGP\u9009\u8def\u89c4\u5219\u8be6\u89e3 289 \u865a\u62df\u8def\u7531\u8f6c\u53d1\u5b9e\u4f8b 313 VPN-Instance\u90e8\u7f72\u6848\u4f8b 313 \u5197\u4f59\u53ef\u9760 317 VRRP 317 VRRP\u6982\u8ff0 317 VRRP\u672f\u8bed 319 VRRP\u7684\u57fa\u7840\u914d\u7f6e 320 VRRP\u5e38\u89c1\u95ee\u9898 330 VRRP\u4e0eNQA\u7684\u8054\u52a8 331 \u7f51\u7edc\u5b89\u5168 333 7.1 ACL 333 ACL\u6982\u8ff0 333 ACL\u7684\u5206\u7c7b 334 ACL\u7684\u914d\u7f6e 335 ACL\u914d\u7f6e\u5b9e\u4f8b\uff08\u8def\u7531\u5668\uff09 336 ACL\u914d\u7f6e\u793a\u4f8b\uff08\u4ea4\u6362\u673a\uff09 337 \u9632\u706b\u5899\u57fa\u7840 338 \u9632\u706b\u5899\u6982\u8ff0 338 \u9632\u706b\u5899\u7684\u57fa\u7840\u77e5\u8bc6 339 \u9632\u706b\u5899\u7684\u57fa\u7840\u914d\u7f6e 346 7.3 NAT 360 NAT\u6982\u8ff0 360 NAT\u7c7b\u578b\u8be6\u89e3 361 NAT\u5728\u9632\u706b\u5899\uff08NGFW\uff09\u4e0a\u7684\u90e8\u7f72 364 NAT\u5728\u8def\u7531\u5668\u4e0a\u7684\u90e8\u7f72 372 \u9632\u706b\u5899\u53cc\u673a\u70ed\u5907 375 \u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u6982\u8ff0 375 \u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u57fa\u7840 377 \u9632\u706b\u5899\u53cc\u673a\u914d\u7f6e\u6b65\u9aa4 383 \u914d\u7f6e\u6848\u4f8b1\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u7269\u7406\u63a5\u53e3\u90e8\u7f72VRRP\uff09 383 \u4e0e\u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u76f8\u5173\u7684\u5176\u4ed6\u547d\u4ee4 390 \u914d\u7f6e\u6848\u4f8b2\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u4e0b\u884c\u5b50\u63a5\u53e3\u90e8\u7f72VRRP\uff09 391 \u914d\u7f6e\u6848\u4f8b3\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u4e0b\u884cEth-trunk\u5b50\u63a5\u53e3\u90e8\u7f72VRRP\uff09 395 \u914d\u7f6e\u6848\u4f8b4\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0b\u884c\u8fde\u63a5\u5185\u90e8\u4ea4\u6362\u673a\u5e76\u5728Eth-trunk\u5b50\u63a5\u53e3\u90e8\u7f72VRRP\u3001\u4e0a\u884c\u8fde\u63a5\u5916\u90e8\u4ea4\u6362\u673a\u5e76\u8fd0\u884cOSPF\uff09 401 \u9632\u706b\u5899\u53cc\u673a\u914d\u7f6e\u6ce8\u610f\u4e8b\u9879 410 \u9632\u706b\u5899\u5e38\u89c1\u95ee\u9898 411 7.6 VPN 415 7.6.1 VPN\u57fa\u7840\u77e5\u8bc6 415 7.6.2 GRE 420 7.6.3 IPSecVPN 423 \u7f51\u7edc\u7ba1\u7406 483 SNMP 483 SNMPv3\u7684\u57fa\u7840\u914d\u7f6e 487 NTP\u7684\u57fa\u7840\u914d\u7f6e 489 \u7ec4\u64ad\u6280\u672f 490 \u7ec4\u64ad\u57fa\u7840 490 \u7ec4\u64ad\u6982\u8ff0 490 \u7ec4\u64ad\u6a21\u578b 492 \u7ec4\u64ad\u5206\u53d1\u6811 493 \u7ec4\u64ad\u5730\u5740 493 IGMP 496 IGMP\u6982\u8ff0 496 9.2.2 IGMPv1\uff08RFC1112\uff09 497 9.2.3 IGMPv2\uff08RFC2236\uff09 499 9.2.4 IGMP\u914d\u7f6e\u53ca\u5b9e\u73b0 503 \u7ec4\u64ad\u8def\u7531\u534f\u8bae\u6982\u8ff0 507 \u5173\u4e8e\u7ec4\u64ad\u8def\u7531\u534f\u8bae 507 \u7ec4\u64ad\u8def\u7531\u8868\u9879 508 \u7ec4\u64ad\u5206\u53d1\u6811 509 9.3.4 RPF 510 PIM\u6982\u8ff0 511 PIM-DM 512 \u534f\u8bae\u6982\u8ff0 512 \u534f\u8bae\u62a5\u6587 512 \u90bb\u5c45\u5173\u7cfb 513 \u6269\u6563\uff08Flood\uff09\u3001\u526a\u679d\uff08Prune\uff09\u53ca\u5ac1\u63a5\uff08Graft\uff09 514 Assert\u65ad\u8a00\u673a\u5236 518 \u914d\u7f6e\u793a\u4f8b 519 PIM-SM 526 \u57fa\u7840\u77e5\u8bc6 526 \u5de5\u4f5c\u673a\u52361\uff1a\u5171\u4eab\u6811\u52a0\u5165 527 \u5de5\u4f5c\u673a\u52362\uff1a\u5171\u4eab\u6811\u526a\u679d 529 \u5de5\u4f5c\u673a\u52363\uff1a\u6e90\u6ce8\u518c 531 \u5de5\u4f5c\u673a\u52364\uff1aRPT\u5230SPT\u7684\u5207\u6362 534 PIM-SM DR\u6307\u5b9a\u8def\u7531\u5668 537 \u914d\u7f6e\u793a\u4f8b 538 IPv6\u57fa\u7840 548 10.1 IPv6 \u57fa\u7840 548 10.1.1 \u6982\u8ff0 548 10.1.2 \u62a5\u6587\u683c\u5f0f 549 IPv6\u7f16\u5740 551 IPv6\u5730\u5740 551 \u5730\u5740\u7c7b\u578b 552 \u5355\u64ad\u5730\u5740 553 \u63a5\u53e3ID 555 \u7ec4\u64ad\u5730\u5740 556 \u57fa\u7840\u914d\u7f6e 558 \u57fa\u7840\u914d\u7f6e\u547d\u4ee4 558 \u5b9e\u9a8c1\uff1aIPv6\u5165\u95e8\u5b9e\u9a8c 559 \u5b9e\u9a8c2\uff1a\u65e0\u72b6\u6001\u5730\u5740\u81ea\u52a8\u914d\u7f6e 562 ICMPv6 564 ICMPv6\u6982\u8ff0 564 10.4.2 NDP 565 IPv6\u8fc7\u6e21\u6280\u672f 575 10.5.1 \u6982\u8ff0 575 IPv6 Over IPv4\u624b\u5de5\u96a7\u9053 577 GRE\u96a7\u9053 580 6to4\u81ea\u52a8\u96a7\u9053 584 10.5.5 NAT64\u6982\u8ff0 589 NAT64\uff08IPv6\u8282\u70b9\u4e3b\u52a8\u8bbf\u95eeIPv4\u670d\u52a1\u5668\uff09 591 NAT64\uff08IPv4\u8282\u70b9\u4e3b\u52a8\u8bbf\u95eeIPv6\u670d\u52a1\u5668\uff09 593 MPLS\u4e0eMPLS VPN 595 MPLS\u57fa\u7840 595 MPLS\u6982\u8ff0 595 MPLS\u672f\u8bed 597 MPLS\u6807\u7b7e 599 MPLS\u6807\u7b7e\u64cd\u4f5c 600 MPLS\u8f6c\u53d1\u8fc7\u7a0b\u8be6\u89e3 601 11.2 LDP 604 LDP\u6982\u8ff0 604 LDP ID 606 \u6807\u7b7e\u7a7a\u95f4 606 \u4f20\u8f93\u5730\u5740 607 LDP\u7684\u57fa\u672c\u5de5\u4f5c\u8fc7\u7a0b 607 11.2.6 PHP 611 MPLS\u7684\u57fa\u7840\u914d\u7f6e 613 \u57fa\u7840\u547d\u4ee4 613 \u57fa\u7840\u5b9e\u9a8c 614 MPLS VPN 619 MPLS VPN\u7684\u67b6\u6784 620 MPLS VPN\u521d\u4f53\u9a8c 621 VPN\u5b9e\u4f8b 625 11.4.4 RD 627 11.4.5 RT 628 11.4.6 \u57fa\u7840\u5b9e\u9a8c 629 \u670d\u52a1\u8d28\u91cf 640 12.1 \u6d41\u91cf\u5206\u7c7b\u4e0e\u6807\u8bb0 640 12.1.1 \u4fee\u6539\u6d41\u91cf\u7684DSCP 640 \u6545\u969c\u5904\u7406 641 \u7f51\u7edc\u6545\u969c\u5904\u7406\u6982\u8ff0 641 \u7f51\u7edc\u6545\u969c\u5904\u7406\u6848\u4f8b 645 13.2.1 \u6848\u4f8b1\uff1a\u67d0\u5c40\u70b9\u5355\u677f\u65e0\u6cd5\u8bbf\u95ee\u5ba2\u6237\u7f51\u7edc\u8bbe\u5907 645 13.2.2 \u6848\u4f8b2 647 13.2.3 \u6848\u4f8b3 648 13.2.4 \u6848\u4f8b4 649 13.2.5 \u6848\u4f8b5 650 13.2.6 \u6848\u4f8b6 652 13.2.7 \u6848\u4f8b7 652 13.2.8 \u6848\u4f8b8 653 13.2.9 \u6848\u4f8b9 654","title":"\u76ee \u5f55"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_4","text":"\u4e00\u4e2a\u7406\u60f3\u7684\u77e5\u8bc6\u4f53\u7cfb\u6c89\u6dc0\uff08\u77e5\u8bc6\u5e93\uff09\uff0c\u5e94\u8be5\u662f\u4f53\u7cfb\u5316\u3001\u7cfb\u7edf\u5316\u7684\uff0c\u5bf9\u77e5\u8bc6\u7684\u5448\u73b0\u5e94\u8be5\u662f\u6709\u6761\u7406\u7684\u3001\u8fde\u7eed\u7684\u3001\u6a21\u5757\u5316\u7684\uff0c\u800c\u4e14\u80fd\u591f\u5c06\u7406\u8bba\u4e0e\u5b9e\u8df5\u76f8\u7ed3\u5408\uff0c\u843d\u5730\u5230\u5b9e\u9645\u4e1a\u52a1\u4e2d\uff0c\u80fd\u591f\u76f4\u63a5\u4e3a\u4e1a\u52a1\u8f93\u51fa\u4ef7\u503c\u3002\u77e5\u8bc6\u7684\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u5fc5\u987b\u7ad9\u5728\u4f7f\u7528\u8005\u7684\u89d2\u5ea6\u601d\u8003\uff0c\u65e0\u6cd5\u88ab\u4f7f\u7528\u7684\u6c89\u6dc0\u662f\u6ca1\u6709\u4ef7\u503c\u7684\u3002\u800c\u4e14\u7406\u60f3\u7684\u77e5\u8bc6\u5e93\u5e94\u8be5\u662f\u4f4e\u83b7\u53d6\u95e8\u69db\uff0c \u751a\u81f3\u96f6\u83b7\u53d6\u95e8\u69db\u7684\uff0c\u5e94\u8be5\u662f\u5f00\u653e\u7684\u3002\u77e5\u8bc6\u5e93\u4e2d\u7684\u77e5\u8bc6\u5e94\u8be5\u5584\u7528\u4e92\u8054\u7f51\u6e20\u9053\u3001\u5584\u7528\u591a\u5a92\u4f53\u6280\u672f\uff0c\u77e5\u8bc6\u5f00\u53d1\u66f4\u8981\u4e13\u6ce8\u77e5\u8bc6\u7684\u6709\u6548\u548c\u9ad8\u6548\u4f20\u9012\u3002 \u300a\u6570\u636e\u901a\u4fe1\u4e0e\u7f51\u7edc \u77e5\u8bc6\u5730\u56fe\u300b\u662f\u7b14\u8005\u5728\u6570\u636e\u901a\u4fe1\u9886\u57df\u7684\u77e5\u8bc6\u6c89\u6dc0\uff0c\u8be5\u77e5\u8bc6\u5730\u56fe\u4ece\u96f6\u57fa\u7840\u5f00\u59cb\uff0c\u5faa\u5e8f\u6e10\u8fdb\u3001\u4f53\u7cfb\u5316\u5730\u8bb2\u8ff0\u5173\u4e8e\u6570\u901a\u7684\u5404\u4e2a\u77e5\u8bc6\u6a21\u5757\u3002\u56db\u4e2a\u5185\u5bb9\u9635\u5217\u2014\u2014\u57f9\u8bad\u89c6\u9891\u3001\u914d\u5957PPT\u3001\u6280\u672f\u6587\u6863\uff08\u624b\u518c\uff09\u4ee5\u53ca\u5b9e\u9a8c\u6848\u4f8b\u6784\u6210\u4e86\u77e5\u8bc6\u5730\u56fe\u7684\u6574\u4f53\u6846\u67b6\uff0c\u642d\u914d\u534e\u4e3a\u5b9e\u9a8c\u6a21\u62df\u5e73\u53f0\uff08\u534e\u4e3a\u5b98\u65b9\u6570\u901a\u6a21\u62df\u5668eNSP\uff09\uff0c\u5c06\u7406\u8bba\u4e0e\u5b9e\u8df5\u7d27\u5bc6\u7ed3\u5408\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u4e3a\u4e86\u65b9\u4fbf\u5927\u5bb6\u96c6\u4e2d\u67e5\u9605\uff0c\u7b14\u8005\u8fd8\u5c06\u77e5\u8bc6\u5730\u56fe\u4e2d\u6240\u6709\u7684\u539f\u521b\u6280\u672f\u6587\u7ae0\u6574\u5408\u6210\u4e00\u672c\u6570\u901a\u77e5\u8bc6\u5b9d\u5178\u2014\u2014\u300a\u6570\u901a\u77e5\u8bc6\u5b9d\u5178\u300b\uff0c\u4e5f\u5c31\u662f\u60a8\u6b63\u5728\u9605\u8bfb\u7684\u8fd9\u4efd\u6587\u6863\u3002 \u5b66\u4e60\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u5148\u770b\u89c6\u9891\uff0c\u518d\u9605\u8bfb\u914d\u5957PPT\u548c\u77e5\u8bc6\u5b9d\u5178\u3001\u4ea7\u54c1\u6587\u6863\uff0c\u7136\u540e\u4f7f\u7528\u6a21\u62df\u73af\u5883\u8fdb\u884c\u5b9e\u9a8c\u2014\u2014\u901a\u8fc7\u672c\u77e5\u8bc6\u5730\u56fe\uff0c\u4efb\u4f55\u4e00\u4e2a\u96f6\u57fa\u7840\u7684\u4eba\u90fd\u80fd\u591f\u8fc5\u901f\u5730\u638c\u63e1\u5404\u79cd\u6570\u901a\u6280\u672f\u53ca\u534f\u8bae\uff0c\u5e76\u4e14\u5e94\u7528\u5230\u5b9e\u9645\u4e1a\u52a1\u4e2d\u3002\u5373\u4f7f\u662f\u4ee5\u9879\u76ee\u4e3a\u89e6\u53d1\u7684\u6309\u9700\u5b66\u4e60\uff0c\u4e5f\u80fd\u5728\u5730\u56fe\u4e2d\u5feb\u901f\u5b9a\u4f4d\u5230\u6240\u9700\u7684\u6280\u672f\u6216\u534f\u8bae\u5e76\u83b7\u53d6\u76f8\u5173\u7684\u77e5\u8bc6\u5185\u5bb9\u3002 \u5173\u4e8e\u672c\u77e5\u8bc6\u5730\u56fe\u7684\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5728\u534e\u4e3a3MS Hi\u793e\u533a\u641c\u7d22\uff1a\u201c\u6570\u636e\u901a\u4fe1\u4e0e\u7f51\u7edc \u77e5\u8bc6\u5730\u56fe\u201d\uff0c\u6216\u8005\u8bbf\u95ee\u672c\u4eba3MS HI\u793e\u533a\u7684\u4e2a\u4eba\u4e3b\u9875\u3002 \u6731 \u4ed5 \u803f 261992 (2015-10-08)","title":"\u6570\u636e\u901a\u4fe1\u4e0e\u7f51\u7edc \u77e5\u8bc6\u5730\u56fe"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_5","text":"\u5229\u7528 TCP/IP \u6a21\u578b\u7406\u89e3\u6570\u636e\u901a\u4fe1\u8fc7\u7a0b","title":"\u7f51\u7edc\u57fa\u7840"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#tcpip","text":"\u4ec0\u4e48\u662f\u6570\u636e\u7f51\u7edc\uff08Data Network\uff09\uff1f\u7b80\u5355\u5730\u8bf4\uff0c\u6570\u636e\u7f51\u7edc\u5c31\u662f\u4e00\u4e2a\u7531\u5404\u79cd\u8bbe\u5907\u642d\u5efa\u8d77\u6765\u7684\u4e00\u5f20\u7f51\uff0c\u5e38\u89c1\u7684\u8bbe\u5907\u6709\uff1a\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u3001\u9632\u706b\u5899\u3001\u8d1f\u8f7d\u5747\u8861\u5668\u3001IDS/IPS\u3001VPN\u670d\u52a1\u5668\u7b49\u7b49\u3002\u6570\u636e\u7f51\u7edc\u6700\u57fa\u672c\u7684\u529f\u80fd\u5c31\u662f\u5b9e\u73b0\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u7684\u6570\u636e\u4e92\u901a\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u901a\u4fe1\u3002 TCP/IP\u6a21\u578b\u662f\u5f53\u4ecaIP\u7f51\u7edc\u7684\u57fa\u7840\uff08\u4e5f\u88ab\u79f0\u4e3aDoD\u6a21\u578b\uff0c\u4e0a\u56fe\u6211\u8d34\u51fa\u7684\u5e76\u4e0d\u662f\u6807\u51c6\u7684TCP/IP\u6a21\u578b\uff0c\u4e3a\u4e86\u65b9\u4fbf\u4e0b\u6587\u7684\u9610\u8ff0\uff0c\u8fd9\u91cc\u7ed9\u51fa\u7684\u662f\u4e00\u4e2aTCP/IP\u6a21\u578b\u4e0eOSI\u6a21\u578b\u7684\u5bf9\u7b49\u6a21\u578b\uff09\uff0c\u5b83\u5c06\u6574\u4e2a\u6570\u636e\u901a\u4fe1\u7684\u4efb\u52a1\u5212\u5206\u6210\u4e0d\u540c\u7684\u529f\u80fd\u5c42\u6b21\uff08Layer\uff09,\u6bcf\u4e00\u4e2a\u5c42\u6b21\u6709\u5176\u6240\u5b9a\u4e49\u7684\u529f\u80fd\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684\u534f\u8bae\u3002\u6253\u4e2a\u6bd4\u65b9\uff0c\u5bf9\u4e8e\u4e00\u5bb6\u516c\u53f8\u800c\u8a00\uff0c\u4e00\u7b14\u4e1a\u52a1\u9700\u8981\u5404\u4e2a\u90e8\u95e8\u76f8\u4e92\u534f\u540c\u5de5\u4f5c\u624d\u80fd\u5b8c\u6210\uff0c\u90e8\u95e8\u4e0e\u90e8\u95e8\u4e4b\u95f4\u65e2\u76f8\u4e92\u72ec\u7acb\uff0c\u4f46\u662f\u53c8\u9700\u8981\u76f8\u4e92\u914d\u5408\uff0c\u53ef\u4ee5\u501f\u7528\u8fd9\u79cd\u601d\u8def\u6765\u7406\u89e3TCP/IP\u53c2\u8003\u6a21\u578b\u3002\u5206\u5c42\u53c2\u8003\u6a21\u578b\u7684\u8bbe\u8ba1\u662f\u975e\u5e38\u7ecf\u5178\u7684\u7406\u5ff5\uff1a \u5c42\u6b21\u5316\u7684\u6a21\u578b\u8bbe\u8ba1\u5c06\u7f51\u7edc\u7684\u901a\u4fe1\u8fc7\u7a0b\u5212\u5206\u4e3a\u66f4\u5c0f\u3001\u66f4\u7b80\u5355\u7684\u90e8\u4ef6\uff0c\u56e0\u6b64\u6709\u52a9\u4e8e\u5404\u4e2a\u90e8\u4ef6\u7684\u72ec\u7acb\u5f00\u53d1\u3001\u8bbe\u8ba1\u548c\u6545\u969c\u6392\u9664\uff1b \u5c42\u4e0e\u5c42\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0c\u53c8\u4e92\u76f8\u4f9d\u8d56\uff0c\u6bcf\u4e00\u5c42\u90fd\u6709\u8be5\u5c42\u7684\u529f\u80fd\u3001\u4ee5\u53ca\u5b9a\u4e49\u7684\u534f\u8bae\u6807\u51c6\u3002\u5c42\u4e0e\u5c42\u4e4b\u95f4\u76f8 \u4e92\u914d\u5408\uff0c\u5171\u540c\u5b8c\u6210\u6570\u636e\u901a\u4fe1\u7684\u8fc7\u7a0b\uff1b \u901a\u8fc7\u7ec4\u4ef6\u7684\u6807\u51c6\u5316\uff0c\u5141\u8bb8\u591a\u4e2a\u4f9b\u5e94\u5546\u8fdb\u884c\u5f00\u53d1\uff1b \u901a\u8fc7\u5b9a\u4e49\u5728\u6a21\u578b\u7684\u6bcf\u4e00\u5c42\u5b9e\u73b0\u4ec0\u4e48\u529f\u80fd\uff0c\u9f13\u52b1\u4ea7\u4e1a\u7684\u6807\u51c6\u5316\uff1b \u5141\u8bb8\u5404\u79cd\u7c7b\u578b\u7684\u7f51\u7edc\u786c\u4ef6\u548c\u8f6f\u4ef6\u76f8\u4e92\u901a\u4fe1\u3002 \u4e0a\u9762\u8fd9\u5f20\u56fe\u663e\u793a\u7684\u5c31\u662f\u6bcf\u4e2a\u5c42\u6b21\u5bf9\u5e94\u7684\u4ee3\u8868\u6027\u534f\u8bae\u3002","title":"\u56de\u987eTCP/IP\u6a21\u578b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_6","text":"\u6839\u636e\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u62d3\u6251\uff08Topology\uff09\uff0c\u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0bPC\u8bbf\u95eeServer\u7684WEB\u670d\u52a1\u7684\u8be6\u7ec6\u901a\u4fe1\u8fc7\u7a0b\u3002\u5728\u9610\u8ff0\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u805a\u7126\u7684\u91cd\u70b9\u662f\u5229\u7528TCP/IP\u53c2\u8003\u6a21\u578b\u7406\u89e3\u6570\u636e\u901a\u4fe1\u8fc7\u7a0b\uff0c\u56e0\u6b64\u53ef\u80fd\u4f1a\u5ffd\u7565\u90e8\u5206\u6280\u672f\u7ec6\u8282\uff0c\u4f8b\u5982DNS\u3001TCP\u4e09\u6b21\u63e1\u624b\u7b49\uff0c\u8fd9\u4e9b\u6280\u672f\u7ec6\u8282\u8fd9\u91cc\u6682\u4e0d\u505a\u8ba8\u8bba\u3002\u73b0\u5728\u4f60\u8981\u6362\u4e00\u79cd\u89c6\u91ce\u6765\u770b\u5f85\u8fd9\u4e2a \u201c\u4e16\u754c\u201d\u4e86\uff0c\u60f3\u8c61\u4e00\u4e0b\u4e0a\u56fe\u6240\u793a\u7684\u7ec8\u7aef\u4ee5\u53ca\u8def\u7531\u5668\u90fd\u662f\u4e00\u4e2a\u4e2a\u7684\u201cTCP/IP\u901a\u4fe1\u6a21\u578b\u201d\uff0c\u4e8b\u5b9e\u4e0a\uff0c\u6574\u4e2a\u8fc7\u7a0b\u5728\u5b8f\u89c2\u5c42\u9762\u4f53\u73b0\u5982\u4e0b\uff1a \u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u7684\u6765\u5206\u6790\uff1a PC\u7684\u7528\u6237\u5728WEB\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95eeServer\u7684WEB\u670d\u52a1\uff08\u8fd9\u91cc\u6211\u4eec\u6682\u4e14\u4e0d\u53bb\u5173\u6ce8HTTP\u4ea4\u4e92\u3001DNS\u4ea4\u4e92\u7b49\u7ec6\u8282\uff0c\u91cd\u70b9\u770b\u901a\u4fe1\u8fc7\u7a0b\uff09\uff0cPC\u7684\u8fd9\u6b21\u64cd\u4f5c\u5c06\u89e6\u53d1HTTP\u5e94\u7528\u4e3a\u7528\u6237\u6784\u9020\u4e00\u4e2a\u5e94\u7528\u6570\u636e\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002\u5f53\u7136\u8fd9\u4e2a\u6570\u636e\u6700\u7ec8\u8981\u4f20\u9012\u5230Server\u5e76\u201c\u9012\u4ea4\u201d\u5230Server\u7684HTTP\u5e94\u7528\u6765\u5904\u7406\uff0c\u4f46\u662fHTTP\u4e0d\u5173\u5fc3\u6570\u636e\u600e\u4e48\u4f20\u3001\u600e\u4e48\u5bfb\u5740\u3001\u600e\u4e48\u505a\u5dee\u9519\u6821\u9a8c\u7b49\u7b49\uff0c\u8fd9\u4e9b\u4e8b\u60c5\u4ea4\u7531\u4e13\u95e8\u7684\u5c42\u6b21\u6765\u5b8c\u6210\uff0c\u6240\u4ee5HTTP\u5e94\u7528\u6570\u636e\u8fd8\u9700\u7ecf\u8fc7\u4e00\u756a\u201c\u6298\u817e\u201d\u624d\u80fd\u4ecePC\u4f20\u5230Server\uff0cOK GO\u3002 \u7531\u4e8eHTTP\u57fa\u4e8eTCP\uff0c\u56e0\u6b64\u8fd9\u4e2a\u5e94\u7528\u6570\u636e\u4ea4\u7531\u53c2\u8003\u6a21\u578b\u4e2d\u7684\u4e3b\u673a\u5230\u4e3b\u673a\u5c42\uff08\u7b2c4\u5c42\uff09\u8fdb\u4e00\u6b65\u5904\u7406\u3002\u5728\u8be5\u5c42\uff0c\u4e0a\u5c42HTTP\u5e94\u7528\u7684\u6570\u636e\u88ab\u5c01\u88c5\u4e00\u4e2aTCP\u7684\u5934\u90e8\uff08\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\u5957\u4e86\u4e00\u4e2aTCP\u7684\u4fe1\u5c01\uff09\uff0c \u5728TCP\u5934\u90e8\u4e2d\u6211\u4eec\u91cd\u70b9\u5173\u6ce8\u4e24\u4e2a\u5b57\u6bb5\uff08\u4fe1\u5c01\u4e0a\u5199\u7684\u4e1c\u897f\uff09\uff0c\u4e00\u4e2a\u662f\u6e90\u7aef\u53e3\u53f7\uff0c\u53e6\u4e00\u4e2a\u662f\u76ee\u7684\u7aef\u53e3\u53f7\uff0c \u6e90\u7aef\u53e3\u53f7\u4e3a\u968f\u673a\u4ea7\u751f\u7684\u7aef\u53e3\u53f7\uff08\u662fPC\u672c\u5730\u8bbe\u7f6e\u7684\u3001\u4e13\u95e8\u7528\u4e8e\u672c\u6b21\u4f1a\u8bdd\u7684\u7aef\u53e3\uff09\uff0c\u76ee\u7684\u7aef\u53e3\u53f7\u4e3a80 \uff08HTTP\u670d\u52a1\u5bf9\u5e94\u7684\u9ed8\u8ba4\u7aef\u53e3\u53f7\u662f80\uff09\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u7136\u540e\u8fd9\u4e2a\u6570\u636e\u6bb5\uff08Segment\uff09\u88ab\u4ea4\u7ed9\u4e0b\u4e00\u4e2a\u5c42\u5904\u7406\u3002 \u4e0b\u4e00\u5c42\u662f\u7f51\u7edc\u5c42\uff0c\u4e5f\u53eb\u56e0\u7279\u7f51\u5c42\uff08\u7b2c3\u5c42\uff09\uff0c\u5904\u4e8e\u8fd9\u4e2a\u5c42\u7684IP\u534f\u8bae\u4e3a\u8fd9\u4e2a\u4e0a\u5c42\u4e0b\u6765\u7684\u6570\u636e\u5c01\u88c5\u4e00\u4e2a IP\u5934\u90e8\uff08\u5728\u4e4b\u524d\u7684\u57fa\u7840\u4e0a\u53c8\u5957\u4e86\u4e00\u4e2a\u4fe1\u5c01\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0c\u4ee5\u4fbf\u8be5\u6570\u636e\u80fd\u591f\u5728IP\u7f51\u7edc\u4e2d\u88ab\u7f51\u7edc\u8bbe\u5907 \u4ece\u6e90\u8f6c\u53d1\uff08\u8def\u7531\uff09\u5230\u76ee\u7684\u5730\u3002\u5728IP\u5934\u5f53\u4e2d\u6211\u4eec\u91cd\u70b9\u5173\u6ce8\u6e90IP\u5730\u5740\u3001\u76ee\u7684IP\u5730\u5740\u3001\u534f\u8bae\u53f7\u8fd9\u4e09\u4e2a\u5b57\u6bb5\u3002 \u5176\u4e2d\u6e90\u5730\u5740\u586b\u5199\u7684\u662fPC\u81ea\u5df1\u7684IP\u5730\u5740192.168.1.1\uff0c\u76ee\u7684\u5730\u5740\u5b58\u653e\u7684\u662fServer\u7684IP\u5730\u5740192.168.2.1\uff0c \u800c\u534f\u8bae\u53f7\u5b57\u6bb5\u5219\u5b58\u653e\u7684\u662f\u503c6\uff0c\u8fd9\u4e2a\u503c\u662f\u4e00\u4e2a\u4f17\u6240\u5468\u77e5\uff08Well-Known\uff09\uff0c\u4e5f\u5c31\u662f\u884c\u4e1a\u7ea6\u5b9a\u7684\u503c\uff0c\u8be5 \u503c\u5bf9\u5e94\u4e0a\u5c42\u534f\u8bae\u7c7b\u578bTCP\uff0c\u8868\u793a\u8fd9\u4e2aIP\u5934\u540e\u9762\u5c01\u88c5\u7684\u4e0a\u5c42\u534f\u8bae\u4e3aTCP\uff08\u5f62\u8c61\u70b9\u7684\u63cf\u8ff0\u662f\uff0c\u534f\u8bae\u5b57\u6bb5 \u7528\u4e8e\u8868\u793a\u8fd9\u4e2aIP\u4fe1\u5c01\u91cc\u88c5\u7684\u662f\u4e00\u4e2aTCP\u7684\u5185\u5bb9\uff09\u3002\u641e\u5b9a\u4e4b\u540e\uff0c\u8fd9\u4e2a\u6570\u636e\u88ab\u4ea4\u7ed9\u4e0b\u4e00\u5c42\u5904\u7406\u3002 \u4e3a\u4e86\u8ba9\u8fd9\u4e2aIP\u6570\u636e\u5305\u80fd\u591f\u5728\u94fe\u8def\u4e0a\u4f20\u8f93\uff08\u4ece\u94fe\u8def\u7684\u4e00\u4e2a\u8282\u70b9\u4f20\u5230\u53e6\u4e00\u8282\u70b9\uff09\uff0c\u8fd8\u8981\u7ed9\u6570\u636e\u5305\u5c01\u88c5\u4e0a\u4e00\u4e2a\u6570\u636e\u94fe\u8def\u5c42\uff08\u7b2c2\u5c42\uff09\u7684\u5934\u90e8\uff0c\u4ee5\u4fbf\u8be5\u6570\u636e\u80fd\u591f\u5728\u94fe\u8def\u4e0a\u88ab\u987a\u5229\u4f20\u8f93\u5230\u5bf9\u7aef\u3002\u7531\u4e8ePC\u4e0eR1\u4e4b\u95f4\u4e3a\u4ee5\u592a\u7f51\u94fe\u8def\uff0c\u56e0\u6b64\u4e0a\u5c42\u6765\u7684IP\u6570\u636e\u5305\u88ab\u5c01\u88c5\u4e00\u4e2a\u4ee5\u592a\u7f51\u7684\u6570\u636e\u5e27\u5934\uff08\u518d\u589e\u52a0\u4e00\u4e2a\u4fe1\u5c01\uff09\u3002\u8fd9\u4e2a\u5e27\u5934\u4e2d\u5199\u5165\u7684\u6e90MAC\u5730\u5740\u4e3aPC \u7684\u7f51\u5361MAC\uff0c \u90a3\u4e48\u76ee\u7684MAC\u5462\uff1f PC \u77e5\u9053\uff0c \u6570\u636e\u7684\u76ee\u7684\u5730\u662f 192.168.2.1\u8fd9\u4e2aIP\uff0c\u800c\u672c\u673aIP\u662f192.168.1.1/24\uff0c\u663e\u7136\uff0c\u76ee\u7684\u5730\u4e0e\u81ea\u5df1\u5e76\u4e0d\u5728\u540c\u4e00\u4e2aIP\u7f51\u6bb5\uff0c\u56e0\u6b64\u9700\u8981\u6c42\u52a9\u4e8e\u81ea\u5df1\u7684\u9ed8\u8ba4\u7f51\u5173\uff0c\u8ba9\u7f51\u5173\u6765\u5e2e\u52a9\u81ea\u5df1\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u51fa\u53bb\u3002\u90a3\u9996\u5148\u5f97\u628a\u6570\u636e\u8f6c\u53d1\u5230\u7f51\u5173\u5427\uff1f\u56e0\u6b64\u76ee\u7684MAC\u5730\u5740\u586b\u5199\u7684\u5c31\u662f\u7f51\u5173192.168.1.254\u5bf9\u5e94\u7684MAC\u5730\u5740\u3002\u4f46\u662f\u521d\u59cb\u60c5\u51b5\u4e0b\uff0cPC\u53ef \u80fd\u5e76\u4e0d\u77e5\u6653192.168.1.254\u5bf9\u5e94\u7684MAC\u5730\u5740\uff0c\u6240\u4ee5\uff0c\u5b83\u4f1a\u53d1\u9001\u4e00\u4e2aARP\u5e7f\u64ad\u53bb\u8bf7\u6c42192.168.1.254\u7684 MAC\uff0cR1\u7684GE0/0/0\u53e3\u4f1a\u6536\u5230\u8fd9\u4e2aARP\u8bf7\u6c42\u5e76\u4e14\u56de\u9001ARP\u54cd\u5e94\u62a5\u6587\u3002\u5982\u6b64\u4e00\u6765PC\u5c31\u77e5\u9053\u4e86\u7f51\u5173\u7684 MAC\uff0c\u5b83\u5c06\u7f51\u5173MAC 0018-0011-0001\u586b\u5199\u5728\u4ee5\u592a\u7f51\u6570\u636e\u5e27\u5934\u90e8\u7684\u76ee\u7684MAC\u5730\u5740\u5b57\u6bb5\u4e2d\u3002\u53e6\u5916\uff0c \u4ee5\u592a\u7f51\u6570\u636e\u5e27\u5934\u7684\u7c7b\u578b\u5b57\u6bb5\u5199\u4e0a0x0800\u8fd9\u4e2a\u503c\uff0c\u8868\u793a\u8fd9\u4e2a\u6570\u636e\u5e27\u5934\u540e\u9762\u5c01\u88c5\u7684\u662f\u4e00\u4e2aIP\u5305\u3002\u8d39\u4e86\u597d\u5927\u52b2\u513f\uff0c\u8fd9\u4e2a\u6570\u636e\u5e27\uff08Frame\uff09\u7ec8\u4e8e\u641e\u5b9a\u4e86\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u4e8b\u5b9e\u4e0a\u5728\u7269\u7406\u94fe\u8def\u4e2d\u4f20\u8f93\u7684\u662f\u6bd4\u7279\uff08bit\uff09\u6d41\uff0c\u6216\u8005\u7535\u6c14\u5316\u7684\u8109\u51b2\u578b\u53f7\uff0c\u53ea\u4e0d\u8fc7\u4e3a\u4e86\u65b9\u4fbf\u7406\u89e3\u548c\u66f4\u52a0\u76f4\u89c2\u5730\u5206\u6790\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u4ee5IP\u5305\u6216\u8005\u6570\u636e\u5e27\u7684\u5f62\u5f0f\u6765\u9610\u8ff0\u901a\u4fe1\u8fc7\u7a0b\u3002\u6240\u4ee5\u4ece\u7269\u7406\u4e0a\u8bf4\uff0c\u6700\u7ec8\u8fd9\u4e2a\u4ee5\u592a\u7f51\u6570\u636e\u5e27\u53d8\u6210\u4e86\u4e00\u5806\u7684101110101\u4ece\u7f51\u7ebf\u4f20\u5230\u4e86\u8def\u7531\u5668R1\u4e0a\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8def\u7531\u5668R1\u5728\u6536\u5230\u8fd9\u4e00\u4e32\u76841010\u2026\u540e\uff0c\u5148\u5c06\u4ed6\u4eec\u8fd8\u539f\u6210\u6570\u636e\u5e27\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002\u7136\u540e\u4f1a\u91c7\u7528\u76f8\u5e94\u7684\u673a\u5236\u68c0\u67e5\u4e00\u4e0b\u6570\u636e\u5e27\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u662f\u5426\u6709\u635f\u574f\uff0c\u5982\u679c\u6ca1\u6709\u635f\u574f\uff0c\u90a3\u4e48\u5c31\u7785\u7785\u6570\u636e\u5e27\u5934\u90e8\u4e2d\u7684\u76ee\u7684 MAC\u5730\u5740\uff0c\u770b\u770b\u76ee\u7684MAC\u5730\u5740\u662f\u4e0d\u662f\u6211\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\u7684GE0/0/0\u63a5\u53e3\u7684MAC\uff0c\u7ed3\u679c\u53d1\u73b0\u6b63\u597d\u662f\u81ea\u5df1\u7684MAC\uff0c\u90a3\u4e48\u5b83\u4f1a\u5f88\u9ad8\u5174\uff0c\u89c9\u5f97\u8fd9\u4e2a\u6570\u636e\u5e27\u662f\u7ed9\u5b83\u7684\uff0c\u5b83\u67e5\u770b\u6570\u636e\u5e27\u5934\u90e8\u7684\u7c7b\u578b\u5b57\u6bb5\uff0c\u53d1\u73b0\u662f0x0800\uff0c\u4e8e\u662f\u5b83\u77e5\u9053\u91cc\u5934\u88c5\u7684\u662f\u4e00\u4e2aIP\u5305\uff0c\u63a5\u7740\u5b83\u5c06\u4ee5\u592a\u7f51\u5e27\u5934\u5265\u53bb\uff0c\u6216\u8005\u8bf4\u89e3\u5c01\u88c5\uff0c\u7136\u540e\u5c06\u91cc\u9762\u7684\u6570\u636e\u79fb\u4ea4\u7ed9\u4e0a\u5c42\u7684IP\u534f\u8bae\u7ee7\u7eed\u5904\u7406\u3002 \u73b0\u5728R1\u7684IP\u534f\u8bae\u6808\u63a5\u7740\u5904\u7406\u8fd9\u4e2a\u62a5\u6587\u3002\u5b83\u4f1a\u5148\u6821\u9a8c\u4e00\u4e0b\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2dIP\u62a5\u6587\u6709\u6ca1\u6709\u53d7\u635f\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5b83\u5c31\u67e5\u770bIP\u5934\u4e2d\u7684\u76ee\u7684IP\u5730\u5740\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0c\u7ed3\u679c\u53d1\u73b0\u76ee\u7684IP\u5730\u5740\u4e3a192.168.2.1\uff0c\u5e76\u4e0d\u662f\u81ea\u5df1\u7684IP\u5730\u5740\u2014\u2014\u539f\u6765\u8fd9\u4e2a\u6570\u636e\u5305\u662f\u53d1\u7ed9\u522b\u4eba\u7684\uff0c\u4e8e\u662f\u5b83\u5f00\u59cb\u62ff\u7740\u76ee\u7684\u5730\u5740192.168.2.1\u5230\u81ea\u5df1\u7684\u5730\u56fe\uff08\u8def\u7531\u8868\uff09\u91cc\u53bb\u67e5\u8be2\uff0c\u770b\u770b\u6709\u6ca1\u6709\u5230192.168.2.1\u8fd9\u4e2a\u76ee\u7684\u5730\u7684\u8def\u5f84\uff0c\u7ed3\u679c\u53d1\u73b0\u6709\uff0c\u5e76\u4e14\u8fd9\u4e2a\u8def\u7531\u6761\u76ee\u6307\u793a\u5b83\u628a\u6570\u636e\u5305\u4ece\u4eceGE0/0/1\u53e3\u9001\u51fa\u53bb\uff0c\u5e76\u4ea4\u7ed9192.168.12.2\u8fd9\u4e2a\u4e0b\u4e00\u8df3IP\u5730\u5740\u3002\u4e8e\u662f\u5b83\u4e0d\u518d\u7ee7\u7eed\u62c6\u5f00IP\u5934\u770b\u91cc\u5934\u7684\u4e1c\u4e1c\u4e86\uff0c\u800c\u662f\u4e56\u4e56\u7684\u5c06IP\u6570\u636e\u5305\u5f80\u4e0b\u4ea4\u8fd8\u7ed9\u6570\u636e\u94fe\u8def\u5c42\u53bb\u5904\u7406\u3002 \u73b0\u5728\u6570\u636e\u94fe\u8def\u5c42\u7ee7\u7eed\u5904\u7406\u4e0a\u5c42\u4e0b\u6765\u7684IP\u5305\uff0c\u5b83\u4e3a\u8fd9\u4e2aIP\u5305\u5c01\u88c5\u4e0a\u4e00\u4e2a\u65b0\u7684\u4ee5\u592a\u7f51\u5e27\u5934\uff0c\u5e27\u5934\u4e2d\u6e90 MAC\u5730\u5740\u4e3aR1\u7684GE0/0/1\u53e3\u7684MAC\uff1a0018-0011-0002\uff0c\u76ee\u7684MAC\u662f\u8fd9\u4e2a\u6570\u636e\u5305\u5373\u5c06\u4ea4\u7ed9\u7684\u4e0b\u4e00\u8df3\u8def\u7531\u5668192.168.12.2\u5bf9\u5e94\u7684MAC\uff0c\u5f53\u7136\u521d\u59cb\u60c5\u51b5\u4e0bR1\u662f\u4e0d\u77e5\u9053\u8fd9\u4e2aMAC\u7684\uff0c\u56e0\u6b64\u53c8\u662f\u4e00\u8f6eARP\u8bf7\u6c42\u5e7f\u64ad\u53ca\u56de\u5e94\u8fc7\u7a0b\u5e76\u6700\u7ec8\u62ff\u5230\u8fd9\u4e2aMAC\uff1a0018-0022-0001\uff0c\u4e8e\u662f\u5b83\u5c06\u8fd9\u4e2a\u503c\u586b\u5199\u5728\u76ee\u7684MAC\u5b57\u6bb5\u4e2d\u3002\u5b8c\u6210\u4e86\u65b0\u7684\u6570\u636e\u5e27\u5c01\u88c5\u540e\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0cR1\u628a\u8fd9\u4e2a\u6570\u636e\u5e27\u53d8\u62101010101\u2026\u901a\u8fc7\u7535\u6c14\u4fe1\u53f7\u4f20\u9012\u7ed9R2\u3002 R2\u6536\u5230\u8fd9\u4e9b10101\u2026\u540e\uff0c\u540c\u6837\u7684\uff0c\u8fd8\u662f\u5148\u5c06\u5176\u8fd8\u539f\u6210\u5e27\uff0c\u7136\u540e\u67e5\u770b\u5e27\u5934\uff0c\u53d1\u73b0\u76ee\u7684MAC\u586b\u5199\u7684\u5c31\u662f\u81ea\u5df1\u63a5\u53e3\u7684MAC\uff0c\u5e76\u4e14\u5e27\u5934\u4e2d\u7c7b\u578b\u5b57\u6bb5\u5199\u7684\u662f0x0800\uff08\u6307\u793a\u4e0a\u5c42\u534f\u8bae\u662fIP\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u5e27\u5934\u5185\u5c01\u88c5\u7684\u662f\u4e00\u4e2aIP\u5305\uff09\uff0c\u4e8e\u662f\u5c06\u6570\u636e\u5e27\u5934\u5265\u53bb\uff0c\u5c06\u91cc\u5934\u7684IP\u6570\u636e\u5305\u4ea4\u7ed9IP\u534f\u8bae\u53bb\u5904\u7406\u3002 \u800cIP\u534f\u8bae\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u53d1\u73b0\uff0c\u76ee\u7684IP\u5730\u5740\u5e76\u975e\u672c\u8def\u7531\u5668\u7684IP\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0c\u4e8e\u662f\u5b83\u77e5\u9053\u8fd9\u4e2a\u6570\u636e\u5305\u4e0d\u662f\u53d1\u9001\u7ed9\u81ea\u5df1\u7684\uff0c\u5b83\u62ff\u7740\u76ee\u7684IP\u5730\u5740192.168.2.1\u5728\u81ea\u5df1\u8def\u7531\u8868\u4e2d\u67e5\u8be2\uff0c\u7ed3\u679c\u53d1\u73b0\uff0cR2\u7684 GE0/0/1\u53e3\u5c31\u8fde\u63a5\u7740192.168.2.0/24\u7f51\u7edc\uff0c\u539f\u6765\u5bb6\u95e8\u53e3\u5c31\u662f\u4e86\uff0c\u4e8e\u662f\u5b83\u5c06\u8fd9\u4e2aIP\u5305\u4ea4\u8fd8\u7ed9\u4e0b\u5c42\u534f\u8bae\u53bb\u5904\u7406\u3002 \u63a5\u4e0b\u6765\u53c8\u662f\u91cd\u65b0\u5c01\u88c5\u6210\u5e27\uff0cR2\u4e3a\u8fd9\u4e2aIP\u5305\u5c01\u88c5\u4e00\u4e2a\u65b0\u7684\u6570\u636e\u5e27\u5934\u90e8\uff0c\u5e27\u5934\u4e2d\uff0c\u6e90MAC\u4e3aR2\u7684 GE0/0/1\u53e3\u7684MAC\uff0c\u76ee\u7684MAC\u4e3a192.168.2.1\u8fd9\u4e2aIP\u5730\u5740\u5bf9\u5e94\u7684MAC\uff0c\u5982\u679cARP\u8868\u91cc\u6709192.168.2.1 \u5bf9\u5e94\u7684MAC\uff0c\u5219\u76f4\u63a5\u5c06MAC\u5730\u5740\u5199\u5165\u76ee\u7684MAC\u4e2d\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u53d1ARP\u8bf7\u6c42\u62a5\u6587\u53bb\u8bf7\u6c42\u8be5\u5730\u5740\u3002\u53e6\u5916\u7c7b\u578b\u5b57\u6bb5\u4f9d\u7136\u586b\u51990x0800\u3002\u6700\u7ec8\uff0cR2\u5c06\u8fd9\u4e2a\u6570\u636e\u5e27\u4f20\u7ed9\u4e86Server\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u597d\u4e0d\u5bb9\u6613\uff0c\u7ec8\u4e8e\u6570\u636e\u5e27\u5230\u8fbe\u4e86Server\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002Server\u9996\u5148\u5c06\u8fd9\u4e9b\u6bd4\u7279\u6d41\u8fd8\u539f\u6210\u5e27\uff0c\u7136\u540e\u505a\u6821\u9a8c\u770b\u770b\u5e27\u662f\u5426\u635f\u574f\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u67e5\u770b\u6570\u636e\u5e27\u7684\u76ee\u7684MAC\uff0c\u7ed3\u679c\u53d1\u73b0\u5c31\u662f\u81ea\u5df1\u7684\u7f51\u5361MAC\uff0c\u4e8e\u662f\u67e5\u770b\u7c7b\u578b\u5b57\u6bb5\uff0c\u53d1\u73b0\u662f0x0800\uff0c\u77e5\u9053\u8fd9\u91cc\u5934\u88c5\u7684\u662f\u4e00\u4e2aIP\u5305\uff0c\u4e8e\u662f\u5c06\u5e27\u5934\u5265\u53bb\uff0c\u5c06\u5185\u5c42\u7684IP\u6570\u636e\u5305\u4ea4\u7ed9IP\u534f\u8bae\u53bb\u5904\u7406\u3002IP\u534f\u8bae\u5c42\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u4e4b\u540e\uff0c\u9996\u5148\u67e5\u770bIP\u5305\u662f\u5426\u635f\u574f\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u67e5\u770b\u76ee\u7684IP\u5730\u5740\uff0c\u53d1\u73b0\u76ee\u7684IP\u5730\u5740\u662f192.168.2.1\u2014\u2014\u6b63\u662f\u81ea\u5df1\u7684\u7f51\u5361IP\uff0c\u4e8e\u662f\u5b83\u77e5\u9053\uff0c\u8fd9\u4e2aIP\u5305\u662f\u53d1\u7ed9\u81ea\u5df1\u7684\uff0c\u56e0\u6b64\u7ee7\u7eed\u67e5\u770bIP\u5305\u5934\u4e2d\u7684\u534f\u8bae\u5b57\u6bb5\uff0c\u53d1\u73b0\u534f\u8bae\u5b57\u6bb5\u586b\u5199\u7684\u662f6\u8fd9\u4e2a\u503c\uff0c\u539f\u6765\u8fd9\u4e2aIP\u5305\u5934\u540e\u9762\u5c01\u88c5\u7684\u662f\u4e00\u4e2aTCP\u7684\u6570\u636e\uff0c\u4e8e\u662f\u5c06IP\u5305\u5934\u5265\u53bb\uff0c\u5c06\u91cc\u5934\u7684TCP\u6570\u636e\u4ea4\u7ed9\u4e0a\u5c42\u7684TCP\u534f\u8bae\u5904\u7406\u3002\u800cTCP\u5728\u5904\u7406\u8fd9\u4e2a\u6570\u636e\u7684\u65f6\u5019\uff0c\u67e5\u770bTCP\u5934\u90e8\u7684\u76ee\u7684\u7aef\u53e3\u53f7\uff0c\u53d1\u73b0\u76ee\u7684\u7aef\u53e3\u53f7\u662f80\uff0c\u800cServer\u672c\u5730\u7684TCP 80\u7aef\u53e3\u662f\u5f00\u653e\u7684\uff0c\u5f00\u653e\u7ed9HTTP\u5e94\u7528\u4e86\uff0c\u56e0\u6b64\u5b83\u5c06TCP\u5934\u90e8\u5265\u53bb\uff0c\u5c06\u91cc\u5934\u7684\u8f7d\u8377\u4ea4\u7ed9HTTP \u5e94\u7528\u3002\u7ec8\u4e8e\uff0c\u4ecePC\u53d1\u9001\u51fa\u6765\u7684HTTP\u5e94\u7528\u6570\u636e\u5230\u8fbe\u4e86\u76ee\u7684\u5730\u2014\u2014Server\u7684HTTP\u5e94\u7528\u7684\u624b\u4e2d\u3002 IP \u5730\u5740\u7684\u6982\u5ff5\u53ca IP \u5b50\u7f51\u5212\u5206","title":"\u7406\u89e3\u6570\u636e\u901a\u4fe1\u8fc7\u7a0b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ip","text":"IP\u5730\u5740\u5728\u7f51\u7edc\u4e2d\u7528\u4e8e\u6807\u8bc6\u4e00\u4e2a\u8282\u70b9\uff08\u4f8b\u5982\u4e00\u53f0\u4e3b\u673a\uff0c\u6216\u8005\u4e00\u4e2a\u7f51\u7edc\u8bbe\u5907\u7684\u63a5\u53e3\uff09\u3002 \u5728IP\u7f51\u7edc\u4e2d\uff0c\u6570\u636e\u5305\u7684\u5bfb\u5740\u662f\u57fa\u4e8eIP\u5730\u5740\u6765\u8fdb\u884c\u7684\uff0c\u56e0\u6b64IP\u5730\u5740\u5c31\u50cf\u662f\u73b0\u5b9e\u751f\u6d3b\u4e2d\u7684\u5730\u5740\u4e00\u6837\u3002 IP\u534f\u8bae\u5b9a\u4e49\u4e86IP\u6570\u636e\u62a5\u6587\u7684\u683c\u5f0f\uff0c\u4e5f\u5b9a\u4e49\u4e86\u6570\u636e\u62a5\u6587\u5bfb\u5740\u7684\u65b9\u5f0f\u3002\u76ee\u524d\u6211\u4eec\u5728\u4e1a\u52a1\u73af\u5883\u4e2d\u5e38\u89c1\u7684IP \u4e3b\u8981\u662f\u4e24\u4e2a\u7248\u672c\uff1aIPv4\u53caIPv6\uff0c\u800c\u73b0\u9636\u6bb5\u7f51\u7edc\u4e3b\u4f53\u4ecd\u7136\u662fIPv4\uff0c\u4f46\u662f\u5728\u53ef\u9884\u89c1\u7684\u672a\u6765\uff0c\u4f1a\u9010\u6e10\u5411 IPv6\u8fc7\u6e21\u3002\u672c\u7ae0\u53ea\u4ecb\u7ecdIPv4\u3002 \u4e00\u4e2aIPv4\u5730\u5740\u670932bit\u3002\u5f53\u7136\uff0c\u6211\u4eec\u4e0d\u53ef\u80fd\u7528\u4e8c\u8fdb\u5236\u6765\u4e66\u5199IPv4\u5730\u5740\uff0c\u90a3\u662f\u4f4e\u6548\u7684\uff0c\u6211\u4eec\u901a\u5e38\u91c7\u7528\u5341\u8fdb\u5236\u683c\u5f0f\u6765\u4e66\u5199IP\u5730\u5740\uff0c\u4f46\u662f\u8ba1\u7b97\u673a\u5728\u8fdb\u884cIP\u5730\u5740\u7684\u76f8\u5173\u8ba1\u7b97\u5de5\u4f5c\u65f6\uff0c\u65e0\u7591\u662f\u901a\u8fc7\u4e8c\u8fdb\u5236\u7684\u5f62\u5f0f\u6765\u8fdb\u884c\u3002\u56e0\u6b64\u638c\u63e1\u5341\u8fdb\u5236\u5230\u4e8c\u8fdb\u5236\u7684\u6570\u5236\u8f6c\u6362\u662f\u5fc5\u5907\u7684\u6280\u80fd\u3002 IPv4\u5730\u5740\u901a\u5e38\u91c7\u7528\u201c\u70b9\u5206\u5341\u8fdb\u5236\u201d\u8868\u793a\uff0c\u4ee5\u9002\u5e94\u4eba\u7c7b\u7684\u8bfb\u5199\u4e60\u60ef\uff0c\u4f8b\u5982192.168.1.1\u3002","title":"\u4ec0\u4e48\u662fIP\u5730\u5740"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_7","text":"\u201c\u70b9\u5206\u5341\u8fdb\u5236\u201dIP\u5730\u5740\u8868\u73b0\u5f62\u5f0f\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u66f4\u597d\u7684\u4f7f\u7528\u7f51\u7edc\uff0c\u4f46\u7f51\u7edc\u8bbe\u5907\u5728\u5bf9IP\u8fdb\u884c\u8ba1\u7b97\u65f6\u4f7f\u7528\u7684\u662f\u4e8c\u8fdb\u5236\u7684\u64cd\u4f5c\u65b9\u5f0f\uff0c\u4f8b\u5982\uff1a \u4ee5\u4e0b\u662f192\u8fd9\u4e2a\u6570\u5b57\uff0c\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u7b97\u6cd5\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\uff0c\u8fd9\u662f\u57fa\u672c\u6280\u80fd\u3002","title":"\u5341\u8fdb\u5236\u4e0e\u4e8c\u8fdb\u5236\u7684\u8f6c\u6362"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ip_1","text":"IPv4\u5730\u5740\u7684\u957f\u5ea6\u4e3a32bit\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0cIPv4\u5730\u5740\u7684\u7a7a\u95f4\u4ece0.0.0.0 \u4e00\u76f4\u5230 255.255.255.255\uff0c\u8fd9\u4e48\u5e9e\u5927\u7684\u7a7a\u95f4\uff0c\u5982\u679c\u4e0d\u52a0\u4ee5\u533a\u5206\u548c\u89c4\u5212\uff0c\u52bf\u5fc5\u4e0d\u4fbf\u4e8e\u7edf\u7b79\u7ba1\u7406\u3002\u56e0\u6b64\u6211\u4eec\u5bf9\u6574\u4e2aIPv4\u5730\u5740\u7a7a\u95f4\u8fdb\u884c\u7c7b\u522b\u4e0a\u7684\u5212\u5206\uff0c\u4e00\u5171\u5206\u4e3a5\u7c7b\uff1a \u5730\u5740\u7684\u7c7b\u522b\u4e0a\u7684\u533a\u5206\u4e3b\u8981\u4f53\u73b0\u5728\u7b2c\u4e00\u4e2a\u516b\u4f4d\u7ec4\uff08\u4e00\u4e2aIP\u5730\u5740\u62e5\u67094\u4e2a\u516b\u4f4d\u7ec4\uff09\u4e0a\uff1a \u7b2c\u4e00\u4e2a\u516b\u4f4d\u7ec4\u9996\u4f4d\u6052\u5b9a\u4e3a0\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u5f97\u5230\u4e00\u4e2a\u533a\u95f4\uff1a0.0.0.0\u4e00\u76f4\u5230127.255.255.255\u3002\u8fd9\u662fA\u7c7b\u5730\u5740\uff0c\u5176\u4e2d127.0.0.0/8\u4f5c\u4e3a\u672c\u5730\u56de\u73af\u4f7f\u7528\uff0c\u4f8b\u5982\u4f60ping 127.0.0.1\u5b9e\u9645\u4e0aping\u7684\u662f\u672c\u673a\u3002\u6240\u4ee5\u5982\u679c\u770b\u5230\u4e00\u4e2aIP\u5730\u5740\uff0c\u5b83\u7684\u9996\u4e2a\u516b\u4f4d\u7ec4\u6389\u843d\u57281-126\u533a\u95f4\u5185\uff0c\u90a3\u4e48\u8fd9\u662f\u4e00\u4e2aA\u7c7b\u5730\u5740\u3002 2) \u7b2c\u4e00\u4e2a\u516b\u4f4d\u7ec4\u7684\u6700\u9ad8\u4e24\u4f4d\u6052\u5b9a\u4e3a\u4e8c\u8fdb\u5236\u768410\uff0c\u5c31\u5f97\u5230\u4e00\u4e2a\u533a\u95f4\uff1a128.0.0.0-191.255.255.255\uff0c\u8fd9\u662f B\u7c7b\u5730\u5740\u3002 3) \u7b2c\u4e00\u4e2a\u516b\u4f4d\u7ec4\u7684\u6700\u9ad8\u4e09\u4f4d\u6052\u5b9a\u4e3a110\uff0c\u5c31\u5f97\u5230\u4e00\u4e2a\u533a\u95f4\uff1a192.0.0.0 \u2013 223.255.255.255\uff0c\u8fd9\u662fC\u7c7b\u5730\u5740\u3002 4) \u7b2c\u4e00\u4e2a\u516b\u4f4d\u7ec4\u7684\u6700\u9ad8\u56db\u4f4d\u6052\u5b9a\u4e3a1110\uff0c\u5c31\u5f97\u5230\u4e00\u4e2a\u533a\u95f4\uff1a224.0.0.0 \u2013 239.255.255.255\uff0c\u8fd9\u662fD\u7c7b\u5730\u5740\uff0c\u8fd9\u4e2a\u7c7b\u522b\u7684\u5730\u5740\u4e13\u95e8\u7528\u4e8e\u7ec4\u64ad\u3002\u7b14\u8005\u5b89\u6392\u4e86\u4e13\u95e8\u7684\u7ae0\u8282\u4ecb\u7ecd\u7ec4\u64ad\u7684\u6982\u5ff5\u548c\u5e94\u7528\u3002 5) \u5269\u4e0b\u7684\u662fE\u7c7b\u5730\u5740\uff0c\u8fd9\u7c7b\u5730\u5740\u4fdd\u7559\u4f5c\u4e3a\u7814\u7a76\u4f7f\u7528\u3002","title":"IP\u5730\u5740\u7684\u5206\u7c7b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#network-mask","text":"\u4e00\u4e2aIP\u5730\u5740\u5305\u542b\u4e24\u90e8\u5206\uff1a\u7f51\u7edc\u90e8\u5206\u4ee5\u53ca\u4e3b\u673a\u90e8\u5206\u3002\u7f51\u7edc\u90e8\u5206\u7528\u4e8e\u8868\u793a\u8fd9\u4e2aIP\u5730\u5740\u6240\u5904\u7684\u201c\u7a7a\u95f4\u201d\uff0c\u5bf9\u4e8e\u4e00\u53f0\u8def\u7531\u5668\u800c\u8a00\uff0c\u5f53\u5b83\u5728\u4e3a\u6570\u636e\u5305\u5bfb\u5740\u65f6\uff0c\u901a\u5e38\u53ea\u5173\u5fc3IP\u5730\u5740\u7684\u7f51\u7edc\u90e8\u5206\u3002\u90a3\u4e48\u5982\u4f55\u533a\u5206\u4e00\u4e2aIP\u5730\u5740\u4e2d\u7684\u7f51\u7edc\u4e0e\u4e3b\u673a\u90e8\u5206\u5462\u2014\u2014\u7f51\u7edc\u63a9\u7801\uff08Network Mask\uff0c\u7b80\u79f0netmask\uff09\u7528\u4e8e\u548cIP\u5730\u5740\u8fdb\u884c\u5bf9\u5e94\uff0c\u4ece\u800c\u6807\u8bc6\u51faIP\u5730\u5740\u4e2d\u7684\u7f51\u7edc\u4e0e\u4e3b\u673a\u90e8\u5206\u3002 \u7f51\u7edc\u63a9\u7801\u4e3a32bit\uff0c\u4e0eIPv4\u5730\u5740\u7684\u4f4d\u6570\u662f\u4e00\u6837\u7684\u3002 \u7f51\u7edc\u63a9\u7801\u5728\u4e8c\u8fdb\u5236\u7684\u8868\u793a\u4e0a\u662f\u4e00\u5806\u8fde\u7eed\u76841\uff0c\u540e\u9762\u63a5\u8fde\u7eed\u76840\u3002 \u7f51\u7edc\u63a9\u7801\u503c\u4e3a1\u7684bit\u5bf9\u5e94IP\u5730\u5740\u4e2d\u7684\u7f51\u7edc\u4f4d\uff1b\u4e3a0\u7684bit\u5bf9\u5e94IP\u5730\u5740\u4e2d\u7684\u4e3b\u673a\u4f4d\uff0c\u4ee5\u6b64\u6765\u8bc6\u522b\u4e00\u4e2aIP \u5730\u5740\u4e2d\u7684\u7f51\u7edc\u4e0e\u4e3b\u673a\u4f4d\uff0c\u5982\u4e0b\u56fe\uff1a \u4e3a\u4e86\u65b9\u4fbf\u4e66\u5199\uff0c\u6211\u4eec\u5f80\u5f80\u4f7f\u7528\u63a9\u7801\u957f\u5ea6\u7684\u65b9\u5f0f\u6765\u8868\u793a\u4e00\u4e2aIP\u5730\u5740+ \u63a9\u7801\u7ec4\u5408\uff0c\u4f8b\u5982192.168.1.1 255.255.255.0 \u7b49\u540c\u4e8e192.168.1.1/24\u3002\u56e0\u4e3a255.255.255.0\u5199\u6210\u4e8c\u8fdb\u5236\u7684\u8bdd\uff0c\u4ece\u5de6\u5f80\u53f3\u6570\u5c31\u662f24\u4e2a1\uff0c \u6240\u4ee5\u6211\u4eec\u4e5f\u8bf4\uff0c\u5b83\u7684\u63a9\u7801\u957f\u5ea6\u4e3a24\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cA\u7c7bIP\u5730\u5740\u7684\u9996\u4e2a\u516b\u4f4d\u7ec4\u4e3a\u7f51\u7edc\u4f4d\uff0c\u5176\u4ed6\u4f4d\u4e3a\u4e3b\u673a\u4f4d\uff0c\u56e0\u6b64A\u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u5c31\u662f 255.0.0.0\uff0c\u6216\u8005\u8bf4\u63a9\u7801\u957f\u5ea6\u4e3a/8\u3002B\u7c7bIP\u5730\u5740\u524d\u4e24\u4e2a\u516b\u4f4d\u7ec4\u4e3a\u7f51\u7edc\u4f4d\uff0c\u540e\u4e24\u4e2a\u516b\u4f4d\u7ec4\u4e3a\u4e3b\u673a\u4f4d\uff0c\u56e0\u6b64B \u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u5c31\u662f255.255.0.0\u6216\u8005\u63a9\u7801\u957f\u5ea6/16\u3002C\u7c7b\u5730\u5740\u7684\u524d\u4e09\u4e2a\u516b\u4f4d\u7ec4\u4e3a\u7f51\u7edc\u4f4d\uff0c\u6700\u540e\u4e00\u4e2a\u516b\u4f4d\u7ec4\u662f\u4e3b\u673a\u4f4d\uff0c\u56e0\u6b64C\u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u5c31\u662f255.255.255.0\uff0c\u6216\u8005\u63a9\u7801\u957f\u5ea6\u4e3a/24\u3002\u4ece\u8fd9\u91cc\u53ef\u4ee5\u770b\u51fa\uff0c \u5982\u679c\u7533\u8bf7\u5230\u4e00\u4e2aA\u7c7b\u5730\u5740\u6bb5123.0.0.0/8\uff0c\u90a3\u4e48\u8fd9\u662f\u4e00\u4e2a\u76f8\u5f53\u5e9e\u5927\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u7a7a\u95f4\u67092\u768424\u6b21\u65b9\u4e2aIP\u5730\u5740\u3002\u76f8\u5bf9\u7684\uff0c\u4e00\u4e2aB\u7c7b\u7684IP\u7f51\u7edc\u5730\u5740\u7a7a\u95f4\u9ed8\u8ba4\u67092\u768416\u6b21\u65b9\u4e2aIP\u5730\u5740\uff0c\u800c\u6bcf\u4e2aC\u7c7b\u5730\u5740\u6bb5\u6240\u62e5\u6709\u7684\u4e3b\u673a\u6570\u91cf\u5219\u66f4\u5c11\u3002","title":"\u7f51\u7edc\u63a9\u7801\uff08Network Mask\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ip_2","text":"\u7f51\u7edc\u5730\u5740 \uff1a\u7528\u4e8e\u6807\u8bc6\u4e00\u4e2a\u7f51\u7edc\uff0c\u76f8\u5f53\u4e8e\u4e00\u4e2a\u201c\u9762\u201d\u7684\u6982\u5ff5\u3002\u7f51\u7edc\u5730\u5740\u662f\u4e00\u4e2aIP\u5730\u5740\u4e2d\u4e3b\u673a\u4f4d\u4e3a\u51680 \u7684\u5730\u5740\u3002\u4f8b\u5982192.168.10.0/24\uff0c\u8be5\u5730\u5740\u6807\u8bc6\u4e86\u4e00\u4e2a\u7f51\u7edc\uff0c\u5728\u8fd9\u4e2a\u7f51\u7edc\u4e2d\uff0c\u5b58\u5728\u591a\u4e2aIP\u5730\u5740\uff0c\u53ef\u7528\u4e8e\u5206\u914d\u7ed9\u5404\u79cd\u8bbe\u5907\uff0c\u4f8b\u5982192.168.10.1\u3001192.168.10.2\u3001\u2026\u3001192.168.10.254\uff0c\u8fd9\u4e9b\u5730\u5740\u90fd\u5c5e\u4e8e 192.168.10.0/24\u7f51\u7edc\u3002\u7f51\u7edc\u5730\u5740\u4e0d\u80fd\u591f\u88ab\u5206\u914d\u7ed9\u4e3b\u673a\u3002 **\u5e7f\u64ad\u5730\u5740\uff1a**\u7528\u4e8e\u5411\u7f51\u7edc\u4e2d\u7684\u6240\u6709\u8282\u70b9\u53d1\u9001\u6570\u636e\u7684\u7279\u6b8a\u5730\u5740\u3002\u5e7f\u64ad\u5730\u5740\u5373\u4e3b\u673a\u90e8\u5206\u7684\u5404\u6bd4\u7279\u4f4d\u5168\u90e8\u4e3a 1\u7684\u5730\u5740\u3002\u4f8b\u5982192.168.10.255/24\uff0c\u8be5\u5730\u5740\u662f192.168.10.0/24\u8fd9\u4e2a\u7f51\u7edc\u7684\u5e7f\u64ad\u5730\u5740\u3002 3) **\u8282\u70b9\u5730\u5740\uff1a**\u53ef\u5206\u914d\u7ed9\u7f51\u7edc\u4e2d\u7684\u8bbe\u5907\u7684\u5730\u5740\u3002\u4f8b\u5982192.168.10.1/24\u81f3192.168.1.254/24\u3002\u7f51\u7edc\u5730\u5740\u53ca\u5e7f\u64ad\u5730\u5740\u662f\u4e0d\u80fd\u591f\u76f4\u63a5\u88ab\u5206\u914d\u7ed9\u67d0\u4e2a\u8bbe\u5907\uff08\u7684\u7f51\u5361\uff09\u6216\u8005\u7f51\u7edc\u8bbe\u5907\uff08\u7684\u63a5\u53e3\uff09\u7684\uff0c\u56e0\u4e3a\u5b83\u4eec\u6709\u7279\u6b8a\u7528\u9014\u3002 \u4f8b\uff1a192.168.1.0 \u8fd9\u4e2aC\u7c7b\u5730\u5740\u5bf9\u5e94\u7684\u7f51\u7edc\u5730\u5740\u3001\u5e7f\u64ad\u5730\u5740\u53ca\u53ef\u5206\u914dIP\u5730\u5740\u5206\u522b\u662f\uff1f","title":"IP\u5730\u5740\u7c7b\u578b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_8","text":"\u5047\u8bbe\u4f60\u6709\u4e00\u4e2aB\u7c7b\u5730\u5740\u6bb5172.16.0.0/16\uff0c\u7531\u4e8eB\u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u662f255.255.0.0\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u8fd9\u4e2a\u7f51\u7edc\u5185\u67092\u768416\u6b21\u65b9\u4e2aIP\u5730\u5740\uff0c\u800c\u53ef\u5206\u914d\u7ed9\u8bbe\u5907\u4f7f\u7528\u7684IP\u5730\u5740\u5c31\u67092\u768416\u6b21\u65b9-2\u8fd9\u4e48\u591a\u4e2a\uff0c\u4e3a\u4ec0\u4e48\u8981\u51cf\u53bb2\uff1f \u56e0\u4e3a\u5e7f\u64ad\u5730\u5740\u53ca\u7f51\u7edc\u5730\u5740\u662f\u4e0d\u80fd\u5206\u914d\u7ed9\u8bbe\u5907\u4f7f\u7528\u7684\u3002 \u8bbe\u60f3\u4e00\u4e0b\uff0c\u5982\u679c\u4e00\u4e2a\u7f51\u7edc\u4e2d\u771f\u6709\u8fd9\u4e48\u591a\u53f0PC\uff0c\u8fd9\u4e48\u591a\u4e2aIP\u5730\u5740\u5904\u4e8e\u540c\u4e00\u4e2a\u7f51\u6bb5\u4e2d\u3001\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u4e2d\uff0c \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u90a3\u4e48\u4e00\u65e6\u7f51\u7edc\u4e2d\u53d1\u751f\u5e7f\u64ad\uff0c\u5f71\u54cd\u53ef\u5c31\u5927\u4e86\u3002\u518d\u8005\uff0c\u5728\u5b9e\u9645\u7684\u4e1a\u52a1\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u7ed9\u4e00\u4e2a\u4e1a\u52a1\u5355\u5143\uff08\u4f8b\u5982\u4e00\u4e2a\u516c\u53f8\u5185\u7684\u5404\u4e2a\u90e8\u95e8\uff09\uff0c\u5212\u5206\u4e00\u4e2a\u72ec\u7acb\u7684IP\u7f51\u6bb5\uff0c\u4e0d\u540c\u7684\u4e1a\u52a1\u5355\u5143\u4e0d\u540c\u7684IP\u7f51\u6bb5\uff0c \u90a3\u4e48\u5982\u679c\u670910\u4e2a\u4e1a\u52a1\u5355\u5143\uff0c\u6bcf\u4e2a\u4e1a\u52a1\u5355\u5143\u624d\u51e0\u5341\u8fd1\u767e\u53f0\u8bbe\u5907\uff0c\u4e00\u4e2a\u4e1a\u52a1\u5355\u5143\u5c31\u8017\u8d39\u4e00\u4e2aB\u7c7b\u5730\u5740\u6bb5\uff0c\u8fd9\u5c31\u4f1a\u9020\u6210IP\u5730\u5740\u7684\u6d6a\u8d39\u3002 \u56e0\u6b64\uff0c\u6211\u4eec\u63d0\u51fa\u5b50\u7f51\u5212\u5206\u7684\u6982\u5ff5\uff0c\u5b50\u7f51\u5212\u5206\u6240\u4f7f\u7528\u7684\u601d\u7ef4\u662fVLSM\uff08Variable Length Subnet Mask\uff0c\u53ef\u53d8\u957f\u5b50\u7f51\u63a9\u7801\uff09\uff0c\u4e8b\u5b9e\u4e0a\u662f\u62ff\u7f51\u7edc\u63a9\u7801\u53d8\u620f\u6cd5\u3002\u5728\u4e0b\u56fe\u4e2d\u6709\u4e94\u4e2a\u7f51\u6bb5\uff0c\u9700\u8981\u4e94\u4e2aIP\u5730\u5740\u6bb5\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2aB\u7c7b\u5730\u5740\uff08172.16.0.0/16\uff09\u53ef\u7528\uff0c\u90a3\u4e48\u901a\u8fc7\u5b50\u7f51\u5212\u5206\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e2aB\u7c7b\u5730\u5740\u5212\u5206\u6210\u4e00\u4e2a\u4e2a\u5c0f\u4e00\u70b9\u7684\u5b50\u7f51\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u4e00\u4e2a\u5e9e\u5927\u7684\u7f51\u7edc\u5c31\u53ef\u4ee5\u88ab\u5206\u5272\u6210\u5c0f\u7684\u5355\u5143\uff0c\u53e6\u5916IP\u5730\u5740\u7684\u4f7f\u7528\u4e5f\u66f4\u4e3a\u79d1\u5b66\u66f4\u4e3a\u5408\u7406\u3002","title":"\u4e3a\u4ec0\u4e48\u8981\u5212\u5206\u5b50\u7f51"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_9","text":"\u73b0\u5728\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2aB\u7c7b\u5730\u5740\u6bb5172.16.0.0/16\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2aB\u7c7b\u5730\u5740\u7684\u63a9\u7801\u4e3a255.255.0.0\uff0c\u524d\u4e24\u4e2a\u516b\u4f4d\u7ec4\u662f\u7f51\u7edc\u4f4d\uff0c\u540e\u4e24\u4e2a\u516b\u4f4d\u7ec4\u662f\u4e3b\u673a\u4f4d\u3002\u90a3\u4e48\u8fd9\u4e2a\u5355\u4e00\u7684\u7f51\u7edc\u4e2d\uff0c\u67092\u768416\u6b21\u65b9\u4e2aIP\u5730\u5740\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u975e\u5e38\u5e9e\u5927\u3002 \u73b0\u5728\uff0c\u5728\u539f\u6709\u7f51\u7edc\u4f4d\u7684\u57fa\u7840\u4e0a\uff0c\u518d\u5411\u4e3b\u673a\u4f4d\u501f\u4e00\u4e2abit\u4f5c\u4e3a\u7f51\u7edc\u4f4d\u7684\u8865\u5145\uff0c\u7f51\u7edc\u4f4d\u5c31\u6269\u5145\u5230\u4e8617bit\uff0c\u76f8\u5bf9\u7684\u4e3b\u673a\u4f4d\u5c31\u53d8\u6210\u4e8615bit\u3002\u90a3\u4e48\u501f\u8fc7\u6765\u7684\u8fd9\u4e00\u4f4d\uff0c\u5c31\u662f\u5b50\u7f51\u4f4d\u4e86\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002\u7531\u4e8e\u6211\u4eec\u501f\u4e86\u8fd9\u4e00\u4f4d\uff0c \u56e0\u6b64\u7f51\u7edc\u63a9\u7801\u5c31\u4ece\u9ed8\u8ba4\u7684255.255.0.0\u53d8\u6210\u4e86255.255.128.0\u6216\u8005\u8bf4\u4ece/16\u53d8\u6210\u4e86/17\u3002 \u4e8e\u662f\u4ece\u539f\u6765\u7684\u53ea\u6709172.16.0.0/16\u7684\u4e00\u4e2a\u5927\u7f51\u6bb5\uff0c\u53d8\u6210\u73b0\u5728\u62e5\u6709172.16.0.0/17\u53ca172.16..128.0/17\u8fd9\u4e24\u4e2a\u5c0f\u4e00\u70b9\u7684\u7f51\u6bb5\uff0c\u8fd9\u5c31\u662f\u5b50\u7f51\u5212\u5206\u3002\u52a1\u5fc5\u8981\u5173\u6ce8\u7f51\u7edc\u63a9\u7801\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u53d1\u6325\u7684\u4f5c\u7528\u3002","title":"\u5982\u4f55\u5212\u5206\u5b50\u7f51"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_10","text":"\u73b0\u5728\u6709\u4e00\u4e2aIP\u5730\u5740\uff1a192.168.1.0\uff0c\u8fd9\u662f\u4e00\u4e2aC\u7c7b\u5730\u5740\uff0c\u9ed8\u8ba4\u7684\u63a9\u7801\u662f/24\uff0c\u6211\u8981\u5bf9\u5b83\u505a\u5b50\u7f51\u5212\u5206\uff0c\u5411\u4e3b\u673a\u4f4d\u501f\u4e00\u4f4d\u4f5c\u4e3a\u5b50\u7f51\u4f4d\uff0c\u4e5f\u5c31\u662f\u63a9\u7801\u957f\u5ea6\u53d8\u6210/25\uff0c\u90a3\u4e48\u6211\u80fd\u5f97\u5230\u51e0\u4e2a\u5b50\u7f51\uff1f\u6bcf\u4e2a\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740\u662f\u591a\u5c11\uff1f\u6bcf\u4e2a\u5b50\u7f51\u7684\u5e7f\u64ad\u5730\u5740\u662f\u591a\u5c11\uff1f\u6bcf\u4e2a\u5b50\u7f51\u7684\u53ef\u7528IP\u5730\u5740\u8303\u56f4\u662f\u591a\u5c11? \u6b65\u9aa4\u5982\u4e0b\uff1a","title":"\u5b50\u7f51\u5212\u5206\u4f8b\u5b50\u4e00"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_11","text":"\u9996\u5148\u8fd9\u662f\u4e00\u4e2aC\u7c7b\u5730\u5740\uff0c\u56e0\u6b64\u9ed8\u8ba4\u7684\u63a9\u7801\u957f\u5ea6\u4e3a/24\uff0c\u4f60\u53ef\u4ee5\u5212\u4e00\u6761\u7ad6\u7ebf\u5e2e\u52a9\u8ba1\u7b97\u3002\u7ebf\u7684\u5de6\u8fb9\u4e3a\u7f51\u7edc\u4f4d\uff0c\u53f3\u8fb9\u4e3a\u4e3b\u673a\u4f4d\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002","title":"\u5224\u65ad\u7c7b\u522b\uff0c\u627e\u9ed8\u8ba4\u63a9\u7801\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_12","text":"\u5728\u539f\u6709\u7684/24\u63a9\u7801\u57fa\u7840\u4e0a\uff0c\u5411\u4e3b\u673a\u4f4d\u501f\u4e00\u4f4d\uff0c\u63a9\u7801\u53d8\u6210/25\u3002\u501f\u51fa\u6765\u7684\u8fd9\u4e00\u4f4d\u5c31\u662f\u5b50\u7f51\u4f4d\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u53ea\u8981\u5c06\u865a\u7ebf\u5f80\u53f3\u79fb\u52a8\u4e00\u683c\u5c31\u884c\u3002\u8fd9\u4e2a\u5b50\u7f51\u4f4d\u7684\u503c\u8981\u4e48\u4e3a0\uff0c\u8981\u4e48\u4e3a1\uff0c\u4e5f\u5c31\u662f\u5b58\u5728\u4e24\u79cd\u53ef\u80fd\u6027\uff0c\u8fd9\u5c31\u521b\u9020\u4e86\u4e24\u4e2a\u5b50\u7f51\uff082\u76841\u6b21\u65b9\uff09\uff0c\u5b50\u7f51\u4f4d\u4e3a0\u65f6\uff0c\u5f97\u5230\u7684\u5b50\u7f51\u5730\u5740\u662f192.168.1.0/25\uff0c\u5b50\u7f51\u4f4d\u4e3a1\u65f6\uff0c\u5f97\u5230\u53e6\u4e00\u4e2a\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740192.168.1.128/25\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"\u53d8\u66f4\u63a9\u7801\uff0c\u627e\u5b50\u7f51\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_13","text":"\u4e0a\u9762\u5206\u522b\u5217\u51fa\u4e86\u5b50\u7f511\u53ca\u5b50\u7f512\u7684\u5e7f\u64ad\u5730\u5740\uff0c\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u628a\u5404\u4e2a\u5b50\u7f51\u7684\u4e3b\u673a\u4f4d\u5168\u90e8\u7f6e1\u5373\u53ef\u3002\u56e0\u6b64\u5b50\u7f51192.168.1.0/25 \u7684\u5e7f\u64ad\u5730\u5740\u4e3a192.168.1.127 \uff1b\u5b50\u7f51192.168.1.128/25 \u7684\u5e7f\u64ad\u5730\u5740\u4e3a192.168.1.255\uff1b","title":"\u5f97\u51fa\u5e7f\u64ad\u5730\u5740\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ip_3","text":"\u7ecf\u8fc7\u4e0a\u9762\u7684\u8ba1\u7b97\uff0c\u5f97\u51fa\u4e86\u5b50\u7f511\u53ca\u5b50\u7f512\u7684\u7f51\u7edc\u5730\u5740\u548c\u5e7f\u64ad\u5730\u5740\uff0c\u90a3\u4e48\u6bcf\u4e2a\u5b50\u7f51\u53ef\u7528\u7684IP\u5730\u5740\u4e5f\u5c31\u51fa\u6765\u4e86\uff0c\u56e0\u4e3a\u53ef\u7528IP\u5730\u5740\u5b9e\u9645\u4e0a\u5c31\u662f\u8be5\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740\u4e0e\u5e7f\u64ad\u5730\u5740\u4e4b\u95f4\u5939\u7740\u7684\u90a3\u4e9b\u4e2aIP\u5730\u5740\u3002\u6240\u4ee5\u5b9e\u9645\u4e0a\u6211\u4eec\u5bf9192.168.1.0/24\u8fd9\u4e2aC\u7c7b\u5730\u5740\u6bb5\uff0c\u7528\u4e86\u4e00\u4e2a\u53d8\u957f\u540e\u7684\u5b50\u7f51\u63a9\u7801\u957f\u5ea6\uff1a/25\uff0c\u4e5f\u5c31\u662f\u5411\u4e3b\u673a\u4f4d\u501f1\u4f4d\u540e\u4ea7\u751f\u51fa\u4e862\u4e2a\u5b50\u7f51\uff0c\u6bcf\u4e2a\u5b50\u7f51\u6709126\u4e2a\u53ef\u7528IP\u5730\u5740\u3002\u8fd9\u91cc\u6709\u4e2a\u516c\u5f0f\uff1a","title":"\u5f97\u51fa\u6bcf\u4e2a\u5b50\u7f51\u7684\u53ef\u7528IP\u5730\u5740\u6570\u91cf\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_14","text":"\u5047\u8bbe\u73b0\u5728\u6709\u4e00\u4e2aIP\u5730\u5740\uff1a192.168.1.64/27\uff0c\u60f3\u628a\u8fd9\u4e2a\u5730\u5740\u914d\u7f6e\u5728\u4e00\u53f0PC\u4e0a\uff0c\u662f\u5426\u53ef\u884c\uff1f \u7531\u4e8e\u8be5\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u957f\u5ea6\u4e3a/24\uff0c\u800c\u65b0\u63a9\u7801\u957f\u5ea6\u4e3a/27\uff0c\u56e0\u6b64\u7f51\u7edc\u4f4d\u5411\u4e3b\u673a\u4f4d\u501f\u4e863\u4f4d\uff0c\u4ea7\u751f\u4e868\u4e2a\u5b50\u7f51\uff0c\u6bcf\u4e2a\u5b50\u7f51\u5185\u5305\u542b\u7684\u6240\u6709IP\u5730\u5740\u6570\u91cf\u4e3a32\uff0c\u4e5f\u5c31\u662f2\u76845\u6b21\u65b9\uff085\u662f\u5269\u4f59\u7684\u4e3b\u673a\u4f4d\u6570\uff09\u3002 \u73b0\u5728\u5f00\u59cb\u628a\u6bcf\u4e2a\u5b50\u7f51\u7f57\u5217\u4e00\u4e0b\uff0c\u7ed3\u679c\u53d1\u73b0192.168.1.64/27\u8fd9\u4e2aIP\u5730\u5740\uff0c\u5176\u5b9e\u662f\u5176\u4e2d\u4e00\u4e2a\u5b50\u7f51\u7684\u7f51\u7edc\u5730\u5740\uff0c\u65e2\u7136\u662f\u7f51\u7edc\u5730\u5740\uff0c\u5f53\u7136\u662f\u4e0d\u80fd\u5206\u914d\u7ed9PC\u7528\u7684\u4e86\u3002 VRP \u57fa\u7840 Versatile Routing Platform \u901a\u7528\u8def\u7531\u5e73\u53f0\uff0c\u7b80\u79f0VRP\uff0c\u662f\u534e\u4e3a\u6570\u636e\u901a\u4fe1\u4ea7\u54c1\u7684\u901a\u7528\u64cd\u4f5c\u7cfb\u7edf\u5e73\u53f0\uff0c\u5b83\u4ee5IP \u4e1a\u52a1\u4e3a\u6838\u5fc3\uff0c\u91c7\u7528\u7ec4\u4ef6\u5316\u7684\u4f53\u7cfb\u7ed3\u6784\uff0c\u5728\u5b9e\u73b0\u4e30\u5bcc\u529f\u80fd\u53ca\u7279\u6027\u7684\u540c\u65f6\uff0c\u63d0\u4f9b\u57fa\u4e8e\u5e94\u7528\u7684\u53ef\u88c1\u526a\u80fd\u529b\u548c\u53ef\u6269\u5c55\u80fd\u529b\u3002VRP\u5176\u5b9e\u5c31\u662f\u8fd0\u884c\u5728\u534e\u4e3a\u6570\u901a\u4ea7\u54c1\u4e0a\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5c31\u50cfWindows\u7cfb\u7edf\u5bf9\u4e8ePC\uff0ciOS\u7cfb\u7edf\u5bf9\u4e8e\u82f9\u679c\u7ec8\u7aef\u3002\u6211\u4eec\u8c03\u8bd5VRP\u7cfb\u7edf\u7684\u6570\u901a\u8bbe\u5907\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u5c31\u662f\u901a\u8fc7\u547d\u4ee4\u884c\u754c\u9762\uff08CLI\uff09\uff1a \u4e0b\u9762\u6211\u4eec\u521d\u6b65\u4e86\u89e3\u4e00\u4e0bVRP\u7684\u547d\u4ee4\u884c\u754c\u9762\uff1a","title":"\u5b50\u7f51\u5212\u5206\u4f8b\u5b50\u4e8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#view","text":"VRP\u7684\u547d\u4ee4\u884c\u754c\u9762\u5b9a\u4e49\u4e86\u5404\u79cd\u547d\u4ee4\u89c6\u56fe\uff08View\uff09\uff0c\u8981\u5bf9\u7279\u5b9a\u534f\u8bae\u6216\u8005\u529f\u80fd\u8fdb\u884c\u914d\u7f6e\u5c31\u9700\u8981\u8fdb\u5165\u5230\u76f8\u5e94 \u7684\u89c6\u56fe\u3002\u89c6\u56fe\u7684\u5b9a\u4e49\u4f7f\u5f97\u547d\u4ee4\u884c\u7684\u914d\u7f6e\u66f4\u6a21\u5757\u5316\uff0c\u4e5f\u66f4\u4e25\u8c28\u3001\u66f4\u5c42\u6b21\u5316\u3002\u4f8b\u5982\u4e00\u53f0\u8def\u7531\u5668\u6709\u591a\u4e2a\u63a5\u53e3\uff0c \u5982\u679c\u8981\u4fee\u6539\u67d0\u4e2a\u63a5\u53e3\u7684IP\u5730\u5740\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u8fdb\u5165\u8be5\u63a5\u53e3\u7684\u914d\u7f6e\u89c6\u56fe\uff0c\u7136\u540e\u8fdb\u884c\u914d\u7f6e\uff0c\u800c\u5728\u8fd9\u4e2a\u63a5\u53e3\u7684\u914d\u7f6e\u89c6\u56fe\u4e2d\u6267\u884c\u7684\u76f8\u5173\u547d\u4ee4\uff0c\u53ea\u4f1a\u5f71\u54cd\u8be5\u63a5\u53e3\u3002\u56e0\u6b64VRP\u89c4\u5b9a\uff0c\u5728\u9002\u5f53\u7684\u89c6\u56fe\u4e0b\u6267\u884c\u9002\u5f53\u7684\u547d\u4ee4\u3002 \u521a\u767b\u9646\u8bbe\u5907\u65f6\u5728\u547d\u4ee4\u884c\u754c\u9762\u4f60\u53ef\u80fd\u4f1a\u770b\u5230\u201c\\<Quidway>\u201d\u6216\u8005\u201c\\<Huawei>\u201d\u8fd9\u6837\u7684\u63d0\u793a\u7b26\uff0c\u201c\\<>\u201d\u5c16\u62ec\u53f7\u63d0\u793a\u4f60\u5f53\u524d\u6240\u5904\u7684\u89c6\u56fe\u662f\u201c\u7528\u6237\u89c6\u56fe\u201d\uff0c\u800c\u201cQuidway\u201d\u6216\u201cHuawei\u201d\u662f\u8be5\u8bbe\u5907\u7684\u540d\u79f0\uff0c\u5f53\u7136\u8bbe\u5907\u540d\u79f0\u662f\u53ef\u4ee5\u4fee\u6539\u7684\u3002\u5728\u4e0d\u540c\u7684\u89c6\u56fe\u4e0b\u6211\u4eec\u4f1a\u770b\u5230\u4e0d\u540c\u7684\u63d0\u793a\u7b26\u3002\u4f8b\u5982\u4e0a\u56fe\u6240\u5217\u4e3e\u7684\u51e0\u79cd\u89c6\u56fe\u4ee5\u53ca\u8fdb\u5165\u8be5\u89c6\u56fe\u4f7f\u7528\u7684\u547d\u4ee4\u3002\u4ece\u5f53\u524d\u89c6\u56fe\u8fdb\u5165\u5230\u4e0b\u4e00\u7ea7\u89c6\u56fe\u9700\u8981\u4f7f\u7528\u76f8\u5e94\u7684\u547d\u4ee4\uff0c\u4ece\u5f53\u524d\u89c6\u56fe\u9000\u56de\u5230\u4e0a\u4e00\u7ea7\u89c6\u56fe\u53ef\u4f7f\u7528\u201cquit\u201d\u547d\u4ee4\uff1a","title":"\u547d\u4ee4\u89c6\u56fe\uff08View\uff09\u7684\u6982\u5ff5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_15","text":"\u5728\u547d\u4ee4\u884c\u754c\u9762\u4e2d\uff0c\u901a\u8fc7\u8f93\u5165\u7279\u5b9a\u7684\u547d\u4ee4\u53ca\u53c2\u6570\u6765\u5b8c\u6210\u5bf9\u8bbe\u5907\u7684\u8c03\u8bd5\uff0c\u4f8b\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c sysname Router1 \uff0c\u8fd9\u6761\u547d\u4ee4\u4e2d\u201c sysname \u201d\u662f\u5173\u952e\u5b57\uff0c\u800c\u201c Router1 \u201d\u662f\u53c2\u6570\uff0c\u8fd9\u6761\u547d\u4ee4\u7684\u610f\u601d\u5c31\u662f\u5c06\u8be5\u8bbe\u5907\u7684\u540d\u79f0\u4fee\u6539\u4e3aRouter1\uff0c\u547d\u4ee4\u8f93\u5165\u5b8c\u6bd5\u540e\u6309\u56de\u8f66\uff0c\u5c31\u4f1a\u53d1\u73b0\u7cfb\u7edf\u7684\u63d0\u793a\u7b26\u53d1\u751f\u4e86\u6539\u53d8\uff0c\u53d8\u6210\u4e86\u201c[Router1]\u201d\u3002\u8fd9\u6761\u547d\u4ee4\u9700\u8981\u5728\u7cfb\u7edf\u89c6\u56fe\u4e0b\u5b8c\u6210\uff0c\u5982\u679c\u5728\u7528\u6237\u89c6\u56fe\u4e0b\u5c1d\u8bd5\u8f93\u5165\u8fd9\u6761\u547d\u4ee4\uff0c\u5219\u4f1a\u62a5\u9519\u3002","title":"\u57fa\u672c\u547d\u4ee4\u7ed3\u6784"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_16","text":"","title":"\u4f7f\u7528\u547d\u4ee4\u884c\u7684\u5e2e\u52a9\u529f\u80fd"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_17","text":"\u5728\u8bbe\u5907\u7684\u914d\u7f6e\u8fc7\u7a0b\u4e2d\uff0c\u7531\u4e8e\u547d\u4ee4\u8f83\u591a\uff0c\u51fa\u73b0\u8bb0\u5fc6\u6a21\u7cca\u7684\u60c5\u51b5\u975e\u5e38\u6b63\u5e38\uff0cVRP\u7684\u547d\u4ee4\u540e\u754c\u9762\u4e3a\u6211\u4eec\u8d34\u5fc3\u5730\u63d0\u4f9b\u4e86\u547d\u4ee4\u63d0\u793a\u529f\u80fd\uff0c\u5f53\u4e00\u6761\u547d\u4ee4\u4e2d\u67d0\u4e2a\u5173\u952e\u5b57\u53ea\u8bb0\u5f97\u5f00\u5934\u7684\u51e0\u4e2a\u5b57\u6bcd\u65f6\uff0c\u53ef\u5728\u952e\u5165\u5f00\u5934\u5b57\u6bcd\u540e\u7d27\u63a5\u7740\u952e\u5165\u201c\uff1f\u201d\u95ee\u53f7\uff0c\u4f8b\u5982\u201cip rou?\u201d\uff0c\u6ce8\u610f\u5728\u95ee\u53f7\u524d\u9762\u6ca1\u6709\u7a7a\u683c\uff0c\u7cfb\u7edf\u5373\u4f1a\u81ea\u52a8\u5f39\u51fa\u63d0\u793a\u4fe1\u606f\uff0c\u63d0\u793a\u5f53\u524d\u201crou\u201d\u8fd9\u4e09\u4e2a\u5b57\u6bcd\u5f00\u5934\u7684\u5173\u952e\u5b57\u6709\u54ea\u4e9b\uff1a \u8fd8\u6709\u4e00\u4e9b\u60c5\u51b5\uff0c\u53ef\u80fd\u662f\u5f53\u524d\u5173\u952e\u5b57\u8f93\u5165\u5b8c\u6bd5\u540e\uff0c\u5fd8\u8bb0\u4e86\u4e0b\u4e00\u4e2a\u5173\u952e\u5b57\u6216\u8005\u53c2\u6570\u8be5\u8f93\u5165\u4ec0\u4e48\uff0c\u90a3\u4e48\u5c31 \u53ef\u4ee5\u5728\u5f53\u524d\u5173\u952e\u5b57\u8f93\u5165\u5b8c\u6bd5\u540e\u952e\u5165\u7a7a\u683c\uff0c\u7136\u540e\u518d\u8f93\u5165\u4e00\u4e2a\u201c\uff1f\u201d\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5f39\u51fa\u53ef\u9009\u62e9\u7684\u5173\u952e\u5b57\u6216\u53c2\u6570\u7684\u63d0\u793a\u4fe1\u606f\uff1a","title":"\u547d\u4ee4\u63d0\u793a\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_18","text":"\u8f93\u5165\u547d\u4ee4\u65f6\uff0c\u5173\u952e\u5b57\u65e0\u9700\u5b8c\u6574\u8f93\u5165\uff0c\u4f8b\u5982\u8981\u8f93\u5165\u201csystem-view\u201d\uff0c\u53ef\u5148\u8f93\u5165\u201csys\u201d\uff0c\u7136\u540e\u6309tab \u952e\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8865\u9f50sys\u5f00\u5934\u7684\u5173\u952e\u5b57\uff0c\u5982\u679csys\u5f00\u5934\u6709\u591a\u4e2a\u5173\u952e\u5b57\uff0c\u53ef\u4ee5\u591a\u6b21\u6309tab\u952e\u5207\u6362\u5230\u81ea\u5df1\u60f3\u8f93\u5165\u7684\u90a3\u4e00\u4e2a\uff1a \u5728\u547d\u4ee4\u5f04\u719f\u6089\u4e4b\u540e\uff0c\u5176\u5b9e\u53ef\u4ee5\u91c7\u7528\u7b80\u5316\u7684\u547d\u4ee4\u4e66\u5199\u65b9\u5f0f\uff0c\u4f8b\u5982\u201cinterface gigabitEthernet 0/0/0\u201d \u7b49\u540c\u4e8e\u201cint g 0/0/0\u201d\uff0c\u91c7\u7528\u540e\u8005\u6765\u914d\u7f6e\u8bbe\u5907\uff0c\u5de5\u4f5c\u6548\u7387\u5927\u5927\u63d0\u5347\uff0c\u5f53\u7136\u903c\u683c\u4e5f\u8ddf\u7740\u77ac\u95f4\u63d0\u5347\u4e86\u597d\u51e0\u4e2a\u6863\u6b21\u3002","title":"\u547d\u4ee4\u8865\u9f50\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_19","text":"CLI\u7684\u8bed\u6cd5\u68c0\u67e5\u529f\u80fd\u5e2e\u52a9\u6211\u4eec\u53d1\u73b0\u547d\u4ee4\u4e2d\u7684\u9519\u8bef\uff1a [Huawei]a \u5176\u4ed6\u7684\u63d0\u793a\u5982\u4e0b\uff1a","title":"\u8bed\u6cd5\u68c0\u67e5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_20","text":"","title":"\u57fa\u7840\u914d\u7f6e\u547d\u4ee4"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_21","text":"","title":"\u4fee\u6539\u8bbe\u5907\u540d\u79f0\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_22","text":"\u8fd9\u91ccGigabitEthernet0/0/0\u6307\u7684\u662f\u5343\u5146\u63a5\u53e3GE0/0/0\uff0c\u5176\u4e2dGigabitEthernet\u8868\u793a\u5343\u5146\u4ee5\u592a\u7f51\u63a5\u53e3\uff0c\u53e6 \u5916\uff0c\u540e\u9762\u7684\u4e09\u4e2a\u6570\u5b57\u5206\u522b\u662f\u201c\u69fd\u4f4d\u53f7/\u5b50\u5361\u53f7/\u63a5\u53e3\u5e8f\u53f7\u201d\uff0c\u5177\u4f53\u7684\u542b\u4e49\u5982\u4e0b\uff1a \u69fd\u4f4d\u53f7\uff1a\u8868\u793a\u8be5\u63a5\u53e3\u6240\u5c5e\u5355\u677f\u6240\u5728\u7684\u69fd\u4f4d\u53f7\u3002 \u5b50\u5361\u53f7\uff1a\u8868\u793a\u8be5\u63a5\u53e3\u6240\u5c5e\u7684\u5b50\u5361\u53f7\u3002 \u63a5\u53e3\u5e8f\u53f7\uff1a\u8868\u793a\u63a5\u53e3\u5728\u677f\u5361\u4e0a\u7684\u7f16\u6392\u987a\u5e8f\u53f7\u3002","title":"\u914d\u7f6e\u8bbe\u5907\u7684\u63a5\u53e3\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_23","text":"\\<SW1> save \u5728\u8bbe\u5907\u4e0a\u7684\u6bcf\u4e00\u4e2a\u914d\u7f6e\u64cd\u4f5c\uff0c\u90fd\u4f1a\u8bb0\u5f55\u5728\u8bbe\u5907\u7684\u5f53\u524d\u914d\u7f6e\u201ccurrent-configuration\u201d\u4e4b\u4e2d\uff0c\u4e5f\u5c31\u662f\u5f53 \u524d\u8fd0\u884c\u4e2d\u7684\u914d\u7f6e\uff0c\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u662f\u4fdd\u5b58\u5728\u52a8\u6001\u5185\u5b58\u4e2d\u7684\u3002\u53ef\u4ee5\u4f7f\u7528**display current-configuration** \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u8fd0\u884c\u4e2d\u7684\u914d\u7f6e\u3002 \u8bbe\u5907\u91cd\u542f\u4e4b\u540ecurrent-configuration\u5c06\u4f1a\u4e22\u5931\u3002\u56e0\u6b64\u4e3a\u4e86\u4fdd\u8bc1\u8bbe\u5907\u91cd\u542f\u540e\u4e0d\u4e22\u5931\u5f53\u524d\u5df2\u7ecf\u5b8c\u6210\u7684\u914d\u7f6e\uff0c\u5219\u8981\u5728\u914d\u7f6e\u53d8\u66f4\u540e\uff0c\u5c06current-configuration\u4fdd\u5b58\u5230saved-configuration\uff0c\u4e5f\u5c31\u662f\u4fdd\u5b58\u5230\u542f\u52a8\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd9\u6837\u7684\u8bdd\uff0c\u8bbe\u5907\u91cd\u542f\u540e\u5c06\u4f1a\u8bfb\u53d6\u5df2\u4fdd\u5b58\u5230\u786c\u76d8\u4e2d\u7684\u542f\u52a8\u914d\u7f6e\u6587\u4ef6\uff0c\u7136\u540e\u5c06\u5176\u52a0\u8f7d\u5230\u5f53\u524d\u914d\u7f6e\u4e2d\u8fd0\u884c\u3002\u4f7f\u7528**save**\u547d\u4ee4\u6765\u5c06current-configuration\u4fdd\u5b58\u5230\u542f\u52a8\u914d\u7f6e\u6587\u4ef6\uff0c**save**\u5173\u952e\u5b57\u5982\u679c\u4e0d\u6307\u5b9a\u53ef\u9009\u53c2\u6570configuration-file\uff08\u6587\u4ef6\u540d\uff09\uff0c\u5219\u914d\u7f6e\u6587\u4ef6\u5c06\u4fdd\u5b58\u4e3a\u201cvrpcfg.zip\u201d\u3002\u201cvrpcfg.zip\u201d\u662f\u7cfb\u7edf\u7f3a\u7701\u547d\u540d\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u521d\u59cb\u72b6\u6001\u662f\u7a7a\u914d\u7f6e\u3002 \u53e6\u5916\uff0c\u5982\u679c\u8981\u6e05\u9664\u5df2\u4fdd\u5b58\u7684\u542f\u52a8\u914d\u7f6e\u6587\u4ef6\uff0c\u4f7f\u5f97\u4e0b\u6b21\u8bbe\u5907\u91cd\u542f\u540e\u80fd\u6062\u590d\u51fa\u5382\u914d\u7f6e\uff0c\u53ef\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff1a \\<SW1> reset saved-configuration \u5982\u679c\u8981\u5907\u4efd\u5df2\u4fdd\u5b58\u7684\u542f\u52a8\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff1a \\<SW1> copy flash:/vrpcfg.zip flash:/cfgbackup.zip \u4f7f\u7528 Console \u63a5\u53e3\u7ba1\u7406\u8bbe\u5907 \u4e00\u822c\u6765\u8bf4\uff0c\u7f51\u7edc\u8bbe\u5907\uff08\u4f8b\u5982\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u3001\u9632\u706b\u5899\u7b49\uff09\u5728\u8bbe\u5907\u9762\u677f\u4e0a\u90fd\u4f1a\u6709\u4e00\u4e2a\u7528\u4e8e\u914d\u7f6e\u548c\u7ba1\u7406\u7684\u4e13\u7528\u63a5\u53e3 \u2013 Console\u53e3\uff08\u6216CON\u53e3\uff09\uff0c\u901a\u8fc7\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5e76\u4f7f\u7528\u4e13\u7528\u7684\u7ebf\u7f06\u5c06\u8be5\u8bbe\u5907\u4e0ePC\uff08\u7f51\u7edc\u7ba1\u7406\u5458\u6240\u4f7f\u7528\u7684\u7535\u8111\uff09\u8fdb\u884c\u8fde\u63a5\uff0c\u5373\u53ef\u5b9e\u73b0\u5bf9\u8bbe\u5907\u7684\u914d\u7f6e\u53ca\u7ba1\u7406\u3002 \u5bf9\u8bbe\u5907\u4e0a\u7ebf\u524d\u7684\u521d\u6b21\u914d\u7f6e\u53ca\u7ba1\u7406\uff0c\u5f80\u5f80\u91c7\u7528\u6b64\u79cd\u65b9\u5f0f\u3002\u6211\u4eec\u901a\u8fc7\u4ee5\u4e0b\u56db\u4e2a\u6b65\u9aa4\u6765\u4e86\u89e3\u4e00\u4e0b\u5982\u4f55\u4f7f\u7528Console \u53e3\u5bf9\u8bbe\u5907\u8fdb\u884c\u7ba1\u7406\u53ca\u914d\u7f6e\uff1a \u8ba4\u8bc6\u8bbe\u5907\u7684Console\u53e3\u3002 \u51c6\u5907\u597d\u76f8\u5173\u7ebf\u7f06\u3002 \u642d\u5efa\u914d\u7f6e\u73af\u5883\u3002 \u901a\u8fc7\u7ec8\u7aef\u7ba1\u7406\u8f6f\u4ef6\u767b\u9646\u8bbe\u5907\u3002","title":"\u7ba1\u7406\u53ca\u7ef4\u62a4\u8bbe\u5907\u914d\u7f6e\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#console","text":"\u534e\u4e3a\u7f51\u7edc\u8bbe\u5907\u9762\u677f\u4e0a\u7684Console\u53e3\u90fd\u6709\u505a\u76f8\u5173\u6807\u8bb0\uff0c\u6bd4\u8f83\u5bb9\u6613\u8bc6\u522b\uff0c\u5982\u4e0b\u56fe\uff08\u4ee5\u9632\u706b\u5899E1000E\u4e3a\u4f8b\uff09\u3002","title":"\u8ba4\u8bc6\u8bbe\u5907\u7684Console\u53e3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_24","text":"Console\u7ebf\u7f06\uff08\u4e0a\u56fe\u53f3\u4fa7\u7684\u7ebf\u7f06\uff09\u4e00\u7aef\u4e3aRJ45\u6c34\u6676\u5934\uff0c\u4e00\u7aef\u4e3a\u4e32\u53e3\u63a5\u5934\u3002RJ45\u63a5\u5934\u7528\u4e8e\u8fde\u63a5\u7f51\u7edc\u8bbe\u5907\u7684Console\u53e3\uff0c\u7ebf\u7f06\u53e6\u4e00\u7aef\u7684\u4e32\u53e3\u7528\u4e8e\u8fde\u63a5PC\uff0c\u73b0\u5728\u5927\u90e8\u5206\u53f0\u5f0fPC\u5728\u4e3b\u673a\u7bb1\u540e\u90fd\u6709\u4e32\u53e3\u53ef\u4ee5\u76f4\u63a5\u8fde\u63a5 Console\u7ebf\u7f06\u3002\u53ea\u8981\u5c06\u88ab\u914d\u7f6e\u8bbe\u5907\u4e0ePC\u6309\u7167\u4e0a\u8ff0\u65b9\u5f0f\u8fdb\u884c\u8fde\u63a5\uff0c\u5c31\u5b8c\u6210\u4e86\u914d\u7f6e\u73af\u5883\u7684\u642d\u5efa\u3002\u73af\u5883\u5b8c\u6210\u540e\uff0c\u5728PC\u4e0a\u4f7f\u7528\u7ec8\u7aef\u7ba1\u7406\u8f6f\u4ef6\u5373\u53ef\u901a\u8fc7\u7f51\u7edc\u8bbe\u5907\u7684Console\u63a5\u53e3\u3001\u4f7f\u7528\u547d\u4ee4\u884c\u7684\u65b9\u5f0f\u5bf9\u8bbe\u5907\u8fdb\u884c\u7ba1\u7406\u3002 \u4f46\u662f\u5927\u90e8\u5206\u7b14\u8bb0\u672c\u7535\u8111\u4e0a\u5e76\u6ca1\u6709\u4e32\u53e3\uff0c\u56e0\u6b64\u5982\u679c\u4f7f\u7528\u6ca1\u6709\u4e32\u53e3\u7684\u7b14\u8bb0\u672c\u7535\u8111\u8c03\u8bd5\u7f51\u7edc\u8bbe\u5907\uff0c\u5219\u9700\u8981\u53e6\u4e00\u6839\u7ebf\u7f06\u6765\u8f6c\u63a5\uff0c\u8fd9\u5c31\u662f\u4e0a\u56fe\u5de6\u4fa7\u6240\u793a\u7684USB-RS232\u7684\u7ebf\u7f06\uff0c\u8fd9\u6839\u7ebf\u7f06\u53ef\u4ee5\u8bf4\u662f\u7f51\u7edc\u5de5\u7a0b\u5e08\u5fc5\u5907\u7684\u5de5\u5177\uff0c \u5404\u5927\u7535\u5b50\u4ea7\u54c1\u5546\u94fa\u5747\u6709\u9500\u552e\uff08USB-RS232\u9700\u8981\u5b89\u88c5\u9a71\u52a8\u624d\u53ef\u4f7f\u7528\uff0c\u9a71\u52a8\u7a0b\u5e8f\u5b89\u88c5\u5305\u968f\u7ebf\u7f06\u9644\u9001\uff09\u3002","title":"\u51c6\u5907\u597d\u76f8\u5173\u7ebf\u7f06"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_25","text":"\u5982\u679c\u4f7f\u7528\u7b14\u8bb0\u672c\u7535\u8111\u6765\u914d\u7f6e\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u6216\u8005\u9632\u706b\u5899\uff0c\u5219\u53ef\u53c2\u8003\u5982\u4e0a\u56fe\u6240\u793a\u7684\u7ebf\u7f06\u8fde\u63a5\u65b9\u6cd5\u3002\u5c06USB- RS232\u7ebf\u7f06\u7684USB\u63a5\u53e3\u63a5\u5230\u7b14\u8bb0\u672c\u7535\u8111\u4e0a\uff0c\u540c\u65f6\u7ebf\u7f06\u7684\u53e6\u4e00\u5934\u8fde\u63a5Console\u7ebf\u7684\u4e32\u53e3\uff0cConsole\u7ebf\u7684\u53e6\u4e00\u7aef\uff0c\u4e5f\u5c31\u662fRJ45\u6c34\u6676\u5934\u8fd9\u4e00\u7aef\u5219\u63a5\u5230\u8bbe\u5907\u7684Console\u53e3\u4e0a\u3002","title":"\u642d\u5efa\u914d\u7f6e\u73af\u5883"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_26","text":"\u5728PC\u4e0a\uff0c\u6211\u4eec\u9700\u8981\u51c6\u5907\u597d\u7ec8\u7aef\u7ba1\u7406\u8f6f\u4ef6\uff0c\u7528\u4e8e\u7ba1\u7406\u548c\u914d\u7f6e\u7f51\u7edc\u8bbe\u5907\u3002\u5e38\u7528\u7684\u7ec8\u7aef\u7ba1\u7406\u8f6f\u4ef6\u6709\uff1aWindows \u81ea\u5e26\u7684\u7ec8\u7aef\u7ba1\u7406\u5de5\u5177\uff08WIN7\u7cfb\u7edf\u6ca1\u6709\u81ea\u5e26\u8be5\u5de5\u5177\uff09\u3001SecureCRT\u4ee5\u53caPutty\u7b49\u3002\u672c\u6587\u6863\u4ee5SecureCRT \u4e3a\u4f8b\u505a\u8bb2\u89e3\u3002\u8bf7\u81ea\u884c\u4e0b\u8f7dSecureCRT\u5e76\u5b89\u88c5\u3002\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u6253\u5f00\u8f6f\u4ef6\u3002 \u5728\u81ea\u52a8\u5f39\u51fa\u7684Connect\u5bf9\u8bdd\u6846\u4e2d\u9009\u62e9\u4e0b\u56fe\u6240\u793a\u7684\u6309\u94ae\u6765\u521b\u5efa\u4e00\u4e2a\u8fde\u63a5\uff1a \u5728\u5f39\u51fa\u7684Quick Connect\u5bf9\u8bdd\u6846\u4e2d\u9009\u62e9\u201cserial\u201d\uff0c\u5373\u4f7f\u7528\u4e32\u884c\u63a5\u53e3\u7ba1\u7406\u8bbe\u5907\uff1a \u8fdb\u4e00\u6b65\u914d\u7f6e\u5982\u4e0b\uff1a \u6ce8\u610f\u5728\u6b64\u5904\uff0cPort\u7684\u9009\u62e9\u89c6\u4e2a\u4eba\u60c5\u51b5\u800c\u5b9a\uff0c\u5f53\u7528\u7b14\u8bb0\u672c\u901a\u8fc7USB-RS232\u7ebf\u7f06\u63a5Console\u7ebf\u7ba1\u7406\u8bbe\u5907\u65f6\uff0c USB-RS232\u7ebf\u7f06\u662f\u9700\u8981\u5728PC\u7684windows\u7cfb\u7edf\u4e0a\u5b89\u88c5\u9a71\u52a8\u7a0b\u5e8f\u7684\uff0c\u5b89\u88c5\u5b8c\u6210\u7684\u7ed3\u679c\u662f\u5728\u7cfb\u7edf\u4e2d\u4f1a\u51fa\u73b0\u4e00\u4e2a\u901a\u8fc7USB\u63a5\u53e3\u6a21\u62df\u7684COM\u53e3\uff0c\u800c\u8be5COM\u53e3\u7684\u7f16\u53f7\u53ef\u5728\u53f3\u952e\u201c\u6211\u7684\u7535\u8111\u201d-\u201c\u8ba1\u7b97\u673a\u7ba1\u7406\u201d-\u201c\u8bbe\u5907\u7ba1\u7406\u201d-\u201c\u7aef\u53e3\uff08COM\u548cLPT\uff09\u201d\u4e2d\u770b\u5230\uff0c\u6b64\u5904\u663e\u793a\u7684\u7f16\u53f7\u8981\u4e0eSecureCRT\u4e2d\u9009\u62e9\u7684Port\u5bf9\u5e94\uff1a \u53e6\u5916\uff0cBand Rate\u4e5f\u5c31\u662f\u6ce2\u7279\u7387\uff0c\u8fd9\u4e00\u9879\u8981\u770b\u8bbe\u5907Console\u53e3\u7684\u9ed8\u8ba4\u53c2\u6570\u800c\u5b9a\uff0c\u6211\u53f8\u7684\u5927\u90e8\u5206\u8def\u7531\u3001\u4ea4\u6362\u53ca\u9632\u706b\u5899\u8bbe\u5907\u6b64\u5904\u8bbe\u7f6e\u7684\u503c\u90fd\u662f9600\u3002 \u5b8c\u6210\u540e\u70b9\u51fb\u201cConnect\u201d\u5373\u53ef\u767b\u9646\u8bbe\u5907\u3002\u5f53\u7136\uff0c\u7b2c\u4e00\u6b21\u4f7f\u7528Console\u767b\u9646\u8bbe\u5907\u624d\u9700\u8981\u4f9d\u7167\u4e0a\u8ff0\u6b65\u9aa4\u6765\u64cd\u4f5c\uff0c\u5f80\u540e\u518d\u6b21\u767b\u9646\uff0c\u5219\u53ef\u4f7f\u7528\u4e0a\u9762\u5df2\u521b\u5efa\u597d\u7684\u8fde\u63a5\u65b9\u5f0f\u5feb\u901f\u767b\u9646\u3002 eNSP \u534e\u4e3a\u5b98\u65b9\u6570\u901a\u6a21\u62df\u5668 eNSP\uff08Enterprise Network Simulation Platform\uff09\u662f\u4e00\u6b3e\u534e\u4e3a\u81ea\u7814\u7684\u3001\u514d\u8d39\u7684\u3001\u53ef\u6269\u5c55\u7684\u3001\u56fe\u5f62\u5316\u64cd\u4f5c\u7684\u7f51\u7edc\u4eff\u771f\u5e73\u53f0\uff0c\u4e3b\u8981\u5bf9\u4f01\u4e1a\u7f51\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u53ca\u9632\u706b\u5899\u7b49\u8bbe\u5907\u8fdb\u884c\u8f6f\u4ef6\u4eff\u771f\uff0c\u5b8c\u7f8e\u5448\u73b0\u771f\u5b9e\u8bbe\u5907\u5b9e\u666f\uff0c\u652f\u6301\u5927\u578b\u7f51\u7edc\u6a21\u62df\uff0c\u8ba9\u5e7f\u5927\u7528\u6237\u6709\u673a\u4f1a\u5728\u6ca1\u6709\u771f\u5b9e\u8bbe\u5907\u7684\u60c5\u51b5\u4e0b\u80fd\u591f\u6a21\u62df\u6f14\u7ec3\uff0c\u5b66\u4e60\u7f51\u7edc\u6280\u672f\u3002 eNSP\u4e0b\u8f7d\u94fe\u63a5\uff1a \u70b9\u51fb\u6b64\u5904 \u3002\u6216\u8005\u5728 http://enterprise.huawei.com/ \u641c\u7d22eNSP\u5373\u53ef\u627e\u5230eNSP\u8f6f\u4ef6\u4e0b\u8f7d\u9875\u9762\u3002 eNSP\u7684\u5b89\u88c5\u975e\u5e38\u7b80\u5355\uff0c\u5b89\u88c5\u5b8c\u6210\u540e\u6253\u5f00\u8f6f\u4ef6\u5373\u53ef\u770b\u5230\u4e3b\u754c\u9762\u3002\u8f6f\u4ef6\u7684\u64cd\u4f5c\u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u9700\u8981\u4ec0\u4e48\u8bbe\u5907\u5c31\u76f4\u63a5\u4ece\u8bbe\u5907\u680f\u62d6\u52a8\u56fe\u6807\u7136\u540e\u5728\u62d3\u6251\u753b\u5e03\u4e0a\u677e\u5f00\u5373\u53ef\u3002\u5b8c\u6210\u62d3\u6251\u7684\u642d\u5efa\u548c\u8fde\u7ebf\u540e\uff0c\u70b9\u51fb\u5de5\u5177\u680f\u4e2d\u7684\u7eff\u8272\u64ad\u653e\u6309\u94ae\u5373\u53ef\u7ecf\u8bbe\u5907\u5f00\u542f\u3002\u7b49\u5f85\u8bbe\u5907\u5b8c\u6210\u5f00\u542f\u540e\uff0c\u53cc\u51fb\u8bbe\u5907\u5373\u53ef\u8fdb\u5165CLI\u63a7\u5236\u53f0\u8fdb\u884c\u914d\u7f6e\u4e86\u3002 eNSP\u4e0d\u4ec5\u652f\u6301AR\u8def\u7531\u5668\u3001S57/S37\u4ea4\u6362\u673a\u3001USG5500\u9632\u706b\u5899\u7b49\u4e3b\u6d41\u6570\u901a\u8bbe\u5907\u7684\u6a21\u62df\uff0c\u8fd8\u652f\u6301\u65e0\u7ebf\u8bbe\u5907\uff0c \u4ee5\u53caDNS\u3001FTP\u3001HTTP\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u6a21\u62df\u7b49\uff0c\u66f4\u52a0\u652f\u6301\u6a21\u62df\u5668\u4e0e\u7269\u7406\u7f51\u5361\u7684\u6865\u63a5\uff0c\u4f7f\u5f97\u5b9e\u9a8c\u7684\u6269\u5c55\u6027 \u5f97\u5230\u6781\u5927\u7684\u63d0\u5347\u3002\u76ee\u524d\uff0c\u534e\u4e3a\u6570\u901a\u8ba4\u8bc1HCIE RS\u7684TroubleShooting\u8003\u8bd5\u4e5f\u662f\u4f7f\u7528NSP\u8f6f\u4ef6\u8fdb\u884c\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4f7f\u7528eNSP\u5b8c\u6210\u7b2c\u4e00\u4e2a\u5b9e\u9a8c\u3002","title":"\u901a\u8fc7\u7ec8\u7aef\u7ba1\u7406\u8f6f\u4ef6\u767b\u9646\u8bbe\u5907"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_27","text":"\u76ee\u6807\u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\uff1a\u4e00\u53f0PC\u4e0e\u4e00\u53f0\u8def\u7531\u5668\u901a\u8fc7\u7f51\u7ebf\u76f4\u8fde\u3002 \u73b0\u5728\u6211\u4eec\u8981\u5728eNSP\u4e2d\u642d\u5efa\u8fd9\u4e2a\u5b9e\u9a8c\u73af\u5883\uff0c\u5e76\u4e14\u5b8c\u6210PC\u548c\u8def\u7531\u5668\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC\u80fd\u591f\u8bbf\u95ee\u8def\u7531\u5668\uff08\u80fd\u591fping\u901a\u8def\u7531\u5668\uff09\u3002\u4e3aPC\u914d\u7f6e\u7684\u5730\u5740\u662f192.168.1.1/24\uff0c\u7f51\u5173\u5730\u5740\u662f192.168.1.254\uff1b\u4e3a\u8def\u7531\u5668\u7684GE0/0/0\u63a5\u53e3\u914d\u7f6e\u7684\u5730\u5740\u662f192.168.1.254/24\u3002","title":"\u5b9e\u9a8c\u62d3\u6251"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_28","text":"\u4f7f\u7528eNSP\u642d\u5efa\u4e0a\u8ff0\u73af\u5883\u662f\u975e\u5e38\u7b80\u5355\u7684\u3002\u65b0\u5efa\u4e00\u4e2a\u5b9e\u9a8c\u540e\uff0c\u4ece\u5de6\u4fa7\u7684\u8bbe\u5907\u5217\u8868\u4e2d\u9009\u62e9\u201c\u8def\u7531\u5668\u201d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6b64\u5904\u6709\u591a\u79cd\u578b\u53f7\u7684\u8def\u7531\u5668\u53ef\u4ee5\u9009\u62e9\uff0c\u5728\u672c\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u6311\u9009\u7684\u662fAR2220\uff0c\u56e0\u6b64\u7528\u9f20\u6807\u5de6\u952e\u70b9\u4f4fAR2220 \u7684\u56fe\u6807\u4e0d\u653e\uff0c\u7136\u540e\u62d6\u52a8\u5230\u753b\u5e03\u4e2d\u518d\u677e\u5f00\u5373\u53ef\uff1a \u63a5\u4e0b\u6765\u7ee7\u7eed\u6dfb\u52a0PC\uff0c\u70b9\u51fb\u8bbe\u5907\u5217\u8868\u91cc\u7684\u201c\u7ec8\u7aef\u201d\u7c7b\u578b\uff0c\u9009\u62e9PC\uff0c\u7136\u540e\u62d6\u653e\u5230\u753b\u5e03\u4e0a\uff1a \u63a5\u4e0b\u6765\u5b8c\u6210\u8bbe\u5907\u7684\u8fde\u7ebf\uff0c\u5728\u5de6\u4fa7\u8bbe\u5907\u5217\u8868\u4e2d\u9009\u62e9\u201c\u8bbe\u5907\u8fde\u7ebf\u201d\u56fe\u6807\uff0c\u5728\u7ebf\u7f06\u5217\u8868\u4e2d\u9009\u62e9\u94dc\u7f06\u201cCopper\u201d\uff1a \u70b9\u9009\u6210\u529f\u540e\uff0c\u9f20\u6807\u6307\u9488\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u968f\u540e\u5728\u4ea4\u6362\u673a\u548cPC\u4e0a\u5206\u522b\u70b9\u51fb\u5e76\u9009\u62e9\u76f8\u5e94\u7684\u4e92\u8054\u63a5\u53e3\uff0c\u5373\u53ef\u5b9e\u73b0 \u8bbe\u5907\u76f8\u5e94\u7aef\u53e3\u4e4b\u95f4\u7684\u8fde\u7ebf\uff1a \u5982\u6b64\u4e00\u6765\u62d3\u6251\u5c31\u642d\u5efa\u5b8c\u6210\u4e86\uff0c\u73b0\u5728\u70b9\u51fb\u5de5\u5177\u680f\u4e0a\u7684\u542f\u52a8\u6309\u94ae\uff1a \u4e0a\u9762\u7684\u6309\u94ae\u70b9\u51fb\u540e\u4f1a\u5c06\u6240\u6709\u8bbe\u5907\u542f\u52a8\u3002\u5982\u679c\u5b9e\u9a8c\u62d3\u6251\u6bd4\u8f83\u5927\uff0c\u5efa\u8bae\u4e0d\u8981\u4f7f\u7528\u4e0a\u9762\u7684\u542f\u52a8\u6309\u94ae\u96c6\u4f53\u542f\u52a8\u8bbe\u5907\uff0c\u53ef\u4ee5\u5bf9\u8bbe\u5907\u8fdb\u884c\u9010\u53f0\u542f\u52a8\uff0c\u4e5f\u5c31\u662f\u5206\u522b\u5bf9\u8bbe\u5907\u70b9\u51fb\u53f3\u952e\uff0c\u7136\u540e\u9009\u62e9\u542f\u52a8\u3002\u5f85\u6240\u6709\u8bbe\u5907\u90fd\u542f\u52a8\u5b8c\u6bd5\u540e\u5373\u53ef\u5f00\u59cb\u5b9e\u9a8c\u3002","title":"\u73af\u5883\u642d\u5efa"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_29","text":"\u9996\u5148\u5b8c\u6210\u8def\u7531\u5668\u7684\u914d\u7f6e\uff0c\u53cc\u51fb\u8def\u7531\u5668\u7684\u56fe\u6807\u5373\u53ef\u6253\u5f00\u547d\u4ee4\u884c\u754c\u9762\uff1a \u6b64\u65f6\u6253\u5f00\u7684\u4fbf\u662fAR1\u7684\u547d\u4ee4\u884c\u754c\u9762\uff0c\u5728\u8be5\u547d\u4ee4\u884c\u754c\u9762\u4e2d\u5b8c\u6210\u5bf9\u8def\u7531\u5668\u7684\u57fa\u672c\u914d\u7f6e\uff0c\u5982\u4e0b\uff1a \u63a5\u4e0b\u6765\u5f00\u59cb\u914d\u7f6ePC\uff0c\u53cc\u51fbClient1\uff0c\u5728\u51fa\u73b0\u7684\u914d\u7f6e\u754c\u9762\u4e2d\u5982\u4e0b\u586b\u5199\uff1a \u586b\u5199\u5b8c\u6210\u4e4b\u540e\uff0c\u70b9\u51fb\u5e94\u7528\u5373\u53ef\u3002\u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u8fdb\u884c\u8fde\u901a\u6027\u7684\u6d4b\u8bd5\u4e86\uff0c\u53cc\u51fbPC\u7684\u56fe\u6807\uff0c\u9009\u62e9\u201c\u547d\u4ee4\u884c\u201d \u9009\u9879\u5361\uff0c\u7136\u540e\u5c31\u80fd\u770b\u5230CMD\u754c\u9762\uff0c\u5728CMD\u754c\u9762\u4e2d\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u57fa\u672c\u7684ping\u3001tracert\u7b49\u64cd\u4f5c\uff0c\u4f8b\u5982\u6d4b\u8bd5 PC\u5230\u8def\u7531\u5668\u7684\u8054\u901a\u6027\uff0c\u53ef\u4ee5ping 192.168.1.254\uff1a \u4eceping\u7684\u56de\u663e\u80fd\u770b\u5230\uff0cPC\u73b0\u5728\u80fd\u591fping\u901a\u8def\u7531\u5668\u4e86\uff0c\u5230\u6b64\u5b9e\u9a8c\u5c31\u6210\u529f\u4e86\u3002 eNSP\u80fd\u591f\u4fdd\u5b58\u5b9e\u9a8c\u62d3\u6251\u53ca\u914d\u7f6e\u4ee5\u4fbf\u4e0b\u6b21\u7ee7\u7eed\u8fdb\u884c\u64cd\u4f5c\uff0c\u975e\u5e38\u7684\u65b9\u4fbf\u3002\u5982\u679c\u9700\u8981\u4fdd\u5b58\u5b9e\u9a8c\u73af\u5883\u4ee5\u53ca\u62d3\u6251\u4e2d\u5404\u8bbe\u5907\u7684\u914d\u7f6e\uff0c\u5219\u5728\u5b8c\u6210\u5b9e\u9a8c\u64cd\u4f5c\u540e\uff0c\u5148\u4e3a\u5b9e\u9a8c\u62d3\u6251\u4e2d\u6bcf\u53f0\u8bbe\u5907\uff08PC\u3001Client\u65e0\u9700\u505a\u8fd9\u4e2a\u64cd\u4f5c\uff09\u4f7f\u7528 **save**\u547d\u4ee4\u4fdd\u5b58\u914d\u7f6e\uff08\u6ce8\u610f\uff0c\u52a1\u5fc5\u8981\u5148\u5728\u8bbe\u5907\u7684CLI\u754c\u9762\u4e2d\u4f7f\u7528save\u547d\u4ee4\u4fdd\u5b58\u914d\u7f6e\uff09\uff1a \\<huawei> save \u7136\u540e\u518d\u70b9\u51fbeNSP\u5de5\u5177\u680f\u7684\u201c\u4fdd\u5b58\u201d\u6309\u94ae\u5c06\u62d3\u6251\u53ca\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u5728\u6307\u5b9a\u76ee\u5f55\u5373\u53ef\u3002","title":"\u914d\u7f6e\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_30","text":"\u4e8c\u5c42\u4ea4\u6362\u57fa\u7840 \u4e00\u4e2a\u5178\u578b\u7684\u6570\u636e\u7f51\u7edc\u662f\u7531\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u3001\u9632\u706b\u5899\u3001\u8d1f\u8f7d\u5747\u8861\u5668\u7b49\u7f51\u7edc\u8bbe\u5907\u6784\u6210\u7684\u3002\u5176\u4e2d\u4ea4\u6362\u673a\u4e00\u822c\u6765\u8bf4\u662f\u8ddd\u79bb\u7ec8\u7aef\u8bbe\u5907\uff08PC\u3001\u670d\u52a1\u5668\u7b49\uff09\u6700\u8fd1\u7684\u7f51\u7edc\u8bbe\u5907\uff0c\u4f8b\u5982\u4e0a\u56fe\u4e2d\u9ec4\u8272\u80cc\u666f\u6240\u6807\u6ce8\u7684\u8bbe\u5907\u3002 \u7f51\u7edc\u63a5\u5165\u5c42\uff08\u53ef\u4ee5\u7406\u89e3\u4e3a\u5728\u4e00\u4e2a\u7f51\u7edc\u4e2d\uff0c\u7528\u4e8e\u7ec8\u7aef\u8bbe\u5907\u63a5\u5165\u7684\u903b\u8f91\u5c42\u6b21\uff09\u7684\u4ea4\u6362\u673a\u4e00\u822c\u4e3a\u4e8c\u5c42\u4ea4\u6362\u673a\uff0c\u6240\u8c13\u7684\u4e8c\u5c42\u4ea4\u6362\u673a\u6307\u7684\u662f\u9488\u5bf9\u6570\u636e\u7684\u4e8c\u5c42\u5934\u90e8\uff08\u4ee5\u592a\u7f51\u5e27\u5934\uff09\u4e2d\u7684MAC\u5730\u5740\u8fdb\u884c\u5bfb\u5740\u5e76\u8f6c\u53d1\u6570\u636e\u7684\u4ea4\u6362\u8bbe\u5907\u3002\u4e8c\u5c42\u4ea4\u6362\u673a\u4e0d\u5177\u5907\u8def\u7531\u529f\u80fd\uff0c\u5b83\u5de5\u4f5c\u5728OSI\u4e03\u5c42\u6a21\u578b\u7684\u7b2c\u4e8c\u5c42\uff0c\u56e0\u6b64\u88ab\u79f0\u4e3a\u4e8c\u5c42\u4ea4\u6362\u673a\u3002 \u4e8c\u5c42\u4ea4\u6362\u662f\u4ee5\u592a\u7f51\u6280\u672f\u7684\u4e00\u4e2a\u975e\u5e38\u57fa\u7840\u7684\u6982\u5ff5\u3002 \u90a3\u4e48\u4ec0\u4e48\u662f\u4ee5\u592a\u7f51\u4e8c\u5c42\u4ea4\u6362\uff08Layer 2 Switching\uff09\u5462\uff1f \u4e3a\u4e86\u5c06\u5185\u7f51\u4e2d\u7684\u591a\u53f0PC\u4e92\u8054\u8d77\u6765\uff0c\u4f7f\u5f97PC\u4e4b\u95f4\u80fd\u591f\u4ee5\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u8fdb\u884c\u901a\u4fe1\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u7528\u4e00\u53f0\u4e8c\u5c42\u4ea4\u6362\u673a\u6765\u8fde\u63a5PC\uff0c\u5982\u4e0b\u56fe\uff1a \u5728\u4e0a\u56fe\u4e2d\uff0cPC1\u3001PC2\u3001PC3\u4e0ePC4\u8fde\u63a5\u5728\u540c\u4e00\u53f0\u4ee5\u592a\u7f51\u4e8c\u5c42\u4ea4\u6362\u673a\uff08\u540e\u7eed\u7b80\u79f0\u4e3a\u4e8c\u5c42\u4ea4\u6362\u673a\uff09\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u7b3c\u7edf\u5730\u8bf4\uff0c\u8fde\u63a5\u5728\u8fd9\u53f0\u4ea4\u6362\u673a\u4e0a\u7684PC\u90fd\u5c5e\u4e8e\u540c\u4e00\u4e2aLAN\u3002\u8fd9\u4e9bPC\u90fd\u62e5\u6709\u540c\u4e00\u4e2a\u7f51\u6bb5\u7684IP\u5730\u5740\uff0c\u540c\u65f6\u4e5f\u5904\u4e8e\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\uff08Broadcast Domain\uff09\u4e2d\uff0c\u6240\u8c13\u7684\u4e00\u4e2a\u5e7f\u64ad\u57df\uff0c\u6307\u7684\u662f\u4e00\u4e2a\u5e7f\u64ad\u6570\u636e\u6240\u80fd\u6cdb\u6d2a\u7684\u8303\u56f4\uff0c\u4e3e\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1aPC1\u53d1\u9001\u4e00\u4e2a\u5e7f\u64ad\u6570\u636e\u5e27\uff0c\u4ea4\u6362\u673a\u6536\u5230\u8fd9\u4e2a\u5e7f\u64ad\u6570\u636e\u5e27\u540e\uff0c\u4f1a\u4e3a\u9664\u4e86\u63a5\u6536\u8be5\u6570\u636e\u5e27\u7684\u63a5\u53e3\u4e4b\u5916\u7684\u5176\u4ed6\u6240\u6709\u63a5\u53e3\u90fd\u62f7\u8d1d\u4e00\u4efd\u7136\u540e\u53d1\u9001\u51fa\u53bb\uff0c\u63a5\u5728\u540c\u4e00\u4ea4\u6362\u673a\u4e0a\u7684\u6240\u6709\u7684PC\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u5e7f\u64ad\u6570\u636e\u5e27\u5e76\u4e14\u90fd\u8981\u53bb\u5206\u6790\u5b83\uff08\u5373\u4f7f\u5b83\u4eec\u53ef\u80fd\u5e76\u4e0d\u9700\u8981\u8fd9\u4e2a\u6570\u636e\u5e76\u4e14\u6700\u7ec8\u5c06\u6536\u5230\u7684\u6570\u636e\u5e27\u4e22\u5f03\uff0c\u4f46check\u6570\u636e\u7684\u8fc7\u7a0b\u4ecd\u7136\u4f1a\u6d88\u8017\u8bbe\u5907\u8d44\u6e90\uff09\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c5e\u4e8e\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u3002 \u73b0\u5728\u6765\u5206\u6790\u4e00\u4e0b\uff0cPC1\u53d1\u9001\u4e00\u4e2a\u6570\u636e\u7ed9PC4\u65f6\uff0c\u90fd\u53d1\u751f\u4e86\u4ec0\u4e48\uff0c\u4ee5\u6b64\u6765\u7406\u89e3\u4e8c\u5c42\u4ea4\u6362\u7684\u5de5\u4f5c\u673a\u5236\u3002 PC1\u6784\u9020IP\u6570\u636e\u5305\uff0cIP\u62a5\u6587\u5934\u90e8\u91cc\u7684\u6e90IP\u5730\u5740\u4e3a\u81ea\u5df1\u7684\u7f51\u5361IP\u5730\u5740\uff0c\u76ee\u7684IP\u5730\u5740\u4e3aPC4\u7684IP\u5730\u5740\u3002\u4e0a\u8ff0 IP\u6570\u636e\u5305\u4e3a\u4e86\u80fd\u591f\u5728\u4ee5\u592a\u7f51\u73af\u5883\u4e2d\u4f20\u8f93\uff0c\u8fd8\u9700\u8981\u5c01\u88c5\u4e00\u4e2a\u4ee5\u592a\u7f51\u7684\u5934\u90e8\uff08\u5e27\u5934\uff09\u3002\u5728\u4ee5\u592a\u7f51\u5934\u90e8\u4e2d\u6e90 \uff08Source\uff0cSrc\uff09MAC\u5730\u5740\u4e3a8c00-BB01-0001\uff0c\u76ee\u7684\uff08Destination\uff0cDst\uff09MAC\u5730\u5740\u4e3a8c00-BB01-0004\uff0c \u5982\u4e0b\u56fe\u6240\u793a\u3002 \u4e0b\u56fe\u53ea\u63cf\u8ff0\u4e86\u6570\u636e\u5e27\u7684\u5e27\u5934\uff08\u6e90\u3001\u76ee\u7684MAC\u5730\u5740\u5b57\u6bb5\uff09\uff0c\u5bf9\u4e8eIP\u5305\u5934\u4ee5\u53ca\u6570\u636e\u8f7d\u8377\u90e8\u5206\u4e0d\u5728\u56fe\u4e2d\u63cf\u8ff0\u3002 \u8fd9\u4e2a\u6570\u636e\u5e27\u88ab\u53d1\u9001\u5230\u4e86PC1\u6240\u8fde\u63a5\u7684\u4ea4\u6362\u673a\u4e0a\u3002\u6211\u4eec\u77e5\u9053\u8def\u7531\u5668\u90fd\u7ef4\u62a4\u4e86\u4e00\u5f20\u8def\u7531\u8868\uff0c\u7528\u4e8e\u6307\u5bfc\u6570\u636e\u8f6c\u53d1\uff0c\u800c\u4ea4\u6362\u673a\u5728\u505a\u4e8c\u5c42\u4ea4\u6362\u7684\u65f6\u5019\u4f9d\u636e\u7684\u662f**MAC\u5730\u5740\u8868\uff08MAC Address Table\uff09 \u3002MAC\u5730\u5740\u8868\u4e2d\u5305\u542b\u7684\u8868\u9879\u6307\u793a\u51faMAC\u5730\u5740\u4e0e\u4ea4\u6362\u673a\u67d0\u4e2a\u63a5\u53e3\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u5728\u521d\u59cb\u60c5\u51b5\u4e0b\uff0c\u4ea4\u6362\u673a\u7684MAC\u5730\u5740\u8868\u662f\u7a7a\u7684\u3002\u5f53\u4ea4\u6362\u673a\u6536\u5230PC1\u53d1\u9001\u51fa\u6765\u7684\u8fd9\u4e2a\u6570\u636e\u5e27\u65f6\uff0c\u5b83\u9996\u5148\u5728\u81ea\u5df1\u7684MAC\u5730\u5740\u8868\u4e2d\u67e5\u8be2\u8be5\u5e27\u7684\u76ee\u7684MAC\u5730\u5740\uff0c \u7531\u4e8e\u6b64\u65f6\u5728MAC\u5730\u5740\u8868\u4e2d\uff0c\u5e76\u6ca1\u67098c00-BB01-0004\u8fd9\u4e2a\u5730\u5740\u7684\u6761\u76ee\uff0c\u56e0\u6b64\u4ea4\u6362\u673a\u5c06\u5bf9\u8fd9\u4e2a\u6570\u636e\u5e27\u8fdb\u884c**\u6cdb\u6d2aFlooding \uff0c\u6240\u8c13\u6cdb\u6d2a\u5c31\u662f\u5c06\u8fd9\u4e2a\u6570\u636e\u5e27\u4ece\u9664\u4e86\u6536\u5230\u5b83\u7684\u63a5\u53e3\u4e4b\u5916\u7684\u5176\u4ed6\u6240\u6709\u63a5\u53e3\u90fd\u53d1\u4e00\u4efd\u62f7\u8d1d\u3002\u8fd9\u6837\u505a\u7684\u76ee\u7684\u4e8b\u5b9e\u4e0a\u662f\uff1a\u201c\u54e5\u4e0d\u77e5\u9053\u4f60\u5728\u54ea\uff0c\u54e5\u7d22\u6027\u5c31\u5168\u90fd\u53d1\u4e00\u4efd\uff0c\u78b0\u78b0\u8fd0\u6c14\u201d\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u63a5\u4e0b\u6765\uff0c\u4ea4\u6362\u673a\u5c06\u8be5\u6570\u636e\u5e27\u7684\u6e90MAC\u5730\u5740\uff08\u4e5f\u5c31\u662fPC1\u7684MAC\u5730\u5740\uff09\u5b66\u4e60\u5230MAC\u5730\u5740\u8868\u4e2d\uff0c\u4e0e\u63a5\u53e3 GE0/0/1\u8fdb\u884c\u5173\u8054\u3002\u8fd9\u6837\uff0c\u4ea4\u6362\u673a\u5c31\u5b66\u4e60\u5230\u4e86\u4e00\u4e2aMAC\u5730\u5740\u6761\u76ee\u3002\u901a\u8fc7\u8be5\u6761\u76ee\uff0c\u4ea4\u6362\u673a\u77e5\u90538c00-BB01- 0001\u8fd9\u4e2aMAC\u5730\u5740\uff0c\u8fde\u63a5\u5728GE0/0/1\u63a5\u53e3\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7531\u4e8e\u4ea4\u6362\u673a\u7684\u6cdb\u6d2a\u884c\u4e3a\uff0c\u5bfc\u81f4\u8fde\u63a5\u5728\u8be5\u53f0\u4ea4\u6362\u673a\u4e0a\u7684\u5176\u4ed6PC\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\uff0c\u9664\u4e86PC4\u4e4b\u5916\u7684\u5176\u4ed6PC\u5728\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\u4e4b\u540e\uff0c\u5c06bit\u6d41\u8fd8\u539f\u6210\u5e27\u5e76\u67e5\u770b\u5e27\u5934\u90e8\u7684\u76ee\u7684MAC\uff0c\u53d1\u73b0\u8be5MAC\u4e0e\u672c\u673a\u7684MAC \u5e76\u4e0d\u4e00\u81f4\uff0c\u56e0\u6b64\u5224\u65ad\u8fd9\u4e2a\u6570\u636e\u5e27\u5e76\u975e\u53d1\u9001\u7ed9\u81ea\u5df1\uff0c\u4e8e\u662f\u4e22\u5f03\u4e4b\u3002\u800cPC4\u5728\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\u5e76\u67e5\u770b\u76ee\u7684 MAC\u53d1\u73b0\uff0c\u8fd9\u4e2a\u6570\u636e\u5e27\u7684\u76ee\u7684MAC\u4e0e\u81ea\u5df1\u7684MAC\u662f\u76f8\u540c\u7684\uff0c\u56e0\u6b64\u5224\u65ad\u8fd9\u4e2a\u6570\u636e\u5e27\u662f\u53d1\u9001\u7ed9\u81ea\u5df1\u7684\uff0c\u4e8e\u662f\u8fdb\u884cCRC\u6821\u9a8c\uff08\u6821\u9a8c\u6570\u636e\u5e27\u7684\u5b8c\u6574\u6027\uff09\uff0c\u6821\u9a8c\u6210\u529f\u540e\u5c06\u4ee5\u592a\u7f51\u5934\u90e8\u89e3\u5c01\u88c5\uff0c\u5c06\u5185\u5c42\u7684IP\u6570\u636e\u5c06\u7ed9IP\u534f\u8bae\u6808\u5904\u7406\u3002\u7136\u540e\uff0c\u8fdb\u4e00\u6b65\u67e5\u770bIP\u5934\u90e8\uff0c\u53d1\u73b0IP\u5934\u90e8\u4e2d\u7684\u76ee\u7684IP\u5730\u5740\u5c31\u662f\u672c\u673a\u7684IP\uff0c\u4e8e\u662f\u5c06IP\u5934\u90e8\u89e3\u5c01\u88c5\uff0c \u5c06\u5185\u5c42\u7684\u8f7d\u8377\u4ea4\u7ed9\u4e0a\u5c42\u534f\u8bae\u5904\u7406\u3002\u5982\u6b64\u4e00\u6765PC1\u53d1\u9001\u7ed9PC4\u7684\u6570\u636e\u5c31\u5b8c\u6210\u4e86\u4f20\u8f93\u3002 \u73b0\u5728\uff0cPC4\u8981\u56de\u9001\u6570\u636e\u7ed9PC1\uff0c\u6570\u636e\u7684\u6784\u9020\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u4ea4\u6362\u673a\u5728\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\u540e\uff0c\u9996\u5148\u5728\u81ea\u5df1\u7684MAC\u5730\u5740\u8868\u4e2d\u67e5\u8be2\u76ee\u7684MAC\u5730\u57408c00-BB01-0001\uff0c\u53d1\u73b0\u6709\u4e00\u4e2a\u5339\u914d\u7684\u8868\u9879\uff0c\u800c\u4e14\u8be5\u8868\u9879\u6307\u793a\u8fd9\u4e2aMAC\u5730\u5740\u8fde\u63a5\u5728GE0/0/1\u63a5\u53e3\u4e0a\uff0c\u4e8e\u662f\u4ea4\u6362\u673a\u5c06\u8fd9\u4e2a\u6570\u636e\u5e27\u4ece GE0/0/1\u63a5\u53e3\u53d1\u9001\u51fa\u53bb\u3002\u540c\u65f6\u4ea4\u6362\u673a\u8fd8\u4f1a\u5c06\u6570\u636e\u5e27\u7684\u6e90MAC\u5730\u57408c00-BB01-0004\u5b66\u4e60\u5230\u81ea\u5df1\u7684MAC\u5730\u5740\u8868\u4e2d\uff0c\u5e76\u4e0e\u63a5\u53e3GE0/0/4\u8fdb\u884c\u5173\u8054\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8fd9\u4e2a\u6570\u636e\u5e27\u6700\u7ec8\u88abPC1\u63a5\u6536\u5230\uff0c\u8fd9\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u5728\u4ee5\u592a\u7f51\u73af\u5883\u4e2d\u7684\u6570\u636e\u4ea4\u4e92\u8fc7\u7a0b\u3002 \u5c0f\u7ed3\u4e00\u4e0b\uff1a\u6240\u8c13\u7684\u4ee5\u592a\u7f51\u73af\u5883\u4e2d\u7684\u4e8c\u5c42\u4ea4\u6362\uff0c\u5c31\u662f\u6307\u7684\u5f53\u4e00\u53f0\u4ea4\u6362\u673a\u6536\u5230\u4e00\u4e2a\u6570\u636e\u5e27\u65f6\uff0c\u5206\u6790\u6570\u636e\u5e27\u5934\u90e8\u7684\u76ee\u7684MAC\u5730\u5740\uff0c\u5728MAC\u5730\u5740\u8868\u4e2d\u67e5\u8be2\u8fd9\u4e2aMAC\u5730\u5740\uff0c\u5982\u679c\u6709\u5339\u914d\u9879\uff0c\u5219\u5c06\u6570\u636e\u5e27\u4ece\u8be5\u5339\u914d\u9879\u6240\u5173\u8054\u7684\u63a5\u53e3\u8f6c\u53d1\u51fa\u53bb\uff1b\u5982\u679c\u6ca1\u6709\u5339\u914d\u9879\uff0c\u5219\u5c06\u6570\u636e\u5e27\u8fdb\u884c\u6cdb\u6d2a\u3002\u6240\u4ee5\uff1a\u4ee5\u592a\u7f51\u4e8c\u5c42\u4ea4\u6362\u662f\u57fa\u4e8e\u6570\u636e\u5e27\u7684\u5e27\u5934\u4e2d\u7684\u76ee\u7684 MAC\u5730\u5740\u8fdb\u884c\u67e5\u8be2\u7684\uff0c\u5e76\u4e14\u662f\u5728MAC\u5730\u5740\u8868\u4e2d\u8fdb\u884c\u67e5\u8be2\u3002\u6240\u4ee5\u638c\u63e1MAC\u5730\u5740\u8868\u7684\u67e5\u8be2\u53ca\u9605\u8bfb\u662f\u975e\u5e38\u6709\u5fc5\u8981\u7684\uff0c\u5728\u534e\u4e3a\u4ea4\u6362\u673a\u4e0a\uff0c\u53ef\u4f7f\u7528**display mac-address**\u547d\u4ee4\u53ef\u770b\u5230MAC\u5730\u5740\u8868\u3002MAC\u5730\u5740\u8868\u662f\u4ea4\u6362\u673a\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u7684\u975e\u5e38\u57fa\u7840\u7684\u6570\u636e\u8868\u3002 VLAN \u53ca Trunk VLAN \u7684\u57fa\u672c\u6982\u5ff5 \u5bf9\u4e8e\u4e00\u53f0\u4e8c\u5c42\u4ea4\u6362\u673a\u6765\u8bf4\uff0c\u7f3a\u7701\u65f6\u6574\u673a\u7684\u6240\u6709\u63a5\u53e3\u5c5e\u4e8e\u4e00\u4e2a\u5e7f\u64ad\u57df\u3002\u8fd9\u610f\u5473\u7740\uff0c\u53ea\u8981\u8fde\u63a5\u5230\u8fd9\u4e2a\u4ea4\u6362\u673a\u7684 PC\u90fd\u914d\u7f6e\u5728\u540c\u4e00\u4e2aIP\u5b50\u7f51\u5185\uff0c\u5373\u53ef\u76f4\u63a5\u8fdb\u884c\u4e92\u76f8\u8bbf\u95ee\uff0c\u800c\u4e14\u66f4\u91cd\u8981\u7684\u4e00\u70b9\u662f\uff0c\u5904\u4e8e\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\u7684\u67d0\u4e2a\u8282\u70b9\u53ea\u8981\u53d1\u9001\u4e00\u4e2a\u5e7f\u64ad\u6570\u636e\u5e27\uff0c\u5728\u8fd9\u4e2a\u5e7f\u64ad\u57df\u5185\u7684\u6240\u6709\u5176\u4ed6\u8282\u70b9\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\uff0c\u5e76\u4e14\u8017\u8d39\u8d44\u6e90\u6765\u5904 \u7406\uff08\u5373\u4f7f\u5b83\u53ef\u80fd\u5e76\u4e0d\u9700\u8981\u8fd9\u4e2a\u6570\u636e\u5e27\uff09\u3002\u5f53\u8fd9\u4e2a\u5e7f\u64ad\u57df\u53d8\u5f97\u7279\u522b\u5927\uff08\u4ea4\u6362\u673a\u4e0a\u8fde\u63a5\u7684\u7528\u6237\u6570\u91cf\u7279\u522b\u591a\uff09\u65f6\u7f51\u7edc\u5c31\u975e\u5e38\u6709\u53ef\u80fd\u88ab\u5927\u91cf\u7684\u5e7f\u64ad\u6d88\u8017\u6389\u5927\u91cf\u8d44\u6e90\u3002 \u53e6\u4e00\u65b9\u9762\uff0c\u5b9e\u9645\u7684\u7f51\u7edc\u4e2d\u7ecf\u5e38\u5b58\u5728\u8fd9\u6837\u7684\u9700\u6c42\uff1a\u8fde\u63a5\u5728\u540c\u4e00\u4e2a\u4ea4\u6362\u673a\u4e0a\u7684\u7528\u6237\u6709\u53ef\u80fd\u662f\u4e0d\u540c\u7684\u4e1a\u52a1\u5355\u5143\u6216\u8005\u90e8\u95e8\u7684\uff0c\u7528\u6237\u5e0c\u671b\u5bf9\u5b83\u4eec\u8fdb\u884c\u9694\u79bb\uff0c\u6216\u8005\u4ee5\u72ec\u7acb\u7684\u7f51\u7edc\u5355\u5143\u8fdb\u884c\u7ba1\u7406\u3002 \u57fa\u4e8e\u4e0a\u8ff0\u9700\u6c42\uff0c\u5f15\u5165\u4e86VLAN\u7684\u6982\u5ff5\uff0c\u6240\u8c13VLAN\uff0c\u4e5f\u5373Virtual LAN\uff0c\u662f\u4e00\u4e2a\u865a\u62df\u7684\u3001\u903b\u8f91\u7684LAN\uff0c\u901a\u8fc7VLAN \u6280\u672f\uff0c\u53ef\u4ee5\u5728\u4ea4\u6362\u673a\u4e0a\uff0c\u6839\u636e\u63a5\u53e3\u7b49\u4fe1\u606f\u8fdb\u884cVLAN\u7684\u5212\u5206\uff0c\u4ece\u800c\u5b9e\u73b0\u8bbe\u5907\u7684\u9694\u79bb\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u7528\u6237\u5728\u4ea4\u6362\u673a\u4e0a\u521b\u5efa\u4e862\u4e2aVLAN\uff0c\u7136\u540e\u5c06\u76f8\u5e94\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u6307\u5b9a\u7684VLAN\u4e2d\u2014\u2014\u5c06\u63a5\u53e31\u30012\u6dfb\u52a0\u5230\u4e86VLAN10\uff0c\u5c06\u63a5\u53e323\u300124\u6dfb\u52a0\u5230\u4e86VLAN20\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u63a5\u53e31\u30012\u6240\u8fde\u63a5\u7684PC\u5c31\u52a0\u5165\u4e86VLAN10\uff0c\u5b83\u4fe9\u5904\u4e8e\u540c\u4e00\u4e2aLAN\u3001\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\uff0c\u8fd9\u4e9bPC\u53ea\u8981\u914d\u7f6e\u540c\u4e00\u4e2a\u7f51\u6bb5\u7684IP\u5730\u5740\uff0c\u5c31\u80fd\u591f\u76f4\u63a5\u8fdb\u884c\u4e92\u8bbf\u4e86\uff08\u6211\u4eec\u5c06\u8fd9\u79cd\u901a\u4fe1\u79f0\u4e3a\u4e8c\u5c42\u4e92\u901a\uff09\u3002\u800c\u63a5\u53e323\u300124\u5904\u4e8eVLAN20\uff0c\u5373\u5904\u4e8e\u53e6\u4e00\u4e2aLAN\u3001\u53e6\u4e00\u4e2a\u5e7f\u64ad\u57df\u3002\u5c5e\u4e8eVLAN20 \u7684PC\u4e4b\u95f4\u80fd\u591f\u76f4\u63a5\u8fdb\u884c\u4e92\u8bbf\u3002\u4e0d\u540c\u7684VLAN\u4e4b\u95f4\uff0c\u7528\u6237\u662f\u88ab\u9694\u79bb\u7684\uff08\u9664\u975e\u501f\u52a9\u8def\u7531\u8bbe\u5907\uff0c\u6b64\u65f6\uff0c\u8fd9\u79cd\u8fd9\u79cd\u901a\u4fe1\u884c\u4e3a\u5c31\u662f\u4e09\u5c42\u901a\u4fe1\u4e86\uff09\uff0c\u5f53\u7136\uff0c\u4e00\u4e2aVLAN\u5185\u7684\u5e7f\u64ad\u6570\u636e\u5e27\u5e76\u4e0d\u4f1a\u88ab\u6cdb\u6d2a\u5230\u53e6\u4e00\u4e2aVLAN\uff0c\u56e0\u4e3a\u5b83\u4eec\u5c5e\u4e8e\u4e0d\u540c\u7684\u5e7f\u64ad\u57df\u3002 \u6709\u4e86VLAN\u6280\u672f\uff0c\u7f51\u7edc\u8bbe\u8ba1\u5c06\u66f4\u52a0\u7075\u6d3b\u3002VLAN\u662f\u4e00\u4e2a\u865a\u62df\u7684LAN\uff0c\u4e0d\u53d7\u5730\u7406\u73af\u5883\u7684\u9650\u5236\u3002\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u7684\u4e1a\u52a1\u9700\u8981\uff0c\u7075\u6d3b\u5730\u8fdb\u884cVLAN\u7684\u89c4\u5212\uff0c\u4f8b\u5982\u5c06\u4e0d\u540c\u7684\u4e1a\u52a1\u90e8\u95e8\u89c4\u5212\u5230\u4e0d\u540c\u7684VLAN\u4e2d\u3002\u53e6\u5916\uff0cVLAN\u8fd8\u53ef\u4ee5\u8de8\u4ea4\u6362\u673a\u5b9e\u73b0\uff0c\u56e0\u6b64VLAN\u7684\u6210\u5458\uff0c\u4f8b\u5982\u4e1a\u52a1PC\uff0c\u6240\u5904\u7684\u4f4d\u7f6e\u5c31\u975e\u5e38\u7075\u6d3b\u4e86\u3002","title":"\u4ea4\u6362\u57fa\u7840"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_31","text":"\u4e00\u4e2aVLAN\u4e2d\u6240\u6709\u8bbe\u5907\u90fd\u5728\u540c\u4e00\u5e7f\u64ad\u57df\u5185\uff0c\u4e0d\u540c\u7684VLAN\u4e3a\u4e0d\u540c\u7684\u5e7f\u64ad\u57df\uff1b \u76f8\u540c\u7684VLAN\u5185\u7684\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u901a\u4fe1\uff0c\u8fd9\u79cd\u901a\u4fe1\u88ab\u79f0\u4e3a\u4e8c\u5c42\u901a\u4fe1\uff0c\u800c\u4e0d\u540c\u7684VLAN\u4e4b\u95f4\u4e92\u76f8\u9694\u79bb\uff0c \u5e7f\u64ad\u6570\u636e\u4e0d\u80fd\u8de8\u8d8aVLAN\u4f20\u64ad\uff0c\u56e0\u6b64\u4e0d\u540cVLAN\u4e4b\u95f4\u7684\u8bbe\u5907\u4e00\u822c\u65e0\u6cd5\u76f4\u63a5\u4e92\u8bbf\uff0c\u9700\u901a\u8fc7\u5177\u5907\u4e09\u5c42\u8def\u7531\u529f\u80fd\u7684\u8bbe\u5907\uff08\u4f8b\u5982\u8def\u7531\u5668\u3001\u4e09\u5c42\u4ea4\u6362\u673a\u6216\u9632\u706b\u5899\u7b49\uff09\u5b9e\u73b0\u76f8\u4e92\u901a\u4fe1\uff1b \u4e00\u4e2aVLAN\u4e00\u822c\u4f7f\u7528\u4e00\u4e2a\u903b\u8f91\u5b50\u7f51\uff08\u6216\u8005\u8bf4\u4e00\u4e2aIP\u5b50\u7f51\uff09\uff1b VLAN\u4e2d\u6210\u5458\u591a\u57fa\u4e8e\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u5206\u914d\uff0c\u6b64\u65f6\u5212\u5206VLAN\u5c31\u662f\u5c06\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u5206\u914d\u5230\u7279\u5b9a\u7684VLAN\u4e2d\uff1b\u53e6\u5916\uff0c\u534e\u4e3a\u4ea4\u6362\u673a\u4e5f\u652f\u6301\u57fa\u4e8eIP\u5730\u5740\u5212\u5206VLAN\u7b49\u5176\u4ed6VLAN\u5212\u5206\u65b9\u5f0f\u3002 VLAN\u5de5\u4f5c\u4e8eOSI\u53c2\u8003\u6a21\u578b\u7684\u7b2c\u4e8c\u5c42\uff1b VLAN\u662f\u4ea4\u6362\u673a\u7684\u4e00\u4e2a\u975e\u5e38\u57fa\u672c\u7684\u5de5\u4f5c\u673a\u5236\u3002 Access \u7c7b\u578b\u7684\u63a5\u53e3 \u4ea4\u6362\u673a\u7684\u7269\u7406\u63a5\u53e3\u7f3a\u7701\u90fd\u662f\u4e8c\u5c42\u63a5\u53e3\uff0c\u6240\u8c13\u7684\u4e8c\u5c42\u63a5\u53e3\uff0c\u7b80\u5355\u7684\u8bf4\u5c31\u662f\u4e0d\u80fd\u76f4\u63a5\u914d\u7f6eIP\u5730\u5740\u3001\u4e0d\u80fd\u9694\u7edd\u5e7f\u64ad\u3001\u65e0\u6cd5\u76f4\u63a5\u5904\u7406IP\u6570\u636e\u5305\u4e09\u5c42\u5934\u90e8\u7684\u63a5\u53e3\uff0c\u8fd9\u79cd\u63a5\u53e3\u53ea\u80fd\u6839\u636e\u6570\u636e\u5e27\u7684\u5934\u90e8\u4fe1\u606f\u8fdb\u884c\u5e27\u5904\u7406\u3002\u5728\u534e\u4e3a\u7684\u4ea4\u6362\u673a\u4e0a\uff0c\u4e8c\u5c42\u63a5\u53e3\u7684\u94fe\u8def\u7c7b\u578b\uff08Link type\uff09\u6709\uff1aAccess\u3001Trunk\u548chybrid\u4e09\u79cd\uff0c\u4ee5S9300\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u5176\u63a5\u53e3\u7f3a\u7701\u4e3ahybrid\u7c7b\u578b\u3002 VLAN\u662f\u4e8c\u5c42\u4ea4\u6362\u673a\u7684\u4e00\u4e2a\u5e95\u5c42\u6280\u672f\uff0c\u4e8c\u5c42\u4ea4\u6362\u673a\u5de5\u4f5c\u7684\u65b9\u65b9\u9762\u9762\u90fd\u53ef\u80fd\u4e0eVLAN\u6709\u5173\u7cfb\uff0c\u5305\u62ec\u63a5\u53e3\u7684\u5de5\u4f5c\u3002\u6211\u4eec\u9700\u8981\u6839\u636e\u5b9e\u9645\u9700\u8981\uff0c\u5c06\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u8bbe\u7f6e\u4e3a\u9002\u5f53\u7684\u7c7b\u578b\u3002 Access\u7c7b\u578b\u7684\u63a5\u53e3\u53ea\u80fd\u52a0\u5165\u4e00\u4e2aVLAN\uff0c\u8fd9\u79cd\u7c7b\u578b\u7684\u63a5\u53e3\u4e00\u822c\u7528\u4e8e\u8fde\u63a5PC\u3001\u670d\u52a1\u5668\u7b49\u7ec8\u7aef\u8bbe\u5907\uff0c\u6216\u8005\u8fde\u63a5\u8def\u7531\u5668\u3001\u9632\u706b\u5899\u7b49\u8bbe\u5907\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002Access\u63a5\u53e3\u53ea\u80fd\u53d1\u9001\u4e0d\u5e26\u6807\u8bb0\u7684\u6570\u636e\u5e27\uff08\u4e5f\u5c31\u662funtagged\u5e27\uff09\uff0c\u901a\u5e38\u4e5f\u53ea\u63a5\u6536untagged\u5e27\u3002 Trunk \u7c7b\u578b\u7684\u63a5\u53e3 \u5728\u4e00\u53f0\u4ea4\u6362\u673a\u4e0a\uff0c\u53ef\u4ee5\u521b\u5efa\u591a\u4e2aVLAN\u4ee5\u4fbf\u5bf9\u5e94\u4e0d\u540c\u7684\u4e1a\u52a1\uff0c\u7136\u540e\u57fa\u4e8e\u4ea4\u6362\u673a\u7684\u63a5\u53e3\uff0c\u5c06\u4e0d\u540c\u7684\u63a5\u53e3\u5212\u5206\u7ed9\u4e0d\u540c\u7684VLAN\u3002 \u5982\u679c\u5206\u522b\u5728\u4e24\u53f0\u4ea4\u6362\u673a\u4e0a\u90e8\u7f72\u4e86VLAN\uff0c\u5e76\u4e14\u505a\u4e86\u7edf\u4e00\u6027\u7684VLAN\u89c4\u5212\uff0c\u8fd9\u65f6\u4e24\u53f0\u4ea4\u6362\u673a\u5bf9\u63a5\u7684\u65f6\u5019\u5c31\u9700\u8981\u8c28\u614e\uff0c\u56e0\u4e3a\u8fd9\u4e24\u53f0\u4ea4\u6362\u673a\u4e4b\u95f4\u4e92\u8054\u7684\u94fe\u8def\u9700\u8981\u627f\u8f7d\u591a\u4e2aVLAN\u7684\u6570\u636e\uff0c\u5982\u679c\u67d0\u4e2a\u7279\u5b9aVLAN\u7684\u6570\u636e\u4ece\u4e00\u53f0\u4ea4\u6362\u673a\u53d1\u9001\u51fa\u6765\uff0c\u7ecf\u8fc7\u4ea4\u6362\u673a\u4e4b\u95f4\u7684\u94fe\u8def\u5230\u8fbe\u53e6\u4e00\u53f0\u4ea4\u6362\u673a\uff0c\u540e\u8005\u5982\u4f55\u5224\u5b9a\u8fd9\u4e2a\u6570\u636e\u5230\u5e95\u5e94\u8be5\u653e\u5165\u54ea\u4e00\u4e2a VLAN\u5462\uff1f\u8fd9\u91cc\u5c31\u9700\u8981\u4e00\u79cd\u201c\u6807\u8bb0\u201d\u624b\u6bb5\u3002\u5728\u5c06\u6570\u636e\u9001\u51fa\u8fd9\u4e2a\u4e92\u8054\u63a5\u53e3\u524d\uff0c\u7ed9\u6570\u636e\u505a\u4e0a\u76f8\u5e94\u7684\u6807\u8bb0\uff08Tag\uff09 \u6765\u6807\u8bb0\u8fd9\u4e2a\u6570\u636e\u662f\u4ece\u54ea\u4e00\u4e2aVLAN\u8dd1\u51fa\u6765\u7684\uff08\u5982\u4e0a\u56fe\u6240\u793a\uff09\uff0c\u8fd9\u6837\uff0c\u5bf9\u7aef\u4ea4\u6362\u673a\u5728\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u4e4b\u540e\uff0c\u5c31\u80fd\u591f\u6839\u636e\u524d\u8005\u5bf9\u6570\u636e\u6240\u505a\u7684\u6807\u8bb0\u6765\u8bc6\u522b\u6570\u636e\u7a76\u7adf\u662f\u5c5e\u4e8e\u54ea\u4e00\u4e2aVLAN\u7684\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u79f0\u4e24\u53f0\u4ea4\u6362\u673a\u4e4b\u95f4\u7684\u4e92\u8054\u94fe\u8def\u4e3a\u4e00\u6bb5\u5e72\u9053\u94fe\u8def\u3002\u8fd9\u91cc\u63d0\u5230\u7684\u201c\u6807\u8bb0\u201d\u624b\u6bb5\uff0c\u5e38\u88ab\u79f0\u4e3a\u5e72\u9053\u534f\u8bae\uff0c\u4e00\u4e2a\u4f17\u6240\u5468\u77e5\u7684\u516c\u6709\u6807\u51c6\u662f802.1q\uff0c \u6216\u8005\u53ebDot1q\uff0c\u7531\u4e8e\u662f\u516c\u6709\u6807\u51c6\uff0c\u56e0\u6b64\u6240\u6709\u7684\u4ea4\u6362\u673a\u5382\u5546\u90fd\u9075\u5faa\u8be5\u6807\u51c6\u3002 Dot1q\u9488\u5bf9\u6570\u636e\u5e27\u7684\u5904\u7406\u65b9\u5f0f\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5728\u539f\u59cb\u7684\u4ee5\u592a\u7f51\u6570\u636e\u5e27\u5934\u4e2d\u63d2\u5165\u4e00\u4e2aDot1q\u7684\u5b57\u6bb5\uff0c\u540c\u65f6\u91cd\u65b0\u505a CRC\u6821\u9a8c\u3002\u5728\u63d2\u5165\u7684Dot1q\u5b57\u6bb5\u4e2d\uff0c\u5c31\u6709VLAN-ID\u5b57\u6bb5\u7528\u6765\u6307\u793a\u8fd9\u4e2a\u6570\u636e\u5e27\u6240\u5c5e\u7684VLAN\uff0c\u6211\u4eec\u5c06\u6ca1\u6709\u643a\u5e26Dot1q Tag\u7684\u6570\u636e\u5e27\u79f0\u4e3a\u539f\u59cb\u4ee5\u592a\u7f51\u6570\u636e\u5e27\u6216\u65e0\u6807\u8bb0\u5e27\uff08Untagged Frame\uff09\uff0c\u5c06\u643a\u5e26\u4e86Dot1q Tag\u5b57\u6bb5\u7684\u6570\u636e\u5e27\u79f0\u4e3a\u6807\u8bb0\u5e27\uff08Tagged Frame\uff09\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u63a5\u53e3\u7c7b\u578b\u5c0f\u7ed3","title":"\u4e0b\u9762\u505a\u4e00\u4e2a\u5c0f\u7ed3\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_32","text":"\u534e\u4e3a\u4ea4\u6362\u673a\u7684\u4e8c\u5c42\u63a5\u53e3\u652f\u6301\u4e09\u79cd\u94fe\u8def\u7c7b\u578b\uff08Link type\uff09\uff0c\u5f53\u63a5\u53e3\u5de5\u4f5c\u5728\u4e8c\u5c42\u6a21\u5f0f\u65f6\uff0c\u5fc5\u987b\u4f7f\u7528\u8fd9\u4e09\u79cd\u7c7b\u578b\u4e2d\u7684\u4e00\u79cd\uff1a","title":"\u4ee5\u592a\u7f51\u4ea4\u6362\u673a\u7684\u4e8c\u5c42\u63a5\u53e3\u7c7b\u578b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#access","text":"Access\u63a5\u53e3\u5e38\u7528\u4e8e\u8fde\u63a5PC\u3001\u670d\u52a1\u5668\u6216\u5176\u4ed6\u7ec8\u7aef\uff0c\u6216\u8def\u7531\u5668\u7b49\u8bbe\u5907\u3002Access\u63a5\u53e3\u53ea\u80fd\u52a0\u5165\u4e00\u4e2aVLAN\uff0c \u4e00\u65e6\u52a0\u5165\u7279\u5b9aVLAN\u540e\uff0c\u8be5\u63a5\u53e3\u6240\u8fde\u63a5\u7684\u8bbe\u5907\u4e5f\u5c31\u52a0\u5165\u4e86\u8be5VLAN\u3002","title":"Access\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#trunk","text":"Trunk\u63a5\u53e3\u4e00\u822c\u7528\u4e8e\u4ea4\u6362\u673a\u4e4b\u95f4\u8fde\u63a5\u7684\u7aef\u53e3\uff0ctrunk\u53e3\u53ef\u4ee5\u52a0\u5165\u591a\u4e2aVLAN\uff0c\u53ef\u4ee5\u63a5\u6536\u548c\u53d1\u9001\u591a\u4e2a VLAN\u7684Tagged\u5e27\u3002\u5f53\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u8fde\u63a5\u7684\u5bf9\u7aef\u8bbe\u5907\uff08\u4f8b\u5982\u8def\u7531\u5668\u6216\u9632\u706b\u5899\uff09\u7684\u63a5\u53e3\u90e8\u7f72\u4e86\u4ee5\u592a\u7f51\u5b50\u63a5\u53e3\uff0c\u90a3\u4e48\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\uff0c\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u4e5f\u9700\u914d\u7f6e\u4e3atrunk\u7c7b\u578b\uff08\u6216\u8005Hybrid\u7c7b\u578b\uff09\u3002","title":"Trunk\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#hybrid","text":"\u53ef\u4ee5\u7528\u4e8e\u4ea4\u6362\u673a\u4e4b\u95f4\u8fde\u63a5\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u63a5\u7528\u6237\u7684\u8ba1\u7b97\u673a\uff0chybrid\u53e3\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2aVLAN\uff0c\u53ef\u4ee5\u63a5\u6536\u548c\u53d1\u9001\u591a\u4e2aVLAN\u7684Tagged\u5e27\u3002\u53ef\u6839\u636e\u9700\u6c42\u7075\u6d3b\u8bbe\u7f6e\u7279\u5b9aVLAN\u7684\u6570\u636e\u5e27\u5728\u53d1\u9001\u65f6\u662f\u5426\u6253\u6807\u8bb0 \uff08Trunk\u63a5\u53e3\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2aVLAN\u5728\u53d1\u9001\u6570\u636e\u5e27\u65f6\u4e0d\u6253\u6807\u8bb0\uff0c\u800chybrid\u63a5\u53e3\u5219\u53ef\u8bbe\u7f6e\u591a\u4e2aVLAN\u5728\u53d1\u9001\u6570\u636e\u5e27\u65f6\u4e0d\u6253\u6807\u8bb0\uff09\u3002 \u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u770b\u770b\u5404\u79cd\u7c7b\u578b\u7684\u63a5\u53e3\u5728\u6536\u3001\u53d1\u6570\u636e\u5e27\u65f6\u7684\u7279\u70b9\u3002","title":"Hybrid\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#access_1","text":"\u5982\u679c\u8be5\u5e27\u662fUntagged\u5e27\uff0c\u5219\u63a5\u6536\u5e27\u5e76\u6253\u4e0a\u63a5\u53e3\u7684PVID\uff08\u4e5f\u5c31\u662f\u8be5Access\u63a5\u53e3\u7684default vlan\u6216\u7f3a\u7701VLAN\uff09\uff1b \u5982\u679c\u8be5\u5e27\u662fTagged\u5e27\uff0c\u5219\u5f53\u5176VLAN-ID\u4e0e\u63a5\u53e3PVID\u76f8\u540c\u65f6\uff0c\u63a5\u6536\u8be5\u5e27\uff0c\u5426\u5219\u4e22\u5f03\u3002","title":"Access\u53e3\u63a5\u6536\u5e27"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#access_2","text":"\u5728\u53d1\u9001\u6570\u636e\u5e27\u65f6\uff0c\u5265\u79bb\u5176Tag\uff0c\u53d1\u51fa\u7684\u5e27\u4e3a\u539f\u59cb\u4ee5\u592a\u7f51\u5e27\uff0c\u4e5f\u5c31\u662fUntagged\u5e27\u3002 \u7531\u4e8eAccess\u63a5\u53e3\u901a\u5e38\u7528\u4e8e\u8fde\u63a5\u7ec8\u7aef\u8bbe\u5907\uff0c\u800c\u7ec8\u7aef\u8bbe\u5907\u901a\u5e38\u662f\u53ea\u80fd\u591f\u8bc6\u522bUntagged\u5e27\u7684\uff0c\u56e0\u6b64Access\u63a5\u53e3\u5728\u53d1\u9001\u6570\u636e\u5e27\u65f6\uff0c\u59cb\u7ec8\u662f\u4e0d\u4f1a\u643a\u5e26\u6807\u8bb0\u7684\u3002","title":"Access\u53e3\u53d1\u9001\u5e27"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#trunk_1","text":"\u82e5\u6536\u5230\u7684\u6570\u636e\u5e27\u662fUntagged\u5e27\uff0c\u5219\u4e3a\u6570\u636e\u5e27\u6253\u4e0a\u63a5\u53e3PVID\u7684\u6807\u8bb0\uff0c\u7136\u540e\uff0c\u5982\u679cPVID\u5728\u63a5\u53e3\u5141\u8bb8\u901a\u884c \uff08Allow-pass\uff09\u7684VLAN\u5217\u8868\u91cc\uff0c\u5219\u63a5\u6536\u8be5\u5e27\uff0c\u82e5PVID\u4e0d\u5728\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u91cc\uff0c\u5219\u4e22\u5f03\u3002\u7f3a\u7701\u65f6\uff0cTrunk\u63a5\u53e3\u7684PVID\u4e3a1\uff0c\u800c\u4e14VLAN1\u7f3a\u7701\u5df2\u7ecf\u5728\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u4e2d\u3002 \u82e5\u6536\u5230\u7684\u6570\u636e\u5e27\u662fTagged\u5e27\uff0c\u4e14\u5176VLAN-ID\u5728\u63a5\u53e3\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u91cc\uff0c\u5219\u63a5\u6536\u8be5\u5e27\u3002\u5426\u5219\u4e22\u5f03\u3002","title":"Trunk\u53e3\u63a5\u6536\u5e27"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#trunk_2","text":"\u82e5\u8be5\u5e27\u7684VLAN-ID\u4e0e\u63a5\u53e3PVID\u76f8\u540c\uff0c\u4e14\u8be5VLAN\u5728\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u4e2d\uff0c\u5219\u53bb\u6389Tag\uff0c\u53d1\u9001\u6570\u636e\u5e27\u3002\u82e5\u8be5\u5e27\u7684VLAN-ID\u4e0e\u63a5\u53e3PVID\u4e0d\u540c\uff0c\u4e14\u8be5VLAN\u5728\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u4e2d\uff0c\u5219\u4fdd\u6301\u539f\u6709Tag\uff0c\u53d1\u9001\u8be5 Tagged\u5e27\uff0c\u800c\u5982\u679c\u6570\u636e\u5e27\u7684VLAN-ID\u4e0d\u5728\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u4e2d\uff0c\u5219\u7981\u6b62\u4ece\u8be5\u63a5\u53e3\u53d1\u51fa\u3002","title":"Trunk\u53e3\u53d1\u9001\u5e27"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#hybrid_1","text":"\u82e5\u6570\u636e\u5e27\u662fUntagged\u5e27\uff0c\u5219\u5c06\u5176\u6253\u4e0aPVID\u7684Tag\uff0c\u7136\u540e\uff0c\u82e5PVID\u5728\u63a5\u53e3\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u91cc\u5219\u63a5\u6536\uff0c\u5426\u5219\u4e22\u5f03\u3002 \u82e5\u6570\u636e\u5e27\u662fTagged\u5e27\uff0c\u4e14\u5176VLAN-ID\u5728\u63a5\u53e3\u5141\u8bb8\u901a\u884c\u7684VLAN\u5217\u8868\u91cc\u5219\u63a5\u6536\u8be5\u5e27\uff0c\u5426\u5219\u4e22\u5f03\u3002","title":"Hybrid\u53e3\u63a5\u6536\u5e27"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#hybrid_2","text":"\u5f53\u8be5\u5e27\u7684VLAN-ID\u662f\u63a5\u53e3\u5141\u8bb8\u901a\u884c\u7684VLAN\u65f6\uff0c\u53d1\u9001\u8be5\u5e27\uff0c\u6b64\u65f6\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u8bbe\u7f6e\u53d1\u9001\u65f6\u662f\u5426\u643a\u5e26Tag\u3002 VLAN \u53ca Trunk \u7684\u57fa\u7840\u914d\u7f6e","title":"Hybrid\u53e3\u53d1\u9001\u5e27"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vlan","text":"\u5728\u4ea4\u6362\u673a\u4e0a\u521b\u5efaVLAN10\u5e76\u8fdb\u5165VLAN10\u7684\u914d\u7f6e\u89c6\u56fe\uff1a \uff08\u53ef\u9009\uff09\u5728\u7279\u5b9a\u7684VLAN\u89c6\u56fe\u4e0b\u6dfb\u52a0VLAN\u63cf\u8ff0\uff1a [Quidway-vlan10] description TechVLAN \u5c06\u7279\u5b9a\u7684\u63a5\u53e3\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\uff0c\u5e76\u52a0\u5165\u7279\u5b9aVLAN\u3002\u4e0b\u9762\u4ee5\u5c06GE0/0/1\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\u5e76\u52a0\u5165 VLAN10\u4e3a\u4f8b\uff1a \u5c06\u7279\u5b9a\u63a5\u53e3\u914d\u7f6e\u4e3atrunk\u7c7b\u578b\uff0c\u7136\u540e\u914d\u7f6etrunk\u63a5\u53e3\u5141\u8bb8\u901a\u884c\u7684VLAN\uff1a \uff08\u53ef\u9009\uff09\u914d\u7f6eTrunk\u63a5\u53e3\u7684PVID\u3002PVID\u6240\u5bf9\u5e94VLAN\u7684\u6d41\u91cf\u4ecetrunk\u63a5\u53e3\u53d1\u9001\u51fa\u53bb\u65f6\u4e0d\u4f1a\u6253Tag\uff08\u4e5f\u5c31\u662f\u4ee5Untagged\u5e27\u53d1\u9001\uff09\uff0c\u53e6\u5916\uff0c\u5982\u679cTrunk\u63a5\u53e3\u6536\u5230Untagged\u5e27\uff0c\u4e5f\u8ba4\u4e3a\u662f\u5c5e\u4e8ePVID\u6240\u5bf9\u5e94\u7684VLAN\u3002\u7f3a\u7701\u65f6PVID\u662f1\u3002\u4ee5\u4e0b\u5c06GE0/0/24\u63a5\u53e3\uff08\u8be5\u63a5\u53e3\u5df2\u7ecf\u88ab\u914d\u7f6e\u4e3aTrunk\u7c7b\u578b\uff09\u7684PVID\u4fee\u6539\u4e3a99\uff1a [Quidway-gigabitEthernet0/0/24] port trunk pvid vlan 99","title":"VLAN\u76f8\u5173\u7684\u57fa\u7840\u914d\u7f6e\u547d\u4ee4"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vlan_1","text":"\u5728\u4ea4\u6362\u673a\u4e0a\u521b\u5efaVLAN10\u53caVLAN20\uff0c\u5c06PC1\uff08\u6240\u5728\u63a5\u53e3\uff09\u5212\u5165VLAN10\uff0c\u5c06PC2\u5212\u5165VLAN20\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5728SW1\u4e0a\u53ef\u8fdb\u884c\u76f8\u5e94\u7684\u67e5\u770b\uff1a \u53e6\u5916\uff0c\u4f7f\u7528**display port vlan**\u547d\u4ee4\u4e5f\u80fd\u67e5\u770b\u6bcf\u4e2a\u63a5\u53e3\u7684link type\u4ee5\u53ca\u6240\u52a0\u5165\u7684VLAN\u7b49\u4fe1\u606f\u3002","title":"VLAN\u57fa\u7840\u914d\u7f6e\u793a\u4f8b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vlantrunk","text":"\u5728SW1\u3001SW2\u4e0a\u521b\u5efaVLAN10\u53caVLAN20\uff0c\u5c06\u4ea4\u6362\u673a\u8fde\u63a5PC\u7684\u63a5\u53e3\u914d\u7f6e\u4e3aAccess\u7c7b\u578b\u5e76\u6dfb\u52a0\u5230\u5982\u56fe\u6240\u793a\u7684VLAN\u3002\u7136\u540e\uff0c\u5c06\u4e24\u53f0\u4ea4\u6362\u673a\u4e92\u8054\u7684\u63a5\u53e3\u914d\u7f6e\u4e3aTrunk\u7c7b\u578b\uff0c\u5e76\u653e\u901a\u76f8\u5e94\u7684VLAN\uff0c\u4f7f\u5f97\u76f8\u540cVLAN \u5185\u7684PC\u80fd\u591f\u76f4\u63a5\u901a\u4fe1\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u540c\u4e00\u4e2aVLAN\u5185\u7684\u7528\u6237\u5c31\u80fd\u591f\u4e92\u76f8\u901a\u4fe1\u4e86\uff0c\u4f8b\u5982PC1\u53ef\u4ee5ping\u901aPC3\uff0c\u800cPC2\u4e5f\u80fd\u591f ping\u901aPC4\u3002\u4f46\u662f\u4e0d\u540c\u7684VLAN\u4e4b\u95f4\u662f\u65e0\u6cd5\u4e92\u8bbf\u7684\u3002 Hybrid \u63a5\u53e3\u7684\u914d\u7f6e Hybrid\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u4e8c\u5c42\u63a5\u53e3\u7c7b\u578b\u3002\u4e0etrunk\u7c7b\u578b\u7684\u63a5\u53e3\u7c7b\u4f3c\uff0chybrid\u7c7b\u578b\u7684\u63a5\u53e3\u4e5f\u80fd\u591f\u627f\u8f7d\u591a\u4e2aVLAN\u7684\u6570\u636e\u5e27\uff0c\u800c\u4e14\u5b83\u80fd\u591f\u7075\u6d3b\u7684\u8bbe\u7f6e\u63a5\u53e3\u5728\u53d1\u9001\u6570\u636e\u5e27\u65f6\uff0c\u662f\u5426\u643a\u5e26tag\u3002\u53e6\u4e00\u65b9\u9762\uff0chybrid\u7c7b\u578b\u7684\u63a5\u53e3\u8fd8\u80fd\u7528\u4e8e\u90e8\u7f72\u57fa\u4e8eIP\u5730\u5740\u7684VLAN\u5212\u5206\u3002\u4e0b\u9762\u6211\u4eec\u5c06\u9488\u5bf9\u51e0\u79cd\u4f7f\u7528\u573a\u666f\uff0c\u8bb2\u8bb2hrbrid\u63a5\u53e3\u7684\u914d\u7f6e\u3002","title":"VLAN\u53caTrunk\u57fa\u7840\u5b9e\u9a8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#hybridpc","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cPC1\u8fde\u63a5\u5728SW1\u7684GE0/0/1\u63a5\u53e3\u4e0a\uff0c\u73b0\u5728\u5c06SW1\u7684GE0/0/1\u63a5\u53e3\u505a\u5982\u4e0b\u914d\u7f6e\uff1a \u4ee5\u4e0a\u547d\u4ee4\u5c06GE0/0/1\u63a5\u53e3\u914d\u7f6e\u4e3ahybrid\u7c7b\u578b\uff0c\u4ee5S5300\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u63a5\u53e3\u7f3a\u7701\u5373\u4e3a\u8be5\u7c7b\u578b\uff0c\u800c\u4e14\u7f3a\u7701\u5c06 VLAN1\u8bbe\u7f6e\u4e3aPVID\uff08\u7f3a\u7701VLAN\uff09\uff0c\u5e76\u4e14\u63a5\u53e3\u5df2\u7ecf\u653e\u901aVLAN1\uff08\u7f3a\u7701\u5c31\u914d\u7f6e\u4e86**port hybrid untagged vlan 1**\uff09\u3002\u56e0\u6b64\u5728\u8fd9\u4e2a\u573a\u666f\u4e2d\uff0c\u5982\u679c\u4e3aSW1\u7684Vlanif1\u914d\u7f6e\u4e00\u4e2a192.168.10.0/24\u7f51\u6bb5\u7684IP\u5730\u5740\uff0c\u5219PC1 \u4e0eSW1\u5373\u53ef\u5b9e\u73b0\u4e92\u901a\u3002\u6b64\u65f6PC1\u88ab\u8ba4\u4e3a\u5c5e\u4e8eVLAN1\u3002 \u5982\u679c\u6211\u4eec\u671f\u671b\u5c06PC1\u89c4\u5212\u5728VLAN10\u4e2d\uff0c\u90a3\u4e48\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a \u4e0a\u9762\u914d\u7f6e\u4e2d**port hybrid pvid vlan 10**\u547d\u4ee4\u7528\u4e8e\u5c06\u63a5\u53e3\u7684PVID\u4fee\u6539\u4e3a10\uff0c\u8fd9\u6837\u5f53\u8be5\u63a5\u53e3\u6536\u5230PC1\u53d1\u9001\u51fa \u6765\u7684untagged\u5e27\u65f6\uff0c\u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e9b\u5e27\u6765\u81ea\u4e8eVLAN10\uff1b\u800c**port hybrid untagged vlan 10**\u547d\u4ee4\u5219\u7528\u4e8e\u5c06\u8be5\u63a5\u53e3\u52a0\u5165VLAN10\uff0c\u4f7f\u5f97PC1\u6240\u53d1\u9001\u7684\u6570\u636e\u5e27\u80fd\u591f\u8fdb\u5165GE0/0/1\u63a5\u53e3\uff08\u88ab\u8be5\u63a5\u53e3\u63a5\u6536\uff09\u4ece\u800c\u8fdb\u5165\u4ea4\u6362\u673a\uff0c\u53e6\u5916\uff0c\u8fd9\u6761\u547d\u4ee4\u8fd8\u4f7f\u5f97\u4ea4\u6362\u673a\u5728\u4eceGE0/0/1\u63a5\u53e3\u5411\u5916\u53d1\u9001VLAN10\u7684\u6570\u636e\u5e27\u65f6\uff0c\u4ee5untagged\u7684\u65b9\u5f0f\u53d1\u9001\u3002\u56e0\u6b64\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cPC1\u88ab\u8ba4\u4e3a\u5c5e\u4e8eVLAN10\uff0c\u5e76\u4e14\u80fd\u591fping\u901aSW1\u7684vlanif10\u63a5\u53e3IP\u5730\u5740\uff1a 192.168.10.3\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5728PC1\u53d1\u9001\u7684\u6570\u636e\u5e27\u8fdb\u5165\u4ea4\u6362\u673aSW1\u4e4b\u540e\uff0c\u5982\u679cSW1\u5c06\u6570\u636e\u5e27\u900f\u4f20\u5904\u7406\uff0c\u90a3\u4e48\u8be5\u5e27\u4ece GE0/0/15\u53d1\u51fa\u65f6\uff0c\u662f\u5426\u643a\u5e26tag\uff0c\u5219\u8981\u6839\u636eGE0/0/15\u63a5\u53e3\u7684\u914d\u7f6e\u800c\u5b9a\u3002","title":"Hybrid\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u7ec8\u7aefPC"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#hybric","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cSW1\u53caSW2\u5206\u522b\u8fde\u63a5\u7740PC1\u53caPC2\uff0c\u6211\u4eec\u5c06\u4e24\u53f0\u4ea4\u6362\u673a\u7684GE0/0/1\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\uff0c\u5e76\u4e14\u90fd\u52a0\u5165VLAN10\u3002\u73b0\u5728SW1\u7684GE0/0/15\u88ab\u914d\u7f6e\u4e3atrunk\u7c7b\u578b\uff0c\u5e76\u4e14\u653e\u901a\u4e86VLAN10\uff1a \u73b0\u5728\uff0c\u6765\u770b\u770b\u5982\u679cSW2\u7684GE0/0/15\u63a5\u53e3\u91c7\u7528hybrid\u7c7b\u578b\u8be5\u5982\u4f55\u914d\u7f6e\uff08\u7eaf\u7cb9\u4e3a\u4e86\u8bb2\u89e3hybrid\u7684\u914d\u7f6e\u800c\u4e3e\u4f8b\uff0c \u901a\u5e38\u6211\u4eec\u4f1a\u4e3a\u94fe\u8def\u4e24\u7aef\u7684\u63a5\u53e3\u914d\u7f6e\u76f8\u540c\u7684\u7c7b\u578b\uff09\u3002 \u7531\u4e8e\u5bf9\u7aef\u63a5\u53e3\uff08SW1\u7684GE0/0/15\uff09\u4ee5tagged\u7684\u65b9\u5f0f\u53d1\u9001VLAN10\u7684\u6570\u636e\u5e27\uff0c\u56e0\u6b64SW2\u7684GE0/0/15\u63a5\u53e3\u4e5f\u5fc5\u987b\u5c06VLAN10\u4ee5tagged\u7684\u65b9\u5f0f\u5904\u7406\uff1a **port hybrid tagged vlan 10**\u547d\u4ee4\u7528\u4e8e\u5c06GE0/0/15\u63a5\u53e3\u52a0\u5165VLAN10\uff0c\u5e76\u4e14\u8be5VLAN\u7684\u5e27\u4ee5Tagged\u65b9\u5f0f \u901a\u8fc7\u63a5\u53e3\u3002 \u73b0\u5728\u8003\u8651\u53e6\u4e00\u79cd\u60c5\u51b5\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a SW1\u5de6\u4fa7\u8fde\u63a5\u7740VLAN10\u300120\u4ee5\u53ca1000\uff0c\u73b0\u5728SW1\u7684GE0/0/15\u505a\u4e86\u5982\u4e0b\u914d\u7f6e\uff1a \u4e5f\u5373SW1\u5728\u901a\u8fc7GE0/0/15\u5f80\u5916\u53d1\u9001\u6570\u636e\u5e27\u65f6\uff0c\u5bf9\u4e8eVLAN10\u53caVLAN20\u91c7\u7528tagged\u5e27\u7684\u65b9\u5f0f\u53d1\u9001\uff0c\u800c\u5bf9 \u4e8eVLAN1000\u5219\u91c7\u7528untagged\u5e27\u7684\u65b9\u5f0f\u53d1\u9001\uff0c\u90a3\u4e48\u5982\u679cSW2\u91c7\u7528hybrid\u63a5\u53e3\u4e0e\u5176\u5bf9\u63a5\uff0c\u6b64\u65f6\u8be5\u63a5\u53e3\u7684\u914d\u7f6e\u5e94\u8be5\u5982\u4e0b\uff1a","title":"Hybric\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u4ea4\u6362\u673a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipvlan","text":"\u901a\u5e38\u6211\u4eec\u5728\u5212\u5206VLAN\u65f6\uff0c\u662f\u91c7\u7528\u57fa\u4e8e\u63a5\u53e3\u5212\u5206VLAN\u7684\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u901a\u8fc7\u547d\u4ee4\uff0c\u5c06\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u52a0\u5165\u67d0\u4e2a\u7279\u5b9a\u7684VLAN\u3002\u67d0\u5c40\u70b9\u9047\u5230\u4e2a\u8f83\u4e3a\u201c\u7279\u6b8a\u201d\u7684\u9700\u6c42\uff1a\u5728\u4e0b\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0cSW2\u4e0b\u6302\u7740\u4e09\u53f0\u670d\u52a1\u5668\uff0c \u5176\u4e2dSW2\u8fde\u63a5Server1\u3001Server2\u7684\u63a5\u53e3\u662fAccess\u7c7b\u578b\u63a5\u53e3\uff0c\u800c\u4e14\u63a5\u53e3\u52a0\u5165\u4e86VLAN1\uff1b\u8fde\u63a5Server3\u7684\u63a5\u53e3\u4e5f\u662fAccess\u7c7b\u578b\uff0c\u4f46\u662f\u52a0\u5165\u4e86VLAN30\u3002\u800cSW2\u4e0a\u8054SW1\u7684\u4e0a\u884c\u53e3\u5219\u662fTrunk\u7c7b\u578b\u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u653e\u901a\u4e86VLAN1\u53caVLAN30\uff0c\u5e76\u4e14PVID\u4e3a1\u3002 \u5982\u6b64\u4e00\u6765\uff0cSW1\u5c06\u4f1a\u5728GE6/0/15\u63a5\u53e3\u4e0a\u6536\u5230\u4e09\u79cd\u7c7b\u578b\u7684\u6d41\u91cf\uff0c\u5206\u522b\u662f\u6e90\u5730\u5740\u4e3a10.10.10.0/24\u7f51\u6bb5\u7684\u65e0\u6807\u8bb0\u5e27\u3001\u6e90\u5730\u5740\u4e3a10.10.20.0/24\u7f51\u6bb5\u7684\u65e0\u6807\u8bb0\u5e27\uff0c\u4ee5\u53caVLAN30\u7684\u6807\u8bb0\u5e27\u3002\u73b0\u5728\u9700\u6c42\u662f\uff0c\u6839\u636e\u89c4\u5212\uff0c\u5c06\u4e0a\u8ff0\u5404\u4e2a\u7f51\u6bb5\u5728\u6838\u5fc3\u4ea4\u6362\u673aCoreSwitch\u4e0a\u5bf9\u5e94\u5230\u4e0d\u540c\u7684VLAN\uff0c\u5e76\u4e14\u5b9e\u73b0\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u76f8\u4e92\u901a\u4fe1\u3002\u7531\u4e8e\u67d0\u79cd\u539f\u56e0\uff0cSW2\u662f\u65e0\u6cd5\u88ab\u76f4\u63a5\u7ba1\u7406\u7684\uff0c\u56e0\u6b64\u53ea\u80fd\u5728SW1\u53caCoreSwitch\u4e0a\u5b8c\u6210\u914d\u7f6e\u3002 \u5b9e\u9645\u7684\u9700\u6c42\u662f\uff0c\u5728SW1\u4e0a\u5b8c\u6210\u76f8\u5e94\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5176\u5728GE6/0/15\u63a5\u53e3\u4e0a\u6536\u5230\u6e90\u5730\u5740\u4e3a10.10.10.0/24\u7f51\u6bb5\u7684\u6570\u636e\u65f6\uff0c\u5c06\u5176\u8bc6\u522b\u4e3aVLAN10\u7684\u6570\u636e\uff0c\u6536\u5230\u6e90\u5730\u5740\u4e3a10.10.20.0/24\u7684\u6570\u636e\u65f6\uff0c\u5c06\u5176\u8bc6\u522b\u4e3aVLAN20\u7684\u6570\u636e\uff0c\u800cVLAN30\u7684\u6570\u636e\u9700\u4e3a\u6807\u8bb0\u5e27\u3002\u56e0\u6b64\u9700\u5728SW1\u4e0a\u90e8\u7f72\u57fa\u4e8eIP\u5730\u5740\u7684VLAN\u5212\u5206\u3002\u5f53\u7136\uff0c\u8fd9\u4e2a\u63a5\u53e3\u5728\u53d1\u9001VLAN10\u53caVLAN20\u7684\u6570\u636e\u5e27\u65f6\uff0c\u4e0d\u80fd\u6253\u6807\u8bb0\uff0c\u800c\u5728\u53d1\u9001VLAN30\u7684\u6570\u636e\u5e27\u65f6\uff0c\u5219\u9700\u8981\u6253\u6807\u8bb0\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CoreSwitch\u7684\u914d\u7f6e\u5982\u4e0b\uff1a QinQ \u5728\u4e0a\u56fe\u4e2d\uff0cCE1\u53caCE2\u4e24\u53f0\u4ea4\u6362\u673a\u90fd\u90e8\u7f72\u4e86VLAN10\u3002\u4e24\u53f0\u4ea4\u6362\u673a\u5206\u522b\u63a5\u5165\u4e86SW1\u53caSW2\u3002SW1\u53caSW2\u662f\u4e24\u53f0\u516c\u7f51\u4ea4\u6362\u673a\uff0c\u4e14\u8fde\u63a5\u7740\u5176\u4ed6\u8bbe\u5907\uff0c\u4e3a\u4e86\u4fdd\u8bc1CE1\u53caCE2\u80fd\u591f\u5728VLAN10\u4e2d\u5b9e\u73b0\u4e8c\u5c42\u901a\u4fe1\uff0c\u800c\u4e14\u4e0d\u4e0e\u5176\u4ed6\u8bbe\u5907\u4ea7\u751f\u51b2\u7a81\uff0c\u516c\u7f51\u4e3a\u8be5\u4e1a\u52a1\u5206\u914d\u4e86\u5916\u5c42VLAN160\u3002 \u5728SW1\u53caSW2\u4e0a\u90e8\u7f72QinQ\u4f7f\u5f97CE1\u80fd\u591f\u8bbf\u95eeCE2\u3002\u56fe\u4e2d\u7684\u4ea4\u6362\u673a\u4ee5S5700 V2R1C00\u7248\u672c\u4e3a\u4f8b\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u4eceCE1\u5373\u53efping\u901a10.1.1.2\u3002\u5728SW1\u53caSW2\u4e4b\u95f4\u53ef\u6355\u83b7\u5982\u4e0bICMP Request\u62a5\u6587\uff1a \u7559\u610f\u5230\u8be5\u62a5\u6587\u643a\u5e26\u4e24\u5c42VLAN-Tag\uff0c\u5176\u4e2d\u5916\u5c42VLAN-ID\u4e3a160\uff0c\u800c\u5185\u5c42\u4e3a10\u3002 \u5728\u4e0d\u540c\u7684\u7f51\u7edc\u89c4\u5212\u6216\u4e0d\u540c\u5382\u5546\u8bbe\u5907\u7684QinQ\u62a5\u6587\u4e2d\uff0cVLAN-Tag\u7684TPID\u5b57\u6bb5\u53ef\u80fd\u88ab\u8bbe\u7f6e\u4e3a\u4e0d\u540c\u7684\u503c\u3002\u4e3a\u4e86\u548c\u73b0\u6709\u7f51\u7edc\u89c4\u5212\u517c\u5bb9\uff0c\u8bbe\u5907\u63d0\u4f9b\u4e86QinQ\u62a5\u6587\u5916\u5c42VLAN-Tag\u7684TPID\u503c\u53ef\u4fee\u6539\u7684\u529f\u80fd\u3002\u7528\u6237\u901a\u8fc7\u914d\u7f6eTPID\u7684\u503c\uff0c \u4f7f\u5f97\u53d1\u9001\u5230\u516c\u7f51\u4e2d\u7684QinQ\u62a5\u6587\u643a\u5e26\u7684TPID\u503c\u4e0e\u5f53\u524d\u7f51\u7edc\u914d\u7f6e\u76f8\u540c\uff0c\u4ece\u800c\u5b9e\u73b0\u4e0e\u73b0\u6709\u7f51\u7edc\u7684\u517c\u5bb9\u3002 \u518d\u770b\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u62d3\u6251\u5982\u4e0b\u56fe\u6240\u793a\u3002\u7f51\u7edc\u4e2d\u7684\u9700\u6c42\u662f\uff0cCE1\u53d1\u5f80SW1\u7684\u6570\u636e\u5e27\u4e2d\uff0c\u643a\u5e26VLAN-Tag 10\u7684\u6d41\u91cf\u589e\u52a0\u4e00\u5c42VLAN-Tag\uff0c\u5916\u5c42VLAN-Tag\u4e3a160\uff1b\u643a\u5e26VLAN-Tag 20\u7684\u6d41\u91cf\u589e\u52a0\u4e00\u5c42VLAN-Tag\uff0c\u5916\u5c42VLAN- Tag\u4e3a170\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u4e8c\u5c42\u63a5\u53e3\u3001\u4e09\u5c42\u63a5\u53e3\u3001\u4ee5\u53ca PVID\u3001VLAN-ID \u7b49\u6982\u5ff5\u6742\u8c08 \u4e8c\u5c42\u63a5\u53e3\uff0c\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3a\u53ea\u5177\u5907\u4e8c\u5c42\u4ea4\u6362\u80fd\u529b\u7684\u63a5\u53e3\uff0c\u4f8b\u5982\u4e8c\u5c42\u4ea4\u6362\u673a\u7684\u7269\u7406\u63a5\u53e3\uff0c\u6216\u8005\u4e09\u5c42\u4ea4\u6362\u673a\u7684\u7269\u7406\u63a5\u53e3\uff08\u4e00\u822c\u800c\u8a00\uff0c\u8fd9\u4e9b\u63a5\u53e3\u7f3a\u7701\u65f6\u4e3a\u4e8c\u5c42\u6a21\u5f0f\uff0c\u67d0\u4e9b\u6b3e\u578b\u5177\u5907\u5207\u6362\u4e3a\u4e09\u5c42\u6a21\u5f0f\u7684\u80fd\u529b\uff09\u3002 \u4e8c\u5c42\u63a5\u53e3\u4e0d\u80fd\u76f4\u63a5\u914d\u7f6eIP\u5730\u5740\uff0c\u5e76\u4e14\u4e0d\u76f4\u63a5\u7ec8\u7ed3\u5e7f\u64ad\u5e27\uff08\u76ee\u7684MAC\u5730\u5740\u4e3a\u5e7f\u64adMAC\u5730\u5740FFFF- FFFF-FFFF\u7684\u6570\u636e\u5e27\uff09\u3002\u4e8c\u5c42\u63a5\u53e3\u6536\u5230\u5e7f\u64ad\u5e27\u540e\uff0c\u4f1a\u5c06\u5176\u4ece\u540c\u5c5e\u4e00\u4e2a\u5e7f\u64ad\u57df\uff08VLAN\uff09\u7684\u6240\u6709\u5176\u4ed6\u63a5\u53e3\u6cdb\u6d2a\u51fa\u53bb\u3002 \u4e09\u5c42\u63a5\u53e3\u7ef4\u62a4IP\u5730\u5740\u4e0eMAC\u5730\u5740\u3002 \u4e09\u5c42\u63a5\u53e3\u4f1a\u7ec8\u7ed3\u5e7f\u64ad\u5e27\uff0c\u4e09\u5c42\u63a5\u53e3\u5728\u6536\u5230\u5e7f\u64ad\u5e27\u540e\uff0c\u4e0d\u4f1a\u8fdb\u884c\u6cdb\u6d2a\u5904\u7406\u3002 \u4e8c\u5c42\u63a5\u53e3\u5728\u6536\u5230\u5355\u64ad\u5e27\u540e\uff0c\u4f1a\u5728MAC\u5730\u5740\u8868\u4e2d\u67e5\u8be2\u8be5\u6570\u636e\u5e27\u7684\u76ee\u7684MAC\u5730\u5740\uff0c\u7136\u540e\u4f9d\u636e\u8868\u9879\u6307\u5f15\u8fdb\u884c\u8f6c\u53d1\uff0c\u5982\u679c\u6ca1\u6709\u4efb\u4f55\u8868\u9879\u5339\u914d\uff0c\u5219\u8fdb\u884c\u6cdb\u6d2a\u3002\u4e09\u5c42\u63a5\u53e3\u5728\u6536\u5230\u5355\u64ad\u5e27\u540e\uff0c\u9996\u5148\u5224\u65ad\u5176\u76ee\u7684MAC \u5730\u5740\u662f\u5426\u4e3a\u672c\u5730MAC\u5730\u5740\uff0c\u5982\u679c\u662f\uff0c\u5219\u5c06\u6570\u636e\u5e27\u89e3\u5c01\u88c5\uff0c\u5e76\u89e3\u6790\u51fa\u62a5\u6587\u76ee\u7684IP\u5730\u5740\uff0c\u7136\u540e\u8fdb\u884c\u8def\u7531\u67e5\u8be2\u53ca\u8f6c\u53d1\u3002\u56e0\u6b64\u4e8c\u5c42\u63a5\u53e3\u4e0e\u4e09\u5c42\u63a5\u53e3\u5728\u6570\u636e\u5904\u7406\u884c\u4e3a\u4e0a\u4e5f\u5b58\u5728\u660e\u663e\u5dee\u5f02\u3002 \u4e8c\u5c42\u63a5\u53e3\u6709\u51e0\u79cd\u7c7b\u578b\uff08\u8fd9\u91cc\u8bf4\u7684\u662f\u4ee5\u592a\u7f51\u4e8c\u5c42\u63a5\u53e3\uff09\uff1aaccess\u3001trunk\u3001hybrid\u3002\u4e09\u5c42\u63a5\u53e3\u5219\u6ca1\u6709\u4e0a\u8ff0\u7c7b\u578b\u3002 \u4e09\u5c42\u63a5\u53e3\u6709\u7269\u7406\u5f62\u6001\u7684\uff0c\u4e5f\u6709\u903b\u8f91\u5f62\u6001\u7684\uff0c\u5178\u578b\u7684\u7269\u7406\u63a5\u53e3\u5982\u8def\u7531\u5668\u7684\u4e09\u5c42\u7269\u7406\u7aef\u53e3\uff1b\u903b\u8f91\u63a5\u53e3\u5982 VLANIF\uff0c\u4ee5\u53ca\u4ee5\u592a\u7f51\u5b50\u63a5\u53e3\uff0c\u4f8b\u5982GE0/0/1.1\u3002\u7b49\u7b49\u3002VLANIF\u4e0e\u5176\u5173\u8054\u7684VLAN\u7684VLAN-ID\u5bf9\u5e94\uff0c \u6b64\u5916\uff1a \u800c\u4ee5\u592a\u7f51\u5b50\u63a5\u53e3\uff0c\u901a\u5e38\u4e5f\u4f1a\u7ed1\u5b9a\u76f8\u5e94\u7684VLAN-ID\uff0c\u4ece\u800c\u4e0e\u76f8\u5e94\u7684VLAN\u5bf9\u63a5\u3002\u8fd9\u4e24\u79cd\u5178\u578b\u7684\u4e09\u5c42\u63a5\u53e3\u5747\u53ef\u4ee5\u76f4\u63a5\u914d\u7f6eIP\u5730\u5740\u3002 \u5728\u4ee5\u592a\u7f51\u4e8c\u5c42\u4ea4\u6362\u7f51\u7edc\u91cc\uff0cVLAN\u662f\u4e00\u4e2a\u975e\u5e38\u57fa\u7840\u7684\u4e1c\u897f\u3002\u6bcf\u4e2aVLAN\u90fd\u662f\u4e00\u4e2a\u903b\u8f91\u7684\u5e7f\u64ad\u57df\uff0c\u6bcf\u4e2aVLAN\u90fd\u4f7f\u7528\u5bf9\u5e94\u7684ID\u8fdb\u884c\u6807\u8bc6\uff0c\u8fd9\u662fVLAN-ID\u3002 \u63a5\u53e3\u7f3a\u7701VLAN\u6807\u8bc6\uff0c\u5373PVID\uff08Port Default VLAN ID\uff09\uff0c\u6307\u7684\u662f\u4e8c\u5c42\u63a5\u53e3\u4e0a\u7684\u7f3a\u7701VLAN-ID\uff08\u6bcf\u4e2a\u4e8c\u5c42\u63a5\u53e3\u4e0a\u6709\u4e14\u53ea\u6709\u4e00\u4e2aVLAN-ID\u4f5c\u4e3aPVID\uff09\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0cPVID\u5fc5\u5b9a\u662f\u67d0\u4e00\u4e2a\u5177\u4f53VLAN\u7684VLAN-ID\u3002PVID\u7684\u4f5c\u7528\u662f\uff0c\u5f53\u8fd9\u4e2a\u4e8c\u5c42\u63a5\u53e3\u6536\u5230\u4e86\u6d41\u91cf\uff0c\u5e76\u4e14\u8be5\u6d41\u91cf\u4e0d\u643a\u5e26\u4efb\u4f55802.1Q Tag \uff08VLAN-ID\u4fe1\u606f\uff09\uff0c\u8be5\u63a5\u53e3\u4fbf\u8ba4\u4e3a\u8fd9\u4e9b\u6d41\u91cf\u5c5e\u4e8ePVID\u5bf9\u5e94\u7684VLAN\u3002\u5f53\u7136\uff0cPVID\u8fd8\u4f1a\u5f71\u54cd\u63a5\u53e3\u53d1\u9001\u6570\u636e\u5e27\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u63a5\u53e3\u7684PVID\u5747\u4e3aVLAN1\u3002 \u5bf9\u4e8eAccess\u63a5\u53e3\uff0c\u7f3a\u7701VLAN\u5c31\u662f\u5b83\u5141\u8bb8\u901a\u8fc7\u7684VLAN\uff0c\u4fee\u6539\u63a5\u53e3\u5141\u8bb8\u901a\u8fc7\u7684VLAN\u5373\u53ef\u66f4\u6539\u63a5\u53e3\u7684\u7f3a\u7701VLAN\u3002 \u5bf9\u4e8eTrunk\u63a5\u53e3\u548cHybrid\u63a5\u53e3\uff0c\u4e00\u4e2a\u63a5\u53e3\u53ef\u4ee5\u5141\u8bb8\u591a\u4e2aVLAN\u901a\u8fc7\uff0c\u4f46\u662f\u53ea\u80fd\u6709\u4e00\u4e2a\u7f3a\u7701VLAN\uff0c \u4fee\u6539\u63a5\u53e3\u5141\u8bb8\u901a\u8fc7\u7684VLAN\u4e0d\u4f1a\u66f4\u6539\u63a5\u53e3\u7684\u7f3a\u7701VLAN\u3002 \u4e09\u5c42\u63a5\u53e3\u672a\u5fc5\u4e00\u5b9a\u5bf9\u5e94VLAN-ID\u3002\u4f8b\u5982\u8def\u7531\u5668\u7684\u4e09\u5c42\u7269\u7406\u63a5\u53e3\uff0c\u8fd9\u79cd\u7c7b\u578b\u7684\u63a5\u53e3\u65e0\u9700\u914d\u7f6eVLAN-ID\u3002 \u5728\u4e09\u5c42\u4ea4\u6362\u673a\u4e0a\uff08\u8def\u7531\u5668\u6216\u9632\u706b\u5899\u7b49\u8bbe\u5907\uff0c\u4e5f\u6709\u652f\u6301VLANIF\u7684\u6b3e\u578b\uff09\uff0c\u6bcf\u4e2aVLAN\u90fd\u6709\u5bf9\u5e94\u7684 VLANIF\uff0cVLANIF\u6307\u7684\u662fVLAN\u5bf9\u5e94\u7684\u903b\u8f91\u4e09\u5c42\u63a5\u53e3\uff0c\u8fd9\u4e2a\u4e09\u5c42\u63a5\u53e3\u5728VLAN\u88ab\u521b\u5efa\u540e\uff0c\u53ef\u4ee5\u76f4\u63a5\u8d4b\u4e88IP\u5730\u5740\uff0c\u4e14\u5177\u5907\u8def\u7531\u8f6c\u53d1\u80fd\u529b\u3002\u4e00\u4e2aVLAN\u5bf9\u5e94\u4e00\u4e2aVLANIF\uff0cVLAN\u4e0eVLANIF\u7684\u6807\u8bc6\u76f8\u540c\u3002 VLAN\u5185\u7684\u7ec8\u7aef\u8bbe\u5907\uff0c\u53ef\u4ee5\u4e0e\u8be5VLAN\u5bf9\u5e94\u7684VLANIF\u76f4\u63a5\u8fdb\u884c\u4e8c\u5c42\u901a\u4fe1\u3002 \u4e8c\u5c42\u9632\u73af\u6280\u672f STP","title":"\u57fa\u4e8eIP\u5730\u5740\u8bc6\u522bVLAN\u7684\u529f\u80fd"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#stp","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0c\u63a5\u5165\u5c42\u4ea4\u6362\u673aSW3\u5355\u94fe\u8def\u4e0a\u8054\u5230\u6c47\u805a\u4ea4\u6362\u673aSW1\uff0c\u8fd9\u662f\u5b58\u5728\u5355\u94fe\u8def\u6545\u969c\u7684\uff0c\u8fd9\u4e2a\u7f51\u7edc\u7684\u53ef\u9760\u6027\u4e5f\u662f\u6bd4\u8f83\u5dee\u7684\u3002\u5982\u679cSW3\u7684\u4e0a\u8054\u94fe\u8def\u53d1\u751f\u6545\u969c\uff0cSW3\uff08\u4ee5\u53ca\u4e0b\u8054\u7528\u6237\uff09\u5c31\u65ad\u7f51\u4e86\u3002\u7f51\u7edc\u4e2d\u5b58\u5728\u7684\u53e6\u4e00\u4e2a\u5355\u70b9\u6545\u969c\u95ee\u9898\uff0c\u5c31\u662fSW1\u5982\u679c\u5b95\u673a\uff0cSW3\u4e5f\u5c31\u65ad\u7f51\u4e86\u3002\u4e3a\u4e86\u4f7f\u5f97\u7f51\u7edc\u66f4\u52a0\u5065\u58ee\u3001\u66f4\u5177\u6709\u5197\u4f59\u6027\uff0c \u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5c06\u62d3\u6251\u4fee\u6539\u4e3a\u5982\u4e0b\u56fe\u6240\u793a\uff1a\u63a5\u5165\u5c42\u4ea4\u6362\u673aSW3\u91c7\u7528\u53cc\u94fe\u8def\u4e0a\u8054\u5230\u4e24\u53f0\u6c47\u805a\u8bbe\u5907\uff0c\u6784\u6210\u4e00\u4e2a\u7269\u7406\u94fe\u8def\u5197\u4f59\u7684\u4e8c\u5c42\u73af\u5883\uff0c\u89e3\u51b3\u4e86\u5355\u94fe\u8def\u53ca\u5355\u8bbe\u5907\u6545\u969c\u95ee\u9898\u3002 \u4f46\u662f\u8fd9\u5374\u5e26\u6765\u4e86\u53e6\u4e00\u4e2a\u5927\u95ee\u9898\uff1a\u7f51\u7edc\u4e2d\u5b58\u5728\u4e8c\u5c42\u73af\u8def\uff08\u6240\u8c13\u7684\u4e8c\u5c42\u73af\u8def\u6307\u7684\u662f\u7531\u4e8c\u5c42\u94fe\u8def\u6784\u6210\u7684\u73af\u8def\uff09\u3002\u8fd9\u4e2a\u4e09\u89d2\u5f62\u7684\u4e8c\u5c42\u73af\u8def\u4f1a\u4e3a\u7f51\u7edc\u5e26\u6765\u91cd\u5927\u95ee\u9898\u3002\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u4ea4\u6362\u673a\u7684\u5de5\u4f5c\u673a\u5236\uff1a\u5f53\u5176\u6536\u5230\u7ec4\u64ad\u3001\u5e7f\u64ad\u6570\u636e\u5e27\u65f6\uff0c\u4f1a\u76f4\u63a5\u5728VLAN\u5185\u8fdb\u884c\u6cdb\u6d2a\uff0c\u53e6\u5916\uff0c\u5982\u679c\u6536\u5230\u76ee\u7684MAC\u5730\u5740\u672a\u77e5\u7684\u5355\u64ad\u6570\u636e\u5e27\u65f6\uff0c\u540c\u6837\u4f1a\u8fdb\u884c\u6cdb\u6d2a\uff0c\u8fd9\u4e48\u4e00\u6765\uff0c\u5f53\u7f51\u7edc\u4e2d\u51fa\u73b0\u4e8c\u5c42\u73af\u8def\u65f6\uff0c\u5c31\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5e7f\u64ad\u98ce\u66b4\u3001\u591a\u5e27\u590d\u5236\u3001MAC\u5730\u5740\u6f02\u79fb\u7b49\u7b49\u591a\u79cd\u95ee\u9898\uff0c\u4ece\u800c\u7ed9\u7f51\u7edc\u5e26\u6765\u5de8\u5927\u5f71\u54cd\u3002\u5373\u4f7f\u4e0d\u662f\u4eba\u4e3a\u642d\u5efa\u5197\u4f59\u7684\u7269\u7406\u73af\u5883\u800c\u5bfc\u81f4\u7684\u73af\u8def\uff0c\u7f51\u7edc\u4e5f\u6709\u53ef\u80fd\u56e0\u4e3a\u79cd\u79cd\u539f\u56e0\u51fa\u73b0\u4e8c\u5c42\u73af\u8def\u5f15\u53d1\u7684\u6545\u969c\uff0c\u4f8b\u5982\u7531\u4e8e\u4eba\u4e3a\u7684\u8bef\u63a5\u7ebf\u7f06\u7b49\u3002\u90a3\u4e48\u6709\u6ca1\u6709\u4ec0\u4e48\u529e\u6cd5\u89e3\u51b3\u73af\u8def\u7684\u95ee\u9898\u5462\uff1f\u89e3\u51b3\u65b9\u6848\u6709\u8bb8\u591a\uff0c\u5b9e\u9645\u4e0a\u4ee5\u592a\u7f51\u4e2d\u7684\u4e8c\u5c42\u73af\u8def\u95ee\u9898\u662f\u4e00\u4e2a\u4e0d\u5c0f\u7684\u8bfe\u9898\uff0c\u4e1a\u754c\u6709\u8bb8\u591a\u975e\u5e38\u7ecf\u5178\u7684\u89e3\u51b3\u65b9\u6848\u5e94\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0c\u6570\u636e\u8bbe\u5907\u5382\u5546\u4e3a\u4e86\u5e94\u5bf9\u4e8c\u5c42\u73af\u8def\u95ee\u9898\u4e5f\u90fd\u7eb7\u7eb7\u63d0\u51fa\u4e86\u81ea\u5df1\u7684\u6280\u672f\u6216\u65b9\u6cd5\u8bba\uff0c\u4f46\u662f\u8fd9\u91cc\u4e0d\u5f97\u4e0d\u63d0\u5230\u7684\u662f**\u751f\u6210\u6811\uff08Spanning-tree\uff0c\u7b80\u79f0STP\uff09\u534f\u8bae**\uff0c\u8fd9\u662f\u4e00\u4e2a\u7ecf\u5178\u7684\u3001\u516c\u6709\u7684\u534f\u8bae\uff0c\u4e13\u95e8\u7528\u4e8e\u5e94\u5bf9\u4ee5\u592a\u7f51\u4e8c\u5c42\u73af\u8def\u95ee\u9898\u3002 \u901a\u8fc7STP\uff0c\u5728\u903b\u8f91\u4e0a\u5c06\u7279\u5b9a\u63a5\u53e3\u8fdb\u884c\u963b\u585e\uff08Block\uff09\uff0c\u4ece\u800c\u5b9e\u73b0\u4fdd\u6301\u7269\u7406\u4e0a\u7684\u5197\u4f59\u73af\u5883\u540c\u65f6\u3001\u4e8c\u5c42\u73af\u5883\u4e2d\u53c8\u53ef\u6253\u7834\u73af\u8def\u3002\u4f8b\u5982\u5728\u4e0b\u56fe\u4e2d\uff0c\u7f51\u7edc\u662f\u5b58\u5728\u73af\u8def\u7684\uff0c\u5728\u4e09\u53f0\u4ea4\u6362\u673a\u4e0a\u8fd0\u884c\u751f\u6210\u6811\u534f\u8bae\u540e\uff0cSTP\u7ecf\u8fc7\u4e00\u5b9a\u7684\u8ba1\u7b97\uff0c \u6700\u7ec8\u51b3\u5b9a\u963b\u585e\u6389\u4e00\u4e2a\u63a5\u53e3\uff0c\u4ece\u800c\u6253\u7834\u73af\u8def\u3002 \u5f53\u62d3\u6251\u53d1\u751f\u53d8\u66f4\u7684\u65f6\u5019\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0cSTP\u80fd\u591f\u63a2\u6d4b\u5230\u8fd9\u4e9b\u53d8\u5316\uff0c\u5e76\u4e14\u53ca\u65f6\u81ea\u52a8\u7684\u8c03\u6574\u63a5\u53e3\u72b6\u6001\uff0c\u4ece\u800c\u9002\u5e94\u7f51\u7edc\u62d3\u6251\u7684\u53d8\u5316\uff0c\u5b9e\u73b0\u94fe\u8def\u5197\u4f59\u3002 STP\u9700\u8981\u8fd0\u884c\u5728\u7f51\u7edc\u4e2d\u7684\u6240\u6709\u4ea4\u6362\u673a\u4e0a\u4ee5\u9632\u6b62\u7f51\u7edc\u51fa\u73b0\u73af\u8def\u3002\u4e00\u65e6\u5f00\u542fSTP\uff0c\u4ea4\u6362\u673a\u4e4b\u95f4\u5c31\u4f1a\u8fdb\u884cSTP\u62a5\u6587\u7684\u4ea4\u4e92\uff0c\u800cSTP\u7684\u5de5\u4f5c\u53ca\u8ba1\u7b97\u6b63\u662f\u4f9d\u8d56\u4e8e\u8fd9\u4e9b\u62a5\u6587\u7684\u4ea4\u4e92\uff0cSTP\u64cd\u4f5c\u7684\u7ed3\u679c\u662f\u5c06\u7f51\u7edc\u4e2d\u7684\u7279\u5b9a\u63a5\u53e3\u963b\u585e\uff0c\u4ece\u800c\u8fbe\u5230\u6d88\u706d\u73af\u8def\u7684\u76ee\u7684\uff0c\u4f46\u662f\u5177\u4f53\u662f\u4ec0\u4e48\u63a5\u53e3\u88ab\u963b\u585e\uff0c\u53ef\u4e0d\u662f\u968f\u4fbf\u5b9a\u7684\uff0cSTP\u4e00\u5957\u81ea\u5df1\u7684\u8ba1\u7b97\u65b9\u6cd5\u3002\u672c\u7ae0\u6211\u4eec\u4e3b\u8981\u4ecb\u7ecd\u7684\u662fSTP\u7684802.1D\u6807\u51c6\u3002\u8fd9\u4e2a\u6807\u51c6\u5b9e\u9645\u4e0a\u5df2\u7ecf\u975e\u5e38\u53e4\u8001\u800c\u4e14\u57fa\u672c\u4e0d\u518d\u4f7f\u7528\u4e86\uff0c\u4f46\u662f\u5374\u4f9d\u7136\u662f\u5165\u95e8\u751f\u6210\u6811\u6280\u672f\u7684\u5fc5\u7ecf\u4e4b\u8def\uff0c\u540e\u7eed\u7684\u66f4\u65b0\u5b9e\u9645\u4e0a\u90fd\u662f\u57fa\u4e8e\u8fd9\u4e2a\u534f\u8bae\uff0c\u56e0\u6b64\u638c\u63e1\u5b83\u662f\u975e\u5e38\u6709\u5fc5\u8981\u7684\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5148\u4e86\u89e3\u4e00\u4e0b802.1D\u6807\u51c6\u7684STP\u3002","title":"STP\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#stp_1","text":"","title":"STP\u57fa\u672c\u6982\u5ff5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#stp_2","text":"\u5728\u4ea4\u6362\u7f51\u7edc\u4e2d\u9009\u4e3e\u4e00\u4e2a\u6839\u6865\uff08Root Bridge\uff0c\u7b80\u79f0RB\uff09\uff1b \u5728\u6bcf\u4e2a\u975e\u6839\u6865\u4e0a\u9009\u4e3e\u4e00\u4e2a\u6839\u7aef\u53e3\uff08Root Port\uff0c\u7b80\u79f0RP\uff09\uff1b \u5728\u6bcf\u4e2a\u6bb5\u4e2d\u9009\u4e3e\u4e00\u4e2a\u6307\u5b9a\u7aef\u53e3\uff08Designated Port\uff0c\u7b80\u79f0DP\uff09\uff1b \u963b\u585e\u975e\u6307\u5b9a\u7aef\u53e3\uff08Non-Designated Port\uff0c\u7b80\u79f0NDP\uff09\u3002 \u8bf4\u660e\uff1a\u8fd9\u91cc\u7684\u6865\uff08Bridge\uff09\uff0c\u5176\u5b9e\u5c31\u662f\u6307\u4ea4\u6362\u673a\uff0c\u7531\u4e8e\u4ea4\u6362\u673a\u662f\u7531\u65e9\u671f\u7684\u7f51\u6865\u53d1\u5c55\u800c\u6765\uff0c\u56e0\u6b64\u5728\u4e00\u4e9b\u573a\u5408\u4e0b\uff0c\u6211\u4eec\u4f9d\u7136 \u6cbf\u7528\u201c \u7f51\u6865\u201c\u6216\u8005\u201c \u6865\u201c\u6765\u79f0\u547c\u4ea4\u6362\u673a\u3002","title":"\u7b80\u5355\u5730\u8bf4STP\u91c7\u7528\u56db\u4e2a\u6b65\u9aa4\u6765\u89e3\u51b3\u4e8c\u5c42\u73af\u8def\u95ee\u9898\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_33","text":"\u8fd0\u884cSTP\u7684\u4ea4\u6362\u673a\u4e4b\u95f4\u4f1a\u4ea4\u4e92\u4e00\u4e9b\u975e\u5e38\u91cd\u8981\u7684\u534f\u8bae\u62a5\u6587\uff0c\u8be5\u62a5\u6587\u79f0\u4e3a\u7f51\u6865\u534f\u8bae\u6570\u636e\u5355\u5143\uff08Bridge Protocol Data Unit\uff0c\u7b80\u79f0BPDU\uff09\u3002STP\u4e4b\u6240\u4ee5\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u5e76\u6784\u5efa\u4e00\u4e2a\u65e0\u73af\u7684\u7f51\u7edc\uff0c\u662f\u4f9d\u8d56\u4e8eBPDU \u62a5\u6587\u7684\u6cdb\u6d2a\u3002\u8981\u7406\u89e3STP\u7684\u5de5\u4f5c\u8fc7\u7a0b\uff0c\u975e\u5e38\u91cd\u8981\u7684\u4e00\u70b9\u5c31\u662f\u8981\u7406\u89e3BPDU\u4e2d\u5404\u5b57\u6bb5\u7684\u542b\u4e49\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u90fd\u662fSTP\u8d56\u4ee5\u5de5\u4f5c\u7684\u6839\u672c\u3002BPDU\u62a5\u6587\u5305\u542b\u7684\u6240\u6709\u5b57\u6bb5\u5728\u540e\u6587\u4e2d\u6709\u6240\u6d89\u53ca\uff0c\u8fd9\u91cc\u6211\u4eec\u5148\u5173\u6ce8\u51e0\u4e2a\u91cd\u70b9\u5b57\u6bb5 \uff08\u6b64\u5904\u4ecb\u7ecd\u7684\u662fBPDU\u4e2d\u7684\u4e00\u79cd\u5173\u952e\u7c7b\u578b\uff1a\u914d\u7f6eBPDU\uff09\uff1a","title":"\u5173\u952e\u5b57\u6bb5\u53ca\u6bd4\u8f83\u539f\u5219"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#idbridge-identifier","text":"\u5728STP\u4e2d\uff0c\u6bcf\u4e00\u53f0\u4ea4\u6362\u673a\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u6807\u8bc6\u7b26\uff0c\u8fd9\u4e2a\u6807\u8bc6\u7b26\u5c31\u662f\u6865ID\uff0c\u6865ID\u957f\u5ea6\u4e3a8\u4e2a\u5b57\u8282\uff0c\u7531\u4e24\u90e8\u5206\u7ec4\u6210\uff1a2\u4e2a\u5b57\u8282\u7684\u6865\u4f18\u5148\u7ea7\u548c6\u4e2a\u5b57\u8282\u7684\u6865MAC\u5730\u5740\uff0c\u5176\u4e2d\u4f18\u5148\u7ea7\u9ed8\u8ba4\u4e3a32768\uff0c\u53ef\u4ee5\u624b\u5de5\u66f4\u6539\u3002\u800c\u6865MAC\u5730\u5740\u4e3a\u7f51\u6865\u7684\u80cc\u677fMAC\uff08\u53ef\u4ee5\u7b80\u5355\u5730\u7406\u89e3\u4e3a\u7cfb\u7edfMAC\uff09\u3002\u4ea4\u6362\u673a\u53d1\u9001\u7684BPDU\u62a5\u6587\u4e2d\uff0c\u6865ID\u5b57\u6bb5\u5b58\u653e\u7684\u5c31\u662f\u81ea\u5df1\u7684\u6865ID\uff0c\u800c\u6839\u6865ID\u5b57\u6bb5\u5b58\u653e\u7684\u5c31\u662f\u7f51\u7edc\u4e2d\u6839\u6865\u7684\u6865ID\u3002","title":"\u6865ID\uff08Bridge Identifier\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#root-path-cost","text":"\u6839\u8def\u5f84\u5f00\u9500\u662f\u4e00\u4e2a\u7528\u4e8e\u5ea6\u91cf\u63a5\u53e3\u5230\u6839\u6865\u7684\u5f00\u9500\u7684\u503c\uff0c\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u5230\u6839\u6865\u7684\u8def\u5f84\u5f00\u9500\u8d8a\u5c0f\u5219\u88ab\u963b\u585e\u7684\u53ef\u80fd\u6027\u4e5f\u5c31\u8d8a\u5c0f\u3002 \u6839\u6865\u53d1\u9001\u51fa\u6765\u7684BPDU\u4e2d\uff0c\u6839\u8def\u5f84\u5f00\u9500\u5b57\u6bb5\u503c\u90fd\u4e3a0\u3002\u5f53\u975e\u6839\u6865\u5728\u67d0\u4e2a\u63a5\u53e3\u4e0a\u6536\u5230\u8fd9\u4e2aBPDU\u518d\u8fdb \u884cSTP\u8ba1\u7b97\u7684\u65f6\u5019\uff0c\u4f1a\u628a\u8be5BPDU\u4e2d\u6240\u5305\u542b\u7684\u6839\u8def\u5f84\u5f00\u9500\u7d2f\u52a0\u4e0a\u6536\u5230\u8be5BPDU\u7684\u63a5\u53e3\u7684STP Cost\uff0c \u4ece\u800c\u5f97\u5230\u4ece\u8be5\u63a5\u53e3\u5230\u8fbe\u6839\u7684\u603b\u8def\u5f84\u5f00\u9500\u3002 STP\u63a5\u53e3Cost\u4e0e\u63a5\u53e3\u7684\u5e26\u5bbd\u6709\u5173\uff0c\u63a5\u53e3\u5e26\u5bbd\u8d8a\u9ad8\uff0c\u5219\u63a5\u53e3\u7684STP Cost\u8d8a\u5c0f\u3002 \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0cSW1\u662f\u7f51\u7edc\u4e2d\u7684\u6839\u6865\uff0c\u56e0\u6b64\u5b83\u53d1\u9001BPDU\u62a5\u6587\u4e2dRoot Path Cost\u5b57\u6bb5\u4e3a0\uff0cSW2 \u5728GE0/0/0\u6536\u5230\u8fd9\u4e2aBPDU\u540e\u5c31\u53ef\u4ee5\u8fdb\u884c\u76f8\u5e94\u7684\u8ba1\u7b97\uff0c\u5b83\u4eceGE0/0/0\u5230\u8fbe\u6839\u6865\u7684Root Path Cost\u7b49\u4e8e\u81ea\u5df1\u63a5\u53e3\u7684Cost\u52a0\u4e0a\u6240\u6536\u5230\u7684BPDU\u62a5\u6587\u4e2d\u7684Root Path Cost\uff0c\u7ed3\u679c\u5c31\u662f1\uff0c\u968f\u540eSW2\u5c06\u8fd9\u4e2a BPDU\u8f6c\u53d1\u7ed9SW3\uff0c\u6ce8\u610f\u6b64\u65f6BPDU\u4e2d\u7684Root Path Cost\u88ab\u4fee\u6539\u4e3a1\u3002SW3\u5728\u6536\u5230\u8fd9\u4e2aBPDU\u5e76\u8fdb\u884cRoot Path Cost\u8ba1\u7b97\u7684\u65f6\u5019\uff0cRoot Path Cost\u5c31\u7b49\u4e8e\u81ea\u5df1FE0/0/0\u63a5\u53e3\u7684Cost\u52a0\u4e0aBPDU\u62a5\u6587\u4e2d\u7684Root Path Cost\uff0c\u4e5f\u5c31\u662f11\u3002","title":"\u6839\u8def\u5f84\u5f00\u9500\uff08Root Path Cost\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#idport-id","text":"\u7aef\u53e3ID\uff082\u5b57\u8282\uff09\u5305\u542b\u4e24\u90e8\u5206\uff1a\u7aef\u53e3\u4f18\u5148\u7ea7\uff081\u5b57\u8282\uff09\u4ee5\u53ca\u7aef\u53e3\u7f16\u53f7\uff081\u5b57\u8282\uff09\u3002\u7f3a\u7701\u65f6\u4f18\u5148\u7ea7\u503c\u4e3a 128\uff0c\u8be5\u503c\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u4fee\u6539\uff0c\u53d6\u503c\u8303\u56f4\u662f0-255\uff0c\u503c\u8d8a\u5c0f\u8d8a\u4f18\u3002 \u8bf4\u660e\uff1a\u5728\u672c\u6587\u4e2d\uff0c\u4ea4\u6362\u673a\u7684\u7aef\u53e3\u6307\u7684\u5c31\u662f\u4ea4\u6362\u673a\u7684\u63a5\u53e3\uff0c\u5728\u63cf\u8ff0\u4ea4\u6362\u673a\u65f6\uff0c\u7b14\u8005\u53ef\u80fd\u540c\u65f6\u4f7f\u7528\u7aef\u53e3\u6216\u63a5\u53e3\u4e00\u8bcd\u3002","title":"\u7aef\u53e3ID\uff08Port ID\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#4bpdu","text":"Step1\uff1a\u6700\u5c0f\u7684\u6839\u6865ID Step2\uff1a\u6700\u5c0f\u7684\u6839\u8def\u5f84\u5f00\u9500 Step3\uff1a\u6700\u5c0f\u7684\u6865ID Step4\uff1a\u6700\u5c0f\u7684\u7aef\u53e3ID","title":"\u751f\u6210\u6811\u6784\u9020\u4e00\u4e2a\u65e0\u73af\u8def\u62d3\u6251\u65f6\uff0c\u603b\u662f\u4f7f\u7528\u76f8\u540c\u76844\u6b65\u6765\u5224\u5b9a\uff08\u4e0b\u9762\u7684\u4fe1\u606f\u90fd\u662fBPDU\u4e2d\u7684\u5b57\u6bb5\uff09\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#stp_3","text":"","title":"STP\u64cd\u4f5c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_34","text":"\u4ee5\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e3a\u4f8b\uff0c\u6211\u4eec\u5728\u4ea4\u6362\u673a\u4e0a\u90fd\u5f00\u542f\u4e86STP\uff0c\u521d\u59cb\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u7684\u4ea4\u6362\u673a\u90fd\u8ba4\u4e3a\u81ea\u5df1\u5c31\u662f\u7f51\u7edc\u4e2d\u7684\u6839\u6865\uff0c\u4e8e\u662f\u90fd\u5411\u7f51\u7edc\u4e2d\u6cdb\u6d2a\u914d\u7f6eBPDU\uff0c\u5728\u5404\u81ea\u53d1\u9001\u7684\u914d\u7f6eBPDU\u4e2d\uff0c\u90fd\u58f0\u79f0\u81ea\u5df1\u662f\u6839\u6865\u3002\u7ecf\u8fc7 PK\u4e4b\u540e\uff0c\u62e5\u6709\u6700\u5c0f\u6865ID\u7684\u4ea4\u6362\u673a\u80dc\u51fa\uff0c\u6210\u4e3a\u8fd9\u4e2a\u4ea4\u6362\u7f51\u7edc\u771f\u6b63\u7684\u6839\u6865\u3002 \u6839\u6865\u7684\u9009\u4e3e\u8fc7\u7a0b\uff1a\u9996\u5148\u6bd4\u8f83\u6865\u4f18\u5148\u7ea7\uff0c\u4f18\u5148\u7ea7\u503c\u6700\u5c0f\u7684\u4ea4\u6362\u673a\u80dc\u51fa\uff0c\u5982\u679c\u4f18\u5148\u7ea7\u76f8\u7b49\uff0c\u5219\u518d\u6bd4\u8f83\u6865MAC \u5730\u5740\uff0c\u4e5f\u662f\u4f18\u9009\u6700\u5c0f\u7684\u503c\u3002\u6240\u4ee5\u5728\u4e0a\u56fe\u6240\u793a\u7684\u4f8b\u5b50\u4e2d\uff0cSW1\u80dc\u51fa\u6210\u4e3a\u6839\u6865\u3002 \u6839\u6865\u662fSTP\u8ba1\u7b97\u5f97\u51fa\u7684\u65e0\u73af\u7684\u62d3\u6251\uff08\u53ef\u4ee5\u5f62\u8c61\u5730\u7406\u89e3\u4e3a\u4e00\u68f5\u6811\uff09\u7684\u6811\u6839\uff0cSTP\u540e\u7eed\u7684\u8ba1\u7b97\u90fd\u662f\u4ee5\u8fd9\u4e2a\u6811\u6839\u4f5c\u4e3a\u53c2\u8003\u70b9\u7684\u3002\u5f53\u7136\uff0c\u5728\u5b9e\u9645\u7684\u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u662f\u4e0d\u4f1a\u901a\u8fc7MAC\u5730\u5740\u7684\u6bd4\u8f83\u8ba9\u4ea4\u6362\u673a\u81ea\u5df1\u53bb\u9009\u6839\u6865\u7684\uff0c\u4e3a\u4e86\u7f51\u7edc\u7684\u7a33\u5b9a\u548c\u53ef\u63a7\uff0c\u4e00\u822c\u4f1a\u5c06\u6838\u5fc3\u4ea4\u6362\u8bbe\u5907\u914d\u7f6e\u4e3a\u7f51\u7edc\u7684\u6839\u6865\u2014\u2014\u5c06\u5176\u6865\u4f18\u5148\u7ea7\u8c03\u8282\u4e3a\u6700\u5c0f\u503c\uff0c\u4ece\u800c\u786e\u4fdd\u5176\u6210\u4e3a\u6839\u6865\u3002","title":"\u5728\u4ea4\u6362\u7f51\u7edc\u4e2d\u9009\u4e3e\u4e00\u4e2a\u6839\u6865"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_35","text":"\u5728\u9009\u4e3e\u51fa\u6839\u6865\u540e\uff0c\u6839\u6865\u4ecd\u7136\u6301\u7eed\u5411\u7f51\u7edc\u4e2d\u53d1\u9001\u914d\u7f6eBPDU\uff0c\u800c\u975e\u6839\u6865\u5c06\u6301\u7eed\u4e0d\u65ad\u5730\u6536\u5230\u6839\u6865\u53d1\u9001\u7684\u914d\u7f6e BPDU\u3002STP\u8ba1\u7b97\u8fc7\u7a0b\u7684\u7b2c\u4e8c\u6b65\u662f\u5728\u6bcf\u4e2a\u975e\u6839\u6865\u4e0a\u9009\u62e9\u4e00\u4e2a\u6839\u7aef\u53e3\uff0c\u6839\u7aef\u53e3\u662f\u6bcf\u53f0\u4ea4\u6362\u673a\u4e0a\u6536\u5230\u6700\u4f18 BPDU\u7684\u7aef\u53e3\u3002 \u4e00\u53f0\u975e\u6839\u6865\u53ef\u80fd\u4f1a\u6709\u591a\u4e2a\u7aef\u53e3\u8fde\u63a5\u5230\u4ea4\u6362\u7f51\u7edc\uff0c\u6bcf\u4e2a\u975e\u6839\u6865\u4e0a\u5fc5\u987b\u9009\u4e3e\u4e00\u4e2a\u6839\u7aef\u53e3\uff0c\u800c\u4e14\u53ea\u4f1a\u9009\u4e3e\u4e00\u4e2a\u6839\u7aef\u53e3\u3002\u5f53\u5b58\u5728\u591a\u4e2a\u7aef\u53e3\u65f6\uff0c\u4ea4\u6362\u673a\u5728\u8fd9\u4e9b\u7aef\u53e3\u4e0a\u90fd\u4f1a\u6536\u5230\u914d\u7f6eBPDU\uff0c\u4ea4\u6362\u673a\u4f1a\u6bd4\u8f83\u8fd9\u4e9b\u914d\u7f6eBPDU\uff0c\u7136\u540e\u9009\u62e9\u6bd4\u8f83\u7ed3\u679c\u6700\u4f18\u7684\u63a5\u53e3\u4f5c\u4e3a\u6839\u7aef\u53e3\uff0c\u6309\u7167\u5982\u4e0b\u987a\u5e8f\u6bd4\u8f83\uff1a1\uff09\u6bd4\u8f83\u914d\u7f6eBPDU\u4e2d\u7684\u6839\u6865ID\u5b57\u6bb5\uff0c \u9009\u62e9\u503c\u5c0f\u7684\uff1b2\uff09\u5982\u679c\u524d\u8005\u76f8\u7b49\uff0c\u5219\u5c06\u914d\u7f6eBPDU\u4e2d\u7684\u6839\u8def\u5f84\u5f00\u9500\u503c\u8bfb\u53d6\u51fa\u6765\uff0c\u4e0e\u6536\u5230\u8be5BPDU\u7684\u63a5\u53e3\u7684 Cost\u76f8\u52a0\uff0c\u6bd4\u8f83\u76f8\u52a0\u540e\u7684\u503c\uff0c\u9009\u62e9\u503c\u6700\u5c0f\u7684\uff1b3\uff09\u5982\u679c\u524d\u8005\u8fd8\u76f8\u7b49\uff0c\u5219\u6bd4\u8f83\u914d\u7f6eBPDU\u4e2d\u7684\u6865ID\u5b57\u6bb5\uff1b 4\uff09\u5982\u679c\u524d\u8005\u8fd8\u76f8\u7b49\uff0c\u5219\u6bd4\u8f83\u7aef\u53e3ID\u5b57\u6bb5\u3002 \u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0cSW3\u6709\u4e24\u4e2a\u63a5\u53e3\u63a5\u5165\u5230\u8fd9\u4e2a\u4ea4\u6362\u7f51\u7edc\u4e2d\uff1aPort1\u53caPort2\uff0c\u73b0\u5728SW3\u8981\u5728\u4e24\u8005\u4e4b\u95f4\u9009\u4e3e\u4e00\u4e2a\u6839\u7aef\u53e3\u3002SW3\u4f1a\u4ecePort1\u548cPort2\u90fd\u6536\u5230\u914d\u7f6eBPDU\u62a5\u6587\uff08\u4ecePort1\u6536\u5230\u7684\u662fSW1\u76f4\u63a5\u53d1\u9001\u8fc7\u6765\u7684\uff0c\u4ece Port2\u6536\u5230\u7684\u662f\u6839\u6865SW1\u53d1\u5f80SW2\uff0c\u7136\u540e\u7531SW2\u8f6c\u53d1\u8fc7\u6765\u7684\uff09\uff0c\u5728\u62a5\u6587\u4e2d\u90fd\u6709\u643a\u5e26\u201c\u6865ID\u3001\u6839\u8def\u5f84\u5f00\u9500\u3001\u6865ID\u3001\u7aef\u53e3ID\u201d\u7b49\u5173\u952e\u5b57\u6bb5\uff0c\u90a3\u4e48SW2\u5c31\u4f1a\u8fdb\u884cPort1\u53caPort2\u7684PK\uff0cPK\u4ec0\u4e48\u5462\uff1f\u5148PK\u8fd9\u4e24\u4e2a\u7aef\u53e3\u5230\u8fbe\u6839\u6865\u7684\u6839\u8def\u5f84\u5f00\u9500\uff0c\u4f18\u9009\u503c\u66f4\u5c0f\u7684\uff0c\u5982\u679c\u76f8\u7b49\uff0c\u5219PK\u8fd9\u4e24\u4e2a\u63a5\u53e3\u6536\u5230\u7684BPDU\u4e2d\u7684\u6865ID\uff0c\u4e5f\u662f\u4f18\u9009\u503c\u66f4\u5c0f\u7684\uff0c\u5982\u679c\u8fde\u8fd9\u4e2a\u4e5f\u76f8\u7b49\u5462\uff0c\u90a3\u5c31\u8fdb\u4e00\u6b65PK\u8fd9\u4e24\u4e2a\u63a5\u53e3\u6536\u5230\u7684BPDU\u4e2d\u7684\u7aef\u53e3ID\u3002\u5f88\u660e\u663e\uff0c\u8fd9\u91ccPort1 \u5230\u6839\u7684\u6839\u8def\u5f84\u5f00\u9500\u66f4\u5c0f\uff0c\u800c\u4ecePort2\u5230\u6839\u5462\uff0c\u9664\u4e86\u81ea\u5df1\u63a5\u53e3\u7684\u5f00\u9500\u8fd8\u8981\u7d2f\u52a0\u4e0aSW2\u7684Port1\u7684\u5f00\u9500\u3002\u6240\u4ee5 SW3\u4e0a\uff0cPort1\u6210\u4e3a\u4e86\u6839\u7aef\u53e3\u3002","title":"\u5728\u6bcf\u4e2a\u975e\u6839\u6865\u4e0a\u9009\u4e3e\u4e00\u4e2a\u6839\u7aef\u53e3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#designated-port","text":"\u975e\u6839\u6865\u9009\u4e3e\u51fa\u6839\u7aef\u53e3\u540e\uff0c\u4f1a\u5c06\u6839\u7aef\u53e3\u4e0a\u6536\u5230\u7684\u914d\u7f6eBPDU\u8fdb\u884c\u8ba1\u7b97\uff1a\u4e3a\u672c\u4ea4\u6362\u673a\u4e0a\u7684\u5176\u4ed6\u7aef\u53e3\u5404\u8ba1\u7b97\u4e00\u4efd\u914d\u7f6eBPDU\uff0c\u800c\u8fd9\u4e9b\u63a5\u53e3\u4e5f\u4f1a\u4ece\u7f51\u7edc\u4e2d\u6536\u5230\u914d\u7f6eBPDU\uff0c\u6b64\u65f6\u4ea4\u6362\u673a\u4f1a\u6bd4\u8f83\u8fd9\u4e24\u4efd\u914d\u7f6eBPDU\uff0c\u5982\u679c\u524d\u8005\u66f4\u4f18\uff0c\u5219\u8be5\u7aef\u53e3\u6210\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u5982\u679c\u540e\u8005\u66f4\u4f18\uff0c\u5219\u8be5\u7aef\u53e3\u6210\u4e3a\u975e\u6307\u5b9a\u7aef\u53e3\u5e76\u4e14\u5c06\u88ab\u963b\u585e\u3002 \u4ea4\u6362\u673a\u6839\u636e\u6839\u7aef\u53e3\u4e0a\u6536\u5230\u7684\u6700\u4f18\u914d\u7f6eBPDU\u540e\u4e3a\u5176\u4ed6\u7aef\u53e3\u8ba1\u7b97\u914d\u7f6eBPDU\u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a \u914d\u7f6eBPDU\u4e2d\u7684\u6839\u6865ID\u66ff\u6362\u4e3a\u6839\u7aef\u53e3\u7684\u914d\u7f6eBPDU\u7684\u6839\u6865ID\uff1b \u6839\u8def\u5f84\u5f00\u9500\u66ff\u6362\u4e3a\u6839\u7aef\u53e3\u914d\u7f6eBPDU\u7684\u6839\u8def\u5f84\u5f00\u9500\u52a0\u4e0a\u6839\u7aef\u53e3\u7684\u5f00\u9500\uff1b \u6865ID\u66ff\u6362\u4e3a\u81ea\u8eab\u8bbe\u5907\u7684\u6865ID\uff1b \u7aef\u53e3ID\u66ff\u6362\u4e3a\u81ea\u8eab\u7aef\u53e3ID\u3002","title":"\u4e3a\u6bcf\u4e2a\u6bb5\u9009\u4e3e\u4e00\u4e2a\u6307\u5b9a\u7aef\u53e3\uff08Designated Port\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#non-designated-port","text":"\u6700\u540e\uff0c\u975e\u6307\u5b9a\u7aef\u53e3\u88ab\u963b\u585e\uff0c\u73af\u8def\u5c31\u6253\u7834\u4e86\u3002","title":"\u963b\u585e\u975e\u6307\u5b9a\u7aef\u53e3\uff08Non-Designated Port\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#stp_4","text":"STP\u7684BPDU\u6709\u4e24\u79cd\u7c7b\u578b\uff1a\u914d\u7f6eBPDU\uff08Configuration BPDU\uff09\u53caTCN BPDU\uff08Topology Change BPDU\uff09\u3002\u4e24\u79cdBPDU\u5404\u6709\u5404\u7684\u7528\u9014\u3002","title":"STP\u62a5\u6587"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bpdu","text":"\u5728\u7f51\u7edc\u521a\u5f00\u59cb\u8fd0\u884c\u7684\u9636\u6bb5\uff0c\u6240\u6709\u4ea4\u6362\u673a\u90fd\u4f1a\u4ece\u6240\u6709\u7aef\u53e3\u53d1\u9001\u914d\u7f6eBPDU\uff0c\u5927\u5bb6\u90fd\u8ba4\u4e3a\u81ea\u5df1\u662f\u6839\u6865\uff0c\u968f\u7740\u914d\u7f6eBPDU\u6cdb\u6d2a\u548c\u6536\u96c6\u3001\u8ba1\u7b97\uff0c\u6839\u636e\u914d\u7f6eBPDU\u4e2d\u6240\u542b\u4fe1\u606f\uff0c\u5927\u5bb6PK\u51fa\u6765\u4e2a\u7ed3\u679c\uff0c\u6839\u6865\u88ab\u9009\u4e3e\u51fa\u6765\u4e86\u3002\u5728\u6b64\u4e4b\u540e\u6839\u6865\u4ee5\u9ed8\u8ba42S\u4e3a\u5468\u671f\u53d1\u9001\u914d\u7f6eBPDU\uff0c\u6240\u6709\u7684\u975e\u6839\u4ea4\u6362\u673a\u4ece\u81ea\u5df1\u7684\u6839\u7aef\u53e3\u6536\u5230\u914d\u7f6eBPDU\uff0c\u518d \u4ece\u81ea\u5df1\u7684\u6307\u5b9a\u7aef\u53e3\u8ba1\u7b97BPDU\u53d1\u51fa\u53bb\u3002\u8fd9\u5c31\u6709\u70b9\u50cf\u6211\u4eec\u4ece\u6839\u6865\u5012\u4e00\u76c6\u6c34\u4e0b\u6765\uff0c\u6c34\u5728\u91cd\u529b\u7684\u7275\u5f15\u4e0b\u987a\u7740\u8fd9\u9897\u65e0\u73af\u7684\u6811\u4ece\u4e0a\u5f80\u4e0b\u4e0d\u65ad\u7684\u5f80\u4e0b\u6d41\u3002\u53e6\u5916\uff0c\u88ab\u963b\u585e\u7684\u975e\u6307\u5b9a\u7aef\u53e3\u4f1a\u6e90\u6e90\u4e0d\u65ad\u7684\u6536\u5230\u94fe\u8def\u4e0a\u7684\u914d\u7f6eBPDU \u5e76\u4e00\u76f4\u4fa6\u542c\u4e4b\uff0c\u5f53\u5176\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u518d\u6536\u5230\u914d\u7f6eBPDU\uff0c\u5219\u8ba4\u4e3a\u94fe\u8def\u51fa\u73b0\u4e86\u6545\u969c\uff0c\u5f00\u59cb\u8fdb\u5165\u65b0\u7684\u6536\u655b\u9636\u6bb5\u3002","title":"\u914d\u7f6eBPDU"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bpdu_1","text":"\u5b57\u8282 \u5b57\u6bb5 \u63cf\u8ff0 2 \u534f\u8bae \u4ee3\u8868\u4e0a\u5c42\u534f\u8bae\uff08BPDU\uff09\uff0c\u8be5\u503c\u603b\u4e3a0 1 \u7248\u672c \uff08\u5bf9\u4e8e802.1D\uff0c\u8be5\u5b57\u6bb5\u603b\u4e3a0\uff09 1 TYPE \u201c\u914d\u7f6eBPDU\u201d\u4e3a0x00\u3001\u201cTCN BPDU\u201d\u4e3a0x80 1 \u6807\u5fd7 LSB\u6700\u4f4e\u6709\u6548\u4f4d\u8868\u793aTC\u6807\u5fd7\uff1bMSB\u6700\u9ad8\u6709\u6548\u4f4d\u8868\u793aTCA\u6807\u5fd7 8 \u6839ID \u6839\u7f51\u6865\u7684\u6865ID 4 \u8def\u5f84\u5f00\u9500 \u5230\u8fbe\u6839\u6865\u7684STP cost 8 \u6865ID BPDU\u53d1\u9001\u6865\u7684ID 2 \u7aef\u53e3ID BPDU\u53d1\u9001\u7f51\u6865\u7684\u7aef\u53e3ID\uff08\u4f18\u5148\u7ea7+\u7aef\u53e3\u53f7\uff09 2 \u6d88\u606f\u5bff\u547d Message age \u4ece\u6839\u7f51\u6865\u53d1\u51faBPDU\u4e4b\u540e\u7684\u79d2\u6570\uff08\u8fd9\u4e2aBPDU\u5b58\u6d3b\u4e86\u591a\u957f\u65f6\u95f4\u4e86\uff09\uff0c\u6bcf\u7ecf \u8fc7\u4e00\u4e2a\u7f51\u6865\u90fd\u51cf1\uff0c\u6240\u4ee5\u5b83\u672c\u8d28\u4e0a\u662f\u5230\u8fbe\u6839\u6865\u7684\u8df3\u6570\u3002 2 \u6700\u5927\u5bff\u547d Max age \u5f53\u4e00\u6bb5\u65f6\u95f4\u672a\u6536\u5230\u4efb\u4f55BPDU\uff0c\u751f\u5b58\u671f\u5230\u8fbeMAX age\u65f6\uff0c\u7f51\u6865\u8ba4\u4e3a\u8be5\u7aef\u53e3 \u8fde\u63a5\u7684\u94fe\u8def\u53d1\u751f\u6545\u969c\u3002\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u8fd9\u4e2aBPDU\u7684\u6700\u5927\u5bff\u547d\uff0c 2 HELLO\u65f6\u95f4 \u6839\u7f51\u6865\u8fde\u7eed\u53d1\u9001\u7684BPDU\u4e4b\u95f4\u7684\u65f6\u95f4\u95f4\u9694\u3002 2 \u8f6c\u53d1\u5ef6\u8fdf \u5728\u76d1\u542c\u548c\u5b66\u4e60\u72b6\u6001\u6240\u505c\u7559\u7684\u65f6\u95f4\u95f4\u9694\u3002","title":"\u4e0b\u8868\u662f\u914d\u7f6eBPDU\u7684\u62a5\u6587\u683c\u5f0f\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#tcn-bpdu","text":"\u5f53\u7f51\u7edc\u62d3\u6251\u53d1\u751f\u53d8\u5316\u7684\u65f6\u5019\uff0c\u6700\u5148\u610f\u8bc6\u5230\u53d8\u5316\u7684\u4ea4\u6362\u673a\uff08\u5047\u8bbe\u8be5\u4ea4\u6362\u673a\u4e0d\u662f\u6839\u6865\uff09\u4f1a\u4ece\u6839\u7aef\u53e3\u53d1\u9001TCN BPDU\uff08Topology Change Notofication BPDU\uff0c\u62d3\u6251\u53d8\u66f4\u901a\u77e5BPDU\uff0c\u8be5BPDU\u62a5\u6587\u4e2dTYPE\u5b57\u6bb5=0x80\uff09\uff0c \u4e5f\u5c31\u662f\u671d\u7740\u6839\u6865\u7684\u65b9\u5411\u53d1\u9001TCN BPDU\uff0c\u8fd9\u4e2a\u62a5\u6587\u4f1a\u4e00\u8df3\u4e00\u8df3\u5730\u4f20\u9012\u5230\u6839\u4ea4\u6362\u673a\u3002\u4e0a\u8054\u7684\u4ea4\u6362\u673a\u5728\u6536\u5230\u4e86\u8be5\u4ea4\u6362\u673a\u53d1\u9001\u4e0a\u6765\u7684TCN BPDU\u540e\uff0c\u9664\u4e86\u5411\u5b83\u81ea\u5df1\u7684\u4e0a\u4e00\u7ea7\u4ea4\u6362\u673a\u7ee7\u7eed\u53d1\u9001TCN BPDU\u5916\uff0c\u8fd8\u9700\u56de\u9001\u4e00\u4e2aTCA BPDU\uff08FLAG\u5b57\u6bb5\u4e2dTCA\u4f4d\u4e3a1\u7684\u914d\u7f6eBPDU\uff09\u7684\u786e\u8ba4\u4fe1\u606f\u7ed9\u8be5\u4ea4\u6362\u673a\u3002\u5f53\u6839\u6865\u63a5\u6536\u5230 TCN\u540e\u610f\u8bc6\u5230\u4e86\u62d3\u6251\u53d8\u5316\uff0c\u9042\u5411\u6240\u6709\u7f51\u6865\u53d1\u9001TC BPDU\uff08FLAG\u5b57\u6bb5\u4e2dTC\u4f4d\u4e3a1\u7684\u914d\u7f6eBPDU\uff09\u3002 \u4ea4\u6362\u673a\u4eec\u6536\u5230\u6839\u6865\u53d1\u51fa\u6765\u7684TC BPDU\u540e\uff0c\u4f1a\u7acb\u5373\u5220\u9664\u81ea\u5df1\u7684MAC\u5730\u5740\u8868\uff0c\u4ee5\u4fbf\u9002\u5e94\u65b0\u7684\u7f51\u7edc\u62d3\u6251\u3002","title":"TCN BPDU"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#stp_5","text":"STP\u6709\u4e09\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u8ba1\u65f6\u5668\uff1a Hello Timer\uff1a\u6839\u6865\u5468\u671f\u6027\u53d1\u9001\u914d\u7f6eBPDU\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u7f3a\u7701\u4e3a2s\u3002 \u8f6c\u53d1\u5ef6\u8fdf\u8ba1\u65f6\u5668\uff08Forward Delay Timer\uff09\uff1a\u63a5\u53e3\u4eceListening\u8f6c\u6362\u5230Learning\u72b6\u6001\uff0c\u6216\u8005\u4eceLearning\u8f6c\u6362\u5230Forwarding\u72b6\u6001\u8fc7\u7a0b\u4e2d\u6240\u9700\u7b49\u5f85\u7684\u65f6\u95f4\uff0c\u7f3a\u7701\u4e3a15s\u3002 \u6700\u5927\u751f\u5b58\u65f6\u95f4\uff08Max Age Timer\uff09\uff1a\u5728\u4e22\u5f03\u914d\u7f6eBPDU\u4e4b\u524d\uff0c\u4ea4\u6362\u673a\u7528\u6765\u5b58\u50a8\u914d\u7f6eBPDU\u7684\u65f6\u95f4\uff0c\u7f3a\u7701 \u4e3a20s\u3002\u5982\u679c\u4e00\u4e2a\u88ab\u963b\u585e\u7684\u63a5\u53e3\uff08\u975e\u6307\u5b9a\u7aef\u53e3\uff09\u5728\u6536\u5230\u4e00\u4e2a\u914d\u7f6eBPDU\u540e\uff0c20s\u5185\u6ca1\u6709\u518d\u6b21\u6536\u5230\u914d\u7f6eBPDU\uff0c\u5219\u5207\u6362\u5230Listening\u72b6\u6001\u3002 \u7f51\u7edc\u4e2d\u7684\u751f\u6210\u6811\u62d3\u6251\u4f9d\u9644\u4e8e\u6839\u6865\u7684\u8ba1\u65f6\u5668\uff0c\u6839\u6865\u5c06\u914d\u7f6eBPDU\u4e2d\u7684\u8ba1\u65f6\u5668\u65f6\u95f4\u95f4\u9694\u4f20\u9012\u7ed9\u6240\u6709\u4ea4\u6362\u673a\u3002\u5bf9\u4e8e 802.1D\u6807\u51c6\u7684STP\u800c\u8a00\uff0c\u7aef\u53e3\u4eceBlocking\u5230Forwarding\u901a\u5e38\u898130-50s\uff0830s\u662f15+15\uff0c\u4e5f\u5c31\u662f\u4e24\u4e2a\u8f6c\u53d1\u5ef6\u8fdf\u65f6\u95f4\uff0c50s\u537320+15+15\uff09\u3002","title":"STP\u7684\u8ba1\u65f6\u5668"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#stp_6","text":"\u5173\u4e8e\u4e3a\u4ec0\u4e48\u8981\u5b9a\u4e49\u8fd9\u4e48\u591a\u7684\u7aef\u53e3\u72b6\u6001\uff0c\u5176\u5b9e\u5f88\u597d\u7406\u89e3\uff0c\u62ffLearning\u6765\u8bf4\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u8ba9\u7aef\u53e3\u4e00\u65e6\u88ab\u9009\u4e3e\u4e3a\u6307\u5b9a\u7aef\u53e3\u540e\u7acb\u5373\u8fdb\u5165\u8f6c\u53d1\u72b6\u6001\u5462\uff1f\u8bbe\u60f3\u4e00\u4e0b\uff0c\u7aef\u53e3\u6fc0\u6d3b\u540e\uff0c\u4ea4\u6362\u673a\u5728\u8be5\u7aef\u53e3\u662f\u6ca1\u6709\u5b66\u4e60\u5230\u4efb\u4f55\u7684MAC\u5730\u5740\u8868\u9879\u7684\uff0c\u5982\u679c\u6ca1\u6709\u8bbe\u8ba1Learning\u72b6\u6001\u7684\u8bdd\uff0c\u7aef\u53e3\u5c06\u76f4\u63a5\u8fdb\u5165\u8f6c\u53d1\u72b6\u6001\uff0c\u90a3\u4e48\u5c31\u6709\u53ef\u80fd\u5f15\u53d1\u77ed\u6682\u7684\u6570\u636e\u6cdb\u6d2a\uff08\u4ea4\u6362\u673a\u6536\u5230\u76ee\u7684MAC\u5730\u5740\u672a\u77e5\u7684\u6570\u636e\u5e27\u65f6\u4f1a\u8fdb\u884c\u6cdb\u6d2a\uff09\u3002 \u4e0b\u56fe\u662f\u6bcf\u4e2a\u72b6\u6001\u7684\u5207\u6362\u5173\u7cfb\u56fe\uff1a","title":"STP\u7aef\u53e3\u72b6\u6001"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#stp_7","text":"","title":"STP\u7684\u57fa\u7840\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_36","text":"\u6307\u5b9a\u751f\u6210\u6811\u534f\u8bae\u7c7b\u578b\uff08STP/RSTP/MSTP\uff09\uff1a \u914d\u7f6e\u4ea4\u6362\u673a\u4f18\u5148\u7ea7\uff1a \u914d\u7f6e\u8be5\u4ea4\u6362\u673a\u6210\u4e3a\u4e3b\u6839\u6865\uff1a \u914d\u7f6e\u8be5\u4ea4\u6362\u673a\u6210\u4e3a\u6b21\u6839\u6865\uff1a \u542f\u7528\u751f\u6210\u6811\uff1a \u914d\u7f6e\u7aef\u53e3STP\u4f18\u5148\u7ea7\uff1a \u914d\u7f6e\u7aef\u53e3\u8def\u5f84\u5f00\u9500\uff1a","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_37","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0c\u5728SW1\u3001SW2\u53caSW3\u4e0a\u8fd0\u884cSTP\uff0c\u5e76\u5c06SW1\u6307\u5b9a\u4e3a\u4e3b\u6839\u6865\uff0cSW2\u6307\u5b9a\u4e3a\u6b21\u6839\u6865\uff0c \u6700\u7ec8\u9700\u4f7f\u5f97SW3\u7684GE0/0/22\u63a5\u53e3\u88ab\u963b\u585e\u3002 \u4ece\u62d3\u6251\u6211\u4eec\u80fd\u975e\u5e38\u76f4\u89c2\u7684\u770b\u51fa\uff0c\u5728\u7269\u7406\u4e0a\u8fd9\u662f\u4e00\u4e2a\u5197\u4f59\u7684\u73af\u5883\uff0c\u5e76\u4e14\u5b58\u5728\u4e8c\u5c42\u73af\u8def\u3002\u4e00\u65e6\u5728\u8fd9\u4e2a\u7f51\u7edc\u4e2d\u51fa\u73b0\u6d41\u91cf\uff0c\u90a3\u4e48\u6d41\u91cf\u5c31\u5f88\u6709\u53ef\u80fd\u5728\u73af\u8def\u4e2d\u88ab\u4e0d\u65ad\u6cdb\u6d2a\u4ece\u800c\u5bfc\u81f4\u5e7f\u64ad\u98ce\u66b4\u3002\u5f53\u51fa\u73b0\u5e7f\u64ad\u98ce\u66b4\u65f6\uff0c\u6211\u4eec\u80fd\u4ece\u8bbe\u5907\u7684\u6307\u793a\u706f\u4e0a\u89c2\u5bdf\u5230\u975e\u5e38\u76f4\u89c2\u7684\u73b0\u8c61\uff1a\u8bbe\u5907\u7684\u6307\u793a\u706f\u4f1a\u51fa\u73b0\u975e\u5e38\u89c4\u5f8b\u7684\u201c\u9f50\u95ea\u201d\u3002\u53e6\u5916\uff0c\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u5e26\u5bbd\u5229\u7528\u7387\u53ef\u80fd\u4f1a\u6500\u5347\u5230\u4e00\u4e2a\u6bd4\u8f83\u9ad8\u7684\u503c\uff0c\u800c\u4e14\u5982\u679c\u5e7f\u64ad\u98ce\u66b4\u6bd4\u8f83\u4e25\u91cd\uff0c\u4ea4\u6362\u673a\u7684CPU\u5229\u7528\u7387\u4e5f\u53ef\u80fd\u4f1a\u98d9\u9ad8\uff0c\u4ece\u800c\u5f71\u54cd\u5230\u5176\u5de5\u4f5c\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5728\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cSTP\u5f00\u59cb\u5de5\u4f5c\uff0c\u5e76\u5f00\u59cb\u9009\u4e3e\u6839\u6865\uff0c\u4e09\u53f0\u4ea4\u6362\u673a\u4e2d\uff0cSTP\u6865ID\uff08\u6865\u4f18\u5148\u7ea7\u548c\u6865MAC\uff09 \u6700\u5c0f\u7684\u4ea4\u6362\u673a\u5c06\u6210\u4e3a\u672c\u4ea4\u6362\u7f51\u7edc\u7684\u6839\u6865\u3002\u5f53\u7136\uff0c\u6240\u6709\u7684\u4ea4\u6362\u673a\u9ed8\u8ba4\u7684\u6865\u4f18\u5148\u7ea7\u4e3a32768\uff0c\u8fd9\u6837\u4e00\u6765\u62e5\u6709\u6700\u5c0f\u80cc\u677fMAC\u7684\u4ea4\u6362\u673a\u5c06\u6210\u4e3a\u7f51\u7edc\u7684\u6839\u6865\uff0c\u8fd9\u663e\u7136\u5e26\u6709\u4e00\u5b9a\u7684\u968f\u673a\u6027\uff0c\u5728\u5b9e\u9645\u7684\u7f51\u7edc\u90e8\u7f72\u4e2d\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u624b\u5de5\u6307\u5b9a\u4e00\u53f0\u8bbe\u5907\u6210\u4e3a\u6839\u6865\uff0c\u4ece\u800c\u4fdd\u8bc1\u751f\u6210\u6811\u8ba1\u7b97\u7684\u7a33\u5b9a\u6027\u3002\u4f8b\u5982\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u624b\u5de5\u6307\u5b9aSW1 \u6210\u4e3a\u7f51\u7edc\u7684\u4e3b\u6839\u6865\uff0cSW2\u6210\u4e3a\u7f51\u7edc\u7684\u6b21\u6839\u6865\uff1a SW1\u4e0a\u589e\u52a0\u7684\u914d\u7f6e\u5982\u4e0b\uff1a [SW1] stp root primary SW2\u4e0a\u589e\u52a0\u7684\u914d\u7f6e\u5982\u4e0b\uff1a [SW2] stp root secondary \u73b0\u5728\uff0c\u6211\u4eec\u518d\u770b\u770b\u5b9e\u9a8c\u6548\u679c\uff0c\u5728SW1\u4e0a\u67e5\u770bSTP\u7684\u5168\u5c40\u4fe1\u606f\uff1a \u4ece\u8f93\u51fa\u7684\u4fe1\u606f\u6211\u4eec\u5f97\u77e5\uff0c\u672c\u4ea4\u6362\u673a\u7684\u6865ID\u4e3a 0\uff1a4c1f-cc06-71d8\uff0c\u5176\u4e2d0\u4e3a\u4ea4\u6362\u673a\u7684\u6865\u4f18\u5148\u7ea7\uff0c\u8fd9\u663e\u7136 \u662f\u6211\u4eec\u7684\u547d\u4ee4**stp root primary**\u7684\u4f5c\u7528\uff0c\u4ea4\u6362\u673a\u7684\u4f18\u5148\u7ea7\u88ab\u914d\u7f6e\u4e3a0\u2014\u2014\u6700\u5c0f\u503c\u4e5f\u662f\u6700\u4f18\u7684\u503c\u30024c1f- cc06-71d8\u662f\u672c\u673a\u7684MAC\u5730\u5740\u3002\u800c\u4e0a\u8ff0\u8f93\u51fa\u7684\u4fe1\u606f\u4e2d\uff0c\u6839\u6865\u7684MAC\u4e5f\u662f4c1f-cc06-71d8\uff0c\u8fd9\u5c31\u8868\u660e\uff0c\u672c\u4ea4\u6362\u673a\u5c31\u662f\u7f51\u7edc\u7684\u6839\u6865\u3002\u518d\u6765\u67e5\u770b\u4e0bSW1\u7684\u751f\u6210\u6811\u63a5\u53e3\u72b6\u6001\uff1a \u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770bSTP\u7684\u76f8\u5173\u7b80\u5316\u4fe1\u606f\uff0c\u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u51fa\uff0cSW1\u7684\u4e24\u4e2a\u63a5\u53e3\u90fd\u662f\u6307\u5b9a\u63a5\u53e3\uff08DESI\uff09\uff0c\u5e76\u4e14\u90fd\u662fForwarding\u8f6c\u53d1\u72b6\u6001\u3002 \u518d\u53bbSW2\u4e0a\u770b\u770b\uff1a [SW2] display stp -------[CIST Global Info][Mode STP]------- CIST Bridge :4096 .4c1f-cc34-71cd #\u672c\u673a\u7684\u6865ID Config Times :Hello 2s MaxAge 20s FwDly 15s MaxHop 20 Active Times CIST Root/ERPC :Hello 2s MaxAge 20s FwDly 15s MaxHop 20 :0 .4c1f-cc06-71d8 / 1 #\u6839\u6865\u7684\u6865ID\uff0c\u4e5f\u5c31\u662fSW1 CIST RegRoot/IRPC :4096 .4c1f-cc34-71cd / 0 CIST RootPortId :128.24 BPDU-Protection :Disabled CIST Root Type :Secondary root SW2\u4e3a\u6b21\u6839\u6865\uff0c\u5b83\u5c06\u5728\u68c0\u6d4b\u5230SW1\u51fa\u73b0\u6545\u969c\u540e\uff0c\u66ff\u4ee3\u5b83\u6210\u4e3a\u7f51\u7edc\u7684\u6839\u6865\u3002 \u6211\u60f3\uff0c\u4f60\u5df2\u7ecf\u80fd\u60f3\u5230SW3\u4e0a\u54ea\u4e00\u4e2a\u7aef\u53e3\u5c06\u88abBlocked\u4e86\uff1a SW3\u7684GE0/0/22\u53e3\u73b0\u5728\u662fDiscarding\u72b6\u6001\uff0c\u88ab\u963b\u585e\u4e86\u3002\u8fd9\u662f\u56e0\u4e3a\u8fd9\u4e2a\u63a5\u53e3\u5230\u8fbe\u6839\u6865SW1\u7684\u5f00\u9500\u6700\u5927\u3002 \u5982\u679c\u6b64\u65f6\u5e0c\u671bSW3\u88ab\u963b\u585e\u7684\u4e0d\u662fGE0/0/22\u53e3\uff0c\u800c\u662fGE0/0/21\u53e3\u5462\uff1f\u4e00\u79cd\u53ef\u9009\u7684\u529e\u6cd5\u662f\uff0c\u5c06GE0/0/21 \u7684\u63a5\u53e3\u5f00\u9500\u8c03\u5927\uff0c\u4f7f\u5f97\u4ece\u8fd9\u4e2a\u63a5\u53e3\u4e0a\u6536\u5230\u914d\u7f6eBPDU\u540e\uff0c\u7d2f\u52a0\u7684\u6839\u8def\u5f84\u5f00\u9500\u6bd4GE0/0/22\u53e3\u7684\u7d2f\u52a0\u503c\u8981\u5927\uff0c \u4e5f\u5c31\u662f\u4f7f\u5f97\u8fd9\u4e2a\u63a5\u53e3\u8ddd\u79bb\u6839\u6865SW1\u7684\u201c\u5f00\u9500\u201d\u66f4\u5927\u3001\u201c\u66f4\u8fdc\u201d\u3002 SW3\u589e\u52a0\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u68c0\u67e5\u4e00\u4e0bSW3\u7684\u63a5\u53e3\u89d2\u8272\u548c\u72b6\u6001\uff1a [SW3] display stp brief MSTID Port Role STP State Protection 0 GigabitEthernet0/0/21 ALTE DISCARDING NONE 0 GigabitEthernet0/0/22 ROOT DISCARDING NONE STP \u7684\u7279\u6027\u53ca\u4f18\u5316","title":"\u57fa\u7840\u5b9e\u9a8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#stpbpdu","text":"[Switch-GigabitEthernet0/0/1] stp disable \u4e0a\u8ff0\u547d\u4ee4\u7528\u4e8e\u5728\u63a5\u53e3\u4e0a\u5173\u95edSTP\u3002\u5982\u679c\u4ea4\u6362\u673a\u5728\u5168\u5c40\u4f7f\u80fd\u4e86STP\uff0c\u5219\u6240\u6709\u63a5\u53e3\u4e5f\u5c06\u6fc0\u6d3bSTP\u3002\u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\uff0c\u5c06\u4f1a\u5173\u95ed\u67d0\u4e2a\u7279\u5b9a\u63a5\u53e3\u7684STP\uff0c\u8fd9\u6837\u4e00\u6765\u8fd9\u4e2a\u63a5\u53e3\u5c06\u4e0d\u518d\u53c2\u4e0eSTP\u8ba1\u7b97\uff0c\u6b64\u540e\uff0c\u4f7f\u7528**display stp interface** \u547d\u4ee4\u4f1a\u770b\u5230\u8be5\u63a5\u53e3\u7684STP\u88ab\u7981\u7528\uff0c\u4f7f\u7528**display stp brief**\u547d\u4ee4\u5219\u4e0d\u4f1a\u770b\u5230\u8fd9\u4e2a\u63a5\u53e3\u51fa\u73b0\u5728STP\u63a5\u53e3\u5217\u8868\u4e2d\u3002 \u5f53\u4ea4\u6362\u673a\u7684\u4e00\u4e2a\u63a5\u53e3\u8fde\u63a5\u7740\u4e00\u53f0\u8def\u7531\u5668\uff08\u7684\u8def\u7531\u63a5\u53e3\uff09\u6216\u8005\u5176\u4ed6\u4e0d\u53ef\u80fd\u4ea7\u751f\u4e8c\u5c42\u73af\u8def\u7684\u8bbe\u5907\u65f6\uff0c\u5728\u4ea4\u6362\u673a\u7684\u8fd9\u4e2a\u63a5\u53e3\u4e0a\u8fd0\u884cSTP\u5b9e\u9645\u4e0a\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u8003\u8651\u5c06\u8be5\u63a5\u53e3\u7684STP\u5173\u95ed\u3002 [Switch-GigabitEthernet0/0/2] bpdu disable \u63a5\u53e3\u7ea7\u547d\u4ee4**bpdu enable**\u7528\u6765\u914d\u7f6e\u63a5\u53e3\u4e0a\u9001BPDU\u62a5\u6587\uff0c\u63a5\u53e3\u5bf9\u76ee\u7684MAC\u5730\u5740\u5c5e\u4e8eBPDU MAC\u7684\u62a5\u6587\u4e0a\u9001 CPU\u5904\u7406\uff0cBPDU MAC\u53ef\u4ee5\u901a\u8fc7**display bpdu mac-address**\u547d\u4ee4\u67e5\u770b\uff0c\u800c**bpdu disable**\u547d\u4ee4\u5c06\u4f7f\u63a5\u53e3\u628a\u6536\u5230\u7684BPDU\u62a5\u6587\u4e22\u5f03\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u9519\u8bef\u7684\u914d\u7f6e**bpdu disable**\u5c06\u4f1a\u5bfc\u81f4STP\u8ba1\u7b97\u7684\u9519\u8bef\u4ece\u800c\u5bfc\u81f4\u73af\u8def\uff0c\u56e0\u6b64\u8be5\u547d\u4ee4\u8981\u683c\u5916\u7559\u610f\u3002S5300 V100R005C01SPC100\u7248\u672c\u7684\u4ea4\u6362\u673a\u9ed8\u8ba4\u5728STP\u5168\u5c40\u6fc0\u6d3b\u7684\u60c5\u51b5\u4e0b\u63a5\u53e3\u7684bpdu\u662fdisable\u7684 \uff08S5300\u7684\u5176\u4ed6\u8f6f\u4ef6\u7248\u672c\u5219\u8981\u770b\u7248\u672c\u7684\u63cf\u8ff0\uff09\uff0c\u9700\u8981\u6ce8\u610f\u8fd9\u4e00\u70b9\u3002","title":"STP\u53caBPDU\u53d6\u6d88\u4f7f\u80fd"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#edged-port","text":"","title":"\u8fb9\u7f18\u7aef\u53e3\uff08Edged-port\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_38","text":"\u6211\u4eec\u77e5\u9053\u5728\u8fd0\u884c\u4e86STP\u7684\u4ea4\u6362\u673a\u4e0a\uff0c\u4e00\u4e2a\u7aef\u53e3\u5728UP\u4e4b\u540e\uff0c\u9700\u8981\u7ecf\u8fc7Listening\u3001Learning\u4e24\u4e2a\u72b6\u6001\u624d\u80fd\u591f\u6700\u7ec8\u8fdb\u5165Forwarding\u72b6\u6001\u5f00\u59cb\u8f6c\u53d1\u6570\u636e\u5e27\uff08\u5f53\u7136\u524d\u63d0\u662f\u8be5\u7aef\u53e3\u4e0d\u80fd\u662f\u975e\u6307\u5b9a\u7aef\u53e3\uff09\uff0c\u8fd9\u91cc\u5c31\u8017\u8d39\u4e86\u4e24\u4e2a15s\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002\u8fd9\u5b9e\u9645\u4e0a\u662f\u975e\u5e38\u4f4e\u6548\u7684\u3002 \u4ea4\u6362\u673a\u8fde\u63a5\u7ec8\u7aef\u8bbe\u5907\uff08\u4f8b\u5982PC\u3001\u670d\u52a1\u5668\u7b49\uff09\u7684\u7aef\u53e3\u4e00\u822c\u662f\u4e0d\u4f1a\u4ea7\u751f\u4e8c\u5c42\u73af\u8def\u7684\uff0c\u5176\u5b9e\u5e76\u4e0d\u9700\u8981\u4e0a\u8ff0\u72b6\u6001\u7684\u5207\u6362\u8fc7\u7a0b\uff0c\u53ef\u76f4\u63a5\u8fdb\u5165\u8f6c\u53d1\u72b6\u6001\uff0c\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\u3002\u5c06\u4ea4\u6362\u673a\u8fde\u63a5\u7ec8\u7aef\u8bbe\u5907\u7684\u7aef\u53e3\u914d\u7f6e\u4e3a\u8fb9\u7f18\u7aef\u53e3 \uff08Edge-port\uff09\u5373\u53ef\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002\u8fb9\u7f18\u7aef\u53e3\u4e0d\u53c2\u4e0e\u751f\u6210\u6811\u7684\u8ba1\u7b97\uff0c\u5b83\u53ef\u4ee5\u5728UP\u540e\u7acb\u5373\u8fdb\u5165\u8f6c\u53d1\u72b6\u6001\u3002\u53e6\u5916\uff0c\u8fb9\u7f18\u7aef\u53e3\u7684UP/DOWN\u4e0d\u4f1a\u89e6\u53d1STP\u62d3\u6251\u53d8\u66f4\u800c\u53d1\u751fTC\u62a5\u6587\u3002 \u5728\u6ca1\u6709\u914d\u7f6eBPDU\u4fdd\u62a4\uff08\u5c06\u5728\u540e\u7eed\u7684\u5185\u5bb9\u4e2d\u4ecb\u7ecd\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u8fb9\u7f18\u7aef\u53e3\u4e00\u65e6\u6536\u5230BPDU\uff0c\u5c31\u4e27\u5931\u4e86\u8fb9\u7f18 \u7aef\u53e3\u5c5e\u6027\uff0c\u6210\u4e3a\u4e86\u666e\u901a\u7684STP\u7aef\u53e3\u3002","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_39","text":"\u8fd0\u884c\u4e86STP\u7684\u4ea4\u6362\u673a\uff0c\u5728\u5176\u8fde\u63a5\u7ec8\u7aef\u8bbe\u5907\u7684\u63a5\u53e3\u4e0a\u90fd\u53ef\u4ee5\u5f00\u542f\u8be5\u7279\u6027\u3002 \u5728\u5b9e\u9645\u7684\u9879\u76ee\u4e2d\uff0c\u5982\u679c\u7f51\u7edc\u4e2d\u91c7\u7528ATAE/E9000\u8bbe\u5907\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u90a3\u4e48\u6211\u4eec\u4f1a\u5c06ATAE/E9000\u7684\u4ea4\u6362\u677f\u8fde\u63a5\u4e1a\u52a1\u677f\u7684\u5185\u90e8\u63a5\u53e3\u914d\u7f6e\u4e3a\u8fb9\u7f18\u7aef\u53e3\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u7aef\u53e3\u7528\u4e8e\u8fde\u63a5\u5200\u7247\u670d\u52a1\u5668\u7684\u7f51\u5361\uff08\u7f51\u5361\u5de5\u4f5c\u5728\u4e09\u5c42\u6a21\u5f0f\uff09\uff0c\u5982\u56fe\u4e2d\u6240\u793a\u3002","title":"\u914d\u7f6e\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bpduprotection","text":"","title":"BPDU\u4fdd\u62a4\uff08Protection\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_40","text":"\u8fb9\u7f18\u7aef\u53e3\u4e00\u822c\u7528\u4e8e\u76f4\u63a5\u548c\u7528\u6237\u7ec8\u7aef\u76f8\u8fde\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u8fb9\u7f18\u7aef\u53e3\u4e0d\u4f1a\u6536\u5230BPDU\u62a5\u6587\uff08\u56e0\u4e3a\u8fde\u63a5\u7684\u662f\u7ec8\u7aef\uff0c\u800c\u4e0d\u662f\u4ea4\u6362\u8bbe\u5907\uff09\u3002\u4f46\u662f\u5982\u679c\u653b\u51fb\u8005\u4f2a\u9020BPDU\u6076\u610f\u653b\u51fb\u4ea4\u6362\u673a\u90a3\u5c31\u4f1a\u5b58\u5728\u5b89\u5168\u9690\u60a3\uff08\u6216\u8005\u63a5\u53e3\u8bef\u63a5\u4e86\u4ea4\u6362\u673a\uff0c\u90a3\u4e48\u5c31\u6709\u53ef\u80fd\u4ea7\u751f\u73af\u8def\uff09\uff0c\u5f53\u8fb9\u7f18\u7aef\u53e3\u63a5\u6536\u5230BPDU\u65f6\uff0c\u8bbe\u5907\u4f1a\u81ea\u52a8\u5c06\u8fb9\u7f18\u7aef\u53e3\u8bbe\u7f6e\u4e3a\u975e\u8fb9\u7f18\u7aef\u53e3\uff0c\u5e76\u91cd\u65b0\u8fdb\u884c\u751f\u6210\u6811\u8ba1\u7b97\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5c31\u6709\u53ef\u80fd\u5f15\u8d77\u7f51\u7edc\u7684\u9707\u8361\u3002 \u901a\u8fc7\u4f7f\u80fdBPDU\u4fdd\u62a4\u53ef\u4ee5\u9632\u6b62\u4f2a\u9020BPDU\u6076\u610f\u653b\u51fb\u3002","title":"\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_41","text":"\u4ea4\u6362\u673a\u4e0a\u542f\u52a8BPDU\u4fdd\u62a4\u529f\u80fd\u540e\uff0c\u5982\u679c\u8fb9\u7f18\u7aef\u53e3\u6536\u5230BPDU\u62a5\u6587\uff0c\u8bbe\u5907\u5c06\u5173\u95ed\uff08shutdown\uff09\u8fd9\u4e9b\u7aef\u53e3\uff0c \u540c\u65f6\u901a\u77e5\u7f51\u7ba1\u7cfb\u7edf\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u4ea4\u6362\u673a\u7684BPDU\u4fdd\u62a4\u529f\u80fd\u5e76\u672a\u5f00\u542f\u3002","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_42","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u5728SW3\u4e0a\u5c06GE0/0/1 \u914d\u7f6e\u4e3a\u8fb9\u7f18\u7aef\u53e3\uff0c\u968f\u540e\u5728SW3\u4e0a\u5f00\u542f\u4e86BPDU- Protection\u7279\u6027\u3002\u5f53SW3\u7684GE0/0/1\u53e3\u6536\u5230BPDU\u62a5\u6587\u65f6\uff0c\u4ea4\u6362\u673a\u5c06\u4ea7\u751f\u5982\u4e0b\u63d0\u793a\u4fe1\u606f\uff0c\u5e76\u5c06GE0/0/1\u53e3shutdown\uff1a \u6b64\u65f6\u5728SW3\u4e0a\u67e5\u770b\u63a5\u53e3\u7684STP\u4fe1\u606f\u5982\u4e0b\uff1a \u8981\u6062\u590d\u88abshutdown\u7684BPDU\u53d7\u4fdd\u62a4\u8fb9\u7f18\u7aef\u53e3\uff0c\u53ef\u4f7f\u7528\u624b\u5de5\u5728\u63a5\u53e3\u4e0b\u6267\u884c**undo shutdown**\u547d\u4ee4\u7684\u65b9\u5f0f\uff0c \u6216\u8005\u91c7\u7528\u81ea\u52a8\u6062\u590d\u7684\u65b9\u5f0f\uff0c\u5373\u5728\u7cfb\u7edf\u89c6\u56fe\u4e0b\u6267\u884c\u547d\u4ee4**error-down auto-recovery cause cause-item interval** interval-value \uff0c\u6fc0\u6d3b\u63a5\u53e3\u7ba1\u7406\u72b6\u6001\u81ea\u52a8\u6062\u590d\u4e3aUp\u7684\u529f\u80fd\uff0c\u5e76\u8bbe\u7f6e\u63a5\u53e3\u81ea\u52a8\u6062\u590d\u4e3aUp\u7684\u5ef6\u65f6\u65f6\u95f4\uff0c\u4f7f\u88ab\u5173\u95ed\u7684\u7aef\u53e3\u7ecf\u8fc7\u5ef6\u65f6\u65f6\u95f4\u540e\u80fd\u591f\u81ea\u52a8\u6062\u590d\u3002\u5bf9\u4e8e\u53c2\u6570interval\uff0c\u53d6\u503c\u8303\u56f4\u662f30\uff5e86400\uff0c\u5355\u4f4d\u662f\u79d2\uff0c\u914d\u7f6e\u65f6\u9700\u8981\u6ce8\u610f\u4e24\u70b9\uff1a \u53d6\u503c\u8d8a\u5c0f\u8868\u793a\u63a5\u53e3\u7684\u7ba1\u7406\u72b6\u6001\u81ea\u52a8\u6062\u590d\u4e3aUp\u7684\u5ef6\u8fdf\u65f6\u95f4\u8d8a\u77ed\uff0c\u63a5\u53e3Up/Down\u72b6\u6001\u9707\u8361\u9891\u7387\u8d8a\u9ad8\u3002 \u53d6\u503c\u8d8a\u5927\u8868\u793a\u63a5\u53e3\u7684\u7ba1\u7406\u72b6\u6001\u81ea\u52a8\u6062\u590d\u4e3aUp\u7684\u5ef6\u8fdf\u65f6\u95f4\u8d8a\u957f\uff0c\u63a5\u53e3\u6d41\u91cf\u4e2d\u65ad\u65f6\u95f4\u8d8a\u957f\u3002","title":"\u914d\u7f6e\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#root-protection","text":"","title":"\u6839\u4fdd\u62a4\uff08Root Protection\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_43","text":"","title":"\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_44","text":"\u5728SW1\u7684GE0/0/24\u53e3\u4e0a\u90e8\u7f72\u4e86\u6839\u4fdd\u62a4\u540e\uff0c\u5f53\u8be5\u63a5\u53e3\u518d\u6536\u5230\u66f4\u4f18\u7684BPDU\u62a5\u6587\u540e\uff0cSW1\u5c06\u8fd9\u4e2a\u63a5\u53e3\u5207\u6362\u5230Discarding\u72b6\u6001\uff0c\u5982\u6b64\u4e00\u6765SW1\u7684\u6839\u6865\u5b9d\u5ea7\u5c31\u80fd\u591f\u5750\u7684\u5f88\u7a33\u5f53\u3002","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_45","text":"\u5728\u4ea4\u6362\u8bbe\u5907\u4e0a\u914d\u7f6e\u6839\u4fdd\u62a4\u529f\u80fd\uff0c\u901a\u8fc7\u7ef4\u6301\u6307\u5b9a\u7aef\u53e3\u7684\u89d2\u8272\u6765\u4fdd\u62a4\u6839\u4ea4\u6362\u8bbe\u5907\u7684\u5730\u4f4d\u3002\u6839\u4fdd\u62a4\u662f\u6307\u5b9a\u7aef\u53e3\u4e0a\u7684\u7279\u6027\u3002\u5f53\u7aef\u53e3\u7684\u89d2\u8272\u662f\u6307\u5b9a\u7aef\u53e3\u65f6\uff0c\u914d\u7f6e\u7684\u6839\u4fdd\u62a4\u529f\u80fd\u624d\u751f\u6548\u3002\u82e5\u5728\u5176\u4ed6\u7c7b\u578b\u7684\u7aef\u53e3\u4e0a\u914d\u7f6e\u6839\u4fdd\u62a4\u529f\u80fd\uff0c\u5219\u4e0d\u4f1a\u751f\u6548\u3002","title":"\u914d\u7f6e\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#loop-protection","text":"","title":"\u73af\u8def\u4fdd\u62a4\uff08Loop Protection\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_46","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u73af\u5883\u4e2d\uff0cSW1\u4e3aSTP\u6839\u6865\uff0cSW3\u7684GE0/0/23\u7531\u4e8e\u88ab\u9009\u4e3e\u4e3a\u975e\u6307\u5b9a\u7aef\u53e3\u56e0\u6b64\u5904\u4e8e Discarding\u72b6\u6001\uff0c\u8be5\u63a5\u53e3\u867d\u7136\u5904\u4e8eDiscarding\u72b6\u6001\uff0c\u4f46\u662f\u4ecd\u7136\u4f1a\u6301\u7eed\u4fa6\u542cSW2\u53d1\u6765\u7684BPDU\u62a5\u6587\u3002 \u73b0\u5728\uff0cSW2\u3001SW3\u4e4b\u95f4\u7684\u94fe\u8def\u7a81\u7136\u53d1\u751f\u4e86\u5355\u5411\u94fe\u8def\u6545\u969c\uff0cSW2\u53d1\u9001\u7684\u62a5\u6587\u65e0\u6cd5\u5230\u8fbeSW3\uff0c\u8fd9\u5c06\u5bfc\u81f4SW3\u7684GE0/0/23\u53e3\u65e0\u6cd5\u518d\u6536\u5230BPDU\uff0c\u56e0\u6b64\u5b83\u8ba4\u4e3aSW2\u53d1\u751f\u4e86\u6545\u969c\uff0c\u4e8e\u662f\u91cd\u65b0\u8fdb\u884cSTP\u8ba1\u7b97\uff0c\u6700\u7ec8GE0/0/23 \u53e3\u7684\u89d2\u8272\u5c06\u5207\u6362\u6210\u6307\u5b9a\u7aef\u53e3\uff0c\u800c\u72b6\u6001\u4e5f\u5c06\u5207\u6362\u5230\u8f6c\u53d1\u72b6\u6001\uff0c\u81f3\u6b64\u5c31\u51fa\u73b0\u4e86\u73af\u8def\uff0c\u56e0\u4e3a\u4eceSW3\u5230SW2\u7684\u5355\u5411\u94fe\u8def\u4ecd\u7136\u5728\u5de5\u4f5c\u3002","title":"\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_47","text":"\u4ea4\u6362\u673a\u7684\u6839\u7aef\u53e3\u53ca\u5904\u4e8eDisacarding\u72b6\u6001\u7684\u63a5\u53e3\u4f1a\u6e90\u6e90\u4e0d\u65ad\u7684\u6536\u5230BPDU\u62a5\u6587\uff0c\u5f53\u8fd9\u4e9b\u7aef\u53e3\u7531\u4e8e\u94fe\u8def\u7684 \u5355\u5411\u6545\u969c\u5bfc\u81f4\u6536\u4e0d\u5230BPDU\u62a5\u6587\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u8fdb\u884cSTP\u7684\u91cd\u65b0\u8ba1\u7b97\u3002\u539f\u6765\u7684\u6839\u7aef\u53e3\u5c31\u4f1a\u53d8\u6210\u6307\u5b9a\u7aef\u53e3\uff0c \u539f\u6765\u5904\u4e8eDiscarding\u72b6\u6001\u7684\u7aef\u53e3\u4f1a\u5207\u6362\u5230Forwarding\u72b6\u6001\uff0c\u4ece\u800c\u5bfc\u81f4\u73af\u8def\u7684\u51fa\u73b0\u3002 \u5728\u6839\u7aef\u53e3\u4e0a\u542f\u7528\u4e86Loop Protection\u540e\uff0c\u5982\u679c\u5176\u7aef\u53e3\u89d2\u8272\u53d1\u751f\u53d8\u5316\uff0c\u4f8b\u5982\u5207\u6362\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u90a3\u4e48\u8be5\u7aef\u53e3\u5c06\u4f1a\u88ab\u963b\u585e\uff0c\u4e5f\u5c31\u662f\u8fdb\u5165Discarding\u72b6\u6001\uff0c\u76f4\u5230\u518d\u6b21\u6536\u5230BPDU\u3002\u5728\u963b\u585e\u7aef\u53e3\u4e0a\u542f\u7528\u4e86Loop Protection\u540e\uff0c \u7aef\u53e3\u5c06\u4e00\u76f4\u5904\u4e8eDiscarding\u72b6\u6001\uff0c\u5373\u4f7f\u8be5\u7aef\u53e3\u88ab\u9009\u4e3e\u4e3a\u6307\u5b9a\u7aef\u53e3\u3002\u5728STP\u4e2d\uff0c\u6b64\u529f\u80fd\u53ea\u80fd\u914d\u7f6e\u5728\u6839\u7aef\u53e3\u3001\u66ff\u4ee3\u7aef\u53e3\u53ca\u5907\u4efd\u7aef\u53e3\u4e0a\u3002","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#1","text":"","title":"\u914d\u7f6e\u5b9e\u73b01\uff08\u8be5\u7279\u6027\u5728\u6839\u7aef\u53e3\u4e0a\u90e8\u7f72\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#loop-protection_1","text":"\u5728STP\u5b8c\u6210\u6536\u655b\u540e\uff0cSW3\u7684GE0/0/22\u53e3\u662f\u6839\u7aef\u53e3\uff0cGE0/0/23\u662f\u66ff\u4ee3\u7aef\u53e3\u5904\u4e8eDiscarding\u72b6\u6001\u3002 \u5728SW1\u7684GE0/0/22\u53e3\u4e0a\u6267\u884c**disable stp**\uff0c\u6765\u6a21\u62df\u94fe\u8def\u51fa\u73b0\u5355\u5411\u6545\u969c\u7684\u60c5\u51b5\uff0c\u5982\u6b64\u4e00\u6765SW3\u5c06\u65e0\u6cd5\u518d\u4eceGE0/0/22\u53e3\u6536\u5230ROOT SW1\u53d1\u9001\u8fc7\u6765\u7684BPDU\u4e86\u3002 STP\u518d\u6b21\u5b8c\u6210\u6536\u655b\u540e\uff0cSW3\u7684GE0/0/23\u53e3\u88ab\u9009\u4e3e\u6210\u4e3a\u6839\u7aef\u53e3\uff0c\u800cGE0/0/22\u53e3\u6210\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u73af\u8def\u5c31\u4ea7\u751f\u4e86\u3002","title":"LOOP Protection \u90e8\u7f72\u524d\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#loop-protection_2","text":"\u73b0\u5728\u6211\u4eec\u5728SW3\u7684GE0/0/22\u53e3\u4e0a\u90e8\u7f72loop protection\u7279\u6027\u3002 SW3\u91cd\u65b0\u8fdb\u884cSTP\u7684\u8ba1\u7b97\uff0cGE0/0/23\u53e3\u6210\u4e3a\u6839\u7aef\u53e3\uff0cGE0/0/22\u53e3\u6210\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u4f46\u662f\u7531\u4e8eGE0/0/22\u53e3\u4e0a\u90e8\u7f72\u4e86Loop Protection\uff0c\u56e0\u6b64\u8be5\u63a5\u53e3\u867d\u7136\u89d2\u8272\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u72b6\u6001\u5374\u4f1a\u4fdd\u6301\u5728Discarding\u72b6\u6001\uff0c \u4ece\u800c\u907f\u514d\u4e86\u73af\u8def\u7684\u51fa\u73b0\u3002","title":"LOOP Protection \u90e8\u7f72\u540e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#2","text":"\u53e6\u5916\u4e00\u4e2a\u793a\u4f8b\u662f\uff0cLoopProtection\u90e8\u7f72\u5728\u66ff\u4ee3\u7aef\u53e3\u4e0a\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002 \u90a3\u4e48\u5f53SW2\u53caSW3\u4e4b\u95f4\u51fa\u73b0\u5355\u5411\u94fe\u8def\u6545\u969c\u65f6\uff0cSW3\u5c06\u65e0\u6cd5\u4eceGE0/0/23\u53e3\u518d\u6536\u5230BPDU\uff0c\u4e8e\u662fSW3\u91cd\u65b0\u8fdb\u884cSTP\u8ba1\u7b97\uff0c\u6b64\u65f6GE0/0/23\u53e3\u6210\u4e3a\u4e86\u6307\u5b9a\u7aef\u53e3\uff0c\u4f46\u662f\u7531\u4e8e\u914d\u7f6e\u4e86Loop Protection\u7279\u6027\uff0c\u56e0\u6b64\u8be5\u63a5\u53e3\u4f1a\u4fdd\u6301\u5728Discarding\u72b6\u6001\uff0c\u4ece\u800c\u907f\u514d\u4e86\u73af\u8def\u7684\u4ea7\u751f\u3002","title":"\u914d\u7f6e\u5b9e\u73b02\uff08\u8be5\u7279\u6027\u5728\u66ff\u4ee3\u7aef\u53e3\u4e0a\u90e8\u7f72\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#tc-protection","text":"\u8bbe\u5907\u5728\u6536\u5230TC-BPDU\u540e\u4f1a\u6267\u884cMAC\u5730\u5740\u8868\u9879\u53caARP\u8868\u9879\u7684\u5220\u9664\u64cd\u4f5c\uff0c\u5982\u679c\u6709\u653b\u51fb\u8005\u4f2a\u9020\u5927\u91cf\u7684TC- BPDU\u62a5\u6587\u5bf9\u4ea4\u6362\u673a\u8fdb\u884c\u653b\u51fb\uff0c\u4ea4\u6362\u673a\u5c06\u9891\u7e41\u7684\u8fdb\u884c\u4e0a\u8ff0\u8868\u9879\u7684\u5220\u9664\u53ca\u5237\u65b0\u64cd\u4f5c\u4ece\u800c\u9020\u6210\u6781\u5927\u7684\u8d1f\u62c5\uff0c \u7ed9\u7f51\u7edc\u7684\u7a33\u5b9a\u5e26\u6765\u5f88\u5927\u7684\u9690\u60a3\u3002 \u5728\u4ea4\u6362\u673a\u4e0a\u5f00\u542fTC-Protection\u540e\uff0c\u4ea4\u6362\u673a\u4f1a\u5728\u6536\u5230TC-BPDU\u540e\u5220\u9664\u4e0a\u8ff0\u8868\u9879\u7684\u540c\u65f6\u542f\u52a8\u5468\u671f\u4e3a10s\u7684\u5b9a\u65f6\u5668\uff0c\u5728\u6b64\u5468\u671f\u5185\uff0c\u5982\u679c\u4ea4\u6362\u673a\u518d\u6b21\u6536\u5230TC-BPDU\u62a5\u6587\uff0c\u5219\u6700\u591a\u53ef\u4ee5\u8fdb\u884c1\u6b21\u5220\u9664\u4e0a\u8ff0\u8868\u9879\u7684\u64cd\u4f5c\uff0c \u4ece\u800c\u5b9e\u73b0\u5bf9\u4ea4\u6362\u673a\u7684\u4fdd\u62a4\u3002 MSTP","title":"TC Protection"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_48","text":"\u53e4\u8001\u7684STP 802.1D\u6807\u51c6\u662f\u6240\u6709VLAN\u5171\u7528\u4e00\u68f5\u751f\u6210\u6811\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u7ba1\u4ea4\u6362\u7f51\u7edc\u4e2d\u5b58\u5728\u591a\u5c11\u4e2aVLAN\uff0cSTP \u8ba1\u7b97\u7684\u7ed3\u679c\u90fd\u662f\u4e00\u68f5\u751f\u6210\u6811\uff0c\u62ff\u4e0a\u56fe\u6765\u8bf4\uff0cSTP\u6700\u7ec8\u5c06\u5982\u56fe\u6240\u793a\u7684\u63a5\u53e3\u963b\u585e\u6389\uff0c\u8fd9\u5c31\u9020\u6210\u6240\u6709VLAN\u7684\u6d41\u91cf\u5747\u8d70SW3\u7684\u5de6\u4fa7\u94fe\u8def\uff0c\u800c\u53f3\u4fa7\u94fe\u8def\u65e0\u6cd5\u5f97\u5230\u6709\u6548\u7684\u5229\u7528\u3002 \u4e8e\u662f\u540e\u6765\u4e1a\u754c\u53c8\u51fa\u73b0\u4e86perVLAN\u7684\u751f\u6210\u6811\u534f\u8bae\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2aVLAN\u4e00\u68f5\u751f\u6210\u6811\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u6bcf\u4e2aVLAN\u90fd\u6709\u5176\u81ea\u5df1\u72ec\u7acb\u7684\u751f\u6210\u6811\uff0c\u57fa\u4e8e\u4e0d\u540c\u7684VLAN\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u4e0d\u540c\u7684\u4f18\u5148\u7ea7\u3001\u63a5\u53e3\u5f00\u9500\u7684\u914d\u7f6e\u4ece\u800c\u5b9e\u73b0\u963b\u585e\u4e0d\u540c\u7684\u7aef\u53e3\uff0c\u8fd9\u6837\u5c31\u80fd\u591f\u5b9e\u73b0\u4e0d\u540c\u7684VLAN\u6d41\u91cf\u5206\u6d41\u7684\u76ee\u7684\u3002\u4f46\u662f\u8fd9\u79cd\u65b9\u6848\u4e5f\u662f\u6709\u4e00\u5b9a\u5f0a\u7aef\u7684\uff0c\u7531\u4e8e\u7f51\u7edc\u4e2d\u7684\u4ea4\u6362\u673a\u9700\u8981\u4e3a\u6bcf\u4e00\u4e2aVLAN\u5355\u72ec\u8fdb\u884c\u751f\u6210\u6811\u8ba1\u7b97\uff0c\u56e0\u6b64\u5f53VLAN\u6570\u91cf\u8f83\u591a\u65f6\uff0c\u751f\u6210\u6811\u7684\u6570\u91cf\u4e5f\u662f\u975e\u5e38\u591a\u7684\uff0c\u7f51\u7edc\u7684\u6bcf\u4e00\u6b21\u9707\u8361\u90fd\u5c06\u89e6\u53d1\u4ea4\u6362\u673a\u4eec\u7684\u91cd\u65b0\u8ba1\u7b97\uff0c\u8fd9\u662f\u76f8\u5f53\u8017\u8d44\u6e90\u7684\u3002 \u8fd9\u5c31\u63d0\u5230\u4e86\u63a5\u4e0b\u53bb\u8981\u4ecb\u7ecd\u7684**MSTP\uff08Multiple Spanning Tree Protocol\uff09**\uff0cMSTP\u534f\u8bae\u662fIEEE 802.1S\u6807\u51c6\u3002\u6240\u8c13MSTP\u4e5f\u5c31\u662f\u591a\u751f\u6210\u6811\u5b9e\u4f8b\uff0c\u901a\u8fc7\u5c06\u591a\u4e2aVLAN\u6620\u5c04\u5230\u4e00\u4e2a\u751f\u6210\u6811\u5b9e\u4f8b\uff08Instance\uff09\uff0c\u4ece\u800c\u57fa\u4e8e\u5b9e\u4f8b\u6765\u8ba1\u7b97\u751f\u6210\u6811\uff0c\u540c\u5c5e\u4e8e\u4e00\u4e2a\u5b9e\u4f8b\u7684VLAN\u4eab\u6709\u540c\u4e00\u68f5\u751f\u6210\u6811\uff0c\u4e0d\u540c\u7684\u5b9e\u4f8b\u5bf9\u5e94\u4e0d\u540c\u7684\u751f\u6210\u6811\uff0c\u8fd9\u6837\uff0c\u65e2\u53ef\u5b9e\u73b0\u6570\u636e\u5206\u6d41\uff0c\u53c8\u80fd\u591f\u6781\u5927\u7a0b\u5ea6\u7684\u51cf\u5c0f\u4ea4\u6362\u673a\u7684\u8ba1\u7b97\u8d1f\u62c5\u3002 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0c\u6211\u4eec\u5c06VLAN10\u3001VLAN20\u6620\u5c04\u5230MSTP\u5b9e\u4f8b1\uff0c\u5c06VLAN30\u3001VLAN40\u6620\u5c04\u5230MSTP\u5b9e\u4f8b2\uff08\u8981\u6c42\u4e3a\u4e09\u53f0\u4ea4\u6362\u673a\u914d\u7f6e\u5b8c\u5168\u76f8\u540c\u7684VLAN\u4e0e\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb\uff09\uff0c\u7136\u540e\u5c06SW1\u914d\u7f6e\u4e3a\u5b9e\u4f8b1\u7684\u4e3b\u6839\u3001\u5c06 SW2\u914d\u7f6e\u4e3a\u5b9e\u4f8b1\u7684\u6b21\u6839\uff1b\u5c06SW2\u914d\u7f6e\u4e3a\u5b9e\u4f8b2\u7684\u4e3b\u6839\u3001\u5c06SW1\u914d\u7f6e\u4e3a\u5b9e\u4f8b2\u7684\u6b21\u6839\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u7f51\u7edc\u4e2d\u5c31\u4f1a\u9488\u5bf9\u5b9e\u4f8b1\u53ca\u5b9e\u4f8b2\u5206\u522b\u4ea7\u751f\u4e00\u68f5\u751f\u6210\u6811\uff0c\u800c\u4e14\u963b\u585e\u4e0d\u540c\u7684\u63a5\u53e3\u3002\u90a3\u4e48VLAN10\u53caVLAN20\u7684\u6d41\u91cf\u5373\u4f1a\u4ece SW3\u7684\u5de6\u4fa7\u94fe\u8def\u8f6c\u53d1\uff0c\u800cVLAN30\u53caVLAN40\u4f1a\u4ece\u53f3\u4fa7\u94fe\u8def\u8f6c\u53d1\uff0c\u6d41\u91cf\u5373\u53ef\u5b9e\u73b0\u8d1f\u8f7d\u5206\u62c5\u3002","title":"\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_49","text":"\u7f29\u5199 \u5168\u79f0 \u63cf\u8ff0 MST Region Multiple Spanning Tree Region \u4e00\u4e2a\u57df\u5305\u542b\u57df\u540d\uff08Configuration Name\uff09\u3001\u4fee\u8ba2\u7ea7 \u522b\uff08Revision Level\uff09\u3001\u683c\u5f0f\u9009\u62e9\u5668\uff08Configuration Identifier Format Selector\uff09\u3001VLAN\u4e0e\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb\uff08mapping of VIDs to spanning trees\uff09\u7b49\u4fe1\u606f\u3002 MSTI Multiple Spanning Tree Instance MSTP\u7684\u975e\u5b9e\u4f8b0\u7684\u5176\u4ed6\u5b9e\u4f8b CST Common Spanning Tree \u516c\u5171\u751f\u6210\u6811 \u662f\u8fde\u63a5\u4ea4\u6362\u7f51\u7edc\u5185\u6240\u6709MST\u57df\u7684\u4e00\u68f5\u751f\u6210\u6811\u3002\u5982 \u679c\u628a\u6bcf\u4e2aMST\u57df\u770b\u4f5c\u662f\u4e00\u4e2a\u8282\u70b9\uff0cCST\u5c31\u662f\u8fd9\u4e9b\u8282\u70b9\u901a\u8fc7STP\u6216RSTP\u534f\u8bae\u8ba1\u7b97\u751f\u6210\u7684\u4e00\u68f5\u751f\u6210\u6811\u3002 IST Internal Spanning Tree \u5185\u90e8\u751f\u6210\u6811 \u5185\u90e8\u751f\u6210\u6811IST\uff08Internal Spanning Tree\uff09\u662f\u5404 MST\u57df\u5185\u7684\u4e00\u68f5\u751f\u6210\u6811\u3002 IST\u662f\u4e00\u4e2a\u7279\u6b8a\u7684MSTI\uff0cMSTI\u7684ID\u4e3a0\uff0c\u901a\u5e38\u79f0\u4e3a MSTI0\u3002IST\u662fCIST\u5728MST\u57df\u5185\u7684\u4e00\u4e2a\u7247\u6bb5\u3002 CIST Common Internal Spanning Tree \u516c\u5171\u5185\u90e8\u751f\u6210\u6811 \u8fde\u63a5\u4e00\u4e2a\u4ea4\u6362\u7f51\u7edc\u5185\u6240\u6709\u4ea4\u6362\u8bbe\u5907\u7684\u5355\u751f\u6210\u6811\u3002 \u6240\u6709MST\u57df\u7684IST\u52a0\u4e0aCST\u5c31\u6784\u6210\u4e00\u68f5\u5b8c\u6574\u7684\u751f\u6210\u6811\uff0c\u5373CIST\u3002 CIST Root CIST Root \u603b\u6839 \u603b\u6839\u662f\u4e00\u4e2a\u5168\u5c40\u6982\u5ff5\uff0c\u5bf9\u4e8e\u6240\u6709\u4e92\u8fde\u7684\u8fd0\u884c STP/RSTP/MSTP\u7684\u4ea4\u6362\u673a\u53ea\u80fd\u6709\u4e00\u4e2a\u603b\u6839\uff0c\u4e5f\u5373\u662fCIST\u7684\u6839 \u57df\u6839 Regional Root \u5206\u4e3aIST\uff08Internal Spanning Tree\uff09\u57df\u6839\u548cMSTI \u57df\u6839","title":"\u57fa\u672c\u672f\u8bed"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_50","text":"\u5bf9\u4e8e\u4e00\u4e2a\u5927\u578b\u7684\u4ea4\u6362\u7f51\u7edc\uff0c\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u8981\u8fdb\u884cMSTP\u57df\u7684\u89c4\u5212\uff0c\u5f53\u7136\u5982\u679c\u7f51\u7edc\u89c4\u6a21\u6709\u9650\uff0c\u5168\u7f51\u7528\u4e00\u4e2a\u57df\u4e5f\u662f\u5f88\u5e73\u5e38\u7684\u3002\u4e00\u4e2a\u201c\u57df\u201d\u7531\u540c\u5c5e\u4e00\u4e2a\u57df\u7684\u4ea4\u6362\u673a\u7ec4\u6210\u3002\u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0c\u7f51\u7edc\u4e2d\u5b58\u5728\u4e09\u4e2aMSTP\u57df\u3002 \u57df\u5305\u542b\u57df\u540d\uff08Region Name\uff09\u3001\u4fee\u8ba2\u7ea7\u522b\uff08Revision Level\uff09\u3001\u683c\u5f0f\u9009\u62e9\u5668\uff08Configuration Identifier Format Selector\uff09\u3001VLAN\u4e0e\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb\uff08mapping of VIDs to spanning trees\uff09\u7b49\u5185\u5bb9\uff0c\u5176\u4e2d\u57df\u540d\u3001\u683c\u5f0f\u9009\u62e9\u5668\u548c\u4fee\u8ba2\u7ea7\u522b\u5728BPDU\u62a5\u6587\u4e2d\u90fd\u6709\u76f8\u5173\u5b57\u6bb5\uff0c\u800cVLAN\u4e0e\u5b9e\u4f8b\u7684\u6620\u5c04\u5173\u7cfb\u5728BPDU\u62a5\u6587\u4e2d\u8868\u73b0\u6458\u8981\u4fe1\u606f (Configuration Digest)\uff0c\u8be5\u6458\u8981\u662f\u6839\u636e\u6620\u5c04\u5173\u7cfb\u8ba1\u7b97\u5f97\u5230\u7684\u4e00\u4e2a16\u5b57\u8282\u7b7e\u540d\u3002\u53ea\u6709\u4e0a\u8ff0\u56db\u8005\u90fd\u4e00\u6837\u4e14\u76f8\u4e92\u8fde\u63a5\u7684\u4ea4\u6362\u673a\u624d\u8ba4\u4e3a\u5728\u540c\u4e00\u4e2a\u57df\u5185\u3002 \u540c\u4e00\u4e2a\u57df\u5185\u6240\u6709\u4ea4\u6362\u673a\u90fd\u6709\u76f8\u540c\u7684MST\u57df\u914d\u7f6e\u3002\u7f3a\u7701\u65f6\uff0c\u57df\u540d\u5c31\u662f\u4ea4\u6362\u673a\u7684\u6865MAC\u5730\u5740\uff0c\u4fee\u8ba2\u7ea7\u522b\u7b49\u4e8e0\uff0c \u683c\u5f0f\u9009\u62e9\u5668\u7b49\u4e8e0\uff0c\u6240\u6709\u7684VLAN\u90fd\u6620\u5c04\u5230\u5b9e\u4f8b0\u4e0a\u3002 \u9700\u5f3a\u8c03\u7684\u662f\uff1a\u540c\u4e00\u4e2a\u57df\u5185\u7684\u4ea4\u6362\u673a\uff0cVLAN\u7684\u6620\u5c04\u5fc5\u987b\u5b8c\u5168\u4e00\u81f4\u3002","title":"\u57df"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_51","text":"\u5355\u72ec\u62ff\u4e00\u4e2a\u57df\u6765\u8bf4\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u57df\u540d\u4e3aHuawei\uff0c\u8fd9\u4e2a\u57df\u5305\u542b\u56db\u53f0\u4ea4\u6362\u673a\uff0c\u57df\u5185\u5b58\u5728\u591a\u4e2aVLAN\uff0c\u4e00\u5171\u6709\u4e09\u4e2aMSTP\u5b9e\u4f8b\uff0c\u5b9e\u4f8b\u4e0eVLAN\u7684\u6620\u5c04\u5173\u7cfb\u5982\u4e0b\uff1a MSTI 1\uff1avlan 10 20 MSTI 2\uff1avlan 30 40 MSTI 0\uff1a\u5176\u4ed6\uff08\u9ed8\u8ba4\u6240\u6709\u7684VLAN\u90fd\u6620\u5c04\u5230\u5b9e\u4f8b0\uff09 \u6240\u8c13\u201c\u5b9e\u4f8b\u201d\u5c31\u662f\u591a\u4e2aVLAN\u7684\u4e00\u4e2a\u96c6\u5408\u3002\u5728MSTP\u4e2d\uff0c\u5404\u4e2a\u5b9e\u4f8b\u62d3\u6251\u7684\u8ba1\u7b97\u662f\u72ec\u7acb\u7684\uff0c\u4e00\u4e2aMSTP\u5b9e\u4f8b\u5355\u72ec\u8ba1\u7b97\u4e00\u68f5\u751f\u6210\u6811\uff0c\u5728\u8fd9\u4e9b\u5b9e\u4f8b\u4e0a\u5c31\u53ef\u4ee5\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u3002\u4f7f\u7528\u7684\u65f6\u5019\u53ef\u4ee5\u628a\u591a\u4e2a\u76f8\u540c\u62d3\u6251\u7ed3\u6784\u7684VLAN\u6620\u5c04\u5230\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e2d\uff0c\u8fd9\u4e9bVLAN\u5728\u7aef\u53e3\u4e0a\u7684\u8f6c\u53d1\u72b6\u6001\u5c06\u53d6\u51b3\u4e8e\u5bf9\u5e94\u5b9e\u4f8b\u5728MSTP\u91cc\u7684\u8f6c\u53d1\u72b6\u6001\u3002","title":"\u5b9e\u4f8b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_52","text":"","title":"\u7aef\u53e3\u89d2\u8272"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_53","text":"\u5916\u90e8\u8def\u5f84\u5f00\u9500\u662f\u76f8\u5bf9\u4e8eCIST\u800c\u8a00\u7684\uff0c\u540c\u4e00\u4e2a\u57df\u5185\u5916\u90e8\u8def\u5f84\u5f00\u9500\u662f\u76f8\u540c\u7684\uff1b\u5185\u90e8\u8def\u5f84\u5f00\u9500\u662f\u57df\u5185\u76f8\u5bf9\u4e8e\u67d0\u4e2a\u5b9e\u4f8b\u800c\u8a00\u7684\uff0c\u540c\u4e00\u7aef\u53e3\u5bf9\u4e8e\u4e0d\u540c\u5b9e\u4f8b\u5bf9\u5e94\u4e0d\u540c\u7684\u5185\u90e8\u8def\u5f84\u5f00\u9500\u3002","title":"\u5916\u90e8\u8def\u5f84\u5f00\u9500\u548c\u5185\u90e8\u8def\u5f84\u5f00\u9500"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_54","text":"\u57df\u8fb9\u7f18\u7aef\u53e3\u662f\u6307\u4f4d\u4e8eMST\u57df\u7684\u8fb9\u7f18\u5e76\u8fde\u63a5\u5176\u5b83MST\u57df\u6216SST\u7684\u7aef\u53e3\u3002 \u5728\u8fdb\u884cMSTP\u8ba1\u7b97\u7684\u65f6\u5019\uff0c\u57df\u8fb9\u7f18\u7aef\u53e3\u5728MSTI\u4e0a\u7684\u89d2\u8272\u548cCIST\u5b9e\u4f8b\u7684\u89d2\u8272\u4fdd\u6301\u4e00\u81f4\uff0c\u5373\u5982\u679c\u8fb9\u7f18\u7aef\u53e3\u5728CIST\u5b9e\u4f8b\u4e0a\u7684\u89d2\u8272\u662fMaster\u7aef\u53e3\uff08\u8fde\u63a5\u57df\u5230\u603b\u6839\u7684\u7aef\u53e3\uff09\uff0c\u5219\u5b83\u5728\u57df\u5185\u6240\u6709MST\u5b9e\u4f8b\u4e0a\u7684\u89d2\u8272\u4e5f\u662f Master\u7aef\u53e3\u3002","title":"\u57df\u8fb9\u7f18\u7aef\u53e3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#alternate","text":"\u4ece\u53d1\u9001BPDU\u6765\u770b\uff0cAlternate\u7aef\u53e3\u5c31\u662f\u7531\u4e8e\u5b66\u4e60\u5230\u5176\u5b83\u4ea4\u6362\u673a\u7684\u53d1\u9001\u7684BPDU\u800c\u88ab\u963b\u585e\u7684\u7aef\u53e3\u3002\u4ece\u8f6c\u53d1\u7528\u6237\u6d41\u91cf\u6765\u770b\uff0cAlternate\u7aef\u53e3\u63d0\u4f9b\u4e86\u4ece\u6307\u5b9a\u4ea4\u6362\u673a\u5230\u6839\u4ea4\u6362\u673a\u7684\u4e00\u6761\u5907\u4efd\u8def\u5f84\u3002 Alternate\u7aef\u53e3\u662f\u6839\u7aef\u53e3\u7684\u5907\u4efd\u7aef\u53e3\uff0c\u5982\u679c\u6839\u7aef\u53e3\u88ab\u963b\u585e\u540e\uff0cAlternate\u7aef\u53e3\u5c06\u6210\u4e3a\u65b0\u7684\u6839\u7aef\u53e3\u3002","title":"Alternate\u7aef\u53e3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#backup","text":"\u5f53\u540c\u4e00\u53f0\u4ea4\u6362\u673a\u7684\u4e24\u4e2a\u7aef\u53e3\u4e92\u76f8\u8fde\u63a5\u65f6\u5c31\u5b58\u5728\u4e00\u4e2a\u73af\u8def\uff0c\u6b64\u65f6\u4ea4\u6362\u673a\u4f1a\u5c06\u5176\u4e2d\u4e00\u4e2a\u7aef\u53e3\u963b\u585e\uff0cBackup \u7aef\u53e3\u5c31\u662f\u88ab\u963b\u585e\u7684\u90a3\u4e2a\u7aef\u53e3\u3002 \u4ece\u53d1\u9001BPDU\u6765\u770b\uff0cBackup\u7aef\u53e3\u5c31\u662f\u7531\u4e8e\u5b66\u4e60\u5230\u81ea\u5df1\u53d1\u9001\u7684BPDU\u800c\u88ab\u963b\u585e\u7684\u7aef\u53e3\u3002\u4ece\u8f6c\u53d1\u7528\u6237\u6d41\u91cf\u6765 \u770b\uff0cBackup\u7aef\u53e3\uff0c\u4f5c\u4e3a\u6307\u5b9a\u7aef\u53e3\u7684\u5907\u4efd\uff0c\u63d0\u4f9b\u4e86\u4e00\u6761\u4ece\u6839\u4ea4\u6362\u673a\u5230\u53f6\u8282\u70b9\u7684\u5907\u4efd\u901a\u8def\u3002","title":"Backup\u7aef\u53e3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#master","text":"Master\u7aef\u53e3\u662fMST\u57df\u548c\u603b\u6839\u76f8\u8fde\u7684\u6240\u6709\u8def\u5f84\u4e2d\u6700\u77ed\u8def\u5f84\u4e0a\u7684\u7aef\u53e3\uff0c\u5b83\u662f\u4ea4\u6362\u673a\u4e0a\u8fde\u63a5MST\u57df\u5230\u603b\u6839\u7684\u7aef\u53e3\u3002Master\u7aef\u53e3\u662f\u57df\u4e2d\u7684\u62a5\u6587\u53bb\u5f80\u603b\u6839\u7684\u5fc5\u7ecf\u4e4b\u8def\u3002 Master\u7aef\u53e3\u662f\u7279\u6b8a\u57df\u8fb9\u7f18\u7aef\u53e3\uff0cMaster\u7aef\u53e3\u5728IST/CIST\u4e0a\u7684\u89d2\u8272\u662fRoot Port\uff0c\u5728\u5176\u5b83\u5404\u5b9e\u4f8b\u4e0a\u7684\u89d2\u8272\u90fd\u662fMaster\u3002","title":"Master\u7aef\u53e3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mstp","text":"\u4e0a\u56fe\u6240\u793a\u7684\u62d3\u6251\u662f\u5178\u578b\u7684\u7535\u4fe1\u8f6f\u4ef6\u6570\u636e\u7f51\u7edc\u7ec4\u7f51\u573a\u666f\uff0c CoreSW1\u53caCoreSW2 \u662f\u4e24\u53f0\u6838\u5fc3\u4ea4\u6362\u673a\uff0c SwitchBlade1\u53caSwitchBlade2\u662fATAE/E9000\u673a\u6846\u7684\u4e24\u5757\u4ea4\u6362\u677f\uff0c\u60a8\u53ef\u4ee5\u628a\u5b83\u4eec\u4e5f\u5f53\u505a\u666e\u901a\u7684\u4ea4\u6362\u673a\u3002\u8fd9\u56db\u53f0\u8bbe\u5907\u6784\u6210\u4e86\u4e00\u4e2a\u53e3\u5b57\u578b\u7684\u4e8c\u5c42\u73af\u8def\u3002\u73b0\u5728\u6211\u4eec\u5728\u56db\u53f0\u8bbe\u5907\u4e0a\u90e8\u7f72MSTP\u6765\u6d88\u9664\u73af\u8def\uff0c\u6240\u6709\u7684\u4ea4\u6362\u673a\u90fd\u52a0\u5165\u76f8\u540c\u7684MSTP\u57df\uff0c\u5e76\u4e14\u90fd\u4f7f\u7528\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u4e5f\u5c31\u662f\u5b9e\u4f8b0\uff0c\u7f3a\u7701\u65f6\u6240\u6709\u7684VLAN\u90fd\u6620\u5c04\u5230\u5b9e\u4f8b0\u3002 \u6211\u4eec\u5c06CoreSW1\u89c4\u5212\u4e3a\u4e3b\u6839\u6865\uff0cCoreSW2\u89c4\u5212\u4e3a\u6b21\u6839\u6865\uff0c\u5e76\u4e14\u5c06SwitchBlade2\u4e0a\u8054\u6838\u5fc3\u4ea4\u6362\u673aCoreSW2\u7684\u63a5\u53e3\u7684STP cost\u8c03\u8282\u6210\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u503c\uff0c\u4ece\u800c\u4f7f\u5f97\u8be5\u63a5\u53e3\u88abMSTP\u963b\u585e\uff0c\u7f51\u7edc\u4e2d\u5b58\u5728\u7684\u4e8c\u5c42\u73af\u8def\u5c31\u6b64\u6253\u7834\u3002\u53e6\u5916\uff0c\u4e3a\u4e86\u4f18\u5316STP\u7684\u8fd0\u884c\uff0c\u5728\u6240\u6709\u4ea4\u6362\u673a\u4e0a\u5f00\u542fTC\u4fdd\u62a4\u53caBPDU\u4fdd\u62a4\u529f\u80fd\u3002\u53c2\u8003\u914d\u7f6e\u5982\u4e0b\uff1a CoreSW1\uff1a CoreSW2\uff1a ATAE/E9000\u4ea4\u6362\u677f1\uff1a ATAE/E9000\u4ea4\u6362\u677f2\uff1a \u5bf9\u4e8eCoreSW1\u800c\u8a00\uff0c\u7531\u4e8e\u5b83\u662f\u6839\u6865\uff0c\u56e0\u6b64\u8be5\u8bbe\u5907\u6240\u6709\u63a5\u53e3\u7684STP\u89d2\u8272\u5e94\u8be5\u90fd\u662f\u6307\u5b9a\u63a5\u53e3\uff08Designated Port\uff0c \u7b80\u5199\u4e3aDESI\uff09\uff0c\u800c\u4e14\u6240\u6709\u7684\u63a5\u53e3\u72b6\u6001\u90fd\u662fForwarding\uff1a \\<CoreSW1>display stp brief MSTID Port Role STP State Protection 0 GigabitEthernet1/0/1 DESI FORWARDING NONE 0 Eth-Trunk12 DESI FORWARDING NONE \u5bf9\u4e8eCoreSW2\uff0c\u5176Eth-trunk12\u8fde\u63a5\u7740\u6839\u6865SW1\uff0c\u8fd9\u4e2a\u63a5\u53e3\u5e94\u8be5\u662f\u6839\u7aef\u53e3\uff08Root Port\uff0c\u7b80\u5199\u4e3aROOT\uff09\uff0cGE1/0/1 \u63a5\u53e3\u5e94\u8be5\u662f\u6307\u5b9a\u7aef\u53e3\uff0c\u800c\u4e14\u6240\u6709\u7684\u63a5\u53e3\u72b6\u6001\u90fd\u662fForwarding\uff1a \u5bf9\u4e8eSwitchBlade1\uff0c\u5176\u76f4\u8fde\u4e3b\u6839\u7684\u63a5\u53e3GE0/0/20\u5e94\u8be5\u4e3a\u6839\u7aef\u53e3\uff0cEth-trunk10\u7aef\u53e3\u4e3a\u6307\u5b9a\u7aef\u53e3\uff0c\u800c\u4e14\u6240\u6709\u7684\u63a5\u53e3\u72b6\u6001\u90fd\u662fForwarding\uff1a \u5bf9\u4e8eSwitchBlade2\uff0c\u5176Eth-trunk10\u63a5\u53e3\u5e94\u8be5\u4e3a\u6839\u7aef\u53e3\uff0c\u800cGE0/0/20\u7aef\u53e3\u5c06\u5904\u4e8eDiscarding\u72b6\u6001\uff0c\u4ece\u800c\u88ab\u963b\u585e\uff0c\u5982\u6b64\u4e00\u6765\u7f51\u7edc\u4e2d\u4e0d\u518d\u5b58\u5728\u4e8c\u5c42\u73af\u8def\uff1a [SwitchBlade2] display stp brief MSTID Port Role STP State Protection 0 GigabitEthernet0/0/20 ALTE DISCARDING NONE 0 Eth-Trunk10 ROOT FORWARDING NONE","title":"\u57fa\u7840\u914d\u7f6e\uff1aMSTP\u5355\u5b9e\u4f8b\u90e8\u7f72"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_55","text":"","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#1-vlanmstp","text":"SW1\u53caSW2\u8fd0\u884cMSTP\uff0cSW1\u4f5c\u4e3a\u6c47\u805a\u4ea4\u6362\u673a\uff0c\u5176\u4e0a\u6709VLAN\uff1a10\u300120\u300130\u300140\uff1bSW2\u4f5c\u4e3a\u63a5\u5165\u5c42\u4ea4 \u6362\u673a\uff0c\u5176\u4e0a\u53ea\u6709VLAN10\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u53d1\u73b0SW2\u7684\u751f\u6210\u6811\u72b6\u6001\u5f02\u5e38\uff0c\u5b83\u8ba4\u4e3a\u81ea\u5df1\u662f\u5b9e\u4f8b1\u7684\u6839\u3002\u539f\u56e0\u5728\u4e8e\u4e24\u53f0\u4ea4\u6362\u673a\u7684MSTP\u5b9e \u4f8b1\u7684VLAN\u6620\u5c04\u4e0d\u4e00\u81f4\uff0c\u5bfc\u81f4SW2\u5ffd\u7565SW1\u4f20\u9012\u8fc7\u6765\u7684\u5173\u4e8e\u5b9e\u4f8b1\u7684\u4fe1\u606f\uff0c\u56e0\u6b64\u8ba4\u4e3a\u81ea\u5df1\u662f\u6839\u3002\u5c06SW2 \u7684\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a \u5373\u53ef\uff0c\u6ce8\u610fSW2\u4e0a\u4e0d\u9700\u8981\u521b\u5efaVLAN 20 30 40\uff08\u5982\u679c\u8be5\u4ea4\u6362\u673a\u6ca1\u6709\u8fde\u63a5\u8fd9\u51e0\u4e2aVLAN\u7684\u7528\u6237\uff09\uff0c\u4e5f\u5c31\u662f \u8bf4\u5373\u4f7fSW2\u6ca1\u6709\u521b\u5efaVLAN 20 30 40\u4e5f\u662f\u80fd\u591f\u6309\u7167\u4e0a\u8ff0\u914d\u7f6e\uff0c\u5c06VLAN 10 20 30 40\u6620\u5c04\u5230\u5b9e\u4f8b1\u3002 Smart Link \u53ca Monitor Link","title":"1. \u7531\u4e8e\u5b9e\u4f8b\u4e0eVLAN\u7684\u6620\u5c04\u4e0d\u4e00\u81f4\u5bfc\u81f4MSTP\u72b6\u6001\u5f02\u5e38"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_56","text":"\u5728\u4e00\u4e2a\u4ea4\u6362\u7f51\u7edc\u4e2d\uff0c\u4e3a\u4e86\u63d0\u9ad8\u7f51\u7edc\u7684\u53ef\u9760\u6027\uff0c\u6211\u4eec\u4f1a\u8bbe\u8ba1\u5197\u4f59\u7684\u7269\u7406\u73af\u5883\uff0c\u7136\u800c\u5197\u4f59\u7684\u7269\u7406\u73af\u5883\u4f1a\u5e26\u6765\u4e8c\u5c42\u73af\u8def\u7684\u95ee\u9898\uff0c\u5728\u6b64\u524d\u7684\u7ae0\u8282\u4e2d\u5df2\u7ecf\u4ecb\u7ecd\u4e86STP\u751f\u6210\u6811\u534f\u8bae\uff0c\u5229\u7528STP\u786e\u5b9e\u53ef\u4ee5\u89e3\u51b3\u73af\u8def\u7684\u95ee\u9898\uff0c\u4f46STP\u9996\u5148\u9700\u8981\u5728\u53c2\u4e0e\u5230\u62d3\u6251\u7684\u6bcf\u4e00\u53f0\u4ea4\u6362\u673a\u4e0a\u90fd\u8fdb\u884c\u914d\u7f6e\uff0c\u5e76\u4e14\u91c7\u7528\u517c\u5bb9\u7684STP\u534f\u8bae\u7c7b\u578b\uff0c\u518d\u8005\u9700\u8981\u4f9d\u8d56BPDU\u7684\u6cdb\u6d2a\u624d\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u3002\u53e6\u5916\uff0cSTP\u7684\u8ba1\u7b97\u4e5f\u662f\u6bd4\u8f83\u7f13\u6162\u7684\uff0c\u8fd9\u4f7f\u5f97\u5f53\u62d3\u6251\u53d1\u751f\u53d8\u66f4\u65f6\uff0cSTP\u7684\u6536\u655b\u53ef\u80fd\u9700\u8981\u6570\u79d2\u7684\u65f6\u95f4\uff0c\u800c\u8fd9\u5728\u67d0\u4e9b\u4e1a\u52a1\u573a\u666f\u4e2d\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\uff0c\u4f8b\u5982\u5bf9\u5ef6\u8fdf\u975e\u5e38\u654f\u611f\u7684\u4e1a\u52a1\u3002\u5b9e\u9645\u4e0a\uff0c\u5bf9\u4e8e\u73b0\u4ee3\u56ed\u533a\u7f51\u800c\u8a00\uff0cSTP\u867d\u7136\u66fe\u7ecf\u662f\u4e8c\u5c42\u4ea4\u6362\u7f51\u7edc\u7684\u5178\u578b\u5e94\u7528\uff0c\u4f46\u662f\u6b63\u5728\u88ab\u9010\u6b65\u53d6\u4ee3\u3002 Smart Link\u662f\u4e00\u79cd\u4e3a\u53cc\u4e0a\u884c\u7ec4\u7f51\u91cf\u8eab\u5b9a\u505a\u7684\u89e3\u51b3\u65b9\u6848\u3002\u4ec0\u4e48\u53eb\u53cc\u4e0a\u884c\u7ec4\u7f51\u5462\uff1f\u8bf4\u7684\u597d\u50cf\u5f88\u6d41\u5f0a\u4f3c\u7684\uff0c\u5176\u5b9e\u975e\u5e38\u7b80\u5355\uff0c\u62ff\u4e0a\u9762\u7684\u62d3\u6251\u6765\u8bf4\uff0cSW3\u6709\u4e24\u6839\u94fe\u8def\u4e0a\u8054\u5230\u6838\u5fc3\u4ea4\u6362\u673a\uff0c\u8fd9\u5c31\u662f\u53cc\u4e0a\u884c\u7ec4\u7f51\u3002Smart Link\u5728\u8fd9\u79cd\u7ec4\u7f51\u4e2d\uff0c\u88ab\u90e8\u7f72\u5728SW3\u4e0a\u3002Smart Link\u5177\u6709\u5982\u4e0b\u7279\u70b9\uff1a \u5728\u53cc\u5411\u884c\u7684\u8bbe\u5907\u4e0a\u90e8\u7f72\uff0c\u5f53\u7f51\u7edc\u6b63\u5e38\u65f6\uff0c\u8fd9\u4e24\u6839\u4e0a\u884c\u94fe\u8def\u5176\u4e2d\u4e00\u6839\u5904\u4e8e\u6d3b\u8dc3\u72b6\u6001\uff0c\u800c\u53e6\u4e00\u6839\u94fe\u8def\u5904\u4e8e\u5907\u4efd\u72b6\u6001\u4ece\u800c\u88ab\u963b\u585e\u3002\u5982\u6b64\u4e00\u6765\u73af\u8def\u5c31\u4f1a\u88ab\u6253\u7834\u3002 \u5f53\u4e3b\u7528\u94fe\u8def\u53d1\u751f\u6545\u969c\u540e\uff0c\u6d41\u91cf\u4f1a\u5728**\u6beb\u79d2\u7ea7**\u7684\u65f6\u95f4\u5185\u8fc5\u901f\u5207\u6362\u5230\u5907\u7528\u94fe\u8def\u4e0a\uff0c\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u6b63\u5e38\u8f6c\u53d1\u3002 \u914d\u7f6e\u7b80\u5355\uff0c\u4fbf\u4e8e\u7528\u6237\u64cd\u4f5c\u3002 \u65e0\u9700\u534f\u8bae\u4ea4\u4e92\u62a5\u6587\uff0c\u56e0\u6b64\u5927\u5927\u63d0\u5347\u7684\u6536\u655b\u7684\u901f\u5ea6\u548c\u53ef\u9760\u6027\u3002 Smart Link\u662f\u534e\u4e3a\u79c1\u6709\u7279\u6027\u3002","title":"\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_57","text":"","title":"\u57fa\u7840\u672f\u8bed"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#smart-link-group","text":"Smart Link\u7ec4\uff0c\u4e5f\u79f0\u4e3a\u7075\u6d3b\u94fe\u8def\u7ec4\uff0c\u4e00\u4e2aSmart Link\u7ec4\u5305\u542b\u4e24\u4e2a\u6210\u5458\u63a5\u53e3\uff0c\u4e00\u4e2a\u4e3b\u63a5\u53e3\uff08Master Port\uff09 \u4e00\u4e2a\u4ece\u63a5\u53e3\uff08Slave Port\uff09\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u4e00\u4e2a\u63a5\u53e3\uff08\u4e3b\u63a5\u53e3\u6216\u4ece\u63a5\u53e3\uff09\u5904\u4e8e\u6d3b\u8dc3\uff08Active\uff09\u72b6\u6001\uff0c \u53e6\u4e00\u4e2a\u63a5\u53e3\u5904\u4e8e\u975e\u6d3b\u8dc3\uff08Inactive\uff09\u72b6\u6001\u88ab\u963b\u585e\u3002 \u5f53\u5904\u4e8e\u6d3b\u8dc3\u72b6\u6001\u7684\u63a5\u53e3\u51fa\u73b0\u94fe\u8def\u6545\u969c\u65f6\uff08\u8fd9\u91cc\u7684\u94fe\u8def\u6545\u969c\u5305\u62ec\u63a5\u53e3down\u3001OAM\u5355\u901a\u7b49\uff09\uff0cSmart Link \u7ec4\u4f1a\u81ea\u52a8\u5c06\u8be5\u63a5\u53e3\u963b\u585e\uff0c\u5e76\u5c06\u539f\u963b\u585e\u7684\u3001\u5904\u4e8e\u975e\u6d3b\u8dc3\u72b6\u6001\u7684\u63a5\u53e3\u5207\u6362\u5230\u6d3b\u8dc3\u72b6\u6001\uff0c\u5f00\u59cb\u8f6c\u53d1\u6570\u636e\u3002","title":"Smart Link Group"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#masterslave","text":"\u4e3b/\u4ece\u63a5\u53e3\u662fSmart Link\u7ec4\u4e2d\u7684\u4e24\u4e2a\u63a5\u53e3\u89d2\u8272\uff0c\u662f\u901a\u8fc7\u547d\u4ee4\u6307\u5b9a\u7684\u3002\u5f53\u4e24\u4e2a\u63a5\u53e3\u90fd\u6b63\u5e38\u5de5\u4f5c\u65f6\uff0c\u4e3b\u63a5\u53e3\u8fdb\u5165active\u72b6\u6001\uff0c\u800c\u4ece\u63a5\u53e3\u4fdd\u6301inactive\u3002\u5f53\u4e3b\u63a5\u53e3\u6216\u5176\u6240\u5728\u94fe\u8def\u53d1\u751f\u6545\u969c\u65f6\uff0c\u4ece\u63a5\u53e3\u5207\u6362\u4e3aactive\u3002","title":"Master/Slave\u63a5\u53e3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vlan_2","text":"\u53d1\u9001\u63a7\u5236VLAN\uff08Send Control VLAN\uff09\u662fSmart Link\u7ec4\u7528\u4e8e\u6cdb\u6d2aflush\u62a5\u6587\u7684VLAN\u3002\u5728\u4e0a\u56fe\u4e2d\uff0c\u5f53SW3 \u4ea4\u6362\u673a\u53d1\u751fSmartLink\u7684\u5207\u6362\u65f6\u2014\u2014\u663e\u7136\u662f\u7f51\u7edc\u62d3\u6251\u53d1\u751f\u4e86\u53d8\u5316\u2014\u2014\u8fd9\u4e2a\u53d8\u5316\u53ef\u80fd\u5bf9\u4e8e\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u8bbe\u5907\u6765\u8bf4\uff08\u4f8b\u5982\u4e0a\u6e38\u4ea4\u6362\u673aCoreSW1\u53caCoreSW2\uff09\u5e76\u4e0d\u4e00\u5b9a\u80fd\u591f\u201c\u611f\u77e5\u201d\uff0c\u6b64\u523b\u5bf9\u4e8e\u5b83\u4eec\u800c\u8a00\u539f\u6709\u7684 MAC\u8868\u7b49\u8868\u9879\u53ef\u80fd\u5df2\u7ecf\u4e0d\u53ef\u7528\u4e86\uff0c\u5fc5\u987b\u5c3d\u5feb\u5237\u65b0\uff0cflush\u62a5\u6587\u5c31\u662f\u7528\u6765\u5237\u65b0\u4ed6\u4eec\u7684\u76f8\u5173\u8868\u9879\u7684\u3002 \u5982\u679c\u5728SW3\u4e0a\u5f00\u542f\u4e86flush\u62a5\u6587\u53d1\u9001\u529f\u80fd\uff0c\u5f53\u53d1\u751f\u94fe\u8def\u5207\u6362\u65f6\uff0c\u8bbe\u5907\u4f1a\u5728\u65b0\u7684\u4e3b\u7528\u94fe\u8def\u4e0a\u3001\u5728\u53d1\u9001\u63a7\u5236 VLAN\u5185\u7ec4\u64ad\u53d1\u9001flush\u62a5\u6587\uff0c\u4ee5\u4fbf\u5237\u65b0\u4e0a\u6e38\u4ea4\u6362\u673a\u7684\u76f8\u5173\u8f6c\u53d1\u8868\u9879\uff0c\u52a0\u5feb\u7f51\u7edc\u6536\u655b\u3002","title":"\u53d1\u9001\u63a7\u5236VLAN"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vlan_3","text":"\u63a5\u6536\u63a7\u5236VLAN\u662f\u4e0a\u6e38\u8bbe\u5907\u7528\u4e8e\u63a5\u6536\u5e76\u5904\u7406flush\u62a5\u6587\u7684VLAN\u3002\u5982\u679c\u4e0a\u6e38\u8bbe\u5907CoreSW1\u53caCoreSW2\u80fd\u591f\u8bc6\u522bflush\u62a5\u6587\uff0c\u5e76\u5f00\u542f\u4e86flush\u62a5\u6587\u63a5\u6536\u5904\u7406\u529f\u80fd\uff0c\u5f53\u53d1\u751f\u94fe\u8def\u5207\u6362\u65f6\uff0c\u4e0a\u6e38\u8bbe\u5907\u4f1a\u5904\u7406\u6536\u5230\u7684\u5c5e\u4e8e\u63a5\u6536\u63a7\u5236VLAN\u7684flush\u62a5\u6587\uff0c\u8fdb\u800c\u6267\u884cMAC\u5730\u5740\u8f6c\u53d1\u8868\u9879\u548cARP\u8868\u9879\u7684\u5237\u65b0\u64cd\u4f5c\u3002\u8981\u6ce8\u610f\u5728SW3\u4e0a\u914d\u7f6e\u7684\u53d1\u9001\u63a7\u5236VLAN\u8981\u548cCoreSW1\u53caCoreSW2\u4e0a\u914d\u7f6e\u7684\u63a5\u6536\u63a7\u5236VLAN\u4e00\u81f4\u3002","title":"\u63a5\u6536\u63a7\u5236VLAN"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_58","text":"","title":"\u5de5\u4f5c\u673a\u5236"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_59","text":"\u4e0a\u56fe\u5c55\u793a\u7684\u662f\u4e00\u4e2a\u4f7f\u7528\u4e86ATAE/E9000\u7684\u5178\u578b\u7ec4\u7f51\u3002SW1\u53caSW2\u662f\u6838\u5fc3\u4ea4\u6362\u673a\uff0cSW3\u662f\u90e8\u7f72\u4e86\u5806\u53e0\u7684\u4ea4\u6362\u677f\u5361\uff0c\u53ef\u4ee5\u5c06\u5176\u7406\u89e3\u4e3a\u4e00\u53f0\u4ea4\u6362\u673a\u3002\u6b64\u65f6SW3\u6b63\u662f\u53cc\u94fe\u8def\u4e0a\u884c\uff0c\u8fd9\u4e2a\u573a\u666f\u975e\u5e38\u9002\u5408\u90e8\u7f72Smart Link\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662fSmart Link\u662f\u914d\u7f6e\u5728SW3\u4ea4\u6362\u673a\u4e0a\u7684\uff0c\u5176\u4ed6\u7684\u4ea4\u6362\u673a\u4e0a\u65e0\u9700\u914d\u7f6e\u3002\u5728SW3\u4e0a\u521b\u5efa\u4e00\u4e2aSmart Link\u7ec4\uff0c\u7136\u540e\u5c06Port1\u6dfb\u52a0\u5230\u8be5\u7ec4\u4e2d\uff0c\u5e76\u8bbe\u7f6e\u5176\u63a5\u53e3\u89d2\u8272\u4e3aMaster\uff1b\u540c\u65f6\u5c06Port2\u53e3\u4e5f\u6dfb\u52a0\u5230\u8be5Smart Link\u7ec4\u4e2d\uff0c\u5e76\u8bbe\u7f6e\u5176\u89d2\u8272\u4e3aSlave\u3002","title":"\u62d3\u6251\u73af\u5883"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_60","text":"\u5f53\u7f51\u7edc\u5de5\u4f5c\u6b63\u5e38\u65f6\uff0c\u4e5f\u5c31\u662f\u53cc\u4e0a\u884c\u94fe\u8def\u90fd\u6b63\u5e38\u7684\u60c5\u51b5\u4e0b\uff0cMaster\u53e3Port1\u5904\u4e8e\u6d3b\u8dc3\u72b6\u6001\uff08Active\uff09\uff0c\u5176\u6240\u5728\u7684\u94fe\u8def\u662f\u4e3b\u7528\u94fe\u8def\uff08Master Link\uff09\uff1bSlave\u7aef\u53e3\u5904\u4e8e\u975e\u6d3b\u8dc3\u72b6\u6001\uff08Inactive\uff09\uff0c\u6240\u5728\u94fe\u8def\u662f\u5907\u7528\u94fe\u8def\u3002\u5982\u6b64\u4e00\u6765\uff0cSW3\u7684Port2\u76f8\u5f53\u4e8e\u88ab\u963b\u585e\u4e86\uff0c\u4e0d\u4f1a\u8f6c\u53d1\u6570\u636e\uff0c\u56e0\u6b64\u6570\u636e\u6cbf\u7740\u7ea2\u8272\u7ebf\u6761\u6240\u8868\u793a\u7684\u8def\u5f84\u8fdb\u884c\u4f20\u8f93\uff0c\u7f51\u7edc\u4e2d\u4e0d\u5b58\u5728\u73af\u8def\uff0c\u4e0d\u4f1a\u4ea7\u751f\u5e7f\u64ad\u98ce\u66b4\u3002","title":"\u7f51\u7edc\u5de5\u4f5c\u6b63\u5e38\u65f6"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_61","text":"\u5f53SW3\u7684Port1\u6216\u8005\u5176\u76f4\u8fde\u7684\u94fe\u8def\u53d1\u751f\u6545\u969c\u65f6\uff0cMaster\u7aef\u53e3Port1\u5207\u6362\u5230Inactive\u72b6\u6001\uff0cSlave\u7aef\u53e3Port2 \u5207\u6362\u5230Active\u72b6\u6001\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u4ee5\u975e\u5e38\u5feb\u7684\u901f\u5ea6\u5b8c\u6210\u7684\uff0c\u56e0\u4e3a\u65e0\u9700\u4efb\u4f55\u7684\u534f\u8bae\u62a5\u6587\u7684\u4ea4\u4e92\uff0c\u5b8c\u5168\u7531SW3 \u8bbe\u5907\u81ea\u5df1\u611f\u77e5\u3001\u5b8c\u6210\u5207\u6362\uff0c\u6240\u4ee5\u6536\u655b\u7684\u901f\u5ea6\u662f\u6beb\u79d2\u7ea7\u522b\u3002","title":"\u7f51\u7edc\u53d1\u751f\u6545\u969c\u65f6"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_62","text":"","title":"\u7f51\u7edc\u62d3\u6251\u53d8\u66f4\u673a\u5236"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_63","text":"\u5f53 Smart Link \u53d1\u751f\u94fe\u8def\u5207\u6362\u65f6\uff0c\u7f51\u7edc\u4e2d\u5404\u8bbe\u5907\u4e0a\u7684MAC\u5730\u5740\u8f6c\u53d1\u8868\u9879\u548cARP/ND\u8868\u9879\u53ef\u80fd\u5df2\u7ecf\u4e0d\u662f\u6700 \u65b0\u72b6\u6001\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u62a5\u6587\u7684\u6b63\u786e\u53d1\u9001\uff0c\u9700\u8981\u63d0\u4f9b\u4e00\u79cdMAC\u5730\u5740\u8f6c\u53d1\u8868\u9879\u548cARP/ND\u8868\u9879\u7684\u66f4\u65b0\u673a\u5236\u3002\u76ee\u524d\u66f4\u65b0\u673a\u5236\u6709\u4ee5\u4e0b\u4e24\u79cd\uff1a \u7531Smart Link \u8bbe\u5907\u4ece\u65b0\u7684Master \u94fe\u8def\u4e0a\u53d1\u9001flush\u62a5\u6587\u3002\u6b64\u65b9\u5f0f\u9700\u8981\u4e0a\u884c\u7684\u8bbe\u5907\u90fd\u80fd\u591f\u8bc6\u522b SmartLink\u7684flush\u62a5\u6587\u5e76\u8fdb\u884c\u66f4\u65b0MAC\u5730\u5740\u8f6c\u53d1\u8868\u9879\u548cARP/ND\u8868\u9879\u7684\u5904\u7406\u3002 \u81ea\u52a8\u901a\u8fc7\u6d41\u91cf\u5237\u65b0MAC\u5730\u5740\u8f6c\u53d1\u8868\u9879\u548cARP/ND\u8868\u9879\u3002\u6b64\u65b9\u5f0f\u9002\u7528\u4e8e\u548c\u4e0d\u652f\u6301Smart Link\u529f\u80fd\u7684\u8bbe\u5907\uff08\u5305\u62ec\u5176\u4ed6\u5382\u5546\u8bbe\u5907\uff09\u5bf9\u63a5\u7684\u60c5\u51b5\uff0c\u9700\u8981\u6709\u4e0a\u884c\u7684\u6d41\u91cf\u89e6\u53d1\u3002","title":"\u673a\u5236\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#flush","text":"\u8fd9\u79cd\u65b9\u5f0f\u9002\u7528\u4e8e\u4e0a\u6e38\u8bbe\u5907\uff08\u5982\u56fe\u4e2d\u7684SW1\u3001SW2\uff09\u652f\u6301SmartLink\u529f\u80fd\u3001\u80fd\u591f\u8bc6\u522bflush\u62a5\u6587\u7684\u60c5\u51b5\u3002\u4e3a\u4e86\u5b9e\u73b0\u5feb\u901f\u94fe\u8def\u5207\u6362\uff0c\u9700\u8981\u5728SW3\u4e0a\u5f00\u542fflush\u62a5\u6587\u53d1\u9001\u529f\u80fd\uff0c\u53e6\u5916\uff0c\u5728\u4e0a\u6e38\u8bbe\u5907\u6240\u6709\u5904\u4e8e\u53cc\u4e0a\u884c\u7f51\u7edc\u7684\u63a5\u53e3\u5f00\u542f\u63a5\u6536\u5904\u7406flush\u62a5\u6587\u529f\u80fd\u3002 SW3\u53d1\u751f\u94fe\u8def\u5207\u6362\u540e\uff0c\u4f1a\u5728\u65b0\u7684\u4e3b\u7528\u94fe\u8def\u4e0a\u53d1\u9001flush\u62a5\u6587\u3002Flush\u62a5\u6587\u7684VLAN Bitmap\u5b57\u6bb5\u586b\u5145\u94fe\u8def\u5207\u6362\u524d\u7ec4\u5185\u5904\u4e8e\u8f6c\u53d1\u72b6\u6001\u7684Port1\u53e3\u6240\u5728Smart Link\u7ec4\u7684\u4fdd\u62a4VLAN ID\uff0cControl VLAN ID \u5b57\u6bb5\u586b\u5145Smart Link\u7ec4\u914d\u7f6e\u7684\u53d1\u9001\u63a7\u5236VLAN ID\u3002 \u5f53\u4e0a\u6e38\u8bbe\u5907\u6536\u5230flush\u62a5\u6587\u65f6\uff0c\u5224\u65ad\u8be5flush\u62a5\u6587\u7684\u53d1\u9001\u63a7\u5236VLAN\u662f\u5426\u5728\u6536\u5230\u62a5\u6587\u7684\u7aef\u53e3\u914d\u7f6e\u7684\u63a5\u6536\u63a7\u5236 VLAN\u5217\u8868\u4e2d\u3002\u5982\u679c\u4e0d\u5728\u63a5\u6536\u63a7\u5236VLAN\u5217\u8868\u4e2d\uff0c\u8bbe\u5907\u5bf9\u8be5flush\u62a5\u6587\u4e0d\u505a\u5904\u7406\uff0c\u76f4\u63a5\u8f6c\u53d1\uff1b\u5982\u679c\u5728\u63a5\u6536\u63a7\u5236VLAN\u5217\u8868\u4e2d\uff0c\u8bbe\u5907\u5c06\u63d0\u53d6flush\u62a5\u6587\u4e2d\u7684VLAN Bitmap\u6570\u636e\uff0c\u5c06\u8bbe\u5907\u5728\u8fd9\u4e9bVLAN\u5185\u5b66\u4e60\u5230\u7684MAC \u53caARP\u8868\u9879\u5220\u9664\u3002 \u4e3a\u4e86\u4fdd\u8bc1flush\u62a5\u6587\u5728\u53d1\u9001\u63a7\u5236VLAN\u5185\u6b63\u786e\u4f20\u9001\uff0c\u8bf7\u786e\u4fdd\u53cc\u4e0a\u884c\u7f51\u7edc\u4e0a\u7684\u6240\u6709\u7aef\u53e3\u90fd\u5141\u8bb8\u53d1\u9001\u63a7\u5236 VLAN\u901a\u8fc7\uff0c\u5426\u5219\uff0cflush\u62a5\u6587\u5c06\u53d1\u9001\u6216\u8f6c\u53d1\u5931\u8d25\u3002\u5efa\u8bae\u4ee5\u4fdd\u7559Tag\u7684\u65b9\u5f0f\u53d1\u9001flush\u62a5\u6587\uff0c\u82e5\u60f3\u4ee5\u53bb\u6389Tag \u7684\u65b9\u5f0f\u53d1\u9001flush\u62a5\u6587\uff0c\u9700\u786e\u4fdd\u5bf9\u7aef\u7aef\u53e3\u7f3a\u7701VLAN\u548c\u53d1\u9001\u63a7\u5236VLAN\u4e00\u81f4\uff0c\u5426\u5219\u5c06\u5bfc\u81f4flush\u62a5\u6587\u4e0d\u5728\u53d1\u9001\u63a7\u5236VLAN\u5185\u4f20\u9001\u3002","title":"\u65b9\u5f0f\u4e00\uff1a\u901a\u8fc7flush\u62a5\u6587\u901a\u77e5\u8bbe\u5907\u66f4\u65b0\u8868\u9879"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#flush_1","text":"\u8fd9\u79cd\u65b9\u5f0f\u9002\u7528\u4e8e\u4e0e\u4e0d\u652f\u6301Smart Link\u529f\u80fd\u7684\u8bbe\u5907\uff08\u5305\u62ec\u5176\u4ed6\u5382\u5546\u8bbe\u5907\uff09\u5bf9\u63a5\u7684\u60c5\u51b5\uff0c\u9700\u8981\u6709\u4e0a\u884c\u6d41\u91cf\u89e6\u53d1\u3002\u4f8b\u5982\u4e0a\u56fe\u4e2dSW3\u662f\u652f\u6301Smart Link\u7684\u8bbe\u5907\uff0c\u800cSW1\u3001SW2\u4e0d\u652f\u6301Smart Link\u7684\u60c5\u51b5\u3002 \u5982\u679c\u6ca1\u6709SW3\u7684\u4e0a\u884c\u6d41\u91cf\uff08\u8fd9\u4e9b\u6d41\u91cf\u53ef\u80fd\u6765\u81eaSW3\u4e0b\u8054\u7684\u7ec8\u7aef\uff09\u53bb\u89e6\u53d1SW1\u3001SW2\u7684MAC\u53caARP\u8868\u9879\u66f4\u65b0\uff0c\u90a3\u4e48\u5f53SW1\u3001SW2\u6536\u5230\u76ee\u7684\u8bbe\u5907\u4e3a\u4e1a\u52a1\u5355\u677f\u7684\u6570\u636e\u65f6\uff0c\u6d41\u91cf\u5c31\u53ef\u80fd\u4f1a\u53d1\u751f\u4e2d\u65ad\u3002\u4ee5SW2\u4e3a\u4f8b\uff0c \u5982\u679c\u5176\u5173\u4e8e\u4e0b\u6e38\u4e1a\u52a1\u5355\u677f\u7684MAC\u5730\u5740\u8868\u9879\u7684\u5173\u8054\u63a5\u53e3\u8fd8\u662f\u8001\u65e7\u7684\uff08\u8fd8\u662f\u5173\u8054\u5230\u4e0eSW1\u5bf9\u63a5\u7684\u63a5\u53e3\uff09\uff0c \u90a3\u4e48\u5f53SW2\u6709\u4e0b\u884c\u6d41\u91cf\u8981\u8f6c\u53d1\uff08\u5916\u90e8\u7f51\u7edc\u53d1\u5f80\u4e1a\u52a1\u5355\u677f\u7684\u6d41\u91cf\uff09\u65f6\uff0c\u53ea\u6709\u5728\u5176\u8868\u9879\u81ea\u52a8\u8001\u5316\u3001\u91cd\u65b0\u5b66\u4e60\u540e\uff0c\u6d41\u91cf\u624d\u80fd\u88ab\u6b63\u786e\u53d1\u9001\u5230SW3\u3002\u5f53\u4e1a\u52a1\u5355\u677f\u7684\u4e0a\u884c\u6d41\u91cf\u901a\u8fc7SW3\u5230\u8fbeSW2\u540e\uff0c\u540e\u8005\u4f1a\u66f4\u65b0\u81ea\u5df1\u7684 MAC\u8868\uff0c\u90a3\u4e48\u5f53SW2\u518d\u6536\u5230\u76ee\u7684MAC\u4e3a\u4e1a\u52a1\u5355\u677fMAC\u5730\u5740\u7684\u6570\u636e\u65f6\uff0cSW2\u4f1a\u901a\u8fc7\u5176\u8fde\u63a5SW3\u7684\u63a5\u53e3\u8f6c\u53d1\u51fa\u53bb\uff0c\u62a5\u6587\u624d\u53ef\u4ee5\u7ecf\u7531SW3\u5230\u8fbe\u5355\u677f\u3002\u56e0\u6b64\u8fd9\u79cd\u65b9\u5f0f\u76f8\u6bd4\u4e8e\u901a\u8fc7Flush\u62a5\u6587\u7684\u65b9\u5f0f\u800c\u8a00\uff0c\u6548\u7387\u5c31\u8981\u4f4e\u5f97\u591a\u3002 \u901a\u8fc7flush\u62a5\u6587\u901a\u77e5\u8bbe\u5907\u66f4\u65b0\u7684\u673a\u5236\u65e0\u987b\u7b49\u5230\u8868\u9879\u8001\u5316\u540e\u518d\u8fdb\u884c\u66f4\u65b0\uff0c\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u8868\u9879\u66f4\u65b0\u6240\u9700\u65f6\u95f4\u3002 \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u94fe\u8def\u7684\u6574\u4e2a\u5207\u6362\u8fc7\u7a0b\u53ef\u5728\u6beb\u79d2\u7ea7\u7684\u65f6\u95f4\u5185\u5b8c\u6210\u7684\uff0c\u57fa\u672c\u65e0\u6d41\u91cf\u4e22\u5931\u3002\u4f46\u662f\u8981\u6c42\u4e0a\u8054\u7684\u4ea4\u6362\u673a\u90fd\u652f\u6301Smart Link\u529f\u80fd\u3002","title":"\u65b9\u5f0f\u4e8c\uff1a\u65e0flush\u65b9\u5f0f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_64","text":"\u5728\u4e0a\u56fe\u4e2dSW3\u4ea4\u6362\u673a\u7684Port1\u53e3\u4e3aSmart Link\u7ec4\u7684Master\u63a5\u53e3\uff0cPort2\u53e3\u4e3aSlave\u63a5\u53e3\u3002\u7f3a\u7701\u65f6\uff0cPort1\u4e3aactive \u72b6\u6001\u3002\u73b0\u5728\uff0cPort1\u53e3\u6216\u5176\u76f4\u8fde\u94fe\u8def\u53d1\u751f\u4e86\u6545\u969c\uff0c\u5bfc\u81f4Smart Link\u7ec4\u53d1\u751f\u5207\u6362\uff0cSlave\u63a5\u53e3Port2\u5904\u4e8eactive\u72b6\u6001\uff0c\u90a3\u4e48\u5f53Master\u63a5\u53e3Port1\u6062\u590d\u540e\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\u4e8b\u60c5\u5462\uff1f Smart Link\u7ec4\u652f\u6301\u4e24\u79cd\u6a21\u5f0f\uff1a \u89d2\u8272\u62a2\u5360\u6a21\u5f0f\u548c\u975e\u89d2\u8272\u62a2\u5360\u6a21\u5f0f\u3002","title":"\u94fe\u8def\u6062\u590d\u673a\u5236"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_65","text":"\u82e5Smart Link\u7ec4\u914d\u7f6e\u4e3a\u89d2\u8272\u62a2\u5360\u6a21\u5f0f\uff0c\u5f53\u4e3b\u7528\u94fe\u8def\u6545\u969c\u6062\u590d\u540e\uff0cMaster\u63a5\u53e3\u5c06\u62a2\u5360\u4e3aactive\u72b6\u6001\uff0cSlave \u63a5\u53e3\u5219\u8fdb\u5165inactive\u72b6\u6001\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002","title":"\u89d2\u8272\u62a2\u5360\u6a21\u5f0f\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_66","text":"\u82e5Smart Link\u7ec4\u914d\u7f6e\u4e3a\u975e\u89d2\u8272\u62a2\u5360\u6a21\u5f0f\uff0c\u5f53Master Link\u4ece\u6545\u969c\u4e2d\u6062\u590d\u540e\uff0cPort2\u5c06\u7ee7\u7eed\u5904\u4e8eactive\u72b6\u6001\uff0c Master\u53e3Port1\u7ee7\u7eed\u5904\u4e8einactive\u72b6\u6001\uff0c\u8fd9\u6837\u53ef\u4ee5\u4fdd\u6301\u6d41\u91cf\u7684\u7a33\u5b9a\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\u5c31\u662f\u975e\u62a2\u5360\u6a21\u5f0f\u3002\u4f7f\u7528**smart-link manual switch**\u547d\u4ee4\u53ef\u624b\u5de5\u6267\u884c\u94fe\u8def\u5012\u6362\u3002","title":"\u975e\u89d2\u8272\u62a2\u5360\u6a21\u5f0f\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_67","text":"","title":"\u914d\u7f6e\u53ca\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_68","text":"\u5185\u7f51\u6709VLAN10\u53ca20\uff08SW3\u4e0b\u6302\u7684\u7528\u6237\uff0c\u5728\u4e0a\u56fe\u4e2d\u5e76\u672a\u753b\u51fa\uff09\uff1bVLAN99\u4e3aSmart Link\u63a7\u5236VLAN\u3002\u5728SW3\u4e0a\u521b\u5efaSMLK\u7ec4\uff0c GE0/0/21\u4e3aMaster \u53e3\uff1b GE0/0/22\u4e3aSlave\u53e3\u3002\u5185\u7f51\u6d41\u91cf\u5728\u7f51\u7edc\u6b63\u5e38\u65f6\u8d70 GE0/0/21\uff0c\u5f53GE0/0/21\u6302\u6389\u7684\u65f6\u5019\u81ea\u52a8\u5207\u6362\u5230GE0/0/22\uff1b\u5f53GE0/0/21\u6545\u969c\u6062\u590d\u7684\u65f6\u5019\uff0c\u80fd\u91cd\u65b0\u8fdb\u5165\u8f6c \u53d1\u72b6\u6001\uff0c\u6d41\u91cf\u4ecd\u7136\u4eceGE0/0/21\u8fdb\u884c\u8f6c\u53d1\u3002","title":"\u5b9e\u9a8c\u62d3\u6251"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_69","text":"SW3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a [SW3] vlan batch 10 20 99 #\u914d\u7f6e\u63a5\u53e3\u7c7b\u578b\u4e3atrunk\u5e76\u653e\u884c\u76f8\u5173VLAN\uff08\u7528\u6237VLAN\u53ca\u63a7\u5236VLAN\uff09 [SW3] Interface gigabitethernet0/0/21 [SW3-gigabitethernet0/0/21] port link-type trunk [SW3-gigabitethernet0/0/21] port trunk allow-pass vlan 10 20 99 [SW3] Interface gigabitethernet0/0/22 [SW3-gigabitethernet0/0/22] port link-type trunk [SW3-gigabitethernet0/0/22] port trunk allow-pass vlan 10 20 99 #\u5173\u95ed\u63a5\u53e3\u4e0b\u7684STP\u3002\u52a0\u5165\u5230Smart Link\u7ec4\u7684\u63a5\u53e3\u5fc5\u987b\u5173\u95edSTP\uff1a [SW3] Interface gigabitethernet0/0/21 [SW3-gigabitethernet0/0/21] stp disable [SW3] Interface gigabitethernet0/0/22 [SW3-gigabitethernet0/0/22] stp disable #\u521b\u5efaSmart Link Group1 [SW3] smart-link group 1 [SW3-smlk-group1] port gigabitethernet0/0/21 master #\u6dfb\u52a0\u63a5\u53e3GE0/0/21\u5230Smartlink\u7ec4\u5e76\u6307\u5b9a\u4e3aMaster\u63a5\u53e3 [SW3-smlk-group1] port gigabitethernet0/0/22 slave #\u6dfb\u52a0\u63a5\u53e3GE0/0/22\u5230Smartlink\u7ec4\u5e76\u6307\u5b9a\u4e3aSlave\u63a5\u53e3 [SW3-smlk-group1] flush send control-vlan 99 password simple 123 #\u914d\u7f6e\u53d1\u9001\u63a7\u5236VLAN\u5e76\u8bbe\u7f6e\u5bc6\u7801 [SW3-smlk-group1] restore enable #\u6fc0\u6d3b\u56de\u5207\u529f\u80fd\uff0c\u7f3a\u7701\u65f6\uff0c\u8be5\u529f\u80fd\u4e3a\u5173\u95ed\u72b6\u6001 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u6765\u505a\u4e00\u4e0b\u9a8c\u8bc1\u53ca\u67e5\u770b\uff1a [SW3] display smart-link group 1 Smart Link group 1 information : Smart Link group was enabled Wtr-time is: 30 sec. There is no Load-Balance There is no protected-vlan reference-instance DeviceID: 4c1f-cc2c-1dd9 Control-vlan ID: 99 Member Role State Flush Count Last-Flush-Time ----------------------------------------------------------------------------------------------------------------------- GigabitEthernet0/0/21 Master Active 1 2014/09/02 14:02:34 UTC-08:00 GigabitEthernet0/0/22 Slave Inactive 0 0000/00/00 00:00:00 UTC+00:00 \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cGE0/0/21\u53e3\u76ee\u524d\u5904\u4e8eactive\u72b6\u6001\uff0c\u800cGE0/0/22\u53e3\u5904\u4e8einactive\u72b6\u6001\u3002\u63a5\u4e0b\u53bb\u770b \u770b\u5f53SW3\u7684GE0/0/21\u53e3\u53d1\u751f\u6545\u969c\u65f6\uff0c\u53d1\u751f\u7684\u73b0\u8c61\u3002\u624b\u5de5\u5c06SW3\u7684GE0/0/21\u53e3shutown\u3002 [SW3]display smart-link group 1 Smart Link group 1 information : Smart Link group was enabled Wtr-time is: 30 sec. There is no Load-Balance There is no protected-vlan reference-instance DeviceID: 4c1f-cc2c-1dd9 Control-vlan ID: 99 Member Role State Flush Count Last-Flush-Time ----------------------------------------------------------------------------------------------------------------------- GigabitEthernet0/0/21 Master Inactive 1 2014/09/02 14:02:34 UTC-08:00 GigabitEthernet0/0/22 Slave Active 1 2014/09/02 14:05:34 UTC-08:00 \u6211\u4eec\u770b\u5230GE0/0/21\u53e3\u7684\u72b6\u6001\u53d8\u6210\u4e86inactive\uff0c\u800cGE0/0/22\u53e3\u7684\u72b6\u6001\u53d8\u6210\u4e86active\u3002\u540c\u65f6GE0/0/22\u53e3\u7684 Flush Count\u53d8\u6210\u4e861\uff0c\u8868\u793a\u5728\u62d3\u6251\u53d8\u66f4\u540e\uff0c\u5411GE0/0/22\u53e3\u53d1\u9001\u8fc7\u4e00\u6b21Flush\u62a5\u6587\u3002","title":"\u914d\u7f6e\u53ca\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#monitor-link","text":"","title":"Monitor Link"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_70","text":"\u8003\u8651\u4e0a\u9762\u7684\u62d3\u6251\uff0c\u7531\u4e8eSW3\u4ea4\u6362\u673a\u662f\u53cc\u4e0a\u884c\u7684\u7ec4\u7f51\uff0c\u975e\u5e38\u9002\u5408\u90e8\u7f72Smart Link\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u4ea4\u6362\u673a\u7684\u751f\u6210\u6811\u5173\u95ed\uff0c\u5e76\u4e14\u90e8\u7f72Smart Link\uff0c\u5c06Port1\u53e3\u8bbe\u7f6e\u4e3aMaster\u63a5\u53e3\uff0cPort2\u53e3\u8bbe\u7f6e\u4e3aSlave\u63a5\u53e3\u3002\u5f53Port1\u53e3\u6216\u8005\u5176\u76f4\u8fde\u94fe\u8def\u53d1\u751f\u6545\u969c\u65f6\uff0cSW3\u4ea4\u6362\u673a\u80fd\u591f\u611f\u77e5\u5e76\u4e14\u8fc5\u901f\u5207\u6362\uff0c\u4f46\u662f\u5982\u679cSW1\u7684\u4e0a\u884c\u63a5\u53e3\u53d1\u751f\u6545\u969c\uff0c\u5982\u56fe\u6240\u793a\uff0cSW3\u4ea4\u6362\u673a\u662f\u65e0\u6cd5\u611f\u77e5\u7684\uff0c\u56e0\u6b64\u4e5f\u5c31\u65e0\u6cd5\u5b9e\u73b0\u5207\u6362\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u9700\u8981\u4e00\u4e2a\u65b0\u7684\u6280\u672f\u4e0eSmart Link\u642d\u914d\u4f7f\u7528\uff0c\u8fd9\u5c31\u662fMonitor Link\u3002","title":"\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#monitor-link_1","text":"Monitor Link\u7ec4\u4e5f\u79f0\u4e3a\u76d1\u63a7\u94fe\u8def\u7ec4\uff0c\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u4e0a\u884c\u548c\u4e0b\u884c\u63a5\u53e3\u7ec4\u6210\u3002\u4e0b\u884c\u63a5\u53e3\u7684\u72b6\u6001\u968f\u4e0a\u884c\u63a5\u53e3\u72b6\u6001\u7684\u53d8\u5316\u800c\u53d8\u5316\u3002 \u4e0a\u884c\u63a5\u53e3\uff08Uplink Port\uff09\u662fMonitor Link\u7ec4\u4e2d\u7684\u76d1\u63a7\u5bf9\u8c61\uff0c\u662f\u901a\u8fc7\u547d\u4ee4\u884c\u6307\u5b9a\u7684Monitor Link\u7ec4\u7684\u4e00\u79cd\u63a5\u53e3\u89d2\u8272\u3002\u5982\u679c\u591a\u4e2a\u63a5\u53e3\u88ab\u914d\u7f6e\u4e3aMonitor Link\u7ec4\u7684\u4e0a\u884c\u63a5\u53e3\uff0c\u53ea\u8981\u8fd9\u4e9b\u63a5\u53e3\u4e2d\u6709\u4e00\u4e2a\u63a5\u53e3\u5904\u4e8e\u8f6c\u53d1\u72b6\u6001\uff0c\u90a3\u4e48Monitor Link\u7ec4\u7684\u72b6\u6001\u5c31\u4e3aUP\uff1b\u53ea\u6709\u5f53\u6240\u6709\u4e0a\u884c\u63a5\u53e3\u90fd\u53d1\u751f\u6545\u969c\u65f6\uff0cMonitor Link \u7ec4\u7684\u72b6\u6001\u624d\u4e3aDown\uff0c\u8fd9\u65f6\u6240\u6709\u4e0b\u884c\u63a5\u53e3\u5c06\u90fd\u5c06\u88ab\u5173\u95ed\u3002\u5f53Monitor Link\u7ec4\u7684\u4e0a\u884c\u63a5\u53e3\u672a\u6307\u5b9a\u65f6\uff0c\u5219\u8ba4\u4e3a\u4e0a\u884c\u63a5\u53e3\u6545\u969c\uff0c\u6240\u6709\u4e0b\u884c\u63a5\u53e3\u90fd\u5c06\u88ab\u5173\u95ed\u3002 \u4e0b\u884c\u63a5\u53e3\uff08Downlink Port\uff09\u662fMonitor Link\u7ec4\u4e2d\u7684\u76d1\u63a7\u8005\uff0c\u662f\u901a\u8fc7\u547d\u4ee4\u884c\u6307\u5b9a\u7684Monitor Link\u7ec4\u7684\u53e6\u5916\u4e00\u79cd\u63a5\u53e3\u89d2\u8272\u3002Monitor Link\u7ec4\u7684\u4e0b\u884c\u63a5\u53e3\u53ef\u4ee5\u662f\u4ee5\u592a\u7f51\u63a5\u53e3\uff08\u7535\u53e3\u6216\u5149\u53e3\uff09\u6216\u805a\u5408\u63a5\u53e3\uff08Eth- trunk\u63a5\u53e3\uff09\u3002 \u5f53Monitor Link\u7ec4\u7684\u4e0a\u884c\u63a5\u53e3\u6062\u590d\u6b63\u5e38\u65f6\uff0cMonitor Link\u53ea\u4f1a\u5f00\u542f\u56e0\u4e0a\u884c\u63a5\u53e3\u6545\u969c\u800c\u88abMonitor Link \u963b\u585e\u7684\u4e0b\u884c\u63a5\u53e3\uff0c\u4e0d\u80fd\u5f00\u542f\u901a\u8fc7\u547d\u4ee4shutdown\u624b\u5de5\u5173\u95ed\u7684\u4e0b\u884c\u63a5\u53e3\u3002\u5e76\u4e14\u67d0\u4e2a\u4e0b\u884c\u63a5\u53e3\u6545\u969c\u5bf9\u4e0a\u884c\u63a5\u53e3\u548c\u5176\u4ed6\u4e0b\u884c\u63a5\u53e3\u6ca1\u6709\u5f71\u54cd\u3002","title":"\u5173\u4e8eMonitor Link"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#smart-linkmonitor-link","text":"\u5728\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u5728SW3\u4ea4\u6362\u673a\u4e0a\u90e8\u7f72Smart Link\u3002\u540c\u65f6\u5728SW1\u4e0a\u90e8\u7f72Monitor Link\uff0c\u5c06SW1\u7684GE0/0/1 \u8bbe\u7f6e\u4e3aUplink\u63a5\u53e3\uff0c\u5c06SW1\u7684GE0/0/2\u8bbe\u7f6e\u4e3aDownlink\u63a5\u53e3\u3002 \u5982\u6b64\u4e00\u6765\uff0c\u5f53SW3\u4ea4\u6362\u673a\u7684Port1\u63a5\u53e3\u6216\u8005\u4e0eSW1\u4e4b\u95f4\u7684\u4e92\u8054\u94fe\u8def\u53d1\u751f\u6545\u969c\uff0cSW3\u4ea4\u6362\u673a\u7684Smart Link \u80fd\u591f\u5b9e\u73b0\u5207\u6362\u3002\u800c\u5f53SW1\u4ea4\u6362\u673a\u7684\u4e0a\u884c\u63a5\u53e3GE0/0/1\u63a5\u53e3\u53d1\u751f\u6545\u969c\u6216\u8005\u5176\u4e0ePublic Network\u4e4b\u95f4\u7684\u94fe\u8def\u53d1\u751f\u6545\u969c\u7684\u8bdd\uff0cSW1\u7684GE0/0/1\u53e3\u5c06\u4f1a\u7acb\u5373down\u6389\uff0c\u800c\u8fd9\u5c06\u5bfc\u81f4SW1\u7684GE0/0/2\u88abMonitor Link\u5173\u95ed\uff0c \u8fd9\u6837\u4e00\u6765SW3\u4ea4\u6362\u673a\u7684Port1\u4e5f\u5c31Down\u4e86\uff0c\u4e8e\u662fSmart Link\u80fd\u591f\u8fdb\u884c\u6b63\u5e38\u7684\u5207\u6362\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"Smart Link\u4e0eMonitor Link\u7684\u642d\u914d"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_71","text":"\u5148\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u6d4b\u8bd5\uff0c\u5728SW1\u9a8c\u8bc1\u4e00\u4e0bMonitor Link: \u5b8c\u6210\u540e\u68c0\u67e5\u4e00\u4e0b\u914d\u7f6e\uff1a Recover-timer is 3 sec. Member Role State Last-up-time Last-down-time GigabitEthernet0/0/1 UpLk UP 0000/00/00 00:00:00 UTC+00:00 0000/00/00 00:00:00 UTC+00:00 GigabitEthernet0/0/2 DwLk[1] UP 0000/00/00 00:00:00 UTC+00:00 0000/00/00 00:00:00 UTC+00:00 \u4ece\u4e0a\u8ff0\u8f93\u51fa\u53ef\u4ee5\u770b\u51fa\uff0cuplink\u63a5\u53e3GE0/0/1\u662fUP\u7684\uff0c\u56e0\u6b64downlink\u63a5\u53e3GE0/0/2\u4e5f\u662fUP\u7684\u3002\u63a5\u7740\u6211\u4eec\u628a GE0/0/1\u53e3shutdown\uff0c\u7136\u540e\u5c31\u80fd\u89c2\u5bdf\u5230\uff1a [SW1] display monitor-link group 1 Monitor Link group 1 information : Recover-timer is 3 sec. Member Role State Last-up-time Last-down-time GigabitEthernet0/0/1 UpLk DOWN 0000/00/00 00:00:00 UTC+00:00 2014/09/09 10:26:40 UTC-08:00 GigabitEthernet0/0/2 DwLk[1] DOWN 0000/00/00 00:00:00 UTC+00:00 2014/09/09 10:26:41 UTC-08:00 \u968f\u7740uplink\u63a5\u53e3down\u6389\uff0cdownlink\u63a5\u53e3GE0/0/2\u4e5f\u88ab\u81ea\u52a8\u5730shutdown\u3002 \u5b9e\u73b0 VLAN \u95f4\u7684\u4e92\u8bbf \u901a\u8fc7\u5b50\u63a5\u53e3\u5b9e\u73b0 VLAN \u95f4\u7684\u4e92\u8bbf \u5728\u4e8c\u5c42\u4ea4\u6362\u73af\u5883\u4e0b\uff0c\u4e00\u4e2aVLAN\u5c31\u662f\u4e00\u4e2a\u5e7f\u64ad\u57df\uff0c\u76f8\u540cVLAN\u5185\u7684\u8282\u70b9\u5982\u679c\u914d\u7f6e\u76f8\u540c\u7f51\u6bb5\u7684IP\u5730\u5740\u5373\u53ef\u76f4\u63a5\u901a\u4fe1\uff0c\u6211\u4eec\u5c06\u8fd9\u79cd\u901a\u4fe1\u79f0\u4e3a\u4e8c\u5c42\u901a\u4fe1\u3002\u4e0d\u540cVLAN\u662f\u4e0d\u540c\u7684\u5e7f\u64ad\u57df\uff0c\u4e00\u822c\u4e5f\u662f\u4e0d\u540c\u7684\u903b\u8f91\u5b50\u7f51\uff0c\u800c\u4e14\u76f8\u4e92\u9694\u79bb\uff0c\u65e0\u6cd5\u76f4\u63a5\u4e92\u8bbf\uff0c\u8fd9\u6837\u80fd\u8d77\u5230\u9694\u7edd\u5e7f\u64ad\u7684\u4f5c\u7528\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002 \u4f46\u662f\u5b9e\u9645\u7f51\u7edc\u4e2d\u5f80\u5f80VLAN\u4e4b\u95f4\u6709\u4e92\u8bbf\u7684\u9700\u6c42\uff0c\u4f8b\u5982\u540c\u4e00\u516c\u53f8\u4e0d\u540c\u7684\u90e8\u95e8\u5212\u5206\u5728\u4e0d\u540c\u7684VLAN\uff0c\u90a3\u4e48\u5982\u679c\u8fd9\u4e9b\u90e8\u95e8\u4e4b\u95f4\u6709\u6570\u636e\u5f80\u6765\u7684\u9700\u6c42\u5462\uff0c\u6b64\u65f6\u4e8c\u5c42\u4ea4\u6362\u673a\u5c31\u65e0\u6cd5\u5b9e\u73b0\u4e86\uff0c\u9700\u8981\u501f\u52a9\u4e09\u5c42\u8bbe\u5907\uff08\u8def\u7531\u8bbe\u5907\uff09\u3002\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u4f7f\u7528\u8def\u7531\u5668\uff1a \u5728\u4e0a\u56fe\u4e2d\uff0c\u4ea4\u6362\u673a\u5c06GE0/0/1\u53caGE0/0/23\u53e3\u90fd\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\u5e76\u90fd\u52a0\u5165VLAN10\uff1b\u5c06GE0/0/2\u53caGE0/0/24 \u90fd\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\u5e76\u90fd\u52a0\u5165VLAN20\u3002\u7136\u540e\u5c06\u8def\u7531\u5668Router\u7684GE0/0/1\u53e3\u4f5c\u4e3aVLAN10\u7528\u6237\u7684\u7f51\u5173\uff0c GE0/0/2\u4f5c\u4e3aVLAN20\u7528\u6237\u7684\u7f51\u5173\uff0c\u4ece\u800c\u5229\u7528\u8def\u7531\u5668\u7684\u8def\u7531\u529f\u80fd\u5b9e\u73b0\u4e24\u4e2aVLAN\u4e4b\u95f4\u7684\u4e92\u8bbf\uff0c\u8fd9\u4e48\u505a\u770b\u4f3c\u53ef\u884c\uff0c\u4f46\u662f\u4e00\u4e2aVLAN\u5c31\u9700\u8981\u8def\u7531\u5668\u62ff\u51fa\u4e00\u4e2a\u63a5\u53e3\uff0c\u90a3\u4e48\u5982\u679c\u5185\u7f51\u670910\u4e2aVLAN\u5462\uff1f\u8def\u7531\u5668\u8868\u793a\u9e2d\u68a8\u5f88\u5927\u3002\u6240\u4ee5\u53e6\u4e00\u79cd\u7a0d\u5fae\u6539\u8fdb\u70b9\u7684\u65b9\u6cd5\u662f\uff0c\u5728\u8def\u7531\u5668\u7684\u4e00\u4e2a\u7269\u7406\u63a5\u53e3\u4e0a\uff0c\u914d\u7f6e\u903b\u8f91\u7684\u5b50\u63a5\u53e3\uff08Sub-interface\uff09\u6765\u5b9e\u73b0\u540c\u6837\u7684\u9700\u6c42\uff0c\u8fd9\u79cd\u89e3\u51b3\u65b9\u6848\u53eb\u5355\u81c2\u8def\u7531\uff1a \u5728\u4e0a\u56fe\u4e2d\uff0c\u4ea4\u6362\u673a\u4e0e\u8def\u7531\u5668\u4e4b\u95f4\u4ec5\u9700\u4e00\u6839\u7269\u7406\u94fe\u8def\u5373\u53ef\uff0c\u8fd9\u6bb5\u94fe\u8def\u7531\u4e8e\u8981\u627f\u8f7d\u591aVLAN\u7684\u6570\u636e\uff0c\u56e0\u6b64\u5728\u4ea4\u6362\u673a\u4e0a\u5c31\u8981\u5c06\u4e0e\u8def\u7531\u5668\u5bf9\u63a5\u7684\u63a5\u53e3\uff08GE0/0/24\uff09\u8bbe\u7f6e\u4e3aTrunk\u7c7b\u578b\u3002\u8def\u7531\u5668\u8fd9\u8fb9\u5462\u867d\u7136\u53ea\u6709\u4e00\u4e2a\u7269\u7406\u63a5\u53e3 \uff08GE0/0/1\uff09\u4e0e\u4ea4\u6362\u673a\u76f8\u8fde\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u57fa\u4e8e\u8fd9\u4e2a\u7269\u7406\u63a5\u53e3\u521b\u5efa\u591a\u4e2a\u5b50\u63a5\u53e3\uff0c\u5b50\u63a5\u53e3GE0/0/1.10\u5bf9\u5e94 VLAN10\uff0c\u5b83\u80fd\u591f\u8bc6\u522bVLAN10\u7684\u6807\u8bb0\uff0c\u5e76\u4e14\u80fd\u591f\u5904\u7406\u5e26VLAN10\u6807\u8bb0\u7684\u6570\u636e\u5e27\uff0c\u540c\u7406GE0/0/1.20\u5bf9\u5e94 VLAN20\u3002\u5982\u6b64\u4e00\u6765\uff0c\u5728\u8def\u7531\u5668\u4e0a\u4ec5\u4f7f\u7528\u4e00\u4e2a\u7269\u7406\u63a5\u53e3\uff0c\u5373\u53ef\u652f\u6301\u591a\u4e2aVLAN\u7684\u6570\u636e\u3002 \u5b50\u63a5\u53e3\u662f\u4e00\u4e2a\u8f6f\u4ef6\u7684\u3001\u903b\u8f91\u7684\u63a5\u53e3\uff0c\u662f\u57fa\u4e8e\u7269\u7406\u63a5\u53e3\u521b\u5efa\u7684\u3002\u8def\u7531\u5668\u4f1a\u628a\u5b50\u63a5\u53e3\u5f53\u6210\u662f\u4e00\u4e2a\u666e\u901a\u63a5\u53e3\u6765\u5bf9\u5f85\u3002\u901a\u8fc7\u5b50\u63a5\u53e3\u7684\u65b9\u5f0f\u6211\u4eec\u53ef\u4ee5\u5927\u5927\u7684\u8282\u7701\u786c\u4ef6\u6210\u672c\u3002\u5177\u4f53\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u5982\u4e0a\u914d\u7f6e\u540e\uff0c\u4ea4\u6362\u673a\u8fde\u63a5PC\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u76f8\u5e94\u7684VLAN\u5219PC\u5373\u53ef\u4e92\u901a\u3002\u4ece\u4e0a\u9762\u8fd9\u4e2a\u7889\u5821\u7684\u56fe\u53ef\u4ee5\u66f4\u52a0\u5f62\u8c61\u5730\u7406\u89e3\u5b50\u63a5\u53e3\u7684\u6982\u5ff5\uff0c\u5176\u5b9e\u5c31\u662f\u76f8\u5f53\u4e8e\u5728\u4e00\u4e2a\u5927\u7ba1\u9053\u91cc\u5957\u7740\u4e24\u4e2a\u5c0f\u7ba1\u9053\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\u4e00\u65e6\u6211\u4eec\u5728\u7269\u7406\u63a5\u53e3\u4e0a\u521b\u5efa\u4e86\u5b50\u63a5\u53e3\uff0c\u90a3\u4e48\u540e\u7eed\u7684\u914d\u7f6e\u5c06\u4e0d\u4f1a\u518d\u5728\u7269\u7406\u63a5\u53e3\u4e0a\u505a\uff0c\u800c\u662f\u5728\u5b50\u63a5\u53e3\u4e0a\u8fdb\u884c\uff0c\u6211\u4eec\u53ea\u8981\u4fdd\u8bc1\u7269\u7406\u63a5\u53e3\u6ca1\u6709\u88abshutdown\u5373\u53ef\u3002 \u4ee5\u592a\u7f51\u5b50\u63a5\u53e3\u6280\u672f\u53ef\u90e8\u7f72\u5728\u8def\u7531\u5668\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u90e8\u7f72\u5728\u9632\u706b\u5899\u4e0a\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50\u3002 \u4e0a\u9762\u662f\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u7ec4\u7f51\u573a\u666f\uff0c\u7ad9\u70b9\u5185\u7f51\u6709\u4e24\u4e2aVLAN\uff0cVLAN10\u53caVLAN20\u3002\u73b0\u5728\u7684\u9700\u6c42\u662f\uff0c\u8981\u6c42VLAN10 \u53caVLAN20\u80fd\u591f\u5b9e\u73b0\u4e92\u8bbf\uff0c\u800c\u4e14\u4e92\u8bbf\u6d41\u91cf\u5fc5\u987b\u7ecf\u8fc7\u9632\u706b\u5899\u505a\u5b89\u5168\u68c0\u67e5\u3002VLAN10\u5185\u7684\u7f51\u5143\u975e\u5e38\u91cd\u8981\uff0c\u5c5e\u4e8e\u9ad8\u5b89\u5168\u7ea7\u522b\u7684\u7f51\u7edc\uff0c\u800cVLAN20\u5185\u7684\u7f51\u7edc\u5219\u5b89\u5168\u7ea7\u522b\u66f4\u4f4e\u3002","title":"\u5b9e\u9a8c\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_72","text":"\u4e0a\u56fe\u4e2d\u7684\u4ea4\u6362\u673a\u5de5\u4f5c\u5728\u4e8c\u5c42\u6a21\u5f0f\uff0c\u8fde\u63a5\u7ec8\u7aef\u7684\u63a5\u53e3\u914d\u7f6e\u4e3aaccess\u7c7b\u578b\u5e76\u4e14\u5206\u522b\u52a0\u5165\u5230\u76f8\u5e94\u7684VLAN\u3002\u540c\u65f6\u4ea4\u6362\u673a\u8fde\u63a5\u9632\u706b\u5899\u7684\u63a5\u53e3GE0/0/24\u914d\u7f6e\u4e3aTrunk\u7c7b\u578b\u5e76\u4e14\u653e\u901aVLAN10\u53caVLAN20\u3002 \u968f\u540e\u5728\u9632\u706b\u5899\u7684GE0/0/1\u53e3\u4e0a\u521b\u5efa\u4e24\u4e2a\u5b50\u63a5\u53e3\uff1aGE0/0/1.10\u53caGE0/0/1.20\uff0c\u5b50\u63a5\u53e3\u7684\u914d\u7f6e\u5982\u56fe\u6240\u793a\uff0c\u8fd9\u4e24\u4e2a\u5b50\u63a5\u53e3\u5206\u522b\u5bf9\u5e94VLAN10\u53caVLAN20\u3002\u6700\u540e\u522b\u5fd8\u4e86\u8981\u5c06\u5b50\u63a5\u53e3\u6dfb\u52a0\u5230\u76f8\u5e94\u7684\u5b89\u5168\u57df\u4e2d\uff0c\u4f8b\u5982VLAN10\u8fd9\u4e2a\u7f51\u7edc\u5982\u679c\u6bd4\u8f83\u91cd\u8981\uff0c\u5219\u53ef\u5c06\u9632\u706b\u5899\u7684GE0/0/1.10\u63a5\u53e3\u6dfb\u52a0\u5230\u9ad8\u5b89\u5168\u7ea7\u522b\u7684\u533a\u57df\uff0c\u5982Trust\uff0c\u800cVLAN20\u53ef\u80fd\u9700\u8981\u63a5\u53d7\u6765\u81ea\u5916\u90e8\u7684\u8bbf\u95ee\uff0c\u56e0\u6b64\u89c4\u5212\u5728DMZ\u57df\uff0c\u6545\u5c06\u5b50\u63a5\u53e3GE0/0/1.20\u6dfb\u52a0\u5230DMZ\u533a\u57df\u3002\u63a5\u4e0b\u53bb\u5c31\u53ef\u4ee5\u90e8\u7f72\u57df\u95f4\u5305\u8fc7\u6ee4\u89c4\u5219\u4e86\u3002 \u901a\u8fc7 vlan-interface \u5b9e\u73b0 VLAN \u95f4\u7684\u4e92\u8bbf \u5728\u7406\u89e3\u4e86\u5b50\u63a5\u53e3\u4e4b\u540e\uff0c\u518d\u6765\u770b\u770b\u4e09\u5c42\u4ea4\u6362\u673a\u662f\u5982\u4f55\u5b9e\u73b0VLAN\u95f4\u7684\u6570\u636e\u4e92\u8bbf\u7684\uff0c\u4ece\u8fd9\u91cc\u5207\u5165\uff0c\u5f00\u59cb\u7406\u89e3\u5e76\u90e8\u7f72\u4e09\u5c42\u4ea4\u6362\u3002\u6211\u4eec\u77e5\u9053\u4e8c\u5c42\u4ea4\u6362\u673a\u662f\u53ef\u4ee5\u5b9e\u73b0\u4e8c\u5c42\u4ea4\u6362\u7684\uff0c\u5b83\u5173\u5fc3\u7684\u662f\u6570\u636e\u5e27\uff0c\u5bf9\u5e27\u5934\u7684\u4e8c\u5c42\u4fe1\u606f\u8fdb\u884c\u8bfb\u53d6\u5e76\u4e14\u6839\u636e\u81ea\u5df1\u7684MAC\u5730\u5740\u8868\u8fdb\u884c\u8f6c\u53d1\u3002\u800c\u4e09\u5c42\u4ea4\u6362\u673a\u76f8\u5f53\u4e8e\u5728\u4e8c\u5c42\u4ea4\u6362\u673a\u7684\u57fa\u7840\u4e0a\uff0c\u591a\u4e86\u4e2a\u8def\u7531\u6a21\u5757\uff0c\u4e8e\u662f\u4e4e\u5b83\u5c31\u80fd\u652f\u6301\u8def\u7531\u529f\u80fd\u4e86\uff1a\u652f\u6301\u8def\u7531\u9009\u62e9\u534f\u8bae\u3001\u652f\u6301\u4e09\u5c42\u6570\u636e\u8f6c\u53d1\u3001\u652f\u6301IP\u8def\u7531\u67e5\u627e\u3001\u652f\u6301\u4e09\u5c42\u63a5\u53e3\u7b49\u7b49\u3002 \u5148\u6765\u8ba4\u8bc6\u4e00\u4e0bvlan-interface\uff08\u7b80\u79f0vlanif\uff09\uff0c\u8fd9\u662f\u4e00\u4e2a\u903b\u8f91\u63a5\u53e3\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u5e76\u4e0d\u662f\u4e00\u4e2a\u771f\u5b9e\u7684\u7269\u7406\u63a5\u53e3\uff0c \u5f53\u6211\u4eec\u5728\u4ea4\u6362\u673a\u4e0a\u521b\u5efa\u4e86\u4e00\u4e2aVLAN\u4e4b\u540e\uff0c\u7d27\u63a5\u7740\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u4e0e\u8fd9\u4e2aVLAN\u5bf9\u5e94\u7684vlanif\uff0c\u4f8b\u5982\u6211\u4eec\u521b\u5efa\u4e86VLAN10\uff0c\u90a3\u4e48VLAN10\u5bf9\u5e94\u7684vlanif\u5c31\u662finterface vlanif 10\uff0c\u8fd9\u4e2avlanif10\u662f\u4e00\u4e2a\u4e09\u5c42\u63a5\u53e3\uff0c\u4f60\u53ef\u4ee5\u4e3a\u8fd9\u4e2a vlanif10\u914d\u7f6eIP\u5730\u5740\uff0c\u4e0eVLAN10\u5185\u7684PC\u7528\u6237\u7684IP\u5730\u5740\u540c\u4e00\u7f51\u6bb5\uff0c\u8fd9\u6837\u4e00\u6765\uff0cVLAN10\u5185\u7684\u7528\u6237\u5c31\u80fd\u591f\u5c06\u7f51 \u5173\u6307\u5411\u8fd9\u4e2avlanif\uff0c\u5f53VLAN10\u7684PC\u9700\u8981\u8bbf\u95ee\u672c\u7f51\u6bb5\u4ee5\u5916\u7684\u7f51\u7edc\u65f6\uff0c\u5b83\u4eec\u5c06\u6570\u636e\u4ea4\u7ed9\u7f51\u5173\uff0c\u4e5f\u5c31\u662fvlanif10\uff0c \u518d\u7531\u4e09\u5c42\u4ea4\u6362\u673a\u53bb\u505a\u8def\u7531\u67e5\u627e\u53ca\u6570\u636e\u8f6c\u53d1\u3002\u5b9e\u9645\u4e0a\uff0c\u5728\u8fd9\u4e2a\u7406\u89e3\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u62ff\u5355\u81c2\u8def\u7531\u90a3\u4e2a\u6a21\u578b\u5bf9\u7c7b\u6bd4\u3002 \u6240\u4ee5\u770b\u4e0a\u9762\u8fd9\u56fe\uff0c\u5728\u4e09\u5c42\u4ea4\u6362\u673a\u4e0a\u521b\u5efa\u4e86\u4e24\u4e2aVLAN\uff1a10\u548c20\uff0c\u540c\u65f6\u4e3a\u4e24\u4e2aVLAN\u7684vlanif\u5206\u914d\u4e86\u5730\u5740\u4f5c\u4e3a\u5404\u81eaVLAN\u7684\u7528\u6237\u7f51\u5173\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u8fd9\u53f0\u4ea4\u6362\u673a\u7684\u8def\u7531\u8868\u91cc\u5c31\u6709\u4e86\u4e24\u4e2aVLAN\u7f51\u6bb5\u7684\u8def\u7531\u3002\u90a3\u4e48\u5f53\u4e24VLAN\u4e4b\u95f4\u8981\u4e92\u8bbf\u65f6\uff0cVLAN10\u7684\u7528\u6237\u5c06\u6570\u636e\u4e22\u7ed9\u81ea\u5df1\u7684\u7f51\u5173\uff0c\u4e5f\u5c31\u662fvlanif10\uff0c\u6570\u636e\u5230\u4e86vlanif10\u4e4b\u540e\uff0c\u4e09\u5c42\u4ea4\u6362\u673a\u67e5\u770b\u6570\u636e\u5305\u7684\u76ee\u7684\u5730\u5740IP\u5e76\u5728\u8def\u7531\u8868\u4e2d\u8fdb\u884c\u5339\u914d\uff0c\u53d1\u73b0\u76ee\u7684\u5730\u662fVLAN20\u7684\u6240\u5728\u7f51\u6bb5\uff0c\u56e0\u6b64\u5c06\u6570\u636e\u4eceVLAN20 \u6254\u51fa\u53bb\uff0c\u6700\u7ec8\u62b5\u8fbe\u76ee\u7684\u5730\u7684VLAN20\u7684PC\u3002","title":"\u89e3\u51b3\u7684\u529e\u6cd5\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vlanif","text":"\u5b9e\u9a8c\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\u3002PC1\u53caPC2\u5206\u522b\u4f4d\u4e8eVLAN10\u53caVLAN20\uff0c\u73b0\u5728\u8981\u6c42\u5b8c\u6210\u4e09\u5c42\u4ea4\u6362\u673aSW\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u4e24\u4e2aVLAN\u7684\u7528\u6237\u80fd\u591f\u76f8\u4e92\u901a\u4fe1\u3002 SW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a [SW-vlanif10] ip address 192.168.20.254 24 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cPC1\u5c06\u81ea\u5df1\u7684IP\u5730\u5740\u8bbe\u7f6e\u5728192.168.10.0/24\u7f51\u6bb5\uff0c\u540c\u65f6\u5c06\u7f51\u5173\u914d\u7f6e\u4e3a192.168.10.254\uff1b PC2\u7684IP\u5730\u5740\u5219\u914d\u7f6e\u5728192.168.20.0/24\uff0c\u7f51\u5173\u8bbe\u7f6e\u4e3a192.168.20.254\uff0c\u4e24\u8005\u5c31\u80fd\u591f\u4e92\u76f8\u901a\u4fe1\u4e86\u3002","title":"Vlanif\u7684\u57fa\u7840\u914d\u7f6e\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_73","text":"\u5b9e\u9a8c\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\u3002PC1\u53caPC2\u5206\u522b\u5904\u4e8eVLAN10\u53caVLAN20\uff0c\u5b83\u4eec\u7684\u7f3a\u7701\u7f51\u5173\u90fd\u8bbe\u7f6e\u5728\u4e09\u5c42\u4ea4\u6362\u673aSW2 \u4e0a\u3002SW1\u662f\u63a5\u5165\u5c42\u4ea4\u6362\u673a\uff0c\u53ea\u5177\u5907\u4e8c\u5c42\u4ea4\u6362\u529f\u80fd\u3002SW2\u4e0e\u8def\u7531\u5668Router\u5b9e\u73b0\u4e09\u5c42\u5bf9\u63a5\uff0c\u7528\u4e8e\u4e24\u8005\u5bf9\u63a5\u7684VLAN \u662fVLAN99\u3002\u4e0a\u8ff0\u62d3\u6251\uff0c\u6211\u4eec\u53ef\u4ee5\u753b\u4e00\u4e2a\u903b\u8f91\u56fe\u6765\u5e2e\u52a9\u7406\u89e3\uff1a SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a Router\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u94fe\u8def\u805a\u5408 \u94fe\u8def\u805a\u5408\u6280\u672f\u80cc\u666f \u5728\u4e00\u4e2a\u7f51\u7edc\u4e2d\uff0c\u67d0\u4e9b\u5173\u952e\u94fe\u8def\u627f\u8f7d\u7684\u6d41\u91cf\u53ef\u80fd\u975e\u5e38\u5927\uff0c\u94fe\u8def\u7684\u8d1f\u8f7d\u53ef\u80fd\u4f1a\u5f88\u9ad8\uff0c\u5e26\u5bbd\u5c31\u4f1a\u6210\u4e3a\u6570\u636e\u4f20\u8f93\u7684\u74f6\u9888\u3002\u5982\u679c\u589e\u52a0\u5e26\u5bbd\uff0c\u90a3\u5c31\u9700\u8981\u589e\u52a0\u786c\u4ef6\u6295\u5165\uff0c\u4f8b\u5982\u5c06\u94fe\u8def\u4ece\u5343\u5146\u7535\u53e3\u6362\u6210\u4e07\u5146\u5149\u7ea4\u63a5\u53e3\uff0c\u8fd9\u5c31\u4e0d\u5f97\u4e0d\u589e\u52a0\u6210\u672c\u3002\u53e6\u4e00\u4e2a\u95ee\u9898\u662f\u5355\u70b9\u6545\u969c\u7684\u95ee\u9898\uff0c\u4e00\u65e6\u8fd9\u6839\u94fe\u8def\u53d1\u751f\u6545\u969c\uff0c\u90a3\u4e48\u4e0d\u53ef\u907f\u514d\u7684\u5c06\u5f71\u54cd\u5230\u7f51\u7edc\u7684\u53ef\u8fbe\u6027\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u4ee5\u592a\u7f51\u94fe\u8def\u805a\u5408\u6280\u672f\uff08Link Aggregation\uff09\uff0c\u6216\u8005\u79f0\u4e3a\u7aef\u53e3\u6346\u7ed1\u3001\u94fe\u8def\u6346\u7ed1\u6280\u672f\uff0c\u662f\u4e00\u79cd\u901a\u7528\u7684\u4ee5\u592a\u7f51\u6280\u672f\u3002\u901a\u8fc7\u8be5\u6280\u672f\uff0c\u6211\u4eec\u80fd\u591f\u5c06\u591a\u6761\u4ee5\u592a\u7f51\u94fe\u8def\u8fdb\u884c\u201c\u6346\u7ed1\u201d\uff0c\u6346\u7ed1\u4e4b\u540e\u7684\u8fd9\u4e9b\u7269\u7406\u94fe\u8def\u5c31\u5f62\u6210\u4e86\u903b\u8f91\u4e0a\u7684\u4e00\u6761\u65b0\u7684\u94fe\u8def\uff08Eth-Trunk\uff09\uff0c\u8fd9\u6761\u805a\u5408\u94fe\u8def\u4e0d\u4ec5\u4ec5\u5728\u5e26\u5bbd\u4e0a\u6210\u500d\u7684\u589e\u52a0\uff0c\u8fd8\u540c\u65f6\u63d0\u4f9b\u4e86\u8d1f\u8f7d\u5747\u8861\u53ca\u94fe\u8def\u5197\u4f59\u3002\u6709\u4eba\u53ef\u80fd\u4f1a\u95ee\uff0c\u4e3a\u5565\u8981\u90a3\u4e48\u9ebb\u70e6\uff0c\u4ea4\u6362\u673a\u4e4b\u95f4\u591a\u8fde\u51e0\u6839\u7ebf\u4e0d\u5c31\u5b8c\u4e86\u4e48\uff1f\u591a\u8fde\u51e0\u6839\u7ebf\u5b9e\u9645\u4e0a\u5c31\u591a\u521b\u9020\u4e86\u51e0\u4e2a\u73af\u8def\uff0c\u8fd9\u65f6\u7531\u4e8e\u751f\u6210\u6811\u7684\u4f5c\u7528\uff0c\u5fc5\u7136\u4f1a\u963b\u585e\u6389\u51e0\u4e2a\u7aef\u53e3\uff0c\u5982\u6b64\u4e00\u6765\u4ecd\u7136\u53ea\u6709\u4e00\u6761\u94fe\u8def\u5728\u8f6c\u53d1\u6570\u636e\uff0c\u8fd8\u662f\u8fbe\u4e0d\u5230\u6211\u4eec\u7684\u9884\u671f\u3002\u4f46\u662f\u4f7f\u7528\u94fe\u8def\u805a\u5408\u529f\u80fd\uff0c\u5219\u53ef\u5c06\u8fd9\u51e0\u6839\u94fe\u8def\u6346\u7ed1\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u6761\uff0c\u4ea4\u6362\u673a\u4f1a\u5c06\u6346\u7ed1\u540e\u7684\u8fd9\u6839\u805a\u5408\u94fe\u8def\u5f53\u505a\u4e00\u6761\u94fe\u8def\u6765\u5bf9\u5f85\uff0c\u81ea\u7136\u4e5f\u5c31\u4e0d\u5b58\u5728\u73af\u8def\u7684\u95ee\u9898\u4e86\u3002 \u4e3e\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u4e0a\u56fe\u4e2d\uff0c\u4e24\u53f0\u4ea4\u6362\u673a\u7684GE0/0/1\u5230GE0/0/2\u63a5\u53e3\u4e24\u4e24\u5bf9\u63a5\uff0c\u5982\u679c\u5728SW1\u53caSW2\u4e0a\u5206\u522b\u5c06\u81ea\u5df1\u7684GE0/0/1\u5230GE0/0/2\u63a5\u53e3\u8fdb\u884c\u6346\u7ed1\uff0c\u5219\u4f1a\u4ea7\u751f\u51fa\u4e00\u4e2a\u805a\u5408\u63a5\u53e3\uff0c\u4e5f\u5c31\u662fEth-trunk\u63a5\u53e3\u3002\u94fe\u8def\u805a\u5408\u6280\u672f\u80fd\u591f\u90e8\u7f72\u5728\u4ea4\u6362\u673a\u4e4b\u95f4\u3001\u9632\u706b\u5899\u4e4b\u95f4\u3001\u4ea4\u6362\u673a\u4e0e\u9632\u706b\u5899\u4e4b\u95f4\u3001\u4ea4\u6362\u673a\u4e0e\u7279\u5b9a\u7684\u670d\u52a1\u5668\u4e4b\u95f4\u7b49\u7b49\uff0c\u662f\u4e00\u79cd\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\u7684\u6280\u672f\u3002\u534e\u4e3a\u4ea4\u6362\u673a\u4e0a\u7684Eth-trunk\u652f\u6301\u4e24\u79cd\u5de5\u4f5c\u65b9\u5f0f\uff1a\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u53caLACP\u3002 \u5de5\u4f5c\u65b9\u5f0f\uff1a\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\uff08Manual load-balance\uff09 \u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u65b9\u5f0f\u5141\u8bb8\u5728\u805a\u5408\u7ec4\u4e2d\u624b\u5de5\u52a0\u5165\u591a\u4e2a\u6210\u5458\u63a5\u53e3\uff0c\u5e76\u4e14\u6240\u6709\u7684\u63a5\u53e3\u5747\u5904\u4e8e\u8f6c\u53d1\u72b6\u6001\uff0c\u5206\u62c5\u8d1f\u8f7d\u7684\u6d41\u91cf\u3002\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0cEth-Trunk\u7684\u521b\u5efa\u3001\u6210\u5458\u63a5\u53e3\u7684\u52a0\u5165\u90fd\u9700\u8981\u624b\u5de5\u914d\u7f6e\u5b8c\u6210\uff0c\u6ca1\u6709LACP\uff08link Aggregation Control Protocol\uff09\u534f\u8bae\u62a5\u6587\u7684\u53c2\u4e0e\u3002\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u6a21\u5f0f\u901a\u5e38\u7528\u5728\u5bf9\u7aef\u8bbe\u5907\u4e0d\u652f\u6301LACP\u534f\u8bae\u7684\u60c5\u51b5\u4e0b\u3002 \u57fa\u7840\u914d\u7f6e\u547d\u4ee4\u5982\u4e0b\uff1a [Huawei-Eth-Trunk1] least active-linknumber ? \u5de5\u4f5c\u65b9\u5f0f\uff1aLACP LACP\u65b9\u5f0f\u662f\u4e00\u79cd\u5229\u7528LACP\u534f\u8bae\u8fdb\u884c\u805a\u5408\u53c2\u6570\u534f\u5546\u3001\u786e\u5b9a\u6d3b\u52a8\u63a5\u53e3\u548c\u975e\u6d3b\u52a8\u63a5\u53e3\u7684\u94fe\u8def\u805a\u5408\u65b9\u5f0f\u3002\u8be5\u6a21\u5f0f\u4e0b\uff0c\u9700\u624b\u5de5\u521b\u5efaEth-Trunk\uff0c\u624b\u5de5\u52a0\u5165Eth-Trunk\u6210\u5458\u63a5\u53e3\uff0c\u4f46\u662f\uff0c\u7531LACP\u534f\u8bae\u534f\u5546\u786e\u5b9a\u6d3b\u52a8\u63a5\u53e3\u548c\u975e\u6d3b\u52a8\u63a5\u53e3\u3002 LACP\u6a21\u5f0f\u4e5f\u79f0\u4e3aM\u2236N\u6a21\u5f0f\u3002\u8fd9\u79cd\u65b9\u5f0f\u540c\u65f6\u53ef\u4ee5\u5b9e\u73b0\u94fe\u8def\u8d1f\u8f7d\u5206\u62c5\u548c\u94fe\u8def\u5197\u4f59\u5907\u4efd\u7684\u53cc\u91cd\u529f\u80fd\u3002\u5728\u94fe\u8def\u805a\u5408\u7ec4\u4e2dM\u6761\u94fe\u8def\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff0c\u8fd9\u4e9b\u94fe\u8def\u8d1f\u8d23\u8f6c\u53d1\u6570\u636e\u5e76\u8fdb\u884c\u8d1f\u8f7d\u5206\u62c5\uff0c\u53e6\u5916N\u6761\u94fe\u8def\u5904\u4e8e\u975e\u6d3b\u52a8\u72b6\u6001\u4f5c\u4e3a\u5907\u4efd\u94fe\u8def\uff0c\u4e0d\u8f6c\u53d1\u6570\u636e\u3002\u5f53M\u6761\u94fe\u8def\u4e2d\u6709\u94fe\u8def\u51fa\u73b0\u6545\u969c\u65f6\uff0c\u7cfb\u7edf\u4f1a\u4eceN\u6761\u5907\u4efd\u94fe\u8def\u4e2d\u9009\u62e9\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u63a5\u66ff\u51fa\u73b0\u6545\u969c\u7684\u94fe\u8def\uff0c\u540c\u65f6\u8fd9\u6761\u66ff\u6362\u6545\u969c\u94fe\u8def\u7684\u5907\u4efd\u94fe\u8def\u72b6\u6001\u53d8\u4e3a\u6d3b\u52a8\u72b6\u6001\u5f00\u59cb\u8f6c\u53d1\u6570\u636e\u3002 LACP\u6a21\u5f0f\u4e0e\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u6a21\u5f0f\u7684\u4e3b\u8981\u533a\u522b\u4e3a\uff1aLACP\u6a21\u5f0f\u6709\u5907\u4efd\u94fe\u8def\uff0c\u800c\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u6a21\u5f0f\u6240\u6709\u6210\u5458\u63a5\u53e3\u5747\u5904\u4e8e\u8f6c\u53d1\u72b6\u6001\uff0c\u5206\u62c5\u8d1f\u8f7d\u6d41\u91cf\u3002\u6b64\u5916\uff0cLACP\u6a21\u5f0f\u4e0b\uff0c\u4ea4\u6362\u673a\u4e4b\u95f4\u4f1a\u4ea4\u4e92LACP\u62a5\u6587\u3002 LACP\u6a21\u5f0f\u4e2d\u6709\u4e00\u4e2a\u4e3b\u52a8\u3001\u88ab\u52a8\u7aef\u7684\u6982\u5ff5\u3002\u8bbe\u5907LACP\u4f18\u5148\u7ea7\u8f83\u9ad8\uff08\u503c\u8d8a\u5c0f\u8d8a\u4f18\uff09\u7684\u4e00\u7aef\u4e3a\u4e3b\u52a8\u7aef\uff0c\u8bbe\u5907LACP \u4f18\u5148\u7ea7\u8f83\u4f4e\u7684\u4e00\u7aef\u4e3a\u88ab\u52a8\u7aef\u3002\u5982\u679c\u4e24\u7aef\u8bbe\u5907\u7684LACP\u4f18\u5148\u7ea7\u4e00\u6837\u65f6\uff0c\u5219MAC\u5730\u5740\u5c0f\u7684\u80dc\u51fa\u3002 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cSwitchA\u53caSwitchB\u4e4b\u95f4\u90e8\u7f72\u4e86Eth-Trunk\uff0c\u8be5Eth-Trunk\u4e2d\u5305\u542b\u4e09\u6761\u76f4\u8fde\u94fe\u8def\uff0c\u5e76\u4e14\u91c7\u7528\u7684\u662fLACP\u65b9\u5f0f\u3002\u4e24\u8005\u4f1a\u4ea4\u4e92LACP\u62a5\u6587\u4f7f\u5f97\u805a\u5408\u94fe\u8def\u80fd\u591f\u534f\u5546\u5efa\u7acb\u3002A\u548cB\u4f1a\u6bd4\u8f83\u4e24\u8005\u7684\u8bbe\u5907LACP\u4f18\u5148\u7ea7\uff0c\u503c\u6700\u5c0f\u7684\u80dc\u51fa\u6210\u4e3a\u4e3b\u52a8\u7aef\uff0c\u8fd9\u91cc\u5047\u8bbeA\u80dc\u51fa\u3002\u4ece\u56fe\u4e2d\u6211\u4eec\u770b\u5230A\u9009\u62e9\u4e86\u4e0a\u9762\u4e24\u6761\u94fe\u8def\u4f5c\u4e3a\u6d3b\u52a8\u94fe\u8def\uff0c\u800c B\u9009\u62e9\u4e86\u4e0b\u9762\u4e24\u6761\u94fe\u8def\uff0c\u7531\u4e8eA\u662f\u4e3b\u52a8\u7aef\uff0c\u56e0\u6b64\u6700\u7ec8AB\u4e4b\u95f4\u5efa\u7acb\u8d77\u6765\u7684\u805a\u5408\u94fe\u8def\u4e2d\u7684\u6d3b\u52a8\u94fe\u8def\u7531A\u6765\u786e\u5b9a\uff0c \u4e5f\u5c31\u662f\u4e0a\u9762\u4e24\u6761\u94fe\u8def\u6210\u4e3a\u6d3b\u52a8\u94fe\u8def\u3002","title":"\u4e8c\u3001\u4e09\u5c42\u4ea4\u6362\u673a\u3001\u8def\u7531\u5668\u7b80\u5355\u7ec4\u7f51\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#s5700-v200r001c00","text":"#\u521b\u5efaEth-Trunk\uff0c\u5e76\u5c06\u5de5\u4f5c\u65b9\u5f0f\u4fee\u6539\u4e3aLACP\uff1a [Huawei] interface eth-trunk 1 [Huawei] mode lacp-static #\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cEth-Trunk\u7684\u5de5\u4f5c\u6a21\u5f0f\u4e3a\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u65b9\u5f0f\u3002 #\u6dfb\u52a0\u6210\u5458\u63a5\u53e3\u5230Eth-Trunk\u4e2d\uff08\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u6dfb\u52a0\uff09\uff1a [Huawei] interface GigabitEthernet0/0/1 [Huawei-GigabitEthernet0/0/1] eth-trunk 1 [Huawei] interface GigabitEthernet0/0/2 [Huawei-GigabitEthernet0/0/2] eth-trunk 1 [Huawei] interface GigabitEthernet0/0/3 [Huawei-GigabitEthernet0/0/3] eth-trunk 1 #\uff08\u53ef\u9009\uff09\u914d\u7f6eEth-trunk\u6210\u5458\u94fe\u8def\u7684\u8d1f\u8f7d\u5206\u62c5\u6a21\u5f0f\uff1a [Huawei-Eth-Trunk1] load-balance ? #\uff08\u53ef\u9009\uff09\u914d\u7f6e\u8bbe\u5907LACP\u4f18\u5148\u7ea7\uff1a [Huawei] lacp priority ? \u7cfb\u7edfLACP\u4f18\u5148\u7ea7\u503c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edfLACP\u4f18\u5148\u7ea7\u4e3a32768\u3002\u5728\u4e24\u7aef\u8bbe\u5907\u4e2d\u9009\u62e9\u7cfb\u7edfLACP\u4f18\u5148\u7ea7\u8f83\u5c0f\u4e00\u7aef \u4f5c\u4e3a\u4e3b\u52a8\u7aef\uff0c\u5982\u679c\u7cfb\u7edfLACP\u4f18\u5148\u7ea7\u76f8\u540c\u5219\u9009\u62e9MAC\u5730\u5740\u8f83\u5c0f\u7684\u4e00\u7aef\u4f5c\u4e3a\u4e3b\u52a8\u7aef\u3002 #\uff08\u53ef\u9009\uff09\u914d\u7f6e\u63a5\u53e3LACP\u4f18\u5148\u7ea7\uff1a [Huawei-GigabitEthernet0/0/1] lacp priority ? \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u63a5\u53e3\u7684LACP\u4f18\u5148\u7ea7\u662f32768\u3002\u53d6\u503c\u8d8a\u5c0f\uff0c\u8868\u660e\u63a5\u53e3\u7684LACP\u4f18\u5148\u7ea7\u8d8a\u9ad8\u3002\u4f18\u5148\u7ea7\u8d8a\u9ad8\u7684\u63a5\u53e3\u8d8a\u6709\u53ef\u80fd\u6210\u4e3a\u6d3b\u52a8\u7684\u6210\u5458\u63a5\u53e3\u3002 #\uff08\u53ef\u9009\uff09\u914d\u7f6e\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0a\u9650\u9608\u503c\uff1a [Huawei-Eth-Trunk1] max active-linknumber \uff1f \u914d\u7f6e\u94fe\u8def\u805a\u5408\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0a\u9650\u9608\u503c\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0a\u9650\u9608\u503c\u4e3a8\u3002 \u914d\u7f6eLACP\u6a21\u5f0f\u6d3b\u52a8\u63a5\u53e3\u6570\u76ee\u4e0a\u9650\u9608\u503c\u53ef\u4ee5\u63a7\u5236Eth-Trunk\u4e2d\u6d3b\u52a8\u63a5\u53e3\u7684\u6700\u5927\u6570M\uff0c\u5269\u4f59\u7684\u6210\u5458\u63a5\u53e3\u5904\u4e8e\u5907\u4efd\u72b6\u6001\u3002 #\uff08\u53ef\u9009\uff09\u914d\u7f6e\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0b\u9650\u9608\u503c\uff1a [Huawei-Eth-Trunk1] least active-linknumber \uff1f \u914d\u7f6e\u94fe\u8def\u805a\u5408\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0b\u9650\u9608\u503c\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u6d3b\u52a8\u63a5\u53e3\u6570\u4e0b\u9650\u9608\u503c\u4e3a1\u3002 \u914d\u7f6eLACP\u6a21\u5f0f\u6d3b\u52a8\u63a5\u53e3\u6570\u76ee\u4e0b\u9650\u9608\u503c\u53ef\u4ee5\u51b3\u5b9aEth-Trunk\u4e2d\u6d3b\u52a8\u63a5\u53e3\u6570\u7684\u6700\u5c0f\u503c\uff0c\u5982\u679c\u9759\u6001\u6a21\u5f0f\u4e0b\u6d3b\u52a8\u63a5\u53e3\u6570\u76ee\u5c0f\u4e8e\u8be5\u503c\uff0c Eth-Trunk\u7684\u63a5\u53e3\u72b6\u6001\u5c06\u53d8\u4e3aDOWN\u7684\u72b6\u6001\u3002 #\uff08\u53ef\u9009\uff09\u4f7f\u80fdLACP\u62a2\u5360\u5e76\u914d\u7f6e\u62a2\u5360\u7b49\u5f85\u65f6\u95f4\uff1a [Huawei-Eth-Trunk1] lacp preempt enable [Huawei-Eth-Trunk1] lacp preempt delay \uff1f \u57fa\u7840\u5b9e\u9a8c","title":"\u57fa\u7840\u914d\u7f6e\u547d\u4ee4\uff08\u6b64\u5904\u4ee5S5700 V200R001C00\u7248\u672c\u4e3a\u4f8b\uff0c\u4e0d\u540c\u7684\u8f6f\u4ef6\u7248\u672c\uff0c\u5728\u914d\u7f6e\u4e0a\u53ef\u80fd\u5b58\u5728\u7ec6\u5fae\u5dee\u5f02\uff09\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#1_1","text":"SW1\u53caSW2\u901a\u8fc7GE0/0/23\u53ca24\u53e3\u4e92\u8054\uff0c\u914d\u7f6eEth-trunk\u5c06\u8fd9\u4e24\u6761\u94fe\u8def\u8fdb\u884c\u6346\u7ed1\u3002\u6346\u7ed1\u540e\u7684\u94fe\u8def\u914d\u7f6e\u4e3a Trunk\u6a21\u5f0f\uff0c\u4f7f\u5f97\u4e24\u53f0\u4ea4\u6362\u673a\u4e0b\u76f8\u540cVLAN\u5185\u7684\u7528\u6237\u80fd\u591f\u4e92\u8bbf\uff0c\u4e5f\u5c31\u662fPC1\u4e0ePC3\u80fd\u591f\u4e92\u8bbf\uff1bPC2\u4e0ePC4 \u4e5f\u80fd\u591f\u4e92\u8bbf\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5728SW1\u4e0a\u67e5\u770b\u4e00\u4e0b\uff1a PortName Status Weight GigabitEthernet0/0/23 Up 1 GigabitEthernet0/0/24 Up 1","title":"\u5b9e\u9a8c1\uff1a\u624b\u5de5\u8d1f\u8f7d\u5206\u62c5\u6a21\u5f0f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#2lacp","text":"SW1\u53caSW2\u7684GE0/0/22\u5230GE0/0/24\u53e3\u5206\u522b\u4e92\u8054\uff0c\u5c06\u8fd9\u4e09\u6761\u94fe\u8def\u6346\u7ed1\u4e3aEth-Trunk\uff0c\u4f7f\u7528LACP\u65b9\u5f0f\uff0c SW1\u4e3a\u4e3b\u52a8\u7aef\uff0c\u5728\u8be5\u805a\u5408\u94fe\u8def\u4e2d\uff0c\u4e24\u6761\u94fe\u8def\u4e3a\u6d3b\u52a8\u94fe\u8def\uff0c\u5176\u4f59\u4e00\u6761\u505a\u5907\u4efd\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u540e\u68c0\u67e5\u4e00\u4e0b\u914d\u7f6e\uff1a System Priority: 1 System ID: 4c1f-ccbe-289e Least Active-linknumber: 1 Max Active-linknumber: 2 Operate status: up Number Of Up Port In Trunk: 2 -------------------------------------------------------------------------------- ActorPortName Status PortType PortPri PortNo PortKey PortState Weight GigabitEthernet0/0/22 Selected 1000TG 32768 23 401 10111100 1 GigabitEthernet0/0/23 Selected 1000TG 32768 24 401 10111100 1 GigabitEthernet0/0/24 Unselect 1000TG 32768 25 401 10100000 1 Partner: -------------------------------------------------------------------------------- ActorPortName SysPri SystemID PortPri PortNo PortKey PortState GigabitEthernet0/0/22 32768 4c1f-cc77-6cf4 32768 23 401 10111100 GigabitEthernet0/0/23 32768 4c1f-cc77-6cf4 32768 24 401 10111100 GigabitEthernet0/0/24 32768 4c1f-cc77-6cf4 32768 25 401 10110000 \u5728\u4e0a\u8ff0\u8f93\u51fa\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230SW1\u7684eth-trunk1\u805a\u5408\u63a5\u53e3\u7684\u72b6\u6001\u3002Operate status\u663e\u793a\u6574\u4e2a\u805a\u5408\u63a5\u53e3\u7684 \u72b6\u6001\u4e3aUP\u3002\u800c\u7531\u4e8e\u6211\u4eec\u8bbe\u7f6e\u4e86max active-linknumber 2\uff0c\u56e0\u6b64\u4e09\u4e2a\u6210\u5458\u63a5\u53e3\u4e2d\uff0c\u4ec5\u6709\u4e24\u4e2a\u63a5\u53e3\uff08\u4e24\u6761\u94fe\u8def\uff09\u662f\u6d3b\u8dc3\u7684\uff0c\u5b83\u4eec\u4f1a\u8f6c\u53d1\u6570\u636e\uff0c\u800c\u5269\u4e0b\u7684\u63a5\u53e3\u5219\u4f5c\u4e3a\u5907\u4efd\u3002\u6211\u4eec\u770b\u5230GE0/0/22\u53caGE0/0/23\u662fSelect \u72b6\u6001\uff0c\u56e0\u6b64\u5b83\u4eec\u662f\u6d3b\u8dc3\u63a5\u53e3\uff0c\u800cGE0/0/24\u662fUnselect\u72b6\u6001\uff0c\u5219\u5b83\u4eec\u662f\u975e\u6d3b\u8dc3\u7684\u5907\u4efd\u63a5\u53e3\u3002\u56e0\u4e3aSW1\u662f\u4e3b\u52a8\u7aef\u8bbe\u5907\uff0c\u56e0\u6b64\u7531\u5b83\u51b3\u5b9a\u54ea\u4e9b\u63a5\u53e3\u662f\u6d3b\u8dc3\uff0c\u54ea\u4e9b\u662f\u975e\u6d3b\u8dc3\u7684\u3002 \u4ea4\u6362\u5b89\u5168 \u7aef\u53e3\u955c\u50cf","title":"\u5b9e\u9a8c2\uff1aLACP\u65b9\u5f0f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_74","text":"\u5728\u67d0\u4e9b\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u9700\u8981\u76d1\u63a7\u4ea4\u6362\u673a\u7279\u5b9a\u7aef\u53e3\u7684\u5165\u7ad9\u6216\u51fa\u7ad9\u62a5\u6587\uff0c\u6216\u8005\u9700\u8981\u9488\u5bf9\u7279\u5b9a\u7684\u6d41\u91cf\u8fdb\u884c\u5206\u6790\uff0c\u4f8b\u5982\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u671f\u671b\u6293\u53d6PC1\u6536\u53d1\u7684\u62a5\u6587\u5e76\u8fdb\u884c\u5206\u6790\uff0c\u90a3\u4e48\u4fbf\u53ef\u4ee5\u5728\u4ea4\u6362\u673a\u7684GE0/0/3\u53e3\u63a5\u4e00\u4e2a\u76d1\u63a7PC\uff0c\u5728\u76d1\u63a7PC\u4e0a\u5b89\u88c5\u534f\u8bae\u5206\u6790\u8f6f\u4ef6\uff0c\u7136\u540e\u5728\u4ea4\u6362\u673a\u4e0a\u90e8\u7f72\u7aef\u53e3\u955c\u50cf\uff0c\u5c06GE0/0/2\u7684\u5165\u3001\u51fa\u7ad9\u6d41\u91cf\u955c\u50cf\u5230GE0/0/3\u53e3\u4e0a\u6765\uff0c\u63a5\u4e0b\u6765\u6211\u53ea\u8981\u5728\u76d1\u63a7PC\u4e0a\u901a\u8fc7\u534f\u8bae\u5206\u6790\u8f6f\u4ef6\u67e5\u770b\u62a5\u6587\u5373\u53ef\u3002 \u6ce8\u610f\u5230\uff0c\u5982\u679c\u6ca1\u6709\u7aef\u53e3\u955c\u50cf\u6280\u672f\uff0c\u9664\u975e\u6570\u636e\u5305\u7684\u76ee\u7684\u5730\u662f\u76d1\u63a7PC\uff08\u6240\u8fde\u63a5\u7684\u7aef\u53e3\uff09\uff0c\u5426\u5219\u62a5\u6587\u662f\u4e0d\u4f1a\u53d1\u5411\u8be5\u7aef\u53e3\u7684\u3002\u56e0\u6b64\u4e8b\u5b9e\u4e0a\u7aef\u53e3\u955c\u50cf\u5c31\u662f\u5c06\u67d0\u4e2a\u7279\u5b9a\u7aef\u53e3\u7684\u6d41\u91cf\u62f7\u8d1d\u5230\u67d0\u4e2a\u76d1\u63a7\u7aef\u53e3\uff0c\u5c31\u8fd9\u4e48\u7b80\u5355\u3002 \u7aef\u53e3\u955c\u50cf\u5e38\u7528\u4e8e\uff1a\u6d41\u91cf\u89c2\u6d4b\u53ca\u7edf\u8ba1\uff1b\u6545\u969c\u5b9a\u4f4d\u7b49\u3002","title":"\u7aef\u53e3\u955c\u50cf\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_75","text":"\u57fa\u4e8e\u7aef\u53e3\u7684\u955c\u50cf\uff1a \u7aef\u53e3\u955c\u50cf\u5c31\u662f\u5c06\u88ab\u76d1\u63a7\u7aef\u53e3\u4e0a\u7684\u6570\u636e\u590d\u5236\u5230\u6307\u5b9a\u7684\u76d1\u63a7\u7aef\u53e3\uff0c\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u6790\u548c\u76d1\u89c6\u3002 \u57fa\u4e8e\u6d41\u7684\u955c\u50cf\uff1a \u6d41\u955c\u50cf\u5c31\u662f\u5c06\u5339\u914d\u8bbf\u95ee\u63a7\u5236\u5217\u8868\u7684\u4e1a\u52a1\u6d41\u590d\u5236\u5230\u6307\u5b9a\u7684\u76d1\u63a7\u7aef\u53e3\uff0c\u7528\u4e8e\u62a5\u6587\u7684\u5206\u6790\u548c\u76d1\u89c6\u3002","title":"\u955c\u50cf\u7684\u5206\u7c7b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_76","text":"\u7aef\u53e3\u955c\u50cf\u662f\u6307\u4ea4\u6362\u673a\u590d\u5236\u4e00\u4efd\u4ece\u955c\u50cf\u7aef\u53e3\u6d41\u7ecf\u7684\u62a5\u6587\uff08\u53ef\u4ee5\u6307\u5b9a\u5165\u7ad9\u6216\u51fa\u7ad9\uff09\uff0c\u5e76\u5c06\u6b64\u62a5\u6587\u4f20\u9001\u5230\u6307\u5b9a\u7684\u89c2\u5bdf\u7aef\u53e3\u8fdb\u884c\u5206\u6790\u548c\u76d1\u89c6\u3002\u5728\u7aef\u53e3\u955c\u50cf\u4e2d\uff0c\u955c\u50cf\u7aef\u53e3\u6d41\u7ecf\u7684\u6240\u6709\u62a5\u6587\u90fd\u5c06\u88ab\u590d\u5236\u5230\u89c2\u5bdf\u7aef\u53e3\u3002 \u4ee5\u592a\u7f51\u4ea4\u6362\u673a\u652f\u6301\u591a\u5bf9\u4e00\u7684\u955c\u50cf\uff0c\u5373\u5c06\u591a\u4e2a\u7aef\u53e3\u7684\u62a5\u6587\u590d\u5236\u5230\u4e00\u4e2a\u76d1\u63a7\u7aef\u53e3\u4e0a\u3002\u6ce8\u610f\u533a\u5206\u8fd9\u91cc\u7684\u89c2\u5bdf\u7aef\u53e3\u548c\u955c\u50cf\u7aef\u53e3\u3002 \u7aef\u53e3\u955c\u50cf\u5206\u4e3a\u672c\u5730\u7aef\u53e3\u955c\u50cf\u548c\u8fdc\u7a0b\u7aef\u53e3\u955c\u50cf\uff1a \u672c\u5730\u7aef\u53e3\u955c\u50cf\uff1a\u672c\u5730\u7aef\u53e3\u955c\u50cf\u4e2d\uff0c\u76d1\u63a7PC\u4e0e\u89c2\u5bdf\u7aef\u53e3\u76f4\u63a5\u76f8\u8fde\u3002 \u8fdc\u7a0b\u7aef\u53e3\u955c\u50cf\uff1a\u8fdc\u7a0b\u7aef\u53e3\u955c\u50cf\u4e2d\uff0c\u76d1\u63a7PC\u4e0e\u89c2\u5bdf\u7aef\u53e3\u6240\u5728\u8bbe\u5907\u4e4b\u95f4\u901a\u8fc7\u4e8c\u5c42\u7f51\u7edc\u6216\u4e09\u5c42\u7f51\u7edc\u76f8\u8054\u3002 \u4e8c\u5c42\u7aef\u53e3\u955c\u50cf\uff08RSPAN\uff1aRemote Switched Port Analyzer\uff09\uff1a\u82e5\u901a\u8fc7\u4e8c\u5c42\u7f51\u7edc\u4e92\u8054\uff0c\u4ee5S9300\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u5b83\u5c06\u955c\u50cf\u7aef\u53e3\u7684\u62a5\u6587\u5c01\u88c5VLAN\uff0c\u7136\u540e\u901a\u8fc7\u89c2\u5bdf\u7aef\u53e3\u5c06\u62a5\u6587\u5728\u8fdc\u7a0b\u955c\u50cfVLAN\u4e2d\u8fdb\u884c\u5e7f\u64ad\u3002\u8fdc\u7a0b\u7684\u8bbe\u5907\u6536\u5230\u62a5\u6587\u540e\uff0c\u6bd4\u8f83\u62a5\u6587\u7684VLAN ID\uff0c\u5982\u679c\u76f8\u540c\uff0c\u5219\u5c06\u8be5\u62a5\u6587\u8f6c\u53d1\u5230\u8fdc\u7a0b\u89c2\u5bdf\u7aef\u53e3\u3002 \u4e09\u5c42\u7aef\u53e3\u955c\u50cf\uff08ERSPAN\uff1aEncapsulated Remote SPAN\uff09\uff1a\u82e5\u901a\u8fc7\u4e09\u5c42\u7f51\u7edc\u4e92\u8054\uff0c\u4ee5S9300\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u5b83\u4f7f\u7528GRE\u62a5\u6587\u5934\u5c01\u88c5\u548c\u89e3\u5c01\u88c5\u955c\u50cf\u62a5\u6587\uff0c\u4f7f\u5f97\u955c\u50cf\u62a5\u6587\u53ef\u4ee5\u7a7f\u900f\u4e09\u5c42\u7f51\u7edc\uff0c\u4ece\u800c\u5b9e\u73b0\u955c\u50cf\u7aef\u53e3\u6240\u5728\u8bbe\u5907\u4e0e\u89c2\u5bdf\u7aef\u53e3\u6240\u5728\u8bbe\u5907\u4e4b\u95f4\u901a\u8fc7\u4e09\u5c42\u7f51\u7edc\u76f8\u8fde\u65f6\u7684\u7aef\u53e3\u955c\u50cf\u3002","title":"\u57fa\u4e8e\u7aef\u53e3\u7684\u955c\u50cf"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_77","text":"\u6d41\u955c\u50cf\u5c31\u662f\u5c06\u6d41\u955c\u50cf\u7aef\u53e3\u4e0a\u7684\u7279\u5b9a\u6570\u636e\u590d\u5236\u5230\u6307\u5b9a\u7684\u89c2\u5bdf\u7aef\u53e3\u6216CPU\u8fdb\u884c\u5206\u6790\u548c\u76d1\u89c6\u3002\u6d41\u955c\u50cf\u7aef\u53e3\u662f\u6307\u5e94\u7528\u4e86\u5305\u542b\u6d41\u955c\u50cf\u884c\u4e3a\u7684\u6d41\u7b56\u7565\u7684\u63a5\u53e3\uff0c\u4ece\u6d41\u955c\u50cf\u7aef\u53e3\u6d41\u8fc7\u7684\u62a5\u6587\uff0c\u5982\u679c\u5339\u914d\u6b64\u63a5\u53e3\u4e0a\u6d41\u7b56\u7565\u4e2d\u7684\u6d41\u5206\u7c7b\uff0c\u5219\u5c06\u88ab\u590d\u5236\u5e76\u4f20\u9001\u5230\u89c2\u5bdf\u7aef\u53e3\u6216CPU\u3002 \u6d41\u955c\u50cf\u5206\u4e3a\u4e24\u79cd\uff0c\u5373\u6d41\u955c\u50cf\u5230\u63a5\u53e3\u548c\u6d41\u955c\u50cf\u5230CPU\uff1a \u6d41\u955c\u50cf\u5230\u63a5\u53e3\uff0c\u662f\u628a\u901a\u8fc7\u914d\u7f6e\u4e86\u6d41\u955c\u50cf\u7684\u63a5\u53e3\u4e0a\u7684\u7b26\u5408\u8981\u6c42\u7684\u62a5\u6587\u590d\u5236\u4e00\u4efd\uff0c\u7136\u540e\u53d1\u9001\u5230\u89c2\u5bdf\u7aef\u53e3\u4ee5\u4f9b\u5206\u6790\u8bca\u65ad\u3002 \u6d41\u955c\u50cf\u5230CPU\uff0c\u662f\u628a\u901a\u8fc7\u914d\u7f6e\u4e86\u6d41\u955c\u50cf\u7684\u63a5\u53e3\u4e0a\u7684\u7b26\u5408\u8981\u6c42\u7684\u62a5\u6587\u590d\u5236\u4e00\u4efd\uff0c\u7136\u540e\u53d1\u9001\u5230CPU\u4ee5\u4f9b\u5206\u6790\u8bca\u65ad\u3002\u8fd9\u91cc\u7684CPU\u6307\u7684\u662f\u914d\u7f6e\u4e86\u6d41\u955c\u50cf\u7684\u63a5\u53e3\u6240\u5728\u63a5\u53e3\u677f\u4e0a\u7684CPU\u3002","title":"\u57fa\u4e8e\u6d41\u7684\u955c\u50cf"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_78","text":"\u5c06\u4ea4\u6362\u673aGE0/0/2\u7aef\u53e3\u7684\u8fdb\u3001\u51fa\u53e3\u62a5\u6587\u955c\u50cf\u5230GE0/0/3\u3002\u4ea4\u6362\u673a\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u914d\u7f6e\u672c\u5730\u7aef\u53e3\u955c\u50cf"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_79","text":"\u5728IP\u7f51\u7edc\u4e2d\uff0c\u6709\u7740\u5404\u79cd\u5404\u6837\u7684\u6d41\u91cf\u3002\u534f\u8bae\u6216\u4e1a\u52a1\u7684\u6b63\u5e38\u8fd0\u8f6c\u5f97\u76ca\u4e8e\u62a5\u6587\u7684\u6b63\u5e38\u4ea4\u4e92\u3002\u4f8b\u5982\u4e0a\u56fe\u4e2dSW1 \u53caSW2\u8fd0\u884cOSPF\uff0c\u90a3\u4e48\u5b9e\u9645\u4e0a\u5728SW1\u3001SW2\u4e4b\u95f4\u5c31\u5728\u6e90\u6e90\u4e0d\u65ad\u7684\u4ea4\u4e92\u7740OSPF\u7684\u62a5\u6587\uff0c\u4f7f\u5f97OSPF\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u3002\u518d\u5982\u4eceSW1\u53bbtelnet SW2\uff0c\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u884c\u4e3a\u5728\u5e95\u5c42\u4e5f\u662f\u7531\u76f8\u5173\u7684\u62a5\u6587\u4ea4\u4e92\u6765\u5b8c\u6210\u3002\u666e\u901a\u7684\u7f51\u7edc\u7528\u6237\u4ec5\u9700\u8981\u5173\u6ce8\u80fd\u5426ping\u901a\uff0c\u6216\u8005\u8dd1\u5728\u7f51\u7edc\u4e0a\u7684\u4e1a\u52a1\u662f\u5426\u6b63\u5e38\uff0c\u4f46\u662f\u4f5c\u4e3a\u6570\u901a\u5de5\u7a0b\u5e08\u7684\u6211\u4eec\uff0c\u5e94\u8be5\u5177\u5907\u4ece\u62a5\u6587\u5c42\u9762\u7406\u89e3\u534f\u8bae\u6216\u673a\u5236\u7684\u7d20\u8d28\u3002 \u5bf9\u4e8e\u4e00\u4e2a\u804c\u4e1a\u7f51\u7edc\u5de5\u7a0b\u5e08\uff0c\u5e94\u8be5\u80fd\u591f\u4ece\u62a5\u6587\u5c42\u9762\u7406\u89e3IP\u6570\u636e\uff0c\u8fdb\u800c\u7406\u89e3\u5404\u79cd\u534f\u8bae\uff0c\u4ee5\u53ca\u5229\u7528\u8fd9\u79cd\u6280\u672f\u7406\u89e3\u5bf9\u7f51\u7edc\u8fdb\u884c\u7ba1\u7406\u548c\u6392\u969c\u3002\u8bb8\u591a\u7f51\u7edc\u6545\u969c\u90fd\u53ef\u4ee5\u901a\u8fc7\u5206\u6790\u5305\u6587\u6765\u5b9a\u4f4d\u3002\u7f51\u7edc\u5de5\u7a0b\u5e08\u7684\u6210\u957f\u4e4b\u8def\uff1a","title":"\u62a5\u6587\u5206\u6790"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_80","text":"\u5e38\u7528\u7684\u62a5\u6587\u5206\u6790\u5de5\u5177\u6709\uff1aWireshark\u3001Ethereal\u3001Sniffer\u3002 \u4f8b\u5982\u4e0b\u56fe\u5c31\u662fWireshark\u8f6f\u4ef6\u7684\u754c\u9762\uff0c\u5728\u5b8c\u6210\u8f6f\u4ef6\u5b89\u88c5\u540e\uff0c\u542f\u52a8\u8be5\u8f6f\u4ef6\uff0c\u7136\u540e\u9009\u62e9\u76d1\u542c\u672c\u5730\u7684\u54ea\u4e2a\u7f51\u5361\uff0c \u5373\u53ef\u5f00\u59cb\u5728\u8be5\u7f51\u5361\u4e0a\u4fa6\u542c\u62a5\u6587\u3002\u4e0b\u56fe\u4e2d\u663e\u793a\u7684\u5c31\u662f\u6211\u4eec\u6293\u53d6\u5230\u7684\u5404\u79cd\u62a5\u6587\u3002 \u5c0f\u7ec3\u4e60\uff1a \u6309\u7167\u5982\u56fe\u6240\u793a\u5b8c\u6210PC\u53ca\u4ea4\u6362\u673a\u7684IP\u914d\u7f6e\u3002\u5728\u4ea4\u6362\u673a\u4e0a\u5f00\u542fTelnet\u670d\u52a1\u3002 \u5728PC\u4e0a\u6253\u5f00wireshark\u6293\u5305\u5de5\u5177\uff0c\u76d1\u63a7\u4ee5\u592a\u7f51\u5361\uff0c\u7136\u540e\u4ecePC telnet\u4ea4\u6362\u673a\uff0c\u89c2\u5bdf\u6293\u5230\u7684\u62a5\u6587\uff0ctelnet\u662f\u660e\u6587\u4f20\u8f93\u7684\uff0c\u56e0\u6b64\u80fd\u591f\u901a\u8fc7\u6293\u5305\uff0c\u5c06telnet\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u4ee5\u53catelnet\u4e0a\u4ea4\u6362\u673a\u4e4b\u540e\u8f93\u5165\u7684\u5404\u79cd\u64cd\u4f5c\u90fd\u6293\u53d6\u4e0b\u6765\uff0c\u56e0\u6b64telnet\u534f\u8bae\u5e76\u4e0d\u5b89\u5168\u3002 \u6e29\u99a8\u63d0\u9192\uff1awireshark\u662f\u975e\u6807\u8f6f\u4ef6\uff0c\u64c5\u81ea\u5b89\u88c5\u5c5e\u4fe1\u606f\u5b89\u5168\u8fdd\u89c4\uff0c\u56e0\u6b64\u5982\u82e5\u9700\u5b89\u88c5\u5b66\u4e60\u8be5\u8f6f\u4ef6\u7684\u4f7f\u7528\uff0c\u8bf7\u81ea\u884c\u8d70\u76f8\u5173\u6d41\u7a0b\u6216\u5728\u79c1\u4ebaPC\u4e0a\u5b8c\u6210\u3002","title":"\u62a5\u6587\u5206\u6790\u5de5\u5177"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_81","text":"\u89c2\u5bdf\u7aef\u53e3\u4e13\u95e8\u7528\u4e8e\u6545\u969c\u5b9a\u4f4d\u6216\u6d41\u91cf\u5206\u6790\uff0c\u4e0d\u80fd\u7528\u4f5c\u666e\u901a\u4e1a\u52a1\u53e3\u3002 \u6355\u83b7\u4e1a\u52a1\u62a5\u6587 \u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u5728\u8fdb\u884c\u95ee\u9898\u5b9a\u4f4d\u53ca\u5206\u6790\u65f6\uff0c\u6211\u4eec\u53ef\u80fd\u5e76\u4e0d\u5177\u5907\u5728\u4ea4\u6362\u673a\u4e0a\u8fdb\u884c\u7aef\u53e3\u955c\u50cf\u7684\u6761\u4ef6\uff0c\u4f8b\u5982\u7ba1\u7406 PC\u4e0d\u5728\u673a\u623f\uff0c\u5de5\u7a0b\u5e08\u901a\u8fc7\u8fdc\u7a0b\u767b\u5f55\u7684\u65b9\u5f0f\u8fde\u63a5\u5230\u7f51\u7edc\u8bbe\u5907\uff0c\u800c\u5982\u679c\u6b64\u65f6\u53c8\u9700\u8981\u8fdb\u884c\u62a5\u6587\u6355\u83b7\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u4f7f\u7528**capture-packet**\u547d\u4ee4\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_82","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u5e0c\u671b\u5728\u4ea4\u6362\u673a\u4e0a\u6293\u53d6\u63a5\u53e3GE6/0/13\u6536\u5230\u7684\u62a5\u6587\uff0c\u5e76\u5c06\u6355\u83b7\u7684\u62a5\u6587\u5448\u73b0\u5728\u7ec8\u7aef\u754c\u9762\u4e0a\uff0c\u4ee5\u6b64\u8fdb\u884c\u7b80\u5355\u7684\u5224\u65ad\uff1aPC1 ping PC2\u6240\u4ea7\u751f\u7684ICMP\u62a5\u6587\u662f\u5426\u901a\u8fc7\u8be5\u4ea4\u6362\u673a\u3002\u4ee5S9300\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a[SW] capture-packet interface GigabitEthernet 6/0/13 destination terminal \u4ea4\u6362\u673a\u4fbf\u4f1a\u5f00\u59cb\u6355\u83b7\u63a5\u53e3GE6/0/13\u6240\u63a5\u6536\u7684\u6240\u6709\u62a5\u6587\uff0c\u5e76\u5c06\u62a5\u6587\u5448\u73b0\u5728\u7ec8\u7aef\u754c\u9762\u4e0a\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c \u4ea4\u6362\u673a\u4f1a\u6301\u7eed\u5728\u7ec8\u7aef\u754c\u9762\u4e0a\u663e\u793a\u6355\u83b7\u5230\u7684\u62a5\u6587\uff0c\u76f4\u5230\u6355\u83b7\u8d85\u65f6\uff08\u7f3a\u770160s\uff09\uff1a \u5f53PC1\u5f00\u59cbping PC2\u65f6\uff0c\u6211\u4eec\u5c31\u80fd\u5728\u7ec8\u7aef\u754c\u9762\u770b\u5230\u5982\u4e0a\u8f93\u51fa\uff0c\u4e0a\u9762\u622a\u53d6\u4e86\u6355\u83b7\u5230\u7684\u4e24\u4e2a\u62a5\u6587\u3002\u4ee5\u7b2c\u4e00\u4e2a \u62a5\u6587\u4e3a\u4f8b\uff0c\u8fd9\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u6570\u636e\u5e27\uff0c\u7ea2\u8272\u5b57\u4f53\u90e8\u5206\u662f\u8be5\u5e27\u7684\u76ee\u7684MAC\u5730\u5740\uff0c\u84dd\u8272\u5b57\u4f53\u90e8\u5206\u662f\u6e90MAC\u5730\u5740\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e9b\u7b80\u5355\u7684\u4fe1\u606f\u5224\u65ad\u76ee\u6807\u62a5\u6587\u662f\u5426\u5230\u8fbe\uff08\u5b9e\u9645\u4e0a\uff0c\u4f60\u8fd8\u80fd\u5728\u4e0a\u8ff0\u8f93\u51fa\u4e2d\uff0c\u770b\u5230\u62a5\u6587\u7684\u6e90\u3001\u76ee\u7684IP\u5730\u5740\u7b49\u4fe1\u606f\uff09\u3002","title":"\u573a\u666f\u4e00\uff1a\u6355\u83b7\u4ea4\u6362\u673a\u63a5\u53e3\u4e0a\u6536\u5230\u7684\u62a5\u6587\uff0c\u5e76\u5c06\u6355\u83b7\u7684\u7ed3\u679c\u8f93\u51fa\u5230\u7ec8\u7aef\u754c\u9762"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_83","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u5728\u4ea4\u6362\u673a\u4e0a\u8fdb\u884c\u62a5\u6587\u6355\u83b7\uff0c\u53ea\u6293\u53d6PC1 Telnet PC2\u7684\u62a5\u6587\u3002\u4f7f\u7528ACL3000\u6765\u5339\u914d\u611f\u5174\u8da3\u7684\u6d41\u91cf\uff0c\u7136\u540e\u7528capture-packet\u6267\u884c\u62a5\u6587\u6355\u83b7\u3002 \u6267\u884c\u4e0a\u8ff0\u547d\u4ee4\u540e\uff0c\u5f53PC1 telnet PC2\u65f6\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a","title":"\u573a\u666f\u4e8c\uff1a\u6355\u83b7\u4ea4\u6362\u673a\u63a5\u53e3\u4e0a\u6536\u5230\u7684\u7279\u5b9a\u62a5\u6587\uff0c\u5e76\u5c06\u6355\u83b7\u7684\u7ed3\u679c\u8f93\u51fa\u5230\u7ec8\u7aef\u754c\u9762"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#capture-packet-interface-gigabitethernet-6013-acl-3000-destination-terminal","text":"\u7840\u4e0a\u589e\u52a0**file**\u5173\u952e\u5b57\u5e76\u6307\u5b9a\u6587\u4ef6\u540d\uff0c\u4f8b\u5982**capture-packet interface GigabitEthernet 6/0/13 acl 3000 destination terminal file test.cap**\uff0c\u90a3\u4e48\u5f53\u4ea4\u6362\u673a\u6355\u83b7\u5230\u62a5\u6587\u540e\uff0c\u4e0d\u4ec5\u4f1a\u5728\u7ec8\u7aef\u754c\u9762\u5448\u73b0\uff0c\u8fd8\u4f1a\u5c06\u62a5\u6587\u4fdd\u5b58\u5230\u8be5\u7f51\u7edc\u8bbe\u5907\u7684\u5b58\u50a8\u7a7a\u95f4\u4e2d\uff0c\u4ee5test.cap\u7684\u540d\u5b57\u5b58\u653e\uff0c\u8fd9\u6837\u4fbf\u53ef\u4ee5\u518d\u5b8c\u6210\u6293\u5305\u540e\uff0c\u5c06\u8be5\u6587\u4ef6\u4e0b\u8f7d\u5230\u7ba1\u7406PC\u5e76\u901a\u8fc7\u6293\u5305\u8f6f\u4ef6\u66f4\u52a0\u76f4\u89c2\u5730\u5206\u6790\u6355\u83b7\u7684\u62a5\u6587\u3002 \u518d\u8005\uff0c\u5728**capture-packet**\u547d\u4ee4\u4e2d\u4f7f\u7528**timeout**\u5173\u952e\u5b57\uff0c\u8fd8\u53ef\u5b9a\u4e49\u62a5\u6587\u6355\u83b7\u7684\u8d85\u65f6\u65f6\u95f4\uff1b\u4f7f\u7528**vlan**\u5173\u952e\u5b57\uff0c \u53ef\u4ee5\u6307\u5b9a\u6355\u83b7\u7684vlan\u3002\u8be5\u547d\u4ee4\u76ee\u524d\u53ea\u652f\u6301\u6355\u83b7\u63a5\u53e3\u5165\u65b9\u5411\u62a5\u6587\uff0c\u4e0d\u652f\u6301\u6355\u83b7\u63a5\u53e3\u51fa\u65b9\u5411\u62a5\u6587\u3002\u6355\u83b7\u7684\u62a5\u6587\u6709\u901f\u7387\u9650\u5236\uff0c\u7f3a\u7701\u503c\u662f64kbps\uff0c\u5982\u679c\u6709\u7a81\u53d1\u6d41\u91cf\uff0c\u8d85\u8fc7\u6355\u83b7\u62a5\u6587\u7684\u901f\u7387\u9650\u5236\uff0c\u53ef\u80fd\u4f1a\u5b58\u5728\u4e22\u5305\u73b0\u8c61\u3002\u6700\u540e\uff0c\u8bbe\u5907\u4e0d\u652f\u6301\u6355\u83b7BFD\u548c802.1ag\u3002 \u7aef\u53e3\u9694\u79bb","title":"\u53e6\u5916\uff0c\u5728capture-packet interface GigabitEthernet 6/0/13 acl 3000 destination terminal\u547d\u4ee4\u7684\u57fa"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_84","text":"\u4e0a\u56fe\u4e2d\uff0cPC1\u30012\u30013\u540c\u5c5e\u4e00\u4e2aVLAN\uff08\u5047\u8bbe\u662fVLAN10\uff09\uff0c\u4f7f\u7528\u76f8\u540c\u7684IP\u5b50\u7f51\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e09\u53f0PC\u53ef\u4e92\u76f8\u8bbf\u95ee\uff0c\u8fd9\u662f\u5178\u578b\u7684\u4e8c\u5c42\u4e92\u8bbf\u3002\u73b0\u5728\u6709\u8fd9\u4e48\u4e00\u4e2a\u9700\u6c42\uff0c\u5728\u4e0d\u4fee\u6539IP\u5b50\u7f51\u53caVLAN\u89c4\u5212\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u5f97PC1- PC2\u4e4b\u95f4\u65e0\u6cd5\u4e92\u8bbf\uff0c\u800cPC1\u4e0ePC3\u53ef\u4e92\u8bbf\u3001PC2\u4e0ePC3\u53ef\u4e92\u8bbf\u3002\u8fd9\u5c31\u53ef\u4ee5\u7528\u5230\u7aef\u53e3\u9694\u79bb\u7279\u6027\u3002 \u8fd9\u91cc\u9700\u8981\u7528\u5230\u7aef\u53e3\u9694\u79bb\u7ec4\u7684\u6982\u5ff5\uff0c\u4ea4\u6362\u673a\u7684\u7aef\u53e3\u53ef\u4ee5\u52a0\u5165\u5230\u7279\u5b9a\u7684\u9694\u79bb\u7ec4\u4e2d\uff0c\u540c\u4e00\u7aef\u53e3\u9694\u79bb\u7ec4\u7684\u7aef\u53e3\u4e4b\u95f4\u4e92\u76f8\u9694\u79bb\uff0c\u4e0d\u540c\u7aef\u53e3\u9694\u79bb\u7ec4\u7684\u7aef\u53e3\u4e4b\u95f4\u4e0d\u9694\u79bb\u3002\u56e0\u6b64\u8981\u5b9e\u73b0\u4e0a\u8ff0\u9700\u6c42\uff0c\u914d\u7f6e\u7684\u601d\u8def\u975e\u5e38\u7b80\u5355\uff0c\u5728\u4ea4\u6362\u673a\u4e0a\u5c06\u7aef\u53e31\u30012\u653e\u7f6e\u5728\u540c\u4e00\u9694\u79bb\u7ec4\u4e2d\uff0c\u7aef\u53e33\u4e0d\u505a\u9694\u79bb\u7ec4\u914d\u7f6e\u6216\u8005\u653e\u5165\u53e6\u4e00\u4e2a\u9694\u79bb\u7ec4\u4e2d\uff0c\u7136\u540e\u5f00\u542f\u7aef\u53e3\u9694\u79bb\u7279\u6027\u5373\u53ef\u3002","title":"\u57fa\u672c\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_85","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cPC1\u3001PC2\u3001PC3\u540c\u5c5eVLAN10\u3001\u540c\u5c5e1.1.1.0/24\u5b50\u7f51\uff0cIP\u5730\u5740\u5982\u4e0a\u56fe\u6240\u793a\u3002\u914d\u7f6e\u7aef\u53e3\u9694\u79bb\uff0c \u4f7f\u5f97PC1\u4e0ePC2\u65e0\u6cd5\u4e92\u8bbf\uff1bPC1\u4e0ePC3\uff0cPC2\u4e0ePC3\u53ef\u4e92\u8bbf\u3002 \u4ea4\u6362\u673a\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u68c0\u67e5\u4e00\u4e0b\uff1a \u5c06\u7aef\u53e31\u53ca\u7aef\u53e32\u90fd\u52a0\u5165\u9694\u79bb\u7ec41\uff0c\u8fd9\u6837PC1\u53caPC2\u5c31\u4e8c\u5c42\u9694\u79bb\u4e86\uff0c\u4e5f\u5c31\u65e0\u6cd5\u4e92\u8bbf\u4e86\u3002\u4f46\u662fPC1\u53caPC2\u90fd \u80fd\u591f\u4e0ePC3\u4e92\u8bbf\u3002**Port-isolate mode l2**\u8fd9\u6761\u547d\u4ee4\u662f\u5c06\u9694\u79bb\u6a21\u5f0f\u8bbe\u7f6e\u4e3a\u4e8c\u5c42\u9694\u79bb\u4e09\u5c42\u4e0d\u9694\u79bb\u3002\u6240\u8c13\u7684\u4e09\u5c42\u4e0d\u9694\u79bb\u6307\u7684\u662f\u540c\u4e00\u4e2a\u9694\u79bb\u7ec4\u7684\u8282\u70b9\u4e4b\u95f4\u4ecd\u7136\u80fd\u591f\u901a\u8fc7\u4e09\u5c42\u8fdb\u884c\u4e92\u8bbf\uff0c\u4f8b\u5982\uff1a PC1\u7684IP\u4e3a1.1.1.1\uff0c\u7f51\u5173\u4e3avlanif10\u7684IP 1.1.1.254\uff0cPC2\u7684IP\u4e3a2.2.2.2\uff0c\u7f51\u5173\u4e3avlanif10\u7684IP 2.2.2.254\uff0c Vlanif10\u914d\u7f6e\u4e86\u4e24\u4e2aIP\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u540c\u4e00\u4e2aVLAN\u6211\u4eec\u7528\u4e86\u4e24\u4e2aIP\u5b50\u7f51\u3002\u90a3\u4e48\u7aef\u53e31\u4e0e\u7aef\u53e32\u73b0\u5728\u867d\u7136\u662f\u4e8c\u5c42\u9694\u79bb\uff0cARP\u5565\u7684\u65e0\u6cd5\u900f\u8fc7\u6765\uff0c\u4f46\u662fPC1\u4e0ePC2\u4ecd\u7136\u80fd\u591f\u501f\u52a9\u81ea\u5df1\u7684\u7f51\u5173\u5b9e\u73b0\u4e09\u5c42\u4e92\u8bbf\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u4e8c\u5c42\u9694\u79bb\u4f46\u662f\u4e09\u5c42\u4e0d\u9694\u79bb\u3002\u90a3\u4e48\u5982\u679c\u8981\u5f7b\u5e95\u5c06\u7aef\u53e31\u53ca\u7aef\u53e32\u9694\u79bb\u5462\uff1f\u4f7f\u7528\u7cfb\u7edf\u89c6\u56fe\u547d\u4ee4**port-isolate mode all**\u5373\u53ef\u3002","title":"\u5b9e\u9a8c\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_86","text":"IP \u8def\u7531\u57fa\u7840 \u4ec0\u4e48\u662f IP \u8def\u7531 \u5728\u4e00\u4e2aIP\u7f51\u7edc\u4e2d\uff0c\u8def\u7531\uff08Routing\uff09\u662f\u4e2a\u975e\u5e38\u975e\u5e38\u57fa\u672c\u7684\u6982\u5ff5\u3002\u7f51\u7edc\u7684\u57fa\u672c\u529f\u80fd\u662f\u4f7f\u5f97\u5904\u4e8e\u7f51\u7edc\u4e2d\u7684\u4e24\u4e2aIP \u8282\u70b9\u80fd\u591f\u4e92\u76f8\u901a\u4fe1\uff0c\u800c\u901a\u4fe1\u5b9e\u9645\u4e0a\u5c31\u662f\u6570\u636e\u4ea4\u4e92\u7684\u8fc7\u7a0b\uff0c\u6570\u636e\u4ea4\u4e92\u5219\u9700\u8981\u7f51\u7edc\u8bbe\u5907\u5e2e\u52a9\u6211\u4eec\u6765\u5c06\u6570\u636e\u5728\u4e24\u4e2a\u901a\u4fe1\u8282\u70b9\u4e4b\u95f4\u8fdb\u884c\u4f20\u8f93\u3002\u5f53\u8def\u7531\u5668\uff08\u6216\u8005\u5176\u4ed6\u4e09\u5c42\u8bbe\u5907\uff09\u6536\u5230\u4e00\u4e2aIP\u6570\u636e\u5305\u65f6\uff0c\u8def\u7531\u5668\u4f1a\u627e\u51fa\u62a5\u6587\u4e2d\u7684IP \u5934\u91cc\u7684\u76ee\u7684IP\u5730\u5740\uff0c\u7136\u540e\u62ff\u7740\u76ee\u7684IP\u5730\u5740\u5230\u81ea\u5df1\u7684\u8def\u7531\u8868\uff08Routing Table\uff09\u4e2d\u8fdb\u884c\u67e5\u8be2\uff0c\u627e\u5230\u201c\u6700\u5339\u914d\u201d\u7684\u8def\u7531\u6761\u76ee\u540e\uff0c\u5c06\u6570\u636e\u5305\u6839\u636e\u8def\u7531\u6761\u76ee\u6240\u6307\u793a\u7684\u51fa\u63a5\u53e3\u6216\u4e0b\u4e00\u8df3IP\u8f6c\u53d1\u51fa\u53bb\uff0c\u8fd9\u5c31\u662f\u8def\u7531\u3002 \u6bcf\u53f0\u8def\u7531\u5668\u90fd\u4f1a\u5728\u672c\u5730\u7ef4\u62a4\u4e00\u4e2a\u8def\u7531\u8868\uff0c\u8def\u7531\u8868\u4e2d\u88c5\u8f7d\u7740\u8def\u7531\u5668\u901a\u8fc7\u5404\u79cd\u9014\u5f84\u83b7\u77e5\u7684\u8def\u7531\u6761\u76ee\uff08Route\uff09\uff0c \u6bcf\u4e00\u6761\u8def\u7531\u6761\u76ee\u53ef\u80fd\u5305\u542b\uff1a\u76ee\u7684\u7f51\u7edc\u53f7\u53ca\u63a9\u7801\u957f\u5ea6\u3001\u8def\u7531\u534f\u8bae\u7c7b\u578b\u3001\u51fa\u63a5\u53e3\u6216\u4e0b\u4e00\u8df3IP\u3001\u8def\u7531\u534f\u8bae\u4f18\u5148\u7ea7\u3001\u5f00\u9500\u7b49\u4fe1\u606f\u5143\u7d20\u3002\u8def\u7531\u5668\u901a\u8fc7\u76f4\u8fde\u3001\u9759\u6001\u7684\u6216\u8005\u52a8\u6001\u7684\u65b9\u5f0f\u83b7\u53d6\u8def\u7531\u6761\u76ee\u5e76\u7ef4\u62a4\u81ea\u5df1\u7684\u8def\u7531\u8868\uff0c\u8def\u7531\u8868\u662f\u6bcf\u53f0\u652f\u6301\u8def\u7531\u529f\u80fd\u7684\u8bbe\u5907\u8fdb\u884c\u6570\u636e\u8f6c\u53d1\u7684\u4f9d\u636e\u548c\u57fa\u7840\uff0c\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u4efb\u4f55\u4e00\u53f0\u652f\u6301\u8def\u7531\u529f\u80fd\u7684\u8bbe\u5907\u8981\u6267\u884c\u6570\u636e\u8f6c\u53d1\u6216\u8def\u7531\u7684\u52a8\u4f5c\uff0c\u5c31\u5fc5\u987b\u62e5\u6709\u53ca\u7ef4\u62a4\u4e00\u5f20\u8def\u7531\u8868\u3002 IP \u8def\u7531\u8868 \u4efb\u4f55\u4e00\u53f0\u652f\u6301\u8def\u7531\u529f\u80fd\u7684\u8bbe\u5907\u8981\u6267\u884c\u6570\u636e\u8f6c\u53d1\u6216\u8def\u7531\u7684\u52a8\u4f5c\uff0c\u5c31\u5fc5\u987b\u62e5\u6709\u53ca\u7ef4\u62a4\u4e00\u5f20\u8def\u7531\u8868\uff0c\u8def\u7531\u8868\u53ef\u4ee5\u7406\u89e3\u4e3a\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u5230\u7279\u5b9a\u76ee\u7684\u5730\u6240\u4f9d\u636e\u7684\u4e00\u5f20\u201c\u5730\u56fe\u201d\u3002\u5728\u6211\u53f8\u4e09\u5c42\u8bbe\u5907\uff08\u5982\u8def\u7531\u5668\u3001\u9632\u706b\u5899\u3001\u4e09\u5c42\u4ea4\u6362\u673a\u7b49\uff09\u4e0a\u67e5\u770bIP\u8def\u7531\u8868\u7684\u547d\u4ee4\u5982\u4e0b\uff1a","title":"\u8def\u7531\u57fa\u7840"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#huawei-display-ip-routing-table","text":"\u6bcf\u4e2a\u8def\u7531\u6761\u76ee\u5fc5\u987b\u5305\u62ec\u4e0b\u9762\u51e0\u4e2a\u4fe1\u606f\u5143\u7d20\uff1a **\u76ee\u7684\u7f51\u7edc/\u63a9\u7801\uff1a**\u4e5f\u88ab\u79f0\u4e3a\u8def\u7531\u524d\u7f00\uff0c\u8fd9\u662f\u8def\u7531\u6761\u76ee\u6240\u5173\u8054\u7684\u76ee\u7684\u7f51\u7edc\u5730\u5740\u53ca\u7f51\u7edc\u63a9\u7801\u3002\u4e00\u6761\u5b8c\u6574\u7684\u8def\u7531\u524d\u7f00\u7531\uff1a\u7f51\u7edc\u5730\u5740+\u524d\u7f00\u957f\u5ea6\uff08\u6216\u8005\u7f51\u7edc\u63a9\u7801\uff09\u6784\u6210\uff0c\u4e24\u8005\u7f3a\u4e00\u4e0d\u53ef\uff0c\u4f8b\u5982192.168.1.0/24\u4e0e192.168.1.0/25\uff0c \u867d\u7136\u7f51\u7edc\u5730\u5740\u76f8\u540c\uff0c\u90fd\u662f192.168.1.0\uff0c\u4f46\u662f\u4e24\u8005\u7edd\u5bf9\u662f\u4e24\u6761\u4e0d\u540c\u7684\u8def\u7531\uff0c\u56e0\u4e3a\u4ed6\u4eec\u7684\u524d\u7f00\u957f\u5ea6\u4e0d\u76f8\u540c\u3002 **\u534f\u8bae\u7c7b\u578b\uff1a**\u672c\u6761\u8def\u7531\u662f\u901a\u8fc7\u4ec0\u4e48\u9014\u5f84\u5b66\u4e60\u5230\u7684\uff0c\u4f8b\u5982\u662f\u76f4\u8fde\u7684\uff0c\u6216\u662f\u9759\u6001\u7684\uff0c\u6216\u8005\u662f\u901a\u8fc7OSPF\u3001IS-IS\u3001 EIGRP\u3001BGP\u7b49\u52a8\u6001\u8def\u7531\u5b66\u4e60\u5230\u7684\u3002 \u4f18\u5148\u7ea7 \uff1a\u4e0e\u534f\u8bae\u7c7b\u578b\u5bf9\u5e94\uff0c\u8def\u7531\u8868\u4e2d\u8def\u7531\u7684\u83b7\u53d6\u6765\u6e90\u6709\u591a\u79cd\uff0c\u6bcf\u79cd\u534f\u8bae\u7c7b\u578b\u5bf9\u5e94\u4e0d\u540c\u7684\u4f18\u5148\u7ea7\uff0c\u4f18\u5148\u7ea7\u503c\u8d8a\u5c0f\u5219\u8def\u7531\u8d8a\u4f18\u3002\u5f53\u4e00\u53f0\u8def\u7531\u5668\u540c\u65f6\u4ece\u591a\u79cd\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\u5b66\u4e60\u5230\u53bb\u5f80\u540c\u4e00\u4e2a\u76ee\u7684\u5730\u7684\u8def\u7531\u65f6\uff0c\u5b83\u5c06\u4f18\u9009\u8def\u7531\u534f\u8bae\u4f18\u5148\u7ea7\u503c\u6700\u5c0f\u7684\u90a3\u6761\u8def\u7531\u3002 **\u5f00\u9500\uff1a**\u8def\u7531\u7684\u5ea6\u91cf\u503c\uff0c\u5728\u8bb8\u591a\u4e66\u7c4d\u6216\u6587\u6863\u4e2d\u4e5f\u4f7f\u7528metric\u6765\u63cf\u8ff0\u3002\u76f4\u8fde\u53ca\u9759\u6001\u8def\u7531\u7684Cost\u4e3a0\u3002\u901a\u8fc7\u52a8\u6001\u8def\u7531\u534f\u8bae\u5b66\u4e60\u5230\u7684Cost\u5219\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u800c\u5b9a\u3002\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\u8ba1\u7b97Cost\u7684\u65b9\u6cd5\u4e0d\u540c\u3002 \u4e0b\u4e00\u8df3 \uff1a\u53bb\u5f80\u76ee\u6807\u7f51\u7edc\u7684\u4e0b\u4e00\u8df3IP\u5730\u5740\u3002 \u51fa\u63a5\u53e3 \uff1a\u53bb\u5f80\u76ee\u6807\u7f51\u7edc\u4ece\u672c\u8bbe\u5907\u7684\u54ea\u4e2a\u63a5\u53e3\u51fa\u53bb\u3002 \u8def\u7531\u4f18\u5148\u7ea7 \u8def\u7531\u5668\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u9014\u5f84\u83b7\u77e5\u8def\u7531\u6761\u76ee\uff1a\u5982\u901a\u8fc7\u9759\u6001\u624b\u5de5\u914d\u7f6e\uff0c\u6216\u901a\u8fc7\u5404\u79cd\u52a8\u6001\u8def\u7531\u534f\u8bae\u5b66\u4e60\u7b49\u7b49\u3002\u5f53\u8def\u7531\u5668\u4ece\u591a\u79cd\u4e0d\u7528\u7684\u534f\u8bae\u83b7\u77e5\u53bb\u5f80\u540c\u4e00\u4e2a\u76ee\u7684\u5730\u7684\u8def\u7531\u65f6\uff0c\u8def\u7531\u5668\u4f1a\u6bd4\u8f83\u8fd9\u4e9b\u8def\u7531\u7684\u4f18\u5148\u7ea7\uff08Preference\uff09\uff0c\u4f18\u9009Preference\u503c\u6700\u5c0f\u7684\u8def\u7531\u3002\u5982\u679cPreference\u503c\u76f8\u7b49\uff0c\u4f8b\u5982\u662f\u540c\u79cd\u8def\u7531\u534f\u8bae\u83b7\u53d6\u5230\u7684\u8def\u7531\uff0c\u5219\u8fdb\u4e00\u6b65\u6bd4\u8f83\u5f00\u9500\u503c\uff08Cost\uff09\uff0c\u5f53\u7136\uff0c\u8fd9\u5176\u4e2d\u8fd8\u7275\u6d89\u5230\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\u5185\u5728\u7684\u5de5\u4f5c\u673a\u5236\u95ee\u9898\uff0c\u8fd9\u5c31\u8981\u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\u5177\u4f53\u8ba8\u8bba\u4e86\uff0c\u6211\u4eec\u8fd9\u91cc\u6682\u65f6\u4e0d\u8ba8\u8bba\u8fd9\u4e48\u6df1\u5165\u3002 \u5982\u4e0b\u56fe\uff0cR3\u4e0eR1\u8fd0\u884c\u7684\u662fRIP\u8def\u7531\u534f\u8bae\uff0cR3\u53c8\u901a\u8fc7OSPF\u4e0eR2\u5efa\u7acb\u90bb\u63a5\u5173\u7cfb\u3002R3\u540c\u65f6\u4eceRIP\u53caOSPF\u5b66\u4e60\u5230\u4e86\u53bb\u5f80\u76ee\u7684\u57301.1.1.0/24\u7684\u8def\u7531\uff0c\u5b83\u6700\u7ec8\u4f1a\u5c06OSPF\u7684\u8def\u7531\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\uff0c\u4e5f\u5c31\u662f\u5c06R2\u4f5c\u4e3a\u5b9e\u9645\u53bb\u5f80 1.1.1.0/24\u7684\u4e0b\u4e00\u8df3\uff0c\u56e0\u4e3aOSPF\u534f\u8bae\u7684\u4f18\u5148\u7ea7\u503c\u6bd4RIP\u8981\u5c0f\u2014\u2014\u4f18\u5148\u7ea7\u66f4\u9ad8\u3002\u5f53\u7136\uff0c\u5982\u679c\u6b64\u65f6R2\u53d1\u751f\u6545\u969c\uff0c \u90a3\u4e48R3\u8def\u7531\u8868\u4e2d\u8be5\u6761OSPF\u8def\u7531\u5931\u6548\uff0c\u5219R3\u5c06RIP\u8def\u7531\u52a0\u8f7d\u5230\u8def\u7531\u8868\u4e2d\u3002 \u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\uff0c\u5bf9\u5e94\u7684\u4f18\u5148\u7ea7\u89c1\u4e0b\u8868\uff0c\u8fd9\u662f\u4e2a\u4f17\u6240\u5468\u77e5\u7684\u7ea6\u5b9a\uff08\u4e0d\u540c\u7684\u5382\u5bb6\uff0c\u53ef\u80fd\u6709\u6240\u4e0d\u540c\uff0c\u4e0b\u8868\u4e2d\u7f57\u5217\u7684\u662f\u6211\u53f8\u7684\u4ea7\u54c1\u7279\u6027\uff09\uff1a \u8def\u7531\u534f\u8bae\u6216\u8def\u7531\u79cd\u7c7b \u4f18\u5148\u7ea7 DIRECT 0 OSPF 10 IS-IS 15 STATIC 60 RIP 100 OSPF ASE 150 OSPF NSSA 150 IBGP 255 EBGP 255 \u9759\u6001\u8def\u7531","title":"[Huawei] display ip routing-table"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_87","text":"\u8def\u7531\u5668\u7684\u5929\u804c\uff0c\u5c31\u662f\u7ef4\u62a4\u8def\u7531\u8868\u4ee5\u53ca\u4f9d\u636e\u8def\u7531\u8868\u8fdb\u884c\u6570\u636e\u8f6c\u53d1\u3002\u800c\u8def\u7531\u8868\u4e2d\u5305\u542b\u901a\u8fc7\u5404\u79cd\u9014\u5f84\u5b66\u4e60\u5230\u7684\u8def\u7531\u8868\u9879\uff08\u8def\u7531\u6761\u76ee\uff09\uff0c\u4e3b\u8981\u6709\u5982\u4e0b\u51e0\u79cd\u9014\u5f84\uff1a \u76f4\u8fde\u8def\u7531\u81ea\u52a8\u5b66\u4e60\uff1b \u901a\u8fc7\u624b\u5de5\u7684\u65b9\u5f0f\u4e3a\u8bbe\u5907\u6dfb\u52a0\u9759\u6001\u8def\u7531\u6761\u76ee\uff1b \u4f7f\u7528\u52a8\u6001\u8def\u7531\u534f\u8bae\u4f7f\u5f97\u8bbe\u5907\u4e4b\u95f4\u80fd\u591f\u8fdb\u884c\u8def\u7531\u4fe1\u606f\u7684\u66f4\u65b0\u53ca\u5b66\u4e60\uff0c\u52a8\u6001\u5730\u7ef4\u62a4\u8def\u7531\u8868\u9879\u3002\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\uff1a PC1\u7684\u7f51\u5173\u8bbe\u7f6e\u4e3a172.16.1.254\uff0c\u4e5f\u5c31\u662fR1\u7684GE0/0/0\u53e3IP\uff1bPC2\u7684\u7f51\u5173\u8bbe\u7f6e\u4e3a172.16.2.254\u4e5f\u5c31\u662fR2 \u7684GE0/0/0\u53e3IP\u3002\u5728\u521d\u59cb\u60c5\u51b5\u4e0b\uff0c\u5bf9\u4e8eR1\u800c\u8a00\uff0c\u5f53\u63a5\u53e3UP\u4ee5\u540e\uff0c\u8def\u7531\u5668\u4f1a\u81ea\u52a8\u5b66\u4e60\u6d3b\u8dc3\u7684\u63a5\u53e3\u6240\u5728\u7f51\u7edc\u7684\u7f51\u7edc\u5730\u5740\u53ca\u63a9\u7801\u5e76\u4e14\u7ef4\u62a4\u81ea\u5df1\u7684\u8def\u7531\u8868\uff0c\u4f8b\u5982R1\u7684\u8def\u7531\u8868\uff0c\u53ef\u80fd\u50cf\u4e0b\u9762\u8fd9\u6837\uff08\u7701\u7565\u4e86\u65e0\u5173\u4fe1\u606f\uff09\uff1a \u76ee\u7684\u7f51\u7edc/\u63a9\u7801 \u534f\u8bae \u4f18\u5148\u7ea7 \u51fa\u63a5\u53e3 \u4e0b\u4e00\u8df3 172.16.1.0/24 Direct 0 GE0/0/0 172.16.1.254 172.16.100.0/24 Direct 0 GE0/0/1 172.16.100.1 R2\u7684\u8def\u7531\u8868\u7c7b\u4f3c\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002\u73b0\u5728\u5f53PC1\u8981\u8bbf\u95eePC2\u65f6\uff0c\u7531\u4e8ePC1\u7684\u7f51\u5173\u8bbe\u7f6e\u4e3aR1\u7684GE0/0/0\u53e3\u7684 IP\u5730\u5740\uff0c\u4e8e\u662fPC1\u5c06\u76ee\u7684\u5730\u5740\u4e3a172.16.2.1\u7684IP\u6570\u636e\u5305\u53d1\u9001\u7ed9\u5b83\u7684\u7f51\u5173\u3002\u800c\u5f53R1\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u65f6\uff0cR1 \u53d1\u73b0\u8fd9\u4e2a\u6570\u636e\u5305\u7684\u76ee\u7684\u5730\u5740\u662f172.16.2.1\uff0c\u5b83\u5c31\u53bb\u67e5\u8be2\u81ea\u5df1\u7684\u8def\u7531\u8868\uff0c\u7ed3\u679c\u53d1\u73b0\u8def\u7531\u8868\u4e2d\uff0c\u5e76\u6ca1\u6709\u5339\u914d 172.16.2.1\u7684\u6761\u76ee\uff0c\u56e0\u6b64\u6570\u636e\u5305\u88ab\u4e22\u5f03\uff0c\u5230\u76ee\u524d\u4e3a\u6b62PC1\u662f\u65e0\u6cd5\u4e0ePC2\u4e92\u8bbf\u7684\u3002\u90a3\u4e48\u5982\u4f55\u624d\u80fd\u4f7fR1\u6b63\u5e38\u8f6c\u53d1\u8fd9\u4e2a\u6570\u636e\u5305\u5462\uff1f\u5f53\u7136\u9700\u8981R1\u7684\u8def\u7531\u8868\u4e2d\u6709\u76f8\u5173\u7684\u6761\u76ee\u6765\u505a\u6307\u793a\u3002 \u6700\u7b80\u5355\u7684\u4e00\u79cd\u65b9\u5f0f\u662f\uff0c\u901a\u8fc7\u624b\u5de5\u7684\u65b9\u5f0f\u4e3aR1\u6dfb\u52a0\u53bb\u5f80172.16.2.0/24\u7684\u8def\u7531\u6761\u76ee\uff0c\u8fd9\u79cd\u65b9\u5f0f\u6dfb\u52a0\u7684\u8def\u7531\u79f0\u4e3a\u9759\u6001\u8def\u7531\u3002 \u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\u7684\u547d\u4ee4\u975e\u5e38\u7b80\u5355\uff1a [Quidway] ip route-static 172.16.2.0 24 172.16.100.2 \u547d\u4ee4\u4e2d\u7684\u7ea2\u8272\u5b57\u4f53\u90e8\u5206\u662f\u8fd9\u6761\u8def\u7531\u7684\u76ee\u7684\u7f51\u7edc\u5730\u5740\uff08172.16.2.0\uff09\u53ca\u63a9\u7801\u957f\u5ea6\uff0824\uff09\uff1b\u84dd\u8272\u5b57\u4f53\u90e8\u5206\u662f \u53bb\u5f80\u8fd9\u4e2a\u76ee\u7684\u5730\u7684\u201c\u4e0b\u4e00\u8df3IP\u5730\u5740\u201d\u3002\u4e8e\u662fR1\u7684\u8def\u7531\u8868\u53d8\u6210\u4e0b\u9762\u8fd9\u4e2a\u6837\u5b50\uff1a \u6211\u4eec\u770b\u5230\uff0cR1\u7684\u8def\u7531\u8868\u91cc\u51fa\u73b0\u4e86\u4e00\u4e2a\u65b0\u589e\u7684\u6761\u76ee\uff0c\u8def\u7531\u524d\u7f00\u662f172.16.2.0/24\uff0c\u534f\u8bae\u7c7b\u578b\u4e3a\u201c\u9759\u6001\u201d\uff0c \u4f18\u5148\u7ea7\u4e3a60\uff0c\u51fa\u63a5\u53e3\u4e3aGE0/0/1\uff0c\u53bb\u5f80\u76ee\u7684\u5730\u7684\u4e0b\u4e00\u8df3IP\u662f172.16.100.2\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5f53R1\u6536\u5230PC1\u53d1\u5f80172.16.2.1\u7684\u6570\u636e\u5305\u65f6\uff0c\u5b83\u67e5\u770b\u8def\u7531\u8868\uff0c\u53d1\u73b0\u8def\u7531\u8868\u4e2d\u6709\u4e00\u4e2a\u6761\u76ee\u5339\u914d\uff0c\u4e8e\u662fR1\u5c06\u8be5\u6570\u636e\u5305\u4e22\u7ed9\u8be5\u6761\u8def\u7531\u6307\u793a\u7684\u4e0b\u4e00\u8df3172.16.100.2\uff0c\u8fd9\u4e2a\u6570\u636e\u5305\u88ab\u8f6c\u53d1\u5230\u4e86R2\uff0c\u518d\u7531R2\u67e5\u5b83\u7684\u8def\u7531\u8868\uff0cR2\u53d1\u73b0\u6570\u636e\u5305\u7684\u76ee\u7684\u5730172.16.2.1\u5728\u672c\u5730\u8def\u7531\u8868\u4e2d\u6709\u8def\u7531\u6761\u76ee\u5339\u914d\uff0c\u800c\u4e14\u662f\u76f4\u8fde\u7f51\u7edc\uff0c\u56e0\u6b64R2\u5c06\u6570\u636e\u5305\u6839\u636e\u8def\u7531\u6761\u76ee\u7684\u6307\u793a\u4eceGE0/0/0\u53e3\u53d1\u9001\u51fa\u53bb\uff0c\u6700\u7ec8PC2\u6536\u5230\u4e86\u8fd9\u4e2a\u6570\u636e\u5305\u3002 \u73b0\u5728\u95ee\u9898\u6765\u4e86\uff0c\u6211\u4eec\u5728R1\u4e0a\u589e\u52a0\u4e86\u8fd9\u6761\u9759\u6001\u8def\u7531\u540e\uff0cPC1\u4e0ePC2\u5c31\u80fd\u591f\u4e92\u901a\u4e86\u4e48\uff1f\u7b54\u6848\u662f\u5426\u5b9a\u7684\uff0c\u4e3a\u4ec0\u4e48\uff1f\u56e0\u4e3a\u4e24\u4e2a\u8282\u70b9\u4e4b\u95f4\u7684\u6570\u636e\u901a\u4fe1\u5f80\u5f80\u662f\u53cc\u5411\u7684\uff0c\u6709\u53bb\u5f97\u6709\u56de\uff0c\u5728R1\u4e0a\u589e\u52a0\u53bb\u5f80172.16.2.0/24\u7684\u9759\u6001\u8def\u7531\u540e\uff0cPC1\u53d1\u5f80PC2\u7684\u6570\u636e\u5305\u662f\u80fd\u591f\u88ab\u8f6c\u53d1\u5230PC2\u7684\uff0c\u4f46\u662f\u5982\u679c\u6b64\u523bPC2\u8981\u56de\u9001\u62a5\u6587\u5462\uff1fPC2\u56de\u9001\u7684\u6570\u636e\u5305\u76ee\u7684IP\u5730\u5740\u5c31\u662f172.16.1.1\uff0c\u8fd9\u4e2a\u6570\u636e\u5305\u9996\u5148\u88abPC2\u53d1\u5f80\u81ea\u5df1\u7684\u7f51\u5173\u4e5f\u5c31\u662fR2\uff0cR2\u67e5\u770b\u8def\u7531\u8868\uff0c\u5374\u6ca1\u6709\u53d1\u73b0\u5339\u914d\u76ee\u7684\u5730\u5740172.16.1.1\u7684\u8def\u7531\uff0c\u4e8e\u662f\u5c31\u4e22\u5305\u3002 \u56e0\u6b64\uff0c\u4e3a\u4e86\u4f7f\u5f97PC1\u4e0ePC2\u4e4b\u95f4\u80fd\u591f\u76f8\u4e92\u901a\u4fe1\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u505a\u4e00\u6b65\u52a8\u4f5c\uff0c\u4e5f\u5c31\u662f\u5728R2\u4e0a\u4e5f\u589e\u52a0\u4e00\u6761\u8def\u7531\uff0c\u8def\u7531\u7684\u76ee\u7684\u5730\u662f172.16.1.0/24\u7f51\u7edc\uff0c\u4e0b\u4e00\u8df3\u5462\uff1f\u5f53\u7136\u5c31\u662f172.16.100.1\u4e86\u3002\u5982\u6b64\u4e00\u6765PC1\u53caPC2\u4e92\u76f8\u901a\u4fe1\u5c31\u6ca1\u6709\u95ee\u9898\u4e86\u3002","title":"\u5173\u4e8e\u9759\u6001\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_88","text":"","title":"\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ip_4","text":"[Quidway] ip route-static 172.16.2.0 24 172.16.100.2 \u7ea2\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u8be5\u8def\u7531\u6761\u76ee\u7684\u7f51\u7edc\u5730\u5740\uff1b \u84dd\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u8be5\u76ee\u7684\u7f51\u7edc\u7684\u7f51\u7edc\u63a9\u7801\u6216\u8005\u63a9\u7801\u957f\u5ea6\uff1b\u6b64\u590424\u7b49\u540c\u4e8e255.255.255.0\u3002\u7eff\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u53bb\u5f80\u8be5\u7f51\u7edc\u7684\u4e0b\u4e00\u8df3IP\u5730\u5740\uff1b","title":"\u65b9\u6cd5\u4e00\uff1a\u5173\u8054\u4e0b\u4e00\u8df3IP\u7684\u65b9\u5f0f\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_89","text":"[Quidway] ip route-static 172.16.2.0 24 GigabitEthernet0/0/1 \u7ea2\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u8be5\u8def\u7531\u6761\u76ee\u7684\u7f51\u7edc\u5730\u5740\uff1b \u84dd\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u7f51\u7edc\u63a9\u7801\u6216\u8005\u63a9\u7801\u957f\u5ea6\uff1b \u7eff\u8272\u5b57\u4f53\u90e8\u5206\u4e3a\u53bb\u5f80\u8be5\u7f51\u7edc\u7684\u51fa\u63a5\u53e3\uff0c\u6ce8\u610f\uff0c\u5728\u534e\u4e3a\u8def\u7531\u5668\u4e0a\uff0c\u9759\u6001\u8def\u7531\u53ef\u5173\u8054\u51fa\u63a5\u53e3\u6216\u4e0b\u4e00\u8df3IP\uff0c\u6216\u4e24\u8005\u90fd\u5173\u8054\u3002\u5982\u679c\u8def\u7531\u7684\u51fa\u63a5\u53e3\u4e3a\u70b9\u5bf9\u70b9\u63a5\u53e3\uff08\u4f8b\u5982\u91c7\u7528HDLC\u6216PPP\u5c01\u88c5\u7684\u4e32\u884c\u63a5\u53e3\uff09\uff0c\u5219\u53ef\u53ea\u5173\u8054\u51fa\u63a5\u53e3\u3002\u4f46\u82e5\u51fa\u63a5\u53e3\u4e3a\u5e7f\u64ad\u591a\u8def\u8bbf\u95ee\u578b\u63a5\u53e3\uff0c\u4f8b\u5982\u4ee5\u592a\u7f51\u53e3\uff0c\u90a3\u4e48\u5c31\u5fc5\u987b\u5173\u8054\u4e0b\u4e00\u8df3\uff0c\u5982**ip route-static 172.16.2.0 24 GigabitEthernet0/0/1 172.16.100.2**\uff0c\u6216\u8005**ip route-static 172.16.2.0 24 172.16.100.2**\u3002 \u9759\u6001\u8def\u7531\u7b80\u5355\u5b9e\u9a8c \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0cSW1\u8fde\u63a5\u7740PC1\uff0cPC1\u5c5e\u4e8eVLAN10\uff0c\u4f7f\u7528\u7684\u7f51\u6bb5\u662f192.168.10.0/24\uff1bSW2\u8fde\u63a5\u7740 PC2\uff0cPC2\u5c5e\u4e8eVLAN20\uff0c\u4f7f\u7528\u7684\u7f51\u6bb5\u662f192.168.20.0/24\uff1bPC1\u53caPC2\u7684\u7f51\u5173\u5206\u522b\u4e3aSW1\u53caSW2\u3002\u4e24\u53f0\u4ea4\u6362\u673a\u901a\u8fc7VLAN200\u5b9e\u73b0\u4e09\u5c42\u5bf9\u63a5\uff0c\u8981\u6c42\u5b8c\u6210\u4ea4\u6362\u673a\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC1\u4e0ePC2\u80fd\u591f\u76f8\u4e92\u901a\u4fe1\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cPC1\u5373\u53ef\u4e0ePC2\u76f8\u4e92\u901a\u4fe1\u3002\u5728SW1\u4e0a\u68c0\u67e5\u4e00\u4e0b\u8def\u7531\u8868\uff1a \\<SW1>display ip routing-table Route Flags: R - relay, D - download to fib ------------------------------------------------------------------------------ Routing Tables: Public Destinations : 7 Routes : 7 Destination/Mask Proto Pre Cost Flags NextHop Interface 127.0.0.0/8 Direct 0 0 D 127.0.0.1 InLoopBack0 127.0.0.1/32 Direct 0 0 D 127.0.0.1 InLoopBack0 192.168.10.0/24 Direct 0 0 D 192.168.10.254 Vlanif10 192.168.10.254/32 Direct 0 0 D 127.0.0.1 Vlanif10 192.168.20.0/24 Static 60 0 RD 192.168.200.2 Vlanif200 192.168.200.0/30 Direct 0 0 D 192.168.200.1 Vlanif200 192.168.200.1/32 Direct 0 0 D 127.0.0.1 Vlanif200 \u5728\u4ee5\u4e0a\u8f93\u51fa\u4e2d\u80fd\u770b\u5230\u6211\u4eec\u914d\u7f6e\u7684\u9759\u6001\u8def\u7531\uff0cSW2\u540c\u7406\u3002 \u5f53\u7136\u6b64\u65f6\u5728SW1 \u4e0a\u4e5f\u53ef\u4ee5\u76f4\u63a5ping \u901aPC2 \uff0c \u4f46\u662f\u5b9e\u9645\u4e0a\uff0c SW1 \u5728ping PC2 \u65f6\uff0c \u62a5\u6587\u7684\u6e90IP \u5730\u5740\u662f192.168.200.1 \uff0c \u56e0\u6b64\u5982\u679c\u6211\u4eec\u8981\u9a8c\u8bc1192.168.10.0/24 \u7f51\u6bb5\u5230PC2 \u7684\u53ef\u8fbe\u6027\uff0c\u53ef\u4ee5\u5728SW1 \u6267\u884cping 192.168.20.1\u6d4b\u8bd5\u65f6\uff0c\u5f3a\u5236\u6307\u5b9a\u63a2\u6d4b\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u4e3a192.168.10.254\uff1a \u5728\u7f51\u7edc\u8bbe\u5907\u4e0a\uff0c\u6267\u884cping\u547d\u4ee4\u65f6\uff0c\u5173\u8054-a\u5173\u952e\u5b57\u53ef\u6307\u5b9aICMP\u63a2\u6d4b\u62a5\u6587\u7684\u6e90\u5730\u5740\uff08\u9700\u4e3a\u672c\u8bbe\u5907\u4e0a\u7684IP\u5730\u5740\uff09\u3002 \u9ed8\u8ba4\u8def\u7531\uff08\u7f3a\u7701\u8def\u7531\uff09 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5bf9\u4e8eR1\u800c\u8a00\uff0c\u5982\u679c\u8981\u5230\u8fbeR2\u6240\u76f4\u8fde\u7684172.16.1.0/24\u30012.0/24\u30013.0/24\u7f51\u7edc\uff0c\u5c31\u5fc5\u987b\u6709\u8def\u7531\u3002\u5982\u679c\u91c7\u7528\u9759\u6001\u8def\u7531\u7684\u65b9\u5f0f\u4e3aR1\u6dfb\u52a0\u8def\u7531\uff0c\u4e09\u4e2a\u76ee\u7684\u7f51\u7edc\u5c31\u9700\u8981\u914d\u7f6e\u4e09\u6761\u9759\u6001\u8def\u7531\u3002\u8fd9\u6837\u4e0d\u4ec5\u4ec5\u589e\u52a0\u4e86\u914d\u7f6e\u5de5\u4f5c\u91cf\uff0c\u53e6\u4e00\u65b9\u9762\uff0c\u4e5f\u589e\u52a0\u4e86R1\u7684\u8d1f\u62c5\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u7ef4\u62a4\u66f4\u591a\u7684\u8def\u7531\u6761\u76ee\uff0c\u800c\u627f\u8f7d\u8def\u7531\u6761\u76ee\u7684\u8def\u7531\u8868\u662f\u9700\u8981\u5360\u7528\u8bbe\u5907\u5185\u5b58\u8d44\u6e90\u7684\u3002\u56e0\u6b64\u4ece\u7f51\u7edc\u8bbe\u8ba1\u53ca\u4f18\u5316\u7684\u89d2\u5ea6\uff0c\u6211\u4eec\u5f80\u5f80\u5728\u4fdd\u8bc1\u7f51\u7edc\u8def\u7531\u53ef\u8fbe\u6027\u7684\u540c\u65f6\uff0c\u5c3d\u91cf\u51cf\u5c11\u8def\u7531\u5668\u8def\u7531\u8868\u7684\u6761\u76ee\u6570\u91cf\u3002 \u5728\u8fd9\u4e2a\u73af\u5883\u4e2d\uff0c\u7531\u4e8eR1\u4ec5\u6709\u4e00\u6761\u51fa\u53e3\u7ebf\u8def\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5728R1\u4e0a\u914d\u7f6e\u4e00\u6761**\u9ed8\u8ba4\u8def\u7531\uff08Default route\uff09**\uff0c\u4e0b\u4e00\u8df3\u4e3aR2\uff0c\u5982\u6b64\u5373\u53ef\u5728\u4fdd\u8bc1R1\u5230R2\u540e\u65b9\u4e09\u4e2a\u7f51\u7edc\u53ef\u8fbe\u7684\u540c\u65f6\uff0c\u8def\u7531\u6761\u76ee\u8fbe\u5230\u6700\u7b80\u3002\u5177\u4f53\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u9ed8\u8ba4\u8def\u7531\u7684\u7f51\u7edc\u5730\u5740\u548c\u63a9\u7801\u90fd\u662f\u51680\uff0c\u53ef\u5339\u914d\u4efb\u610f\u76ee\u7684\u7f51\u7edc\u524d\u7f00\uff0c\u53ef\u4f5c\u4e3a\u8def\u7531\u5668\u7684\u201c\u6700\u540e\u6c42\u52a9\u5bf9\u8c61\u201d\u4f7f\u7528\u3002 \u9ed8\u8ba4\u8def\u7531\u7684\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\u3002\u901a\u5e38\u7528\u4e8e\u4e00\u4e2a\u7f51\u7edc\u7684\u51fa\u53e3\u8bbe\u5907\u4e0a\uff0c\u4f8b\u5982\u51fa\u53e3\u8def\u7531\u5668\u6216\u51fa\u53e3\u9632\u706b\u5899\uff0c\u8fd9\u4e9b\u8bbe\u5907\u8fde\u63a5\u5916\u90e8\u7f51\u7edc\uff0c\u5f80\u5f80\u5e76\u4e0d\u80fd\u77e5\u6653\u5916\u90e8\u7f51\u7edc\u7684\u6240\u6709\u7f51\u6bb5\u4fe1\u606f\u2014\u2014\u5f53\u7136\u4e5f\u4e0d\u53ef\u80fd\u5b8c\u5168\u77e5\u6653\uff0c\u90a3\u4e48\u6b64\u65f6\u5c31\u53ef\u4ee5\u5728\u8bbe\u5907\u4e0a\u4e66\u5199\u9ed8\u8ba4\u8def\u7531\uff0c\u6307\u5411\u5916\u90e8\u7f51\u7edc\uff0c\u4ece\u800c\u4f7f\u5f97\u8bbe\u5907\u80fd\u591f\u987a\u5229\u5c06\u53bb\u5f80\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u8f6c\u53d1\u51fa\u53bb\u3002 \u6d6e\u52a8\u9759\u6001\u8def\u7531 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5bf9\u4e8eR3\u53ca\u5176\u4e0b\u6302\u7684\u7f51\u7edc\u800c\u8a00\uff0c\u8981\u53bb\u5f8010.9.9.0/24\u7f51\u7edc\uff0c\u901a\u8fc7R1\u53caR2\u90fd\u53ef\u8fbe\u3002\u90a3\u4e48\u5982\u679c\u5728R3\u4e0a\uff0c \u5206\u522b\u914d\u7f6e\u9759\u6001\u8def\u7531\uff1a \u8fd9\u4e24\u6761\u8def\u7531\u90fd\u662f\u53bb\u5f80\u540c\u4e00\u4e2a\u76ee\u7684\u5730\uff0c\u4f46\u5206\u522b\u91c7\u7528\u4e0d\u540c\u7684\u4e0b\u4e00\u8df3IP\u5730\u5740\uff0c\u540c\u65f6\u8fd9\u4e24\u6761\u8def\u7531\u5177\u5907\u76f8\u540c\u7684\u4f18\u5148\u7ea7\uff0c \u4ee5\u53ca\u76f8\u540c\u7684\u5f00\u9500\uff08Cost\u90fd\u4e3a0\uff09\uff0c\u56e0\u6b64\u8fd9\u4e24\u6761\u53bb\u5f8010.9.9.0/24\u7684\u8def\u7531\u88ab\u540c\u65f6\u88c5\u8f7d\u8fdb\u4e86R3\u7684\u8def\u7531\u8868\u3002\u8fd9\u79cd\u73b0\u8c61\u6211\u4eec\u79f0\u4e3a\u8def\u7531\u7684\u7b49\u4ef7\u8d1f\u8f7d\u5747\u8861\u3002\u6700\u7ec8\u7684\u7ed3\u679c\u662f\uff0cR3\u8f6c\u53d1\u53bb\u5f8010.9.9.0/24\u7684\u6d41\u91cf\u65f6\uff0c\u53ef\u80fd\u4f1a\u540c\u65f6\u91c7\u7528R1\u53caR2 \u4f5c\u4e3a\u4e0b\u4e00\u8df3\u3002\u8fd9\u79cd\u65b9\u6cd5\u662f\u6709\u5229\u5f0a\u7684\uff0c\u4f18\u52bf\u5f88\u660e\u663e\uff0c\u800c\u5f0a\u7aef\u4e4b\u4e00\u662f\u6709\u53ef\u80fd\u51fa\u73b0\u5230\u8fbe\u76ee\u7684\u5730\u7684\u6570\u636e\u5305\u662f\u975e\u987a\u5e8f\u7684\u60c5\u51b5\u3002\u90a3\u4e48\u5982\u679c\u5e0c\u671bR3\u53bb\u5f8010.9.9.0/24\u7684\u6d41\u91cf\u59cb\u7ec8\u5148\u8d70\u5355\u8fb9\uff08\u5982R1\uff09\uff0c\u5f53R1\u5b95\u673a\u6216R1-R3\u4e4b\u95f4\u7684\u4e92\u8054\u94fe\u8def\u51fa\u73b0\u6545\u969c\u65f6\uff0cR3\u80fd\u591f\u81ea\u52a8\u5c06\u6d41\u91cf\u5207\u6362\u5230R2\u5462\uff1f \u8fd9\u91cc\u5c31\u53ef\u4ee5\u4f7f\u7528\u5230\u6d6e\u52a8\u9759\u6001\u8def\u7531\u7684\u6982\u5ff5\u3002\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u4f7f\u7528**ip route-static**\u547d\u4ee4\u53ef\u4ee5\u4e3a\u8bbe\u5907\u6dfb\u52a0\u9759\u6001\u8def\u7531\uff0c \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd9\u6761\u547d\u4ee4\u6240\u6dfb\u52a0\u7684\u9759\u6001\u8def\u7531\u7684\u4f18\u5148\u7ea7\u4e3a60\uff08\u5728\u534e\u4e3a\u8bbe\u5907\u4e0a\uff0c\u9759\u6001\u8def\u7531\u7684\u4f18\u5148\u7ea7\u9ed8\u8ba4\u4e3a60\uff0c \u5176\u4ed6\u8bbe\u5907\u5382\u5546\u53ef\u80fd\u6709\u6240\u4e0d\u540c\uff09\uff0c\u8fd9\u4e2a\u9759\u6001\u8def\u7531\u7684\u4f18\u5148\u7ea7\u4e8b\u5b9e\u4e0a\u662f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7684\uff0c\u4f8b\u5982\uff0c\u5728R3\u4e0a\u914d\u7f6e\u4fee\u6539\u4e3a\uff1a \u4e0a\u8ff0\u914d\u7f6e\u4e2d\uff0c\u6211\u4eec\u4e3aR3\u6dfb\u52a0\u4e86\u4e24\u6761\u9759\u6001\u8def\u7531\uff0c\u76ee\u7684\u7f51\u7edc\u90fd\u662f10.9.9.0/24\uff0c\u4e0b\u4e00\u8df3\u5206\u522b\u4e3a10.1.13.1\u53ca10.1.23.2\uff0c \u7559\u610f\u5230\u4e0b\u4e00\u8df3\u4e3aR1\u7684\u9759\u6001\u8def\u7531\u5e76\u6ca1\u6709\u8bbe\u7f6e\u4f18\u5148\u7ea7\uff0c\u56e0\u6b64\u8be5\u6761\u8def\u7531\u7684\u4f18\u5148\u7ea7\u4e3a\u9ed8\u8ba4\u768460\uff0c\u53e6\u4e00\u6761\u9759\u6001\u8def\u7531\u4f7f\u7528**preference**\u5173\u952e\u5b57\u6307\u5b9a\u4e86\u4f18\u5148\u7ea780\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u7ecf\u8fc7\u4f18\u5148\u7ea7\u6bd4\u8f83\uff0c\u4f18\u5148\u7ea7\u503c\u66f4\u5c0f\u7684\u8def\u7531\u5c06\u88ab\u4f18\u9009\uff0c\u5e76\u653e\u8fdb\u8def\u7531\u8868\u4f5c\u4e3a\u6570\u636e\u8f6c\u53d1\u7684\u4f9d\u636e\uff0c\u53e6\u4e00\u6761\u4f18\u5148\u7ea7\u4e3a80\u7684\u8def\u7531\uff0c\u5219\u201c\u6f5c\u85cf\u201d\u8d77\u6765\uff0c\u5e76\u4e0d\u51fa\u73b0\u5728\u8def\u7531\u8868\u4e2d\u3002 \u5f53R1\u5b95\u673a\uff0c\u6216\u8005R1-R3\u4e4b\u95f4\u7684\u76f4\u8fde\u94fe\u8def\u53d1\u751f\u6545\u969c\u65f6\uff0c**ip route-static 10.9.9.0 24 10.1.13.1**\u8fd9\u6761\u9759\u6001\u8def\u7531\u5931 \u6548\uff0c**ip route-static 10.9.9.0 24 10.1.23.2 preference 80**\u5219\u6d6e\u73b0\u51fa\u6765\u4e86\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u56e0\u6b64\u8fd9\u662f\u4e00\u79cd\u4e0d\u9519\u7684\u8def\u5f84\u5907\u4efd\u673a\u5236\u3002 \u8def\u7531\u6c47\u603b\uff08\u8def\u7531\u805a\u5408\uff09","title":"\u65b9\u6cd5\u4e8c\uff1a\u5173\u8054\u51fa\u63a5\u53e3\u7684\u65b9\u5f0f\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_90","text":"\u4e0a\u56fe\u4e2d\uff0c\u5bf9\u4e8eR1\u800c\u8a00\uff0c\u5982\u679c\u8981\u53bb\u5f80R2\u8eab\u540e\u7684172.16.1.0/24\u3001172.16.2.0/24\u3001172.16.3.0/24\u7f51\u7edc\uff0c\u81ea\u7136\u662f\u8981\u6709\u8def\u7531\u7684\uff0c\u5982\u679c\u662f\u91c7\u7528\u9759\u6001\u8def\u7531\u7684\u65b9\u5f0f\uff0c\u610f\u5473\u7740\u8981\u7ed9R1\u914d\u7f6e\u4e09\u6761\u9759\u6001\u8def\u7531\u5206\u522b\u5bf9\u5e94\u4e0a\u8ff0\u4e09\u4e2a\u7f51\u6bb5\uff0c \u524d\u6587\u5df2\u7ecf\u8bf4\u8fc7\u4e86\uff0c\u8fd9\u6837\u7684\u914d\u7f6e\uff0c\u4e00\u6765\u5de5\u4f5c\u91cf\u5927\uff0c\u60f3\u60f3\u770b\uff0c\u5982\u679cR2\u8eab\u540e\u4e0d\u4ec5\u4ec5\u6709\u4e09\u4e2a\u7f51\u7edc\u5462\uff1f\u5982\u679c\u6709100 \u4e2a\u7f51\u7edc\u5462\uff1f\u518d\u8005\u8fd9\u4e5f\u610f\u5473\u7740R1\u7684\u8def\u7531\u8868\u5c06\u53d8\u5f97\u975e\u5e38\u81c3\u80bf\u3002 \u5728\u4e0a\u4e00\u5c0f\u8282\u6211\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u4e86\u9ed8\u8ba4\u8def\u7531\uff0c\u9ed8\u8ba4\u8def\u7531\u56fa\u7136\u53ef\u4ee5\u89e3\u51b3\u4e00\u90e8\u5206\u95ee\u9898\uff0c\u4f46\u662f\u9ed8\u8ba4\u8def\u7531\u7684\u201c\u8def\u7531\u9897\u7c92\u5ea6\u201d\u592a\u5927\uff0c\u65e0\u6cd5\u505a\u5230\u5bf9\u8def\u7531\u66f4\u4e3a\u7ec6\u81f4\u7684\u63a7\u5236\uff0c\u800c\u4e14\u5982\u679cR1\u5de6\u4fa7\uff08\u53e6\u4e00\u4e2a\u63a5\u53e3\uff09\u8fde\u63a5\u4e86\u4e00\u4e2a\u5916\u90e8\u7f51\u7edc\u5e76\u4e14\u5df2\u7ecf\u5360\u7528\u4e86\u9ed8\u8ba4\u8def\u7531\uff0c\u90a3\u4e48\u8fd9\u91cc\u53ea\u80fd\u53e6\u60f3\u4ed6\u6cd5\u4e86\u3002 \u8def\u7531\u6c47\u603b\u53ef\u4ee5\u5f88\u597d\u7684\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a \u4e0eR1\u4f7f\u75283\u6761\u660e\u7ec6\u8def\u7531\u4e0d\u540c\uff0c\u5728\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u4ec5\u4ec5\u4f7f\u7528\u4e00\u6761\u8def\u7531\u5373\u53ef\u5b9e\u73b0\u76f8\u540c\u7684\u6548\u679c\uff0c\u8fd9\u6761\u8def\u7531\u662f\u4e0a\u4e00\u4e2a\u573a\u666f\u4e2d3\u6761\u660e\u7ec6\u8def\u7531\u7684\u6c47\u603b\u8def\u7531\u3002\u8fd9\u6837\u914d\u7f6e\u7684\u4e00\u4e2a\u76f4\u63a5\u7684\u597d\u5904\u5c31\u662f\uff0c\u8def\u7531\u5668\u7684\u8def\u7531\u8868\u6761\u76ee\u6570\u91cf\u5927\u5927\u51cf\u5c11\u4e86\u3002\u8fd9\u79cd\u64cd\u4f5c\u88ab\u79f0\u4e3a\u8def\u7531\u6c47\u603b\u3002\u8def\u7531\u6c47\u603b\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u7f51\u7edc\u8bbe\u8ba1\u601d\u60f3\uff0c\u901a\u5e38\u5728\u4e00\u4e2a\u5927\u4e2d\u578b\u7684\u7f51\u7edc\u4e2d\uff0c\u5fc5\u987b\u65f6\u523b\u8003\u8651\u7f51\u7edc\u53ca\u8def\u7531\u7684\u53ef\u4f18\u5316\u6027\uff0c\u8def\u7531\u6c47\u603b\u5c31\u662f\u4e00\u4e2a\u65f6\u5e38\u9700\u8981\u5173\u6ce8\u7684\u5de5\u5177\u3002\u8fd9\u91cc\u5b9e\u9645\u4e0a\u662f\u90e8\u7f72\u4e86\u9759\u6001\u8def\u7531\u7684\u6c47\u603b\uff0c\u5f53\u7136\u9664\u6b64\u4e4b\u5916\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u52a8\u6001\u8def\u7531\u534f\u8bae\u4e2d\u8fdb\u884c\u8def\u7531\u6c47\u603b\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u52a8\u6001\u8def\u7531\u534f \u8bae\u90fd\u652f\u6301\u8def\u7531\u6c47\u603b\u3002","title":"\u8def\u7531\u6c47\u603b\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_91","text":"\u8def\u7531\u7684\u6c47\u603b\u5b9e\u9645\u4e0a\u662f\u901a\u8fc7\u5bf9\u7f51\u7edc\u63a9\u7801\u7684\u64cd\u4f5c\u6765\u5b8c\u6210\u7684\u3002\u5bf9\u4e8e\u4e0b\u9762\u7684\u4f8b\u5b50\u6765\u8bf4\uff1a \u5728R2\u4e0a\uff0c\u4e3a\u4e86\u5230\u8fbeR1\u5de6\u4fa7\u7684\u7f51\u7edc\uff0cR2\u4f7f\u7528\u4e86\u8def\u7531\u6c47\u603b\uff0c\u914d\u7f6e\u4e86\u4e00\u6761\u6c47\u603b\u8def\u7531\uff1a \u867d\u7136\u8fd9\u786e\u5b9e\u8d77\u5230\u4e86\u7f51\u7edc\u4f18\u5316\u7684\u76ee\u7684\uff0c\u4f46\u662f\uff0c\u8fd9\u6761\u6c47\u603b\u8def\u7531\u592a\u201c\u7c97\u72b7\u201d\u4e86\uff0c\u5b83\u751a\u81f3\u5c06R3\u8fd9\u4e00\u4fa7\u7684\u7f51\u6bb5\u4e5f \u56ca\u62ec\u5728\u5185\uff0c\u6211\u4eec\u79f0\u8fd9\u79cd\u8def\u7531\u6c47\u603b\u884c\u4e3a\u4e0d\u591f\u7cbe\u786e\u3002\u56e0\u6b64\uff0c\u4e00\u79cd\u7406\u60f3\u7684\u65b9\u5f0f\u662f\uff0c\u4f7f\u7528\u4e00\u4e2a\u201c\u521a\u521a\u597d\u201d\u56ca\u62ec\u8fd9\u4e9b\u660e\u7ec6\u8def\u7531\u7684\u6c47\u603b\u8def\u7531\uff0c\u8fd9\u6837\u4e00\u6765\u5c31\u53ef\u4ee5\u907f\u514d\u6c47\u603b\u4e0d\u591f\u7cbe\u786e\u7684\u95ee\u9898\u3002 \u8fd9\u91cc\u4e0d\u5f97\u4e0d\u5f3a\u8c03\u4e00\u70b9\uff0c\u7f51\u7edc\u53ef\u4ee5\u90e8\u7f72\u8def\u7531\u6c47\u603b\u7684\u524d\u63d0\u662f\u7f51\u7edc\u4e2d\u7684IP\u5b50\u7f51\u89c4\u5212\u53ca\u7f51\u7edc\u6a21\u578b\u8bbe\u8ba1\u5177\u5907\u4e00\u5b9a\u7684\u79d1\u5b66\u6027\u548c\u5408\u7406\u6027\u3002\u5982\u679c\u7f51\u7edc\u89c4\u5212\u5f97\u6742\u4e71\u65e0\u7ae0\uff0c\u8def\u7531\u6c47\u603b\u90e8\u7f72\u8d77\u6765\u5c31\u76f8\u5f53\u7684\u56f0\u96be\u4e86\u3002\u90a3\u4e48\u5982\u4f55\u8fdb\u884c\u6c47\u603b\u8def\u7531\u7684\u7cbe\u786e\u8ba1\u7b97\u5462?\u4e0b\u9762\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a \u73b0\u6709\u660e\u7ec6\u8def\u7531\uff1a172.16.1.0/24\u3001172.16.2.0/24\u3001\u2026\u3001172.16.31.0/24\uff0c\u8bf7\u8ba1\u7b97\u6700\u7cbe\u786e\u7684\u6c47\u603b\u8def\u7531\uff1a \u6211\u4eec\u8981\u505a\u7684\u4e8b\u60c5\u975e\u5e38\u7b80\u5355\uff0c\u5c06\u660e\u7ec6\u5b50\u7f51\u90fd\u6362\u7b97\u6210\u4e8c\u8fdb\u5236\uff0c\u7136\u540e\u6392\u5217\u8d77\u6765\u3002\u6240\u8981\u505a\u7684\u4e8b\u60c5\u5c31\u662f\u627e\u51fa\u6bcf\u4e2a\u5b50\u7f51\u4e2d\u7684\u201c\u76f8\u540c\u7684\u6bd4\u7279\u4f4d\u201d\u3002\u7531\u4e8e\u8fd9\u4e9b\u660e\u7ec6\u5b50\u7f51\u662f\u8fde\u7eed\u7684\uff0c\u56e0\u6b64\u5176\u5b9e\u53ea\u8981\u6311\u51fa\u9996\u5c3e\u7684\u4e24\u5230\u4e09\u4e2a\u7f51\u7edc\u53f7\u6765\u8ba1\u7b97\u5c31\u8db3\u591f\u4e86\uff1a \u5c06\u8fd9\u4e9bIP\u5730\u5740\u5199\u6210\u4e8c\u8fdb\u5236\u5f62\u5f0f\uff0c\u5b9e\u9645\u4e0a\u53ea\u8981\u8003\u8651\u7b2c\u4e09\u4e2a8\u4f4d\u7ec4\u5373\u53ef\uff0c\u56e0\u4e3a\u53ea\u6709\u5b83\u662f\u5728\u53d8\u5316\u7684\u3002 \u73b0\u5728\u753b\u4e00\u6839\u7ad6\u7ebf\uff0c\u8fd9\u6839\u7ebf\u7684\u5de6\u4fa7\uff0c\u6bcf\u4e00\u5217\u7684\u4e8c\u8fdb\u5236\u6570\u90fd\u662f\u4e00\u6837\u7684\uff0c\u7ebf\u7684\u53f3\u4fa7\u5219\u662f\u53d8\u5316\u7684\uff0c\u8fd9\u6839\u7ebf\u7684 \u6700\u7ec8\u4f4d\u7f6e\uff0c\u5c31\u662f\u6c47\u603b\u8def\u7531\u7684\u63a9\u7801\u957f\u5ea6\u3002\u6ce8\u610f\u8fd9\u6839\u7ad6\u7ebf\u53ef\u4ee5\u4ece\u9ed8\u8ba4\u7684\u63a9\u7801\u957f\u5ea6\uff0c\u4e5f\u5c31\u662f/24\u5f00\u59cb\uff0c\u4e00\u683c\u4e00\u683c\u7684\u5f80\u5de6\u79fb\uff0c\u76f4\u5230\u4f60\u89c2\u5bdf\u5230\u7ebf\u7684\u5de6\u7aef\u6bcf\u4e00\u5217\u6570\u503c\u90fd\u76f8\u7b49\uff0c\u5373\u53ef\u505c\u4e0b\uff0c\u8fd9\u65f6\u5019\uff0c\u8fd9\u6839\u7ebf\uff0c\u6240\u5904\u7684\u4f4d\u7f6e\u5c31\u521a\u521a\u597d\u3002 \u5982\u4e0a\u56fe\uff0c\u7ebf\u7684\u4f4d\u7f6e\u662f16+3=19\uff0c\u6240\u4ee5\u6211\u4eec\u5f97\u5230\u6c47\u603b\u5730\u5740\uff1a172.16.0.0/19\uff0c\u8fd9\u5c31\u662f\u4e00\u4e2a\u6700\u7cbe\u786e\u7684\u6c47\u603b\u5730\u5740\u3002 \u56e0\u6b64\uff0c\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u4e48\u914d\u7f6e\uff1a","title":"\u8def\u7531\u7cbe\u786e\u6c47\u603b\u7684\u7b97\u6cd5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_92","text":"\u8def\u7531\u6c47\u603b\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u7f51\u7edc\u4f18\u5316\u624b\u6bb5\uff0c\u7136\u800c\u5982\u679c\u4f7f\u7528\u4e0d\u5f53\uff0c\u4e5f\u6709\u53ef\u80fd\u5e26\u6765\u95ee\u9898\uff0c\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u5de6\u4fa7\u6709192.168\u5f00\u5934\u7684\u4e00\u7cfb\u5217\u7f51\u7edc\uff0c\u4e3a\u4e86\u8ba9\u5b83\u4eec\u80fd\u591f\u8bbf\u95eeInternet\uff0cR1\u914d\u7f6e\u4e86\u6307\u5411R2\u7684\u9ed8\u8ba4\u8def\u7531\u3002\u800cR2\u4e3a\u4e86\u8ba9\u6570\u636e\u80fd\u591f\u56de\u7a0b\uff0c\u53c8\u4e3a\u4e86\u7cbe\u7b80\u8def\u7531\u8868\uff0c\u914d\u7f6e\u4e86\u4e00\u6761\u6c47\u603b\u8def\u7531192.168.0.0/16\uff0c\u5e76\u6307\u5411R1\u3002\u8fd9\u4e2a\u7f51\u7edc\u770b\u4f3c\u6ca1\u4ec0\u4e48\u95ee\u9898\uff0c\u4f46\u2026\u2026 \u89e3\u51b3\u529e\u6cd5\uff1a \u5728R1\u4e0a\u914d\u7f6e\u4e00\u6761**ip route-static 192.168.0.0 16 null0**\uff0c\u5373\u53ef\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002\u8fd9\u662f\u4e00\u6761\u9ed1\u6d1e\u8def\u7531\uff0cNull0 \u6709\u70b9\u7c7b\u4f3c\u5783\u573e\u6876\u7684\u6982\u5ff5\u3002\u5f53R1\u6536\u5230\u975e\u6cd5\u626b\u63cf\u62a5\u6587\uff08\u53d1\u5f80192.168\u7f51\u7edc\u4e0b\u4e0d\u5b58\u5728\u7684\u76ee\u7684\uff09\u65f6\uff0c\u8fd9\u4e9b\u62a5\u6587\u5c31\u4f1a\u88abR1\u76f4\u63a5\u4e22\u5f03\uff0c\u800c\u4e0d\u4f1a\u518d\u88ab\u8f6c\u53d1\u7ed9R2\u4e86\uff0c\u8fd9\u5c31\u89e3\u51b3\u4e86\u6570\u636e\u73af\u8def\u7684\u95ee\u9898\u3002\u8fd9\u4e2a\u601d\u8def\u5728\u8def\u7531\u6c47\u603b\u7684\u65f6\u5019\u975e\u5e38\u5173\u952e\uff0c\u8bb8\u591a\u52a8\u6001\u8def\u7531\u534f\u8bae\u5728\u4f7f\u7528\u547d\u4ee4\u6267\u884c\u8def\u7531\u6c47\u603b\u540e\uff0c\u4f1a\u5728\u672c\u5730\u8def\u7531\u8868\u4e2d\u81ea\u52a8\u4ea7\u751f\u4e00\u6761\u6307\u5411null0 \u7684\u6c47\u603b\u8def\u7531\u3002\u56e0\u6b64\uff0c\u65e0\u8bba\u662f\u91c7\u7528\u9759\u6001\u8def\u7531\uff0c\u6216\u8005\u662f\u52a8\u6001\u8def\u7531\u534f\u8bae\u6765\u90e8\u7f72\u8def\u7531\u6c47\u603b\uff0c\u90fd\u5e94\u683c\u5916\u7559\u610f\u8def\u7531\u6c47\u603b\u662f\u5426\u53ef\u80fd\u5f15\u53d1\u6570\u636e\u73af\u8def\u3002 \u6700\u957f\u5339\u914d\u539f\u5219 \u6700\u957f\u5339\u914d\u539f\u5219\u662f\u534e\u4e3a\u652f\u6301IP\u8def\u7531\u7684\u8bbe\u5907\u7684\u9ed8\u8ba4\u8def\u7531\u67e5\u8be2\u65b9\u5f0f\uff08\u4e8b\u5b9e\u4e0a\u51e0\u4e4e\u6240\u6709\u652f\u6301IP\u8def\u7531\u7684\u8bbe\u5907\u90fd\u662f\u8fd9\u79cd\u67e5\u8be2\u65b9\u5f0f\uff09\u3002\u5f53\u8def\u7531\u5668\u6536\u5230\u4e00\u4e2aIP\u6570\u636e\u5305\u65f6\uff0c\u4f1a\u5c06\u6570\u636e\u5305\u7684\u76ee\u7684IP\u5730\u5740\u4e0e\u81ea\u5df1\u672c\u5730\u8def\u7531\u8868\u4e2d\u7684\u8def\u7531\u8868\u9879\u8fdb\u884c bit by bit\u7684\u9010\u4f4d\u67e5\u627e\uff0c\u76f4\u5230\u627e\u5230\u5339\u914d\u5ea6\u6700\u957f\u7684\u6761\u76ee\uff0c\u8fd9\u53eb\u6700\u957f\u5339\u914d\u539f\u5219\u3002 \u770b\u4e0a\u9762\u7684\u56fe\uff0c\u8fd9\u662f\u4e00\u4e2a\u5f62\u8c61\u5316\u7684\u4e8c\u7ef4\u7a7a\u95f4\u56fe\u3002\u6df1\u7070\u8272\u7684\u7a7a\u95f4172.16.0.0/16\uff0c\u8fd9\u4e2a\u7f51\u7edc\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e3b\u7c7b\u7f51\u7edc \uff08Classful Network\uff09\uff0c\u6240\u8c13\u4e3b\u7c7b\u7f51\u7edc\uff0c\u610f\u601d\u662f\u8be5\u7f51\u7edc\u662f\u6309\u7167\u5176\u6240\u5c5e\u7684IP\u5730\u5740\u7c7b\u522b\u533a\u5206\u4e4b\u540e\uff0c\u5bf9\u5e94\u9ed8\u8ba4\u7684\u63a9\u7801\u957f\u5ea6\u540e\u5f97\u5230\u7684\u7f51\u7edc\u3002\u4f8b\u5982172.16.0.0 \uff0c \u8fd9\u662f\u4e00\u4e2aB\u7c7b\u5730\u5740\uff0c B\u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u957f\u5ea6\u662f/16 \uff0c\u56e0\u6b64 172.16.0.0/16\u5c31\u662f\u4e00\u4e2a\u4e3b\u7c7b\u7f51\u7edc\u3002\u518d\u4e3e\u53e6\u5916\u4e00\u4e2a\u4f8b\u5b50\uff1a10.1.12.0/24\uff0c\u9996\u514810\u5f00\u5934\u7684\u662f\u4e00\u4e2aA\u7c7b\u5730\u5740\uff0cA\u7c7b\u5730\u5740\u7684\u9ed8\u8ba4\u63a9\u7801\u662f255.0.0.0\uff08/8\uff09\uff0c\u56e0\u6b6410.1.12.0/24\u7684\u4e3b\u7c7b\u7f51\u7edc\u662f10.0.0.0/8\u300210.1.12.0/24\u88ab\u5305\u542b\u572810.0.0.0/8\u4e4b\u4e2d\u3002 \u56de\u5230\u4e0a\u9762\u7684\u56fe\uff0c\u4ece172.16.0.0/16\u5f00\u59cb\u5f80\u91cc\u8d70\uff0c\u4e0b\u4e00\u4e2a\u770b\u5230\u7684\u7f51\u7edc\u662f172.16.10.0/24\uff0c\u5f88\u660e\u663e\u8fd9\u662f\u5e94\u7528\u4e86VLSM \uff08\u53ef\u53d8\u957f\u5b50\u7f51\u63a9\u7801\uff09\u4e4b\u540e\u5f97\u5230\u7684172.16.0.0/16\u8fd9\u4e2a\u4e3b\u7c7b\u7f51\u7edc\u91cc\u7684\u4e00\u4e2a\u5b50\u7f51\uff08Subnet\uff09\u3002\u6240\u8c13\u5b50\u7f51\uff0c\u6211\u4eec\u53ef\u4ee5\u7406\u89e3\u4e3a\u662f\u5728\u4e00\u4e2a\u7f51\u7edc\u6240\u5c5e\u7c7b\u522b\u7684\u9ed8\u8ba4\u63a9\u7801\u957f\u5ea6\u7684\u57fa\u7840\u4e0a\uff0c\u5c06\u63a9\u7801\u201c\u62c9\u957f\u201d\u6216\u8005\u5411\u4e3b\u673a\u4f4d\u501f\u4f4d\u4ece\u800c\u5f97\u5230\u7684\u4e00\u4e2a\u5b50\u7f51\u7edc\u3002\u5b9e\u9645\u4e0a172.16.0.0/16\u662f\u5c06172.16.10.0/24\u56ca\u62ec\u5728\u5185\u7684\u3002\u90a3\u4e48\u5982\u679c\u6211\u4eec\u6709\u4e00\u4e2aIP\u5730\u5740\uff1a172.16.10.1\uff0c \u5b9e\u9645\u4e0a\u8fd9\u4e2aIP\u5730\u5740\u65e2\u53ef\u4ee5\u7406\u89e3\u4e3a\u5728172.16.0.0/16\u7f51\u7edc\u5185\uff0c\u4e5f\u662f\u5728172.16.10.0/24\u7f51\u7edc\u5185\uff0c\u90a3\u4e48\u8fd9\u4e24\u4e2a\u7f51\u7edc\u5730\u5740\uff0c\u54ea\u4e00\u4e2a\u66f4\u80fd\u7cbe\u786e\u5339\u914d172.16.10.1\u8fd9\u4e2aIP\u5730\u5740\u5462\uff1f\u5f88\u660e\u663e\u662f172.16.10.0/24\u3002 \u5f53\u7136172.16.10.0/24\u8fd8\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5212\u5206\u5b50\u7f51\uff0c\u5f97\u5230172.16.10.0/30\uff0c\u751a\u81f3172.16.10.1/32\uff0c\u90a3\u4e48\u5982\u679c\u8fd9\u4e9b\u524d\u7f00\u90fd\u5b58\u5728\u65f6\uff0c\u5f53\u6211\u8981\u53bb\u67e5\u627e172.16.10.1\uff0c\u8c01\u7684\u5339\u914d\u5ea6\u6700\u9ad8\u5462\uff1f\u5f88\u660e\u663e\uff0c\u662f172.16.10.1/32\u8fd9\u6761\u4e3b\u673a\u524d\u7f00\u3002 \u73b0\u5728\u56de\u5230172.16.0.0/16\u8fd9\u4e2a\u4e3b\u7c7b\u7f51\u7edc\uff0c\u7136\u540e\u5411\u5916\u8d70\u3002172.0.0.0/8\u5b9e\u9645\u4e0a\u662f\u5c06\u8fd9\u4e2aB\u7c7b\u5730\u5740\u7684\u63a9\u7801\u5411\u5de6\u79fb\u4e868bit\uff0c \u6b64\u65f6\u5f97\u5230\u7684\u7f51\u7edc\u5b9e\u9645\u4e0a\u662f\u56ca\u62ec\u4e86172.16.0.0/16\u5728\u5185\u7684\u4e00\u4e2a\u5927\u7684\u7f51\u7edc\uff0c\u6211\u4eec\u79f0\u5176\u4e3a\u8d85\u7f51\u3002 \u4e0b\u9762\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\u6765\u6df1\u5165\u7406\u89e3\u6700\u957f\u5339\u914d\u539f\u5219\uff1a \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u8def\u7531\u8868\u4e00\u5171\u6709\u4e09\u4e2a\u6761\u76ee\uff1a172.16.1.0/24\u3001172.16.2.0/24\u4ee5\u53ca172.16.0.0/16\uff0c\u8fd9\u4e09\u4e2a\u8def\u7531\u6761\u76ee\u5206\u522b\u6307\u5411\u4e0d\u540c\u7684\u51fa\u63a5\u53e3\u3002\u90a3\u4e48\u5f53\u8def\u7531\u5668\u6536\u5230\u53bb\u5f80172.16.2.1\u7684\u6570\u636e\u5305\u65f6\uff0c\u5b83\u8be5\u600e\u4e48\u505a\u51b3\u7b56\u5462\uff1f\u5f88\u7b80\u5355\uff0c \u628a\u4e09\u4e2a\u8def\u7531\u6761\u76ee\u90fd\u5199\u6210\u4e8c\u8fdb\u5236\u683c\u5f0f\uff0c\u5bf9\u5e94\u5404\u81ea\u7684\u7f51\u7edc\u63a9\u7801\uff08\u524d\u7f00\u957f\u5ea6\uff09\uff0c\u63a9\u7801\u4e3a1\u7684\u4f4d\u662f\u9700\u8981\u4e25\u683c\u5339\u914d\u7684\uff0c \u63a9\u7801\u4e3a0\u7684\u4f4d\u5219\u65e0\u6240\u8c13\uff08\u56fe\u4e2d\u6807\u8bc6x\u7684\u4f4d\uff09\u3002\u7136\u540e\u628a\u6570\u636e\u5305\u7684\u76ee\u7684IP\u5730\u5740172.16.2.1\u4e5f\u5199\u6210\u4e8c\u8fdb\u5236\u683c\u5f0f\uff0c\u63a5\u4e0b\u6765\u4e0e\u4e09\u6761\u8def\u7531\u4ece\u5de6\u5f80\u540e\u9010\u4f4d\u5339\u914d\u3002\u5254\u9664\u4e0d\u5339\u914d\u7684\u8def\u7531\u6761\u76ee1\uff0c\u5269\u4e0b\u8def\u7531\u6761\u76ee2\u548c3\uff0c\u7531\u4e8e\u76ee\u7684\u5730\u5740172.16.2.1 \u548c\u8def\u7531\u6761\u76ee172.16.2.0/24\u7684\u5339\u914d\u957f\u5ea6\u6700\u957f\uff0c\u56e0\u6b64\u8def\u7531\u6761\u76ee2\u80dc\u51fa\uff0c\u8be5\u8def\u7531\u7528\u4e8e\u6307\u5bfc\u8def\u7531\u5668\u5982\u4f55\u8f6c\u53d1\u524d\u5f80 172.16.2.1\u7684\u6570\u636e\u3002\u6700\u7ec8\u6570\u636e\u5305\u4ece\u63a5\u53e3S1\u8f6c\u53d1\u51fa\u53bb\u3002\u8fd9\u5c31\u662f\u6700\u957f\u5339\u914d\u539f\u5219\u3002\u4e0b\u9762\u770b\u51e0\u4e2a\u5b8f\u89c2\u7684\u4f8b\u5b50\uff1a \u5728\u4e0a\u56fe\u4e2d\uff0c\u5f53R1\u6536\u5230\u4e00\u4e2a\u53d1\u5f80172.16.1.1\u7684\u6570\u636e\u5305\u65f6\uff0c\u6570\u636e\u5305\u5c06\u547d\u4e2d\u54ea\u4e00\u6761\u8def\u7531\u5462\uff1f\u5b9e\u9645\u4e0a\uff0c172.16.1.1\u662f \u201c\u6389\u843d\u201d\u5728172.16.1.0/24\u53ca172.16.0.0/16\u7f51\u7edc\u4e2d\u7684\uff0c\u4e24\u8005\u8c8c\u4f3c\u7686\u53ef\uff0c\u4f46\u662f172.16.1.0/24\u5339\u914d\u5ea6\u66f4\u957f\uff0c\u56e0\u6b64\uff0c \u6839\u636e\u8def\u7531\u6761\u76ee\u201c172.16.1.0/24\u201d\u7684\u6307\u793a\uff0c\u8fd9\u4e2a\u6570\u636e\u5305\u88ab\u8f6c\u53d1\u7ed9\u4e86R2\u3002 \u518d\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u82e5\u6709\u6570\u636e\u5305\u53bb\u5f80172.16.2.1\u5462\uff1f\u9996\u5148\u8def\u7531\u8868\u4e2d172.16.1.0/24\u8fd9\u6761\u8def\u7531\u80af\u5b9a\u662f\u4e0d\u5339\u914d\u8be5\u76ee\u7684IP \u5730\u5740\u7684\uff0c\u6700\u540e\uff0c172.16.0.0/16\u8fd9\u4e2a\u6761\u76ee\u7684\u5339\u914d\u957f\u5ea6\u6700\u957f\uff0c\u56e0\u6b64\u8def\u7531\u5668\u4f7f\u7528\u8be5\u8def\u7531\u6765\u8f6c\u53d1\u524d\u5f80172.16.2.1\u7684\u6570\u636e\u5305\u3002 \u800c\u5f53\u6709\u6570\u636e\u5305\u53bb\u5f80172.17.1.1\u65f6\uff0c\u7531\u4e8e172.16.1.0/24\u53ca172.16.0.0/16\u8fd9\u4e24\u6761\u8def\u7531\u5747\u4e0d\u5339\u914d\u8be5\u76ee\u7684IP\u5730\u5740\uff0c\u4e8e \u662f\u8def\u7531\u5668\u53ea\u80fd\u201c\u6c42\u52a9\u4e8e\u201d0.0.0.0/0\u8fd9\u6761\u7f3a\u7701\u8def\u7531\uff0c\u5c06\u65e0\u6cd5\u5339\u914d\u4efb\u4f55\u5177\u4f53\u8def\u7531\u7684\u6570\u636e\u5305\u6309\u7167\u9ed8\u8ba4\u8def\u7531\u7684\u6307\u793a\uff0c \u4eceS2\u63a5\u53e3\u8f6c\u53d1\u51fa\u53bb\u3002 \u4e0b\u9762\u603b\u7ed3\u4e00\u4e0b\u8def\u7531\u5668\u5173\u4e8e\u8def\u7531\u67e5\u627e\u7684\u51e0\u4e2a\u5173\u952e\u70b9\uff1a \u4e0d\u540c\u7684\u8def\u7531\u524d\u7f00\uff08\u6ce8\u610f\u8def\u7531\u524d\u7f00\u5305\u542b\u76ee\u7684\u7f51\u7edc\u5730\u5740\u4e0e\u7f51\u7edc\u63a9\u7801\uff0c\u4e24\u8005\u7f3a\u4e00\u4e0d\u53ef\uff09\uff0c\u5728\u8def\u7531\u8868\u4e2d\u5c5e\u4e8e\u4e0d\u540c\u7684\u8def\u7531\u3002\u4f8b\u5982192.168.10.0/24\u53ca192.168.10.0/30\uff0c\u8fd9\u5728\u8def\u7531\u8868\u4e2d\u662f\u4e24\u6761\u4e0d\u540c\u7684\u8def\u7531\u3002 \u76f8\u540c\u7684\u8def\u7531\u524d\u7f00\uff08\u76ee\u7684\u7f51\u7edc\u5730\u5740\u4e0e\u7f51\u7edc\u63a9\u7801\u90fd\u5206\u522b\u76f8\u540c\uff09\uff0c\u5982\u679c\u901a\u8fc7\u4e0d\u540c\u7684\u534f\u8bae\u83b7\u53d6\uff0c\u5219\u5148\u6bd4\u8def\u7531\u7684\u4f18\u5148\u7ea7\uff0c\u4f18\u9009\u4f18\u5148\u7ea7\u503c\u66f4\u5c0f\u7684\u8def\u7531\u52a0\u8f7d\u5230\u8def\u7531\u8868\uff0c\u5982\u679c\u8def\u7531\u6765\u6e90\u4e8e\u76f8\u540c\u7684\u8def\u7531\u534f\u8bae\uff0c\u90a3\u4e48\u5b83\u4eec\u7684\u4f18\u5148\u7ea7\u4fbf\u4f1a\u662f\u76f8\u7b49\u7684\uff0c\u6b64\u65f6\u518d\u6bd4\u8def\u7531\u7684Cost\uff0c\u4f18\u9009Cost\u66f4\u4f18\u7684\u8def\u7531\u52a0\u8f7d\u5230\u8def\u7531\u8868\u3002\u8fd9\u662f\u4e00\u822c\u60c5\u51b5\uff0c\u5f53\u7136\u6709\u4e8c\u822c\u60c5\u51b5\uff0c\u8fd9\u5c31\u8981\u770b\u7279\u5b9a\u7684\u73af\u5883\u548c\u7279\u5b9a\u7684\u8def\u7531\u534f\u8bae\u4e86\u3002 \u8def\u7531\u5668\u9ed8\u8ba4\u91c7\u7528\u6700\u957f\u5339\u914d\u539f\u5219\uff0c\u5728\u5176\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\uff0c\u5e76\u8bd5\u56fe\u627e\u5230\u5339\u914d\u5ea6\u6700\u957f\u7684\u8868\u9879\u3002\u5982\u679c\u627e\u5230\u4e86\u5339\u914d\u7684\u8868\u9879\uff0c\u5219\u8f6c\u53d1\u6570\u636e\u5305\uff1b\u5982\u679c\u6ca1\u6709\u4efb\u4f55\u5177\u4f53\u8def\u7531\u5339\u914d\u8be5\u76ee\u7684IP\u5730\u5740\uff0c\u5219\u6c42\u52a9\u4e8e\u9ed8\u8ba4\u8def\u7531\uff0c \u5982\u679c\u8def\u7531\u8868\u4e2d\u4e0d\u5b58\u5728\u9ed8\u8ba4\u8def\u7531\uff0c\u5219\u53ea\u80fd\u4e22\u5f03\u8be5\u6570\u636e\u5305\u3002 IP\u8def\u7531\u7684\u884c\u4e3a\u662f\u9010\u8df3\u6267\u884c\u7684\uff0c\u56e0\u6b64\u4ece\u6e90\u5230\u76ee\u7684\u7f51\u7edc\u7684\u8def\u5f84\u4e2d\uff0c\u6cbf\u9014\u7684\u6bcf\u4e2a\u8def\u7531\u5668\u90fd\u5fc5\u987b\u62e5\u6709\u5230\u8fbe\u76ee\u7684\u7f51\u7edc\u7684\u8def\u7531\u3002 \u7f51\u7edc\u7684\u901a\u4fe1\u5f80\u5f80\u662f\u53cc\u5411\u7684\uff0c\u56e0\u6b64\u5728\u7f51\u7edc\u4e2d\u8c03\u8bd5\u8bbe\u5907\u7684\u8def\u7531\u529f\u80fd\u65f6\uff0c\u4e00\u822c\u9700\u8003\u8651\u53cc\u5411\u7684\u8def\u7531\u3002 \u52a8\u6001\u8def\u7531\u534f\u8bae\u57fa\u7840","title":"\u8def\u7531\u6c47\u603b\u7684\u6f5c\u5728\u95ee\u9898"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_93","text":"\u8def\u7531\u5668\u662f\u4f9d\u8d56\u81ea\u5df1\u7ef4\u62a4\u7684\u8def\u7531\u8868\u6765\u8fdb\u884c\u6570\u636e\u8f6c\u53d1\u7684\uff0c\u800c\u901a\u5e38\u8def\u7531\u8868\u53c8\u662f\u7531\u8bb8\u591a\u8def\u7531\u6761\u76ee\u6784\u6210\u7684\uff0c\u8def\u7531\u5668\u8981\u5c06\u6570\u636e\u8f6c\u53d1\u5230\u76ee\u7684\u5730\u5c31\u5fc5\u987b\u6709\u8def\u7531\u3002\u4e00\u53f0\u8def\u7531\u5668\u53ef\u4ee5\u4ece\u591a\u79cd\u6765\u6e90\u5b66\u4e60\u8def\u7531\u6761\u76ee\uff1a","title":"\u4e3a\u4ec0\u4e48\u8981\u6709\u52a8\u6001\u8def\u7531\u534f\u8bae"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_94","text":"\u8def\u7531\u5668\u5728\u521d\u59cb\u542f\u52a8\u540e\uff0c\u5982\u679c\u6211\u4eec\u4e3a\u5176\u63a5\u53e3\u914d\u7f6e\u4e86IP\u5730\u5740\uff0c\u5e76\u4e14\u63a5\u53e3\u7684\u7269\u7406\u53ca\u534f\u8bae\u7684\u72b6\u6001\u90fd\u4e3aUP\uff0c\u5219\u8def\u7531\u5668\u80fd\u591f\u81ea\u52a8\u5730\u5b66\u4e60\u5230\u8fbe\u8be5\u63a5\u53e3\u6240\u5728\u7f51\u7edc\u7684\u76f4\u8fde\u8def\u7531\uff0c\u5e76\u5c06\u8fd9\u6761\u76f4\u8fde\u8def\u7531\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\uff0c\u8fd9\u5176\u5b9e\u5f88\u597d\u7406\u89e3\uff0c\u56e0\u4e3a\u8fd9\u662f\u6211\u201c\u5bb6\u95e8\u53e3\u201d\u7684\u7f51\u7edc\u561b\uff0c\u65e0\u9700\u4eba\u4e3a\u5e72\u9884\uff0c\u81ea\u52a8\u5b66\u4e60\u3002","title":"\u76f4\u8fde\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_95","text":"\u8def\u7531\u5668\u5bf9\u4e8e\u5230\u8fbe\u76f4\u8fde\u7f51\u7edc\u7684\u8def\u7531\uff08\u76f4\u8fde\u8def\u7531\uff09\u80fd\u591f\u81ea\u52a8\u5b66\u4e60\uff0c\u53ef\u662f\u5bf9\u4e8e\u5230\u8fbe\u975e\u76f4\u8fde\u7f51\u7edc\u7684\u8def\u7531\u53ef\u5c31\u65e0\u6cd5\u81ea\u52a8\u5b66\u4e60\u4e86\uff0c\u4e00\u79cd\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u901a\u8fc7\u624b\u5de5\u914d\u7f6e\u7684\u65b9\u5f0f\u4e3a\u8def\u7531\u5668\u521b\u5efa\u9759\u6001\u7684\u8def\u7531\u8868\u9879\uff0c\u8fd9\u53eb\u9759\u6001\u8def\u7531\u3002\u9759\u6001\u8def\u7531\u662f\u7f51\u7edc\u7ba1\u7406\u5458\u624b\u5de5\u914d\u7f6e\u7684\uff0c\u56e0\u6b64\u53ef\u7ba1\u7406\u6027\u975e\u5e38\u9ad8\uff0c\u4f46\u662f\u4e5f\u6709\u660e\u663e\u7684\u7f3a\u9677\uff0c\u56e0\u4e3a\u4f60\u8981\u5230\u4e00\u4e2a\u76ee\u7684\u5730\uff0c\u5c31\u5fc5\u987b\u505a\u4e00\u6761\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\uff0c\u90a3\u4e48\u5982\u679c\u7f51\u7edc\u7279\u522b\u5e9e\u5927\u3001\u8bbe\u5907\u6570\u91cf\u7279\u522b\u591a\u5462\uff1f\u5de5\u4f5c\u91cf\u5c31\u76f8\u5f53\u5927\u4e86\uff0c\u8fd9\u662f\u4f4e\u6548\u4e14\u4e0d\u5207\u5b9e\u7684\uff1b\u518d\u8005\u9759\u6001\u8def\u7531\u65e0\u6cd5\u6839\u636e\u7f51\u7edc\u62d3\u6251\u7684\u53d8\u66f4\u505a\u51fa\u52a8\u6001\u54cd\u5e94\uff0c\u56e0\u6b64\u5f53\u7f51\u7edc\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u7ba1\u7406\u5458\u53ef\u80fd\u4e0d\u5f97\u4e0d\u91cd\u65b0\u914d\u7f6e\u6216\u8c03\u6574\u9759\u6001\u8def\u7531\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u8feb\u5207\u9700\u8981\u4e00\u79cd\u52a8\u6001\u7684\u673a\u5236\uff0c\u6765\u5e2e\u52a9\u8def\u7531\u5668\u66f4\u52a0\u7075\u6d3b\u5730\u7ef4\u62a4\u8def\u7531\u4fe1\u606f\u3002","title":"\u9759\u6001\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_96","text":"\u6839\u636e\u4f5c\u7528\u7684\u8303\u56f4\uff0c\u52a8\u6001\u8def\u7531\u534f\u8bae\u53ef\u5206\u4e3a\uff1a \u5185\u90e8\u7f51\u5173\u534f\u8bae\uff08Interior Gateway Protocol\uff0c\u7b80\u79f0IGP\uff09\uff1a\u5728\u4e00\u4e2a\u81ea\u6cbb\u7cfb\u7edf\u5185\u90e8\u8fd0\u884c\u3002 \u5916\u90e8\u7f51\u5173\u534f\u8bae\uff08Exterior Gateway Protocol\uff0c\u7b80\u79f0EGP\uff09\uff1a\u8fd0\u884c\u4e8e\u4e0d\u540c\u81ea\u6cbb\u7cfb\u7edf\u4e4b\u95f4\u3002 BGP\u8def\u7531\u534f\u8bae\u51e0\u4e4e\u662f\u76ee\u524d\u4e1a\u754c\u552f\u4e00\u5728\u4f7f\u7528\u7684EGP\u3002\u7b14\u8005\u5c06\u5728\u672c\u624b\u518c\u7684\u201cBGP\u201d\u4e00\u7ae0\u4e2d\u4ecb\u7ecdBGP\u8def\u7531\u534f\u8bae\u3002 \u6839\u636e\u4f7f\u7528\u7684\u7b97\u6cd5\uff0c\u8def\u7531\u534f\u8bae\u53ef\u5206\u4e3a\uff1a \u8ddd\u79bb\u77e2\u91cf\u534f\u8bae\uff08Distance-Vector\uff09\uff1a\u5178\u578b\u7684\u6709RIP\u548cBGP\u3002\u5176\u4e2d\uff0cBGP\u4e5f\u88ab\u79f0\u4e3a\u8def\u5f84\u77e2\u91cf\u534f\u8bae\uff08Path- Vector\uff09\u3002 \u94fe\u8def\u72b6\u6001\u534f\u8bae\uff08Link-State\uff09\uff1a\u5178\u578b\u7684\u6709OSPF\u548cIS-IS\u3002","title":"\u52a8\u6001\u8def\u7531\u534f\u8bae\u7684\u5206\u7c7b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_97","text":"\u8fd0\u884c\u4e86\u8ddd\u79bb\u77e2\u91cf\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\u76f4\u63a5\u5c06\u81ea\u5df1\u7684\u8def\u7531\u8868\u66f4\u65b0\u7ed9\u76f4\u8fde\u7684\u90bb\u5c45\u8def\u7531\u5668\uff0c\u5e76\u4e14\u8fd9\u4e9b\u8def\u7531\u5668\u5e76\u4e0d\u4e86\u89e3\u6574\u4e2a\u62d3\u6251\u7ed3\u6784\uff0c\u8fd9\u5f88\u5bb9\u6613\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u4ea7\u751f\u8bf8\u5982\u8def\u7531\u73af\u8def\u4e4b\u7c7b\u7684\u95ee\u9898\uff08\u56e0\u6b64\u8ddd\u79bb\u77e2\u91cf\u8def\u7531\u534f\u8bae\u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u9632\u6b62\u73af\u8def\u7684\u7279\u6027\uff09\u3002 \u76f8\u6bd4\u4e4b\u4e0b\uff0c\u8fd0\u884c\u4e86\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\u4e4b\u95f4\u5219\u66f4\u65b0\u7684\u4e0d\u662f\u8def\u7531\u8868\u6216\u8def\u7531\u6761\u76ee\uff0c\u800c\u662f\u5305\u62ec\u5bf9\u94fe\u8def \uff08\u63a5\u53e3\uff09\u7684\u63cf\u8ff0\u5728\u5185\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u88ab\u79f0\u4e3a\u94fe\u8def\u72b6\u6001\u4fe1\u606f\uff0c\u901a\u8fc7\u94fe\u8def\u72b6\u6001\u4fe1\u606f\u7684\u6cdb\u6d2a\uff0c\u8def\u7531\u5668\u641c\u96c6\u8fd9\u4e9b\u4fe1\u606f\u5e76\u5c06\u5176\u88c5\u8f7d\u8fdb\u94fe\u8def\u72b6\u6001\u6570\u636e\u5e93\uff0c\u968f\u540e\u8fd0\u884c\u7279\u5b9a\u7684\u7b97\u6cd5\uff0c\u8ba1\u7b97\u51fa\u4e00\u4e2a\u65e0\u73af\u7684\u62d3\u6251\u3002\u56e0\u6b64\u8fd0\u884c\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\u662f\u77e5\u6653\u7f51\u7edc\u7684\u62d3\u6251\u7ed3\u6784\u7684\u3002 \u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\u5e94\u8be5\u8bf4\u662f\u76ee\u524d\u4e1a\u5185IGP\u5e94\u7528\u7684\u4e3b\u6d41\uff0c\u5176\u4e2d\u6700\u5177\u4ee3\u8868\u6027\u7684\u5f53\u5c5eOSPF\u548cISIS\u3002 OSPF OSPF \u6982\u8ff0 OSPF\u662f\u5178\u578b\u7684\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\uff0c\u4e5f\u662f\u76ee\u524d\u4f7f\u7528\u5f97\u6700\u4e3a\u5e7f\u6cdb\u7684\u52a8\u6001\u8def\u7531\u534f\u8bae\u4e4b\u4e00\u3002\u4e0b\u9762\u6211\u4eec\u5148\u7b80\u7565\u5730\u4e86\u89e3\u4e00\u4e0bOSPF\u7684\u57fa\u672c\u5de5\u4f5c\u8fc7\u7a0b\uff1a","title":"\u5173\u4e8e\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#lsa","text":"\u8fd0\u884c\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\u4e4b\u95f4\u9996\u5148\u4f1a\u57fa\u4e8e\u8def\u7531\u534f\u8bae\u5efa\u7acb\u90bb\u5c45\u5173\u7cfb\uff0c\u4e4b\u540e\u5f7c\u6b64\u4e4b\u95f4\u5f00\u59cb\u4ea4\u4e92LSA \uff08Link State Advertisement\uff0c\u94fe\u8def\u72b6\u6001\u901a\u544a\uff09\uff0c\u6ce8\u610f\u8fd9\u91cc\u4ea4\u4e92\u7684\u4e0d\u662f\u8def\u7531\u4fe1\u606f\uff0c\u800c\u662f\u94fe\u8def\u72b6\u6001\u901a\u544a\uff0c\u8fd9\u4e9bLSA\u6709\u52a9\u4e8e\u8def\u7531\u5668\u8fd8\u539f\u7f51\u7edc\u7684\u62d3\u6251\u7ed3\u6784\u3001\u7f51\u6bb5\u4fe1\u606f\uff0c\u5e76\u4f9d\u636e\u8fd9\u4e9b\u4fe1\u606f\u8ba1\u7b97\u6700\u4f73\u8def\u7531\u3002","title":"LSA\u7684\u6cdb\u6d2a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#lsdb","text":"\u6bcf\u53f0\u8def\u7531\u5668\u90fd\u4f1a\u4ea7\u751fLSA\uff0c\u8def\u7531\u5668\u5c06\u7f51\u7edc\u4e2d\u6240\u6cdb\u6d2a\u7684LSA\u641c\u96c6\u8d77\u6765\u3001\u653e\u5165\u81ea\u5df1\u7684LSDB\uff08Link State DataBase\uff0c\u94fe\u8def\u72b6\u6001\u6570\u636e\u5e93\uff09\uff0c\u6709\u4e86LSDB\uff0c\u8def\u7531\u5668\u4e5f\u5c31\u6e05\u695a\u4e86\u5168\u7f51\u7684\u62d3\u6251\u3002","title":"LSDB\u7684\u7ec4\u5efa"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#spf","text":"\u63a5\u4e0b\u6765\uff0c\u6bcf\u53f0\u8def\u7531\u5668\u57fa\u4e8eLSDB\u3001\u4f7f\u7528SPF\uff08\u6700\u77ed\u8def\u5f84\u7b97\u6cd5\uff09\u8fdb\u884c\u8ba1\u7b97\u3002SPF\u662fOSPF\u8def\u7531\u534f\u8bae\u7684\u4e00\u4e2a\u6838\u5fc3\u7b97\u6cd5\uff0c\u7528\u6765\u5728\u4e00\u4e2a\u590d\u6742\u7684\u7f51\u7edc\u4e2d\u505a\u51fa\u8def\u7531\u4f18\u9009\u7684\u51b3\u7b56\u3002\u7ecf\u8fc7SPF\u7b97\u6cd5\u7684\u8ba1\u7b97\u540e\uff0c\u6bcf\u53f0\u8def\u7531\u5668\u90fd\u8ba1\u7b97\u51fa\u4e00\u68f5\u4ee5\u81ea\u5df1\u4e3a\u6839\u7684\u3001\u65e0\u73af\u7684\u3001\u62e5\u6709\u6700\u77ed\u8def\u5f84\u7684\u201c\u6811\u201d\u3002\u6709\u4e86\u8fd9\u68f5\u201c\u6811\u201d\uff0c\u4e8b\u5b9e\u4e0a\u8def\u7531\u5668\u5c31\u5df2\u7ecf\u77e5\u9053\u4e86\u5230\u8fbe\u7f51\u7edc\u5404\u4e2a\u89d2\u843d\u7684\u6700\u4f18\u8def\u5f84\u3002","title":"SPF\u8ba1\u7b97"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_98","text":"\u6700\u540e\uff0c\u8def\u7531\u5668\u5c06\u8ba1\u7b97\u51fa\u6765\u7684\u6700\u4f18\u8def\u5f84\uff0c\u52a0\u8f7d\u8fdb\u81ea\u5df1\u7684\u8def\u7531\u8868\u3002 OSPF\uff08Open Shortest Path First\uff09\u5f00\u653e\u6700\u77ed\u8def\u5f84\u4f18\u5148\u534f\u8bae\uff0c\u662f\u4e00\u79cd\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\uff0c\u4e5f\u662f\u76ee\u524d\u4e1a\u5185\u4f7f\u7528\u5f97\u6700\u4e3a\u5e7f\u6cdb\u7684IGP\u3002OSPF\u4e2d\u7684\u5b57\u6bcdO\u610f\u4e3aOpen\uff0c\u4e5f\u5c31\u662f\u5f00\u653e\u3001\u516c\u6709\u3002\u4e0e\u8ddd\u79bb\u77e2\u91cf\u8def\u7531\u534f\u8bae\u76f4\u63a5\u4ea4\u4e92\u8def\u7531\u5668\u7684\u8def\u7531\u8868\u4e0d\u540c\uff0cOSPF\u4f5c\u4e3a\u94fe\u8def\u72b6\u6001\u8def\u7531\u534f\u8bae\uff0c\u8def\u7531\u5668\u4e4b\u95f4\u4ea4\u4e92\u7684\u662fLSA\uff0c\u8def\u7531\u5668\u5c06\u7f51\u7edc\u4e2d\u6cdb\u6d2a\u7684LSA\u641c\u96c6\u5230\u81ea\u5df1\u7684LSDB\u4e2d\uff0c\u8fd9\u6709\u52a9\u4e8eOSPF\u7406\u89e3\u6574\u5f20\u7f51\u7edc\u62d3\u6251\uff0c\u5e76\u5728\u6b64\u57fa\u7840\u4e0a\u901a\u8fc7SPF\u7b97\u6cd5\u8ba1\u7b97\u51fa\u4ee5\u81ea\u5df1\u4e3a\u6839\u7684\u3001\u5230\u8fbe\u7f51\u7edc\u5404\u4e2a\u89d2\u843d\u7684\u3001\u65e0\u73af\u7684\u6811\uff0c\u6700\u7ec8\uff0c\u8def\u7531\u5668\u5c06\u8ba1\u7b97\u51fa\u6765\u7684\u8def\u7531\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\u4e2d\u3002 OSPF \u57fa\u672c\u6982\u5ff5","title":"\u7ef4\u62a4\u8def\u7531\u8868"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#router-id","text":"OSPF Router-ID\u7528\u4e8e\u5728OSPF\u57df\u4e2d\u552f\u4e00\u5730\u6807\u8bc6\u4e00\u53f0OSPF\u8def\u7531\u5668\uff0c\u4eceOSPF\u7f51\u7edc\u8bbe\u8ba1\u7684\u89d2\u5ea6\uff0c\u6211\u4eec\u8981\u6c42\u5168 OSPF\u57df\u5185\uff0c\u7981\u6b62\u51fa\u73b0\u4e24\u53f0\u8def\u7531\u5668\u62e5\u6709\u76f8\u540cRouterID\u7684\u60c5\u51b5\u3002 Router-ID\u7684\u683c\u5f0f\u4e0eIPv4\u5730\u5740\u7684\u683c\u5f0f\u76f8\u540c\uff0c\u4f8b\u5982192.168.1.1\u3002Router-ID\u7684\u8bbe\u5b9a\u53ef\u4ee5\u901a\u8fc7\u624b\u5de5\u914d\u7f6e\u7684\u65b9\u5f0f\u8fdb\u884c\uff0c \u6216\u8005\u901a\u8fc7\u534f\u8bae\u81ea\u52a8\u9009\u53d6\u7684\u65b9\u5f0f\u8fdb\u884c\u3002\u5f53\u7136\uff0c\u5728\u5b9e\u9645\u7f51\u7edc\u90e8\u7f72\u4e2d\uff0c\u5f3a\u70c8\u5efa\u8bae\u7f51\u7edc\u7ba1\u7406\u5458\u624b\u5de5\u914d\u7f6eOSPF\u7684Router-ID\uff0c\u56e0\u4e3a\u8fd9\u5173\u7cfb\u5230\u534f\u8bae\u7684\u7a33\u5b9a\u6027\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4f1a\u5c06\u8def\u7531\u5668\u7684Router-ID\u6307\u5b9a\u4e3a\u8be5\u8bbe\u5907\u4e0a\u7684\u67d0\u4e2a Loopback\u63a5\u53e3\u5730\u5740\u3002","title":"Router-ID"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#cost","text":"OSPF\u4f7f\u7528\u5f00\u9500\uff08Cost\uff09\u4f5c\u4e3a\u8def\u7531\u5ea6\u91cf\u503c\u3002\u9996\u5148\uff0c\u6bcf\u4e00\u4e2a\u6fc0\u6d3bOSPF\u7684\u63a5\u53e3\u90fd\u6709\u4e00\u4e2a\u63a5\u53e3\u7684Cost\u503c\u3002OSPF \u63a5\u53e3Cost=100M / \u63a5\u53e3\u5e26\u5bbd\uff0c\u5176\u4e2d100M\u4e3aOSPF\u7684\u53c2\u8003\u5e26\u5bbd\uff08Reference-Bandwidth\uff09\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u63a5\u53e3\u7684\u5e26\u5bbd\u8d8a\u9ad8\uff0c\u8be5\u63a5\u53e3\u7684OSPF Cost\u8d8a\u5c0f\u3002\u4e00\u6761OSPF\u8def\u7531\u7684Cost\u7531\u8be5\u8def\u7531\u4ece\u8def\u7531\u7684\u8d77\u6e90\u4e00\u8def\u5230\u8fbe\u672c\u5730\u7684\u6240\u6709\u5165\u63a5\u53e3Cost\u503c\u7684\u603b\u548c\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5bf9\u4e8eR2\u800c\u8a00\uff0c\u5176\u5230\u8fbeR1\u7684\u76f4\u8fde\u7f51\u7edc1.1.1.0/24\u7684OSPF\u8def\u7531\u7684Cost\u503c\u4e3aR1-GE0/0/0\u63a5\u53e3\u7684Cost \u52a0\u4e0aR2-S4/0/0\u63a5\u53e3\u7684Cost\uff0c\u4e5f\u5c31\u662f1+50=51\u3002\u76f8\u5bf9\u7684\uff0cR3\u5982\u679c\u901a\u8fc7OSPF\u5b66\u4e60\u52301.1.1.0/24\u8def\u7531\uff0c\u8be5\u8def\u7531\u7684 Cost\u503c\u5c31\u662f1+50+1=52\u3002 \u53e6\u5916\uff0c\u7531\u4e8e\u9ed8\u8ba4\u7684\u53c2\u8003\u5e26\u5bbd\u662f100M\uff0c\u8fd9\u610f\u5473\u7740\u66f4\u9ad8\u5e26\u5bbd\u7684\u4f20\u8f93\u4ecb\u8d28\uff08\u9ad8\u4e8e100M\uff09\u5728OSPF\u534f\u8bae\u4e2d\u5c06\u4f1a\u8ba1\u7b97\u51fa\u4e00\u4e2a\u5c0f\u4e8e1\u7684\u5206\u6570\uff0c\u8fd9\u5728OSPF\u534f\u8bae\u4e2d\u662f\u4e0d\u5141\u8bb8\u7684\uff08\u4f1a\u88ab\u56db\u820d\u4e94\u5165\u4e3a1\uff09\u3002\u800c\u73b0\u4eca\u7f51\u7edc\u8bbe\u5907\u6ee1\u5730\u90fd\u662f\u5927\u4e8e 100M\u5e26\u5bbd\u7684\u63a5\u53e3\uff0c\u8fd9\u65f6\u5019\u8def\u7531COST\u7684\u8ba1\u7b97\u5176\u5b9e\u5c31\u4e0d\u7cbe\u786e\u4e86\u3002\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528**bandwidth-reference**\u547d\u4ee4\u4fee\u6539\uff0c\u4f46\u662f\u8fd9\u6761\u547d\u4ee4\u8981\u8c28\u614e\u4f7f\u7528\uff0c\u4e00\u65e6\u8981\u914d\u7f6e\uff0c\u5219\u5efa\u8bae\u5168\u7f51OSPF\u8def\u7531\u5668\u90fd\u914d\u7f6e\u3002","title":"Cost"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_99","text":"OSPF\u4e00\u5171\u6709\u4e94\u79cd\u62a5\u6587\uff0c\u5404\u6709\u5404\u7684\u7528\u9014\uff1a","title":"\u62a5\u6587\u7c7b\u578b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf","text":"","title":"OSPF\u7684\u4e09\u5f20\u8868"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#peer-table","text":"\u8def\u7531\u5668\u7684OSPF\u90bb\u5c45\u8868\u91cc\u5b58\u653e\u7684\u662f\u8be5\u8def\u7531\u5668\u53d1\u73b0\u7684\u3001\u76f4\u8fde\u94fe\u8def\u4e0a\u7684OSPF\u90bb\u5c45\u3002\u53ea\u6709\u76f4\u8fde\u7684\u8def\u7531\u5668\u4e4b\u95f4\u624d\u80fd\u591f\u5efa\u7acbOSPF\u90bb\u5c45\u5173\u7cfb\u3002OSPF\u901a\u8fc7Hello\u62a5\u6587\u53d1\u73b0\u76f4\u8fde\u94fe\u8def\u4e0a\u7684\u90bb\u5c45\u3002","title":"\u90bb\u5c45\u8868\uff08Peer table\uff09\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#lsdblink-state-database","text":"OSPF\u7528LSA\u6765\u63cf\u8ff0\u7f51\u7edc\u62d3\u6251\u4fe1\u606f\u3001\u7f51\u6bb5\u4fe1\u606f\u6216\u8def\u7531\u4fe1\u606f\u3002\u8def\u7531\u5668\u7528LSDB\u6765\u5b58\u50a8\u7f51\u7edc\u4e2d\u7684LSA\u3002OSPF \u5c06\u81ea\u5df1\u4ea7\u751f\u7684\u4ee5\u53ca\u90bb\u5c45\u901a\u544a\u7684LSA\u641c\u96c6\u5e76\u5b58\u50a8\u5728LSDB\u4e2d\uff0c\u7136\u540e\u57fa\u4e8e\u8fd9\u4e9b\u6570\u636e\uff0c\u8fd0\u884cSPF\u7b97\u6cd5\u5e76\u6700\u7ec8\u5f97\u5230\u4e00\u68f5\u65e0\u73af\u7684\u6811\u3002\u638c\u63e1LSDB\u7684\u67e5\u770b\u4ee5\u53ca\u5bf9LSA\u7684\u6df1\u5165\u5206\u6790\u624d\u80fd\u591f\u6df1\u5165\u7406\u89e3OSPF\u3002","title":"\u94fe\u8def\u72b6\u6001\u6570\u636e\u5e93LSDB\uff08Link-state Database\uff09\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospfrouting-table","text":"\u57fa\u4e8eLSDB\u8fdb\u884cSPF\u8ba1\u7b97\u540e\u5f97\u51fa\u7684OSPF\u8def\u7531\u88ab\u52a0\u8f7d\u5230OSPF\u8def\u7531\u8868\u4e2d\u3002","title":"OSPF\u8def\u7531\u8868\uff08Routing table\uff09\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf_1","text":"OSPF\u90bb\u5c45\u5173\u7cfb\u7684\u5efa\u7acb\u8fc7\u7a0b\u662f\u6211\u4eec\u5728\u5b66\u4e60OSPF\u8fc7\u7a0b\u4e2d\u7684\u4e00\u4e2a\u91cd\u70b9\uff0c\u800c\u4e14\u975e\u5e38\u5177\u6709\u7814\u7a76\u4ef7\u503c\uff0c\u5c31OSPF\u7684\u5b9e\u9645\u90e8\u7f72\u800c\u8a00\uff0c\u638c\u63e1\u8fd9\u91cc\u5934\u7684\u673a\u5236\u4e5f\u662f\u5f88\u6709\u5fc5\u8981\u7684\uff0c\u56e0\u4e3a\u90bb\u5c45\u5173\u7cfb\u7684\u5efa\u7acb\u662fOSPF\u5de5\u4f5c\u7684\u57fa\u672c\uff0c\u5982\u679c\u8fde\u90bb\u5c45\u5173\u7cfb\u90fd\u5efa\u7acb\u4e0d\u8d77\u6765\uff0c\u5c31\u522b\u8c08\u5176\u4ed6\u7684\u4e86\u3002\u5728\u5b9e\u9645\u4e1a\u52a1\u90e8\u7f72\u4e2d\uff0c\u53ef\u80fd\u4f1a\u78b0\u5230\u5404\u79cd\u95ee\u9898\u5bfc\u81f4OSPF\u90bb\u5c45\u5173\u7cfb\u65e0\u6cd5\u6b63\u5e38\u5efa\u7acb\uff0c\u56e0\u6b64\u8fd9\u4e2a\u5185\u5bb9\u975e\u5e38\u503c\u5f97\u63a8\u6572\u3002 \u672c\u6587\u63cf\u8ff0\u6570\u636e\u901a\u4fe1\u57fa\u7840\u6027\u77e5\u8bc6\uff0c\u56e0\u6b64\u66f4\u52a0\u6df1\u5165\u7684\u5185\u5bb9\u6682\u4e0d\u6d89\u53ca\u3002","title":"OSPF\u90bb\u5c45\u5173\u7cfb\u5efa\u7acb\u8fc7\u7a0b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf_2","text":"\u4e00\u65e6\u6211\u4eec\u5728\u8def\u7531\u5668\u7684\u67d0\u4e2a\u63a5\u53e3\u4e0a\u6fc0\u6d3b\u4e86OSPF\uff0c\u90a3\u4e48\u8def\u7531\u5668\u5c06\u4f1a\u6839\u636e\u8fd9\u4e2a\u63a5\u53e3\u7684\u6570\u636e\u94fe\u8def\u5c42\u5c01\u88c5\u534f\u8bae\uff0c\u9009\u62e9\u5bf9\u5e94\u7684OSPF\u7f51\u7edc\u7c7b\u578b\u5e76\u8fdb\u884c\u5de5\u4f5c\uff0c\u6ce8\u610f\uff0c\u9488\u5bf9\u4e0d\u540c\u7684\u7f51\u7edc\u7c7b\u578b\uff0cOSPF\u5728\u63a5\u53e3\u4e0a\u7684\u64cd\u4f5c\u5c06\u6709\u6240\u4e0d\u540c\u3002\u56e0\u6b64\u7b80\u5355\u5730\u8bf4\uff0cOSPF\u7f51\u7edc\u7c7b\u578b\u5b9e\u9645\u4e0a\u662fOSPF\u7684\u4e00\u4e2a\u63a5\u53e3\u7ea7\u522b\u7684\u5c5e\u6027\uff0c\u5b83\u5c06\u5f71\u54cdOSPF\u5728\u8be5\u63a5\u53e3\u4e0a\u7684\u64cd\u4f5c\u3002","title":"OSPF\u7f51\u7edc\u7c7b\u578b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf_3","text":"\u70b9\u5230\u70b9\u7f51\u7edc\uff08Point-To-Point Network\uff09 \u5e7f\u64ad\u578b\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\uff08Broadcast Multiple Access Network\uff09 \u975e\u5e7f\u64ad\u578b\u591a\u8def\u8bbf\u95ee\u7f51\u8def\uff08Non-Broadcast Multiple Access Network\uff09 \u70b9\u5230\u591a\u70b9\u7f51\u7edc\uff08Point-To- MultiplePoint Network\uff09","title":"OSPF\u652f\u6301\u7684\u7f51\u7edc\u7c7b\u578b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_100","text":"\u7f51\u7edc\u7c7b\u578b \u542b\u4e49 \u5e7f\u64ad\u7c7b\u578b \u5f53\u94fe\u8def\u5c42\u534f\u8bae\u662fEthernet\u3001FDDI\u65f6\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cOSPF\u8ba4\u4e3a\u7f51\u7edc\u7c7b\u578b \u662fBroadcast\u3002\u5728\u8be5\u7c7b\u578b\u7684\u7f51\u7edc\u4e2d\uff1a \u901a\u5e38\u4ee5\u7ec4\u64ad\u5f62\u5f0f\u53d1\u9001Hello\u62a5\u6587\u3001LSU\u62a5\u6587\u548cLSAck\u62a5\u6587\u3002\u5176\u4e2d\uff0c 224.0.0.5\u7684\u7ec4\u64ad\u5730\u5740\u4e3aOSPF\u8bbe\u5907\u7684\u9884\u7559IP\u7ec4\u64ad\u5730\u5740\uff1b224.0.0.6\u7684\u7ec4\u64ad\u5730\u5740\u4e3aOSPF DR/BDR\u7684\u9884\u7559IP\u7ec4\u64ad\u5730\u5740\u3002 \u4ee5\u5355\u64ad\u5f62\u5f0f\u53d1\u9001DD\u62a5\u6587\u548cLSR\u62a5\u6587\u3002 NBMA\u7c7b\u578b \u5f53\u94fe\u8def\u5c42\u534f\u8bae\u662f\u5e27\u4e2d\u7ee7\u3001X.25\u65f6\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cOSPF\u8ba4\u4e3a\u7f51\u7edc\u7c7b\u578b\u662f NBMA\u3002 \u5728\u8be5\u7c7b\u578b\u7684\u7f51\u7edc\u4e2d\uff0c\u4ee5\u5355\u64ad\u5f62\u5f0f\u53d1\u9001\u534f\u8bae\u62a5\u6587\uff08Hello\u62a5\u6587\u3001DD\u62a5\u6587\u3001 LSR\u62a5\u6587\u3001LSU\u62a5\u6587\u3001LSAck\u62a5\u6587\uff09\u3002 \u70b9\u5230\u591a\u70b9P2MP\u7c7b\u578b \u6ca1\u6709\u4e00\u79cd\u94fe\u8def\u5c42\u534f\u8bae\u4f1a\u88ab\u7f3a\u7701\u7684\u8ba4\u4e3a\u662fPoint-to-Multipoint\u7c7b\u578b\u3002\u70b9\u5230\u591a \u70b9\u5fc5\u987b\u662f\u7531\u5176\u4ed6\u7684\u7f51\u7edc\u7c7b\u578b\u5f3a\u5236\u66f4\u6539\u7684\u3002\u5e38\u7528\u505a\u6cd5\u662f\u5c06\u975e\u5168\u8fde\u901a\u7684 NBMA\u6539\u4e3a\u70b9\u5230\u591a\u70b9\u7684\u7f51\u7edc\u3002\u5728\u8be5\u7c7b\u578b\u7684\u7f51\u7edc\u4e2d\uff1a \u4ee5\u7ec4\u64ad\u5f62\u5f0f\uff08224.0.0.5\uff09\u53d1\u9001Hello\u62a5\u6587\u3002 \u4ee5\u5355\u64ad\u5f62\u5f0f\u53d1\u9001\u5176\u4ed6\u534f\u8bae\u62a5\u6587\uff08DD\u62a5\u6587\u3001LSR\u62a5\u6587\u3001LSU\u62a5\u6587\u3001 LSAck\u62a5\u6587\uff09\u3002 \u70b9\u5230\u70b9P2P\u7c7b\u578b \u5f53\u94fe\u8def\u5c42\u534f\u8bae\u662fPPP\u3001HDLC\u548cLAPB\u65f6\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cOSPF\u8ba4\u4e3a\u7f51\u7edc \u7c7b\u578b\u662fP2P\u3002 \u5728\u8be5\u7c7b\u578b\u7684\u7f51\u7edc\u4e2d\uff0c\u4ee5\u7ec4\u64ad\u5f62\u5f0f\uff08224.0.0.5\uff09\u53d1\u9001\u534f\u8bae\u62a5\u6587\uff08Hello\u62a5\u6587\u3001DD\u62a5\u6587\u3001LSR\u62a5\u6587\u3001LSU\u62a5\u6587\u3001LSAck\u62a5\u6587\uff09\u3002 \u5982\u679c\u4e00\u4e2a\u63a5\u53e3\u662f\u4ee5\u592a\u7f51\u63a5\u53e3\uff0c\u90a3\u4e48\u8be5\u63a5\u53e3\u6fc0\u6d3bOSPF\u540e\uff0c\u5176\u7f3a\u7701\u7684OSPF\u7f51\u7edc\u7c7b\u578b\u4e3aBroadcast\uff0c\u4e5f\u5c31\u662f\u5e7f\u64ad\u578b\u3002\u800c\u5982\u679c\u4e00\u4e2a\u63a5\u53e3\u662fSerial\u63a5\u53e3\uff0c\u4e8c\u5c42\u5c01\u88c5\u4e3aHDLC\u6216\u8005PPP\uff0c\u90a3\u4e48\u6fc0\u6d3bOSPF\u540e\uff0c\u5176\u7f3a\u7701\u7684OSPF\u7f51\u7edc\u7c7b\u578b\u5c31\u662fP2P\uff08Point-to-Point\uff0c\u70b9\u5bf9\u70b9\uff09\u3002\u63a5\u53e3\u7684OSPF\u7f51\u7edc\u7c7b\u578b\u662f\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u4fee\u6539\u7684\u3002","title":"\u5e38\u89c1\u6570\u636e\u94fe\u8def\u5c42\u534f\u8bae\u5bf9\u5e94\u7684\u9ed8\u8ba4\u7f51\u7edc\u7c7b\u578b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#drbdr","text":"MA\uff08Multi-Access\uff0c\u591a\u8def\u8bbf\u95ee\uff09\u7f51\u7edc\u6307\u7684\u662f\u4e00\u4e2a\u53ef\u4ee5\u540c\u65f6\u63a5\u5165\u591a\u4e2a\u8282\u70b9\u7684\u7f51\u7edc\uff0c\u5728\u8fd9\u4e2a\u73af\u5883\u4e2d\uff0c\u4efb\u4f55\u4e00\u4e2a\u8282\u70b9\u90fd\u80fd\u901a\u8fc7\u8fd9\u4e2a\u7f51\u7edc\u8bbf\u95ee\u5176\u4ed6\u8282\u70b9\u3002MA\u7f51\u7edc\u53ef\u4ee5\u5206\u4e3aBMA\uff08Broadcast Multi-Access\uff0c\u5e7f\u64ad\u578b\u591a\u8def\u8bbf\u95ee\uff09\u7f51\u7edc\u548cNBMA\uff08Non-Broadcast Multiple Access\uff0c\u975e\u5e7f\u64ad\u578b\u591a\u8def\u8bbf\u95ee\uff09\u7f51\u7edc\u3002\u5bf9\u4e8eBMA\u7f51\u7edc\uff0c\u5178\u578b\u7684\u4ee3\u8868\u662f\u4ee5\u592a\u7f51\uff0c\u800c\u5bf9\u4e8eNBMA\uff0c\u5178\u578b\u7684\u4ee3\u8868\u662f\u5e27\u4e2d\u7ee7\u3002 \u6211\u4eec\u4ee5\u4ee5\u592a\u7f51\u4e3a\u4f8b\uff0c\u4f8b\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6240\u6709\u7684\u8def\u7531\u5668\u90fd\u8fde\u63a5\u5728\u540c\u4e00\u53f0\u4ee5\u592a\u7f51\u4e8c\u5c42\u4ea4\u6362\u673a\u4e0a\uff08\u56fe\u7247\u4e2d\u5e76\u6ca1\u6709\u7ed8\u5236\u51fa\u4ea4\u6362\u673a\uff09\uff0c\u5e76\u4e14\u5c5e\u4e8e\u76f8\u540c\u7684VLAN\uff0c\u800c\u4e14\u89c4\u5212\u76f8\u540c\u7684IP\u7f51\u6bb5\uff0c\u5728\u8fd9\u4e2a\u73af\u5883\u4e2d\uff0c\u4efb\u4f55\u4e00\u53f0\u8def\u7531\u5668\u90fd\u80fd\u901a\u8fc7\u63a5\u5165\u8be5\u4ea4\u6362\u673a\u7684\u63a5\u53e3\u8bbf\u95ee\u5176\u4ed6\u8def\u7531\u5668\uff0c\u8fd9\u5c31\u662f\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\u7684\u4f53\u73b0\u3002\u6b64\u5916\u8fd9\u4e2a\u7f51\u7edc\u8fd8\u652f\u6301\u5e7f\u64ad\u3002\u5728\u8fd9\u4e2a\u7f51\u7edc\u4e2d\uff0c\u5982\u679c\u5c06\u6240\u6709\u8def\u7531\u5668\u7684\u63a5\u53e3\u90fd\u6fc0\u6d3bOSPF\u5e76\u4e14\u8fd9\u4e9b\u63a5\u53e3\u4e24\u4e24\u5efa\u7acbOSPF\u90bb\u5c45\u5173\u7cfb\uff0c\u90a3\u4e48\u8fd9\u5c31\u610f\u5473\u7740\u7f51\u7edc\u4e2d\u5171\u6709\uff1a","title":"DR\u3001BDR"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nn-12","text":"\u8fd9\u4e48\u591a\u4e2aOSPF\u90bb\u5c45\u5173\u7cfb\uff0c\u7ef4\u62a4\u5982\u6b64\u591a\u7684\u90bb\u5c45\u5173\u7cfb\u4e0d\u4ec5\u4f1a\u5bf9\u8bbe\u5907\u6027\u80fd\u9020\u6210\u5f71\u54cd\uff0c\u66f4\u589e\u52a0\u4e86\u7f51\u7edc\u4e2dLSA\u7684\u6cdb\u6d2a\u6570\u91cf\uff0c\u5982\u4e0a\u56fe\uff08\u53f3\uff09\u6240\u793a\u3002 \u4e3a\u51cf\u5c11MA\u7f51\u7edc\u4e2d\u7684OSPF\u6d41\u91cf\u3001\u4f18\u5316OSPF\u90bb\u5c45\u5173\u7cfb\u7ed3\u6784\uff0cOSPF\u4f1a\u5728\u6bcf\u4e00\u4e2aMA\u7f51\u7edc\u4e2d\u9009\u4e3e\u4e00\u4e2a\u6307\u5b9a\u8def\u7531\u5668 (DR) \u548c\u4e00\u4e2a\u5907\u7528\u6307\u5b9a\u8def\u7531\u5668 (BDR)\u3002 DR\u9009\u4e3e\u89c4\u5219\uff1a\u5728\u4e00\u4e2aMA\u7f51\u7edc\u4e2d\uff0c\u6700\u9ad8OSPF\u63a5\u53e3\u4f18\u5148\u7ea7\u7684\u62e5\u6709\u8005\u88ab\u9009\u4f5cDR\uff0c\u5982\u679c\u4f18\u5148\u7ea7\u76f8\u7b49\uff08\u9ed8\u8ba4\u503c\u4e3a1\uff09\uff0c\u5219\u5177\u6709\u6700\u9ad8\u7684OSPF Router-ID\u7684\u8def\u7531\u5668\u88ab\u9009\u4e3e\u6210DR\u3002DR\u5177\u6709\u975e\u62a2\u5360\u6027\uff0c\u4e5f\u5c31\u662f\u8bf4\u5982\u679c\u8be5MA \u7f51\u7edc\u4e2d\u5df2\u7ecf\u9009\u4e3e\u51fa\u4e86DR\uff0c\u90a3\u4e48\u540e\u7eed\u5373\u4f7f\u6709\u5177\u5907\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u8bbe\u5907\u52a0\u5165\uff0c\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u5f53\u524dDR\u7684\u89d2\u8272\u3002 \u6307\u5b9a\u8def\u7531\u5668 (DR)\uff1aDR\u8d1f\u8d23\u4fa6\u542cMA\u7f51\u7edc\u4e2d\u7684\u62d3\u6251\u53d8\u66f4\u4fe1\u606f\u5e76\u5c06\u53d8\u66f4\u4fe1\u606f\u901a\u77e5\u7ed9\u5176\u4ed6\u8def\u7531\u5668\uff0c\u540c\u65f6\u8d1f\u8d23\u4ee3\u8868\u8be5MA\u7f51\u7edc\u53d1\u9001Type-2 LSA\u3002\u5728\u4e00\u4e2aMA\u7f51\u7edc\u4e2d\uff0c\u6240\u6709\u7684OSPF\u8def\u7531\u5668\u90fd\u4e0eDR\uff08\u4ee5\u53caBDR\uff09\u5efa\u7acb\u5168\u6bd7\u90bb\u7684OSPF\u90bb\u63a5\u5173\u7cfb\u3002 \u5907\u7528\u6307\u5b9a\u8def\u7531\u5668 (BDR)\uff1aBDR\u4f1a\u76d1\u63a7DR\u7684\u72b6\u6001\uff0c\u5e76\u5728\u5f53\u524dDR\u53d1\u751f\u6545\u969c\u65f6\u63a5\u66ff\u5176\u89d2\u8272\u3002 \u6ce8\u610f\uff1aDR\u53caBDR\u7684\u8eab\u4efd\u72b6\u6001\u662f\u57fa\u4e8eOSPF\u63a5\u53e3\u7684\uff0c\u6240\u4ee5\u5982\u679c\u6211\u4eec\u8bf4\uff1a\u201c\u8fd9\u53f0\u8def\u7531\u5668\u662fDR\u201d\uff0c\u90a3\u4e48\u8fd9\u79cd\u8bf4\u6cd5\u662f\u4e0d\u4e25\u8c28\u7684\uff0c\u4e25\u683c\u7684\u8bf4\uff0c\u5e94\u8be5\u662f\uff1a\u201c\u8fd9\u53f0\u8def\u7531\u5668\u7684\u8fd9\u4e2a\u63a5\u53e3\uff0c\u5728\u8fd9\u4e2aMA\u7f51\u7edc\u4e0a\u662fDR\u201d\u3002 \u5728\u4e00\u4e2aMA\u7f51\u7edc\u4e2d\uff0c\u6240\u6709\u7684DRother\u8def\u7531\u5668\uff08\u65e2\u975eDR\uff0c\u53c8\u975eBDR\uff09\u5747\u53ea\u4e0eDR\u548cBDR\u5efa\u7acb\u5168\u6bd7\u90bb\u7684\u90bb\u63a5\u5173\u7cfb\uff0cDRother\u95f4\u4e0d\u5efa\u7acb\u90bb\u63a5\u5173\u7cfb\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u8be5MA\u7f51\u7edc\u4e2d\u7684\u8bbe\u5907\u9700\u8981\u7ef4\u62a4\u7684OSPF\u90bb\u5c45\u5173\u7cfb\u6570\u91cf\u5927\u5e45\u51cf\u5c0f\uff1aM= (n-2)\u00d72+1\uff0c\u8bbe\u5907\u6027\u80fd\u4e5f\u4f1a\u5f97\u5230\u4f18\u5316\u3002 OSPF\u5728Broadcast\u53caNBMA\u7f51\u7edc\u4e2d\u90fd\u4f1a\u9009\u4e3eDR\uff0c\u4f46\u662f\u5728P2P\u6216P2MP\u7f51\u7edc\u4e2d\u5219\u4e0d\u4f1a\u3002\u63a5\u4e0b\u53bb\u770b\u770b\u5728MA\u7f51\u7edc\u4e2d\uff0c\u6709\u4e86DR\u3001BDR\u4e4b\u540e\uff0cLSA\u7684\u6cdb\u6d2a\u8fc7\u7a0b\uff1a \u5047\u8bbe\u7f51\u7edc\u5df2\u7ecf\u5b8c\u6210\u4e86OSPF\u6536\u655b\uff0c\u73b0\u5728\u7a81\u7136R3\u4e0b\u6302\u7684\u4e00\u4e2a\u7f51\u7edc\u53d1\u751f\u4e86\u6545\u969c\uff1b \u8def\u7531\u5668R3\u7528224.0.0.6\uff08\u5373R3\u4ee5\u8be5\u7ec4\u64ad\u5730\u5740\u4e3a\u76ee\u7684IP\u5730\u5740\uff0c\u53d1\u9001OSPF\u62a5\u6587\uff09\u901a\u77e5DR\u53caBDR\uff1b DR\u3001BDR\u76d1\u542c224.0.0.6\u8fd9\u4e00\u7ec4\u64ad\u5730\u5740\uff0c\u83b7\u77e5\u4e86\u8be5\u66f4\u65b0\uff1b DR\u5411\u7ec4\u64ad\u5730\u5740224.0.0.5\u53d1\u9001\u66f4\u65b0\u4ee5\u901a\u77e5\u5176\u5b83\u8def\u7531\u5668\uff1b \u6240\u6709\u7684OSPF\u8def\u7531\u5668\u76d1\u542c224.0.0.5\u8fd9\u4e00\u7ec4\u64ad\u5730\u5740\uff1b \u8def\u7531\u5668\u6536\u5230\u5305\u542b\u53d8\u5316\u540e\u7684LSA\u7684\u66f4\u65b0\u540e\uff0c\u5237\u65b0\u81ea\u5df1\u7684LSDB\uff0c\u8fc7\u4e00\u6bb5\u65f6\u95f4(SPF\u5ef6\u8fdf)\uff0c\u5bf9\u66f4\u65b0\u7684\u94fe\u8def\u72b6\u6001\u6570\u636e\u5e93\u6267\u884cSPF\u7b97\u6cd5\uff0c\u5fc5\u8981\u65f6\u66f4\u65b0\u8def\u7531\u8868\u3002 OSPF\u4f7f\u7528\u4e24\u4e2a\u77e5\u540d\u7684\u7ec4\u64ad\u5730\u5740\uff1a224.0.0.5\u53ca224.0.0.6\uff0c\u8fd9\u662f\u4e00\u4e2a\u5e38\u8bc6\uff0c\u9700\u719f\u8bb0\u3002\u6240\u6709\u7684OSPF\u8def\u7531\u5668\uff08\u7684\u63a5\u53e3\uff09\u90fd\u4f1a\u4fa6\u542c\u53d1\u5411224.0.0.5\u7684\u62a5\u6587\uff0c\u5728\u6b64\u57fa\u7840\u4e4b\u4e0a\uff0cDR/BDR\u4f1a\u4fa6\u542c224.0.0.6\u3002","title":"n(n-1)/2"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf-area","text":"","title":"OSPF \u533a\u57df\uff08Area\uff09\u7684\u6982\u5ff5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_101","text":"\u8bbe\u60f3\u4e00\u4e0b\uff0c\u5982\u679cOSPF\u6ca1\u6709\u591a\u533a\u57df\u7684\u6982\u5ff5\uff0c\u6216\u8005\u6574\u4e2aOSPF\u7f51\u7edc\u5c31\u662f\u4e00\u4e2a\u533a\u57df\uff0c\u90a3\u4e48\u4f1a\u6709\u4ec0\u4e48\u95ee\u9898\uff1f\u5728\u4e00\u4e2a\u533a\u57df\u5185\uff0cLSA\u4f1a\u88ab\u6cdb\u6d2a\u5230\u6574\u4e2a\u533a\u57df\uff0c\u6bcf\u4e00\u53f0\u8def\u7531\u5668\u90fd\u4f1a\u6536\u5230\u533a\u57df\u5185\u7684LSA\u5e76\u4e14\u5b58\u50a8\u5728\u81ea\u5df1\u7684LSDB \u4e2d\uff0cOSPF\u89c4\u5b9a\u540c\u5c5e\u4e8e\u4e00\u4e2a\u533a\u57df\u7684\u8def\u7531\u5668\u5fc5\u987b\u6709\u7edf\u4e00\u7684LSDB\uff0c\u56e0\u4e3a\u53ea\u6709\u8fd9\u6837\u624d\u80fd\u591f\u8ba9OSPF\u8fdb\u884c\u51c6\u786e\u7684\u8ba1\u7b97\u3002 \u5982\u679c\u7f51\u7edc\u89c4\u6a21\u7279\u522b\u5927\uff0c\u5bb9\u7eb3\u7684\u8def\u7531\u5668\u6570\u91cf\u7279\u522b\u591a\uff0c\u5219\u533a\u57df\u5185\u6cdb\u6d2a\u7684LSA\u6570\u91cf\u5c31\u4f1a\u7279\u522b\u591a\uff0c\u90a3\u4e48\u6240\u6709\u7684\u8def\u7531\u5668\u5c06\u4e0d\u5f97\u4e0d\u7ef4\u62a4\u4e00\u4e2a\u5e9e\u5927\u7684LSDB\uff0c\u663e\u7136\u8fd9\u589e\u52a0\u4e86\u8def\u7531\u5668\u7684\u8d44\u6e90\u6d88\u8017\u3002\u53e6\u5916\uff0c\u4e00\u65e6\u7f51\u7edc\u4e2d\u53d1\u751f\u62d3\u6251\u53d8\u66f4\uff0c\u5219\u53c8\u5c06\u5f15\u53d1\u5927\u91cf\u7684LSA\u6cdb\u6d2a\uff0c\u540c\u65f6\u6240\u6709\u7684\u8def\u7531\u5668\u53c8\u8981\u91cd\u65b0\u7684\u8fdb\u884cSPF\u8ba1\u7b97\u3002\u540c\u65f6\uff0c\u6bcf\u53f0\u8def\u7531\u5668\u90fd\u9700\u8981\u7ef4\u62a4\u7684\u8def\u7531\u8868\u8d8a\u6765\u8d8a\u5927\uff0c\u56e0\u4e3a\u5355\u533a\u57df\u5185\u8def\u7531\u65e0\u6cd5\u5b9e\u65bd\u6c47\u603b\u3002","title":"\u5355\u533a\u57df\u5b58\u5728\u7684\u95ee\u9898\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf_4","text":"\u57fa\u4e8e\u4e0a\u8ff0\u539f\u56e0\uff0cOSPF\u8bbe\u8ba1\u4e86\u533a\u57df\uff08Area\uff09\u7684\u6982\u5ff5\uff0c\u6bcf\u4e2a\u533a\u57df\u90fd\u4f7f\u7528area-ID\u8fdb\u884c\u6807\u8bc6\uff0c\u901a\u5e38area-ID\u91c7\u7528\u5341\u8fdb\u5236\u5f62\u5f0f\u6807\u8bc6\uff0c\u4f8b\u5982area 0\uff0carea 1\u7b49\uff0c\u4e5f\u53ef\u91c7\u7528\u70b9\u5206\u5341\u8fdb\u5236\u7684\u5f62\u5f0f\uff08\u4e0eIPv4\u5730\u5740\u683c\u5f0f\u76f8\u540c\uff09\u6765\u6807\u8bc6\uff0c \u4f8b\u5982area 0.0.0.0\uff08\u7b49\u540c\u4e8earea 0\uff09\u3002\u5f53\u7136\uff0c\u4e3a\u4e86\u7b80\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u901a\u5e38\u91c7\u7528\u524d\u9762\u4e00\u79cd\u5f62\u5f0f\u3002 \u591a\u533a\u57df\u7684\u8bbe\u8ba1\u51cf\u5c0f\u4e86LSA\u6d2a\u6cdb\u7684\u8303\u56f4\uff0c\u6709\u6548\u5730\u628a\u62d3\u6251\u53d8\u5316\u63a7\u5236\u5728\u533a\u57df\u5185\uff0c\u8fbe\u5230\u7f51\u7edc\u4f18\u5316\u7684\u76ee\u7684\uff1b \u5728\u533a\u57df\u8fb9\u754c\u53ef\u4ee5\u505a\u8def\u7531\u6c47\u603b\uff0c\u51cf\u5c0f\u4e86\u8def\u7531\u8868\u89c4\u6a21\uff1b \u5145\u5206\u5229\u7528OSPF\u7279\u6b8a\u533a\u57df\u7684\u7279\u6027\uff0c\u8fdb\u4e00\u6b65\u51cf\u5c11LSA\u6cdb\u6d2a\uff0c\u4ece\u800c\u4f18\u5316\u8def\u7531\uff1b \u591a\u533a\u57df\u7279\u6027\u63d0\u9ad8\u4e86\u7f51\u7edc\u7684\u53ef\u6269\u5c55\u6027\uff0c\u6709\u5229\u4e8e\u7ec4\u5efa\u5927\u89c4\u6a21\u7684OSPF\u7f51\u7edc\u3002","title":"OSPF\u591a\u533a\u57df\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospfarea0","text":"\u5728\u90e8\u7f72OSPF\u65f6\uff0c\u5982\u679c\u5b58\u5728\u591a\u533a\u57df\uff0c\u5219\u8981\u6c42OSPF\u57df\u5185\u5fc5\u987b\u6709\u4e14\u53ea\u80fd\u6709\u4e00\u4e2aarea0\u3002 Area 0\u4e3aOSPF\u7684\u9aa8\u5e72\u533a\u57df\uff0c\u9aa8\u5e72\u533a\u57df\u8d1f\u8d23\u5728\u975e\u9aa8\u5e72\u533a\u57df\u4e4b\u95f4\u53d1\u5e03\u7531\u533a\u57df\u8fb9\u754c\u8def\u7531\u5668\u6c47\u96c6\u7684\u8def\u7531\u4fe1\u606f\uff0c \u4ece\u800c\u5b9e\u73b0\u533a\u57df\u4e4b\u95f4\u7684\u4e92\u901a\u3002\u4e3a\u907f\u514d\u533a\u57df\u95f4\u7684\u8def\u7531\u73af\u8def\uff0c\u975e\u9aa8\u5e72\u533a\u57df\u4e4b\u95f4\u4e0d\u5141\u8bb8\u76f4\u63a5\u76f8\u4e92\u53d1\u5e03\u533a\u57df\u95f4\u8def\u7531\u3002\u56e0\u6b64\uff0c\u6bcf\u4e2a\u975e\u9aa8\u5e72\u533a\u57df\u90fd\u5fc5\u987b\u8fde\u63a5\u5230\u9aa8\u5e72\u533a\u57df\u3002","title":"OSPF\u533a\u57df\u4e2d\u7684\u9aa8\u5e72\u533a\u57dfarea0\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf_5","text":"OSPF\u8def\u7531\u5668\u7684\u89d2\u8272\uff1a \u533a\u57df\u5185\u8def\u7531\u5668\uff08Internal Router\uff09 \u533a\u57df\u8fb9\u754c\u8def\u7531\u5668\uff08Area Border Router\uff09 \u9aa8\u5e72\u8def\u7531\u5668\uff08Backbone Router\uff09 AS\u8fb9\u754c\u8def\u7531\u5668\uff08AS Boundary Router\uff09 OSPF \u7684\u57fa\u7840\u914d\u7f6e","title":"OSPF\u8def\u7531\u5668\u7684\u89d2\u8272"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_102","text":"","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospfospfrouter-id","text":"[Router] ospf [ process-id | router-id router-id ] \u5176\u4e2dprocess-id\u4e3a\u8fdb\u7a0b\u53f7\u3002\u53e6\u5916**Router-ID**\u5173\u952e\u5b57\u6307\u5b9a\u7684\u662f\u672c\u53f0\u8def\u7531\u5668\u5728\u8be5OSPF\u8fdb\u7a0b\u4e2d\u4f7f\u7528\u7684Router- ID\uff0c\u5efa\u8bae\u5728\u521b\u5efaOSPF\u8fdb\u7a0b\u65f6\u91c7\u7528\u8be5\u65b9\u6cd5\u624b\u5de5\u914d\u7f6eRouter-ID\u3002\u5982\u679c\u5728\u521b\u5efaOSPF\u8fdb\u7a0b\u65f6\uff0c\u6ca1\u6709\u624b\u5de5\u6307\u5b9aRouter-ID\uff0c\u5219\u8def\u7531\u5668\u4f1a\u81ea\u52a8\u4e3a\u8be5\u8fdb\u7a0b\u6307\u5b9a\u4e00\u4e2aRouter-ID\u3002","title":"\u521b\u5efa\u4e00\u4e2aOSPF\u8fdb\u7a0b\uff0c\u5e76\u6307\u5b9aOSPF\u8fdb\u7a0b\u53f7\u53caRouter-ID"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospfospf","text":"\u4e0a\u9762\u7684**network**\u547d\u4ee4\u7528\u4e8e\u5728\u7279\u5b9a\u63a5\u53e3\u4e0a\u6fc0\u6d3bOSPF\u3002\u5728\u6fc0\u6d3b\u67d0\u4e2a\u63a5\u53e3\u7684OSPF\u529f\u80fd\u65f6\uff0c\u5fc5\u987b\u5148\u8fdb\u5165\u7279\u5b9a \u7684OSPF\u533a\u57df\u914d\u7f6e\u89c6\u56fe\u3002\u5728**network**\u5173\u952e\u5b57\u540e\uff0c\u7d27\u8ddf\u7740\u7684\u662fIP\u5730\u5740\uff0c\u7136\u540e\u662f\u901a\u914d\u7b26\u63a9\u7801\uff0c\u8fd9\u4e24\u8005\u662f\u606f\u606f\u76f8\u5173\u7684\uff0c\u5b83\u4eec\u5728\u4e00\u8d77\u7684\u8fd0\u7b97\u51b3\u5b9a\u4e86\u672c\u8bbe\u5907\u54ea\u4e9b\u63a5\u53e3\u4f1a\u6fc0\u6d3bOSPF\u3002","title":"\u8fdb\u5165OSPF\u533a\u57df\u89c6\u56fe\uff0c\u5c06\u7279\u5b9a\u7684\u63a5\u53e3\u6fc0\u6d3bOSPF"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#wildcard-mask","text":"\u901a\u914d\u7b26\u63a9\u7801\u662f\u4e00\u4e2a\u7528\u4e8e\u51b3\u5b9aIP\u5730\u5740\u4e2d\u54ea\u4e9b\u6bd4\u7279\u4f4d\u8be5\u4e25\u683c\u5339\u914d\uff08\u4e3a0\u7684\u6bd4\u7279\u4f4d\u4ee3\u8868\u9700\u4e25\u683c\u5339\u914d\uff09\u3001\u54ea\u4e9b\u6bd4\u7279\u4f4d\u65e0\u9700\u5339\u914d\uff08\u4e3a1\u7684\u6bd4\u7279\u4f4d\uff09\u768432bit\u6570\u503c\u3002\u901a\u914d\u7b26\u63a9\u7801\u4e5f\u5e38\u7528\u4e8e\u5904\u7406\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff08ACL\uff09\u3002\u4e0b\u9762\u770b\u4e00\u4e0b\u7f51\u7edc\u63a9\u7801netmask\u548c\u901a\u914d\u7b26\u63a9\u7801wildcard-mask\u7684\u533a\u522b\uff1a \u63a5\u4e0b\u53bb\u770b\u51e0\u4e2a\u4f8b\u5b50\uff1a \u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u5982\u679c\u6211\u4eec\u5728\u8def\u7531\u5668\u4e0a\u91c7\u7528\u5982\u4e0b\u914d\u7f6e\uff1a \u6ce8\u610f\uff0c\u6211\u4eec\u5728**network**\u547d\u4ee4\u540e\u5173\u8054\u7684IP\u5730\u5740\u662f172.16.1.0\uff0c\u901a\u914d\u7b26\u63a9\u7801\u662f0.0.0.255\uff0c\u5c06\u8fd9\u4e24\u4e2a\u6570\u90fd\u8f6c\u6210 \u4e8c\u8fdb\u5236\uff0c\u7136\u540e\u5c06\u5404\u4e2a\u6bd4\u7279\u4f4d\u4e00\u4e00\u5bf9\u5e94\uff08\u5982\u56fe\u6240\u793a\uff09\uff0c\u901a\u914d\u7b26\u4e3a0\u7684\u6bd4\u7279\u4f4d\uff0c\u5fc5\u987b\u4e25\u683c\u5339\u914d\uff0c\u4e3a1\u7684\u4f4d\u5219\u65e0\u6240\u8c13\u3002\u73b0\u5728\uff0c\u6211\u4eec\u770b\u8def\u7531\u5668\u7684\u63a5\u53e3IP\u5730\u5740\uff0c\u5c06\u8fd9\u4e9bIP\u5730\u5740\u62ff\u53bb\u505a\u5bf9\u5e94\uff0c\u5982\u679c\u80fd\u5339\u914d\u4e0a\uff0c\u90a3\u4e48\u63a5\u53e3\u5c31\u6fc0\u6d3b OSPF\uff0c\u5426\u5219\u5c31\u4e0d\u6fc0\u6d3b\u3002\u4f8b\u5982\u8def\u7531\u5668\u914d\u7f6e\u4e86172.16.1.1\u8fd9\u4e2aIP\u5730\u5740\u7684\u63a5\u53e3\uff0c\u7531\u4e8e\u8be5IP\u5730\u5740\u6ee1\u8db3\u8981\u6c42\u2014\u2014 \u524d3\u4e2a\u516b\u4f4d\u7ec4\u4e0e172.16.1.0\u7684\u524d3\u4e2a\u516b\u4f4d\u7ec4\u76f8\u540c\uff0c\u6700\u540e\u4e00\u4e2a\u516b\u4f4d\u7ec4\u65e0\u9700\u76f8\u540c\uff0c\u56e0\u6b64\u8be5\u63a5\u53e3\u4f1a\u6fc0\u6d3bOSPF\u3002\u800c\u53e6\u5916\u4e24\u4e2a\u63a5\u53e3\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u56e0\u6b64\u4e0d\u6fc0\u6d3bOSPF\u3002 \u518d\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\uff1a \u7531\u4e8e**network**\u547d\u4ee4\u4f7f\u7528\u7684IP\u5730\u5740\u548c\u901a\u914d\u7b26\u63a9\u7801\u662f172.16.0.0 0.0.255.255\uff0c\u4e5f\u5c31\u662f\u6700\u540e\u4e24\u4e2a\u516b\u4f4d\u7ec4\u65e0\u6240\u8c13\uff0c\u524d\u4e24\u4e2a\u516b\u4f4d\u7ec4\u5fc5\u987b\u662f172.16\uff0c\u56e0\u6b64\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u8def\u7531\u5668\u5c06\u6709\u4e24\u4e2a\u63a5\u53e3\u6fc0\u6d3bOSPF\u3002\u5f53\u7136\uff0c\u5982\u679c\u8fd8\u662f\u4ee5\u4e0a\u56fe\u4e3a\u4f8b\uff0c\u5047\u8bbe\u6211\u4eec\u60f3\u53ea\u6fc0\u6d3b172.16.3.1/24\u8fd9\u4e2a\u63a5\u53e3\uff0c\u800c\u4e14\u8981\u6c42\u5c3d\u53ef\u80fd\u7cbe\u786e\uff0c\u90a3\u4e48**network**\u547d\u4ee4\u5b8c\u5168\u53ef\u4ee5\u8fd9\u4e48\u5199\uff1a network 172.16.3.1 0.0.0.0 \u3002 \u901a\u5e38\uff0c\u6211\u4eec\u5728\u914d\u7f6eOSPF\u65f6\uff0c\u5982\u679c\u60f3\u8981\u5728\u67d0\u4e2a\u63a5\u53e3\u4e0a\u6fc0\u6d3bOSPF\uff0c\u4f8b\u5982\u8be5\u63a5\u53e3\u7684IP\u5730\u5740\u4e3a192.168.1.1/24\uff0c \u90a3\u4e48\u4e00\u822c\u4f1a\u4f7f\u7528\u547d\u4ee4**network 192.168.1.0 0.0.0.255**\uff0c\u7559\u610f\u5230\u63a5\u53e3\u5730\u5740\u7684\u7f51\u7edc\u63a9\u7801\u662f255.255.255.0\uff0c \u800c\u7528\u4e8e\u6fc0\u6d3bOSPF \u7684\u547d\u4ee4\u4e2d\uff0c\u901a\u914d\u7b26\u662f0.0.0.255 \uff0c \u8fd9\u5b9e\u9645\u4e0a\u662f\u7528255.255.255.255 \u4e0e\u7f51\u7edc\u63a9\u7801 255.255.255.0\u505a\u201c\u51cf\u6cd5\u201d\uff0c\u4ece\u800c\u5f97\u52300.0.0.255\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u7ecf\u5e38\u5c06\u901a\u914d\u7b26\u63a9\u7801\u79f0\u4e3a\u201c\u53cd\u63a9\u7801\u201d\u3002","title":"\u901a\u914d\u7b26\u63a9\u7801Wildcard-mask\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_103","text":"\u7f51\u7edc\u62d3\u6251\u4e2d\u5305\u542b\u4e09\u53f0\u8def\u7531\u5668\u53ca\u4e24\u53f0PC\uff1b\u6bcf\u53f0\u8def\u7531\u5668\u4f7f\u7528x.x.x.x\u7684\u5730\u5740\u4f5c\u4e3aOSPF\u7684RouterID\uff0c\u5176\u4e2dx\u4e3a\u8bbe\u5907\u7f16\u53f7\uff0c\u4f8b\u5982R1\u7684RouterID\u4e3a1.1.1.1\uff0c\u8bbe\u5907\u7684\u63a5\u53e3\u7f16\u53f7\u53caIP\u7f16\u5740\u5982\u56fe\u6240\u793a\u3002","title":"\u793a\u4f8b\uff08\u5355\u533a\u57df\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r1","text":"","title":"R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r2","text":"","title":"R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r3","text":"\u5b8c\u6210\u914d\u7f6e\u540e\u6211\u4eec\u6765\u505a\u4e00\u4e0b\u67e5\u770b\u53ca\u9a8c\u8bc1\uff0c\u9996\u5148\u770b\u4e00\u4e0bOSPF\u7684\u90bb\u5c45\u5173\u7cfb\uff0c\u8fd9\u662fOSPF\u8def\u7531\u6536\u655b\u7684\u57fa\u7840\uff0c\u5982\u679c\u90bb \u5c45\u5173\u7cfb\u7684\u72b6\u6001\u4e0d\u6b63\u786e\uff0c\u90a3\u4e48\u8def\u7531\u80af\u5b9a\u662f\u65e0\u6cd5\u6b63\u5e38\u83b7\u6089\u7684\uff0c\u9996\u5148\u770b\u4e00\u4e0bR1\u7684\u90bb\u5c45\u8868\uff1a \u4f7f\u7528**display ospf peer**\u547d\u4ee4\u80fd\u67e5\u770bOSPF\u90bb\u5c45\u5173\u7cfb\uff0c\u4e0a\u9762\u7684\u8f93\u51fa\u5c31\u662fR1\u7684OSPF\u90bb\u5c45\u8868\uff0c\u6211\u4eec\u770b\u5230R1\u53d1\u73b0 \u4e86\u4e00\u4e2aOSPF \u90bb\u5c45\uff0c \u8fd9\u4e2aOSPF\u90bb\u5c45\u662f\u8fde\u63a5\u5728R1\u7684GE0/0/0\u53e3\u4e0a\uff0c\u4e14\u5176Router-ID \u4e3a2.2.2.2\uff0c\u63a5\u53e3IP\u4e3a 192.168.12.2\uff0c\u6700\u91cd\u8981\u7684\u662f\u72b6\u6001\u4e3aFull\uff0c\u8868\u793aR1\u4e0eR2\u7684OSPF\u90bb\u5c45\u5173\u7cfb\u5df2\u7ecf\u4e3a\u5168\u6bd7\u90bb\u72b6\u6001\u3002\u4e00\u822c\u6765\u8bb2\uff0c\u4e24\u53f0 \u8bbe\u5907\u5982\u679c\u6b63\u5e38\u5730\u5efa\u7acb\u4e86\u90bb\u63a5\u5173\u7cfb\uff0c\u90a3\u4e48\u72b6\u6001\u5fc5\u987b\u4e3aFull\u3002 \u540c\u7406\u5728R2\u4e0a\u5e94\u8be5\u80fd\u770b\u5230\u4e24\u4e2aOSPF\u90bb\u5c45\uff0c\u800c\u5728R3\u4e0a\u80fd\u770b\u5230\u4e00\u4e2aOSPF\u90bb\u5c45\u3002\u63a5\u4e0b\u53bb\u770b\u770b\u8def\u7531\u8868\u3002 [R1] display ip routing-table Route Flags: R - relay, D - download to fib ------------------------------------------------------------------------------ Routing Tables: Public Destinations : 12 Routes : 12 Destination/Mask Proto Pre Cost Flags NextHop Interface 192.168.1.0/24 Direct 0 0 D 192.168.1.254 GigabitEthernet0/0/1 192.168.1.254/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/1 192.168.1.255/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/1 192.168.2.0/24 OSPF 10 3 D 192.168.12.2 GigabitEthernet0/0/0 192.168.12.0/24 Direct 0 0 D 192.168.12.1 GigabitEthernet0/0/0 192.168.12.1/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/0 192.168.12.255/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/0 192.168.23.0/24 OSPF 10 2 D 192.168.12.2 GigabitEthernet0/0/0 255.255.255.255/32 Direct 0 0 D 127.0.0.1 InLoopBack0 \u5728\u4e0a\u8ff0\u8f93\u51fa\u4e2d\uff0c\u6211\u4eec\u770b\u5230R1\u5df2\u7ecf\u5b66\u4e60\u5230\u4e24\u6761OSPF\u8def\u7531\uff0c\u5206\u522b\u662f192.168.2.0/24\u53ca192.168.23.0/24\uff1b\u540c\u7406\u5728 R2\u5c31R3\u4e0a\u4e5f\u80fd\u770b\u5230\u76f8\u5e94\u7684OSPF\u8def\u7531\u3002\u73b0\u5728PC1\u53caPC2\u5c31\u80fd\u591f\u4e92\u76f8\u901a\u4fe1\u4e86\u3002","title":"R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_104","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cPC1\u53caPC2\u5206\u522b\u5c5e\u4e8eVLAN10\u53caVLAN20\uff0c\u5b83\u4eec\u7684\u7f51\u5173\u90fd\u5728\u6838\u5fc3\u4ea4\u6362\u673aCore-SW\u4e0a\u3002Access-SW \u662f\u63a5\u5165\u5c42\u4ea4\u6362\u673a\uff0c\u53ea\u505a\u4e8c\u5c42\u900f\u4f20\u3002\u8def\u7531\u5668Router\u8fde\u63a5\u7740PC3\uff0c\u5e76\u4e14\u4e0e\u6838\u5fc3\u4ea4\u6362\u673a\u5bf9\u63a5\u3002\u8981\u6c42\u5728\u7f51\u7edc\u4e2d\u90e8\u7f72 OSPF\uff0c\u4f7f\u5f97PC1\u53caPC2\u80fd\u591f\u4e0ePC3\u4e92\u901a\u3002Access-SW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a Core-SW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a Router\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u6765\u505a\u4e00\u4e0b\u76f8\u5173\u9a8c\u8bc1\uff0c\u9996\u5148\u67e5\u770bCore-SW\u7684OSPF\u90bb\u5c45\u8868\uff1a \u4ece\u8f93\u51fa\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u5b83\u5df2\u7ecf\u4e8eRouter\u5efa\u7acb\u4e86\u5168\u6bd7\u90bb\u7684\u90bb\u63a5\u5173\u7cfb\u3002\u518d\u770b\u770b\u5b83\u7684\u8def\u7531\u8868\u4e2d\u7684OSPF\u8def\u7531\uff1a \u6211\u4eec\u770b\u5230Core-SW\u5df2\u7ecf\u5b66\u4e60\u5230\u4e868.8.8.0/24\u8def\u7531\u3002\u540c\u6837\u5728Router\u4e0a\u67e5\u770b\u8def\u7531\u8868\uff0c\u4e5f\u4f1a\u53d1\u73b0\u5176\u5df2\u7ecf\u5b66\u4e60\u5230 192.168.10.0/24\u53ca192.168.20.0/24\u8def\u7531\uff0c\u5982\u6b64\u4e00\u6765\uff0cPC1/PC2\u5373\u53ef\u4e0ePC3\u5b9e\u73b0\u76f8\u4e92\u901a\u4fe1\u3002","title":"\u793a\u4f8b\uff08\u5355\u533a\u57df\u7efc\u5408\u5b9e\u9a8c\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_105","text":"\u7f51\u7edc\u4e2d\u5305\u542b\u4e09\u53f0\u8def\u7531\u5668\u53ca\u4e24\u53f0PC\uff1b\u6bcf\u53f0\u8def\u7531\u5668\u4f7f\u7528x.x.x.x\u7684\u5730\u5740\u4f5c\u4e3aOSPF\u7684RouterID\uff0c\u5176\u4e2dx\u4e3a\u8bbe\u5907\u7f16\u53f7\uff0c \u4f8b\u5982R1\u7684RouterID\u4e3a1.1.1.1\uff1bOSPF\u533a\u57df\u7684\u89c4\u5212\u5982\u56fe\u6240\u793a\uff1b \u8bbe\u5907\u7684\u63a5\u53e3\u7f16\u53f7\u53caIP\u7f16\u5740\u5982\u56fe\u6240\u793a\u3002\u6ce8\u610f\u5230\u6211\u4eec\u5728\u7f51\u7edc\u4e2d\u89c4\u5212\u4e86\u4e24\u4e2aOSPF\u533a\u57df\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8def\u7531\u5668\u7684\u63a5\u53e3\u5fc5\u987b\u5728\u6b63\u786e\u7684\u533a\u57df\u4e2d\u6fc0\u6d3b\u3002\u4e24\u53f0\u76f4\u8fde\u7684\u8bbe\u5907\u8981\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\uff0c\u90a3\u4e48\u76f4\u8fde\u7684\u4e24\u4e2a\u63a5\u53e3\u9700\u5728\u76f8\u540c\u7684\u533a\u57df\u4e2d\u6fc0\u6d3bOSPF\u3002\u4f8b\u5982R1\u7684GE0/0/0\u53caR2\u7684GE0/0/0\u63a5\u53e3\uff0c\u90fd\u5fc5\u987b\u5728area0\u4e2d\u6fc0\u6d3b\uff0c\u800cR2\u7684GE0/0/1\u53caR3\u7684 GE0/0/0\u63a5\u53e3\u5fc5\u987b\u5728area1\u4e2d\u6fc0\u6d3bOSPF\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0cPC1\u4e0ePC2\u5373\u53ef\u4e92\u76f8ping\u901a\u3002","title":"\u793a\u4f8b\uff08\u591a\u533a\u57df\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_106","text":"\u67e5\u770bOSPF\u534f\u8bae\u76f8\u5173\u8fd0\u884c\u53c2\u6570\uff1a display ospf brief \u67e5\u770bOSPF\u90bb\u5c45\u8868\uff1a display ospf peer \u67e5\u770bLSDB\u8868\uff1a display ospf lsdb \u67e5\u770bOSPF\u8def\u7531\uff1a display ospf routing OSPF LSA \u53ca\u7279\u6b8a\u533a\u57df","title":"\u67e5\u770b\u53ca\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf-lsa","text":"LSA\u662fOSPF\u4e2d\u975e\u5e38\u5173\u952e\u7684\u6982\u5ff5\uff0c\u4e5f\u662fOSPF\u7f51\u7edc\u6b63\u5e38\u8fd0\u884c\u7684\u6839\u672c\u3002LSA\u662f\u63cf\u8ff0\u7f51\u7edc\u62d3\u6251\u3001\u7f51\u6bb5\u4fe1\u606f\u3001\u8def\u7531\u4fe1\u606f\u7b49\u5185\u5bb9\u7684\u4e00\u7cfb\u5217\u94fe\u8def\u72b6\u6001\u4fe1\u606f\u3002\u5b8c\u6574\u7684LSA\u4fe1\u606f\u53ea\u5728OSPF LSU\u62a5\u6587\u4e2d\u5b58\u5728\u3002 \u5e38\u89c1\u7684OSPF LSA\u7c7b\u578b\u53ca\u63cf\u8ff0\u5982\u4e0b\uff1a LSA\u7c7b\u578b LSA\u540d\u79f0 LSA\u63cf\u8ff0 1 Router-LSA \u6bcf\u4e2a\u8bbe\u5907\u90fd\u4f1a\u4ea7\u751f\uff0c\u63cf\u8ff0\u4e86\u8bbe\u5907\u7684\u94fe\u8def\u72b6\u6001\u548c\u5f00\u9500\uff0c\u5728\u6240\u5c5e\u7684\u533a\u57df\u5185\u4f20\u64ad\u3002 2 Network-LSA \u7531DR\u4ea7\u751f\uff0c\u63cf\u8ff0\u672c\u7f51\u6bb5\u7684\u94fe\u8def\u72b6\u6001\uff0c\u5728\u6240\u5c5e\u7684\u533a\u57df\u5185\u4f20\u64ad\u3002 3 Network-summary-LSA \u7531ABR\u4ea7\u751f\uff0c\u63cf\u8ff0\u533a\u57df\u5185\u67d0\u4e2a\u7f51\u6bb5\u7684\u8def\u7531\uff0c\u5e76\u901a\u544a\u7ed9\u53d1\u5e03\u6216\u63a5\u6536\u6b64LSA\u7684\u975e Totally STUB\u6216NSSA\u533a\u57df\u3002 4 ASBR-summary-LSA \u7531ABR\u4ea7\u751f\uff0c\u63cf\u8ff0\u5230ASBR\u7684\u8def\u7531\uff0c\u901a\u544a\u7ed9\u9664ASBR\u6240\u5728\u533a\u57df\u7684\u5176\u4ed6\u76f8\u5173\u533a\u57df\u3002 5 AS-external-LSA \u7531ASBR\u4ea7\u751f\uff0c\u63cf\u8ff0\u5230AS\u5916\u90e8\u7684\u8def\u7531\uff0c\u901a\u544a\u5230\u6240\u6709\u7684\u533a\u57df\uff08\u9664\u4e86STUB\u533a\u57df\u548c NSSA\u533a\u57df\uff09\u3002 7 NSSA LSA \u7531ASBR\u4ea7\u751f\uff0c\u63cf\u8ff0\u5230AS\u5916\u90e8\u7684\u8def\u7531\uff0c\u4ec5\u5728NSSA\u533a\u57df\u5185\u4f20\u64ad\u3002","title":"OSPF LSA\u7c7b\u578b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_107","text":"\u4e3a\u4e86\u4f18\u5316OSPF\u7684\u8fd0\u884c\uff0c\u4f7f\u5f97OSPF\u80fd\u591f\u652f\u6491\u66f4\u5927\u89c4\u6a21\u7684\u7f51\u7edc\uff0cOSPF\u5b9a\u4e49\u4e86\u51e0\u79cd\u7279\u6b8a\u7684\u533a\u57df\u7c7b\u578b\u3002\u9996\u5148\u770b\u4e00\u4e0b\u672c\u5c0f\u8282\u7528\u4e8e\u8bb2\u89e3\u76f8\u5173\u77e5\u8bc6\u70b9\u6240\u4f7f\u7528\u7684\u62d3\u6251\uff1a \u62d3\u6251\u4e2d\u5305\u542b\u56db\u53f0\u8def\u7531\u5668\uff0c\u63a5\u53e3IP\u5730\u5740\u5982\u56fe\u6240\u793a\uff0c\u73b0\u5728\u6309\u7167\u56fe\u793a\u7684\u8981\u6c42\u5b8c\u6210OSPF\u7684\u914d\u7f6e\uff0c\u540c\u65f6\u5728R4\u4e0a\u521b\u5efa Loopback1\u63a5\u53e3\uff0c\u63a5\u53e3\u914d\u7f6eIP\u5730\u57404.4.4.4/32\uff0c\u7136\u540e\u5c06\u8fd9\u6761\u76f4\u8fde\u8def\u7531\u91cd\u53d1\u5e03\u5230OSPF\u4e2d\u3002","title":"\u7279\u6b8a\u533a\u57df\u8be6\u89e3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_108","text":"R1\u3001R2\u3001R3\u3001R4\u8fd0\u884cOSPF\uff0c\u5728\u76f8\u5e94\u7684\u63a5\u53e3\u4e0a\u6fc0\u6d3bOSPF\uff0cOSPF\u7684\u533a\u57df\u89c4\u5212\u5982\u56fe\u6240\u793a\uff1b R4\u5c06Loopback0\u63a5\u53e3\u7684\u76f4\u8fde\u8def\u7531\u91cd\u53d1\u5e03\u5230OSPF\u3002\u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u89c2\u5bdf\u5404\u53f0\u8def\u7531\u5668\u7684\u8def\u7531\u8868\u548cLSDB\uff1b \u5c06area1\u914d\u7f6e\u4e3aStub\u533a\u57df\uff0c\u89c2\u5bdf\u8def\u7531\u548cLSA\u7684\u53d8\u5316\uff1b \u5c06area1\u4fee\u6539\u4e3aTotally-Stub\u533a\u57df\uff0c\u89c2\u5bdf\u8def\u7531\u548cLSA\u7684\u53d8\u5316\uff1b \u5c06area1\u6062\u590d\u4e3a\u5e38\u89c4\u533a\u57df\uff0c\u5728R1\u4e0a\u521b\u5efaLoopback0\u63a5\u53e3\uff0c\u914d\u7f6e\u5730\u5740\uff1a1.1.1.1/32\u5e76\u5c06\u76f4\u8fde\u8def\u7531\u91cd\u53d1\u5e03\u5230 OSPF\uff1b\u5c06area2\u914d\u7f6e\u4e3aNSSA\uff0c\u89c2\u5bdf\u8def\u7531\u53caLSA\u7684\u53d8\u5316\uff1b \u5c06area2\u4fee\u6539\u4e3aTotally NSSA\uff0c\u89c2\u5bdf\u8def\u7531\u548cLSA\u7684\u53d8\u5316\u3002","title":"\u63a5\u4e0b\u6765\u662f\u6211\u4eec\u7684\u5206\u6790\u6b65\u9aa4\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_109","text":"R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R4\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u89c2\u5bdf\u4e00\u4e0b\u5404\u4e2a\u8def\u7531\u5668\u7684\u8def\u7531\u8868\u53caLSDB\u3002 [R1] display ip routing-table protocol ospf Destination/Mask Proto Pre Cost Flags NextHop Interface 4.4.4.4/32 O_ASE 150 1 D 10.1.12.2 GigabitEthernet0/0/0 10.1.23.0/24 OSPF 10 2 D 10.1.12.2 GigabitEthernet0/0/0 10.1.34.0/24 OSPF 10 3 D 10.1.12.2 GigabitEthernet0/0/0 R1\u5b66\u4e60\u5230\u4e86\u5168\u7f51\u7684\u8def\u7531\uff0c\u5305\u62ecR4\u6ce8\u5165\u7684\u5916\u90e8\u8def\u75314.4.4.4/32\uff0c\u8fd9\u6761\u5916\u90e8\u8def\u7531\u5728\u8def\u7531\u8868\u4e2d\u6807\u8bb0\u4e3aO_ASE\uff0c \u8868\u793a\u4e3aOSPF AS External\uff0c\u4e5f\u5c31\u662fOSPF\u7684\u57df\u5916\u8def\u7531\u3002\u63a5\u4e0b\u6765\u68c0\u67e5R1\u7684OSPF LSDB\uff1a [R1] display ospf lsdb OSPF Process 1 with Router ID 1.1.1.1 Link State Database Area: 0.0.0.1 Type LinkState ID AdvRouter Age Len Sequence Metric Router 2.2.2.2 2.2.2.2 258 36 80000005 1 Router 1.1.1.1 1.1.1.1 261 36 80000004 1 Network 10.1.12.2 2.2.2.2 258 32 80000002 0 Sum-Net 10.1.23.0 2.2.2.2 294 28 80000001 1 Sum-Net 10.1.34.0 2.2.2.2 227 28 80000001 2 Sum-Asbr 4.4.4.4 2.2.2.2 215 28 80000001 2 AS External Database Type LinkState ID AdvRouter Age Len Sequence Metric External 4.4.4.4 4.4.4.4 222 36 80000001 1 External 10.1.34.0 4.4.4.4 222 36 80000001 1 \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fR1\u7684OSPF LSDB\uff0c\u4ece\u4e2d\u53ef\u4ee5\u770b\u51fa\u5728R1\u7684LSDB\u4e2d\u67091\u30012\u30013\u30014\u30015\u7c7bLSA\u3002\u5176\u4e2d3\u7c7bLSA \uff08\u4e0a\u9762\u663e\u793a\u7684Sum-Net\uff09\u63cf\u8ff0\u7684\u662f\u5230\u8fbe10.1.23.0/24\u53ca10.1.34.0/24\u8fd9\u4e24\u4e2a\u7f51\u6bb5\u7684\u533a\u57df\u95f4\u8def\u7531\u30024\u7c7bLSA \uff08\u4e0a\u9762\u663e\u793a\u7684Sum-Asbr\uff09\u63cf\u8ff0\u7684\u662f\u5230\u8fbeASBR\uff08R4\uff09\u7684\u8def\u7531\uff0c\u8fd9\u6761LSA\u7531ABR R2\u4ea7\u751f\u3002\u53e6\u5916\u8fd8\u67092\u6761 AS\u5916\u90e8LSA\uff08\u4e0a\u9762\u663e\u793a\u7684External\uff09\uff0c\u63cf\u8ff0\u5230\u8fbe4.4.4.4/32\u548c10.1.34.0//24\u7684\u8def\u7531\u3002\u6b64\u65f6R1\u662f\u5168\u7f51\u53ef\u8fbe\u7684\u3002","title":"\u5b8c\u6210\u57fa\u7840\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#area1stublsa","text":"R1\u7684OSPF\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a R2\u7684OSPF\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a \u6ce8\u610f\uff0c\u4e00\u65e6\u5c06\u67d0\u4e2a\u533a\u57df\u8bbe\u7f6e\u4e3aStub\u533a\u57df\uff0c\u5219\u6240\u6709\u8fde\u63a5\u5230\u8fd9\u4e2a\u533a\u57df\u7684\u8def\u7531\u5668\u90fd\u8981\u5c06\u8be5\u533a\u57df\u914d\u7f6e\u4e3aStub\u533a\u57df\uff0c\u5426\u5219OSPF\u90bb\u5c45\u5173\u7cfb\u5c06\u65e0\u6cd5\u6b63\u786e\u5efa\u7acb\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0carea1\u5c31\u53d8\u6210\u4e86\u4e00\u4e2astub\u533a\u57df\u3002Stub\u533a\u57df\u4f1a\u963b\u6321\u6765\u81ea\u9aa8\u5e72\u533a\u57df\u76845\u7c7bLSA\uff0c\u8fd9\u4f7f\u5f97\u8be5\u533a\u57df\u5185LSA\u6cdb\u6d2a\u7684\u6570\u91cf\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u51cf\u5c11\u4e86\uff0c\u4ece\u800c\u51cf\u5c0f\u8be5\u533a\u57df\u4e2d\u8def\u7531\u5668\u7684\u8def\u7531\u8868\u89c4\u6a21\uff0c\u540c\u65f6\u964d\u4f4e\u8bbe\u5907\u8d1f\u62c5\uff0c \u53e6\u5916\uff0cStub\u533a\u57df\u7684ABR\u4f1a\u4e3a\u8be5\u533a\u57df\u4ea7\u751f\u4e00\u6761\u4f7f\u75283\u7c7bLSA\u63cf\u8ff0\u7684\u7f3a\u7701\u8def\u7531\uff0c\u7528\u4e8eStub\u533a\u57df\u5185\u7684\u8def\u7531\u5668\u8d70\u51fa\u8be5\u533a\u57df\u4ece\u800c\u80fd\u591f\u8bbf\u95eeOSPF\u5916\u90e8\u7f51\u7edc\uff1a \u73b0\u5728\uff0c\u518d\u6765\u89c2\u5bdfR1\u7684\u8def\u7531\u8868\u548cLSDB\u3002 \u76f8\u6bd4\u4e8earea1\u4e3a\u5e38\u89c4\u533a\u57df\u7684\u60c5\u51b5\uff0carea1\u88ab\u8bbe\u7f6e\u4e3aStub\u533a\u57df\u540e\uff0cR1\u7684\u8def\u7531\u8868\u66f4\u7cbe\u7b80\u4e86\uff0c\u90a3\u662f\u56e0\u4e3aR2\u963b\u6321\u6389\u4e86\u6765\u81eaOSPF\u7684\u57df\u5916\u8def\u75314.4.4.4/32\u3002\u5f53\u7136R1\u53ef\u4ee5\u901a\u8fc7\u7f3a\u7701\u8def\u75310.0.0.0/0\u5230\u8fbe\u8fd9\u4e9b\u57df\u5916\u7f51\u7edc\uff0c\u8fd9\u6761\u7f3a\u7701\u8def\u7531\u662fR2\u4e0b\u53d1\u7684\uff0c\u4f7f\u75283\u7c7bLSA\u63cf\u8ff0\uff0c\u4e14\u7f3a\u7701\u8def\u7531\u7684\u5916\u90e8Cost\u4e3a1\uff0c\u53ef\u4ee5\u5728R2\u7684area1\u89c6\u56fe\u4e0b\u4f7f\u7528**default-cost**\u547d\u4ee4\u6765\u4fee\u6539\u8fd9\u4e2a\u7f3a\u7701\u7684Cost\u503c\u3002\u518d\u89c2\u5bdf\u4e00\u4e0bR1\u7684LSDB\uff1a [R1] display ospf lsdb OSPF Process 1 with Router ID 1.1.1.1 Link State Database Area: 0.0.0.1 Type LinkState ID AdvRouter Age Len Sequence Metric Router 2.2.2.2 2.2.2.2 616 36 80000004 1 Router 1.1.1.1 1.1.1.1 615 36 80000004 1 Network 10.1.12.1 1.1.1.1 615 32 80000002 0 Sum-Net 0.0.0.0 2.2.2.2 626 28 80000001 1 Sum-Net 10.1.23.0 2.2.2.2 627 28 80000001 1 Sum-Net 10.1.34.0 2.2.2.2 627 28 80000001 2 \u663e\u7136\uff0cR1\u7684LSDB\u4e5f\u7cbe\u7b80\u4e86\uff0c\u6b64\u65f6\u5728R1\u7684LSDB\u4e2d\uff0c\u6ca1\u67094\u30015\u7c7bLSA\u3002\u4ec5\u67091\u30012\u30013\u7c7bLSA\u3002","title":"\u5c06area1\u914d\u7f6e\u4e3aStub\u533a\u57df\uff0c\u89c2\u5bdf\u8def\u7531\u53caLSA\u7684\u53d8\u5316"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#area1totally-stublsa","text":"\u5728\u4e0a\u4e00\u4e2a\u9700\u6c42\u7684\u914d\u7f6e\u57fa\u7840\u4e0a\uff0cR2\u7684OSPF\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a [R2] ospf 1 \u5c06\u4e00\u4e2a\u533a\u57df\u6307\u5b9a\u4e3aTotally-Stub\u540e\uff0c\u8be5\u533a\u57df\u5c06\u4e0d\u4f1a\u518d\u6536\u5230\u6765\u81ea\u9aa8\u5e72\u533a\u57df\u76843\u30014\u30015\u7c7bLSA\uff0c\u4e5f\u5c31\u662f\u5728stub \u533a\u57df\u7684\u57fa\u7840\u4e0a\u8fdb\u4e00\u6b65\u6291\u52363\u7c7bLSA\u7684\u6cdb\u6d2a\uff0c\u540c\u65f6\u8be5\u533a\u57df\u7684ABR\u4e0b\u53d1\u4e00\u67613\u7c7bLSA\u7f3a\u7701\u8def\u7531\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\u518d\u53bbR1\u4e0a\u770b\u770b\u8def\u7531\u8868\u548cLSDB\uff1a \u6b64\u65f6\uff0cR1\u7684\u8def\u7531\u8868\u53d8\u5f97\u975e\u5e38\u7b80\u6d01\uff0c\u53ea\u6709\u4e00\u6761\u7f3a\u7701\u8def\u7531\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u533a\u57df\u95f4\u8def\u753110.1.23.0/24\u300110.1.34.0/24\uff0c\u4ee5\u53ca\u57df\u5916\u8def\u75314.4.4.4/32\u90fd\u5df2\u7ecf\u6d88\u5931\u4e86\uff0cR1\u7684\u8d1f\u62c5\u5c06\u53d8\u5f97\u975e\u5e38\u5c0f\uff0c\u5e76\u4e14\u5f53\u5b83\u9700\u8981\u53bb\u5f80\u8fd9\u4e9b\u7f51\u7edc\u65f6\uff0c\u53c8\u53ef\u4ee5\u901a\u8fc7\u8fd9\u6761\u7f3a\u7701\u8def\u7531\u51fa\u53bb\u3002 \u518d\u67e5\u770b\u4e00\u4e0bR1\u7684LSDB\uff1a [R1] display ospf lsdb OSPF Process 1 with Router ID 1.1.1.1 Link State Database Area: 0.0.0.1 Type LinkState ID AdvRouter Age Len Sequence Metric Router 2.2.2.2 2.2.2.2 347 36 80000005 1 Router 1.1.1.1 1.1.1.1 346 36 80000009 1 Network 10.1.12.1 1.1.1.1 347 32 80000002 0 Sum-Net 0.0.0.0 2.2.2.2 348 28 80000005 1 R1\u7684LSDB\u4e5f\u662f\u975e\u5e38\u7b80\u6d01\u7684\uff0c\u53ea\u67091\u30012\u7c7bLSA\uff0c\u4e5f\u5c31\u662f\u7528\u4e8e\u8ba1\u7b97\u672c\u533a\u57df\u5185\u8def\u7531\u7684LSA\uff0c\u53e6\u5916\u8fd8\u6709\u4e00\u67613 \u7c7bLSA\uff0c\u8fd9\u67613\u7c7bLSA\u662f\u63cf\u8ff00.0.0.0/0\u7f3a\u7701\u8def\u7531\u7684\uff0c\u7531ABR R2\u4ea7\u751f\u3002","title":"\u5c06area1\u914d\u7f6e\u4e3aTotally-Stub\u533a\u57df\uff0c\u89c2\u5bdf\u8def\u7531\u53caLSA\u7684\u53d8\u5316"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#area1ospfarea2nssa","text":"\u5728\u4e0a\u4e00\u4e2a\u9700\u6c42\u7684\u914d\u7f6e\u57fa\u7840\u4e0a\uff0cR1\u7684\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a \u4ece\u4ee5\u4e0a\u914d\u7f6e\u53ef\u4ee5\u770b\u51fa\uff0cR1\u521b\u5efa\u4e86\u4e00\u4e2aLoopback\u63a5\u53e3\uff0c\u7136\u540earea1\u6062\u590d\u4e3a\u4e86\u5e38\u89c4\u533a\u57df\uff0c\u540c\u65f6\u76f4\u8fde\u8def\u7531\u88ab \u6ce8\u5165OSPF\u30021.1.1.1/32\u8fd9\u6761\u8def\u7531\u662f\u6211\u4eec\u63a5\u4e0b\u53bb\u9700\u89c2\u5bdf\u7684\u76ee\u6807\u8def\u7531\u4e4b\u4e00\u3002 R2\u7684\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a \u6b64\u65f6R4\u7684\u8def\u7531\u8868\u5982\u4e0b\uff1a [R4] display ip routing-table protocol ospf Destination/Mask Proto Pre Cost Flags NextHop Interface 1.1.1.1/32 O_ASE 150 1 D 10.1.34.3 GigabitEthernet0/0/0 10.1.12.0/24 OSPF 10 3 D 10.1.34.3 GigabitEthernet0/0/0 10.1.23.0/24 OSPF 10 2 D 10.1.34.3 GigabitEthernet0/0/0 \u4eceR4\u7684\u8def\u7531\u8868\u53ef\u4ee5\u770b\u51fa\uff0cR4\u6b64\u65f6\u80fd\u591f\u5b66\u4e60\u5230\u533a\u57df\u95f4\u8def\u753110.1.12.0/24\u300110.1.23.0/24\uff0c\u4ee5\u53ca\u57df\u5916\u8def\u7531 1.1.1.1/32\u3002\u73b0\u5728\u628aarea2\u914d\u7f6e\u4e3aNSSA\uff1a R3\u7684\u914d\u7f6e\u4fee\u6539\u4e3a\uff1a R4\u7684\u914d\u7f6e\u4fee\u6539\u4e3a\uff1a \u5f53\u4e00\u4e2a\u533a\u57df\u88ab\u914d\u7f6e\u4e3aNSSA\u533a\u57df\uff08\u975e\u5b8c\u5168\u672b\u68a2\u533a\u57df\uff09\u540e\uff0c\u8be5\u533a\u57df\u5c06\u4e0d\u518d\u5141\u8bb8\u6765\u81ea\u9aa8\u5e72\u533a\u57df\u76844\u30015\u7c7bLSA \u6cdb\u6d2a\uff0c\u4f46\u662f\u5141\u8bb8\u8be5\u533a\u57df\u5185\u7684\u8def\u7531\u5668\u6ce8\u5165\u5916\u90e8\u8def\u7531\uff0c\u8fd9\u4e9b\u5916\u90e8\u8def\u7531\u88ab\u91cd\u53d1\u5e03\u8fdbNSSA\u540e\u4ee57\u7c7bLSA\u63cf\u8ff0\uff0c \u8fd9\u4e9b7\u7c7bLSA\u7531NSSA\u7684ABR\u6267\u884c\u8f6c\u6362\u53d8\u62105\u7c7bLSA\u540e\u8fdb\u5165\u9aa8\u5e72\u533a\u57df\uff1a \u6240\u4ee5\uff0c\u5f53area2\u88ab\u914d\u7f6e\u4e3aNSSA\u540e\uff0cR3\u5c06\u4e0d\u80fd\u518d\u628a4\u30015\u7c7bLSA\u6cdb\u6d2a\u5230area2\u4e2d\uff0c\u56e0\u6b64R1\u5f15\u5165\u7684\u5916\u90e8\u8def\u7531 1.1.1.1/32\u4e0d\u4f1a\u88ab\u6ce8\u5165\u5230area2\u4e2d\u3002\u5f53\u7136\u4e3a\u4e86\u8ba9NSSA\u5185\u7684\u8def\u7531\u5668\u5230\u8fbeAS\u5916\u90e8\uff0cR3\u81ea\u52a8\u4e0b\u53d1\u4e00\u6761\u4f7f\u75287\u7c7b LSA\u63cf\u8ff0\u7684\u7f3a\u7701\u8def\u7531\u3002R3\u4e0d\u4f1a\u963b\u63213\u7c7bLSA\u8fdb\u5165NSSA\uff0c\u6240\u4ee5R4\u4f9d\u7136\u80fd\u591f\u5b66\u4e60\u5230\u53bb\u5f80\u5176\u4ed6\u533a\u57df\u7684\u8def\u7531\u3002 \u53e6\u4e00\u65b9\u9762\uff0cNSSA\u5141\u8bb8\u672c\u533a\u57df\u5185\u7684\u8def\u7531\u5668\u6267\u884c\u8def\u7531\u91cd\u53d1\u5e03\u52a8\u4f5c\uff0c\u8fd9\u4e00\u70b9\u4e0eStub\u533a\u57df\u5b58\u5728\u8f83\u5927\u7684\u533a\u522b\u3002R4 \u4e0a\u6267\u884c\u8def\u7531\u91cd\u53d1\u5e03\u52a8\u4f5c\uff0c\u5c064.4.4.4/32\u8fd9\u6761\u5916\u90e8\u8def\u7531\u5f15\u5165OSPF\uff0c\u8fd9\u6761\u5916\u90e8\u8def\u7531\u88ab\u5f15\u5165\u540e\u662f\u4ee57\u7c7bLSA\u7684\u5f62\u5f0f\u5728NSSA\u5185\u6cdb\u6d2a\uff0c\u5e76\u4e14\u4e0d\u5141\u8bb8\u76f4\u63a5\u8fdb\u5165\u9aa8\u5e72\u533a\u57dfarea0\u3002\u53e6\u4e00\u65b9\u9762\uff0cNSSA\u7684ABR R3\u4f1a\u628a7\u7c7bLSA\u8f6c\u6362\u62105\u7c7bLSA\uff0c\u7136\u540e\u5728\u9aa8\u5e72\u533a\u57df\u4e2d\u6cdb\u6d2a\uff0c\u56e0\u6b64R1\u3001R2\u90fd\u80fd\u5b66\u4e60\u5230\u5916\u90e8\u8def\u75314.4.4.4/32\u3002 \u7efc\u4e0a\uff0cNSSA\u7684\u4f7f\u7528\u573a\u666f\u662f\uff1a\u8fd9\u4e2a\u533a\u57df\u4e0d\u5e0c\u671b\u5b66\u4e60\u5230\u5176\u4ed6\u533a\u57df\u91cd\u53d1\u5e03\u8fdbOSPF\u7684\u57df\u5916\u8def\u7531\uff0c\u4f46\u662f\u8be5\u533a\u57df\u81ea\u5df1\u4f9d\u7136\u6709\u6ce8\u5165\u57df\u5916\u8def\u7531\u7684\u9700\u6c42\u6216\u80fd\u529b\u3002 \u67e5\u770b\u4e00\u4e0bR4\u8def\u7531\u8868\u4e2d\u7684OSPF\u8def\u7531\uff1a [R4] display ip routing-table protocol ospf Destination/Mask Proto Pre Cost Flags NextHop Interface 0.0.0.0/0 O_NSSA 150 1 D 10.1.34.3 GigabitEthernet0/0/0 10.1.12.0/24 OSPF 10 3 D 10.1.34.3 GigabitEthernet0/0/0 10.1.23.0/24 OSPF 10 2 D 10.1.34.3 GigabitEthernet0/0/0 R4\u7684\u8def\u7531\u8868\u4e2d\uff0c\u5df2\u7ecf\u770b\u4e0d\u52301.1.1.1/32\u8fd9\u6761AS\u5916\u90e8\u8def\u7531\u4e86\uff0c\u4f46\u662fR4\u4f9d\u7136\u662f\u80fd\u591f\u8bbf\u95ee1.1.1.1/32\u7684\uff0c\u56e0\u4e3a NSSA\u7684ABR R3\u4e3aNSSA\u4e0b\u53d1\u4e86\u4e00\u67617\u7c7b\u7684\u7f3a\u7701\u8def\u7531\uff0c\u901a\u8fc7\u8fd9\u6761\u7f3a\u7701\u8def\u7531\uff0cR4\u4f9d\u7136\u80fd\u591f\u7a7f\u8d8a\u9aa8\u5e72\u533a\u57df\u8bbf\u95eeAS\u5916\u90e8\u7f51\u7edc\u3002 \u518d\u770b\u4e00\u4e0bR4\u7684LSDB\uff1a Router 4.4.4.4 4.4.4.4 902 36 80000004 1 Router 3.3.3.3 3.3.3.3 901 36 80000006 1 Network 10.1.34.3 3.3.3.3 901 32 80000002 0 Sum-Net 10.1.23.0 3.3.3.3 1103 28 80000001 1 Sum-Net 10.1.12.0 3.3.3.3 1103 28 80000001 2 NSSA 4.4.4.4 4.4.4.4 910 36 80000001 1 NSSA 10.1.34.0 4.4.4.4 910 36 80000002 1 NSSA 0.0.0.0 3.3.3.3 1103 36 80000001 1 R4\u7684LSDB\u4e2d\u5df2\u7ecf\u6ca1\u67095\u7c7bLSA\u4e86\uff0c\u5176\u81ea\u8eab\u91cd\u53d1\u5e03\u8fdbOSPF\u7684\u76f4\u8fde\u8def\u75314.4.4.4/32\u53ca10.1.34.0/24\u4ee57\u7c7b LSA\u7684\u5f62\u5f0f\u88ab\u521b\u5efa\u3002\u53e6\u5916\uff0cR3\u8fd8\u5411NSSA\u4e2d\u653e\u5165\u4e00\u67617\u7c7bLSA\u76840.0.0.0/0\u7f3a\u7701\u8def\u7531\u3002\u770b\u4e00\u4e0bR3\u8def\u7531\u8868\u4e2d\u7684OSPF\u8def\u7531\uff1a R3\u7684\u8def\u7531\u8868\u4e2d\uff0c\u6709\u4e00\u67611.1.1.1/32\u7684\u5916\u90e8\u8def\u7531\uff0c\u8fd9\u662f\u901a\u8fc75\u7c7bLSA\u8ba1\u7b97\u5f97\u51fa\u7684\u3002\u8fd8\u6709\u4e00\u67614.4.4.4/32\u7684\u5916\u90e8\u8def\u7531\uff0c\u8fd9\u662f\u901a\u8fc77\u7c7bLSA\u8ba1\u7b97\u5f97\u51fa\u7684\uff08\u56e0\u6b64\u5728\u8def\u7531\u8868\u4e2d\u7684\u6807\u8bb0\u4e3aO_NSSA\uff09\u3002\u5f53\u7136R3\u4f5c\u4e3aNSSA \u7684 ABR\uff0c\u662f\u4e0d\u5141\u8bb8\u628a7\u7c7bLSA\u76f4\u63a5\u6ce8\u5165\u9aa8\u5e72\u533a\u57df\u7684\uff0c\u800c\u662f\u4f1a\u6267\u884c\u4e00\u4e2a7\u8f6c5\u7684\u52a8\u4f5c\uff0c\u628a7\u7c7bLSA\u8f6c\u6362\u62105\u7c7bLSA\uff0c \u8fd9\u662f\u56e0\u4e3a7\u7c7bLSA\u53ea\u80fd\u5b58\u5728\u4e8eNSSA\u4e2d\u3002 \u800cR2\u8def\u7531\u8868\u4e2d\u7684OSPF\u8def\u7531\uff1a \u6709\u4e24\u6761AS\u5916\u90e8\u8def\u7531\uff0c\u5206\u522b\u662f1.1.1.1/32\u548c4.4.4.4/32\uff0c\u5176\u4e2d1.1.1.1/32\u662f\u7531R1\u5f15\u5165\u7684\uff0c\u800c4.4.4.4/32\u662f\u7ecf\u7531R3\u6267\u884c7\u7c7bLSA\u8f6c5\u7c7bLSA\u540e\u5f15\u5165\u7684\u3002","title":"\u5c06area1\u8fd8\u539f\u4e3a\u5e38\u89c4\u533a\u57df\uff0c\u5e76\u91cd\u53d1\u5e03\u76f4\u8fde\u8def\u7531\u8fdbOSPF\uff1b\u5c06area2\u914d\u7f6e\u4e3aNSSA\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#area2totally-nssa","text":"\u5728\u4e0a\u9762\u7684\u9700\u6c42\u4e2d\uff0carea2\u53d8\u6210\u4e00\u4e2a\u975e\u5e38\u7279\u6b8a\u7684\u533a\u57df\uff1aNSSA\uff0c\u8be5\u533a\u57df\u5185\u6cdb\u6d2a\u7684LSA\u5176\u5b9e\u662f\u53ef\u4ee5\u8fdb\u4e00\u6b65\u51cf\u5c11\u7684\u3002\u65e2\u7136area2\u5df2\u7ecf\u4eceR3\u83b7\u53d6\u4e00\u6761\u7f3a\u7701\u8def\u7531\uff0c\u901a\u8fc7\u8fd9\u6761\u7f3a\u7701\u8def\u7531\u80fd\u591f\u7a7f\u8d8a\u9aa8\u5e72\u533a\u57df\u5230\u8fbeAS\u5916\u90e8\uff0c\u90a3\u4e48\u4e3a\u4ec0\u4e48\u4e0d\u8fdb\u4e00\u6b65\u628a\u63cf\u8ff0\u533a\u57df\u95f4\u8def\u7531\u76843\u7c7bLSA\u4e5f\u4e00\u5e76\u6291\u5236\u6389\u5462\uff1f\u8fd9\u5c31\u51fa\u73b0\u4e86\u6700\u540e\u4e00\u79cd\u7279\u6b8a\u533a\u57df\uff1a Totally-NSSA\u3002 R3\u7684\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a [R3] ospf 1 \u4e00\u65e6\u5c06area2\u53d8\u6210Totally-NSSA\uff0carea2\u7684ABR\u2014\u2014\u4e5f\u5c31\u662fR3\u5c06\u4f1a\u963b\u63213\u7c7b\u30014\u7c7b\u548c5\u7c7bLSA\u8fdb\u5165\u8be5\u533a\u57df\uff0c \u540c\u65f6\u8fd8\u4f1a\u5411\u8be5\u533a\u57df\u4e0b\u53d1\u4e00\u6761\u4f7f\u75283\u7c7bLSA\u63cf\u8ff0\u7f3a\u7701\u8def\u7531\u3002\u5f53\u7136\u8be5\u533a\u57df\u4f9d\u7136\u662f\u53ef\u4ee5\u4ece\u533a\u57df\u672c\u5730\u6ce8\u5165\u5916\u90e8\u8def\u7531\u7684\uff1a \u6b64\u65f6R4\u8def\u7531\u8868\u4e2d\u7684OSPF\u8def\u7531\uff1a [R4]display ip routing-table protocol ospf Destination/Mask Proto Pre Cost Flags NextHop Interface 0.0.0.0/0 OSPF 10 2 D 10.1.34.3 GigabitEthernet0/0/0 R4\u7684\u8def\u7531\u8868\u5df2\u7ecf\u88ab\u6700\u5927\u9650\u5ea6\u7684\u7b80\u5316\u4e86\uff0c\u6b64\u65f6\u5728\u8def\u7531\u8868\u4e2d\u4ec5\u6709\u4e00\u6761\u7f3a\u7701\u8def\u7531\u3002\u8fd9\u6761\u7f3a\u7701\u8def\u7531\u5b9e\u8d28\u4e0a\u662f\u7531 R3\u4e0b\u53d1\u7684\uff0c\u4f7f\u75283\u7c7bLSA\u63cf\u8ff0\u3002\u67e5\u770b\u4e00\u4e0bR4\u7684LSDB\uff1a \u5728R4\u7684LSDB\u4e2d\uff0c\u9664\u4e86\u4e00\u6761\u63cf\u8ff0\u7f3a\u7701\u8def\u7531\u76843\u7c7bLSA\uff0c\u6ca1\u6709\u5176\u4ed6\u76843\u7c7bLSA\u548c4\u30015\u7c7bLSA\u4e86\u3002","title":"\u5c06area2\u914d\u7f6e\u4e3aTotally-NSSA"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospflsa","text":"3.5.5 OSPF \u9ad8 \u7ea7 \u6700\u8fd1\u6709\u540c\u4e8b\u5728HI 3MS\u4e0a\u95ee\u4e86\u4e2a\u5173\u4e8eOSPF\u7684\u95ee\u9898\uff08 OSPF\u542f\u7528filter-policy import\u540e\u65e0\u6cd5\u6536\u5230NSSA\u8def\u7531\u95ee\u9898 \uff09\uff0c\u7b80\u5355\u7684\u8bf4\uff0c\u573a\u666f\u5982\u4e0b\u56fe\u6240\u793a\uff0cR1\u4e0eR2\u5728Area0\u4e2d\u5efa\u7acb\u4e86OSPF\u90bb\u63a5\u5173\u7cfb\uff0c\u800cR2\u4e0eR3\u5728Area1\u4e2d\u5efa\u7acb\u4e86OSPF \u90bb\u63a5\u5173\u7cfb\u3002Area1\u88ab\u914d\u7f6e\u4e3a\u4e86NSSA\uff0c\u540c\u65f6R3\u5c06\u5916\u90e8\u8def\u7531100.1.1.0/24\u91cd\u53d1\u5e03\uff08Import-route\uff09\u5230\u4e86OSPF\u4e2d\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0cR1\u5e94\u8be5\u80fd\u5b66\u4e60\u5230OSPF\u533a\u57df\u95f4\u8def\u753123.1.1.0/24\uff0c\u4ee5\u53ca\u5916\u90e8\u8def\u7531100.1.1.0/24\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6b64\u65f6\u5982\u679c\u5e0c\u671bR1\u7684\u8def\u7531\u8868\u4e2d\u4eceOSPF\u83b7\u53d6\u5230\u7684\u8def\u7531\u53ea\u51fa\u73b0100.1.1.0/24\uff0c\u5176\u4ed6\u7684OSPF\u8def\u7531\u5168\u90e8\u8fc7\u6ee4\u6389\uff0c\u90a3\u4e48R1\u53ef\u4ee5\u91c7\u7528\u5982\u4e0b\u914d\u7f6e\uff1a \u8fd9\u4e9b\u914d\u7f6e\u770b\u8d77\u6765\u6ca1\u5565\u95ee\u9898\uff0c\u4f46\u662f\u6267\u884c\u5b8c\u6210\u540e\uff0c\u4f60\u4f1a\u53d1\u73b0R1\u7684\u8def\u7531\u8868\u4e2d\u5e76\u6ca1\u6709\u5230\u8fbe100.1.1.0/24\u7684\u8def\u7531\u3002\u4e3a\u4ec0 \u4e48\u914d\u7f6e\u4e2d\u660e\u660e\u5141\u8bb8\u4e86100.1.1.0/24\u8def\u7531\uff0c\u4f46\u662f\u8fd9\u6761\u8def\u7531\u5374\u88ab\u8fc7\u6ee4\u6389\u4e86\u5462\uff1f\u5176\u5b9e\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u57fa\u7840\u7684OSPF\u95ee\u9898\u3002\u4ea7\u751f\u8fd9\u4e2a\u73b0\u8c61\u7684\u5173\u952e\u5728\u4e8eOSPF FA\uff08Forwarding Address\uff0c\u8f6c\u53d1\u5730\u5740\uff09\u3002\u7b80\u5355\u5730\u8bf4\uff0cFA\u662fOSPF Type- 5\u3001Type-7 LSA\u624d\u4f1a\u643a\u5e26\u7684\u4e00\u4e2a\u5b57\u6bb5\uff0c\u4e3b\u8981\u7528\u4e8e\u89c4\u907f\u6b21\u4f18\u8def\u5f84\u95ee\u9898\u3002","title":"OSPF\u5404\u79cdLSA\u7c7b\u578b\u53ca\u7279\u6b8a\u533a\u57df\u5c0f\u7ed3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#faospf","text":"\u90fd\u77e5\u9053OSPF\u8def\u7531\u5668\u662f\u4f9d\u636eLSA\u8fdb\u884c\u8def\u7531\u8ba1\u7b97\u7684\uff0c\u800c\u6839\u636eType-5\u3001Type-7 LSA\uff0c\u8def\u7531\u5668\u53ef\u8ba1\u7b97\u51fa\u5230\u8fbe\u57df\u5916\u7684\u8def\u7531\u3002\u4ee5Type-5 LSA\u4e3a\u4f8b\uff0c\u8def\u7531\u5668\u4f7f\u7528\u67d0\u4e2aType-5 LSA\u8ba1\u7b97\u5916\u90e8\u8def\u7531\u65f6\uff0c\u5982\u679c\u53d1\u73b0\u8be5LSA\u6240\u643a\u5e26\u7684FA\u4e3a0.0.0.0\uff0c\u90a3\u4e48\u8def\u7531\u5668\u4f1a\u5c06\u5230\u8fbe\u53d1\u5e03\u8be5LSA\u7684ASBR\u7684\u4e0b\u4e00\u8df3\u89c6\u4e3a\u5230\u8fbe\u8fd9\u4e2a\u57df\u5916\u7f51\u6bb5\u7684\u4e0b\u4e00\u8df3\uff1b\u800c\u5982\u679c\u8be5LSA\u6240\u643a\u5e26\u7684FA\u4e3a\u975e0.0.0.0\uff0c\u90a3\u4e48\u8def\u7531\u5668\u4f1a\u5c06\u5230\u8fbe\u8be5FA\u7684\u4e0b\u4e00\u8df3\u89c6\u4e3a\u5230\u8fbe\u8fd9\u4e2a\u57df\u5916\u7f51\u6bb5\u7684\u4e0b\u4e00\u8df3\u3002 \u7b80\u5355\u70b9\u8bf4\uff0c\u5c31\u662f\u5982\u679cType-5 LSA\u7684FA\u4e3a0.0.0.0\uff0c\u6211\u5c31\u4eceASBR\u51fa\u53bb\u3001\u5230\u8fbe\u5bf9\u5e94\u7684\u5916\u90e8\u7f51\u6bb5\uff1b\u5982\u679cType- 5 LSA\u7684FA\u4e3a\u975e0.0.0.0\uff0c\u6211\u5c31\u8ba4\u4e3a\u8fd9\u4e2aFA\u5c31\u662f\u5230\u8fbe\u5916\u90e8\u7f51\u6bb5\u7684\u201c\u51fa\u53e3\u201d\u3002\u800c\u4e14\uff0c\u5f53Type-5 LSA\u7684FA\u4e3a\u975e0.0.0.0\u65f6\uff0cOSPF\u8def\u7531\u5668\u4f1a\u5728\u5176\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u5230\u8fbeFA\u7684\u8def\u7531\uff0c\u4ec5\u5f53\u5b83\u53d1\u73b0\u8def\u7531\u8868\u4e2d\u5b58\u5728\u5230\u8fbe\u8fd9\u4e2aFA \u7684OSPF\u5185\u90e8\u8def\u7531\u65f6\uff08OSPF\u533a\u57df\u5185\u8def\u7531\u6216OSPF\u533a\u57df\u95f4\u8def\u7531\uff09\uff0c\u8def\u7531\u5668\u624d\u4f1a\u4f7f\u7528\u8fd9\u4e2aType-5 LSA\u8fdb\u884c\u5916\u90e8\u8def\u7531\u8ba1\u7b97\uff0c\u5426\u5219\u5c06\u5ffd\u7565\u8fd9\u4e2aLSA\u3002","title":"FA\u5728OSPF\u5916\u90e8\u8def\u7531\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u7684\u5f71\u54cd"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_110","text":"\u5728\u4e0a\u9762\u63d0\u5230\u7684\u4f8b\u5b50\u4e2d\uff0cR3\u5c06\u5916\u90e8\u8def\u7531100.1.1.0/24\u5f15\u5165OSPF\u540e\uff0c\u5b83\u4f5c\u4e3aASBR\u5c06\u5411Area1\u4e2d\u6ce8\u5165Type- 7 LSA\uff0c\u800cR2\u4f5c\u4e3aABR\uff0c\u5219\u4f1a\u5c06\u8be5LSA\u8f6c\u6362\u6210Type-5 LSA\u5e76\u6ce8\u5165Area0\uff0c\u5728\u6267\u884c\u8f6c\u6362\u7684\u8fc7\u7a0b\u4e2d\uff0c\u7f3a\u7701\u65f6 R2\u4f1a\u4fdd\u7559Type-7 LSA\u7684FA\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u5728R1\u4e0a\u67e5\u770bType-5 LSA\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a \u7559\u610f\u5230\u7528\u4e8e\u63cf\u8ff0\u5916\u90e8\u8def\u7531100.1.1.0/24\u7684Type-5 LSA\u7684FA\u4e3a23.1.1.3\uff08R3\u7684\u63a5\u53e3IP\u5730\u5740\uff09\uff0c\u663e\u7136\u8fd9\u662f\u4e00 \u4e2a\u975e0.0.0.0\u7684\u5730\u5740\u3002R1\u5fc5\u987b\u5728\u5176\u8def\u7531\u8868\u4e2d\u53d1\u73b0\u5230\u8fbe23.1.1.3\u7684OSPF\u5185\u90e8\u8def\u7531\uff0c\u624d\u4f1a\u4f7f\u7528\u8be5LSA\u8ba1\u7b97\u5230\u8fbe100.1.1.0/24\u7684\u5916\u90e8\u8def\u7531\uff0c\u5426\u5219\u5c06\u5ffd\u7565\u8be5Type-5 LSA\u3002 \u800cR1\u6240\u914d\u7f6e\u7684\u5165\u7ad9filter-policy\u867d\u7136\u5141\u8bb8\u4e86\u5916\u90e8\u8def\u7531100.1.1.0/24\uff0c\u4f46\u662f\u5374\u5c06\u5176\u4ed6\u6240\u6709\u7684OSPF\u8def\u7531\u5168\u90e8\u8fc7\u6ee4\uff0c\u5176\u4e2d\u5305\u62ec23.1.1.0/24\u8fd9\u6761\u533a\u57df\u95f4\u8def\u7531\uff0c\u56e0\u6b64\u867d\u7136R1\u7684OSPF LSDB\u4e2d\u5b58\u5728\u5173\u4e8e100.1.1.0/24\u7684Type-5 LSA\uff0c\u4f46\u662f\u5b83\u5374\u65e0\u6cd5\u8ba1\u7b97\u51fa\u5916\u90e8\u8def\u7531\u3002\u8fd9\u5c31\u662f\u95ee\u9898\u7684\u6839\u56e0\u3002 \u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u529e\u6cd5\u6709\u51e0\u4e2a\uff0c\u4f8b\u5982\uff0c\u53ef\u4ee5\u8ba9R2\u5c06Type-7 LSA\u8f6c\u6362\u6210Type-5 LSA\u65f6\uff0c\u628aFA\u5b57\u6bb5\u503c\u64e6\u9664\uff0c \u6539\u5199\u4e3a0.0.0.0\uff0cR2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u8fd9\u6837\u4e00\u6765\uff0cR1\u7684\u8def\u7531\u8868\u4e2d\u4fbf\u4f1a\u51fa\u73b0100.1.1.0/24\u8def\u7531\uff0c\u800c\u4e14\u53ea\u4f1a\u51fa\u73b0\u8fd9\u4e00\u6761OSPF\u8def\u7531\uff08\u5176\u4ed6\u8def\u7531\u90fd\u88ab \u8fc7\u6ee4\u4e86\uff09\u3002R1\u5728\u4f7f\u7528\u8be5Type-5 LSA\u8ba1\u7b97\u5230\u8fbe100.1.1.0/24\u7684\u5916\u90e8\u8def\u7531\u65f6\uff0c\u4ec5\u9700\u4fdd\u8bc1\u81ea\u5df1\u80fd\u591f\u5230\u8fbeASBR \uff08\u4ea7\u751f\u8be5Type-5 LSA\u7684ASBR\u4e3aR2\uff09\u5373\u53ef\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"\u56de\u5230\u8fd9\u4e2a\u4f8b\u5b50"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospftype-5-lsatype-7-lsafa","text":"Type-5 LSA\u901a\u8fc7\u5f15\u5165\u5916\u90e8\u8def\u7531\u751f\u6210\u3002\u5f53\u88ab\u5f15\u5165\u8def\u7531\u7684\u51fa\u63a5\u53e3\u5728OSPF\u4e2d\u6fc0\u6d3b\u65f6\uff08\u6ce8\uff1a\u4e0d\u80fd\u88ab\u914d\u7f6e\u4e3aSilent- Interface\uff09\uff0c\u800c\u4e14\u8be5\u51fa\u63a5\u53e3\u4e3aBroadcast\u7c7b\u578b\uff0c\u5219FA\u4e3a\u88ab\u5f15\u5165\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5730\u5740\uff1b\u5426\u5219\u53d6\u503c\u4e3a0\u3002Type-7 LSA\u7684FA\u53d6\u503c\u4e0d\u4f1a\u4e3a0\u3002\u5f53\u88ab\u5f15\u5165\u8def\u7531\u7684\u51fa\u63a5\u53e3\u5728\u540c\u4e00\u4e2aNSSA\u5185\u6fc0\u6d3b\uff0c\u800c\u4e14\u8be5\u51fa\u63a5\u53e3\u4e3a Broadcast\u7c7b\u578b\uff0c\u5219FA\u4e3a\u88ab\u5f15\u5165\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5730\u5740\uff1b\u5426\u5219\uff1a \u5982\u679cASBR\u5728\u8be5NSSA\u5185\u5b58\u5728loopback\u63a5\u53e3\uff0c\u5219FA\u7684\u503c\u9009\u53d6loopback\u63a5\u53e3\u7684IP\u5730\u5740\u3002 \u5982\u679c\u6ca1\u6709loopback\u63a5\u53e3\uff0c\u5219FA\u7684\u503c\u9009\u53d6ASBR\u5728\u8be5NSSA\u5185\u7b2c\u4e00\u4e2aUP\u7684\u63a5\u53e3\u7684IP\u5730\u5740\u3002 \u5728\u672c\u4f8b\u4e2d\uff0cR3\u4f5c\u4e3aNSSA\u7684ASBR\u5f15\u5165\u4e86\u5916\u90e8\u8def\u7531100.1.1.0/24\uff0c\u5b83\u4f1a\u5411Area1\u4e2d\u6ce8\u5165Type-7 LSA\uff0c\u5e76\u4e14\u5c06\u8be5LSA\u7684FA\u8bbe\u7f6e\u4e3a\u81ea\u5df1\u5728Area1\u5185\u7b2c\u4e00\u4e2aUP\u7684\u63a5\u53e3\u7684IP\u5730\u5740\u2014\u201423.1.1.3\u3002","title":"OSPF\u5f15\u5165\u5916\u90e8\u8def\u7531\u751f\u6210Type-5 LSA\u6216Type-7 LSA\u65f6\uff0cFA\u7684\u586b\u5199\u89c4\u5219\u662f\u4ec0\u4e48"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_111","text":"S5300 \u4ea4\u6362\u673a\u5806\u53e0 \u7406\u8bba\u90e8\u5206 \u5806\u53e0\uff08iStack\uff09/\u96c6\u7fa4\uff08CSS\uff09\u7684\u6280\u672f\u4f7f\u5f97\u591a\u53f0\u7269\u7406\u8bbe\u5907\u80fd\u591f\u534f\u540c\u5de5\u4f5c\uff0c\u4ece\u800c\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u53f0\u8bbe\u5907\uff0c\u8fd9\u9879\u6280\u672f\u5c06\u5927\u5927\u7b80\u5316\u6211\u4eec\u7684\u7f51\u7edc\u903b\u8f91\u67b6\u6784\u3001\u7f51\u7edc\u914d\u7f6e\u548c\u8bbe\u5907\u7ba1\u7406\u3002\u4f8b\u5982\u4e24\u53f0\u539f\u672c\u72ec\u7acb\u5de5\u4f5c\u7684\u4ea4\u6362\u673a\u5728\u90e8\u7f72\u4e86\u5806\u53e0/ \u96c6\u7fa4\u6280\u672f\u4e4b\u540e\uff0c\u53ef\u4ee5\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u53f0\u8bbe\u5907\uff0c\u76f8\u5f53\u4e8e\u4e00\u53f0\u4ea4\u6362\u673a\u3002ATAE3.0/E9000\u4e5f\u652f\u6301\u4ea4\u6362\u677f\u5361\u7684\u5806\u53e0\uff0c \u4e24\u5757\u4ea4\u6362\u677f\u5361\u4e5f\u53ef\u4ee5\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u53f0\u4ea4\u6362\u673a\u3002 \u5806\u53e0\u6280\u672f\u4e3b\u8981\u662f\u5e94\u7528\u4e8e\u534e\u4e3a\u76d2\u5f0f\u4ea4\u6362\u673a\uff0c\u800c\u96c6\u7fa4\u6280\u672f\u5219\u4e3b\u8981\u5e94\u7528\u4e8e\u534e\u4e3a\u6846\u5f0f\u4ea4\u6362\u673a\uff0c\u4e24\u8005\u6280\u672f\u539f\u7406\u4e0d\u540c\uff0c\u4f46\u662f\u6838\u5fc3\u601d\u60f3\u662f\u4e00\u6837\u7684\u3002 \u5982\u4e0a\u56fe\u6240\u793a\uff0cSW1\u53caSW2\u5747\u662fS5300-EI\u4ea4\u6362\u673a\uff0c\u5b83\u4eec\u5747\u914d\u5907\u4e86\u5806\u53e0\u5361\uff0c\u5e76\u4f7f\u7528\u5806\u53e0\u7ebf\u7f06\u8fdb\u884c\u8fde\u63a5\u3002\u5728\u5b8c\u6210\u5806\u53e0\u7cfb\u7edf\u7684\u7ec4\u5efa\u540e\uff0c\u8fd9\u4e24\u53f0\u72ec\u7acb\u7684\u4ea4\u6362\u673a\u5c06\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u53f0\u8bbe\u5907\uff0c\u4f60\u53ef\u4ee5\u7b80\u5355\u5730\u5c06\u8be5\u5806\u53e0\u7cfb\u7edf\u60f3\u8c61\u4e3a\u62e5\u6709\u4e24\u4e2a\u4e1a\u52a1\u677f\u5361\u7684\u6846\u5f0f\u4ea4\u6362\u673a\u3002 S5300-EI\u4ea4\u6362\u673a\u53ea\u652f\u6301\u4f7f\u7528\u5806\u53e0\u5361\u7684\u65b9\u5f0f\u8fdb\u884c\u5806\u53e0\u3002\u5806\u53e0\u5361\u5806\u53e0\u7684\u65b9\u5f0f\u5fc5\u987b\u914d\u5957\u4f7f\u7528ES5D00ETPC00\u5806\u53e0\u540e\u63d2\u5361\u548cPCIe\u7ebf\u7f06\u3002\u9700\u6ce8\u610f\u7684\u662fES5D00ETPC00\u5806\u53e0\u540e\u63d2\u5361\u4e0d\u652f\u6301\u70ed\u63d2\u62d4\uff0c\u56e0\u6b64\u5b89\u88c5\u5806\u53e0\u5361\u65f6\uff0c\u9700\u5148\u5c06\u8bbe\u5907\u4e0b\u7535\u3002\u5806\u53e0\u5361\u7684\u5b89\u88c5\u5982\u4e0b\u56fe\u6240\u793a\uff1a ES5D00ETPC00\u63d0\u4f9b2\u4e2a12Gbit/s\u901f\u7387\u7684\u7535\u63a5\u53e3\u7528\u4e8e\u8bbe\u5907\u95f4\u5806\u53e0\u5361\u5806\u53e0\uff0c\u4f7f\u7528\u4e13\u7528\u7684PCIe\u7535\u7f06\u8fdb\u884c\u8fde\u63a5\uff0c PCIe\u7535\u7f06\u7684\u5916\u89c2\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5806\u53e0\u7ebf\u7f06\u7684\u94fe\u63a5\u5982\u4e0b\u56fe\uff08\u4ee5\u94fe\u5f62\u94fe\u63a5\u4e3a\u4f8b\uff09\uff1a \u4f7f\u7528\u5806\u53e0\u5361\u5806\u53e0\u65f6\uff0c\u53ef\u4ee5\u8fde\u4e00\u6761\u5806\u53e0\u7ebf\uff0c\u4e5f\u53ef\u4ee5\u8fde\u4e24\u6761\uff08\u5f53\u7136\uff0c\u5efa\u8bae\u8fde\u63a5\u4e24\u6839\u7ebf\u7f06\uff09\uff0c\u603b\u4e4b\u662f\u8bbe\u5907A\u7684Stack1 \u63a5\u53e3\u8fde\u8bbe\u5907B\u7684Stack2\u63a5\u53e3\uff0c\u8bbe\u5907A\u7684Stack2\u63a5\u53e3\u8fde\u8bbe\u5907B\u7684Stack1\u63a5\u53e3\uff0c\u4e5f\u5c31\u662f\u4ea4\u53c9\u8fde\u7ebf\u3002 \u914d\u7f6e\u6307\u5bfc \u6b64\u5904\u4ee5\u4e24\u53f0S5300-EI\u4ea4\u6362\u673a\uff08SW1\u53caSW2\uff09\u90e8\u7f72\u5806\u53e0\u4e3a\u4f8b\uff0c\u8bb2\u8ff0\u5806\u53e0\u7684\u6b65\u9aa4\uff1a","title":"\u4ea4\u6362\u63d0\u9ad8"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#sw1sw2es5d00etpc00","text":"ES5D00ETPC00\u5806\u53e0\u540e\u63d2\u5361\u4e0d\u652f\u6301\u70ed\u63d2\u62d4\uff0c\u5982\u679c\u8bbe\u5907\u5904\u4e8e\u4e0a\u7535\u72b6\u6001\uff0c\u5b89\u88c5\u524d\u9700\u8981\u5148\u5c06\u8bbe\u5907\u4e0b\u7535\u3002\u5806\u53e0\u5361\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u624d\u80fd\u8fdb\u884c\u76f8\u5173\u914d\u7f6e\u3002","title":"SW1\u53caSW2\u5148\u4e0b\u7535\uff0c\u5b89\u88c5\u201cES5D00ETPC00\u5806\u53e0\u540e\u63d2\u5361\u201d\uff0c\u7136\u540e\u5c06\u8bbe\u5907\u4e0a\u7535\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#id","text":"SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u8bf4\u660e\uff1a\u591a\u53f0\u7269\u7406\u4ea4\u6362\u673a\u53ef\u4ee5\u901a\u8fc7\u90e8\u7f72\u5806\u53e0\u6280\u672f\u5e76\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u53f0\u4ea4\u6362\u673a\uff0c\u6211\u4eec\u5c06\u8fd9\u4e9b\u7269\u7406\u4ea4\u6362\u673a\u79f0\u4e3a\u5806\u53e0\u6210\u5458\u4ea4\u6362\u673a\u3002\u5806\u53e0ID\u4e5f\u88ab\u79f0\u4e3a\u6210\u5458\u4ea4\u6362\u673a\u7684\u69fd\u4f4d\u53f7\uff08Slot ID\uff09\uff0c\u7528\u6765\u6807\u8bc6\u548c\u7ba1\u7406\u6210\u5458\u4ea4\u6362\u673a\uff0c\u5806\u53e0\u4e2d\u6240\u6709\u6210\u5458\u4ea4\u6362\u673a\u7684\u5806\u53e0ID\u90fd\u662f\u552f\u4e00\u7684\u3002\u5f53\u5806\u53e0\u7cfb\u7edf\u5efa\u7acb\u8d77\u6765\u4e4b\u540e\uff0c\u5806\u53e0ID\u8fd8\u7528\u4e8e\u4f53\u73b0\u6210\u5458\u4ea4\u6362\u673a\u5bf9\u5e94\u7684\u201c\u69fd\u4f4d\u53f7\u201d\uff08\u5728\u4ea4\u6362\u673a\u5806\u53e0\u4e4b\u524d\uff0c\u6bcf\u53f0\u8bbe\u5907\u90fd\u662f\u72ec\u7acb\u7684\u4e2a\u4f53\uff0c\u5806\u53e0\u4e4b\u540e\uff0c\u6bcf\u53f0\u8bbe\u5907\u5c31\u76f8\u5f53\u4e8e\u5806\u53e0\u7cfb\u7edf\u7684\u4e00\u4e2a\u69fd\u4f4d\uff09\u3002 \u7f3a\u7701\u60c5\u51b5\u4e0b\u5806\u53e0ID\u4e3a0\uff0c\u5f53\u7136\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4stack slot 0 renumber\u6765\u4fee\u6539\u8fd9\u4e2a\u503c\uff0c\u4fee\u6539\u4e4b\u540e\uff0c\u5fc5\u987b\u91cd\u542f\u4ea4\u6362\u673a\uff0c\u65b0\u7684\u5806\u53e0ID\u624d\u4f1a\u751f\u6548\u3002\u5982\u679c\u53c2\u4e0e\u5806\u53e0\u7684\u4ea4\u6362\u673a\u7684\u5806\u53e0ID\u90fd\u4e3a0\uff0c\u90a3\u4e48\u5728\u5806\u53e0\u7cfb\u7edf\u5efa\u7acb\u65f6\uff0c\u7531 Master\u4ea4\u6362\u673a\u6765\u5206\u914d\u5806\u53e0ID\uff0c\u4ee5\u786e\u4fdd\u5806\u53e0ID\u7684\u552f\u4e00\u6027\u3002 \u5806\u53e0\u4f18\u5148\u7ea7\u662f\u6210\u5458\u4ea4\u6362\u673a\u7684\u4e00\u4e2a\u5806\u53e0\u5c5e\u6027\uff0c\u4e3b\u8981\u7528\u4e8e\u89d2\u8272\u9009\u4e3e\u8fc7\u7a0b\u4e2d\u786e\u5b9a\u6210\u5458\u4ea4\u6362\u673a\u7684\u89d2\u8272\uff0c\u4f18\u5148\u7ea7\u503c\u8d8a\u5927\u8868\u793a\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\u5f53\u9009\u4e3a\u4e3b\u4ea4\u6362\u673a\u7684\u53ef\u80fd\u6027\u8d8a\u5927\u3002 \u5806\u53e0\u7cfb\u7edf\u5efa\u7acb\u5b8c\u6210\u540e\uff0c\u5982\u679c\u67d0\u53f0\u4ea4\u6362\u673a\u7684\u5806\u53e0ID\u4e3a1\uff0c\u90a3\u4e48\u5806\u53e0\u4e4b\u524d\u8be5\u8bbe\u5907\u7684\u63a5\u53e3\u5982\u679c\u7f16\u53f7\u4e3aGE0/0/1\uff0c\u5219\u5806\u53e0\u540e\u53d8\u4e3aGE1/0/1\uff08\u4e09\u4e2a\u6570\u5b57\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6570\u5b57\u4e3a\u5806\u53e0ID\uff09\u3002","title":"\u8bbe\u5907\u542f\u52a8\u540e\uff0c\u4f7f\u80fd\u5806\u53e0\u529f\u80fd\u5e76\u914d\u7f6e\u6210\u5458\u4ea4\u6362\u673a\u7684\u5806\u53e0ID\u548c\u4f18\u5148\u7ea7\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#sw1sw2pciesw1sw2","text":"","title":"\u5c06SW1\u53caSW2\u4e0b\u7535\uff0c\u4f7f\u7528PCIe\u7ebf\u7f06\u6309\u7167\u89c4\u8303\u8fde\u63a5\u5806\u53e0\u7aef\u53e3\uff0c\u7136\u540e\u5c06\u8bbe\u5907\u4e0a\u7535\uff08\u5148\u4e0a\u7535SW1\uff0c\u518d\u4e0a\u7535SW2\uff09\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_112","text":"\u6b64\u65f6\u767b\u5f55\u4e00\u53f0\u6210\u5458\u4ea4\u6362\u673a\u5373\u53ef\u7ba1\u7406\u6574\u4e2a\u5806\u53e0\u7cfb\u7edf\u3002","title":"\u8bbe\u5907\u5b8c\u6210\u542f\u52a8\u540e\uff0c\u5806\u53e0\u7cfb\u7edf\u5c06\u4f1a\u5efa\u7acb\u8d77\u6765\uff0c\u53ef\u4ee5\u4f7f\u7528\u76f8\u5173\u547d\u4ee4\u67e5\u770b\u5806\u53e0\u7cfb\u7edf\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mad","text":"\u4e24\u53f0\u4ea4\u6362\u673a\u7ec4\u5efa\u5806\u53e0\u7cfb\u7edf\u540e\uff0c\u5b83\u4eec\u4fbf\u5f62\u6210\u903b\u8f91\u4e0a\u7684\u4e00\u4e2a\u6574\u4f53\uff0c\u5982\u679c\u5806\u53e0\u7ebf\u7f06\u5168\u90e8\u53d1\u751f\u6545\u969c\uff0c\u90a3\u4e48\u5806\u53e0\u7cfb\u7edf\u5c06\u4f1a\u5206\u88c2\uff0c\u8fd9\u4e24\u53f0\u6210\u5458\u4ea4\u6362\u673a\u53d8\u6210\u4e24\u4e2a\u72ec\u7acb\u7684\u4e2a\u4f53\uff0c\u800c\u4e14\u5b83\u4eec\u7684\u914d\u7f6e\u8fd8\u662f\u76f8\u540c\u7684\uff0c\u6b64\u65f6\u5c31\u4f1a\u53d1\u751f\u5404\u79cd\u95ee\u9898\uff0c\u4f8b\u5982IP\u5730\u5740\u51b2\u7a81\u95ee\u9898\u7b49\u3002\u591a\u4e3b\u68c0\u6d4bMAD\uff08Multi-Active Detection\uff09\uff0c\u662f\u4e00\u79cd\u68c0\u6d4b\u548c\u5904\u7406\u5806\u53e0\u5206\u88c2\u7684\u534f\u8bae\uff0c\u7528\u4e8e\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cSW1\u53caSW2\u5b8c\u6210\u5806\u53e0\u7cfb\u7edf\u7684\u7ec4\u5efa\u540e\uff0c\u5728\u4ea4\u6362\u673a\u4e4b\u95f4\u589e\u52a0\u4e00\u6761\u8fde\u7ebf\uff08\u666e\u901a\u7684\u4ee5\u592a\u7f51\u7ebf\u6216\u5149\u7ea4\uff09\uff0c\u5c06\u5806\u53e0\u7ec4\u4e2d\u7684SW1\u7684GE0/0/20\u63a5\u53e3\u4e0eSW2\u7684GE1/0/20\u63a5\u53e3\u4e92\u8054\uff08\u6b64\u65f6SW2\u7684\u65b0\u5806\u53e0ID\u5df2\u7ecf\u751f\u6548\uff09\uff0c\u8fd9\u6761\u7ebf\u7f06\u5c06\u88ab\u914d\u7f6e\u4e3aMAD\u7ebf\u7f06\uff08\u5b83\u5e76\u4e0d\u4f1a\u627f\u8f7d\u4efb\u4f55\u4e1a\u52a1\u6d41\u91cf\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728\u73af\u8def\uff09\uff0c\u5f53\u5806\u53e0\u7cfb\u7edf\u5206\u88c2\u65f6\uff0c \u4e24\u53f0\u4ea4\u6362\u673a\u901a\u8fc7\u8be5\u6761\u7ebf\u7f06\u4ea4\u4e92\u534f\u5546\u62a5\u6587\uff0c\u534f\u5546\u5b8c\u6210\u540e\uff0c\u5176\u4e2d\u4e00\u53f0\u4ea4\u6362\u673a\u4f1a\u7531\u4e8e\u7ade\u4e89\u5931\u8d25\u81ea\u52a8\u5c06\u6240\u6709\u4e1a\u52a1\u63a5\u53e3\u5173\u95ed\uff0c\u4ece\u800c\u89c4\u907f\u5806\u53e0\u5206\u88c2\u540e\u7684IP\u5730\u5740\u51b2\u7a81\u7b49\u95ee\u9898\u3002 MAD\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u68c0\u67e5\u4e00\u4e0b\uff1a","title":"\u5806\u53e0\u7cfb\u7edf\u5efa\u7acb\u5b8c\u6210\u540e\uff0c\u914d\u7f6eMAD\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_113","text":"\u5806\u53e0\u7cfb\u7edf\u7ec4\u5efa\u5b8c\u6210\u540e\uff0c\u52a1\u5fc5\u4f7f\u7528display stack\u547d\u4ee4\u786e\u8ba4\u5806\u53e0\u7cfb\u7edf\u7684\u72b6\u6001\u3002 \u5806\u53e0\u7cfb\u7edf\u7ec4\u5efa\u5b8c\u6210\u540e\uff0c\u6240\u6709\u7684\u6210\u5458\u4ea4\u6362\u673a\u5728\u903b\u8f91\u4e0a\u5c31\u662f\u4e00\u4e2a\u6574\u4f53\uff0c\u56e0\u6b64\u5728\u505a\u7f51\u7edc\u89c4\u5212\u65f6\uff0c\u9700\u6ce8\u610f\u6b64\u65f6\u6574\u4e2a\u5806\u53e0\u7cfb\u7edf\u5c31\u662f\u201c\u4e00\u53f0\u5927\u4ea4\u6362\u673a\u201d\u3002 S6300 \u4ea4\u6362\u673a\u5806\u53e0 \u7406\u8bba\u90e8\u5206","title":"\u6ce8\u610f\u4e8b\u9879\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_114","text":"S63\u5168\u7cfb\u5217\u4ea4\u6362\u673a\u652f\u6301\u5806\u53e0\u7279\u6027\u3002S63\u4ea4\u6362\u673a\u7cfb\u5217\u4e0d\u9700\u8981\u989d\u5916\u914d\u7f6e\u5806\u53e0\u5361\uff0c\u53ef\u4ee5\u4f7f\u7528\u524d\u9762\u677f\u4e0a\u4efb\u610f\u7684 10GE\u4e1a\u52a1\u53e3\u5806\u53e0\uff0c\u5806\u53e0\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a \u5149\u7ea4\u8fde\u63a5\uff0c\u652f\u6301\u957f\u8ddd40km\u5806\u53e0\u3002 \u4e13\u7528\u5806\u53e0\u7ebf\u7f06\u8fde\u63a5\uff0c\u5806\u53e0\u7ebf\u7f06\u6709\u5982\u4e0b\u4e09\u79cd\u7c7b\u578b\uff1a S6300\uff0cLS6MCAS01\uff0cSFP+ \u5806\u53e0\u7ebf\u7f06\uff08100cm\uff0c\u542b\u6709\u4e24\u4e2a\u5806\u53e0\u6a21\u5757\uff09\u3002 S6300\uff0cLS6MCAS03\uff0cSFP+ \u5806\u53e0\u7ebf\u7f06\uff08300cm\uff0c\u542b\u6709\u4e24\u4e2a\u5806\u53e0\u6a21\u5757\uff09\u3002 S6300\uff0cLS6MCAS10\uff0cSFP+ \u5806\u53e0\u7ebf\u7f06\uff081000cm\uff0c\u542b\u6709\u4e24\u4e2a\u5806\u53e0\u6a21\u5757\uff09\u3002 \u4ee5LS6MCAS01\u4e13\u7528\u5806\u53e0\u7ebf\u7f06\uff1aSFP+Stacking Cable\uff08100cm, \u542b\u4e24\u4e2a\u5806\u53e0\u5149\u6a21\u5757\uff09\u4e3a\u4f8b\uff0c\u5916\u89c2\u5982\u4e0b\uff08\u7ebf\u7f06\u4e24\u5934\u5404\u81ea\u5e26\u4e00\u4e2a\u5149\u6a21\u5757\uff0c\u56fe\u4e3a\u7ebf\u7f06\u4e00\u7aef\uff09\uff1a","title":"\u5806\u53e0\u65b9\u5f0f\u53ca\u7ebf\u7f06"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#stack-port","text":"\u5806\u53e0\u7aef\u53e3\uff08Stack-Port\uff09\u662f\u4e13\u7528\u4e8e\u5806\u53e0\u7684\u903b\u8f91\u7aef\u53e3\uff0c\u9700\u8981\u548c\u5806\u53e0\u6210\u5458\u7aef\u53e3\uff08\u7269\u7406\u7aef\u53e3\uff09\u7ed1\u5b9a\u3002\u5806\u53e0\u7cfb\u7edf\u7684\u6bcf\u53f0\u6210\u5458\u4ea4\u6362\u673a\u4e0a\u652f\u6301\u4e24\u4e2aStack-Port\uff0c\u5206\u522b\u4e3aStack-Port n/1\u548cStack-Port n/2\uff0c\u5176\u4e2dn\u4e3a\u6210\u5458\u4ea4\u6362\u673a\u7684\u5806\u53e0ID\u3002 \u5806\u53e0\u6210\u5458\u7aef\u53e3\u6307\u7684\u662f\u8bbe\u5907\u4e0a\u7528\u4e8e\u5806\u53e0\u8fde\u63a5\u7684\u7269\u7406\u7aef\u53e3\u3002\u5806\u53e0\u6210\u5458\u7aef\u53e3\u7528\u4e8e\u8f6c\u53d1\u9700\u8981\u8de8\u6210\u5458\u4ea4\u6362\u673a\u7684\u4e1a\u52a1\u62a5\u6587\u6216\u6210\u5458\u4ea4\u6362\u673a\u4e4b\u95f4\u7684\u5806\u53e0\u534f\u8bae\u62a5\u6587\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u5806\u53e0\u7cfb\u7edf\u5bf9\u5806\u53e0\u7aef\u53e3\u7684\u914d\u7f6e\u662f\u6709\u8981\u6c42\u7684\u3002\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u5806\u53e0\u7aef\u53e3\u662f\u4e00\u4e2a\u903b\u8f91\u53e3\uff0c\u4e00\u4e2a\u8bbe\u5907\u4e0a\u652f\u6301\u4e24\u4e2aStack-Port\uff0c\u914d\u7f6e\u5806\u53e0\u65f6\uff0c\u8981\u6c42\u672c\u8bbe\u5907\u7684Stack-Port n/1\u53ea\u80fd\u548c\u90bb\u5c45\u8bbe\u5907\u7684Stack-Port n/2\u76f8\u8fde\uff0c\u800c\u672c\u8bbe\u5907\u7684Stack-Port n/2\u53ea\u80fd\u4e0e\u90bb\u5c45\u8bbe\u5907\u7684Stack-Port n/1\u76f8\u8fde\uff08\u6ce8\uff1aATAE\u4ea4\u6362\u677f\u5728\u8fdb\u884c\u5806\u53e0\u65f6\uff0c\u5219\u6ca1\u6709\u8fd9\u4e2a\u9650\u5236\uff09\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0cS6300-1\u7684XGE0/0/1\u53caXGE0/0/2\u63a5\u53e3\u4f7f\u7528\u5806\u53e0\u7ebf\u7f06\u4e0eS6300-2\u7684XGE0/0/1\u53ca XGE0/0/2\u4e92\u8054\uff0c\u73b0\u5728\u4e24\u53f0\u4ea4\u6362\u673a\u8981\u5efa\u7acb\u5806\u53e0\u7cfb\u7edf\u3002\u6211\u4eec\u5728S6300-1\u4e0a\u5c06XGE0/0/1\u53caXGE0/0/2\u8fd9\u4e24\u4e2a\u5806\u53e0\u6210\u5458\u7aef\u53e3\u6dfb\u52a0\u5230\u5806\u53e0\u7aef\u53e3Stack-Port 0/1\u4e2d\uff08\u5047\u8bbeS6300-1\u7684\u5806\u53e0ID\u4e3a0\uff09\uff0c\u90a3\u4e48\u5728S6300-2\u4e0a\u8fdb\u884c\u914d\u7f6e\u65f6\uff0c\u5c31\u8981\u5c06\u5176XGE0/0/1\u53caXGE0/0/2\u8fd9\u4e24\u4e2a\u5806\u53e0\u6210\u5458\u7aef\u53e3\u6dfb\u52a0\u5230\u5806\u53e0\u7aef\u53e3Stack-Port \u00bd\u4e2d\uff08\u5047\u8bbeS6300-2\u7684\u5806\u53e0ID\u4e3a1\uff09\u3002","title":"Stack-Port\u53ca\u5806\u53e0\u6210\u5458\u7aef\u53e3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_115","text":"S6300\u7cfb\u5217\u8bbe\u5907\u4f7f\u7528\u524d\u9762\u677f\u4e0a\u4efb\u610f10GE\u4e1a\u52a1\u53e3\u505a\u5806\u53e0\u53e3\uff0c\u7531\u4e8e\u8bbe\u5907\u82af\u7247\u7ed3\u6784\u7684\u539f\u56e0\uff0c\u524d\u9762\u677f\u4e0a\u768410GE \u53e3\uff0c\u4ece\u7aef\u53e31\u5f00\u59cb\uff0c\u6bcf4\u4e2a\u53e3\u4e3a\u4e00\u7ec4\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\uff0c\u4e00\u7ec4\u4e2d\u76844\u4e2a\u53e3\u5fc5\u987b\u90fd\u662f\u5806\u53e0\u53e3\u6216\u8005\u90fd\u662f\u4e1a\u52a1\u53e3\uff0c \u56e0\u6b64\uff0c\u53ea\u8981\u4e00\u7ec4\u4e2d\u7684\u5176\u4e2d\u4e00\u4e2a\u88ab\u914d\u7f6e\u4e3a\u5806\u53e0\u53e3\uff0c\u5176\u4ed6\u7684\u90fd\u4e0d\u80fd\u4f5c\u4e3a\u4e1a\u52a1\u53e3\u4f7f\u7528\u3002\u8fd8\u9700\u8981\u518d\u5f3a\u8c03\u4e00\u4e0b\uff0c\u4e00\u65e6\u63a5\u53e3\u88ab\u914d\u7f6e\u4e3a\u5806\u53e0\u6210\u5458\u7aef\u53e3\uff0c\u90a3\u4e48\u8be5\u63a5\u53e3\u5c06\u4e0d\u80fd\u4f5c\u4e3a\u666e\u901a\u4e1a\u52a1\u53e3\u4f7f\u7528\u3002 \u914d\u7f6e\u6307\u5bfc \u5728\u4e0a\u56fe\u6240\u793a\u7684\u62d3\u6251\u4e2d\uff0c\u4e24\u53f0S6300\u4ea4\u6362\u673a\u8fdb\u884c\u5806\u53e0\u3002SW1\u7684XGE0/0/1\u53e3\u901a\u8fc7\u5806\u53e0\u7ebf\u4e0eSW2\u7684XGE0/0/1\u53e3\u4e92\u8054\uff0c\u53e6\u5916SW1\u7684XGE0/0/2\u53e3\u901a\u8fc7\u5806\u53e0\u7ebf\u4e0eSW2\u7684XGE0/0/2\u53e3\u4e92\u8054\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4ea4\u6362\u673a\u4e4b\u524d\u91c7\u7528\u4e24\u6761\u5806\u53e0\u7ebf\u7f06\u8fdb\u884c\u5806\u53e0\u3002 \u4e00\u4e2a\u63a8\u8350\u7684\u5806\u53e0\u6d41\u7a0b\u662f\uff0c\u5148\u89c4\u5212\u8bbe\u5907\u7684\u5806\u53e0ID\u5e76\u660e\u786e\u54ea\u4e00\u53f0\u662f\u4e3b\u8bbe\u5907\uff0c\u63a5\u7740\u914d\u7f6e\u8bbe\u5907\u7684\u5806\u53e0ID\u4ee5\u53ca\u5806\u53e0\u4f18\u5148\u7ea7\uff0c\u518d\u914d\u7f6eStack-Port\uff0c\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\u4fdd\u5b58\uff0c\u7136\u540e\u5c06\u8bbe\u5907\u4e0b\u7535\u3001\u8fde\u7ebf\u3001\u518d\u4e0a\u7535\uff0c\u6700\u540e\u5b8c\u6210\u5806\u53e0\u3002","title":"\u5806\u53e0\u6ce8\u610f\u4e8b\u9879"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#stack-portid","text":"SW1\uff08V200R002\u4e4b\u540e\u7684\u7248\u672c\uff09\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \\<SW1> save SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u8bbe\u5907\u914d\u7f6e\uff08\u8bbe\u5907\u7684Stack-Port\u3001\u5806\u53e0ID\u4ee5\u53ca\u5806\u53e0\u4f18\u5148\u7ea7\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#sw1sw2","text":"","title":"SW1\u53caSW2\u4e0b\u7535\uff0c\u8fde\u63a5\u5806\u53e0\u7ebf\u7f06\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#sw1sw2sw1sw2","text":"\u5b8c\u6210\u5806\u53e0\u540e\uff0c\u67e5\u770b\u4e00\u4e0b\u5806\u53e0\u7cfb\u7edf\uff1a","title":"\u5c06SW1\u53caSW2\u4e0a\u7535\uff08\u5148\u5c06SW1\u4e0a\u7535\uff0c\u518d\u5c06SW2\u4e0a\u7535\uff09\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mad_1","text":"\u5728\u4e0a\u56feSW1\u53caSW2\u8fdb\u884c\u5806\u53e0\uff0c\u53cc\u65b9\u7684XGE0/0/1\u53caXGE0/0/2\u662f\u5806\u53e0\u6210\u5458\u7aef\u53e3\u3002\u5f53\u4ea4\u6362\u673a\u5b8c\u6210\u5806\u53e0\u914d\u7f6e\u5e76\u4e14\u5efa\u7acb\u5806\u53e0\u7cfb\u7edf\u540e\uff0cSW1\u53caSW2\u7684\u914d\u7f6e\u662f\u76f8\u540c\u7684\uff0c\u6b64\u65f6\u5b83\u4eec\u662f\u4e00\u4e2a\u6574\u4f53\u3002\u8be5\u5806\u53e0\u7cfb\u7edf\u91c7\u7528\u4e24\u6761\u5806\u53e0\u7ebf\u7f06\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u6761\u53d1\u751f\u6545\u969c\uff0c\u5806\u53e0\u7cfb\u7edf\u4e0d\u4f1a\u5206\u88c2\uff0c\u4f46\u662f\u4e00\u65e6\u6240\u6709\u7684\u5806\u53e0\u7ebf\u5168\u90e8\u53d1\u751f\u6545\u969c\uff0c\u5219SW1\u53caSW2 \u4f1a\u62c6\u5206\u6210\u4e24\u4e2a\u72ec\u7acb\u7684\u201c\u5806\u53e0\u7cfb\u7edf\u201d\uff0c\u6b64\u65f6\u5b83\u4eec\u7684\u914d\u7f6e\u662f\u5b8c\u5168\u76f8\u540c\u7684\uff0c\u5982\u679c\u8fd9\u53f0\u4ea4\u6362\u673a\u4f9d\u7136\u4fdd\u6301\u5728\u73b0\u7f51\u4e2d\uff0c \u5219\u4f1a\u53d1\u751fIP\u5730\u5740\u51b2\u7a81\u7b49\u4e00\u7cfb\u5217\u95ee\u9898\u3002 \u591a\u4e3b\u68c0\u6d4bMAD\uff08Multi-Active Detection\uff09\uff0c\u662f\u4e00\u79cd\u68c0\u6d4b\u548c\u5904\u7406\u5806\u53e0\u5206\u88c2\u7684\u534f\u8bae\u3002\u94fe\u8def\u6545\u969c\u5bfc\u81f4\u5806\u53e0\u7cfb\u7edf\u5206\u88c2\u540e\uff0cMAD\u53ef\u4ee5\u5b9e\u73b0\u5806\u53e0\u5206\u88c2\u7684\u68c0\u6d4b\u3001\u51b2\u7a81\u5904\u7406\u548c\u6545\u969c\u6062\u590d\uff0c\u964d\u4f4e\u5806\u53e0\u5206\u88c2\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002\u5728\u4e0a\u56fe\u4e2d\uff0cSW1\u53caSW2\u5728\u5806\u53e0\u7cfb\u7edf\u7ec4\u5efa\u5b8c\u6210\u540e\uff0c\u589e\u52a0\u4e00\u6761\u4e92\u8054\u7ebf\u7f06\uff08SW1\u7684XGE0/0/5\u53caSW2\u7684XGE1/0/5\u4e92\u8054\uff0c\u6ce8\u610f\u6b64\u65f6\u5806\u53e0\u7cfb\u7edf\u5df2\u7ecf\u5efa\u7acb\uff0cSW2\u7684\u5806\u53e0ID\u88ab\u4fee\u6539\u4e3a1\uff09\uff0c\u8be5\u6761\u7ebf\u7f06\u6ca1\u6709\u7279\u6b8a\u8981\u6c42\uff0c\u53ef\u4ee5\u662f\u666e\u901a\u7684\u7f51\u7ebf\u6216\u5149\u7ea4\uff0c\u4f46\u662f\u7528\u4e8eMAD\u7684\u63a5\u53e3\u5fc5\u987b\u662f\u666e\u901a\u4e1a\u52a1\u53e3\uff0c\u4e0d\u80fd\u662f\u5806\u53e0\u6210\u5458\u7aef\u53e3\u3002 \u968f\u540e\u5728SW1\u53caSW2\u5b8c\u6210\u4ee5\u4e0b\u914d\u7f6e\uff0c\u5c06\u8be5\u4e92\u8054\u63a5\u53e3\u6307\u5b9a\u4e3aMAD\u63a5\u53e3\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u5f53SW1\u53caSW2\u4e4b\u95f4\u7684\u5806\u53e0\u7ebf\u7f06\u5168\u90e8\u6545\u969c\u65f6\uff0cSW1\u53caSW2\u80fd\u591f\u901a\u8fc7MAD\u94fe\u8def\u8fdb\u884c\u534f\u5546\uff0c\u5e76\u4e14\u5c06\u5176\u4e2d\u4e00\u53f0\u4ea4\u6362\u673a\u7684\u6240\u6709\u4e1a\u52a1\u7aef\u53e3\u5173\u95ed\uff0c\u4ece\u800c\u89c4\u907f\u4ee5\u4e0a\u63d0\u53ca\u7684\u51b2\u7a81\u95ee\u9898\u3002 MAD\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u68c0\u67e5\u4e00\u4e0b\uff1a","title":"MAD\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_116","text":"\u5806\u53e0\u7aef\u53e3\u7684\u914d\u7f6e\u4e0d\u4fdd\u5b58\u5230\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u4f7f\u7528display current-configuration\u547d\u4ee4\u662f\u65e0\u6cd5\u67e5\u770b\u5230\u5806\u53e0\u7684\u76f8\u5173\u914d\u7f6e\u7684\u3002\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528display device\u3001display stack\u53cadisplay stack port\u7b49\u547d\u4ee4\u67e5\u770b\u5806\u53e0\u7684\u76f8\u5173\u4fe1\u606f\u3002 \u5728S6300\u4ea4\u6362\u673a\u4e0a\uff0c\u7531\u4e8e\u82af\u7247\u539f\u56e0\uff0c\u6bcf4\u4e2a10GE\u63a5\u53e3\u4e3a\u4e00\u7ec4\uff0c\u6bcf\u7ec4\u63a5\u53e3\u8981\u4e48\u90fd\u662f\u4e1a\u52a1\u53e3\uff0c\u8981\u4e48\u90fd\u662f\u5806\u53e0\u6210\u5458\u53e3\u3002S6300\u652f\u6301\u9762\u677f\u4e0a\u4efb\u610f10GE\u63a5\u53e3\u4f5c\u4e3a\u5806\u53e0\u6210\u5458\u53e3\u4f7f\u7528\uff0c\u5728\u914d\u7f6e\u5806\u53e0\u65f6\uff0c\u8981\u6ce8\u610f\u540c\u4e00\u4e2a\u7ec4\u5185\u7684\u63a5\u53e3\u90fd\u9700\u5de5\u4f5c\u572810GE\u6a21\u5f0f\uff0c\u5982\u679c\u6709\u540c\u7ec4\u7684\u5176\u4ed6\u95f2\u7f6e\u63a5\u53e3\u5b89\u88c5\u4e86\u5149\u8f6c\u7535\u7684\u6a21\u5757\uff08\u4f7f\u5f97\u8be5\u63a5\u53e3\u7684\u5de5\u4f5c\u901f\u7387\u5728GE\uff09\uff0c\u5219\u5373\u4f7f\u8be5\u63a5\u53e3\u672a\u88ab\u4f7f\u7528\uff08\u751a\u81f3\u6ca1\u6709\u8fde\u7ebf\uff09\uff0c\u4e5f\u53ef\u80fd\u5bfc\u81f4\u540c\u7ec4\u4e2d\u7684\u5176\u4ed6\u63a5\u53e3\u7531\u4e8e\u6a21\u5f0f\u95ee\u9898\u65e0\u6cd5\u88ab\u914d\u7f6e\u6210\u5806\u53e0\u6210\u5458\u53e3\u3002 Traffic-policy \u6d41\u91cf\u7edf\u8ba1","title":"\u6ce8\u610f\u4e8b\u9879\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_117","text":"PC1\u3001PC2\u5206\u522b\u5c5e\u4e8eVLAN10\u53caVLAN20\u3002PC1\u53caPC2\u7684\u7f3a\u7701\u7f51\u5173\u90fd\u8bbe\u7f6e\u6210SW\uff08\u76f8\u5e94Vlanif\u7684IP\u5730\u5740\uff09\u3002\u7f3a\u7701\u65f6PC1\u4e0ePC2\u53ef\u76f8\u4e92\u901a\u4fe1\u3002 \u5728SW\u4e0a\u5b8c\u6210\u914d\u7f6e\uff0c\u5bf9PC2 ping PC1\u7684\u8fc7\u7a0b\u4e2d\u6240\u7a7f\u8d8aSW\u7684\u62a5\u6587\u8fdb\u884c\u7edf\u8ba1\u3002","title":"\u573a\u666f\u8bf4\u660e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_118","text":"SW\uff08\u6b64\u5904\u4ee5S9300\u4ea4\u6362\u673aV2R3\u7248\u672c\u4e3a\u4f8b\uff09\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5f53PC2 ping PC1\u65f6\uff0c\u6240\u4ea7\u751f\u7684ICMP\u6d41\u91cf\u4f1a\u88abSW\u8fdb\u884c\u8bb0\u5f55\uff1a [SW] display traffic policy statistics interface GigabitEthernet 6/0/20 inbound Interface: GigabitEthernet6/0/20 Traffic policy inbound: p1 Rule number: 1 Current status: OK! --------------------------------------------------------------------- Board : 6 Item Packets Bytes --------------------------------------------------------------------- Matched 5 510 +--Passed 5 510 +--Dropped 0 0 +--Filter 0 0 +--CAR 0 0 \u8981\u590d\u4f4d\u4e0a\u8ff0\u7edf\u8ba1\u7ed3\u679c\uff0c\u53ef\u4ee5\u6267\u884creset traffic policy statistics interface GigabitEthernet 6/0/20 inbound \u547d\u4ee4\u3002\u5b8c\u6210\u6d41\u91cf\u7edf\u8ba1\u64cd\u4f5c\u540e\uff0c\u9700\u5c06\u63a5\u53e3\u4e0a\u914d\u7f6e\u7684traffic-policy\u5220\u9664\u3002 VLAN \u6620\u5c04 \u5982\u56fe\u6240\u793a\uff0cSW1\u8fde\u63a5\u7740\u4e00\u4e9bPC\uff0c\u8fd9\u4e9bPC\u90fd\u5c5e\u4e8eVLAN10\uff0c\u4f7f\u752810.1.1.0/24\u7f51\u6bb5\u7684IP\u5730\u5740\u3002\u53e6\u4e00\u65b9\u9762\uff0cSW1 \u4e5f\u901a\u8fc7GE6/0/20\u63a5\u53e3\u8fde\u63a5\u7740SW2\uff0cSW2\u8fde\u63a5\u7740VLAN2\uff0c\u5e76\u4e14\u8be5VLAN\u4f7f\u7528\u7684IP\u5730\u5740\u4e5f\u662f10.1.1.0/24\u7f51\u6bb5\uff08\u5355\u4e2aIP \u5730\u5740\u4e0eSW1 \u4e0a\u63a5\u5165\u7684\u4e3b\u673a\u4e0d\u5b58\u5728\u51b2\u7a81\uff09 \u3002\u73b0\u5728\u8981\u5728SW1 \u4e0a\u90e8\u7f72VLAN Mapping \uff08 \u4e5f\u53eb\u505aVLAN Translation\uff09\uff0c\u4f7f\u5f97SW2\u53ca\u5176\u4e0b\u8054\u7684VLAN2\uff08\u4e2d\u7684\u8bbe\u5907\uff09\u80fd\u591f\u76f4\u63a5\u4e0ePC1\u8fdb\u884c\u4e8c\u5c42\u901a\u4fe1\u3002\u6b64\u65f6\u7f51\u7edc\u7684\u903b\u8f91\u7ed3\u6784\u7c7b\u4f3c\u5982\u4e0b\uff1a SW1\uff08\u4ee5S9300 V2R1\u7248\u672c\u4e3a\u4f8b\uff09\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u4e0a\u8ff0\u914d\u7f6e\u4e2d\uff0c**port vlan-mapping vlan 2 map-vlan 10**\u547d\u4ee4\u4f7f\u5f97\u8be5\u63a5\u53e3\u6536\u5230\u643a\u5e26\u4e86VLAN2 Tag\u7684\u6570\u636e\u5e27\u65f6\uff0c \u5c06\u8be5\u5e27\u7684Tag\u4fee\u6539\u4e3aVLAN10\uff0c\u7136\u540e\u8fdb\u5165\u4ea4\u6362\u673a\u3002\u6570\u636e\u5e27\u8fdb\u5165\u4ea4\u6362\u673a\u540e\uff0c\u4ea4\u6362\u673a\u5c06\u5176\u8bc6\u522b\u4e3aVLAN10\u7684\u6570\u636e\u5e27\uff0c\u56e0\u6b64\u5728SW1\u7684GE6/0/20\u63a5\u53e3\u4e0a\uff0c\u5fc5\u987b\u653e\u901aVLAN10\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff1a SW2\u5373\u53efping\u901aPC1\uff0c\u800c\u53cd\u8fc7\u6765\uff0cPC1\u4e5f\u53ef\u4e3b\u52a8\u8bbf\u95eeSW2\uff0810.1.1.2\uff09\u3002\u53ef\u4ee5\u770b\u51fa\uff0c**port vlan-mapping vlan 2 map-vlan 10**\u8fd9\u6761\u547d\u4ee4\u5b9e\u73b0\u4e86\u53cc\u5411\u7684\u8f6c\u6362\u3002VLAN Mapping\u53d1\u751f\u5728\u62a5\u6587\u4ece\u5165\u7aef\u53e3\u63a5\u6536\u8fdb\u6765\u4e4b\u540e\uff0c\u4ee5\u53ca\u4ece\u51fa\u7aef\u53e3\u8f6c\u53d1\u51fa\u53bb\u4e4b\u524d\u3002\u5f3a\u8c03\u4e00\u4e0b\uff1a\u914d\u7f6eVLAN Mapping\u529f\u80fd\u7684\u63a5\u53e3\u7c7b\u578b\u5fc5\u987b\u4e3aTrunk\u6216Hybrid\uff0c\u63a5\u53e3\u5fc5\u987b\u52a0\u5165 \uff08\u6216\u8005\u8bf4\u653e\u901a\uff09\u6620\u5c04\u540e\u7684map-vlan\u3002","title":"\u914d\u7f6e\u6307\u5bfc"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_119","text":"5.1 \u8def\u7531\u91cd\u53d1\u5e03 5.1.1 \u6280\u672f\u80cc\u666f \u5728\u540c\u4e00\u4e2a\u7f51\u7edc\u62d3\u6251\u7ed3\u6784\u4e2d\uff0c\u5982\u679c\u5b58\u5728\u4e24\u79cd\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\uff0c\u7531\u4e8e\u4e0d\u540c\u7684\u8def\u7531\u534f\u8bae\u7684\u5de5\u4f5c\u673a\u5236\u5404\u6709\u4e0d\u540c\uff0c\u5bf9\u8def\u7531\u7684\u7406\u89e3\u4e5f\u4e0d\u76f8\u540c\uff0c\u8fd9\u5c31\u5728\u7f51\u7edc\u4e2d\u9020\u6210\u4e86\u8def\u7531\u4fe1\u606f\u7684\u9694\u79bb\uff0c\u7136\u800c\u7531\u4e8e\u8fd9\u5f88\u6709\u53ef\u80fd\u662f\u540c\u4e00\u4e2a\u81ea\u6cbb\u7cfb\u7edf\u5185\u7684\u7f51 \u7edc\uff0c\u5168\u7f51\u9700\u8981\u4e92\u901a\uff0c\u8fd9\u65f6\u5019\u548b\u529e\uff1f\u4f8b\u5982\u4e00\u4e2a\u7f51\u7edc\u5305\u542b\u4e24\u4e2a\u7247\u533a\uff0c\u6bcf\u4e2a\u7247\u533a\u4f7f\u7528\u81ea\u5df1\u7684\u52a8\u6001\u8def\u7531\u534f\u8bae\uff0c\u5982\u679c\u8981\u5b9e\u73b0\u4e24\u4e2a\u7247\u533a\u7684\u7f51\u7edc\u4e92\u901a\uff0c\u5c31\u9700\u8981\u5728\u4e24\u8005\u4e4b\u95f4\u6253\u901a\u8def\u7531\uff0c\u4f46\u662f\u8fd9\u4e24\u79cd\u52a8\u6001\u8def\u7531\u534f\u8bae\u6bd5\u7adf\u662f\u4e0d\u540c\u7684\u534f\u8bae\uff0c\u8def\u7531\u4fe1\u606f\u662f\u5b8c\u5168\u9694\u79bb\u7684\uff0c\u5982\u4f55\u5b9e\u73b0\u4ea4\u4e92\uff1f\u8fd9\u5c31\u9700\u8981\u4f7f\u7528\u8def\u7531\u91cd\u53d1\u5e03\uff08\u4e5f\u88ab\u79f0\u4e3a\u8def\u7531\u5f15\u5165\uff0croute-importation\uff09\u4e86\u3002 \u6211\u4eec\u770b\u4e0a\u56fe\uff0cR1\u4e0eR2\u4e4b\u95f4\uff0c\u8fd0\u884cRIP\uff08\u8def\u7531\u534f\u8bae\uff09\u6765\u4ea4\u4e92\u8def\u7531\u4fe1\u606f\uff0cR2\u901a\u8fc7RIP\u5b66\u4e60\u5230\u4e86R1\u901a\u544a\u7684 192.168.1.0/24\u53ca2.0/24\u7684\u8def\u7531\u3002\u540c\u65f6R2\u4e0eR3\u53c8\u5efa\u7acb\u4e86OSPF\u90bb\u63a5\u5173\u7cfb\uff0c\u56e0\u6b64R2\u4e5f\u4eceR3\u90a3\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u4e86\u4e24\u6761\u8def\u7531\uff1a3.0\u53ca4.0/24\uff0c\u4e5f\u88c5\u8f7d\u8fdb\u4e86\u8def\u7531\u8868\u3002\u90a3\u4e48\u5bf9\u4e8eR2\u800c\u8a00\uff0c\u5b83\u81ea\u5df1\u5c31\u6709\u4e86\u53bb\u5f80\u5168\u7f51\u7684\u8def\u7531\uff0c\u4f46\u662fR2 \u4e0d\u4f1a\u5c06\u4eceRIP\u5b66\u4e60\u8fc7\u6765\u7684\u8def\u7531\u544a\u8bc9R3\uff0c\u4e5f\u4e0d\u4f1a\u5c06\u4eceOSPF\u5b66\u4e60\u6765\u7684\u8def\u7531\u544a\u8bc9R1\u3002\u5bf9\u4e8eR2\u800c\u8a00\uff0c\u867d\u7136\u5b83\u81ea\u5df1\u7684\u8def\u7531\u8868\u91cc\u6709\u5b8c\u6574\u7684\u8def\u7531\u4fe1\u606f\uff0c\u4f46\u662f\uff0c\u5c31\u597d\u50cf\u51a5\u51a5\u4e4b\u4e2d\uff0cR\u548cO\u7684\u6761\u76ee\u4e4b\u95f4\u6709\u9053\u9e3f\u6c9f\uff0c\u65e0\u6cd5\u903e\u8d8a\u3002\u800cR2\u5c31\u4e5f\u5c31\u6210\u4e86RIP\u53caOSPF\u57df\u7684\u5206\u754c\u70b9\u3002\u90a3\u4e48\u5982\u4f55\u80fd\u591f\u8ba9R1\u5b66\u4e60\u5230\u6765\u81eaOSPF\u7684\u8def\u7531\u3001\u8ba9R3\u5b66\u4e60\u5230\u6765\u81eaRIP\u7684\u8def\u7531\u5462\uff1f\u5173\u952e\u70b9\u5728\u4e8eR2\u4e0a\uff0c\u901a\u8fc7\u5728R2\u4e0a\u90e8\u7f72\u8def\u7531\u91cd\u53d1\u5e03\uff0c\u53ef\u4ee5\u5b9e\u73b0\u8def\u7531\u4fe1\u606f\u5728\u4e0d\u540c\u8def\u7531\u9009\u62e9\u57df\u95f4\u7684\u4f20\u9012\u3002 \u4e0a\u56fe\u662f\u521d\u59cb\u72b6\u6001\u3002R2\u5206\u522b\u4eceRIP\u53caOSPF\u90fd\u5b66\u4e60\u5230\u4e86\u76f8\u5e94\u7684\u8def\u7531\u3002\u4f46\u662f\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u901a\u8fc7\u8fd9\u4e24\u4e2a\u8def\u7531\u534f\u8bae\u6240\u5b66\u4e60\u5230\u7684\u8def\u7531\u662f\u4e92\u76f8\u9694\u79bb\u7684\uff0cR2\u4e0d\u4f1a\u81ea\u52a8\u7684\u5c06OSPF\u8def\u7531\u201c\u7ffb\u8bd1\u201d\u6210RIP\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u90a3\u4e48\u6b64\u65f6\uff0cR1\u81ea\u7136\u662f\u65e0\u6cd5\u8bbf\u95ee\u5230R3\u8fd9\u4e00\u4fa7\u7684\u7f51\u7edc\u7684\uff0cR3\u4e5f\u662f\u4e00\u6837\u3002 \u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u5f00\u59cb\u5728R2\u4e0a\u6267\u884c\u91cd\u53d1\u5e03\u7684\u52a8\u4f5c\uff0c\u6211\u4eec\u5c06OSPF\u7684\u8def\u7531\u201c\u6ce8\u5165\u201d\u4e86RIP\u8fdb\u7a0b\u4e4b\u4e2d\uff0c\u5982\u6b64\u4e00\u6765\uff0cR2 \u5c31\u4f1a\u5c063.0/24\u53ca4.0/24\u8fd9\u4e24\u6761OSPF\u8def\u7531\u201c\u7ffb\u8bd1\u201d\u6210RIP\uff0c\u7136\u540e\u4f20\u9012\u7ed9R1\uff0cR1\u4e5f\u5c31\u80fd\u591f\u5b66\u4e60\u52303.0\u548c4.0\u8def\u7531\u4e86\u3002\u6ce8\u610f\u91cd\u53d1\u5e03\u7684\u6267\u884c\u5730\u70b9\uff0c\u662f\u5728R2\u4e0a\uff0c\u4e5f\u5c31\u662f\u5728\u8def\u7531\u57df\u7684\u5206\u754c\u70b9\u4e0a\u6267\u884c\uff0c\u53e6\u5916\uff0c\u8def\u7531\u91cd\u53d1\u5e03\u662f\u6709\u65b9\u5411\u7684\uff0c \u6211\u4eec\u6267\u884c\u5b8c\u4e0a\u8ff0\u76f8\u5173\u52a8\u4f5c\u540e\uff0cR3\u4ecd\u7136\u662f\u6ca1\u6709RIP\u57df\u5185\u7684\u90a3\u4e9b\u8def\u7531\u7684\uff0c\u9700\u8fdb\u4e00\u6b65\u5728R2\u4e0a\uff0c\u5c06RIP\u8def\u7531\u91cd\u53d1\u5e03\u8fdb OSPF\uff0c\u624d\u80fd\u8ba9R3\u5b66\u4e60\u52301.0/24\u53ca2.0/24\u8def\u7531\u3002 \u5b9e\u65bd\u8981\u70b9 \u90e8\u7f72\u8def\u7531\u91cd\u53d1\u5e03\u7684\u8fc7\u7a0b\u9700\u8981\u8c28\u614e\uff0c\u5c24\u5176\u5728\u4e00\u4e9b\u590d\u6742\u7684\u7f51\u7edc\u73af\u5883\u4e2d\u90e8\u7f72\u91cd\u53d1\u5e03\u65f6\uff0c\u66f4\u52a0\u5e94\u8be5\u8003\u8651\u5468\u7965\u3002\u4e0b\u9762\u9488\u5bf9\u6267\u884c\u91cd\u53d1\u5e03\u7684\u8fc7\u7a0b\u4e2d\u9700\u8981\u5173\u6ce8\u7684\u51e0\u4e2a\u95ee\u9898\u8fdb\u884c\u4ecb\u7ecd\u3002","title":"\u8def\u7531\u63d0\u9ad8"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_120","text":"\u8def\u7531\u4f18\u5148\u7ea7\u95ee\u9898\uff0c\u662f\u5728\u90e8\u7f72\u91cd\u53d1\u5e03\u8fc7\u7a0b\u4e2d\u9700\u8981\u5173\u6ce8\u7684\u95ee\u9898\u4e4b\u4e00\uff0c\u5c24\u5176\u662f\u5728\u53cc\u70b9\u53cc\u5411\u8def\u7531\u91cd\u53d1\u5e03\u7684\u573a\u666f\u4e2d\uff0c\u8fd9\u79cd\u573a\u666f\u4e2d\u4e24\u4e2aASBR\uff08AS\u8fb9\u754c\u8def\u7531\u5668\uff09\u4e0a\u4f1a\u540c\u65f6\u90e8\u7f72\u53cc\u5411\u7684\u8def\u7531\u91cd\u53d1\u5e03\uff0c\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u503c\u5f97\u5173\u6ce8\u7684\u6a21\u578b\u3002 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u73af\u5883\u4e2d\uff0c\u5b58\u5728\u4e24\u4e2a\u8def\u7531\u57df\uff1aBGP\u53caOSPF\u3002R1\u4e0a\u6709\u4e00\u6761\u76f4\u8fde\u8def\u75311.1.1.1/32\u88abnetwork \u8fdbBGP\u5e76\u4f20\u9012\u7ed9\u4e86R2\u53caR3\uff0c\u90a3\u4e48\u6b64\u523bR2\u53caR3\u7684\u8def\u7531\u8868\u4e2d\u662f\u6709\u5230\u8fbe1.1.1.1/32\u7684IBGP\u8def\u7531\u7684\u3002 \u63a5\u4e0b\u53bbR2\u90e8\u7f72\u4e86IBGP\u5230OSPF\u7684\u8def\u7531\u91cd\u53d1\u5e03\uff0c1.1.1./32\u7684\u8def\u7531\u88ab\u5f15\u5165\u4e86OSPF\uff0c\u5f62\u6210\u5916\u90e8\u8def\u7531\u6761\u76ee\u5e76\u4f20\u9012\u7ed9\u4e86R3\u3002\u73b0\u5728R3\u540c\u65f6\u4eceOSPF\u53caIBGP\u5b66\u4e60\u52301.1.1./32\u8def\u7531\uff0cOSPF\u5916\u90e8\u8def\u7531\u7684\u4f18\u5148\u7ea7\u662f150\uff0c\u800cIBGP \u8def\u7531\u4f18\u5148\u7ea7\u4e3a255\uff0c\u56e0\u6b64OSPF\u7684\u5916\u90e8\u8def\u7531\u8981\u4f18\u4e8eIBGP\u8def\u7531\uff0c\u5982\u6b64\u4e00\u6765R3\u4f1a\u628aOSPF\u8def\u75311.1.1.1/32\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\uff0c\u8be5\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u4e3aR4\uff0c\u8fd9\u65f6R3\u5c31\u51fa\u73b0\u4e86\u201c\u6b21\u4f18\u8def\u5f84\u95ee\u9898\u201d\uff0c\u5176\u8bbf\u95ee1.1.1.1/32\u7684\u6d41\u91cf\u8d70\u5411\u662fR4-R2-R1\u2014\u2014\u7ed5\u4e86\u8fdc\u8def\u4e86\u3002 \u9020\u6210\u8fd9\u4e2a\u73b0\u8c61\u7684\u539f\u56e0\u662f\u8def\u7531\u534f\u8bae\u7684\u4f18\u5148\u7ea7\u5728\u8fd9\u91cc\u5f71\u54cd\u4e86R3\u7684\u8def\u7531\u4f18\u9009\uff0c\u4e3a\u4e86\u89c4\u907f\u8fd9\u4e2a\u73b0\u8c61\uff0c\u6211\u4eec\u53ef\u4ee5\u5728R3\u4e0a\u4f7f\u7528\u76f8\u5173\u547d\u4ee4\u6765\u8c03\u82821.1.1.1/32\u8def\u7531\u7684\u4f18\u5148\u7ea7\uff0c\u4f7f\u5f97R3\u4f18\u9009\u6765\u81eaIBGP\u7684\u8def\u7531\u3002","title":"\u8def\u7531\u4f18\u5148\u7ea7\u95ee\u9898"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_121","text":"\u8fd8\u662f\u4e0a\u9762\u7684\u73af\u5883\uff0c\u521a\u624d\u6211\u4eec\u5df2\u7ecf\u5206\u6790\u8fc7\u4e86\uff0c\u5982\u679c\u4e0d\u505a\u4efb\u4f55\u5e72\u9884\uff0cR3\u662f\u4f1a\u5b58\u5728\u6b21\u4f18\u8def\u5f84\u95ee\u9898\u7684\uff0c\u56e0\u4e3aR3 \u4f1a\u4f18\u9009\u5230\u8fbe1.1.1.1/32\u7684OSPF\u8def\u7531\uff0c\u800c\u4e0d\u662fIBGP\u8def\u7531\u3002\u800c\u5982\u679cR3\u53c8\u90e8\u7f72\u4e86OSPF\u5230BGP\u7684\u8def\u7531\u91cd\u53d1\u5e03\uff0c \u90a3\u4e481.1.1.1/32\u8def\u7531\u53c8\u4f1a\u88abR3\u7ed9\u5012\u704c\u56deBGP\uff0c\u8fd9\u5c31\u5b58\u5728\u4e00\u4e2a\u5f15\u53d1\u8def\u7531\u73af\u8def\u7684\u9690\u60a3\u3002 \u89c4\u907f\u65b9\u6cd5\u5728\u4e0a\u4e00\u4e2a\u5c0f\u8282\u4e2d\u5df2\u7ecf\u63a2\u8ba8\u4e86\u4e00\u4e9b\u3002\u56e0\u6b64\uff0c\u53cc\u70b9\u53cc\u5411\u91cd\u53d1\u5e03\u5728\u90e8\u7f72\u8d77\u6765\u7684\u65f6\u5019\uff0c\u9700\u8981\u683c\u5916\u5c0f\u5fc3\u3002 \u8def\u7531\u91cd\u53d1\u5e03\u7684\u914d\u7f6e \u4e0d\u540c\u534f\u8bae\u4e4b\u95f4\u7684\u8def\u7531\u91cd\u53d1\u5e03\u7684\u914d\u7f6e\u5927\u540c\u5c0f\u5f02\uff0c\u6211\u4eec\u5148\u770b\u4e00\u4e0b\u4ece\u5176\u4ed6\u8def\u7531\u534f\u8bae\u6ce8\u5165\u8def\u7531\u5230OSPF\u7684\u914d\u7f6e\uff1a \u5728\u4e00\u53f0\u8bbe\u5907\u4e0a\uff0c\u5c06\u5176\u8def\u7531\u8868\u4e2d\u901a\u8fc7A\u8def\u7531\u534f\u8bae\u5b66\u4e60\u5230\u7684\u8def\u7531\u91cd\u53d1\u5e03\u5230B\u8def\u7531\u534f\u8bae\u4e2d\uff0c\u662f\u5728\u8be5\u8bbe\u5907\u7684B\u8def\u7531\u534f\u8bae\u7684\u914d\u7f6e\u89c6\u56fe\u4e0b\u5b8c\u6210\u76f8\u5173\u914d\u7f6e\u7684\u3002","title":"\u8def\u7531\u5012\u704c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospfrip","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u4e0eR2\u8fd0\u884c\u7740RIP\uff0cR2\u4e0eR3\u5219\u5efa\u7acb\u4e86OSPF\u90bb\u63a5\u5173\u7cfb\uff0c\u6211\u4eec\u6700\u7ec8\u8981\u5b9e\u73b0\u7684\u76ee\u6807\u662f\u8ba9\u5168\u7f51\u80fd\u591f\u4e92\u901a\u3002\u9996\u5148R2\u5df2\u7ecf\u901a\u8fc7OSPF\u53caRIP\u5b66\u4e60\u5230\u4e861.1.1.0/24\u53ca3.3.3.0/24\u8def\u7531\uff0c\u5b83\u5df2\u7ecf\u540c\u65f6\u62e5\u6709\u4e86OSPF\u53caRIP\u8def\u7531\u57df\u5185\u7684\u8def\u7531\u3002\u4f46\u662f\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u662f\u4e0d\u4f1a\u5c06OSPF\u8def\u7531\u6ce8\u5165RIP\u57df\u7684\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u90a3\u4e48\u73b0\u5728\u6211\u4eec\u5c31\u8981\u5728R2\u4e0a\u505a\u8def\u7531\u91cd\u53d1\u5e03\u4e86\u3002 \u9996\u5148\u662f\u5c06OSPF\u8def\u7531\u6ce8\u5165RIP\uff1a \u6ce8\u610f\uff0c\u4e0a\u9762\u53ea\u662f\u7ed9\u51fa\u4e86\u5173\u952e\u914d\u7f6e\u3002\u5b8c\u6210\u8fd9\u4e00\u6b65\u52a8\u4f5c\u4e4b\u540e\uff0cR1\u7684\u8def\u7531\u8868\u5c31\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u7531\u4e8eR2\u90e8\u7f72\u4e86\u4eceOSPF \u5230RIP\u7684\u8def\u7531\u91cd\u53d1\u5e03\uff0c\u56e0\u6b64\u5b83\u4f1a\u5c06\u5176\u8def\u7531\u8868\u4e2d\u7684\u6240\u6709OSPF\u8def\u7531\uff083.3.3.0/24\uff09\u4ee5\u53ca\u672c\u5730\u76f4\u8fde\u7684OSPF\u63a5\u53e3\u8def\u7531\uff08192.168.23.0/24\uff09\u90fd\u6ce8\u5165RIP\uff0c\u4ece\u800cR1\u4fbf\u80fd\u591f\u901a\u8fc7RIP\u5b66\u4e60\u5230192.168.23.0/24\u53ca3.3.3.0/24\u8def\u7531\u3002 \u63a5\u7740\u662f\u5c06RIP\u8def\u7531\u6ce8\u5165\u5230OSPF\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cR3\u5373\u53ef\u5b66\u4e60\u5230RIP\u57df\u4e2d\u7684\u8def\u7531192.168.12.0/24\u4ee5\u53ca1.1.1.0/24\u3002\u5982\u6b64\u4e00\u6765\uff0c\u5168\u7f51\u7684\u8def\u7531\u5c31\u4e92\u901a\u4e86\u3002\u56e0\u6b64\u8981\u6ce8\u610f\uff0c\u5c06\u8def\u7531\u534f\u8baeA\u6ce8\u5165\u5230\u8def\u7531\u534f\u8baeB\uff0c\u662f\u5728\u8def\u7531\u534f\u8baeB\u7684\u914d\u7f6e\u89c6\u56fe\u4e2d\u5b8c\u6210\u76f8\u5e94\u7684import-route \u914d\u7f6e\u3002\u5e76\u4e14\uff0c\u8def\u7531\u91cd\u53d1\u5e03\u662f\u5355\u5411\u7684\u3002","title":"OSPF\u4e0eRIP\u7684\u4e92\u91cd\u53d1\u5e03"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf_6","text":"\u5e38\u89c4\u60c5\u51b5\u4e0b\uff0c\u8981\u5c06\u4e00\u6761\u76f4\u8fde\u8def\u7531\u901a\u544a\u7ed9\u8def\u7531\u57df\uff0c\u5c31\u5fc5\u987bnetwork\u76f8\u5e94\u7684\u76f4\u8fde\u63a5\u53e3\u3002\u5982\u679c\u6ca1\u6709\u4f7f\u7528network\u547d\u4ee4\u5728\u8def\u7531\u8fdb\u7a0b\u4e2d\u6fc0\u6d3b\u76f8\u5e94\u7684\u63a5\u53e3\uff0c\u5219\u5bf9\u4e8e\u8be5\u8def\u7531\u57df\u800c\u8a00\uff0c\u8fd9\u4e2a\u63a5\u53e3\u6240\u5173\u8054\u7684\u7f51\u6bb5\u5c31\u662f\u5916\u90e8\u7f51\u7edc\u3002 \u53e6\u4e00\u79cd\u5c06\u5230\u8fbe\u76f4\u8fde\u7f51\u7edc\u7684\u8def\u7531\u5f15\u5165\u8def\u7531\u57df\u7684\u65b9\u5f0f\u662f\u4f7f\u7528\u8def\u7531\u91cd\u53d1\u5e03\u7684\u65b9\u5f0f\uff0c\u5c06\u76f4\u8fde\u8def\u7531\u6ce8\u5165\uff0c\u4f8b\u5982\u4e0a\u56fe\u4e2d R3\u7684\u521d\u59cb\u914d\u7f6e\u5982\u4e0b\uff1a \u5b83\u5e76\u6ca1\u6709\u914d\u7f6e**network 33.33.33.0 0.0.0.255**\uff0c\u90a3\u4e48R1\u3001R2\u662f\u65e0\u6cd5\u4eceOSPF\u5b66\u4e60\u523033.33.33.0/24\u8def\u7531\u7684\uff0c\u56e0 \u4e3aR3\u7684Loopback1\u63a5\u53e3\u5e76\u672a\u6fc0\u6d3bOSPF\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u6765\u5c06\u76f4\u8fde\u8def\u7531\u6ce8\u5165OSPF\uff08\u4e0b\u9762\u53ea\u662f\u7c98\u8d34\u4e86\u5173\u952e\u914d\u7f6e\uff0c\u7701\u7565\u4e86\u5176\u4ed6\u914d\u7f6e\uff09\uff1a \u5728OSPF\u914d\u7f6e\u89c6\u56fe\u4e2d\u4f7f\u7528**Import-route direct**\u547d\u4ee4\uff0c\u4f1a\u5c06\u8def\u7531\u5668\u4e0a\u6240\u6709\u7684\u76f4\u8fde\u63a5\u53e3\u8def\u7531\u90fd\u6ce8\u5165OSPF\u3002\u56e0\u6b64 \u5f53R3\u6267\u884c\u4e0a\u8ff0\u547d\u4ee4\u65f6\uff0c\u5176\u8def\u7531\u8868\u4e2d\u7684\u76f4\u8fde\u8def\u7531192.168.23.0/24\u4ee5\u53ca33.33.33.0/24\u90fd\u4f1a\u88ab\u6ce8\u5165OSPF\u2014\u2014\u4ee5\u5916\u90e8\u8def\u7531\u7684\u5f62\u5f0f\u3002\u5f53\u7136\uff0c\u5982\u679c\u6b64\u65f6Loopback1\u63a5\u53e3\u5931\u6548\uff0c\u90a3\u4e48\u8be5\u63a5\u53e3\u7684\u76f4\u8fde\u8def\u7531\u91cd\u53d1\u5e03\u4e5f\u5c31\u4f1a\u88ab\u64a4\u9500\u3002","title":"\u91cd\u53d1\u5e03\u76f4\u8fde\u8def\u7531\u5230OSPF"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf_7","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u76f4\u8fde\u7740\u7f51\u7edc11.11.11.0/24\uff0cR1\u4e0d\u652f\u6301\u52a8\u6001\u8def\u7531\u534f\u8bae\uff0cR2\u914d\u7f6e\u4e86\u53bb\u5f8011.11.11.0/24\u7684\u9759\u6001\u8def\u7531\uff0c\u4e14\u4e0b\u4e00\u8df3\u4e3aR1\u3002R2\u4e0eR3\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u3002\u73b0\u5728\u5bf9\u4e8e\u6574\u4e2aOSPF\u57df\u800c\u8a00\uff0c\u5b83\u4eec\u662f\u611f\u77e5\u4e0d\u523011.11.11.0/24 \u7f51\u6bb5\u7684\u5b58\u5728\u7684\uff0c\u56e0\u4e3a\u5bf9\u4e8eOSPF\u800c\u8a00\uff0cR2\u6240\u914d\u7f6e\u7684\u9759\u6001\u8def\u7531\u662f\u4e00\u6761\u57df\u5916\u7684\u8def\u7531\u3002\u4e3a\u4e86\u8ba9OSPF\u5185\u7684\u8def\u7531\u5668\u80fd\u591f\u901a\u8fc7OSPF\u5b66\u4e60\u523011.11.11.0/24\u8def\u7531\uff0c\u6211\u4eec\u9700\u8981\u5728R2\u4e0a\u90e8\u7f72\u8def\u7531\u91cd\u53d1\u5e03\uff0c\u5c06\u9759\u6001\u8def\u7531\u91cd\u53d1\u5e03\u5230OSPF\uff1a \u5728OSPF\u914d\u7f6e\u89c6\u56fe\u4e0b\u4f7f\u7528**import-route static**\u547d\u4ee4\u540e\uff0cR2\u4f1a\u5c06\u5176\u8def\u7531\u8868\u4e2d\u6240\u6709\u7684\u9759\u6001\u8def\u7531\u90fd\u4f1a\u91cd\u53d1\u5e03\u5230 OSPF\u3002\u5982\u6b64\u4e00\u6765\uff0cR3\u4fbf\u80fd\u591f\u901a\u8fc7OSPF\u5b66\u4e60\u523011.11.11.0/24\u8def\u7531\u3002 \u8def\u7531\u7b56\u7565 Route-policy","title":"\u91cd\u53d1\u5e03\u9759\u6001\u8def\u7531\u5230OSPF"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_122","text":"\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u8981\u5728R2\u4e0a\u90e8\u7f72RIP\u5230OSPF\u7684\u91cd\u53d1\u5e03\uff0c\u7ecf\u8fc7\u524d\u9762\u7684\u5b66\u4e60\uff0c\u5927\u5bb6\u5df2\u7ecf\u80fd\u591f\u5f88\u8f7b\u677e\u5730\u7ed9\u51fa\u914d\u7f6e\uff0c \u5728\u6267\u884c\u91cd\u53d1\u5e03\u7684\u547d\u4ee4\u4e2d\uff0c\u53ef\u4ee5\u5173\u8054**cost**\u5173\u952e\u5b57\u6765\u6307\u5b9a\u8def\u7531\u6ce8\u5165ospf\u4e4b\u540e\u7684cost\u3002\u4f46\u662f\u8fd9\u662f\u9488\u5bf9\u6240\u6709\u88ab\u6ce8\u5165\u7684\u8def\u7531\u7684\u3002\u53e6\u5916**import-route rip**\u547d\u4ee4\u4f1a\u5c06R2\u8def\u7531\u8868\u4e2d\u7684RIP\u8def\u7531\u5168\u90fd\u6ce8\u5165OSPF\u3002 \u5982\u679c\u5e0c\u671b\u53ea\u6ce8\u5165\u7279\u5b9a\u7684\u8def\u7531\uff0c\u6216\u5728\u6ce8\u5165\u8fc7\u7a0b\u4e2d\u8fc7\u6ee4\u6389\u67d0\u4e9b\u8def\u7531\u5462\uff1f\u6216\u8005\u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u5728\u6ce8\u5165\u540e\u8bbe\u7f6e\u4e0d\u540c\u7684OSPF cost\u5462\uff1f\u8fd9\u4e2a\u65f6\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528\u5230route-policy\u4e86\u3002 Route-policy\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u57fa\u7840\u6027\u7b56\u7565\u5de5\u5177\u3002\u4f60\u53ef\u4ee5\u628a\u5b83\u60f3\u8c61\u6210\u4e00\u4e2a\u62e5\u6709\u591a\u4e2a\u8282\u70b9\uff08node\uff09\u7684\u5217\u8868\uff08\u8fd9\u4e9bnode\u6309\u7f16\u53f7\u5927\u5c0f\u8fdb\u884c\u6392\u5e8f\uff09\u3002\u5728\u6bcf\u4e2a\u8282\u70b9\u4e2d\uff0c\u53ef\u4ee5\u5b9a\u4e49\u6761\u4ef6\u8bed\u53e5\u53ca\u6267\u884c\u8bed\u53e5\uff0c\u8fd9\u5c31\u6709\u70b9\u50cf\u7a0b\u5e8f\u8bbe\u8ba1\u91cc\u7684if-then\u8bed\u53e5\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002 route-policy\u6267\u884c\u7684\u65f6\u5019\uff0c\u662f\u81ea\u4e0a\u800c\u4e0b\u8fdb\u884c\u8ba1\u7b97\u7684\u3002\u9996\u5148\u770b\u8282\u70b91\uff08\u8fd9\u91cc\u5047\u8bbe\u7f16\u53f7\u6700\u5c0f\u7684\u8282\u70b9\u4e3a1\uff09\uff0c\u5bf9\u8282\u70b91 \u4e2d\u7684\u201c\u6761\u4ef6\u8bed\u53e5\u201d\u8fdb\u884c\u8ba1\u7b97\uff0c\u5982\u679c\u6240\u6709\u7684\u6761\u4ef6\u90fd\u6ee1\u8db3\uff0c\u5219\u6267\u884c\u8be5\u8282\u70b9\u4e0b\u7684\u201c\u6267\u884c\u8bed\u53e5\u201d\uff0c\u5e76\u4e14\u4e0d\u4f1a\u518d\u7ee7\u7eed\u5f80\u4e0b\u4e00\u4e2a\u8282\u70b9\u8fdb\u884c\u5339\u914d\u4e86\u3002\u800c\u5982\u679c\u8282\u70b91\u4e2d\uff0c\u6709\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u4e0d\u6ee1\u8db3\uff0c\u5219\u7ee7\u7eed\u770b\u4e0b\u4e00\u4e2a\u8282\u70b9\uff0c\u5230\u8282\u70b92\u4e2d\u53bb\u5339\u914d\u6761\u4ef6\u8bed\u53e5\uff0c\u5982\u679c\u5168\u90fd\u6ee1\u8db3\u5219\u6267\u884c\u8be5\u8282\u70b9\u4e2d\u5b9a\u4e49\u7684\u6267\u884c\u8bed\u53e5\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\uff0c\u5219\u7ee7\u7eed\u5f80\u4e0b\u4e00\u4e2a\u8282\u70b9\u8fdb\u884c\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u4e0b\u56fe\u5c31\u662f\u4e00\u4e2aroute-policy\uff1a","title":"\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#route-policy","text":"","title":"Route-policy\u7684\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#route-policy_1","text":"[Huawei] route-policy name { permit | deny } node node **Permit**\u5173\u952e\u5b57\u6307\u5b9a\u8282\u70b9\u7684\u5339\u914d\u6a21\u5f0f\u4e3a\u5141\u8bb8\u3002\u5f53\u8be5\u8282\u70b9\u4e0b\u6240\u6709\u7684\u6761\u4ef6\u90fd\u88ab\u6ee1\u8db3\u65f6\uff0c\u5c06\u6267\u884c\u8be5\u8282\u70b9\u7684 apply\u5b50\u53e5\uff0c\u4e0d\u8fdb\u5165\u4e0b\u4e00\u4e2a\u8282\u70b9\uff1b\u5982\u679c\u6709\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u4e0d\u6ee1\u8db3\uff0c\u5c06\u8fdb\u5165\u4e0b\u4e00\u4e2a\u8282\u70b9\u7ee7\u7eed\u8ba1\u7b97\u3002 **Deny**\u5173\u952e\u5b57\u6307\u5b9a\u8282\u70b9\u7684\u5339\u914d\u6a21\u5f0f\u4e3a\u62d2\u7edd\uff0c\u8fd9\u65f6apply\u5b50\u53e5\u4e0d\u4f1a\u88ab\u6267\u884c\u3002\u5f53\u8be5\u8282\u70b9\u4e0b\u6240\u6709\u7684\u6761\u4ef6\u90fd\u88ab\u6ee1\u8db3\u65f6\uff0c\u5c06\u88ab\u62d2\u7edd\u901a\u8fc7\u8be5\u8282\u70b9\uff0c\u4e0d\u8fdb\u5165\u4e0b\u4e00\u4e2a\u8282\u70b9\uff1b\u5982\u679c\u6709\u4efb\u4f55\u4e00\u4e2a\u6761\u4ef6\u4e0d\u6ee1\u8db3\uff0c\u5c06\u8fdb\u5165\u4e0b\u4e00\u4e2a\u8282\u70b9\u7ee7\u7eed\u8ba1\u7b97\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u672a\u5339\u914d\u7684\u8def\u7531\u5c06\u88ab\u62d2\u7edd\u901a\u8fc7route-policy\u3002\u5982\u679cRoute-Policy\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a\u4ee5\u4e0a\u7684\u8282\u70b9\uff0c\u5219\u5404\u8282\u70b9\u4e2d\u81f3\u5c11\u5e94\u8be5\u6709\u4e00\u4e2a\u8282\u70b9\u7684\u5339\u914d\u6a21\u5f0f\u662fpermit\u3002","title":"\u521b\u5efaroute-policy"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#if-match","text":"[Huawei-route-policy] if-match ? \u5bf9\u4e8e\u540c\u4e00\u4e2aroute-policy\u8282\u70b9\uff0c\u547d\u4ee4**if-match acl**\u548c\u547d\u4ee4**if-match ip-prefix**\u4e0d\u80fd\u540c\u65f6\u914d\u7f6e\uff0c\u540e\u914d\u7f6e\u7684 \u547d\u4ee4\u4f1a\u8986\u76d6\u5148\u914d\u7f6e\u7684\u547d\u4ee4\u3002 \u5bf9\u4e8e\u540c\u4e00\u4e2aRoute-Policy\u8282\u70b9\uff0c\u5728\u5339\u914d\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5404\u4e2aif-match\u5b50\u53e5\u95f4\u662f\u201c\u4e0e\u201d\u7684\u5173\u7cfb\uff0c\u5373\u8def\u7531\u4fe1\u606f\u5fc5\u987b\u540c\u65f6\u6ee1\u8db3\u6240\u6709\u5339\u914d\u6761\u4ef6\uff0c\u624d\u53ef\u4ee5\u6267\u884capply\u5b50\u53e5\u7684\u52a8\u4f5c\u3002\u4f46\u547d\u4ee4**if-match route-type**\u548c**if-match** **interface**\u9664\u5916\uff0c\u8fd9\u4e24\u4e2a\u547d\u4ee4\u7684\u5404\u81eaif-match\u5b50\u53e5\u95f4\u662f\u201c\u6216\u201d\u7684\u5173\u7cfb\uff0c\u4e0e\u5176\u5b83\u547d\u4ee4\u7684if-match\u5b50\u53e5\u95f4\u4ecd\u662f\u201c\u4e0e\u201d\u7684\u5173\u7cfb\u3002 \u5982\u4e0d\u6307\u5b9aif-match\u5b50\u53e5\uff0c\u5219\u6240\u6709\u8def\u7531\u4fe1\u606f\u90fd\u4f1a\u901a\u8fc7\u8be5\u8282\u70b9\u7684\u8fc7\u6ee4\u3002","title":"\u914d\u7f6eIf-match\u5b50\u53e5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#apply","text":"","title":"\u914d\u7f6eapply\u5b50\u53e5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#route-policy_2","text":"","title":"Route-policy\u914d\u7f6e\u793a\u4f8b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r1_1","text":"\u7531\u4e8eroute-policy\u5728\u672b\u5c3e\u9690\u542b\u201c\u62d2\u7edd\u6240\u6709\u201d\u7684\u8282\u70b9\uff0c\u56e0\u6b64172.16.2.0/24\u53ca172.16.3.0/24\u8def\u7531\u56e0\u4e3a\u6ca1\u6709\u6ee1\u8db3\u4efb \u4f55\u8282\u70b9\u7684if-match\u8bed\u53e5\uff0c\u4ece\u800c\u4e0d\u88ab\u6ce8\u5165\u5230OSPF\u4e2d\u3002 5.2.2 IP-Prefix","title":"R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_123","text":"\u5728\u90e8\u7f72\u8def\u7531\u7b56\u7565\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5f80\u5f80\u9700\u8981\u901a\u8fc7\u4e00\u4e9b\u624b\u6bb5\u201c\u6293\u53d6\u201d\u8def\u7531\uff0c\u4ece\u800c\u80fd\u591f\u9488\u5bf9\u7279\u5b9a\u7684\u8def\u7531\u6765\u6267\u884c\u76f8\u5e94\u7684\u7b56\u7565\uff0c\u4ee5\u5b9e\u73b0\u5dee\u5f02\u5316\u3002\u5728\u201c\u6293\u53d6\u201d\u8def\u7531\u7684\u5de5\u5177\u4e2d\uff0cACL\u65e0\u7591\u662f\u6700\u5e38\u7528\u7684\u5de5\u5177\u4e4b\u4e00\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR2\u90e8\u7f72\u4e86RIP\u5230OSPF\u7684\u8def\u7531\u91cd\u53d1\u5e03\uff0c\u5728\u8fd9\u4e2a\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u6709\u4e2a\u7279\u6b8a\u9700\u6c42\uff1a\u5c06\u5f15\u5165OSPF\u540e\u7684\u5916\u90e8\u8def\u7531192.168.1.0/24\u7684cost\u8bbe\u5b9a\u4e3a10\u3001192.168.2.0/24\u7684cost\u8bbe\u5b9a\u4e3a20\uff0c\u90a3\u4e48\u6211\u4eec\u4fbf\u8981\u5148\u5339\u914d\u6216\u8005\u8bf4\u201c\u6293\u53d6\u201d\u76f8\u5173\u8def\u7531\uff0c\u7136\u540e\u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u5728route-policy\u4e2dapply\u4e0d\u540c\u7684cost\uff0c\u4ece\u800c\u5b9e\u73b0\u7b56\u7565\u3002 \u4f7f\u7528ACL\u6765\u5e94\u5bf9\u8fd9\u4e2a\u9700\u6c42\u662f\u5b8c\u5168\u6ca1\u95ee\u9898\u7684\uff0c\u5b9a\u4e49\u4e00\u4e2aACL2001\uff0c\u5339\u914d192.168.1.0\uff0c\u5b9a\u4e49\u4e00\u4e2aACL2002 \u5339\u914d192.168.2.0\uff0c\u7136\u540e\u5728route-policy RP\u4e2d\u5199\u4e24\u4e2anode\u5206\u522b\u9488\u5bf9\u8fd9\u4e24\u6761\u8def\u7531apply\u4e0d\u540c\u7684cost\u503c\uff0c\u5f88\u7b80\u5355\u3002\u4f46\u662f\u2026\u2026 \u4e0a\u9762\u8fd9\u4e2a\u73af\u5883\uff0cACL\u5c31\u65e0\u80fd\u4e3a\u529b\u4e86\u3002\u4e3a\u4ec0\u4e48\u5462\uff1f\u56e0\u4e3aACL\u53ea\u80fd\u591f\u5339\u914d\u8def\u7531\u524d\u7f00\u7684\u7f51\u7edc\u5730\u5740\u90e8\u5206\uff0c\u65e0\u6cd5\u5339\u914d\u8def\u7531\u524d\u7f00\u7684\u7f51\u7edc\u63a9\u7801\uff08\u6216\u8005\u8bf4\u524d\u7f00\u957f\u5ea6\uff09\u3002\u51c6\u786e\u7684\u8bf4\uff0c\u4e00\u6761\u8def\u7531\u524d\u7f00\u662f\u5305\u542b\u7f51\u7edc\u5730\u5740\u548c\u7f51\u7edc\u63a9\u7801\uff08\u524d\u7f00\u957f\u5ea6\uff09\u7684\uff0c\u5bf9\u4e8e192.168.1.0\uff0c\u8fd9\u7b97\u4e0d\u4e0a\u4e00\u6761\u5b8c\u6574\u7684\u8def\u7531\uff0c\u5e94\u8be5\u91c7\u7528192.168.1.0 255.255.255.0\u6216\u8005 192.168.1.0/24\u7684\u65b9\u5f0f\u5448\u73b0\uff0c\u8fd9\u624d\u662f\u4e00\u6761\u5b8c\u6574\u8def\u7531\u3002\u800c\u53ea\u8981\u7f51\u7edc\u5730\u5740\u6216\u8005\u7f51\u7edc\u63a9\u7801\u4e2d\u6709\u4efb\u4f55\u4e00\u9879\u4e0d\u540c\uff0c \u8fd9\u5c31\u662f\u4e24\u6761\u4e0d\u540c\u7684\u8def\u7531\u4e86\uff0c\u4f8b\u5982192.168.1.0/24\u548c192.168.1.0/25\uff0c\u8fd9\u5c31\u662f\u4e24\u6761\u4e0d\u540c\u7684\u8def\u7531\u3002 ACL\u662f\u65e0\u6cd5\u5339\u914d\u8def\u7531\u524d\u7f00\u7684\u63a9\u7801\u90e8\u5206\u7684\uff0c\u56e0\u6b64\u4e0a\u56fe\u6240\u793a\u7684\u9700\u6c42\u7528ACL\u662f\u65e0\u6cd5\u5b8c\u6210\u7684\u3002\u8fd9\u91cc\u987a\u4fbf\u591a\u5634\u4e00\u53e5\uff0c \u5982\u679c\u4f7f\u7528Basic ACL\u5339\u914d\u8def\u7531\uff0c\u90a3\u4e48\u5efa\u8bae\u5728\u4e66\u5199ACL\u65f6\uff0c\u53cd\u63a9\u7801\u4f7f\u75280.0.0.0\uff0c\u5426\u5219\u4f1a\u9020\u6210\u5339\u914d\u4e0d\u7cbe\u786e\u7684\u73b0\u8c61\u3002\u4f8b\u5982\u8981\u5339\u914d192.168.1.0/24\u8fd9\u6761\u8def\u7531\uff0c\u5982\u679cacl\u7684rule\u8fd9\u4e48\u5199\uff1a rule permit source 192.168.1.0 0.0.0.255 \u8fd9\u4e8b\u5b9e\u4e0a\u662f\u4e0d\u4e25\u8c28\u7684\uff0c\u56e0\u4e3a\u5b83\u5c06192.168.1.0\u3001192.168.1.1\u3001192.168.1.2\u3001192.168.1.3\u2026\u2026\u2026\u2026\u7b49\u4f17\u591a \u7f51\u7edc\u5730\u5740\u5168\u5339\u914d\u4f4f\u4e86\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0a\u9762\u76840.0.0.255\uff0c\u5e76\u4e0d\u80fd\u7528\u4e8e\u5339\u914d\u7f51\u7edc\u63a9\u7801255.255.255.0\uff0c\u5b83\u53ea\u4e0d\u8fc7\u662f\u4e0e\u524d\u9762\u7684192.168.1.0\u7ec4\u5408\uff0c\u5e76\u7528\u4e8e\u5339\u914d\u7f51\u7edc\u5730\u5740\u800c\u5df2\u3002\u6240\u4ee5\uff0c\u5efa\u8bae\u8fd9\u4e48\u5199\uff1a rule permit source 192.168.1.0 0.0.0.0 \u6216\u8005\uff1a rule permit source 192.168.1.0 0","title":"\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ip-prefixip","text":"IP\u524d\u7f00\u5217\u8868\u5339\u914d\u8def\u7531\u7684\u53ef\u63a7\u6027\u6bd4ACL\u9ad8\u5f97\u591a\uff0c\u4e5f\u66f4\u4e3a\u7075\u6d3b\uff1b IP\u524d\u7f00\u5217\u8868\u53ef\u5339\u914d\u8def\u7531\u524d\u7f00\u4e2d\u7684\u7f51\u7edc\u5730\u5740\u53ca\u7f51\u7edc\u63a9\u7801\uff08\u524d\u7f00\u957f\u5ea6\uff09\uff0c\u589e\u5f3a\u4e86\u5339\u914d\u7684\u7cbe\u786e\u5ea6\uff1b IP\u524d\u7f00\u5217\u8868\u9664\u4e86\u80fd\u591f\u5339\u914d\u5177\u4f53\u7684\u7f51\u7edc\u63a9\u7801\u957f\u5ea6\uff0c\u8fd8\u80fd\u591f\u5339\u914d\u63a9\u7801\u957f\u5ea6\u8303\u56f4\uff0c\u975e\u5e38\u7075\u6d3b\u3002 \u4e00\u4e2aIP\u524d\u7f00\u5217\u8868\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u8868\u9879\uff08\u8bed\u53e5\uff09\uff0c\u5728\u5339\u914d\u8fc7\u7a0b\u4e2d\u4f9d\u5e8f\u8fdb\u884c\u8ba1\u7b97\u3002\u8868\u9879\u4e2d\u7684\u7d22\u5f15\u53f7 \uff08\u5e8f\u53f7\uff09\u51b3\u5b9a\u4e86\u6bcf\u4e2a\u8868\u9879\u5728\u6574\u4e2aIP\u524d\u7f00\u5217\u8868\u4e2d\u7684\u4f4d\u7f6e\u3002","title":"IP-Prefix\uff08IP\u524d\u7f00\u5217\u8868\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ip_5","text":"\u521b\u5efa\u4e00\u4e2aIP\u524d\u7f00\u5217\u8868\u7684\u914d\u7f6e\u5982\u4e0b\uff1a *Name*\u53c2\u6570\u662f\u672cIP\u524d\u7f00\u5217\u8868\u7684\u540d\u79f0\u3002 **Index**\u5173\u952e\u5b57\u53ca\u53c2\u6570\u6307\u793a\u672c\u8868\u9879\u5728\u672cIP\u524d\u7f00\u5217\u8868\u4e2d\u7684\u5e8f\u53f7\uff08\u6216\u7d22\u5f15\u53f7\uff09\uff0c\u8be5\u5173\u952e\u5b57\u53ca\u53c2\u6570\u662f\u53ef\u9009\u7684\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u8be5\u5e8f\u53f7\u503c\u6309\u7167\u914d\u7f6e\u5148\u540e\u987a\u5e8f\u4f9d\u6b21\u9012\u589e\uff0c\u6bcf\u6b21\u52a010\uff0c\u7b2c\u4e00\u4e2a\u5e8f\u53f7\u503c\u4e3a10\u3002 **Permit**\u53ca**deny**\u5173\u952e\u5b57\u7528\u4e8e\u914d\u7f6e\u672c\u8868\u9879\u7684\u5339\u914d\u6a21\u5f0f\u3002 *ip-address mask-length*\u53c2\u6570\u7528\u4e8e\u5206\u522b\u5236\u5b9aIP\u5730\u5740\u53ca\u63a9\u7801\u957f\u5ea6\u3002 [ greater-equal greater-equal-value ] [ less-equal less-equal-value ]\u662f\u53ef\u9009\u914d\u7f6e\uff0c\u7528\u4e8e\u6307\u5b9a\u63a9\u7801\u957f\u5ea6\u7684\u8303\u56f4\u3002 \u5982\u679c\u5728\u547d\u4ee4\u4e2d\u53ea\u6307\u5b9a\u4e86**greater-equal**\uff0c\u5219\u524d\u7f00\u8303\u56f4\u4e3a[greater-equal-value\uff0c32]\uff1b \u5982\u679c\u5728\u547d\u4ee4\u4e2d\u53ea\u6307\u5b9a\u4e86**less-equal**\uff0c\u5219\u524d\u7f00\u8303\u56f4\u4e3a[mask-length\uff0cless-equal-value]\u3002 IP\u524d\u7f00\u5217\u8868\u7531\u5217\u8868\u540d\u79f0\u8fdb\u884c\u6807\u8bc6\uff0c\u6bcf\u4e2aIP\u524d\u7f00\u5217\u8868\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u8868\u9879\u3002\u4e0b\u9762\u7684\u914d\u7f6e\u5c55\u793a\u4e86\u4e00\u4e2a\u540d\u4e3aabcd\uff0c \u5b83\u5305\u542b\u4e24\u4e2a\u8868\u9879\uff1a \u5728IP\u524d\u7f00\u5217\u8868\u7684\u5339\u914d\u8fc7\u7a0b\u4e2d\uff0c\u8bbe\u5907\u6309\u7d22\u5f15\u53f7\u5347\u5e8f\u4f9d\u6b21\u68c0\u67e5\u5404\u4e2a\u8868\u9879\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u8868\u9879\u6ee1\u8db3\u6761\u4ef6\uff0c\u5c31\u4e0d\u518d \u53bb\u5339\u914d\u540e\u7eed\u8868\u9879\u3002 \u4ee5**ip ip-prefix abcd index 10 deny 1.0.0.0 8**\u4e3a\u4f8b\uff0c\u8fd9\u4e2a\u8868\u9879\u5c5e\u4e8eIP\u524d\u7f00\u5217\u8868abcd\uff0c\u5b83\u7684\u7d22\u5f15\u53f7\u4e3a10\uff0c \u5e76\u4e14\u5339\u914d\u6a21\u5f0f\u4e3a\u62d2\u7edd\uff0c\u5728\u8be5\u8868\u9879\u4e2dIP\u524d\u7f00\u4e3a1.0.0.0\uff0c\u63a9\u7801\u957f\u5ea6\u4e3a8\uff0c\u56e0\u6b64\u8fd9\u4e2a\u8868\u9879\u7528\u4e8e\u5339\u914d\u8def\u75311.0.0.0/8\uff0c \u53ea\u6709\u8be5\u8def\u7531\u624d\u4f1a\u88ab\u5339\u914d\uff0c\u5e76\u4e14\u8be5\u8def\u7531\u5c06\u4f1a\u88ab\u8be5\u8868\u9879\u8fc7\u6ee4\uff08deny\uff09\u3002\u8fd9\u4e2a\u547d\u4ee4\u4e2d\u6ca1\u6709\u5b9a\u4e49\u63a9\u7801\u957f\u5ea6\u8303\u56f4\u3002 \u5982\u679c\u4e00\u6761\u8def\u7531\u65e0\u6cd5\u88ab\u4e00\u4e2aIP\u524d\u7f00\u5217\u8868\u4e2d\u7684\u6240\u6709\u8868\u9879\u5339\u914d\uff0c\u90a3\u4e48\u8fd9\u6761\u8def\u7531\u88ab\u89c6\u4e3a\u88ab\u8be5\u524d\u7f00\u5217\u8868\u62d2\u7edd\u901a\u8fc7\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2aIP\u524d\u7f00\u5217\u8868\u7684\u672b\u5c3e\uff0c\u9690\u542b\u7740\u4e00\u6761\u62d2\u7edd\u6240\u6709\u7684\u8868\u9879\u3002","title":"IP\u524d\u7f00\u5217\u8868\u7684\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#4","text":"\u793a\u4f8b1\uff1a \u5339\u914d\u67d0\u6761\u7279\u5b9a\u8def\u7531192.168.1.0/24\uff1a ip ip-prefix ipprefix1 192.168.1.0 24 \u5339\u914d\u9ed8\u8ba4\u8def\u75310.0.0.0/0\uff1a ip ip-prefix ipprefix2 permit 0.0.0.0 0 \u6ce8\u610f\uff1aIP\u524d\u7f00\u4e3a0.0.0.0\u65f6\u8868\u793a\u901a\u914d\u5730\u5740\u3002\u6b64\u65f6\u4e0d\u8bba\u63a9\u7801\u6307\u5b9a\u4e3a\u591a\u5c11\uff0c\u90fd\u8868\u793a\u63a9\u7801\u957f\u5ea6\u8303\u56f4\u5185\u7684\u6240\u6709 \u8def\u7531\u5168\u88ab\u5339\u914d\u3002 \u5339\u914d\u6240\u6709/32\u4e3b\u673a\u8def\u7531\uff1a ip ip-prefix ipprefix3 permit 0.0.0.0 0 greater-equal 32 \u5339\u914d\u4efb\u610f\u8def\u7531(any)\uff1a ip ip-prefix ipprefix4 permit 0.0.0.0 0 less-equal 32 \u793a\u4f8b2\uff1a \u5339\u914d\u4ee5\u4e0b\u8def\u7531\uff08\u7528\u6700\u7cbe\u786e\u6700\u7b80\u6d01\u7684\u65b9\u5f0f\uff09\uff1a 192.168.4.0/24 192.168.5.0/24 192.168.6.0/24 192.168.7.0/24 ip ip-prefix abcd permit 192.168.4.0 22 greater-equal 24 less-equal 24 \u4e0a\u9762\u8fd9\u6761\u547d\u4ee4\u7684\u610f\u601d\u662f\uff0c\u5141\u8bb8\u90a3\u4e9b\u7f51\u7edc\u5730\u5740\u7684\u524d22bit\u4e0e192.168.4.0\u7684\u524d22bit\u76f8\u540c\uff0c\u5e76\u4e14\u7f51\u7edc\u63a9\u7801 \u957f\u5ea6\u4e3a24\u7684\u8def\u7531\u3002\u6ce8\u610f\u6b64\u5904\u201cgreater-equal 24 less-equal 24\u201d\u8981\u6c42\u7f51\u7edc\u63a9\u7801\u957f\u5ea6\u65e2\u5927\u4e8e\u6216\u7b49\u4e8e24\uff0c\u53c8\u5c0f\u4e8e\u6216\u7b49\u4e8e24\uff0c\u56e0\u6b64\u53ea\u80fd\u662f24\u3002 \u793a\u4f8b3\uff1a \u5728\u4ee5\u4e0a\u914d\u7f6e\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u79f0\u4e3a1\u7684IP\u524d\u7f00\u5217\u8868\uff0c\u8be5\u5217\u8868\u4e2d\u5305\u542b\u4e00\u4e2a\u8868\u9879\uff0c\u8fd9\u4e2a\u8868\u9879\u8981\u6c42\u88ab\u5339\u914d\u8def\u7531\u7684\u7f51\u7edc\u5730\u5740\u7684\u524d16bit\u4e0e192.168.0.0\u7684\u524d16bit\u76f8\u540c\uff0c\u5e76\u4e14\u8def\u7531\u7684\u7f51\u7edc\u63a9\u7801\u957f\u5ea6\u4e3a16\uff0c \u56e0\u6b64\u8be5\u8868\u9879\u53ea\u80fd\u7528\u4e8e\u5339\u914d\u8def\u7531192.168.0.0/16\u3002\u7531\u4e8e\u8be5\u8868\u9879\u7684\u5339\u914d\u6a21\u5f0f\u4e3apermit \uff0c \u56e0\u6b64\u8def\u7531 192.168.0.0/16\u88ab\u8be5IP\u524d\u7f00\u5217\u8868\u5141\u8bb8\u3002 \u968f\u540e\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2aroute-policy RP\uff0c\u5b83\u5305\u542b\u4e00\u4e2a\u8282\u70b9\uff0c\u4e14\u8be5\u8282\u70b9\u7684\u5339\u914d\u6a21\u5f0f\u4e3apermit\u3002\u8be5\u8282\u70b9\u8c03\u7528\u4e86IP\u524d\u7f00\u5217\u88681\uff0c\u5982\u6b64\u4e00\u6765\uff0c192.168.0.0/16\u5c06\u88abroute-policy RP\u6240\u5141\u8bb8\uff0c\u800c\u7531\u4e8eroute-policy\u7684\u672b\u5c3e\u9690\u542b\u7740\u4e00\u4e2a\u62d2\u7edd\u6240\u6709\u7684\u8282\u70b9\uff0c\u56e0\u6b64\u5bf9\u4e8eroute-policy RP\u800c\u8a00\uff0c\u53ea\u5141\u8bb8\u4e86\u8def\u7531192.168.0.0/16\u3002 BGP BGP \u57fa\u672c\u6982\u5ff5","title":"4 \u914d\u7f6e\u793a\u4f8b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp","text":"IGP\u4e5f\u5373\u5185\u90e8\u7f51\u5173\u8def\u7531\u534f\u8bae\uff0c\u5178\u578b\u4ee3\u8868\u6709OSPF\u3001IS-IS\u7b49\u3002IGP\u5de5\u4f5c\u7684\u201c\u7740\u773c\u70b9\u201d\u5728AS\uff08\u81ea\u6cbb\u7cfb\u7edf\uff09\u5185\u90e8\uff0c \u5b83\u7684\u4e3b\u8981\u804c\u8d23\u5c31\u662f\u8d1f\u8d23AS\u5185\u7684\u8def\u7531\u53d1\u73b0\u548c\u5feb\u901f\u6536\u655b\uff0c\u800c\u4e14\u5176\u627f\u8f7d\u7684\u8def\u7531\u524d\u7f00\u5c31\u662f\u672cAS\u5185\u7684\u524d\u7f00\u3002 \u8fd9\u91cc\u5148\u4ecb\u7ecd\u4e00\u4e0bAS\u7684\u6982\u5ff5\uff0cAS\uff08Autonomous system\uff0c\u81ea\u6cbb\u7cfb\u7edf\uff09\u6307\u7684\u662f\u5728\u540c\u4e00\u4e2a\u7ec4\u7ec7\u6216\u673a\u6784\u7ba1\u7406\u4e0b\u3001\u4f7f\u7528\u76f8\u540c\u7b56\u7565\u7684\u8bbe\u5907\u7684\u96c6\u5408\u3002\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u7684\u5c06AS\u7406\u89e3\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684\u673a\u6784\u6216\u8005\u4f01\u4e1a\u2014\u2014\u4f8b\u5982\u4e2d\u56fd\u8054\u901a\u2014\u2014\u6240\u7ba1\u7406\u7684\u7f51\u7edc\u3002\u53e6\u4e00\u4e2aAS\u7684\u4f8b\u5b50\u662f\u4e00\u5bb6\u5927\u578b\u4f01\u4e1a\u7684\u7f51\u7edc\uff0c\u5728\u7f51\u7edc\u7684\u89c4\u5212\u4e0a\u5c06\u5168\u7403\u5404\u4e2a\u533a\u57df\u5212\u5206\u4e3a\u4e00\u4e2a\u4e2aAS\uff1a \u4e2d\u56fd\u533a\u662f\u4e00\u4e2aAS\uff0c\u5357\u7f8e\u533a\u662f\u4e00\u4e2aAS\u4ee5\u6b64\u7c7b\u63a8\u3002 \u4e0d\u540c\u7684AS\u901a\u8fc7AS\u53f7\u533a\u5206\uff0cAS\u53f7\u53d6\u503c\u8303\u56f41\uff0d65535\uff0c\u5176\u4e2d64512\uff0d65535\u662f\u79c1\u6709AS\u53f7\uff0c\u5728\u79c1\u6709\u7f51\u7edc\u53ef\u968f\u610f\u4f7f\u7528\u3002IANA\u8d1f\u8d23AS\u53f7\u7684\u5206\u53d1\uff0c\u5982\u679c\u8981\u4f7f\u7528\u516c\u6709AS\u53f7\uff0c\u5219\u9700\u8981\u5411IANA\u7533\u8bf7\u3002 BGP\uff08Border Gateway Protocol\uff0c\u8fb9\u754c\u7f51\u5173\u534f\u8bae\uff09 \uff0c\u662f\u4e00\u79cd\u8ddd\u79bb\u77e2\u91cf\u8def\u7531\u534f\u8bae\uff0c\u4e25\u683c\u7684\u8bf4\u5e94\u8be5\u53eb\u8def\u5f84\u77e2\u91cf\u8def\u7531\u534f\u8bae\uff0c\u4e3b\u8981\u7528\u4e8e\u5728AS\u4e4b\u95f4\u4f20\u9012\u8def\u7531\u4fe1\u606f\uff0c\u9002\u7528\u4e8e\u5927\u89c4\u6a21\u7684\u7f51\u7edc\u73af\u5883\uff0cInternet\u7684\u9aa8\u5e72\u7f51\u7edc\u6b63\u662f\u5f97\u76ca\u4e8eBGP\u624d\u80fd\u627f\u8f7d\u5982\u6b64\u5927\u6279\u91cf\u7684\u8def\u7531\u524d\u7f00\u3002\u603b\u7684\u6765\u8bf4\uff0c\u65e0\u8bba\u662f\u5185\u90e8\u7f51\u5173\u8def\u7531\u534f\u8bae\uff0c\u6216\u8005\u5916\u90e8\u7f51\u5173\u8def\u7531\u534f\u8bae\uff0c\u6700\u7ec8\u7684\u76ee\u7684\u90fd\u662f\u4e3a\u4e86\u5b9e\u73b0\u8def\u7531\u7684\u4e92\u901a\uff0c\u4ece\u800c\u6700\u7ec8\u5b9e\u73b0\u6570\u636e\u7684\u4e92\u901a\u3002","title":"BGP\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp_1","text":"BGP\u5728\u4f20\u8f93\u5c42\u4f7f\u7528TCP\u4ee5\u786e\u4fdd\u53ef\u9760\u4f20\u8f93\uff0c\u6240\u4f7f\u7528\u7684TCP\u76ee\u7684\u7aef\u53e3\u53f7\u4e3a179\uff1b BGP\u4f1a\u5728\u9700\u8981\u4ea4\u6362\u8def\u7531\u7684\u8def\u7531\u5668\u4e4b\u95f4\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u8fd9\u4e9b\u8def\u7531\u5668\u88ab\u79f0\u4e3aBGP\u5bf9\u7b49\u4f53\uff0c\u4e5f\u53ebBGP\u90bb\u5c45\u3002\u6709\u4e24\u79cdBGP\u90bb\u5c45\u5173\u7cfb\uff1aEBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u4ee5\u53caIBGP\u90bb\u5c45\u5173\u7cfb\u3002 BGP\u7684\u90bb\u5c45\u5173\u7cfb\u53ef\u4ee5\u8de8\u8def\u7531\u5668\u5efa\u7acb\uff0c\u800c\u4e0d\u50cfOSPF\u53caRIP\u90a3\u6837\uff0c\u5fc5\u987b\u8981\u6c42\u76f4\u8fde\u3002 BGP\u5bf9\u7b49\u4f53\u5728\u90bb\u5c45\u5173\u7cfb\u5efa\u7acb\u65f6\u4ea4\u6362\u6574\u4e2aBGP\u8def\u7531\u8868\u3002 \u5728\u90bb\u5c45\u5173\u7cfb\u5efa\u7acb\u5b8c\u6210\u540e\uff0cBGP\u8def\u7531\u5668\u53ea\u53d1\u9001\u589e\u91cf\u66f4\u65b0\u6216\u89e6\u53d1\u66f4\u65b0\uff08\u4e0d\u4f1a\u5468\u671f\u6027\u66f4\u65b0\uff09\u3002 BGP\u5177\u6709\u4e30\u5bcc\u7684\u8def\u5f84\u5c5e\u6027\u548c\u5f3a\u5927\u7684\u7b56\u7565\u5de5\u5177\u3002 BGP\u80fd\u591f\u627f\u8f7d\u5927\u6279\u91cf\u7684\u8def\u7531\u524d\u7f00\uff0c\u7528\u4e8e\u5927\u89c4\u6a21\u7684\u7f51\u7edc\u4e2d\u3002","title":"BGP\u7684\u534f\u8bae\u7279\u5f81"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp_2","text":"BGP\u62a5\u6587\u662f\u88ab\u627f\u8f7d\u5728TCP\u62a5\u6587\u4e4b\u4e0a\u7684\uff0c\u4f7f\u7528\u7aef\u53e3\u53f7179\u3002\u5171\u6709\u4e94\u79cd\u62a5\u6587\uff1a \u62a5\u6587\u540d\u79f0 \u4f5c\u7528\u662f\u4ec0\u4e48 \u4ec0\u4e48\u65f6\u5019\u53d1\u5305 OPEN \u534f\u5546BGP\u90bb\u5c45\u7684\u5404\u9879\u53c2\u6570\uff0c\u5efa\u7acb\u90bb \u5c45\u5173\u7cfb \u901a\u8fc7TCP\u5efa\u7acbBGP\u8fde\u63a5\uff0c\u53d1\u9001open\u62a5\u6587 UPDATE \u8fdb\u884c\u8def\u7531\u4fe1\u606f\u7684\u4ea4\u6362 \u8fde\u63a5\u5efa\u7acb\u540e\uff0c\u6709\u8def\u7531\u9700\u8981\u53d1\u9001\u6216\u8def\u7531\u53d8\u5316\u65f6\uff0c\u53d1\u9001 UPDATE\u901a\u544a\u5bf9\u7aef\u8def\u7531\u4fe1\u606f NOTIFICATION \u62a5\u544a\u9519\u8bef\uff0c\u4e2d\u6b62\u90bb\u5c45\u5173\u7cfb \u5f53BGP\u5728\u8fd0\u884c\u4e2d\u53d1\u73b0\u9519\u8bef\u65f6\uff0c\u8981\u53d1\u9001NOTIFICATION\u62a5\u6587 \u901a\u544aBGP\u5bf9\u7aef KEEPALIVE \u7ef4\u6301\u90bb\u5c45\u5173\u7cfb \u5b9a\u65f6\u53d1\u9001KEEPALIVE\u62a5\u6587\u4ee5\u4fdd\u6301BGP\u90bb\u5c45\u5173\u7cfb\u7684\u6709\u6548\u6027 Route-refresh \u4e3a\u4fdd\u8bc1\u7f51\u7edc\u7a33\u5b9a\uff0c\u89e6\u53d1\u66f4\u65b0\u8def\u7531\u7684 \u673a\u5236 \u5f53\u8def\u7531\u7b56\u7565\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u89e6\u53d1\u8bf7\u6c42\u90bb\u5c45\u91cd\u65b0\u901a\u544a\u8def\u7531","title":"BGP\u62a5\u6587"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp_3","text":"\u8fd0\u884cBGP\u7684\u8def\u7531\u5668\u88ab\u79f0\u4e3aBGP speaker\u3002BGP\u8def\u7531\u5668\u4e4b\u95f4\u8981\u4ea4\u4e92BGP\u8def\u7531\uff0c\u524d\u63d0\u662f\u8981\u5efa\u7acb\u6b63\u5e38\u7684BGP\u90bb\u5c45\u5173\u7cfb\u3002\u8981\u5efa\u7acb\u6b63\u786e\u7684BGP\u90bb\u5c45\u5173\u7cfb\uff0c\u9996\u5148BGP\u5bf9\u7b49\u4f53\u4e4b\u95f4\u8981\u5148\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u7531\u4e8eBGP\u662f\u627f\u8f7d\u5728TCP\u4e4b\u4e0a\u7684\uff0c\u56e0\u6b64BGP\u6ca1\u6709\u201c\u90bb\u5c45\u5fc5\u987b\u76f4\u8fde\u201d\u7684\u9650\u5236\u3002 \u6709\u4e24\u79cdBGP\u90bb\u5c45\u5173\u7cfb\uff1a","title":"BGP\u5bf9\u7b49\u4f53\u7c7b\u578b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ebgpexternal-bgp-peerasbgpbgp","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u3001R2\u3001R3\u5c5e\u4e8e\u4e00\u4e2aAS\uff0cAS\u53f7\u4e3a100\uff1bR4\u5c5e\u4e8e\u53e6\u4e00\u4e2aAS\uff0cAS\u53f7\u4e3a200\u3002\u7531\u4e8eR3\u53caR4\u5206\u522b\u5c5e\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684AS\uff0c\u56e0\u6b64\u5b83\u4eec\u4e4b\u95f4\u5efa\u7acb\u7684BGP\u90bb\u5c45\u5173\u7cfb\u5c31\u662fEBGP\u90bb\u5c45\u5173\u7cfb\u3002 \u8981\u5efa\u7acbeBGP\u90bb\u63a5\u5173\u7cfb\u5fc5\u987b\u81f3\u5c11\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a1\uff09\u4e24\u4e2aeBGP\u90bb\u5c45\u6240\u5c5eAS\u53f7\u4e0d\u540c\uff1b2\uff09Peer\u547d\u4ee4\u6240\u6307\u5b9a\u7684IP\u5730\u5740\u8981\u8def\u7531\u53ef\u8fbe\uff0c\u5e76\u4e14\u4e24\u8005\u4e4b\u95f4TCP\u8fde\u63a5\u80fd\u591f\u5efa\u7acb\u3002","title":"EBGP\u90bb\u5c45\uff08External BGP peer\uff09\uff1a\u4f4d\u4e8e\u4e0d\u540cAS\u7684BGP\u8def\u7531\u5668\u4e4b\u95f4\u7684BGP\u90bb\u5c45\u5173\u7cfb"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ibgpinternal-bgp-peerasbgpbgp","text":"\u5728\u4e0a\u56fe\u4e2d\uff0c\u5728AS100\u5185\uff0cR1\u3001R2\u3001R3\u8fd0\u884c\u4e86\u4e00\u4e2aIGP\uff0c\u4e5f\u5c31\u662fOSPF\uff0c\u8fd0\u884cOSPF\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u8ba9AS \u5185\u7684\u8def\u7531\u80fd\u591f\u6253\u901a\u3002\u53e6\u4e00\u65b9\u9762\uff0cR1\u4e0eR3\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2aBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u7531\u4e8eR1\u53caR3\u540c\u5c5e\u4e00\u4e2aAS\uff0c\u56e0\u6b64\u5b83\u4eec\u4e4b\u95f4\u5efa\u7acb\u7684BGP\u8fde\u63a5\u662fIBGP\u7684\u90bb\u5c45\u5173\u7cfb\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cR2\u5e76\u6ca1\u6709\u8fd0\u884cBGP\uff0cR1-R3\u4e4b\u95f4\u5e76\u975e\u76f4\u8fde\uff0c\u8fd9\u5728BGP\u4e2d\u662f\u88ab\u5141\u8bb8\u7684\uff0c\u56e0\u4e3aBGP\u662f\u88ab\u627f\u8f7d\u5728TCP\u4e4b\u4e0a\u7684\u3002\u5efa\u7acbIBGP\u90bb\u63a5\u5173\u7cfb\uff0c\u5fc5\u987b\u81f3\u5c11\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a1\uff09\u4e24\u4e2aIBGP\u90bb\u5c45\u6240\u5c5eAS\u53f7\u76f8\u540c\uff1b2\uff09 Peer\u547d\u4ee4\u6240\u6307\u5b9a\u7684IP\u5730\u5740\u8981\u8def\u7531\u53ef\u8fbe\uff0c\u5e76\u4e14TCP\u8fde\u63a5\u80fd\u591f\u5efa\u7acb\u3002\u4e0d\u540c\u7684BGP\u90bb\u5c45\u5173\u7cfb\uff0c\u5bf9\u8def\u7531\u7684\u64cd\u4f5c\u662f\u6709\u660e\u663e\u533a\u522b\u7684\u3002","title":"IBGP\u90bb\u5c45\u5173\u7cfb\uff08Internal BGP peer\uff09\uff1a\u4f4d\u4e8e\u76f8\u540cAS\u7684BGP\u8def\u7531\u5668\u4e4b\u95f4\u7684BGP\u90bb\u63a5\u5173\u7cfb"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp_4","text":"BGP\u662f\u4e00\u4e2a\u8def\u5f84\u77e2\u91cf\u8def\u7531\u534f\u8bae\u3002\u5728\u67d0\u4e9b\u5c42\u9762\u4e0a\uff0c\u5b83\u4e0eRIP\u975e\u5e38\u76f8\u4f3c\uff0c\u5728BGP\u90bb\u5c45\u4e4b\u95f4\u4e92\u76f8\u66f4\u65b0\u7684\u662f\u8def\u7531\u8868\uff0c BGP\u8def\u7531\u540c\u6837\u6709\u8ddd\u79bb\u7684\u6982\u5ff5\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u91cc\u7684\u8ddd\u79bb\uff0c\u4e0eRIP\u7684\u6240\u8c13\u8df3\u6570\u662f\u5b8c\u5168\u4e0d\u540c\u7684\u3002 BGP\u5728\u5c06\u8def\u7531\u66f4\u65b0\u7ed9\u90bb\u5c45\u65f6\uff0c\u4f1a\u7ed9\u6bcf\u6761\u8def\u7531\u7c98\u9644\u8bb8\u591a\u8def\u5f84\u5c5e\u6027\uff08Path Attribute\uff09\u3002BGP\u5b9a\u4e49\u4e86\u4e30\u5bcc\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u4f7f\u5f97BGP\u5bf9\u8def\u7531\u7684\u64cd\u63a7\u53ca\u7b56\u7565\u90e8\u7f72\u53d8\u5f97\u5f02\u5e38\u7684\u7075\u6d3b\u3002\u6bcf\u6761BGP\u8def\u7531\u90fd\u643a\u5e26\u4e86\u82e5\u5e72\u8def\u5f84\u5c5e\u6027\uff0c\u8def\u5f84\u5c5e\u6027\u662fBGP\u7684\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u57fa\u672c\u6982\u5ff5\uff0c\u53ef\u4ee5\u7406\u89e3\u662f\u4e3a\u7528\u4e8e\u63cf\u8ff0\u6bcf\u6761\u8def\u7531\u7684\u7279\u5f81\u7684\u4e00\u7cfb\u5217\u5c5e\u6027\u503c\u3002\u5c31\u597d\u50cf\u4e00\u4e2a\u4eba\uff0c\u6709\u8eab\u9ad8\u3001\u4f53\u91cd\u3001\u5e74\u9f84\u7b49\u8fd9\u4e48\u4e00\u4e9b\u5c5e\u6027\u3002\u5176\u4e2d\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u8def\u5f84\u5c5e\u6027\u5c31\u662fAS_PATH\uff0c\u79f0\u4e3aAS\u5217\u8868\uff0c \u5b83\u7528\u4e8e\u63cf\u8ff0\u4e00\u6761\u8def\u7531\u7ecf\u8fc7\u7684AS\u53f7\u3002\u6bcf\u6761BGP\u8def\u7531\u90fd\u5fc5\u987b\u643a\u5e26AS_PATH\u5c5e\u6027\u3002 \u76f8\u6bd4\u4e8eIGP\u7740\u773c\u4e8eAS\u5185\uff0cBGP\u7684\u201c\u5fc3\u80f8\u201d\u53ef\u5c31\u5f00\u9614\u5f97\u591a\u4e86\uff0c\u5728BGP\u773c\u91cc\uff0c\u4e00\u8df3\uff0c\u5c31\u662f\u4e00\u4e2aAS\u3002\u5728\u4e0a\u56fe\u4e2d\uff0c AS500\u5185\u6709\u6761\u8def\u753110.1.1.0/24\uff0c\u8fd9\u6761\u8def\u7531\u88abAS500\u7684\u8fb9\u754c\u8def\u7531\u5668\uff08\u5728\u56fe\u4e2d\u672a\u753b\u51fa\uff09\u901a\u544a\u7ed9\u4e86EBGP\u90bb\u5c45R1\u53ca R3\u3002\u5728\u8def\u7531\u4f20\u51faAS500\u7684\u65f6\u5019\uff0c\u8fb9\u754c\u8def\u7531\u5668\u4f1a\u5c06\u8def\u7531\u7684AS_PATH\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a500\u3002\u73b0\u5728R1\u6536\u5230\u4e86\u8fd9\u6761\u8def\u7531\uff0c\u5b83\u53c8\u5c06\u8def\u7531\u901a\u544a\u7ed9\u4e86\u81ea\u5df1\u7684IBGP\u90bb\u5c45R2\uff0c\u7531\u4e8e\u8fd9\u6761\u8def\u7531\u6ca1\u6709\u88ab\u4f20\u51faAS100\uff0c\u56e0\u6b64AS_PATH\u6ca1\u6709\u53d1\u751f\u6539\u53d8\uff0c\u503c\u4f9d\u7136\u4e3a500\u3002\u63a5\u4e0b\u53bbR2\u5c06\u8def\u7531\u901a\u544a\u7ed9\u4e86EBGP\u90bb\u5c45R5\uff0c\u7531\u4e8e\u8fd9\u65f6\u8def\u7531\u8981\u4f20\u51faAS\uff0c\u56e0\u6b64R2\u4e3a\u8def\u7531\u7684 AS_PATH\u63d2\u5165\u4e00\u4e2a\u503c\u4e3a100\u7684\u53f7\u7801\uff08\u4e5f\u5c31\u662f\u672c\u5730AS\u53f7\uff0c\u5728\u5217\u8868\u7684\u524d\u9762\u63d2\u5165\uff09\uff0c\u8fd9\u6837\u4e00\u6765R2\u4f20\u9012\u7ed9R5\u7684BGP \u8def\u753110.1.1.0/24\u4e2d\uff0cAS_PATH\u5c5e\u6027\u503c\u5c31\u53d8\u6210\u4e86100,500\uff0c\u8fd9\u662f\u4e00\u4e2aAS\u7684\u5217\u8868\uff0c\u5f53R5\u6536\u5230\u8fd9\u6761\u8def\u7531\u65f6\uff0c\u5b83\u5c31\u77e5\u9053\uff0c\u6211\u8981\u53bb\u5f8010.1.1.0/24\uff0c\u662f\u9700\u8981\u5148\u5230AS100\uff0c\u7136\u540e\u518d\u5230AS500\uff0c\u53ea\u9700\u8981\u7ecf\u8fc72\u8df3AS\u3002 \u53e6\u4e00\u65b9\u9762\uff0cR5\u4e5f\u4eceR4\u6536\u5230\u4e86\u5173\u4e8e10.1.1.0/24\u7684BGP\u8def\u7531\u66f4\u65b0\uff0cAS_PATH\u4e3a300 200 500\uff0cR5\u5c31\u77e5\u9053\uff0c\u4ece AS300\u4e5f\u80fd\u5230\u8fbe10.1.1.0/24\uff0c\u4e0d\u8fc7\u9700\u8981\u7ecf\u8fc73\u8df3AS\u3002 AS_PATH\u5728BGP\u4e2d\u662f\u975e\u5e38\u91cd\u8981\u7684\u8def\u5f84\u5c5e\u6027\u3002\u4e00\u65b9\u9762\u80fd\u591f\u7528\u6765\u4f5c\u4e3aBGP\u8def\u7531\u4f18\u9009\u7684\u4f9d\u636e\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u7528\u4e8e\u5728 AS\u4e4b\u95f4\u9632\u6b62\u8def\u7531\u73af\u8def\u7684\u53d1\u751f\u3002\u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0cR5\u540c\u65f6\u6536\u5230\u4e24\u6761\u5230\u8fbe10.1.1.0/24\u7684\u8def\u7531\uff0c\u5728\u4e0d\u8003\u8651\u5176\u4ed6\u56e0\u7d20\u7684\u60c5\u51b5\u4e0b\uff0cR5\u4f1a\u4f18\u9009AS_PATH\u66f4\u77ed\u7684\u8def\u7531\uff0c\u56e0\u4e3a\u201c\u8ddd\u79bb\u7684AS\u8df3\u6570\u201d\u66f4\u5c11\uff0c\u6240\u4ee5\u6700\u7ec8\u4f18\u9009\u4eceR2\u8d70\u3002\u53e6\u5916\uff0c 10.1.1.0/24\u88abAS500\u7684\u8fb9\u754c\u8def\u7531\u5668\u901a\u544a\u7ed9R1\u540e\uff0c\u5b8c\u5168\u6709\u53ef\u80fd\u4eceR2-R5-R4-R3\u518d\u901a\u544a\u56de\u6765\uff0c\u8fd9\u5c31\u5f62\u6210\u4e86\u8def\u7531\u73af\u8def\uff0c\u5e86\u5e78\u7684\u662f\u6709AS_PATH\u8fd9\u4e2a\u8def\u5f84\u5c5e\u6027\u3002\u5982\u679cAS500\u7684\u8fb9\u754c\u8def\u7531\u5668\u53d1\u73b0\uff0cEBGP\u90bb\u5c45R3\u901a\u544a\u7ed9\u5b83\u7684\u8def\u7531\u7684AS_PATH\u5c5e\u6027\u503c\u91cc\u51fa\u73b0\u4e86\u81ea\u5df1\u7684AS\u53f7\uff0c\u5b83\u5c31\u8ba4\u4e3a\u51fa\u73b0\u4e86\u73af\u8def\uff0c\u56e0\u6b64\u5c06\u5ffd\u7565\u8fd9\u4e2a\u8def\u7531\u66f4\u65b0\u3002","title":"BGP\u7684\u8def\u5f84\u77e2\u91cf\u7279\u5f81"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ibgp","text":"\u5728AS\u4e4b\u95f4\uff0cBGP\u7684\u8def\u7531\u9632\u73af\u5f88\u5927\u7a0b\u5ea6\u4e0a\u662f\u901a\u8fc7AS_PATH\u5b9e\u73b0\u7684\uff0c\u800cAS_PATH\u4ec5\u4ec5\u5728\u8def\u7531\u79bb\u5f00AS\u624d\u4f1a\u88ab\u66f4\u6539\uff0c\u56e0\u6b64\u5728AS\u5185\uff0cIBGP\u8def\u7531\u5c31\u6ca1\u6709EBGP\u8def\u7531\u90a3\u6837\u7684\u9632\u73af\u80fd\u529b\u4e86\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u201cIBGP\u6c34\u5e73\u5206\u5272\u201d\uff1a \u4e3a\u4e86\u9632\u6b62\u8def\u7531\u73af\u8def\u7684\u51fa\u73b0\uff0cBGP\u8def\u7531\u5668\u4e0d\u4f1a\u5c06\u81ea\u5df1\u4eceIBGP\u90bb\u5c45\u5b66\u4e60\u8fc7\u6765\u7684\u8def\u7531\u518d\u901a\u544a\u7ed9\u5176\u4ed6IBGP\u90bb\u5c45 \u3002 IBGP\u6c34\u5e73\u5206\u5272\u5728\u534e\u4e3a\u7f51\u7edc\u8bbe\u5907\u4e0a\u9ed8\u8ba4\u5df2\u7ecf\u5f00\u542f\u3002 IBGP\u6c34\u5e73\u5206\u5272\u52a0\u4e0aAS_PATH\u8def\u5f84\u5c5e\u6027\uff0c\u80fd\u591f\u5728\u6781\u5927\u7a0b\u5ea6\u4e0a\u89e3\u51b3BGP\u7684\u8def\u7531\u73af\u8def\u95ee\u9898\uff0c\u4f46\u662f\uff0c\u5728\u67d0\u4e9b\u73af\u5883\u4e2d\uff0cIBGP\u6c34\u5e73\u5206\u5272\u4e5f\u5e26\u6765\u4e00\u4e9b\u95ee\u9898\u3002 \u5728\u4e0a\u56fe\u4e2d\uff1a\u8def\u7531\u5668A\u5c5e\u4e8eAS65101\u3001\u8def\u7531\u5668BCDE\u5c5e\u4e8eAS65102\u3001\u8def\u7531\u5668F\u5c5e\u4e8eAS65103\uff1b AB\uff0cEF\u4e4b\u95f4\u5efa\u7acbEBGP\u90bb\u5c45\u5173\u7cfb\uff1bBC\uff0cCE\uff0cBD\uff0cDE\u4e4b\u95f4\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\uff1b \u73b0\u5728F\u8def\u7531\u5668\u5c06\u4e00\u6761\u8def\u7531\u901a\u8fc7BGP\u66f4\u65b0\u7ed9\u4e86E\uff0cE\u4eceEBGP\u90bb\u5c45\u5b66\u4e60\u5230\u8fd9\u6761\u8def\u7531\u540e\uff0c\u4f1a\u5c06\u5176\u901a\u544a\u7ed9C\uff0c\u800cC\u4ece\u81ea\u5df1\u7684IBGP\u90bb\u5c45E\u90a3\u5b66\u4e60\u5230\u8fd9\u6761\u8def\u7531\u540e\uff0c\u6839\u636eiBGP\u6c34\u5e73\u5206\u5272\u89c4\u5219\uff0c\u5b83\u4e0d\u80fd\u518d\u5c06\u8be5\u8def\u7531\u901a\u544a\u7ed9\u81ea\u5df1\u7684IBGP\u90bb\u5c45B\u4e86\uff0c\u56e0\u6b64B\u8def\u7531\u5668\u65e0\u6cd5\u5b66\u4e60\u5230\u53bb\u5f80AS65103\u7684\u8def\u7531\u3002\u8fd9\u5c31\u662fIBGP\u6c34\u5e73\u5206\u5272\u5e26\u6765\u7684\u95ee\u9898\u3002 \u90a3\u4e48\uff0c\u4e3a\u4e86\u89c4\u907f\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5c31\u4e0d\u5f97\u4e0d\u5728AS65102\u5185\u5efa\u7acbIBGP\u5168\u4e92\u8054\uff0c\u4e5f\u5c31\u662fBCDE\u56db\u53f0\u8def\u7531\u5668\u4e24\u4e24\u90fd\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\u3002\u8fd9\u79cd\u65b9\u6cd5\u5728\u8def\u7531\u5668\u6570\u91cf\u8f83\u5c11\u7684\u65f6\u5019\u5c1a\u4e14\u53ef\u884c\uff0c\u53ef\u662f\u5982\u679c\u6570\u91cf\u5f88\u591a\uff0c\u8def\u7531\u5668\u5c31\u5c06\u4f1a\u56e0\u4e3a\u9700\u8981\u7ef4\u62a4\u8fc7\u591a\u7684BGP\u90bb\u5c45\u5173\u7cfb\u800c\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cBGP\u8bbe\u8ba1\u4e86\u4e24\u4e2a\u673a\u5236\uff1a\u8def\u7531\u53cd\u5c04\u5668\uff0c \u4ee5\u53ca\u8054\u90a6\uff0c\u8fd9\u5728\u540e\u6587\u4e2d\u8ba8\u8bba\u3002","title":"IBGP\u6c34\u5e73\u5206\u5272"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#asibgp","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff1a \u8def\u7531\u5668A\u5c5e\u4e8eAS65101\uff1b\u8def\u7531\u5668BCDE\u5c5e\u4e8eAS65102\uff1b\u8def\u7531\u5668F\u5c5e\u4e8eAS65103\uff1b BCDE\u8fd0\u884cOSPF\uff0c\u6253\u901aAS65102\u5185\u7684\u8def\u7531\uff1b BE\u8def\u7531\u5668\u8fd0\u884cBGP\uff0c\u4e24\u8005\u4e4b\u95f4\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\uff1bCD\u8def\u7531\u5668\u4e0d\u8fd0\u884cBGP\u3002 A\u4e0a\u6709\u4e2a\u76f4\u8fde\u7f51\u6bb51.1.1.0/24\uff0cA\u5c06\u5230\u8fbe\u8be5\u7f51\u6bb5\u7684\u8def\u7531\u6ce8\u5165BGP\uff0c\u5e76\u4e14\u5c06\u8def\u7531\u901a\u544a\u7ed9B\uff0cB\u53c8\u4f1a\u5c06\u5176\u901a\u544a\u7ed9IBGP\u90bb\u5c45E\uff08\u8fd9\u4e2a\u4f20\u9012\u8fc7\u7a0b\u5176\u5b9e\u662fB\u5c06BGP\u62a5\u6587\u653e\u7f6e\u4e8eIP\u5305\u5185\u7ecf\u8fc7C\u6216D\u6700\u7ec8\u4f20\u9012\u7ed9E\uff0c\u5bf9\u4e8eCD\u800c\u8a00\uff0c\u8fd9\u4e9b\u6570\u636e\u5305\u90fd\u662f\u666e\u901aIP\u5305\uff0c\u76ee\u7684\u5730\u5740\u662fE\uff0c\u56e0\u6b64\u76f4\u63a5\u8f6c\u53d1\u4e0d\u67e5\u770b\uff09\u3002 \u6700\u7ec8E\u5c061.1.1.0/24\u8def\u7531\u4f20\u9012\u5230\u4e86F\u3002\u7136\u800c\uff0c\u867d\u7136F\u80fd\u901a\u544aBGP\u5b66\u4e60\u5230\u8fd9\u6761\u8def\u7531\uff0c\u4f46\u662f\u5f53\u6709\u6570\u636e\u524d\u5f801.1.1.0/24 \u65f6\uff0cF\u5c06\u6570\u636e\u5305\u4e22\u7ed9\u4e0b\u4e00\u8df3E\uff0c\u800cE\u53d1\u73b01.1.1.0/24\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u662fB\uff0cB\u5e76\u975e\u76f4\u8fde\uff0c\u56e0\u6b64\u9700\u9012\u5f52\u5f97\u5230\u5176\u524d\u5f80B \u7684\u4e0b\u4e00\u8df3\uff0c\u5230B\u7684\u4e0b\u4e00\u8df3\u662fD\u6216C\uff08\u901a\u8fc7OSPF\u5f97\u77e5\uff09\uff0c\u4e8e\u662fE\u5c06\u6570\u636e\u5305\u4e22\u7ed9D\u6216C\uff0c\u800cC\u548cD\u662f\u5e76\u4e0d\u77e5\u9053\u5982\u4f55\u5230\u8fbe1.1.1.0/24\u7684\uff08\u5b83\u4eec\u53ea\u8fd0\u884c\u4e86OSPF\uff0c\u6ca1\u6709\u8fd0\u884cBGP\uff09\uff0c\u4e8e\u662f\u5b83\u4eec\u5c06\u6570\u636e\u5305\u4e22\u5f03\uff0c\u81f3\u6b64\u5f62\u6210\u4e86\u8def\u7531\u9ed1\u6d1e\u3002","title":"\u540c\u6b65\u89c4\u5219\u53ca\u4e2d\u8f6cAS\u5185\u7684IBGP\u4e92\u8054\u95ee\u9898"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgpbgpibgpebgpigpebgp","text":"\u56de\u5230\u4e0a\u6587\u7684\u573a\u666f\uff0c\u4e3a\u4e86\u89c4\u907f\u8def\u7531\u9ed1\u6d1e\u95ee\u9898\uff0c\u53ef\u4ee5\u8003\u8651\u5728B\u3001E\u4e0a\uff0c\u5c06BGP\u8def\u7531\u91cd\u53d1\u5e03\u8fdbOSPF\uff0c\u8fd9\u6837\u4e00\u6765B\u3001 E\u5c31\u90fd\u80fd\u4eceBGP\uff0c\u4ee5\u53caIGP\u5b66\u4e60\u5230\u8def\u7531\uff0c\u4ece\u800c\u5f62\u6210\u540c\u6b65\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002\u4f46\u8fd9\u4e48\u505a\u540e\u679c\u662f\u4e0d\u53ef\u9884\u4f30\u7684\uff0c\u6bd5\u7adf BGP\u627f\u8f7d\u7684\u8def\u7531\u6761\u76ee\u662f\u76f8\u5f53\u5de8\u5927\u7684\u3002 \u53e6\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\u662fAS\u5185\u8def\u7531\u5668\u90fd\u8fd0\u884cBGP\uff0c\u5e76\u5b9e\u73b0IBGP\u5168\u4e92\u8054\uff0c\u90a3\u4e48\u8be5AS\u5185\u7684\u8def\u7531\u5668\u5c31\u90fd\u80fd\u83b7\u5f97BGP\u8def\u7531\uff0c\u5982\u6b64\u5373\u53ef\u89e3\u51b3\u8def\u7531\u9ed1\u6d1e\u95ee\u9898\u3002\u4f46\u662f\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e2a\u7f3a\u9677\uff0c\u5373\u5982\u679c\u8bbe\u5907\u6570\u91cf\u592a\u591a\uff0c\u7ba1\u7406\u8fd9\u4e9bIBGP\u7684\u90bb\u63a5\u5173\u7cfb\u5c06\u4f1a\u662f\u4e2a\u6311\u6218\uff0c\u5e76\u4e14\u8bbe\u5907\u7684\u8d1f\u62c5\u4e5f\u8f83\u5927\u3002\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528BGP\u8054\u90a6\u6216\u8005\u8def\u7531\u53cd\u5c04\u5668\u6280\u672f\u3002 \u7efc\u4e0a\u6240\u8ff0\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u624b\u6bb5\u89e3\u51b3\u8def\u7531\u9ed1\u6d1e\u95ee\u9898\uff0c\u56e0\u6b64BGP\u540c\u6b65\u89c4\u5219\u4e5f\u5c31\u4e0d\u518d\u6709\u5fc5\u8981\u4e86\u3002\u5b9e\u9645\u4e0a\u8fd9\u662f\u4e00\u4e2a\u5f88\u8001\u65e7\u7684\u7279\u6027\uff0c\u534e\u4e3a\u8def\u7531\u5668\u7f3a\u7701\u65f6\u5173\u95ed\u4e86BGP\u540c\u6b65\u89c4\u5219\u3002\u56e0\u6b64\u5f53BGP\u8def\u7531\u5668\u4eceIBGP\u90bb\u5c45\u5b66\u4e60\u5230\u4e00\u6761\u8def\u7531\u65f6\uff0c\u8be5\u8def\u7531\u5668\u65e0\u9700\u518d\u4eceIGP\u518d\u6b21\u5b66\u4e60\u5230\u76f8\u540c\u8def\u7531\uff0c\u53ef\u4ee5\u76f4\u63a5\u5c06\u8be5BGP\u8def\u7531\u901a\u544a\u7ed9EBGP\u90bb\u5c45\u3002","title":"\u3010BGP\u540c\u6b65\u89c4\u5219\u7684\u6982\u5ff5\u3011BGP\u8def\u7531\u5668\u4eceIBGP\u90bb\u5c45\u5b66\u5230\u4e00\u6761\u8def\u7531\u540e\uff0c\u662f\u4e0d\u542f\u7528\u7684\uff08\u4e0d\u4f18\u9009\u7684\uff09\uff0c\u4e5f\u4e0d\u4f1a\u5c06\u5176\u901a\u544a\u7ed9EBGP\u90bb\u5c45\uff0c\u9664\u975e\u5b83\u518d\u6b21\u4eceIGP\u5b66\u4e60\u5230\u76f8\u540c\u7684\u8def\u7531\uff0c\u624d\u4f1a\u542f\u7528\u5e76\u901a\u544a\u7ed9EBGP\u90bb\u5c45\u3002\u8fd9\u662f\u4e3a\u4e86\u9632\u6b62\u51fa\u73b0\u4e0a\u9762\u6240\u63cf\u8ff0\u7684\u8def\u7531\u9ed1\u6d1e\u95ee\u9898\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp_5","text":"BGP\u8def\u7531\u5668\u4f1a\u5c06\u5176\u53d1\u73b0\u7684BGP\u8def\u7531\u5b58\u50a8\u5728BGP\u8def\u7531\u8868\u4e2d\u3002\u5f53\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u5730\u5b58\u5728\u591a\u6761BGP\u8def\u5f84\u65f6\uff0c \u8def\u7531\u5668\u4f1a\u5c06\u8fd9\u4e9b\u8def\u5f84\uff08\u8def\u7531\uff09\u90fd\u5b58\u50a8\u5728BGP\u8def\u7531\u8868\u4e2d\uff0c\u4f46\u662f\uff0c\u5230\u8fbe\u6bcf\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\uff0c\u8def\u7531\u5668\u53ea\u4f1a\u9009\u53d6\u6700 \u4f18\uff08Best\uff09\u7684\u8def\u7531\u6765\u4f7f\u7528\uff0c\u5e76\u5c06\u8be5BGP\u8def\u7531\u52a0\u8f7d\u5230\u5168\u5c40\u8def\u7531\u8868\u4e2d\uff08\u5728\u6ca1\u6709\u6fc0\u6d3b\u8def\u7531\u8d1f\u8f7d\u5206\u62c5\u7684\u60c5\u51b5\u4e0b\uff09\u3002 BGP\u8def\u7531\u5668\u53ea\u628a\u81ea\u5df1\u4f7f\u7528\u7684\u3001\u6700\u4f18\u7684\u8def\u7531\u901a\u544a\u7ed9\u5176\u4ed6\u90bb\u5c45\u3002 BGP\u8def\u7531\u5668\u4f1a\u5c06\u5176\u4eceEBGP\u90bb\u5c45\u5b66\u4e60\u5230\u7684\u8def\u7531\u901a\u544a\u7ed9\u6240\u6709BGP\u90bb\u5c45\uff08\u5305\u62ecEBGP\u548cIBGP\u90bb\u5c45\uff09\u3002 BGP\u8def\u7531\u5668\u4e0d\u4f1a\u5c06\u5176\u4eceIBGP\u90bb\u5c45\u5b66\u4e60\u5230\u7684\u8def\u7531\u901a\u544a\u7ed9\u5b83\u7684IBGP\u90bb\u5c45\uff08IBGP\u6c34\u5e73\u5206\u5272\uff1b\u5b58\u5728\u8def\u7531\u53cd\u5c04\u5668\u7684\u60c5\u51b5\u9664\u5916\uff09\u3002 5.3.2 BGP \u5165\u95e8\u5b9e\u9a8c","title":"BGP\u8def\u7531\u901a\u544a\u89c4\u5219\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#5321","text":"R1\u3001R2\u3001R3\u5c5e\u4e8eAS 123\uff1bR4\u5c5e\u4e8eAS 400\uff1b R1\u3001R2\u3001R3\u8fd0\u884cOSPF\uff0c\u8fd0\u884cOSPF\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u6253\u901aAS 123\u5185\u7684\u8def\u7531\uff1b R3-R4\u4e4b\u95f4\u5efa\u7acbEBGP\u90bb\u5c45\u5173\u7cfb\uff0cR2\u4e0d\u8fd0\u884cBGP\uff1b R1-R3\u4e4b\u95f4\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\uff1b \u5728R4\u4e0a\uff0c\u5c06\u8def\u75314.4.4.0/24\u53d1\u5e03\u5230BGP\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\uff09\uff1a R2\u7684\u914d\u7f6e\u6bd4\u8f83\u7b80\u5355\uff0c\u5c31\u662f\u8fd0\u884cOSPF\u800c\u5df2\uff0c\u8fd9\u90e8\u5206\u914d\u7f6e\u4e0d\u518d\u8d58\u8ff0\u3002 R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R4\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5728R3\u4e0a\u67e5\u770bBGP\u8def\u7531\u8868\uff1a [R3] display bgp routing-table BGP Local router ID is 10.1.23.3 Status codes: * - valid, > - best, d - damped, h - history, i - internal, s - suppressed, S - Stale Origin : i - IGP, e - EGP, ? - incomplete Total Number of Routes: 1 *> Network 4.4.4.0/24 NextHop 10.1.34.4 MED 0 LocPrf PrefVal 0 Path/Ogn 400 i \u6211\u4eec\u770b\u5230R3\u5df2\u7ecf\u5b66\u4e60\u5230\u4e86R4\u901a\u544a\u8fc7\u6765\u7684BGP\u8def\u75314.4.4.0/24\u3002\u5e76\u4e14\u8be5\u6761BGP\u8def\u7531\u7684NextHop\u5c5e\u6027\u503c\u4e3a 10.1.34.4\uff0c\u8fd9\u4e2a\u4e0b\u4e00\u8df3\u5730\u5740\u662f\u8def\u7531\u53ef\u8fbe\u7684\u3002\u8be5\u6761\u8def\u7531\u5728R3\u7684BGP\u8def\u7531\u8868\u91cc\u6709\u201c* >\u201d \u6807\u8bb0\uff0c\u5176\u4e2d\u201c*\u201d\u8868\u793a\u8fd9\u6761\u8def\u7531\u662f\u53ef\u7528\u7684\uff08valid\uff09\uff0c\u53ea\u6709\u5f53BGP\u8def\u7531\u7684NextHop\u4e3a\u8def\u7531\u53ef\u8fbe\u65f6\uff0c\u8be5BGP\u8def\u7531\u624d\u4f1a\u88ab\u89c6\u4e3a\u53ef\u7528\uff1b\u800c \u201c>\u201d\u5219\u8868\u793a\u8fd9\u6761\u8def\u7531\u662f\u88ab\u4f18\u9009\u7684\u8def\u7531\uff0c\u6216\u8005\u8bf4\u662f\u5230\u8fbe\u8be5\u76ee\u7684\u7f51\u7edc\u7684\u6700\u4f18\u8def\u7531\u3002 BGP\u8def\u7531\u7684NextHop\u5c5e\u6027\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u5c5e\u6027\uff0c\u5b83\u662f\u6240\u6709BGP\u8def\u7531\u90fd\u4f1a\u643a\u5e26\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u5b83\u6307\u793a\u4e86\u5230\u8fbe\u76ee\u7684\u7f51\u7edc\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u3002 \u5728R3\u4e0a\u67e5\u770b\u8def\u7531\u8868\uff1a R3\u5df2\u7ecf\u5c06\u5230\u8fbe4.4.4.0/24\u7684BGP\u8def\u7531\u52a0\u8f7d\u5230\u4e86\u5168\u5c40\u8def\u7531\u8868\u4e2d\u3002 \u5bf9\u4e8eR3\u800c\u8a00\uff0c\u5230\u8fbe4.4.4.0/24\u7684\u8def\u7531\u5df2\u7ecf\u88ab\u4f18\u9009\uff0c\u63a5\u4e0b\u6765\uff0c\u5b83\u4f1a\u5c06\u8be5\u8def\u7531\u901a\u544a\u7ed9IBGP\u90bb\u5c45R1\u3002\u5728R1\u4e0a\u67e5\u770bBGP\u8def\u7531\u8868\uff1a \u6211\u4eec\u770b\u5230\uff0cR1\u7684BGP\u8def\u7531\u8868\u4e2d\u5df2\u7ecf\u51fa\u73b0\u4e864.4.4.0/24\u8def\u7531\uff0c\u800c\u8fd9\u6761\u8def\u7531\u7684NextHop\u5c5e\u6027\u503c\u662f10.1.34.4\uff0c\u4f46\u662f R1\u5728\u672c\u5730\u8def\u7531\u8868\u4e2d\u6ca1\u6709\u5230\u8fbe10.1.34.4\u7684\u8def\u7531\uff0c\u56e0\u6b6410.1.34.4\u4e0d\u53ef\u8fbe\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u8be5BGP\u8def\u7531\u4e5f\u5c31\u4e0d\u53ef\u7528\u4e86 \uff08\u5728BGP\u8def\u7531\u8868\u4e2d\u6ca1\u6709*\u53f7\u6807\u8bb0\uff09\uff0c\u65e2\u7136\u4e0d\u53ef\u7528\uff0c\u81ea\u7136\u5c31\u4e0d\u80fd\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\u4e2d\u4f7f\u7528\u3002 \u90a3\u4e48\u600e\u4e48\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\uff0c\u4e3aR1\u914d\u7f6e\u4e00\u6761\u9759\u6001\u8def\u7531\uff1a ip route-static 10.1.34.0 24 10.1.23.3 \uff0c\u8fd9\u6837\u4e00\u6765R1\u7684\u8def\u7531\u8868\u91cc\u5c31\u6709\u4e86\u5230\u8fbe10.1.34.4\u7684\u8def\u7531\uff0c\u90a3\u4e48BGP\u8def\u75314.4.4.0/24\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u5c31\u53ef\u8fbe\u4e86\uff0c\u5bf9\u5e94\u7684BGP\u8def\u7531\u81ea\u7136\u4e5f\u5c31\u53ef\u7528\u4e86\u3002\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u592a\u201c\u7b28\u62d9\u201d\u3002\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\uff0c\u5728R3\u7684OSPF\u8fdb\u7a0b\u4e2d\u5c0610.1.34.0/24\u7f51\u6bb5\u4e5f\u6ce8\u5165\u8fdb\u53bb\uff0c\u4f7f\u5f97R1\u80fd\u591f\u901a\u8fc7OSPF\u5b66\u4e60\u523010.1.34.0/24\u8def\u7531\uff0c\u8fd9\u79cd\u65b9\u6cd5\u4e5f\u662f\u53ef\u884c\u7684\u3002\u4f46\u662f\u7531\u4e8eR3-R4\u4e4b\u95f4\u7684\u4e92\u8054\u94fe\u8def\u88ab\u89c6\u4e3aAS\u5916\u90e8\u94fe\u8def\uff0c\u56e0\u6b6410.1.34.0/24\u4f5c\u4e3a\u5916\u90e8\u7f51\u6bb5\u5f80\u5f80\u4e0d\u4f1a\u88ab\u5ba3\u544a\u8fdbAS\u5185\u7684IGP\u3002\u90a3\u4e48\u8fd8\u6709\u4ec0\u4e48\u5176\u4ed6\u529e\u6cd5\u80fd\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u4e48\uff1f","title":"5.3.2.1 \u57fa\u7840\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_124","text":"BGP\u8def\u7531\u5668\u5728\u5411EBGP\u5bf9\u7b49\u4f53\u53d1\u5e03\u67d0\u6761\u8def\u7531\u65f6\uff0c\u4f1a\u628a\u8be5\u8def\u7531\u4fe1\u606f\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u672c\u5730\u4e0e\u5bf9\u7aef\u5efa\u7acb BGP\u90bb\u5c45\u5173\u7cfb\u7684\u63a5\u53e3\u5730\u5740\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0cR4\u5c064.4.4.0/24\u901a\u544a\u7ed9R3\u65f6\uff0c\u4e0b\u4e00\u8df3\u4e3a10.1.34.4\uff0c\u4e5f\u5c31\u662fR4 \u7684GE0/0/0\u63a5\u53e3\u5730\u5740\u3002 BGP\u8def\u7531\u5668\u5c06\u672c\u5730\u59cb\u53d1\u8def\u7531\u53d1\u5e03\u7ed9IBGP\u5bf9\u7b49\u4f53\u65f6\uff0c\u4f1a\u628a\u8be5\u8def\u7531\u4fe1\u606f\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u672c\u5730\u4e0e\u5bf9\u7aef\u5efa\u7acbBGP\u90bb\u5c45\u5173\u7cfb\u7684\u63a5\u53e3\u5730\u5740\u3002 BGP\u8def\u7531\u5668\u5728\u5411IBGP\u5bf9\u7b49\u4f53\u53d1\u5e03\u4eceEBGP\u5bf9\u7b49\u4f53\u5b66\u6765\u7684\u8def\u7531\u65f6\uff0c\u5e76\u4e0d\u6539\u53d8\u8be5\u8def\u7531\u4fe1\u606f\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u3002\u4f8b\u5982\u4e0b\u56fe\u6240\u793a\uff0cR3\u6536\u5230R4\u901a\u544a\u7684EBGP\u8def\u7531\uff0c\u8be5\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u503c\u4e3a10.1.34.4\uff0c\u5b83\u5c06\u8be5\u6761\u8def\u7531\u901a\u544a\u7ed9IBGP\u5bf9\u7b49\u4f53R1\u7684\u65f6\u5019\uff0c\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u503c\u4e0d\u4f1a\u53d1\u751f\u6539\u53d8\uff0c\u4ecd\u7136\u4e3a10.1.34.4\u3002 \u8fd9\u5c31\u9020\u6210\u4e86\u6211\u4eec\u4e0a\u9762\u6240\u8ff0\u7684\u95ee\u9898\uff0c\u7531\u4e8eR1\u6ca1\u6709\u5230\u8fbe10.1.34.0/24\u7684\u8def\u7531\uff0c\u56e0\u6b64\u4e0b\u4e00\u8df3\u5730\u574010.1.34.4\u4e0d\u53ef\u8fbe\uff0c \u4ece\u800c\u5bfc\u81f4BGP\u8def\u75314.4.4.0/24\u4e0d\u53ef\u7528\u3002 \u8fd8\u6709\u4e00\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a\u5728R3\u4e0a\u4f7f\u7528**next-hop-local**\u547d\u4ee4\uff0c\u53ef\u4fee\u6539BGP\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u503c\u4e3a\u81ea\u8eab\u3002\u5728\u4e0b\u56fe\u4e2d\uff0c\u6211\u4eec\u5728R3\u4e0a\u589e\u52a0\u4e86**peer 10.1.12.1 next-hop-local**\u547d\u4ee4\uff0c\u90a3\u4e48\u8fd9\u6837\u4e00\u6765\uff0c\u5f53R3\u518d\u5c06EBGP\u8def\u7531\u901a\u544a\u7ed9R1\u7684\u65f6\u5019\uff0c\u4f1a\u5c06\u8fd9\u4e9b\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5c5e\u6027\u503c\u4fee\u6539\u4e3a\u81ea\u5df1\u7684\u66f4\u65b0\u6e90\u5730\u5740\uff0810.1.23.3\uff09\uff0c\u800cR1\u5df2\u7ecf\u901a\u8fc7 OSPF\u83b7\u77e5\u5230\u8fbe10.1.23.0/24\u7684\u8def\u7531\uff0c\u56e0\u6b6410.1.23.3\u662f\u53ef\u8fbe\u7684\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u5728R1\u4e0a\u67e5\u770bBGP\u8def\u7531\u8868\uff1a","title":"\u4fee\u6539\u4e0b\u4e00\u8df3\u4e3a\u81ea\u8eab"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ip_6","text":"\u53ef\u4ee5\u624b\u5de5\u6307\u5b9a\u7528\u4e8e\u5efa\u7acbBGP\u8fde\u63a5\u7684\u6e90\u63a5\u53e3\u53ca\u6e90IP\u5730\u5740\u3002\u547d\u4ee4\u5982\u4e0b\uff1a [Router-bgp] peer x.x.x.x connect-interface intf [ ipv4-src-address ] \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cBGP\u4f7f\u7528\u62a5\u6587\u7684\u51fa\u63a5\u53e3\u4f5c\u4e3aBGP\u62a5\u6587\u7684\u6e90\u63a5\u53e3\u3002\u5f53\u7528\u6237\u5b8c\u6210**peer**\u547d\u4ee4\u7684\u914d\u7f6e\u540e\uff0c\u8bbe\u5907\u4f1a\u5728\u81ea \u5df1\u7684\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u5230\u8fbe\u8be5\u5bf9\u7b49\u4f53\u5730\u5740\u7684\u8def\u7531\uff0c\u5e76\u4ece\u8be5\u8def\u7531\u5f97\u5230\u51fa\u63a5\u53e3\u4fe1\u606f\u3002\u5982\u679c**peer**\u547d\u4ee4\u4e2d\u6ca1\u6709\u6307\u5b9a\u63a5\u53e3 \uff08 connect-interface \uff09\u548cIP\u5730\u5740\uff08 ipv4-src-address \uff09\uff0c\u90a3\u4e48\u8bbe\u5907\u5c06\u4f1a\u4f7f\u7528\u524d\u8ff0\u51fa\u63a5\u53e3\u548c\u8be5\u63a5\u53e3\u7684IP\u5730\u5740\u4f5c\u4e3aBGP\u62a5\u6587\u7684\u6e90\u63a5\u53e3\u548c\u6e90\u5730\u5740\u3002 \u4e3a\u4e86\u4f7f\u7269\u7406\u63a5\u53e3\u5728\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u8bbe\u5907\u4ecd\u80fd\u53d1\u9001BGP\u62a5\u6587\uff0c\u53ef\u5c06\u53d1\u9001BGP\u62a5\u6587\u7684\u6e90\u63a5\u53e3\u914d\u7f6e\u6210Loopback\u63a5\u53e3\u3002\u5728\u4f7f\u7528Loopback\u63a5\u53e3\u4f5c\u4e3aBGP\u62a5\u6587\u7684\u6e90\u63a5\u53e3\u65f6\uff0c\u5fc5\u987b\u786e\u8ba4BGP\u5bf9\u7b49\u4f53\u7684Loopback\u63a5\u53e3\u7684\u5730\u5740\u662f\u53ef\u8fbe\u7684\u3002\u7531\u4e8e\u4e00\u4e2aAS\u5185\u5f80\u5f80\u4f1a\u8fd0\u884cIGP\u534f\u8bae\uff0c\u56e0\u6b64AS\u5185\u7684\u8bbe\u5907\u80fd\u591f\u901a\u8fc7\u8be5IGP\u534f\u8bae\u83b7\u77e5\u5230\u8fbe\u5176\u4ed6\u8bbe\u5907\u7684Loopback\u63a5\u53e3\u7684\u8def\u7531\u3002\u5728AS\u5185\u90e8\uff0cIBGP\u90bb\u5c45\u5173\u7cfb\u901a\u5e38\u57fa\u4e8eLoopback\u63a5\u53e3\u5efa\u7acb\u3002 EBGP\u90bb\u5c45\u4e4b\u95f4\u901a\u5e38\u4f7f\u7528\u76f4\u8fde\u63a5\u53e3\u7684IP\u5730\u5740\u4f5c\u4e3aBGP\u62a5\u6587\u6e90\u5730\u5740\uff0c\u5982\u82e5\u4f7f\u7528\u73af\u56de\u63a5\u53e3\u5efa\u7acbEBGP\u90bb\u5c45\u5173\u7cfb\uff0c \u8981\u914d\u7f6e**peer ebgp-max-hop**\u547d\u4ee4\uff0c\u5141\u8bb8EBGP\u901a\u8fc7\u975e\u76f4\u8fde\u65b9\u5f0f\u5efa\u7acb\u90bb\u5c45\u5173\u7cfb\u3002 \u540c\u6837\u662f\u4e0a\u9762\u7684\u73af\u5883\uff0c\u6211\u4eec\u7a0d\u4f5c\u53d8\u66f4\uff0c\u5728R1\u53caR3\u4e0a\u521b\u5efaloopback0\uff0c\u5730\u5740\u5206\u522b\u4e3a1.1.1.1/32\u53ca3.3.3.3/32\uff0c\u7136\u540e\u8bbe\u5907\u5404\u81ea\u5c06loopback0\u5ba3\u544a\u8fdbOSPF\uff0c\u4f7f\u5f97\u5f7c\u6b64\u90fd\u80fd\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u5bf9\u65b9\u7684Loopback0\u8def\u7531\u3002 \u6211\u4eec\u4fee\u6539BGP\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97R1-R3\u4e4b\u95f4\u7684IBGP\u90bb\u5c45\u5173\u7cfb\u57fa\u4e8eLoopback0\u6765\u5efa\u7acb\u3002 R1\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u5173\u952e\u6027\u914d\u7f6e\u5982\u4e0b\uff1a \u6ce8\u610f\uff0c\u52a1\u5fc5\u8981\u5c06R1\u53caR3\u7684Loopback0\u63a5\u53e3\u6fc0\u6d3bOSPF\u3002","title":"\u6307\u5b9a\u66f4\u65b0\u6e90IP\u5730\u5740"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_125","text":"\u7ecf\u8fc7\u524d\u9762\u7684\u8bb2\u89e3\uff0c\u6211\u4eec\u7684\u73af\u5883\u73b0\u5728\u662f\u8fd9\u6837\u7684\uff1aR1-R3\u4e4b\u95f4\u5efa\u7acb\u4e86\u57fa\u4e8eLoopback\u63a5\u53e3\u7684IBGP\u90bb\u5c45\u5173\u7cfb\uff1bR3\u5bf9 R1\u914d\u7f6e\u4e86**next-hop-local**\uff1bR3\u4e0eR4\u4e4b\u95f4\u4ecd\u7136\u7ef4\u6301\u57fa\u4e8e\u76f4\u8fde\u63a5\u53e3\u7684EBGP\u90bb\u5c45\u5173\u7cfb\uff1bR4\u5728BGP\u4e2d\u53d1\u5e03\u8def\u7531 4.4.4.0/24\u3002 \u73b0\u5728R1\u662f\u80fd\u591f\u5b66\u4e60\u5230BGP\u8def\u75314.4.4.0/24\u7684\uff0c\u5e76\u4e14\u8be5\u8def\u7531\u4e5f\u662f\u88ab\u4f18\u9009\u7684\uff0c\u6b64\u65f6\u8fd9\u6761\u8def\u7531\u4f1a\u88abR1\u88c5\u8f7d\u8fdb\u5168\u5c40\u8def\u7531\u8868\u4f7f\u7528\uff0c\u4f46\u662f\uff0c\u8fd9\u662f\u4e0d\u662f\u610f\u5473\u7740R1\u5c31\u80fd\u591fping\u901a4.4.4.4\u4e86\u5462\uff1f\u7ecf\u8fc7\u6d4b\u8bd5\u4f60\u53ef\u80fd\u4f1a\u53d1\u73b0\uff1a\u65e0\u6cd5ping\u901a\uff1f \u56e0\u4e3a\u6570\u636e\u5305\u5728R2\u8fd9\u91cc\u5c31\u88ab\u4e22\u5f03\u4e86\uff0cR2\u5e76\u6ca1\u6709\u8fd0\u884cBGP\uff0c\u56e0\u6b64\u5b83\u65e0\u6cd5\u5b66\u4e60\u5230BGP\u8def\u75314.4.4.0/24\u3002 \u600e\u4e48\u624d\u80fd\u8ba9R1 ping\u901a4.4.4.4\u5462\uff1f\u65b9\u6cd5\u4e4b\u4e00\u662f\u5728R3\u4e0a\u5c06BGP\u8def\u7531\u91cd\u53d1\u5e03\u8fdbOSPF\uff0c\u4f7f\u5f97R2\u80fd\u591f\u901a\u8fc7OSPF\u5b66\u4e60\u5230BGP\u8def\u75314.4.4.0/24\uff0c\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u5b58\u5728\u4e00\u5b9a\u7684\u98ce\u9669\uff0c\u56e0\u4e3a\u6211\u4eec\u77e5\u9053BGP\u627f\u8f7d\u7684\u524d\u7f00\u6570\u91cf\u5f80\u5f80\u662f\u975e\u5e38\u5e9e\u5927\u7684\uff1b\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\uff0c\u8ba9R2\u4e5f\u8fd0\u884cBGP\uff0c\u5e76\u4e0eR1\u3001R3\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u8fd9\u6837\u4e00\u6765\u95ee\u9898\u5c31\u89e3\u51b3\u4e86\u3002\u90a3\u4e48 BGP\u90bb\u5c45\u5173\u7cfb\u5c31\u53d8\u6210\u4e86\u5982\u4e0b\u56fe\u6240\u793a\u3002\u5177\u4f53\u914d\u7f6e\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\u3002","title":"\u5b8c\u6210\u8fd9\u4e2a\u5b9e\u9a8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ebgp","text":"\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cEBGP\u90bb\u5c45\u4e4b\u95f4\u5fc5\u987b\u5177\u6709\u76f4\u8fde\u7684\u7269\u7406\u94fe\u8def\uff0cEBGP\u90bb\u5c45\u5173\u7cfb\u4e5f\u5c06\u57fa\u4e8e\u76f4\u8fde\u63a5\u53e3\u6765\u5efa\u7acb\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\u8fd9\u4e00\u8981\u6c42\uff0c\u5219\u5fc5\u987b\u4f7f\u7528**peer ebgp-max-hop**\u547d\u4ee4\u5141\u8bb8\u5b83\u4eec\u4e4b\u95f4\u7ecf\u8fc7\u591a\u8df3\u5efa\u7acbTCP\u8fde\u63a5\u3002 **peer ebgp-max-hop**\u547d\u4ee4\u7528\u6765\u914d\u7f6e\u5141\u8bb8BGP\u540c\u975e\u76f4\u8fde\u7f51\u7edc\u4e0a\u7684\u5bf9\u7b49\u4f53\u5efa\u7acbEBGP\u8fde\u63a5\uff0c\u5e76\u540c\u65f6\u53ef\u4ee5\u6307\u5b9a\u5141\u8bb8\u7684\u6700\u5927\u8df3\u6570\u3002\u547d\u4ee4\u683c\u5f0f\u5982\u4e0b\uff1a [Router-bgp] peer ipv4-address ebgp-max-hop [ hop-count ]\uff0c \u5982\u4e0a\u56fe\u6240\u793a\uff0cR1\u53caR2\u8981\u57fa\u4e8eLoopback\u53e3\u5efa\u7acbEBGP\u90bb\u5c45\u5173\u7cfb\u3002\u8fd9\u79cd\u60c5\u51b5\u4e5f\u5c5e\u4e8eEBGP\u90bb\u5c45\u4e4b\u95f4\u4e0d\u57fa\u4e8e\u76f4\u8fde\u63a5\u53e3\u5efa\u7acb\u90bb\u5c45\u5173\u7cfb\u7684\u573a\u666f\uff0c\u5fc5\u987b\u914d\u7f6e**peer ebgp-max-hop**\u547d\u4ee4\u3002\u56fe\u4e2dR1\u4e0eR2\u4e4b\u95f4\u7684\u4e24\u6761\u7269\u7406\u94fe\u8def\u662f\u4e3a\u4e86\u5197\u4f59\u6027\u8003\u8651\u3002 R1\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a","title":"EBGP\u591a\u8df3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_126","text":"","title":"\u5b66\u4f1a\u770b\u4e09\u5f20\u8868"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp_6","text":"","title":"BGP\u90bb\u5c45\u8868"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp_7","text":"\u67e5\u770bBGP\u6761\u76ee\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a","title":"BGP\u8868"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#display-ip-routing-table","text":"BGP \u8def\u5f84\u5c5e\u6027 BGP\u62e5\u6709\u4e30\u5bcc\u7684\u8def\u5f84\u5c5e\u6027\u3002BGP\u7684\u8fd9\u4e9b\u8def\u5f84\u5c5e\u6027\uff0c\u5c06\u5f71\u54cdBGP\u8def\u7531\u7684\u4f18\u9009\uff0c\u540c\u65f6\u4e5f\u4f7f\u5f97BGP\u7684\u8def\u7531\u7b56\u7565\u80fd\u529b\u5f02\u5e38\u5f3a\u5927\u3002 \u8def\u5f84\u5c5e\u6027\u7684\u5206\u7c7b\uff1a \u516c\u8ba4\u5c5e\u6027 \uff08Well-known\uff09 \u516c\u8ba4\u5fc5\u9075 \uff08Well-known mandatory\uff09 \u6240\u6709BGP\u8def\u7531\u5668\u5fc5\u987b\u90fd\u80fd\u8bc6\u522b\uff0c\u4e14\u5fc5\u987b\u5b58 \u5728\u4e8eUpdate\u62a5\u6587\u4e2d\u3002 \u5982\u679c\u7f3a\u5c11\u8fd9\u79cd\u5c5e\u6027\uff0c\u8def\u7531\u4fe1\u606f\u5c31\u4f1a\u51fa\u9519 Origin AS-Path Next hop \u516c\u8ba4\u81ea\u51b3 \uff08Well-known discretionary\uff09 \u6240\u6709BGP\u8def\u7531\u5668\u5fc5\u987b\u90fd\u80fd\u8bc6\u522b\uff0cUpdate \u62a5\u6587\u4e2d\u53ef\u5305\u542b\uff0c\u4e5f\u53ef\u4e0d\u5305\u542b Local-Preference ATOMIC_Aggregate \u53ef\u9009\u5c5e\u6027 \uff08Optional\uff09 \u53ef\u9009\u4f20\u9012 \uff08Optional transitive\uff09 \u53ef\u4ee5\u4e0d\u652f\u6301\u8be5\u5c5e\u6027\uff0c\u4f46\u5373\u4f7f\u4e0d\u652f\u6301\uff0c\u4e5f\u5e94\u5f53\u63a5\u53d7\u5305\u542b\u8be5\u5c5e\u6027\u7684\u8def\u7531\u5e76\u4f20\u9012\u7ed9\u5176\u4ed6\u90bb\u5c45 Community Aggregator \u53ef\u9009\u975e\u4f20\u9012 \uff08Optional non-transitive\uff09 \u53ef\u4ee5\u4e0d\u652f\u6301\u8be5\u5c5e\u6027\uff0c\u4e0d\u8bc6\u522b\u7684BGP\u8fdb\u7a0b\u5ffd \u7565\u5305\u542b\u8fd9\u4e2a\u5c5e\u6027\u7684\u66f4\u65b0\u62a5\u6587\uff0c\u5e76\u4e14\u4e0d\u4f20\u9012\u7ed9\u5176\u4ed6BGP\u90bb\u5c45 MED Originator_ID Cluster_list Weight","title":"\u8def\u7531\u8868\uff0cdisplay ip routing-table"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#preferred-value","text":"\u9996\u9009\u503c\uff08Preferred-Value\uff09\u662f\u534e\u4e3a\u8bbe\u5907\u7684\u7279\u6709\u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u4ec5\u5728\u672c\u5730\u6709\u6548\u3002\u5f53BGP\u8def\u7531\u8868\u4e2d\u5b58\u5728\u5230\u76f8\u540c\u76ee\u7684\u7f51\u7edc\u7684\u8def\u7531\u65f6\uff0c\u5c06\u4f18\u5148\u9009\u62e9\u534f\u8bae\u9996\u9009\u503c\u6700\u5927\u7684\u8def\u7531\u3002 Preferred-Value\u7684\u53d6\u503c\u8303\u56f4\uff1a0~65535\u3002\u8def\u7531\u5668\u672c\u5730\u59cb\u53d1\u7684BGP\u8def\u7531\u9ed8\u8ba4Preferred-Value\u4e3a0\uff0c\u4ece\u5176\u4ed6BGP \u90bb\u5c45\u5b66\u4e60\u5230\u7684\u8def\u7531\uff08\u8be5\u8def\u7531\u662f\u4e0d\u4f1a\u643a\u5e26Preferred-Value\u7684\uff0cPreferred-Value\u53ea\u5728\u672c\u5730\u6709\u6548\uff0c\u4e0d\u4f1a\u88ab\u901a\u544a\u7ed9\u4efb\u4f55\u90bb\u5c45\uff09\uff0c\u52a0\u8f7d\u5230\u672c\u5730\u540e\u9ed8\u8ba4Preferred-Value\u4e5f\u4e3a0\u3002 Preferred-Value\u662f\u4e00\u4e2a\u672c\u5730\u6709\u6548\u7684\u534e\u4e3a\u79c1\u6709\u5c5e\u6027\u3002\u8fd9\u4e2a\u5c5e\u6027\u7684\u542b\u4e49\u6709\u70b9\u50cf\uff1a\u201c\u4e00\u6761\u8def\u7531\u5728\u6211\u5fc3\u76ee\u4e2d\u7684\u6743\u91cd\u201d\u3002\u65e2\u7136\u662f\u5728\u201c\u6211\u5fc3\u76ee\u4e2d\u201d\u7684\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5c5e\u6027\u503c\u81ea\u7136\u662f\u4e0d\u80fd\u4f20\u9012\u7ed9\u522b\u4eba\u7684\uff0c\u53ea\u6709\u81ea\u5df1\u77e5\u9053\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cB\u8def\u7531\u5668\u5c06\u4f1a\u540c\u65f6\u4eceA\u548cC\u5b66\u4e60\u5230\u4e24\u6761BGP\u8def\u7531\uff1a10.0.1.0/24\u53ca10.0.2.0/24\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4eceA\u53ca C\u5b66\u4e60\u5230\u7684\u8fd9\u4e24\u6761\u8def\u7531Preferred-Value\u90fd\u662f0\u3002\u6211\u4eec\u53ef\u4ee5\u5728B\u4e0a\u90e8\u7f72\u7b56\u7565\uff0c\u5c06A\u53d1\u6765\u768410.0.1.0/24\u8def\u7531\u7684 Preferred-Value\u8c03\u8282\u4e3a100\uff0c\u5c06C\u53d1\u6765\u768410.0.2.0/24\u8def\u7531\u7684Preferred-Value\u8c03\u8282\u4e3a100\uff0c\u8fd9\u6837\u4e00\u6765\u5c31\u80fd\u591f\u5b9e\u73b0B\u4e0a\u53bb\u5f8010.0.1.0/24\u7684\u6d41\u91cf\u8d70A\uff0c\u53bb\u5f8010.0.2.0/24\u7684\u6d41\u91cf\u8d70C\u7684\u6548\u679c\u3002\u6ce8\u610f\uff0c\u5728B\u4e0a\u90e8\u7f72\u7684\u8fd9\u4e2a\u7b56\u7565\u53ea\u4f1a\u5f71\u54cdB\u81ea\u8eab\u3002 [B-bgp] display bgp routing-table","title":"Preferred-Value"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#local-preference","text":"LP\uff08Local-Preference\uff09\u5c5e\u6027\u662f\u4e00\u4e2a\u516c\u8ba4\u81ea\u51b3\u5c5e\u6027\uff0c\u5c5e\u6027\u503c\u8d8a\u5927\uff0c\u5219\u8def\u7531\u8d8a\u4f18\u3002Local-Preference\u5c31\u662f\u672c\u5730\u4f18\u5148\u7ea7\uff0c\u672c\u5730\u7684\u610f\u601d\u5c31\u662fAS\u5185\u90e8\uff0cLP\u53ea\u80fd\u5728AS\u5185\u90e8\u3001\u5728IBGP\u90bb\u5c45\u4e4b\u95f4\u4f20\u9012\uff0c\u800c\u4e0d\u4f1a\u4f20\u9012\u7ed9EBGP\u90bb\u5c45\u3002 \u4e0a\u56fe\u4e2d\uff0cABC\u540c\u5c5e\u4e00\u4e2aAS\uff0c\u5047\u8bbeA\u53caC\u90fd\u6709\u5230\u8fbe10.0.1.0/24\u7684\u8def\u7531\uff0c\u5e76\u4e14\u90fd\u5c06\u8def\u7531\u66f4\u65b0\u7ed9\u4e86B\uff0c\u90a3\u4e48\u5982\u679c\u6211\u4eec\u5e0c\u671bB\u53bb\u5f8010.0.1.0/24\u7f51\u7edc\u8d70A\uff0c\u5f53A\u6302\u6389\u7684\u65f6\u5019\u81ea\u52a8\u5207\u6362\u5230C\uff0c\u8fd9\u5c31\u53ef\u4ee5\u5728A\u4e0a\u90e8\u7f72\u7b56\u7565\uff0c\u5c06\u4f20\u9012\u7ed9B\u7684 BGP\u8def\u753110.0.1.0/24\u7684LP\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a200\uff0c\u800cC\u4f20\u9012\u7ed9B\u7684\u8def\u7531\u7684LP\u5c5e\u6027\u503c\u4fdd\u6301\u9ed8\u8ba4100\u5373\u53ef\u3002\u8fd9\u6837\u4e00\u6765 B\u5728\u505a\u8def\u7531\u4f18\u9009\u65f6\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u5c31\u4f1a\u4f18\u9009A\u4f20\u9012\u8fc7\u6765\u7684\u8fd9\u676110.0.1.0/24\u8def\u7531\u3002[B-bgp] display bgp routing-table LP\u5c5e\u6027\u53ea\u80fd\u5728IBGP\u90bb\u5c45\u4e4b\u95f4\u4f20\u9012\uff08\u9664\u975e\u505a\u4e86\u7b56\u7565\uff0c\u5426\u5219LP\u503c\u5728AS\u5185\u7684IBGP\u90bb\u5c45\u95f4\u4f20\u9012\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u4e22\u5931\uff09\uff0c\u800c\u4e0d\u80fd\u5728EBGP\u90bb\u5c45\u4e4b\u95f4\u4f20\u9012\u3002\u4f46\u662f\u53ef\u4ee5\u5728AS\u8fb9\u754c\u8def\u7531\u5668\u4e0a\u4f7f\u7528In\u65b9\u5411\u7684\u7b56\u7565\u6765\u4fee\u6539LP\u5c5e\u6027\u503c\u3002 BGP\u8def\u7531\u5668\u5728\u5411\u5176EBGP\u90bb\u5c45\u53d1\u9001\u8def\u7531\u66f4\u65b0\u65f6\uff0c\u6b64\u65f6\u8be5EBGP\u8def\u7531\u4e0d\u80fd\u643a\u5e26LP\u5c5e\u6027\uff0c\u4f46\u662f\u5bf9\u65b9\u6536\u5230\u8be5\u8def\u7531\u540e\uff0c\u4f1a\u5728\u672c\u5730\u4e3a\u8fd9\u6761\u8def\u7531\u8d4b\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff0c\u4e5f\u5c31\u662f100\uff08\u53ef\u901a\u8fc7\u547d\u4ee4\u4fee\u6539\uff09\uff0c\u7136\u540e\u518d\u5c06\u8def\u7531\u4f20\u9012\u7ed9\u81ea\u5df1\u7684IBGP\u90bb\u5c45\u3002","title":"Local-Preference"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#as_path","text":"","title":"AS_PATH"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#as_path_1","text":"AS_PATH\u662f\u516c\u8ba4\u5fc5\u9075\u5c5e\u6027\uff0c\u7528\u4e8e\u63cf\u8ff0\u5230\u8fbe\u76ee\u6807\u7f51\u7edc\u6240\u8981\u7ecf\u8fc7\u7684AS\u53f7\u7684\u5e8f\u5217\u3002\u6709\u4e24\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u4f5c\u7528\uff1a \u4e00\u662f\u7528\u4e8e\u5728AS\u4e4b\u95f4\u7684\u8def\u7531\u9632\u73af\uff0c\u5982\u679c\u4e00\u53f0\u8def\u7531\u5668\u6536\u5230\u4e00\u6761BGP\u8def\u7531\uff0c\u8be5\u8def\u7531\u643a\u5e26\u7684AS_PATH\u4e2d\u51fa\u73b0\u4e86\u81ea\u5df1\u6240\u5728AS\u7684AS\u53f7\uff0c\u90a3\u4e48\u5b83\u77e5\u9053\u51fa\u73b0\u4e86\u73af\u8def\uff0c\u56e0\u6b64\u5ffd\u7565\u8be5\u6761\u8def\u7531\u66f4\u65b0\u3002AS_PATH\u7684\u53e6\u4e00\u4e2a\u4f5c\u7528\u662f\u7528\u4e8e\u8def\u7531\u4f18\u9009\uff0c\u6211\u4eec\u77e5\u9053AS_PATH\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5217\u8868\uff0c\u5448\u73b0\u51fa\u6765\u5c31\u662f\u4e00\u4e32AS\u53f7\uff0c\u90a3\u4e48\u65e2\u7136\u662f\u5217\u8868\u5b83\u5c31\u6709\u957f\u5ea6\uff0cAS_PATH\u8d8a\u77ed\u5219\u8be5\u8def\u7531\u88ab\u89c6\u4e3a\u8d8a\u4f18\uff0c\u56e0\u4e3a\u8fd9\u6761\u8def\u5f84\u8ddd\u79bb\u76ee\u7684\u5730\u6240\u8981\u7ecf\u8fc7\u7684AS\u8df3\u6570\u66f4\u5c11\u3002","title":"AS_PATH\u5c5e\u6027\u4ecb\u7ecd"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#as_path_2","text":"AS_SET\uff1a\u4e00\u4e2a\u53bb\u5f80\u7279\u5b9a\u76ee\u7684\u5730\u6240\u7ecf\u8def\u5f84\u4e0a\u7684\u65e0\u5e8fAS\u53f7\u5217\u8868\u3002 AS_SEQENCE\uff1a\u4e00\u4e2a\u6709\u5e8f\u7684AS\u53f7\u5217\u8868\u3002 AS_CONFED_SEQUENCE\uff1a\u8054\u90a6\u5185\u7279\u6709\u7684AS_PATH\u7c7b\u578b\uff0c\u4e00\u4e2a\u53bb\u5f80\u7279\u5b9a\u76ee\u7684\u5730\u6240\u7ecf\u8def\u5f84\u4e0a\u7684\u6709 \u5e8fAS\u53f7\u5217\u8868\uff0c\u5176\u7528\u6cd5\u4e0eAS_SEQUENCE\u4e00\u6837\uff0c\u533a\u522b\u5728\u4e8e\u8be5\u5217\u8868\u4e2d\u7684AS\u53f7\u5c5e\u4e8e\u672c\u5730\u8054\u90a6\u4e2d\u7684AS\u53f7\u3002 AS_CONFED_SET\uff1a\u8054\u90a6\u5185\u7279\u6709\u7684AS_PATH\u7c7b\u578b\uff0c\u4e00\u4e2a\u53bb\u5f80\u7279\u5b9a\u76ee\u7684\u5730\u6240\u7ecf\u8def\u5f84\u4e0a\u7684\u65e0\u5e8fAS\u53f7\u5217\u8868\uff0c\u7528\u65b9\u6cd5\u4e0eAS_SET\u4e00\u6837\uff0c\u533a\u522b\u5728\u4e8e\u5217\u8868\u4e2d\u7684AS\u53f7\u5c5e\u4e8e\u672c\u5730\u8054\u90a6\u4e2d\u7684AS\u53f7\u3002 \u4ee5\u4e0a\u56db\u79cd\u7c7b\u578b\u662f\u901a\u8fc7AS_PATH\u5c5e\u6027\u4e2d\u7684\u7c7b\u578b\u4ee3\u7801\u8fdb\u884c\u533a\u5206\u3002\u5173\u4e8e\u8fd9\u4e24\u4e2a\u8054\u90a6\u7279\u6709\u7684AS_PATH\u7c7b\u578b\uff0c \u8be6\u7ec6\u5185\u5bb9\u8bf7\u89c1\u672c\u6587\u6863\u201c\u8054\u90a6\u201d\u4e00\u5c0f\u8282\u3002 AS_Sequence\u5f88\u597d\u7406\u89e3\uff0c\u4e0a\u56fe\u5728\u4e0d\u505a\u4efb\u4f55\u7b56\u7565\u7684\u60c5\u51b5\u4e0b\uff0c\u4f20\u9012\u5230R4\u7684BGP\u8def\u7531\u643a\u5e26\u7684AS_PATH\u7684\u7c7b\u578b\u5373\u4e3aAS_Sequence\uff0c\u8fd9\u662f\u4e2a\u6709\u5e8f\u7684AS\u53f7\u5217\u8868\uff0c\u5f53R4\u6536\u5230\u8def\u7531\u66f4\u65b0\u7684\u65f6\u5019\uff0cAS_PATH\u4e3a300,100\uff0c R4\u5c31\u77e5\u9053\u8981\u53bb\u76ee\u7684\u5730\uff0c\u9700\u7ecfAS300\u518d\u5230AS100\uff0c\u624d\u53ef\u8fbe\u76ee\u7684\u3002 \u518d\u770b\u4e0a\u9762\u8fd9\u5f20\u56fe\uff0cR1\u901a\u544a\u660e\u7ec6\u8def\u7531\uff1a172.16.1.0/24\u53ca172.16.2.0/24\uff1bR2\u901a\u544a\u660e\u7ec6\u8def\u7531172.16.10.0/24 \u53ca172.16.11.0/24\u3002\u8fd9\u4e9b\u660e\u7ec6\u8def\u7531\u88ab\u901a\u544a\u7ed9\u4e86R3\u3002\u73b0\u5728\u5728R3\u4e0a\u505a\u8def\u7531\u6c47\u603b\uff0c\u8fd9\u6761\u6c47\u603b\u8def\u7531\u7531R3\u4ea7\u751f\u5e76\u4e14\u4f20\u9012\u7ed9\u4e86R4\uff0c\u8fd9\u6761\u6c47\u603b\u8def\u7531\u7684AS_PATH\u4e3a300\uff0c\u4e22\u5931\u4e86\u5176\u4e0b\u7684\u660e\u7ec6\u8def\u7531\u7684AS_PATH\u5c5e\u6027\uff0c\u90a3\u4e48\u5982\u679c R4\u4e0eR1\u6216R2\u4e4b\u95f4\u5982\u679c\u6709EBGP\u7684\u8fde\u63a5\uff0c\u5c31\u6709\u53ef\u80fd\u4ea7\u751f\u8def\u7531\u73af\u8def\uff0cR1\u3001R2\u90fd\u4f1a\u6536\u5230\u8fd9\u6761\u6c47\u603b\u8def\u7531\u5e76\u4e14\u63a5\u53d7\u8def\u7531\u66f4\u65b0\u3002\u8fd9\u662f\u56e0\u4e3a\u8fd9\u6761\u6c47\u603b\u8def\u7531\u5e76\u672a\u643a\u5e26\u4efb\u4f55\u5173\u4e8eAS100\u53caAS200\u7684\u4fe1\u606f\u3002 \u6240\u4ee5\u5176\u5b9e\u8fd8\u662f\u9700\u8981\u5728\u6c47\u603b\u8def\u7531\u4e0a\u4fdd\u7559\u5176\u660e\u7ec6\u8def\u7531\u7684AS_PATH \uff0c \u800c\u81f3\u4e8e\u4fdd\u7559\u4e0b\u6765\u7684\u660e\u7ec6\u8def\u7531\u7684 AS_PATH\u4e2d\u7684AS\u53f7\u662f\u4ec0\u4e48\u987a\u5e8f\u5df2\u7ecf\u4e0d\u91cd\u8981\u4e86\uff0c\u56e0\u4e3a\u51fa\u4e8e\u9632\u73af\u7684\u76ee\u7684\u53ea\u8981AS\u53f7\u5c31\u591f\u4e86\u3002\u4f7f\u7528**aggregate** \u547d\u4ee4\u52a0\u4e0a**as-set**\u5173\u952e\u5b57\uff0c\u53ef\u4ee5\u4f7f\u4ea7\u751f\u7684\u6c47\u603b\u8def\u7531\u7ee7\u627f\u660e\u7ec6\u8def\u7531\u7684\u90e8\u5206\u8def\u5f84\u5c5e\u6027\uff0c\u5176\u4e2d\u5305\u62ecAS_PATH\u5c5e \u6027\u503c\u3002\u6b64\u65f6R3\u4ea7\u751f\u7684\u8fd9\u6761\u6c47\u603b\u8def\u7531\u7684AS_PATH \u5c06\u643a\u5e26\u4e24\u4e2aAS_PATH \u7c7b\u578b\uff08 \u4e24\u6bb5\u4fe1\u606f\uff09 \uff0c\u4e00\u662f AS_Sequence\uff0c\u503c\u4e3a300\uff0c\u53e6\u4e00\u4e2a\u7c7b\u578b\u4e3aAS_Set\uff0c\u5305\u542b{100,200}\u4e24\u4e2aAS\u53f7\uff0c\u5e76\u4e14\u662f\u65e0\u5e8f\u7684\u3002\u4e8e\u662f\u4e4eR4 \u4e0a\u6536\u5230\u7684\u8def\u7531\u6240\u643a\u5e26\u7684AS_PATH\u7efc\u5408\u8d77\u6765\u5c31\u662f300 {100,200}\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e2a\u62ec\u53f7\u91cc\u7684AS\u53f7\uff0c \u5728\u8fdb\u884cAS_PATH\u957f\u5ea6\u8ba1\u7b97\u7684\u65f6\u5019\uff0c\u53ea\u5f53\u4e00\u8df3\u6765\u7b97\uff0c\u5173\u4e8e\u8fd9\u70b9\u7684\u9a8c\u8bc1\uff0c\u8bf7\u770b\u9009\u8def\u89c4\u5219\u7ae0\u8282\u3002","title":"AS_PATH\u7684\u56db\u79cd\u7c7b\u578b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#route-policyas_path","text":"","title":"\u4f7f\u7528route-policy\u4fee\u6539AS_PATH"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#1_2","text":"\u4e0a\u56fe\u4e2d\uff0cR1\u5c06BGP\u8def\u753110.0.1.0/24\u66f4\u65b0\u7ed9R2\uff0c\u5728\u6ca1\u6709\u90e8\u7f72\u7b56\u7565\u7684\u60c5\u51b5\u4e0b\uff0cR2\u6536\u523010.0.1.0/24\u8def\u7531\u7684AS_PATH\u4e3a\uff1a100\u3002\u6211\u4eec\u53ef\u80fd\u57fa\u4e8e\u67d0\u79cd\u9700\u6c42\uff0c\u5e0c\u671b\u4fee\u6539\u8def\u7531\u7684AS_PATH\uff0c\u4f8b\u5982\u6211\u4eec\u60f3\u63d2\u5165\u4e00\u4e2a AS\u53f7999\uff0c\u5c31\u53ef\u4ee5\u5728route-policy\u4e2d\u4f7f\u7528**apply as-path 999 additive**\u547d\u4ee4\u6765\u5b9e\u73b0\u3002\u6ce8\u610f\u6211\u4eec\u662f\u5728R1 \u4e0a\u5bf9R2\u505aexport\u65b9\u5411\u7684route-policy\uff0c10.0.1.0/24\u8def\u7531\u5728\u6ca1\u6709\u88abR1\u66f4\u65b0\u51fa\u53bb\u4e4b\u524dAS_Path\u662f\u7a7a\u7684\uff0c \u7136\u540e\u88ab\u63d2\u5165\u4e86\u4e0a\u9762\u6240\u8bf4\u7684AS\u53f7999\uff0c\u7d27\u63a5\u7740\u8def\u7531\u88ab\u9001\u7ed9EBGP\u90bb\u5c45R2\uff0c\u90a3\u4e48R1\u6240\u5728\u7684AS\u53f7\u7801100 \u53c8\u88ab\u8ffd\u52a0\u5230\u4e86\u8def\u7531\u7684AS_PATH\u524d\uff0c\u6240\u4ee5\u6700\u7ec8\u8def\u7531\u7684AS_PATH\u5c31\u662f100 999\u3002 \u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u5bf9\u4e8eBGP\u800c\u8a00AS_PATH\u5c5e\u6027\u662f\u4e00\u4e2a\u76f8\u5f53\u91cd\u8981\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u4f7f\u7528route-policy\u56fa\u7136\u80fd\u591f\u6839\u636e\u9700\u6c42\u7075\u6d3b\u7684\u4fee\u6539AS_PATH\uff0c\u4f46\u662f\u4efb\u4f55\u9488\u5bf9AS-PATH\u7684\u7b56\u7565\u90fd\u5fc5\u987b\u8c28\u614e\u6267\u884c\uff0c\u56e0\u4e3aBGP\u7684\u5de5\u4f5c\u2014\u2014\u4f8b\u5982\u9632\u6b62\u8def\u7531\u73af\u8def\u7b49\u5bf9AS_PATH\u7684\u4f9d\u8d56\u5f88\u9ad8\u3002\u5c31\u62ff\u4e0a\u9762\u7684\u4f8b\u5b50\u6765\u8bf4\uff0c\u5b9e\u9645\u4e0a\u6dfb\u52a0999\u7684AS \u53f7\u7801\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u56e0\u4e3a999\u7684AS\u5728\u8fd9\u91cc\u5e76\u4e0d\u5b58\u5728\uff0c\u5982\u679c\u53ea\u662f\u4e3a\u4e86\u52a0\u957fAS_PATH\uff0c\u53ef\u4ee5\u8003\u8651\u6dfb\u52a0\u4e00\u4e2a\u503c\u4e3a100\u7684AS\u53f7\uff0c\u800c\u4e0d\u662f999\u3002","title":"\u793a\u4f8b1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#2_1","text":"\u4e0a\u56fe\u7684\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u662f\u5728R2\u505aimport\u65b9\u5411\u7684route-policy\uff0c\u540c\u6837\u662f\u4f7f\u7528\u547d\u4ee4**apply as-path 999** additive \uff0c\u7ed3\u679c\u4e0e\u793a\u4f8b1\u662f\u4e0d\u4e00\u6837\u7684\u3002\u7531\u4e8e\u7b56\u7565\u662f\u90e8\u7f72\u5728R2\u4e0a\u7684\uff0c\u56e0\u6b64R1\u5c06\u8def\u7531\u66f4\u65b0\u7ed9R2\u7684\u65f6\u5019\u8def\u7531\u7684AS_PATH\u662f100\uff0cR2\u6536\u5230\u8be5\u8def\u7531\u540e\uff0c\u7531\u4e8e\u914d\u7f6e\u4e86import\u65b9\u5411\u7684route-policy\uff0c\u56e0\u6b64\u5728\u8be5\u8def\u7531\u7684AS_PATH\u524d\u8ffd\u52a0AS\u53f7999\uff0c\u4e8e\u662f\u6700\u7ec8\u5728R2\u7684BGP\u8868\u91cc10.0.1.0/24\u7684\u8def\u7531AS_PATH\u662f999 100\u3002","title":"\u793a\u4f8b2"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#3","text":"\u5982\u679c\u4e0d\u662f\u60f3\u5728AS_PATH\u4e2d\u63d2\u5165AS\u53f7\uff0c\u800c\u662f\u60f3\u8986\u76d6AS_PATH\u5462\uff1f\u53ef\u4ee5\u5728route-policy\u4e2d\u4f7f\u7528**apply as-path overwrite**\u547d\u4ee4\u3002\u5728\u4e0a\u56fe\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5728R2\u4e0a\u5bf9R1\u505aimport\u65b9\u5411\u7684route-policy\uff0c\u90a3\u4e48\u5f53 R1\u5c06\u8def\u753110.0.1.0/24\u66f4\u65b0\u7ed9R2\u7684\u65f6\u5019\uff0c\u8def\u7531\u7684AS_PATH\u5c5e\u6027\u503c\u4e3a100\uff0c\u968f\u540e\u7531\u4e8eR2\u90e8\u7f72\u4e86\u7b56\u7565\uff0c \u56e0\u6b64\u8be5\u8def\u7531\u7684AS_PATH\u88ab\u8986\u76d6\u4e3a999\uff0c\u6240\u4ee5\u6700\u7ec8\u5728R2\u7684BGP\u8868\u4e2d\uff0c10.0.1.0/24\u7684\u8def\u7531AS_PATH \u5c5e\u6027\u503c\u4e3a999\u3002","title":"\u793a\u4f8b3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#origin","text":"\u516c\u8ba4\u5fc5\u9075\u5c5e\u6027\uff0c\u660e\u786e\u4e86\u8def\u7531\u7684\u6765\u6e90\uff0cBGP\u8def\u7531\u6765\u6e90\u6709\u4e09\u79cd\u9014\u5f84\uff1a \u540d\u79f0 \u6807\u8bb0 \u8bf4\u660e IGP i \u901a\u8fc7BGP network\u7684\u8def\u7531\uff0c\u4e5f\u5c31\u662f\u8d77\u6e90\u4e8eIGP\u7684\u8def\u7531\uff0c\u56e0\u4e3aBGP network\u5fc5\u987b\u4fdd\u8bc1\u8be5\u7f51 \u7edc\u7684\u8def\u7531\u5728\u8def\u7531\u8868\u4e2d EGP e \u662f\u7531EGP\u8fd9\u79cd\u65e9\u671f\u7684\u534f\u8bae\u91cd\u53d1\u5e03\u800c\u6765\u7684\u8def\u7531 Incomplete ? \u4ece\u5176\u4ed6\u6e20\u9053\u5b66\u4e60\u5230\u7684\uff08\u786e\u8ba4\u8be5\u8def\u7531\u6765\u6e90\u7684\u4fe1\u606f\u4e0d\u5b8c\u5168\uff09\uff0c\u91cd\u53d1\u5e03\u8fdbBGP\u7684\u8def\u7531origin\u90fd \u662f\u8fd9\u4e2a\u6807\u8bb0 \u4e0a\u56fe\u4e2d\uff0cR1\u91c7\u7528network\u7684\u65b9\u5f0f\uff0c\u5c06\u76f4\u8fde\u8def\u753110.0.1.0/24\u5f15\u5165\u4e86BGP\uff0c\u90a3\u4e48\u8be5\u6761\u8def\u7531\u7684Origin\u5c5e\u6027\u503c\u5c31\u4e3aIGP\uff0c\u5728BGP\u8868\u4e2d\uff0c\u6807\u8bb0\u4e3ai\uff1a [R2] display bgp routing-table \u5f53\u7136\uff0c\u5982\u679cR1\u6539\u7528\u91cd\u53d1\u5e03\uff08import-route\uff09\u7684\u65b9\u5f0f\u5f15\u5165\u8fd9\u6761\u76f4\u8fde\u8def\u7531\uff0c\u90a3\u4e48\u8be5\u6761\u8def\u7531\u7684origin\u5c5e\u6027\u503c\u5c31\u662f incomplete\uff0c\u5728BGP\u8868\u4e2d\u7684\u6807\u8bb0\u5c31\u662f?\u3002","title":"Origin"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#med","text":"","title":"MED"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#med_1","text":"MED\uff08MULTI_EXIT_DISC\uff09\u662f\u53ef\u9009\u975e\u4f20\u9012\u5c5e\u6027\uff0c\u662f\u4e00\u79cd\u5ea6\u91cf\u503c\uff0c\u7528\u4e8e\u5411\u5916\u90e8\u90bb\u5c45\u6307\u51fa\u8fdb\u5165AS\u7684\u9996\u9009\u8def\u5f84\uff0c\u5373\u5f53\u5165\u53e3\u6709\u591a\u4e2a\u65f6\uff0cAS\u53ef\u4ee5\u4f7f\u7528MED\u52a8\u6001\u5730\u5f71\u54cd\u5176\u4ed6AS\u5982\u4f55\u9009\u62e9\u8fdb\u5165\u8def\u5f84\u3002MED\u5c5e\u6027\u503c\u8d8a\u5c0f\uff0c \u5219\u8def\u7531\u8d8a\u4f18\u3002MED\u4e3b\u8981\u7528\u4e8e\u5728AS\u4e4b\u95f4\u4ea4\u4e92\uff0cMED\u5c5e\u6027\u503c\u968f\u8def\u7531\u901a\u544a\u7ed9EBGP\u5bf9\u7b49\u4f53\u540e\uff0c\u5bf9\u65b9\u5728AS\u5185\u4f20\u64ad\u8be5\u8def\u7531\u65f6\uff0c\u4f1a\u643a\u5e26\u8be5MED\u5c5e\u6027\u503c\uff0c\u4f46\u662f\uff0c\u8fd9\u4e2aMED\u5c5e\u6027\u503c\u4e0d\u4f1a\u88ab\u901a\u544a\u7ed9\u4e0b\u4e00\u4e2aAS\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cC\u8def\u7531\u5668\u6240\u5728\u7684AS200\u53cc\u5f52\u5c5e\u5230AS100\uff08\u6709\u4e24\u6761\u51fa\u53e3\u8def\u5f84\u5230AS100\uff09\uff0c\u53ef\u4ee5\u5229\u7528MED\u5c5e\u6027\u6765\u63a7\u5236C\u8fdb\u5165AS100\u9009\u62e9\u7684\u8def\u5f84\u3002AS100\u4e2d\u6709\u8def\u75311.1.1.0/24\u88abA\u53caB\u901a\u544a\u7ed9\u4e86C\u3002\u90a3\u4e48\u6211\u4eec\u5728A\u4e0a\u90e8\u7f72\u7b56\u7565\uff0c \u5c06\u8be5\u8def\u7531\u7684MED\u8bbe\u7f6e\u4e3a10\uff1b\u5728B\u4e0a\u90e8\u7f72\u7b56\u7565\uff0c\u5c06MED\u8bbe\u7f6e\u4e3a20\u3002\u8fd9\u6837\u4e00\u6765\u5728C\u4e0a\u5173\u4e8e1.1.1.0/24\u8def\u7531\u5c31\u5206\u522b\u4eceA\u548cB\u5404\u5b66\u4e60\u5230\u4e00\u6761BGP\u8def\u5f84\uff0cC\u4f1a\u6bd4\u8f83\u8fd9\u4e24\u6761\u8def\u5f84\u7684MED\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u4f18\u9009MED\u5c0f\u7684\u8def\u5f84\uff0c\u56e0\u6b64\u6700\u7ec8\u4f18\u9009\u4eceA\u901a\u544a\u8fc7\u6765\u7684\u8def\u7531\u3002","title":"\u5173\u4e8eMED\u5c5e\u6027"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#med_2","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53ea\u6bd4\u8f83\u6765\u81ea\u540c\u4e00\u76f8\u90bbAS\u7684BGP\u8def\u7531\u7684MED\u5c5e\u6027\uff0c\u5c31\u662f\u8bf4\u5982\u679c\u540c\u4e00\u4e2a\u76ee\u7684\u5730\u7684\u4e24\u6761\u8def\u7531\u901a\u544a\u81ea\u4e0d\u540c\u7684AS\uff0c\u5219\u4e0d\u8fdb\u884cMED\u7684\u6bd4\u8f83\u3002 MED\u53ea\u5728\u76f4\u63a5\u76f8\u8fde\u7684AS\u95f4\u5f71\u54cd\u4e1a\u52a1\u91cf\uff0c\u800c\u4e0d\u4f1a\u8de8AS\u4f20\u9012\u3002 \u4e00\u53f0BGP\u8def\u7531\u5668\u5c06\u8def\u7531\u901a\u544a\u7ed9EBGP\u90bb\u5c45\u65f6\u662f\u5426\u643a\u5e26MED\u503c\uff0c\u9700\u8981\u6839\u636e\u4ee5\u4e0b\u6761\u4ef6\u8fdb\u884c\u5224\u65ad(\u5728\u4e0d\u5bf9 EBGP\u90bb\u5c45\u4f7f\u7528\u8def\u7531\u7b56\u7565\u7684\u60c5\u51b5\u4e0b)\uff1a \u5982\u679c\u8be5BGP\u8def\u7531\u662f\u672c\u5730\u59cb\u53d1\uff08network\u6216import-route\uff09\u7684\uff0c\u5219\u643a\u5e26MED\u503c\u53d1\u9001\u7ed9EBGP\u90bb\u5c45\u3002 \u5982\u679c\u8be5BGP\u8def\u7531\u662f\u4ece\u5176\u4ed6BGP\u90bb\u5c45\u5b66\u4e60\u8fc7\u6765\u7684\uff0c\u90a3\u4e48\u5c06\u8be5\u8def\u7531\u901a\u544a\u7ed9EBGP\u90bb\u5c45\u65f6\u4e0d\u643a\u5e26 MED\u3002 \u5728IBGP\u90bb\u5c45\u4e4b\u95f4\u4f20\u9012\u8def\u7531\u65f6\uff0cMED\u503c\u4f1a\u88ab\u4fdd\u7559\u5e76\u4f20\u9012\uff0c\u9664\u975e\u90e8\u7f72\u4e86\u7b56\u7565\uff0c\u5426\u5219MED\u503c\u5728\u4f20\u9012\u8fc7\u7a0b\u4e2d\u4e0d\u53d1\u751f\u6539\u53d8\u4e5f\u4e0d\u4f1a\u4e22\u5931\u3002","title":"MED\u7684\u6bd4\u8f83\u539f\u5219\u53ca\u914d\u7f6e\u6ce8\u610f\u4e8b\u9879"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#med_3","text":"\u5982\u679cBGP\u8def\u7531\u5668\u901a\u8fc7**IGP\u5b66\u4e60\u5230\u4e00\u6761\u8def\u7531**\uff0c\u5e76\u4e14\u901a\u8fc7network\u6216import-route\u7684\u65b9\u5f0f\u5c06\u8def\u7531\u5f15\u5165BGP\uff0c \u4ea7\u751f\u7684BGP\u8def\u7531\u7684MED\u503c\u7ee7\u627f\u8def\u7531\u5728IGP\u4e2d\u7684metric\u3002\u4f8b\u5982\u4e0a\u56fe\u4e2d\u5982\u679cR2\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u4e86 11.1.1.0/24\u8def\u7531\uff0c\u5e76\u4e14\u8be5\u8def\u7531\u5728R2\u7684\u5168\u5c40\u8def\u7531\u8868\u4e2dOSPF Cost=100\uff0c\u90a3\u4e48\u5f53R2\u5c06\u8def\u7531network\u8fdb BGP\u7684\u65f6\u5019\uff0c\u4ea7\u751f\u7684BGP\u8def\u7531MED\u503c\u5c06\u7ee7\u627f\u8fd9\u6761\u8def\u7531\u7684OSPF Cost\u503c100\u3002 \u5982\u679cBGP\u8def\u7531\u5668\u5c06**\u672c\u5730\u7684\u76f4\u8fde\u8def\u7531**\u901a\u8fc7network\u6216import-route\u7684\u65b9\u5f0f\u5f15\u5165BGP\uff0c\u90a3\u4e48\u8fd9\u6761BGP\u8def\u7531\u7684MED\u9ed8\u8ba4\u4e3a0\uff0c\u56e0\u4e3a\u76f4\u8fde\u8def\u7531cost\u4e3a0\u3002 \u5982\u679cBGP\u8def\u7531\u5668\u5c06**\u672c\u5730\u7684\u9759\u6001\u8def\u7531**\u901a\u8fc7network\u6216import-route\u7684\u65b9\u5f0f\u5f15\u5165BGP\uff0c\u90a3\u4e48\u8fd9\u6761BGP\u8def\u7531\u7684MED\u9ed8\u8ba4\u4e3a0\uff0c\u56e0\u4e3a\u9759\u6001\u8def\u7531cost\u4e3a0\u3002 \u5982\u679cBGP\u8def\u7531\u5668\u901a\u8fc7BGP\u5b66\u4e60\u5230\u5176\u4ed6\u90bb\u5c45\u4f20\u9012\u8fc7\u6765\u7684\u4e00\u6761\u8def\u7531\uff0c\u90a3\u4e48\u5c06\u8def\u7531\u66f4\u65b0\u7ed9\u81ea\u5df1\u7684EBGP \u90bb\u5c45\u65f6\uff0c\u9ed8\u8ba4\u662f\u4e0d\u643a\u5e26MED\u7684\u3002 \u53ef\u4ee5\u4f7f\u7528**default med**\u547d\u4ee4\u4fee\u6539\u9ed8\u8ba4\u7684MED\u503c\uff0c default med**\u547d\u4ee4\u53ea\u5bf9\u672c\u8bbe\u5907\u4e0a\u7528import-route\u547d\u4ee4\u5f15\u5165\u7684\u8def\u7531\u548cBGP\u7684\u6c47\u603b\u8def\u7531\u751f\u6548\u3002\u4f8b\u5982\u5728R2\u4e0a\u914d\u7f6e**default med 999 \uff0c\u90a3\u4e48R2\u901a\u8fc7import-route \u53caaggregate\u547d\u4ee4\u4ea7\u751f\u7684\u8def\u7531\u4f20\u9012\u7ed9R3\u65f6\uff0c\u8def\u7531\u643a\u5e26\u7684MED\u4e3a999\u3002","title":"MED\u9ed8\u8ba4\u503c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#next_hop","text":"NEXT_HOP\u5c5e\u6027\u662f\u4e00\u4e2a\u516c\u8ba4\u5fc5\u9075\u5c5e\u6027\uff0c\u4e5f\u5c31\u662f\u5728\u6240\u6709\u7684Update\u62a5\u6587\u91cc\u90fd\u5fc5\u987b\u643a\u5e26\u7684\u5c5e\u6027\u3002\u8fd9\u4e2a\u5c5e\u6027\u63cf\u8ff0\u4e86\u53bb\u5f80\u76ee\u7684\u7f51\u7edc\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u3002","title":"NEXT_HOP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#next_hop_1","text":"","title":"NEXT_HOP\u5c5e\u6027\u7684\u9ed8\u8ba4\u64cd\u4f5c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ebgp_1","text":"\u5f53\u4e00\u53f0BGP\u8def\u7531\u5668\u5c06\u8def\u7531\u901a\u544a\u7ed9\u81ea\u5df1\u7684EBGP\u90bb\u5c45\u65f6\uff0c\u8be5\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u5176 BGP\u66f4\u65b0\u6e90IP\u5730\u5740\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u53caR2\u4e4b\u95f4\u4f7f\u7528\u76f4\u8fde\u63a5\u53e3IP\u5730\u5740\u5efa\u7acbEBGP\u8fde\u63a5\uff0c\u90a3\u4e48R1\u5c06\u8def\u753111.1.1.0/24\u901a\u544a\u7ed9R2 \u7684\u65f6\u5019\uff0c\u8def\u7531\u643a\u5e26\u7684NEXT_HOP\u5c5e\u6027\u503c\u5c31\u662fR1\u7684\u63a5\u53e3\u5730\u574010.1.12.1\u3002 R2\u5c06\u6536\u5230\u7684BGP\u8def\u753111.1.1.0/24\u88c5\u8f7d\u8fdb\u8def\u7531\u8868\u540e\uff0c\u8be5\u8def\u7531\u5728\u8def\u7531\u8868\u4e2d\u7684\u4e0b\u4e00\u8df3\u5c31\u662f10.1.12.1\uff0c\u4e5f\u5c31\u662f\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u3002","title":"\u5c06\u8def\u7531\u66f4\u65b0\u7ed9EBGP\u90bb\u5c45"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ebgpibgp","text":"\u5f53BGP\u8def\u7531\u5668\u628a\u4eceEBGP\u90bb\u5c45\u5b66\u4e60\u5230\u7684\u8def\u7531\u4f20\u9012\u7ed9\u81ea\u5df1\u7684IBGP\u90bb\u5c45\u65f6\uff0c\u4f1a\u4fdd\u7559\u8def\u7531\u7684NEXT_HOP \u5c5e\u6027\u503c\u4e0d\u53d8\u3002\u4f8b\u5982\u4e0a\u56fe\u4e2d\uff0cR2\u4eceEBGP\u90bb\u5c45R1\u5b66\u4e60\u5230\u7684\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u4e3a10.1.12.1\uff0c\u90a3\u4e48\u5f53R2\u5c06\u8def\u7531\u518d\u901a\u544a\u7ed9\u81ea\u5df1\u7684IBGP\u90bb\u5c45R3\u7684\u65f6\u5019\uff0c\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u4fdd\u6301\u4e0d\u53d8\uff0c\u4ecd\u7136\u4e3a 10.1.12.1\u3002 R3\u5c06\u5b66\u4e60\u5230\u7684BGP\u8def\u753111.1.1.0/24\u88c5\u8f7d\u8fdb\u5168\u5c40\u8def\u7531\u8868\u65f6\uff0c\u8be5\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u5c31\u662f10.1.12.1\uff0c\u8fd9\u91cc\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c \u5bf9\u4e8eR3 \u800c\u8a0010.1.12.1 \u5e76\u975e\u5904\u4e8e\u672c\u5730\u76f4\u8fde\u7f51\u7edc\uff0c \u56e0\u6b64\u5f53R3\u8981\u8f6c\u53d1\u6570\u636e\u5230 11.1.1.0/24\u7f51\u7edc\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u4e0a\u8fd8\u9700\u8981\u505a\u4e00\u6b21\u9012\u5f52\uff0c\u4e5f\u5c31\u662f\u9700\u8981\u518d\u5728\u8def\u7531\u8868\u4e2d\u67e5\u627e\u523010.1.12.1\u7684\u8def\u7531\u3002","title":"\u5c06EBGP\u90bb\u5c45\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\u66f4\u65b0\u7ed9\u81ea\u5df1\u7684IBGP\u90bb\u5c45"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#aggregatebgpnext_hopip","text":"","title":"\u901a\u8fc7aggregate\u547d\u4ee4\u6ce8\u5165\u7684BGP\u6c47\u603b\u8def\u7531\uff0cNEXT_HOP\u5c5e\u6027\u503c\u4e3a\u6267\u884c\u6c47\u603b\u7684\u8def\u7531\u5668\u7684\u66f4\u65b0\u6e90IP\u5730\u5740\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#next_hop_2","text":"\u5728\u524d\u9762\u7684\u5185\u5bb9\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u4e86\u89e3\u5230\uff1a\u201c\u5f53\u4e00\u53f0BGP\u8def\u7531\u5668\u5c06\u8def\u7531\u66f4\u65b0\u81ea\u5df1\u7684EBGP\u90bb\u5c45\u65f6\uff0c\u8be5\u8def\u7531\u7684 NEXT_HOP\u5c5e\u6027\u503c\u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u5176BGP\u66f4\u65b0\u6e90IP\u5730\u5740\u201d\u3002\u4f46\u662f\u8fd9\u6709\u4e00\u4e2a\u4f8b\u5916\u7684\u60c5\u51b5\u3002 \u5982\u4e0a\u56fe\uff0cABC\u4e09\u53f0\u8def\u7531\u5668\u8fde\u63a5\u5230\u4e00\u4e2a\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\u4e2d\uff0c\u4f8b\u5982\u4ee5\u592a\u7f51\uff0cABC\u7684\u63a5\u53e3\u5c5e\u4e8e\u4e00\u4e2aIP\u5b50\u7f51\u3002ABC \u4e09\u8005\u7684EBGP\u90bb\u5c45\u5173\u7cfb\u5982\u56fe\u6240\u793a\uff0c\u90a3\u4e48\u5f53B\u8def\u7531\u5668\u6709\u6761BGP\u8def\u7531100.100.100.0/24\u66f4\u65b0\u7ed9A\u7684\u65f6\u5019\uff0c\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u4e3aB\u7684\u63a5\u53e3IP\u5730\u5740\u4e5f\u5c31\u662f10.1.123.2\uff0c\u968f\u540e\uff0cA\u6536\u5230\u8fd9\u6761\u8def\u7531\u5e76\u4e14\u51c6\u5907\u66f4\u65b0\u7ed9C\uff0c\u800c\u8fd9\u65f6\u5019\uff0c\u7531\u4e8eABC\u5904\u4e8e\u540c\u4e00\u4e2aIP\u5b50\u7f51\uff0c\u56e0\u6b64A\u5c06\u8def\u7531\u66f4\u65b0\u7ed9EBGP\u90bb\u5c45C\u7684\u65f6\u5019\uff0c\u4f1a\u505a\u4e00\u4e2a\u7279\u6b8a\u5904\u7406\uff1a \u4fdd\u6301\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\u503c\u4e0d\u53d8\u3002\u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a\u5462\uff1f\u5b9e\u9645\u4e0a\u8fd9\u6837\u64cd\u4f5c\u662f\u975e\u5e38\u6709\u597d\u5904\u7684\uff0c\u56e0\u4e3aC\u6536\u5230\u8fd9\u6761\u8def\u7531\u65f6\uff0c\u53d1\u73b0NEXT_HOP\u5c5e\u6027\u4e3a10.1.123.2\uff0c\u90a3\u4e48\u5f53C\u8f6c\u53d1\u5230\u8fbe100.100.100.0/24\u7684\u62a5\u6587\u65f6\uff0c\u53ea\u9700\u76f4\u63a5\u5c06\u6570\u636e\u8f6c\u53d1\u7ed9\u4e0b\u4e00\u8df310.1.123.2\u5373\u53ef\uff0c\u800c\u4e0d\u7528\u4eceA\u53bb\u7ed5\u4e00\u4e0b\u3002","title":"\u5728\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\u4e2d\u7684NEXT_HOP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#community","text":"","title":"Community"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#community_1","text":"Community\u4e5f\u88ab\u79f0\u4e3a\u56e2\u4f53\u5b57\uff0c\u662f\u53ef\u9009\u4f20\u9012\u5c5e\u6027\u3002Community\u662f\u4e00\u79cdBGP\u8def\u7531\u6807\u8bb0\uff0c\u7528\u4e8e\u7b80\u5316\u8def\u7531\u7b56\u7565\u7684\u6267\u884c\u3002\u53ef\u4ee5\u5c06\u67d0\u4e9b\u8def\u7531\u5206\u914d\u7279\u5b9a\u7684Community\u5c5e\u6027\u503c\uff0c\u4e4b\u540e\u5c31\u53ef\u4ee5\u57fa\u4e8eCommunity\u503c\u800c\u4e0d\u662f\u57fa\u4e8e\u524d\u7f00\u4fe1\u606f\u6765\u6293\u53d6\u8def\u7531\u5e76\u6267\u884c\u76f8\u5e94\u7684\u7b56\u7565\u4e86\u3002 \u6709\u4e86Community\u5c5e\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u5728AS100\u5f15\u5165\u8fd9\u4e9b\u529e\u516c\u53ca\u751f\u4ea7\u7684\u8def\u7531\u7684\u65f6\u5019\uff0c\u5c31\u5206\u522b\u201c\u6253\u4e0a\u201d\u76f8\u5e94\u7684 Community\u503c\u4ee5\u4f5c\u6807\u8bb0\uff0c\u4f8b\u5982\u4f46\u51e1\u751f\u4ea7\u7684\u8def\u7531\uff0c\u5c31\u6253\u4e0a\u6807\u8bb0100:1\uff0c\u4f46\u51e1\u529e\u516c\u7684\u8def\u7531\u5c31\u6253\u4e0a\u6807\u8bb0100:2\uff0c \u90a3\u4e48\u8fd9\u4e9b\u5c5e\u6027\u503c\u968f\u7740\u8def\u7531\u4f20\u9012\u7ed9\u4e86AS200\uff0c\u5728AS200\u4e0a\u9700\u8981\u5206\u522b\u5bf9\u529e\u516c\u53ca\u751f\u4ea7\u8def\u7531\u505a\u7b56\u7565\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u6293\u53d6\u76f8\u5e94\u7684Community\u503c\u5373\u53ef\u3002\u4f8b\u5982\u6293\u53d6100:1\u7684Community\u5c5e\u6027\u503c\u4e5f\u5c31\u6293\u53d6\u4e86\u6240\u6709\u751f\u4ea7\u7684\u8def\u7531\u3002 Community\u5c5e\u6027\u662f\u4e00\u7ec44\u4e2a8\u4f4d\u7ec4\u7684\u6570\u503c\uff0cRFC1997\u89c4\u5b9a\u524d2B\u8868\u793aAS\u53f7\uff0c\u540e2B\u8868\u793a\u57fa\u4e8e\u7ba1\u7406\u76ee\u7684\u8bbe\u7f6e\u7684\u6807\u793a\u7b26\uff0c\u683c\u5f0f\u4e3aAA\uff1aNN\u3002 Community\u5c5e\u6027\u5bf9\u90bb\u5c45\u8d77\u4f5c\u7528\uff0c\u5728\u8bbe\u7f6e\u540e\uff0c\u9700\u8981\u5411\u90bb\u5c45\u53d1\u9001\u8be5\u5c5e\u6027\uff08advertise-community\uff09\u3002","title":"\u5173\u4e8eCommunity\u5c5e\u6027"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#route-policycommunity","text":"","title":"\u4f7f\u7528route-policy\u8bbe\u7f6eCommunity\u5c5e\u6027\u503c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#community_2","text":"\u4e1a\u5185\u9488\u5bf9\u7279\u6b8a\u7684\u9700\u6c42\u5b9a\u4e49\u4e86\u516c\u8ba4\u7684Community\u5c5e\u6027\u503c\uff0c\u8fd9\u4e9b\u5c5e\u6027\u503c\u6bd4\u8f83\u7279\u6b8a\uff0c\u800c\u4e14\u90fd\u6709\u81ea\u5df1\u7684\u5b9a\u4e49\uff0c\u63a5\u4e0b\u53bb\u6211\u4eec\u5206\u522b\u6765\u770b\u4e00\u4e0b\uff1a","title":"\u51e0\u4e2a\u516c\u8ba4\u7684\u7684Community\u5c5e\u6027\u503c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#no-advertise","text":"R1\u5f15\u5165\u4e86\u4e00\u6761BGP\u8def\u7531\uff0c\u5e76\u4e14\u4e3a\u8def\u7531\u6253\u4e0a\u4e86\u201cno-advertise\u201d\u7684Community\u5c5e\u6027\u503c\uff0c\u8fd9\u6761\u8def\u7531\u4f20\u9012\u7ed9\u4e86R2\uff0cR2\u53d1\u73b0\u8def\u7531\u643a\u5e26\u4e86\u201cno-advertise\u201d\u7684Community\u5c5e\u6027\u503c\uff0c\u56e0\u6b64\u8fd9\u6761\u8def\u7531\u81ea\u5df1\u7528\uff0c\u4e0d\u4f1a\u518d\u4f20\u9012\u7ed9\u4efb\u4f55BGP\u90bb\u5c45\u3002","title":"no-advertise"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#no-export","text":"","title":"no-export"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#no-export-subconfed","text":"","title":"no-export-subconfed"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#atomic_aggregateaggregator","text":"\u8def\u7531\u6c47\u603b\u662f\u8bb8\u591a\u52a8\u6001\u8def\u7531\u534f\u8bae\u90fd\u652f\u6301\u7684\u7279\u6027\uff0c\u4e5f\u662f\u4e00\u4e2a\u975e\u5e38\u57fa\u672c\u7684\u534f\u8bae\u7279\u6027\uff0cBGP\u5f53\u7136\u662f\u652f\u6301\u8def\u7531\u6c47\u603b\u7684\u3002\u7136\u800c\u8def\u7531\u6c47\u603b\u5728\u4f18\u5316\u8def\u7531\u6761\u76ee\u6570\u91cf\u7684\u540c\u65f6\uff0c\u4e5f\u5e26\u6765\u4e00\u5b9a\u7684\u95ee\u9898\uff0c\u4f8b\u5982\u660e\u7ec6\u8def\u7531\u5728\u8def\u7531\u6c47\u603b\u7684\u6267\u884c\u70b9\u4e4b\u540e\u5c31\u88ab\u6291\u5236\u4e86\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\u65b0\u4ea7\u751f\u7684\u8fd9\u6761\u6c47\u603b\u8def\u7531\uff0c\u800c\u6c47\u603b\u8def\u7531\u53ef\u80fd\u4f1a\u4e22\u5931\u660e\u7ec6\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u5176\u4e2d\u5305\u62ec\u6700\u91cd\u8981\u7684AS_PATH\u5c5e\u6027\uff0c\u800cAS_PATH\u662fBGP\u8def\u7531\u9632\u73af\u7684\u91cd\u8981\u4f9d\u636e\u3002 \u56e0\u6b64BGP\u5b9a\u4e49\u4e86\u8fd9\u4e24\u4e2a\u8def\u5f84\u5c5e\u6027\uff1aAtomic_Aggregate\u53caAggregator\uff0c\u5206\u522b\u7528\u4e8e\u544a\u8bc9\u4e0b\u6e38BGP\u8def\u7531\u5668\uff1a1\u3001\u8fd9\u662f\u6761\u6c47\u603b\u8def\u7531\uff0c2\u3001\u6c47\u603b\u8def\u7531\u53d1\u751f\u7684\u5730\u65b9\uff08\u4e5f\u5c31\u662f\u6c47\u603b\u8def\u7531\u7684\u59cb\u53d1AS\u548c\u59cb\u53d1\u8def\u7531\u5668\uff09\u3002 R4# display bgp routing-table 172.16.0.0 BGP \u8def\u7531\u7b56\u7565","title":"Atomic_Aggregate\u53caaggregator"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp_8","text":"","title":"BGP\u8def\u7531\u6c47\u603b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp_9","text":"BGP\u652f\u6301\u8def\u7531\u81ea\u52a8\u6c47\u603b\uff0c\u9996\u5148\u9700\u8981\u5728BGP\u89c6\u56fe\u4e0b\u914d\u7f6e**summary automatic**\u547d\u4ee4\uff0c\u8fd9\u6761\u547d\u4ee4\u5f00\u542f\u4e86BGP \u8def\u7531\u81ea\u52a8\u6c47\u603b\u7684\u529f\u80fd\u3002\u53e6\u5916\uff0cBGP\u7684\u81ea\u52a8\u6c47\u603b\u529f\u80fd\u4ec5\u5bf9\u4f7f\u7528import-route\u65b9\u5f0f\u5f15\u5165\u7684\u8def\u7531\u6709\u6548\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u6253\u5f00\u4e86BGP\u81ea\u52a8\u6c47\u603b\u7684\u5f00\u5173\uff0c\u540c\u65f6\u4f7f\u7528import-route\u5f15\u5165\u4e86\u76f4\u8fde\u8def\u75311.1.1.0/24\uff0c\u8fd9\u6761\u8def\u7531\u88ab\u6ce8\u5165BGP\u540e\u5c31\u4f1a\u88ab\u81ea\u52a8\u6c47\u603b\u6210\u4e3b\u7c7b\u8def\u7531\uff1a1.0.0.0/8\uff0c\u7136\u540e\u4f20\u9012\u7ed9R2\u3002","title":"BGP\u8def\u7531\u81ea\u52a8\u6c47\u603b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgpaggregate","text":"\u5728BGP\u4e2d\u90e8\u7f72\u8def\u7531\u624b\u5de5\u6c47\u603b\u7684\u547d\u4ee4\u5982\u4e0b\uff1a \u6211\u4eec\u770b\u5230**aggregate**\u547d\u4ee4\u5305\u542b\u4e86\u8bb8\u591a\u5173\u952e\u5b57\uff0c\u6bcf\u4e2a\u5173\u952e\u5b57\u90fd\u6709\u7279\u5b9a\u7684\u7528\u9014\uff0c\u63a5\u4e0b\u53bb\u6211\u4eec\u6765\u9010\u4e2a\u5206\u6790\u5206\u6790\uff1a","title":"BGP\u624b\u5de5\u8def\u7531\u6c47\u603b\uff08\u4f7f\u7528aggregate\u547d\u4ee4\u6267\u884c\u8def\u7531\u6c47\u603b\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#aggregate","text":"\u5728\u4e0a\u56fe\u4e2dR1\u6240\u5728\u7684AS100\u5185\u6709\u660e\u7ec6\u8def\u7531172.16.1.0/24\u53ca2.0/24\uff1bR2\u6240\u5728\u7684AS200\u5185\u6709\u660e\u7ec6\u8def\u7531 172.16.10.0/24\u53ca11.0/24\uff0c\u8fd9\u51e0\u6761\u660e\u7ec6\u8def\u7531\u901a\u8fc7BGP\u901a\u544a\u7ed9\u4e86R3\uff0c\u7136\u540eR3\u901a\u544a\u7ed9\u4e86R4\u3002 \u73b0\u5728\u4e3a\u4e86\u4f18\u5316\u7f51\u7edc\u4e2d\u7684\u8def\u7531\u6761\u76ee\u6570\u91cf\uff0c\u6211\u4eec\u5728R3\u4e0a\u90e8\u7f72BGP\u8def\u7531\u6c47\u603b\uff0c\u4f7f\u7528**aggregate 172.16.0.0** **16**\u547d\u4ee4\u4e4b\u540e\uff0cR3\u5c31\u4f1a\u53bb\u68c0\u9a8c\u81ea\u5df1\u7684BGP\u8def\u7531\u8868\uff0c\u53ea\u8981\u8868\u4e2d\u6709172.16.0.0/16\u8fd9\u4e2a\u4e3b\u7c7b\u7f51\u7edc\u7684\u5b50\u7f51\u8def\u7531\u5e76\u4e14\u662f\u88ab\u4f18\u9009\u7684\uff0cR3\u5c31\u4f1a\u4ea7\u751f\u4e00\u6761172.16.0.0/16\u7684\u6c47\u603b\u8def\u7531\uff0c\u5e76\u5c06\u6c47\u603b\u8def\u7531\u901a\u544a\u7ed9BGP\u90bb\u5c45\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u76f4\u63a5\u4f7f\u7528**aggregate 172.16.0.0 16**\u547d\u4ee4\u540e\uff0cR3\u5c06\u540c\u65f6\u628a\u90a3\u56db\u6761\u660e\u7ec6\u8def\u7531\uff0c\u4ee5\u53ca\u6c47\u603b\u8def\u7531\u4e00\u8d77\u901a\u544a\u7ed9R4\uff0c\u53e6\u4e00\u65b9\u9762\uff0c\u6c47\u603b\u8def\u7531172.16.0.0/16\u4e5f\u4f1a\u88ab\u901a\u544a\u7ed9R1\u53caR2\uff0c\u8fd9\u91cc\u4e8b\u5b9e\u4e0a\u6709\u4e00\u4e2a\u8def\u7531\u73af\u8def\u7684\u9690\u60a3\uff08\u81f3\u4e8e\u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u8bf7\u770b\u4e0b\u6587\uff09\u3002","title":"aggregate"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#aggregate-detail-suppressed","text":"\u5982\u679c\u6211\u4eec\u53ea\u5e0c\u671bR3\u901a\u544a\u6c47\u603b\u8def\u7531\u3001\u4e0d\u901a\u544a\u660e\u7ec6\u8def\u7531\u5462\uff1f\u5c31\u5728\u4e0a\u8ff0\u547d\u4ee4\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u4e00\u4e2a**detail-** **suppressed**\u5173\u952e\u5b57\u5373\u53ef\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u770b\u5230\u5728R3\u7684BGP\u8def\u7531\u8868\u91cc\uff0c\u56db\u6761\u660e\u7ec6\u8def\u7531\u90fd\u88ab\u6291\u5236\u4e86\uff0c\u884c\u9996\u7684s\u610f\u601d\u5c31\u662f suppressed\uff08\u6291\u5236\uff09\u3002\u8fd9\u6837\u5c31\u8d77\u5230\u4e86\u8def\u7531\u6570\u91cf\u4f18\u5316\u7684\u4f5c\u7528\uff1a [R3] display bgp routing-table \u518d\u6765\u770b\u4e00\u4e0b\u8fd9\u6761\u6c47\u603b\u8def\u7531\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a","title":"aggregate detail-suppressed"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r3-display-bgp-routing-table-1721600","text":"Aggregated route\u5b57\u6837\u6307\u793a\u8fd9\u662f\u4e00\u6761\u6c47\u603b\u8def\u7531\u3002AS_PATH Nil\u6307\u793a\u8fd9\u6761\u6c47\u603b\u8def\u7531\u4e22\u5931\u4e86\u660e\u7ec6\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u5176\u4e2d\u5305\u62ecAS_PATH\uff0c\u8fd9\u5c31\u5e26\u6765\u4e86\u4ea7\u751f\u73af\u8def\u7684\u9690\u60a3\uff08\u600e\u4e48\u89c4\u907f\uff0c\u7ee7\u7eed\u770b\u4e0b\u6587\uff09\u3002","title":"[R3] display bgp routing-table 172.16.0.0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#aggregate-detail-suppressed-as-set","text":"\u4f7f\u7528**aggregate 172.16.0.0 16 detail-suppressed**\u547d\u4ee4\u7684\u8bdd\uff0cR3\u5c06\u4f1a\u6291\u5236\u660e\u7ec6\u8def\u7531\uff0c\u540c\u65f6\u4ea7\u751f\u4e00\u6761/16\u7684\u6c47\u603b\u8def\u7531\u5e76\u901a\u544a\u51fa\u53bb\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\u8fd9\u6761\u6c47\u603b\u8def\u7531\u5230\u76ee\u524d\u4e3a\u6b62\u662f\u4e00\u6761\u5168\u65b0\u7684\u8def\u7531\uff0c\u7531R3\u59cb\u53d1\uff0c\u5b83\u4e22\u5931\u4e86\u90a3\u56db\u6761\u660e\u7ec6\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u5176\u4e2d\u5c24\u4ee5AS_PATH\u5c5e\u6027\u7684\u4e22\u5931\u6700\u4e3a\u53ef\u6015\u3002 \u6211\u4eec\u770b\u5230\uff0c\u8fd9\u6761\u6c47\u603b\u8def\u7531\u5b9e\u9645\u4e0a\u662f\u88ab\u4f20\u9012\u7ed9\u4e86R1\u3001R2\u53caR4\uff0c\u6ce8\u610f\u5230\u6c47\u603b\u8def\u7531\u88ab\u4f20\u9012\u7ed9R1\u53caR2\u540e\uff0c \u8fd9\u5c31\u4ea7\u751f\u4e86\u8def\u7531\u73af\u8def\u9690\u60a3\uff0cR1\u53caR2\u4f1a\u5c06\u8fd9\u6761\u8def\u7531\u52a0\u8f7d\u8fdb\u8def\u7531\u8868\uff0c\u56e0\u4e3a\u8fd9\u6761\u6c47\u603b\u8def\u7531\u7684AS_PATH \u4e3a300\uff0c\u56e0\u6b64BGP\u4e0d\u8ba4\u4e3a\u5b58\u5728\u73af\u8def\u3002\u90a3\u4e48\u600e\u4e48\u89c4\u907f\u5462\uff1f**aggregate**\u547d\u4ee4\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a**as-set**\u5173\u952e\u5b57\uff0c\u5728\u547d\u4ee4**aggregate 172.16.0.0 16**\u547d\u4ee4\u4e2d\u589e\u52a0**as-set**\u5173\u952e\u5b57\u540e\uff0c\u6240\u4ea7\u751f\u7684\u6c47\u603b\u8def\u7531\u5c06\u7ee7\u627f\u660e\u7ec6\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u6211\u4eec\u91cd\u70b9\u5206\u6790AS_PATH\u5c5e\u6027\u7684\u7ee7\u627f\u3002\u6765\u770b\u4e00\u4e0b\u547d\u4ee4\u914d\u7f6e\u540e\u7684\u6548\u679c\uff1a","title":"aggregate detail-suppressed as-set"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r3-bgp-display-bgp-routing-table-1721600","text":"\u6ce8\u610f\u5230\u6c47\u603b\u8def\u7531\u7684AS_PATH\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u53d8\u6210\u4e86{100 200}\uff0c\u8fd9\u4e2a\u5b9e\u9645\u4e0a\u662f\u4e00\u79cd\u7279\u6b8a\u7684AS_PATH \u7c7b\u578b\uff08as-set\u7c7b\u578b\uff09\uff0c\u5173\u4e8e\u8fd9\u79cd\u7c7b\u578b\u7684\u8be6\u7ec6\u63cf\u8ff0\u8bf7\u53c2\u8003\u672c\u7cfb\u5217\u6587\u6863\u7684\u8def\u5f84\u5c5e\u6027\u76f8\u5173\u7ae0\u8282\u3002\u5728{}\u4e2d\u7684 AS\u53f7\u662f\u6ca1\u6709\u987a\u5e8f\u7684\uff0c\u56e0\u4e3a\u65b0\u4ea7\u751f\u7684\u6c47\u603b\u8def\u7531\u6240\u6c47\u603b\u7684\u660e\u7ec6\u5206\u522b\u6765\u81ea\u4e8eAS100\u548cAS200\uff0c\u8fd9\u91cc100\u53ca 200\u4f5c\u4e3a\u9632\u73af\u7684\u4f9d\u636e\u65f6\u5176\u987a\u5e8f\u662f\u4e0d\u91cd\u8981\u7684\u3002 \u6c47\u603b\u8def\u7531\u643a\u5e26\u8fd9\u4e2aAS_PATH\u5c5e\u6027\uff0c\u518d\u4f20\u9012\u5230R1\u53caR2\u7684\u65f6\u5019\uff0cAS_PATH\u4f1a\u53d8\u6210300 {100 200}\uff0cR1 \u548cR2\u5728\u8def\u7531\u7684AS_PATH\u4e2d\u770b\u5230\u81ea\u5df1\u672c\u5730\u7684AS\u53f7\uff0c\u56e0\u6b64\u8ba4\u4e3a\u51fa\u73b0\u4e86\u8def\u7531\u73af\u8def\uff0c\u4e8e\u662f\u5ffd\u7565\u8fd9\u4e2a\u8def\u7531\u66f4\u65b0\u3002\u53bbR4\u4e0a\u770b\u770b\u8be5\u6c47\u603b\u8def\u7531\uff1a","title":"[R3-bgp] display bgp routing-table 172.16.0.0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r4-bgp-display-bgp-routing-table-1721600","text":"","title":"[R4-bgp] display bgp routing-table 172.16.0.0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#aggregate-suppress-policy","text":"**suppress-policy**\u5173\u952e\u5b57\u7528\u4e8e\u901a\u544a\u6c47\u603b\u8def\u7531\u53ca\u9009\u5b9a\u7684\u660e\u7ec6\u8def\u7531\uff08\u6291\u5236\u7279\u5b9a\u7684\u660e\u7ec6\u8def\u7531\uff09\u3002\u4f7f\u7528**suppress-policy**\u5173\u952e\u5b57\u65f6\uff0c\u9700\u5728\u5176\u540e\u8c03\u7528\u5b9a\u4e49\u597d\u7684route-policy\uff0c\u90a3\u4e9b\u88abroute-policy permit\u7684\u660e\u7ec6\u8def\u7531\u5c06\u88ab\u8fc7\u6ee4\uff0c\u5176\u4ed6\u660e\u7ec6\u8def\u7531\u5219\u88ab\u653e\u884c\u3002**suppress-policy**\u867d\u7136\u8c03\u7528route-policy \uff0c\u4f46\u662froute-policy \u53ea\u80fd\u7528\u4e8e\u5339\u914d\uff08if-match\uff09\uff0c\u4e0d\u80fd\u7528\u4e8e\u8bbe\u7f6e\u5c5e\u6027\uff08\u4e0d\u80fd\u7528apply\u547d\u4ee4\uff09\u3002","title":"aggregate suppress-policy"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#aggregate-origin-policy","text":"**origin-policy**\u5173\u952e\u5b57\u53ef\u8c03\u7528\u4e00\u4e2aroute-policy\uff0c\u5728\u8be5route-policy\u4e2d\u4f7f\u7528if-match\u8bed\u53e5\u53bb\u6293\u53d6\u660e\u7ec6\u8def\u7531\u3002\u5173\u8054origin-policy\u7684aggregate\u547d\u4ee4\u6240\u4ea7\u751f\u7684\u6c47\u603b\u8def\u7531\u76f8\u5f53\u4e8e\u662f\u4e3a\u4e0a\u8ff0route-policy\u4e2d\u6240\u5339\u914d\u7684\u660e\u7ec6 \u8def\u7531\u800c\u751f\u7684\uff0c\u53ea\u8981\u8fd9\u4e9b\u660e\u7ec6\u8def\u7531\u4e2d\u6709\u4e00\u6761\u8def\u7531\u6d3b\u8dc3\uff0c\u90a3\u4e48\u6c47\u603b\u8def\u7531\u5c31\u4f1a\u4ea7\u751f\uff0c\u5982\u679croute-policy\u6240 \u5339\u914d\u7684\u6240\u6709\u660e\u7ec6\u8def\u7531\u90fd\u5931\u6548\uff0c\u90a3\u4e48\u6c47\u603b\u8def\u7531\u4e5f\u5c31\u8ddf\u7740\u6d88\u5931\u3002 \u6ce8\u610f**aggregate 172.16.0.0 16 detail-suppressed origin-policy orimap**\u8fd9\u6761\u547d\u4ee4\u4ea7\u751f\u7684\u6c47\u603b\u8def\u7531172.16.0.0/16\u662f\u4e0eorimap\u4e2d\u6240\u5339\u914d\u7684\u8def\u7531\u5f3a\u5173\u8054\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981orimap\u91cc\u6240\u5339\u914d\u7684\u660e\u7ec6\u8def\u7531\u81f3\u5c11\u6709\u4e00\u6761\u662f\u6d3b\u8dc3\u7684\uff0c\u90a3\u4e48\u6c47\u603b\u8def\u7531\u5c31\u662f\u6d3b\u7684\uff0c\u800c\u5982\u679c\u6240\u5339\u914d\u7684\u8def\u7531\u5168DOWN\u4e86\uff0c\u90a3\u4e48\u6c47\u603b\u8def\u7531\u4e5f\u5c31\u6d88\u5931\u4e86\u3002\u53e6\u5916\uff0c\u6ca1\u6709\u88aborimap\u5339\u914d\u7684\u660e\u7ec6\u8def\u7531\uff0c\u5373\u4f7f\u5b83\u662f172.16.0.0/16\u7684\u5b50\u7f51\u8def\u7531\uff0c\u4e5f\u89c6\u4e3a\u4e0e\u672c\u6c47\u603b\u8def\u7531\u65e0\u5173\uff0c\u56e0\u6b64\u8fd9\u91cc\u5373\u4f7f\u4f7f\u7528 \u4e86 detail-suppressed \u5173\u952e\u5b57\uff0c\u5374\u5e76\u6ca1\u6709 \u6291\u5236\u6389 172.16.10.0/24\u53ca172.16.11.0/24\u8fd9\u4e24\u6761\u8def\u7531\u3002","title":"aggregate origin-policy"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#aggregate-attribute-policy","text":"\u5728**aggregate**\u547d\u4ee4\u4e2d\u4f7f\u7528**attribute-policy**\u5173\u952e\u5b57\u8c03\u7528\u4e00\u4e2aroute-policy\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u6c47\u603b\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\u3002\u4f8b\u5982\u4e0a\u56fe\u4e2d\uff0c\u5199\u4e00\u4e2aroute-policy\uff0c\u8bbe\u7f6eMED\u4e3a999\uff0c\u7136\u540e\u5728**aggregate**\u547d\u4ee4\u4e2d\u52a0\u4e0a**attribute-** **policy**\u6765\u8c03\u7528\u5b9a\u4e49\u597d\u7684route-policy\uff0c\u5c31\u53ef\u4ee5\u4e3a\u4ea7\u751f\u7684\u8fd9\u6761\u6c47\u603b\u8def\u7531\u8bbe\u7f6eMED\u503c\u3002","title":"aggregate attribute-policy"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#as-path-filter","text":"","title":"as-path-filter\u53ca\u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_127","text":"\u6b63\u5219\u8868\u8fbe\u5f0f\uff08regular expression\uff09\u662f\u6309\u7167\u4e00\u5b9a\u7684\u6a21\u677f\u6765\u5339\u914d\u5b57\u7b26\u4e32\u7684\u516c\u5f0f\u3002\u662f\u4e00\u79cd\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\u7684\u5de5\u5177\u3002\u6211\u4eec\u65e5\u5e38\u4e0a\u7f51\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e5f\u90fd\u7ecf\u5e38\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u6709\u4ea4\u96c6\uff0c\u4f8b\u5982\u5728\u4e00\u4e2a\u7ad9\u70b9\u6ce8\u518c\u7684\u65f6\u5019\uff0c\u8981\u8f93\u5165\u624b\u673a\u53f7\u7801\uff0c\u90a3\u4e48\u540e\u53f0\u7a0b\u5e8f\u5982\u4f55\u5224\u65ad\u7528\u6237\u8f93\u5165\u7684\u624b\u673a\u53f7\u7801\u662f\u6709\u6548\u7684\u3001\u90fd\u662f\u6570\u5b57\uff1f\u8fd9\u65f6\u5c31\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u5339\u914d\u3002 \u5728BGP\u7b56\u7565\u90e8\u7f72\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u7075\u6d3b\u7684\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u6293\u53d6\u8def\u7531\u3002\u4e00\u6761BGP\u7684\u8def\u7531\u5305\u542bAS_PATH\u5c5e\u6027\uff0c \u800c\u5728\u4e00\u4e2a\u590d\u6742\u7684\u5927\u578b\u7f51\u7edc\u4e2d\uff0cAS_PATH\u80af\u5b9a\u4e5f\u662f\u590d\u6742\u7684\uff0c\u5728\u7279\u5b9a\u7684\u9700\u6c42\u4e0b\uff0c\u53ef\u80fd\u8981\u9488\u5bf9\u7279\u5b9a\u7684AS\u6216\u8005\u7279\u5b9a\u7684AS_PATH\u5185\u5bb9\u6765\u6293\u53d6\u8def\u7531\uff0c\u6b64\u65f6\u5c31\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u4e86\u3002 \u4e00\u822c\u6765\u8bf4\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5305\u542b\u4e24\u79cd\u5b57\u7b26\uff1a\u5e38\u89c4\u5b57\u7b26\uff0c\u4ee5\u53ca\u63a7\u5236\u5b57\u7b26\u3002\u5176\u4e2d\u63a7\u5236\u5b57\u7b26\u53ef\u4ee5\u662f\u539f\u5b50\u5b57\u7b26\u3001\u4e58\u6cd5\u5b57\u7b26\u3001\u8303\u56f4\u5b57\u7b26\u7b49\u3002\u4f8b\u5982\u6b63\u5219\u8868\u8fbe\u5f0f100\uff0c\u975e\u5e38\u7b80\u5355\uff0c\u5c31\u4e00\u4e2a100\uff0c\u8fd9\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u6709\u4ec0\u4e48\u529f\u80fd\u5462\uff1f\u5b83\u80fd\u5339\u914d\u4efb\u4f55\u5305\u542b100\u8fd9\u51e0\u4e2a\u6570\u5b57\u7684\u5b57\u7b26\u4e32\uff0c\u4f8b\u5982100 200\uff0c10000\uff0c21412100\uff0c\u7b49\u7b49\uff0c\u800c\u5982\u679c\u60f3\u8981\u518d\u7cbe\u786e\u70b9\uff0c\u5c31\u53ef\u4ee5\u642d\u914d\u63a7\u5236\u5b57\u7b26\u6765\u8fdb\u4e00\u6b65\u63a7\u5236\u5339\u914d\u7684\u7ed3\u679c\u3002 \u4e0b\u9762\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u6b63\u5219\u8868\u8fbe\u5f0f\u53ef\u80fd\u4f1a\u7528\u5230\u7684\u5404\u79cd\u5b57\u7b26\uff1a","title":"\u6b63\u5219\u8868\u8fbe\u5f0f\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_128","text":"\u539f\u5b50\u5b57\u7b26\u793a\u4f8b\uff1a ^a.$ \u5339\u914d\u4e00\u4e2a\u4ee5a\u5f00\u59cb\uff0c\u4efb\u610f\u5355\u4e00\u5b57\u7b26\u7ed3\u675f\u7684\u5b57\u7b26\u4e32\uff0c\u5982a0\uff0ca!\u7b49 ^100_ \u5339\u914d100\u3001100 200\u3001100 300 400\u7b49 ^100$ \u5339\u914d100 100$|400$ \u5339\u914d100\u30011400\u3001300 400\u7b49 ^\\(65000\\)$ \u4ec5\u4ec5\u5339\u914d(65000) [123].[7-9] \u5339\u914d123\u4e2d\u7684\u4e00\u4e2a\u52a0\u4e0a\u4efb\u610f\u5b57\u7b26\u518d\u52a0\u4e0a7\u52309\u4e2d\u7684\u4e00\u4e2a\uff0c\u5982167\u30013\u7a7a\u683c7\u7b49","title":"\u539f\u5b50\u5b57\u7b26"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_129","text":"* \u5339\u914d\u524d\u9762\u5b57\u7b260\u6b21\u6216\u591a\u6b21\u51fa\u73b0 + \u5339\u914d\u524d\u9762\u5b57\u7b261\u6b21\u6216\u591a\u6b21\u51fa\u73b0 \uff1f \u5339\u914d\u524d\u9762\u5b57\u7b26\u76840\u6b21\u62161\u6b21\u51fa\u73b0 \u4e00\u4e2a\u4e58\u6cd5\u5b57\u7b26\u53ef\u4ee5\u5e94\u7528\u4e8e\u4e00\u4e2a\u5355\u5b57\u7b26\u6216\u591a\u4e2a\u5b57\u7b26\uff0c\u5982\u679c\u5e94\u7528\u4e8e\u591a\u5b57\u7b26\uff0c\u9700\u5c06\u5b57\u7b26\u4e32\u653e\u5165\uff08\uff09\u4e2d\u3002 \u4e58\u6cd5\u5b57\u7b26\u793a\u4f8b\uff1a abc*d \u5339\u914dabd\u3001abcd\u3001abccd\u3001abcccd\u7b49 abc+d \u5339\u914dabcd\u3001abccd\u3001abcccd\u7b49 abc?d \u5339\u914dabd\u3001abcd\u3001abcdefg\u7b49 a(bc)?d \u5339\u914dad\u3001abcd\u3001aaabcd\u7b49","title":"\u4e58\u6cd5\u5b57\u7b26"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_130","text":"\u8303\u56f4\u5b57\u7b26\u793a\u4f8b\uff1a [abcd] \u5339\u914d\u53ea\u8981\u51fa\u73b0\u4e86a\u3001b\u3001c\u3001d\u7684\u5185\u5bb9 [a-c 1-2]$ \u5339\u914da\u3001a1\u300162\u30011b\u3001xv2\u7b49 [^act]$ \u5339\u914d\u4e0d\u4ee5a\u6216c\u6216t\u7ed3\u5c3e\u7684\u5185\u5bb9 [123].[7-9] 159 220\u300191 70","title":"\u8303\u56f4\u5b57\u7b26"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#as-path-filter_1","text":"AS_PATH\u53ef\u4ee5\u5f53\u505a\u5b57\u7b26\u4e32\u5e76\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5339\u914d\uff0c\u4f8b\u5982123 495 602\u8fd9\u4e2aAS_PATH\u5c5e\u6027\u503c\uff0c\u5b9e\u9645\u4e0a\u662f\u4e09\u4e2a\u6570\u5b57\u901a\u8fc7\u4e24\u4e2a\u7a7a\u683c\u9694\u5f00\u7684\u8fd9\u4e48\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u901a\u8fc7**as-path-filter**\u547d\u4ee4\uff0c\u642d\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5c31\u53ef\u4ee5\u5339\u914dBGP\u8def\u7531\u7684AS_PATH\u5c5e\u6027\uff0c\u6293\u51fa\u6211\u4eec\u611f\u5174\u8da3\u7684\u8def\u7531\u6765\u8fdb\u4e00\u6b65\u6267\u884c\u7b56\u7565\u3002 \u4e0a\u56fe\u5c31\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u547d\u4ee4\uff1a\u201c ip as-path-filter 1 permit 443 \u201d\u5c31\u5b9a\u4e49\u4e86\u4e00\u4e2aas-path-filter\u8fc7\u6ee4\u5668\uff0c\u5b83\u7684\u540d\u5b57\u4e3a1\uff0c\u4f7f\u7528\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u662f443\uff0c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5b9e\u9645\u4e0a\u662f\u5339\u914d\u4efb\u4f55\u542b\u6709443\u7684\u5b57\u7b26\u4e32\u3002 \u6ce8\u610f\uff0c\u5982\u679cAS_PATH\u5305\u542b\u591a\u4e2aAS\u53f7\uff0c\u90a3\u4e48\u8fd9\u4e9bAS\u53f7\u5b9e\u9645\u4e0a\u662f\u901a\u8fc7\u7a7a\u683c\u5206\u9694\u7684\uff0c\u800c\u8fd9\u4e2a\u7a7a\u683c\u7b26\u4e5f\u662f\u80fd\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u3002\u4e0b\u9762\u770b\u51e0\u4e2a\u4f8b\u5b50\uff1a ^$ \u5339\u914d\u4e0d\u5305\u542b\u4efb\u4f55AS\u53f7\u7684AS_PATH\uff0c\u4e5f\u5c31\u662f\u672cAS\u5185\u7684\u8def\u7531 .* \u4e00\u4e2a\u70b9\u548c\u4e00\u4e2a\u661f\u53f7\uff0c\u5339\u914d\u6240\u6709\uff0c\u4efb\u4f55 ^100$ \u5c31\u5339\u914d100\u7684\u8fd9\u4e2aAS_PATH _100$ \u4ee5100\u7ed3\u675f\u7684AS_PATH\uff0c\u4e5f\u5c31\u662f\u8def\u7531\u8d77\u6e90\u4e8e100AS\u7684\u8def\u7531 ^10[012349]$ \u5339\u914d100\u3001101\u3001102\u3001103\u3001104\u3001109\u8fd9\u4e9bAS_PATH ^10[^0-6]$ \u5339\u914d\u9664\u4e86100~106\u5916\u7684AS_PATH ^10. \u5339\u914d100~109\uff0c\u4ee5\u53ca10\uff0c\u56e0\u4e3a\u201c.\u201d \u4e5f\u5305\u542b\u7a7a\u683c ^(100|200)$ \u5339\u914d\u5305\u542b100\u53ca200\u7684AS_PATH 12(_34)?_56 \u5339 \u914d 12 56 \u53ca 12 34 56","title":"\u5173\u4e8eas-path-filter"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#as-path-filter_2","text":"\u5728\u5e94\u7528\u65b9\u5f0f1\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2aas-path-filter\u5e76\u5173\u8054\u4e86\u4e00\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f^100$\uff0c\u8fd9\u4e2aas-path-filter\u53ef\u4ee5\u5339\u914dAS_PATH\u4e25\u683c\u4e3a100\u7684\u8def\u7531\uff08\u4e0d\u5305\u542b\u4efb\u4f55\u5176\u4ed6\u7684AS\u53f7\u6216\u5176\u4ed6\u6570\u5b57\uff09\uff0c\u968f\u540e\u6211\u4eec\u5c06as-path-filter\u5e94\u7528\u5728\u4e86**peer**\u547d\u4ee4\u4e0a\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u53ea\u6709\u88abas-path-filter 1\u6240\u5339\u914d\u7684\u8def\u7531\uff0c\u624d\u4f1a\u88ab\u901a\u544a\u7ed9BGP\u90bb\u5c4510.1.34.4\u3002 \u5728\u5e94\u7528\u65b9\u5f0f2\u4e2d\uff0c\u6211\u4eec\u5728route-policy\u4e2d\u7684if-match\u547d\u4ee4\u8c03\u7528\u5b9a\u4e49\u597d\u7684as-path-filter\uff0c\u968f\u540e\u4f7f\u7528apply\u547d\u4ee4\u8bbe\u7f6eLP\u8def\u5f84\u5c5e\u6027\u503c\uff0c\u5e76\u5728BGP\u914d\u7f6e\u6a21\u5f0f\u4e0b\u5e94\u7528\u5728\u4e86peer\u547d\u4ee4\u4e0a\uff08import\u65b9\u5411\uff09\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u8be5\u8def\u7531\u5668\u5728\u6536\u5230BGP\u90bb\u5c4510.1.34.4\u6240\u53d1\u9001\u8fc7\u6765\u7684BGP\u8def\u7531\u4e2d\uff0c\u5c06\u6240\u6709\u88abas-path-filter\u5339\u914d\u7684\u8def\u7531\u7684LP\u8def\u5f84\u5c5e\u6027\u503c\u8bbe\u7f6e\u4e3a100\u3002","title":"\u4f7f\u7528as-path-filter\u5339\u914d\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#as-path-filter1","text":"","title":"as-path-filter\u914d\u7f6e\u793a\u4f8b1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#as-path-filter2","text":"","title":"as-path-filter\u914d\u7f6e\u793a\u4f8b2"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#community_3","text":"","title":"\u4f7f\u7528Community\u6267\u884c\u7b56\u7565"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#route-policycommunity_1","text":"","title":"\u4f7f\u7528route-policy\u8bbe\u7f6e\u8def\u7531\u7684Community\u5c5e\u6027\u503c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#community_4","text":"R1\u4f7f\u7528network\u547d\u4ee4\u5411BGP\u53d1\u5e03\u4e86\u4e24\u6761\u8def\u7531\uff1a1.1.1.0/24\u53ca1.2.2.0/24\uff0c\u5e76\u5728BGP\u8fdb\u7a0b\u4e2d\u5bf9R2\u5e94\u7528export \u65b9\u5411\u7684\u7b56\u7565\uff0c\u4e3a1.1.1.0/24\u8fd9\u6761\u8def\u7531\u8bbe\u7f6e\u4e00\u4e2acommunity\u5c5e\u6027\u503c100:1\uff0c\u4ee5\u4fbf\u4e0b\u6e38\u90bb\u5c45\u80fd\u591f\u4f7f\u7528\u8fd9\u4e2a Community\u5c5e\u6027\u503c\u8fdb\u4e00\u6b65\u90e8\u7f72\u7b56\u7565\u3002 Community \u5c5e\u6027\u9ed8\u8ba4\u662f\u4e0d\u4f1a\u8ddf\u968f\u8def\u7531\u66f4\u65b0\u7ed9\u90bb\u5c45\u7684\uff0c \u56e0\u6b64\u4e00\u5b9a\u8981\u52a0\u4e0a**peer x.x.x.x advertise-** **community**\u547d\u4ee4\uff0c\u5728R1\u4e0a\u8981\u505a\u8fd9\u4e00\u6b65\u7684\u914d\u7f6e\uff0c\u5728R2\u4e0a\u4e5f\u8981\u5bf9R3\u914d\u7f6e\u8be5\u6761\u547d\u4ee4\u3002 \u4e0a\u9762\u547d\u4ee4\u4e2d\u7684**route-policy RP permit node 20**\uff0c\u5b9e\u9645\u4e0a\u6709\u70b9\u7c7b\u4f3c\u5141\u8bb8\u6240\u6709\u7684\u610f\u601d\uff0c\u5982\u679c\u4e0d\u914d\u7f6e\u8be5\u6761\u547d\u4ee4\uff0c1.2.2.0/24\u8fd9\u6761\u8def\u7531\u5c31\u4e0d\u4f1a\u88ab\u901a\u544a\u7ed9R2\u4e86\u3002","title":"\u4e3a\u8def\u7531\u8bbe\u7f6eCommunity\u5c5e\u6027\u503c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#community_5","text":"R1\u66f4\u65b0\u4e86\u4e24\u6761\u8def\u7531\uff1a1.1.1.0/24\u53ca1.2.2.0/24\u7ed9R2\uff0c\u540c\u65f61.1.1.0/24\u8fd9\u6761\u8def\u7531\u643a\u5e26\u4e86\u4e00\u4e2aCommunity\u5c5e\u6027\u503c100:1\uff0c\u73b0\u5728R2\u57fa\u4e8e\u67d0\u79cd\u9700\u6c42\uff0c\u8981\u4e3a\u8fd9\u6761\u8def\u7531\u8ffd\u52a0\u4e00\u4e2ano-export\u7684community\u5c5e\u6027\u503c\u3002\u90a3\u4e48\u5728R2\u4e0a\u53ef\u4ee5\u505a\u5982\u4e0a\u914d\u7f6e\uff0c\u5173\u952e\u70b9\u5728**additive**\u5173\u952e\u5b57\uff0c\u5982\u679c\u8be5\u5173\u952e\u5b57\u4e0d\u52a0\uff0c\u5219\u662f\u8986\u76d6\u539f\u6709community\u5c5e\u6027\u503c\u3002 \u5728R3\u4e0a\u67e5\u770b\u914d\u7f6e\u7ed3\u679c\uff1a","title":"\u4e3a\u8def\u7531\u8ffd\u52a0Community\u5c5e\u6027\u503c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ip-community-filter","text":"\u4e0a\u6e38\u8def\u7531\u5668\u4e3a\u8def\u7531\u8bbe\u7f6e\u4e86Community\u5c5e\u6027\u503c\uff0c\u8fd9\u4e9b\u5c5e\u6027\u503c\u4f1a\u968f\u7740\u8def\u7531\u4f20\u9012\u4e0b\u6765\uff0c\u90a3\u4e48\u4e0b\u6e38\u7684\u8def\u7531\u5668\u5c31\u80fd\u591f\u6839\u636eCommunity\u5c5e\u6027\u6765\u5339\u914d\u8def\u7531\u4ece\u800c\u8fdb\u4e00\u6b65\u6267\u884c\u7b56\u7565\u3002 BGP\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5de5\u5177\uff1aip community-filter\uff0c\u8fd9\u4e2a\u5de5\u5177\u53ef\u4ee5\u7528\u6765\u5339\u914dCommunity\u5c5e\u6027\u3002 \u4f7f\u7528ip community-filter\u5339\u914d\u56e2\u4f53\u5c5e\u6027(internet\u5c5e\u6027)\uff1a \u4f7f\u7528ip community-filter\u5339\u914d\u56e2\u4f53\u5c5e\u6027(\u4e25\u683c\u5339\u914d)\uff1a \u5220\u9664\u4e00\u4e2acommunity\u503c\uff1a \u5220\u9664\u591a\u4e2acommunity\u503c\uff1a","title":"\u4f7f\u7528ip community-filter\u5339\u914d\u56e2\u4f53\u5c5e\u6027"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ip_7","text":"\u5728BGP\u7684\u90e8\u7f72\u4e2d\uff0c\u7ecf\u5e38\u6709\u8fc7\u6ee4\u7279\u5b9a\u8def\u7531\u7684\u9700\u8981\uff0c\u4e8b\u5b9e\u4e0a\u80fd\u591f\u7528\u4e8eBGP\u8def\u7531\u8fc7\u6ee4\u7684\u5de5\u5177\u8fd8\u633a\u591a\uff0c\u6211\u4eec\u5148\u770bIP \u524d\u7f00\u5217\u8868\u3002\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u3001R2\u3001R3\u5404\u81ea\u5904\u4e8e\u4e00\u4e2aAS\uff0c\u5e76\u4e14\u7ef4\u62a4\u7740EBGP\u90bb\u5c45\u5173\u7cfb\u3002R1\u5c06\u4e24\u6761\u76f4\u8fde\u8def\u7531 1.0.1.0.24\u53ca1.0.2.0/24\u5f15\u5165BGP\uff0c\u5e76\u4e14\u4f20\u9012\u7ed9\u4e86R2\u3002\u90a3\u4e48\u5728\u521d\u59cb\u60c5\u51b5\u4e0b\uff0cR2\u4f1a\u5c06\u8fd9\u4e24\u8def\u7531\u66f4\u65b0\u7ed9R3\uff0c\u4f46\u8fd9\u91cc\u6211\u4eec\u6709\u8fd9\u4e48\u4e00\u4e2a\u9700\u6c42\uff0c\u5e0c\u671bR2\u5c06\u8def\u75311.0.2.0/24\u8fc7\u6ee4\u6389\uff0c\u53ea\u66f4\u65b01.0.1.0/24\u7ed9R3\u3002 R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u6211\u4eec\u9996\u5148\u5b9a\u4e49\u4e86\u4e00\u4e2aIP\u524d\u7f00\u5217\u8868\uff0c\u5728\u8be5\u524d\u7f00\u5217\u8868\u4e2d\uff0cdeny\u6389\u4e86\u60f3\u8981\u8fc7\u6ee4\u7684\u8def\u7531\u6761\u76ee\uff0c\u540c\u65f6\u653e\u884c\u5176\u4ed6\u8def\u7531\u6761 \u76ee\u3002\u968f\u540e\u5728BGP\u8fdb\u7a0b\u4e2d\u4f7f\u7528ip-prefix\u8fc7\u6ee4\u5de5\u5177\u8c03\u7528\u5df2\u7ecf\u5b9a\u4e49\u597d\u7684\u524d\u7f00\u5217\u8868\uff0c\u5373\u53ef\u6267\u884c\u8def\u7531\u8fc7\u6ee4\u3002","title":"IP\u524d\u7f00\u5217\u8868"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#5345-filter-policy","text":"\u53e6\u5916\u4e00\u4e2a\u53ef\u7528\u4e8e\u8def\u7531\u8fc7\u6ee4\u7684\u5de5\u5177\u662ffilter-policy\u3002","title":"5.3.4.5 Filter-policy"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#1_3","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u3001R2\u3001R3\u5404\u81ea\u5904\u4e8e\u4e00\u4e2aAS\uff0c\u5e76\u4e14\u7ef4\u62a4\u7740EBGP\u90bb\u5c45\u5173\u7cfb\u3002R1\u5c06\u4e24\u6761\u76f4\u8fde\u8def\u75311.0.1.0.24\u53ca 1.0.2.0/24\u5f15\u5165BGP\uff0c\u5e76\u4e14\u4f20\u9012\u7ed9\u4e86R2\u3002\u90a3\u4e48\u5728\u521d\u59cb\u60c5\u51b5\u4e0b\uff0cR2\u4f1a\u5c06\u8fd9\u4e24\u8def\u7531\u66f4\u65b0\u7ed9R3\uff0c\u4f46\u8fd9\u91cc\u6211\u4eec\u6709\u8fd9\u4e48\u4e00\u4e2a\u9700\u6c42\uff1a\u4e0d\u5e0c\u671bR3\u5b66\u4e60\u523010.0.2.0/24\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728R2\u4e0a\u90e8\u7f72filter-policy\uff0c\u5c061.0.2.0/24\u8def\u7531\u8fc7\u6ee4\u6389\u3002 R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u9996\u5148\u4f7f\u7528acl\u5b9a\u4e49\u9700\u8981\u653e\u884c\u6216\u8005\u8fc7\u6ee4\u7684\u8def\u7531\u3002\u7136\u540e\u5728BGP\u914d\u7f6e\u89c6\u56fe\u4e0b\uff0c\u4f7f\u7528**peer 10.1.23.3 filter-policy 2000** **export**\u547d\u4ee4\uff0c\u8c03\u7528\u5b9a\u4e49\u597d\u7684acl2000\uff0c\u5173\u8054\u90bb\u5c4510.1.23.3\u5e76\u4e14\u65b9\u5411\u4e3aexport\uff0c\u56e0\u6b64\u5f53R2\u66f4\u65b0BGP\u8def\u7531\u7ed9R3 \u7684\u65f6\u5019\uff0c\u53ea\u66f4\u65b0\u88abacl2000\u5141\u8bb8\u7684\u8def\u7531\u3002","title":"\u914d\u7f6e\u793a\u4f8b1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#2_2","text":"Filter-policy\u9664\u4e86\u80fd\u591f\u5728BGP\u914d\u7f6e\u89c6\u56fe\u4e0b\u5173\u8054**peer**\u4f7f\u7528\uff08\u793a\u4f8b1\u6240\u793a\uff09\uff0c\u8fd8\u80fd\u76f4\u63a5\u4f7f\u7528\u3002\u5173\u8054peer\u4f7f\u7528\u7684\u65f6\u5019\u6240\u5b9a\u4e49\u7684\u8def\u7531\u8fc7\u6ee4\u529f\u80fd\u4ec5\u5bf9\u8be5\u90bb\u5c45\u6709\u6548\uff0c\u800c\u76f4\u63a5\u5728BGP\u914d\u7f6e\u89c6\u56fe\u4e0b\u4f7f\u7528\u5219\u5bf9\u6240\u6709\u90bb\u5c45\u6709\u6548\u3002\u5e76\u4e14\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\uff0c\u9664\u4e86\u80fd\u5173\u8054ACL\uff0c\u8fd8\u80fd\u5173\u8054\u524d\u7f00\u5217\u8868\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u3001R2\u3001R3\u5404\u81ea\u5904\u4e8e\u4e00\u4e2aAS\uff0c\u5e76\u4e14\u7ef4\u62a4\u7740EBGP\u90bb\u5c45\u5173\u7cfb\u3002R1\u5c06\u4e24\u6761\u76f4\u8fde\u8def\u75311.0.1.0.24\u53ca 1.0.2.0/24\u5f15\u5165BGP\uff0c\u5e76\u4e14\u4f20\u9012\u7ed9\u4e86R2\u3002\u90a3\u4e48\u5728\u521d\u59cb\u60c5\u51b5\u4e0b\uff0cR2\u4f1a\u5c06\u8fd9\u4e24\u8def\u7531\u66f4\u65b0\u7ed9R3\uff0c\u73b0\u5728\u6211\u4eec\u4e0d\u5e0c\u671b R3\u5b66\u4e60\u523010.0.2.0/24\uff0c\u540c\u6837\u662f\u8fd9\u4e2a\u9700\u6c42\uff0c\u770b\u770b\u53e6\u4e00\u79cd\u914d\u7f6e\u65b9\u5f0f\uff1a \u5728BGP\u914d\u7f6e\u89c6\u56fe\u4e0b\u76f4\u63a5\u4f7f\u7528filter-policy\u53ef\u8c03\u7528ACL\u6216ip-prefix\u524d\u7f00\u5217\u8868\u3002\u5e76\u4e14\u5bf9\u6240\u6709\u90bb\u5c45\u6709\u6548\u3002 \u8fd9\u79cd\u65b9\u5f0f\u4e00\u822c\u642d\u914dimport-route\u4f7f\u7528\uff1a R1\u5c06\u8def\u75311.0.1.0/24\u53ca1.0.2.0/24\u5f15\u5165\u4e86BGP\uff0c\u8def\u7531\u88ab\u4f20\u9012\u7ed9\u4e86R2\uff0c\u540c\u65f6R2\u4f7f\u7528**import-route**\u547d\u4ee4\u5f15\u5165\u672c\u5730\u4e24\u6761\u76f4\u8fde\u8def\u75312.0.1.0/24\u53ca.0.2.0/24\u5230BGP\uff0c\u73b0\u5728\u8981\u9488\u5bf9\u8fd9\u4e9b\u91cd\u53d1\u5e03\u7684\u76f4\u8fde\u8def\u7531\u8fdb\u884c\u8fc7\u6ee4\uff0c\u5c062.0.2.0/24\u8fc7\u6ee4\u6389\uff0c\u5176\u4ed6\u653e\u884c\u3002","title":"\u914d\u7f6e\u793a\u4f8b2"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#5346-route-policy","text":"route-policy\u5728BGP\u7684\u7b56\u7565\u90e8\u7f72\u4e2d\u626e\u6f14\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u89d2\u8272\uff0c\u5e94\u8be5\u8bf4\u662fBGP\u6700\u91cd\u8981\u7684\u7b56\u7565\u5de5\u5177\u4e4b\u4e00\uff0c\u53ef\u4ee5\u6267\u884cBGP\u8def\u7531\u7b56\u7565\uff08\u8bbe\u7f6eBGP\u5404\u79cd\u8def\u5f84\u5c5e\u6027\u503c\uff09\uff0c\u4e5f\u53ef\u7528\u4e8e\u8def\u7531\u7684\u8fc7\u6ee4\u7b49\uff0c\u529f\u80fd\u5f3a\u5927\u3002","title":"5.3.4.6 Route-policy"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgpnetworkroute-policy","text":"\u5728\u4f7f\u7528**network**\u547d\u4ee4\u5c06\u8def\u7531\u53d1\u5e03\u5230BGP\u65f6\uff0c\u53ef\u4ee5\u5173\u8054route-policy\u6765\u8bbe\u7f6e\u8def\u7531\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u5c06\u672c\u5730\u4e24\u6761\u76f4\u8fde\u8def\u75311.0.1.0/24\u53ca1.0.2.0/24\u90fdnetwork\u8fdbBGP\uff0c\u5e76\u4e14\u8981\u5c06\u8fd9\u4e24\u6761\u8def\u7531\u5206\u522b\u6253\u4e0a Community\u5c5e\u6027\u503c\uff0c1.0/24\u7684\u8def\u7531\u6253\u4e0acommunity 100:1\uff0c2.0/24\u7684\u8def\u7531\u6253\u4e0acommunity 100:2\uff0cR1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u5728BGP\u4e2d\u4f7f\u7528network\u547d\u4ee4\u5173\u8054route-policy"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgppeerroute-policy","text":"\u540c\u6837\u662f\u4e0a\u9762\u7684\u73af\u5883\u548c\u9700\u6c42\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u53e6\u4e00\u79cd\u65b9\u6cd5\u6765\u914d\u7f6e\uff1a \u4ecd\u7136\u662f\u4f7f\u7528IP\u524d\u7f00\u5217\u8868\u6765\u5339\u914d\u8def\u7531\uff0c\u7136\u540e\u5b9a\u4e49\u4e00\u4e2aroute-policy\u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u8bbe\u7f6e\u4e0d\u540c\u7684Community \u5c5e\u6027\u503c\uff0c\u7136\u540e\u5728BGP\u7684\u914d\u7f6e\u89c6\u56fe\u4e0b\uff0c\u5148\u4f7f\u7528network\u547d\u4ee4\u53d1\u5e03\u4e24\u6761\u76f4\u8fde\u8def\u7531\u5230BGP\uff0c\u4f46\u662f**network**\u547d\u4ee4\u4e0d\u5173\u8054route-policy\uff0c\u800c\u662f\u5728**peer**\u547d\u4ee4\u4e2d\u5173\u8054route-policy\uff0c\u8fd9\u6837\u4e00\u6765\u8be5\u7b56\u7565\u5c06\u53ea\u5bf9R2\u8fd9\u4e2aBGP\u90bb\u5c45\u751f\u6548\u3002","title":"\u5728BGP\u4e2d\u4f7f\u7528peer\u547d\u4ee4\u5173\u8054route-policy"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgppeerroute-policy_1","text":"R1\u5728BGP\u4e2d\u53d1\u5e03\u4e86\u4e09\u6761\u8def\u7531\uff0c\u73b0\u5728\u57fa\u4e8e\u67d0\u79cd\u539f\u56e0\uff0c\u6211\u4eec\u4e0d\u5e0c\u671bBGP\u90bb\u5c45R2\u5b66\u4e60\u52301.0.1.0/24\u8fd9\u6761\u8def\u7531\uff0c \u90a3\u4e48\u53ef\u4ee5\u8003\u8651\u5982\u4e0b\u914d\u7f6e\uff1a BGP \u8def\u7531\u53cd\u5c04\u5668","title":"\u5728BGP\u4e2d\u4f7f\u7528peer\u547d\u4ee4\u5173\u8054route-policy\u6765\u8fc7\u6ee4\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_131","text":"BGP\u5728AS\u4e4b\u95f4\u7684\u8def\u7531\u9632\u73af\u4f9d\u8d56AS_PATH\u5c5e\u6027\uff0c\u4f46\u662fAS_PATH\u5c5e\u6027\u53ea\u5f53\u8def\u7531\u5728EBGP\u90bb\u5c45\u4e4b\u95f4\u4f20\u9012\u65f6\u624d\u4f1a\u53d1\u751f\u6539\u53d8\uff0c\u5728AS\u5185\u90e8\uff0cAS_PATH\u662f\u4e0d\u4f1a\u6539\u53d8\u7684\uff0c\u90a3\u4e48\u5728AS\u5185\u90e8\u7684\u8def\u7531\u9632\u73af\uff0c\u5c31\u65e0\u6cd5\u4f9d\u8d56AS_PATH\u4e86\uff0c\u56e0\u6b64BGP\u5b9a\u4e49**IBGP\u6c34\u5e73\u5206\u5272\uff1a\u4e00\u53f0BGP\u8def\u7531\u5668\u4ece\u5b83\u7684IBGP\u90bb\u5c45\u5b66\u4e60\u5230\u7684BGP\u8def\u7531\u4e0d\u80fd\u518d\u4f20\u9012\u7ed9\u4efb\u4f55IBGP\u90bb** \u5c45 \u3002 \u7531\u4e8e\u5b58\u5728IBGP\u6c34\u5e73\u5206\u5272\uff0c\u4f7f\u5f97AS\u5185\u7684BGP\u8def\u7531\u5668\u4e4b\u95f4\u4e0d\u5f97\u4e0d\u4e24\u4e24\u5efa\u7acbIBGP\u8fde\u63a5\uff08IBGP\u5168\u4e92\u8054\uff09\uff0c\u4ee5\u6c42\u83b7\u5f97\u5b8c\u6574\u7684BGP\u8def\u7531\u66f4\u65b0\uff0c\u7136\u800c\u8fd9\u662f\u4e2a\u6269\u5c55\u6027\u975e\u5e38\u4f4e\u7684\u505a\u6cd5\uff0c\u540c\u65f6\u4e5f\u7ed9\u7f51\u7edc\u8bbe\u5907\u5e26\u6765\u4e86\u8d1f\u62c5\uff0c\u89e3\u51b3IBGP\u6269\u5c55\u6027\u95ee\u9898\u7684\u4e24\u79cd\u6709\u6548\u7684\u529e\u6cd5\u662f\u8def\u7531\u53cd\u5c04\u5668\u53ca\u8054\u90a6\u3002 \u8def\u7531\u53cd\u5c04\u5668\u76f8\u6bd4\u4e8e\u8054\u90a6\uff0c\u4f18\u52bf\u5728\u4e8e\uff0c\u5728\u8054\u90a6\u4e2d\u6240\u6709\u8def\u7531\u5668\u90fd\u9700\u8981\u652f\u6301\u8054\u90a6\u529f\u80fd\uff0c\u800c\u8def\u7531\u53cd\u5c04\u5668\u53ea\u9700\u8981RR\u652f\u6301\u53cd\u5c04\u5668\u529f\u80fd\u5373\u53ef\uff0c\u53e6\u5916\uff0c\u8def\u7531\u53cd\u5c04\u5668\u7684\u5b9e\u73b0\u673a\u5236\u4e5f\u76f8\u5bf9\u7b80\u5355\u4e00\u4e9b\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u7531\u4e8eIBGP\u6c34\u5e73\u5206\u5272\u7684\u9650\u5236\uff0c\u4f7f\u5f97R4\u5728\u6536\u5230IBGP\u90bb\u5c45R3\u53d1\u6765\u7684\u8def\u7531\u66f4\u65b0\u540e\uff0c\u4e0d\u80fd\u518d\u53d1\u9001\u7ed9IBGP \u90bb\u5c45R5\u3002\u5982\u6b64\u4e00\u6765R5\u5c31\u65e0\u6cd5\u6b63\u5e38\u5b66\u4e60\u5230\u8def\u7531\uff0c\u9664\u975e\u5728R3-R5\u4e4b\u95f4\u4e5f\u5efa\u7acb\u4e00\u6761IBGP\u8fde\u63a5\uff0c\u8fd9\u6837\u5c31\u5f62\u6210\u4e86IBGP \u5168\u4e92\u8054\u3002 \u91c7\u7528\u8def\u7531\u53cd\u5c04\u6280\u672f\u5373\u53ef\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u9996\u5148\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2aRR\uff08Route Reflector\uff0c\u8def\u7531\u53cd\u5c04\u5668\uff09\uff0c\u540c\u65f6\u5b9a\u4e49 \u8fd9\u4e2aRR\u7684Client\uff08\u5ba2\u6237\uff09\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u5f53RR\u6536\u5230\u5979\u7684Client\u53d1\u9001\u8fc7\u6765\u7684\u8def\u7531\u65f6\uff0c\u5c31\u53ef\u4ee5\u50cf\u4e00\u9762\u955c\u5b50\u4e00\u6837\uff0c\u5c06\u8def\u7531\u53cd\u5c04\u7ed9\u5176\u4ed6IBGP\u8def\u7531\u5668\u3002\u5982\u4e0a\u56fe\u6240\u793a\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR4\u53ef\u4ee5\u914d\u7f6e\u4e3aRR\uff0c\u4e0e\u5b83\u7684Client R1\u6784\u6210\u4e86\u4e00\u4e2a\u8def\u7531\u53cd\u5c04\u7c07\u3002\u601d\u8003\u8def\u7531\u53cd\u5c04\u5668\u65f6\uff0c\u5c06\u7c07\u5f53\u4f5c\u4e00\u4e2a\u903b\u8f91\u7684\u6574\u4f53\u53bb\u8003\u8651\u5373\u53ef\uff0cRR\u548cClient\u5171\u540c\u6784\u6210\u53cd\u5c04\u7c07\uff0c\u4f46\u662f\u53ea\u6709RR\u77e5\u9053\uff08\u914d\u7f6e\u53ea\u662f\u5728RR\u4e0a\u5b8c\u6210\uff09\u8fd9\u79cd\u8def\u7531\u53cd\u5c04\u5668\u4e0e\u5ba2\u6237\u7684\u5173\u7cfb\u3002\u6ce8\u610fRR\u53ea\u901a\u544a\u6216\u53cd\u5c04\u5b83\u6240\u77e5\u9053\u7684\u6700\u4f73\u8def\u5f84\u3002 \u4e3a\u4e86\u7ef4\u62a4\u4e00\u81f4\u7684BGP\u62d3\u6251\uff0cRR\u5728\u53cd\u5c04\u8def\u7531\u7684\u65f6\u5019\u4e0d\u4fee\u6539\u67d0\u4e9bBGP\u8def\u5f84\u5c5e\u6027\uff0c\u8fd9\u4e9b\u5c5e\u6027\u5305\u62ecNEXT_HOP\u3001 AS_PATH\u3001LOCAL_PREF\u548cMED\uff0c\u5e76\u4e14\u589e\u52a0\u4e86ORIGINATOR_ID\u548cCLUSTER_LIST\u5c5e\u6027\u7528\u4e8e\u9632\u73af\u3002","title":"\u8def\u7531\u53cd\u5c04\u5668\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_132","text":"\u6211\u4eec\u5148\u770b\u4e00\u4e0b\u8def\u7531\u53cd\u5c04\u7684\u89c4\u5219\uff1a \u5982\u679c\u8def\u7531\u5b66\u4e60\u81ea\u975eClient IBGP\u90bb\u5c45\uff0c\u5219**\u53cd\u5c04**\u7ed9\u6240\u6709Client\uff1b \u5982\u679c\u8def\u7531\u5b66\u4e60\u81eaClient\uff0c\u5219**\u53cd\u5c04**\u7ed9\u6240\u6709\u975eClient IBGP\u90bb\u5c45\u548c\u9664\u4e86\u8be5Client\u4ee5\u5916\u7684\u6240\u6709Client\uff08\u6211\u53f8\u8bbe\u5907\u53ef\u4ee5\u5173\u95edRR\u5728Client\u4e4b\u95f4\u7684\u8def\u7531\u53cd\u5c04\u884c\u4e3a\uff09\uff1b \u5982\u679c\u8def\u7531\u5b66\u4e60\u81eaEBGP\u90bb\u5c45\uff0c\u5219**\u53d1\u9001**\u7ed9\u6240\u6709Client\u548c\u975eClient IBGP\u90bb\u5c45\u3002\u6ce8\u610f\u7ea2\u8272\u5173\u952e\u5b57\uff0c\u9700\u533a\u5206\u53cd\u5c04\u548c\u53d1\u9001\u7684\u533a\u522b\u3002 \u4e0b\u9762\u770b\u51e0\u4e2a\u4f8b\u5b50\uff1a \u6ce8\u610f\u6b64\u5904\u201c\u53cd\u5c04\u201d\u548c\u201c\u53d1\u9001\u201d\u7684\u533a\u522b\u3002\u201c\u53d1\u9001\u201d\u6307\u7684\u662f\u4f20\u7edf\u60c5\u51b5\u4e0b\uff08\u76f8\u5f53\u4e8eRR\u4e0d\u5b58\u5728\u7684\u573a\u666f\u4e0b\uff09\u7684BGP\u8def\u7531\u4f20\u9012\u884c\u4e3a\uff0c\u800c\u201c\u53cd\u5c04\u201d\u6307\u7684\u662f\u9075\u5faa\u8def\u7531\u53cd\u5c04\u89c4\u5219\u7684\u60c5\u51b5\u4e0b\uff0cRR\u6267\u884c\u7684\u8def\u7531\u53cd\u5c04\u52a8\u4f5c\uff0c\u88ab\u53cd\u5c04\u51fa\u53bb\u7684\u8def\u7531\u4f1a\u88abRR\u63d2\u5165\u7279\u6b8a\u7684\u8def\u5f84\u5c5e\u6027\u3002","title":"\u8def\u7531\u53cd\u5c04\u5668\u7684\u53cd\u5c04\u89c4\u5219"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_133","text":"\u7531\u4e8eAS_PATH\u5c5e\u6027\u5728AS\u5185\u90e8\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\uff08\u4ec5\u5f53\u8def\u7531\u79bb\u5f00\u672cAS\u624d\u4f1a\u88ab\u4fee\u6539\uff09\uff0c\u56e0\u6b64AS\u5185\u624d\u6709\u6c34\u5e73\u5206\u5272\u7684\u673a\u5236\u7528\u4e8e\u9632\u6b62\u73af\u8def\uff0c\u800c\u8def\u7531\u53cd\u5c04\u5668\u5b9e\u9645\u4e0a\u662f\u653e\u5bbd\u4e86\u6c34\u5e73\u5206\u5272\u539f\u5219\uff0c\u8fd9\u5c31\u4f1a\u5f15\u5165\u8def\u7531\u73af\u8def\u9690\u60a3\uff0c\u56e0\u6b64\u8def\u7531\u53cd\u5c04\u5668\u9700\u4f7f\u7528\u4ee5\u4e0b\u4e24\u4e2a\u5c5e\u6027\u9632\u6b62\u73af\u8def\uff1aORIGINATOR_ID\u548cCLUSTER_LIST\u662f\u8def\u7531\u53cd\u5c04\u5668\u4f7f\u7528\u7684\u53ef\u9009\u975e\u4f20\u9012\u5c5e\u6027\uff0c\u7528\u6765\u9632\u6b62\u73af\u8def\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u4e3aR2\u7684Client\uff0cR2\u4e3aRR\u3002R1\u4f20\u9012\u4e00\u6761\u8def\u7531\u7ed9R2\uff0c\u6839\u636e\u8def\u7531\u53cd\u5c04\u5668\u7684\u53cd\u5c04\u89c4\u5219\uff0cR2\u4f5c\u4e3aRR\u5c06\u6765\u81eaClient \u7684\u8def\u7531\u53cd\u5c04\u7ed9\u975eClient R3 \uff0c \u5e76\u4e14\u4e3a\u53cd\u5c04\u7684\u8def\u7531\u52a0\u4e0a\u4e24\u4e2a\u65b0\u7684\u8def\u5f84\u5c5e\u6027\uff1a Originator_ID \u53ca Cluster_list\u3002\u4e0b\u9762\u6211\u4eec\u5206\u522b\u8bb2\u89e3\u4e00\u4e0b\u8fd9\u4e24\u4e2a\u5c5e\u6027\u3002","title":"\u8def\u7531\u53cd\u5c04\u5668\u73af\u5883\u4e0b\u7684\u9632\u73af"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#originator_id","text":"\u6bcf\u5f53\u4e00\u6761\u8def\u7531\u88abRR\u53cd\u5c04\u65f6\uff0cRR\u4f1a\u4e3a\u53cd\u5c04\u540e\u7684\u8def\u7531\u521b\u5efa\u4e00\u4e2aOriginator_ID\u5c5e\u6027\uff0c\u503c\u4e3a\u8be5\u8def\u7531\u7684\u59cb\u53d1IBGP\u8def\u7531\u5668\u7684BGP Router-ID\u3002\u5f53\u4e00\u53f0\u8def\u7531\u5668\u6536\u5230\u90bb\u5c45\u53d1\u6765\u7684IBGP\u8def\u7531\u4e14\u8def\u7531\u7684Originator_ID\u5c5e\u6027\u503c\u4e0e\u81ea\u5df1\u7684Router_ID\u76f8\u540c\u65f6\uff0c\u5b83\u610f\u8bc6\u5230\u53d1\u751f\u4e86\u8def\u7531\u73af\u8def\uff0c\u56e0\u6b64\u5ffd\u7565\u8be5\u6761\u8def\u7531\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c R1\u53d1\u5e03\u4e86\u4e00\u6761BGP\u8def\u7531\uff0c\u8fd9\u6761BGP\u8def\u7531\u5728\u88abR2\u53cd\u5c04\u540e\uff0c\u88ab\u6dfb\u52a0\u4e86\u4e24\u4e2a\u5c5e\u6027\uff0c\u5176\u4e2d Originator_ID\u5c5e\u6027\u503c\u4e3aR1\u7684Router-ID\uff0c\u73b0\u5728\u5047\u8bbeAS123\u662f\u4e00\u4e2a\u9ad8\u5197\u4f59\u5ea6\u7684\u62d3\u6251\u73af\u5883\uff08\u4f8b\u5982\uff0c\u53ef\u80fd\u90e8\u7f72\u4e86\u591a\u4e2a\u8def\u7531\u53cd\u5c04\u851f\uff09\uff0c\u800c\u8fd9\u6761\u8def\u7531\u53c8\u88ab\u4f20\u56de\u4e86R1\u3002R1\u67e5\u770b\u8be5\u8def\u7531\uff0c\u53d1\u73b0\u8def\u7531\u643a\u5e26\u4e86Originator_ID\u5c5e\u6027\u5e76\u4e14\u503c\u4e0e\u81ea\u5df1\u7684Router-ID\u76f8\u7b49\uff0c\u4e8e\u662f\u77e5\u9053\u5b58\u5728\u4e86\u8def\u7531\u73af\u8def\u56e0\u6b64\u5ffd\u7565\u8be5\u8def\u7531\u66f4\u65b0\u3002 Originator_ID\u53caCluster_List\u5c5e\u6027\u5c06\u4f1a\u5f71\u54cdBGP\u8def\u5f84\u51b3\u7b56\u3002","title":"Originator_ID\u5c5e\u6027"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#cluster_list","text":"\u8def\u7531\u53cd\u5c04\u7c07\uff08Cluster\uff09\u5305\u62ec\u53cd\u5c04\u5668RR\u53ca\u5176Client\u3002\u6bcf\u4e00\u4e2a\u7c07\u90fd\u6709\u552f\u4e00\u7684\u7c07ID\uff08Cluster_ID\uff09\u3002\u6bcf\u5f53\u4e00\u6761\u8def\u7531\u88abRR\u53cd\u5c04\u540e\uff0c\u8be5\u8def\u7531\u53cd\u5c04\u7c07\u7684Cluster_ID\u5c31\u4f1a\u88ab\u6dfb\u52a0\u81f3\u8def\u7531\u7684Cluster_List\u5c5e\u6027\u4e2d\u3002\u5f53RR\u63a5\u6536\u5230\u4e00\u6761\u8def\u7531\u65f6\uff0cRR\u4f1a\u68c0\u67e5Cluster_List\uff0c\u5982\u679cCluster_List\u4e2d\u5df2\u7ecf\u6709\u672c\u5730Cluster_ID\uff0c\u5219\u5ffd\u7565\u8be5\u8def\u7531\uff1b\u5982\u679c\u6ca1\u6709\u672c\u5730Cluster_ID\uff0c\u5219\u5c06\u5176\u52a0\u5165Cluster_List\uff0c\u7136\u540e\u53cd\u5c04\u8be5\u8def\u7531\u3002 \u4e0a\u56fe\u4e2d\uff0cR1\u53d1\u5e03\u4e86\u4e00\u6761BGP\u8def\u7531\uff0c\u8be5\u8def\u7531\u88abR2\u53cd\u5c04\u540e\uff0c\u88ab\u6dfb\u52a0\u4e24\u4e2a\u5c5e\u6027\uff1aOriginator_ID\u53caCluster_List\uff0c \u5176\u4e2dCluster_List\u5c5e\u6027\u503c\u4e2d\u63d2\u5165\u4e86Cluster_ID 2.2.2.2\uff0c\u8fd9\u4e2aCluster_ID\u9ed8\u8ba4\u65f6\u662fRR\u7684Router-ID\uff0c\u6240\u4ee5\u8fd9\u91cc\u503c\u4e3a2.2.2.2\u3002\u5047\u8bbeAS123\u5185\u6709\u4e00\u4e2a\u9ad8\u5ea6\u5197\u4f59\u7684\u7f51\u7edc\u73af\u5883\uff08\u53ef\u80fd\u90e8\u7f72\u4e86\u591a\u4e2a\u8def\u7531\u53cd\u5c04\u851f\uff09\uff0c\u8fd9\u6761\u8def\u7531\u53c8\u88ab\u4f20\u56de\u4e86R2\uff0cR2\u6536\u5230\u8def\u7531\u540e\u53d1\u73b0\u8def\u7531\u643a\u5e26\u4e86Cluster_List\u5c5e\u6027\uff0c\u5e76\u4e14\u5c5e\u6027\u503c\u4e2d\u5305\u542b\u81ea\u5df1\u7684Cluster_ID\uff0c \u5b83\u5c06\u5ffd\u7565\u8be5\u66f4\u65b0\u3002","title":"Cluster_List\u5c5e\u6027"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#cluster_list_1","text":"\u73af\u5883\u63cf\u8ff0\uff1aR2\u4e3aRR\uff0c\u8bbe\u7f6eR1\u4e3a\u5176Client\uff1bR3\u4e3aRR\uff0c\u8bbe\u7f6eR1\u4e3a\u5176Client\uff1bR4\u4e3aRR\uff0c\u8bbe\u7f6eR3\u4e3a\u5176Client\uff1b\u4e5f \u5c31\u662f\u8bf4\uff0c\u5728\u8be5\u7f51\u7edc\u4e2d\uff0c\u5b58\u5728\u591a\u4e2a\u8def\u7531\u53cd\u5c04\u851f\u3002\u6240\u6709\u7684\u8def\u7531\u5668\u7684Loopback0\u53e3\u5730\u5740\u4e3ax.x.x.x\uff08\u8def\u7531\u5668\u7684Router- ID\u4e0e\u8be5\u5730\u5740\u76f8\u540c\uff09\uff0cx\u4e3a\u8bbe\u5907\u7f16\u53f7\uff0cIBGP\u90bb\u5c45\u5173\u7cfb\u57fa\u4e8e\u8be5Loopback\u53e3\u5efa\u7acb\u3002 \u73b0\u5728R1\u5c06\u8def\u753111.11.11.0/24\u5f15\u5165BGP\uff0c\u8def\u7531\u4f1a\u901a\u8fc7\u4e24\u6761\u8def\u5f84\u6700\u7ec8\u4f20\u9012\u7ed9R5\uff0c\u6211\u4eec\u770b\u770bR5\u5bf9\u8fd9\u4e24\u6761\u8def\u5f84\u662f\u5982\u4f55\u4f18\u9009\u7684\uff1f \u6211\u4eec\u770b\u5230\u6700\u7ec8R5\u4f18\u9009\u7684\u662f\u7531R2\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\uff0c\u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u4e3a\u4ec0\u4e48\u4eceR4\u4f20\u9012\u8fc7\u6765\u7684\u8fd9\u6761 \u8def\u7531\u6ca1\u6709\u88ab\u4f18\u9009\uff0c\u56e0\u4e3a\uff1a\u201cnot preferred for Cluster List\u201d\uff0c\u5b9e\u9645\u4e0a\u662f\u8f93\u5728\u4e86Cluster_List\u7684\u957f\u5ea6\u4e0a\u3002R1\u53d1\u9001\u7684\u8def\u7531\u4f20\u9012\u7ed9\u4e86R2\uff0c\u88abR2\u53cd\u5c04\u540e\uff0c\u8def\u7531\u4f1a\u88ab\u63d2\u5165\u4e24\u4e2a\u8def\u5f84\u5c5e\u6027\uff1a Originator_ID\u53caCluster_List\uff0c\u5176\u4e2d Cluster_List\u5c5e\u6027\u503c\u4e3a2.2.2.2\uff0c\u7136\u540e\u8fd9\u6761\u8def\u7531\u88ab\u53cd\u5c04\u7ed9\u4e86R5\uff1b\u53e6\u4e00\u8fb9\uff0cR1\u53d1\u9001\u7684\u8def\u7531\u4f20\u9012\u7ed9\u4e86R3\uff0c\u88abR3\u53cd\u5c04\u540e\u63d2\u5165\u4e86\u4e24\u4e2a\u8def\u5f84\u5c5e\u6027\uff1aOriginator_ID\u53caCluster_List\uff0c\u5176\u4e2dCluster_List\u5c5e\u6027\u503c\u4e3a3.3.3.3\uff0c\u63a5\u7740\uff0cR4\u6536\u5230\u4e86\u8fd9\u6761\u8def\u7531\uff0c\u7531\u4e8eR3\u662f\u5b83\u7684Client\uff0c\u56e0\u6b64R4\u7ee7\u7eed\u53cd\u5c04\u8be5\u8def\u7531\uff0c\u5728\u53cd\u5c04\u65f6\u5b83\u53d1\u73b0\u8def\u7531\u4e2d\u5df2\u7ecf\u6709\u4e86Cluster_List \u5c5e\u6027\uff0c\u56e0\u6b64\u5b83\u5c06\u672c\u5730Cluster_ID\u63d2\u5165\u5df2\u6709\u7684Cluster_List\u5c5e\u6027\u4e2d\uff0c\u90a3\u4e48\u8fd9\u6837\u4e00\u6765\u8fd9\u6761\u8def\u7531\u7684Cluster_List\u5c31\u53d8\u6210\u4e86\u201c4.4.4.4 3.3.3.3\u201d\uff0c\u6700\u540e\uff0c\u8def\u7531\u88ab\u66f4\u65b0\u7ed9\u4e86R5\u3002 \u73b0\u5728R5\u6536\u5230\u4e86\u5173\u4e8e1.1.1.0/24\u8def\u7531\u7684\u4e24\u6761\u66f4\u65b0\uff0c\u5b83\u4f1a\u770b\u770b\u8c01\u66f4\u4f18\u3002BGP\u6709\u4e00\u5957\u590d\u6742\u7684\u89c4\u5219\u6765\u5224\u5b9a\u8fd9\u79cd\u60c5\u51b5\uff0c \u6211\u4eec\u79f0\u4e3aBGP\u7684\u9009\u8def\u89c4\u5219\u3002\u9009\u8def\u89c4\u5219\u5305\u542b\u591a\u6761\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0cCluster_List\u6240\u5305\u542b\u7684Cluster_ID \u8d8a\u5c11\uff0c\u6216\u8005\u8bf4Cluster_List\u8d8a\u77ed\uff0c\u5219\u8def\u7531\u8d8a\u4f18\u3002 \u4e0a\u9762\u5c31\u662f\u5728\u4e00\u4e2aUpdate\u62a5\u6587\u4e2d\uff0c\u8fd9\u4e24\u4e2a\u5c5e\u6027\u7684\u5448\u73b0\u3002","title":"Cluster_List\u5c5e\u6027\u5bf9\u8def\u7531\u4f18\u9009\u7684\u5f71\u54cd"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_134","text":"\u6240\u6709\u8def\u7531\u5668\u7684Loopback0\u53e3\u5730\u5740\u4e3ax.x.x.x/32\uff0cx\u4e3a\u8bbe\u5907\u7f16\u53f7\u3002 AS123\u5185\u8dd1\u4e00\u4e2aOSPF\uff0c\u5ba3\u544a\u76f4\u8fde\u63a5\u53e3\uff0c\u4ee5\u53ca\u5404\u81ea\u7684Loopback0\u63a5\u53e3\u3002 R1\u3001R2\u3001R3\u6839\u636e\u4e0a\u56fe\u6240\u793a\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u90bb\u5c45\u5173\u7cfb\u57fa\u4e8eLoopback0\u63a5\u53e3\u5efa\u7acb\u3002 \u5728R1\u4e0a\u53d1\u5e0311.11.11.0/24\u8def\u7531\u8fdbBGP\uff0c\u521d\u59cb\u60c5\u51b5\u4e0bR2\u80fd\u591f\u5b66\u4e60\u8fd9\u6761BGP\u8def\u7531\uff0c\u4f46\u662fR3\u65e0\u6cd5\u5b66\u4e60\u5230\u3002\u5c06R2\u914d\u7f6e\u4e3aRR\uff0cR1\u4f5c\u4e3aR2\u7684Client\uff0c\u4f7f\u5f97R3\u80fd\u591f\u5b66\u4e60\u523011.11.11.0/24\u8def\u7531\u3002 R1\u7684\u914d\u7f6e\uff08\u7701\u7565OSPF\u53ca\u63a5\u53e3\u7684\u914d\u7f6e\uff09\uff1a R2\u7684\u914d\u7f6e\uff08\u7701\u7565OSPF\u53ca\u63a5\u53e3\u7684\u914d\u7f6e\uff09\uff1a R3\u7684\u914d\u7f6e\uff08\u7701\u7565OSPF\u53ca\u63a5\u53e3\u7684\u914d\u7f6e\uff09\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5373\u53ef\u5728R3\u4e0a\u9a8c\u8bc1\u4e00\u4e0b\uff0c\u67e5\u770b\u8def\u753111.11.11.0\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a \u53e6\u4e00\u4e2a\u9700\u8981\u5173\u6ce8\u7684\u914d\u7f6e\u662f\u914d\u7f6e\u8def\u7531\u53cd\u5c04\u7c07\u7684Cluster_ID\uff0c\u8fd9\u4e5f\u662f\u5728RR\u4e0a\u5b8c\u6210\u7684\u914d\u7f6e\u3002\u5f53RR\u53cd\u5c04\u4e00\u6761\u8def\u7531\u65f6\uff0c \u5982\u679c\u8be5\u8def\u7531\u4e0d\u5b58\u5728Originator_ID\u53caCluster_list\u5c5e\u6027\uff0c\u5219\u63d2\u5165\u8fd9\u4e24\u4e2a\u5c5e\u6027\uff0c\u540c\u65f6Cluster_list\u5c5e\u6027\u503c\u4e2d\u5199\u5165\u672c\u8def\u7531\u53cd\u5c04\u7c07\u7684Cluster_ID\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cCluster_ID\u4e3aRR\u7684Router-ID\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\uff0c\u53ef\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\uff1b\u5982 \u679cRR\u5728\u53cd\u5c04\u8def\u7531\u65f6\uff0c\u88ab\u53cd\u5c04\u8def\u7531\u4e2d\u5df2\u7ecf\u5b58\u5728Cluster_List\u5c5e\u6027\u4e86\uff0c\u90a3\u4e48RR\u5c06Cluster_ID\u63d2\u5165\u5230\u5df2\u6709\u7684 CLuster_List\u4e2d\u3002 BGP \u8054\u90a6","title":"\u8def\u7531\u53cd\u5c04\u5668\u7684\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp_10","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cAS345\u662f\u4e00\u4e2aTransit AS\uff0c\u4e5f\u5c31\u662f\u4e2d\u8f6cAS\uff0cR3-R4\uff0cR4-R5\u5404\u7ef4\u62a4\u4e00\u4e2aIBGP\u90bb\u5c45\u5173\u7cfb\u3002 \u7531\u4e8eIBGP\u6c34\u5e73\u5206\u5272\u89c4\u5219\u7684\u9650\u5236\uff0c\u4f7f\u5f97R4\u65e0\u6cd5\u5728\u5c06\u4eceR3\u5b66\u4e60\u5230\u7684IBGP\u8def\u7531\u518d\u66f4\u65b0\u7ed9\u81ea\u5df1\u7684\u53e6\u4e00\u4e2aIBGP\u90bb\u5c45 R5\u3002\u4e0a\u4e00\u5c0f\u8282\u5df2\u7ecf\u8ddf\u5927\u5bb6\u63a2\u8ba8\u8fc7\u201cBGP\u8def\u7531\u53cd\u5c04\u5668\u201d\uff0c\u8fd9\u91cc\u770b\u53e6\u4e00\u4e2a\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u6cd5\uff1aBGP\u8054\u90a6\u3002 \u901a\u8fc7\u5c06AS345\u8fdb\u884c\u91cd\u65b0\u8bbe\u8ba1\uff0c\u6211\u4eec\u5c06\u5176\u53d8\u6210\u4e00\u4e2a\u8054\u90a6AS\uff0c\u53ef\u4ee5\u5f62\u8c61\u7684\u628a\u5b83\u79f0\u4e3a\u201c\u5927AS\u201d\uff0c\u5728\u8fd9\u4e2a\u201c\u5927AS\u201d \u4e2d\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6765\u90e8\u7f72\u201c\u5c0fAS\u201d\uff0c\u4e5f\u5c31\u662f\u8054\u90a6\u6210\u5458AS\uff08Confederation Member AS\uff09\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002\u8fd9\u6837 \u4e00\u6765AS345\u5185\u7684BGP\u90bb\u5c45\u5173\u7cfb\u5c31\u53d1\u751f\u4e86\u53d8\u5316\uff0cR3-R4\uff0c\u5c5e\u4e8e\u6210\u5458AS64512\uff0c\u5b83\u4eec\u4e4b\u95f4\u7ef4\u62a4\u8054\u90a6\u7684IBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u800cR5\u5355\u72ec\u5904\u4e8e\u6210\u5458AS64513\uff0c\u5b83\u4e0eR4\u4e4b\u95f4\u7ef4\u62a4\u7684\u662f\u8054\u90a6EBGP\u90bb\u5c45\u5173\u7cfb\u3002\u6ce8\u610f\uff0c\u8054\u90a6EBGP\u90bb\u5c45\u5173\u7cfb\u4e0e\u5e38\u89c4\u7684EBGP\u90bb\u5c45\u5173\u7cfb\u662f\u6709\u6240\u4e0d\u540c\u7684\u3002\u90a3\u4e48\u65e2\u7136R4-R5\u4e4b\u95f4\u7684\u90bb\u5c45\u5173\u7cfb\u4e3a\u8054\u90a6EBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u5c31\u4e0d\u518d\u6709\u201cIBGP\u6c34\u5e73\u5206\u5272\u89c4\u5219\u201d\u7684\u9650\u5236\u4e86\uff0cR4\u4eceIBGP\u90bb\u5c45R3\u6536\u5230\u7684\u8def\u7531\uff0c\u5c31\u53ef\u4ee5\u4f20\u9012\u7ed9R5\u4e86\u3002","title":"BGP\u8054\u90a6\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_135","text":"\u5728\u8054\u90a6\u5185\u90e8\u4fdd\u7559\u8054\u90a6\u5916\u90e8\u8def\u7531\u7684NEXT_HOP\u5c5e\u6027\uff1b \u516c\u5e03\u7ed9\u8054\u90a6\u7684\u8def\u7531\u7684MED\u5c5e\u6027\u503c\u5728\u6574\u4e2a\u8054\u90a6\u8303\u56f4\u5185\u4e88\u4ee5\u4fdd\u7559\uff1b \u8def\u7531\u7684Local_Preference\u5c5e\u6027\u503c\u5728\u6574\u4e2a\u8054\u90a6\u8303\u56f4\u5185\u4e88\u4ee5\u4fdd\u7559\uff1b \u5728\u8054\u90a6\u8303\u56f4\u5185\uff0c\u5c06\u6210\u5458AS\u53f7\u538b\u5165AS_PATH\uff0c\u4f46\u4e0d\u516c\u5e03\u5230\u8054\u90a6\u5916\uff0c\u5e76\u4e14\u4f7f\u7528TYPE3\u30014\u7684AS_PATH\uff1b AS_PATH\u4e2d\u7684\u8054\u90a6\u6210\u5458AS\u53f7\u7528\u4e8e\u5728\u8054\u90a6\u5185\u90e8\u9632\u73af\uff1b\u8054\u90a6\u5185\u6210\u5458AS\u53f7\u4e0d\u53c2\u4e0eAS_PATH\u957f\u5ea6\u8ba1\u7b97\u3002\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u8054\u90a6\u5916\u90e8\u7684\u8bbe\u5907\u662f\u4e0d\u4f1a\u77e5\u9053\u8054\u90a6\u5185\u90e8\u7684\u6210\u5458AS\u7684\u5b58\u5728\u7684\u3002","title":"\u8def\u7531\u5728\u8054\u90a6\u5185\u4f20\u9012\u65f6\u7684\u8def\u5f84\u5c5e\u6027"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_136","text":"\u8bbe\u5907\u4e4b\u95f4\u7684\u4e92\u8054IP\u5730\u5740\u91c7\u752810.1.xy.0/24\u683c\u5f0f\uff0c\u5176\u4e2dxy\u4e3a\u8bbe\u5907\u7f16\u53f7\uff1b \u6240\u6709\u8def\u7531\u5668\u7684Loopback0\u63a5\u53e3\u5730\u5740\u4e3ax.x.x.x/32\uff0c\u5176\u4e2dx\u4e3a\u8bbe\u5907\u7f16\u53f7\uff1b AS345\u5185\u8dd1\u4e00\u4e2aOSPF\uff0c\u5ba3\u544a\u76f4\u8fde\u63a5\u53e3\uff0c\u4ee5\u53ca\u5404\u81ea\u7684Loopback0\u63a5\u53e3\uff1b \u8def\u7531\u5668\u6839\u636e\u62d3\u6251\u6240\u793a\u5efa\u7acbBGP\u90bb\u5c45\u5173\u7cfb\u3002\u5176\u4e2dR3-R4\u5efa\u7acb\u57fa\u4e8eLoopback0\u63a5\u53e3\u7684\u8054\u90a6IBGP\u90bb\u5c45\u5173\u7cfb\uff0c R4-R5\u5efa\u7acb\u57fa\u4e8eLoopback0\u63a5\u53e3\u7684\u8054\u90a6EBGP\u90bb\u5c45\u5173\u7cfb\uff1b \u5728R1\u4e0a\u53d1\u5e03100.0.1.0/24\u8def\u7531\u5230BGP\uff0c\u89c2\u5bdf\u8def\u7531\u5728\u8054\u90a6AS\u5185\u7684\u4f20\u9012\uff1b R3\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b: R4\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a R5\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a R1\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\u505a\u4e00\u4e0b\u67e5\u770b\uff1a BGP \u9009\u8def\u89c4\u5219\u8be6\u89e3","title":"\u8054\u90a6\u7684\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgp_11","text":"\u5728BGP\u7f51\u7edc\u8bbe\u8ba1\u4e2d\uff0c\u9488\u5bf9BGP\u8def\u7531\u7684\u5404\u79cd\u8def\u5f84\u5c5e\u6027\u7684\u64cd\u4f5c\u90fd\u5c06\u5f71\u54cd\u8def\u7531\u7684\u4f18\u9009\uff0c\u4ece\u800c\u5bf9\u7f51\u7edc\u7684\u6d41\u91cf\u4ea7\u751f\u5f71\u54cd\uff0c\u638c\u63e1BGP\u8def\u7531\u7684\u4f18\u9009\u89c4\u5219\u5341\u5206\u4e4b\u91cd\u8981\u3002 \u4e00\u53f0\u8def\u7531\u5668\u6709\u53ef\u80fd\u5b66\u4e60\u5230\u591a\u6761\u53bb\u5f80\u76f8\u540c\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\uff0cBGP\u4f1a\u5728\u8fd9\u4e9b\u8def\u7531\u4e2d\u9009\u62e9\u4e00\u6761\u6700\u4f18\u7684\u8def\u7531\u3002 BGP\u5b9a\u4e49\u4e86\u4e00\u6574\u5957\u8be6\u7ec6\u7684\u9009\u8def\u89c4\u5219\uff0c\u4f7f\u5f97\u8def\u7531\u5668\u80fd\u591f\u5728\u4efb\u4f55\u590d\u6742\u7684\u3001\u5197\u4f59\u7684\u7f51\u7edc\u73af\u5883\u4e0b\uff0c\u51b3\u7b56\u51fa\u4e00\u6761\u6700\u4f18\u7684\u8def\u7531\uff1a \u4f18\u9009\u5177\u6709\u6700\u5927Preferred_Value\u7684\u8def\u7531\uff1b \u4f18\u9009\u5177\u6709\u6700\u5927Local_Preference\u7684\u8def\u7531\uff1b \u4f9d\u6b21\u4f18\u9009\u624b\u52a8\u805a\u5408\u8def\u7531\u3001\u81ea\u52a8\u805a\u5408\u8def\u7531\u3001network\u547d\u4ee4\u5f15\u5165\u7684\u8def\u7531\u3001import-route\u547d\u4ee4\u5f15\u5165\u7684\u8def\u7531\u3001\u4ece\u5bf9\u7b49\u4f53\u5b66\u4e60\u7684\u8def\u7531\uff1b \u4f18\u9009AS_Path\u6700\u77ed\u7684\u8def\u7531\uff1b \u4f9d\u6b21\u4f18\u9009Origin\u7c7b\u578b\u4e3aIGP\u3001EGP\u3001Incomplete\u7684\u8def\u7531\uff1b \u4f18\u9009MED\u6700\u5c0f\u7684\u8def\u7531\uff1b EBGP\u8def\u7531\u4f18\u4e8eIBGP\u8def\u7531\uff1b \u4f18\u9009\u5230BGP\u4e0b\u4e00\u8df3\u7684IGP\u5ea6\u91cf\u503c\u6700\u5c0f\u7684\u8def\u7531\uff1b \u4f18\u9009Cluster_List\u6700\u77ed\u7684\u8def\u7531\uff1b \u4f18\u9009Router-ID\u6700\u5c0f\u7684BGP\u90bb\u5c45\u53d1\u6765\u7684\u8def\u7531\uff1b \u4f18\u9009peer\u5730\u5740\u6700\u5c0f\u7684\u90bb\u5c45\u53d1\u6765\u7684\u8def\u7531\u3002 BGP\u5728\u8fdb\u884c\u8def\u7531\u4f18\u9009\u65f6\uff0c\u6309\u7167\u5982\u4e0a\u89c4\u5219\uff0c\u4f9d\u5e8f\u8fdb\u884c\u5224\u65ad\u3002\u4f8b\u5982\uff0c\u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684 BGP\u8def\u7531\u65f6\uff0c\u62e5\u6709\u6700\u5927Preferred_Value\u503c\u7684\u8def\u7531\u5c06\u4f1a\u88ab\u4f18\u9009\uff0c\u5982\u679c\u8def\u7531\u7684Preferred_Value\u76f8\u7b49\uff0c\u5219\u8fdb\u5165\u4e0b\u4e00\u6761\u89c4\u5219\u8fdb\u884c\u6bd4\u8f83\uff0c\u5373\u4f18\u9009\u5177\u6709\u6700\u5927Local_Preference\u7684\u8def\u7531\uff0c\u5982\u679c\u8def\u7531\u7684Local_Preference\u76f8\u7b49\uff0c\u5219\u7ee7\u7eed\u8fdb\u5165\u4e0b\u4e00\u6761\u89c4\u5219\u8fdb\u884c\u6bd4\u8f83\uff0c\u76f4\u5230\u51b3\u7b56\u51fa\u6700\u4f18\u8def\u7531\u4e3a\u6b62\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u4e0a\u8ff0\u7f57\u5217\u7684\u53ea\u662f\u9009\u8def\u89c4\u5219\u4e2d\u6bd4\u8f83\u6709\u4ee3\u8868\u6027\u7684\u51e0\u6761\uff0c\u5e76\u4e0d\u662f\u5168\u90e8\u89c4\u5219\uff0c\u53e6\u5916\uff0c\u4e0d\u540c\u7684\u5382\u5546\u5728\u89c4\u5219\u7684\u5b9e\u73b0\u4e0a\u5b58\u5728\u4e00\u5b9a\u7684\u5dee\u5f02\uff0c\u800c\u540c\u4e00\u4e2a\u5382\u5546\u7684\u4e0d\u540c\u7cfb\u7edf\u8f6f\u4ef6\u7248\u672c\uff0c\u4e5f\u5b58\u5728\u5b9e\u73b0\u5dee\u5f02\u3002","title":"BGP\u8def\u7531\u4f18\u9009\u89c4\u5219"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_137","text":"","title":"\u5b9e\u9a8c\u73af\u5883\u4ecb\u7ecd"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_138","text":"IP\u5730\u5740\u89c4\u5212\u5982\u56fe\u6240\u793a\uff0c\u8bbe\u5907\u4e92\u8054IP\u91c7\u752810.1.xy.0/24\u7684\u7f16\u5740\uff0cx\u53cay\u4e3a\u8bbe\u5907\u7f16\u53f7\u3002\u8fd9\u79cd\u7f16\u5740\u65b9\u5f0f\u80fd\u591f\u5728\u5b9e\u9a8c\u8fc7\u7a0b\u4e2d\u66f4\u597d\u5730\u89c2\u5bdf\u73b0\u8c61\u3002\u540c\u65f6\u6240\u6709\u7684\u8bbe\u5907\u914d\u7f6eLoopback0\u63a5\u53e3\uff0cIP\u4e3ax.x.x.x/32\uff0c\u5176\u4e2dx\u4e3a\u8bbe\u5907\u7f16\u53f7\u3002\u8fd9\u4e2a\u63a5\u53e3\u5730\u5740\u53ea\u4f5c\u4e3a\u8bbe\u5907Router-ID\u4ee5\u53ca\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\u65f6\u4f7f\u7528\u3002 AS345\u4e2d\uff0cR3\u3001R4\u3001R5\u8fd0\u884cOSPF\uff0c\u5728OSPF\u4e2d\uff0c\u5404\u8bbe\u5907\u5ba3\u544a\u81ea\u5df1\u7684\u76f4\u8fde\u63a5\u53e3\u4ee5\u53caLoopback0\u63a5\u53e3\u6240\u5728\u7f51\u6bb5\uff0c\u4f46R3\u4e0d\u5728\u63a5\u53e3GE0/0/0\u53e3\u4e0a\u6fc0\u6d3bOSPF\u3001R5\u4e0d\u5728GE0/0/1\u4e0a\u6fc0\u6d3bOSPF\uff0c\u8fd9\u4e24\u4e2a\u76f4\u8fde\u94fe\u8def\u89c6\u4e3aAS \u5916\u7684\u94fe\u8def\uff0c\u4e0d\u5c06\u5176\u6240\u5728\u7f51\u6bb5\u5f15\u5165OSPF\u4e2d\u3002 \u5404\u8bbe\u5907\u7684BGP\u8fde\u63a5\u60c5\u51b5\u5982\u4e0b\uff1a \u5176\u4e2d\uff0cIBGP\u90bb\u5c45\u5173\u7cfb\u7684\u5efa\u7acb\u57fa\u4e8eLoopback0\u53e3\uff0cEBGP\u90bb\u5c45\u5173\u7cfb\u7684\u5efa\u7acb\u57fa\u4e8e\u76f4\u8fde\u7269\u7406\u63a5\u53e3\u3002","title":"\u62d3\u6251\u53ca\u63cf\u8ff0\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_139","text":"\u6ce8\uff1a\u4ee5\u4e0b\u7f57\u5217\u7684\u8bbe\u5907\u914d\u7f6e\u4e2d\uff0c\u7701\u7565\u4e86\u8bbe\u5907\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\u3002","title":"\u521d\u59cb\u5316\u914d\u7f6e\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r1_2","text":"","title":"R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r2_1","text":"","title":"R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r3_1","text":"","title":"R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r4","text":"","title":"R4\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r5","text":"","title":"R5\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_140","text":"","title":"\u89c4\u5219\u8be6\u89e3\u53ca\u5b9e\u9a8c\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#preferred_value","text":"","title":"\u4f18\u9009\u5177\u6709\u6700\u5927Preferred_Value\u7684\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_141","text":"\u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u62e5\u6709\u6700\u5927Preferred_Value\u503c\u7684\u8def\u7531\u5c06\u4f1a\u88ab\u4f18\u9009\u3002","title":"\u89c4\u5219\u63cf\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#preferred_value_1","text":"\u534e\u4e3a\u79c1\u6709\u7684\u8def\u5f84\u5c5e\u6027\uff0c\u8def\u7531\u7684Preferred_value\u53ef\u4ee5\u7406\u89e3\u4e3a\u8be5\u8def\u7531\u5728\u672c\u8def\u7531\u5668\u89c6\u89d2\u7684\u6743\u91cd\u503c\u3002 \u8303\u56f40-65535\uff0c\u9ed8\u8ba4\u503c\u4e3a0\uff0c\u503c\u8d8a\u5927\uff0c\u5219\u8def\u7531\u8d8a\u4f18\u3002 \u4f5c\u7528\u8303\u56f4\u662f\u672c\u8bbe\u5907\uff08\u4e0d\u4f20\u9012\uff09\uff0c\u8be5\u503c\u4e0d\u4f1a\u88ab\u5305\u542b\u5728update\u62a5\u6587\u4e2d\uff0c\u4e0d\u4f1a\u4f20\u9012\u7ed9\u4efb\u4f55BGP\u90bb\u5c45\u3002","title":"Preferred_Value\u5c5e\u6027\u56de\u987e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_142","text":"\u73b0\u5728\u6211\u4eec\u5728R1\u548cR2\u4e0a\u914d\u7f6e\u4e00\u4e2aLoopback1\u63a5\u53e3\uff0c\u914d\u7f6eIP\u5730\u5740\uff1a100.0.1.1/24\uff0c\u7136\u540e\u5c06\u8fd9\u6761\u8def\u7531\u53d1\u5e03\u5230 BGP\uff08\u8fd9\u90e8\u5206\u914d\u7f6e\u4e0d\u518d\u8d58\u8ff0\uff09\u3002\u5982\u6b64\u4e00\u6765\uff0cR1\u5c06\u66f4\u65b0\u8def\u7531100.0.1.0/24\u7ed9R3\uff0c\u800cR3\u4ece\u81ea\u5df1\u7684EBGP\u90bb\u5c45R1\u5b66\u4e60\u5230\u8fd9\u6761\u8def\u7531\u540e\uff0c\u4f1a\u66f4\u65b0\u7ed9R4\uff1b\u540c\u7406\uff0cR5\u4e5f\u4f1a\u5c06\u5b66\u4e60\u81eaEBGP\u90bb\u5c45R2\u7684\u8def\u7531100.0.1.0/24\u66f4\u65b0\u7ed9R4\uff0c\u90a3\u4e48\u5bf9\u4e8eR4\u6765\u8bf4\u5c31\u4eceR3\u53caR5\u90fd\u5b66\u4e60\u5230\u4e86\u53bb\u5f80100.0.1.0/24\u7684\u8def\u7531\uff0cR4\u5c06\u5982\u4f55\u4f18\u9009\uff1f \u73b0\u5728\uff0c\u6211\u4eec\u5e0c\u671b\u901a\u8fc7\u64cd\u63a7\u8def\u7531\u7684Preferred_Value\u503c\u6765\u8ba9R4\u4f18\u9009R5\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\u3002 \u5728R4\u914d\u7f6e\u4e0a\u8ff0\u547d\u4ee4\uff0c\u5c06R5\u4f20\u9012\u8fc7\u6765\u7684\u6240\u6709\u8def\u7531\u7684Preferred_Value\uff08\u5728\u6536\u5230\u4e4b\u540e\uff09\u90fd\u8bbe\u7f6e\u4e3a10\uff0c\u800cR3 \u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\u7684Preferred_Value\u5219\u5728\u672c\u5730\u8d4b\u4e88\u9ed8\u8ba4\u503c0\uff0c\u8fd9\u4e48\u4e00\u5bf9\u6bd4\uff0c\u5f53\u7136\u662f\u4f18\u9009R5\u6240\u901a\u544a\u7684\u8def\u7531\u4e86\u3002\u4f46\u662f\u8fd9\u4e2a\u65b9\u6cd5\u201c\u9897\u7c92\u5ea6\u201d\u592a\u5927\uff0c\u5982\u679c\u6211\u4eec\u53ea\u662f\u60f3\u9488\u5bf9\u7279\u5b9a\u7684\u8def\u7531\u8bbe\u7f6ePreferred_Value\u5462\uff1f\u4f8b\u5982\uff1a \u5728R1\u53caR2\u4e0a\u65b0\u589e100.0.2.0/24\u7f51\u6bb5\u5e76\u5c06\u5176\u53d1\u5e03\u5230BGP\u3002R1\u3001R2\u7684\u65b0\u589e\u914d\u7f6e\u4e0d\u518d\u8d58\u8ff0\u3002\u90a3\u4e48\u5b9e\u73b0\u4e0a\u56fe\u63cf\u8ff0\u7684\u9700\u6c42\uff0cR4\u7684\u914d\u7f6e\u53ef\u4ee5\u53d8\u66f4\u6210\uff1a","title":"\u89c4\u5219\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#route-policy-rp1-permit-node-20route-policy-rp2-permit-node-20","text":"\u56e0\u4e3aroute-policy\u5728\u672b\u5c3e\u9690\u542bdeny any\uff0c\u56e0\u6b64\u5982\u679c\u8fd9\u4e24\u4e2anode\u4e0d\u52a0\u7684\u8bdd\uff0c\u76f8\u5f53\u4e8e\u662f\u53ea\u653e\u884cnode 10\u4e2d\u5141\u8bb8\u7684\u8def\u7531\u3002 Origin : i - IGP, e - EGP, ? - incomplete Total Number of Routes: 4 Network NextHop MED LocPrf PrefVal Path/Ogn *>i 100.0.1.0/24 3.3.3.3 0 100 10 100i * i 5.5.5.5 0 100 0 200i *>i 100.0.2.0/24 5.5.5.5 0 100 10 200i * i 3.3.3.3 0 100 0 100i \u6211\u4eec\u770b\u5230\uff0c\u5728R4\u4e0a\uff0c\u5bf9\u4e8e100.0.1.0/24\u8def\u7531\uff0c\u4f18\u9009\u7684\u662fR3\u4f20\u9012\u8fc7\u6765\u7684\uff1b\u5bf9\u4e8e100.0.2.0/24\u7684\u8def\u7531\uff0c\u4f18\u9009 \u7684\u662fR5\u4f20\u9012\u8fc7\u6765\u7684\u3002\u8fd9\u5c31\u5b9e\u73b0\u4e86\u6211\u4eec\u7684\u9700\u6c42\u3002\u4e8b\u5b9e\u4e0a\u8fd8\u53ef\u4ee5\u8fdb\u4e00\u6b65\u67e5\u770b\u8def\u7531\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4f8b\u5982\u67e5\u770b 100.0.1.0/24\u8fd9\u6761\u8def\u7531\uff1a OK\uff0c\u5b8c\u6210\u4e86\u89c4\u5219\u4e00\u7684\u6d4b\u8bd5\u540e\uff0c\u6211\u4eec\u5c06\u7528\u4e8e\u9a8c\u8bc1\u672c\u6761\u89c4\u5219\u7684\u76f8\u5173\u914d\u7f6e\u5220\u9664\uff0c\u6062\u590d\u6210\u521d\u59cb\u5316\u914d\u7f6e\u3002\u7ee7\u7eed\u770b \u4e0b\u4e00\u6761\u89c4\u5219\u3002","title":"\u6ce8\u610f\uff1a\u4e0a\u8ff0\u914d\u7f6e\u4e2droute-policy RP1 permit node 20\u53caroute-policy RP2 permit node 20\u5fc5\u987b\u914d\u7f6e\uff0c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#local_preference","text":"","title":"\u4f18\u9009\u5177\u6709\u6700\u5927Local_Preference\u7684\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_143","text":"\u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u62e5\u6709\u6700\u5927Preferred_Value\u503c\u7684\u8def\u7531\u5c06\u4f1a\u88ab\u4f18\u9009\u3002\u5982\u679c\u8def\u7531\u7684Preferred_Value \u503c\u76f8\u7b49\uff0c \u5219\u6bd4 \u8f83\u8def\u7531\u7684Local_Preference \u503c\uff0c\u4f18\u9009\u5177\u6709\u6700\u5927 Local_Preference\u503c\u7684\u8def\u7531\u3002","title":"\u89c4\u5219\u63cf\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#local_preference_1","text":"\u516c\u8ba4\u81ea\u51b3\u5c5e\u6027\uff0c\u503c\u8d8a\u5927\u5219\u8def\u7531\u8d8a\u4f18\u3002 Local_Preference\u53ea\u80fd\u5728IBGP Peer\u4e4b\u95f4\u4f20\u9012\uff0c\u4e0d\u80fd\u5728EBGP Peer\u4e4b\u95f4\u4f20\u9012\u3002 \u672c\u5730\u59cb\u53d1\u7684\u8def\u7531\u9ed8\u8ba4Local_Preference\u4e3a100\u3002\u53ef\u7528**default local-preference ?** \u547d\u4ee4\u4fee\u6539\u9ed8\u8ba4\u503c\u3002","title":"Local_Preference\u5c5e\u6027\u56de\u987e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_144","text":"\u73b0\u5728\u5b9e\u9a8c\u6062\u590d\u6210\u521d\u59cb\u5316\u73af\u5883\uff0c\u5728R1\u53caR2\u4e0a\u90fd\u914d\u7f6eLoopback1\u53e3\uff0cIP\u5730\u5740\u4e3a100.0.1.1/24\uff0cR1\u53caR2\u90fd\u5c06\u5230\u8fbe100.0.1.0/24\u7684\u8def\u7531\u53d1\u5e03\u5230BGP\u3002 \u6211\u4eec\u8981\u901a\u8fc7\u64cd\u63a7Local_Preference\u8ba9R4\u4f18\u9009R3\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u8def\u7531\u3002\u53ef\u4ee5\u5728R3\u4e0a\u5bf9R4\u505a export\u65b9\u5411\u7684\u7b56\u7565\uff0c\u4fee\u6539\u8def\u7531\u7684Local_Preference\u503c\uff0c\u5c06\u5176\u8bbe\u7f6e\u4e3a200\uff1b\u800cR5\u8fd9\u8fb9\u5219\u4fdd\u6301\u9ed8\u8ba4\uff0c\u4e5f\u5c31\u662f Local_Preference=100\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u5728R4\u4e0a\uff0c\u5230\u8fbe100.0.1.0/24\u7684\u4e24\u6761BGP\u8def\u5f84\uff0c\u9996\u5148Preferred_Value \u76f8\u7b49\uff0c\u7136\u540e\u7ee7\u7eed\u6bd4\u8f83Local_Preference\uff0c\u4f18\u9009\u5927\u7684\uff0c\u56e0\u6b64\u6765\u81eaR3\u7684\u8def\u7531\u88ab\u4f18\u9009\u3002 R3\u7684\u914d\u7f6e\u53d8\u66f4\u5982\u4e0b\uff1a \u5728R4\u4e0a\u9a8c\u8bc1\u4e00\u4e0b\uff1a \u5b8c\u6210\u4e86\u672c\u89c4\u5219\u7684\u9a8c\u8bc1\u540e\uff0c\u6211\u4eec\u5c06\u7528\u4e8e\u9a8c\u8bc1\u672c\u6761\u89c4\u5219\u7684\u76f8\u5173\u914d\u7f6e\u5220\u9664\uff0c\u6062\u590d\u6210\u521d\u59cb\u5316\u914d\u7f6e\u3002\u7ee7\u7eed\u770b\u4e0b\u4e00\u6761\u89c4\u5219\u3002","title":"\u89c4\u5219\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_145","text":"\u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP \u8def\u7531\u65f6\uff0c\u5982\u679c\u8def\u7531\u7684Preferred_Value \u503c\u76f8\u7b49\uff0c \u4e14 Local_Preference\u503c\u4e5f\u76f8\u7b49\uff0c\u90a3\u4e48**\u4f9d\u6b21\u4f18\u9009\u624b\u52a8\u805a\u5408\u8def\u7531\u3001\u81ea\u52a8\u805a\u5408\u8def\u7531\u3001network\u547d\u4ee4\u5f15\u5165\u7684\u8def\u7531\u3001import-**","title":"\u4f18\u9009\u8d77\u6e90\u4e8e\u672c\u5730\u7684\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#route","text":"\u672c\u6761\u89c4\u5219\u7565\u8fc7\u4e0d\u505a\u9a8c\u8bc1\u3002","title":"route\u547d\u4ee4\u5f15\u5165\u7684\u8def\u7531\u3001\u4ece\u5bf9\u7b49\u4f53\u5b66\u4e60\u7684\u8def\u7531\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#as_path_3","text":"","title":"\u4f18\u9009AS_PATH\u6700\u77ed\u7684\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_146","text":"\u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c \u5982\u679c\u8def\u7531\u7684Preferred_Value\u5c5e\u6027\u503c\u3001 Local_Preference\u5c5e\u6027\u503c\u90fd\u76f8\u7b49\uff0c\u5e76\u4e14\u8fd9\u4e9b\u8def\u7531\u90fd\u662f\u5b66\u4e60\u81ea\u5176\u5b83\u90bb\u5c45\u7684\uff0c\u90a3\u4e48AS_PATH\u6700\u77ed\u7684\u8def\u7531\u5c06\u88ab\u4f18\u9009\u3002","title":"\u89c4\u5219\u63cf\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_147","text":"\u73b0\u5728\u5b9e\u9a8c\u73af\u5883\u6062\u590d\u6210\u521d\u59cb\u5316\u73af\u5883\uff0c\u540c\u6837\u8ba9R1\u53caR2\u5f15\u5165100.0.1.0/24\u8def\u7531\u3002\u6211\u4eec\u8981\u901a\u8fc7\u64cd\u63a7AS_PATH\u5c5e\u6027\u8ba9R4\u4f18\u9009R5\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u8def\u7531\u3002\u90a3\u4e48\u53ef\u4ee5\u5728R3\u4e0a\u5bf9R1\u505aimport\u65b9\u5411\u7684\u7b56\u7565\uff0c\u5728\u539f\u6709 AS_PATH\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e00\u4e2a100\u7684AS\u53f7\uff0c\u4f7f\u5f97\u8def\u7531\u7684AS_PATH\u957f\u5ea6\u52a0\u957f\u4e00\u4e2a\u5355\u4f4d\u3002\u5982\u6b64\u4e00\u6765R4\u5c06\u4f18\u9009R5\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u8def\u7531\u3002 R3\u7684\u914d\u7f6e\u53d8\u66f4\u5982\u4e0b: \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5728R4\u4e0a\u9a8c\u8bc1\u4e00\u4e0b\uff1a [R4]display bgp routing-table BGP Local router ID is 4.4.4.4 Status codes: * - valid, > - best, d - damped, h - history, i - internal, s - suppressed, S - Stale Origin : i - IGP, e - EGP, ? - incomplete Total Number of Routes: 2 Network NextHop MED LocPrf PrefVal Path/Ogn *>i 100.0.1.0/24 5.5.5.5 0 100 0 200i * i 3.3.3.3 0 100 0 100 100i \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cR4\u4f18\u9009\u4e86R5\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u8def\u7531\u3002\u5f53\u7136\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u67e5\u770b\u8def\u7531\u7684\u8be6\u7ec6 \u4fe1\u606f\uff1a \u53e6\u5916\uff0c\u4f7f\u7528route-policy\u6765\u4fee\u6539BGP\u8def\u7531\u7684AS_PATH\u65f6\uff0c\u9700\u5173\u6ce8\u5982\u4e0b\u547d\u4ee4\uff1a \u518d\u6709\uff0c\u6267\u884c**bestroute as-path-ignore**\u547d\u4ee4\u540e\uff0cBGP\u5728\u6267\u884c\u9009\u8def\u65f6\uff0c\u5c06\u5ffd\u7565AS_PATH\u7684\u6bd4\u8f83\uff0c\u8be5\u547d\u4ee4 \u9700\u614e\u7528\u3002\u503c\u5f97\u5f3a\u8c03\u7684\u662f\uff1aBGP\u7684\u8def\u7531\u9632\u73af\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f9d\u8d56\u4e8eAS_PATH\uff0c\u56e0\u6b64\u4efb\u4f55\u5bf9AS_PATH\u7684\u7b56\u7565\u5728\u5b9e\u65bd\u7684\u65f6\u5019\u90fd\u5e94\u8be5\u8003\u8651\u5468\u5168\u3002","title":"\u89c4\u5219\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_148","text":"\u89c4\u5219\u8865\u5145\uff1aAS_SET\u7684\u957f\u5ea6\u4e3a1\uff0c\u65e0\u8bbaAS_SET\u4e2d\u5305\u62ec\u591a\u5c11AS\u53f7\uff0c\u90fd\u5c06\u7b97\u4f5c1\u4e2aAS\u53f7\u3002","title":"\u89c4\u5219\u8865\u5145\u4e00"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_149","text":"\u89c4\u5219\u8865\u5145\uff1aAS_CONFED_SEQUENCE\u548cAS_CONFED_SET\u957f\u5ea6\u4e0d\u505a\u8ba1\u7b97\u4f9d\u636e\u3002 R1\u5c06\u81ea\u5df1\u7684\u76f4\u8fde\u8def\u753110.0/24\u53d1\u5e03\u5230BGP\u3002R1\u4f1a\u5c0610.0/24\u7684\u8def\u7531\u901a\u8fc7BGP\u66f4\u65b0\u7ed9R4\uff0c\u518d\u7531R4\u5c06\u8def\u7531\u4f20 \u9012\u7ed9R5\uff0c\u6b64\u65f6\u8def\u7531\u7684AS_PATH\u662f\uff1a\u201c\uff0864514\uff09100\u201d\uff0c\u6b64\u5904AS_PATH\u957f\u5ea6\u4e3a1 \uff1b\u53e6\u4e00\u65b9\u9762R1\u4e5f\u4f1a\u5c06\u8def\u7531\u4f20\u9012\u7ed9R2\uff0cR2\u518d\u4f20\u7ed9R3\uff0c\u6700\u540eR3\u5c06\u8def\u7531\u4f20\u7ed9R5\uff0c\u8def\u7531\u4f20\u9012\u7ed9R5\u65f6AS_PATH\u662f\uff1a\u201c300 200 100\u201d\uff0c\u6b64\u5904AS_PATH\u957f\u5ea6\u4e3a3\u3002\u5728R5\u4e0a\u89c2\u5bdf\u5230\u7684\u73b0\u8c61\u662f\uff0c\u5b83\u4f18\u9009R4\u66f4\u65b0\u8fc7\u6765\u7684\u8fd9\u676110.0/24\uff0c\u8fd9\u662f\u56e0\u4e3a\u8be5\u6761\u8def\u7531\u7684AS_PATH\u66f4\u77ed\u3002 \u5728\u4e0a\u4e2a\u73af\u5883\u53ca\u914d\u7f6e\u7684\u57fa\u7840\u4e4b\u4e0a\uff0c\u5728R1\u4e0a\u914d\u7f6eroute-policy\uff0c\u5c0610.0/24\u8def\u7531\u7684AS_PATH\u589e\u52a0\u4e24\u4e2a100\u7684 AS\u53f7\uff0c\u4e5f\u5c31\u662f\u63d2\u5165\u201c100 100 \u201d\u5e76\u4e14\u5c06\u8be5route-policy\u5bf9R4\u751f\u6548\uff08export\u65b9\u5411\uff09\u3002\u5982\u6b64\u4e00\u6765\uff0cR4\u6536\u5230\u7684 10.0/24\u7684BGP\u8def\u7531\uff0cAS_PATH\u4e3a\u201c100 100 100\u201d\uff0c\u800c\u5f53\u5b83\u5c06\u8def\u7531\u53d1\u9001\u7ed9\u8054\u90a6EBGP\u90bb\u5c45R5\u65f6\uff0c\u8def\u7531\u7684AS_PATH\u53d8\u6210\u201c(64514) 100 100 100\u201d\uff0c\u6b64\u65f6AS_PATH\u7684\u957f\u5ea6\u4e3a3\uff0c\u5373\u8054\u90a6\u7684AS\u53f7\u662f\u4e0d\u505a\u957f\u5ea6\u8ba1\u7b97\u7684\u3002 \u53e6\u4e00\u8fb9R3\u4f20\u9012\u8fc7\u6765\u768410.0/24\u7684BGP\u8def\u7531\uff0cAS_PATH\u957f\u5ea6\u8fd8\u662f3\uff0c\u4e24\u8fb9\u7684AS_PATH\u957f\u5ea6\u76f8\u7b49\uff0c\u56e0\u6b64\u6bd4 AS_PATH\u662f\u6bd4\u4e0d\u51fa\u6765\u4e86\uff0c\u53ea\u80fd\u5f80\u540e\u9762\u7684\u89c4\u5219\u7ee7\u7eedPK\u3002","title":"\u89c4\u5219\u8865\u5145\u4e8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#originigpegpincomplete","text":"","title":"\u4f9d\u6b21\u4f18\u9009Origin\u7c7b\u578b\u4e3aIGP\u3001EGP\u3001Incomplete\u7684\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_150","text":"\u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u4f9d\u6b21\u4f18\u9009Origin\u5c5e\u6027\u4e3aIGP\u3001EGP\u3001Incomplete\u7684\u8def\u7531\u3002","title":"\u89c4\u5219\u63cf\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_151","text":"\u73b0\u5728\uff0c\u7ee7\u7eed\u5c06\u5b9e\u9a8c\u73af\u5883\u6062\u590d\u6210\u521d\u59cb\u5316\u72b6\u6001\u3002\u5728\u8fd9\u4e2a\u89c4\u5219\u7684\u9a8c\u8bc1\u4e2d\uff0c\u5728R1\u4e0a\uff0c\u6539\u7528**import-route**\u7684\u65b9\u5f0f\u6765\u6ce8\u5165100.0.1.0/24\u8def\u7531\uff0cR2\u5219\u4ecd\u4fdd\u6301**network**\u7684\u65b9\u5f0f\u6ce8\u5165\u3002 \u90a3\u4e48R1\u7684\u914d\u7f6e\u53d8\u66f4\u5982\u4e0b\uff1a \u6216\u8005\u4f7f\u7528route-policy\u6765\u4fee\u6539origin\uff0c\u540c\u6837\u662f\u4fee\u6539R1\u7684\u914d\u7f6e\uff1a \u8fd9\u6837\u4e00\u6765R1\u5f15\u5165\u7684100.0.1.0/24\u8def\u7531\uff0corigin\u5c5e\u6027\u503c\u5c31\u4e3aincomplete\uff0c\u800cR2\u5f15\u5165\u7684100.0.1.0/24\u7684\u8def\u7531 \uff08\u4f7f\u7528**network**\u547d\u4ee4\u53d1\u5e03\uff09\uff0corigin\u5c5e\u6027\u503c\u4e3aIGP\u3002\u5b8c\u6210\u914d\u7f6e\u540e\u9a8c\u8bc1\u4e00\u4e0b\uff1a [R4] display bgp routing-table BGP Local router ID is 4.4.4.4 Status codes: * - valid, > - best, d - damped, h - history, i - internal, s - suppressed, S - Stale Origin : i - IGP, e - EGP, ? - incomplete Total Number of Routes: 2 Network NextHop MED LocPrf PrefVal Path/Ogn *>i 100.0.1.0/24 5.5.5.5 0 100 0 200i * i 3.3.3.3 0 100 0 100**?** \u5f53\u7136\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u770b\u8be6\u7ec6\u4fe1\u606f\uff1a","title":"\u89c4\u5219\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#med_4","text":"","title":"\u4f18\u9009MED\u6700\u5c0f\u7684\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_152","text":"\u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u6bd4\u8f83\u8fd9\u4e9b\u8def\u7531\u7684 MED\uff0c\u4f18\u9009\u62e5\u6709\u6700\u5c0fMED\u503c\u7684\u8def\u7531\u3002","title":"\u89c4\u5219\u63cf\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_153","text":"MED\u5c5e\u6027\u4e3a\u53ef\u9009\u975e\u4f20\u9012\u5c5e\u6027\uff0c\u503c\u8d8a\u5c0f\u5219\u8def\u7531\u8d8a\u4f18\uff0c\u4e00\u822c\u7528\u4e8eAS\u4e4b\u95f4\u5f71\u54cdBGP\u8def\u7531\u51b3\u7b56\u3002","title":"\u5c5e\u6027\u56de\u987e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_154","text":"BGP\u53ea\u6bd4\u8f83\u6765\u81ea\u540c\u4e00\u4e2a\u76f8\u90bbAS\u7684\u8def\u7531\u7684MED\u503c\u3002 \u5982\u679c\u8def\u7531\u6ca1\u6709MED\u5c5e\u6027\uff0cBGP\u9009\u8def\u65f6\u5c06\u8be5\u8def\u7531\u7684MED\u503c\u6309\u7f3a\u7701\u503c0\u6765\u5904\u7406\uff1b\u800c\u6267\u884c**bestroute med- none-as-maximum**\u547d\u4ee4\u540e\uff0cBGP\u9009\u8def\u65f6\u5c06\u8be5\u8def\u7531\u7684MED\u503c\u6309\u6700\u5927\u503c4294967295\u6765\u5904\u7406\u3002 \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u4e0d\u5141\u8bb8\u6bd4\u8f83\u6765\u81ea\u4e0d\u540cAS\u90bb\u5c45\u7684\u8def\u7531\u8def\u5f84\u7684MED\u5c5e\u6027\u503c\u3002\u800c\u6267\u884c**compare-different- as-med**\u547d\u4ee4\u540e\uff0cBGP\u5c06\u5f3a\u5236\u6bd4\u8f83\u6765\u81ea\u4e0d\u540c\u81ea\u6cbb\u7cfb\u7edf\u4e2d\u7684\u90bb\u5c45\u7684\u8def\u7531\u7684MED\u503c\u3002\u9664\u975e\u80fd\u591f\u786e\u8ba4\u4e0d\u540c\u7684\u81ea\u6cbb\u7cfb\u7edf\u91c7\u7528\u4e86\u540c\u6837\u7684IGP\u548c\u8def\u7531\u9009\u62e9\u65b9\u5f0f\uff0c\u5426\u5219\u4e0d\u8981\u4f7f\u7528**compare-different-as-med**\u547d\u4ee4\uff08\u53ef\u80fd\u4ea7\u751f\u73af\u8def\uff09\u3002","title":"\u89c4\u5219\u8be6\u89e3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_155","text":"\u5728\u672c\u89c4\u5219\u7684\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u5c06\u73af\u5883\u505a\u4e86\u5c0f\u5c0f\u7684\u53d8\u66f4\uff0cR2\u4e0d\u518d\u5c5e\u4e8eAS200\u4e86\uff0c\u6211\u4eec\u628a\u4ed6\u89c4\u5212\u5230AS100\uff0c\u81f3\u4e8e\u4e3a\u4ec0\u4e48\uff0c\u8fd9\u91cc\u76f8\u4fe1\u5927\u5bb6\u5df2\u7ecf\u90fd\u60f3\u5230\u4e86\u3002R1\u3001R2\u90fd\u5411BGP\u53d1\u5e03\u8def\u7531100.0.1.0/24\uff0c\u6700\u7ec8R4\u5c06\u5b66\u4e60\u5230\u4e24\u6761\u8def\u7531\u66f4\u65b0\u3002\u73b0\u5728\u6211\u4eec\u7684\u9700\u6c42\u662f\uff0c\u901a\u8fc7\u64cd\u63a7MED\u503c\uff0c\u8ba9R4\u4f18\u9009\u4eceR5\u66f4\u65b0\u8fc7\u6765\u7684\u8def\u7531\u3002 \u65b9\u6cd5\u5f88\u7b80\u5355\uff0cR5\u5c06100.0.1.0/24\u66f4\u65b0\u7ed9R4\u65f6\uff0cMED\u4e3a\u9ed8\u8ba4\u503c0\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u8981\u5728R1\u66f4\u65b0\u8def\u7531\u7ed9R3\u65f6\uff0c \u5c06MED\u8bbe\u7f6e\u4e3a999\uff0c\u8fd9\u6761\u8def\u7531\u518d\u7ecf\u7531R3\u66f4\u65b0\u7ed9R4\u65f6\uff0c\u4e5f\u4f1a\u4e00\u5e76\u5c06MED\u643a\u5e26\uff0c\u6700\u7ec8\uff0cR4\u5c06\u4f18\u9009MED\u5c0f\u7684\u8def\u5f84\uff0c\u4e5f\u5c31\u662fR5\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\u3002 R2\u53caR5\u7684\u914d\u7f6e\u53d8\u66f4\u8fd9\u91cc\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\u3002\u91cd\u70b9\u770bR1\u7684\u914d\u7f6e\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u4ecd\u7136\u5728R4\u4e0a\u9a8c\u8bc1\u4e00\u4e0b\uff1a \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cR4\u4f18\u9009\u4e86R5\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u7684\u8def\u7531\u3002\u56e0\u4e3a\u4eceR3\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531MED \u4e3a999\uff0c\u503c\u66f4\u5927\u3002","title":"\u89c4\u5219\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ibgpebgp","text":"","title":"\u76f8\u5bf9\u4e8eIBGP\u8def\u7531\uff0c\u4f18\u9009EBGP\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_156","text":"\u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0cEBGP\u8def\u7531\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8eIBGP\u8def\u7531\u3002","title":"\u89c4\u5219\u63cf\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_157","text":"\u672c\u89c4\u5219\u7684\u9a8c\u8bc1\u73af\u5883\u8981\u53d1\u751f\u4e00\u4e9b\u6539\u53d8\uff0c\u6211\u4eec\u5728R3-R5\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761IBGP\u7684\u90bb\u5c45\u5173\u7cfb\u3002\u8fd9\u6837\u4e00\u6765R3\u4f1a\u5c06\u81ea\u5df1\u4eceR1\u5b66\u4e60\u5230\u7684BGP\u8def\u7531\u4f20\u9012\u7ed9IBGP\u90bb\u5c45R5\uff0c\u800cR5\u53c8\u4f1a\u4ece\u53e6\u4e00\u4fa7\u5b66\u4e60\u5230R2\u66f4\u65b0\u8fc7\u6765\u7684100.0.1.0/24 \u8def\u7531\uff0c\u90a3\u4e48R5\u5c06\u5982\u4f55\u4f18\u9009\u5462\uff1f \u53d8\u66f4\u7684\u914d\u7f6e\u8fd9\u91cc\u5c31\u4e0d\u5728\u8d58\u8ff0\u4e86\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u5c0f\u7ec6\u8282\u8981\u6ce8\u610f\uff0c\u90a3\u5c31\u662fR3\u522b\u5fd8\u4e86\u8981\u914d\u7f6e\u4e00\u6761**peer 5.5.5.5 next-hop-local**\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u5728R5\u4e0a\u89c2\u5bdf\u4e00\u4e0b\uff1a \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230R5\u4f18\u9009\u4e86\u6765\u81eaR2\u7684\u8def\u7531\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u67e5\u770b\u8def\u7531\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a","title":"\u89c4\u5219\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#bgpigp","text":"","title":"\u4f18\u9009\u5230BGP\u4e0b\u4e00\u8df3IGP\u5ea6\u91cf\u503c\u6700\u5c0f\u7684\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_158","text":"\u5f53\u8def\u7531\u5668\u5b66\u4e60\u5230\u591a\u6761\u5230\u8fbe\u540c\u4e00\u4e2a\u76ee\u7684\u7f51\u7edc\u7684BGP\u8def\u7531\u65f6\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0cBGP\u5c06\u6bd4\u8f83\u8def\u7531\u5668\u5230\u8fd9\u4e9b\u8def\u7531\u7684Next_hop\u7684IGP\u5ea6\u91cf\u503c\uff0c\u4f18\u9009\u5230Next_hop\u5ea6\u91cf\u503c\u6700\u5c0f\u7684BGP\u8def\u7531\u3002","title":"\u89c4\u5219\u63cf\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_159","text":"\u4ecd\u7136\u5c06\u5b9e\u9a8c\u73af\u5883\u6062\u590d\u5230\u521d\u59cb\u5316\u72b6\u6001\u3002R1\u5c06\u8def\u7531100.0.1.0/24\u66f4\u65b0\u7ed9\u4e86R3\uff0cR3\u5c06\u8fd9\u6761\u8def\u7531\u53c8\u66f4\u65b0\u7ed9\u4e86R4\uff0c \u7531\u4e8e\u6211\u4eec\u5728R3\u4e0a\u5bf9R4\u505a\u4e86next-hop-local\uff0c\u56e0\u6b64R4\u5728\u6536\u5230\u8fd9\u6761\u8def\u7531\u65f6\u8def\u7531\u7684Next_hop\u5c5e\u6027\u503c\u4e3a3.3.3.3\uff1b \u540c\u7406\uff0c R4\u4eceR5 \u6536\u5230\u7684\u8def\u7531100.0.1.0/24 \u7684Next_hop \u4e3a5.5.5.5 \u3002\u800cR4\u53c8\u901a\u8fc7OSPF \u5b66\u4e60\u5230\u4e86\u53bb\u5f80 3.3.3.3/32\u53ca5.5.5.5/32\u7684\u8def\u7531\uff0c\u5e76\u4e14\u6b64\u523b\u5728R4\u4e0a\uff0c\u5230\u8fbe3.3.3.3\u53ca5.5.5.5\u7684OSPF\u5ea6\u91cf\u503c\u90fd\u662f\u76f8\u7b49\u7684\u3002\u73b0\u5728\uff0c\u6211\u4eec\u5728R4\u8fde\u63a5R3\u7684\u63a5\u53e3\u4e0a\u589e\u52a0\u914d\u7f6e\uff08\u8be5\u63a5\u53e3\u7684\u7f3a\u7701OSPF\u5ea6\u91cf\u503c\u4e3a1\uff09\uff1a ospf cost 10 \u3002 \u5982\u6b64\u4e00\u6765\uff0cR4\u5230\u8fbe3.3.3.3\u7684OSPF\u5ea6\u91cf\u503c\u5c31\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u53d8\u5f97\u6bd4\u5230\u8fbe5.5.5.5\u7684OSPF\u5ea6\u91cf\u503c\u66f4\u5927\uff0c\u56e0\u6b64\u6700\u7ec8\uff0c\u672c\u89c4\u5219\u5c06\u8ba9R4\u4f18\u9009R5\u4f20\u9012\u8fc7\u6765\u7684100.0.1.0/24\u8def\u7531\u3002","title":"\u89c4\u5219\u9a8c\u8bc1\u4e00"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_160","text":"\u73b0\u5728\u5c06\u7f51\u7edc\u73af\u5883\u518d\u505a\u70b9\u8c03\u6574\uff1aR3-R5\u4e4b\u95f4\u589e\u52a0\u4e00\u6761IBGP\u8fde\u63a5\u3002R4\u914d\u7f6e\u4e3a\u8def\u7531\u53cd\u5c04\u5668RR\uff0cR3\u662f\u5979\u7684Client\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u9996\u5148\uff0cR3\u901a\u8fc7IBGP\u8fde\u63a5\u76f4\u63a5\u5c06100.0.1.0/24\u7684\u8def\u7531\u4f20\u7ed9\u4e86R5\uff0c\u53e6\u4e00\u65b9\u9762\u53c8\u7ecf\u7531\u8def\u7531\u53cd\u5c04\u5668 R4\u53cd\u5c04\u7ed9\u4e86R5\uff0c\u56e0\u6b64\uff0cR5\u5c06\u540c\u65f6\u4eceR3\u53caR4\u5b66\u4e60\u5230100.0.1.0/24\u7684BGP\u8def\u7531\u3002\u8fd9\u65f6\u5019R5\u600e\u4e48\u51b3\u7b56\uff1f\u6ce8 \u610f\uff0c\u7531\u4e8e\u8fd9\u4e24\u6761BGP\u8def\u7531Next_Hop\u5c5e\u6027\u503c\u90fd\u662f3.3.3.3\uff0c\u56e0\u6b64\uff0c\u672c\u89c4\u5219\u65e0\u6cd5\u505a\u51fa\u51b3\u7b56\uff0c\u56e0\u4e3a\u4e24\u6761\u8def\u7531\u7684 Next_hop\u90fd\u76f8\u7b49\uff0c\u4e0d\u5177\u5907\u5ea6\u91cf\u503c\u7684\u53ef\u6bd4\u6027\u3002\u53ea\u80fd\u518d\u7ee7\u7eed\u5230\u4e0b\u4e00\u6761\u89c4\u5219\u4e2d\u51b3\u7b56\u3002","title":"\u89c4\u5219\u9a8c\u8bc1\u4e8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#cluster-list","text":"","title":"\u4f18\u9009Cluster-List\u6700\u77ed\u7684\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_161","text":"\u5982\u679c\u7ecf\u8fc7\u524d\u9762\u7684\u89c4\u5219\uff0c\u90fd\u65e0\u6cd5\u51b3\u7b56\u51fa\u6700\u4f18\u8def\u7531\uff0c\u90a3\u4e48\u5c06\u8fdb\u4e00\u6b65\u6bd4\u8f83\u5019\u9009\u8def\u7531\u7684Cluster_List\u5c5e\u6027\uff0c\u4f18\u9009\u6700\u77edCluster_List\u7684\u8def\u7531\u3002","title":"\u89c4\u5219\u63cf\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_162","text":"\u7565\u3002","title":"\u89c4\u5219\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#router-idbgp","text":"","title":"\u4f18\u9009Router-ID\u6700\u5c0f\u7684BGP\u90bb\u5c45\u53d1\u6765\u7684\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_163","text":"\u5982\u679c\u7ecf\u8fc7\u524d\u9762\u7684\u89c4\u5219\uff0c\u90fd\u65e0\u6cd5\u51b3\u7b56\u51fa\u6700\u4f18\u8def\u5f84\uff0c\u90a3\u4e48\u5c06\u4f18\u9009Router-ID\u6700\u5c0f\u7684BGP\u90bb\u5c45\u53d1\u6765\u7684\u8def\u7531\u3002","title":"\u89c4\u5219\u63cf\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_164","text":"\u4ecd\u7136\u662f\u5c06\u5b9e\u9a8c\u73af\u5883\u8fd8\u539f\u6210\u521d\u59cb\u5316\u72b6\u6001\u3002\u5728R1\u53caR2\u4e0a\u90fd\u53d1\u5e03100.0.1.0/24 BGP\u8def\u7531\u3002\u90a3\u4e48\u5728\u4e0d\u505a\u4efb\u4f55\u8def\u7531\u7b56\u7565\u914d\u7f6e\u7684\u60c5\u51b5\u4e0b\uff0cR4\u5c06\u5b66\u4e60\u5230R3\u53caR5\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\uff1a \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cR4\u5df2\u7ecf\u4f18\u9009\u4e86R3\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\uff0c\u5728\u5176\u4ed6\u6761\u4ef6\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0cR4\u5c06\u6bd4\u8f83\u901a\u544a\u8fd9\u4e24\u6761\u8def\u7531\u7684\u90bb\u5c45\u7684Router-ID\uff0c\u7531\u4e8eR3\u7684Router-ID 3.3.3.3\u8981\u5c0f\u4e8eR5\u7684Router-ID 5.5.5.5\uff0c\u56e0\u6b64R3\u4f20\u9012\u8fc7\u6765\u7684\u8def\u7531\u88ab\u4f18\u9009\u3002","title":"\u89c4\u5219\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_165","text":"\u5982\u679c\u8def\u7531\u643a\u5e26Originator_ID\u5c5e\u6027\uff0c\u5219\u5c06\u4f7f\u7528Originator_ID\u4ee3\u66ffRouter-ID\u8fdb\u884c\u6bd4\u8f83\u3002 \u5728\u4e0a\u9762\u7684\u62d3\u6251\u73af\u5883\u4e2d\uff1a R1\u3001R2\u3001R3\u3001R4\u5c5e\u4e8eAS 1234\uff0cAS\u5185\u8fd0\u884c\u4e86OSPF\uff0c\u8def\u7531\u5668\u90fd\u5ba3\u544a\u5404\u81ea\u7684Loopback0\u63a5\u53e3\uff0c\u63a5\u53e3 IP\u5730\u5740\u4e3ax.x.x.x/32\uff0cx\u4e3a\u8bbe\u5907\u7f16\u53f7\u3002 R1-R4\uff1bR4-R3\uff1bR1-R2\uff1bR2-R3\u57fa\u4e8eLoopback0\u5efa\u7acbIBGP\u90bb\u5c45\u5173\u7cfb\u3002 R1\u914d\u7f6e\u4e3aRR\uff0cR4\u662f\u5b83\u7684Client\uff1bR3\u914d\u7f6e\u4e3aRR\uff0cR4\u662f\u5b83\u7684Client\u3002 \u5728R4\u4e0a\u53d1\u5e0344.44.44.0/24\u8def\u7531\u8fdbBGP\u3002 \u5f53R1\u6536\u5230R4\u66f4\u65b0\u8fc7\u6765\u7684\u8def\u7531\u540e\uff0c\u4f1a\u5c06\u5176\u53cd\u5c04\u7ed9R2\u5e76\u63d2\u5165Originator_ID\u53caCluster_List\u5c5e\u6027\u3002R3\u540c\u7406\u3002\u90a3\u4e48\u6700\u7ec8R2\u5c06\u5206\u522b\u4eceR1\u548cR3\u5b66\u4e60\u523044.44.44.0/24\u8def\u7531\uff0cR2\u4f1a\u5982\u4f55\u4f18\u9009\uff1f\u8fd9\u4e24\u6761\u8def\u7531\u62e5\u6709\u76f8\u540c\u7684 Preferred_Value\u3001Local_Preference\uff0c\u5e76\u4e14\u90fd\u901a\u544a\u81ea\u90bb\u5c45\uff0cAS_Path\u957f\u5ea6\u4e00\u6837\uff0cOrigin\u4e5f\u76f8\u540c\uff0cMED\u4e5f\u76f8\u7b49\uff0c\u8fd8\u90fd\u662fIBGP\u90bb\u5c45\u901a\u544a\u800c\u6765\uff0c\u8fdeNext_Hop\u5c5e\u6027\u4e5f\u76f8\u540c\uff0c\u53e6\u5916\uff0c\u8def\u7531\u643a\u5e26\u7684Cluster_List\u957f\u5ea6\u4e5f\u76f8\u540c\u3002\u90a3\u4e48\u80fd\u5426\u4f7f\u7528\u672c\u89c4\u5219\u6765\u51b3\u7b56\u5462\uff1f \u6ce8\u610f\uff0c\u7531\u4e8e\u4e24\u6761\u8def\u7531\u90fd\u643a\u5e26\u4e86Originator_ID\u5c5e\u6027\uff0c\u56e0\u6b64\u5728\u8fd9\u4e00\u8f6ePK\u4e2d\uff0c\u5c31\u4e0d\u662f\u6bd4\u8f83R1\u548cR3\u7684Router- ID \u4e86\uff0c \u800c\u662f\u6bd4\u8f83\u8fd9\u4e24\u6761\u8def\u7531\u7684Originator_ID \u5c5e\u6027\u3002\u7ed3\u679c\uff0c \u7531\u4e8e\u8fd9\u4e24\u6761\u8def\u7531\u7684\u8d77\u6e90\u90fd\u662fR4\uff0c\u56e0\u6b64 Originator_ID\u76f8\u7b49\uff0c\u6240\u4ee5\u672c\u6761\u89c4\u5219\u4ecd\u65e0\u6cd5\u51b3\u7b56\u3002\u90a3\u4e48\u53ea\u80fd\u5728\u5f80\u4e0b\u9762\u7684\u89c4\u5219\u7ee7\u7eed\u6bd4\u8f83\u4e86\uff0c\u8bf7\u770b\u4e0b\u6587\u3002","title":"\u89c4\u5219\u8865\u5145"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#peer-ip","text":"","title":"\u4f18\u9009peer IP\u5730\u5740\u6700\u5c0f\u7684\u90bb\u5c45\u53d1\u6765\u7684\u8def\u7531"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_166","text":"\u5982\u679c\u7ecf\u8fc7\u524d\u9762\u7684\u4e00\u7cfb\u5217\u89c4\u5219\u4ecd\u7136\u65e0\u6cd5\u4f18\u9009\u51fa\u6700\u4f18\u8def\u7531\uff0c\u90a3\u4e48\u5c06\u6bd4\u8f83\u90bb\u5c45\u7684IP\u5730\u5740\u3002\u8fd9\u4e2aIP\u5730\u5740\u662f\u5728BGP \u8def\u7531\u5668\u7684BGP\u914d\u7f6e\u4e2d\uff0c**peer**\u547d\u4ee4\u540e\u6240\u6307\u7684\u90a3\u4e2aIP\u5730\u5740\u3002","title":"\u89c4\u5219\u63cf\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_167","text":"\u4ecd\u7136\u770b\u4e0a\u4e00\u4e2a\u5c0f\u8282\u6700\u540e\u7684\u5b9e\u9a8c\uff0c\u5728R2\u4e0a\uff0c\u6700\u7ec8\u5c06\u6bd4\u8f83R1\u53caR3\u7684peer ip\uff0c\u5728R2\u4e0a\u914d\u7f6e\u90bb\u5c45R1\u65f6\uff0c\u6211\u4eec\u7528\u7684\u547d\u4ee4\u662f**peer 1.1.1.1 as-number 1234**\uff1b\u914d\u7f6e\u90bb\u5c45R3\u65f6\u7528\u7684\u547d\u4ee4\u662f**peer 3.3.3.3 as-number 1234**\uff0c \u56e0\u6b64R1\u7684\u5730\u5740\u8981\u5c0f\u4e8eR3\uff0c\u6545\u4f18\u9009R1\u4f20\u9012\u8fc7\u6765\u768444.44.44.0/24\u8def\u7531\u3002 5.4 \u865a\u62df\u8def\u7531\u8f6c\u53d1\u5b9e\u4f8b 5.4.1 VPN-Instance \u90e8\u7f72\u6848\u4f8b \u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0c\u4e24\u4e2a\u7ad9\u70b9\u7684\u7f51\u7edc\u901a\u8fc7\u6838\u5fc3\u4ea4\u6362\u673a\u4e4b\u95f4\u7684\u4e00\u6761\u4e13\u7ebf\u5b9e\u73b0\u4e86\u8fde\u63a5\u3002\u5177\u4f53\u80cc\u666f\u63cf\u8ff0\u5982\u4e0b\uff1a \u5728\u7ad9\u70b91\u4e2d\uff0c\u6838\u5fc3\u4ea4\u6362\u673a\u4e0a\u5b58\u5728VLAN10\u3001VLAN20\u4e24\u4e2a\u7528\u6237VLAN\uff0c\u5176\u4e2dVLAN10\u662f\u4e1a\u52a1VLAN\uff0c\u800c VLAN20\u662f\u5bb9\u707eVLAN\u3002\u4e24\u4e2aVLAN\u7684\u7f3a\u7701\u7f51\u5173\u90fd\u5728\u6838\u5fc3\u4ea4\u6362\u673aCoreSW-Site1\u4e0a\uff1b CoreSW-Site1\u901a\u8fc7VLAN30\u4e0e\u9632\u706b\u5899FW1/FW2\u5b9e\u73b0\u5bf9\u63a5\uff08\u91c7\u7528\u9759\u6001\u8def\u7531\u7684\u5bf9\u63a5\u65b9\u6848\uff09\u3002\u9632\u706b\u5899\u5bf9\u5185\u63a5\u53e3\u90e8\u7f72\u4e86VRRP\uff0cVRRP\u7684\u865a\u62dfIP\u5730\u5740\u4e3a192.168.30.1\u3002 CoreSW-Site1\u901a\u8fc7VLAN1000\u4e0eCoreSW-Site2\u4e92\u8054\u3002Site1\u7684VLAN20\u4e0eSite2\u7684VLAN21\u9700\u5b9e\u73b0\u4e92\u901a\u3002 \u5bf9\u4e8eSite1\u800c\u8a00\uff0cVLAN10\u4e0eVLAN20\u662f\u9700\u8981\u5b8c\u5168\u9694\u79bb\u7684\u3002 \u8981\u6c42\u5b8c\u6210\u914d\u7f6e\u540e\uff0cVLAN10\u80fd\u591f\u4e0e\u9632\u706b\u5899\u901a\u4fe1\uff0cVLAN20\u80fd\u591f\u4e0eVLAN21\u901a\u4fe1\uff0c\u800cVLAN10\u4e0eVLAN20/21 \u5747\u5b8c\u5168\u9694\u79bb\u3002 \u9700\u8981\u5f3a\u8c03\u7684\u662f\uff0cVLAN10\u53caVLAN20\u7684\u7f51\u5173\u90fd\u653e\u5728\u6838\u5fc3\u4ea4\u6362\u673aCoreSW-Site1\u4e0a\uff0c\u610f\u5473\u7740\u540e\u8005\u5c06\u914d\u7f6eVlanif10 \u53caVlanif20\uff0c\u7531\u4e8e\u8fd9\u4e24\u4e2a\u4e09\u5c42\u63a5\u53e3\u7f3a\u7701\u5df2\u7ecf\u5b9e\u73b0\u4e86\u8def\u7531\u4e92\u901a\uff0c\u56e0\u6b64\u5b9e\u9645\u4e0a\u6b64\u65f6VLAN10\u4e0eVLAN20\u662f\u53ef\u4ee5\u901a\u8fc7CoreSW-Site1\u5b9e\u73b0\u901a\u4fe1\u7684\uff0c\u8fd9\u5c31\u5b58\u5728\u5b89\u5168\u9690\u60a3\uff0c\u4e0d\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\u3002\u5f53\u7136\uff0c\u5728CoreSW-Site1\u4e0a\u90e8\u7f72ACL \u53ef\u4ee5\u8fbe\u5230\u76ee\u7684\uff0c\u4f46\u662f\u8fd9\u672a\u5fc5\u662f\u6700\u4f73\u7684\u3001\u6269\u5c55\u6027\u6700\u9ad8\u7684\u65b9\u6848\u3002 \u53e6\u4e00\u65b9\u6848\u662f\u5728CoreSW-Site1\u4e0a\u521b\u5efaVPN\u5b9e\u4f8b\uff08VPN Instance\uff09\uff0c\u4ece\u800c\u5c06\u4e0d\u540c\u7684\u6d41\u91cf\u5f7b\u5e95\u9694\u79bb\u3002\u5c06VLAN10\u3001 VLAN30\u4fdd\u6301\u5728\u6839\u8bbe\u5907\uff0c\u5c06VLAN20\u3001VLAN1000\u653e\u7f6e\u5728VPN\u5b9e\u4f8b\u4e2d\uff0c\u6839\u8bbe\u5907\u4e0eVPN\u5b9e\u4f8b\u662f\u5f7b\u5e95\u9694\u79bb\u7684\u3002 VPN\u5b9e\u4f8b\uff0c\u53c8\u88ab\u79f0\u4e3a\u865a\u62df\u8def\u7531\u8f6c\u53d1\u5b9e\u4f8b\uff0c\u662f\u4e00\u4e2a\u7c7b\u4f3c\u865a\u62df\u8bbe\u5907\u7684\u6982\u5ff5\u3002\u7f3a\u7701\u65f6\uff0c\u4e00\u4e2a\u7f51\u7edc\u8bbe\u5907\u7684\u6240\u6709\u63a5\u53e3 \uff08\u4f8b\u5982\u9632\u706b\u5899\u7684\u4e09\u5c42\u63a5\u53e3\u6216\u5b50\u63a5\u53e3\uff0c\u6216\u4ea4\u6362\u673a\u7684Vlanif\u7b49\uff0c\u6216\u8def\u7531\u5668\u7684\u4e09\u5c42\u63a5\u53e3\u7b49\uff09\u90fd\u5c5e\u4e8e\u540c\u4e00\u4e2a\u8f6c\u53d1\u5b9e\u4f8b \u2014\u2014\u8bbe\u5907\u7684\u6839\u5b9e\u4f8b\u3002\u5982\u679c\u6211\u4eec\u5728\u8be5\u7f51\u7edc\u8bbe\u5907\u4e0a\u521b\u5efa\u4e00\u4e2aVPN\u5b9e\u4f8b\uff0c\u90a3\u4e48\u5c31\u7b49\u4e8e\u62e5\u6709\u4e86\u4e00\u53f0\u865a\u62df\u8bbe\u5907\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u7279\u5b9a\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u8be5VPN\u5b9e\u4f8b\u4e2d\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u8be5\u63a5\u53e3\u4e13\u95e8\u670d\u52a1\u4e8e\u8fd9\u4e2aVPN\u5b9e\u4f8b\u3002\u6bcf\u4e2aVPN\u5b9e\u4f8b\u4f7f\u7528\u72ec\u7acb\u4e8e\u6839\u8bbe\u5907\u7684\u6570\u636e\u8f6c\u53d1\u8868\uff0c\u4f8b\u5982\u8def\u7531\u8868\u7b49\u7b49\uff0c\u5b83\u4eec\u4f7f\u7528\u4e0d\u540c\u7684\u6570\u636e\u8f6c\u53d1\u5e73\u9762\uff0c\u8fd9\u4f7f\u5f97\u5728\u67d0\u4e2aVPN\u5b9e\u4f8b\uff08\u7684\u63a5\u53e3\uff09\u4e0a\u63a5\u6536\u7684\u6d41\u91cf\uff0c\u4e0d\u4f1a\u88ab\u8f6c\u53d1\u5230\u5176\u4ed6VPN\u5b9e\u4f8b\u6216\u8005\u6839\u8bbe\u5907\u2014\u2014\u5f7b\u5e95\u9694\u79bb\u3002\u8fd9\u4e2a\u6982\u5ff5\u5728MPLS VPN\u4e2d\u6709\u7740\u5173\u952e\u7684\u5e94\u7528\u3002\u5f53\u7136\uff0c\u672c\u6587\u8ba8\u8bba\u7684\u8303\u7574\u4ec5\u9650\u4e8e\u4f7f\u7528VPN\u5b9e\u4f8b\u5b9e\u73b0\u6570\u636e\u9694\u79bb\u7684\u7b80\u5355\u5e94\u7528\u3002 \u7b80\u5355\u7684\u8bf4\u4e0b\u601d\u8def\uff1a \u5728CoreSW-Site1\u4e0a\u521b\u5efaVLAN10\u300120\u300130\u30011000\uff1b \u5728CoreSW-Site1\u4e0a\u914d\u7f6e\u76f8\u5e94\u7684\u4e8c\u5c42\u63a5\u53e3\uff0c\u5c06\u63a5\u53e3\u52a0\u5165\u7279\u5b9a\u7684VLAN\uff1b \u5728CoreSW-Site1\u4e0a\u521b\u5efaVPN\u5b9e\u4f8b\uff0c\u540d\u5b57\u4e3atest\uff1b \u5728CoreSW-Site1\u4e0a\u5c06Vlanif20\u3001Vlanif1000\u6dfb\u52a0\u5230VPN\u5b9e\u4f8btest\uff0c\u4ece\u800c\u8fd9\u4e24\u4e2a\u63a5\u53e3\u4e0e\u6839\u8bbe\u5907\u5f7b\u5e95\u9694\u79bb\uff1b \u4e3aCoreSW-Site1\u7684\u6839\u8bbe\u5907\u914d\u7f6e\u9759\u6001\u9ed8\u8ba4\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3a\u9632\u706b\u5899\u7684VRRP\u865a\u62dfIP\u5730\u5740192.168.30.1\uff1b \u4e3aCoreSW-Site1\u7684VPN\u5b9e\u4f8btest\u914d\u7f6e\u53bb\u5f80VLAN21\u7684\u9759\u6001\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3aCoreSW-Site2\uff1b 7. \u6ce8\uff1aFW1/FW2\u9700\u914d\u7f6e\u5230\u8fbe192.168.10.0/24\u7684\u56de\u7a0b\u8def\u7531\u3002 CoreSW-Site1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a vlan batch 10 20 30 1000 interface GigabitEthernet0/0/11 port link-type access port default vlan 30 description Connect-to-FW1 interface GigabitEthernet0/0/12 port link-type access port default vlan 30 description Connect-to-FW2 interface GigabitEthernet0/0/15 port link-type trunk port trunk allow-pass vlan 1000 undo port trunk allow-pass vlan 1 description Connect-to-CoreSwitchSite2 interface eth-trunk1 port link-type trunk port trunk allow-pass vlan 10 undo port trunk allow-pass vlan 1 description Connect-to-E9000-2X3X interface eth-trunk2 port link-type trunk port trunk allow-pass vlan 20 undo port trunk allow-pass vlan 1 description Connect-to-E9000-1E4E #\u521b\u5efa\u4e00\u4e2a\u540d\u4e3atest\u7684VPN\u5b9e\u4f8b\uff1a ip vpn-instance test route-distinguisher 100:1 #\u914d\u7f6eVLANIF\u63a5\u53e3\uff0c\u5c06VLANIF20\u548cVLANIF1000\u7ed1\u5b9a\u5230VPN\u5b9e\u4f8b test: interface Vlanif10 ip address 192.168.10.1 255.255.255.0 interface Vlanif20 ip binding vpn-instance test ip address 192.168.20.1 255.255.255.0 interface Vlanif30 ip address 192.168.30.4 255.255.255.0 interface Vlanif1000 ip binding vpn-instance test \u6ce8\u610f\uff0c\u6b64\u65f6\u5728CoreSW-Site1\u4e0a\u4f7f\u7528**display ip routing-table**\u547d\u4ee4\u67e5\u770b\u7684\u662f\u6839\u8bbe\u5907\u7684\u8def\u7531\u8868\uff0c\u4f7f\u7528**display ip routing-table vpn-instance test**\u547d\u4ee4\u67e5\u770b\u7684\u662fVPN\u5b9e\u4f8btest\u7684\u8def\u7531\u8868\u3002\u53e6\u5916\u5728CoreSW-Site1\u6267\u884cping\u547d\u4ee4\u65f6\uff0c\u4ea4\u6362\u673a\u5c06\u4f7f\u7528\u6839\u8bbe\u5907\u7684\u63a5\u53e3\u4f5c\u4e3a\u6e90\uff0c\u5e76\u4e14\u5728\u6839\u8bbe\u5907\u7684\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u5230\u8fbe\u76ee\u7684\u5730\u7684\u8def\u7531\u3002\u5982\u679c\u5e0c\u671b\u5728VPN \u5b9e\u4f8b\u7684\u5c42\u9762\u8fdb\u884cping\u7684\u64cd\u4f5c\uff0c\u4f8b\u5982\u5728CoreSW-Site1\u4e0aping CoreSW-Site2\u7684\u5730\u5740192.168.255.2\uff1a","title":"\u89c4\u5219\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_168","text":"VRRP VRRP \u6982\u8ff0","title":"\u5197\u4f59\u53ef\u9760"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_169","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cLAN\u5185\u7684PC\u7684\u9ed8\u8ba4\u7f51\u5173\u4e3a192.168.1.254\uff0c\u662f\u56fe\u4e2d\u7684\u8def\u7531\u5668\u3002\u8fd9\u4e2a\u73af\u5883\u5b9e\u9645\u4e0a\u5b58\u5728\u5355\u70b9\u6545\u969c\u7684\u9690\u60a3\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u8def\u7531\u5668\u6216\u8005\u5176\u63a5\u53e3\u53d1\u751f\u6545\u969c\uff0c\u90a3\u4e48\u5c06\u51fa\u73b0\u65ad\u7f51\uff0c\u56e0\u4e3a\u7f51\u5173\u6ca1\u6709\u5197\u4f59\u3002\u800c\u5982\u679c\u589e\u52a0\u4e00\u53f0\u8def\u7531\u5668\u4f5c\u4e3a\u7f51\u5173\u8bbe\u5907\uff0c\u53c8\u610f\u5473\u7740\u5185\u7f51\u7684PC\u9700\u8981\u4fee\u6539\u7f51\u5361\u914d\u7f6e\uff0c\u975e\u5e38\u4f4e\u6548\u3002","title":"\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vrrp","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cLAN\u5185\u6709\u4e24\u53f0\u8def\u7531\u5668\uff0c\u8fd9\u4e24\u53f0\u8def\u7531\u5668\u53ef\u4ee5\u901a\u8fc7VRRP\u534f\u8bae\u4e3aLAN\u5185\u7684PC\u63d0\u4f9b\u5197\u4f59\u7f51\u5173\u3002R1 \u7684GE0/0/0 \u53e3\u53caR2 \u7684GE0/0/0 \u90fd\u8fde\u63a5\u5230\u4e86\u4e00\u53f0\u4e8c\u5c42\u4ea4\u6362\u673a\u4e0a\uff0c IP \u5730\u5740\u5206\u522b\u662f192.168.1.253 \u53ca 192.168.1.252\uff0c\u6b64\u523b\u5b83\u4eec\u5c5e\u4e8e\u4e00\u4e2a\u5e7f\u64ad\u57df\u3002 \u73b0\u5728\u6211\u4eec\u5728R1\u7684GE0/0/0\u53e3\u53caR2\u7684GE0/0/0\u53e3\u4e0a\u6fc0\u6d3bVRRP\uff0c\u5c06\u8fd9\u4e24\u4e2a\u63a5\u53e3\u653e\u5230\u4e00\u4e2aVRRP\u7ec4\u4e2d\uff0cVRRP\u5c06\u4ea7\u751f\u4e00\u53f0\u865a\u62df\u8def\u7531\u5668\uff0c\u8fd9\u53f0\u865a\u62df\u8def\u7531\u5668\u7684IP\u5730\u5740\u4e3a192.168.1.254\u3002LAN\u5185\u7684PC\u5c06\u81ea\u5df1\u7684\u7f51\u5173\u90fd\u6307\u5411\u8fd9\u4e2a\u865a\u62df\u8def\u7531\u5668\u7684IP\u5730\u5740\u3002VRRP\u6765\u51b3\u5b9a\u8be5\u7ec4\u4e2dR1\u8fd8\u662fR2\u6765\u54cd\u5e94PC\u53d1\u5f80192.168.1.254\u7684\u6570\u636e\u8bf7\u6c42\u3002 \u5f53PC\u8981\u8bbf\u95ee\u5916\u7f51\u65f6\uff0c\u9996\u5148\u4f1a\u53d1\u9001ARP\u62a5\u6587\u53bb\u8bf7\u6c42\u7f51\u5173192.168.1.254\u7684MAC\u5730\u5740\uff0c\u8fd9\u65f6\u5019\u7531VRRP\u7684 Master\u8def\u7531\u5668\u6765\u56de\u5e94\u8fd9\u4e2aARP\u8bf7\u6c42\uff0c\u540c\u65f6\u627f\u62c5\u6570\u636e\u8f6c\u53d1\u4efb\u52a1\u3002\u4e8e\u6b64\u540c\u65f6R1\u7684GE0/0/0\u53e3\u4ecd\u7136\u5728\u4ee5\u4e00\u5b9a\u7684\u5468\u671f\u53d1\u9001VRRP\u62a5\u6587\u4ee5\u4fbf\u5411Backup\u8def\u7531\u5668\u901a\u544a\u81ea\u5df1\u7684\u5b58\u6d3b\u72b6\u6001\u3002 \u5f53Master\u8def\u7531\u5668R1\u6302\u6389\u65f6\uff0c\u6216\u8005R1\u7684\u4e0a\u884c\u63a5\u53e3\u53d1\u751f\u6545\u969c\u65f6\uff0cVRRP\u90fd\u6709\u76f8\u5e94\u7684\u673a\u5236\u80fd\u591f\u68c0\u6d4b\u5230\uff0c\u8fd9\u65f6 R2\u5c31\u4f1a\u4eceBackup\u72b6\u6001\u5207\u6362\u5230Master\u72b6\u6001\uff0c\u5e76\u63a5\u66ffR1\u4e4b\u524d\u7684\u5de5\u4f5c\u3002\u6b64\u65f6PC\u5411192.168.1.254\u53d1\u9001\u7684ARP \u8bf7\u6c42\uff0c\u4ee5\u53ca\u4e0a\u884c\u4e1a\u52a1\u6570\u636e\u8f6c\u53d1\u5c31\u7531R2\u5904\u7406\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6574\u4e2a\u5207\u6362\u8fc7\u7a0bPC\u7aef\u65e0\u9700\u505a\u4efb\u4f55\u914d\u7f6e\u53d8\u66f4\u3002 VRRP \u672f\u8bed VRRP\u8def\u7531\u5668 \uff1a\u8fd0\u884cVRRP\u7684\u8def\u7531\u5668\u3002\u4e00\u53f0VRRP\u8def\u7531\u5668\uff08\u7684\u63a5\u53e3\uff09\u53ef\u4ee5\u540c\u65f6\u53c2\u4e0e\u5230\u591a\u4e2aVRRP\u7ec4\u4e2d\uff0c\u5728\u4e0d\u540c\u7684\u7ec4\u4e2d\uff0c\u4e00\u53f0VRRP\u8def\u7531\u5668\u53ef\u4ee5\u5145\u5f53\u4e0d\u540c\u7684\u89d2\u8272\u3002 **VRRP\u7ec4\uff1a**\u4e00\u4e2aVRRP\u7ec4\u7531\u591a\u4e2aVRRP\u8def\u7531\u5668\u7ec4\u6210\uff0c\u5c5e\u4e8e\u540c\u4e00VRRP\u7ec4\u7684VRRP\u8def\u7531\u5668\u4e92\u76f8\u4ea4\u6362\u4fe1\u606f\uff0c\u6bcf\u4e00\u4e2aVRRP\u7ec4\u4e2d\u53ea\u80fd\u6709\u4e00\u4e2aMaster\u3002\u540c\u5c5e\u4e00\u4e2aVRRP\u7ec4\u7684\u8def\u7531\u5668\uff08\u7684\u63a5\u53e3\uff09\u4f7f\u7528\u76f8\u540c\u7684VRID\u3002\u540c\u5c5e\u4e00\u4e2a VRRP\u7ec4\u7684\u8def\u7531\u5668\u4e4b\u95f4\u4ea4\u4e92VRRP\u62a5\u6587\uff0c\u8fd9\u4e9b\u8def\u7531\u5668\u5fc5\u987b\u5904\u4e8e\u76f8\u540c\u7684\u5e7f\u64ad\u57df\u4e2d\u3002 **\u865a\u62df\u8def\u7531\u5668\uff1a**\u5bf9\u4e8e\u6bcf\u4e00\u4e2aVRRP\u7ec4\uff0c\u62bd\u8c61\u51fa\u6765\u7684\u4e00\u4e2a\u903b\u8f91\u8def\u7531\u5668\uff0c\u8be5\u8def\u7531\u5668\u5145\u5f53\u7f51\u7edc\u7528\u6237\u7684\u7f51\u5173\uff0c\u8be5\u8def\u7531\u5668\u5e76\u975e\u771f\u5b9e\u5b58\u5728\uff0c\u4e8b\u5b9e\u4e0a\u5bf9\u4e8e\u7528\u6237\u800c\u8a00\uff0c\u53ea\u9700\u77e5\u9053\u865a\u62df\u8def\u7531\u5668\u7684IP\u5730\u5740\uff0c\u81f3\u4e8e\u865a\u62df\u8def\u7531\u5668\u7684\u89d2\u8272\u7531\u8c01\u6765\u627f\u62c5\u3001\u6570\u636e\u8f6c\u53d1\u4efb\u52a1\u7531\u8c01\u6765\u627f\u62c5\u3001Master\u6302\u6389\u4e4b\u540e\u8c01\u6765\u63a5\u66ff\uff0c\u8fd9\u662fVRRP\u7684\u5de5\u4f5c\u3002 **\u865a\u62dfIP\u5730\u5740\u3001\u865a\u62dfMAC\u5730\u5740\uff1a**\u865a\u62dfIP\u5730\u5740\u662f\u865a\u62df\u8def\u7531\u5668\u7684IP\u5730\u5740\uff0c\u8be5\u5730\u5740\u4e00\u822c\u5c31\u662f\u7528\u6237\u7684\u7f51\u5173\u5730\u5740\u3002\u4e0e\u865a\u62dfIP\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\u4e5f\u662f\u865a\u62df\u7684\uff0c\u8be5MAC\u5730\u5740\u7531\u56fa\u5b9a\u6bd4\u7279\u4f4d\u52a0\u4e0aVRRP VRID\u6784\u6210\uff0c\u5f53PC\u53d1\u9001 ARP\u62a5\u6587\u53bb\u8bf7\u6c42\u865a\u62dfIP\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\u65f6\uff0cMaster\u8def\u7531\u5668\u54cd\u5e94\u8fd9\u4e2aARP\u8bf7\u6c42\u5e76\u544a\u77e5\u865a\u62dfMAC\u5730\u5740\u3002 \u901a\u8fc7VRRP\u5f62\u6210\u7684\u865a\u62df\u8def\u7531\u5668\u4f7f\u7528\u865a\u62dfIP\u5730\u5740\u548c\u865a\u62dfMAC\u4e0e\u7f51\u7edc\u4e2d\u7684PC\u8fdb\u884c\u901a\u4fe1\u3002\u865a\u62dfMAC\u5730\u5740\u7684\u683c\u5f0f\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5176\u4e2dMAC\u5730\u5740\u7684\u6700\u540e1\u4e2a\u5b57\u8282\u586b\u5145VRRP VRID\uff0c\u4f8b\u5982VRID\u662f1\uff0c\u865a\u62dfMAC\u5730\u5740\u4e3a00-00-5E-00-01- 01 \u3002 **Master\u8def\u7531\u5668\u3001Backup\u8def\u7531\u5668\uff1a**Master\u8def\u7531\u5668\u5c31\u662f\u5728VRRP\u7ec4\u4e2d\u7684\u4e3b\u8def\u7531\u5668\uff0c\u5b83\u662f\u5b9e\u9645\u8f6c\u53d1\u4e1a\u52a1\u6570\u636e\u5305\u7684\u8def\u7531\u5668\uff0c\u5728\u6bcf\u4e00\u4e2aVRRP\u7ec4\u4e2d\uff0c\u4ec5\u6709Master\u624d\u4f1a\u54cd\u5e94\u5bf9\u865a\u62dfIP\u5730\u5740\u7684ARP\u8bf7\u6c42\uff0c\u4e5f\u53ea\u6709Master\u624d\u4f1a\u8f6c\u53d1\u4e1a\u52a1\u6570\u636e\u3002Master\u8def\u7531\u5668\u4ee5\u4e00\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u53d1\u9001VRRP\u62a5\u6587\uff0c\u4ee5\u4fbf\u901a\u77e5Backup\u8def\u7531\u5668\u81ea\u5df1\u7684\u5b58\u6d3b\u3002 Backup\u8def\u7531\u5668\u662f\u5728VRRP\u7ec4\u4e2d\u5907\u4efd\u72b6\u6001\u7684\u8def\u7531\u5668\uff0c\u4e00\u65e6Master\u8def\u7531\u5668\u51fa\u73b0\u6545\u969c\uff0c Backup\u8def\u7531\u5668\u5c31\u5f00\u59cb\u63a5\u66ff\u5de5\u4f5c\u3002 **\u9009\u4e3e\u4f9d\u636e\uff1a**\u5148\u6bd4\u8f83\u63a5\u53e3VRRP\u4f18\u5148\u7ea7\uff08\u8d8a\u5927\u8d8a\u4f18\u5148\uff0c\u9ed8\u8ba4\u4e3a100\uff09\uff0c\u5982\u679c\u4f18\u5148\u7ea7\u76f8\u7b49\u5219\u6bd4\u63a5\u53e3IP\u5730\u5740\uff08IP \u5730\u5740\u6700\u5927\u7684\u80dc\u51fa\uff09\u3002 VRRP \u7684\u57fa\u7840\u914d\u7f6e","title":"VRRP\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_170","text":"\u5982\u4e0a\u56fe\u6240\u793a\uff0cR1\u3001R2\u53caPC\u8fde\u63a5\u5728\u540c\u4e00\u53f0\u4e8c\u5c42\u4ea4\u6362\u673a\u4e0a\u3002R1\u53caR2\u5c06\u5728GE0/0/0\u63a5\u53e3\u4e0a\u8fd0\u884cVRRP\uff0c\u5b9e\u73b0\u7f51\u5173\u5197\u4f59\u3002\u8981\u6c42\u5728\u6b63\u5e38\u60c5\u51b5\u4e0bR1\u4e3aMaster\uff0c\u5f53R1\u6302\u6389\u65f6\uff0cR2\u80fd\u591f\u6210\u4e3aMaster\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u9700\u6ce8\u610f\uff0c\u7531\u4e8eR1\u4e0eR2\u7684GE0/0/0\u63a5\u53e3\u5de5\u4f5c\u5728\u540c\u4e00\u4e2aVRRP\u7ec4\uff0c\u56e0\u6b64\u53cc\u65b9\u914d\u7f6e\u7684VRID\u5fc5\u987b\u76f8\u540c\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5728R1\u3001R2\u4e0a\u505a\u4e00\u4e0b\u67e5\u770b\uff1a","title":"\u57fa\u7840\u5b9e\u9a8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#track","text":"Backup\u8def\u7531\u5668\u4f1a\u4e0d\u65ad\u4fa6\u542cMaster\u53d1\u51fa\u6765\u7684VRRP\u62a5\u6587\u4ee5\u4fbf\u5224\u65ad\u5b83\u7684\u5b58\u6d3b\u72b6\u6001\uff0c\u5f53Master\u8def\u7531\u5668\u53d1\u751f\u6545\u969c\u65f6\uff0cBackup\u8def\u7531\u5668\u80fd\u591f\u611f\u77e5\u5e76\u4e14\u8fdb\u884c\u5207\u6362\u3002\u4f46\u662f\u5982\u679cMaster\u8def\u7531\u5668\u6ca1\u6709\u53d1\u751f\u6574\u673a\u6545\u969c\uff0c\u800c\u53ea\u662f\u5176\u4e0a\u884c\u63a5\u53e3\u6545\u969c\u4e86\u5462\uff1f\u4f8b\u5982\u4e0a\u56fe\u4e2d\uff0cR1\u4f5c\u4e3aMaster\u8def\u7531\u5668\uff0c\u5982\u679c\u5176GE0/0/1\u53e3DOWN\u6389\u4e86\uff0c\u90a3\u4e48\u7528\u6237\u7684\u4e0a\u884c\u6d41\u91cf\u88ab\u5f15\u5bfc\u5230R1\u540e\uff0c\u5c06\u4f1a\u88ab\u4e22\u5f03\u3002 VRRP\u6709\u4e00\u4e2a\u7279\u6027\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a\u901a\u8fc7\u5728R1\u4e0a\u90e8\u7f72VRRP track\uff0c\u4f7f\u5176\u80fd\u591f\u8ddf\u8e2aGE0/0/1\u7684\u72b6\u6001\uff0c\u5982\u679cGE0/0/1\u7684\u7269\u7406\u72b6\u6001\u6216\u8005\u534f\u8bae\u72b6\u6001\u53d8\u4e3aDown\uff0c\u90a3\u4e48R1\u5c31\u4f1a\u4e3b\u52a8\u5c06\u81ea\u5df1\u7684GE0/0/0\u63a5\u53e3VRRP\u4f18\u5148\u7ea7\u51cf\u53bb\u4e00\u4e2a\u503c\uff0c\u4ece\u800c\u4f7f\u5f97R2\u7684\u4f18\u5148\u7ea7\u503c\u66f4\u5927\u3001\u4f18\u5148\u7ea7\u66f4\u9ad8\uff0c\u90a3\u4e48R2\u5c06\u6210\u4e3a\u65b0\u7684Master\uff0cR1\u5219\u6210\u4e3aBackup\uff0c\u7528\u6237\u53d1\u5f80\u9ed8\u8ba4\u7f51\u5173\u7684\u4e0a\u884c\u6d41\u91cf\u4fbf\u4f1a\u88ab\u5f15\u5bfc\u5230R2\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5907\u6ce8\uff1aR2\u7684GE0/0/0\u63a5\u53e3VRRP\u4f18\u5148\u7ea7\u503c\u4e3a\u9ed8\u8ba4\u503c100\u3002","title":"track\u63a5\u53e3\u72b6\u6001"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vrrp_1","text":"R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u8def\u7531\u5668\u4e0a\u8fd0\u884c\u591a\u7ec4VRRP\u5b9e\u73b0\u8d1f\u8f7d\u5206\u62c5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vrrp_2","text":"SW1\u53caSW2\u90fd\u662f\u4e09\u5c42\u4ea4\u6362\u673a\uff0c\u5185\u7f51\u6709VLAN10\u7684\u7528\u6237\uff0c\u7f51\u6bb5\u4e3a192.168.10.0/24\u3002\u73b0\u5728\u8981\u5728SW1\u53caSW2 \u95f4\u8dd1\u4e00\u7ec4VRRP\u3002\u6b63\u5e38\u60c5\u51b5\u4e0bSW1\u7684vlanif10\u4e3a\u4e3b\uff0cSW2\u4e3a\u5907\u3002 SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u5728\u4e09\u5c42\u4ea4\u6362\u673a\u4e0a\u90e8\u7f72VRRP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vrrpmstp","text":"SW1\u53caSW2\u4e3a\u6838\u5fc3\u4ea4\u6362\u673a\uff0cSW3\u4e3a\u63a5\u5165\u5c42\u4ea4\u6362\u673a\u4e0b\u8054PC\u3002\u4e09\u53f0\u4ea4\u6362\u673a\u6784\u6210\u4e00\u4e2a\u4e09\u89d2\u5f62\u5197\u4f59\u73af\u5883\u3002\u5185\u7f51\u5b58\u5728\u56db\u4e2aVLAN\uff1a10\u300120\u300130\u548c40\u3002 \u8981\u6c42\u7f51\u7edc\u6b63\u5e38\u65f6\uff0cVLAN10\u300120\u7684\u7528\u6237\u4e0a\u884c\u7684\u6d41\u91cf\u8d70SW1\uff1bVLAN30\u300140\u7684\u4e0a\u884c\u6d41\u91cf\u8d70SW2\uff0c\u5e76\u4e14\u5f53SW1 \u6216SW2\u53d1\u751f\u6545\u969c\u65f6\uff0c\u80fd\u591f\u8fdb\u884c\u81ea\u52a8\u5207\u6362\u3002 \u8fd9\u91cc\u5b9e\u9645\u4e0a\u9700\u8981\u540c\u65f6\u8003\u8651\u4e24\u4e2a\u56e0\u7d20\uff0c\u4e00\u662fVRRP\uff0c\u4e8c\u662fMSTP\u3002\u4ece\u4e09\u5c42\u7684\u89d2\u5ea6\u6765\u8bf4\uff0cSW1\u662fVLAN10\u3001 20\u7684VRRP Master\uff0cSW2\u662fVLAN30\u300140\u7684VRRP Master\u3002\u4ece\u4e8c\u5c42\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u7f51\u7edc\u91cc\u80af\u5b9a\u662f\u6709\u73af\u8def\u7684\uff0c\u56e0\u6b64\u9700\u8981\u501f\u52a9MSTP\u6765\u6253\u7834\u73af\u8def\uff0c\u4f46\u662f\u4e0d\u80fd\u968f\u4fbf\u963b\u585e\u7aef\u53e3\uff0c\u5e94\u8be5\u4fdd\u8bc1VLAN10\u300120\u7684\u6d41\u91cf\u8d70\u5de6\u4fa7\u7684\u94fe\u8def\u5230SW1\uff0c\u800cVLAN30\u300140\u7684\u6d41\u91cf\u8d70\u53f3\u4fa7\u5230SW2\u3002\u56e0\u6b64MSTP\u7684\u914d\u7f6e\u4e0a\uff0c\u5c06VLAN10\u300120\u53caVLAN30\u3001 40\u5206\u522b\u6620\u5c04\u5230\u4e0d\u540c\u7684MST\u5b9e\u4f8b\u3002\u4f8b\u5982\u5c06VLAN10\u300120\u6620\u5c04\u5230Instance 1\uff0c\u5c06vlan30\u300140\u6620\u5c04\u5230Instance2\uff0c \u7136\u540e\u5c06SW1\u8bbe\u7f6e\u4e3aInstance1\u7684\u4e3b\u6839\u3001SW2\u4e3aInstance1\u7684\u6b21\u6839\uff0c\u5c06SW1\u4e3aInstance2\u7684\u6b21\u6839\uff0cSW2\u4e3a Instance2\u7684\u4e3b\u6839\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5728Instance1\u7684\u751f\u6210\u6811\u4e2d\uff0cSW3\u7684G0/0/23\u5c06\u88ab\u963b\u585e\uff0c\u5728Instance2\u7684\u751f\u6210\u6811\u4e2d\uff0cSW3\u7684GE0/0/22\u5c06\u88ab\u963b\u585e\u3002 SW3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5404VLAN\u7684\u7528\u6237\u90fd\u80fd\u591fping\u901a\u81ea\u5df1\u7684\u7f51\u5173\uff1b\u6211\u4eec\u5728SW3\u4e0a\u770b\u770b\uff1a \u6211\u4eec\u770b\u5230\uff0cMSTP\u5b9e\u4f8b1\u4e2d\u88ab\u963b\u585e\u7684\u7aef\u53e3\u662fGE0/0/23\u53e3\uff1bMSTP\u5b9e\u4f8b2\u4e2d\u88ab\u963b\u585e\u7684\u7aef\u53e3\u662fGE0/0/22\uff0c\u7b26\u5408\u9700\u6c42\u3002\u518d\u53bbSW1\u4e0a\u770b\u770bVRRP\u7ec4\u7684\u72b6\u6001\uff1a [SW1] display vrrp brief VRID State Interface Type Virtual IP -------------------------------------------------------------------------------------------------- 1 Master Vlanif10 Normal 192.168.10.254 2 Master Vlanif20 Normal 192.168.20.254 3 Backup Vlanif30 Normal 192.168.30.254 \u4ece\u4e0a\u8ff0\u8f93\u51fa\u53ef\u4ee5\u770b\u51fa\uff0cSW1\u4e3aVRRP\u7ec41\u53ca\u7ec42\u7684Master\uff0c\u540c\u65f6\u4e5f\u4e3aVRRP\u7ec43\u548c\u7ec44\u7684Backup\u3002 VRRP \u5e38\u89c1\u95ee\u9898","title":"VRRP+MSTP\u5178\u578b\u7ec4\u7f51"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vrrp_3","text":"\u7531\u4e8eVRRP\u534f\u8bae\u62a5\u6587\u662f\u4ee5\u7ec4\u64ad\u7684\u65b9\u5f0f\u53d1\u9001\u7684\uff0c\u8fd9\u5c31\u63d0\u51fa\u4e86\u4e00\u4e2a\u9650\u5236\uff1aVRRP\u7684\u6210\u5458\u63a5\u53e3\u5fc5\u987b\u5904\u4e8e\u4e00\u4e2a LAN\u6216\u8005\u8bf4\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\uff0c\u5426\u5219VRRP\u62a5\u6587\u5c06\u65e0\u6cd5\u6b63\u5e38\u6536\u53d1\uff0c\u5982\u679c\u540c\u4e00\u4e2aVRRP\u7ec4\u5185\u7684\u63a5\u53e3\u65e0\u6cd5\u6b63\u5e38\u6536\u53d1VRRP\u62a5\u6587\uff0c\u5c31\u5bb9\u6613\u51fa\u73b0\u53cc\u4e3b\u6545\u969c\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR1\u53caR2\u7684GE0/0/0\u63a5\u53e3\u63a5\u5165\u540c\u4e00\u4e2a\u4ea4\u6362\u673a\uff0c\u6b64\u65f6R1\u3001R2\u7684GE0/0/0\u63a5\u53e3\u5904\u4e8e\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\uff0c VRRP\u7684\u534f\u8bae\u62a5\u6587\u6536\u53d1\u5e94\u8be5\u6ca1\u6709\u95ee\u9898\uff0c\u6b64\u65f6VRRP\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u3002\u4f46\u662f\u5982\u679c\u4ea4\u6362\u673a\u8fde\u63a5R1\u3001R2\u7684\u8fd9\u4e24\u4e2a\u63a5\u53e3\u88ab\u5212\u5206\u5230\u4e86\u4e24\u4e2a\u4e0d\u540c\u7684VLAN\u4e2d\uff0c\u90a3\u4e48\u5c31\u4f1a\u51fa\u73b0\u53cc\u4e3b\u6545\u969c\u3002\u56e0\u4e3a\u4e00\u53f0\u8def\u7531\u5668\u53d1\u51fa\u7684VRRP\u62a5\u6587\u65e0\u6cd5\u88ab\u53e6\u4e00\u53f0\u63a5\u6536\uff0c\u53cc\u65b9\u611f\u77e5\u4e0d\u5230\u5bf9\u65b9\u7684\u5b58\u5728\u3002 \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u4e0b\u884c\u8bbe\u5907\u5747\u4e3a\u8def\u7531\u5668\uff0c\u5982\u679c\u8fd9\u4e9b\u8def\u7531\u5668\u90fd\u91c7\u7528\u4e09\u5c42\u63a5\u53e3\uff08\u800c\u4e0d\u662f\u4e8c\u5c42\u63a5\u53e3\uff09\u4e0e\u4e0a\u9762\u7684\u8bbe\u5907\u5bf9\u63a5\uff0c\u90a3\u4e48\u4e0a\u9762\u7684\u8bbe\u5907\u5c31\u4e0d\u5177\u5907\u8fd0\u884cVRRP\u7684\u6761\u4ef6\uff0c\u56e0\u4e3a\u5728\u8fd9\u79cd\u573a\u666f\u4e2d\uff0cVRRP\u534f\u8bae\u62a5\u6587\u65e0\u6cd5\u88ab\u4e0b\u9762\u7684\u8def\u7531\u5668\u900f\u4f20\u3002\u8fd9\u6837\uff0c\u4e0a\u8ff0\u4e24\u79cd\u7ec4\u7f51\u5c31\u4e0d\u80fd\u591f\u90e8\u7f72VRRP\uff0c\u6b64\u65f6\uff0c\u53ef\u91c7\u7528\u52a8\u6001\u8def\u7531\u534f\u8bae\u3002","title":"VRRP\u53cc\u4e3b\u95ee\u9898"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vrrp-vrid","text":"\u5982\u56fe\u4e2d\u6240\u793a\uff0c\u8def\u7531\u5668\u4e0e\u4ea4\u6362\u673a\u4e4b\u95f4\u901a\u8fc7VRRP\u7684\u65b9\u5f0f\u8fdb\u884c\u4e09\u5c42\u5bf9\u63a5\uff0c\u4f46\u4e0a\u3001\u4e0b\u884cVRRP\u7684VRID\u88ab\u8bbe\u7f6e\u4e3a\u4e00\u6837\uff0c\u7531\u4e8eVRRP\u901a\u8fc7VRID\u6765\u533a\u5206\u4e0d\u540c\u7684VRRP\u7ec4\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u51fa\u73b0\u4e0a\u56fe\u8fd9\u7c7b\u60c5\u51b5\u5c31\u4f1a\u9020\u6210VRRP\u7684\u8ba1\u7b97\u6df7\u4e71\uff0c\u8bef\u8ba4\u4e3a\u56db\u53f0\u8bbe\u5907\u7684\u63a5\u53e3\u52a0\u5165\u4e86\u540c\u4e00\u4e2aVRRP\u7ec4\u3002 \u6240\u4ee5\u5728\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185\uff0c\u4e0d\u540c\u7684VRRP\u7ec4\u7684VRID\u5207\u8bb0\u4e0d\u80fd\u4ea7\u751f\u51b2\u7a81\u3002 VRRP \u4e0e NQA \u7684\u8054\u52a8","title":"\u540c\u4e00\u4e2a\u5e7f\u64ad\u57df\u5185VRRP VRID\u51b2\u7a81"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_171","text":"NQA\uff08Network Quality Analysis\uff09\u662f\u6211\u53f8\u6570\u901a\u8bbe\u5907\u4e0a\u7528\u4e8e\u7f51\u7edc\u8d28\u91cf\u5206\u6790\u7684\u4e00\u4e2a\u7279\u6027\u3002\u8be5\u7279\u6027\u80fd\u591f\u68c0\u6d4b\u7f51\u7edc\u7684\u5404\u9879\u6027\u80fd\u6307\u6807\uff0c\u6700\u7b80\u5355\u5e94\u7528\u5982\u4f7f\u7528NQA\u68c0\u6d4b\u7f51\u7edc\u4e2d\u67d0\u4e2aIP\u5730\u5740\u7684\u53ef\u8fbe\u6027\u3002\u5f53\u7136NQA\u7684\u529f\u80fd\u975e\u5e38\u4e30\u5bcc\uff0c\u8fd8\u80fd\u591f\u7528\u4e8e\u91c7\u96c6\u7f51\u7edcHTTP\u7684\u603b\u65f6\u5ef6\u3001TCP\u8fde\u63a5\u65f6\u5ef6\u3001\u6587\u4ef6\u4f20\u8f93\u901f\u7387\u3001FTP\u8fde\u63a5\u65f6\u5ef6\u3001DNS\u89e3\u6790\u65f6\u5ef6\u3001DNS\u89e3\u6790\u9519\u8bef\u7387\u7b49\u3002NQA\u7684\u91c7\u96c6\u7ed3\u679c\u53ef\u4ee5\u88ab\u591a\u79cd\u5e94\u7528\u6240\u4f7f\u7528\uff0c\u4f8b\u5982\u548c\u9759\u6001\u8def\u7531\u5173\u8054\uff0c\u4ece\u800c\u4e3a\u9759\u6001\u8def\u7531\u5e26\u6765\u66f4\u597d\u7684\u7075\u6d3b\u6027\uff0c\u6216\u8005\u4e0eVRRP\u8054\u52a8\uff0c\u63d0\u9ad8VRRP\u7684\u53ef\u9760\u6027\u3002 \u4f8b\u5982\u4e0a\u56fe\u6240\u793a\u7684\u73af\u5883\u4e2d\uff0cR1\u4e0eR2\u4e4b\u95f4\u9694\u7740\u4e00\u53f0\u4e8c\u5c42\u4ea4\u6362\u673a\uff0cR1\u914d\u7f6e\u5230\u8fbe8.8.8.0/24\u7f51\u7edc\u7684\u9759\u6001\u8def\u7531\uff0c \u5982\u679cR2\u53d1\u751f\u6545\u969c\uff0c\u6216\u8005\u4ea4\u6362\u673a\u4e0eR2\u4e4b\u95f4\u7684\u4e92\u8054\u7ebf\u8def\u53d1\u751f\u6545\u969c\uff0cR1\u662f\u65e0\u6cd5\u611f\u77e5\u7684\uff0c\u8fd9\u5c31\u4f1a\u4ea7\u751f\u95ee\u9898\u3002\u4e3a \u4e86\u89c4\u907f\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u5728R1\u4e0a\u8fd0\u884c\u4e00\u7ec4NQA\u5b9e\u4f8b\uff0c\u63a2\u6d4b\u5230\u8fbe10.1.12.2\u7684\u53ef\u8fbe\u6027\uff0c\u7136\u540e\uff0c\u9759\u6001\u8def\u7531\u8ddf\u8e2a\u8fd9\u4e2a\u63a2\u6d4b\u7684\u7ed3\u679c\uff0c\u5982\u679c\u63a2\u6d4b\u7684\u7ed3\u679c\u662f\u5931\u8d25\u7684\uff0c\u610f\u5473\u774010.1.12.2\u4e0d\u53ef\u8fbe\u4e86\uff0c\u5219\u5c06\u9759\u6001\u8def\u7531\u5931\u6548\u3002","title":"\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_172","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u73af\u5883\u4e2d\uff0cVLAN10\u4e3a\u7528\u6237\u6240\u5728\u7684VLAN\u3002 SW1\u3001SW2\u521b\u5efaVLAN10\u53caVLAN11\uff0c\u5728vlanif10\u4e0a\u8fd0\u884cVRRP\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0bSW1\u4e3a\u4e3b\uff0cSW2\u4e3a\u5907\u3002 PC\u7684\u7f51\u5173\u8bbe\u7f6e\u4e3aVRRP\u7ec4\u7684\u865a\u62dfIP\u5730\u5740\u3002 SW1\u53caSW2\u7684VLAN11\u7528\u4e8e\u4e0a\u8054\uff0c\u4ec5\u505a\u6d4b\u8bd5\uff0c\u4e0d\u90e8\u7f72VRRP\u3002\u5728SW4\u4e0a\u914d\u7f6e\u4e00\u4e2aIP\u4f5c\u4e3a\u6d4b\u8bd5IP\u5730\u5740\u3002 \u8981\u6c42\u7f51\u7edc\u6b63\u5e38\u65f6\uff0cVRRP\u7ec4\u7684Master\u5728SW1\u4e0a\u3002\u5f5311.1.1.100\u4e0d\u53ef\u8fbe\u65f6\uff0cVRRP\u7ec4\u80fd\u591f\u81ea\u52a8\u5207\u6362\u3002 SW1\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a SW2\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a \u5728SW4\u4e0aundo\u6389IP\u5730\u574011.1.1.100\u6765\u6a21\u62df11.1.1.100\u4e0d\u53ef\u8fbe\u3002\u6ce8\u610f\uff0c\u6b64\u523bSW1\u4e0eSW4\u4e4b\u95f4\u7684\u8fde\u7ebf\u4ecd\u7136 \u662f\u6b63\u5e38\u7684\uff0c\u4f20\u7edf\u7684VRRP\u53ea\u80fd\u8ddf\u8e2a\u76f4\u8fde\u63a5\u53e3\u7684\u72b6\u6001\uff0c\u4f46\u662f\u4e0eNQA\u8054\u52a8\u7684VRRP\u80fd\u591f\u611f\u77e5\u5230\u8fdc\u7aefIP\u7684\u53ef\u8fbe\u6027\u3002\u56e0\u6b64\u5728undo\u638911.1.1.100\u8fd9\u4e2a\u5730\u5740\u540e\uff0cSW1\u7684NQA\u5b9e\u4f8b\u4f1a\u68c0\u6d4b\u5230\u76ee\u6807IP\u5730\u5740\u4e0d\u53ef\u8fbe\uff0c\u4ece\u800cNQA\u7684\u6d4b\u8bd5\u5b9e\u4f8b\u72b6\u6001\u4f1a\u53d8\u6210failed\uff0c\u800cVRRP\u4e5f\u4f1a\u68c0\u6d4b\u5230\u8fd9\u4e2a\u53d8\u5316\uff0c\u5e76\u5c06\u81ea\u5df1\u7684\u4f18\u5148\u7ea7\u51cf\u53bb20\uff0c\u5982\u6b64\u4e00\u6765SW2 \u5c31\u4f1a\u6210\u4e3a\u65b0\u7684Master\u3002 \u5f5311.1.1.100\u6062\u590d\u65f6\uff08\u91cd\u65b0\u914d\u7f6e\u4e0a\u8fd9\u4e2aIP\u5730\u5740\uff09\uff0cNQA\u80fd\u591f\u68c0\u6d4b\u5230\uff0c\u6d4b\u8bd5\u7528\u4f8b\u7684\u72b6\u6001\u53d8\u6210Success\uff0cVRRP\u611f\u77e5\u5230\u540e\uff0c\u5c06\u4f18\u5148\u7ea7\u53d8\u56de110\uff0c\u5982\u6b64SW1\u53c8\u62a2\u5360\u56deMaster\uff0cSW2\u5219\u53d8\u6210Backup\u3002 \u6ce8\u610f\uff0c\u5728\u90e8\u7f72NQA\u65f6\uff0c\u5404\u9879\u53c2\u6570\u7684\u914d\u7f6e\u52a1\u5fc5\u6ce8\u610f\uff0c\u5982\u679c\u53c2\u6570\u914d\u7f6e\u4e0d\u5f53\uff0c\u6709\u53ef\u80fd\u4f1a\u5bfc\u81f4NQA\u68c0\u6d4b\u7ed3\u679c\u7684\u5f02\u5e38\u3002\u53c2\u6570\u9700\u9075\u5faa\u5982\u4e0b\u89c4\u5219\uff1a interval * probe-count + timeout \\< fruency","title":"\u9a8c\u8bc1\u5b9e\u9a8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_173","text":"ACL ACL \u6982\u8ff0 ACL\uff08Access Control List\uff0c\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff09\u662f\u7531\u4e00\u7cfb\u5217permit\u6216deny\u8bed\u53e5\u7ec4\u6210\u7684\u3001\u6709\u5e8f\u7684\u89c4\u5219\u96c6\u5408\uff0c \u5b83\u901a\u8fc7\u5339\u914d\u62a5\u6587\u7684\u76f8\u5173\u5b57\u6bb5\u5b9e\u73b0\u5bf9\u62a5\u6587\u7684\u5206\u7c7b\u3002 ACL\u672c\u8eab\u53ea\u662f\u4e00\u7ec4\u89c4\u5219\uff0c\u53ea\u80fd\u533a\u5206\u67d0\u4e00\u7c7b\u62a5\u6587\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0cACL\u66f4\u50cf\u662f\u4e00\u4e2a\u5de5\u5177\uff0c\u5f53\u6211\u4eec\u5e0c\u671b\u901a\u8fc7ACL \u6765\u5b9e\u73b0\u9488\u5bf9\u7279\u5b9a\u6d41\u91cf\u7684\u8fc7\u6ee4\u65f6\uff0c\u5c31\u9700\u8981\u5728\u9002\u5f53\u7684\u5e94\u7528\u4e2d\u8c03\u7528\u5df2\u7ecf\u5b9a\u4e49\u597d\u7684ACL\u3002 ACL\u662f\u4e00\u4e2a\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\u7684\u5de5\u5177\uff0c\u80fd\u591f\u5728\u591a\u79cd\u573a\u666f\u4e0b\u88ab\u8c03\u7528\u3002","title":"\u7f51\u7edc\u5b89\u5168"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#acl","text":"\u88ab\u6d41\u91cf\u7b56\u7565\u8c03\u7528\uff0c\u7528\u4e8e\u8fc7\u6ee4\u6d41\u91cf\uff08\u53ef\u57fa\u4e8e\u6e90\u3001\u76ee\u7684IP\u5730\u5740\u3001\u534f\u8bae\u7c7b\u578b\u3001\u7aef\u53e3\u53f7\u7b49\u5143\u7d20\uff09\uff1b \u5728route-policy\u4e2d\u88ab\u8c03\u7528\uff0c\u7528\u4e8e\u5339\u914d\u7279\u5b9a\u7684\u8def\u7531\u524d\u7f00\uff0c\u4ece\u800c\u6267\u884c\u8def\u7531\u7b56\u7565\uff1b \u5728VPN\u4e2d\u8c03\u7528\uff0c\u7528\u4e8e\u5339\u914d\u611f\u5174\u8da3\u6570\u636e\u6d41\uff1b \u5728\u9632\u706b\u5899\u7684\u7b56\u7565\u90e8\u7f72\u4e2d\u8c03\u7528\uff0c\u7528\u4e8e\u5339\u914d\u6d41\u91cf\uff1b \u5176\u4ed6\u2026\u2026\u3002 ACL\uff08Access Control List\uff09\u79f0\u4e3a\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff0c\u987e\u540d\u601d\u4e49\u5b83\u662f\u4e00\u4e2a\u5217\u8868\u5f62\u5f0f\u7684\u4e00\u7ec4\u89c4\u5219\u3002ACL\u80fd\u591f\u8bc6\u522b\u4e00\u4e2aIP\u6570\u636e\u5305\u4e2d\u7684\u6e90IP\u5730\u5740\u3001\u76ee\u7684IP\u5730\u5740\u3001\u534f\u8bae\u7c7b\u578b\u3001\u6e90\u76ee\u7684\u7aef\u53e3\u7b49\u5143\u7d20\uff0c\u4ece\u800c\u80fd\u591f\u9488\u5bf9\u4e0a\u8ff0\u5143\u7d20\u8fdb\u884c\u62a5\u6587\u7684\u5339\u914d\u3002\u4f8b\u5982\u4e00\u4e2a\u7f51\u7edc\u8bbe\u5907\u5728\u67d0\u4e2a\u63a5\u53e3\u4e0a\u6e90\u6e90\u4e0d\u65ad\u5730\u63a5\u6536\u5404\u79cd\u7f51\u7edc\u6d41\u91cf\uff0c\u73b0\u5728\u6211\u4eec\u5e0c\u671b\u5bf9\u8fd9\u4e9b\u6d41\u91cf\u4e2d\u7684\u67d0\u4e9b\u7279\u5b9a\u6d41\u91cf\u8fdb\u884c\u8bc6\u522b\uff0c\u4ee5\u4fbf\u505a\u8fdb\u4e00\u6b65\u7684\u52a8\u4f5c\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7528\u5230ACL\u4e86\u3002\u6b64\u5916\uff0c\u9664\u4e86\u80fd\u591f\u7528\u4e8e\u5339\u914d\u6570\u636e\uff0cACL\u8fd8\u80fd\u591f\u7528\u4e8e\u5339\u914d\u8def\u7531\uff0c\u4f7f\u5f97\u6211\u4eec\u80fd\u591f\u9488\u5bf9\u4e0d\u540c\u7684\u8def\u7531\u90e8\u7f72\u4e0d\u540c\u7684\u8def\u7531\u7b56\u7565\u3002 \u4e0a\u56fe\u663e\u793a\u7684\u662f\u4e00\u4e2a\u7f16\u53f7\u4e3axxx\u7684ACL\uff0c\u8fd9\u4e2aACL\u4e2d\u5305\u542b\u4e86\u591a\u6761\u89c4\u5219\uff08Rule\uff09\uff0c\u6bcf\u6761\u89c4\u5219\u90fd\u6709\u4e00\u4e2a\u7f16\u53f7\uff0c\u6240\u6709\u7684\u89c4\u5219\u6309\u7167\u89c4\u5219\u7f16\u53f7\u7684\u5927\u5c0f\u8fdb\u884c\u6392\u5217\uff0c\u7f16\u53f7\u8d8a\u5c0f\uff0c\u6392\u884c\u8d8a\u524d\u3002\u5728\u6bcf\u4e00\u4e2a\u89c4\u5219\u4e2d\uff0c\u90fd\u53ef\u5b9a\u4e49\u5339\u914d\u6761\u4ef6\uff0c\u4ee5\u53ca\u76f8\u5e94\u7684\u5141\u8bb8/\u62d2\u7edd\u7684\u52a8\u4f5c\u3002\u5728ACL\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u8bbe\u5907\u4ece\u8be5ACL\u4e2d\u62e5\u6709\u6700\u5c0f\u7f16\u53f7\u7684\u89c4\u5219\u5f00\u59cb\u8fdb\u884c\u8ba1\u7b97\u4e0e\u5339\u914d\uff0c \u5982\u679c\u88ab\u5339\u914d\u5bf9\u8c61\u6ee1\u8db3\u8be5\u6761\u89c4\u5219\u4e2d\u7684\u5339\u914d\u6761\u4ef6\uff0c\u5219\u6267\u884c\u8be5\u6761\u89c4\u5219\u6240\u5b9a\u4e49\u7684\u52a8\u4f5c\uff0c\u5e76\u4e14\u4e0d\u4f1a\u518d\u5f80\u4e0b\u8ba1\u7b97\u5176\u4ed6\u89c4\u5219\uff1b\u800c\u5982\u679c\u88ab\u5339\u914d\u5bf9\u8c61\u4e0d\u6ee1\u8db3\u8be5\u6761\u89c4\u5219\u4e2d\u7684\u5339\u914d\u6761\u4ef6\uff0c\u5219\u7ee7\u7eed\u5f80\u4e0b\u4e00\u6761\u89c4\u5219\u8fdb\u884c\u5339\u914d\u3002 ACL \u7684\u5206\u7c7b ACL\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u6570\u5b57\u6765\u547d\u540d\uff0c\u4f8b\u5982ACL 2000\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u5b57\u7b26\u4e32\u6765\u547d\u540d\uff0c\u4f8b\u5982Test\u3002\u6211\u4eec\u5728\u521b\u5efaACL \u65f6\uff0c\u53ef\u4ee5\u9009\u62e9\u4e0a\u8ff0\u4e24\u79cd\u547d\u540d\u65b9\u5f0f\u4e2d\u7684\u4e00\u79cd\u3002 \u6309\u7167\u529f\u80fd\u4e0d\u540c\uff0cACL\u5b58\u5728\u591a\u79cd\u7c7b\u578b\uff0c\u5176\u4e2d\u6700\u4e3b\u8981\u7684\u4e24\u79cd\u662f\uff1a","title":"ACL\u7684\u4e3b\u8981\u4f7f\u7528\u573a\u666f\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#acl_1","text":"\u57fa\u672cACL\u53ea\u80fd\u591f\u9488\u5bf9IP\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u7b49\u4fe1\u606f\u8fdb\u884c\u6d41\u91cf\u5339\u914d\u3002\u4f8b\u5982\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u57fa\u672cACL\u6765\u62d2\u7edd\u6e90IP\u5730\u5740\u6bb5\u4e3a192.168.1.0/24\u7684\u62a5\u6587\u3002\u5982\u679c\u5728\u4ea4\u6362\u673a\u4e0a\u4f7f\u7528\u6570\u5b57\u547d\u540d\u7684\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u57fa\u672cACL\uff0c\u90a3\u4e48\u6570\u5b57\u7684\u8303\u56f4\u4e3a2000\uff5e2999\u3002","title":"\u57fa\u672cACL"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#acl_2","text":"\u9ad8\u7ea7ACL\u80fd\u591f\u9488\u5bf9IP\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u3001\u76ee\u7684IP\u5730\u5740\u3001\u534f\u8bae\u7c7b\u578b\u3001TCP\u6e90\u6216\u76ee\u7684\u7aef\u53e3\u3001UDP\u6e90\u6216\u76ee\u7684\u7aef\u53e3\u7b49\u5143\u7d20\u8fdb\u884c\u6d41\u91cf\u5339\u914d\u3002\u56e0\u6b64\u5b83\u7684\u529f\u80fd\u76f8\u8f83\u57fa\u7840ACL\u8981\u66f4\u4e30\u5bcc\u4e00\u4e9b\u3002 \u5982\u679c\u5728\u4ea4\u6362\u673a\u4e0a\u4f7f\u7528\u6570\u5b57\u547d\u540d\u7684\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u9ad8\u7ea7ACL\uff0c\u90a3\u4e48\u6570\u5b57\u7684\u8303\u56f4\u4e3a3000\uff5e3999\u3002 ACL \u7684\u914d\u7f6e","title":"\u9ad8\u7ea7ACL"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#acl_3","text":"\u4f7f\u7528\u6570\u5b57\u547d\u540d\u7684\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u57fa\u672cACL\uff0c\u5e76\u8fdb\u5165ACL\u89c6\u56fe\uff1a \u5728\u57fa\u672cACL\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2arule\u7684\u5178\u578b\u547d\u4ee4\u5982\u4e0b\uff1a [Huawei-acl-basic- num ] rule [ rule-id ] { deny | permit } [ source { source-address source-wildcard | any }] \u5982\u679c\u4e0d\u6307\u5b9a\u89c4\u5219ID\uff0c\u5219\u589e\u52a0\u4e00\u4e2a\u65b0\u89c4\u5219\u65f6\u8bbe\u5907\u81ea\u52a8\u4f1a\u4e3a\u8fd9\u4e2a\u89c4\u5219\u5206\u914d\u4e00\u4e2aID\uff0cID\u6309\u7167\u5927\u5c0f\u6392\u5e8f\u3002\u5728\u4e0a\u9762 \u7684\u914d\u7f6e\u4e2d\uff0cwildcard\u901a\u914d\u7b26\u63a9\u7801\u7684\u6982\u5ff5\uff0c\u5176\u5b9e\u6211\u4eec\u5728OSPF\u7684\u914d\u7f6e\u4e2d\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u4e86\uff0c\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\u3002","title":"\u521b\u5efa\u57fa\u672cACL"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#acl_4","text":"\u4f7f\u7528\u6570\u5b57\u547d\u540d\u7684\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u9ad8\u7ea7ACL\uff0c\u5e76\u8fdb\u5165ACL\u89c6\u56fe\uff1a \u5728\u9ad8\u7ea7ACL\u4e2d\uff0c\u521b\u5efa\u4e00\u4e2arule\u7684\u5178\u578b\u547d\u4ee4\u5982\u4e0b\u3002\u9ad8\u7ea7ACL\u53ef\u4ee5\u7528\u4e8e\u5339\u914d\u591a\u79cd\u534f\u8bae\u7c7b\u578b\uff0c\u4f8b\u5982OSPF\u3001ICMP\u3001 TCP\u3001UDP\u3001IP\u7b49\u7b49\uff0c\u6b64\u5904\u4ee5IP\u4e3a\u4f8b\uff1a ACL \u914d\u7f6e\u5b9e\u4f8b\uff08\u8def\u7531\u5668\uff09","title":"\u521b\u5efa\u9ad8\u7ea7ACL"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#acl_5","text":"\u521d\u59cb\u60c5\u51b5\u4e0bPC1\u53caPC2\u90fd\u80fd\u591f\u8bbf\u95eeServer\u3002\u73b0\u5728\u5728GW\u7684\u63a5\u53e3\u4e0a\u5e94\u7528ACL\uff0c\u4f7f\u5f97PC2\u65e0\u6cd5\u8bbf\u95eeServer\uff0c \u800c\u5176\u4ed6\u7528\u6237\u90fd\u80fd\u591f\u8bbf\u95eeServer\u3002 GW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u57fa\u672cACL\u914d\u7f6e\u793a\u4f8b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#acl1","text":"\u521d\u59cb\u60c5\u51b5\u4e0bPC1\u53caPC2\u90fd\u80fd\u591f\u8bbf\u95eeServer\u3002\u73b0\u5728\u5728GW\u7684\u63a5\u53e3\u4e0a\u5e94\u7528ACL\uff0c\u4f7f\u5f97PC2\u65e0\u6cd5\u8bbf\u95eeServer2\uff0c \u653e\u884c\u5176\u4ed6\u6d41\u91cf\u3002GW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u9ad8\u7ea7ACL\u914d\u7f6e\u793a\u4f8b1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#acl2","text":"\u521d\u59cb\u60c5\u51b5\u4e0bPC1\u53caPC2\u90fd\u80fd\u591f\u8bbf\u95eeServer\u3002\u73b0\u5728\u5728GW\u7684\u63a5\u53e3\u4e0a\u5e94\u7528ACL\uff0c\u53ea\u7981\u6b62PC2\u8bbf\u95eeServer2\u7684 Telnet\u670d\u52a1\uff0c\u653e\u884c\u5176\u4ed6\u6d41\u91cf\u3002 GW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a ACL \u914d\u7f6e\u793a\u4f8b\uff08\u4ea4\u6362\u673a\uff09 \u5728S53\u4ea4\u6362\u673a\u4e0a\u5b8c\u6210ACL\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97R1\u65e0\u6cd5ping\u901aR2\uff0c\u4f46\u5176\u4ed6\u7684\u6240\u6709\u6d41\u91cf\u90fd\u653e\u884c\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0cR1\u65e0\u6cd5ping\u901aR2\u4f46\u662f\u53ef\u4ee5Telnet R2\u3002 \u9632\u706b\u5899\u57fa\u7840 \u9632\u706b\u5899\u6982\u8ff0","title":"\u9ad8\u7ea7ACL\u914d\u7f6e\u793a\u4f8b2"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_174","text":"\u7b80\u5355\u5730\u8bf4\uff0c\u9632\u706b\u5899\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u5212\u5206\u7f51\u7edc\u5b89\u5168\u8fb9\u754c\uff0c\u5b9e\u73b0\u5173\u952e\u7cfb\u7edf\u4e0e\u5916\u90e8\u73af\u5883\u7684\u5b89\u5168\u9694\u79bb\uff0c\u4fdd\u62a4\u5185\u90e8\u7f51\u7edc\u514d\u53d7\u5916\u90e8\u653b\u51fb\u3002\u4e0e\u8def\u7531\u5668\u76f8\u6bd4\u9632\u706b\u5899\u63d0\u4f9b\u4e86\u66f4\u4e30\u5bcc\u7684\u5b89\u5168\u9632\u5fa1\u7b56\u7565\uff0c\u63d0\u9ad8\u4e86\u5b89\u5168\u7b56\u7565\u4e0b\u6570\u636e\u62a5\u8f6c\u53d1\u901f\u7387\u3002\u7531\u4e8e\u9632\u706b\u5899\u7528\u4e8e\u5b89\u5168\u8fb9\u754c\uff0c\u56e0\u6b64\u5f80\u5f80\u517c\u5907NAT\u3001VPN\u7b49\u529f\u80fd\uff0c\u5e76\u4e14\u5728\u8fd9\u65b9\u9762\u7684\u76f8\u6bd4\u8def\u7531\u5668\u66f4\u52a0\u5f3a\u52b2\u3002","title":"\u9632\u706b\u5899\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_175","text":"\u5305\u8fc7\u6ee4\u9632\u706b\u5899(Packet Filtering)\uff1a\u5305\u8fc7\u6ee4\u5229\u7528\u5b9a\u4e49\u7684\u7279\u5b9a\u89c4\u5219\u8fc7\u6ee4\u6570\u636e\u5305\uff0c\u9632\u706b\u5899\u76f4\u63a5\u83b7\u5f97\u6570\u636e\u5305\u7684IP\u6e90\u5730\u5740\u3001\u76ee\u7684\u5730\u5740\u3001TCP/ UDP\u7684\u6e90\u7aef\u53e3\u3001\u548cTCP/UDP\u7684\u76ee\u7684\u7aef\u53e3\u3002\u5305\u8fc7\u6ee4\u9632\u706b\u5899\u7b80\u5355\uff0c\u4f46\u662f\u7f3a\u4e4f\u7075\u6d3b\u6027\uff0c\u5bf9\u4e00\u4e9b\u52a8\u6001\u534f\u5546\u7aef\u53e3\u6ca1\u6709\u529e\u6cd5\u8bbe\u7f6e\u89c4\u5219\u3002\u53e6\u5916\u5305\u8fc7\u6ee4\u9632\u706b\u5899\u6bcf\u4e2a\u5305\u90fd\u9700\u8981\u8fdb\u884c\u7b56\u7565\u68c0\u67e5\uff0c\u7b56\u7565\u8fc7\u591a\u4f1a\u5bfc\u81f4\u6027\u80fd\u6025\u5267\u4e0b\u964d\u3002 \u4ee3\u7406\u578b\u9632\u706b\u5899\uff08Application Gateway\uff09\uff1a\u4ee3\u7406\u578b\u9632\u706b\u5899\u4f7f\u5f97\u9632\u706b\u5899\u505a\u4e3a\u4e00\u4e2a\u8bbf\u95ee\u7684\u4e2d\u95f4\u8282\u70b9\uff0c\u5bf9\u5ba2\u6237\u7aef\u6765\u8bf4\u9632\u706b\u5899\u662f\u4e00\u4e2a\u670d\u52a1\u5668\uff0c\u5bf9\u670d\u52a1\u5668\u6765\u8bf4\u9632\u706b\u5899\u662f\u4e00\u4e2a\u5ba2\u6237\u7aef\u3002\u4ee3\u7406\u578b\u9632\u706b\u5899\u5b89\u5168\u6027\u8f83\u9ad8\uff0c\u4f46\u662f\u5f00\u53d1\u4ee3\u4ef7\u5f88\u5927\u3002\u5bf9\u6bcf\u4e00\u79cd\u5e94\u7528\u5f00\u53d1\u4e00\u4e2a\u5bf9\u5e94\u7684\u4ee3\u7406\u670d\u52a1\u662f\u5f88\u96be\u505a\u5230\u7684\uff0c\u56e0\u6b64\u4ee3\u7406\u578b\u9632\u706b\u5899\u4e0d\u80fd\u652f \u6301\u5f88\u4e30\u5bcc\u7684\u4e1a\u52a1\uff0c\u53ea\u80fd\u9488\u5bf9\u67d0\u4e9b\u5e94\u7528\u63d0\u4f9b\u4ee3\u7406\u652f\u6301\u3002 \u72b6\u6001\u68c0\u6d4b\u9632\u706b\u5899\uff1a\u72b6\u6001\u68c0\u6d4b\u662f\u4e00\u79cd\u9ad8\u7ea7\u901a\u4fe1\u8fc7\u6ee4\uff0c\u5b83\u68c0\u67e5\u5e94\u7528\u5c42\u534f\u8bae\u4fe1\u606f\u5e76\u4e14\u76d1\u63a7\u57fa\u4e8e\u8fde\u63a5\u7684\u5e94\u7528\u5c42\u534f\u8bae\u72b6\u6001\u3002\u5bf9\u4e8e\u6240\u6709\u8fde\u63a5\uff0c\u6bcf\u4e00\u4e2a\u8fde\u63a5\u72b6\u6001\u4fe1\u606f\u90fd\u5c06\u88ab\u7ef4\u62a4\u5e76\u7528\u4e8e\u52a8\u6001\u5730\u51b3\u5b9a\u6570\u636e\u5305\u662f\u5426\u88ab\u5141\u8bb8\u901a\u8fc7\u9632\u706b\u5899\u6216\u4e22\u5f03\u3002 \u73b0\u5728\u9632\u706b\u5899\u7684\u4e3b\u6d41\u4ea7\u54c1\u90fd\u4e3a\u72b6\u6001\u68c0\u6d4b\u9632\u706b\u5899\u3002 \u9632\u706b\u5899\u7684\u57fa\u7840\u77e5\u8bc6","title":"\u9632\u706b\u5899\u5206\u7c7b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#7221","text":"\u5b89\u5168\u533a\u57df\uff08Security Zone\uff09\uff0c\u7b80\u79f0\u4e3a\u533a\u57df\uff08Zone\uff09\uff0c\u662f\u4e00\u4e2a\u5b89\u5168\u6982\u5ff5\uff0c\u8bb8\u591a\u5b89\u5168\u7b56\u7565\u90fd\u57fa\u4e8e\u5b89\u5168\u533a\u57df\u5b9e\u65bd\u3002\u6211\u4eec\u5728\u9632\u706b\u5899\u4e0a\u521b\u5efa\u5b89\u5168\u533a\u57df\uff0c\u5e76\u4e14\u5b9a\u4e49\u8be5\u5b89\u5168\u533a\u57df\u7684\u5b89\u5168\u7ea7\u522b\uff08\u4e5f\u88ab\u79f0\u4e3a\u4f18\u5148\u7ea7\uff0c\u901a\u8fc71\uff5e100\u7684\u6570\u5b57\u8868\u793a\uff0c\u6570\u5b57\u8d8a\u5927\u8868\u793a\u5b89\u5168\u7ea7\u522b\u8d8a\u9ad8\uff09\uff0c\u7136\u540e\u5c06\u9632\u706b\u5899\u7684\u63a5\u53e3\u5173\u8054\u5230\u4e00\u4e2a\u5b89\u5168\u533a\u57df\uff0c\u90a3\u4e48\u8be5\u63a5\u53e3\u6240\u8fde\u63a5\u7684\u7f51\u7edc\u5c31\u5c5e\u4e8e\u8fd9\u4e2a\u5b89\u5168\u533a\u57df\u3002\u5c5e\u4e8e\u540c\u4e00\u4e2a\u5b89\u5168\u533a\u57df\u7684\u7528\u6237\u5177\u6709\u76f8\u540c\u7684\u5b89\u5168\u5c5e\u6027\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u5c06\u9632\u706b\u5899\u7684GE1/0/1\u63a5\u53e3\u6dfb\u52a0\u5230Trust\u533a\u57df\u4e2d\uff0c\u90a3\u4e48\u8fd9\u4e2a\u63a5\u53e3\u6240\u8fde\u63a5\u7684\u7f51\u7edc\u5c31\u88ab\u89c6\u4e3a\u5904\u4e8eTrust \u533a\u57df\u3002\u540c\u7406Internet\u88ab\u89c6\u4e3a\u5904\u4e8eUntrust\u533a\u57df\uff0c\u800c\u670d\u52a1\u5668Servers\u5219\u5904\u4e8eDMZ\u533a\u57df\u3002\u5f53\u56fe\u4e2d\u7684PC\u8bbf\u95eeInternet\u65f6\uff0c \u4ecePC\u53d1\u5f80Internet\u7684\u6d41\u91cf\u5230\u8fbe\u9632\u706b\u5899\u540e\uff0c\u9632\u706b\u5899\u8ba4\u4e3a\u8fd9\u4e9b\u6d41\u91cf\u662f\u4eceTrust\u533a\u57df\u53bb\u5f80Untrust\u533a\u57df\u7684\u6d41\u91cf\u3002","title":"7.2.2.1 \u5b89\u5168\u533a\u57df\u7684\u6982\u5ff5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#eudemon","text":"Zone \u4f18\u5148\u7ea7 \u63cf\u8ff0 Trust 85 \u8f83\u9ad8\u7ea7\u522b\u7684\u5b89\u5168\u533a\u57df\uff0c\u901a\u5e38\u7528\u4e8e\u5b9a\u4e49\u5185\u7f51\u7528\u6237\u6240\u5728\u7f51\u7edc Untrust 5 \u4f4e\u7ea7\u7684\u5b89\u5168\u533a\u57df\uff0c\u901a\u5e38\u7528\u4e8e\u5b9a\u4e49Internet\u7b49\u4e0d\u5b89\u5168\u7684\u3001\u5916\u90e8\u7684\u7f51\u7edc DMZ 50 \u4e2d\u5ea6\u7ea7\u522b\u7684\u5b89\u5168\u533a\u57df\uff0c\u901a\u5e38\u7528\u4e8e\u5b9a\u4e49\u5185\u7f51\u670d\u52a1\u5668\u6240\u5728\u533a\u57df\u3002\u56e0\u4e3a\u8fd9\u4e9b\u670d\u52a1\u5668\u867d\u7136\u90e8\u7f72\u5728\u5185 \u7f51\uff0c\u4f46\u662f\u7ecf\u5e38\u9700\u8981\u88ab\u5916\u7f51\u8bbf\u95ee\uff0c\u5b58\u5728\u4e00\u5b9a\u7684\u5b89\u5168\u9690\u60a3\uff0c\u540c\u65f6\u4e00\u822c\u53c8\u4e0d\u5141\u8bb8\u5176\u4e3b\u52a8\u8bbf\u95ee\u5916\u7f51\uff0c \u6240\u4ee5\u5c06\u5176\u90e8\u7f72\u4e00\u4e2a\u5b89\u5168\u7ea7\u522b\u6bd4Trust\u4f4e\uff0c\u4f46\u6bd4Untrust\u9ad8\u7684\u5b89\u5168\u533a\u57df\u4e2d\u3002 Local 100 \u6700\u9ad8\u7ea7\u522b\u7684\u5b89\u5168\u533a\u57df\uff0cLocal\u533a\u57df\u5b9a\u4e49\u7684\u662f\u8bbe\u5907\u672c\u8eab\uff0c\u5305\u62ec\u8bbe\u5907\u7684\u5404\u63a5\u53e3\u3002\u51e1\u662f\u7531\u9632\u706b\u5899\u81ea \u8eab\u6784\u9020\u5e76\u4e3b\u52a8\u53d1\u51fa\u7684\u62a5\u6587\u5747\u53ef\u8ba4\u4e3a\u662f\u4eceLocal\u533a\u57df\u4e2d\u53d1\u51fa\uff0c\u51e1\u662f\u76ee\u7684\u5730\u4e3a\u9632\u706b\u5899\u7684\u62a5\u6587\u5747\u53ef\u8ba4\u4e3a\u662f\u7531Local\u533a\u57df\u63a5\u6536\u3002\u7528\u6237\u4e0d\u80fd\u6539\u53d8Local\u533a\u57df\u672c\u8eab\u7684\u4efb\u4f55\u914d\u7f6e\uff0c\u5305\u62ec\u5411\u5176\u4e2d\u6dfb\u52a0\u63a5\u53e3 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7f3a\u7701\u5df2\u7ecf\u521b\u5efa\u7684\u8fd9\u4e9b\u5b89\u5168\u533a\u57df\u662f\u4e0d\u80fd\u88ab\u5220\u9664\u7684\u3002\u7528\u6237\u53ef\u4ee5\u81ea\u884c\u8bbe\u7f6e\u65b0\u7684\u5b89\u5168\u533a\u57df\u5e76\u5b9a\u4e49\u5176 \u5b89\u5168\u4f18\u5148\u7ea7\u3002 \u5728\u4ee5\u4e0a\u5b89\u5168\u533a\u57df\u4e2d\uff0c\u5f88\u591a\u4eba\u4e0d\u592a\u7406\u89e3Local\u533a\u57df\u3002\u4e0b\u9762\u6765\u91cd\u70b9\u8bb2\u8bb2\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u9632\u706b\u5899\u7684GE0/0/1\u63a5\u53e3\u88ab\u6dfb\u52a0\u5230Trust\u5b89\u5168\u533a\u57df\uff0cGE0/0/3\u63a5\u53e3\u88ab\u6dfb\u52a0\u5230Untust\u533a\u57df\u3002PC1\u53d1\u5f80 192.168.1.254\u7684\u6d41\u91cf\uff0c\u88ab\u8ba4\u4e3a\u662f\u4eceTrust\u533a\u57df\u5230Local\u533a\u57df\u7684\u6d41\u91cf\uff08\u8be5\u6d41\u91cf\u7684\u76ee\u7684\u5730\u5c31\u9632\u706b\u5899\u81ea\u8eab\uff09\uff1bPC1 \u8bbf\u95eePC2\u7684\u6d41\u91cf\uff0c\u88ab\u8ba4\u4e3a\u662f\u4eceTrust\u533a\u57df\u5230Untrust\u533a\u57df\u7684\u6d41\u91cf\uff1b \u4ece\u9632\u706b\u5899\u76f4\u63a5\u8bbf\u95ee\uff08\u4f8b\u5982ping\uff09PC1\u7684\u6d41\u91cf\uff0c\u5219\u88ab\u8ba4\u4e3a\u662f\u4eceLocal\u533a\u57df\u5230Trust\u533a\u57df\u7684\u6d41\u91cf\u3002","title":"\u534e\u4e3aEudemon\u9632\u706b\u5899\u7f3a\u7701\u5df2\u7ecf\u521b\u5efa\u5982\u4e0b\u5b89\u5168\u533a\u57df\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_176","text":"\u7528\u6237\u53ef\u81ea\u5b9a\u4e49\u5b89\u5168\u533a\u57df\uff0c\u4e5f\u53ef\u4f7f\u7528\u7cfb\u7edf\u81ea\u5e26\u7684\u5b89\u5168\u533a\u57df\uff0c\u9632\u706b\u5899\u7684\u4e00\u4e2a\u63a5\u53e3\u53ea\u80fd\u5c5e\u4e8e\u4e00\u4e2a\u7279\u5b9a\u533a\u57df\uff0c\u800c\u4e00\u4e2a\u533a\u57df\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u63a5\u53e3\uff0c\u63a5\u53e3\u53ea\u6709\u5212\u5206\u5230\u533a\u57df\u4e2d\u624d\u80fd\u6b63\u5e38\u5904\u7406\u62a5\u6587\u3002 \u5185\u90e8\u7f51\u7edc\u5e94\u5b89\u6392\u5728\u5b89\u5168\u7ea7\u522b\u8f83\u9ad8\u7684\u533a\u57df\u3002\u5916\u90e8\u7f51\u7edc\u5e94\u5b89\u6392\u5728\u5b89\u5168\u7ea7\u522b\u6700\u4f4e\u7684\u533a\u57df\u3002 \u4e00\u4e9b\u53ef\u5bf9\u5916\u90e8\u7528\u6237\u63d0\u4f9b\u6709\u6761\u4ef6\u670d\u52a1\u7684\u7f51\u7edc\u5e94\u5b89\u6392\u5728\u5b89\u5168\u7ea7\u522b\u4e2d\u7b49\u7684DMZ\u533a\u57df\u3002","title":"\u5b89\u5168\u533a\u57df\u7684\u89c4\u5212\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_177","text":"\u5728\u4e00\u53f0\u9632\u706b\u5899\u4e0a\u4e0d\u5141\u8bb8\u521b\u5efa\u4e24\u4e2a\u76f8\u540c\u5b89\u5168\u7ea7\u522b\uff08Priority\uff09\u7684\u5b89\u5168\u533a\u57df\uff1b \u9632\u706b\u5899\u7684\u63a5\u53e3\u5fc5\u987b\u52a0\u5165\u4e00\u4e2a\u5b89\u5168\u533a\u57df\uff0c\u5426\u5219\u4e0d\u80fd\u6b63\u5e38\u8f6c\u53d1\u6d41\u91cf\u3002 \u9632\u706b\u5899\u7684\u4e00\u4e2a\u63a5\u53e3\u53ea\u80fd\u5c5e\u4e8e\u4e00\u4e2a\u5b89\u5168\u533a\u57df\uff1b \u9632\u706b\u5899\u7684\u4e00\u4e2a\u5b89\u5168\u533a\u57df\u53ef\u4ee5\u62e5\u6709\u591a\u4e2a\u63a5\u53e3\uff1b \u7cfb\u7edf\u81ea\u5e26\u7684\u7f3a\u7701\u5b89\u5168\u533a\u57df\u4e0d\u80fd\u5220\u9664\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u521b\u5efa\u81ea\u5b9a\u4e49\u7684\u5b89\u5168\u533a\u57df\uff1b \u5bf9\u4e8eE1000E-N\u9632\u706b\u5899V1R1C30\u7684\u7cfb\u7edf\u8f6f\u4ef6\u7248\u672c\u800c\u8a00\uff0c\u6839\u7cfb\u7edf\u6700\u591a\u652f\u6301100\u4e2a\u5b89\u5168\u533a\u57df\uff08\u5305\u62ec4\u4e2a\u4fdd\u7559\u533a\u57df\uff09\uff0c\u6bcf\u4e2a\u865a\u62df\u7cfb\u7edf\u6700\u591a\u652f\u63018\u4e2a\u5b89\u5168\u533a\u57df\uff08\u5305\u62ec4\u4e2a\u4fdd\u7559\u533a\u57df\uff09\u3002","title":"\u5b89\u5168\u533a\u57df\u7684\u9650\u5236\u6216\u6ce8\u610f\u4e8b\u9879\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_178","text":"\u5b89\u5168\u57df\u95f4\uff08Interzone\uff09\u8fd9\u4e2a\u6982\u5ff5\u7528\u6765\u63cf\u8ff0\u6d41\u91cf\u7684\u4f20\u8f93\u901a\u9053\uff0c\u5b83\u662f\u4e24\u4e2a\u201c\u533a\u57df\u201d\u4e4b\u95f4\u7684\u552f\u4e00\u201c\u9053\u8def\u201d\u3002\u5982\u679c\u5e0c\u671b\u5bf9\u7ecf\u8fc7\u8fd9\u6761\u901a\u9053\u7684\u6d41\u91cf\u8fdb\u884c\u68c0\u6d4b\u7b49\uff0c\u5c31\u5fc5\u987b\u5728\u901a\u9053\u4e0a\u8bbe\u7acb\u201c\u5173\u5361\u201d\uff0c\u5982ASPF\u7b49\u529f\u80fd\u3002\u4efb\u610f\u4e24\u4e2a\u5b89\u5168\u533a\u57df\u90fd\u6784\u6210\u4e00\u4e2a\u5b89\u5168\u57df\u95f4\uff0c\u5e76\u5177\u6709\u5355\u72ec\u7684\u5b89\u5168\u57df\u95f4\u89c6\u56fe\u3002","title":"\u533a\u57df\u95f4\u7684\u6982\u5ff5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#inboundoutbound","text":"\u5b89\u5168\u57df\u95f4\u7684\u6570\u636e\u6d41\u52a8\u5177\u6709\u65b9\u5411\u6027\uff0c\u5305\u62ec\u5165\u65b9\u5411\uff08Inbound\uff09\u548c\u51fa\u65b9\u5411\uff08Outbound\uff09\uff1a \u5165\u65b9\u5411\uff08inbound\uff09\uff1a\u6570\u636e\u7531\u4f4e\u7ea7\u522b\u5b89\u5168\u533a\u57df\u5411\u9ad8\u7ea7\u522b\u5b89\u5168\u533a\u57df\u4f20\u8f93\u7684\u65b9\u5411\uff1b \u51fa\u65b9\u5411\uff08outbound\uff09\uff1a\u6570\u636e\u7531\u9ad8\u7ea7\u522b\u5b89\u5168\u533a\u57df\u5411\u4f4e\u7ea7\u522b\u5b89\u5168\u533a\u57df\u4f20\u8f93\u7684\u65b9\u5411\u3002","title":"Inbound\u53caOutbound"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_179","text":"","title":"\u5b89\u5168\u7b56\u7565"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_180","text":"\u5b89\u5168\u7b56\u7565\uff08Security Policy\uff09\u662f\u63a7\u5236\u8bbe\u5907\u5bf9\u6d41\u91cf\u7684\u8f6c\u53d1\uff0c\u4ee5\u53ca\u5bf9\u6d41\u91cf\u8fdb\u884c\u5185\u5bb9\u5b89\u5168\u4e00\u4f53\u5316\u68c0\u6d4b\u7684\u7b56\u7565\u3002 \u8bbe\u5907\u80fd\u591f\u8bc6\u522b\u51fa\u6d41\u91cf\u7684\u5c5e\u6027\uff0c\u5e76\u5c06\u6d41\u91cf\u7684\u5c5e\u6027\u4e0e\u5b89\u5168\u7b56\u7565\u7684\u6761\u4ef6\u8fdb\u884c\u5339\u914d\u3002\u5982\u679c\u6240\u6709\u6761\u4ef6\u90fd\u5339\u914d\uff0c \u5219\u6b64\u6d41\u91cf\u6210\u529f\u5339\u914d\u5b89\u5168\u7b56\u7565\uff0c\u8bbe\u5907\u5c06\u4f1a\u6267\u884c\u5b89\u5168\u7b56\u7565\u7684\u52a8\u4f5c\uff08\u4f8b\u5982\u5141\u8bb8\u6d41\u91cf\u901a\u884c\uff0c\u6216\u62d2\u7edd\uff09\u3002 \u5185\u5bb9\u5b89\u5168\u4e00\u4f53\u5316\u68c0\u6d4b\u662f\u6307\u4f7f\u7528\u8bbe\u5907\u7684\u667a\u80fd\u611f\u77e5\u5f15\u64ce\u5bf9\u4e00\u6761\u6d41\u91cf\u7684\u5185\u5bb9\u53ea\u8fdb\u884c\u4e00\u6b21\u68c0\u6d4b\u548c\u5904\u7406\uff0c\u5c31\u80fd\u5b9e\u73b0\u5305\u62ec\u53cd\u75c5\u6bd2\u3001\u5165\u4fb5\u9632\u5fa1\u548cURL\u8fc7\u6ee4\u5728\u5185\u7684\u5185\u5bb9\u5b89\u5168\u529f\u80fd\u3002 \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c NGFW\u7684local\u533a\u57df\u5230\u5176\u4ed6\u5b89\u5168\u533a\u57df\uff0c\u4ee5\u53ca\u57df\u5185\u7684\u5b89\u5168\u7b56\u7565\uff08\u5982trust\u5230trust\uff09\u90fd\u662f\u7981\u6b62\u7684\u3002 \u5728\u65e5\u5e38\u4e2d\uff0c\u5b89\u5168\u7b56\u7565\u6700\u4e3b\u8981\u7684\u5e94\u7528\u4e4b\u4e00\uff0c\u5c31\u662f\u5141\u8bb8\u6216\u62d2\u7edd\u6d41\u7ecf\u9632\u706b\u5899\u7684\u6570\u636e\u3002\u5b89\u5168\u7b56\u7565\u5728\u9632\u706b\u5899\u7684 security-policy\u914d\u7f6e\u89c6\u56fe\u4e0b\u5b8c\u6210\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u8be5\u89c6\u56fe\u4e0b\u6839\u636e\u9700\u8981\u521b\u5efa\u5b89\u5168\u89c4\u5219\uff08Rule\uff09\u3002 \u5982\u4e0a\u56fe\u6240\u793a\uff0csecurity-policy\u4e2d\u53ef\u4ee5\u5305\u542b\u591a\u6761\u89c4\u5219\uff0c\u5f53\u5b89\u5168\u7b56\u7565\u4e2d\u914d\u7f6e\u4e86\u591a\u6761\u89c4\u5219\u65f6\uff0c\u8bbe\u5907\u5c06\u6309\u7167\u89c4\u5219\u5728\u754c\u9762\u4e0a\u7684\u6392\u5217\u987a\u5e8f\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u5339\u914d\uff0c\u53ea\u8981\u5339\u914d\u4e86\u4e00\u6761\u89c4\u5219\u4e2d\u7684\u6240\u6709\u6761\u4ef6\uff0c\u5219\u6309\u7167\u8be5\u89c4\u5219\u4e2d\u5b9a\u4e49\u7684\u52a8\u4f5c\u3001\u9009\u9879\u8fdb\u884c\u5904\u7406\uff0c\u4e0d\u518d\u7ee7\u7eed\u5339\u914d\u5269\u4e0b\u7684\u89c4\u5219\u3002\u6240\u4ee5\u5728\u914d\u7f6e\u65f6\uff0c\u5efa\u8bae\u5c06\u6761\u4ef6\u66f4\u7cbe\u786e\u7684\u89c4\u5219\u914d\u7f6e\u5728\u524d\u9762\uff0c \u6761\u4ef6\u66f4\u5bbd\u6cdb\u7684\u89c4\u5219\u914d\u7f6e\u5728\u540e\u9762\u3002","title":"\u5b89\u5168\u7b56\u7565\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_181","text":"\u5728\u4e00\u6761\u89c4\u5219\u7684\u6761\u4ef6\u8bed\u53e5\u4e2d\uff0c\u76f8\u540c\u7c7b\u578b\u7684\u6761\u4ef6\u5185\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a\u503c\uff0c\u591a\u4e2a\u503c\u4e4b\u95f4\u662f\u201c\u6216\u201d\u7684\u5173\u7cfb\uff0c\u62a5\u6587\u7684\u5c5e\u6027\u53ea\u8981\u5339\u914d\u4efb\u610f\u4e00\u4e2a\u503c\uff0c\u5c31\u8ba4\u4e3a\u62a5\u6587\u7684\u5c5e\u6027\u5339\u914d\u4e86\u8fd9\u4e2a\u6761\u4ef6\u3002\u4f8b\u5982\u4e00\u6761\u89c4\u5219\u4e2d\u6307\u5b9a\u4e86\u6e90IP\u5730\u5740 \u6761\u4ef6\uff0c\u90a3\u4e48\u7528\u6237\u53ef\u4ee5\u6307\u5b9a\u591a\u4e2a\u6e90\u5730\u5740\uff0c\u62a5\u6587\u53ea\u9700\u8981\u5339\u914d\u5176\u4e2d\u4e00\u4e2a\u5730\u5740\uff0c\u5373\u88ab\u8ba4\u4e3a\u5339\u914d\u8be5\u6761\u4ef6\u7c7b\u578b\u3002 \u6bcf\u6761\u89c4\u5219\u4e2d\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u5339\u914d\u6761\u4ef6\uff0c\u5982\u6e90\u3001\u76ee\u7684\u5b89\u5168\u533a\u57df\uff0c\u6e90\u3001\u76ee\u7684\u5730\u5740\uff0c\u7528\u6237\u6216\u5e94\u7528\u7c7b\u578b\u7b49\u3002\u5404\u4e2a\u5339\u914d\u6761\u4ef6\u4e4b\u95f4\u662f\u201c\u4e0e\u201d\u7684\u5173\u7cfb\uff0c\u62a5\u6587\u7684\u5c5e\u6027\u4e0e\u5404\u4e2a\u6761\u4ef6\u5fc5\u987b\u5168\u90e8\u5339\u914d\uff0c\u624d\u8ba4\u4e3a\u8be5\u62a5\u6587\u5339\u914d\u8fd9\u6761\u89c4\u5219\u3002\u4f8b\u5982\u5728\u67d0\u6761\u89c4\u5219\u4e2d\uff0c\u5b9a\u4e49\u4e86\u6e90\u5730\u5740\u4e0e\u76ee\u7684\u5730\u5740\u6761\u4ef6\uff0c\u90a3\u4e48\u62a5\u6587\u5fc5\u987b\u540c\u65f6\u5339\u914d\u8be5\u6e90\u3001\u76ee\u7684\u5730\u5740\u624d\u88ab\u89c6\u4e3a\u5339\u914d\u8be5\u6761\u4ef6\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\u6240\u6709\u7684\u6761\u4ef6\u5747\u4e3aany\uff08\u4e5f\u5373\u8be5\u89c4\u5219\u4e2d\u6ca1\u6709\u5b9a\u4e49\u4efb\u4f55\u6761\u4ef6\u65f6\uff09\uff0c\u5373\u6240\u6709\u6d41\u91cf\uff08\u5305\u62ec\u57df\u5185\u6d41\u91cf\uff09\u5747\u53ef\u4ee5\u547d\u4e2d\u8be5\u89c4\u5219\u3002 \u5982\u679c\u914d\u7f6e\u4e86\u591a\u6761\u5b89\u5168\u89c4\u5219\uff0c\u5219\u8bbe\u5907\u4f1a\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u8fdb\u884c\u5339\u914d\u3002\u5982\u679c\u6d41\u91cf\u5339\u914d\u4e86\u67d0\u4e2a\u5b89\u5168\u89c4\u5219\uff0c\u5c06\u4e0d\u518d\u8fdb\u884c\u4e0b\u4e00\u4e2a\u89c4\u5219\u7684\u5339\u914d\u3002\u6240\u4ee5\u9700\u8981\u5148\u914d\u7f6e\u6761\u4ef6\u7cbe\u786e\u7684\u7b56\u7565\uff0c\u518d\u914d\u7f6e\u5bbd\u6cdb\u7684\u7b56\u7565\u3002 \u8bbe\u5907\u9ed8\u8ba4\u5b58\u5728\u4e00\u6761\u7f3a\u7701\u5b89\u5168\u89c4\u5219\uff0c\u5982\u679c\u4e0d\u540c\u5b89\u5168\u533a\u57df\u95f4\u7684\u6d41\u91cf\u6ca1\u6709\u5339\u914d\u5230\u7ba1\u7406\u5458\u5b9a\u4e49\u7684\u5b89\u5168\u89c4\u5219\uff0c \u90a3\u4e48\u5c31\u4f1a\u547d\u4e2d\u7f3a\u7701\u5b89\u5168\u89c4\u5219\uff08\u6761\u4ef6\u5747\u4e3aany\uff0c\u52a8\u4f5c\u9ed8\u8ba4\u4e3a\u7981\u6b62\uff09\u3002 \u4e0d\u540c\u5b89\u5168\u533a\u57df\u95f4\u4f20\u8f93\u7684\u6d41\u91cf\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u4eceFW\u53d1\u51fa\u7684\u6d41\u91cf\u3001FW\u63a5\u6536\u7684\u6d41\u91cf\u3001\u4e0d\u540c\u5b89\u5168\u533a\u57df\u95f4\u4f20\u8f93\u7684\u6d41\u91cf\uff09\uff0c\u53d7\u7f3a\u7701\u5b89\u5168\u7b56\u7565\u63a7\u5236\uff0c\u7f3a\u7701\u8f6c\u53d1\u52a8\u4f5c\u4e3a\u7981\u6b62\u3002 \u540c\u4e00\u5b89\u5168\u533a\u57df\u5185\u4f20\u8f93\u7684\u6d41\u91cf\u4e0d\u53d7\u7f3a\u7701\u5b89\u5168\u7b56\u7565\u63a7\u5236\uff0c\u7f3a\u7701\u8f6c\u53d1\u52a8\u4f5c\u4e3a\u5141\u8bb8\u3002\u5982\u9700\u5bf9\u57df\u5185\u6d41\u91cf\u8fdb\u884c\u8f6c\u53d1\u63a7\u5236\uff0c\u8bf7\u914d\u7f6e\u5177\u4f53\u7684\u5b89\u5168\u7b56\u7565\u3002","title":"\u5173\u4e8e\u5b89\u5168\u7b56\u7565\u4e2d\u7684\u89c4\u5219"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_182","text":"NGFW\u91c7\u7528\u4e86\u57fa\u4e8e\u201c\u72b6\u6001\u201d\u7684\u62a5\u6587\u63a7\u5236\u673a\u5236\uff1a\u53ea\u5bf9\u9996\u5305\u6216\u8005\u5c11\u91cf\u62a5\u6587\u8fdb\u884c\u68c0\u6d4b\u5c31\u786e\u5b9a\u4e00\u6761\u8fde\u63a5\u7684\u72b6\u6001\uff0c\u5927\u91cf\u62a5\u6587\u76f4\u63a5\u6839\u636e\u6240\u5c5e\u8fde\u63a5\u7684\u72b6\u6001\u8fdb\u884c\u63a7\u5236\u3002\u8fd9\u79cd\u72b6\u6001\u68c0\u6d4b\u673a\u5236\u8fc5\u901f\u63d0\u9ad8\u4e86\u9632\u706b\u5899\u7684\u68c0\u6d4b\u548c\u8f6c\u53d1\u6548\u7387\u3002 \u800c\u4f1a\u8bdd\u8868\u6b63\u662f\u4e3a\u4e86\u8bb0\u5f55\u8fde\u63a5\u7684\u72b6\u6001\u800c\u5b58\u5728\u7684\u3002\u8bbe\u5907\u5728\u8f6c\u53d1TCP\u3001UDP\u548cICMP\u62a5\u6587\u65f6\u90fd\u9700\u8981\u67e5\u8be2\u4f1a\u8bdd\u8868\uff0c\u6765\u5224\u65ad\u8be5\u62a5\u6587\u6240\u5c5e\u7684\u8fde\u63a5\u4ee5\u53ca\u76f8\u5e94\u7684\u5904\u7406\u63aa\u65bd\u3002","title":"\u4f1a\u8bdd\u8868"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_183","text":"\u4e00\u4e2a\u4f1a\u8bdd\u7684\u62a5\u6587\u80fd\u591f\u6b63\u5e38\u88ab\u9632\u706b\u5899\u8f6c\u53d1\uff0c\u901a\u5e38\u9700\u8981\u5177\u5907\u4ee5\u4e0b\u51e0\u4e2a\u6761\u4ef6\uff1a \u9632\u706b\u5899\u7684\u8def\u7531\u8868\u4e2d\u5b58\u5728\u4e0e\u8be5\u62a5\u6587\u76ee\u7684IP\u5730\u5740\u76f8\u5339\u914d\u7684\u8def\u7531\uff0c\u6216\u8005\u9ed8\u8ba4\u8def\u7531\uff1b \u9632\u706b\u5899\u7684\u5b89\u5168\u7b56\u7565\u5141\u8bb8\u8be5\u4f1a\u8bdd\u7684\u62a5\u6587\u901a\u8fc7\u3002 \u5f53\u4e00\u4e2a\u4f1a\u8bdd\u7684\u62a5\u6587\u88ab\u9632\u706b\u5899\u6b63\u5e38\u8f6c\u53d1\u65f6\uff0c\u6211\u4eec\u5e94\u8be5\u80fd\u591f\u5728\u9632\u706b\u5899\u4e0a\u770b\u5230\u76f8\u5e94\u7684\u4f1a\u8bdd\u8868\u9879\uff08Session Entry\uff09\u3002 \u9632\u706b\u5899\u7ef4\u62a4\u7740\u4e00\u4e2a\u975e\u5e38\u5173\u952e\u7684\u8868\u9879\uff1a\u4f1a\u8bdd\u8868\uff0c\u6bcf\u4e00\u4e2a\u88ab\u9632\u706b\u5899\u5141\u8bb8\u7684\u4f1a\u8bdd\u90fd\u80fd\u5728\u5176\u4e2d\u627e\u5230\u76f8\u5e94\u7684\u8868\u9879\uff0c \u5728\u8868\u9879\u4e2d\uff0c\u6211\u4eec\u80fd\u770b\u5230\u4f1a\u8bdd\u7684\u6e90IP\u5730\u5740\u3001\u76ee\u7684IP\u5730\u5740\u3001\u6e90\u7aef\u53e3\u53f7\u3001\u76ee\u7684\u7aef\u53e3\u53f7\u4ee5\u53ca\u534f\u8bae\u7c7b\u578b\u7b49\u4fe1\u606f\uff0c\u6b64\u5916\uff0c\u8fd8\u6709\u8be5\u4f1a\u8bdd\u7684\u5165\u7ad9\u533a\u57df\u3001\u51fa\u7ad9\u533a\u57df\u3001\u53bb\u5411\u62a5\u6587\u4e2a\u6570\u4ee5\u53ca\u56de\u7a0b\u62a5\u6587\u4e2a\u6570\u7b49\u3002 \u5f53\u7f51\u7edc\u51fa\u73b0\u6545\u969c\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b\u9632\u706b\u5899\u7684\u4f1a\u8bdd\u8868\u8fdb\u884c\u57fa\u672c\u7684\u6545\u969c\u5b9a\u4f4d\u3002\u4f8b\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5982\u679c\u7f51\u7edc\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u53d1\u73b0Server1\u65e0\u6cd5ping\u901a\u5916\u90e8\u7f51\u7edc\uff08External Network\uff09\u4e2d\u768410.8.8.8\u5730\u5740\uff0c\u800c\u53c8\u65e0\u6cd5\u76f4\u89c2\u5730\u5224\u65ad\u51fa\u95ee\u9898\u51fa\u73b0\u5728\u5185\u90e8\u6216\u8005\u5916\u90e8\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u5728\u9632\u706b\u5899\u4e0a\u67e5\u770b\u4f1a\u8bdd\uff1a \u4f7f\u7528**display firewall session table** \u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u9632\u706b\u5899\u7684\u4f1a\u8bdd\u8868\u3002\u4ece\u4e0a\u8ff0\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\u4ece 192.168.10.5\u8bbf\u95ee10.8.8.8\u7684\u4f1a\u8bdd\uff0c\u8be5\u4f1a\u8bdd\u7684\u534f\u8bae\u7c7b\u578b\u4e3aICMP\u3002\u4f7f\u7528**display firewall session table** **verbose**\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u4f1a\u8bdd\u7684\u8be6\u7ec6\u5185\u5bb9\uff1a HRP_A\\<FW1> display firewall session table verbose \u4e0a\u9762\u663e\u793a\u7684\u662f192.168.10.5 ping 19.8.8.8\u7684\u4f1a\u8bdd\u8be6\u7ec6\u3002\u4ece\u4e2d\u6211\u4eec\u80fd\u53d1\u73b0\u8fd9\u4e2a\u4f1a\u8bdd\u662f\u4eceTrust\u533a\u57df\u5230 Untrust\u533a\u57df\uff0c\u51fa\u7ad9\u63a5\u53e3\u4e3aGE1/0/7\uff0c\u4e0b\u4e00\u8df3\u5730\u5740\u4e3a10.1.1.2\uff0c\u53e6\u5916\u8be5\u4f1a\u8bdd\u547d\u4e2d\u7684\u662f\u5b89\u5168\u89c4\u5219test1\u3002\u5173\u6ce8\u7ea2\u8272\u5b57\u4f53\u90e8\u5206\uff0c\u8fd9\u90e8\u5206\u663e\u793a\u7684\u662f\u8fd9\u4e2a\u4f1a\u8bdd\u7684\u53bb\u5411\u53ca\u56de\u7a0b\u7684\u62a5\u6587\u4e2a\u6570\uff0c\u4ece\u4e2d\u6211\u4eec\u80fd\u770b\u5230192.168.10.5\u53d1\u9001\u4e865\u4e2a\u6570\u636e\u5305\u51fa\u53bb\uff0c\u4f46\u662f\u6536\u5230\u4e860\u4e2a\u6570\u636e\u5305\uff0c\u56e0\u6b64\u4ece\u8fd9\u4e2a\u4fe1\u606f\u53ef\u4ee5\u7b80\u5355\u7684\u5224\u65ad\u51fa\uff0c192.168.10.5 ping 10.8.8.8\u7684\u8fc7\u7a0b\u4e2d\uff0cICMP Request\u62a5\u6587\u5df2\u7ecf\u9001\u8fbe\u4e86\u9632\u706b\u5899\uff0c\u5e76\u4e14\u88ab\u5b83\u8f6c\u53d1\u51fa\u53bb\uff0c\u540c\u65f6\u9632\u706b\u5899\u6ca1\u6709\u6536\u5230\u56de\u7a0b\u7684\u62a5\u6587\uff0c\u56e0\u6b64\u95ee\u9898\u53ef\u80fd\u5e76\u4e0d\u51fa\u5728\u5185\u90e8\u3002 \u5728\u5b9e\u9645\u7684\u9879\u76ee\u4e2d\uff0c\u9632\u706b\u5899\u7684\u4f1a\u8bdd\u8868\u9879\u53ef\u80fd\u662f\u975e\u5e38\u591a\u7684\uff0c\u76f4\u63a5\u67e5\u770b\u6574\u4e2a\u4f1a\u8bdd\u8868\uff0c\u6050\u6015\u65e0\u6cd5\u51c6\u786e\u5b9a\u4f4d\u611f\u5174\u8da3\u7684\u4f1a\u8bdd\u3002\u53ef\u4ee5\u5728**display firewall session table verbose**\u547d\u4ee4\u540e\u9762\u589e\u52a0\u4e00\u4e9b\u5173\u952e\u5b57\uff0c\u8fbe\u5230\u7b5b\u9009\u7684\u76ee\u7684\u3002\u4f8b\u5982**display firewall session table verbose source inside 192.168.10.5**\u547d\u4ee4\u67e5\u770b\u7684\u662f\u6e90IP\u5730\u5740 \uff08inside\u5173\u952e\u5b57\u8868\u793a\u5982\u679c\u5b58\u5728NAT\uff0c\u5219\u4e3aNAT\u4e4b\u524d\u7684IP\u5730\u5740\uff09\u4e3a192.168.10.5\u7684\u4f1a\u8bdd\u3002\u518d\u5982**display firewall session table verbose service http**\u547d\u4ee4\u67e5\u770b\u7684\u662f\u534f\u8bae\u7c7b\u578b\u4e3aHTTP\uff08\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a80\uff09 \u7684\u4f1a\u8bdd\u3002 \u5982\u679c\u5728\u6d4b\u8bd5\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u73b0\u5728\u9632\u706b\u5899\u4e0a\u627e\u4e0d\u5230\u76f8\u5e94\u7684\u4f1a\u8bdd\u8868\u9879\uff0c\u90a3\u4e48\u8bf4\u660e\u8be5\u4f1a\u8bdd\u7684\u6d41\u91cf\u53ef\u80fd\u6ca1\u6709\u5230\u8fbe\u9632\u706b\u5899\uff0c\u6216\u8005\u5230\u8fbe\u4e86\u9632\u706b\u5899\uff0c\u4f46\u662f\u9632\u706b\u5899\u6ca1\u6709\u76f8\u5e94\u7684\u8def\u7531\u4fe1\u606f\u6307\u5bfc\u62a5\u6587\u8f6c\u53d1\uff0c\u53c8\u6216\u8005\u6709\u8def\u7531\u4fe1\u606f\u4f46\u662f\u8be5\u62a5\u6587\u6ca1\u6709\u88ab\u5b89\u5168\u7b56\u7565\u653e\u884c\u7b49\u3002\u6b64\u65f6\u9700\u8981\u8fdb\u4e00\u6b65\u5b9a\u4f4d\u95ee\u9898\u3002","title":"\u67e5\u770b\u4f1a\u8bdd\u8868"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_184","text":"\u5f53\u6d41\u91cf\u7684\u7b2c\u4e00\u4e2a\u62a5\u6587\u88ab\u9632\u706b\u5899\u8f6c\u53d1\u65f6\uff0c\u9632\u706b\u5899\u4f1a\u4f1a\u8bdd\u8868\u8001\u5316\u65f6\u95f4\u51b3\u5b9a\u4e00\u6761\u4f1a\u8bdd\u5728\u6ca1\u6709\u76f8\u5e94\u7684\u62a5\u6587\u5339\u914d\u7684\u60c5\u51b5\u4e0b\uff0c\u4f55\u65f6\u88ab\u7cfb\u7edf\u5220\u9664\u3002\u5f53\u7f3a\u7701\u7684\u4f1a\u8bdd\u8868\u8001\u5316\u65f6\u95f4\u4e0d\u80fd\u6ee1\u8db3\u73b0\u6709\u7f51\u7edc\u7684\u9700\u6c42\u65f6\uff0c\u624d\u9700\u8981\u91cd\u65b0\u8bbe\u7f6e\u3002 \u5bf9\u4e8e\u4e00\u4e2a\u5df2\u7ecf\u5efa\u7acb\u7684\u4f1a\u8bdd\u8868\u8868\u9879\uff0c\u53ea\u6709\u5f53\u5b83\u4e0d\u65ad\u88ab\u62a5\u6587\u5339\u914d\u624d\u6709\u5b58\u5728\u7684\u5fc5\u8981\u3002\u5982\u679c\u957f\u65f6\u95f4\u6ca1\u6709\u62a5\u6587\u5339\u914d\uff0c\u5219\u8bf4\u660e\u53ef\u80fd\u901a\u4fe1\u53cc\u65b9\u5df2\u7ecf\u65ad\u5f00\u4e86\u8fde\u63a5\uff0c\u4e0d\u518d\u9700\u8981\u8be5\u6761\u4f1a\u8bdd\u8868\u9879\u4e86\u3002\u6b64\u65f6\uff0c\u4e3a\u4e86\u8282\u7ea6\u7cfb\u7edf\u8d44\u6e90\uff0c\u7cfb\u7edf\u4f1a\u5728\u4e00\u6761\u8868\u9879\u8fde\u7eed\u672a\u88ab\u5339\u914d\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5c06\u5176\u5220\u9664\uff0c\u5373\u4f1a\u8bdd\u8868\u9879\u5df2\u7ecf\u8001\u5316\u3002 \u5982\u679c\u5728\u4f1a\u8bdd\u8868\u9879\u8001\u5316\u4e4b\u540e\uff0c\u53c8\u6709\u548c\u8fd9\u6761\u8868\u9879\u76f8\u540c\u7684\u4e94\u5143\u7ec4\u7684\u62a5\u6587\u901a\u8fc7\uff0c\u5219\u7cfb\u7edf\u4f1a\u91cd\u65b0\u6839\u636e\u5b89\u5168\u7b56\u7565\u51b3\u5b9a\u662f\u5426\u4e3a\u5176\u5efa\u7acb\u4f1a\u8bdd\u8868\u9879\u3002\u5982\u679c\u4e0d\u80fd\u5efa\u7acb\u4f1a\u8bdd\u8868\u9879\uff0c\u5219\u8fd9\u4e2a\u62a5\u6587\u662f\u4e0d\u80fd\u88ab\u8f6c\u53d1\u7684\u3002 \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u7cfb\u7edf\u7f3a\u7701\u7684\u4f1a\u8bdd\u8868\u8001\u5316\u65f6\u95f4\u3002\u5982\u679c\u9700\u8981\u4fee\u6539\uff0c\u9700\u8981\u9996\u5148\u5bf9\u5b9e\u9645\u7f51\u7edc\u4e2d\u6d41\u91cf\u7684\u7c7b\u578b\u548c\u8fde\u63a5\u6570\u4f5c\u51fa\u4f30\u8ba1\u548c\u5224\u65ad\u3002\u5bf9\u4e8e\u67d0\u4e9b\u9700\u8981\u8fdb\u884c\u957f\u65f6\u95f4\u8fde\u63a5\u7684\u7279\u6b8a\u4e1a\u52a1\uff0c\u5efa\u8bae\u914d\u7f6e\u957f\u8fde\u63a5\u529f\u80fd\uff08\u5728\u4e0b\u4e00\u4e2a\u5c0f\u8282\u4ecb\u7ecd\uff09\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u5c06\u4e00\u79cd\u534f\u8bae\u7c7b\u578b\u7684\u6d41\u91cf\u7684\u8001\u5316\u65f6\u95f4\u5168\u90e8\u5ef6\u957f\u3002 [FW] firewall session aging-time service-set session-type aging-time \u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\u4fee\u6539\u67d0\u4e2a\u7279\u5b9a\u670d\u52a1\u7684\u4f1a\u8bdd\u8d85\u65f6\u65f6\u95f4\u3002\u4f8b\u5982\u547d\u4ee4\uff1a firewall session aging-time service- set ftp 1200 \uff0c\u8fd9\u6761\u547d\u4ee4\u4f1a\u9488\u5bf9\u6240\u6709FTP\u6d41\u91cf\u751f\u6548\uff0c\u5c06\u8868\u9879\u7684\u8001\u5316\u65f6\u95f4\u4fee\u6539\u4e3a1200s\u3002\u8be5\u547d\u4ee4\u9700\u8c28\u614e\u914d\u7f6e\u3002 [FW] display firewall session aging-time \u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u4e2d\u5404\u7c7b\u4f1a\u8bdd\u8868\u9879\u7684\u8001\u5316\u65f6\u95f4\u3002","title":"\u914d\u7f6e\u4f1a\u8bdd\u8868\u7684\u8001\u5316\u65f6\u95f4"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#7226","text":"\u9632\u706b\u5899\u91c7\u7528\u4f1a\u8bdd\u8868\u6765\u7ba1\u7406\u6570\u636e\u6d41\uff0c\u901a\u8fc7\u9996\u5305\u521b\u5efa\u4f1a\u8bdd\u8868\u9879\u540e\uff0c\u540e\u7eed\u62a5\u6587\u5982\u679c\u547d\u4e2d\u4f1a\u8bdd\u8868\u9879\uff0c\u5219\u6839\u636e\u8be5\u8868\u9879\u8fdb\u884c\u8f6c\u53d1\u3002\u5982\u679c\u67d0\u4e2a\u62a5\u6587\u65e2\u4e0d\u662f\u9996\u5305\uff0c\u53c8\u6ca1\u6709\u547d\u4e2d\u4f1a\u8bdd\u5c31\u4f1a\u88ab\u4e22\u5f03\u3002\u800c\u4e3a\u4e86\u4fdd\u8bc1\u7f51\u7edc\u5b89\u5168\u4ee5\u53ca\u4f1a\u8bdd\u8d44\u6e90\u7684\u5408\u7406\u5229\u7528\uff0c\u8bbe\u5907\u4e0a\u7684\u5404\u79cd\u4f1a\u8bdd\u7f3a\u7701\u8001\u5316\u65f6\u95f4\u90fd\u76f8\u5bf9\u8f83\u77ed\uff0c\u4e00\u822c\u53ea\u6709\u51e0\u5206\u949f\u3002\u5f53\u4e00\u4e2aTCP\u4f1a\u8bdd\u7684\u4e24\u4e2a\u8fde\u7eed\u62a5\u6587\u5230\u8fbe\u8bbe\u5907\u7684\u65f6\u95f4\u95f4\u9694\u5927\u4e8e\u8be5\u4f1a\u8bdd\u7684\u8001\u5316\u65f6\u95f4\u65f6\uff0c\u8bbe\u5907\u5c06\u4ece\u4f1a\u8bdd\u8868\u4e2d\u5220\u9664\u76f8\u5e94\u4f1a\u8bdd\u4fe1\u606f\u3002\u540e\u7eed\u62a5\u6587\u5230\u8fbe\u8bbe\u5907\u540e\uff0c\u8bbe\u5907\u6839\u636e\u81ea\u8eab\u7684\u8f6c\u53d1\u673a\u5236\uff0c\u5c06\u4e22\u5f03\u8be5\u62a5\u6587\uff0c\u5bfc\u81f4\u8fde\u63a5\u4e2d\u65ad\u3002 \u5728\u67d0\u4e9b\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u4e00\u4e2aTCP\u4f1a\u8bdd\u7684\u4e24\u4e2a\u8fde\u7eed\u62a5\u6587\u53ef\u80fd\u95f4\u9694\u65f6\u95f4\u5f88\u957f\u3002\u4f8b\u5982\uff1a\u7528\u6237\u9700\u8981\u67e5\u8be2\u6570\u636e\u5e93\u670d\u52a1\u5668\u4e0a\u7684\u6570\u636e\uff0c\u8fd9\u4e9b\u67e5\u8be2\u64cd\u4f5c\u7684\u65f6\u95f4\u95f4\u9694\u8fdc\u5927\u4e8eTCP\u7684\u4f1a\u8bdd\u8001\u5316\u65f6\u95f4\u3002 \u4e3a\u4e86\u89e3\u51b3FTP\u670d\u52a1\u3001\u7f51\u7ba1\u670d\u52a1\u3001TUXEDO\u670d\u52a1\u548c\u6570\u636e\u5e93\u670d\u52a1\u7b49\u4e1a\u52a1\u7684\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728\u5b89\u5168\u57df\u95f4\u914d\u7f6e\u957f\u8fde\u63a5\u529f\u80fd\uff0c\u53ef\u4ee5\u5bf9\u7279\u5b9a\u7684\u6570\u636e\u6d41\u8bbe\u7f6e\u8d85\u957f\u8001\u5316\u65f6\u95f4\uff0c\u4fdd\u8bc1\u8fd9\u4e9b\u5e94\u7528\u7684\u4f1a\u8bdd\u8868\u8868\u9879\u4e0d\u88ab\u5220\u9664\uff0c\u8fd9\u6837\u5f53\u8fd9\u4e9b\u4f1a\u8bdd\u7684\u62a5\u6587\u957f\u65f6\u95f4\u6ca1\u6709\u5230\u8fbe\u8bbe\u5907\u540e\u518d\u6b21\u5230\u8fbe\u65f6\uff0c\u4ecd\u7136\u80fd\u591f\u901a\u8fc7\u8bbe\u5907\u3002\u4ece\u800c\u4f7f\u8fd9\u4e9b\u5e94\u7528\u4e0d\u88ab\u4e2d\u65ad\u3002 \u5bf9\u4e8eNGFW\uff0c\u957f\u8fde\u63a5\u529f\u80fd\u5728\u5b89\u5168\u89c4\u5219\u914d\u7f6e\u89c6\u56fe\u4e0b\u6fc0\u6d3b\uff0c\u4f8b\u5982\uff1a \u9632\u706b\u5899\u7684\u57fa\u7840\u914d\u7f6e","title":"7.2.2.6 \u957f\u8fde\u63a5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_185","text":"","title":"\u9632\u706b\u5899\u767b\u9646\u53ca\u7ba1\u7406"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_186","text":"\u63a5\u53e3\u914d\u7f6e\u89c6\u56fe\u4e0b\u7684**service-manage**\u547d\u4ee4\u7528\u6765\u5141\u8bb8\u6216\u62d2\u7edd\u7ba1\u7406\u5458\u901a\u8fc7HTTP\u3001HTTPS\u3001Ping\u3001SSH\u3001SNMP \u4ee5\u53caTelnet**\u8bbf\u95ee\u9632\u706b\u5899\u81ea\u8eab**\uff0c\u8be5\u547d\u4ee4\u914d\u7f6e\u5728\u9632\u706b\u5899\u7684\u63a5\u53e3\u4e0a\u3002 \u5728\u63a5\u53e3\u4e0a\u542f\u7528\u8bbf\u95ee\u7ba1\u7406\u529f\u80fd\u540e\uff0c\u5373\u4f7f\u6ca1\u6709\u5f00\u542f\u8be5\u63a5\u53e3\u6240\u5728\u533a\u57df\u548cLocal\u533a\u57df\u4e4b\u95f4\u7684\u5b89\u5168\u7b56\u7565\uff0c\u7ba1\u7406\u5458\u4e5f\u80fd\u901a\u8fc7\u8be5\u63a5\u53e3\u8bbf\u95ee\u8bbe\u5907\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u7ba1\u7406\u63a5\u53e3\uff08GE0/0/0\uff09\u5141\u8bb8\u7ba1\u7406\u5458\u901a\u8fc7HTTP\u3001HTTPS\u3001Ping\u3001SSH\u3001SNMP \u4ee5\u53caTelnet\u8bbf\u95ee\u8bbe\u5907\uff0c\u975e\u7ba1\u7406\u63a5\u53e3\u4e0d\u5141\u8bb8\u7ba1\u7406\u5458\u901a\u8fc7HTTP\u3001HTTPS\u3001Ping\u3001SSH\u3001SNMP\u4ee5\u53caTelnet\u8bbf\u95ee\u8bbe\u5907\u3002 \u53ea\u6709\u5728\u62a5\u6587\u7684\u5165\u63a5\u53e3\u5f00\u542f\u4e86\u8bbf\u95ee\u7ba1\u7406\u529f\u80fd\uff0c\u624d\u53ef\u4ee5\u901a\u8fc7\u5bf9\u5e94\u7684\u63a5\u53e3\u8bbf\u95ee\u9632\u706b\u5899\u3002\u4f8b\u5982\u9700\u8981\u8bbf\u95ee\u9632\u706b\u5899\u7684 GE1/0/2\u63a5\u53e3\uff0c\u4f46\u62a5\u6587\u4eceGE1/0/1\u63a5\u53e3\u8fdb\u5165\u8bbe\u5907\uff0c\u6b64\u65f6\u5fc5\u987b\u5f00\u542fGE1/0/1\u63a5\u53e3\u7684\u8bbf\u95ee\u7ba1\u7406\u529f\u80fd\uff0c\u65b9\u53ef\u4ee5\u8bbf\u95ee GE1/0/2\u63a5\u53e3\u3002 \u63a5\u53e3\u4e0b**service-manage**\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u5b89\u5168\u7b56\u7565\uff08Security-policy\uff09\u3002\u4f8b\u5982\u867d\u7136\u5b89\u5168\u7b56\u7565\u6ca1\u6709\u653e\u901a\u63a5\u53e3GE1/0/1\u6240\u5728\u533a\u57df\u8bbf\u95eeLocal\u63a5\u53e3\u7684ping\u6d41\u91cf\uff0c\u4f46\u662fGE1/0/1\u4e0b\u914d\u7f6e\u4e86**service-manage ping permit**\uff0c\u5219\u6240\u5728\u533a\u57df\u5185\u7684\u7528\u6237\u4f9d\u7136\u80fdping\u901a\u8be5\u63a5\u53e3\u7684IP\u5730\u5740\u3002\u5f53\u7136\u5982\u679cGE1/0/1\u63a5\u53e3\u4e0b\u914d\u7f6e\u4e86**service-manage ping deny**\uff0c\u5219\u5373\u4f7f\u5b89\u5168\u7b56\u7565\u4e2d\u914d\u7f6e\u4e86\u76f8\u5e94\u7684\u89c4\u5219\u5141\u8bb8ping\u6d41\u91cf\uff0c\u6240\u5728\u533a\u57df\u5185\u7684\u7528\u6237\u4e5f\u65e0\u6cd5ping\u901a\u8be5\u63a5\u53e3\uff0c\u9664\u975e\u5c06**service-**","title":"\u9632\u706b\u5899\u7684\u63a5\u53e3\u670d\u52a1\u7ba1\u7406"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#manageundo-service-manage-enable","text":"","title":"manage\u529f\u80fd\u5173\u95ed\uff08undo service-manage enable\uff09\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_187","text":"\u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5b8c\u6210\u9632\u706b\u5899\u63a5\u53e3IP\u5730\u5740\u914d\u7f6e\uff0c\u5e76\u5c06\u63a5\u53e3\u6dfb\u52a0\u5230\u76f8\u5e94\u7684\u5b89\u5168\u533a\u57df\u3002\u5176\u4e2d\uff0cGE1/0/2\u53e3\u6dfb\u52a0\u5230\u65b0\u5efa\u7684\u5b89\u5168\u533a\u57dfom\u3002","title":"\u63a5\u53e3\u53ca\u5b89\u5168\u533a\u57df\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ssh","text":"PC\u8fde\u63a5\u5728FW\u7684GE1/0/1\u63a5\u53e3\u4e0a\uff0c\u914d\u7f6e\u4e0e\u9632\u706b\u5899\u76f8\u540c\u7f51\u6bb5\u7684IP\u5730\u5740\u3002\u73b0\u5728\u8981\u6c42PC\u80fd\u591f\u901a\u8fc7SSH\u7684\u65b9\u5f0f\uff0c\u8bbf\u95ee FW\u7684GE1/0/1\u63a5\u53e3\u4ece\u800cSSH\u5230\u9632\u706b\u5899\u3002","title":"SSH\u670d\u52a1\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_188","text":"\u4e0b\u56fe\u901a\u8fc7\u7b80\u5355\u7684\u65b9\u5f0f\u5c55\u793a\u4e86\u5b89\u5168\u7b56\u7565\uff08Security-policy\uff09\u4e0e\u5b89\u5168\u89c4\u5219\uff08Security rule\uff09\u7684\u5173\u7cfb\uff1a \u4e0b\u56fe\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u5b89\u5168\u89c4\u5219\u914d\u7f6e\u8303\u4f8b\uff1a \u4e0b\u9762\uff0c\u518d\u770b\u51e0\u4e2a\u4f8b\u5b50\uff1a \u7528\u6237\u53ef\u4ee5\u5728\u9632\u706b\u5899\u7684Security-Policy\u89c6\u56fe\u4e0b\uff0c\u5b9a\u4e49\u591a\u4e2arule\uff0c\u6765\u6ee1\u8db3\u4e0d\u540c\u7684\u4e1a\u52a1\u9700\u6c42\u3002 \u7cfb\u7edf\u9ed8\u8ba4\u5b58\u5728\u4e00\u6761\u7f3a\u7701\u5b89\u5168\u89c4\u5219\uff0c\u5982\u679c\u6d41\u91cf\u6ca1\u6709\u5339\u914d\u5230\u7ba1\u7406\u5458\u5b9a\u4e49\u7684\u5b89\u5168\u89c4\u5219\uff0c\u5c31\u4f1a\u547d\u4e2d\u7f3a\u7701\u5b89\u5168\u7b56\u7565\uff08\u6761\u4ef6\u4e3aany\uff0c\u52a8\u4f5c\u9ed8\u8ba4\u4e3adeny\uff09\u3002","title":"\u5b89\u5168\u7b56\u7565\u7684\u57fa\u7840\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_189","text":"\u5728\u9632\u706b\u5899\u4e2d\uff0c\u5bf9\u8c61\u7684\u7c7b\u578b\u6709\u591a\u79cd\uff0c\u4f8b\u5982\u5730\u5740\u5bf9\u8c61\u3001\u670d\u52a1\u5bf9\u8c61\u3001\u5e94\u7528\u5bf9\u8c61\u7b49\u7b49\u3002\u5728\u8bbe\u5907\u914d\u7f6e\u8fc7\u7a0b\u4e2d\uff0c\u4f8b\u5982\u4e3a\u9632\u706b\u5899\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff0c\u5982\u679c\u4e0d\u540c\u7684\u5b89\u5168\u89c4\u5219\u4e2d\uff0c\u9700\u8981\u9891\u7e41\u4f7f\u7528\u5230\u4e00\u4e2a\u76f8\u540c\u7684\u5730\u5740\u8303\u56f4\uff0c\u8fd9\u4e2a\u5730\u5740\u8303\u56f4\u5185\u5305\u542b\u591a\u4e2a\u5730\u5740\uff0c\u90a3\u4e48\u91cd\u590d\u5728\u8fd9\u4e9b\u89c4\u5219\u4e2d\u4e66\u5199\u8fd9\u4e9b\u5730\u5740\u662f\u5f88\u7e41\u7410\u7684\uff0c\u53e6\u5916\uff0c\u5982\u679c\u8fd9\u4e2a\u5730\u5740\u8303\u56f4\u8981\u53d8\u66f4\uff0c\u90a3\u4e48\u6240\u6709\u76f8\u5173\u7684\u89c4\u5219\u90fd\u9700\u8981\u8fdb\u884c\u914d\u7f6e\uff0c\u589e\u52a0\u4e86\u5de5\u4f5c\u91cf\u3002 \u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5730\u5740\u5173\u8054\u5230\u4e00\u4e2a\u5730\u5740\u5bf9\u8c61\u4e2d\uff0c\u7136\u540e\u76f4\u63a5\u5728\u5b89\u5168\u7b56\u7565\u91cc\u8c03\u7528\u8be5\u5730\u5740\u5bf9\u8c61\u5373\u53ef\u3002\u5f53\u9700\u8981\u8c03\u6574\u5730\u5740\u8303\u56f4\u65f6\uff0c\u4e5f\u53ea\u9700\u5bf9\u5730\u5740\u5bf9\u8c61\u8fdb\u884c\u4fee\u6539\u3002\u5728\u5b89\u5168\u7b56\u7565\u7684\u914d\u7f6e\u8fc7\u7a0b\u4e2d\uff0c\u4e3b\u8981\u4f7f\u7528\u5230\u7684\u5bf9\u8c61\u6709\u4e24\u79cd\uff1a\u5730\u5740\u5bf9\u8c61\u53ca\u670d\u52a1\u5bf9\u8c61\u3002\u5728\u534e\u4e3a\u9632\u706b\u5899\u4e0a\uff0c\u4f7f\u7528**ip address-set**\u547d\u4ee4\u53ef\u4ee5\u521b\u5efa\u5730\u5740\u5bf9\u8c61\uff0c\u4f7f\u7528**ip service-set**\u547d\u4ee4\u53ef\u4ee5\u521b\u5efa\u670d\u52a1\u5bf9\u8c61\u3002\u5bf9\u8c61\u521b\u5efa\u5b8c\u6210\u4e4b\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u5b89\u5168\u89c4\u5219\u4e2d\u5f15\u7528\u5b83\u3002\u4ee5\u4e0b\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684\u573a\u666f\uff0c\u4ee5\u53ca\u4e00\u4e9b\u7b80\u5355\u7684\u914d\u7f6e\u6765\u4e86\u89e3\u5bf9\u8c61\u7684\u5e94\u7528\u3002 \u9700\u6c42 \u9632\u706b\u5899\u5b89\u5168\u7b56\u7565\u914d\u7f6e \u5907\u6ce8 Trust \u533a\u57df\u7684PC1 \u53caPC2 \u90fd\u80fd \u8bbf \u95ee DMZ \u4e2d\u7684 PC3 \u7684 Telnet\u670d\u52a1 security-policy rule name test1 source-zone trust destination-zone dmz source-address 192.168.10.5 32 source-address 192.168.10.6 32 destination-address 192.168.20.11 32 service telnet action permit \u672c\u4f8b\u4e2d\uff0c\u4e24\u6761source-address\u4e4b\u95f4\u662f\u201c\u6216\u201d\u7684\u5173\u7cfb\u3002 Trust \u533a\u57df\u7684PC1 \u53caPC2 \u90fd\u80fd \u8bbf \u95ee DMZ \u4e2d\u7684 PC3 \u7684 Telnet\u670d\u52a1\uff0c\u4f7f\u7528\u5730\u5740\u5bf9\u8c61\u5b8c\u6210\u4e0a\u8ff0\u9700\u6c42 ip address-set add1 type object address 192.168.10.5 mask 32 address 192.168.10.6 mask 32 security-policy rule name test1 source-zone trust destination-zone dmz destination-address 192.168.20.11 32 source-address address-set add1 service telnet action permit \u521b\u5efa\u5730\u5740\u5bf9\u8c61\u540e\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u5730\u5740\uff0c\u6216\u5730\u5740\u8303\u56f4\u6dfb\u52a0\u5230\u8be5\u5bf9\u8c61\u4e2d\uff0c\u5e76\u5728\u5b89\u5168\u7b56\u7565\u4e2d\u8c03\u7528\uff0c\u4ece\u800c\u7b80\u5316\u914d\u7f6e Trust\u533a\u57df\u7684\u4efb\u610fPC\u90fd\u80fd\u8bbf\u95ee DMZ \u4e2d \u7684 PC3 \u7684 TCP9931\u7aef\u53e3\uff0c\u4f7f\u7528\u670d\u52a1\u5bf9\u8c61\u5b8c\u6210\u4e0a\u8ff0\u9700\u6c42 ip service-set port1 type object service protocol tcp destination-port 9931 security-policy rule name test1 source-zone trust destination-zone dmz destination-address 192.168.20.11 32 service port1 action permit \u670d\u52a1\u4ee3\u8868\u4e86\u6d41\u91cf\u7684\u534f\u8bae\u7c7b\u578b\u3002\u521b\u5efa\u670d\u52a1\u5bf9\u8c61\u540e\uff0c\u53ef\u4ee5\u5c06\u4e00\u79cd\u6216\u591a\u79cd\u534f\u8bae\u7c7b\u578b\uff0c\u6216\u8005TCP/UDP\u7aef\u53e3\u53f7\u6dfb\u52a0\u5230\u8be5\u5bf9\u8c61\u4e2d\uff0c\u5e76\u5728\u5b89\u5168\u7b56\u7565\u4e2d\u8c03\u7528\uff0c\u4ece\u800c\u7b80\u5316\u914d\u7f6e Trust\u533a\u57df\u7684\u4efb\u610fPC\u90fd\u80fd\u8bbf\u95ee DMZ \u4e2d \u7684 PC3 \u7684 TCP9931 \u3001 TCP9932 \u3001 TCP9933\u3001UDP2281\u7aef\u53e3 ip service-set port1 type object service protocol tcp destination-port 9931 to 9933 service protocol udp destination-port 2281 security-policy rule name test1 source-zone trust destination-zone dmz destination-address 192.168.20.11 32 service port1 action permit","title":"\u5728\u5b89\u5168\u7b56\u7565\u4e2d\u4f7f\u7528\u5bf9\u8c61"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf_8","text":"ATAE3.0/E9000\u673a\u6846\u901a\u8fc7Fabric\u4ea4\u6362\u677f\u5806\u53e0\u7ec4\u8fde\u63a5\u5230\u9632\u706b\u5899\u3002 Server\u7684\u7f3a\u7701\u7f51\u5173\u8bbe\u7f6e\u4e3aFW\u7684GE1/0/1\u63a5\u53e3\u3002 \u5b8c\u6210FW \u7684\u914d\u7f6e\uff0c \u4e0eSW \u5efa\u7acbOSPF \u90bb\u63a5\u5173\u7cfb\uff0c \u4ea4\u4e92OSPF \u8def\u7531\u3002\u4f7f\u5f97SW \u80fd\u591f\u4eceOSPF \u83b7\u77e5\u5230\u8fbe 192.168.10.0/24\u7684\u8def\u7531\u3002 FW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u9996\u5148\u67e5\u770b\u4e00\u4e0bOSPF\u90bb\u63a5\u5173\u7cfb\u7684\u5efa\u7acb\u60c5\u51b5\uff1a \u518d\u770b\u4e00\u4e0bSW\u7684\u8def\u7531\u8868\uff1a SW\u5df2\u7ecf\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u4e86192.168.10.0/24\u7684\u8def\u7531\u3002\u6b64\u65f6Server\u5373\u53efping\u901aSW\uff0810.1.1.2\uff09\u3002","title":"\u9632\u706b\u5899\u7684OSPF\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_190","text":"\u9632\u706b\u5899\u7684\u4e09\u4e2a\u63a5\u53e3\u7684IP\u5730\u5740\u5982\u56fe\u6240\u793a\uff1b \u5b8c\u6210\u63a5\u53e3\u914d\u7f6e\uff0c\u5e76\u5c06\u9632\u706b\u5899\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u76f8\u5e94\u7684\u5b89\u5168\u533a\u57df\uff1b \u5b8c\u6210\u9632\u706b\u5899\u7684\u5b89\u5168\u7b56\u7565\u914d\u7f6e\uff0c\u4f7f\u5f97PC1\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eePC2\uff0c\u4f46\u662fPC2\u65e0\u6cd5\u4e3b\u52a8\u8bbf\u95eePC1\uff1b \u5b8c\u6210\u9632\u706b\u5899\u7684\u5b89\u5168\u7b56\u7565\u914d\u7f6e\uff0c\u4f7f\u5f97PC2\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eeWebServer\u7684WEB\u670d\u52a1\u3002\u9632\u706b\u5899\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cPC1\u5373\u53ef\u4e3b\u52a8\u53d1\u8d77\u8bbf\u95eePC2\uff0c\u800cPC2\u65e0\u6cd5\u4e3b\u52a8\u8bbf\u95eePC1\uff1b\u53e6\u5916\uff0cPC2\u80fd\u591f\u8bbf\u95eeWebServer \u7684HTTP\u670d\u52a1\u3002","title":"\u9632\u706b\u5899\u57fa\u7840\u914d\u7f6e\u793a\u4f8b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_191","text":"\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u80fd\u9700\u8981\u5728\u9632\u706b\u5899\u4e0a\u8fdb\u884c\u6293\u5305\uff0c\u5e76\u5bf9\u6355\u83b7\u7684\u62a5\u6587\u8fdb\u884c\u5206\u6790\uff0c\u6b64\u65f6\u53ef\u4ee5\u5728\u9632\u706b\u5899\u4e0a\u914d\u7f6e\u4e94\u5143\u7ec4\u6293\u5305\u3002\u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0c\u5728\u9632\u706b\u5899FW1\u4e0a\u6355\u83b7Server1\u53d1\u5f80100.1.1.2\u7684\u62a5\u6587\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u53ef\u4ee5\u5728FW1\u4e0a\u67e5\u770b\u751f\u6548\u7684\u914d\u7f6e\uff1a HRP_A[FW1]display packet-capture configuration capture number: 1000 capture mode: verbose send mode: manual interface-name packet-direction acl-number queue-id capt-type GigabitEthernet1/0/0 inbound 3001 0 IPv4 GigabitEthernet1/0/0 outbound 3001 0 IPv4 \u73b0\u5728\uff0cFW1\u5c06\u4f1a\u5f00\u59cb\u6293\u53d6\u7b26\u5408\u6761\u4ef6\u7684\u62a5\u6587\u3002\u6b64\u65f6\u5982\u679cServer1 ping 100.1.1.2\uff0c\u800c\u4e14ping\u4e865\u4e2a\u62a5\u6587\uff0c\u90a3\u4e48\u53ef \u4ee5\u5728FW1\u4e0a\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a \u73b0\u5728\uff0c\u8fd9\u4e9b\u62a5\u6587\u5df2\u7ecf\u88abFW1\u7f13\u5b58\u5728\u961f\u52170\u4e2d\uff0c\u5982\u679c\u8981\u5c06\u62a5\u6587\u4fdd\u5b58\u4e0b\u6765\u8fdb\u884c\u5206\u6790\uff0c\u5219\u53ef\u4ee5\u5c06\u961f\u52170\u4e2d\u7684\u62a5\u6587\u4fdd\u5b58\u5728FW1\u7684\u78c1\u76d8\u7a7a\u95f4\u4e2d\uff0c\u5f62\u6210*.cap\u6587\u4ef6\uff0c\u4f8b\u5982\u4fdd\u5b58\u4e3apkt222.cap\u6587\u4ef6\u3002 HRP_A[FW1] packet-capture queue 0 to-file pkt222.cap \u6b64\u65f6\u4f7f\u7528dir\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770b\u5230\u8be5\u6587\u4ef6\uff1a HRP_A\\<FW1>dir Directory of hda1:/ Idx Attr Size(Byte) Date Time FileName 0 -rw- 119309177 Jan 13 2014 17:39:02 suampua10v1r1c00spc100.bin 1 -rw- 61 Jun 26 2017 10:28:58 private-data.txt 2 \u2026\u2026 drw- - Jan 13 2014 17:48:10 isp 21 -rw- 594 Jul 11 2017 11:38:34 pkt222.cap \u901a\u8fc7FTP/SFTP\u7b49\u65b9\u5f0f\u4eceFW1\u4e0a\u4e0b\u8f7d\u8be5\u6587\u4ef6\uff0c\u5373\u53ef\u5bf9\u62a5\u6587\u8fdb\u884c\u5206\u6790\u3002 \u5b8c\u6210\u6293\u5305\u540e\uff0c\u9700\u8981\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a","title":"\u62a5\u6587\u6355\u83b7"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_192","text":"\u914d\u7f6e\u4e94\u5143\u7ec4\u6293\u5305\u4f1a\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u5f71\u54cd\u8bbe\u5907\u6027\u80fd\uff0c\u56e0\u6b64\u901a\u5e38\u53ea\u5728\u7f51\u7edc\u95ee\u9898\u5b9a\u4f4d\u65f6\u4f7f\u7528\u3002\u5728\u7f51\u7edc\u95ee\u9898\u5b9a\u4f4d\u7ed3\u675f\u540e\uff0c\u5fc5\u987b\u505c\u6b62\u6293\u5305\u8fdb\u7a0b\uff0c\u5e76\u4e14\u6e05\u7a7a\u6293\u5305\u961f\u5217\uff0c\u91ca\u653e\u5185\u5b58\u3002 \u542f\u52a8\u6293\u5305\u9700\u5728\u6570\u901a\u5de5\u7a0b\u5e08\u7684\u6307\u5bfc\u4e0b\u8fdb\u884c\uff0c\u5e76\u9009\u62e9\u4e1a\u52a1\u6d41\u91cf\u8f83\u5c0f\u7684\u65f6\u95f4\u8fdb\u884c\uff0c\u4ee5\u9632\u64cd\u4f5c\u5931\u8bef\u5f15\u8d77\u4e1a\u52a1\u4e2d\u65ad\u3002\u7981\u6b62\u968f\u610f\u5f00\u542f\u6293\u5305\u3002 \u547d \u4ee4 packet-capture { no-ip-packet | all-packet | ipv4-packet acl-number | ipv6-packet acl6- number } [ inbound | outbound ] [ queue queue-id ] interface interface-type interface-number\u7528\u4e8e\u914d\u7f6e\u6293\u5305\u63a5\u53e3\u3001\u65b9\u5411\u4ee5\u53ca\u8be5\u63a5\u53e3\u7528\u6765\u5b58\u50a8\u6293\u5305\u7684\u961f\u5217\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u540c\u65f6\u6293\u53d6\u5165\u65b9\u5411\u548c\u51fa\u65b9\u5411\u7684\u62a5\u6587\uff0c\u5b58\u50a8\u6293\u5305\u7684\u961f\u5217\u4e3a0\u3002\u8bbe\u5907\u63d0\u4f9b\u56db\u4e2a\u961f\u5217\u7528\u4e8e\u5b58\u50a8\u6293\u53d6\u7684\u62a5\u6587\u3002\u8bbe\u5907\u5355\u6b21\u5355\u5411\u6700\u5927\u6293\u5305\u6570\u76ee\u4e3a 1000\u4e2a\u62a5\u6587\u3002\u51fa\u5165\u65b9\u5411\u6700\u591a\u5404\u5b58\u50a81000\u4e2a\u62a5\u6587\uff0c\u6bcf\u4e2a\u961f\u5217\u6700\u591a\u5b58\u50a8\u51712000\u4e2a\uff0c\u961f\u5217\u62a5\u6587\u8d85\u8fc72000 \u540e\uff0c\u65b0\u7684\u62a5\u6587\u5c06\u88ab\u4e22\u5f03\uff0c\u4e0d\u518d\u8fdb\u5165\u961f\u5217\u3002\u5728\u961f\u5217\u5b58\u50a8\u52302000\u4e2a\u62a5\u6587\u4ee5\u540e\u5982\u9700\u91cd\u65b0\u6293\u5305\uff0c\u53ef\u4ee5\u914d\u7f6e\u8be5\u63a5\u53e3\u53e6\u4e00\u4e2a\u961f\u5217\uff0c\u6216\u8005\u4f7f\u7528reset packet-capture queue queue-id\u547d\u4ee4\u6e05\u7a7a\u8be5\u961f\u5217\u3002 \u5728\u672c\u4f8b\u4e2d\uff0c\u53ea\u8981Server1\u53d1\u5f80100.1.1.2\u7684\u62a5\u6587\u5230\u8fbeFW1\u7684GE1/0/0\u63a5\u53e3\uff0c\u4fbf\u4f1a\u88ab\u6355\u83b7\uff0c\u5373\u4f7fFW1\u7684\u5b89\u5168\u7b56\u7565\u5e76\u672a\u5141\u8bb8Server1\u4e3b\u52a8\u8bbf\u95ee100.1.1.2\u3002 NAT NAT \u6982\u8ff0 NAT\uff08Network Address Translation\uff0c\u7f51\u7edc\u5730\u5740\u8f6c\u6362\uff09\u662f\u7f13\u89e3IPv4\u516c\u7f51\u5730\u5740\u67af\u7aed\u7684\u4e00\u4e2a\u91cd\u8981\u529f\u81e3\uff0c\u901a\u8fc7\u5728\u7f51\u7edc\u8bbe\u5907\u4e0a\u90e8\u7f72NAT\uff0c\u7f51\u7edc\u8bbe\u5907\u80fd\u591f\u5bf9\u7279\u5b9a\u62a5\u6587\u7684IP\u5730\u5740\u548c\uff08\u6216\uff09\u7aef\u53e3\u53f7\u8fdb\u884c\u8f6c\u6362\u3002 IP\u5730\u5740\u6709\u4e24\u79cd\u7c7b\u578b\uff1a\u516c\u7f51\u53ca\u79c1\u7f51\uff08Public and Private\uff09\u3002\u5176\u4e2d\u79c1\u7f51IP\u53ea\u80fd\u5728\u672c\u5730\u7f51\u7edc\uff08\u5c40\u57df\u7f51\uff09\u4e2d\u4f7f\u7528\uff0c\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u516c\u7f51\uff08Internet\uff09\uff0c\u8fd9\u610f\u5473\u7740\u5c40\u57df\u7f51PC\u8981\u8bbf\u95ee\u516c\u7f51\u5c31\u5fc5\u987b\u62e5\u6709\u516c\u7f51IP\uff0c\u800c\u516c\u7f51IP\u8d44\u6e90\u672c\u8eab\u5c31\u975e\u5e38\u7a00\u7f3a\uff0c\u90a3\u4e48\uff0c\u80fd\u5426\u5728\u5c40\u57df\u7f51\u5185\u7edf\u4e00\u90e8\u7f72\u79c1\u7f51IPv4\u5730\u5740\u7a7a\u95f4\uff0c\u7136\u540e\u53c8\u80fd\u591f\u8ba9\u7f51\u5185\u7528\u6237\u8bbf\u95eeInternet\u5462\uff1fNAT\u6280\u672f\u80fd\u591f\u5bf9IP\u62a5\u6587\u4e2d\u7684\u6e90\u6216\u76ee\u7684\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u4ece\u800c\u5f53\u6e90\u5730\u5740\u4e3a\u79c1\u7f51IP\u5730\u5740\u7684\u6570\u636e\u5305\u5230\u8fbe\u7f51\u7edc\u51fa\u53e3\u65f6\uff0c\u7531NAT \u8bbe\u5907\u5bf9\u79c1\u7f51\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u8f6c\u6362\u6210\u4e00\u4e2a\u5408\u6cd5\u7684\u516c\u7f51IP\u5e76\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u5230\u516c\u7f51\uff0c\u800c\u5f53\u56de\u7a0b\u6570\u636e\u5305\u5230\u8fbe\u65f6\uff0c\u53c8\u5c06\u76ee\u7684IP\u4fee\u6539\u4e3a\u6b64\u524d\u7684\u90a3\u4e2a\u79c1\u7f51IP\u5730\u5740\u3002","title":"\u6ce8\u610f\u4e8b\u9879\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat","text":"NAT \u7c7b\u578b\u8be6\u89e3 \u6211\u4eec\u7b80\u5355\u7684\u5c06NAT\u5206\u4e3a\u4e24\u7c7b\uff1a","title":"NAT\u7684\u4f18\u7f3a\u70b9\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipsource-ip-address-based-nat","text":"No-Port\u5730\u5740\u8f6c\u6362\uff08No-Port Address Translation\uff0cNo-PAT\uff09 \u7f51\u7edc\u5730\u5740\u53ca\u7aef\u53e3\u8f6c\u6362\uff08Network Address Port Translation\uff0cNAPT\uff09","title":"\u6e90IP\u5730\u5740\u8f6c\u6362\uff08Source IP address-based NAT\uff09:"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipdestination-ip-address-based-nat","text":"NAT Server \u76ee\u7684NAT","title":"\u76ee\u7684IP\u5730\u5740\u8f6c\u6362\uff08Destination IP address-based NAT\uff09:"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#7321-nat1ipno-pat","text":"No-PAT\u4e5f\u53ef\u4ee5\u79f0\u4e3a\u201c\u4e00\u5bf9\u4e00\u5730\u5740\u8f6c\u6362\u201d\uff0c\u5728\u5730\u5740\u8f6c\u6362\u8fc7\u7a0b\u4e2d\uff0c\u6570\u636e\u5305\u7684\u6e90IP\u5730\u5740\u7531\u79c1\u7f51\u5730\u5740\u8f6c\u6362\u4e3a\u516c\u7f51\u5730\u5740\uff0c\u4f46\u7aef\u53e3\u53f7\uff08TCP\u6216UDP\u7aef\u53e3\u53f7\uff09\u4e0d\u505a\u8f6c\u6362\u3002\u8bbe\u5907\u4f1a\u5c06\u8f6c\u6362\u524d\u540e\u7684\u5730\u5740\u7684\u6240\u6709\u7aef\u53e3\u8fdb\u884c\u4e00\u4e00\u5bf9\u5e94\u3002\u8fd9\u79cd\u5e94\u7528\u7684\u4f18\u70b9\u662f\u79c1\u7f51\u5730\u5740\u7684\u6240\u6709\u7aef\u53e3\u4e0d\u505a\u8f6c\u6362\uff0c\u7f3a\u70b9\u662f\u8be5\u516c\u7f51\u5730\u5740\u4e0d\u80fd\u88ab\u5176\u4ed6\u79c1\u7f51\u5730\u5740\u4f7f\u7528\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u79c1\u7f51\u5730\u5740\u9700\u72ec\u5360\u4e00\u4e2a\u516c\u7f51\u5730\u5740\u3002\u4f8b\u5982\uff0c\u82e5\u5730\u5740\u6c60\u4e2d\u7684\u516c\u7f51IP\u5730\u5740\u53ea\u67092\u4e2a\uff0c\u7531\u4e8e\u4e00\u53f0\u79c1\u7f51\u4e3b\u673a\u5728\u501f\u7528\u5176\u4e2d\u7684\u4e00\u4e2a\u516c\u7f51IP\u8bbf\u95ee\u516c\u7f51\u65f6\u4f1a\u5360\u7528\u8fd9\u4e2aIP\u7684\u6240\u6709\u7aef\u53e3\uff0c\u56e0\u6b64\u8fd9\u79cd\u60c5\u51b5\u53ea\u5141\u8bb8\u6700\u591a\u6709\u4e24\u53f0\u79c1\u7f51\u4e3b\u673a\u540c\u65f6\u8bbf\u95ee\u516c\u7f51\uff0c\u5176\u4ed6\u7684\u79c1\u7f51\u4e3b\u673a\u8981\u7b49\u5230\u5176\u4e2d\u4e00\u53f0\u4e3b\u673a\u4e0d\u518d\u8bbf\u95ee\u516c\u7f51\u4e14\u5b83\u5360\u7528\u7684\u516c\u7f51IP\u5730\u5740\u88ab\u91ca\u653e\u540e\uff0c\u624d\u53ef\u518d\u8fdb\u884c\u516c\u7f51\u8bbf\u95ee\u3002 \u4ee5\u4e0a\u56fe\u4e3a\u4f8b\uff0c\u5047\u8bbe\u7f51\u7edc\u7ba1\u7406\u5458\u7533\u8bf7\u5230\u4e00\u4e2a\u516c\u7f51\u5730\u5740\uff08200.1.1.100\uff09\uff0c\u5e76\u4e14\u5728\u9632\u706b\u5899\u4e0a\u90e8\u7f72No-PAT\u3002\u73b0\u5728 192.168.1.1\u8fd9\u53f0PC\u8981\u8bbf\u95ee\u516c\u7f51\u76848.8.8.8\uff0c\u59cb\u53d1\u6570\u636e\u5305\u7684\u6e90\u76ee\u7684IP\u5730\u5740\u5982\u56fe\u6240\u793a\u3002\u6570\u636e\u5305\u5230\u8fbe\u4e86\u9632\u706b\u5899\u540e\uff0c \u9632\u706b\u5899\u6839\u636eNAT\u6620\u5c04\u8868\u9879\uff0c\u5c06\u6e90\u5730\u5740192.168.1.1\u4fee\u6539\u4e3a200.1.1.100\uff08\u7aef\u53e3\u53f7\u4e0d\u8f6c\u6362\uff09\uff0c\u7136\u540e\u5c06\u62a5\u6587\u8f6c\u53d1\u51fa \u53bb\uff0c\u8fd9\u4e2a\u62a5\u6587\u5728Internet\u4e2d\u6700\u7ec8\u88ab\u8f6c\u53d1\u52308.8.8.8\u3002\u73b0\u57288.8.8.8\u8981\u56de\u590d\u62a5\u6587\uff0c\u6570\u636e\u5305\u7684\u76ee\u7684\u5730\u5740\u4e3a200.1.1.100 \uff08\u6ce8\u610f\uff0c\u516c\u7f51\u662f\u65e0\u8bba\u5982\u4f55\u4e5f\u4e0d\u77e5\u6653192.168.1.1\u5b58\u5728\u7684\uff09\u3002\u8fd9\u4e2a\u6570\u636e\u5305\u5230\u8fbe\u4e86\u9632\u706b\u5899\u540e\uff0c\u9632\u706b\u5899\u6839\u636eNAT\u6620\u5c04\u8868\u9879\uff0c\u5c06\u76ee\u7684IP\u4fee\u6539\u4e3a192.168.1.1\u5e76\u8f6c\u53d1\u51fa\u53bb\uff0c\u6700\u7ec8\uff0c\u8fd9\u4e2a\u6570\u636e\u5305\u56de\u5230\u4e86192.168.1.1\u3002\u8fd9\u5c31\u662fNAT\u4e00\u5bf9\u4e00\u6620\u5c04\u7684\u5de5\u4f5c\u539f\u7406\u3002\u4ece\u4e0a\u9762\u7684\u63cf\u8ff0\u53ef\u4ee5\u770b\u51fa\u6765\uff0c\u5176\u5b9e\u8fd9\u79cdNAT\u7c7b\u578b\u5e76\u6ca1\u6709\u7f13\u89e3\u516c\u7f51IP\u5730\u5740\u8017\u5c3d\u7684\u95ee\u9898\uff0c\u56e0\u4e3a\u4f60\u5982\u679c\u670910\u53f0\u5185\u7f51PC\u8981\u8bbf\u95ee\u516c\u7f51\uff0c\u76f8\u5f53\u4e8e\u8981\u670910\u4e2a\u516c\u7f51IP\u3002 \u5728\u5b9e\u9645\u7684\u90e8\u7f72\u4e2d\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u57fa\u4e8eIP\u5730\u5740\u6c60\u7684No-PAT\uff0c\u4e5f\u5c31\u662f\u5c06\u7533\u8bf7\u5230\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u516c\u7f51IP\u5730\u5740\u653e\u7f6e\u5728\u4e00\u4e2aIP\u5730\u5740\u6c60\u4e2d\uff0c\u7136\u540e\u5c06\u8be5\u5730\u5740\u6c60\u5e94\u7528\u4e8e\u6e90\u5730\u5740\u8f6c\u6362\u3002\u6b64\u65f6\u5f53\u67d0\u4e2a\u5185\u7f51\u8bbe\u5907\u53d1\u9001\u7684\u62a5\u6587\u9700\u8981\u8fdb\u884cNAT\u65f6\uff0c \u9632\u706b\u5899\u5c06\u4f1a\u4ece\u5730\u5740\u6c60\u4e2d\u9009\u62e9\u4e00\u4e2a\u7a7a\u95f2\u7684\u5730\u5740\uff0c\u5e76\u521b\u5efa\u4e00\u4e2aNAT\u6620\u5c04\u8868\u9879\uff0c\u7136\u540e\u5bf9\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\u3002\u800c\u5f53\u53e6\u4e00\u4e2a\u8bbe\u5907\u9700\u8981\u8bbf\u95ee\u5916\u7f51\u65f6\uff0c\u9632\u706b\u5899\u4ece\u5730\u5740\u6c60\u4e2d\u9009\u62e9\u53e6\u4e00\u4e2a\u7a7a\u4f59\u7684\u516c\u7f51\u5730\u5740\u3002\u8fd9\u79cd\u65b9\u5f0f\u5b9e\u9645\u4e0a\u8fd8\u662f\u4e00\u4e2a\u79c1\u7f51\u5730\u5740\u5bf9\u4e00\u4e2a\u516c\u7f51\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\u3002","title":"7.3.2.1 NAT\u7c7b\u578b1\uff1a\u6e90IP\u5730\u5740\u8f6c\u6362\u4e4bNo-PAT"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#7322-nat2napt","text":"NAPT\u662f\u6307\u5728\u8fdb\u884cNAT\u8f6c\u6362IP\u5730\u5740\u7684\u540c\u65f6\uff0c\u8fd8\u5bf9\u7aef\u53e3\u53f7\u8fdb\u884c\u8f6c\u6362\uff0c\u8fd9\u79cd\u6280\u672f\u53ef\u4ee5\u5b9e\u73b0\u591a\u4e2a\u79c1\u7f51\u7528\u6237\u5171\u7528\u4e00\u4e2a\u516c\u7f51IP\u3002NAPT\u4e5f\u88ab\u79f0\u4e3a\u201c\u5730\u5740\u590d\u7528\u201d\uff0c\u901a\u8fc7\u914d\u7f6eNAPT\u529f\u80fd\uff0c\u7f51\u7edc\u8bbe\u5907\u5c06\u540c\u65f6\u5bf9\u62a5\u6587\u7684\u7aef\u53e3\u53f7\u548cIP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u5141\u8bb8\u591a\u4e2a\u79c1\u7f51IP\u5730\u5740\u540c\u65f6\u6620\u5c04\u5230\u540c\u4e00\u4e2a\u516c\u7f51IP\u5730\u5740\uff0c\u8be5\u516c\u7f51IP\u5730\u5740\u901a\u8fc7\u4e0d\u540c\u7684\u7aef\u53e3\u53f7\u533a\u5206\u4e0d\u540c\u7684\u79c1\u7f51IP\u5730\u5740\uff0c\u4ece\u800c\u5b9e\u73b0\u591a\u5bf9\u4e00\u6216\u591a\u5bf9\u591a\u7684\u5730\u5740\u8f6c\u6362\u3002\u6b63\u662f\u8fd9\u79cd\u89e3\u51b3\u65b9\u6848\u6781\u5927\u7684\u7f13\u89e3\u4e86\u516c\u7f51IP\u5730\u5740\u7d27\u7f3a\u7684\u95ee\u9898\u3002\u6211\u4eec\u4ec5\u9700\u8d2d\u4e70\u4e00\u4e2a\u6216\u591a\u4e2a\u516c\u7f51IP\u5730\u5740\uff0c\u5373\u53ef\u6ee1\u8db3\u5185\u7f51\u5927\u91cfPC\u540c\u65f6\u8bbf\u95ee\u516c\u7f51\u7684\u9700\u6c42\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5185\u7f51\u5730\u5740192.168.1.1\u53ca192.168.1.2\u5728\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u5171\u7528200.1.1.100\u8fd9\u4e2a\u516c\u7f51\u5730\u5740\u3002\u5f53 192.168.1.1 \u4ee5TCP \u6e90\u7aef\u53e3\u53f71023 \u5411\u5916\u7f51\u53d1\u9001\u62a5\u6587\u65f6\uff0c \u9632\u706b\u5899\u4e3a\u8be5\u4f1a\u8bdd\u521b\u5efa\u4e00\u4e2aNAT \u6620\u5c04\u8868\u9879\uff0c \u5c06 192.168.1.1:1023\u6620\u5c04\u5230200.1.1.100:39612\uff0c\u7136\u540e\u5c06\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u53ca\u6e90TCP\u7aef\u53e3\u53f7\u8fdb\u884c\u8f6c\u6362\uff0c\u518d\u5c06\u8f6c\u6362\u540e\u7684\u62a5\u6587\u53d1\u9001\u51fa\u53bb\uff0c\u5f53\u9632\u706b\u5899\u6536\u5230\u56de\u7a0b\u7684\u62a5\u6587\u65f6\uff0c\u4e5f\u4f1a\u6839\u636eNAT\u6620\u5c04\u8868\u9879\uff0c\u5c06\u56de\u7a0b\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u53ca\u7aef\u53e3\u53f7\u8fdb\u884c\u8f6c\u6362\u3002\u800c\u5f53\u5185\u7f51\u5730\u5740192.168.1.2\u4f7f\u7528TCP\u6e90\u7aef\u53e3\u53f71569\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u9632\u706b\u5899\u5219\u5c06\u8fd9\u4e2a\u4f1a\u8bdd\u6620\u5c04\u5230 200.1.1.100\u768439613\u7aef\u53e3\uff0c\u4ece\u800c\u901a\u8fc7\u7aef\u53e3\u53f7\u5bf9\u8fd9\u4e24\u4e2a\u4f1a\u8bdd\u8fdb\u884c\u533a\u5206\u3002","title":"7.3.2.2 NAT\u7c7b\u578b2\uff1aNAPT"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#7323-nat3nat-server","text":"NAT Server\u662f\u6700\u5e38\u7528\u7684\u76ee\u7684\u5730\u5740\u8f6c\u6362\u6280\u672f\u3002\u6211\u4eec\u7ecf\u5e38\u80fd\u89c1\u5230\u8fd9\u6837\u7684\u573a\u666f\uff1a\u5185\u7f51\u5b58\u5728\u4e00\u53f0\u4f7f\u7528\u79c1\u7f51IP\u5730\u5740\u7684\u670d\u52a1\u5668\uff0c\u4f8b\u5982WEB\u670d\u52a1\u5668\uff0c\u8fd9\u53f0\u670d\u52a1\u5668\u5982\u679c\u9700\u5bf9\u5916\u7f51\u63d0\u4f9b\u670d\u52a1\uff0c\u90a3\u4e48\u5916\u7f51\u7684\u7528\u6237\u663e\u7136\u662f\u4e0d\u53ef\u80fd\u4f7f\u7528\u8be5\u670d\u52a1\u5668\u7684\u771f\u5b9eIP\u5730\u5740\u5bf9\u5176\u8fdb\u884c\u8bbf\u95ee\u7684\u3002\u6b64\u65f6\u5373\u53ef\u4f7f\u7528NAT Server\uff0c\u5c06\u8be5\u79c1\u7f51IP\u5730\u5740\u6620\u5c04\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u516c\u7f51\u5730\u5740\uff0c \u4ece\u800c\u4f7f\u5f97\u516c\u7f51\u7528\u6237\u80fd\u591f\u901a\u8fc7\u8bbf\u95ee\u8be5\u516c\u7f51\u5730\u5740\u4ece\u800c\u8bbf\u95ee\u5185\u7f51\u670d\u52a1\u5668\u3002\u5177\u4f53\u793a\u4f8b\u5982\u4e0a\u56fe\u6240\u793a\u3002 NAT Server\u4f7f\u5f97\u5185\u90e8\u670d\u52a1\u5668\u53ef\u4ee5\u4f9b\u5916\u90e8\u7f51\u7edc\u8bbf\u95ee\u3002\u5916\u90e8\u7f51\u7edc\u7684\u7528\u6237\u8bbf\u95ee\u5185\u90e8\u670d\u52a1\u5668\u65f6\uff0cNAT\u5c06\u8bf7\u6c42\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u8f6c\u6362\u6210\u5185\u90e8\u670d\u52a1\u5668\u7684\u771f\u5b9e\u5730\u5740\uff08\u79c1\u7f51\u5730\u5740\uff09\u3002\u5bf9\u4e8e\u5185\u90e8\u670d\u52a1\u5668\u7684\u56de\u5e94\u62a5\u6587\uff0cNAT\u8fd8\u4f1a\u81ea\u52a8\u5c06\u62a5\u6587\u7684\u6e90\u5730\u5740\uff08\u79c1\u7f51\u5730\u5740\uff09\u8f6c\u6362\u6210\u516c\u7f51\u5730\u5740\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5185\u7f51\u670d\u52a1\u5668192.168.1.10\uff08\u7684TCP80\u7aef\u53e3\uff09\u9700\u8981\u5bf9\u5916\u63d0\u4f9b\u8bbf\u95ee\uff0c\u53ef\u5728\u9632\u706b\u5899\u4e0a\u90e8\u7f72NAT Server \u5c06 192.168.1.10 \u7684 TCP80 \u7aef\u53e3 \u6620\u5c04\u5230 200.1.1.100 \u7684 TCP8080 \u7aef\u53e3 \u3002 \u5982 \u6b64 \u4e00\u6765 \uff0c\u5f53\u516c\u7f51\u7528\u6237 \u8bbf\u95ee 200.1.1.100:8080\u65f6\uff0c\u5b9e\u9645\u4e0a\u8bbf\u95ee\u7684\u5c31\u662f\u8be5\u5185\u7f51\u670d\u52a1\u5668\u7684WEB\u670d\u52a1\u3002 NAT \u5728\u9632\u706b\u5899\uff08NGFW\uff09\u4e0a\u7684\u90e8\u7f72","title":"7.3.2.3 NAT\u7c7b\u578b3\uff1aNAT Server"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#napt","text":"\u5982\u4e0a\u56fe\u6240\u793a\uff0cServer\u901a\u8fc7\u4ea4\u6362\u673a\u8fde\u63a5\u5230\u9632\u706b\u5899\uff0cServer\u7684\u7f3a\u7701\u7f51\u5173\u8bbe\u7f6e\u4e3aFW\u7684GE1/0/1\u63a5\u53e3\u3002\u51fa\u4e8e\u5b89\u5168\u7684\u8003\u8651\uff0c\u8981\u6c42Server\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff08External Network\uff09\u65f6\uff0c\u6e90IP\u5730\u5740\u9700\u88ab\u8f6c\u6362\uff0c\u8f6c\u6362\u621010.1.1.5\u81f310.1.1.10\u8fd9\u4e2a\u8303\u56f4\u5185\u7684IP\u5730\u5740\u3002 FW\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5f53Server\uff08\u4f8b\u5982192.168.10.5\uff09\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff08\u4f8b\u5982ping 10.1.1.2\uff09\u65f6\uff0c\u53ef\u4ee5\u770b\u5230\u7c7b\u4f3c\u5982\u4e0b\u4f1a\u8bdd\u8868\u9879\uff1a \u4ee5\u4e0a\u4e2d\u62ec\u53f7\u5185\u7684IP\u5730\u5740\uff0c\u5c31\u662f\u5c06\u6e90IP\u5730\u5740192.168.10.5\u88ab\u8f6c\u6362\u540e\u6240\u4f7f\u7528\u7684IP\u5730\u5740\u3002","title":"\u57fa\u4e8e\u5730\u5740\u6c60\u7684\u6e90\u5730\u5740NAPT"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat-server","text":"\u5982\u4e0a\u56fe\u6240\u793a\uff0cServer\u901a\u8fc7\u4ea4\u6362\u673a\u8fde\u63a5\u5230\u9632\u706b\u5899\uff0cServer\u7684\u7f3a\u7701\u7f51\u5173\u8bbe\u7f6e\u4e3aFW\u7684GE1/0/1\u63a5\u53e3\u3002\u51fa\u4e8e\u5b89\u5168\u7684\u8003\u8651\uff0c\u6211\u4eec\u5e76\u4e0d\u5e0c\u671b\u670d\u52a1\u5668\u5355\u677f\u7684\u771f\u5b9eIP\u5730\u5740\u66b4\u9732\u5728\u5916\u90e8\u7f51\u7edc\uff0c\u4f46\u662f\u53c8\u5e0c\u671b\u67d0\u4e9b\u670d\u52a1\u5668\u80fd\u591f\u88ab\u5916\u90e8\u7f51\u7edc\u8bbf\u95ee\u3002\u53ef\u5728FW\u4e0a\u90e8\u7f72NAT Server\uff0c\u4ee5192.168.10.5\u8fd9\u53f0\u5185\u90e8\u670d\u52a1\u5668\u4e3a\u4f8b\uff0c\u5c06\u5176\u6620\u5c04\u5230\u5916\u90e8\u7f51\u7edcIP\u5730\u574010.1.1.11\uff0c \u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u7528\u6237\u80fd\u591f\u901a\u8fc7\u8bbf\u95ee\u8be5IP\u5730\u5740\uff0c\u4ece\u800c\u8bbf\u95ee192.168.10.5\u3002 \u6b64\u5904\u5047\u8bbeServer\u5904\u4e8eTrust\u5b89\u5168\u533a\u57df\uff0cExternal Network\u5904\u4e8eUntrust\u533a\u57df\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5f53\u5916\u90e8\u7f51\u7edc\u7528\u6237\uff08\u4f8b\u598210.1.1.2\uff09\u8bbf\u95ee10.1.1.11\uff08\u4f8b\u5982ping 10.1.1.11\uff09\u65f6\uff0c\u53ef\u4ee5\u5728FW\u4e0a \u770b\u5230\u5982\u4e0b\u4f1a\u8bdd\u8868\u9879\uff1a \u4ee5\u4e0a\u4e2d\u62ec\u53f7\u4e2d\u7684\u5730\u5740\uff0c\u5c31\u662f\u88abNAT\u8f6c\u6362\u540e\u7684\u76ee\u7684IP\u5730\u5740\u3002","title":"NAT Server"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat-server_1","text":"\u547d\u4ee4**nat server s1 zone untrust global 10.1.1.11 inside 192.168.10.5**\u7528\u4e8e\u521b\u5efa\u4e00\u4e2aNAT Server\uff0c\u540d\u79f0\u4e3a s1\uff08\u53ef\u81ea\u5b9a\u4e49\uff09\uff0c\u8be5\u547d\u4ee4\u5c06\u5185\u90e8IP\u5730\u5740192.168.10.5\u6620\u5c04\u5230\u5916\u90e8IP\u5730\u574010.1.1.11\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u5904\u4e8euntrust\u533a\u57df\u7684\u7528\u6237\u8bbf\u95ee\u76ee\u7684IP\u5730\u574010.1.1.11\u65f6\uff0c\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\u4f1a\u88ab\u8f6c\u6362\u6210192.168.10.5\u3002 NAT Server\u547d\u4ee4\u5b58\u5728\u591a\u79cd\u914d\u7f6e\u53d8\u5316\uff0c\u4e0d\u540c\u7684\u914d\u7f6e\u65b9\u5f0f\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u4e1a\u52a1\u573a\u666f\uff0c\u4ee5\u4e0b\u5c06\u5206\u522b\u8fdb\u884c\u8bf4\u660e\uff1a","title":"NAT Server\u7684\u51e0\u79cd\u914d\u7f6e\u573a\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_193","text":"[FW] nat server s1 global 200.1.1.100 inside 172.16.1.1 \u8fd9\u79cdNAT\u914d\u7f6e\u65b9\u5f0f\u76f8\u5f53\u4e8eIP\u4e00\u5bf9\u4e00\u6620\u5c04\uff0c\u4e5f\u5373\u5f53FW\u6536\u5230\u53d1\u5f80200.1.1.100\u7684\u62a5\u6587\uff08\u4efb\u610f\u76ee\u7684\u7aef\u53e3\u53f7\uff09\uff0c\u90fd\u4f1a \u5c06\u5176\u76ee\u7684\u5730\u5740\u8f6c\u6362\u6210172.16.1.1\u3002\u800c\u5f53\u9632\u706b\u5899\u6536\u5230Server\uff08172.16.1.1\uff09\u4e3b\u52a8\u53d1\u51fa\u7684\u3001\u8bbf\u95eeClient\u7684\u62a5\u6587\uff0c\u4e5f\u4f1a\u5c06\u6e90\u5730\u5740\u8f6c\u6362\u6210200.1.1.100\u3002\u6240\u4ee5\u91c7\u7528\u8fd9\u79cd\u914d\u7f6e\u65b9\u5f0f\uff0cInternet\u7528\u6237\u80fd\u591f\u8bbf\u95eeServer\uff0c\u800cServer\u4e5f\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eeInternet\u3002","title":"\u914d\u7f6e\u65b9\u5f0f\u4e00\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_194","text":"[FW] nat server s2 zone untrust global 200.1.1.100 inside 172.16.1.1 \u5728\u201c\u914d\u7f6e\u65b9\u5f0f\u4e00\u201d\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e86**zone**\u5173\u952e\u5b57\u548c\u53c2\u6570**untrust**\uff0c\u5219\u8be5\u6761NAT Server\u53ea\u5411untrust\u533a\u57df\u4ea7\u751f\u4f5c\u7528\uff0c\u4e5f\u5c31\u662f\u53ea\u6709\u5728\u8be5\u533a\u57df\u7684\u63a5\u53e3\u4e0a\u6536\u5230\u7684\u62a5\u6587\uff0c\u624d\u4f1a\u8fdb\u884c\u76ee\u7684\u5730\u5740\u8f6c\u6362\u3002","title":"\u914d\u7f6e\u65b9\u5f0f\u4e8c\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_195","text":"[FW] nat server s3 zone untrust protocol tcp global 200.1.1.200 22323 inside 172.16.1.1 8080 \u589e\u52a0\u4e86**protocol**\u5173\u952e\u5b57\u53ca**tcp**\u53c2\u6570\uff0c\u5219\u5f53FW\u5728\u5176untrust\u63a5\u53e3\u6536\u5230\u53d1\u5f80200.1.1.200:22323\u7684TCP\u62a5\u6587\u65f6\uff0cFW \u4f1a\u5c06\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\u8f6c\u6362\u6210172.16.1.1\u3001\u5c06\u76ee\u7684TCP\u7aef\u53e3\u53f7\u8f6c\u6362\u62108080\u3002","title":"\u914d\u7f6e\u65b9\u5f0f\u4e09\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_196","text":"\u591a\u4e2a\u4e0d\u540c\u5185\u90e8\u670d\u52a1\u5668\uff08\u5982\u4e0a\u56fe\u4e2d\u7684Server1\u3001Server2\uff09\u4f7f\u7528\u4e00\u4e2a\u516c\u7f51IP\u5730\u5740\u5bf9\u5916\u53d1\u5e03\u65f6\uff0c\u53ef\u4ee5\u591a\u6b21\u4f7f\u7528nat server\u547d\u4ee4\u5bf9\u5176\u8fdb\u884c\u914d\u7f6e\uff0c\u4f46\u662fglobal-port\uff08\u4ee5\u4e0a\u914d\u7f6e\u4e2d\u6807\u8bb0\u7ea2\u8272\u7684\u53c2\u6570\uff09\u4e0d\u80fd\u76f8\u540c\u3002\u5982\u6b64\u4e00\u6765Client\u8bbf\u95ee 200.1.1.200:21111\u65f6\uff0c\u5b9e\u9645\u8bbf\u95ee\u7684\u5c31\u662fServer1\uff0c\u800c\u8bbf\u95ee200.1.1.200:21112\u65f6\uff0c\u5b9e\u9645\u8bbf\u95ee\u7684\u5c31\u662fServer2\u3002","title":"\u914d\u7f6e\u65b9\u5f0f\u56db\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_197","text":"\u5bf9\u4e8e\u540c\u4e00\u4e2a\u5185\u90e8\u670d\u52a1\u5668\u53d1\u5e03\u591a\u4e2a\u516c\u7f51IP\u4f9b\u5916\u90e8\u7f51\u7edc\u8bbf\u95ee\u7684\u573a\u666f\uff0c\u5982\u679c\u4e0d\u540c\u516c\u7f51IP\u6240\u5728\u7684\u94fe\u8def\u89c4\u5212\u5728\u4e0d\u540c\u7684\u5b89\u5168\u533a\u57df\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u9488\u5bf9\u4e0d\u540c\u7684\u5b89\u5168\u533a\u57df\u53d1\u5e03\u4e0d\u540c\u7684\u516c\u7f51IP\u7684NAT Server\u6765\u5b9e\u73b0\u3002","title":"\u914d\u7f6e\u65b9\u5f0f\u4e94\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_198","text":"\u5bf9\u4e8e\u540c\u4e00\u4e2a\u5185\u90e8\u670d\u52a1\u5668\u53d1\u5e03\u591a\u4e2a\u516c\u7f51IP\u4f9b\u5916\u90e8\u7f51\u7edc\u8bbf\u95ee\u7684\u573a\u666f\uff0c\u5982\u679c\u4e0d\u540c\u516c\u7f51IP\u6240\u5728\u7684\u94fe\u8def\u89c4\u5212\u5728\u540c\u4e00\u4e2a\u5b89\u5168\u533a\u57df\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6307\u5b9a**no-reverse**\u53c2\u6570\u7684NAT Server\u6765\u5b9e\u73b0\u3002\u6307\u5b9a**no-reverse**\u53c2\u6570\u540e\uff0c\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2aglobal\u5730\u5740\u548c\u540c\u4e00\u4e2ainside\u5730\u5740\u5efa\u7acb\u6620\u5c04\u5173\u7cfb\u3002 \u6307\u5b9a**no-reverse**\u53c2\u6570\u540e\uff0c\u5185\u90e8\u670d\u52a1\u5668\u4e3b\u52a8\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u8bbe\u5907\u65e0\u6cd5\u5c06\u5185\u90e8\u670d\u52a1\u5668\u7684\u79c1\u7f51\u5730\u5740\u8f6c\u6362\u6210\u516c\u7f51\u5730\u5740\uff0c\u5185\u90e8\u670d\u52a1\u5668\u4e5f\u5c31\u65e0\u6cd5\u4e3b\u52a8\u5411\u5916\u53d1\u8d77\u8fde\u63a5\u3002\u56e0\u6b64\uff0c\u901a\u8fc7\u6307\u5b9a**no-reverse**\u53c2\u6570\u53ef\u4ee5\u7981\u6b62\u5185\u90e8\u670d\u52a1\u5668\u4e3b\u52a8\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002\u7531\u4e8e\u914d\u7f6e\u4e86**no-reverse**\u53c2\u6570\uff0c\u5185\u90e8\u670d\u52a1\u5668\u5c06\u65e0\u6cd5\u4e3b\u52a8\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002\u6b64\u65f6\uff0c\u5982\u679c\u5185\u90e8\u670d\u52a1\u5668\u60f3\u8981\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff0c\u9700\u8981\u5728\u5185\u90e8\u670d\u52a1\u5668\u6240\u5728\u533a\u57df\u548c\u5916\u90e8\u7f51\u7edc\u6240\u5728\u533a\u57df\u7684\u57df\u95f4\u914d\u7f6e\u6e90NAT\u7b56\u7565\uff0c\u5c06\u670d\u52a1\u5668\u7684\u79c1\u7f51\u5730\u5740\u8f6c\u6362\u4e3a\u516c\u7f51\u5730\u5740\u3002\u6e90NAT\u7b56\u7565\u4e2d\u5f15\u7528\u7684\u5730\u5740\u6c60\u53ef\u4ee5\u662fglobal\u5730\u5740\u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\u7684\u516c\u7f51\u5730\u5740\u3002","title":"\u914d\u7f6e\u65b9\u5f0f\u516d\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#pcnat-server","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0cPC-Station\u53caServer\u540c\u5c5e\u4e00\u4e2aLAN\uff0c\u7f51\u5173\u90fd\u5728\u9632\u706b\u5899FW\u7684GE0/0/1\u53e3\u4e0a\uff0c\u90fd\u5c5e\u4e8etrust \u533a\u57df\u3002\u4e3a\u4e86\u8ba9Internet\u7528\u6237\uff08\u5728\u56fe\u4e2d\u5e76\u672a\u753b\u51fa\uff09\u80fd\u591f\u8bbf\u95eeServer\uff0cFW\u4e0a\u90e8\u7f72\u4e86Nat Server\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a nat server s1 global 200.1.1.100 inside 192.168.1.100 \uff0c\u4e5f\u5c31\u662f\u5c06\u516c\u7f51\u5730\u5740200.1.1.100\u6620\u5c04\u5230192.168.1.100\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cInternet\u7528\u6237\u80fd\u591f\u901a\u8fc7200.1.1.100\u8fd9\u4e2a\u516c\u7f51IP\u8bbf\u95eeServer\u3002\u4f46\u662f\u5185\u7f51\u7684PC-Station\u5728\u8bbf\u95ee Server\u7684\u65f6\u5019\uff0c\u5374\u5b58\u5728\u4e00\u70b9\u95ee\u9898\uff1aPC-Station\u901a\u8fc7\u76ee\u7684\u79c1\u7f51IP\u5730\u5740192.168.1.100\u80fd\u591f\u8bbf\u95eeServer\u7684Web\u670d\u52a1\uff0c\u4f46\u662f\u5f53PC-Station\u4f7f\u7528\u8be5\u670d\u52a1\u5668\u6620\u5c04\u540e\u7684\u516c\u7f51\u5730\u5740200.1.1.100\u8bd5\u56fe\u8bbf\u95eeServer\u7684\u65f6\u5019\uff0c\u5374\u53d1\u73b0\u59cb\u7ec8\u65e0\u6cd5\u6210\u529f\u3002\u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0bPC-Station\u4f7f\u7528\u516c\u7f51\u5730\u5740\u8bbf\u95eeServer\u7684\u8fc7\u7a0b\uff1a PC-Station\u53bb\u8bbf\u95ee\u5730\u5740200.1.1.100\uff0c \u9996\u5148\u8981\u5efa\u7acbTCP\u4e09\u6b21\u63e1\u624b\uff0c TCP\u63e1\u624b\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u4e3a 192.168.1.1\uff0c\u76ee\u7684\u5730\u5740\u4e3a200.1.1.100\uff0c\u6570\u636e\u5305\u88ab\u9001\u5230\u7f51\u5173\u9632\u706b\u5899\u3002 \u7531\u4e8e\u9632\u706b\u5899\u90e8\u7f72\u4e86NAT server\uff0c\u56e0\u6b64\u5b83\u5c06\u6570\u636e\u5305\u7684\u76ee\u7684IP 200.1.1.100\u8f6c\u6362\u6210192.168.1.100\uff0c\u7136\u540e \u67e5\u627e\u8def\u7531\u8868\uff0c\u53d1\u73b0\u76ee\u7684\u7f51\u7edc192.168.1.0/24\u5c31\u662fGE0/0/1\u53e3\u76f4\u8fde\u3002 \u9632\u706b\u5899\u5c06\u5730\u5740\u8f6c\u6362\u540e\u7684\u6570\u636e\u5305\u53d1\u5411Server\u3002 Server\u6536\u5230\u6570\u636e\u5305\u540e\uff0c\u5f97\u56de\u5305\u5427\uff0c\u7531\u4e8eWeb Servre\u6536\u5230\u7684\u8fd9\u4e2a\u6570\u636e\u5305\u6e90\u5730\u5740\u4e3a192.168.1.1\uff0c\u56e0\u6b64\u5b83\u5728\u4ea7\u751f\u56de\u7a0b\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u56de\u7a0b\u6570\u636e\u5305\u7684\u76ee\u7684\u5730\u5740\u5c31\u662f192.168.1.1\uff0c\u800c192.168.1.1\u53c8\u662f\u672c\u5730\u76f4\u8fde\u7f51\u7edc\u5185\u7684\u8282\u70b9IP\uff0c\u56e0\u6b64Web Server\u76f4\u63a5\u5c06\u8fd9\u4e2a\u6e90\u4e3a192.168.1.100\uff0c\u76ee\u7684\u5730\u5740\u4e3a192.168.1.1\u7684\u6570\u636e\u5305\u53d1\u9001\u7ed9\u4e86PC-Station\uff0c\u800c\u4e0d\u4f1a\u518d\u7ed5\u56deFW\u3002 PC\u5728\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u6570\u636e\u5305\u7684\u6e90\u5730\u5740\u662f192.168.1.100\uff0c\u8fd9\u4e2a\u5730\u5740\u662f\u54ea\u91cc\u5192\u51fa\u6765\u7684\uff1f \u5b83\u7b49\u5019\u7684\u662f200.1.1.100\u7684\u56de\u7a0b\u62a5\u6587\uff0c\u53ef\u662f\u73b0\u5728\u5374\u6536\u5230\u4e86192.168.1.100\u7684\u6570\u636e\u5305\uff0c\u4e8e\u662f\u5b83\u5c06\u8be5\u62a5\u6587\u4e22\u5f03\u3002 \u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\uff0cPC\u65e0\u6cd5\u901a\u8fc7\u670d\u52a1\u5668\u7684NAT server\u6620\u5c04\u7684\u516c\u7f51IP\u6765\u8bbf\u95ee\u670d\u52a1\u5668\u7684\u539f\u56e0\u3002\u6570\u636e\u5305\u6ca1\u6709\u7ed5\u56deFW\uff0c \u5bfc\u81f4PC\u6536\u5230\u7684\u56de\u7a0b\u6570\u636e\u5305\u7684\u6e90\u5730\u5740\u6ca1\u6709\u88ab\u6b63\u786e\u8f6c\u6362\uff0c\u4ece\u800c\u5bfc\u81f4TCP\u4e09\u6b21\u63e1\u624b\u4e0d\u6210\u529f\u3002\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5c31\u9700\u8981\u8ba9\u56de\u7a0b\u7684\u6d41\u91cf\u80fd\u591f\u56de\u5230FW\uff0c\u7136\u540e\u8ba9FW\u5c06\u6e90\u5730\u5740\u8f6c\u6362\u6210200.1.1.100\u518d\u53d1\u7ed9PC\u3002 \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5728FW\u4e0a\u4e3aPC\u521b\u5efa\u4e00\u4e2aNAT\u6c60\uff0c\u7136\u540e\u90e8\u7f72trust\u5b89\u5168\u57df\u5185\u7684\u6e90\u5730\u5740\u8f6c\u6362\u5373\u53ef\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u518d\u5206\u6790\u4e00\u4e0b\u6570\u636e\u5305\u4ea4\u4e92\u7684\u8fc7\u7a0b\uff1a PC\u8bd5\u56fe\u8bbf\u95ee200.1.1.100\uff0c\u9996\u5148\u8981\u5efa\u7acbTCP\u4e09\u6b21\u63e1\u624b\uff0cTCP\u63e1\u624b\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u4e3a192.168.1.1\uff0c\u76ee\u7684\u5730\u5740\u4e3a200.1.1.100\uff0c\u6570\u636e\u5305\u88ab\u9001\u5230\u7f51\u5173\u9632\u706b\u5899\u3002 \u7531\u4e8e\u9632\u706b\u5899\u90e8\u7f72\u4e86NAT Server\u4ee5\u53ca\u6e90\u5730\u5740\u8f6c\u6362\uff0c\u56e0\u6b64\u5b83\u5c06\u6570\u636e\u5305\u7684\u6e90IP\u5730\u5740192.168.1.1\u8f6c\u6362\u6210 200.1.1.10\uff0c\u76ee\u7684IP\u5730\u5740200.1.1.100\u8f6c\u6362\u6210192.168.1.100\u3002 \u9632\u706b\u5899\u5c06\u5730\u5740\u8f6c\u6362\u540e\u7684\u6570\u636e\u5305\u53d1\u5411Server\uff1a \u670d\u52a1\u5668\u6536\u5230\u6570\u636e\u5305\u540e\u8981\u53d1\u56de\u7a0b\u62a5\u6587\uff0c\u56de\u7a0b\u62a5\u6587\u7684\u6e90\u5730\u5740\u4e3a192.168.1.100\uff0c\u76ee\u7684\u5730\u5740\u4e3a200.1.1.10\uff0c \u8fd9\u4e2a\u6570\u636e\u5305\u88ab\u53d1\u5411\u4e86Server\u7684\u7f51\u5173192.168.1.254\uff0c\u4e5f\u5c31\u662f\u9632\u706b\u5899\u3002 \u9632\u706b\u5899\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u540e\uff0c\u7531\u4e8e\u672c\u5730\u5df2\u7ecf\u6709\u4e86NAT \u7684\u6620\u5c04\u6761\u76ee\uff0c \u56e0\u6b64\u5c06\u6570\u636e\u5305\u7684\u6e90\u5730\u5740 192.168.1.100\u66ff\u6362\u6210200.1.1.100\uff0c\u5c06\u76ee\u7684\u5730\u5740200.1.1.10\u66ff\u6362\u6210192.168.1.1\u3002 FW\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u7ed9PC\u3002 PC\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u540e\uff0c\u53d1\u73b0\u6b63\u662f\u81ea\u5df1\u671f\u5f85\u7684200.1.1.100\u7684\u56de\u5305\uff0c\u56e0\u6b64TCP\u4e09\u6b21\u63e1\u624b\u6210\u529f\u3002 7.3.4 NAT \u5728\u8def\u7531\u5668\u4e0a\u7684\u90e8\u7f72","title":"\u5185\u7f51PC\u901a\u8fc7NAT server\u516c\u7f51\u5730\u5740\u8bbf\u95ee\u5185\u90e8\u670d\u52a1\u5668"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#7341-nat","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cOR\u662f\u51fa\u53e3\u8def\u7531\u5668\uff0c\u5b83\u8fde\u63a5\u7740\u5185\u7f51PC\u53caInternet\u3002\u73b0\u5728\u5185\u7f51\u7684PC\u9700\u8981\u8bbf\u95eeInternet\uff0c\u5728OR\u4e0a\u90e8\u7f72\u9759\u6001\u4e00\u5bf9\u4e00IP\u6620\u5c04\u4f7f\u5f97PC\u80fd\u591f\u8bbf\u95ee\u5916\u7f51\uff0c\u5206\u914d\u7ed9\u5185\u7f51PC 192.168.1.1 \u7684\u516c\u7f51\u5730\u5740\u662f200.1.1.100\u3002 OR\u8def\u7531\u5668\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\uff09\uff1a \u4e0a\u8ff0\u914d\u7f6e\u4e2d\uff0c**nat static global 200.1.1.100 inside 192.168.1.1**\u547d\u4ee4\u5373\u914d\u7f6e\u9759\u6001NAT\u6620\u5c04\uff0c\u5c06\u5185\u7f51IP\u5730\u5740 192.168.1.1\u6620\u5c04\u5230200.1.1.100\u3002\u5982\u6b64\u4e00\u6765\uff0c\u5f53\u6e90IP\u5730\u5740\u4e3a192.168.1.1\u7684\u62a5\u6587\u51c6\u5907\u4eceOR\u7684GE0/0/1\u63a5\u53e3\u53d1\u9001\u51fa\u53bb\u65f6\uff0c\u8def\u7531\u5668\u5c06\u8be5\u5730\u5740\u8f6c\u6362\u6210200.1.1.100\u3002\u53e6\u5916\uff0c\u5f53\u76ee\u7684IP\u5730\u5740\u4e3a200.1.1.100\u7684\u62a5\u6587\u5230\u8fbeOR\u8def\u7531\u5668\u7684 GE0/0/1\u63a5\u53e3\u65f6\uff0c\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\u4f1a\u88ab\u8f6c\u6362\u6210192.168.1.1\u3002","title":"7.3.4.1 \u9759\u6001NAT\u6620\u5c04"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#no-pat","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cOR\u662f\u51fa\u53e3\u8def\u7531\u5668\uff0c\u5b83\u8fde\u63a5\u7740\u5185\u7f51PC\u53caInternet\u3002\u73b0\u5728\u5185\u7f51192.168.1.0/24\u7f51\u6bb5\u7684\u7528\u6237\u9700\u8981\u8bbf\u95ee Internet\uff0c\u8be5\u7f51\u7edc\u4ece\u8fd0\u8425\u5546\u7533\u8bf7\u5230\u7684\u516c\u7f51\u5730\u5740\u533a\u95f4\u662f200.1.1.100 \u2013 200.1.1.116\uff0c\u5b8c\u6210\u57fa\u4e8e\u5730\u5740\u6c60\u7684No-PAT \u914d\u7f6e\uff0c\u4f7f\u5f97\u5185\u7f51\u7528\u6237\u80fd\u591f\u8bbf\u95eeInternet\u3002 OR\u8def\u7531\u5668\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\uff09\uff1a","title":"\u57fa\u4e8e\u52a8\u6001\u5730\u5740\u6c60\u7684No-PAT"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#napt_1","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cOR\u662f\u51fa\u53e3\u8def\u7531\u5668\uff0c\u5b83\u8fde\u63a5\u7740\u5185\u7f51PC\u53caInternet\u3002\u73b0\u5728\u5185\u7f51192.168.1.0/24\u7f51\u6bb5\u7684\u7528\u6237\u9700\u8981\u8bbf\u95ee Internet\uff0c\u8be5\u7f51\u7edc\u4ece\u8fd0\u8425\u5546\u7533\u8bf7\u5230\u7684\u516c\u7f51\u5730\u5740\u533a\u95f4\u662f200.1.1.100 \u2013 200.1.1.105\uff0c\u5b8c\u6210\u57fa\u4e8e\u5730\u5740\u6c60\u7684NAPT\u914d\u7f6e\uff0c\u4f7f\u5f97\u5185\u7f51\u7528\u6237\u80fd\u591f\u8bbf\u95eeInternet\u3002 OR\u51fa\u53e3\u8def\u7531\u5668\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\uff09\uff1a \u6e90\u5730\u5740\u8f6c\u6362\u4e2d\uff0cNAPT\u7684\u914d\u7f6e\u4e0eNo-PAT\u7684\u914d\u7f6e\u5dee\u5f02\u5f88\u5c0f\uff0c\u9700\u8981\u683c\u5916\u7559\u610f\u3002\u4e00\u822c\u5728\u9879\u76ee\u4e2d\u4f7f\u7528NAPT\u7684\u65b9\u5f0f\u8f83 \u591a\uff0c\u6bd5\u7adf\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5b9e\u73b0\u591a\u4e2a\u79c1\u7f51IP\u5730\u5740\u5171\u7528\u4e00\u4e2a\u516c\u7f51IP\u5730\u5740\u7684\u9700\u6c42\u3002","title":"\u57fa\u4e8e\u52a8\u6001\u5730\u5740\u6c60\u7684NAPT"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat-server_2","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cOR\u662f\u51fa\u53e3\u8def\u7531\u5668\uff0c\u5b83\u8fde\u63a5\u7740\u5185\u7f51Server\u53caInternet\u3002\u5185\u7f51\u6709\u4e00\u53f0WEB\u670d\u52a1\u5668192.168.1.100\uff0c\u5176 TCP80\u7aef\u53e3\u9700\u8981\u9762\u5411Internet\u63d0\u4f9b\u670d\u52a1\uff0c\u8be5\u7f51\u7edc\u4ece\u8fd0\u8425\u5546\u7533\u8bf7\u5230\u7684\u516c\u7f51\u5730\u5740\u662f200.1.1.30\uff0c\u5728\u8def\u7531\u5668\u4e0a\u5b8c\u6210NAT Server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97Internet\u7528\u6237\u80fd\u591f\u901a\u8fc7\u8bbf\u95ee200.1.1.30\uff1a8080\uff0c\u4ece\u800c\u8bbf\u95ee192.168.1.100\uff1a80\u3002 OR\u8def\u7531\u5668\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\uff09\uff1a \u9632\u706b\u5899\u53cc\u673a\u70ed\u5907 \u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u6982\u8ff0","title":"NAT Server"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_199","text":"\u4e0a\u56fe\u662f\u4e00\u4e2a\u5178\u578b\u7684\u7ec4\u7f51\u73af\u5883\u3002\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u5982\u679c\u6ca1\u6709\u53cc\u673a\u70ed\u5907\u6280\u672f\uff0c\u7f51\u7edc\u4e2d\u53ef\u80fd\u4f1a\u5b58\u5728\u4ec0\u4e48\u95ee\u9898\u3002 \u9996\u5148\u4e24\u53f0\u9632\u706b\u5899\uff08NGFW1\u548cNGFW2\uff09\u662f\u72ec\u7acb\u7684\u7f51\u7edc\u8bbe\u5907\uff0c\u9700\u8981\u72ec\u7acb\u914d\u7f6e\u53ca\u7ba1\u7406\uff0c\u5305\u62ec\u5b89\u5168\u7b56\u7565\u3001\u5bf9\u8c61\u3001NAT\u7b56\u7565\u3001\u5730\u5740\u6c60\u7b49\u90fd\u9700\u8981\u5206\u522b\u8fdb\u884c\u914d\u7f6e\uff0c\u65e0\u6cd5\u540c\u6b65\u3002\u6b64\u5916\uff0c\u672c\u573a\u666f\u4e2d\u53ef\u80fd\u90e8\u7f72\u4e86VRRP\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u7f51\u7edc\u4e2d\u5b58\u57282\u4e2aVRRP\u7ec4\uff0c\u5206\u522b\u7528\u4e8e\u4e0a\u884c\u548c\u4e0b\u884c\uff0c\u8fd9\u4e24\u4e2aVRRP\u7ec4\u7684\u72b6\u6001\u662f\u72ec\u7acb\u7684\u3002\u4e0b\u884c\u7684\u8bbe\u5907 \uff08SW1/SW2\uff09\u5c06\u5230\u8fbePublic\u7684\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u6307\u5411VRRP VRID1\u7684\u865a\u62dfIP\u5730\u5740192.168.1.1\uff0c\u800c\u4e0a\u884c\u7684\u8bbe\u5907\uff08C1/C2\uff09\u5219\u5c06\u5230\u8fbePrivate\u7684\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u6307\u541110.1.1.1\u3002 \u5f53\u8fd9\u4e24\u4e2aVRRP\u7ec4\u7684\u72b6\u6001\u4e00\u81f4\u65f6\uff08\u4f8b\u5982\u4e3b\u8bbe\u5907\u90fd\u4e3aNGFW1\u3001\u5907\u8bbe\u5907\u90fd\u4e3aNGFW2\uff09\uff0c\u4e0a\u3001\u4e0b\u884c\u7684\u6570\u636e\u8f6c\u53d1\u662f\u4e0d\u4f1a\u6709\u95ee\u9898\u7684\u3002\u5728NGFW1\u9996\u6b21\u6536\u5230\u4e00\u4e2a\u4e0a\u884c\u6d41\u91cf\u7684\u62a5\u6587\u65f6\uff0c\u5b83\u4f1a\u4e3a\u8fd9\u4e2a\u6d41\u91cf\u521b\u5efa\u4e00\u4e2a\u4f1a\u8bdd\u8868\u9879\uff0c \u5f53\u56de\u7a0b\u7684\u62a5\u6587\u53d1\u9001\u5230NGFW1\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u6d41\u91cf\u547d\u4e2d\u4e86\u4f1a\u8bdd\u8868\u9879\uff0c\u56e0\u6b64\u88ab\u653e\u884c\uff0c\u8fd9\u6837\uff0c\u6570\u636e\u7684\u901a\u4fe1\u662f\u6ca1\u6709\u95ee\u9898\u7684\u3002 \u7136\u800c\u5982\u679c\u6d41\u91cf\u7684\u5f80\u8fd4\u8def\u5f84\u4e0d\u4e00\u81f4\u7684\u8bdd\uff0c\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898\u4e86\u3002\u9632\u706b\u5899\u662f\u57fa\u4e8e\u4f1a\u8bdd\u8868\u8fdb\u884c\u62a5\u6587\u68c0\u6d4b\u7684\uff0cNGFW2\u6ca1\u6709\u6536\u5230\u4e0a\u884c\u6d41\u91cf\u7684\u8bdd\uff0c\u5c31\u4e0d\u4f1a\u5efa\u7acb\u76f8\u5173\u4f1a\u8bdd\u8868\u9879\uff0c\u6b64\u65f6\u5f53\u5b83\u6536\u5230\u56de\u7a0b\u6d41\u91cf\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u6ca1\u6709\u4efb\u4f55\u5339\u914d\u7684\u4f1a\u8bdd\u8868\u9879\uff0c\u56e0\u6b64\u8fd9\u4e9b\u6d41\u91cf\u6700\u7ec8\u5c06\u88ab\u4e22\u5f03\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86\u65ad\u7f51\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u9020\u6210\u8fd9\u79cd\u73b0\u8c61\u7684\u5178\u578b\u95ee\u9898\u662fVRRP\u7ec4\u7684\u72b6\u6001\u4e0d\u4e00\u81f4\uff0c\u4f8b\u5982VRRP VRID1\u7684\u4e3b\u8bbe\u5907\u4e3aNGFW1\uff0c\u800cVRRP VRID100\u7684\u4e3b\u8bbe\u5907\u5374\u4e3aNGFW2\u3002\u4e4b\u6240\u4ee5\u4f1a\u6709\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u6839\u56e0\u662f\u4e24\u53f0\u9632\u706b\u5899\u5e76\u975e\u4e00\u4e2a\u7edf\u4e00\u7684\u7cfb\u7edf\uff0c\u8fdb\u800c\u4e24\u7ec4VRRP\u4e92\u76f8\u72ec\u7acb\uff0c\u65e0\u6cd5\u534f\u540c\u914d\u5408\u3002","title":"\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_200","text":"\u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u57fa\u7840","title":"\u53cc\u673a\u70ed\u5907\u4e3b\u8981\u529f\u80fd\u7ec4\u4ef6"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vrrp_4","text":"VRRP\uff08Virtual Router Redundancy Protocol\uff0c\u865a\u62df\u8def\u7531\u5668\u5197\u4f59\u534f\u8bae\uff09\u662f\u4e00\u79cd\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\u7684\u7f51\u5173\u5c42\u5197\u4f59\u534f\u8bae\uff0c\u9002\u7528\u4e8e\u652f\u6301\u7ec4\u64ad\u6216\u5e7f\u64ad\u7684\u5c40\u57df\u7f51\uff08\u5982\u4ee5\u592a\u7f51\u7b49\uff09\u3002\u5982\u9700\u6df1\u5165\u4e86\u89e3VRRP\u7684\u5de5\u4f5c\u539f\u7406\uff0c\u53ef\u67e5\u9605\u672c\u624b\u518c\u7684\u201cVRRP\u201d\u4e00\u7ae0\u3002\u4e0b\u9762\u5148\u7b80\u5355\u5730\u770b\u770b\uff0c\u5728\u9632\u706b\u5899\u53cc\u673a\u7ec4\u7f51\u7684\u573a\u666f\u4e0b\uff0c\u53ea\u90e8\u7f72VRRP\u7684\u8bdd\uff0c\u4f1a\u5b58\u5728\u4ec0\u4e48\u95ee\u9898\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u4eec\u5728\u9632\u706b\u5899\u4e0a\u90e8\u7f72\u4e86VRRP\u3002\u9632\u706b\u5899NGFW1\u7684GE1/0/1\u53e3\u3001NGFW2\u7684GE1/0/1\u53e3\u7ec4\u6210\u4e86\u4e00\u4e2aVRRP\u7ec4\uff0c\u8fd9\u4e2aVRRP\u7ec4\u5c06\u4ea7\u751f\u4e00\u53f0\u865a\u62df\u8bbe\u5907\uff0c\u5176\u865a\u62dfIP\u5730\u5740\u4e3a192.168.1.1\u3002\u5728\u8be5VRRP\u7ec4\u4e2d\uff0c NGFW1\u5145\u5f53Active\uff08\u4e3b\uff09\u8bbe\u5907\uff0c\u627f\u62c5\u62a5\u6587\u8f6c\u53d1\u7684\u4efb\u52a1\uff0c\u540c\u65f6\u54cd\u5e94\u5185\u7f51PC\u5173\u4e8e192.168.1.1\u7684ARP\u8bf7\u6c42\uff1b \u5728\u8be5VRRP\u7ec4\u4e2d\uff0cNGFW2\u5145\u5f53Standby\uff08\u5907\u4efd\uff09\u8bbe\u5907\uff0c\u5b83\u4f1a\u4fa6\u542cNGFW1\u7684VRRP\u62a5\u6587\u4ee5\u4fbf\u786e\u8ba4NGFW1 \u7684\u6d3b\u8dc3\u72b6\u6001\uff0c\u5e76\u4e14\u51c6\u5907\u968f\u65f6\u63a5\u66ff\u5b83\u7684\u5de5\u4f5c\u6210\u4e3aActive\u3002 \u9632\u706b\u5899\u7684VRRP\u534f\u8bae\u6a21\u5757\u76d1\u89c6\u901a\u4fe1\u63a5\u53e3\u72b6\u6001\uff0c\u5e76\u901a\u8fc7\u7ec4\u64ad\u65b9\u5f0f\u5411Backup\u9632\u706b\u5899\u53d1\u9001\u901a\u544a\u62a5\u6587\u3002\u5982\u679c Active\u9632\u706b\u5899\u7684\u63a5\u53e3\u6216\u94fe\u8def\u51fa\u73b0\u6545\u969c\uff0c\u65e0\u6cd5\u6b63\u5e38\u53d1\u9001VRRP\u901a\u544a\u62a5\u6587\uff0c\u5bfc\u81f4Backup\u8bbe\u5907\u5728\u6307\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u6536\u5230VRRP\u901a\u544a\u62a5\u6587\uff0cVRRP\u534f\u8bae\u5c31\u4f1a\u628aBackup\u9632\u706b\u5899\u7684VRRP\u72b6\u6001\u53d8\u6210active\uff0c\u4ece\u800c\u5c06\u76f8\u5173\u901a\u4fe1\u5207\u6362\u5230\u65b0\u7684Active\u9632\u706b\u5899NGFW2\u4e0a\u3002\u56e0\u6b64\uff0c\u91c7\u7528VRRP\u6280\u672f\u5b9e\u73b0\u4e86\u5185\u90e8\u7f51\u7edc\u4e2d\u7684\u4e3b\u673a\u4e0d\u95f4\u65ad\u5730\u4e0e\u5916\u90e8\u7f51 \u7edc\u8fdb\u884c\u901a\u4fe1\uff0c\u53ef\u9760\u6027\u5f97\u5230\u4fdd\u8bc1\u3002\u5bf9\u4e8e\u53e6\u4e00\u7ec4VRRP\uff1aVRID100\uff0c\u539f\u7406\u76f8\u540c\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002 \u6211\u4eec\u53ef\u4ee5\u5728\u540c\u4e00\u53f0\u8bbe\u5907\u4e0a\u90e8\u7f72\u591a\u4e2aVRRP\u7ec4\uff0c\u4f8b\u5982\u4e0b\u56fe\u4e2d\uff0cNGFW1\u7684GE1/0/1\u53e3\u53caNGFW2\u7684GE1/0/1 \u53e3\u52a0\u5165\u4e86\u4e00\u4e2aVRRP\u7ec4\uff0c\u865a\u62dfIP\u4e3a192.168.1.1\uff0cNGFW1\u7684GE1/0/1\u53e3\u4e3aVRRP\u7684Active\uff0c\u8fd9\u7ec4VRRP\u7528\u6765\u5b9e\u73b0\u5185\u7f51PC\u7684\u7f51\u5173\u5197\u4f59\uff1b\u53e6\u5916NGFW1\u7684GE1/0/3\u53e3\u53caNGFW2\u7684GE1/0/3\u53e3\u8fd0\u884c\u4e86\u53e6\u4e00\u7ec4VRRP\uff0c\u865a\u62dfIP\u4e3a10.1.1.1\uff0cNGFW1\u7684GE1/0/3\u53e3\u4e3aActive\u3002 \u8fd9\u7ec4VRRP\u7528\u6765\u4e0eInternet\u5bf9\u63a5\u3002 \u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0b\u6570\u636e\u4f20\u8f93\u7684\u8fc7\u7a0b\uff1a \u73b0\u5728PC\u8981\u8bbf\u95eeInternet\u3002\u6570\u636e\u5305\u53d1\u9001\u7ed9\u81ea\u5df1\u7684\u7f51\u5173192.168.1.1\u3002192.168.1.1\u662fVRRP\u7ec41\u7684\u865a\u62dfIP \u5730\u5740\uff0c\u800c\u6b64\u523bNGFW1\u7684GE1/0/1\u53e3\u662f\u8be5VRRP\u7ec4\u7684Active\uff0c\u56e0\u6b64\u6570\u636e\u5305\u7531NGFW1\u8fdb\u884c\u5904\u7406\u548c\u8f6c\u53d1\u3002 \u7531\u4e8e\u8fd9\u662f\u6b64\u6570\u636e\u6d41\u7684\u9996\u4e2a\u62a5\u6587\uff0c\u56e0\u6b64NGFW1\u5efa\u7acb\u4f1a\u8bdd\u8868\u9879\uff0c\u5e76\u5c06\u6570\u636e\u5305\u901a\u8fc7\u4e0a\u884c\u7ebf\u8def\u9001\u5230Internet\u3002 Internet\u56de\u7a0b\u7684\u6570\u636e\u5305\u53d1\u541110.1.1.1\u8fd9\u4e2a\u5730\u5740\uff0c\u8fd9\u662fVRRP\u7ec4100\u7684\u865a\u62dfIP\u5730\u5740\uff0c\u800c\u6b64\u523bNGFW1\u7684 GE1/0/3\u53e3\u4e3aActive\uff0c\u56e0\u6b64\u6570\u636e\u5305\u53d1\u7ed9\u4e86NGFW1\u3002 NGFW1\u6536\u5230\u6570\u636e\u5305\u540e\uff0c\u53d1\u73b0\u6570\u636e\u5305\u5728\u4f1a\u8bdd\u8868\u4e2d\u6709\u5339\u914d\u7684\u8868\u9879\uff0c\u56e0\u6b64\u653e\u884c\u8fd9\u4e9b\u56de\u7a0b\u62a5\u6587\uff0c\u6700\u7ec8PC\u6536\u5230\u56de\u7a0b\u7684\u6570\u636e\u5305\uff0c\u6570\u636e\u4ea4\u4e92\u5b8c\u6210\uff0c\u901a\u4fe1\u6ca1\u6709\u95ee\u9898\u3002 \u7136\u800c\uff0c\u7531\u4e8e\u8fd9\u4e2a\u73af\u5883\u4e2d\uff0cVRRP\u7ec41\u53caVRRP\u7ec4100\u662f\u76f8\u4e92\u72ec\u7acb\u7684\uff0c\u90a3\u4e48\u5c31\u6709\u53ef\u80fd\u51fa\u73b0\u4e0b\u56fe\u6240\u793a\u7684\u60c5\u51b5\uff0c \u4e5f\u5373VRRP\u7ec41\u4e2dNGFW1\u7684GE1/0/1\u53e3\u4e3aActive\uff1b\u800cVRRP\u7ec4100\u4e2dNGFW2\u7684GE1/0/3\u53e3\u4e3aActive\u3002\u8fd9\u6837\u4f1a\u4ea7\u751f\u4ec0\u4e48\u95ee\u9898\u5462\uff1f PC\u8981\u8bbf\u95eeInternet\uff0c\u6570\u636e\u5305\u53d1\u9001\u7ed9\u81ea\u5df1\u7684\u7f51\u5173192.168.1.1\uff0c\u7531NGFW1\u8fdb\u884c\u5904\u7406\u548c\u8f6c\u53d1\u3002 NGFW1\u5efa\u7acb\u4f1a\u8bdd\u8868\u9879\uff0c\u5e76\u5c06\u6570\u636e\u5305\u901a\u8fc7\u4e0a\u884c\u7ebf\u8def\u9001\u5230Internet\u3002 \u56de\u7a0b\u7684\u6570\u636e\u5305\u53d1\u541110.1.1.1\uff0c\u8fd9\u662fVRRP\u7ec4100\u7684\u865a\u62dfIP\u5730\u5740\uff0c\u800c\u6b64\u523bNGFW2\u7684GE1/0/3\u53e3\u4e3aActive\uff0c \u56e0\u6b64\u6570\u636e\u5305\u53d1\u7ed9\u4e86NGFW2\u3002 NGFW2\u6536\u5230\u6570\u636e\u5305\u540e\uff0c\u53d1\u73b0\u6570\u636e\u5305\u5728\u672c\u5730\u6ca1\u6709\u5339\u914d\u7684\u4f1a\u8bdd\u8868\u9879\uff0c\u56e0\u6b64\u4e22\u5f03\u8be5\u62a5\u6587\uff0c \u4ece\u8fd9\u4e2a\u4f8b\u5b50\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u9632\u706b\u5899\u4e0aVRRP\u7ec4\u7684\u4e3b/\u5907\u72b6\u6001\u7684\u7edf\u4e00\u662f\u975e\u5e38\u91cd\u8981\u7684\uff0c\u5426\u5219\u5c31\u53ef\u80fd\u4f1a\u9020\u6210\u6570\u636e\u5f80\u8fd4\u8def\u5f84\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002\u7136\u800c\u4f20\u7edf\u7684VRRP\u4e2d\uff0c\u7ec4\u4e0e\u7ec4\u4e4b\u95f4\u662f\u76f8\u4e92\u72ec\u7acb\u8fd0\u4f5c\u7684\uff0c\u65e0\u6cd5\u5b9e\u73b0\u7edf\u4e00\u7684\u7ba1\u7406\uff0c \u8fd9\u5c31\u9700\u8981VGMP\u4e86\u3002","title":"VRRP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vgmp","text":"\u4e00\u53f0\u8bbe\u5907\u53ef\u4ee5\u914d\u7f6e\u591a\u7ec4VRRP\uff0c\u800c\u4e14\u8fd9\u4e9bVRRP\u7ec4\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0c\u56e0\u6b64\u6709\u53ef\u80fd\u51fa\u73b0\u7684\u60c5\u51b5\u662f\uff1a\u5bf9\u4e8e\u7279\u5b9a\u7684\u7ec4\u800c\u8a00\uff0c\u672c\u8bbe\u5907\u662fActive\u8bbe\u5907\uff0c\u800c\u5bf9\u4e8e\u5176\u4ed6\u7ec4\uff0c\u672c\u8bbe\u5907\u53c8\u662fBackup\u8bbe\u5907\u3002VGMP\uff08VRRP Group Management Protocol\uff0cVRRP\u7ec4\u7ba1\u7406\u534f\u8bae\uff09\u7528\u4e8e\u7edf\u4e00\u7ba1\u7406\u5404\u4e2aVRRP\u7ec4\uff0c\u4ece\u800c\u5b9e\u73b0VRRP\u7ec4\u4e4b\u95f4\u7684\u7684\u8bbe\u5907\u72b6\u6001\u7edf\u4e00\u3002\u4ee5\u4e0b\u662fVGMP\u7684\u4e3b\u8981\u529f\u80fd\u4ecb\u7ecd\uff1a","title":"VGMP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_201","text":"\u5c06\u8bbe\u5907\u7684\u6240\u6709VRRP\u7ec4\u90fd\u52a0\u5165\u5230VGMP\u7ba1\u7406\u7ec4\u4e2d\uff0c\u7531VGMP\u7ba1\u7406\u7ec4\u7edf\u4e00\u76d1\u63a7\u7ec4\u5185\u6240\u6709\u7684VRRP\u7ec4\u72b6\u6001\u3002\u8fd9\u6837VGMP\u7ba1\u7406\u7ec4\u5c31\u53ef\u4ee5\u901a\u8fc7VRRP\u7edf\u4e00\u76d1\u63a7\u7cfb\u7edf\u7684\u63a5\u53e3\u72b6\u6001\u3002 \u5c06\u8bbe\u5907\u7684\u4e1a\u52a1\u63a5\u53e3\u52a0\u5165\u5230VGMP\u7ba1\u7406\u7ec4\u4e2d\uff0c\u7531VGMP\u7ba1\u7406\u7ec4\u7edf\u4e00\u76d1\u63a7\u7ec4\u5185\u6240\u6709\u63a5\u53e3\u72b6\u6001\uff08HRP Track\uff09\u3002","title":"\u63a5\u53e3\u96c6\u4e2d\u76d1\u63a7\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_202","text":"NGFW\u662f\u901a\u8fc7VGMP\u7ba1\u7406\u7ec4\u6765\u8fdb\u884c\u8bbe\u5907\u72b6\u6001\u7ba1\u7406\u7684\u3002VGMP\u7ba1\u7406\u7ec4\u7684\u4e3b\u5907\u72b6\u6001\u51b3\u5b9a\u4e86\u53cc\u673a\u70ed\u5907\u7ec4\u7f51\u4e2d\u8bbe\u5907\u7684\u4e3b\u5907\u72b6\u6001\uff0c\u51b3\u5b9a\u4e86VGMP\u7ba1\u7406\u7ec4\u5185\u7684\u6210\u5458\u63a5\u53e3\u548cVRRP\u7ec4\u7684\u72b6\u6001\u3002 \u5f53\u4e00\u53f0\u8bbe\u5907\u7684VGMP\u7ba1\u7406\u7ec4\u7684\u72b6\u6001\u4e3aActive\u65f6\uff0c\u7ec4\u5185\u6240\u6709\u6210\u5458\u7684\u63a5\u53e3\u72b6\u6001\u7edf\u4e00\u4e3aActive\uff0c\u8be5\u8bbe\u5907\u6210 \u4e3a\u4e3b\u8bbe\u5907\u3002\u53e6\u5916\u4e00\u53f0\u8bbe\u5907\u7684VGMP\u7ba1\u7406\u7ec4\u72b6\u6001\u4e3aStandby\uff0c\u5219\u8be5\u8bbe\u5907\u4e3a\u5907\u7528\u8bbe\u5907\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cNGFW1\u53caNGFW2\u7684\u4e24\u7ec4VRRP\u90fd\u52a0\u5165VGMP\u7ba1\u7406\u7ec4\uff0c\u7531VGMP\u7ba1\u7406\u7ec4\u7edf\u4e00\u7ba1\u7406\u4e24\u7ec4VRRP \u7684\u4e3b\u5907\u72b6\u6001\u548c\u5207\u6362\u3002\u7f51\u7edc\u7ba1\u7406\u5458\u5c06NGFW1\u914d\u7f6e\u4e3a\u521d\u59cb\u65f6\u7684\u4e3b\u9632\u706b\u5899\u3001NGFW2\u4e3a\u5907\u9632\u706b\u5899\u3002\u5728\u6b63\u5e38\u60c5\u51b5\u4e0bNGFW1\u4e3aVGMP\u7684Active\uff0c\u5b83\u662f\u4e24\u4e2aVRRP\u7ec4\uff08VRRP VRID1\u4e0e100\uff09\u7684Active\u8bbe\u5907\u3002 \u73b0\u5728NGFW1\u7684GE1/0/1\u53e3\u7684\u76f4\u8fde\u94fe\u8def\u53d1\u751f\u6545\u969c\uff0cVGMP\u7ba1\u7406\u7ec4\u68c0\u6d4b\u5230\u94fe\u8def\u7684\u53d8\u5316\uff0c\u56e0\u6b64\u53d1\u751fVGMP\u7ba1\u7406\u7ec4\u7684\u4e3b\u5907\u5207\u6362\uff0cNGFW2\u6210\u4e3aVGMP\u7684Active\uff0c\u800cNGFW1\u4e3aStandby\u3002\u4e00\u65e6VGMP\u7684\u4e3b\u5907\u53d1\u751f\u5207\u6362\uff0c \u8bbe\u5907\u4e0a\u6240\u6709\u52a0\u5165VGMP\u7ba1\u7406\u7ec4\u7684VRRP\u7ec4\u90fd\u53d1\u751f\u5207\u6362\u5e76\u4fdd\u6301\u4e3b\u5907\u72b6\u6001\u4e00\u81f4\u3002\u56e0\u6b64NGFW2\u6210\u4e3aVRRP\u7ec41 \u53ca\u7ec4100\u7684Active\u8bbe\u5907\u3002\u5982\u6b64\u4e00\u6765\uff0c\u7531VRRP\u7ec4\u72b6\u6001\u4e0d\u4e00\u81f4\u5bfc\u81f4\u7684\u5f80\u8fd4\u8def\u5f84\u4e0d\u4e00\u81f4\u95ee\u9898\u5c31\u53ef\u4ee5\u5f97\u5230\u89e3\u51b3\u3002","title":"\u8bbe\u5907\u72b6\u6001\u7edf\u4e00\u7ba1\u7406\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#hrp","text":"FW\u901a\u8fc7\u6267\u884c\u547d\u4ee4\uff08\u901a\u8fc7Web\u914d\u7f6e\u5b9e\u9645\u4e0a\u4e5f\u662f\u5728\u6267\u884c\u547d\u4ee4\uff09\u6765\u5b9e\u73b0\u7528\u6237\u6240\u9700\u7684\u5404\u79cd\u529f\u80fd\u3002\u5982\u679c\u5907\u7528\u8bbe\u5907\u5207\u6362\u4e3a\u4e3b\u7528\u8bbe\u5907\u524d\uff0c\u914d\u7f6e\u547d\u4ee4\u6ca1\u6709\u5907\u4efd\u5230\u5907\u7528\u8bbe\u5907\uff0c\u5219\u5907\u7528\u8bbe\u5907\u65e0\u6cd5\u5b9e\u73b0\u4e3b\u7528\u8bbe\u5907\u7684\u76f8\u5173\u529f\u80fd\uff0c\u4ece\u800c\u5bfc\u81f4\u4e1a\u52a1\u4e2d\u65ad\u3002 FW\u5c5e\u4e8e\u72b6\u6001\u68c0\u6d4b\u9632\u706b\u5899\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u52a8\u6001\u751f\u6210\u7684\u8fde\u63a5\uff0c\u90fd\u6709\u4e00\u4e2a\u4f1a\u8bdd\u8868\u9879\u4e0e\u4e4b\u5bf9\u5e94\u3002\u4e3b\u7528\u8bbe\u5907\u5904\u7406\u4e1a\u52a1\u8fc7\u7a0b\u4e2d\u521b\u5efa\u4e86\u5f88\u591a\u52a8\u6001\u4f1a\u8bdd\u8868\u9879\uff1b\u800c\u5907\u7528\u8bbe\u5907\u6ca1\u6709\u62a5\u6587\u7ecf\u8fc7\uff0c\u56e0\u6b64\u6ca1\u6709\u521b\u5efa\u4f1a\u8bdd\u8868\u9879\u3002\u5982\u679c\u5907\u7528\u8bbe\u5907\u5207\u6362\u4e3a\u4e3b\u7528\u8bbe\u5907\u524d\uff0c\u4f1a\u8bdd\u8868\u9879\u6ca1\u6709\u5907\u4efd\u5230\u5907\u7528\u8bbe\u5907\uff0c\u5219\u4f1a\u5bfc\u81f4\u540e\u7eed\u4e1a\u52a1\u62a5\u6587\u65e0\u6cd5\u5339\u914d\u4f1a\u8bdd\u8868\uff0c\u4ece\u800c\u5bfc\u81f4\u4e1a\u52a1\u4e2d\u65ad\u3002 \u56e0\u6b64\u4e3a\u4e86\u5b9e\u73b0\u4e3b\u7528\u8bbe\u5907\u51fa\u73b0\u6545\u969c\u65f6\u5907\u7528\u8bbe\u5907\u80fd\u5e73\u6ed1\u5730\u63a5\u66ff\u5de5\u4f5c\uff0c\u5fc5\u987b\u5728\u4e3b\u7528\u548c\u5907\u7528\u8bbe\u5907\u4e4b\u95f4\u5907\u4efd\u5173\u952e\u914d\u7f6e\u547d\u4ee4\u548c\u4f1a\u8bdd\u8868\u7b49\u72b6\u6001\u4fe1\u606f\u3002\u4e3a\u6b64\u534e\u4e3a\u9632\u706b\u5899\u5f15\u5165\u4e86HRP\uff08 Huawei Redundancy Protocol\uff09\u534f\u8bae\uff0c \u5b9e\u73b0\u9632\u706b\u5899\u53cc\u673a\u4e4b\u95f4\u52a8\u6001\u72b6\u6001\u6570\u636e\u548c\u5173\u952e\u914d\u7f6e\u547d\u4ee4\u7684\u5907\u4efd\u3002 \u5728\u53cc\u673a\u70ed\u5907\u7ec4\u7f51\u4e2d\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u6307\u5b9a\u5fc3\u8df3\u7ebf\u4f5c\u4e3a\u4e13\u95e8\u7684\u5907\u4efd\u901a\u9053\uff0c\u7528\u4e8e\u5907\u4efd\u914d\u7f6e\u547d\u4ee4\u548c\u72b6\u6001\u4fe1\u606f\u3002\u4e3b\u5907\u8bbe\u5907\u901a\u8fc7\u5fc3\u8df3\u7ebf\u4ea4\u4e92\u62a5\u6587\u4e86\u89e3\u5bf9\u65b9\u72b6\u6001\uff0c\u4ee5\u53ca\u5b9e\u73b0\u914d\u7f6e\u547d\u4ee4\u548c\u72b6\u6001\u4fe1\u606f\u7684\u5907\u4efd\u3002\u5fc3\u8df3\u7ebf\u4e24\u7aef\u7684\u8bbe\u5907\u4e0a\u7684\u63a5\u53e3\u79f0\u4e3a\u5fc3\u8df3\u63a5\u53e3\u3002 \u9632\u706b\u5899\u53cc\u673a\u914d\u7f6e\u6b65\u9aa4 \u914d\u7f6e\u6848\u4f8b 1\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u7269\u7406\u63a5\u53e3\u90e8\u7f72 VRRP\uff09","title":"HRP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_203","text":"\u5982\u56fe\u6240\u793a\uff0cATAE3.0/E9000\u673a\u6846\u901a\u8fc7\u6838\u5fc3\u4ea4\u6362\u673a\u5806\u53e0\u7ec4\uff08Switch-Stack\uff09\u8fde\u63a5\u5230\u9632\u706b\u5899FW1\u53caFW2\u3002 ATAE3.0/E9000\u76ee\u524d\u53ea\u89c4\u5212\u4e861\u4e2aVLAN\uff0c\u670d\u52a1\u5668\u5355\u677f\uff08Server1\u53caServer2\uff09\u4f7f\u7528192.168.10.0/24\u7f51\u6bb5\uff0c\u4e14\u7f3a\u7701\u7f51\u5173\u8bbe\u7f6e\u4e3aFW1/FW2\u3002 \u9632\u706b\u5899FW1\u53caFW2\u90e8\u7f72\u53cc\u673a\u70ed\u5907\uff0c\u5de5\u4f5c\u65b9\u5f0f\u4e3a\u4e3b\u5907\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0bFW1\u4e3a\u4e3b\uff0cFW2\u4e3a\u5907\u3002 \u9632\u706b\u5899FW1\u53caFW2\u4e0a\u4e0b\u884c\u5747\u8fde\u63a5\u7740\u4ea4\u6362\u673a\uff0c\u5176\u4e2dCSW1\u53caCSW2\u4e3a\u5916\u7f51\uff08\u6216\u5ba2\u6237\uff09\u4ea4\u6362\u673a\uff0c\u6309\u56fe\u793a\u8fd0\u884c VRRP\u3002 \u4e24\u53f0\u9632\u706b\u5899\u7684GE1/0/0\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u5185\u7f51\uff08Trust\u5b89\u5168\u533a\u57df\uff09\uff0c\u8fd0\u884c\u4e00\u7ec4VRRP\uff0c\u4f7f\u7528\u7684VRID\u4e3a1\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.10.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3a\u670d\u52a1\u5668\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\uff1b\u4e24\u53f0\u9632\u706b\u5899\u7684GE1/0/7\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u5916\u7f51\uff08Untrust\u5b89\u5168\u533a\u57df\uff09\uff0c\u8fd0\u884c\u53e6\u4e00\u7ec4VRRP\uff0c\u4f7f\u7528\u7684VRID\u4e3a3\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a10.1.1.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3a\u5916\u90e8\u4ea4\u6362\u673aCSW1\u53caCSW2\u7684\u3001\u5230\u8fbe\u5185\u90e8\u7f51\u6bb5\u7684\u9759\u6001\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u3002 \u8981\u6c42Server1\u53caServer2\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002","title":"\u573a\u666f\u8bf4\u660e\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_204","text":"","title":"\u914d\u7f6e\u6307\u5bfc\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u5b8c\u6210FW1\u548cFW2\u7684\u63a5\u53e3\u57fa\u672c\u914d\u7f6e\u3001\u63a5\u53e3\u52a0\u57df"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2vrrp","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u6ce8\u610f\uff1a\u5728\u914d\u7f6e\u9632\u706b\u5899VRRP\u65f6\uff0c\u4e3b\u9632\u706b\u5899\u7684\u6240\u6709VRRP\u90fd\u9700\u52a0\u5165Active\u7ba1\u7406\u7ec4\uff0c\u800c\u5907\u4efd\u9632\u706b\u5899\u7684\u6240\u6709 VRRP\u90fd\u9700\u52a0\u5165Standby\u7ba1\u7406\u7ec4\u3002","title":"\u5b8c\u6210FW1\u548cFW2\u7684VRRP\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2hrp","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cFW1\u4e0eFW2\u4fbf\u4f1a\u5f00\u59cb\u4ee5\u53cc\u673a\u7684\u65b9\u5f0f\u5de5\u4f5c\u3002\u7531\u4e8eFW1\u662f\u7f3a\u7701\u7684\u4e3b\u9632\u706b\u5899\uff0c\u56e0\u6b64\u5176\u8bbe\u5907 \u540d\u79f0\u5c06\u53d8\u6210HRP_A[FW1] \uff0c \u5176\u4e2dA\u8868\u793aActive\uff1b\u800cFW2\u7531\u4e8e\u662f\u5907\u9632\u706b\u5899\uff0c \u56e0\u6b64\u5176\u8bbe\u5907\u540d\u79f0\u5c06\u53d8\u6210 HRP_S[FW2]\uff0c\u5176\u4e2dS\u8868\u793aStandby\u3002 \u5728FW1\u4e0a\u4f7f\u7528display hrp group\u547d\u4ee4\uff0c\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a \u800c\u5728FW2\u4e0a\u4f7f\u7528\u8be5\u547d\u4ee4\uff0c\u8f93\u51fa\u5982\u4e0b\uff1a HRP_S[FW2] display hrp group \u53e6\u5916\uff0c\u4f7f\u7528**display hrp state**\u547d\u4ee4\uff08\u663e\u793a\u5f53\u524dHRP\u7684\u72b6\u6001\uff0c\u5305\u62ec\u7ba1\u7406\u7ec4\u7684\u63a5\u53e3\u548ctrack\u63a5\u53e3\u7b49\uff09\uff0c\u5728FW1 \u4e0a\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u8f93\u51fa\uff1a HRP_A[FW1] display hrp state The firewall's config state is: ACTIVE Backup channel usage: 0.01% Time elapsed after the last switchover: 0 days, 0 hours, 2 minutes Current state of virtual routers configured as active: GigabitEthernet1/0/7 vrid 3 : active GigabitEthernet1/0/0 vrid 1 : active","title":"\u5b8c\u6210FW1\u548cFW2\u7684HRP\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_205","text":"FW1\u53caFW2\u4f5c\u4e3a\u670d\u52a1\u5668\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\uff0c\u8981\u8d1f\u8d23\u5c06\u670d\u52a1\u5668\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u9700\u5177\u5907\u76f8\u5e94\u7684\u8def\u7531\u4fe1\u606f\u3002\u5728\u672c\u573a\u666f\u4e2d\uff0c\u5f88\u660e\u663e\uff0c\u4e0e\u5916\u90e8\u7f51\u7edc\u5bf9\u63a5\u91c7\u7528\u7684\u662f\u201c\u9759\u6001\u8def\u7531+VRRP\u201d\u7684\u65b9\u6848\u3002\u56e0\u6b64\uff0c \u9700\u5728FW1\u53caFW2\u4e0a\u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\uff0c\u6b64\u5904\u6211\u4eec\u5c06\u4e3a\u5b83\u4eec\u5404\u914d\u7f6e\u4e00\u6761\u9ed8\u8ba4\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3a\u5ba2\u6237\u4ea4\u6362\u673a\u7684VRRP\u865a\u62dfIP\u5730\u574010.1.1.5\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_A[FW1] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_S[FW2] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u7f3a\u7701\u65f6\uff0c\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\u4e0d\u4f1a\u81ea\u52a8\u4ece\u4e3b\u5899\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\uff0c \u56e0\u6b64\u9759\u6001\u8def\u7531\u9700\u5206\u522b\u5728FW1\u53caFW2\u4e0a\u8fdb\u884c\u914d\u7f6e\u3002 \u6ce8\u610f\uff1a\u4e3a\u4e86\u8ba9Server\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u56de\u7a0b\u6d41\u91cf\u80fd\u591f\u4ece\u5ba2\u6237\u4ea4\u6362\u673aCSW\u987a\u5229\u5730\u8fd4\u56deFW1/FW2\u5e76\u5230\u8fbe Server\uff0c\u5728\u672c\u6b65\u9aa4\u4e2d\uff0c\u9700\u786e\u4fdd\u5ba2\u6237\u4ea4\u6362\u673aCSW1\u53caCSW2\u62e5\u6709\u5230\u8fbe192.168.10.0/24\u7f51\u6bb5\u7684\u56de\u7a0b\u8def\u7531\uff0c\u8be5\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5e94\u4e3a10.1.1.1\u3002","title":"\u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1","text":"\u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u5728\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff08Security-Policy\uff09\u65f6\uff0c\u9700\u5728\u4e3b\u9632\u706b\u5899\u4e0a\u5b8c\u6210\u76f8 \u5e94\u7684\u914d\u7f6e\uff0c\u6240\u505a\u7684\u5b89\u5168\u7b56\u7565\u7684\u76f8\u5173\u914d\u7f6e\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\u3002\u56e0\u6b64\u4e0a\u8ff0test1\u5b89\u5168\u89c4\u5219\u4f1a\u81ea\u52a8\u540c\u6b65\u5230FW2\u3002 \u5230\u76ee\u524d\u4e3a\u6b62\uff0cServer1\u53caServer2\u5df2\u7ecf\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u4e86\u3002","title":"\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u7684\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat_1","text":"\u73b0\u5728\u7f51\u7edc\u4e2d\u51fa\u73b0\u4e86\u65b0\u589e\u7684\u9700\u6c42\uff0c\u8981\u6c42\u5185\u90e8\u7f51\u6bb5192.168.10.0/24\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u5c06\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c \u8f6c\u6362\u6210\u5730\u5740\u6c6010.1.1.10~10.1.1.20\u4e2d\u7684\u5ba2\u6237\u5927\u7f51IP\u5730\u5740\uff0810.1.1.10~10.1.1.20\u5730\u5740\u6bb5\u9700\u5411\u5ba2\u6237\u7533\u8bf7\uff09\u3002 \u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u5b8c\u6210NAT\u7b56\u7565\u7684\u914d\u7f6e\uff1a \u6ce8\u610f\uff1a\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u6267\u884c\u7684\u4e0a\u8ff0NAT\u5730\u5740\u6c60\u53caNAT\u7b56\u7565\u914d\u7f6e\uff0c\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899FW2\u3002 \u4ee5\u4e0a\u7684\u914d\u7f6e\u4e2d\uff0cNAT\u7b56\u7565\u89c4\u5219policy1\u7528\u4e8e\u4f7f\u9632\u706b\u5899\u5728\u6536\u5230Trust\u533a\u57df\u8bbf\u95eeUntrust\u533a\u57df\u7684\u3001\u6e90IP\u5730\u5740\u4e3a 192.168.10.0/24\u7f51\u6bb5\u7684\u62a5\u6587\u65f6\uff0c\u5c06\u8fd9\u4e9b\u62a5\u6587\u7684\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u8f6c\u6362\u6210\u5730\u5740\u6c60pool1\u4e2d\u7684\u67d0\u4e2aIP\u5730\u5740\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cServer1\u5373\u53ef\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002\u5f53Server1 ping\u5916\u90e8\u7f51\u7edcIP\u5730\u574010.1.1.30\u65f6\uff0c\u6211\u4eec\u80fd\u5728 FW1\u4e0a\u770b\u5230\u5982\u4e0b\u4f1a\u8bdd\uff1a \u4ee5\u4e0a\u8f93\u51fa\u4e2d\uff0c\u4e2d\u62ec\u53f7\u5185\u7684IP\u5730\u5740\u4e3a\u8f6c\u6362\u540e\u7684IP\u5730\u5740\u3002","title":"\uff08\u589e\u52a0\u9700\u6c42\uff09\u6e90\u5730\u5740NAT\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat-server_3","text":"\u73b0\u5728\u7f51\u7edc\u4e2d\u51fa\u73b0\u4e86\u65b0\u589e\u7684\u9700\u6c42\uff0c\u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a10.1.1.29\uff1a2121\u3002\u8981\u5b9e\u73b0\u8fd9\u4e2a\u9700\u6c42\uff0c\u81f3\u5c11\u6709\u4e24\u4e2a\u914d\u7f6e\u9700\u8981\u5b8c\u6210\uff0c\u5176\u4e00\u662f\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u7528\u6237\u80fd\u591f\u8bbf\u95eeTrust\u533a\u57df\u4e2d\u7684Server2\uff08192.168.10.100\uff09\u7684FTP\u670d\u52a1\uff1b\u5176\u4e8c\u662f\u914d\u7f6eNAT Server\uff0c\u5c06\u8be5\u5185\u90e8\u4e1a\u52a1192.168.10.100\uff1a21\u6620\u5c04\u523010.1.1.29\uff1a2121\u3002 \u53e6\u5916\uff0cFW\u8fd8\u9700\u589e\u52a0NAT server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7528\u6237\u80fd\u591f\u4f7f\u7528\u76ee\u7684IP\u5730\u574010.1.1.29\uff1a2121\u6765\u8bbf\u95ee Server2\u7684FTP\u670d\u52a1\uff1a HRP_A[FW1] nat server s2 zone untrust protocol tcp global 10.1.1.29 2121 inside 192.168.10.100 21 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5916\u90e8\u7f51\u7edc\u7528\u6237\u5373\u53ef\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\u3002\u5728FW1\u4e0a\u80fd\u770b\u5230\u5982\u4e0b\u4f1a\u8bdd\uff1a \u6700\u540e\uff0c\u5728\u672c\u4f8b\u4e2d\uff0cATAE3.0/E9000\u5185\u53ea\u89c4\u5212\u4e86\u4e00\u4e2aVLAN\u3002\u800c\u9632\u706b\u5899FW1\u53caFW2\u7684GE1/0/0\u63a5\u53e3\u53ea\u9700\u4e3a\u8be5VLAN\u63d0\u4f9b\u7f51\u5173\u670d\u52a1\uff0c\u56e0\u6b64\u6211\u4eec\u76f4\u63a5\u5728FW1\u53caFW2\u7684GE1/0/0\u63a5\u53e3\u4e0a\u8fdb\u884cIP\u5730\u5740\u53caVRRP\u529f\u80fd\u7684\u914d\u7f6e\uff0c \u5728\u8fd9\u4e2a\u573a\u666f\u4e2d\uff0c\u6838\u5fc3\u4ea4\u6362\u673a\u5806\u53e0\u7ec4Switch-Stack\u7684GE0/0/11\u53caGE0/0/12\u63a5\u53e3\u9700\u914d\u7f6e\u4e3aAccess\u7c7b\u578b\uff0c\u5e76\u4e14\u52a0\u5165\u76f8\u5e94\u7684VLAN\u3002 \u4e0e\u9632\u706b\u5899\u53cc\u673a\u70ed\u5907\u76f8\u5173\u7684\u5176\u4ed6\u547d\u4ee4","title":"\uff08\u589e\u52a0\u9700\u6c42\uff09NAT Server\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#hrp-standby-config-enable","text":"\u8be5\u547d\u4ee4\u7528\u4e8e\u5141\u8bb8\u914d\u7f6e\u5907\u7528\u8bbe\u5907\u3002\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u672a\u542f\u7528\u5141\u8bb8\u914d\u7f6e\u5907\u7528\u8bbe\u5907\u7684\u529f\u80fd\u3002\u6240\u6709\u53ef\u4ee5\u5907\u4efd\u7684\u4fe1\u606f\u90fd\u53ea\u80fd\u5728\u4e3b\u9632\u706b\u5899\u4e0a\u914d\u7f6e\uff0c\u4e0d\u80fd\u5728\u5907\u9632\u706b\u5899\u4e0a\u914d\u7f6e\u3002\u542f\u7528\u5141\u8bb8\u914d\u7f6e\u5907\u7528\u8bbe\u5907\u7684\u529f\u80fd\u540e\uff0c\u6240\u6709\u53ef\u4ee5\u5907\u4efd\u7684\u4fe1\u606f\u90fd\u53ef\u4ee5\u76f4\u63a5\u5728\u5907\u9632\u706b\u5899\u4e0a\u8fdb\u884c\u914d\u7f6e\u3002\u4e14\u5907\u9632\u706b\u5899\u4e0a\u7684\u914d\u7f6e\u53ef\u4ee5\u540c\u6b65\u5230\u4e3b\u9632\u706b\u5899\u3002","title":"hrp standby config enable"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#hrp-mirror-session-enable","text":"\u8be5\u547d\u4ee4\u7528\u4e8e\u542f\u7528\u4f1a\u8bdd\u5feb\u901f\u5907\u4efd\u3002\u914d\u7f6e\u4f1a\u8bdd\u5feb\u901f\u5907\u4efd\u529f\u80fd\u540e\uff0c\u4e3b\u9632\u706b\u5899\u7684\u4f1a\u8bdd\u4fe1\u606f\u4f1a\u7acb\u5373\u540c\u6b65\u81f3\u5907\u9632\u706b\u5899\u3002\u5f53\u4e3b\u9632\u706b\u5899\u51fa\u73b0\u6545\u969c\u65f6\uff0c\u62a5\u6587\u80fd\u591f\u5e73\u6ed1\u5730\u88ab\u5907\u9632\u706b\u5899\u8f6c\u53d1\u51fa\u53bb\uff0c\u4ece\u800c\u4fdd\u8bc1\u5185\u5916\u90e8\u7528\u6237\u7684\u4f1a\u8bdd\u4e0d\u4e2d\u65ad\u3002\u5f00\u542f\u8be5\u529f\u80fd\u65f6\uff0c\u5982\u679c\u7f51\u7edc\u4e2d\u5b58\u5728\u5927\u91cf\u7684\u4f1a\u8bdd\uff0c\u90a3\u4e48\u4e24\u53f0\u9632\u706b\u5899\u4e4b\u95f4\u7684\u5fc3\u8df3\u7ebf\u53ef\u80fd\u9700\u89c4\u5212\u8f83\u5927\u7684\u53ef\u7528\u5e26\u5bbd\uff0c\u4f8b\u5982\u53ef\u4f7f\u7528\u805a\u5408\u63a5\u53e3\uff08Eth-trunk\uff09\u4f5c\u4e3a\u5fc3\u8df3\u63a5\u53e3\u3002","title":"hrp mirror session enable"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#undo-hrp-preempt","text":"\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cVGMP\u7ba1\u7406\u7ec4\u7684\u62a2\u5360\u529f\u80fd\u4e3a\u5f00\u542f\u72b6\u6001\uff0c\u62a2\u5360\u5ef6\u8fdf\u65f6\u95f4\u4e3a60s\uff08\u8be5\u65f6\u95f4\u4f7f\u7528**hrp preempt** **delay**\u547d\u4ee4\u4fee\u6539\uff09\u3002\u5982\u679c\u914d\u7f6e**undo hrp preempt**\u5219\u62a2\u5360\u529f\u80fd\u88ab\u5173\u95ed\u3002 \u914d\u7f6e\u6848\u4f8b 2\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u4e0b\u884c \u5b50\u63a5\u53e3\u90e8\u7f72 VRRP\uff09","title":"undo hrp preempt"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_206","text":"1) \u5982\u56fe\u6240\u793a\uff0cATAE3.0/E9000\u673a\u6846\u901a\u8fc7\u6838\u5fc3\u4ea4\u6362\u673a\u5806\u53e0\u7ec4\uff08Switch-Stack\uff09\u8fde\u63a5\u5230\u9632\u706b\u5899FW1\u53caFW2\u3002 2) ATAE3.0/E9000 \u76ee \u524d \u89c4 \u5212 \u4e86 2 \u4e2a VLAN \uff0c VLAN10 \u4f7f\u7528 192.168.10.0/24 \u7f51\u6bb5\uff0c VLAN20 \u4f7f\u7528 192.168.20.0/24\u7f51\u6bb5\u3002\u5176\u4e2dVLAN10\u88ab\u89c4\u5212\u5728\u4e86\u9632\u706b\u5899\u7684Trust\u533a\u57df\uff0c\u800cVLAN20\u88ab\u89c4\u5212\u5728\u4e86DMZ\u533a\u57df\u3002 \u9632\u706b\u5899FW1\u53caFW2\u90e8\u7f72\u53cc\u673a\u70ed\u5907\uff0c\u5de5\u4f5c\u65b9\u5f0f\u4e3a\u4e3b\u5907\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0bFW1\u4e3a\u4e3b\uff0cFW2\u4e3a\u5907\u3002 \u9632\u706b\u5899FW1\u53caFW2\u4e0a\u4e0b\u884c\u5747\u8fde\u63a5\u7740\u4ea4\u6362\u673a\uff0c\u5176\u4e2dCSW1\u53caCSW2\u4e3a\u5916\u7f51\uff08\u6216\u5ba2\u6237\uff09\u4ea4\u6362\u673a\uff0c\u6309\u56fe\u793a\u8fd0\u884c VRRP\u3002 \u4e24\u53f0\u9632\u706b\u5899\u7684GE1/0/0\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u5185\u7f51\uff0c\u7531\u4e8e\u8be5\u7269\u7406\u63a5\u53e3\u9700\u5bf9\u63a5\u4e24\u4e2aVLAN\uff0c\u56e0\u6b64\u9700\u521b\u5efa\u4e24\u4e2a\u5b50\u63a5\u53e3\u3002\u4e3a\u4e86\u63d0\u4f9b\u5197\u4f59\u7684\u7f51\u5173\uff0cFW1\u53caFW2\u90fd\u9700\u5728\u81ea\u5df1GE1/0/0\u7684\u4e24\u4e2a\u5b50\u63a5\u53e3\u4e0a\u5404\u8fd0\u884c\u4e00\u7ec4VRRP\uff0c\u5176\u4e2dVLAN10\u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a1\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.10.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN10\u4e1a\u52a1\u7684\u7f51\u5173\uff1bVLAN20 \u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a2\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.20.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN20\u4e1a\u52a1\u7684\u7f51\u5173\u3002 \u4e24\u53f0\u9632\u706b\u5899\u7684GE1/0/7\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u5916\u7f51\uff08Untrust\u533a\u57df\uff09\uff0c\u8fd0\u884c\u53e6\u4e00\u7ec4VRRP\uff0c\u4f7f\u7528\u7684VRID\u4e3a3\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a10.1.1.1\u3002 \u8981\u6c42\u5185\u90e8\u7f51\u6bb5192.168.10.0/24\u80fd\u4e3b\u52a8\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff0c\u800c\u4e14\u5f53\u5176\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u9632\u706b\u5899\u5c06\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u8f6c\u6362\u6210\u5730\u5740\u6c6010.1.1.10~10.1.1.20\u4e2d\u7684IP\u5730\u5740\u3002\u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c \u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a10.1.1.29\uff1a2121\u3002","title":"\u573a\u666f\u8bf4\u660e\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_207","text":"","title":"\u914d\u7f6e\u6307\u5bfc\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2_1","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u5b8c\u6210FW1\u548cFW2\u7684\u63a5\u53e3\u57fa\u672c\u914d\u7f6e\u3001\u63a5\u53e3\u52a0\u57df"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2vrrp_1","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u5b8c\u6210FW1\u548cFW2\u7684VRRP\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2hrp_1","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cFW1\u4e0eFW2\u4fbf\u4f1a\u5f00\u59cb\u4ee5\u53cc\u673a\u7684\u65b9\u5f0f\u5de5\u4f5c\u3002FW1\u7531\u4e8e\u662f\u7f3a\u7701\u7684\u4e3b\u9632\u706b\u5899\uff0c\u56e0\u6b64\u5176\u8bbe\u5907 \u540d\u79f0\u5c06\u53d8\u6210HRP_A[FW1] \uff0c \u5176\u4e2dA\u8868\u793aActive\uff1b\u800cFW2\u7531\u4e8e\u662f\u5907\u9632\u706b\u5899\uff0c \u56e0\u6b64\u5176\u8bbe\u5907\u540d\u79f0\u5c06\u53d8\u6210 HRP_S[FW2]\uff0c\u5176\u4e2dS\u8868\u793aStandby\u3002","title":"\u5b8c\u6210FW1\u548cFW2\u7684HRP\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_208","text":"FW1\u53caFW2\u4f5c\u4e3a\u670d\u52a1\u5668\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\uff0c\u8981\u8d1f\u8d23\u5c06\u670d\u52a1\u5668\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u9700\u5177\u5907\u76f8\u5e94\u7684\u8def\u7531\u4fe1\u606f\u3002\u5728\u672c\u573a\u666f\u4e2d\uff0c\u5f88\u660e\u663e\uff0c\u4e0e\u5916\u90e8\u7f51\u7edc\u5bf9\u63a5\u91c7\u7528\u7684\u662f\u201c\u9759\u6001\u8def\u7531+VRRP\u201d\u7684\u65b9\u6848\u3002\u56e0\u6b64\uff0c \u9700\u5728FW1\u53caFW2\u4e0a\u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\uff0c\u6b64\u5904\u6211\u4eec\u5c06\u4e3a\u5b83\u4eec\u5404\u914d\u7f6e\u4e00\u6761\u9ed8\u8ba4\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3a\u5ba2\u6237\u4ea4\u6362\u673a\u7684VRRP\u7684\u865a\u62dfIP\u5730\u574010.1.1.5\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_A[FW1] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_S[FW2] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u7f3a\u7701\u65f6\uff0c\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\u4e0d\u4f1a\u81ea\u52a8\u4ece\u4e3b\u5899\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\uff0c \u56e0\u6b64\u9759\u6001\u8def\u7531\u9700\u5206\u522b\u5728FW1\u53caFW2\u4e0a\u8fdb\u884c\u914d\u7f6e\u3002","title":"\u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipnatserver1","text":"\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff1a \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u5728\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff08Security-Policy\uff09\u65f6\uff0c\u9700\u5728\u4e3b\u9632\u706b\u5899\u4e0a\u5b8c\u6210\u76f8 \u5e94\u7684\u914d\u7f6e\uff0c\u6240\u505a\u7684\u5b89\u5168\u7b56\u7565\u7684\u76f8\u5173\u914d\u7f6e\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\u3002\u56e0\u6b64\u4e0a\u8ff0test1\u5b89\u5168\u89c4\u5219\u4f1a\u81ea\u52a8\u540c\u6b65\u5230FW2\u3002 \u5728FW1\u4e0a\u8fdb\u884c\u6e90\u5730\u5740NAT\u914d\u7f6e\u3002\u8981\u6c42\u5185\u90e8\u7f51\u6bb5192.168.10.0/24\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u5c06\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c \u8f6c\u6362\u6210\u5730\u5740\u6c6010.1.1.10\u81f310.1.1.20\u4e2d\u7684\u516c\u7f51IP\u5730\u5740\u3002 \u6ce8\u610f\uff1a\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u8fd0\u884c\u7684\u4e0a\u8ff0\u914d\u7f6e\uff0c\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899FW2\u3002\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cServer1\u5373\u53ef\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002","title":"\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u53ca\u6e90IP\u5730\u5740NAT\u914d\u7f6e\uff0c\u4f7f\u5f97Server1\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat-serverserver2ftp","text":"\u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a 10.1.1.29\uff1a2121\u3002\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a \u4e0a\u8ff0\u914d\u7f6e\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\u3002 \u53e6\u5916\uff0cFW\u8fd8\u9700\u589e\u52a0NAT server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u7528\u6237\u80fd\u591f\u4f7f\u7528\u76ee\u7684IP\u5730\u574010.1.1.29:2121\u6765\u8bbf\u95ee Server2\u7684FTP\u670d\u52a1\uff1a HRP_A[FW1] nat server s2 zone untrust protocol tcp global 10.1.1.29 2121 inside 192.168.20.5 21 \u6700\u540e\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u6838\u5fc3\u4ea4\u6362\u673aSwitch-Stack\u7684GE0/0/11\u53caGE0/0/12\u63a5\u53e3\u5fc5\u987b\u914d\u7f6e\u4e3aTrunk\u7c7b\u578b\uff0c\u5e76\u4e14\u653e \u901aVLAN10\u53ca20\u3002 \u914d\u7f6e\u6848\u4f8b 3\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0a\u4e0b\u884c\u8fde\u63a5\u4ea4\u6362\u673a\u5e76\u5728\u4e0b\u884cEth-trunk \u5b50\u63a5\u53e3\u90e8\u7f72 VRRP\uff09","title":"\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u53caNAT Server\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_209","text":"1) \u5982\u56fe\u6240\u793a\uff0cATAE3.0/E9000\u673a\u6846\u901a\u8fc7\u6838\u5fc3\u4ea4\u6362\u673a\u5806\u53e0\u7ec4\uff08Switch-Stack\uff09\u8fde\u63a5\u5230\u9632\u706b\u5899FW1\u53caFW2\u3002 2) ATAE3.0/E9000 \u76ee \u524d \u89c4 \u5212 \u4e86 2 \u4e2a VLAN \uff0c VLAN10 \u4f7f\u7528 192.168.10.0/24 \u7f51\u6bb5\uff0c VLAN20 \u4f7f\u7528 192.168.20.0/24\u7f51\u6bb5\u3002\u5176\u4e2dVLAN10\u88ab\u89c4\u5212\u5728\u4e86\u9632\u706b\u5899\u7684Trust\u5b89\u5168\u533a\u57df\uff0cVLAN20\u88ab\u89c4\u5212\u5728\u4e86DMZ\u5b89\u5168\u533a\u57df\u3002 \u9632\u706b\u5899FW1\u53caFW2\u90e8\u7f72\u53cc\u673a\u70ed\u5907\uff0c\u5de5\u4f5c\u65b9\u5f0f\u4e3a\u4e3b\u5907\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0bFW1\u4e3a\u4e3b\uff0cFW2\u4e3a\u5907\u3002 \u9632\u706b\u5899FW1\u53caFW2\u4e0a\u4e0b\u884c\u5747\u8fde\u63a5\u7740\u4ea4\u6362\u673a\uff0c\u5176\u4e2dCSW1\u53caCSW2\u4e3a\u5916\u7f51\uff08\u6216\u5ba2\u6237\uff09\u4ea4\u6362\u673a\uff0c\u6309\u56fe\u793a\u8fd0\u884c VRRP\u3002 \u4e3a\u4e86\u589e\u52a0\u9632\u706b\u5899\u4e0e\u4ea4\u6362\u673aSwitch-Stack\u4e4b\u95f4\u4e92\u8054\u94fe\u8def\u7684\u53ef\u9760\u6027\uff0cFW1\u3001FW2\u4e0eSwitch-Stack\u4e4b\u95f4\u90e8\u7f72\u94fe\u8def\u805a\u5408\u3002\u4e3a\u4e86\u589e\u52a0FW1\u4e0eFW2\u4e4b\u95f4\u7684\u5fc3\u8df3\u94fe\u8def\u7684\u53ef\u9760\u6027\u548c\u5e26\u5bbd\uff0c\u4e24\u53f0\u9632\u706b\u5899\u4e4b\u95f4\u91c7\u7528\u805a\u5408\u63a5\u53e3\u4e92\u8054\uff0c \u5c06\u8be5\u805a\u5408\u63a5\u53e3\u7528\u4e8eHRP\u5fc3\u8df3\u3002 \u4e24\u53f0\u9632\u706b\u5899\u7684\u805a\u5408\u63a5\u53e3Eth-trunk1\u7528\u4e8e\u8fde\u63a5\u5185\u7f51\uff0c\u7531\u4e8e\u8be5\u805a\u5408\u63a5\u53e3\u9700\u5bf9\u63a5\u4e24\u4e2aVLAN\uff0c\u56e0\u6b64\u9700\u521b\u5efa\u4e24\u4e2a\u5b50\u63a5\u53e3\u3002\u4e3a\u4e86\u63d0\u4f9b\u5197\u4f59\u7684\u7f51\u5173\uff0cFW1\u53caFW2\u9700\u5728Eth-trunk1\u7684\u4e24\u4e2a\u5b50\u63a5\u53e3\u4e0a\u5404\u8fd0\u884c\u4e00\u7ec4VRRP\uff0c\u5176\u4e2d VLAN10\u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a1\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.10.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN10\u4e1a\u52a1\u7684\u7f51\u5173\uff1b VLAN20\u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a2\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.20.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN20\u4e1a\u52a1\u7684\u7f51\u5173\uff1b \u4e24\u53f0\u9632\u706b\u5899\u7684GE1/0/7\u63a5\u53e3\u7528\u4e8e\u8fde\u63a5\u5916\u7f51\uff0c\u8fd0\u884c\u53e6\u4e00\u7ec4VRRP\uff0c\u4f7f\u7528\u7684VRID\u4e3a3\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a 10.1.1.1\u3002 \u8981 \u6c42 \u5185 \u90e8 \u7f51 \u6bb5 192.168.10.0/24 \u8bbf \u95ee \u5916 \u90e8 \u7f51 \u7edc \u65f6 \uff0c \u5c06 \u6e90 IP \u5730 \u5740 \u8fdb \u884c \u8f6c \u6362 \uff0c \u8f6c \u6362 \u6210 \u5730 \u5740 \u6c60 10.1.1.10~10.1.1.20\u4e2d\u7684IP\u5730\u5740\u3002\u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a10.1.1.29\uff1a2121\u3002","title":"\u573a\u666f\u8bf4\u660e\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_210","text":"","title":"\u914d\u7f6e\u6307\u5bfc\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2_2","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u5b8c\u6210FW1\u548cFW2\u7684\u63a5\u53e3\u57fa\u672c\u914d\u7f6e\u3001\u63a5\u53e3\u52a0\u57df"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2vrrp_2","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u5b8c\u6210FW1\u548cFW2\u7684VRRP\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2hrp_2","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u5b8c\u6210FW1\u548cFW2\u7684HRP\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_211","text":"FW1\u53caFW2\u4f5c\u4e3a\u670d\u52a1\u5668\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\uff0c\u8981\u8d1f\u8d23\u5c06\u670d\u52a1\u5668\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u9700\u5177\u5907\u76f8\u5e94\u7684\u8def\u7531\u4fe1\u606f\u3002\u5728\u672c\u573a\u666f\u4e2d\uff0c\u5f88\u660e\u663e\uff0c\u4e0e\u5916\u90e8\u7f51\u7edc\u5bf9\u63a5\u91c7\u7528\u7684\u662f\u201c\u9759\u6001\u8def\u7531+VRRP\u201d\u7684\u65b9\u6848\u3002\u56e0\u6b64\uff0c \u9700\u5728FW1\u53caFW2\u4e0a\u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\uff0c\u6b64\u5904\u6211\u4eec\u5c06\u4e3a\u5b83\u4eec\u5404\u914d\u7f6e\u4e00\u6761\u9ed8\u8ba4\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3a\u5ba2\u6237\u4ea4\u6362\u673a\u7684VRRP\u7684\u865a\u62dfIP\u5730\u574010.1.1.5\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_A[FW1] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a HRP_S[FW2] ip route-static 0.0.0.0 0.0.0.0 10.1.1.5 \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u7f3a\u7701\u65f6\uff0c\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e\u4e0d\u4f1a\u81ea\u52a8\u4ece\u4e3b\u5899\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\uff0c \u56e0\u6b64\u9759\u6001\u8def\u7531\u9700\u5206\u522b\u5728FW1\u53caFW2\u4e0a\u8fdb\u884c\u914d\u7f6e\u3002","title":"\u5b8c\u6210\u9759\u6001\u8def\u7531\u7684\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipnatserver1_1","text":"\u5728FW1\u4e0a\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u914d\u7f6e\uff1a \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u5728\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff08Security-Policy\uff09\u65f6\uff0c\u9700\u5728\u4e3b\u9632\u706b\u5899\u4e0a\u5b8c\u6210\u76f8\u5e94\u7684\u914d\u7f6e\uff0c\u6240\u505a\u7684\u5b89\u5168\u7b56\u7565\u7684\u76f8\u5173\u914d\u7f6e\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\u3002\u56e0\u6b64\u4e0a\u8ff0test1\u5b89\u5168\u89c4\u5219\u4f1a\u81ea\u52a8\u540c\u6b65\u5230FW2\u3002 \u8981\u6c42\u5185\u90e8\u7f51\u6bb5192.168.10.0/24\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u65f6\uff0c\u5c06\u6e90IP\u5730\u5740\u8fdb\u884c\u8f6c\u6362\uff0c\u8f6c\u6362\u6210\u5730\u5740\u6c6010.1.1.10\u81f3 10.1.1.20\u4e2d\u7684\u516c\u7f51IP\u5730\u5740\u3002\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u5b8c\u6210NAT\u7b56\u7565\u7684\u914d\u7f6e\uff1a \u6ce8\u610f\uff1a\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u8fd0\u884c\u7684\u4e0a\u8ff0\u914d\u7f6e\uff0c\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899FW2\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cServer1\u5373\u53ef\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002","title":"\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u53ca\u6e90IP\u5730\u5740NAT\u914d\u7f6e\uff0c\u4f7f\u5f97Server1\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat-serverserver2ftp_1","text":"\u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a 10.1.1.29\uff1a2121\u3002\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a \u53e6\u5916\uff0cFW\u8fd8\u9700\u589e\u52a0NAT server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u7528\u6237\u80fd\u591f\u4f7f\u7528\u76ee\u7684IP\u5730\u574010.1.1.29:2121\u6765\u8bbf\u95ee Server2\u7684FTP\u670d\u52a1\uff1a HRP_A[FW1] nat server s2 zone untrust protocol tcp global 10.1.1.29 2121 inside 192.168.20.5 21 \u6700\u540e\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u6838\u5fc3\u4ea4\u6362\u673aSwitch-Stack\u7684Eth-trunk1\u53caEth-trunk2\u63a5\u53e3\u5fc5\u987b\u914d\u7f6e\u4e3aTrunk\u7c7b\u578b\uff0c\u5e76\u4e14 \u653e\u901aVLAN10\u53ca20\u3002 \u914d\u7f6e\u6848\u4f8b4\uff1a\u9632\u706b\u5899\u53cc\u673a\u4e3b\u5907\u914d\u7f6e\uff08\u4e0b\u884c\u8fde\u63a5\u5185\u90e8\u4ea4\u6362\u673a\u5e76\u5728Eth- trunk \u5b50\u63a5\u53e3\u90e8\u7f72 VRRP\u3001\u4e0a\u884c\u8fde\u63a5\u5916\u90e8\u4ea4\u6362\u673a\u5e76\u8fd0\u884c OSPF\uff09","title":"\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u53caNAT Server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_212","text":"1) \u5982\u56fe\u6240\u793a\uff0cATAE3.0/E9000\u673a\u6846\u901a\u8fc7\u6838\u5fc3\u4ea4\u6362\u673a\u5806\u53e0\u7ec4\uff08Switch-Stack\uff09\u8fde\u63a5\u5230\u9632\u706b\u5899FW1\u53caFW2\u3002 2) ATAE3.0/E9000 \u76ee \u524d \u89c4 \u5212 \u4e86 2 \u4e2a VLAN \uff0c VLAN10 \u4f7f\u7528 192.168.10.0/24 \u7f51\u6bb5\uff0c VLAN20 \u4f7f\u7528 192.168.20.0/24\u7f51\u6bb5\u3002\u5176\u4e2dVLAN10\u88ab\u89c4\u5212\u5728\u4e86\u9632\u706b\u5899\u7684Trust\u5b89\u5168\u533a\u57df\uff0cVLAN20\u88ab\u89c4\u5212\u5728\u4e86DMZ\u5b89\u5168\u533a\u57df\u3002 \u9632\u706b\u5899FW1\u53caFW2\u90e8\u7f72\u53cc\u673a\u70ed\u5907\uff0c\u5de5\u4f5c\u65b9\u5f0f\u4e3a\u4e3b\u5907\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0bFW1\u4e3a\u4e3b\uff0cFW2\u4e3a\u5907\u3002 \u9632\u706b\u5899FW1\u53caFW2\u4e0a\u4e0b\u884c\u5747\u8fde\u63a5\u7740\u4ea4\u6362\u673a\uff0c\u5176\u4e2dCSW1\u53caCSW2\u4e3a\u5916\u7f51\uff08\u6216\u5ba2\u6237\uff09\u4ea4\u6362\u673a\uff0c\u6309\u56fe\u793a\u8fd0\u884c OSPF\u3002\u4e5f\u5373FW1\u4e0eCSW1\u3001FW2\u4e0eCSW2\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u3002 \u4e3a\u4e86\u589e\u52a0\u9632\u706b\u5899\u4e0e\u4ea4\u6362\u673aSwitch-Stack\u4e4b\u95f4\u4e92\u8054\u94fe\u8def\u7684\u53ef\u9760\u6027\uff0cFW1\u3001FW2\u4e0eSwitch-Stack\u4e4b\u95f4\u90e8\u7f72\u94fe\u8def\u805a\u5408\u3002\u4e3a\u4e86\u589e\u52a0FW1\u4e0eFW2\u4e4b\u95f4\u7684\u5fc3\u8df3\u94fe\u8def\u7684\u53ef\u9760\u6027\u548c\u5e26\u5bbd\uff0c\u4e24\u53f0\u9632\u706b\u5899\u4e4b\u95f4\u91c7\u7528\u805a\u5408\u63a5\u53e3\u4e92\u8054\uff0c \u5c06\u8be5\u805a\u5408\u63a5\u53e3\u7528\u4e8eHRP\u5fc3\u8df3\u3002 \u4e24\u53f0\u9632\u706b\u5899\u7684\u805a\u5408\u63a5\u53e3Eth-trunk1\u7528\u4e8e\u8fde\u63a5\u5185\u7f51\uff0c\u7531\u4e8e\u8be5\u805a\u5408\u63a5\u53e3\u9700\u5bf9\u63a5\u4e24\u4e2aVLAN\uff0c\u56e0\u6b64\u9700\u521b\u5efa\u4e24\u4e2a\u5b50\u63a5\u53e3\u3002\u4e3a\u4e86\u63d0\u4f9b\u5197\u4f59\u7684\u7f51\u5173\uff0cFW1\u53caFW2\u9700\u5728Eth-trunk1\u7684\u4e24\u4e2a\u5b50\u63a5\u53e3\u4e0a\u5404\u8fd0\u884c\u4e00\u7ec4VRRP\uff0c\u5176\u4e2d VLAN10\u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a1\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.10.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN10\u4e1a\u52a1\u7684\u7f51\u5173\uff1b VLAN20\u7684\u5b50\u63a5\u53e3\u4f7f\u7528\u7684VRID\u4e3a2\uff0c\u4e14\u865a\u62dfIP\u5730\u5740\u4e3a192.168.20.1\uff0c\u8be5\u5730\u5740\u5c06\u4f5c\u4e3aVLAN20\u4e1a\u52a1\u7684\u7f51\u5173\uff1b \u8981\u6c42\u5185\u90e8\u7f51\u6bb5192.168.10.0/24\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff08\u4e0d\u505a\u6e90\u5730\u5740NAT\uff09\u3002 \u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a 10.10.10.10\uff1a2121\u3002","title":"\u573a\u666f\u8bf4\u660e\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_213","text":"","title":"\u914d\u7f6e\u6307\u5bfc\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2_3","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u5b8c\u6210FW1\u548cFW2\u7684\u63a5\u53e3\u57fa\u672c\u914d\u7f6e\u3001\u63a5\u53e3\u52a0\u57df"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2vrrphrp-track","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u8bf4\u660e\uff1a\u5728\u90e8\u7f72\u4e86VRRP\u7684\u63a5\u53e3\u4e0a\uff0c\u9632\u706b\u5899\u53ef\u4ee5\u901a\u8fc7VRRP\u7684\u72b6\u6001\u6765\u76d1\u63a7\u63a5\u53e3\u7684\u72b6\u6001\uff0c\u4ece\u800c\u5728\u63a5\u53e3\u6545\u969c\u65f6\u611f\u77e5\u5230\u95ee\u9898\u7684\u53d1\u751f\uff0c\u5e76\u89e6\u53d1\u9632\u706b\u5899\u4e3b\u5907\u5207\u6362\u3002\u7136\u800cFW1\u53caFW2\u7684GE1/0/7\u53e3\u5728\u672c\u573a\u666f\u4e2d\u5e76\u672a\u8fd0\u884cVRRP\uff0c \u56e0\u6b64\u65e0\u6cd5\u901a\u8fc7VRRP\u76d1\u63a7\u8be5\u63a5\u53e3\uff0c\u6240\u4ee5\u9700\u8981\u914d\u7f6e**hrp track**\u547d\u4ee4\uff0c\u4f7f\u5f97\u9632\u706b\u5899\u7684VGMP\u80fd\u591f\u76d1\u63a7\u8fd9\u4e2a\u63a5\u53e3\u7684\u72b6\u6001\u3002\u5728\u4e3b\u9632\u706b\u5899\u7684\u63a5\u53e3\u4e0a\u9700\u4f7f\u7528**hrp track active**\u547d\u4ee4\uff0c\u800c\u5907\u5899\u4f7f\u7528**hrp track standby**\u3002","title":"\u5b8c\u6210FW1\u548cFW2\u7684VRRP\u914d\u7f6e\uff0c\u4ee5\u53caHRP Track\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1fw2hrp_3","text":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u5b8c\u6210FW1\u548cFW2\u7684HRP\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ospf_9","text":"FW1\u53caFW2\u4f5c\u4e3a\u670d\u52a1\u5668\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\uff0c\u8981\u8d1f\u8d23\u5c06\u670d\u52a1\u5668\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u9700\u5177\u5907\u76f8\u5e94\u7684\u8def\u7531\u4fe1\u606f\u3002\u5728\u672c\u573a\u666f\u4e2d\uff0cFW1\u53caFW2\u4e0e\u5916\u90e8\u4ea4\u6362\u673a\u91c7\u7528OSPF\u7684\u65b9\u5f0f\u5bf9\u63a5\uff0c\u8fdb\u884c\u8def\u7531\u4ea4\u4e92\u3002\u5178\u578b\u7684\u5bf9\u63a5\u573a\u666f\u5982\u4e0b\u3002 FW1\u4e0eCSW1\u91c7\u752810.1.1.0/30\u7684\u7f51\u6bb5\u4e92\u8054\uff1b\u57fa\u4e8e\u8be5\u76f4\u8fde\u63a5\u53e3\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u3002 FW2\u4e0eCSW2\u91c7\u752810.1.1.4/30\u7684\u7f51\u6bb5\u4e92\u8054\uff0c\u57fa\u4e8e\u8be5\u76f4\u8fde\u63a5\u53e3\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u3002 CSW1\u4e0eCSW2\u91c7\u7528\u53e6\u4e00\u4e2a\u4e92\u8054\u7f51\u6bb5\uff0c\u5e76\u4e14\u4e5f\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u3002 \u4e0a\u8ff0\u5efa\u7acb\u90bb\u63a5\u5173\u7cfb\u7684\u63a5\u53e3\u5fc5\u987b\u89c4\u5212\u5728\u76f8\u540c\u7684OSPF\u533a\u57df\uff08Area-ID\u5fc5\u987b\u76f8\u540c\uff0c\u4f8b\u5982\u90fd\u662fArea0\uff09\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u7f3a\u7701\u65f6\uff0cOSPF\u7684\u914d\u7f6e\u4e0d\u4f1a\u81ea\u52a8\u4ece\u4e3b\u5899\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\uff0c\u56e0\u6b64 OSPF\u9700\u5206\u522b\u5728FW1\u53caFW2\u4e0a\u8fdb\u884c\u914d\u7f6e\u3002\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0a\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u7684\u914d\u7f6e\uff1a \u6ce8\u610f\uff1a\u5728\u4e0a\u8ff0\u5b89\u5168\u7b56\u7565\u7684\u914d\u7f6e\u4e2d\uff0c\u201cOSPF1\u201d\u81f3\u201cOSPF4\u201d\u89c4\u5219\u7528\u4e8e\u5141\u8bb8FW\u4e0eCSW\u4ea4\u4e92\u7684OSPF\u62a5\u6587\uff0c \u4f7f\u5f97\u4e24\u8005\u80fd\u591f\u6b63\u786e\u5730\u5efa\u7acbOSPF\u90bb\u63a5\u5173\u7cfb\u5e76\u4ea4\u4e92\u8def\u7531\u3002\u5982\u679c\u4e0d\u914d\u7f6e\u76f8\u5173\u5b89\u5168\u89c4\u5219\uff0c\u5219FW\u4e0eCSW\u53ef\u80fd\u5c06\u65e0\u6cd5\u6b63\u786e\u5efa\u7acbOSPF\u90bb\u63a5\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u9700\u5728\u9632\u706b\u5899\u4e0a\u68c0\u67e5OSPF\u90bb\u63a5\u5173\u7cfb\u72b6\u6001\u53ca\u8def\u7531\uff0c\u786e\u4fdd\u9632\u706b\u5899\u5b66\u4e60\u5230\u4e86\u5ba2\u6237\u6240\u901a\u544a\u7684\u8def\u7531\u3002 \u4ee5FW1\u4e3a\u4f8b\uff0c\u67e5\u770b\u5176OSPF\u90bb\u5c45\u8868\uff1a \u5b83\u5df2\u7ecf\u4e0eCSW1\u5efa\u7acb\u4e86\u5168\u6bd7\u90bb\uff08Full\uff09\u7684\u90bb\u63a5\u5173\u7cfb\u3002","title":"\u5b8c\u6210OSPF\u7684\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#server1","text":"\u5728FW1\u4e0a\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u914d\u7f6e\uff1a \u6ce8\u610f\uff1a\u5f53FW1\u53caFW2\u5f62\u6210\u53cc\u673a\u4e3b\u5907\u540e\uff0c\u5728\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff08Security-Policy\uff09\u65f6\uff0c\u9700\u5728\u4e3b\u9632\u706b\u5899\u4e0a\u5b8c\u6210\u76f8 \u5e94\u7684\u914d\u7f6e\uff0c\u6240\u505a\u7684\u5b89\u5168\u7b56\u7565\u7684\u76f8\u5173\u914d\u7f6e\u4f1a\u81ea\u52a8\u540c\u6b65\u5230\u5907\u4efd\u9632\u706b\u5899\u3002\u56e0\u6b64\u4e0a\u8ff0test1\u5b89\u5168\u89c4\u5219\u4f1a\u81ea\u52a8\u540c\u6b65\u5230FW2\u3002 \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cServer1\u5373\u53ef\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u3002","title":"\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u914d\u7f6e\uff0c\u4f7f\u5f97Server1\u80fd\u591f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat-serverserver2ftp_2","text":"\u8981\u6c42\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1\uff0c\u5e76\u4e14\u5728\u8bbf\u95ee\u65f6\uff0c\u4f7f\u7528\u7684\u76ee\u7684IP\u5730\u5740\u53ca\u76ee\u7684TCP\u7aef\u53e3\u53f7\u4e3a 10.1.1.29\uff1a2121\u3002\u5728\u4e3b\u9632\u706b\u5899\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a \u53e6\u5916\uff0cFW\u8fd8\u9700\u589e\u52a0NAT server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u7528\u6237\u80fd\u591f\u4f7f\u7528\u76ee\u7684IP\u5730\u574010.1.1.29:2121\u6765\u8bbf\u95ee Server2\u7684FTP\u670d\u52a1\uff1a HRP_A[FW1]nat server s2 zone untrust protocol tcp global 10.1.1.29 2121 inside 192.168.20.5 21 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u672c\u573a\u666f\u4e2d\uff0cFW1\u4e0eCSW1\u91c7\u752810.1.1.0/30\u7f51\u6bb5\u76f4\u8fde\uff0cFW2\u4e0eCSW2\u91c7\u752810.1.1.4/30\u7f51 \u6bb5\u76f4\u8fde\uff0c\u800c\u5206\u914d\u7ed9Server2\u7684\u5916\u7f51IP\u5730\u5740\u662f10.1.1.29\uff0c\u8fd9\u4e2a\u5730\u5740\u5f53\u7136\u662f\u9700\u8981\u5916\u90e8\u7f51\u7edc\uff08\u4f8b\u5982\u5ba2\u6237\uff09\u5206\u914d\u7684\u3002\u76ee\u524d\u8fd9\u4e2a\u5730\u5740\u5e76\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u8bbe\u5907\uff0c\u4ec5\u4ec5\u7528\u4e8e\u76ee\u7684\u5730\u5740NAT\uff0c\u4e3a\u4e86\u8ba9\u5916\u90e8\u7f51\u7edc\u8bbf\u95ee10.1.1.29\u7684\u6d41\u91cf\u80fd\u591f\u987a\u5229\u5230\u8fbeFW1\u6216FW2\uff0c\u9632\u706b\u5899\u5c31\u9700\u8981\u901a\u8fc7OSPF\u5411\u5916\u90e8\u901a\u544a10.1.1.29/32\u8def\u7531\u3002 FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cFW1\u53caFW2\u4fbf\u4f1a\u5c06\u5176\u8def\u7531\u8868\u4e2d\u768410.1.1.29/32\u8def\u7531\u6ce8\u5165OSPF\uff0c\u5e76\u5411CSW1\u53caCSW2 \u8fdb\u884c\u901a\u544a\uff0c\u800c\u540e\u8005\u5373\u53ef\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u76f8\u5e94\u7684\u8def\u7531\u3002 \u9632\u706b\u5899\u53cc\u673a\u914d\u7f6e\u6ce8\u610f\u4e8b\u9879","title":"\u5b8c\u6210\u5b89\u5168\u7b56\u7565\u53caNAT Server\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97\u5916\u90e8\u7f51\u7edc\u80fd\u591f\u4e3b\u52a8\u8bbf\u95eeServer2\u7684FTP\u670d\u52a1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#7491-ospfnat","text":"\u5728\u4e0a\u56fe\u4e2d\uff0cFW1/FW2\u4e0eC1\u8fd0\u884cOSPF\u3002\u73b0\u5728\u5ba2\u6237\u4e3a\u9632\u706b\u5899\u5206\u914d\u4e86\u4e00\u4e2a\u5730\u5740\u6bb510.1.1.16/30\u4f5c\u4e3aNAT\u4f7f\u7528\u3002\u9632\u706b\u5899\u4f7f\u7528\u8fd9\u4e2a\u516c\u7f51\u5730\u5740\u6bb5\u4f5c\u4e3aNAT\u5730\u5740\u6c60\uff0c\u7136\u540e\u90e8\u7f72\u4e86nat-policy\uff0c\u5f53S1/S2\u8bbf\u95ee\u5ba2\u6237\u7f51\u7edc\u65f6\uff0c\u5c06\u6e90\u5730\u5740\u8fdb\u884c\u8f6c\u6362\u3002\u4e3a\u4e86\u8ba9\u8bbf\u95ee\u5ba2\u6237\u7f51\u7edc\u7684\u4e1a\u52a1\u6d41\u91cf\u80fd\u591f\u6b63\u5e38\u5f80\u8fd4\uff0c \u9700\u8981\u901a\u8fc7OSPF \u5411\u5ba2\u6237\u8bbe\u5907C1\u901a\u544a\u8fd9\u6761\u8def\u7531 10.1.1.16/30\u3002\u5728FW1/FW2\u914d\u7f6e10.1.1.16/30\u7684\u9ed1\u6d1e\u8def\u7531\uff0c\u7136\u540e\u91cd\u53d1\u5e03\u5230OSPF\u5373\u53ef\u3002 \u53e6\u5916\uff0c10.1.1.16\u523010.1.1.19\u8fd9\u56db\u4e2a\u5730\u5740\u90fd\u662f\u53ef\u7528\u7684\uff0c\u4e5f\u5c31\u662f\u7f51\u7edc\u5730\u574010.1.1.16\u53ca\u5e7f\u64ad\u5730\u574010.1.1.19\u90fd\u53ef\u7528\u4e8eNAT\uff0c\u56de\u7a0b\u7684\u6d41\u91cf\u4e0d\u4f1a\u6709\u95ee\u9898\uff0c\u5b9e\u6d4b\u53ef\u884c\u3002 7.5 \u9632\u706b\u5899\u5e38\u89c1\u95ee\u9898","title":"7.4.9.1 \u53cc\u673a\u70ed\u5907\u4e2d\u7684OSPF\u53caNAT"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vrrp_5","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cFW1\u53caFW2\u8fd0\u884c\u53cc\u673a\u70ed\u5907\u3002\u5728\u53cc\u65b9\u7684\u5916\u7f51\u63a5\u53e3GE0/0/3\u4e0a\u90e8\u7f72\u4e86\u4e00\u7ec4VRRP\uff0c\u865a\u62dfIP \u5730\u5740\u4e3a192.168.30.1\uff0c\u5f53\u6211\u4eec\u5728\u4e3b\u9632\u706b\u5899FW1\u4e0aping 192.168.30.100\u65f6\uff0c\u7531\u4e8e\u9632\u706b\u5899\u7684\u5916\u7f51\u63a5\u53e3\u4e0e\u76ee\u6807IP\u5730\u5740192.168.30.100\u76f4\u8fde\u53ef\u8fbe\uff0c\u56e0\u6b64\u6e90\u5730\u5740\u4e3aFW1\u7684GE0/0/3\u63a5\u53e3IP\u5730\u5740\uff0c\u540c\u7406\u5728FW2\u4e0aping\u76ee\u6807IP\u5730\u5740\u7684\u8bdd\uff0c \u6570\u636e\u5305\u6e90\u5730\u5740\u4e3aFW2\u7684GE0/0/2\u63a5\u53e3\u5730\u5740\u3002\u5f53\u6211\u4eec\u8981\u6d4b\u8bd5\u9632\u706b\u5899VRRP\u865a\u62dfIP\u5730\u5740\u5230\u76ee\u6807IP\u7684\u53ef\u8fbe\u6027\u65f6\uff0c\u5219\u4f7f\u7528ping -a 192.168.30.1 192.168.30.100\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u7ec6\u8282\uff0c\u90a3\u5c31\u662f\u5f53\u6211\u4eec\u5728FW1\u53caFW2\u4e0a\u914d\u7f6eVRRP\u540e\uff0c \u5728\u4e24\u53f0\u9632\u706b\u5899\u7684\u8def\u7531\u8868\u4e2d\uff0c\u4f1a\u51fa\u73b0\u4e00\u6761192.168.30.1/32\u7684\u4e3b\u673a\u8def\u7531\uff0c\u4e5f\u5c31\u662f\u63cf\u8ff0\u8fd9\u4e2a\u865a\u62dfIP\u5730\u5740\u7684\u4e3b\u673a\u8def\u7531\u3002 \u8003\u8651\u53e6\u5916\u4e00\u79cd\u60c5\u51b5\uff0c\u90a3\u5c31\u662f\u5982\u679cFW1\u53caFW2\u7684GE0/0/3\u63a5\u53e3\u7684VRRP\u865a\u62dfIP\u5730\u5740\u4e0e\u63a5\u53e3\u7684\u5b9e\u9645IP\u5e76\u4e0d\u5728\u540c\u4e00\u4e2a\u7f51\u6bb5\u7684\u60c5\u51b5\uff0c\u4f8b\u5982\u865a\u62dfIP\u5730\u5740\u4e3a192.168.50.1/24\uff0c\u8fd9\u5728\u9632\u706b\u5899\u4e0a\u662f\u5141\u8bb8\u7684\u3002\u5b8c\u6210VRRP\u7684\u914d\u7f6e\u540e\uff0cFW1\u53ca FW2\u5728\u672c\u5730\u8def\u7531\u8868\u4e2d\u4f1a\u4ea7\u751f192.168.50.0/24\u7f51\u6bb5\u8def\u7531\uff08\u4e0eGE0/0/3\u63a5\u53e3\u5173\u8054\uff09\u4ee5\u53ca192.168.50.1/32\u4e3b\u673a\u8def\u7531\u3002\u6b64\u65f6\uff0c\u5f53FW1\u76f4\u63a5ping 192.168.50.100\u65f6\uff0c\u6570\u636e\u5305\u7684\u6e90\u5730\u5740\u5c31\u662f192.168.50.1\uff08\u56e0\u4e3a\u5b83\u5728\u8be5\u7f51\u6bb5\u4e2d\u4ec5\u62e5\u6709\u8fd9\u4e2aIP\u5730\u5740\uff09\u3002\u5f53\u7136\uff0c\u6b64\u65f6FW\u53bb\u8bbf\u95ee192.168.50.100\u7684\u6570\u636e\u5305\uff0c\u662f\u53d7\u63a7\u4e8eLocal\u5230untrust\u7684\u57df\u95f4\u5305\u8fc7\u6ee4\u89c4\u5219\u7684\u3002\u4ee5\u4e0a\u73b0\u8c61\u5747\u5728E1000E-X V300R001C00SPC700\u7248\u672c\u4e0a\u9a8c\u8bc1\u8fc7\u3002","title":"\u9632\u706b\u5899\u53cc\u673a\u90e8\u7f72VRRP\u65f6\u53d1\u9001\u6570\u636e\u7684\u6e90\u5730\u5740"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_214","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0cSW\u5c06\u9ed8\u8ba4\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u8bbe\u7f6e\u4e3a12.1.1.2\u3002\u5f53PC\u8bbf\u95ee11.1.1.1\u65f6\uff0c\u4f8b\u5982PC ping 11.1.1.1\uff0c \u6d41\u91cf\u7684\u8f6c\u53d1\u8def\u5f84\u5982\u56fe\u6240\u793a\u3002\u4e00\u4e2a\u5173\u952e\u7684\u7ec6\u8282\u662f\uff0cFW\u5c06PC ping 11.1.1.1\u7684\u53bb\u7a0b\u6d41\u91cf\u4eceGE0/0/4\u53d1\u51fa\uff0c\u5e76\u521b\u5efa Session\uff0c\u800c\u5728\u5176GE0/0/7\u63a5\u53e3\u4e0a\u63a5\u6536\u56de\u7a0b\u6d41\u91cf\uff0c\u7531\u4e8e\u8fd9\u4e9b\u56de\u7a0b\u6d41\u91cf\u80fd\u591f\u547d\u4e2d\u5df2\u5b58\u5728\u7684Session\uff08\u4e94\u5143\u7ec4\uff09\uff0c \u56e0\u6b64FW\u5c06GE0/0/7\u63a5\u53e3\u4e0a\u63a5\u6536\u7684\u56de\u7a0b\u6d41\u91cf\u653e\u884c\u3002\u5f53\u7136\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u53ea\u662f\u60f3\u8ba8\u8bba\u9632\u706b\u5899\u5bf9\u8fd9\u79cd\u6d41\u91cf\u7684\u5904\u7406\u65b9\u5f0f \uff08\u662f\u8f6c\u53d1\uff0c\u800c\u4e0d\u662f\u4e22\u5f03\uff09\uff0c\u4e0d\u8fc7\u8fd9\u79cd\u6d41\u91cf\u7684\u4f20\u8f93\u8def\u5f84\u5e76\u4e0d\u88ab\u8ba4\u4e3a\u662f\u5408\u7406\u7684\u3002 \u518d\u770b\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5728\u4e0a\u56fe\u4e2d\uff0cSW\u4f9d\u7136\u5c06\u9ed8\u8ba4\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u8bbe\u7f6e\u4e3a12.1.1.2\uff0c\u800c\u9632\u706b\u5899\u5219\u914d\u7f6e\u53bb\u5f802.2.2.2/32 \uff08SW\u7684Loopback\u7ba1\u7406\u5730\u5740\uff09\u7684\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u5219\u4e3a11.1.1.1\u3002\u5982\u6b64\u4e00\u6765\uff0c\u5f53SW\u4ee52.2.2.2\u4e3a\u6e90\u53bbping PC\u65f6\uff0c \u6d41\u91cf\u7684\u8f6c\u53d1\u8def\u5f84\u5982\u56fe\u6240\u793a\u3002\u4e00\u4e2a\u6709\u8da3\u7684\u7ec6\u8282\u662f\uff0c\u867d\u7136\u6d41\u91cf\u662f\u4ece\u9632\u706b\u5899\u7684DMZ\u63a5\u53e3\u8fdb\u5165\uff0c\u4eceUntrust\u63a5\u53e3\u51fa\u53bb\uff0c \u4f46\u662f\u8fd9\u4e2a\u6d41\u91cf\u5728FW\u4e0a\u7559\u4e0b\u7684Session\u5982\u4e0b\uff1a \u5728\u5904\u7406\u56de\u7a0b\u6d41\u91cf\u65f6\uff0cFW\u7ecf\u8fc7\u8def\u7531\u67e5\u8be2\uff0c\u53d1\u73b0\u53bb\u5f802.2.2.2\u7684\u6570\u636e\u9700\u4eceGE0/0/4\u8f6c\u53d1\uff0c\u800c\u8be5\u63a5\u53e3\u5c5e\u4e8eTrust\u533a\u57df\uff0c \u56e0\u6b64\u5b83\u4fee\u6539Session\uff0c\u5c06\u5165\u7ad9\u533a\u57df\u4fee\u6539\u4e3aTrust\u3002\u4e0b\u9762\u6765\u770b\u4e00\u4e2a\u5b9e\u9645\u7684\u4f8b\u5b50\uff1a FW1/FW2\u90e8\u7f72\u53cc\u673a\u4e3b\u5907\u3002\u4e24\u53f0\u9632\u706b\u5899\u7684GE0/0/3\u63a5\u53e3\u90fd\u52a0\u5165untrust\u533a\u57df\uff0cGE0/0/1\u63a5\u53e3\u52a0\u5165Trust\u533a\u57df\u3002 FW1/FW2\u4e0e\u5ba2\u6237\u91c7\u7528VRRP+\u9759\u6001\u8def\u7531\u7684\u65b9\u5f0f\u8fdb\u884c\u5bf9\u63a5\u3002 \u73b0\u5728\u5ba2\u6237\u7f51\u7edc\u4e2d\u768410.10.10.1\u5ba2\u6237\u7aef\u53ef\u4ee5\u8bbf\u95ee\u4e3b\u9632\u706b\u5899\u7684\u7ba1\u7406\u5730\u5740\u2014\u2014Loopback0 11.1.1.1/32\uff0c\u4f46\u662f\u65e0\u6cd5\u8bbf\u95ee\u5907\u4efd\u9632\u706b\u5899FW2\u7684Loopback0\u3002\u5f5310.10.10.1\u5728ping 11.1.1.2\u65f6\uff0c\u53ef\u4ee5\u5728FW2\u4e0a\u67e5\u770b\u5230\u5982\u4e0bSession\uff1a \u7559\u610f\u5230\uff0cinbound\u65b9\u5411\u7684\u6d41\u91cf\u6b63\u597d\u662f5\u4e2a\u62a5\u6587\uff08\u5b9e\u9645ping\u4e865\u4e2a\u62a5\u6587\uff09\uff0c\u800coutbound\u5374\u662f0\uff0c\u56e0\u6b64\u6000\u7591\u62a5\u6587\u662f \u5df2\u7ecf\u5230\u8fbe\u4e86FW2\uff0c\u800cFW2\u5e76\u6ca1\u6709\u56de\u590d\u8fd9\u4e9bICMP\u62a5\u6587\uff0c\u68c0\u67e5FW2\u7684\u8def\u7531\u540e\u53d1\u73b0\uff0c\u5176\u5e76\u6ca1\u6709\u53bb\u5f8010.10.10.0/24 \u7f51\u6bb5\u7684\u8def\u7531\u3002\u589e\u52a0\u8def\u7531\u540e\uff0c\u95ee\u9898\u89e3\u51b3\u3002\u53e6\u5916\uff0c\u5728\u4e0a\u8ff0session\u4e2d\uff0c\u53ef\u4ee5\u770b\u5230\u62a5\u6587\u662f\u4ecetrust\u533a\u57df\u8fdb\u6765\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u5224\u65ad10.10.10.1\u8bbf\u95ee11.1.1.2\u7684\u62a5\u6587\u662f\u4eceFW1\u8fdb\u6765\uff0c\u7136\u540e\u7531FW1\u8f6c\u53d1\u7ed9FW2\uff0c\u6700\u7ec8FW2\u5728\u81ea\u5df1\u7684 GE0/0/1\u53e3\u4e0a\u6536\u5230\u8fd9\u4e2a\u62a5\u6587\uff0c\u56e0\u6b64\u5f62\u6210\u8fd9\u6837\u7684\u8868\u9879\u3002 \u5728FW2\u589e\u52a0\u53bb\u5f8010.10.10.1\u7684\u8def\u7531\uff08\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u76f4\u63a5\u6307\u5411\u5ba2\u6237\u5730\u5740\uff09\u540e\uff0c10.10.10.1\u5373\u53ef\u8bbf\u95ee11.1.1.2\uff0c\u800c\u6d41\u91cf\u5982\u4e0b\u6240\u793a\uff1a \u5f53FW2\u589e\u52a0\u53bb\u5f8010.10.10.1\u7684\u8def\u7531\u540e\uff0c\u5f53\u540e\u8005\u8bbf\u95ee11.1.1.2\u65f6\uff0cFW2\u7684session\u5982\u4e0b\uff1a \u62a5\u6587\u660e\u660e\u662f\u4eceFW2\u7684GE0/0/1\u63a5\u53e3\uff08trust\u533a\u57df\uff09\u8fdb\u6765\uff0c\u800c\u5b9e\u9645session\u663e\u793a\u7684\u5374\u662f\u4eceuntrust\u533a\u57df\u8fdb\u6765\uff08\u5b9e\u9645\u4e0a \u8fd9\u662f\u7b26\u5408\u4e8b\u5b9e\u7684\uff09\uff0c\u56e0\u6b64\uff0c\u663e\u7136\u662f\u9632\u706b\u5899\u5728\u987a\u5229\u5730\u5c06\u56de\u7a0b\u62a5\u6587\u8f6c\u53d1\u51fa\u53bb\u540e\uff08\u4eceuntrust\u533a\u57df\u9001\u51fa\uff09\uff0c\u4fee\u6b63\u4e86 session\u91cc\u7684\u57df\u95f4\u4fe1\u606f\u3002 \u6ce8\uff1a\u8fd9\u91cc\u6240\u8ba8\u8bba\u7684\u9632\u706b\u5899\uff0c\u5747\u662fEudemon1000E-X\uff08V300R001C00SPC700\uff09\u3002 VPN","title":"\u9632\u706b\u5899\u5bf9\u56de\u7a0b\u6d41\u91cf\u7684\u5904\u7406\u7ec6\u8282\u4e0e\u76f8\u5173\u6848\u4f8b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vpn","text":"","title":"VPN \u57fa\u7840\u77e5\u8bc6"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vpn_1","text":"\u5047\u8bbe\u6211\u6709\u4e00\u4e2a\u516c\u53f8\uff0c\u5728\u5168\u56fd\u5404\u5730\u6709\u7740\u8bb8\u591a\u5206\u652f\u673a\u6784\u548c\u7f51\u70b9\uff0c\u540c\u65f6\u53c8\u6709\u5916\u51fa\u516c\u5e72\u7684\u804c\u5458\uff0c\u5982\u679c\u8fd9\u4e9b\u7f51\u7edc\u4e4b\u95f4\u9700\u8981\u8fdb\u884c\u4e92\u8bbf\uff0c\u4e00\u79cd\u6700\u7ecf\u6d4e\u7684\u65b9\u5f0f\u662f\u8d2d\u4e70Internet\u63a5\u5165\u7ebf\u8def\uff0c\u4f8b\u5982ADSL\u7684\u7ebf\u8def\uff0c\u5ec9\u4ef7\u4e14\u4f7f\u7528\u65b9\u4fbf\uff0c\u4f46\u662f\u5982\u679c\u76f4\u63a5\u5728Internet\u8fd9\u4e2a\u516c\u7f51\u4e0a\u4f20\u8f93\u4f01\u4e1a\u5185\u90e8\u6570\u636e\uff0c\u5c06\u9762\u4e34\u7740\u5f88\u9ad8\u7684\u5b89\u5168\u98ce\u9669\uff0c\u56e0\u4e3aInternet\u4f5c\u4e3a\u4e00\u4e2a\u5168\u7403\u6027\u8d28\u7684\u516c\u6709\u7f51\u7edc\uff0c\u5b89\u5168\u6027\u662f\u975e\u5e38\u4f4e\u7684\u3002\u57fa\u4e8e\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u8003\u8651\u5728\u901a\u4fe1\u7f51\u7edc\u4e4b\u95f4\u67b6\u8bbe\u4e13\u7528\u7ebf\u8def\uff0c\u4e5f\u5c31\u662f\u4e13\u7ebf\uff0c\u4e13\u7ebf\u867d\u7136\u80fd\u63d0\u9ad8\u5b89\u5168\u6027\u5e76\u63d0\u4f9b\u7ebf\u8def\u7684\u4e13\u7528\u6027\uff0c\u4f46\u662f\u4ef7\u683c\u8f83\u4e3a\u6602\u8d35\uff0c\u90a3\u4e48\u6709\u6ca1\u6709\u4e00\u79cd\u6bd4\u8f83\u5ec9\u4ef7\u3001\u5b89\u5168\u3001\u53ef\u9760\u3001\u53ef\u4fe1\u8d56\u3001\u7075\u6d3b\u7684\u65b9\u5f0f\u5b9e\u73b0\u6211\u4eec\u8de8\u516c\u7f51\u7684\u79c1\u6709\u901a\u4fe1\u9700\u6c42\u5462\uff1f Virtual Private Network\uff0c\u7b80\u79f0VPN\u3002\u5c31\u662f\u4e00\u79cd\u975e\u5e38\u7406\u60f3\u7684\u89e3\u51b3\u65b9\u6848\u3002IETF\u8349\u6848\u7406\u89e3\u57fa\u4e8eIP\u7684VPN\u4e3a\uff1a \" \u4f7f\u7528IP\u673a\u5236\u4eff\u771f\u51fa\u4e00\u4e2a\u79c1\u6709\u7684\u5e7f\u57df\u7f51\"\uff0c\u662f\u901a\u8fc7\u79c1\u6709\u7684\u96a7\u9053\u6280\u672f\u5728\u516c\u5171\u6570\u636e\u7f51\u7edc\u4e0a\u4eff\u771f\u4e00\u6761\u70b9\u5230\u70b9\u7684\u4e13\u7ebf\u6280\u672f \u3002\u8bf4\u767d\u70b9\u5c31\u662f\uff0c\u6211\u4eec\u8fd0\u7528VPN\u6280\u672f\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5229\u7528\u516c\u6709\u7f51\u7edc\u5b9e\u73b0\u79c1\u6709\u7684\u6570\u636e\u901a\u4fe1\uff0c\u76f8\u5f53\u4e8e\u6211\u4eec\u5728\u901a\u4fe1\u8282\u70b9\u4e4b\u95f4\uff0c\u8de8\u516c\u6709\u7f51\u7edc\u5efa\u7acb\u4e00\u4e2a\u79c1\u6709\u7684\u3001\u4e13\u7528\u7684\u865a\u62df\u901a\u4fe1\u96a7\u9053\uff0c\u800c\u4e14\u57fa\u4e8e\u4e0d\u540c\u7684VPN\u6280\u672f\uff0c\u6211\u4eec\u8fd8\u80fd\u8ba9\u8fd9\u4e2a\u901a\u4fe1\u96a7\u9053\u5177\u6709\u5b89\u5168\u6027\u3001\u53ef\u4fe1\u4efb\u3001\u53ef\u9760\u6027\u3001\u5b8c\u6574\u6027\u68c0\u9a8c\u7b49\u7279\u70b9\u3002 VPN\u6709\u4e24\u4e2a\u663e\u8457\u7684\u7279\u70b9\uff1a\u4e13\u7528\u578b\u3001\u865a\u62df\u6027\u3002","title":"VPN\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vpn_2","text":"","title":"VPN\u7684\u5206\u7c7b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_215","text":"","title":"\u6309\u4e1a\u52a1\u7528\u9014\u5206\u7c7b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#access-vpn","text":"\u8fdc\u7a0b\u62e8\u5165VPN\uff0c\u8fd9\u79cdVPN\u7c7b\u578b\u53ef\u4ee5\u63d0\u4f9b\u5185\u90e8\u5458\u5de5\u5728\u51fa\u5dee\u65f6\u7684\u8fdc\u7a0bVPN\u62e8\u5165\u670d\u52a1\u3002\u901a\u8fc7\u5728\u4f01\u4e1a\u7684\u5b89\u5168\u8bbe\u5907\u4e0a\u90e8\u7f72\u8be5\u79cdVPN\u6280\u672f\uff0c\u5458\u5de5\u53ef\u4ee5\u5728\u4efb\u4f55\u80fd\u591f\u63a5\u5165\u516c\u7f51\u7684\u89d2\u843d\uff0c\u901a\u8fc7\u8fdc\u7a0b\u62e8\u5165VPN \u62e8\u5165\u5230\u4f01\u4e1a\u5185\u7f51\uff0c\u4ece\u800c\u8bbf\u95ee\u5185\u7f51\u8d44\u6e90\u3002","title":"Access VPN"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#intranet-vpn","text":"\u8fd9\u79cdVPN\u662f\u5229\u7528VPN\u6280\u672f\uff0c\u5b9e\u73b0\u5728\u516c\u7f51\u4e0a\u5c5e\u4e8e\u8be5\u4f01\u4e1a\u7684\u4e0d\u540c\u7ad9\u70b9\u6216\u529e\u4e8b\u5904\u4e4b\u95f4\u7684\u79c1\u6709\u901a\u4fe1\u3002","title":"Intranet VPN"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#extranet-vpn","text":"\u5b9e\u73b0\u4f01\u4e1a\u5185\u90e8\u7f51\u7edc\u4e0e\u5408\u4f5c\u4f19\u4f34\u6216\u6388\u6743\u673a\u6784\u4e4b\u95f4\u7684\u865a\u62df\u4e13\u7528\u7f51\u7edc\u3002","title":"Extranet VPN"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_216","text":"","title":"\u6309\u5b9e\u73b0\u7684\u5c42\u6b21\u5206\u7c7b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#lay3vpn","text":"VPN\u7684\u5de5\u4f5c\u5c42\u5728\u7f51\u7edc\u5c42\u3002\u4f8b\u5982\uff1aGRE\u3001IPSec\u7b49\u3002","title":"Lay3\u96a7\u9053VPN"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#lay2vpn","text":"VPN\u7684\u5de5\u4f5c\u5c42\u5728\u6570\u636e\u94fe\u8def\u5c42\u3002\u4f8b\u5982L2TP\u3001PPTP\u7b49\u3002","title":"Lay2\u96a7\u9053VPN"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vpn_3","text":"","title":"VPN\u7684\u5e38\u89c1\u6280\u672f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_217","text":"\u5229\u7528\u5c01\u88c5\u53ca\u89e3\u5c01\u88c5\u6280\u672f\uff0c\u80fd\u591f\u5728\u901a\u4fe1\u7ad9\u70b9\u4e4b\u95f4\u5efa\u7acb\u4e00\u4e2a\u70b9\u5230\u70b9\u7684\u865a\u62df\u901a\u4fe1\u96a7\u9053\u3002\u4f8b\u5982\u5728\u4e0a\u56fe\u4e2d\uff0c\u4e3a\u4e86\u5b9e\u73b0192.168.1.0/24\u53ca192.168.2.0/24\u4e24\u4e2a\u4fe1\u606f\u5c9b\u5c7f\u7684\u4e92\u901a\uff0c\u6211\u4eec\u53ef\u80fd\u8981\u8ba9\u4e2d\u95f4\u7684\u4f20\u8f93\u7f51\u7edc\u90fd\u6709\u5173\u4e8e\u8fd9\u4e24\u4e2a\u7f51\u7edc\u7684\u8def\u7531\uff0c\u4f46\u8fd9\u5c31\u76f8\u5f53\u4e8e\u66b4\u9732\u4e86\u8fd9\u4e24\u4e2a\u7f51\u7edc\uff1b\u53c8\u6216\u8005\u6211\u4eec\u5e76\u4e0d\u5e0c\u671b\u4e2d\u95f4\u7684\u4f20\u8f93\u7f51\u7edc\u77e5\u9053\u8fd9\u4e24\u4e2a\u7f51\u7edc\u7684\u5b58\u5728\uff0c\u90a3\u4e48\u53ef\u4ee5\u91c7\u7528\u96a7\u9053\u6280\u672f\uff0c\u5728\u4e24\u4e2a\u8fb9\u754c\u8def\u7531\u5668\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761\u96a7\u9053\uff08Tunnel\uff09\uff0c\u8fd9\u6761tunnel\u4e00\u65e6\u5efa\u7acb\u597d\u4e4b\u540e\uff0c\u76f8\u5f53\u4e8e\u5728\u4e24\u4e2a\u7f51\u7edc\u95f4\u5efa\u7acb\u8d77\u4e00\u6761\u76f4\u8fde\u7684\u901a\u9053\uff0c\u5f53192.168.1.1\u7528\u6237\u8981\u8bbf\u95ee192.168.2.1\u65f6\uff0c\u62a5\u6587\u5728\u88ab\u8fb9\u754c\u8def\u7531\u5668\u9001\u5230\u516c\u7f51\u7f51\u7edc\u524d\u4f1a\u5c01\u88c5\u4e0a\u4e00\u5c42\u65b0\u7684IP\u5934\u90e8\uff0c\u800c\u8fd9\u5c42IP\u5934\u90e8\u4e2d\u6e90IP\u5730\u5740\u4e3a\u96a7\u9053\u7684\u672c\u5730\u6e90\u5730\u5740\uff0c\u76ee\u7684IP\u5730\u5740\u4e3a\u96a7\u9053\u7684\u76ee\u7684\u7aefIP\uff0c\u6570\u636e\u5305\u968f\u540e\u88ab\u9001\u5165\u516c\u6709\u7f51\u7edc\uff0c\u800c\u516c\u6709\u7f51\u7edc\u4e2d\u7684\u8def\u7531\u5668\u53ea\u4f1a\u9488\u5bf9\u62a5\u6587\u7684\u5916\u5c42IP\u5934\u90e8\u4e5f\u5c31\u662f\u96a7\u9053IP\u5934\u8fdb\u884c\u8def\u7531\uff0c\u6700\u7ec8\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u5230\u53e6\u4e00\u7aef\u7684\u8fb9\u754c\u8def\u7531\u5668\u4e0a\uff0c\u7531\u5176\u89e3\u5c01\u88c5\uff0c \u5e76\u8fd8\u539f\u6210\u539f\u59cb\u7684IP\u62a5\u6587\u8f6c\u53d1\u5230\u76ee\u7684\u5730\u3002\u96a7\u9053\u673a\u5236\u662f\u4e00\u79cd\u975e\u5e38\u91cd\u8981\u7684\u601d\u60f3\uff0c\u88ab\u5e7f\u6cdb\u5e94\u7528\u5728\u5404\u79cdVPN\u6280\u672f\u4e2d\u3002","title":"\u96a7\u9053\u6280\u672f\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_218","text":"\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u6280\u672f\uff0c\u53ef\u4ee5\u5bf9\u5efa\u7acb\u901a\u4fe1\u96a7\u9053\u7684\u4e24\u7aef\u8bbe\u5907\u8fdb\u884c\u76f8\u4e92\u8ba4\u8bc1\uff0c\u4e5f\u53ef\u4ee5\u5bf9\u8fdc\u7a0b\u63a5\u5165\u7f51\u7edc\u7684\u7528\u6237\u8fdb\u884c\u8ba4\u8bc1\uff0c\u786e\u4fdd\u6570\u636e\u4ea4\u4e92\u548c\u7f51\u7edc\u63a5\u5165\u7684\u5b89\u5168\u6027\u3002","title":"\u8eab\u4efd\u8ba4\u8bc1\u6280\u672f\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_219","text":"\u6570\u636e\u52a0\u5bc6\u6280\u672f\u7528\u4e8e\u5b9e\u73b0VPN\u7684\u5b89\u5168\u6027\u3002\u901a\u8fc7\u6570\u636e\u52a0\u5bc6\u6280\u672f\uff0c\u660e\u6587\u7684\u3001\u53d7\u4fdd\u62a4\u7684\u6570\u636e\u4f1a\u88ab\u6570\u636e\u53d1\u9001\u65b9\u4f7f\u7528\u52a0\u5bc6\u7b97\u6cd5\u52a0\u5bc6\u4ece\u800c\u5f62\u6210\u5bc6\u6587\uff0c\u5bc6\u6587\u5728\u4f20\u8f93\u5230\u6570\u636e\u63a5\u6536\u65b9\u540e\u518d\u7531\u63a5\u6536\u65b9\u89e3\u5bc6\uff0c\u8fd9\u6837\u4e00\u6765\u6211\u4eec\u7684\u6570\u636e\u5728\u516c\u7f51\u4e2d\u4f20\u8f93\u65f6\u5b89\u5168\u6027\u5c31\u5f97\u5230\u4e86\u63d0\u9ad8\u3002 \u76ee\u524d\u52a0\u5bc6\u7b97\u6cd5\u4e3b\u8981\u5206\u4e3a\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u53ca\u975e\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u3002\u5728\u8bb2\u89e3\u8fd9\u4e24\u4e2a\u7b97\u6cd5\u4e4b\u524d\u6211\u4eec\u5148\u4e86\u89e3\u52a0\u5bc6\u7b97\u6cd5\u548c\u79d8\u94a5\u7684\u6982\u5ff5\u3002\u4e3e\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u4f8b\u5b50\uff1a\u5047\u8bbe\u6570\u5b572\u662f\u6211\u4eec\u7684\u660e\u6587\uff0c\u73b0\u5728\u8981\u628a\u660e\u6587\u52a0\u5bc6\uff0c\u6211\u91c7\u7528\u4e00\u4e2a \u201c\u4e58\u65b9\u201d\u7684\u52a0\u5bc6\u7b97\u6cd5\uff0c\u628a\u8fd9\u4e2a\u660e\u6587\u52a0\u5bc6\uff0c\u52a0\u5bc6\u540e\u7684\u5bc6\u6587\u662f\u5728\u660e\u6587\u7684\u57fa\u7840\u4e0a\u76843\u6b21\u65b9\uff0c\u6240\u4ee5\u5bc6\u6587\u5c31\u662f8\uff0c\u56e0\u6b64\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6211\u7528\u7684\u52a0\u5bc6\u7b97\u6cd5\u662f\u201c\u4e58\u65b9\u201d\uff0c\u800c\u79d8\u94a5\u662f\u201c3\u201d\uff0c\u660e\u6587\u662f\u201c2\u201d\uff0c\u52a0\u5bc6\u540e\u7684\u5bc6\u6587\u662f\u201c8\u201d\u3002 \u5728\u5b89\u5168\u9886\u57df\uff0c\u52a0\u5bc6\u7b97\u6cd5\u90fd\u662f\u516c\u5f00\u7684\uff0c\u4f8b\u5982\u4e0a\u9762\u4e3e\u7684\u8fd9\u4f8b\u5b50\uff0c\u4e58\u65b9\u8fd9\u4e2a\u6570\u5b66\u7b97\u6cd5\u5927\u5bb6\u90fd\u77e5\u9053\uff0c\u4f46\u662f\u6211\u4eec\u4f7f\u7528\u7684\u8fd9\u4e2a\u79d8\u94a5\uff0c\u4e5f\u5c31\u201c\u4e58\u51e0\u6b21\u65b9\u201d\uff0c\u5374\u662f\u7531\u52a0\u3001\u89e3\u5bc6\u53cc\u65b9\u7ea6\u5b9a\u7684\uff0c\u8fd9\u624d\u662f\u5173\u952e\u3002 \u76ee\u524d\u6709\u4e24\u79cd\u52a0\u5bc6\u7b97\u6cd5\uff1a\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u3001\u975e\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u3002\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u6307\u7684\u662f\u52a0\u5bc6\u548c\u89e3\u5bc6\u8fc7\u7a0b\u4f7f\u7528\u76f8\u540c\u7684\u79d8\u94a5\u3002\u800c\u975e\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\u5219\u4e0d\u540c\uff0c\u5b83\u4f7f\u7528\u4e24\u628a\u79d8\u94a5\uff0c\u52a0\u5bc6\u8fc7\u7a0b\u4f7f\u7528\u7684\u662f\u516c\u94a5\uff0c\u89e3\u5bc6\u8fc7\u7a0b\u4f7f\u7528\u79c1\u94a5\uff0c\u516c\u94a5\u548c\u79c1\u94a5\u662f\u6210\u5bf9\u7684\u3002\u76ee\u524d\u4e1a\u5185\u6709\u591a\u79cd\u52a0\u5bc6\u7b97\u6cd5\uff0c\u8fd9\u4e9b\u7b97\u6cd5\u53ef\u4ee5\u88abVPN\u6280\u672f\u6574\u5408\u4f7f\u7528\uff0c\u4ee5\u63d0\u9ad8\u5b89\u5168\u6027\u3002\u8be6\u7ec6\u7684\u5185\u5bb9\u8bf7\u89c1IPSecVPN\u7ae0\u8282\u3002","title":"\u6570\u636e\u52a0\u5bc6\u6280\u672f\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_220","text":"\u4e0a\u9762\u5df2\u7ecf\u8bf4\u4e86\uff0c\u65e0\u8bba\u662f\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\uff0c\u6216\u8005\u662f\u975e\u5bf9\u79f0\u6027\u52a0\u5bc6\u7b97\u6cd5\uff0c\u7b97\u6cd5\u662f\u516c\u5f00\u7684\uff0c\u4f46\u662f\u79d8\u94a5\u662f\u5fc5\u987b\u8981\u59a5\u5584\u4fdd\u5b58\u7684\uff0c\u5982\u679c\u79d8\u94a5\u6cc4\u9732\uff0c\u90a3\u4e48\u6570\u636e\u4f20\u8f93\u5c31\u6ca1\u6709\u4efb\u4f55\u5b89\u5168\u6027\u53ef\u8a00\uff0c\u52a0\u5bc6\u7b97\u6cd5\u4e5f\u5c31\u5931\u53bb\u4e86\u610f\u4e49\u3002\u56e0\u6b64\u79d8\u94a5\u7684\u4ea7\u751f\u3001\u5206\u53d1\u548c\u7ba1\u7406\u5c31\u5f02\u5e38\u91cd\u8981\u3002","title":"\u79d8\u94a5\u7ba1\u7406\u6280\u672f\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_221","text":"\u6570\u636e\u9a8c\u8bc1\u6280\u672f\uff0c\u4e5f\u79f0\u4e3a\u54c8\u5e0c\u7b97\u6cd5\uff0c\u7528\u4e8e\u68c0\u9a8c\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u662f\u5426\u88ab\u7be1\u6539\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u539f\u59cb\u6570\u636e123456\uff0c\u8fd9\u4e2a\u6570\u636e\u5982\u679c\u76f4\u63a5\u5c31\u8fd9\u4e48\u4f20\u8f93\u5230\u63a5\u6536\u65b9\uff0c\u63a5\u6536\u65b9\u5982\u4f55\u786e\u5b9a\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u6ca1\u6709\u88ab\u7be1\u6539\u5462\uff1f\u4f7f\u7528\u54c8\u5e0c\u7b97\u6cd5\u53ef\u4ee5\u641e\u5b9a\u8fd9\u4e2a\u95ee\u9898\u3002\u5728\u53d1\u9001\u65b9\uff0c\u4f7f\u7528\u54c8\u5e0c\u7b97\u6cd5\uff08\u5982MD5\uff09 \u5bf9\u539f\u59cb\u6570\u636e\u505a\u54c8\u5e0c\u53ef\u5f97\u5230\u4e00\u4e2a\u54c8\u5e0c\u7ed3\u679c\u3002\u54c8\u5e0c\u7b97\u6cd5\u6709\u8fd9\u4e48\u51e0\u4e2a\u7279\u70b9\uff1a\u7406\u8bba\u4e0a\u7684\u4e0d\u53ef\u9006\u3001\u5b9a\u957f\u7684\u8f93\u51fa\u3001\u96ea\u5d29\u6548\u5e94\u7b49\u3002\u539f\u59cb\u6570\u636e\u7ecf\u8fc7\u54c8\u5e0c\u7b97\u6cd5\u8ba1\u7b97\u5f97\u5230\u7684\u54c8\u5e0c\u7ed3\u679c\u662f\u56fa\u5b9a\u957f\u5ea6\u7684\u6570\u636e\uff0c\u8fd9\u4e2a\u6570\u636e\u770b\u4e0a\u53bb\u5c31\u662f\u4e00\u5806\u4e71\u7801\uff0c\u800c\u4e14\u7406\u8bba\u4e0a\u662f\u65e0\u6cd5\u901a\u8fc7\u54c8\u5e0c\u7ed3\u679c\u63a8\u5bfc\u5230\u539f\u59cb\u6570\u636e\u7684\uff0c\u53e6\u5916\uff0c\u539f\u59cb\u6570\u636e\u5373\u4f7f\u53ea\u6709\u4e00\u4e2a\u6781\u5176\u7ec6\u5fae\u7684\u53d8\u5316\uff0c\u5f97\u5230\u7684\u54c8\u5e0c\u7ed3\u679c\u662f\u622a\u7136\u4e0d\u540c\u7684\uff0c\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u96ea\u5d29\u6548\u5e94\u3002 \u53d1\u9001\u65b9\u5c06\u539f\u59cb\u6570\u636e\u548c\u81ea\u5df1\u9488\u5bf9\u539f\u59cb\u6570\u636e\u505a\u4e86\u54c8\u5e0c\u4e4b\u540e\u5f97\u5230\u7684\u7ed3\u679c\u4e00\u5e76\u53d1\u9001\u7ed9\u63a5\u6536\u65b9\uff0c\u90a3\u4e48\u63a5\u6536\u65b9\u5728\u5176\u672c\u5730\uff0c\u4e5f\u5bf9\u63a5\u6536\u5230\u7684\u6570\u636e\u4f7f\u7528\u76f8\u540c\u7684\u7b97\u6cd5\u505a\u54c8\u5e0c\uff0c\u7136\u540e\u5c06\u81ea\u5df1\u8ba1\u7b97\u5f97\u5230\u7684\u54c8\u5e0c\u7ed3\u679c\u4e0e\u5bf9\u65b9\u53d1\u9001\u8fc7\u6765\u7684\u54c8\u5e0c\u7ed3\u679c\u505a\u6bd4\u5bf9\uff0c\u5982\u679c\u6bd4\u5bf9\u76f8\u540c\uff0c\u5219\u8bf4\u660e\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u6ca1\u6709\u88ab\u7be1\u6539\uff0c\u56e0\u6b64\uff0c\u4f7f\u7528\u54c8\u5e0c\u7b97\u6cd5\uff0c\u53ef\u4ee5\u786e\u4fdd\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7684\u5b8c\u6574\u6027\u3002","title":"\u6570\u636e\u9a8c\u8bc1\u6280\u672f\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#gre","text":"","title":"GRE"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#gre_1","text":"","title":"GRE\u7684\u57fa\u672c\u6982\u5ff5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#gre_2","text":"Generic Routing Encapsulation\uff0c\u7b80\u79f0GRE\uff0c\u662f\u4e00\u79cdVPN\u6280\u672f\uff0c\u901a\u8fc7GRE\u6280\u672f\uff0c\u6211\u4eec\u80fd\u591f\u5bf9\u7f51\u7edc\u5c42\u6570\u636e\u8fdb\u884c\u5c01\u88c5\uff0c\u5c01\u88c5\u540e\u7684\u6570\u636e\u80fd\u591f\u5728\u516c\u5171\u7f51\u7edc\u4e2d\u4f20\u8f93\u3002 GRE\u63d0\u4f9b\u4e86\u4e00\u79cd\u96a7\u9053\u673a\u5236\u3002 \u6211\u4eec\u770b\u4e0a\u56fe\uff0c\u4e24\u4e2a\u4fe1\u606f\u5c9b\u5c7f192.168.1.0/24\u53ca192.168.2.0/24\u8981\u4e92\u76f8\u901a\u4fe1\uff0c\u4e00\u79cd\u6700\u76f4\u63a5\u7684\u529e\u6cd5\u5c31\u662f\u6253\u901a\u5168\u7f51\u7684\u8def\u7531\uff0c\u8ba9\u4e2d\u95f4\u7684\u516c\u6709\u4f20\u8f93\u7f51\u7edc\u4e2d\u7684\u6240\u6709\u8def\u7531\u5668\u90fd\u6709\u5230\u8fbe\u8fd9\u4e24\u4e2a\u7f51\u6bb5\u7684\u8def\u7531\u3002\u4f46\u662f\u53ef\u80fd\u6709\u8fd9\u6837\u7684\u9700\u6c42\uff1a\u4e0d\u5e0c\u671b\u4e2d\u95f4\u7684\u516c\u6709\u7f51\u7edc\u77e5\u9053\u8fd9\u4e24\u4e2a\u7f51\u6bb5\u7684\u5b58\u5728\uff0c\u4f46\u662f\u4ecd\u7136\u5e0c\u671b\u4ed6\u4eec\u80fd\u591f\u4e92\u8bbf\u3002 \u8fd9\u91cc\u5c31\u53ef\u4ee5\u4f7f\u7528GRE\u8fd9\u79cdVPN\u6280\u672f\u3002GRE\u7684\u5de5\u4f5c\u673a\u5236\u975e\u5e38\u7b80\u5355\uff0c\u5c31\u662f\u5728\u539f\u59cb\u7684IP\u62a5\u6587\u7684\u57fa\u7840\u4e0a\uff0c\u52a0\u4e0a\u4e00\u4e2a\u65b0\u7684GRE\u7684\u5934\u90e8\uff0c\u7136\u540e\u518d\u5957\u4e0a\u4e00\u4e2a\u65b0\u7684\u96a7\u9053IP\u5934\u3002\u8fd9\u4e2a\u65b0\u7684\u96a7\u9053IP\u5934\u90e8\u7528\u4e8e\u5728\u4e2d\u95f4\u7684\u516c\u6709\u7f51\u7edc\u4e2d\u4f20\u8f93\u88ab\u5c01\u88c5\u7684\u539f\u59cbIP\u6570\u636e\u5305\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5373\u4f7f\u4e2d\u95f4\u516c\u6709\u7f51\u7edc\u6ca1\u6709192.168.1.0/24\u53ca2.0/24\u7684\u8def\u7531\uff0c\u4e24\u4e2a\u4fe1\u606f\u5c9b\u5c7f\u4e5f\u80fd\u901a\u8fc7\u6211\u4eec\u9884\u5148\u5efa\u7acb\u597d\u7684\u96a7\u9053\u8fdb\u884c\u6570\u636e\u4e92\u901a\uff0c\u4e92\u8bbf\u6570\u636e\u88ab\u96a7\u9053\u8fb9\u754c\u8bbe\u5907\u5c01\u88c5\u4e0aGRE\u5934\u90e8\u4ee5\u53ca\u65b0\u7684\u96a7\u9053\u5934\u90e8\uff0c\u7136\u540e\u9001\u5165\u516c\u6709\u7f51\u7edc\uff0c\u6570\u636e\u5305\u5728\u516c\u6709\u7f51\u7edc\u4e2d\u4f20\u8f93\u65f6\uff0c\u8f6c\u53d1\u6570\u636e\u5305\u7684\u4e2d\u95f4\u8bbe\u5907\u53ea\u4f1a\u67e5\u770b\u96a7\u9053IP\u5934\u5e76\u8fdb\u884c\u8def\u7531\uff0c\u6700\u7ec8\u6570\u636e\u5305\u88ab\u8f6c\u53d1\u5230\u96a7\u9053\u5bf9\u7aef\u7684\u8fb9\u754c\u8def\u7531\u5668\u4e0a\uff0c\u5b83\u5c06\u6570\u636e\u5305\u7684\u96a7\u9053IP\u5934\u53caGRE\u5934\u90e8\u89e3\u9664\u5c01\u88c5\uff0c\u7136\u540e\u5c06\u91cc\u5934\u627f\u8f7d\u7684\u539f\u59cbIP\u62a5\u6587\u8f6c\u53d1\u5230\u76ee\u7684\u5730\u3002","title":"GRE\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#gre_3","text":"\u53ef\u7528\u4e8e\u5728\u7ad9\u70b9\u4e4b\u95f4\u5efa\u7acb\u70b9\u5230\u70b9\u7684\u4e13\u7528\u901a\u4fe1\u96a7\u9053\uff1b GRE\u5934\u90e8\u7684\u901a\u7528\u6027\u975e\u5e38\u9ad8\uff0c\u80fd\u627f\u8f7d\u5404\u79cd\u7c7b\u578b\u7684\u4e0a\u5c42\u534f\u8bae\uff0c\u4f8b\u5982IPv4\u3001IPv6\u7b49\u62a5\u6587\uff1b GRE\u7684\u5b9e\u73b0\u673a\u5236\u53ca\u914d\u7f6e\u975e\u5e38\u7b80\u5355\uff0c\u91c7\u7528\u624b\u5de5\u65b9\u5f0f\u5efa\u7acb\u96a7\u9053\uff1b \u4e0d\u63d0\u4f9b\u6570\u636e\u52a0\u5bc6\u529f\u80fd\uff0c\u53ef\u914d\u5408IPSec\u6765\u589e\u5f3a\u5b89\u5168\u6027\uff1b \u4e0d\u63d0\u4f9bQoS\u80fd\u529b\uff1b \u5efa\u7acb\u597d\u7684GRE\u96a7\u9053\u652f\u6301\u52a8\u6001\u8def\u7531\u534f\u8bae\u3002","title":"GRE\u7684\u7279\u70b9"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#gre_4","text":"\u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\u3002\u5176\u4e2d\uff0cR2\u53ea\u914d\u7f6e\u63a5\u53e3IP\u5730\u5740\uff0c\u5e76\u4e0d\u914d\u7f6e\u4efb\u4f55\u9759\u6001\u8def\u7531\uff0c\u4e5f\u4e0d\u8fd0\u884c\u52a8\u6001\u8def\u7531\u534f\u8bae\u3002\u5728 R1\u53caR2\u4e4b\u95f4\u5efa\u7acbGRE\u96a7\u9053\uff0c\u4f7f\u5f97192.168.1.0/24\u4e0e192.168.2.0/24\u7f51\u6bb5\u80fd\u591f\u4e92\u901a\u3002","title":"GRE\u7684\u914d\u7f6e\u53ca\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r1_3","text":"\u5728\u4ee5\u4e0a\u914d\u7f6e\u4e2d\uff0c**source gigabitEthernet0/0/0**\u547d\u4ee4\u7528\u4e8e\u6307\u5b9a\u96a7\u9053\u5728\u672c\u8bbe\u5907\u7684\u6e90\u63a5\u53e3\uff0c\u8fd9\u6761\u547d\u4ee4\u540c\u65f6\u4f1a\u5c06\u96a7 \u9053\u7684\u6e90\u5730\u5740\u6307\u5b9a\u4e3a\u8be5\u63a5\u53e3\u7684\u5730\u5740\uff0c\u4e5f\u537310.1.12.1\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u4f7f\u7528**source 10.1.12.1**\u547d\u4ee4\u53ef\u4ee5\u5b9e\u73b0\u7c7b\u4f3c\u7684\u6548\u679c\u3002","title":"R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r2_2","text":"","title":"R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r3_2","text":"\u5b8c\u6210\u914d\u7f6e\u540e\uff0cPC1\u5373\u53ef\u4e0ePC2\u76f8\u4e92\u901a\u4fe1\u3002\u5b9e\u9645\u7684\u62a5\u6587\u4ea4\u4e92\u8fc7\u7a0b\u5982\u4e0b\uff1a","title":"R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipsecvpn","text":"","title":"IPSecVPN"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_222","text":"\u4e0a\u56fe\u6240\u793a\u662f\u4e00\u5bb6\u89c4\u6a21\u4e0d\u5c0f\u7684\u516c\u53f8\uff0c\u5b83\u9664\u4e86\u4e2d\u5fc3\u7ad9\u70b9\u5916\u8fd8\u6709\u5206\u5e03\u5728\u5168\u56fd\u5404\u5730\u7684\u591a\u4e2a\u5206\u652f\u673a\u6784\u6216\u529e\u4e8b\u5904\uff0c\u4ee5\u53ca\u51fa\u5dee\u5728\u5916\u7684\u79fb\u52a8\u529e\u516c\u4eba\u5458\uff0c\u8fd9\u4e9b\u8282\u70b9\u4e4b\u95f4\u8981\u60f3\u4e92\u76f8\u901a\u4fe1\uff0c\u4e00\u79cd\u6700\u7b80\u5355\u6700\u7ecf\u6d4e\u7684\u65b9\u6cd5\u5c31\u662f\u5229\u7528Internet\u7ebf\u8def\u6765\u5b9e\u73b0\u6570\u636e\u4e92\u8bbf\uff0c\u4f46\u662fInternet\u6bd5\u7adf\u662f\u4e00\u4e2a\u5171\u4eab\u7684\u7f51\u7edc\u73af\u5883\uff0c\u5b58\u5728\u592a\u591a\u7684\u5b89\u5168\u5a01\u80c1\uff0c\u76f4\u63a5\u5728Internet\u4e0a\u4f20\u8f93\u516c\u53f8\u7684\u673a\u5bc6\u6570\u636e\u662f\u6781\u4e3a\u5371\u9669\u7684\u3002\u5982\u679c\u79df\u7528\u4e13\u7ebf\u5462\uff1f\u4e13\u7ebf\u662f\u4e00\u79cd\u4e13\u6709\u7ebf\u8def\uff0c\u56fa\u7136\u66f4\u52a0\u5b89\u5168\uff0c\u4f46\u662f\u5374\u4e5f\u66f4\u4e3a\u6602\u8d35\uff0c\u800c\u4e14\u4e13\u7ebf\u53c8\u65e0\u6cd5\u63d0\u4f9b\u5bf9\u79fb\u52a8\u6027\u7684\u652f\u6301\u3002IPSecVPN\u53ef\u4ee5\u5b8c\u7f8e\u7684\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002 IPSecVPN\u662f\u4e00\u79cd\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\u3001\u975e\u5e38\u6210\u719f\u7684VPN\u6280\u672f\u3002\u5229\u7528IPSecVPN\u6211\u4eec\u53ef\u4ee5\u653e\u5fc3\u7684\u5728\u516c\u7f51\u4e0a\u4f20\u8f93\u673a\u5bc6\u6570\u636e\uff0c\u56e0\u4e3aIPSec\u53ef\u4ee5\u63d0\u4f9b\u5b89\u5168\u6027\u3001\u5b8c\u6574\u6027\u3001\u8eab\u4efd\u8ba4\u8bc1\u3001\u9632\u91cd\u653e\u653b\u51fb\u7b49\u7b49\u591a\u79cd\u7279\u6027\u3002IPSecVPN\u7684\u7ec4\u7f51\u4e5f\u662f\u5f88\u7075\u6d3b\uff0c\u9664\u4e86\u5178\u578b\u7684\u7ad9\u70b9\u5230\u7ad9\u70b9\u7684IPSecVPN\u7ec4\u7f51\uff0c\u8fd8\u652f\u6301\u8fdc\u7a0b\u62e8\u5165\u5f0f\u7684\u7ec4\u7f51\u3002","title":"\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipsecvpn_1","text":"\u4e0a\u56fe\u6240\u793a\u7684\u4e24\u4e2a\u7ad9\u70b9\uff0c\u5982\u679c\u76f4\u63a5\u5728Internet\u4e0a\u8fdb\u884c\u6570\u636e\u4f20\u8f93\uff0c\u662f\u5b58\u5728\u8bf8\u591a\u5b89\u5168\u9690\u60a3\u7684\u3002\u4f7f\u7528IPSecVPN\u6280\u672f\u80fd\u591f\u4e3a\u6570\u636e\u4f20\u8f93\u4fdd\u9a7e\u62a4\u822a\uff0c\u8fd9\u662f\u4e00\u4e2a\u5178\u578b\u7684\u7ad9\u70b9\u5230\u7ad9\u70b9\uff08Site to Site\u6216\u8005LAN to LAN\uff09\u7684IPSecVPN\u5e94\u7528\u573a\u666f\uff0c \u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u8de8Internet\u901a\u4fe1\uff0c\u5728\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e0a\u90e8\u7f72IPSecVPN\u4ece\u800c\u4fdd\u62a4\u4e24\u5730\u5185\u7f51\u7684\u4e92\u8bbf\u6d41\u91cf\u3002\u5728\u5b8c\u6210 IPSecVPN\u7684\u90e8\u7f72\u540e\uff0c\u4e24\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e4b\u95f4\u5c06\u4f1a\u8fdb\u884cIPSecVPN\u96a7\u9053\u7684\u5efa\u7acb\uff1a \u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u4e24\u7aef\u9996\u5148\u4f1a\u534f\u5546\u7528\u4e8e\u4fdd\u62a4\u96a7\u9053\u7684\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u7b49\uff0c\u5728\u5bf9\u9f50\u6240\u7528\u7684\u5404\u79cd\u7b97\u6cd5\u6216\u7b56\u7565\u540e\uff0c \u8fdb\u884c\u516c\u5171\u503c\u7684\u4ea4\u6362\u4ee5\u4fbf\u4e24\u8005\u80fd\u591f\u751f\u6210\u76f8\u5339\u914d\u7684\u79d8\u94a5\u7528\u4e8e\u540e\u7eed\u7684\u52a0\u5bc6\u53ca\u54c8\u5e0c\uff0c\u7136\u540e\u8fdb\u884c\u5bf9\u7b49\u4f53\u8eab\u4efd\u8ba4\u8bc1\uff0c\u4e5f\u5c31\u662f\u9a8c\u8bc1\u4e24\u53f0\u9632\u706b\u5899\u7684\u8eab\u4efd\u3002\u4e24\u7aef\u7528\u4e8e\u8eab\u4efd\u8ba4\u8bc1\u6240\u4ea4\u4e92\u7684\u62a5\u6587\u5c31\u662f\u4f7f\u7528\u4e0a\u6587\u6240\u63d0\u53ca\u7684\u52a0\u5bc6\u7b97\u6cd5\u548c\u54c8\u5e0c\u7b97\u6cd5\u8fdb\u884c\u4fdd\u62a4\u7684\u3002 \u4e0a\u9762\u7684\u5de5\u4f5c\u5b8c\u6210\u540e\uff0c\u53cc\u65b9\u8fd8\u4f1a\u8fdb\u4e00\u6b65\u534f\u5546\u7528\u4e8e\u4fdd\u62a4\u4e24\u5730\u7ad9\u70b9\u5185\u7f51\u4e4b\u95f4\u901a\u4fe1\u6d41\u91cf\u7684\u5404\u79cd\u5b89\u5168\u7b56\u7565\uff08IPSec Proposal\uff09\uff1a\u5b89\u5168\u534f\u8bae\u7c7b\u578b\u3001\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u7b49\u7b49\u3002\u4e0a\u8ff0\u5de5\u4f5c\u90fd\u5b8c\u6210\u4e4b\u540e\uff0c\u4e00\u6761IPSecVPN\u7684\u96a7\u9053\u5c31\u5efa\u7acb\u8d77\u6765\u4e86\u3002 \u8fd9\u76f8\u5f53\u4e8e\u5728Internet\u4e0a\u62c9\u8d77\u4e86\u4e00\u6761\u9690\u5f62\u7684\u3001\u53d7\u4fdd\u62a4\u7684\u901a\u4fe1\u901a\u9053\uff0c\u7ad9\u70b91\u30012\u4e4b\u95f4\u7684\u53d7\u4fdd\u62a4\u6d41\u91cf\uff08\u4e5f\u79f0\u4e3aIPSecVPN \u611f\u5174\u8da3\u6d41\u91cf\uff09\u5728\u4f20\u8f93\u65f6\u4f1a\u201c\u8fdb\u5165\u201d\u8be5\u96a7\u9053\u5185\u8fdb\u884c\u4f20\u8f93\uff0c\u4f20\u8f93\u7684\u8fc7\u7a0b\u4e2d\u6570\u636e\u662f\u88ab\u52a0\u5bc6\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u4fdd\u8bc1\u901a\u4fe1\u7684 \u673a\u5bc6\u6027\uff0c\u540c\u65f6\u6570\u636e\u8fd8\u4f1a\u88ab\u8fdb\u884c\u5b8c\u6574\u6027\u6821\u9a8c\uff0c\u4ee5\u4fbf\u68c0\u6d4b\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u662f\u5426\u88ab\u7be1\u6539\u3002\u5c31\u62ff\u4e0a\u9762\u7684\u8fd9\u5f20\u56fe\u6765 \u8bf4\uff0c\u53d7\u4fdd\u62a4\u7684\u6570\u636e\u662f\u7eff\u8272\u7684\u7ba1\u9053\uff0c\u8fd9\u90e8\u5206\u6570\u636e\u5728\u9001\u5230\u7ad9\u70b9\u9632\u706b\u5899\u540e\u4f1a\u88ab\u8bc6\u522b\u4e3aIPSecVPN\u611f\u5174\u8da3\u7684\u6d41\u91cf\uff0c\u4e8e \u662f\u88ab\u52a0\u5bc6\u4ee5\u53ca\u54c8\u5e0c\uff0c\u5e76\u5957\u4e0a\u4e00\u4e2a\u5b89\u5168\u534f\u8bae\u7684\u5934\u90e8\uff08\u4f8b\u5982ESP\u5934\u90e8\uff09\uff0c\u4e4b\u540e\u4e3a\u4e86\u8ba9\u8fd9\u4e2a\u6570\u636e\u5305\u80fd\u591f\u5728Internet \u4e0a\u4f20\u8f93\u5230\u53e6\u4e00\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\uff0c\u6211\u4eec\u8fd8\u4f1a\u5728\u4e0a\u8ff0\u57fa\u7840\u4e0a\uff0c\u518d\u4e3a\u6570\u636e\u5957\u4e0a\u4e00\u4e2a\u65b0\u7684IP\u5934\uff0c\u6216\u79f0\u4e3a\u65b0\u7684\u96a7\u9053\u5934\u90e8\u3002 \u4e0a\u56fe\u5c31\u662f\u4e00\u4e2a\u5728IPSecVPN\u73af\u5883\u4e0b\u6570\u636e\u4f20\u8f93\u7684\u793a\u4f8b\uff0c\u7ad9\u70b91\u7684192.168.1.0/24\u7f51\u7edc\u6709\u4e00\u4e2a\u8282\u70b9\u8981\u60f3\u8bbf\u95ee\u7ad9\u70b92\uff0c \u6b64\u523b\u5b83\u53ef\u76f4\u63a5\u4f7f\u7528192.168.2.x\u5f62\u5f0f\u7684\u76ee\u6807IP\u5730\u5740\u6765\u8bbf\u95ee\u7ad9\u70b92\uff0c\u8fd9\u662f\u5f97\u76ca\u4e8eIPSecVPN\u7684\u96a7\u9053\u5316\u6280\u672f\uff0c\u4f7f\u5f97 \u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u53ef\u4ee5\u4f7f\u7528\u5bf9\u7aef\u7684\u771f\u5b9eIP\u5730\u5740\u6765\u8fdb\u884c\u4e92\u8bbf\u3002 \u660e\u6587\u7684\u6570\u636e\u5305\u5230\u8fbe\u7ad9\u70b91\u7684\u51fa\u53e3\u9632\u706b\u5899\u540e\uff0c\u9632\u706b\u5899\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2aIPSecVPN\u611f\u5174\u8da3\u7684\u6d41\u91cf\uff0c\u56e0\u6b64\u5c06\u8be5\u62a5\u6587\u4f7f\u7528\u9884\u5148\u534f\u5546\u597d\u7684\u52a0\u5bc6\u7b56\u7565\u548c\u79d8\u94a5\u8fdb\u884c\u52a0\u5bc6\uff0c\u540c\u65f6\u5bf9\u52a0\u5bc6\u540e\u7684\u6570\u636e\u8fdb\u884c\u54c8\u5e0c\u8ba1\u7b97\uff0c\u6700\u540e\u5c06\u8fd9\u4e9b\u5904\u7406\u540e\u7684\u6570\u636e \u5305\u5728\u4e00\u4e2a\u5b89\u5168\u534f\u8bae\u7684\u5934\u90e8\u540e\u9762\uff0c\u7136\u540e\u518d\u5957\u4e0a\u4e00\u5c42\u65b0\u7684IP\u5934\u90e8\uff0c\u8fd9\u5c42\u65b0\u7684IP\u5934\u90e8\u79f0\u4e3a\u96a7\u9053\u5934\uff0c\u5176\u6e90\u5730\u5740\u4e3a 100.1.1.1\uff0c\u76ee\u7684\u5730\u5740\u4e3a200.2.2.2\u3002\u6ce8\u610f\uff0c\u8fd9\u4e2a\u6e90\u3001\u76ee\u7684\u5730\u5740\u90fd\u662f\u516c\u7f51IP\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u5728\u9632\u706b\u5899\u5916\u7f51\u63a5\u53e3\u4e0a\u7684IP\u5730\u5740\uff0c\u6700\u540e\u8fd9\u4e2a\u6570\u636e\u5305\u5c31\u88ab\u9001\u4e0a\u4e86Internet\u4f20\u8f93\u5230\u5bf9\u7aef\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e0a\u3002 \u7531\u4e8e\u6570\u636e\u5305\u5df2\u7ecf\u88ab\u5b89\u5168\u5904\u7406\u8fc7\uff0c\u56e0\u6b64\u6211\u4eec\u5e76\u4e0d\u62c5\u5fc3\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u88ab\u7a83\u542c\uff0c\u6216\u8005\u88ab\u7be1\u6539\u3002\u6570\u636e\u5305\u5728\u5230\u8fbe\u7ad9\u70b92\u7684\u9632\u706b\u5899\u540e\uff0c\u5b83\u5c06\u6570\u636e\u5305\u7684\u96a7\u9053\u5934\u5265\u53bb\uff0c\u5229\u7528\u5b89\u5168\u534f\u8bae\u5305\u5934\u4e2d\u7684\u76f8\u5173\u4fe1\u606f\u67e5\u8be2\u5230\u5b58\u50a8\u5728\u672c\u5730\u7684\u3001\u76f8\u5e94\u7684\u5b89\u5168\u7b56\u7565\u3001\u79d8\u94a5\u7b49\u4fe1\u606f\uff0c\u7136\u540e\u5bf9\u6570\u636e\u5305\u8fdb\u884c\u5b8c\u6574\u6027\u6821\u9a8c\u3001\u89e3\u5bc6\uff0c\u6700\u7ec8\u5c06\u89e3\u5bc6\u540e\u7684\u660e\u6587\u6570\u636e\u53d1\u5230\u76ee\u7684\u5730 192.168.2.0/24\u7f51\u7edc\u3002","title":"IPSecVPN\u521d\u76f8\u8bc6"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipsec","text":"","title":"IPSec\u534f\u8bae\u6846\u67b6"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_223","text":"IPSec\u662f\u4e00\u79cd\u5f00\u653e\u7684\u6807\u51c6\u6846\u67b6\u7ed3\u6784\uff0c\u662f\u7531IETF\u6307\u5b9a\u7684\u6807\u51c6\uff0c\u662f\u7279\u5b9a\u7684\u901a\u4fe1\u65b9\u4e4b\u95f4\u5728IP\u5c42\u901a\u8fc7\u52a0\u5bc6\u548c\u6570\u636e\u6458\u8981\uff08hash\uff09\u7b49\u624b\u6bb5\uff0c\u6765\u4fdd\u8bc1\u6570\u636e\u5305\u5728\u516c\u7f51\u4e0a\u4f20\u8f93\u65f6\u7684\u673a\u5bc6\u6027(confidentiality) \u3001\u5b8c\u6574\u6027(data integrity) \u548c\u771f\u5b9e\u6027(origin authentication)\u7b49\u3002IPSec\u53ea\u80fd\u5de5\u4f5c\u5728IP\u5c42\uff0c\u8981\u6c42\u4e58\u5ba2\u534f\u8bae\u548c\u627f\u8f7d\u534f\u8bae\u90fd\u662fIP\u534f\u8bae\u3002 IPSec\u5e76\u4e0d\u662f\u4e00\u4e2a\u5355\u4e00\u7684\u534f\u8bae\uff0c\u800c\u662f\u4e00\u4e2a\u6846\u67b6\u3002","title":"\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_224","text":"IPSec\u7684\u6846\u67b6\u5305\u542b\u82e5\u5e72\u4e2a\u534f\u8bae\u3002\u6700\u91cd\u8981\u7684\u5c31\u662fIKE\u548c\u4e24\u4e2a\u5b89\u5168\u534f\u8bae\uff08AH\u3001ESP\uff09\u3002\u5176\u4e2dIKE\uff08Internet\u79d8\u94a5\u4ea4\u6362\u534f\u8bae\uff09\u662f\u6838\u5fc3\u548c\u6839\u672c\uff0c\u8fd9\u662f\u4e2a\u6df7\u5408\u534f\u8bae\uff0c\u5b83\u5305\u542b\u4e09\u4e2a\u534f\u8bae\uff1a \u5176\u5b9e\u6211\u4eec\u53ea\u8981\u5173\u6ce8\u5176\u4e2d\u6700\u91cd\u8981\u7684\u534f\u8bae\uff0cISAKMP\u5c31\u597d\u4e86\uff0c\u5b83\u662f\u6574\u4e2aIKE\u7684\u6838\u5fc3\uff0c\u56e0\u6b64\u7ecf\u5e38\u5728\u5404\u79cd\u573a\u5408\u4e0b\u7684\u6280\u672f\u4ea4\u6d41\u4e2d\uff0c\u6211\u4eec\u4f1a\u5c06ISAKMP\u548cIKE\u7b3c\u7edf\u7684\u7b49\u540c\u8d77\u6765\u8bf4\u3002 ISAKMP\u8d1f\u8d23IPSecVPN\u4e2d\u975e\u5e38\u91cd\u8981\u7684\u51e0\u9879\u5de5\u4f5c\uff1a\u8d1f\u8d23\u5efa\u7acb\u548c\u7ef4\u62a4SA\uff08IKE SA\u53caIPsecSA\uff09\u3001\u534f\u5546\u534f\u8bae\u53c2\u6570\uff08\u5982\u52a0\u5bc6\u3001\u9a8c\u8bc1\u534f\u8bae\u7b49\uff09\u3001\u5bf9\u7b49\u4f53\u8eab\u4efd\u9a8c\u8bc1\u3001\u534f\u5546\u5bc6\u94a5\u3001\u4ee5\u53ca\u5bf9\u5bc6\u94a5\u7684\u7ba1\u7406\u3002ISAKMP\u8fd8\u5b9a\u4e49\u4e86\u6d88\u606f\u4ea4\u6362\u7684\u4f53\u7cfb\u7ed3\u6784\uff0c\u5305\u542b\u5bf9\u7b49\u4f53\u4e4b\u95f4\u7528\u4e8eIPSec\u534f\u5546\u7684\u62a5\u6587\u683c\u5f0f\u3001\u72b6\u6001\u673a\u7b49\u3002 IPSec\u534f\u8bae\u6846\u67b6\u7684\u53e6\u4e00\u4e2a\u91cd\u8981\u7684\u534f\u8bae\u7c7b\u578b\uff1a\u5b89\u5168\u534f\u8bae\uff0c\u5b83\u662f\u771f\u6b63\u8d1f\u8d23\u4fdd\u62a4\u7528\u6237\u6570\u636e\u7684\u534f\u8bae\uff0c\u5305\u62ec\u4e24\u4e2a\uff1a AH\u53caESP\uff1a \u5176\u4e2dAH\u534f\u8bae\u80fd\u591f\u63d0\u4f9b\u6570\u636e\u5b8c\u6574\u6027\u6821\u9a8c\u3001\u6e90\u8ba4\u8bc1\u3001\u9632\u91cd\u653e\u653b\u51fb\u7b49\uff0c\u4f46\u77ed\u677f\u662f\u4e0d\u652f\u6301\u6570\u636e\u52a0\u5bc6\u3002ESP\u5219\u652f\u6301\u6570\u636e\u6e90\u8ba4\u8bc1\u3001\u5b8c\u6574\u6027\u6821\u9a8c\u3001\u9632\u91cd\u653e\u653b\u51fb\u53ca\u6570\u636e\u52a0\u5bc6\u3002","title":"\u534f\u8bae\u6846\u67b6"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ike","text":"\u5f53\u6211\u4eec\u5728\u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u90e8\u7f72IPSecVPN\u65f6\uff0cIPSecVPN\u7684\u4e00\u4e2a\u611f\u5174\u8da3\u62a5\u6587\u5230\u8fbe\u540e\uff0c\u5c06\u89e6\u53d1IKE\u7684\u5de5\u4f5c\u3002IKE\u901a\u8fc7\u4e24\u4e2a\u9636\u6bb5\u5efa\u7acb\u4e00\u6761\u5b89\u5168\u7684IPSecVPN\u96a7\u9053\uff0c\u4f7f\u5f97\u53d7\u4fdd\u62a4\u7684\u6d41\u91cf\u80fd\u591f\u5728\u516c\u7f51\u4e2d\u5b89\u5168\u7684\u4f20\u8f93\uff0c\u8fd9\u4e24\u4e2a\u9636\u6bb5\u5c31\u662f\u5b89\u5168\u9886\u57df\u7ecf\u5178\u7684IKE\u9636\u6bb5\u4e00\uff0c\u53ca\u9636\u6bb5\u4e8c\u3002","title":"IKE\u7684\u4e24\u4e2a\u9636\u6bb5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ike_1","text":"\u9636\u6bb5\u4e00\u7684\u4e3b\u8981\u5de5\u4f5c\u5185\u5bb9\u662f\u534f\u5546\u5b89\u5168\u7b56\u7565\u3001\u8fdb\u884cDH\u4ea4\u6362\u3001\u5bf9\u7b49\u4f53\u8ba4\u8bc1\u3002 \u4e0e\u5b89\u5168\u7b56\u7565\u534f\u5546\u76f8\u5173\u7684\u5185\u5bb9\uff0c\u5728\u534e\u4e3a\u7684\u8bbe\u5907\u4e0a\u7684\u914d\u7f6e\u5c31\u662fIKE Proposal\uff0c\u5305\u62ec\u7528\u4e8eIKE\u96a7\u9053\u7684\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u3001DH\u7b97\u6cd5\u7ec4\u7b49\u7b56\u7565\uff0c\u4e24\u4e2a\u7ad9\u70b9\u7684\u7b56\u7565\u8981\u4e00\u81f4\u3002 DH\u4ea4\u6362\u5c31\u662f\u4ea4\u6362\u516c\u5171\u503c\uff0cDH\u7b97\u6cd5\u662f\u4e00\u4e2a\u795e\u5947\u7684\u7b97\u6cd5\uff0c\u4e24\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e4b\u95f4\u901a\u8fc7\u4ea4\u6362\u51e0\u4e2a\u516c\u5171\u503c\uff0c\u518d\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u6570\u5b66\u8fd0\u7b97\uff0c\u6700\u7ec8\u5f97\u5230\u4e09\u628a\u79d8\u94a5\u3002\u800c\u5373\u4f7f\u6709\u4eba\u4fa6\u542c\u4e86DH\u516c\u5171\u503c\u4ea4\u6362\u7684\u62a5\u6587\uff0c\u4e5f\u65e0\u6cd5\u63a8\u5bfc\u51fa\u8fd9\u4e09\u628a\u79d8\u94a5\u3002 \u63a5\u4e0b\u53bb\u5c31\u662f\u5bf9\u7b49\u4f53\u7684\u8eab\u4efd\u8ba4\u8bc1\uff0c\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u9884\u5171\u4eab\u79d8\u94a5\u7684\u65b9\u5f0f\uff0c\u4e24\u4e2a\u7ad9\u70b9\u5728\u9632\u706b\u5899\u4e0a\u914d\u7f6e\u4e00\u4e2a\u7edf\u4e00\u7684\u5bc6\u7801\uff0c\u5982\u679c\u5bc6\u7801\u4e00\u81f4\u5219\u8bf4\u660e\u4e24\u4e2a\u5bf9\u7b49\u4f53\u662f\u53ef\u4fe1\u8d56\u7684\u3002 \u9636\u6bb5\u4e00\u5b8c\u6210\u7684\u6807\u5fd7\u662fIKE SA\u7684\u5efa\u7acb\uff0cSA\uff08Security Associations\uff0c\u5b89\u5168\u5173\u8054\uff09\u53ef\u4ee5\u7b80\u5355\u7406\u89e3\u4e3aIPSec\u5bf9\u7b49\u4f53\u53cc\u65b9\u7684\u4e00\u5171\u5b89\u5168\u5171\u8bc6\u3002SA\u4e00\u5171\u6709\u4e24\u79cd\uff0c\u4e00\u79cd\u662f\u8fd9\u91cc\u63d0\u5230\u7684IKE SA\uff0cIKE\u5bf9\u7b49\u4f53\u53cc\u65b9\u6709\u4e00\u4e2a\u5171\u540c\u7684IKE SA\u3002\u53e6\u4e00\u79cdSA\u662fIPSec SAs\uff0c\u4e00\u4e2aIPSec\u4f1a\u8bdd\u6709\u4e24\u4e2aIPSec SAs\uff0c\u5728\u4e0b\u6587\u4f1a\u4ecb\u7ecd\u3002 \u9636\u6bb5\u4e00\u6709\u4e24\u4e2a\u6a21\u5f0f\uff0c\u6211\u4eec\u4e0a\u6587\u4e2d\u63cf\u8ff0\u7684\u662f\u4e3b\u6a21\u5f0f\uff0c\u4e5f\u662f\u5e94\u7528\u7684\u8f83\u4e3a\u5e7f\u6cdb\u7684\u6a21\u5f0f\uff0c\u53e6\u4e00\u79cd\u6a21\u5f0f\u662f\u91ce\u86ee\u6a21\u5f0f\uff0c\u8fd9\u91cc\u4e0d\u505a\u4ecb\u7ecd\u3002 \u9636\u6bb5\u4e00\u7684\u5de5\u4f5c\u53ef\u4ee5\u7406\u89e3\u4e3a\u662f\u5728\u4e3a\u9636\u6bb5\u4e8c\u505a\u94fa\u57ab\uff0c\u9636\u6bb5\u4e00\u534f\u5546\u59a5\u5f53\u7684\u76f8\u5173\u5b89\u5168\u7b56\u7565\u5982\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u7b49\uff0c\u90fd\u662f\u4e3a\u4e86\u4fdd\u62a4\u7b2c\u4e8c\u9636\u6bb5\u7684\u76f8\u5173ISAKMP\u6570\u636e\u3002","title":"IKE\u9636\u6bb5\u4e00"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ike_2","text":"IKE\u7b2c\u4e00\u9636\u6bb5\u5b8c\u6210\u540e\uff0c\u5c31\u4f1a\u8fdb\u5165IKE\u7b2c\u4e8c\u9636\u6bb5\uff0c\u5728\u9636\u6bb5\u4e8c\u6700\u4e3b\u8981\u7684\u4efb\u52a1\u662f\u660e\u786e\u7b2c\u4e8c\u9636\u6bb5\u7684\u7b56\u7565\uff08\u5728\u534e\u4e3a\u8bbe\u5907\u7684\u914d\u7f6e\u4e2d\u5c31\u662fIPSec Proposal\uff09\uff0c\u8fd9\u4e9b\u7b56\u7565\u5305\u62ec\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u7b49\u7b49\uff0c\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684\u8fd9\u4e9b\u7b56\u7565\uff0c \u8981\u548c\u9636\u6bb5\u4e00\u7684\u7b56\u7565\u533a\u5206\u5f00\u6765\uff0c\u8fd9\u91cc\u6240\u534f\u5546\u7684\u7b56\u7565\u662f\u6700\u7ec8\u7528\u4e8e\u4fdd\u62a4\u5b9e\u9645\u4e1a\u52a1\u6d41\u91cf\u7684\u7b56\u7565\uff0c\u800c\u9636\u6bb5\u4e00\u7684\u90a3\u4e9b\u7b56\u7565\u662f\u7528\u4e8e\u4fdd\u62a4IPSec\u534f\u5546\u7684\u6570\u636e\uff08\u4e3b\u8981\u662f\u4e3a\u4e86\u4fdd\u62a4IKE\u9636\u6bb5\u4e8c\u7684\u534f\u5546\u8fc7\u7a0b\uff09\u3002 \u9636\u6bb5\u4e8c\u5b8c\u6210\u7684\u6807\u5fd7\u662f\u53cc\u65b9\u90fd\u660e\u786e\u4e86IPSec SAs\uff0c\u8fd9\u91cc\u7684IPSec SAs\u5b9e\u9645\u4e0a\u662f\u5305\u542b\u4e24\u4e2aSA\uff1a\u5165\u7ad9\u53ca\u51fa\u7ad9\u3002 FW1\u4e0a\u7684\u51fa\u7ad9SA\u7528\u4e8e\u4fdd\u62a4\u4eceFW1\u53d1\u5f80FW2\u7684\u6570\u636e\uff0c\u8fd9\u4e2aSA\u5bf9\u5e94FW2\u4e0a\u7684\u5165\u7ad9SA\uff0c\u800cFW1\u7684\u5165\u7ad9SA\u5bf9\u5e94FW2\u7684\u51fa\u7ad9SA\u3002","title":"IKE\u9636\u6bb5\u4e8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ike_3","text":"IKE\u4e24\u4e2a\u9636\u6bb5\u5b8c\u6210\u540e\uff0cIPSecVPN\u7684\u96a7\u9053\u5c31\u7b97\u662f\u5efa\u7acb\u8d77\u6765\u4e86\uff0c\u4e0a\u9762\u8bf4\u4e86\u6807\u5fd7\u6027\u7684\u91cc\u7a0b\u7891\u5c31\u662fIPSec SAs \u7684\u5efa\u7acb\uff0c\u5982\u679cIPSecVPN\u96a7\u9053\u6b63\u786e\u5efa\u7acb\uff0c\u7ad9\u70b9\u7684IPSecVPN\u5b89\u5168\u8bbe\u5907\u4e0a\u5e94\u8be5\u6709\u4e24\u4e2aIPSec SAs\uff0c\u4e00\u4e2a\u662f\u51fa\u7ad9\u7684outbound SA\uff0c\u4e00\u4e2a\u662f\u5165\u7ad9\u7684Inbound SA\u3002\u7ad9\u70b91\u7684\u51fa\u7ad9SA\u5bf9\u5e94\u7ad9\u70b92\u7684\u5165\u7ad9SA\uff0c\u7ad9\u70b91\u7684\u5165\u7ad9 SA\u5bf9\u5e94\u7ad9\u70b92\u7684\u51fa\u7ad9SA\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 IPSec SAs\u4e2d\u4fdd\u5b58\u7740\u53cc\u65b9\u534f\u5546\u597d\u7684\u52a0\u5bc6\u7b97\u6cd5\u3001\u54c8\u5e0c\u7b97\u6cd5\u3001\u79d8\u94a5\u4fe1\u606f\u7b49\u7b49\u3002\u5f53\u7ad9\u70b91\u7684FW\u6536\u5230\u6765\u81ea\u672c\u5730\u5185\u7f51\u7684\u6d41\u91cf\uff0c\u5982\u679c\u8be5\u6d41\u91cf\u5339\u914d\u4e86IPSecVPN\u7684\u611f\u5174\u8da3\u6570\u636e\u6d41\uff0c\u5b83\u5c31\u4f1a\u6839\u636e\u51fa\u7ad9SA\u4e2d\u6307\u793a\u7684\u52a0\u5bc6\u7b97\u6cd5\uff0c\u4ee5\u53ca \u79d8\u94a5\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff0c\u5e76\u505a\u52a0\u5bc6\u540e\u7684\u6570\u636e\u505a\u54c8\u5e0c\uff0c\u5c06\u5904\u7406\u597d\u7684\u6570\u636e\u5c01\u88c5\u5728ESP\uff08\u5b89\u5168\u534f\u8bae\uff0c\u6b64\u5904\u4ee5ESP \u4e3a\u4f8b\uff09\u540e\uff0c\u5e76\u5728ESP\u5934\u90e8\u4e2d\u5199\u5165\u660e\u786eSA\u7684SPI\uff08\u7d22\u5f15\u503c\uff0c\u8fd9\u4e2a\u7d22\u5f15\u503c\u5bf9\u5e94Site2-FW\u7684\u5165\u7ad9SA\uff09\uff0c\u7136\u540e\u518d\u5c01\u88c5\u4e0a\u65b0\u7684IP\u5934\u4ee5\u4fbf\u6570\u636e\u80fd\u591f\u5728\u516c\u7f51\u4e2d\u4f20\u8f93\u3002 Site2-FW\u6536\u5230\u6570\u636e\u540e\uff0c\u5c06\u96a7\u9053IP\u5934\u90e8\u53bb\u9664\uff0c\u53d1\u73b0\u91cc\u5934\u662f\u4e2aESP\u5c01\u88c5\u7684\u62a5\u6587\uff0c\u4e8e\u662f\u4eceESP\u5934\u90e8\u4e2d\u7684SPI\u5728\u672c\u5730\u67e5\u627e\uff0c\u627e\u5230SPI\u503c\u5bf9\u5e94\u7684SA\uff0c\u4e5f\u5c31\u662f\u5339\u914d\u7684\u5165\u7ad9SA\uff0c\u5c06\u6570\u636e\u505a\u5b8c\u6574\u6027\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u540e\u5bf9\u6570\u636e\u8fdb\u884c\u89e3\u5bc6\uff0c\u6700\u540e\u5f97\u5230\u660e\u6587\u7684\u539f\u59cb\u62a5\u6587\uff0c\u7136\u540e\u5c06\u62a5\u6587\u4f20\u9012\u5230\u672c\u5730\u5185\u7f51\u76ee\u6807\u8282\u70b9\u3002","title":"IKE\u4e24\u4e2a\u9636\u6bb5\u5b8c\u6210\u540e\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#lan-to-lan-ipsec-vpnike","text":"","title":"\u8def\u7531\u5668\u4e0a\u7684LAN-to-LAN IPSec VPN\uff08IKE\u534f\u5546\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_225","text":"\u5728R1\u53caR3\u4e0a\u914d\u7f6e\u9ad8\u7ea7ACL\u7528\u4e8e\u5339\u914dIPSecVPN\u611f\u5174\u8da3\u6d41\u91cf\u3002 \u5728R1\u53caR3\u4e0a\u521b\u5efaIKE Proposal\uff0c\u7528\u4e8e\u6307\u5b9aIKE\u9636\u6bb5\u4e00\u7684\u7b56\u7565\u3002 \u5728R1\u53caR3\u4e0a\u914d\u7f6eIKE peer\uff0c\u7528\u4e8e\u6307\u793a\u5bf9\u7b49\u4f53\uff08\u5730\u5740\u7b49\u4fe1\u606f\uff09\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u4f7f\u7528\u7684\u662f\u57df\u5171\u4eab\u79d8\u94a5\u7684\u65b9\u5f0f\u8fdb\u884c\u5bf9\u7b49\u4f53\u8eab\u4efd\u9a8c\u8bc1\u3002 \u5728R1\u53caR3\u4e0a\u521b\u5efaIPSec Proposal\uff0c\u7528\u4e8e\u6307\u5b9aIKE\u9636\u6bb5\u4e8c\u7684\u7b56\u7565\uff0c\u4ee5\u4fbf\u534f\u5546IPSec SA\u3002 \u5728R1\u53caR3\u4e0a\u521b\u5efaIPSec Policy\uff0c\u7528\u4e8e\u5c06ACL\u3001IKE Proposal\u3001IPSec Proposal\u3001IKE Peer\u7b49\u4fe1\u606f\u8fdb\u884c\u5173\u8054\u3002 \u5728R1\u53caR3\u4e0a\u5c06IPSec Policy\u5e94\u7528\u5728\u63a5\u53e3\u4e0a\u3002","title":"\u5b9e\u9a8c\u62d3\u6251\u53ca\u9700\u6c42\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_226","text":"R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"\u5b9e\u9a8c\u6b65\u9aa4\u53ca\u914d\u7f6e\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r3_3","text":"","title":"R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#r2_3","text":"\u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u53ef\u5728PC1\u4e0a\u53bbping PC2\u7684\u5730\u5740\uff0c\u8fd9\u6837\u4e00\u6765\u5c06\u5728R1\u4e0a\u89e6\u53d1IPsec VPN\u7684\u611f\u5174\u8da3\u6d41\u91cf\uff0cR1-R3 \u4e4b\u95f4\u5c31\u4f1a\u5f00\u59cb\u8fdb\u884cIKE\u7684\u534f\u5546\u3002\u534f\u5546\u6210\u529f\u7684\u6807\u5fd7\u662f\uff0c\u5728R1\u53caR3\u4e0a\u751f\u6210\u5b89\u5168\u5173\u8054SA\uff1a","title":"R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipsecvpnnat","text":"","title":"IPSecVPN\u7684NAT\u7a7f\u8d8a\u95ee\u9898"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipsecvpnnatnat-server","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u73af\u5883\u4e2d\uff0cPC1\u3001FW1\u4e3a\u7ad9\u70b91\u7684\u8bbe\u5907\uff0cNAT-Device\u3001FW2\u53caPC2\u4e3a\u7ad9\u70b92\u7684\u8bbe\u5907\uff0c\u5176\u4e2dFW1\u3001 FW2\u4e3aIPSecVPN\u7f51\u5173\uff0c\u6b32\u5728\u4e8c\u8005\u4e4b\u95f4\u5efa\u7acb\u7ad9\u70b9\u5230\u7ad9\u70b9\u7684IPSecVPN\u96a7\u9053\u3002\u7531\u4e8e\u7ad9\u70b92\u7684IPSecVPN\u7f51\u5173\u8eb2\u5728\u8be5\u7ad9\u70b9\u7684NAT\u8bbe\u5907\u4e4b\u540e\u5e76\u4e14\u4f7f\u7528\u79c1\u6709IP\u5730\u5740\u7a7a\u95f4\uff0c\u4e3a\u4e86\u4fdd\u8bc1FW1\u80fd\u591f\u4e0eFW2\u5bf9\u8bdd\uff0c\u5728NAT-Device \u4e0a\u90e8\u7f72\u4e86NAT Server\uff0c\u5c06\u516c\u7f51\u5730\u5740200.2.2.2\u7684UDP500\u7aef\u53e3\u6620\u5c04\u5230\u4e8610.0.0.2\u7684UDP500\u7aef\u53e3\u3002FW1\u4f7f\u7528200.2.2.2\u6765\u8bbf\u95eeFW2\u3002 \u5148\u8003\u8651\u4e00\u4e0b\u5f53FW1\u53caFW2\u5173\u95edNAT Traversal\uff08\u6216\u8005FW1\u3001FW2\u4e0d\u652f\u6301NAT Traversal\uff09\u65f6IPSecVPN\u96a7\u9053\u7684\u5efa\u7acb\u95ee\u9898\u3002\u7531\u4e8eIPSecVPN\u7684\u534f\u5546\u5de5\u4f5c\u7531ISAKMP\u5b8c\u6210\uff0c\u800cISAKMP\u662f\u57fa\u4e8eUDP\u7684\uff0c\u4e14\u4f7f\u7528\u7684\u6e90\u3001\u76ee\u7684\u7aef\u53e3\u5747\u4e3aUDP500\uff0c\u56e0\u6b64ISAKMP\u62a5\u6587\u80fd\u591f\u987a\u5229\u88abNAT-Device\u5b8c\u6210\u5730\u5740\u8f6c\u6362\uff0c\u6700\u7ec8IPSecVPN\u662f\u80fd\u591f\u5efa\u7acb\u8d77\u6765\u7684\uff0c\u5728FW1\u53caFW2\u4e0a\u67e5\u770bIPSec SAs\u662f\u80fd\u591f\u770b\u5230\u5df2\u7ecf\u534f\u5546\u5efa\u7acb\u597d\u7684SAs\u3002\u4f46\u662f\u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4 PC\u7684\u4e92\u8bbf\u5374\u51fa\u73b0\u4e86\u95ee\u9898\u3002\u6211\u4eec\u8003\u8651PC1\u53bb\u8bbf\u95eePC2\u7684\u60c5\u51b5\uff1a PC1\u53d1\u51fa\u7684\u6570\u636e\u5305\u5982\u56fe\u6240\u793a\u3002\u6570\u636e\u5305\u5230\u8fbeFW1\u540e\uff0c\u5339\u914d\u4e0a\u4e86IPSecVPN\u7684\u611f\u5174\u8da3\u6d41\u91cf\uff0c\u56e0\u6b64\u62a5\u6587\u88ab\u52a0\u5bc6\u3001\u54c8\u5e0c\uff0c\u7136\u540e\u5957\u4e0aESP\u7684\u5934\u90e8\uff0c\u53c8\u5c01\u88c5\u4e0a\u65b0\u7684IP\u5934\u3002\u8fd9\u4e2a\u88ab\u5904\u7406\u540e\u7684\u6570\u636e\u5305\u5c31\u88ab\u9001\u4e0a\u4e86\u516c\u7f51\uff0c\u4f20\u8f93\u5230\u4e86NAT-Device\u4e0a\uff0c\u867d\u7136NAT-Device\u4e0a\u90e8\u7f72\u4e86NAT Server\u7aef\u53e3\u6620\u5c04\uff0c\u4f46\u662f\u63a5\u6536\u5230\u7684\u8fd9\u4e2a\u5305\u662f\u4e00\u4e2aIP\u5305\uff0c IP \u5305\u5934\u7684\u540e\u9762\u5c31\u662fESP\u7684\u5934\u90e8\u4e86\uff0c\u6ca1\u6709UDP\u5934\u90e8\uff0cNAT\u8bbe\u5907\u5c31\u4e0d\u53ef\u80fd\u5c06\u62a5\u6587\u505a\u5730\u5740\u8f6c\u6362\u5e76\u4e22\u7ed9FW2 \uff0c\u56e0\u6b64\u8be5\u62a5\u6587\u5c31\u4f1a\u88abNAT-Device\u4e22\u5f03\u3002\u8fd9\u5c31\u5bfc\u81f4\u867d\u7136IPSecVPN\u96a7\u9053\u5df2\u7ecf\u5efa\u7acb\u8d77\u6765\u4e86\uff0c\u4f46\u662f\u7ad9\u70b9\u95f4\u7684\u53d7\u4fdd\u62a4\u6d41\u91cf\u65e0\u6cd5\u4e92\u8bbf\u7684\u95ee\u9898\u3002 \u89e3\u51b3\u7684\u529e\u6cd5\u5c31\u662f\u5728FW1\u53caFW2\u4e0a\u6253\u5f00NAT trasversal\u529f\u80fd\uff0c\u8be5\u529f\u80fd\u6fc0\u6d3b\u540e\uff0c\u5728FW1\u53caFW2\u7684IKE\u7b2c\u4e00\u9636\u6bb5\u4e2d\u5c31\u4f1a\u8fdb\u884cNAT trasversal\u7684\u534f\u5546\uff0c\u540c\u65f6\u8fd8\u80fd\u591f\u901a\u8fc7ISAKMP\u62a5\u6587\u7684\u4ea4\u4e92\u5224\u65ad\u4e24\u53f0\u9632\u706b\u5899\u4e4b\u95f4\u662f\u5426\u6709 NAT\u8bbe\u5907\u3002\u5982\u679c\u5b58\u5728NAT\u8bbe\u5907\uff0c\u5219\u4eceIKE\u9636\u6bb5\u4e00\u7684\u7b2c5,6\u4e2a\u62a5\u6587\u548c\u540e\u7eed\u7684\u5feb\u901f\u6a21\u5f0f\u7684\u4e09\u4e2aISAKMP\u5305\uff0c\u4ee5\u53ca\u7528\u4e8e\u627f\u8f7d\u7528\u6237\u6570\u636e\u7684ESP\u62a5\u6587\uff0c\u90fd\u4f1a\u4f7f\u7528UDP\u6e90\u3001\u76ee\u7684\u7aef\u53e34500\u8fdb\u884c\u4f20\u8f93\u3002\u8fd9\u6837\uff0c\u62a5\u6587\u7a7f\u8d8aNAT- Device\u65f6\u5c31\u80fd\u591f\u88ab\u6b63\u786e\u7684\u5730\u5740\u8f6c\u6362\u3002\u8fd9\u91cc\u6709\u4e00\u70b9\u5fc5\u987b\u6ce8\u610f\u7684\u662f\u5728NAT-Device\u4e0a\u8981\u589e\u52a04500\u7684\u7aef\u53e3\u6620\u5c04\u3002 \u5982\u6b64\u4e00\u6765\u5f53PC1\u53d1\u51fa\u7684\u6570\u636e\u5230\u8fbeFW1\u65f6\uff0cFW1\u5c06\u62a5\u6587\u5904\u7406\u540e\u5c01\u88c5\u4e0aESP\u5934\u90e8\uff0c\u7136\u540e\u518d\u5c01\u88c5\u4e0a\u4e00\u4e2aUDP \u5934\u90e8\uff0c\u6e90\u3001\u76ee\u7684\u7aef\u53e3\u53f7\u90fd\u4f7f\u75284500\uff08\u8fd9\u4e2a\u7aef\u53e3\u53f7\u4e13\u7528\u4e8eIPSec-NAT\uff09\uff0c\u6700\u540e\u518d\u5c01\u88c5\u4e0a\u96a7\u9053\u7684IP\u5934\u90e8\u3002\u5b8c\u6210\u540e\u62a5\u6587\u88ab\u9001\u8fbeNAT-Device\u3002NAT-Device\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2aUDP\u5305\uff0c\u76ee\u7684\u7aef\u53e3\u4e3a4500\uff0c\u800c\u672c\u5730\u914d\u7f6e\u4e86\u7aef\u53e3\u6620\u5c04\uff0c\u5c06200.2.2.2:4500\u6620\u5c04\u5230\u4e8610.0.0.2:4500\uff0c\u56e0\u6b64\u5c06\u76ee\u7684IP\u8f6c\u6362\u621010.0.0.2\u5e76\u5c06\u6570\u636e\u5305\u8f6c\u53d1\u7ed9FW2\uff0c \u63a5\u4e0b\u6765\u7684\u8fc7\u7a0b\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\u3002","title":"IPSecVPN\u7684NAT\u7a7f\u8d8a\u95ee\u9898\uff08NAT Server\u573a\u666f\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipsecvpnnatnat-server_1","text":"\u5b9e\u9a8c\u62d3\u6251\u53caIP\u7f16\u5740\u5982\u4e0a\u56fe\u6240\u793a\u3002FW1\u53caPC1\u4e3a\u7ad9\u70b91\u7684\u8bbe\u5907\uff1bNAT-Device\u3001FW2\u53caPC2\u4e3a\u7ad9\u70b92\u7684\u8bbe\u5907\uff1b FW1\u53caFW2\u4e3aIPSecVPN\u7f51\u5173\uff0c\u4e24\u8005\u4e4b\u95f4\u90e8\u7f72LAN to LAN IPSecVPN\uff1b\u7ad9\u70b92\u7533\u8bf7\u5230\u7684\u3001\u7528\u4e8eIPSecVPN \u7684\u5730\u5740\u662f200.2.2.2\uff1b\u5728NAT\u8bbe\u5907\u4e0a\u914d\u7f6eNAT Server\uff0c\u5c06200.2.2.2\u7684UDP500\u548cUDP4500\u6620\u5c04\u523010.0.0.2\u7684UDP500\u548cUDP4500\u3002Internet\u53ef\u4f7f\u7528\u4e00\u53f0\u8def\u7531\u5668\u6a21\u62df\uff0c\u53ea\u914d\u7f6e\u63a5\u53e3IP\uff0c\u4e0d\u914d\u7f6e\u4efb\u4f55\u8def\u7531\u4fe1\u606f\u3002 \u8bf7\u6ce8\u610f\uff0c\u672c\u6848\u4f8b\u91c7\u7528Eudemon1000E-X\u9632\u706b\u5899\u4e3e\u4f8b\u8bb2\u89e3\uff0c\u4e0d\u540c\u7684\u9632\u706b\u5899\u578b\u53f7\uff0c\u5728\u914d\u7f6e\u4e0a\u5b58\u5728\u5dee\u5f02\u3002","title":"IPSecVPN\u7684NAT\u7a7f\u8d8a\u914d\u7f6e\u793a\u4f8b\uff08NAT Server\u573a\u666f\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1ip","text":"#\u914d\u7f6e\u9ed8\u8ba4\u8def\u7531 [FW1] ip route-static 0.0.0.0 0.0.0.0 200.1.1.2 #\u5b9a\u4e49IPSecVPN\u611f\u5174\u8da3\u6570\u636e\u6d41\uff0c\u4f7f\u7528ACL3000\u6765\u5339\u914d\u611f\u5174\u8da3\u6d41\u91cf\uff1a [FW1] acl number 3000 [FW1-acl-adv-3000] rule permit ip source 10.1.1.0 0.0.0.255 destination 10.2.2.0 0.0.0.255 #\u914d\u7f6eIKE Proposal\uff0c\u8fd9\u662fIKE\u9636\u6bb5\u4e00\u7684\u7b56\u7565\uff1a [FW1] ike proposal 1 [FW1-ike-proposal-1] authentication-method pre-share [FW1-ike-proposal-1] authentication-algorithm sha1 [FW1-ike-proposal-1] encryption-algorithm 3des-cbc #\u914d\u7f6eIPsec proposal\uff0c\u8fd9\u662fIKE\u9636\u6bb5\u4e8c\u7684\u7b56\u7565\uff1a [FW1] ipsec proposal myset [FW1-ipsec-proposal-myset] transform esp [FW1-ipsec-proposal-myset] esp authentication-algorithm sha1 [FW1-ipsec-proposal-myset] esp encryption-algorithm 3des #\u914d\u7f6eIKE peer\uff0c\u5b9a\u4e49\u9884\u5171\u4eab\u79d8\u94a5\u3001\u5173\u8054IKE proposal\u5e76\u6307\u5b9a\u96a7\u9053\u5bf9\u7aef\u8282\u70b9IP\uff1a [FW1] ike peer fw2 [FW1-ike-peer-fw2] pre-shared-key Huawei123 [FW1-ike-peer-fw2] ike-proposal 1 [FW1-ike-peer-fw2] remote-address 200.2.2.2 [FW1-ike-peer-fw2] remote-address authentication-address 10.0.0.2 [FW1-ike-peer-fw2] nat traversal #\u914d\u7f6eIPsec Policy\uff1a [FW1] ipsec policy mymap 1 isakmp [FW1-ipsec-policy-isakmp-mymap-1] security acl 3000 [FW1-ipsec-policy-isakmp-mymap-1] ike-peer fw2 [FW1-ipsec-policy-isakmp-mymap-1] proposal myset #\u5e94\u7528IPsec Policy\u5230\u63a5\u53e3\uff1a [FW1] interface GigabitEthernet0/0/2 [FW1-GigabitEthernet0/0/2] ipsec policy mymap #\u653e\u5f00\u9632\u706b\u5899\u81ea\u8eab\u5230Untrust\u533a\u57df\u7684\u6d41\u91cf\uff0c\u4f7f\u5f97\u9632\u706b\u5899FW1\u80fd\u591f\u4e3b\u52a8\u53d1\u9001ISAKMP\u3001\u53ca\u96a7\u9053\u5efa\u7acb\u540e\u7684\u52a0\u5bc6\u6d41\u91cf\u5230FW2\uff1a [FW1] policy interzone local untrust outbound [FW1-policy-interzone-local-untrust-outbound] policy 0 [FW1-policy-interzone-local-untrust-outbound-0] policy destination 200.2.2.2 0 [FW1-policy-interzone-local-untrust-outbound-0] action permit #\u653e\u5f00IPSecVPN\u96a7\u9053\u5bf9\u7aef\u9632\u706b\u5899\u53d1\u9001\u8fc7\u6765\u7684\u6d41\u91cf\uff1a [FW1] policy interzone local untrust inbound [FW1-policy-interzone-local-untrust-inbound] policy 0 [FW1-policy-interzone-local-untrust-inbound-0] policy source 200.2.2.2 0 [FW1-policy-interzone-local-untrust-inbound-0] action permit #\u653e\u5f00\u5bf9\u7aef\u7ad9\u70b9\u5185\u7f51\u8fc7\u6765\u7684\u6d41\u91cf\uff1a [FW1] policy interzone trust untrust inbound [FW1-policy-interzone-trust-untrust-inbound] policy 0 [FW1-policy-interzone-trust-untrust-inbound-0] policy source 10.2.2.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-inbound-0] policy destination 10.1.1.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-inbound-0] action permit #\u653e\u5f00\u672c\u5730\u7ad9\u70b9\u5185\u7f51\u5230\u5bf9\u7aef\u7ad9\u70b9\u5185\u7f51\u7684\u6d41\u91cf\uff1a [FW1] policy interzone trust untrust outbound [FW1-policy-interzone-trust-untrust-outbound] policy 0 [FW1-policy-interzone-trust-untrust-outbound-0] policy source 10.1.1.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-outbound-0] policy destination 10.2.2.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-outbound-0] action permit FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u3001\u5b89\u5168\u533a\u57df\u914d\u7f6e\u7b49\uff09\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a\u7531\u4e8e\u8fd9\u4e2a\u73af\u5883\u4e2d\uff0cFW1\u91c7\u7528\u7684\u914d\u7f6e\u4e0d\u662f\u57fa\u4e8e\u6a21\u677f\u7684IPSec\uff0cFW1\u4f7f\u7528200.2.2.2\u4f5c\u4e3a\u8fdc\u7aef\u5bf9\u7b49\u4f53\u5730\u5740\u5bf9FW2\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7136\u800c\u5b9e\u9645\u4e0aFW2\u7684\u771f\u5b9eIP\u5730\u5740\u662f10.0.0.2\uff0c\u800c\u5e76\u975e200.2.2.2\uff0c\u8fd9\u4e48\u4e00\u6765\uff0c FW1\u5bf9FW2\u8fdb\u884cIPSec\u5bf9\u7b49\u4f53\u8ba4\u8bc1\u7684\u65f6\u5019\u5c31\u4f1a\u5931\u8d25\uff0c\u56e0\u4e3aFW2\u4f7f\u752810.0.0.2\u4e0eFW1\u8fdb\u884c\u8ba4\u8bc1\uff08\u8fd9\u4e2a\u5730\u5740\u88ab\u5c01\u88c5\u5728ISAKMP\u62a5\u6587\u4e4b\u4e2d\uff09\u3002 \u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u65b9\u6cd5\u4e4b\u4e00\u662f\u5728FW1\u4e0a\u624b\u5de5\u6307\u5b9a\u8fdc\u7aef\u5bf9\u7b49\u4f53FW2\u7528\u4e8e\u8eab\u4efd\u8ba4\u8bc1\u7684\u5730\u5740\uff0c\u5728FW1\u7684peer\u89c6\u56fe\u4e0b\u4f7f\u7528\u547d\u4ee4**authentication-address**\u6765\u6307\u5b9a\u5bf9\u7aef\u7528\u4e8e\u8eab\u4efd\u8ba4\u8bc1\u7684\u5730\u5740\uff08\u4e5f\u5c31\u662fFW2\u7684\u771f\u5b9eIP 10.0.0.2\uff09\u3002\u8fd9\u5c31\u662f\u672c\u4f8b\u6240\u7528\u7684\u65b9\u6cd5\u3002 \u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u4e0d\u4f7f\u7528IP\u5730\u5740\u4f5c\u4e3a\u8eab\u4efd\u8ba4\u8bc1\u7684\u4f9d\u636e\uff08\u9ed8\u8ba4\u5c31\u662f\u4f7f\u7528IP\u5730\u5740\uff09\uff0c\u800c\u662f\u4f7f\u7528name\u6765\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0cFW1\u4e0a\u7684\u5173\u952e\u6027\u914d\u7f6e\u4fee\u6539\u5982\u4e0b\uff1a FW2\u4e0a\u7684\u5173\u952e\u6027\u914d\u7f6e\u53ef\u4fee\u6539\u5982\u4e0b\uff1a \u914d\u7f6e\u5b8c\u6210\u540e\uff0cPC\u4e4b\u95f4\u5373\u53ef\u4e92\u901a\u3002","title":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u5730\u5740\u3001\u5b89\u5168\u533a\u57df\u7b49\u914d\u7f6e\uff09\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipsecvpnnatnat-address-group","text":"\u6211\u4eec\u518d\u6765\u770b\u53e6\u4e00\u79cd\u60c5\u51b5\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0cFW1\u53caPC1\u4e3a\u7ad9\u70b91\u7684\u8bbe\u5907\uff1bNAT-Device\u3001FW2\u3001PC2\u4e3a\u7ad9\u70b92 \u7684\u8bbe\u5907\u3002\u5728NAT-Device\u4e0a\u90e8\u7f72\u4e86\u57fa\u4e8e\u5730\u5740\u6c60\u7684\u6e90\u5730\u5740\u8f6c\u6362\uff08NAPT\uff09\uff0c\u7ad9\u70b92\u7684\u5185\u7f51\u8bbe\u5907\uff08\u5305\u62ecFW2\uff09 \u4f7f\u7528\u516c\u7f51\u5730\u5740200.2.2.2\u8bbf\u95ee\u5916\u7f51\u3002 \u9996\u5148\u8003\u8651FW1\u53caFW2\u6ca1\u6709\u5f00\u542fNAT Trasversal\u7684\u60c5\u51b5\uff0c\u7531\u4e8eIPSecVPN\u96a7\u9053\u7684\u534f\u5546\u662fISAKMP\u5b9e\u73b0\u7684\uff0c \u800cISAKMP\u62a5\u6587\u4f7f\u7528UDP\u6e90\u3001\u76ee\u7684\u7aef\u53e3500\uff0c\u56e0\u6b64\u62a5\u6587\u4f1a\u88abNAT-Device\u987a\u5229\u5b8c\u6210\u5730\u5740\u8f6c\u6362\uff08\u5fc5\u987b\u7531FW2 \u4e3b\u52a8\u53d1\u8d77IPSecVPN\u96a7\u9053\u534f\u5546\uff09\uff0c\u4ece\u800cIPSecVPN\u96a7\u9053\u7684\u5efa\u7acb\u662f\u6ca1\u6709\u95ee\u9898\u7684\u3002 \u4f46\u662f\u5728IPSecVPN\u96a7\u9053\u5efa\u7acb\u8d77\u6765\u4e4b\u540e\uff1a PC2\u8bbf\u95eePC1\u7684\u6570\u636e\u5728FW2\u88ab\u5904\u7406\u540e\uff0c\u5c01\u88c5ESP\u5934\u90e8\u3001\u5c01\u88c5\u65b0\u7684IP\u5934\uff0c\u7136\u540e\u9001\u5230\u4e86NAT-Device\uff0c\u6ce8\u610f\uff0c NAT-Device\u90e8\u7f72\u7684\u662fNAPT\uff0c\u4e5f\u5c31\u662f\u591a\u4e2a\u5185\u7f51\u5730\u5740\u5171\u7528\u4e00\u4e2a\u516c\u7f51\u5730\u5740\u8bbf\u95ee\u5916\u7f51\u3001\u5e76\u4f7f\u7528\u7aef\u53e3\u53f7\u533a\u5206\u5185\u7f51IP\u5730\u5740\u7684NAT\u65b9\u5f0f\u3002\u800c\u6b64\u523bNAT-Device\u6536\u5230\u7684\u62a5\u6587\u662f\u4e00\u4e2aIP\u5305\uff0c\u5728IP\u5305\u5934\u540e\u9762\u5c31\u662fESP\u7684\u62a5\u6587\u5934\u90e8\uff0c \u518d\u5f80\u540e\u5c31\u662f\u88ab\u52a0\u5bc6\u7684\u6570\u636e\u4e86\uff0cNAT-Device\u65e0\u6cd5\u6839\u636e\u73b0\u6709\u7684\u6570\u636e\u5f62\u6210NAT\u8868\u9879\u5e76\u5b8c\u6210\u5730\u5740\u8f6c\u6362\u3002NAT\u4f1a\u8bdd\u8868\u9879\u4e00\u822c\u5305\u62ec\u534f\u8bae\u7c7b\u578b\u3001\u6e90\u5730\u5740\u3001\u6e90\u7aef\u53e3\u3001\u76ee\u7684\u5730\u5740\u3001\u76ee\u7684\u7aef\u53e3\u7b49\u4e94\u5143\u7ec4\uff0c\u800c\u6b64\u523b\u6570\u636e\u5143\u7d20\u4e0d\u8db3\uff0c NAT-Device\u65e0\u6cd5\u521b\u5efaNAT\u8868\u9879\u3001\u65e0\u6cd5\u5bf9\u8be5\u62a5\u6587\u8fdb\u884c\u5730\u5740\u8f6c\u6362\uff0c\u56e0\u6b64\u5b83\u76f4\u63a5\u628a\u8fd9\u4e2a\u62a5\u6587\u8f6c\u53d1\u51fa\u53bb\uff0c\u663e\u7136\uff0c \u8fd9\u4e2a\u62a5\u6587\u662f\u65e0\u6cd5\u5728\u516c\u7f51\u4e0a\u4f20\u8f93\u7684\uff0c\u56e0\u4e3a\u5b83\u7684\u6e90IP\u5730\u5740\u662f10.0.0.2\uff0c\u8fd9\u662f\u4e00\u4e2a\u79c1\u6709IP\u3002 \u73b0\u5728\uff0cFW1\u53caFW2\u542f\u7528NAT Trasversal\uff0c\u53cc\u65b9\u7ecf\u8fc7\u534f\u5546\u4e4b\u540e\uff0c\u4f1a\u5728\u53d7\u4fdd\u62a4\u62a5\u6587\u7684ESP\u5934\u90e8\u524d\u589e\u52a0\u4e00\u4e2a UDP\u5934\u90e8\uff0c\u6e90\u3001\u76ee\u7684\u7aef\u53e3\u53f7\u4e3a4500\uff0c\u6709\u4e86\u8fd9\u4e2a\u5934\u90e8\uff0c\u62a5\u6587\u5728\u7ecf\u8fc7NAT-Device\u7684\u65f6\u5019\u5c31\u80fd\u591f\u88ab\u6b63\u786e\u7684\u8fdb\u884c\u5730\u5740\u8f6c\u6362\uff1a","title":"IPSecVPN\u7684NAT\u7a7f\u8d8a\uff08NAT address-group\u573a\u666f\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipsecvpnnatnat-address-group_1","text":"\u5b9e\u9a8c\u62d3\u6251\u53caIP\u7f16\u5740\u5982\u4e0a\u56fe\u6240\u793a\u3002FW1\u53caPC1\u4e3a\u7ad9\u70b91\u7684\u8bbe\u5907\uff1bNAT-Device\u3001FW2\u53caPC2\u4e3a\u7ad9\u70b92\u7684\u8bbe\u5907\uff1b FW1\u53caFW2\u4e3aIPSecVPN\u7f51\u5173\uff0c\u4e24\u8005\u4e4b\u95f4\u90e8\u7f72LAN to LAN IPSecVPN\uff1bNAT-Device\u4e0a\u90e8\u7f72\u4e86NAPT\u6e90\u5730\u5740\u8f6c\u6362\uff0c\u7533\u8bf7\u5230\u7684\u3001\u7528\u4e8e\u5730\u5740\u8f6c\u6362\u7684\u516c\u7f51IP\u662f200.2.2.2\u3002Internet\u53ef\u4f7f\u7528\u4e00\u53f0\u8def\u7531\u5668\u6a21\u62df\uff0c\u53ea\u914d\u7f6e\u63a5\u53e3IP\uff0c\u4e0d\u914d\u7f6e\u4efb\u4f55\u8def\u7531\u4fe1\u606f\u3002 \u6ce8\u610f\u5728\u672c\u573a\u666f\u4e2d\uff0cFW1\u4e0a\u90e8\u7f72\u57fa\u4e8e\u6a21\u677f\u7684IPSecVPN\uff08\u56e0\u4e3aFW2\u4fa7\u90e8\u7f72\u4e86\u6e90NAT\uff0c\u56e0\u6b64FW1\u53ef\u80fd\u4e8b\u5148\u65e0\u6cd5\u77e5\u9053FW2\u7684\u516c\u7f51\u5730\u5740\uff09\uff0cFW2\u4f5c\u4e3aIPSecVPN\u96a7\u9053\u534f\u5546\u7684\u53d1\u8d77\u7aef\u3002 \u8bf7\u6ce8\u610f\uff0c\u672c\u6848\u4f8b\u91c7\u7528Eudemon1000E-X\u9632\u706b\u5899\u4e3e\u4f8b\u8bb2\u89e3\uff0c\u4e0d\u540c\u7684\u9632\u706b\u5899\u578b\u53f7\uff0c\u5728\u914d\u7f6e\u4e0a\u5b58\u5728\u5dee\u5f02\u3002","title":"IPSecVPN\u7684NAT\u7a7f\u8d8a\u914d\u7f6e\u793a\u4f8b\uff08NAT address-group\u573a\u666f\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fw1ip_1","text":"#\u914d\u7f6e\u9ed8\u8ba4\u8def\u7531\uff1a [FW1] ip route-static 0.0.0.0 0.0.0.0 200.1.1.2 #\u5b9a\u4e49IPSecVPN\u611f\u5174\u8da3\u6570\u636e\u6d41\uff0c\u4f7f\u7528ACL3000\u6765\u5339\u914d\u611f\u5174\u8da3\u6d41\u91cf\uff1a [FW1] acl number 3000 [FW1-acl-adv-3000] rule permit ip source 10.1.1.0 0.0.0.255 destination 10.2.2.0 0.0.0.255 #\u914d\u7f6eIKE Proposal\uff0c\u8fd9\u662fIKE\u9636\u6bb5\u4e00\u7684\u7b56\u7565\uff1a [FW1] ike proposal 1 [FW1-ike-proposal-1] authentication-method pre-share [FW1-ike-proposal-1] authentication-algorithm sha1 [FW1-ike-proposal-1] encryption-algorithm 3des-cbc #\u914d\u7f6eIKE peer\uff0c\u5b9a\u4e49\u9884\u5171\u4eab\u79d8\u94a5\u3001\u5173\u8054IKE proposal\u5e76\u6307\u5b9a\u96a7\u9053\u5bf9\u7aef\u8282\u70b9IP\u5730\u5740\uff1a [FW1] ike peer fw2 [FW1-ike-peer-fw2] pre-shared-key Huawei123 [FW1-ike-peer-fw2] ike-proposal 1 [FW1-ike-peer-fw2] nat traversal #\u914d\u7f6eIPsec proposal\uff0c\u8fd9\u662fIKE\u9636\u6bb5\u4e8c\u7684\u7b56\u7565\uff1a [FW1] ipsec proposal myset [FW1-ipsec-proposal-myset] transform esp [FW1-ipsec-proposal-myset] esp authentication-algorithm sha1 [FW1-ipsec-proposal-myset] esp encryption-algorithm 3des #\u914d\u7f6eIPsec policy\u6a21\u677f\uff1a [FW1] ipsec policy-template policy_temp 1 [FW1-ipsec-policy-template-policy_temp-1] security acl 3000 [FW1-ipsec-policy-template-policy_temp-1] ike-peer fw2 [FW1-ipsec-policy-template-policy_temp-1] proposal myset #\u914d\u7f6eIPsec Policy\uff1a [FW1] ipsec policy mymap 1 isakmp template policy_temp #\u5e94\u7528IPsec Policy\u5230\u63a5\u53e3\uff1a [FW1] interface GigabitEthernet0/0/2 [FW1-GigabitEthernet0/0/2] ipsec policy mymap #\u653e\u5f00\u9632\u706b\u5899\u81ea\u8eab\u5230Untrust\u533a\u57df\u7684\u6d41\u91cf\uff0c\u4f7f\u5f97\u9632\u706b\u5899FW1\u80fd\u591f\u4e3b\u52a8\u53d1\u9001ISAKMP\u3001\u53ca\u96a7\u9053\u5efa\u7acb\u540e\u7684\u52a0\u5bc6\u6d41\u91cf\u5230FW2\uff1a [FW1] policy interzone local untrust outbound [FW1-policy-interzone-local-untrust-outbound] policy 0 [FW1-policy-interzone-local-untrust-outbound-0] policy destination 200.2.2.2 0 [FW1-policy-interzone-local-untrust-outbound-0] action permit #\u653e\u5f00IPSecVPN\u96a7\u9053\u5bf9\u7aef\u9632\u706b\u5899\u53d1\u9001\u8fc7\u6765\u7684\u6d41\u91cf\uff1a [FW1] policy interzone local untrust inbound [FW1-policy-interzone-local-untrust-inbound] policy 0 [FW1-policy-interzone-local-untrust-inbound-0] policy source 200.2.2.2 0 [FW1-policy-interzone-local-untrust-inbound-0] action permit #\u653e\u5f00\u5bf9\u7aef\u7ad9\u70b9\u5185\u7f51\u8fc7\u6765\u7684\u6d41\u91cf\uff1a [FW1] policy interzone trust untrust inbound [FW1-policy-interzone-trust-untrust-inbound] policy 0 [FW1-policy-interzone-trust-untrust-inbound-0] policy source 10.2.2.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-inbound-0] policy destination 10.1.1.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-inbound-0] action permit #\u653e\u5f00\u672c\u5730\u7ad9\u70b9\u5185\u7f51\u5230\u5bf9\u7aef\u7ad9\u70b9\u5185\u7f51\u7684\u6d41\u91cf\uff1a [FW1] policy interzone trust untrust outbound [FW1-policy-interzone-trust-untrust-outbound] policy 0 [FW1-policy-interzone-trust-untrust-outbound-0] policy source 10.1.1.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-outbound-0] policy destination 10.2.2.0 0.0.0.255 [FW1-policy-interzone-trust-untrust-outbound-0] action permit FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u3001\u5b89\u5168\u533a\u57df\u914d\u7f6e\u7b49\uff09\uff1a \u5f53PC2\u8bbf\u95eePC1\u65f6\uff0c\u6d41\u91cf\u5c06\u89e6\u53d1FW2\u4e0eFW1\u8fdb\u884cIPSecVPN\u96a7\u9053\u7684\u534f\u5546\u3002 IKE\u9636\u6bb5\u4e00\u7684\u7b2c1,2\u4e24\u4e2a\u62a5\u6587\u4f7f\u7528\u6e90\u3001\u76ee\u7684UDP\u7aef\u53e3500\uff0c\u6d41\u91cf\u5728\u7ecf\u8fc7NAT\u8bbe\u5907\u65f6\u5730\u5740\u88ab\u8f6c\u6362\uff0c\u51fa\u73b0\u5982\u4e0b NAT\u8868\u9879\uff1a [NAT] display firewall session table \u8fd9\u4e9b\u62a5\u6587\u8fd8\u4f1a\u8fdb\u884cNAT Traversal\u7684\u534f\u5546\uff0c\u53caNAT\u8bbe\u5907\u7684\u53d1\u73b0\u3002\u7ecf\u8fc7\u534f\u5546\u540e\u53cc\u65b9\u51b3\u5b9a\u4f7f\u7528UDP\u7aef\u53e34500 \u6765\u8fdb\u884c\u62a5\u6587\u4ea4\u4e92\uff0c\u968f\u540e\u7528\u4e8e\u5bf9\u7b49\u4f53\u9a8c\u8bc1\u7684ISAKMP\u5305\u4f7f\u7528UDP\u6e90\u3001\u76ee\u7684\u7aef\u53e34500\uff0c\u6d41\u91cf\u5728\u7ecf\u8fc7NAT\u8bbe\u5907\u65f6\u88ab\u5730\u5740\u8f6c\u6362\uff0c\u51fa\u73b0\u5982\u4e0bNAT\u8868\u9879\uff1a udp VPN:public --> public 10.0.0.2:4500[200.2.2.2:2048]-->200.1.1.1:4500 \u5728IPSecVPN\u96a7\u9053\u5efa\u7acb\u8d77\u6765\u540e\uff0c\u53d7\u4fdd\u62a4\u7684\u6d41\u91cf\u4f9d\u7136\u4f1a\u4f7f\u7528UDP4500\u7aef\u53e3\u8fdb\u884c\u901a\u4fe1\uff0c\u7531\u4e8eNAT\u8bbe\u5907\u5df2\u7ecf\u6709\u4e86\u4e0a\u8ff0\u8868\u9879\uff0c\u56e0\u6b64\u62a5\u6587\u540c\u884c\u7545\u901a\uff08\u5f53\u7136\uff0c\u5728IPSecVPN\u96a7\u9053\u5efa\u7acb\u8d77\u6765\u4e4b\u540e\uff0c\u7531\u4e8eNAT\u8bbe\u5907\u5df2\u7ecf\u6709\u4e86\u76f8\u5173\u7684\u8868\u9879\uff0c\u56e0\u6b64PC1\u4e5f\u53ef\u4ee5\u4e3b\u52a8\u53d1\u8d77\u6d41\u91cf\u8bbf\u95eePC2\uff09\u3002","title":"FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff08\u7701\u7565\u63a5\u53e3IP\u3001\u5b89\u5168\u533a\u57df\u914d\u7f6e\u7b49\uff09\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vpn-clientl2tp-over-ipsec","text":"\u6240\u8c13\u201cIPSecVPN\u8fdc\u7a0b\u62e8\u5165\u573a\u666f\u201d\uff0c\u4e5f\u5c31\u662f\u7528\u6237\u4ece\u516c\u7f51\u901a\u8fc7VPN\u62e8\u5165\u9632\u706b\u5899\uff0c\u4ece\u800c\u5bf9\u9632\u706b\u5899\u6240\u4fdd\u62a4\u7684\u5185\u7f51\u8d44\u6e90\u8fdb\u884c\u8bbf\u95ee\u3002\u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cPC\u53caFirewall\u90fd\u63a5\u5165\u4e00\u4e2a\u516c\u5171\u7f51\u7edc\uff08Public network\uff09\uff0cFirewall\u7684GE0/0/1\u63a5\u53e3\u8fde\u63a5\u7740SiteA\u7684\u5185\u7f51\uff08Trust\u5b89\u5168\u57df\uff09\uff0c\u5185\u7f51\u4e2d\u6709\u670d\u52a1\u5668Server\u3002\u73b0\u5728PC\u80fd\u591f\u901a\u8fc7Public network\u8bbf\u95ee\u5230 Firewall\u7684\u5916\u7f51\u63a5\u53e3GE0/0/2\u3002\u6211\u4eec\u8981\u5728Firewall\u4e0a\u90e8\u7f72IPSecVPN\u8fdc\u7a0b\u62e8\u5165\uff0c\u5c06Firewall\u914d\u7f6e\u4e3a\u4e00\u53f0VPN\u670d\u52a1\u5668\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u80fd\u591f\u901a\u8fc7Public network\uff0c\u4f7f\u7528VPN\u5ba2\u6237\u7aef\u8f6f\u4ef6\u62e8\u5165Firewall\uff0c\u4ece\u800c\u8bbf\u95eeSiteA\u7684\u5185\u7f51\u8d44\u6e90\u3002\u5728\u672c\u65b9\u6848\u4e2d\uff0cPC\u9700\u4f7f\u7528VPN\u5ba2\u6237\u7aef\u8f6f\u4ef6\u8fdb\u884c\u62e8\u53f7\uff0c\u62e8\u53f7\u6210\u529f\u540e\uff0cPC\u4e0e\u9632\u706b\u5899\u4e4b\u95f4\u4f1a\u5efa\u7acb\u4e00\u6761\u52a0\u5bc6\u7684\u96a7\u9053\uff0c \u540c\u65f6PC\u4f1a\u83b7\u5f97\u4e00\u4e2aSiteA\u6240\u5206\u914d\u7684\u5185\u7f51\u5730\u5740\uff0c\u5b83\u53ef\u4f7f\u7528\u8be5\u5730\u5740\u76f4\u63a5\u5bf9\u5f00\u653e\u7684\u5185\u7f51\u8d44\u6e90\u8fdb\u884c\u8bbf\u95ee\u3002 \u6ce8\u610f\uff1a\u672c\u4f8b\u4e2d\u6240\u4f7f\u7528\u7684\u9632\u706b\u5899\u662fEudemon1000E-X\u3002\u4e0d\u540c\u7684\u9632\u706b\u5899\u578b\u53f7\uff0c\u5728\u914d\u7f6e\u4e0a\u5b58\u5728\u5dee\u5f02\u3002 IP\u5730\u5740\u8d44\u6e90\u7684\u89c4\u5212\u5982\u4e0b\uff1a \u4f7f\u7528\u65b9 \u5730\u5740 \u5907\u6ce8 PC\uff08VPN\u5ba2\u6237\u7aef\uff09 192.168.56.1/24 \u7f51\u5173192.168.56.254\u3002 Interface virtual- template 1 192.168.255.1/24 \u8fd9\u4e2a\u5730\u5740\u662fVPN\u5ba2\u6237\u7aef\u62e8\u53f7\u6210\u529f\u540e\uff0c\u865a\u62df \u7f51\u5361\u7684\u7f51\u5173\u5730\u5740\u3002\u53ef\u81ea\u5b9a\u4e49\u3002 PC\u7684\u5730\u5740\u6c60 1.1.1.1\u81f31.1.1.100 VPN\u5ba2\u6237\u7aef\u6210\u529f\u62e8\u5165\u540e\uff0c\u9632\u706b\u5899\u6240\u5206\u914d\u7684 \u52a8\u6001\u5730\u5740\u6c60\u3002\u8fd9\u4e2a\u5730\u5740\u6c60\u6700\u597d\u4e0e\u5185\u7f51\u4e1a\u52a1\u7684\u7f51\u6bb5\u533a\u5206\u5f00\uff0c\u53ef\u5355\u72ec\u89c4\u5212\u4e00\u4e2a\u5730\u5740\u6bb5\u3002 Firewall\u7684\u57fa\u7840\u914d\u7f6e\u5982\u4e0b\uff1a Firewall\u7684VPN\u670d\u52a1\u914d\u7f6e\u5982\u4e0b\uff1a authentication-algorithm sha1 encryption-algorithm des-cbc dh group2 #\u914d\u7f6eIKE\u5bf9\u7b49\u4f53\uff1a ike peer peer1 exchange-mode aggressive local-id-type fqdn lns ike-proposal 1 pre-shared-key abcde remote-id-type fqdn client1 \u6ce8\uff1a\u5982\u679c\u662f\u5728*eNSP*\u6a21\u62df\u5668\u4e2d\u5b8c\u6210\u8be5\u5b9e\u9a8c\uff0c\u5219\u4e0a\u8ff0\u914d\u7f6e\uff08*IKE*\u5bf9\u7b49\u4f53\u7684\u914d\u7f6e\uff09\u6539\u4e3a\uff1a ike peer peer1 exchange-mode aggressive local-id-type fqdn ike-proposal 1 pre-shared-key abcde remote-id client1 quit ike local-name lns #\u914d\u7f6eVPN\u611f\u5174\u8da3\u6570\u636e\u6d41\uff0c1701\u7aef\u53e3\u4e3a\u9632\u706b\u5899\u4f5c\u4e3a\u96a7\u9053\u54cd\u5e94\u7aef\u5904\u7406L2TP\u62a5\u6587\u7684\u7aef\u53e3\uff1a acl number 3001 rule permit udp source-port eq 1701 #\u914d\u7f6eIKE\u7b2c\u4e8c\u9636\u6bb5\u7684\u7b56\u7565\uff1a ipsec proposal p1 esp encryption-algorithm des esp authentication-algorithm md5 # \u914d\u7f6eIPSec\u5b89\u5168\u7b56\u7565\uff0c\u672c\u7aef\u4f7f\u7528\u6a21\u677f\u65b9\u5f0f\u5efa\u7acbIPSec\u5b89\u5168\u7b56\u7565\uff0c\u7528\u6765\u63a5\u6536\u4e0d\u540cPC\u53d1\u8d77\u8fde\u63a5\uff1a ipsec policy-template template1 1 ike-peer peer1 proposal p1 security acl 3001 ipsec policy mypolicy 1 isakmp template template1 #\u5728Firewall\u7684\u5916\u7f51\u63a5\u53e3\u4e0a\u5e94\u7528IPSec Policy\uff1a interface GigabitEthernet 0/0/2 ipsec policy mypolicy \u5047\u8bbe\u76ee\u524d\u9632\u706b\u5899\u7684\u7f3a\u7701\u57df\u95f4\u5305\u8fc7\u6ee4\u89c4\u5219\u662fdeny any\uff0c\u90a3\u4e48\u6211\u4eec\u8fd8\u9700\u8981\u5728\u9632\u706b\u5899\u4e0a\u914d\u7f6euntrust\u5230local\u7684\u57df\u95f4\u5b89\u5168\u7b56\u7565\uff0c\u4f7f\u5f97Public network\u7684\u7528\u6237\u53d1\u8d77\u7684VPN\u6d41\u91cf\u80fd\u591f\u987a\u5229\u88ab\u9632\u706b\u5899\u5904\u7406\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5728PC\u4e0a\u5b89\u88c5VPN Client\uff08\u6b64\u5904\u4ee5Huawei VPN Client V100R001C02SPC701\u4e3a\u4f8b\uff09\u3002 \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u8fdb\u5165\u4e3b\u754c\u9762\uff0c\u5728\u4e0b\u56fe\u6240\u793a\u7684\u4e3b\u754c\u9762\u4e2d\uff0c\u70b9\u51fb\u65b0\u5efa\u6309\u94ae\uff1a \u8fdb\u5165\u65b0\u5efa\u8fde\u63a5\u5411\u5bfc\uff1a \u5728\u4e0a\u8ff0\u754c\u9762\u4e2d\uff0c\u9009\u62e9\u901a\u8fc7\u8f93\u5165\u53c2\u6570\u521b\u5efa\u8fde\u63a5\uff0c\u7136\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\uff1a \u5728\u4e0a\u8ff0\u754c\u9762\u4e2d\u8f93\u5165LNS\u670d\u52a1\u5668\u7684\u5730\u5740192.168.56.254\uff0c\u4e5f\u5c31\u662f\u9632\u706b\u5899\u7684\u5916\u7f51\u63a5\u53e3\u5730\u5740\uff0c\u4ee5\u53caVPN\u8d26\u53f7\u53ca\u5bc6\u7801\uff0c \u8be5\u8d26\u53f7\u53ca\u5bc6\u7801\u662f\u4f7f\u7528local-user vpdnuser password cipher userpassw123\u547d\u4ee4\u5728\u9632\u706b\u5899\u4e0a\u5b9a\u4e49\u7684\uff0c\u6240\u8f93\u5165\u7684\u5185\u5bb9\u9700\u4e0e\u9632\u706b\u5899\u7684\u914d\u7f6e\u4e00\u81f4\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\uff1a \u5728 \u4e0a \u8ff0 \u754c \u9762 \u4e2d \u8f93 \u5165 L2TP \u53c2\u6570 \uff0c \u5176\u4e2d \u96a7 \u9053 \u9a8c \u8bc1 \u5bc6 \u7801 \u5b57 \u6bb5 \u5bf9 \u5e94 \u9632 \u706b \u5899 \u4e0a tunnel password cipher TunnelPassw123\u547d\u4ee4\u6240\u5b9a\u4e49\u7684\u5bc6\u7801\uff0c\u4e5f\u5c31\u662fTunnelPassw123\u3002\u800c\u9884\u5171\u4eab\u79d8\u94a5\u5219\u5bf9\u5e94pre-shared-key abcde \u547d\u4ee4\u6240\u5b9a\u4e49\u7684\u5bc6\u7801\uff0c\u4e5f\u5c31\u662fabcde\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\uff1a \u5728\u4e0a\u8ff0\u754c\u9762\u4e2d\uff0c\u9009\u62e9\u4f7f\u7528LNS\u670d\u52a1\u5668\u5730\u5740\u3002\u7136\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\uff1a \u6309\u7167\u4e0a\u8ff0\u754c\u9762\u6240\u793a\u586b\u5199\u76f8\u5173\u53c2\u6570\u3002\u70b9\u51fb\u4e0b\u4e00\u6b65\uff0c\u7136\u540e\u5b8c\u6210\u914d\u7f6e\u3002 \u53f3\u952e\u521a\u521b\u5efa\u597d\u7684\u8fde\u63a5\uff0c\u70b9\u51fb\u8fde\u63a5\u6309\u94ae\uff0c\u5f00\u59cbVPN\u62e8\u5165\uff1a \u8fde\u63a5\u6210\u529f\u540e\uff0c\u5ba2\u6237\u5728PC\u4e0a\u67e5\u770b\u5230\u83b7\u53d6\u7684IP\u5730\u5740\uff1a \u5728\u9632\u706b\u5899\u4e0a\u4e5f\u80fd\u67e5\u770b\u5230\u76f8\u5173\u4fe1\u606f\uff1a \u5728\u9632\u706b\u5899\u4e0a\u67e5\u770bIKE SA\uff1a \u5728\u9632\u706b\u5899\u4e0a\u67e5\u770bIPSec SA\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5ba2\u6237\u7aef\u5df2\u7ecf\u80fd\u591f\u6b63\u5e38\u62e8\u5165Firewall\uff0c\u5728PC\u62e8\u53f7\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5e94\u8be5\u80fd\u5728Firewall\u4e0a\u67e5\u770b\u5230\u5982\u4e0b \u4f1a\u8bdd\uff1a \u6ce8\u610f\uff0c\u6b64\u65f6\u867d\u7136PC\u5df2\u7ecf\u6210\u529f\u62e8\u5165\u4e86Firewall\uff0c\u4f46\u662f\u8fd8\u4e0d\u80fd\u591f\u8bbf\u95ee\u5185\u7f51\u8d44\u6e90\uff08\u5047\u8bbe\u5f53\u524d\u9632\u706b\u5899\u7684\u7f3a\u7701\u57df\u95f4\u5305\u8fc7 \u6ee4\u89c4\u5219\u662fdeny any\uff09\u7684\u3002\u5b9e\u9645\u4e0a\uff0c\u62e8\u53f7\u6210\u529f\u540e\uff0cPC\u4e0eFirewall\u4e4b\u95f4\u5c31\u5efa\u7acb\u8d77\u4e00\u6761\u52a0\u5bc6\u7684\u96a7\u9053\uff0c\u4ece\u8fd9\u4e2a\u5c42\u9762\u4e0a\u770b\uff0c\u6211\u4eec\u53ef\u4ee5\u5f62\u8c61\u5730\u5c06PC\u7406\u89e3\u4e3a\u903b\u8f91\u4e0a\u662f\u76f4\u63a5\u8fde\u63a5\u5728Firewall\u4e0a\u7684\uff0c\u800c\u4e14\u5c5e\u4e8einterface Virtual-Template 1 \u8fd9\u4e2a\u63a5\u53e3\u6240\u52a0\u5165\u7684\u5b89\u5168\u57df\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u8ba9PC\u80fd\u591f\u6b63\u5e38\u8bbf\u95ee\u7ad9\u5185\u8d44\u6e90\uff0c\u6211\u4eec\u8fd8\u8981\u5c06Virtual-Template\u653e\u7f6e\u5230\u5b89\u5168\u57df\uff0c\u5e76\u4e14\u914d\u7f6eVirtual-Template\u6240\u5728\u5b89\u5168\u57df\u5230trust\u57df\u7684\u7b56\u7565\uff0c\u4f7f\u5f97VPN\u5ba2\u6237\u7aef\u5728\u62e8\u5165\u6210\u529f\u540e\uff0c\u80fd\u591f\u4f7f\u7528\u6240\u5206\u914d\u7684IP\u5730\u5740\u8bbf\u95ee\u5185\u7f51\u8d44\u6e90\uff1a \u5982\u6b64\u4e00\u6765\uff0cPC\u5373\u53ef\u8bbf\u95ee10.1.1.1\u3002","title":"VPN Client\u5ba2\u6237\u7aef\u901a\u8fc7L2TP over IPSec\u62e8\u5165\u9632\u706b\u5899"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#lan-to-lan-ipsecvpn","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cX\u516c\u53f8\u5b58\u5728\u4e09\u4e2a\u7ad9\u70b9\uff0c\u5176\u4e2d\u7ad9\u70b91\u662f\u4e3b\u7ad9\u70b9\uff0c\u7ad9\u70b92\u53ca3\u662f\u5206\u652f\u7ad9\u70b9\u30023\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u90fd\u901a\u8fc7\u5e7f\u57df\u7f51\u94fe\u8def\u63a5\u5165Internet\u3002\u73b0\u5728\uff0c\u5ba2\u6237\u8981\u6c42\u5728\u7ad9\u70b91\u4e0e\u7ad9\u70b92\u3001\u7ad9\u70b91\u4e0e\u7ad9\u70b93\u4e4b\u95f4\u90e8\u7f72LAN-to-LAN IPSecVPN\uff08\u5982\u56fe\u6240\u793a\uff09\uff0c\u6700\u7ec8\u4f7f\u5f97Server1\u4e0eServer2\u3001Server1\u4e0eServer3\u80fd\u591f\u5b89\u5168\u5730\u4e92\u901a\u3002\u6709\u8da3\u7684\u662f\uff0c\u6bcf\u4e2a\u7ad9\u70b9\u7684Server\u90fd\u4f7f\u7528\u4e86\u91cd\u53e0\u7684\u79c1\u7f51IP\u5730\u5740\uff0c\u4ee5\u56fe\u4e2d\u7684\u670d\u52a1\u5668\u4e3a\u4f8b\uff0c3\u4e2a\u7ad9\u70b9\u7684Server\uff0c\u90fd\u4f7f\u7528192.168.1.1 \u8fd9\u4e2aIP\u5730\u5740\u3002\u663e\u7136\uff0c\u5ba2\u6237\u5e76\u4e0d\u5e0c\u671b\u8c03\u6574\u7f51\u7edc\u7684IP\u7f16\u5740\u4ee5\u4fbf\u9002\u5e94\u65b0\u7684\u9700\u6c42\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u80fd\u4ece\u65b9\u6848\u7684\u89d2\u5ea6\u601d\u8003\u662f\u5426\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002 \u7b80\u5355\u5730\u8bf4\u4e00\u4e0b\u5b9e\u73b0\u601d\u8def\uff1a\u9996\u5148\u5728\u6bcf\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e0a\u90e8\u7f72NAT Server\uff0c\u5c06\u672c\u7ad9\u70b9Server\uff08192.168.1.1\uff09\u6620\u5c04\u5230\u4e00\u4e2a\u516c\u7f51\u5730\u5740\uff0c\u4f8b\u5982\u5728FW1\u4e0a\uff0c\u5c06192.168.1.1\u6620\u5c04\u52301.1.1.1\uff1b\u5728FW2\u4e0a\u5c06192.168.1.1\u6620\u5c04\u52302.2.2.2\uff1b \u5728FW3\u4e0a\u5c06192.168.1.1\u6620\u5c04\u52303.3.3.3\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002\u63a5\u4e0b\u6765\uff0c\u5728FW1\u4e0eFW2\u4e4b\u95f4\u3001FW1\u4e0eFW3\u4e4b\u95f4\u90e8\u7f72 IPSecVPN\u96a7\u9053\u3002\u4ee5FW1\u4e3a\u4f8b\uff0c\u5176\u4e0eFW2\u4e4b\u95f4\u7684IPSecVPN\u96a7\u9053\u7684\u611f\u5174\u8da3\u6d41\u91cf\u662f\u4ece1.1.1.1\u8bbf\u95ee2.2.2.2\u7684\u6d41\u91cf\uff1b \u800cFW2\u4e0eFW1\u4e4b\u95f4\u7684IPSecVPN\u96a7\u9053\u7684\u611f\u5174\u8da3\u6d41\u91cf\u662f\u4ece2.2.2.2\u8bbf\u95ee1.1.1.1\u7684\u6d41\u91cf\uff1b\u540c\u7406\uff0cFW3\u4e0eFW1\u4e4b\u95f4\u7684IPSecVPN\u96a7\u9053\u7684\u611f\u5174\u8da3\u6d41\u91cf\u662f\u4ece3.3.3.3\u8bbf\u95ee1.1.1.1\u7684\u6d41\u91cf\u3002 \u5b8c\u6210IPSecVPN\u53caNAT\u7684\u90e8\u7f72\u540e\uff0c\u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0b\u6570\u636e\u5305\u4ea4\u4e92\u7684\u8fc7\u7a0b\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff09\u3002\u4ee5Server1\u8bbf\u95eeServer2 \u4e3a\u4f8b\uff0c\u8bbf\u95ee\u65f6\u9700\u4f7f\u7528\u76ee\u7684\u5730\u57402.2.2.2\uff0c\u6d41\u91cf\u5230\u8fbeFW1\u540e\uff0c\u5148\u6267\u884cNAT\uff0c\u6e90IP\u5730\u5740\u88ab\u8f6c\u6362\u62101.1.1.1\uff0c\u968f\u540e\u62a5\u6587\u88ab\u8def\u7531\u5230\u51fa\u63a5\u53e3GE0/0/2\uff0c\u78b0\u649e\u5230\u90e8\u7f72\u5728\u51fa\u63a5\u53e3\u4e0a\u7684IPSec Policy\uff0c\u56e0\u4e3a\u6d41\u91cf\u5339\u914dIPSecVPN\u611f\u5174\u8da3\u6d41\u91cf\uff0c\u4ece\u800c\u6570\u636e\u88ab\u52a0\u5bc6\u3001\u54c8\u5e0c\uff0c\u7136\u540e\u5c01\u88c5\u4e00\u5c42\u96a7\u9053\u5934\u90e8\u3002\u5904\u7406\u540e\u7684\u62a5\u6587\u88ab\u53d1\u5f80FW2\u3002FW2\u5c06\u62a5\u6587\u7684\u96a7\u9053\u5934\u90e8\u5265\u9664\uff0c \u8fdb\u884c\u5b8c\u6574\u6027\u6821\u9a8c\u3001\u89e3\u5bc6\uff0c\u5f97\u5230\u660e\u6587\uff0c\u968f\u540e\u5c06\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u57402.2.2.2\u8f6c\u6362\u6210192.168.1.1\uff0c\u6700\u540e\u53d1\u5f80\u672c\u7ad9\u70b9 Server1\u3002Server\u95f4\u7684\u5176\u4ed6\u4e92\u8bbf\u6d41\u91cf\u540c\u7406\u3002 \u672c\u6587\u91cd\u70b9\u5173\u6ce8IPSecVPN\u7684\u914d\u7f6e\uff0c\u9632\u706b\u5899\u7684\u63a5\u53e3\u914d\u7f6e\u3001\u63a5\u53e3\u52a0Zone\u3001\u5b89\u5168\u7b56\u7565\u7b49\u59d1\u4e14\u5ffd\u7565\u3002 FW1\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a FW2\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a FW3\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u4eceServer1 ping Server2\u65f6\uff0c\u53ef\u4ee5\u5728FW1\u4e0a\u770b\u5230\u5982\u4e0bSession\uff1a \u53ef\u4ee5\u5728FW2\u4e0a\u770b\u5230\u5982\u4e0bSession\uff1a \u5176\u4e2desp\u662f\u52a0\u5bc6\u540e\u7684\u62a5\u6587\u3002","title":"\u7ad9\u70b9\u5185\u79c1\u7f51\u5730\u5740\u51b2\u7a81\u65f6\u7684LAN-to-LAN IPSecVPN\u90e8\u7f72"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ngfwvpn-clientl2tp-over-ipsecvpn","text":"\u8fdc\u7a0b\u7528\u6237\u91c7\u7528VPN Client\u8f6f\u4ef6\u901a\u8fc7L2TP over IPSec\u65b9\u5f0f\u63a5\u5165\u603b\u90e8VPN\uff0c\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u62e8\u5165\u5f0fVPN\u5e94\u7528\u3002\u672c\u4f8b\u4e2d\u7684\u9632\u706b\u5899\u4e3aE1000E-N\uff08NGFW\uff09\uff0c\u5e76\u4e14\u8f6f\u4ef6\u7248\u672c\u4e3aV5R1C10\u3002\u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5176\u4e2d\u5916\u90e8PC\u5b89 \u88c5\u4e86HUAWEI VPN Client\u8f6f\u4ef6\uff0c\u8be5PC\u8fde\u63a5\u5230\u4e86\u5916\u90e8\u7f51\u7edc\uff0c\u800c\u4e14\u5b83\u53ef\u4ee5\u901a\u8fc7\u5916\u90e8\u7f51\u7edc\u5230\u8fbe\u9632\u706b\u5899FW\u3002\u73b0\u5728\u7684\u9700\u6c42\u662f\uff1a\u5916\u90e8PC\u901a\u8fc7\u62e8\u53f7\u7684\u65b9\u5f0f\uff0c\u8fde\u63a5\u5230FW\u6240\u4fdd\u62a4\u7684\u5185\u90e8\u7f51\u7edc\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbf\u95ee100.1.1.0/24\u3002 \u672c\u4f8b\u5728FW\u4e0a\u90e8\u7f72L2TP over IPSec\uff0c\u4f7f\u5f97\u5916\u90e8PC\u80fd\u591f\u4f7f\u7528\u6307\u5b9a\u7684\u8d26\u53f7\u62e8\u5165\uff0c\u62e8\u5165\u6210\u529f\u540e\uff0c\u5916\u90e8PC\u5c06\u83b7\u5f97 10.1.1.0~10.1.1.20\u8303\u56f4\u5185\u7684IP\u5730\u5740\uff0c\u5e76\u4e14\u76f4\u63a5\u8bbf\u95ee\u76ee\u6807\u7f51\u6bb5100.1.1.0/24\u3002 \u9632\u706b\u5899FW\uff08\u6ce8\u610f\uff0c\u672c\u4f8b\u4ee5\u8f6f\u4ef6\u7248\u672cV5R1C10\u4e3a\u4f8b\uff0c\u4e0d\u540c\u7684\u8f6f\u4ef6\u7248\u672c\uff0c\u914d\u7f6e\u65b9\u5f0f\u6709\u6240\u4e0d\u540c\uff09\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u4ee5\u4e0a\u662f\u4e00\u4e9b\u57fa\u672c\u914d\u7f6e\uff0c\u63a5\u4e0b\u6765\u5f00\u59cbL2TP Over IPSec\u7684\u914d\u7f6e\uff1a l2tp enable l2tp-group 1 allow l2tp virtual-template 1 remote remoteTunnelName tunnel name lns tunnel authentication tunnel password cipher TunnelPwd123 \u63a5\u4e0b\u6765\u5f00\u59cbIPSec\u7684\u76f8\u5173\u914d\u7f6e\uff1a #\u521b\u5efaACL3000\uff0c\u7528\u4e8e\u5339\u914dL2TP\u6d41\u91cf\uff0c\u8fd9\u4e9b\u6d41\u91cf\u9700\u8981\u53d7IPSec\u4fdd\u62a4\uff08\u52a0\u5bc6\u3001\u9a8c\u8bc1\uff09\uff1a acl 3000 rule permit udp source-port eq 1701 rule permit udp destination-port eq 1701 #\u914d\u7f6eIPSec\u5b89\u5168\u63d0\u8bae\uff1a ipsec proposal tran1 transform esp esp authentication-algorithm sha1 esp encryption-algorithm aes-256 #\u914d\u7f6eIKE\u5b89\u5168\u63d0\u8bae\uff1a ike proposal 10 authentication-method pre-share authentication-algorithm sha1 encryption-algorithm 3des dh group5 #\u914d\u7f6eIKE\u5bf9\u7b49\u4f53\uff1a ike peer a ike-proposal 10 pre-shared-key IPSecPreSKey123 #\u914d\u7f6eIPSec\u7b56\u7565\u6a21\u677f\uff0c\u540d\u79f0\u53ef\u81ea\u5b9a\u4e49\uff0c\u6b64\u5904\u4e3apolicy_temp\uff0c\u5728\u5176\u4e2d\u5173\u8054ACL3000\u3001IPSec\u5b89\u5168\u63d0\u8bae\u4ee5\u53ca\u5bf9\u7b49\u4f53\uff1a ipsec policy-template policy_temp 1 security acl 3000 proposal tran1 ike-peer a #\u521b\u5efaIPSec\u7b56\u7565mypolicy\uff0c\u5728\u5e8f\u53f710\uff08\u5e8f\u53f7\u53ef\u81ea\u5b9a\u4e49\uff09\u4e2d\u6307\u5b9aIPSec\u7b56\u7565\u6a21\u677f\uff1a ipsec policy mypolicy 10 isakmp template policy_temp \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u5916\u90e8PC\u5b89\u88c5VPN\u5ba2\u6237\u7aef\u8f6f\u4ef6\uff0c\u6b64\u5904\u4ee5Secoway VPN Client\u8f6f\u4ef6\u4e3a\u4f8b\u3002\u5728VPN Client\u8f6f\u4ef6\u7684\u4e3b\u754c\u9762\u4e2d\uff0c\u70b9\u51fb\u201c\u65b0\u5efa\u201d\u6309\u94ae\uff1a \u5f39\u51fa\u5982\u4e0b\u754c\u9762\uff1a \u5728\u4ee5\u4e0a\u5f39\u51fa\u7684\u754c\u9762\u4e2d\uff0c\u9009\u62e9\u201c\u901a\u8fc7\u8f93\u5165\u53c2\u6570\u521b\u5efa\u8fde\u63a5\u201d\uff0c\u5f39\u51fa\u5982\u4e0b\u754c\u9762\uff1a \u5728\u4ee5\u4e0a\u754c\u9762\u4e2d\uff0cLNS\u670d\u52a1\u5668\u5730\u5740\u4e3a\u9632\u706b\u5899\u5916\u7f51\u63a5\u53e3\u7684IP\u5730\u5740\uff0c\u7528\u6237\u540d\u53ca\u5bc6\u7801\u5219\u6309\u7167\u6240\u914d\u7f6e\u7684\u8f93\u5165\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u201c\u4e0b\u4e00\u6b65\u201d\uff1a \u5728\u4ee5\u4e0a\u754c\u9762\u4e2d\uff0c\u6309\u56fe\u793a\u8f93\u5165\u96a7\u9053\u540d\u79f0\u3001\u96a7\u9053\u9a8c\u8bc1\u5bc6\u7801\u4ee5\u53caIPSec\u9884\u5171\u4eab\u5bc6\u7801\uff0c\u5728\u672c\u4f8b\u4e2d\uff0c\u8fd9\u4e9b\u5bc6\u7801\u6211\u90fd\u7279\u610f\u8bbe\u7f6e\u6210\u4e0e\u5176\u529f\u80fd\u6709\u4e00\u5b9a\u5173\u8054\u6027\u7684\u5b57\u7b26\u4e32\uff0c\u4ee5\u4fbf\u5e2e\u52a9\u8bfb\u8005\u7406\u6e05\u5bc6\u7801\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u201c\u4e0b\u4e00\u6b65\u201d\uff1a \u5728\u4ee5\u4e0a\u754c\u9762\u4e2d\uff0c\u9009\u62e9\u201c\u4f7f\u7528LNS\u670d\u52a1\u5668\u5730\u5740\u201d\uff0c \u5b8c\u6210\u540e\u70b9\u51fb\u201c\u4e0b\u4e00\u6b65\u201d\uff1a \u5728\u4ee5\u4e0a\u754c\u9762\u4e2d\uff0c\u9009\u62e9\u4e0e\u9632\u706b\u5899FW\u6240\u5339\u914d\u7684IKE\u5b89\u5168\u63d0\u8bae\u3001IPSec\u5b89\u5168\u63d0\u8bae\u3002\u9700\u6ce8\u610f\u7684\u662f\uff0cVPN Client\u8f6f\u4ef6\u6240\u652f\u6301\u7684\u52a0\u5bc6\u3001\u9a8c\u8bc1\u7b97\u6cd5\u53ef\u80fd\u4f1a\u6bd4\u9632\u706b\u5899\u6240\u652f\u6301\u7684\u66f4\u5c11\uff0c\u4e3a\u4e86\u786e\u4fddVPN\u62e8\u53f7\u6210\u529f\uff0c\u9632\u706b\u5899\u8981\u5bf9\u5e94\u5730\u8fc1\u5c31\u4e00\u4e0bVPN Client\uff0c\u9009\u62e9\u5bf9\u65b9\u652f\u6301\u7684\u7b97\u6cd5\u3002\u5b8c\u6210\u540e\u70b9\u51fb\u201c\u4e0b\u4e00\u6b65\u201d\uff1a \u5728\u4ee5\u4e0a\u754c\u9762\u4e2d\uff0c\u70b9\u51fb\u201c\u5b8c\u6210\u201d\uff0cVPN\u8fde\u63a5\u5c31\u521b\u5efa\u597d\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u4e3b\u754c\u9762\u4e2d\u770b\u5230\u521b\u5efa\u597d\u7684VPN\u8fde\u63a5\uff0c\u6b64\u65f6\u53cc\u51fb\u8be5\u8fde\u63a5\u5373\u53ef\u89e6\u53d1VPN\u62e8\u53f7\u3002\u7f3a\u7701\u65f6\uff0c\u7528\u6237VPN\u62e8\u53f7\u6210\u529f\u540e\uff0c\u5728\u903b\u8f91\u4e0a\u4fbf\u4f1a\u88ab\u8ba4\u4e3a\u4e0e\u9632\u706b\u5899\u76f4\u8fde\uff0c\u5e76\u4e14\u53ea\u80fd\u8bbf\u95ee\u9632\u706b\u5899\u6240\u4fdd\u62a4\u7684\u5185\u90e8\u7f51\u7edc\u3002 \u2018 \u5982\u679c\u5e0c\u671b\u5ba2\u6237\u7aef\u5728\u62e8\u5165VPN\u4e4b\u540e\uff0c\u9664\u4e86\u53ef\u4ee5\u8bbf\u95ee\u5185\u7f51100.1.1.0/24\u7f51\u6bb5\uff0c\u540c\u65f6\u8fd8\u53ef\u4ee5\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\uff08\u4f8b\u5982 Internet\uff09\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728VPN Client\u8f6f\u4ef6\u7684\u754c\u9762\u4e0a\u53f3\u51fb\u672c\u6b21\u521b\u5efa\u7684\u201c\u6211\u7684\u8fde\u63a5\u201d\u56fe\u6807\uff0c\u9009\u62e9\u201c\u5c5e\u6027\u201d\uff0c\u5f39\u51fa\u5982\u4e0b\u7a97\u53e3\uff1a \u5728\u4e0a\u8ff0\u7a97\u53e3\u4e2d\uff0c\u52fe\u9009\u201c\u8fde\u63a5\u6210\u529f\u540e\u5141\u8bb8\u8bbf\u95eeInternet\u201d\uff0c\u51fa\u73b0\u201c\u8def\u7531\u8bbe\u7f6e\u201d\u9009\u9879\u5361\uff0c\u70b9\u51fb\u8be5\u9009\u9879\u5361\uff0c\u5728\u8be5\u9009\u9879\u5361\u7684\u754c\u9762\u4e2d\u70b9\u51fb\u201c\u6dfb\u52a0\u201d\u6309\u94ae\uff0c\u6309\u5982\u4e0b\u8f93\u5165\uff1a \u5b8c\u6210\u4e0a\u8ff0\u64cd\u4f5c\u540e\uff0c\u91cd\u65b0\u62e8\u53f7\u5373\u53ef\u3002\u4e0a\u8ff0\u64cd\u4f5c\u7684\u76ee\u7684\u662f\u8ba9VPN Client\u8f6f\u4ef6\u62e8\u53f7\u6210\u529f\u540e\uff0c\u4e0d\u5728VPN\u865a\u62df\u7f51\u5361\u4e0a\u8bbe\u7f6e\u9ed8\u8ba4\u7f51\u5173\uff0c\u800c\u662f\u5728\u5ba2\u6237\u7aefPC\u7684\u8def\u7531\u8868\u4e2d\u5199\u5165\u4e00\u6761\u5230\u8fbe100.1.1.0/24\u7684\u8def\u7531\uff0c\u5e76\u5c06\u8be5\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u6307\u5b9a\u4e3a10.1.1.1\uff08\u9632\u706b\u5899Virtual-Template 1\u63a5\u53e3\u7684IP\u5730\u5740\uff09\u3001\u51fa\u63a5\u53e3\u4e3aVPN\u865a\u62df\u7f51\u5361\u3002 \u5982\u6b64\u4e00\u6765\uff0c\u5f53VPN\u5ba2\u6237\u7aef\u8bbf\u95eeInternet\u65f6\uff0c\u6d41\u91cf\u53ef\u4ee5\u4ece\u7269\u7406\u7f51\u5361\u51fa\u53bb\uff0c\u800c\u5f53\u5ba2\u6237\u7aef\u8bbf\u95ee100.1.1.0/24\u65f6\uff0c\u6d41\u91cf\u4f1a\u4eceVPN\u865a\u62df\u7f51\u5361\u51fa\u53bb\uff0c\u5e76\u8fdb\u5165L2TP\u96a7\u9053\u3001\u88ab\u52a0\u5bc6\u540e\u9001\u5f80\u9632\u706b\u5899\u3002 \u62e8\u53f7\u6210\u529f\u540e\uff0c\u5ba2\u6237\u7aef\u663e\u793a\u5982\u4e0b\uff1a \u5728\u9632\u706b\u5899\u4e0a\u67e5\u770bL2TP\u96a7\u9053\uff1a 1\uff09\u672c\u6848\u4f8b\u53ef\u5728eNSP\u4e2d\u5b8c\u6210\uff0c\u9700\u5728eNSP\u4e2d\u914d\u7f6eCloud\uff0c\u5e76\u4e0e\u7535\u8111\u7684\u7f51\u5361\u8fdb\u884c\u6865\u63a5\u3002 2\uff09\u5728\u672c\u4f8b\u4e2d\uff0cCoreSwitch\u5fc5\u987b\u62e5\u6709\u5230\u8fbe10.1.1.10~10.1.1.20\u8fd9\u4e9bIP\u5730\u5740\u6240\u5728\u7f51\u6bb5\u7684\u8def\u7531\uff0c\u5e76\u4e14\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u9700\u4e3a\u9632\u706b\u5899\u3002\u6700\u7b80\u5355\u7684\u65b9\u5f0f\uff0c\u5373\u5728CoreSwitch\u4e0a\u914d\u7f6e\u5230\u8fbe10.1.1.0/24\u7684\u9759\u6001\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3aFW\u3002","title":"NGFW:\u63a5\u5165\u7528\u6237\u91c7\u7528VPN Client\u8f6f\u4ef6\u901a\u8fc7L2TP over IPSec\u65b9\u5f0f\u63a5\u5165\u603b\u90e8VPN"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#1ngfwospf","text":"","title":"\u914d\u7f6e\u6848\u4f8b1\uff1aNGFW\u53cc\u673a\u4e3b\u5907\u573a\u666f\u4e0b\u91c7\u7528OSPF\u8fde\u63a5\u5916\u90e8\u7f51\u7edc\u65f6\u90e8\u7f72"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipsecvpn_2","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u4e24\u4e2a\u7ad9\u70b9\u7684\u7f51\u7edc\u8bbe\u5907\u901a\u8fc7\u4e2d\u95f4\u7684\u5916\u90e8\u7f51\u7edc\u8fdb\u884c\u5bf9\u63a5\u3002NGFW1\u53caNGFW2\uff08E1000E- N\uff0c\u8f6f\u4ef6\u7248\u672c\u4e3aV1R1C30\uff09\u662f\u7ad9\u70b91\u7684\u8bbe\u5907\uff0c\u800cFW1\u53caFW2\uff08E1000E-X\uff09\u662f\u7ad9\u70b92\u7684\u8bbe\u5907\u3002\u4e24\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u901a\u8fc7\u70b9\u5bf9\u70b9\u94fe\u8def\u3001\u91c7\u7528OSPF\u8def\u7531\u534f\u8bae\u4e0e\u5916\u90e8\u5bf9\u63a5\u3002 \u73b0\u5728\uff0c\u6211\u4eec\u8981\u5728\u4e24\u4e2a\u7ad9\u70b9\u7684\u9632\u706b\u5899\u4e4b\u95f4\u90e8\u7f72Site-to-Site IPSecVPN\uff0c\u4f7f\u5f97\u4e24\u5730\u5185\u7f51\u7684\u7528\u6237\uff08\u56fe\u4e2d\u7684PC1\u4e0e PC2\uff09\u80fd\u591f\u5b89\u5168\u5730\u901a\u4fe1\u3001\u80fd\u591f\u91c7\u7528\u5b9e\u9645\u5185\u7f51IP\u5730\u5740\u8fdb\u884c\u4e92\u901a\u3002\u7f51\u7edc\u6b63\u5e38\u65f6\uff0cNGFW1\u662f\u7ad9\u70b91\u7684\u4e3b\u7528\u5899\uff0c\u800c FW1\u5219\u662f\u7ad9\u70b92\u7684\u4e3b\u7528\u5899\uff0c\u4e24\u5730\u5185\u7f51\u7684\u4e92\u901a\u6d41\u91cf\u901a\u8fc7\u4e24\u53f0\u4e3b\u7528\u5899\u4e4b\u95f4\u5efa\u7acb\u7684IPSecVPN\u96a7\u9053\u8fdb\u884c\u4ea4\u4e92\u3002\u5f53 NGFW1\u6216FW1\uff08\u6216\u5176\u5916\u7f51\u7ebf\u8def\uff09\u53d1\u751f\u6545\u969c\u65f6\uff0c\u4e24\u5730\u5185\u7f51\u4e92\u8bbf\u7684\u6d41\u91cf\u53ef\u4ee5\u5e73\u6ed1\u5730\u5207\u6362\u3002 \u8fd9\u4e2a\u65b9\u6848\u7684\u7279\u70b9\u5728\u4e8e\uff0c\u4ee5\u53cc\u673a\u4e3b\u5907\u65b9\u5f0f\u5de5\u4f5c\u7684\u9632\u706b\u5899\u5bf9\u5916\u4e0e\u8def\u7531\u8bbe\u5907\u5bf9\u63a5\uff0c\u800c\u4e14\u8fd0\u884c\u4e86\u52a8\u6001\u8def\u7531\u534f\u8bae \uff08OSPF\uff09\uff0c\u6211\u4eec\u8981\u5728\u8fd9\u4e2a\u573a\u666f\u4e2d\u90e8\u7f72IPSecVPN\uff0c\u8981\u6c42VPN\u96a7\u9053\u5728\u4e3b\u5907\u5899\u4e4b\u95f4\u80fd\u591f\u5b9e\u73b0\u9ad8\u53ef\u9760\u6027\u3002\u5b9e\u9645\u4e0a\u8981\u5b9e\u73b0\u8fd9\u4e2a\u9700\u6c42\uff0c\u65b9\u6848\u5b58\u5728\u51e0\u79cd\uff0c\u672c\u6587\u5c06\u4ecb\u7ecd\u57fa\u4e8eTunnel\u63a5\u53e3\u5efa\u7acbIPSecVPN\u96a7\u9053\u7684\u65b9\u6848\u3002 \u5728NGFW1\u53caNGFW2\u4e0a\u5404\u521b\u5efa\u4e00\u4e2aTunnel0\u63a5\u53e3\uff0c\u4e3a\u8be5\u63a5\u53e3\u5206\u914d\u76f8\u540c\u7684IP\u5730\u5740\uff08100.1.1.1/32\uff09\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u4e24\u4e2a\u9632\u706b\u5899\u5bf9\u5916\u53ef\u5448\u73b0\u51fa\u4e00\u4e2aIP\u5730\u5740\u3002\u5f53\u7136\u8fd9\u4e2aIP\u5730\u5740\u9700\u662f\u5916\u90e8\u7f51\u7edc\u4e2d\u8def\u7531\u53ef\u8fbe\u7684\uff0cNGFW1\u53ca NGFW2\u5c06\u8be5\u5730\u5740\u901a\u8fc7OSPF\u901a\u544a\u5230\u5916\u90e8\u7f51\u7edc\uff08NGFW\u4f1a\u81ea\u52a8\u5c06\u5907\u5899\u901a\u544a\u7684\u8def\u7531\u7684Cost\u8c03\u5927\uff0c\u4f7f\u5f97\u8bbf\u95ee 100.1.1.1/32\u7684\u6d41\u91cf\u5230\u8fbe\u4e3b\u5899\uff09\u3002\u540c\u7406\u7ad9\u70b92\u7684FW1\u53caFW2\u5404\u81ea\u521b\u5efa\u4e00\u4e2aTunnel0\u63a5\u53e3\uff0c\u4e14\u5206\u914d\u76f8\u540c\u7684IP\u5730\u5740\uff08100.2.2.2/32\uff09\uff0c\u7136\u540e\u90fd\u5c06\u8be5\u5730\u5740\u901a\u544a\u5230OSPF\u7f51\u7edc\u3002\u968f\u540e\u4e24\u5bf9\u9632\u706b\u5899\u90e8\u7f72\u57fa\u4e8eTunnel0\u63a5\u53e3\u7684 IPSecVPN\u96a7\u9053\u3002 NGFW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a firewall zone untrust add interface GigabitEthernet 1/0/7 firewall zone name ha set priority 99 add interface GigabitEthernet 1/0/6 hrp interface GigabitEthernet 1/0/6 hrp mirror session enable hrp ospf-cost adjust-enable hrp enable ospf 1 router-id 1.1.1.1 area 0 network 11.1.1.1 0.0.0.0 quit quit # \u5c06\u76f4\u8fde\u8def\u7531100.1.1.1/32\u901a\u544a\u5230OSPF\uff1a ip ip-prefix 1 permit 100.1.1.1 32 route-policy Direct_to_OSPF permit node 10 if-match ip-prefix 1 quit ospf 1 import-route direct route-policy Direct_to_OSPF quit # IPSecVPN\u90e8\u7f72\uff1a acl number 3000 rule permit ip source 192.168.1.0 0.0.0.255 destination 192.168.2.0 0.0.0.255 quit ike proposal 1 authentication-method pre-share encryption-algorithm 3des-cbc authentication-algorithm sha2-256 integrity-algorithm hmac-sha1-96 dh group2 quit ike peer e1000ex ike-proposal 1 pre-shared-key Huawei123 remote-address 100.2.2.2 //100.2.2.2\u662f\u5bf9\u7aef\u7ad9\u70b9\u9632\u706b\u5899\u7684Tunnel0\u63a5\u53e3\u5730\u5740 undo version 1 //\u4f7f\u7528IKE v2\u5bf9\u63a5 quit ipsec proposal myset transform esp esp authentication-algorithm sha1 esp encryption-algorithm 3des quit ipsec policy mypolicy 1 isakmp security acl 3000 ike-peer e1000ex proposal myset local-address 100.1.1.1 //100.1.1.1\u662f\u672c\u9632\u706b\u5899\u7684Tunnel0\u63a5\u53e3\u5730\u5740 quit int tunnel 0 ip address 100.1.1.1 32 //\u4e3aTunnel0\u63a5\u53e3\u914d\u7f6eIP\u5730\u5740 tunnel-protocol ipsec //Tunnel\u63a5\u53e3\u7684\u5c01\u88c5\u6a21\u5f0f\u4e3aIPSec ipsec policy mypolicy //\u5c06IPSec\u7b56\u7565\u5e94\u7528\u5728Tunnel\u63a5\u53e3\u4e0a firewall zone untrust add interface Tunnel 0 //\u6ce8\u610f\uff0c\u5fc5\u987b\u5c06Tunnel0\u63a5\u53e3\u52a0\u5165\u5b89\u5168\u533a\u57df quit ip route-static 192.168.2.0 24 tunnel 0 //\u8fd9\u6761\u8def\u7531\u975e\u5e38\u5173\u952e\uff0c\u5b83\u7528\u4e8e\u5c06\u672c\u5730\u7528\u6237\u8bbf\u95ee\u5bf9\u7aef\u7ad9\u70b9\u5185\u7f51\u7528\u6237\u7684 \u6d41\u91cf\u7275\u5f15\u5230Tunne0\u63a5\u53e3\uff0c\u800cTunnel0\u63a5\u53e3\u5219\u662fIPSecVPN\u96a7\u9053\u7684\u7aef\u70b9 # \u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff0c\u6b64\u5904\u6709\u4e24\u79cd\u5b89\u5168\u7b56\u7565\u9700\u8981\u5173\u6ce8\uff0c1\u662f\u5141\u8bb8\u672c\u9632\u706b\u5899\u4e0e\u5bf9\u7aef\u7ad9\u70b9\u9632\u706b\u5899\u4ea4\u4e92\u7528\u4e8e\u534f\u5546IPSecVPN\u96a7\u9053\u7684\u76f8\u5173\u62a5\u6587\u7684\u7b56\u7565\uff0c2\u662f\u5141\u8bb8\u672c\u5730\u5185\u7f51\u7528\u6237\u4e0e\u5bf9\u7aef\u5185\u7f51\u7528\u6237\u4e92\u8bbf\u7684\u7b56\u7565\uff1a security-policy rule name IPsecVPN_From_Local source-zone local destination-zone untrust NGFW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u7ad9\u70b92\u7684\u9632\u706b\u5899FW1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a firewall zone trust add interface GigabitEthernet 0/0/1 firewall zone untrust add interface GigabitEthernet 0/0/8 firewall zone name ha set priority 99 add interface GigabitEthernet 0/0/6 hrp interface GigabitEthernet 0/0/6 hrp mirror session enable hrp ospf-cost adjust-enable hrp enable ospf 1 router-id 3.3.3.3 area 0 network 13.1.1.1 0.0.0.0 quit quit # ip ip-prefix 1 permit 100.2.2.2 32 route-policy Direct_to_OSPF permit node 10 if-match ip-prefix 1 quit ospf 1 import-route direct route-policy Direct_to_OSPF quit # IPSecVPN\u90e8\u7f72\uff1a acl number 3000 rule permit ip source 192.168.2.0 0.0.0.255 destination 192.168.1.0 0.0.0.255 quit ike proposal 1 authentication-method pre-share encryption-algorithm 3des-cbc integrity-algorithm hmac-sha1-96 dh group2 quit ike peer ngfw ike-proposal 1 pre-shared-key Huawei123 remote-address 100.1.1.1 undo version 1 quit ipsec proposal myset transform esp esp authentication-algorithm sha1 esp encryption-algorithm 3des quit ipsec policy mypolicy 1 isakmp security acl 3000 ike-peer ngfw proposal myset local-address 100.2.2.2 quit int tunnel 0 ip address 100.2.2.2 32 tunnel-protocol ipsec ipsec policy mypolicy firewall zone untrust add interface Tunnel 0 quit ip route-static 192.168.1.0 24 tunnel 0 # \u90e8\u7f72\u5b89\u5168\u7b56\u7565\uff1a policy interzone local untrust inbound policy 10 action permit policy source 100.1.1.1 0 policy destination 100.2.2.2 0 policy interzone local untrust outbound policy 10 FW2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5f53PC1\u4e0ePC2\u5f00\u59cb\u9996\u6b21\u4e92\u8bbf\u65f6\uff0c\u6d41\u91cf\u5c06\u89e6\u53d1\u9632\u706b\u5899\u8fdb\u884cIPSecVPN\u96a7\u9053\u534f\u5546\uff0c\u96a7\u9053\u5efa\u7acb\u540e\uff0cPC1 \u4e0ePC2\u5373\u53ef\u5b9e\u73b0\u76f8\u4e92\u901a\u4fe1\u3002\u6b64\u65f6\u4ee5NGFW1\u4e3a\u4f8b\uff0c\u67e5\u770bIKE SA\uff1a \u5173\u952e\u662f\u67e5\u770bIPSec SA\uff1a \u5f53\u7f51\u7edc\u6b63\u5e38\u65f6\uff0c\u7ad9\u70b9\u95f4\u4e92\u8bbf\u6d41\u91cf\u7684\u4ea4\u4e92\u8fc7\u7a0b\uff0c\u4ee5PC1\u8bbf\u95eePC2\u4e3a\u4f8b\uff0c\u62a5\u6587\u88abPC1\u9001\u5230\u7f51\u5173\uff0c\u4e5f\u5c31\u662fNGFW1\uff0c \u56e0\u4e3a\u5b83\u662f\u6b64\u65f6\u7684\u4e3b\u5899\uff0c\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\u662f192.168.2.222\uff0c\u4e5f\u5c31\u662fPC2\u7684\u5730\u5740\u3002NGFW1\u67e5\u8be2\u81ea\u5df1\u7684\u8def\u7531\u8868\uff0c\u53d1\u73b0\u9700\u8981\u5c06\u62a5\u6587\u9001\u81f3Tunnel0\u63a5\u53e3\uff0c\u56e0\u6b64\u5224\u65ad\u62a5\u6587\u4eceTrust\u533a\u57df\u8fdb\u3001Untrust\u533a\u57df\u51fa\uff0c\u7136\u540e\u68c0\u67e5\u5b89\u5168\u7b56\u7565\uff0c\u53d1\u73b0\u62a5\u6587\u88ab\u5141\u8bb8\u901a\u884c\u3002\u7531\u4e8eTunnel0\u63a5\u53e3\u7684\u5c01\u88c5\u7c7b\u578b\u4e3aIPSec\uff0c\u52a0\u4e0a\u8be5\u6d41\u91cf\u6ee1\u8db3ACL3000\uff08IPSecVPN\u611f\u5174\u8da3\u7684\u6570\u636e\u6d41\u91cf\uff09\u7684\u89c4\u5219\uff0c\u56e0\u6b64NGFW1\u5728\u672c\u5730\u67e5\u8be2IPSec SA\uff0c\u7136\u540e\u5c06\u6d41\u91cf\u8fdb\u884c\u52a0\u5bc6\u7b49\u64cd\u4f5c\uff0c\u518d\u5c01\u88c5\u4e00\u4e2a\u65b0\u7684IP\u5934\u90e8\uff0c\u8be5IP\u5934\u90e8\u7684\u6e90\u5730\u5740\u4e3a100.1.1.1\uff0c\u76ee\u7684\u5730\u5740\u4e3a100.2.2.2\u3002NGFW1\u5c06\u5904\u7406\u8fc7\u7684\u62a5\u6587\u8f6c\u53d1\u5230\u5916\u90e8\u7f51\u7edc\u3002\u5916\u90e8\u7f51\u7edc\u5c06\u62a5\u6587\u8def\u7531\u5230FW1\uff0c\u7531\u540e\u8005\u505a\u5b8c\u6574\u6027\u6821\u9a8c\u3001\u89e3\u5bc6\u7b49\u64cd\u4f5c\uff0c\u6700\u7ec8\u5c06\u539f\u59cb\u62a5\u6587\u8f6c\u53d1\u7ed9PC2\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5f53NGFW1\u8fde\u63a5\u5916\u7f51\u7684\u8fde\u63a5\u53d1\u751f\u6545\u969c\u65f6\uff0c\u7acb\u5373\u53d1\u751f\u4e3b\u5907\u5207\u6362\uff0c\u6d41\u91cf\u88ab\u5438\u5f15\u5230NGFW2\uff0c\u6b64\u65f6\u7531NGFW2\u5df2\u7ecf\u62e5\u6709\u4e86\u4e3b\u5899\u6b64\u524d\u534f\u5546\u597d\u7684IPSec SA\uff0c\u56e0\u6b64\u53ef\u4ee5\u7acb\u5373\u5c06\u6d41\u91cf\u8fdb\u884c\u52a0\u5bc6\u7b49\u5904\u7406\uff0c\u7136\u540e\u4ece\u96a7\u9053\u8f6c\u53d1\u51fa\u53bb\uff1a \u4ece\u5b9e\u5730\u6d4b\u8bd5\u7684\u7ed3\u679c\u770b\uff0c\u5728PC1\u6301\u7eedping PC2\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u751f\u4e0a\u8ff0\u6545\u969c\u65f6\uff0c\u4ec5\u4ec5\u4f1a\u4e22\u59312\u4e2aICMP\u5305\uff0c\u968f\u540e\u901a\u4fe1\u5373\u53ef\u6062\u590d\u6b63\u5e38\u3002","title":"IPSecVPN"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_227","text":"SNMP","title":"\u7f51\u7edc\u7ba1\u7406"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_228","text":"\u5047\u8bbe\u4f60\u4f5c\u4e3a\u4e00\u4e2a\u7f51\u7edc\u7684\u7ba1\u7406\u5458\uff0c\u8981\u5b9e\u73b0\u5bf9\u7f51\u7edc\u7684\u7ba1\u7406\uff0c\u8981\u77e5\u9053\u6bcf\u53f0\u7f51\u7edc\u8bbe\u5907\u7684\u8fd0\u884c\u72b6\u51b5\uff0c\u5e76\u4e14\u5728\u7f51\u7edc\u8bbe\u5907\u53d1\u751f\u4e00\u4e9b\u5173\u952e\u6027\u4e8b\u4ef6\u7684\u65f6\u5019\u7b2c\u4e00\u65f6\u95f4\u6355\u6349\u5230\uff0c\u8be5\u5982\u4f55\u5b9e\u73b0\u5462\uff1f\u8fd9\u91cc\u5c31\u8981\u7528\u5230SNMP\uff08Simple Network Management Protocol\uff09\u4e86\u3002 \u968f\u7740\u7f51\u7edc\u4e1a\u52a1\u7684\u65e5\u76ca\u53d1\u5c55\uff0c\u73b0\u6709\u7684\u7f51\u7edc\u4e2d\uff0c\u8bbe\u5907\u6570\u91cf\u65e5\u76ca\u5e9e\u5927\uff0c\u4e14\u8fd9\u4e9b\u8bbe\u5907\u4e0e\u7f51\u7edc\u7ba1\u7406\u5458\u6240\u5728\u7684\u4e2d\u5fc3\u673a\u623f\u8ddd\u79bb\u8f83\u8fdc\u3002\u5f53\u8fd9\u4e9b\u8bbe\u5907\u53d1\u751f\u6545\u969c\u65f6\uff0c\u5982\u679c\u8bbe\u5907\u65e0\u6cd5\u4e3b\u52a8\u4e0a\u62a5\u6545\u969c\uff0c\u5bfc\u81f4\u7f51\u7edc\u7ba1\u7406\u5458\u65e0\u6cd5\u53ca\u65f6\u611f\u77e5\u3001\u53ca\u65f6\u5b9a\u4f4d\u548c\u6392\u9664\u6545\u969c\uff0c\u90a3\u4e48\u5c06\u5bfc\u81f4\u7f51\u7edc\u7684\u7ef4\u62a4\u6548\u7387\u964d\u4f4e\uff0c\u7ef4\u62a4\u5de5\u4f5c\u91cf\u5927\u5927\u589e\u52a0\u3002 \u5229\u7528SNMP\u7b80\u5355\u7f51\u7edc\u7ba1\u7406\u534f\u8bae\uff0c\u7f51\u7ba1\u670d\u52a1\u5668\u53ef\u4ee5\u8fdc\u7a0b\u8be2\u95ee\u8bbe\u5907\u7684\u72b6\u6001\uff0c\u540c\u6837\u8bbe\u5907\u4e5f\u80fd\u591f\u5728\u7279\u5b9a\u7c7b\u578b\u7684\u4e8b\u4ef6\u53d1\u751f\u65f6\u5411\u7f51\u7edc\u7ba1\u7406\u5de5\u4f5c\u7ad9\u53d1\u51fa\u8b66\u544a\u3002SNMP\u662f\u89c4\u5b9a\u7f51\u7ba1\u7ad9\u548c\u8bbe\u5907\u4e4b\u95f4\u5982\u4f55\u4f20\u9012\u7ba1\u7406\u4fe1\u606f\u7684\u5e94\u7528\u5c42\u534f\u8bae\u3002SNMP\u5b9a\u4e49\u4e86\u7f51\u7ba1\u7ba1\u7406\u8bbe\u5907\u7684\u51e0\u79cd\u64cd\u4f5c\uff0c\u4ee5\u53ca\u8bbe\u5907\u6545\u969c\u65f6\u80fd\u5411\u7f51\u7ba1\u4e3b\u52a8\u53d1\u9001\u544a\u8b66\u3002 \u7f51\u7ba1\u4f7f\u7528SNMP\u534f\u8bae\u7ba1\u7406\u8bbe\u5907\u65f6\uff0c\u5b58\u5728\u7f51\u7ba1\u7ad9\u3001Agent\u548c\u88ab\u7ba1\u7406\u8bbe\u5907\u4e09\u4e2a\u89d2\u8272\u3002\u5173\u4e8e\u89d2\u8272\u3001MIB\u548c\u64cd\u4f5c\u7684\u5b9a\u4e49\u548c\u4f5c\u7528\u8bf7\u53c2\u8003\u4e0b\u9762\u7684\u5177\u4f53\u5185\u5bb9\u3002","title":"\u6280\u672f\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#snmp","text":"SNMP\uff08Simple Network Management Protocol\uff0c\u7b80\u5355\u7f51\u7edc\u7ba1\u7406\u534f\u8bae\uff09\u662f\u5e7f\u6cdb\u7528\u4e8eTCP/IP\u7f51\u7edc\u7684\u7f51\u7edc\u7ba1\u7406\u6807\u51c6\u534f\u8bae\uff0c\u662f\u4e00\u4e2a\u516c\u6709\u7684\u6807\u51c6\u3002SNMP\u63d0\u4f9b\u4e86\u4e00\u79cd\u901a\u8fc7\u8fd0\u884c\u7f51\u7edc\u7ba1\u7406\u8f6f\u4ef6\u7684\u4e2d\u5fc3\u8ba1\u7b97\u673a\uff08\u5373\u7f51\u7edc\u7ba1\u7406\u5de5\u4f5c\u7ad9NMS\uff09\u6765\u7ba1\u7406\u7f51\u5143\u7684\u65b9\u6cd5\u3002\u5171\u6709\u4e09\u4e2a\u7248\u672cSNMPv1\u3001SNMPv2c\u548cSNMPv3\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\u9009\u62e9\u540c\u65f6\u914d\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a\u7248\u672c\u3002","title":"SNMP\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#snmp_1","text":"**\u7f51\u7ba1\u7ad9\uff08Network Management Station\uff09\uff1a**\u5411\u88ab\u7ba1\u7406\u8bbe\u5907\u53d1\u9001\u5404\u79cd\u67e5\u8be2\u62a5\u6587\uff0c\u4ee5\u53ca\u63a5\u6536\u88ab\u7ba1\u7406\u8bbe\u5907\u53d1\u9001\u7684\u544a\u8b66\u3002\u5728\u5b9e\u9645\u7684\u7f51\u7edc\u73af\u5883\u4e2d\u5c31\u662f\u5b89\u88c5\u4e86\u7f51\u7ba1\u8f6f\u4ef6\u7684\u670d\u52a1\u5668\u3002 **\u88ab\u7ba1\u7406\u8bbe\u5907\uff08Devices\uff09\uff1a**\u4e5f\u5c31\u662f\u7f51\u7edc\u4e2d\u7684\u5404\u79cd\u63a5\u53d7\u7f51\u7ba1\u7684\u8bbe\u5907\uff0c\u5e38\u89c1\u7684\u5982\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u3001\u9632\u706b\u5899\u4ee5\u53ca\u5176\u4ed6\u652f\u6301SNMP\u7ba1\u7406\u7684\u8bbe\u5907\u3002 **\u4ee3\u7406\uff08Agent\uff09\uff1a**\u9a7b\u7559\u5728\u88ab\u7ba1\u7406\u8bbe\u5907\u4e0a\u7684\u4e00\u4e2a\u8fdb\u7a0b\u3002Agent\u7684\u4f5c\u7528\u5982\u4e0b\u3002 \u63a5\u6536\u3001\u89e3\u6790\u6765\u81ea\u7f51\u7ba1\u7ad9\u7684\u67e5\u8be2\u62a5\u6587\u3002 \u6839\u636e\u62a5\u6587\u7c7b\u578b\u5bf9\u7ba1\u7406\u53d8\u91cf\u8fdb\u884cRead\u6216Write\u64cd\u4f5c\uff0c\u5e76\u751f\u6210\u54cd\u5e94\u62a5\u6587\uff0c\u8fd4\u56de\u7ed9\u7f51\u7ba1\u7ad9\u3002 \u6839\u636e\u5404\u534f\u8bae\u6a21\u5757\u5bf9\u544a\u8b66\u89e6\u53d1\u6761\u4ef6\u7684\u5b9a\u4e49\uff0c\u5f53\u53d1\u751f\u67d0\u4e2a\u4e8b\u4ef6\uff08\u5982\u7aef\u53e3UP/DOWN\uff0cSTP\u62d3\u6251\u53d8\u66f4\u3001 OSPF\u90bb\u5c45\u5173\u7cfbDOWN\u6389\u7b49\uff09\u7684\u65f6\u5019\uff0c\u4e3b\u52a8\u89e6\u53d1\u4e00\u4e2a\u544a\u8b66\uff0c\u5411\u7f51\u7ba1\u7ad9\u62a5\u544a\u8be5\u4e8b\u4ef6\u3002","title":"SNMP\u7684\u89d2\u8272\u8ba4\u77e5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#snmp_2","text":"\u4e0a\u9762\u662f\u4e00\u4e2a\u6700\u7b80\u5316\u7684\u5448\u73b0\u65b9\u5f0f\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4fdd\u8bc1\u88ab\u7f51\u7ba1\u8bbe\u5907\u4e0e\u7f51\u5173\u7ad9\u4e4b\u95f4\u662fIP\u53ef\u8fbe\u7684\uff0c\u5c31\u53ef\u4ee5\u5229\u7528 SNMP\u5b9e\u73b0\u7f51\u7ba1\u3002\u4e00\u79cd\u5178\u578b\u7684\u7f51\u7ba1\u65b9\u5f0f\u662fNM Station\u53d1\u9001\u76f8\u5173\u7684\u62a5\u6587\u53bb\u67e5\u8be2\u88ab\u7f51\u7ba1\u8bbe\u5907\u7684\u76f8\u5173\u8fd0\u884c\u4fe1\u606f \uff08\u4f8b\u5982\u67e5\u770b\u8bbe\u5907\u7684CPU\u5229\u7528\u7387\uff09\uff0c\u88ab\u7f51\u7ba1\u8bbe\u5907\u9488\u5bf9\u8fd9\u4e2a\u67e5\u8be2\u8fdb\u884c\u54cd\u5e94\uff0c\u6b64\u65f6\uff0cNM Station\u8bbf\u95ee\u7684\u662f\u88ab\u7f51\u7ba1\u8bbe\u5907\u7684UDP161\u7aef\u53e3\u3002 \u53e6\u4e00\u79cd\u5178\u578b\u7684\u7f51\u7ba1\u65b9\u5f0f\u662f\uff0c\u88ab\u7f51\u7ba1\u8bbe\u5907\u5728\u67d0\u4e2a\u4e8b\u4ef6\u53d1\u751f\u540e\uff0c\u89e6\u53d1\u4e86\u4e00\u4e2a\u544a\u8b66\uff0c\u5b83\u5c06\u8be5\u544a\u8b66\u901a\u8fc7Trap\u62a5\u6587\u53d1\u5f80NM Station\u7684UDP 162\u7aef\u53e3\u3002\u4ece\u800c\u7f51\u7ba1\u7ad9\u80fd\u591f\u5728\u7b2c\u4e00\u65f6\u95f4\u4e86\u89e3\u5230\u7f51\u7edc\u4e2d\u7684\u5404\u79cd\u7a81\u53d1\u4e8b\u4ef6\u3002","title":"SNMP\u7684\u57fa\u672c\u5de5\u4f5c\u539f\u7406"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mib","text":"\u60f3\u8c61\u4e00\u4e0b\u6bcf\u4e00\u4e2a\u88ab\u7f51\u7ba1\u7684\u8bbe\u5907\u90fd\u6709\u4e00\u68f5\u201c\u6811\u201d\uff0c\u8fd9\u68f5\u6811\u6709\u8bb8\u591a\u5206\u652f\u548c\u8282\u70b9\uff0c\u5728\u8282\u70b9\u4e0a\u6302\u7740\u679c\u5b9e\uff0c\u8981\u4e86\u89e3\u8be5\u8bbe\u5907\u7684\u67d0\u4e2a\u4fe1\u606f\uff0c\u5c31\u53bb\u6458\u53d6\u4e00\u4e2a\u7279\u5b9a\u7684\u679c\u5b9e\uff0c\u8fd9\u68f5\u6811\u5c31\u662fMIB\u3002 \u6bcf\u4e00\u4e2a\u88ab\u7f51\u7ba1\u8bbe\u5907\u7684Agent\u90fd\u7ef4\u62a4\u4e00\u4e2aMIB\u5e93\uff0cMIB\uff08Management Information Base\uff0c\u7ba1\u7406\u4fe1\u606f\u5e93\uff09\u662f\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u6811\u5f62\u7ed3\u6784\u7684\u6570\u636e\u5e93\uff0c\u5176\u4e2d\u542b\u6709\u5927\u91cf\u5bf9\u8c61\uff08Objects\uff09\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u4e2d\u5b58\u50a8\u7740\u8be5\u8bbe\u5907\u7684\u5404\u79cd\u4fe1\u606f\uff0c \u800cMIB\u5c31\u662f\u6240\u6709\u5bf9\u8c61\u7684\u96c6\u5408\u3002\u53ef\u4ee5\u901a\u8fc7\u5bf9MIB\u7684\u8bfb\u53d6\u6216\u5199\u5165\u6765\u5b9e\u73b0\u5bf9\u8bbe\u5907\u7684\u7ba1\u7406\uff0c\u4e0b\u56fe\u5c31\u662fMIB\u7684\u4e00\u4e2a\u7b80\u5355\u5448\u73b0\uff1a MIB\u662f\u4ee5\u6811\u72b6\u7ed3\u6784\u8fdb\u884c\u5b58\u50a8\u7684\uff0c\u6811\u7684\u8282\u70b9\u8868\u793a\u7ba1\u7406\u5bf9\u8c61Object\uff0c\u5728\u5bf9\u8c61\u4e2d\u5c31\u5b58\u50a8\u7740\u53ef\u7528\u4e8e\u7f51\u7ba1\u7684\u4fe1\u606f\uff0c \u5bf9\u8c61\u53ef\u4ee5\u7528\u4ece\u6839Root\u5f00\u59cb\u7684\u4e00\u6761\u8def\u5f84\u6765\u552f\u4e00\u7684\u8bc6\u522b\uff0c\u8fd9\u5c31\u662fOID\uff08Object Identifier\uff0c\u5373\u5bf9\u8c61\u6807\u793a\u7b26\uff09\uff0c \u901a\u8fc7OID\u5c31\u53ef\u4ee5\u51c6\u786e\u7684\u5b9a\u4f4d\u5230\u67d0\u4e2a\u5bf9\u8c61\uff0c\u4f8b\u5982\u4e0b\u56fe\u4e2d\uff0c\u8981\u627einternet\u8282\u70b9\uff0c\u5c31\u4f7f\u7528{1.3.6.1}\uff1a \u901a\u8fc7OID\u6811\uff0c\u53ef\u4ee5\u9ad8\u6548\u4e14\u65b9\u4fbf\u5730\u7ba1\u7406\u5176\u4e2d\u6240\u5b58\u50a8\u7684\u7ba1\u7406\u4fe1\u606f\uff0c\u540c\u65f6\u4e5f\u65b9\u4fbf\u4e86\u5bf9\u5176\u4e2d\u7684\u4fe1\u606f\u8fdb\u884c\u6279\u91cf\u67e5\u8be2\u3002 \u7279\u522b\u5730\uff0c\u5f53\u7528\u6237\u5728\u914d\u7f6eAgent\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7MIB\u89c6\u56fe\u6765\u9650\u5236NMS\u80fd\u591f\u8bbf\u95ee\u7684MIB\u5bf9\u8c61\u3002MIB\u89c6\u56fe\u5b9e\u9645\u4e0a\u662fMIB\u7684\u5b50\u96c6\u5408\u3002 \u76ee\u524dSNMPv1 \u5728\u73b0\u7f51\u4e2d\u5df2\u7ecf\u51e0\u4e4e\u4e0d\u518d\u4f7f\u7528\uff0c SNMPv2c \u4e5f\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c SNMPv3 \u7684\u5b9e\u73b0\u539f\u7406\u548c SNMPv1/SNMPv2c\u57fa\u672c\u4e00\u81f4\uff0c\u552f\u4e00\u7684\u533a\u522b\u662fSNMPv3\u589e\u52a0\u4e86\u8eab\u4efd\u9a8c\u8bc1\u548c\u52a0\u5bc6\u5904\u7406\u3002\u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0c\u5efa\u8bae\u4f7f\u7528SNMPv3\u3002 SNMPv3 \u7684\u57fa\u7840\u914d\u7f6e SW\u4e3a\u4ee5\u592a\u7f51\u4ea4\u6362\u673a\uff08\u4ee5S5300\u4ea4\u6362\u673a\u7684V2R3\u7cfb\u7edf\u8f6f\u4ef6\u7248\u672c\u4e3a\u4f8b\uff09\uff0c\u6309\u56fe\u4e2d\u6240\u793a\u8fde\u63a5\u7740\u7f51\u7edc\u7ba1\u7406\u7cfb\u7edf\uff08NMS\uff09\uff0c\u5178\u578b\u7684NMS\u5982I2000\u3002\u5b8c\u6210SW\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97NMS\u80fd\u591f\u901a\u8fc7SNMP\u7ba1\u7406SW\uff0c\u800c\u4e14SW\u4e5f\u80fd\u591f\u5c06\u544a\u8b66\u901a\u8fc7SNMP Trap\u4e0a\u62a5\u7ed9NMS\u3002 SW\u7684\u5173\u952e\u914d\u7f6e\u5982\u4e0b\uff1a \u6ce8\u610f\uff1a\u4e0a\u8ff0\u914d\u7f6e\u4ec5\u5448\u73b0\u4ea4\u6362\u673aSNMP\u53ca\u544a\u8b66\u76f8\u5173\u7684\u914d\u7f6e\uff0c\u5176\u4ed6\u7684\u8bf8\u5982\u4ea4\u6362\u673aVLAN\u3001Vlanif\u53ca\u63a5\u53e3\u7c7b\u578b\u7b49\u914d\u7f6e\u4e0d\u518d\u8d58\u8ff0\u3002","title":"MIB"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_229","text":"\u5728\u90e8\u7f72\u7f51\u7edc\u8bbe\u5907\u4e0eNMS\uff08\u4f8b\u5982I2000\u7f51\u7ba1\u7cfb\u7edf\uff09\u5bf9\u63a5\u65f6\uff0c\u52a1\u5fc5\u786e\u4fdd\u4e24\u8005\u4e4b\u95f4\u5404\u9879\u53c2\u6570\u7684\u7edd\u5bf9\u5339\u914d\uff0c\u4f8b\u5982 SNMP\u7248\u672c\u3001SNMP\u52a0\u5bc6\u6216\u9274\u6743\u65b9\u5f0f\u53ca\u5bc6\u7801\u7b49\u7b49\u3002 \u8981\u6c42\u91c7\u7528SNMPv3\u7248\u672c\u8fdb\u884c\u90e8\u7f72\uff0c\u800c\u4e0d\u662f\u5b89\u5168\u6027\u8f83\u4f4e\u7684SNMPv2c\u6216SNMPv1\u3002 \u5728\u5b9e\u9645\u90e8\u7f72\u7f51\u7edc\u8bbe\u5907\u4e0eNMS\u7684\u5bf9\u63a5\u65f6\uff0c\u5efa\u8bae\u9996\u5148\u786e\u4fdd\u4e24\u8005\u4e4b\u95f4\u901a\u4fe1\u7684\u6b63\u5e38\uff0c\u4ee5\u4ea4\u6362\u673a\u4e3a\u4f8b\uff0c\u53ef\u5728\u8bbe\u5907\u4e0aping\u7f51\u7ba1\u7cfb\u7edf\u3002\u5728\u6d4b\u8bd5\u8bbe\u5907\u544a\u8b66\u65f6\uff0c\u9700\u5728\u8bbe\u5907\u4e0a\u6267\u884c\u5e26\u6e90IP\u5730\u5740\u7684ping\u6d4b\u8bd5\uff0c\u5176\u4e2d\u6e90IP\u5730\u5740\u4e3a\u8bbe\u5907\u544a\u8b66\u62a5\u6587\u7684\u6e90IP\u5730\u5740\uff0c\u4e5f\u5c31\u662fsnmp-agent trap source\u547d\u4ee4\u6240\u6307\u5b9a\u7684\u63a5\u53e3IP\u5730\u5740\uff0c\u7f3a\u7701\u65f6\uff0c\u8be5IP\u5730\u5740\u4e3a\u544a\u8b66\u62a5\u6587\u51fa\u63a5\u53e3\u7684IP\u5730\u5740\u3002 NTP \u7684\u57fa\u7840\u914d\u7f6e \u7f51\u7edc\u4e2d\u90e8\u7f72\u4e86NTP\u670d\u52a1\u5668\uff08NTPServer\uff09\uff0c\u4e3a\u4e3b\u673a\u53ca\u7f51\u7edc\u8bbe\u5907\u63d0\u4f9b\u65f6\u949f\u6e90\u3002 \u5b8c\u6210SW\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97SW\u80fd\u591f\u4e0eNTPServer\u540c\u6b65\u65f6\u949f\u3002 SW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u8bf4\u660e\uff1a\u5176\u4e2d192.168.1.1\u662fNTP\u670d\u52a1\u7aef\u8bbe\u5907\uff0c\u670d\u52a1\u7aef\u8bbe\u5907\u53ef\u4ee5\u662fLinux\u5e73\u53f0\u7684\u670d\u52a1\u5668\uff0c\u4e5f\u53ef\u4ee5\u662f\u7f51\u7edc\u8bbe\u5907\u3002\u534e \u4e3aS\u7cfb\u5217\u4ea4\u6362\u673a\u652f\u6301\u7684NTP\u7248\u672c\u662f1-3\uff0c\u7f3a\u7701\u4f7f\u7528\u7684\u662f\u7248\u672c3\u3002\u5982\u679cNTP\u670d\u52a1\u5668\u662fLinux\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5e76\u4e14\u4f7f\u7528 NTPv4\uff0c\u662f\u53ef\u4ee5\u4e0e\u4ea4\u6362\u673a\u7684NTPv3\u517c\u5bb9\u7684\u3002\u5982\u679c\u53cc\u65b9\u6fc0\u6d3b\u4e86authentication\uff0c\u90a3\u4e48\u8981\u786e\u4fdd\u4e24\u7aefauthentication- keyid\u548cKey\u90fd\u662f\u5206\u522b\u4e00\u81f4\u7684\u3002","title":"\u6ce8\u610f\u4e8b\u9879\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_230","text":"\u7ec4\u64ad\u57fa\u7840 \u7ec4\u64ad\u6982\u8ff0","title":"\u7ec4\u64ad\u6280\u672f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#unicast","text":"\u5355\u64ad\u901a\u4fe1\u5e94\u8be5\u662f\u6211\u4eec\u73b0\u5b9e\u4e2d\u89c1\u5f97\u6700\u591a\u7684\u901a\u4fe1\u65b9\u5f0f\uff0c\u51e0\u4e4e\u968f\u5904\u53ef\u89c1\u3002 \u6240\u8c13\u7684\u5355\u64ad\uff0c\u5c31\u662f\u4e00\u5bf9\u4e00\u7684\u6570\u636e\u901a\u4fe1\u8fc7\u7a0b\uff0c\u4e00\u4e2a\u5355\u64ad\u6570\u636e\u5305\u53ea\u53d1\u7ed9\u4e00\u4e2a\u7279\u5b9a\u7684\u76ee\u6807\u8bbe\u5907\uff0c\u8fd9\u4e2a\u76ee\u6807\u8bbe\u5907\u662f\u6570\u636e\u5305\u7684\u76ee\u7684IP\u5730\u5740\u7684\u62e5\u6709\u8005\u3002 \u5f53\u6e90\u9700\u8981\u5c06\u4e00\u4efd\u76f8\u540c\u7684\u6570\u636e\u540c\u65f6\u53d1\u9001\u7ed9\u591a\u4e2a\u63a5\u6536\u8005\u65f6\uff0c\u6e90\u9700\u53d1\u9001\u4e0e\u63a5\u6536\u8005\u6570\u76ee\u76f8\u540c\u7684\u5355\u64ad\u6570\u636e\u5305\u3002\u8fd9\u79cd\u9700\u6c42\u5e38\u89c1\u4e8e\u591a\u5a92\u4f53\u76f4\u64ad\u7b49\u4e1a\u52a1\u3002 \u5f53\u63a5\u53d7\u8005\u589e\u52a0\u5230\u6210\u767e\u4e0a\u5343\u65f6\uff0c\u5c06\u6781\u5927\u52a0\u91cd\u670d\u52a1\u5668\u4e3a\u76f8\u540c\u6570\u636e\u521b\u5efa\u548c\u53d1\u9001\u591a\u4efd\u62f7\u8d1d\u7684\u8d1f\u62c5\uff0c\u7f51\u7edc\u8bbe\u5907\u4e5f\u5c06\u627f\u53d7\u66f4\u5927\u7684\u6027\u80fd\u635f\u8017\u3002\u4f8b\u5982\u89c6\u9891\u7c7b\u7684\u670d\u52a1\uff0c\u5982\u679c\u91c7\u7528\u5355\u64ad\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u6050\u6015\u5c31\u6709\u6bd4\u8f83\u5927\u7684\u77ed\u677f\u3002","title":"\u4ec0\u4e48\u662f\u5355\u64ad\uff08Unicast\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#broadcast","text":"\u5e7f\u64ad\u6570\u636e\u5305\u88ab\u9650\u5236\u5728\u5e7f\u64ad\u57df\u4e2d\uff1b\u5e7f\u64ad\u57df\u7684\u4e00\u4e2a\u5178\u578b\u7684\u4f8b\u5b50\u662fVLAN\uff0c\u4e00\u4e2aVLAN\u5c31\u662f\u4e00\u4e2a\u5e7f\u64ad\u57df\u3002\u8def\u7531\u5668\u80fd\u591f\u9694\u79bb\u5e7f\u64ad\u57df\uff0c\u5e7f\u64ad\u6570\u636e\u5305\u5230\u8fbe\u8def\u7531\u5668\u7684\u4e09\u5c42\u63a5\u53e3\u540e\uff0c\u5373\u5230\u8fbe\u4e86\u4f20\u64ad\u7684\u8fb9\u754c\u3002 \u5728\u4e00\u4e2a\u5e7f\u64ad\u57df\u4e2d\uff0c\u4e00\u65e6\u6709\u8282\u70b9\u53d1\u9001\u5e7f\u64ad\u6570\u636e\uff0c\u90a3\u4e48\u5e7f\u64ad\u57df\u5185\u7684\u6240\u6709\u8bbe\u5907\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5305\u5e76\u4e14\u4e0d\u5f97\u4e0d\u8017\u8d39\u8d44\u6e90\u53bb\u5904\u7406\uff0c\u5927\u91cf\u7684\u5e7f\u64ad\u6570\u636e\u5305\u5c06\u6d88\u8017\u7f51\u7edc\u7684\u5e26\u5bbd\u53ca\u8bbe\u5907\u8d44\u6e90\uff1b \u5728IPv6\u4e2d\uff0c\u5e7f\u64ad\u7684\u62a5\u6587\u4f20\u8f93\u65b9\u5f0f\u88ab\u53d6\u6d88\uff1b \u56e0\u6b64\u5728\u540c\u4e00\u4efd\u6570\u636e\u5b58\u5728\u591a\u4e2a\u63a5\u6536\u8005\u7684\u573a\u666f\u4e0b\uff0c\u5e7f\u64ad\u4f9d\u7136\u4e0d\u592a\u5408\u9002\u3002","title":"\u4ec0\u4e48\u662f\u5e7f\u64ad\uff08Broadcast\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#multicast","text":"\u7ec4\u64ad\u7684\u6570\u636e\u4f20\u8f93\u65b9\u5f0f\u662f\u4e00\u5bf9\u591a\u7684\u6a21\u578b\uff0c\u53ea\u6709\u52a0\u5165\u5230\u7279\u5b9a\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\uff0c\u624d\u4f1a\u6536\u5230\u53d1\u5f80\u8be5\u7ec4\u7684\u7ec4\u64ad\u6570\u636e\u3002\u4ee5\u7ec4\u64ad\u5730\u5740\u4e3a\u76ee\u7684\u5730\u5740\u7684\u6570\u636e\u53d1\u5f80\u591a\u4e2a\u63a5\u6536\u8005\u3002 \u5f53\u4e00\u4e2a\u7ec4\u5185\u5b58\u5728\u591a\u4e2a\u6210\u5458\u65f6\uff0c\u6570\u636e\u53d1\u9001\u6e90\u65e0\u9700\u6bcf\u6b21\u53d1\u9001\u591a\u4e2a\u6570\u636e\u62f7\u8d1d\uff0c\u800c\u662f\u6bcf\u6b21\u4ec5\u9700\u53d1\u9001\u4e00\u4efd\u5373\u53ef\uff0c\u7ec4\u64ad\u8def\u7531\u5668\uff08\u8fd0\u884c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\uff0c\u6b64\u5904\u4e5f\u6307\u5176\u4ed6\u7c7b\u578b\u7684\u8bbe\u5907\uff0c\u4f8b\u5982\u4ea4\u6362\u673a\u7b49\uff09\u4f1a\u6839\u636e\u9700\u8981\u8f6c\u53d1\u6216\u62f7\u8d1d\u7ec4\u64ad\u6570\u636e\u3002 \u7ec4\u64ad\u6570\u636e\u6d41\u53ea\u53d1\u9001\u7ed9\u52a0\u5165\u8be5\u7ec4\u64ad\u7ec4\u7684\u7528\u6237\uff0c\u800c\u4e0d\u9700\u8981\u8be5\u6570\u636e\u7684\u8bbe\u5907\u5219\u4e0d\u4f1a\u6536\u5230\u8be5\u7ec4\u64ad\u6d41\u91cf\u3002 \u76f8\u540c\u7684\u7ec4\u64ad\u4e1a\u52a1\u6d41\u91cf\uff0c\u5728\u4e00\u6bb5\u94fe\u8def\u4e0a\u4ec5\u6709\u4e00\u4efd\u6570\u636e\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u7f51\u7edc\u8d44\u6e90\u7684\u5229\u7528\u7387\u3002","title":"\u4ec0\u4e48\u662f\u7ec4\u64ad\uff08Multicast\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_231","text":"\u7ec4\u64ad\u7684\u7279\u70b9\uff1a \u63d0\u9ad8\u6548\u7387\uff1a\u5728\u4e00\u5bf9\u591a\u7684\u901a\u4fe1\u573a\u666f\u4e0b\uff0c\u964d\u4f4e\u7f51\u7edc\u6d41\u91cf\u3001\u51cf\u8f7b\u786c\u4ef6\u8d1f\u8377\uff1b \u4f18\u5316\u6027\u80fd\uff1a\u5728\u4e00\u5bf9\u591a\u7684\u901a\u4fe1\u573a\u666f\u4e0b\uff0c\u51cf\u5c11\u5197\u4f59\u6d41\u91cf\u3001\u8282\u7ea6\u7f51\u7edc\u5e26\u5bbd\u3001\u964d\u4f4e\u7f51\u7edc\u8d1f\u8f7d\uff1b \u7ec4\u64ad\u7684\u5e94\u7528\uff1a \u7ec4\u64ad\u9002\u7528\u4e8e\u591a\u63a5\u6536\u8005\u671f\u671b\u6536\u53d6\u76f8\u540c\u6d41\u91cf\u7684\u573a\u666f\uff1b \u7ec4\u64ad\u9002\u7528\u4e8e\u63a5\u6536\u8005\u5730\u5740\uff08\u6216\u4f4d\u7f6e\uff09\u672a\u77e5\u7684\u573a\u666f\uff1b \u591a\u5a92\u4f53\u76f4\u64ad\uff1b \u57f9\u8bad\u3001\u591a\u5a92\u4f53\u4f1a\u8bae\u3001\u8054\u5408\u4f5c\u4e1a\u573a\u5408\u7684\u901a\u4fe1\uff1b \u6570\u636e\u4ed3\u5e93\u3001\u91d1\u878d\u5e94\u7528\uff08\u80a1\u7968\uff09\u3002 \u7ec4\u64ad\u6a21\u578b \u4e0a\u56fe\u5c31\u662f\u4e00\u4e2a\u5178\u578b\u7684\u7ec4\u64ad\u6a21\u578b\u3002\u901a\u5e38\u6211\u4eec\u5c06\u7ec4\u64ad\u6a21\u578b\u5206\u4e3a\u4e09\u4e2a\u6a21\u5757\u3002 \u7ec4\u64ad\u6e90\uff0c\u4e0e\u8ddf\u5176\u76f4\u8fde\u7684\u7ec4\u64ad\u8def\u7531\u5668\uff08\u7b2c\u4e00\u8df3\u8def\u7531\u5668\uff09\u6784\u6210\u4e86\u7b2c\u4e00\u4e2a\u6a21\u5757\uff0c\u8fd9\u4e2a\u6a21\u5757\u4e2d\u5e76\u6ca1\u6709\u7279\u6b8a\u7684\u4fe1\u4ee4\u6216\u63a7\u5236\u534f\u8bae\uff0c\u7ec4\u64ad\u6e90\u76f4\u63a5\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u7b2c\u4e00\u8df3\u8def\u7531\u5668\u4f1a\u6536\u5230\u8fd9\u4e9b\u7ec4\u64ad\u6570\u636e\u3002 \u7f51\u7edc\u4e2d\u7684\u7ec4\u64ad\u8def\u7531\u5668\uff0c\u4e5f\u5c31\u662f\u8fd0\u884c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u7684\u8def\u7531\u5668\u6784\u6210\u4e86\u7b2c\u4e8c\u4e2a\u6a21\u5757\u3002\u7f51\u7edc\u4e2d\u7684\u8fd9\u4e9b\u7ec4\u64ad\u8def\u7531\u5668\u90fd\u5c06\u8fd0\u884c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\uff0c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u5de5\u4f5c\u7684\u76ee\u7684\u5c31\u662f\u5728\u7f51\u7edc\u4e2d\u6784\u5efa\u51fa\u4e00\u68f5\u65e0\u73af\u7684\u7ec4\u64ad\u5206\u53d1\u201c\u6811\u201d\uff0c\u4f7f\u5f97\u7ec4\u64ad\u6d41\u91cf\u4ece\u7b2c\u4e00\u8df3\u8def\u7531\u5668\u6cbf\u7740\u6784\u5efa\u597d\u7684\u7ec4\u64ad\u5206\u53d1\u6811\u8f6c\u53d1\u5230\u6bcf\u4e00\u4e2a\u7ec4\u64ad\u7528\u6237\u6240\u5728\u7684\u7f51\u6bb5\uff0c\u800c\u5bf9\u4e8e\u4e0d\u9700\u8981\u8fd9\u4e9b\u7ec4\u64ad\u6570\u636e\u7684\u7528\u6237\u6216\u7f51\u7edc\u5206\u652f\u5219\u4e0d\u4f1a\u6536\u5230\u7ec4\u64ad\u6d41\u91cf\u3002 \u7ec4\u64ad\u63a5\u6536\u8005\u4e0e\u5176\u76f4\u8fde\u7684\u8def\u7531\u5668\uff08\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\uff09\u6784\u6210\u4e86\u7b2c\u4e09\u4e2a\u6a21\u5757\u3002\u5728\u8fd9\u4e2a\u6a21\u5757\u4e2d\uff0c\u6709\u4e00\u4e2a\u534f\u8bae\u975e\u5e38\u9700\u8981\u5173\u6ce8\uff0c\u90a3\u5c31\u662fIGMP\uff08\u56e0\u7279\u7f51\u7ec4\u7ba1\u7406\u534f\u8bae\uff09\uff0c\u8fd9\u4e2a\u534f\u8bae\u5e2e\u52a9\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u4e86\u89e3\u5176\u63a5\u53e3\u6240\u8fde\u63a5\u7684\u7f51\u6bb5\u4e2d\u662f\u5426\u5b58\u5728\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\uff0c\u540c\u65f6\u534f\u52a9\u7ef4\u62a4\u7ec4\u6210\u5458\u5173\u7cfb\u3002\u7ec4\u64ad\u7528\u6237\uff08\u7ec8\u7aef\u8bbe\u5907\uff09\u5982\u679c\u8981\u52a0\u5165\u7ec4\u64ad\u7ec4\uff0c\u5219\u4f7f\u7528IGMP\u534f\u8bae\u62a5\u6587\u8fdb\u884c\u7533\u8bf7\uff0c\u800c\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u4e5f\u4f7f\u7528IGMP\u534f\u8bae\u62a5\u6587\u53bb\u67e5\u8be2\u76f4\u8fde\u7684\u7f51\u6bb5\u4e2d\u662f\u5426\u5b58\u5728\u7ec4\u6210\u5458\u3002 \u7ec4\u64ad\u7f51\u7edc\u7684\u6b63\u5e38\u5de5\u4f5c\u6b63\u662f\u7531\u4e0a\u9762\u6211\u4eec\u6240\u63cf\u8ff0\u7684\u5404\u4e2a\u7ec4\u4ef6\u534f\u540c\u5de5\u4f5c\u800c\u5b9e\u73b0\u7684\u3002 \u7ec4\u64ad\u5206\u53d1\u6811 \u7ec4\u64ad\u5730\u5740","title":"\u7ec4\u64ad\u7684\u7279\u70b9\u548c\u5e94\u7528"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ip_8","text":"\u5728IPv4\u5730\u5740\u7a7a\u95f4\u4e2d\uff0cD\u7c7b\u5730\u5740\uff08224.0.0.0/4\uff09\u88ab\u7528\u4e8e\u7ec4\u64ad\u3002\u7ec4\u64adIP\u5730\u5740\u4ee3\u8868\u4e00\u4e2a\u63a5\u6536\u8005\u7684\u96c6\u5408\u3002IANA\u5bf9 D\u7c7b\u5730\u5740\u505a\u4e86\u8fdb\u4e00\u6b65\u7684\u5b9a\u4e49\uff0c\u51e0\u79cd\u4e3b\u8981\u7684\u7ec4\u64ad\u5730\u5740\u5982\u4e0b\u8868\u6240\u793a\uff1a \u7ec4\u64adIP\u5730\u5740\u662f\u7ec4\u64ad\u7ec4\u7684\u6807\u8bc6\u7b26\u3002\u4e00\u4e2a\u5178\u578b\u7684\u7ec4\u64ad\u5e94\u7528\u573a\u666f\u662f\u89c6\u9891\u76f4\u64ad\u3002\u4f8b\u5982\u67d0\u4e2a\u89c6\u9891\u76f4\u64ad\u9891\u9053\u4f7f\u7528\u7ec4\u64ad IP\u5730\u5740239.1.1.1\u4f5c\u4e3a\u4e1a\u52a1\u5730\u5740\uff0c\u90a3\u4e48\u8be5\u89c6\u9891\u76f4\u64ad\u7684\u53d1\u9001\u6e90\uff08\u53ef\u80fd\u662f\u4e00\u53f0\u591a\u5a92\u4f53\u670d\u52a1\u5668\uff09\u4f1a\u6301\u7eed\u4ee5\u8be5\u7ec4\u64ad\u5730\u5740\u4e3a\u76ee\u7684IP\u5730\u5740\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u8fd9\u4e9b\u7ec4\u64ad\u6570\u636e\u4f1a\u88ab\u9001\u5165\u7ec4\u64ad\u7f51\u7edc\uff0c\u7ec4\u64ad\u7f51\u7edc\u4e2d\u7684\u7ec4\u64ad\u8bbe\u5907\uff08\u4f8b\u5982\u7ec4\u64ad\u8def\u7531\u5668\u6216\u8005\u7ec4\u64ad\u4ea4\u6362\u673a\uff09\u4f1a\u6839\u636e\u9700\u8981\u590d\u5236\u53ca\u8f6c\u53d1\u8fd9\u4e9b\u7ec4\u64ad\u62a5\u6587\uff0c\u6700\u7ec8\u7ec4\u64ad\u62a5\u6587\u6cbf\u7740\u4e00\u6761\u65e0\u73af\u7684\u8def\u5f84\u5230\u8fbe\u7ec4\u64ad\u63a5\u6536\u8005\u6240\u5728\u7684\u7f51\u6bb5\u3002\u5728\u8be5\u573a\u666f\u4e2d\uff0c\u7ec4\u64ad\u63a5\u6536\u8005\u53ef\u80fd\u662f\u4e00\u4e9b\u9700\u8981\u89c2\u770b\u8be5\u89c6\u9891\u76f4\u64ad\u7684PC\uff0c\u5b83\u4eec\u5fc5\u987b\u901a\u8fc7IGMP\u534f\u8bae\u62a5\u6587\u5ba3\u544a\u81ea\u5df1\u52a0\u5165\u4e86239.1.1.1\u8fd9\u4e2a\u7ec4\u64ad\u7ec4\uff0c\u968f\u540e\uff0c\u5f00\u59cb\u4fa6\u542c\u53d1\u5f80239.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\u3002","title":"\u7ec4\u64adIP\u5730\u5740\u7a7a\u95f4"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipmac","text":"\u5728\u4ee5\u592a\u7f51\u4e2d\uff0cIP\u6570\u636e\u5305\u5fc5\u987b\u589e\u52a0\u4ee5\u592a\u7f51\u5c01\u88c5\uff0c\u624d\u80fd\u5728\u4ee5\u592a\u7f51\u94fe\u8def\u4e0a\u4f20\u8f93\u3002\u5728\u4ee5\u592a\u7f51\u5c01\u88c5\u7684\u5e27\u5934\u4e2d\uff0c\u9700\u5199\u5165\u8be5\u6570\u636e\u5e27\u7684\u6e90\u548c\u76ee\u7684MAC\u5730\u5740\u3002\u5bf9\u4e8e\u5355\u64ad\u6570\u636e\u800c\u8a00\uff0c\u5176IP\u5305\u5934\u4e2d\u7684\u76ee\u7684IP\u5730\u5740\u662f\u5355\u64ad\u5730\u5740\uff0c\u800c\u4ee5\u592a \u7f51\u5e27\u5934\u4e2d\u7684\u76ee\u7684MAC\u5730\u5740\u5219\u662f\u94fe\u8def\u5c42\u9762\u4e0a\u7684\u4e0b\u4e00\u8df3\u8bbe\u5907\u7684MAC\u5730\u5740\uff0c\u8be5MAC\u5730\u5740\u4e5f\u662f\u5355\u64ad\u5730\u5740\u3002\u5bf9\u4e8e\u4e00\u4e2a\u7ec4\u64ad\u6570\u636e\u800c\u8a00\uff0c\u5176\u76ee\u7684IP\u5730\u5740\u5f53\u7136\u662f\u7ec4\u64adIP\u5730\u5740\uff0c\u90a3\u4e48\u5b83\u7684\u76ee\u7684MAC\u5730\u5740\u5462\uff1f\u5f53\u7136\uff0c\u4e0d\u53ef\u80fd\u662f\u4e00\u4e2a\u5355\u64adMAC\u5730\u5740\uff0c\u56e0\u4e3a\u8be5\u6570\u636e\u53d1\u5f80\u4e00\u7ec4\u63a5\u6536\u8005\uff0c\u800c\u4e0d\u662f\u5355\u4e00\u7684\u63a5\u6536\u8005\u3002\u5b9e\u9645\u4e0a\uff0c\u6b64\u5904\u4f7f\u7528\u7684MAC\u5730\u5740\u5fc5\u987b\u662f\u7ec4\u64adMAC\u5730\u5740\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u9700\u8981\u660e\u786e\u7ec4\u64adIP\u5730\u5740\u4e0e\u7ec4\u64adMAC\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\u3002\u5f53\u4e00\u4e2a\u7ec4\u64adIP \u62a5\u6587\u88ab\u5c01\u88c5\u4ee5\u592a\u7f51\u5e27\u5934\u65f6\uff0c\u8bbe\u5907\u4f1a\u6839\u636e\u62a5\u6587\u7684\u7ec4\u64adIP\u5730\u5740\u8fdb\u884c\u6620\u5c04\uff0c\u4ece\u800c\u5f97\u5230\u5bf9\u5e94\u7684\u7ec4\u64adMAC\u5730\u5740\uff0c \u5c06\u5176\u5199\u5165\u5e27\u5934\u7684\u76ee\u7684MAC\u5730\u5740\u5b57\u6bb5\u4e2d\u3002\u4e0b\u56fe\u63cf\u8ff0\u4e86\u4e00\u4e2a\u7ec4\u64adIP\u5730\u5740\u5230\u5bf9\u5e94\u7684\u7ec4\u64adMAC\u5730\u5740\u7684\u6620\u5c04\u5173\u7cfb\uff1a IGMP IGMP \u6982\u8ff0 IGMP\uff08Internet Group Manage Protoco\uff0c\u56e0\u7279\u7f51\u7ec4\u7ba1\u7406\u534f\u8bael\uff09\u7528\u4e8e\u4e3b\u673a\u548c\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u4e4b\u95f4\u3002\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u662f\u76f4\u8fde\u7ec4\u64ad\u7ec4\u6210\u5458\u7684\u8def\u7531\u5668\uff0c\u5b83\u9700\u8981\u4e00\u79cd\u534f\u8bae\u6765\u89e3\u51b3\u7ec4\u6210\u5458\u7ba1\u7406\u7684\u95ee\u9898\uff0cIGMP\u5c31\u662f\u7528\u6765\u89e3\u51b3\u8fd9\u7c7b\u95ee\u9898\u7684\u3002 \u4e3b\u673a\u4f7f\u7528IGMP\u534f\u8bae\u62a5\u6587\u5411\u8def\u7531\u5668\u7533\u8bf7\u52a0\u5165\u548c\u9000\u51fa\u7ec4\u64ad\u7ec4\u3002\u5f53\u8def\u7531\u5668\u4ece\u63a5\u53e3\u4e0a\u6536\u5230\u76f4\u8fde\u7f51\u6bb5\u4e2d\u7684\u4e3b\u673a\u53d1\u9001\u51fa\u6765\u7684IGMP\u534f\u8bae\u62a5\u6587\u4e14\u8be5\u62a5\u6587\u7528\u4e8e\u5ba3\u544a\u5176\u52a0\u5165\u7ec4\u64ad\u7ec4\u65f6\uff0c\u8def\u7531\u5668\u4e5f\u5c31\u77e5\u9053\u4e86\u5728\u8be5\u76f4\u8fde\u7f51\u6bb5\u4e2d\u5b58\u5728\u7279\u5b9a\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\uff0c\u4ece\u800c\u5f53\u8def\u7531\u5668\u6536\u5230\u53d1\u5f80\u8be5\u7ec4\u64ad\u7ec4\u7684\u6d41\u91cf\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5411\u8be5\u63a5\u53e3\u8f6c\u53d1\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u8def\u7531\u5668\u901a\u8fc7IGMP \u534f\u8bae\u62a5\u6587\u67e5\u8be2\u7f51\u6bb5\u4e0a\u662f\u5426\u6709\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u3002 IGMP\u662f3\u5c42\u534f\u8bae\uff0c\u76f4\u63a5\u88ab\u5c01\u88c5\u5728IP\u4e2d\uff0c\u534f\u8bae\u53f7\u4e3a2\uff0cIGMP\u6570\u636e\u5305\u53ea\u5728\u672c\u7f51\u6bb5\u5185\u6709\u6548\uff0c\u62a5\u6587\u7684TTL\u53c2\u6570\u4e3a1\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0cIGMP\u6709\u4e09\u4e2a\u7248\u672c\uff1a IGMPv1\u7248\u672c\uff08\u7531RFC 1112\u5b9a\u4e49\uff09\uff0c\u5df2\u7ecf\u57fa\u672c\u4e0d\u518d\u4f7f\u7528\u3002 IGMPv2\u7248\u672c\uff08\u7531RFC 2236\u5b9a\u4e49\uff09 IGMPv3\u7248\u672c\uff08\u7531RFC 3376\u5b9a\u4e49\uff09","title":"\u7ec4\u64adIP\u5730\u5740\u4e0eMAC\u5730\u5740\u7684\u6620\u5c04"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmpv1rfc1112","text":"","title":"IGMPv1\uff08RFC1112\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_232","text":"IGMPv2\u7684\u62a5\u6587\u683c\u5f0f\u5982\u4e0a\uff0c\u4e00\u5171\u6709\u4e24\u79cd\u62a5\u6587\uff1a \u5f53TYPE\u5b57\u6bb5\u4e3a1\u65f6\uff0c\u62a5\u6587\u4e3a\u6210\u5458\u5173\u7cfb\u67e5\u8be2\uff08Host membership query\uff09 \u5f53TYPE\u5b57\u6bb5\u4e3a2\u65f6\uff0c\u62a5\u6587\u4e3a\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff08host membership report\uff09 Version\u5b57\u6bb5\u7684\u503c\u6052\u5b9a\u4e3a1\uff0c\u56e0\u4e3a\u8fd9\u662fIGMPv1\u7684\u62a5\u6587\u3002 \u5bf9\u4e8eGroup address\u5b57\u6bb5\uff0c\u5f53\u62a5\u6587\u4e3a\u6210\u5458\u5173\u7cfb\u62a5\u544a\u65f6\u4e00\u822c\u8be5\u5b57\u6bb5\u586b\u5145\u4e3a\u7279\u5b9a\u7ec4\u64ad\u7ec4\u7684IP\u5730\u5740\uff0c\u5f53\u62a5\u6587\u4e3a\u6210\u5458\u5173\u7cfb\u67e5\u8be2\u65f6\uff0c\u672c\u5b57\u6bb5\u4e3a\u51680\u3002","title":"\u62a5\u6587\u683c\u5f0f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_233","text":"\u6210\u5458\u5173\u7cfb\u67e5\u8be2 \u6210\u5458\u5173\u7cfb\u62a5\u544a \u6e90IP\u5730\u5740 \u8def\u7531\u5668\u63a5\u53e3IP \u4e3b\u673a\u63a5\u53e3IP \u76eeIP\u5730\u5740 224.0.0.1 \u7ec4\u64ad\u7ec4IP TTL 1 1 \u62a5\u6587\u4e2d\u7684Group Address 0.0.0.0 \u7ec4\u64ad\u7ec4IP","title":"\u62a5\u6587\u53d1\u9001\u65f6\u5404\u9879\u5b57\u6bb5\u7684\u5185\u5bb9"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmpv1","text":"R1\u4f5c\u4e3a\u8fd9\u4e2a\u5b50\u7f51\u4e2d\u7684IGMPv1\u67e5\u8be2\u5668\uff0c\u4f1a\u5468\u671f\u6027\u5730\uff08\u9ed8\u8ba460s\u4e00\u6b21\uff09\u4e0b\u53d1IGMPv1\u6210\u5458\u5173\u7cfb\u67e5\u8be2\u62a5\u6587\u6765\u8be2 \u95ee\u8fd9\u4e2a\u5b50\u7f51\u4e2d\u662f\u5426\u5b58\u5728\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u3002\u6ce8\u610f\uff0cIGMPv1\u7684\u6210\u5458\u5173\u7cfb\u67e5\u8be2\u4e0d\u80fd\u9488\u5bf9\u7279\u5b9a\u7684\u7ec4\u64ad\u7ec4\uff0c\u53ea\u80fd\u8fdb\u884c\u666e\u904d\u7ec4\uff08\u4e5f\u5c31\u662f\u6240\u6709\u7ec4\uff09\u67e5\u8be2\uff0c\u8be5\u67e5\u8be2\u5305\u7684\u76ee\u7684\u5730\u5740\u662f224.0.0.1\uff08\u6240\u6709\u4e3b\u673a\uff09\uff0c\u4e14\u62a5\u6587\u4e2dgroup address \u5b57\u6bb5\u4e3a0.0.0.0\u3002 \u4e3b\u673a\u4eec\u6536\u5230\u4e86\u67e5\u8be2\u5305\uff0c\u7eb7\u7eb7\u53d1\u9001IGMPv1\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0c\u5982PC1\u5411224.1.1.1\u53d1\u9001\uff0cPC2\u5411224.2.2.2\u53d1\u9001\u6210\u5458\u5173\u7cfb\u62a5\u544a\u3002PC3\u6bd4\u8f83\u7279\u6b8a\uff0c\u5b83\u53ef\u80fd\u52a8\u4f5c\u6162\u4e00\u70b9\uff0c\u8fd8\u6ca1\u53d1\u5462\u5c31\u6536\u5230\u4e86PC1\u7684\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff08\u8fd9\u91cc\u5176\u5b9e\u6709\u4e2areport delay\u7684\u968f\u673a\u8ba1\u65f6\u5668\uff0c\u5f53\u7ec8\u7aef\u6536\u5230\u4e00\u4e2a\u67e5\u8be2\u540e\uff0c\u4f1a\u4ea7\u751f\u4e00\u4e2a\u968f\u673a\u65f6\u95f4\uff0c\u8fd9\u4e2a\u65f6\u95f4\u5012\u8ba1\u65f6\u4e3a0\u540e\u624d\u53d1\u9001\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0c\u800c\u5f53\u7ec8\u7aef\u6536\u5230\u540c\u4e00\u4e2a\u7ec4\u64ad\u7ec4\u7684\u5176\u4ed6\u6210\u5458\u53d1\u51fa\u7684\u6210\u5458\u5173\u7cfb\u62a5\u544a\u540e\uff0c\u81ea\u5df1\u5c31\u4e0d\u518d\u53d1\u4e86\uff0c\u56e0\u4e3a\u53ea\u9700\u8981\u8ba9\u67e5\u8be2\u5668\u77e5\u9053\u8fd9\u4e2a\u5b50\u7f51\u4e2d\u6709\u8be5\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u5373\u53ef\uff0c\u81f3\u4e8e\u5b58\u5728\u591a\u5c11\u4e2a\uff0c\u5176\u5b9e\u6ca1\u5fc5\u8981\u77e5\u9053\u3002\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u540c\u7ec4\u5185\u7684\u6210\u5458\u91cd\u590d\u53d1\u9001\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0c\u8d77\u5230\u4f18\u5316\u7f51\u7edc\u6d41\u91cf\u7684\u76ee\u7684\uff09\uff0c\u53d1\u73b0\u662f\u81ea\u5df1\u540c\u4e00\u7ec4\u64ad\u7ec4\u7684\u63a5\u6536\u8005\uff0c\u56e0\u6b64\u4e3a\u4e86\u907f\u514d\u91cd\u590d\u53d1\u9001\uff0c\u5c31\u6291\u5236\u4e86\u81ea\u5df1\u62a5\u544a\u3002","title":"IGMPv1\u67e5\u8be2\u53ca\u54cd\u5e94\u8fc7\u7a0b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmpv1_1","text":"\u5982\u679c\u5728\u540c\u4e00\u7f51\u6bb5\u4e2d\uff0c\u5b58\u5728\u591a\u4e2aIGMP\u8def\u7531\u5668\uff0c\u5c31\u50cf\u4e0a\u56fe\uff0c\u8fd9\u79cd\u60c5\u51b5\u5982\u679cA\u548cB\u90fd\u53d1IGMP\u67e5\u8be2\uff0c\u5c31\u663e\u5f97\u6709\u70b9\u591a\u4f59\u4e86\uff0c\u56e0\u6b64\u5728\u5b83\u4eec\u4e4b\u95f4\u9009\u51fa\u4e00\u4e2a\u67e5\u8be2\u5668\uff08Querier\uff09\uff0c\u7531\u8fd9\u4e2a\u67e5\u8be2\u5668\u6765\u53d1\u67e5\u8be2\u3002\u4f46\u662fRFC1112\u6ca1\u6709\u6307\u5b9a\u5982\u4f55\u9009\u62e9IGMPv1\u67e5\u8be2\u5668\uff0c\u6ca1\u529e\u6cd5\uff0cIGMPv1\u53ea\u80fd\u501f\u52a9\u7ec4\u64ad\u534f\u8bae\u5982PIM\u3001DVMRP\u7b49\u3002","title":"IGMPv1\u67e5\u8be2\u5668"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmpv1_2","text":"\u5f53\u5b50\u7f51\u4e2d\uff0c\u6709\u4e3b\u673a\u60f3\u52a0\u5165\u67d0\u4e2a\u7ec4\u64ad\u7ec4\u65f6\uff0c\u5b83\u53ef\u4ee5\u65e0\u9700\u7b49\u5f85\u67e5\u8be2\u5668\u7684\u4e0b\u4e00\u4e2a\u6210\u5458\u5173\u7cfb\u67e5\u8be2\u5305\u7684\u5230\u6765\uff0c\u800c\u662f\u76f4\u63a5\u5411\u81ea\u5df1\u611f\u5174\u8da3\u7684\u7ec4\u64ad\u7ec4\u7684IP\u5730\u5740\u53d1\u9001IGMPv1\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0c\u6765\u5ba3\u544a\u81ea\u5df1\u52a0\u5165\u7ec4\u64ad\u7ec4\u3002","title":"IGMPv1\u52a0\u5165\u673a\u5236"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmpv1_3","text":"IGMPv1\u6ca1\u6709\u5b9a\u4e49\u4e3b\u673a\u9000\u51fa\u7ec4\u64ad\u7ec4\u7684\u673a\u5236\uff0c\u56e0\u6b64\u4e3b\u673a\u4f1a\u201c\u9ed8\u9ed8\u201d\u79bb\u5f00\u3002\u5728\u5b50\u7f51\u4e2d\u6700\u540e\u4e00\u4e2a\u7ec4\u64ad\u7ec4\u6210\u5458\u79bb\u5f00\u540e\uff0cIGMPv1\u4f1a\u5728\u4e00\u5b9a\u7684\u8d85\u65f6\u65f6\u95f4\u540e\u5c31\u77e5\u9053\u8be5\u7ec4\u5185\u6ca1\u6709\u6210\u5458\u4e86\uff0c\u4e8e\u662f\u4fbf\u4e0d\u4f1a\u518d\u5411\u8be5\u5b50\u7f51\u8f6c\u53d1\u7ec4\u64ad\u6d41\u91cf\u3002\u4ece\u8fd9\u91cc\u53ef\u4ee5\u770b\u51fa\uff0cIGMPv1\u7684\u79bb\u5f00\u673a\u5236\u5b9e\u9645\u4e0a\u662f\u4e0d\u5408\u7406\u7684\uff0c\u56e0\u4e3a\u6709\u53ef\u80fd\u5b50\u7f51\u4e2d\u5df2\u7ecf\u6ca1\u6709\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u4e86\uff0c \u7ec4\u64ad\u8def\u7531\u5668\u4f9d\u7136\u5411\u8be5\u5b50\u7f51\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u76f4\u5230\u4e00\u6bb5\u65f6\u95f4\u540e\u8ba1\u65f6\u5668\u8d85\u65f6\u53d1\u73b0\u786e\u5b9e\u6ca1\u6709\u7ec4\u64ad\u7528\u6237\u4e86\uff0c\u624d\u4f1a\u505c\u6b62\u8f6c\u53d1\u7ec4\u64ad\u6570\u636e\u3002","title":"IGMPv1\u79bb\u5f00\u673a\u5236"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmpv2rfc2236","text":"","title":"IGMPv2\uff08RFC2236\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_234","text":"\u5b57\u6bb5 \u63cf\u8ff0 Type \u4e0d\u540cType\u5b57\u6bb5\u5bf9\u5e94\u4e0d\u540c\u7684IGMPv2\u62a5\u6587\u7c7b\u578b\uff0c\u8bf7\u770b\u62a5\u6587\u7c7b\u578b\u5c0f\u8282 Max Response Time \u6700\u5927\u54cd\u5e94\u65f6\u95f4\uff08\u53ea\u5728\u67e5\u8be2\u62a5\u6587\u4e2d\u8bbe\u7f6e\uff0c\u5176\u4ed6\u62a5\u6587\u4e2d\u4e3a0x00\uff09\u662f\u4e3b\u673a \u7528\u6210\u5458\u5173\u7cfb\u62a5\u544a\u6765\u54cd\u5e94\u67e5\u8be2\u62a5\u6587\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff0c\u9ed8\u8ba410s Group address \u5f53\u62a5\u6587\u4e3a\u5e38\u89c4\u67e5\u8be2\u5305\u65f6\uff0c\u8be5\u5b57\u6bb5\u4e3a\u51680\uff1b\u5f53\u62a5\u6587\u4e3a\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u65f6 \u8be5\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u6240\u67e5\u8be2\u7684\u7ec4\u64ad\u7ec4\u7684\u5730\u5740\u3002 \u5f53\u62a5\u6587\u4e3a\u6210\u5458\u5173\u7cfb\u62a5\u544a\u6216\u79bb\u7ec4\u62a5\u6587\u65f6\uff0c\u8be5\u5b57\u6bb5\u7684\u503c\u8bbe\u7f6e\u4e3a\u76ee\u6807\u7ec4\u64ad\u7ec4\u5730\u5740\u3002","title":"\u62a5\u6587\u683c\u5f0f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_235","text":"","title":"\u62a5\u6587\u7c7b\u578b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#membership-querytype0x11","text":"IGMPv2\u7684\u6210\u5458\u5173\u7cfb\u67e5\u8be2\u5305\u62ec\u4e24\u79cd\u62a5\u6587\uff1a","title":"\u6210\u5458\u5173\u7cfb\u67e5\u8be2Membership Query\uff08TYPE\u5b57\u6bb5\uff1a0x11\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#general-query","text":"\u5e38\u89c4\u67e5\u8be2\u62a5\u6587\u53c8\u53eb\u505a\u666e\u904d\u7ec4\u67e5\u8be2\uff0c\u7528\u4e8eIGMP\u67e5\u8be2\u5668\u7684\u5e38\u89c4\u6027\u7684\u3001\u9488\u5bf9\u6240\u6709\u7ec4\u64ad\u7ec4\u7684\u67e5\u8be2\u3002\u8be5\u62a5\u6587\u7684\u76ee\u7684IP\u662f224.0.0.1\uff0c\u62a5\u6587\u4e2d\u7684\u7ec4\u5730\u5740\u5b57\u6bb5\u8bbe\u7f6e\u4e3a0.0.0.0\u3002 \u5e38\u89c4\u67e5\u8be2\u62a5\u6587\u9ed8\u8ba460s\u53d1\u9001\u4e00\u6b21\u3002 \u8fd9\u4e2a\u67e5\u8be2\u4e2d\u540c\u65f6\u5305\u542bMax Response Time\uff0c\u8fd9\u4e2a\u503c\u544a\u8bc9\u4e3b\u673a\u7528\u6210\u5458\u5173\u7cfb\u62a5\u544a\u62a5\u6587\u56de\u5e94\u8fd9\u4e2a\u67e5\u8be2\u7684\u6700\u957f\u7b49\u5f85\u65f6\u95f4\uff0c\u8be5\u65f6\u95f4\u9ed8\u8ba410s\u3002","title":"\u5e38\u89c4\u67e5\u8be2General Query"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#group-specific-query","text":"\u8def\u7531\u5668\u7684\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u662f\u5f53\u5b50\u7f51\u4e2d\u7684\u4e3b\u673a\u53d1\u51fa\u79bb\u7ec4\u62a5\u6587\u800c\u89e6\u53d1\u7684\uff0c\u5f53\u8def\u7531\u5668\u6536\u5230\u79bb\u7ec4\u62a5\u6587\u65f6\uff0c\u8def\u7531\u5668\u77e5\u9053\u6709\u7279\u5b9a\u7684\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u8981\u79bb\u5f00\u8be5\u7ec4\uff0c\u5b83\u5fc5\u987b\u5224\u65ad\u662f\u5426\u4ecd\u6709\u8be5\u7ec4\u64ad\u7ec4\u7684\u5176\u4ed6\u7ec4\u5458\u5b58\u5728\uff0c\u56e0\u6b64\u4f7f\u7528\u8be5\u62a5\u6587\u3002\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u4e3a\u53d1\u51fa\u79bb\u7ec4\u62a5\u6587\u7684\u4e3b\u673a\u6240\u5728\u7ec4\u7684\u7ec4\u5730\u5740\u3002 \u4e3a\u4e86\u907f\u514d\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u88ab\u610f\u5916\u4e22\u5f03\u6216\u88ab\u7834\u574f\u5bfc\u81f4\u8def\u7531\u5668\u8bef\u4ee5\u4e3a\u7ec4\u5185\u6ca1\u6709\u6210\u5458\u4e86\uff0c\u67e5\u8be2\u8def\u7531\u5668\u4ee51s\u7684\u65f6\u95f4\u95f4\u9694\u8fde\u7eed\u53d1\u9001\u4e24\u4e2a\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\uff0c\u5982\u679c\u4f9d\u7136\u6ca1\u6709\u6210\u5458\u54cd\u5e94\uff0c\u8def\u7531\u5668\u5220\u9664\u8be5\u7ec4\u3002","title":"\u7279\u5b9a\u7ec4\u67e5\u8be2Group-Specific Query"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#membership-reporttype0x16","text":"\u4e3b\u673a\u4f7f\u7528\u8be5\u62a5\u6587\u5ba3\u544a\u81ea\u5df1\u52a0\u5165\u67d0\u4e2a\u7ec4\u64ad\u7ec4\u3002\u8fd9\u4e2a\u62a5\u6587\u5728\u4e00\u53f0\u4e3b\u673a\u7b2c\u4e00\u6b21\u52a0\u5165\u7ec4\u64ad\u7ec4\u65f6\u53d1\u9001\u3002\u53e6\u5916\uff0c \u4e5f\u7528\u6765\u54cd\u5e94IGMP\u8def\u7531\u5668\u53d1\u51fa\u7684\u67e5\u8be2\u62a5\u6587\u3002\u8be5\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u662f\u8be5\u4e3b\u673a\u671f\u671b\u52a0\u5165\u7684\u7ec4\u64ad\u7ec4\u5730\u5740\u3002","title":"\u6210\u5458\u5173\u7cfb\u62a5\u544aMembership Report\uff08Type\u5b57\u6bb5\uff1a0x16\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#version1-membership-reporttype0x12","text":"\u4f5c\u7528\u540c\u4e0a\uff0c\u4e0d\u8fc7\u8be5\u62a5\u6587\u662f\u4e3a\u517c\u5bb9IGMPv1\u800c\u8bbe\u5b9a\u7684\u62a5\u6587\u3002","title":"Version1 Membership Report\uff08Type\u5b57\u6bb5\uff1a0x12\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#leave-grouptype0x17","text":"\u5f53\u4e3b\u673a\u8981\u79bb\u5f00\u7ec4\u64ad\u7ec4\u65f6\u53d1\u9001\uff0c\u8be5\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u4e3a224.0.0.2\u3002 \u8fd9\u4e2a\u62a5\u6587\u5305\u542b\u4e3b\u673a\u671f\u671b\u9000\u51fa\u7684\u7ec4\u64ad\u7ec4\u7684\u5730\u5740\u3002\u5f53IGMP\u8def\u7531\u5668\u6536\u5230\u4e00\u4e2a\u79bb\u5f00\u62a5\u6587\u7684\u65f6\u5019\uff0c\u4f1a\u5411\u8fd9\u4e2a\u7279\u5b9a\u7ec4\u53d1\u9001\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\uff0c\u8fd9\u6837\uff0c\u5982\u679c\u8fd9\u4e2a\u7ec4\u5185\u8fd8\u6709\u5176\u4ed6PC\uff0c\u5219\u6709\u4eba\u4f1a\u56de\u5e94\uff0c\u5982\u679c\u6ca1\u6709\u4eba\u56de\u5e94\uff0c \u5219\u8def\u7531\u5668\u5c06\u4e0d\u5411\u8be5\u7ec4\u53d1\u9001\u7ec4\u64ad\u62a5\u6587\u3002","title":"\u79bb\u7ec4\u62a5\u544aLeave Group\uff08Type\u5b57\u6bb5\uff1a0x17\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_236","text":"IGMP\u8def\u7531\u5668\u4f1a\u5468\u671f\u6027\u5730\u5411\u76f4\u8fde\u7f51\u6bb5\u4e2d\u53d1\u9001IGMPv2\u5e38\u89c4\u67e5\u8be2\u62a5\u6587\u3002 PC1\u53caPC3\u4f1a\u6536\u5230\u8fd9\u4e2a\u67e5\u8be2\u5305\uff0c\u968f\u540e\u4f1a\u5404\u81ea\u542f\u52a8\u4e00\u4e2a\u201c\u62a5\u544a\u5ef6\u8fdf\u8ba1\u65f6\u5668\u201d\uff0c\u8fd9\u4e2a\u8ba1\u65f6\u5668\u662f\u7531\u4e3b\u673a\u81ea\u5df1\u968f\u673a\u4ea7\u751f\u7684\uff0c\u65f6\u95f4\u8303\u56f4\u662f0-10s\uff0810s\u53d6\u81eaA\u53d1\u9001\u7684\u67e5\u8be2\u62a5\u6587\u4e2d\u7684Max Response Time\uff09\u4e4b\u95f4\u7684\u4e00\u4e2a\u503c\uff0c\u8be5\u8ba1\u65f6\u5668\u542f\u52a8\u540e\u5f00\u59cb\u5012\u8ba1\u65f6\uff0c\u8ba1\u6570\u52300\u540e\u4e3b\u673a\u5c31\u4f1a\u53d1\u9001IGMPv2\u6210\u5458\u5173\u7cfb\u62a5\u544a\u3002 \u5047\u8bbe\u5728\u4e0a\u56fe\u4e2d\uff0cPC1\u7684\u62a5\u544a\u5ef6\u8fdf\u8ba1\u65f6\u5668\u5148\u8ba1\u65f6\u52300\uff0c\u90a3\u4e48\u5b83\u4f1a\u54cd\u5e94\u4e00\u4e2a\u6210\u5458\u5173\u7cfb\u62a5\u544a\u4ee5\u4fbf\u901a\u77e5A\u8def\u7531\u5668\u7ec4\u64ad\u7ec4224.1.1.1\u5185\u6709\u81ea\u5df1\u8fd9\u4e48\u4e00\u4e2a\u6210\u5458\u5728\u3002\u800c\u6b64\u65f6PC3\u7684\u62a5\u544a\u5ef6\u8fdf\u8ba1\u65f6\u5668\u8fd8\u672a\u8d85\u65f6\uff0c\u56e0\u6b64\u5f53\u5b83\u6536\u5230\u540c\u4e00\u4e2a\u7ec4\u64ad\u7ec4\u7684PC1\u53d1\u9001\u7684\u6210\u5458\u5173\u7cfb\u62a5\u544a\u540e\uff0c\u5c06\u6291\u5236\u81ea\u5df1\u7684\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff08\u56e0\u4e3a\u6ca1\u6709\u5fc5\u8981\u91cd\u590d\u53d1\u9001\uff09\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u7f51\u7edc\u4e2d\u51fa\u73b0\u5927\u91cf\u7684\u6210\u5458\u5173\u7cfb\u62a5\u544a\u3002","title":"\u67e5\u8be2\u53ca\u54cd\u5e94\u673a\u5236"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_237","text":"PC1\u8981\u79bb\u5f00\u7ec4224.1.1.1\uff0c\u5b83\u4e3b\u52a8\u5411\u7f51\u7edc\u4e2d\u53d1\u9001IGMPv2\u79bb\u7ec4\u62a5\u6587\u7528\u4e8e\u5ba3\u544a\u81ea\u5df1\u79bb\u5f00\u7ec4\u64ad\u7ec4224.1.1.1\uff0c\u8be5\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u662f224.0.0.2\u3002 R1\u6536\u5230\u8be5\u62a5\u6587\u540e\uff0c\u4ee51s\u4e3a\u95f4\u9694\u8fde\u7eed\u53d1\u9001IGMP\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\uff08\u5171\u8ba1\u53d1\u90012\u4e2a\uff09\uff0c\u4ee5\u4fbf\u786e\u8ba4\u8be5\u7f51\u6bb5\u4e2d\u662f\u5426\u8fd8\u6709224.1.1.1\u7ec4\u7684\u5176\u4ed6\u6210\u5458\u3002 PC3\u4ecd\u7136\u662f\u7ec4224.1.1.1\u7684\u6210\u5458\uff0c\u56e0\u6b64\u5b83\u5c06\u7acb\u5373\u54cd\u5e94\u8be5\u7279\u5b9a\u7ec4\u67e5\u8be2\u3002\u5982\u6b64\u4e00\u6765R1\u4fbf\u77e5\u9053\u8be5\u5b50\u7f51\u4e2d\u4ecd\u7136\u5b58\u5728\u8be5\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u3002 \u73b0\u5728\uff0cPC2\u8981\u79bb\u5f00\u7ec4\u64ad\u7ec4224.2.2.2\uff0c\u5b83\u4e3b\u52a8\u5411\u7f51\u7edc\u4e2d\u53d1\u9001IGMPv2\u79bb\u7ec4\u62a5\u6587\u3002 R1\u6536\u5230\u8be5\u62a5\u6587\u540e\uff0c\u4ee51s\u4e3a\u95f4\u9694\u8fde\u7eed\u53d1\u9001IGMP\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\uff08\u5171\u8ba1\u53d1\u90012\u4e2a\uff09\uff0c\u4ee5\u4fbf\u786e\u8ba4\u8be5\u7f51\u6bb5\u4e2d\u662f\u5426\u8fd8\u6709224.2.2.2\u7684\u5176\u4ed6\u6210\u5458\u3002 \u73b0\u5728\u7ec4224.2.2.2\u5df2\u7ecf\u6ca1\u6709\u6210\u5458\u4e86\uff0c\u56e0\u6b64\u6ca1\u6709\u4e3b\u673a\u54cd\u5e94\u8fd9\u4e2a\u67e5\u8be2\u3002R1\u4fbf\u8ba4\u4e3a\u8be5LAN\u4e2d\u5df2\u7ecf\u6ca1\u6709 224.2.2.2\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u4e86\uff0c\u5c06\u4e0d\u4f1a\u518d\u5411\u8fd9\u4e2aLAN\u4e2d\u8f6c\u53d1\u8be5\u7ec4\u7684\u7ec4\u64ad\u6d41\u91cf\u3002","title":"\u79bb\u5f00\u673a\u5236"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmpv2","text":"\u5982\u679c\u4e00\u4e2a\u7f51\u6bb5\u4e2d\u6709\u591a\u53f0IGMP\u8def\u7531\u5668\uff0c\u8fd9\u4e9b\u8def\u7531\u5668\u90fd\u53d1\u9001IGMP\u67e5\u8be2\u7684\u8bdd\u90a3\u5c31\u663e\u5f97\u975e\u5e38\u591a\u4f59\u4e14\u4f4e\u6548\u3002 IGMP\u4f1a\u5728\u8fd9\u4e9b\u8def\u7531\u5668\uff08\u7684\u63a5\u53e3\uff09\u4e2d\u9009\u4e3e\u51fa\u4e00\u4e2aIGMP\u67e5\u8be2\u5668\u3002IGMPv2\u5b9a\u4e49\u4e86\u67e5\u8be2\u5668\u7684\u9009\u4e3e\u529e\u6cd5\uff1aIP\u5730\u5740\u6700\u5c0f\u7684\u8def\u7531\u5668\u5145\u5f53\u8be5\u7f51\u6bb5\u7684IGMP\u67e5\u8be2\u5668\uff0c\u7531\u5b83\u6765\u53d1\u9001\u67e5\u8be2\u62a5\u6587\u3002\u5728\u4e0a\u56fe\u4e2d\uff0cR1\u7684GE0/0/0\u63a5\u53e3\u5730\u5740\u6bd4R2\u7684GE0/0/0\u63a5\u53e3\u5730\u5740\u66f4\u5c0f\uff0c\u56e0\u6b64\u5b83\uff08\u7684\u63a5\u53e3\uff09\u6210\u4e3a\u8be5\u7f51\u6bb5\u7684IGMP\u67e5\u8be2\u5668\u3002 \u82e5\u975e\u67e5\u8be2\u5668\uff08\u4f8b\u5982\u672c\u4f8b\u4e2d\u7684R2\u7684GE0/0/0\u63a5\u53e3\uff09\u5728\u201cOther Querier Present Timer\u201d\u8ba1\u65f6\u5668\uff08\u9ed8\u8ba4125s\uff09 \u8d85\u65f6\u540e\u4f9d\u7136\u6ca1\u6709\u6536\u5230\u67e5\u8be2\u5668\u53d1\u9001\u7684IGMP\u67e5\u8be2\u62a5\u6587\uff0c\u90a3\u4e48\u5b83\u4f1a\u8ba4\u4e3a\u67e5\u8be2\u5668\u5df2\u7ecf\u6545\u969c\uff0c\u65b0\u4e00\u8f6e\u7684\u67e5\u8be2\u5668\u9009\u4e3e\u5c06\u4f1a\u88ab\u89e6\u53d1\u3002","title":"IGMPv2\u67e5\u8be2\u5668"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_238","text":"","title":"\u51e0\u4e2a\u8ba1\u65f6\u5668"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#robustness-variable","text":"Robustness Variable\uff08\u6216\u8005robust-count\uff09\uff0c\u5065\u58ee\u6027\u53d8\u91cf\uff0c\u9ed8\u8ba4\u503c\u4e3a2\u3002\u8fd9\u4e2a\u7cfb\u6570\u6216\u8005\u8bf4\u53d8\u91cf\u4f1a\u5f71\u54cdIGMP \u7684\u67d0\u4e9b\u64cd\u4f5c\uff0c\u4f8b\u5982\u4f5c\u4e3a\u8ba1\u7b97\u67d0\u4e2a\u8ba1\u65f6\u5668\u65f6\u4f7f\u7528\u7684\u4e00\u4e2a\u53c2\u6570\u7b49\u3002\u5065\u58ee\u7cfb\u6570\u8d8a\u5927\uff0cIGMP\u8def\u7531\u5668\u5c31\u8d8a\u5065\u58ee\uff0c \u4f46\u662f\u7ec4\u8d85\u65f6\u7684\u65f6\u95f4\u4e5f\u5c31\u8d8a\u957f\u3002 \u6267\u884c\u547d\u4ee4**robust-count robust-value**\u914d\u7f6eIGMP\u5065\u58ee\u7cfb\u6570\u3002\u5065\u58ee\u7cfb\u6570\u4e3b\u8981\u7528\u4e8e\uff1a \u5f53\u8def\u7531\u5668\u542f\u52a8\u65f6\uff0c\u53d1\u9001\u201c\u5065\u58ee\u7cfb\u6570\u201d\u6b21\u7684\u201c\u666e\u904d\u7ec4\u67e5\u8be2\u62a5\u6587\u201d\uff0c\u53d1\u9001\u95f4\u9694\u4e3a\u201cIGMP\u5e38\u89c4\u67e5\u8be2\u62a5\u6587\u7684\u53d1\u9001\u95f4\u9694Query interval\u201d\u7684\u00bc\u3002 \u5f53\u8def\u7531\u5668\u6536\u5230\u79bb\u5f00\u62a5\u6587\u540e\uff0c \u5bf9\u4e8eIGMPv2\uff0c\u8def\u7531\u5668\u53d1\u9001\u201c\u5065\u58ee\u7cfb\u6570\u201d\u6b21\u7684\u201c\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u201d\uff0c\u53d1\u9001\u95f4\u9694\u4e3a\u201cIGMP\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u7684\u53d1\u9001\u95f4\u9694Lastmember-queryinterval\u201d\u3002 \u5bf9\u4e8eIGMPv3\uff0c\u8def\u7531\u5668\u53d1\u9001\u201c\u5065\u58ee\u7cfb\u6570\u201d\u6b21\u7684\u201c\u7279\u5b9a\u7ec4/\u6e90\u67e5\u8be2\u62a5\u6587\u201d\uff0c\u53d1\u9001\u95f4\u9694\u4e3a\u201cIGMP\u7279\u5b9a\u7ec4/\u6e90\u67e5\u8be2\u62a5\u6587\u7684\u53d1\u9001\u95f4\u9694\u201d\u3002","title":"Robustness Variable"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmpv1v2","text":"IGMPv2\u5b9a\u4e49\u4e86\u67e5\u8be2\u5668\u7684\u9009\u4e3e\u673a\u5236\uff0cIGMPv1\u6ca1\u6709\uff0c\u540e\u8005\u9700\u4f9d\u8d56\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u3002 IGMPv2\u5728\u67e5\u8be2\u62a5\u6587\u4e2d\u589e\u52a0\u201c\u6700\u5927\u54cd\u5e94\u65f6\u95f4\u201d\u5b57\u6bb5\uff0cIGMPv1\u6ca1\u6709\u5b9a\u4e49\u8be5\u5b57\u6bb5\u3002 IGMPv2\u589e\u52a0\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\uff0cIGMPv1\u6ca1\u6709\u5b9a\u4e49\u8be5\u62a5\u6587\u3002 IGMPv2\u5b9a\u4e49\u4e86\u79bb\u7ec4\u673a\u5236\uff0c\u800cIGMPv1\u4e2d\u7ec4\u64ad\u7ec4\u6210\u5458\u662f\u9ed8\u9ed8\u7684\u79bb\u5f00\u3002","title":"IGMPv1\u4e0ev2\u7684\u533a\u522b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmp","text":"","title":"IGMP \u914d\u7f6e\u53ca\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_239","text":"","title":"\u914d\u7f6e\u547d\u4ee4"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_240","text":"[Huawei] multicast routing-enable","title":"\u6fc0\u6d3b\u8def\u7531\u5668\u7684\u7ec4\u64ad\u8def\u7531\u529f\u80fd"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmpigmp","text":"","title":"\u5728\u63a5\u53e3\u4e0a\u6fc0\u6d3bIGMP\u5e76\u9009\u62e9IGMP\u7684\u7248\u672c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmp_1","text":"","title":"\u914d\u7f6eIGMP\u67e5\u8be2"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#igmpv2_1","text":"\u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u53ef\u5728\u8def\u7531\u5668\u4e0a\u67e5\u770bIGMP\u7684\u76f8\u5173\u53c2\u6570\uff1a \u4e5f\u53ef\u4ee5\u8fdb\u4e00\u6b65\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f\uff1a \u73b0\u5728PC1\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\uff0c\u7136\u540e\u6211\u4eec\u5728A\u4e0a\u505a\u67e5\u770b\uff1a \u53ef\u4f7f\u7528**display igmp group verbose**\u518d\u8fdb\u4e00\u6b65\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f\u3002\u63a5\u7740PC1\u79bb\u5f00\u7ec4\u64ad\u7ec4224.1.1.1\uff1a A\u4f1a\u4ee51s\u4e3a\u95f4\u9694\u8fde\u7eed\u53d1\u9001\u4e24\u4e2a\u7279\u5b9a\u7ec4\u67e5\u8be2\u62a5\u6587\u3002\u5728\u786e\u5b9a\u8be5\u7ec4\u7f51\u4e2d\u4e0d\u518d\u6709224.1.1.1\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u540e\uff0cA\u5c06\u8be5\u7ec4\u64ad\u7ec4\u5220\u9664\u3002 \u7ec4\u64ad\u8def\u7531\u534f\u8bae\u6982\u8ff0 \u5173\u4e8e\u7ec4\u64ad\u8def\u7531\u534f\u8bae \u5355\u64ad\u6570\u636e\u5305\u7684\u8f6c\u53d1\uff0c\u662f\u4e00\u4e2a\u4e00\u5bf9\u4e00\u7684\u8fc7\u7a0b\uff0c\u8def\u7531\u5668\u5c06IP\u6570\u636e\u5305\u9001\u5230\u5b83\u7684\u76ee\u7684\u5730\uff0c\u5355\u64ad\u8def\u7531\u5668\u5e76\u4e0d\u5173\u5fc3\u6570\u636e\u5305\u7684\u6e90\u5730\u5740\u3002\u800c\u7ec4\u64ad\u6570\u636e\u662f\u7531\u7ec4\u64ad\u6e90\u4ea7\u751f\u3001\u53d1\u5411\u4e00\u7ec4\u63a5\u6536\u8005\u7684\uff0c\u7ec4\u64ad\u8def\u7531\u5668\u5c06\u6570\u636e\u5305\u4ece\u6e90\u5206\u53d1\u4e0b\u53bb\uff0c \u4e00\u76f4\u5230\u7ec4\u64ad\u7684\u63a5\u6536\u8005\u3002\u90a3\u4e48\u7ec4\u64ad\u8def\u7531\u5668\u5982\u4f55\u77e5\u9053\uff0c\u8be5\u5c06\u7ec4\u64ad\u6570\u636e\u5411\u54ea\u91cc\u53bb\u8f6c\u53d1\uff0c\u54ea\u4e9b\u63a5\u53e3\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\uff1f\u7ec4\u64ad\u6d41\u91cf\u8981\u8d70\u4ec0\u4e48\u8def\u5f84\uff1f\u8fd9\u5c31\u8981\u7528\u5230\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u4e86\u3002 \u53e6\u5916\u4e00\u70b9\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u7ec4\u64ad\u6d41\u91cf\u4e0e\u5355\u64ad\u6d41\u91cf\u4e0d\u540c\uff0c\u7ec4\u64ad\u6d41\u91cf\u53d1\u5f80\u4e00\u7ec4\u63a5\u6536\u8005\uff0c\u5982\u679c\u7f51\u7edc\u4e2d\u6709\u73af\u8def\u5b58\u5728\uff0c\u90a3\u4e48\u60c5\u51b5\u6bd4\u5355\u64ad\u73af\u8def\u4e25\u91cd\u5f97\u591a\uff0c\u56e0\u6b64\u6240\u6709\u7684\u7ec4\u64ad\u8def\u7531\u5668\u5fc5\u987b\u77e5\u9053\u7ec4\u64ad\u7684\u6e90\uff0c\u4e5f\u5fc5\u987b\u628a\u7ec4\u64ad\u6570\u636e\u5305\u4ece\u6e90\uff08\u6765\u7684\u65b9\u5411\uff09\u5411\u76ee\u6807\u8f6c\u53d1\u3002\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u4ece\u4e0a\u6e38\u8f6c\u53d1\u5230\u4e0b\u6e38\uff0c\u6bcf\u4e00\u4e2a\u7ec4\u64ad\u8def\u7531\u5668\u90fd\u7ef4\u62a4\u4e00\u4e2a\u7ec4\u64ad\u524d\u4f20\u8868\uff08\u7ec4\u64ad\u8def\u7531\u8868\uff09\u3002 \u7ec4\u64ad\u8def\u7531\u8868\u9879 \u5728\u4e00\u4e2a\u7ec4\u64ad\u7f51\u7edc\u4e2d\uff0c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u9700\u8981\u8fd0\u884c\u5728\u7f51\u7edc\u8bbe\u5907\uff08\u4f8b\u5982\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u7b49\uff09\u4e0a\uff0c\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u5728\u7f51\u7edc\u4e2d\u5de5\u4f5c\u540e\u7684\u6700\u4e3b\u8981\u7684\u6210\u679c\u4e4b\u4e00\u4fbf\u662f\u6784\u5efa\u4e00\u68f5\u65e0\u73af\u7684\u7ec4\u64ad\u5206\u53d1\u6811\uff0c\u8fd9\u68f5\u6811\u63cf\u7ed8\u4e86\u7ec4\u64ad\u6d41\u91cf\u5728\u7ec4\u64ad\u7f51\u7edc\u4e2d\u7684\u8f6c\u53d1\u8def\u5f84\u3002\u800c\u8fd9\u4e2a\u6240\u8c13\u7684\u6811\u5f53\u7136\u662f\u5b9e\u9645\u4e2d\u5e76\u4e0d\u5b58\u5728\u7684\uff0c\u53ea\u662f\u4eba\u4e3a\u62bd\u8c61\u51fa\u6765\u7684\u3002\u8fd9\u4e2a\u6811\u5728\u6bcf\u4e00\u53f0\u7ec4\u64ad\u7f51\u7edc\u8bbe\u5907\u4e0a\u7684\u4f53\u73b0\uff0c\u4fbf\u662f\u7ec4\u64ad\u8def\u7531\u8868\u9879\u3002\u7ec4\u64ad\u8def\u7531\u8868\u9879\u7c7b\u4f3c\u5355\u64ad\u8def\u7531\u4e2d\u7684\u8def\u7531\u8868\u3002 \u672c\u624b\u518c\u53ea\u4ecb\u7ecdPIM\u8fd9\u4e00\u4e2a\u7ec4\u64ad\u8def\u7531\u534f\u8bae\uff0c\u56e0\u6b64\u6b64\u5904\u4ee5PIM\u4e3a\u4f8b\u8fdb\u884c\u8bb2\u89e3\u3002 PIM\u8def\u7531\u8868\u9879\u5373\u901a\u8fc7PIM\u534f\u8bae\u5efa\u7acb\u7684\u7ec4\u64ad\u8def\u7531\u8868\u9879\u3002PIM\u7f51\u7edc\u4e2d\u5b58\u5728\u4e24\u79cd\u8def\u7531\u8868\u9879\uff1a\uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\u6216\uff08*\uff0c G\uff09\u8def\u7531\u8868\u9879\u3002S\u8868\u793a\u7ec4\u64ad\u6e90\uff0cG\u8868\u793a\u7ec4\u64ad\u7ec4\uff0c*\u8868\u793a\u4efb\u610f\u3002 \uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\u77e5\u9053\u7ec4\u64ad\u6e90S\u7684\u4f4d\u7f6e\uff0c\u4e3b\u8981\u7528\u4e8e\u5728PIM\u8def\u7531\u5668\u4e0a\u5efa\u7acbSPT\u3002\u5bf9\u4e8ePIM-DM\u7f51\u7edc\u548cPIM- SM\u7f51\u7edc\u9002\u7528\u3002 \uff08*\uff0cG\uff09\u8def\u7531\u8868\u9879\u7531\u4e8e\u53ea\u77e5\u9053\u7ec4\u64ad\u7ec4G\u7684\u5b58\u5728\uff0c\u4e3b\u8981\u7528\u4e8e\u5728PIM\u8def\u7531\u5668\u4e0a\u5efa\u7acbRPT\u3002\u5bf9\u4e8ePIM-SM\u7f51\u7edc\u548c\u53cc\u5411PIM\u7f51\u7edc\u9002\u7528\u3002 PIM\u8def\u7531\u5668\u4e0a\u53ef\u80fd\u540c\u65f6\u5b58\u5728\u4e24\u79cd\u8def\u7531\u8868\u9879\u3002\u5f53\u6536\u5230\u6e90\u5730\u5740\u4e3aS\uff0c\u7ec4\u5730\u5740\u4e3aG\u7684\u7ec4\u64ad\u62a5\u6587\uff0c\u4e14\u901a\u8fc7RPF\u68c0\u67e5\u7684\u60c5\u51b5\u4e0b\uff0c\u6309\u7167\u5982\u4e0b\u7684\u89c4\u5219\u8f6c\u53d1\uff1a \u5982\u679c\u5b58\u5728\uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\uff0c\u5219\u7531\uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\u6307\u5bfc\u62a5\u6587\u8f6c\u53d1\u3002 \u5982\u679c\u4e0d\u5b58\u5728\uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\uff0c\u53ea\u5b58\u5728\uff08*\uff0cG\uff09\u8def\u7531\u8868\u9879\uff0c\u5219\u5148\u4f9d\u7167\uff08*\uff0cG\uff09\u8def\u7531\u8868\u9879\u521b\u5efa\uff08S\uff0cG\uff09 \u8def\u7531\u8868\u9879\uff0c\u518d\u7531\uff08S\uff0cG\uff09\u8def\u7531\u8868\u9879\u6307\u5bfc\u62a5\u6587\u8f6c\u53d1\u3002 \u7ec4\u64ad\u5206\u53d1\u6811 \u7ec4\u64ad\u5206\u53d1\u6811\uff08Multicast Distribution Trees\uff09\uff0c\u662f\u7528\u4e8eIP\u7ec4\u64ad\u6570\u636e\u5305\u5728\u7f51\u7edc\u4e2d\u4f20\u8f93\u7684\u8def\u5f84\u3002\u7ec4\u64ad\u5206\u6811\u7531\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u6784\u5efa\u53ca\u7ef4\u62a4\uff0c\u6709\u4e86\u8fd9\u68f5\u6811\uff0c\u7ec4\u64ad\u6d41\u91cf\u4e5f\u5c31\u660e\u786e\u4e86\u8f6c\u53d1\u8def\u5f84\u3002 \u6709\u4e24\u79cd\u7ec4\u64ad\u5206\u53d1\u6811\uff1a\u6e90\u6811\uff08\u6216\u8005\u79f0\u4e3a\u6700\u77ed\u8def\u5f84\u6811\uff09\u53ca\u5171\u4eab\u6811\uff1a \u6e90\u6811\uff08Source Distribution tree\uff09\uff1a\u6216\u53eb\u6700\u77ed\u8def\u5f84\u6811\uff08Shortest-path trees\uff0cSPT\uff09\uff0c\u6811\u6839\u662f\u7ec4\u64ad\u6e90\uff0c\u6e90\u6811\u7684\u5206\u652f\u5f62\u6210\u4e86\u901a\u8fc7\u7f51\u7edc\u5230\u8fbe\u7ec4\u64ad\u63a5\u6536\u8005\u7684\u5206\u5e03\u6811\u3002\u56e0\u4e3a\u6e90\u6811\u4ee5\u6700\u77ed\u7684\u8def\u5f84\u8d2f\u7a7f\u7f51\u7edc\uff0c\u6240\u4ee5\u53c8\u53eb\u6700\u77ed\u8def\u5f84\u6811SPT\u3002\u6e90\u6811\u4f7f\u7528\uff08S\uff0cG\uff09\u7684\u7ec4\u64ad\u8868\u9879\u6807\u8bb0\uff0c\u6b64\u6807\u8bb0\u6697\u793a\u6bcf\u4e2a\u7ec4\u5355\u72ec\u7684\u6e90\u90fd\u6709\u4e00\u4e2aSPT\u3002 \u6e90\u6811\u7684\u6839\u662f\u7ec4\u64ad\u6e90\uff0c\u53ef\u4ee5\u5f88\u76f4\u89c2\u7684\u770b\u5230\u6e90\u6811\u7684\u5f0a\u7aef\uff1a\u5047\u8bbe\u5728\u4e00\u4e2a\u7ec4\u64ad\u57df\u4e2d\u6709200\u4e2a\u7ec4\u64ad\u7ec4\uff0c\u5e73\u5747\u6bcf\u4e2a\u7ec4 30\u4e2a\u6e90\uff0c\u90a3\u4e48\u6bcf\u4e2a\u8def\u7531\u5fc5\u987b\u4e3a\u4e00\u4e2a\u7ec4\u8bb0\u5f5530\u4e2a\uff08S\uff0cG\uff09\u5bf9\uff08\u4ea4\u4e92\u5f0f\u7684\u7ec4\u64ad\u5e94\u7528\u4e2d\uff0c\u8bb8\u591a\u7ec4\u5458\uff0c\u4e5f\u5373\u63a5\u53d7\u8005\u540c\u65f6\u4e5f\u662f\u4e00\u4e2a\u6e90\uff0c\u4e5f\u5373\u53d1\u8d77\u8005\uff09\uff0c\u90a3\u4e48\u5c31\u662f30*200\u4e2a\u3002\u5982\u6b64\u4e00\u6765\u6bcf\u53f0\u7ec4\u64ad\u8def\u7531\u5668\u9700\u8981\u7ef4\u62a4\u7684\u7ec4\u64ad\u8868\u9879\u5c31\u975e\u5e38\u591a\uff0c\u6240\u6d88\u8017\u7684\u8d44\u6e90\u81ea\u7136\u4e5f\u5c31\u4e0a\u53bb\u4e86\u3002 \u5171\u4eab\u6811\uff08Shared Tree\uff09\uff1a\u4e0e\u6e90\u6811\u4f7f\u7528\u7ec4\u64ad\u6e90\u4f5c\u4e3a\u6839\u4e0d\u540c\uff0c\u5171\u4eab\u6811\u4f7f\u7528RP\u4f5c\u4e3a\u6c47\u805a\u70b9\u3002\u5171\u4eab\u6811\u7684\u901a\u7528\u540d\uff1a RPT\u3002\u5171\u4eab\u6811\u4f7f\u7528\uff08*\uff0cG\uff09\u7684\u7ec4\u64ad\u8def\u7531\u8868\u9879\u6807\u8bb0\u3002\u591a\u4e2a\u7ec4\u64ad\u7ec4\u53ef\u4ee5\u5171\u7528\u4e00\u4e2aRP\uff0c\u671f\u671b\u63a5\u6536\u7ec4\u64ad\u6d41\u91cf\u7684\u8def\u7531\u5668\u901a\u8fc7\u7ec4\u64ad\u534f\u8bae\u5728\u81ea\u5df1\u4e0eRP\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761RPT\u7684\u5206\u652f\uff0c\u7ec4\u64ad\u6d41\u91cf\u9996\u5148\u9700\u8981\u4ece\u6e90\u53d1\u9001\u5230RP\uff0c\u7136\u540e\u518d\u7531RP\u5c06\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\u4e0b\u6765\uff0c\u7ec4\u64ad\u6d41\u91cf\u987a\u7740RPT\u6700\u7ec8\u5230\u8fbe\u5404\u4e2a\u63a5\u6536\u8005\u6240\u5728\u7684\u7ec8\u7aef\u7f51\u7edc\u3002","title":"IGMPv2\u914d\u7f6e\u793a\u4f8b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#rpf","text":"\u524d\u9762\u5df2\u7ecf\u8bf4\u4e86\uff0c\u5728\u7ec4\u64ad\u7684\u73af\u5883\u4e0b\uff0c\u5982\u679c\u6570\u636e\u51fa\u73b0\u73af\u8def\u5f71\u54cd\u662f\u975e\u5e38\u5927\u7684\u3002\u8def\u7531\u5668\u5982\u4f55\u786e\u4fdd\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\u7684\u65e0\u73af\u5462\uff1f\u7ec4\u64ad\u8def\u7531\u5668\u6536\u5230\u7ec4\u64ad\u6570\u636e\u62a5\u6587\u540e\uff0c\u53ea\u6709\u786e\u8ba4\u8fd9\u4e2a\u6570\u636e\u62a5\u662f\u4ece\u81ea\u5df1\u671d\u5411\u7ec4\u64ad\u6e90\u7684\u63a5\u53e3\u4e0a\u6536\u5230\u7684\uff0c\u8be5\u62a5\u6587\u624d\u4f1a\u88ab\u8f6c\u53d1\uff0c\u5426\u5219\u88ab\u4e22\u5f03\uff0c\u8fd9\u5c31\u662fRPF\uff08Reverse Path Forwarding\uff09\u68c0\u67e5\u3002 \u8bdd\u53c8\u8bf4\u56de\u6765\u4e86\uff0c\u8def\u7531\u5668\u5982\u4f55\u77e5\u9053\uff0c\u8be5\u63a5\u53e3\u662f\u5426\u662f\u201c\u671d\u5411\u201d\u7ec4\u64ad\u6e90\u7684\u63a5\u53e3\u5462\uff1f\u6700\u5e38\u89c1\u7684\u505a\u6cd5\u662f\u8def\u7531\u5668\u901a\u8fc7\u5355\u64ad\u8def\u7531\u8868\u6765\u534f\u52a9\u505aRPF\uff0c\u4e5f\u5c31\u662f\u770b\u5355\u64ad\u8def\u7531\u8868\u4e2d\uff0c\u5230\u8fbe\u6e90\u7684\u5355\u64ad\u8def\u7531\uff0c\u8be5\u8def\u7531\u7684\u51fa\u63a5\u53e3\u5373\u4e3a\u671d\u5411\u6e90\u7684\u63a5\u53e3\u3002 \u5728\u5355\u64ad\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u5230\u7ec4\u64ad\u62a5\u6587\u6e90\u5730\u5740\u7684\u5355\u64ad\u8def\u7531\u3002 \u5982\u679c\u8be5\u8def\u7531\u7684\u51fa\u63a5\u53e3\u5c31\u662f\u7ec4\u64ad\u62a5\u6587\u7684\u5165\u63a5\u53e3\uff0c\u5219\u62a5\u6587\u901a\u8fc7RPF\u68c0\u67e5\uff0c\u7ec4\u64ad\u62a5\u6587\u5c06\u4ece\u4e0b\u6e38\u63a5\u53e3\u8f6c\u53d1\u51fa\u53bb\u3002 \u5426\u5219\uff0c\u62a5\u6587\u88ab\u4e22\u5f03\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0c\u5047\u8bbe\u5728R1\u7684\u5355\u64ad\u8def\u7531\u8868\u4e2d\uff0c\u5230\u8fbe\u7ec4\u64ad\u6e9011.6.3.2\u7684\u5355\u64ad\u8def\u7531\u7684\u51fa\u63a5\u53e3\u4e3aGE0/0/0\uff0c\u90a3\u4e48\u5982\u679c\u5728 GE0/0/1\u4e0a\u6536\u5230Source\u53d1\u6765\u7684\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u5219\u8fd9\u4e9b\u6570\u636e\u5305\u65e0\u6cd5\u901a\u8fc7RPF\u68c0\u67e5\uff0c\u6570\u636e\u5305\u4f1a\u88ab\u4e22\u5f03\u3002\u6ce8\u610f\uff0c\u7ec4\u64ad\u6570\u636e\u662f\u7edd\u5bf9\u4e0d\u4f1a\u4eceRPF\u63a5\u53e3\u5f80\u56de\u53d1\u7684\u3002 PIM \u6982\u8ff0 \u6700\u5e38\u89c1\u3001\u4e5f\u662f\u4f7f\u7528\u6700\u4e3a\u5e7f\u6cdb\u7684\u7ec4\u64ad\u8def\u7531\u534f\u8bae\u4e4b\u4e00\u5c31\u662fPIM\uff08(Protocol Independent Multicast\uff0c\u534f\u8bae\u65e0\u5173\u7ec4\u64ad\u534f\u8bae\u65e0\u5173\u7ec4\u64ad\uff09\u3002PIM\u72ec\u7acb\u4e8e\u5355\u64ad\u8def\u7531\u9009\u62e9\u534f\u8bae\uff0c\u5b83\u7684\u5de5\u4f5c\u4f9d\u8d56\u5355\u64ad\u8def\u7531\u9009\u62e9\u534f\u8bae\u63d0\u4f9b\u7684\u4fe1\u606f\uff08\u5355\u64ad\u8def\u7531\u8868\uff09\uff0c\u800c\u53c8\u4e0e\u5177\u4f53\u7684\u5355\u64ad\u8def\u7531\u534f\u8bae\u65e0\u5173\u3002PIM\u4f7f\u7528\u5355\u64ad\u8def\u7531\u8868\u53bb\u5b9e\u73b0RPF\u68c0\u9a8c\u529f\u80fd\u3002 PIM\u7684\u62a5\u6587\u4f7f\u7528IP\u5934\u534f\u8bae\u53f7\uff1a103\uff0c\u4f7f\u7528\u4fdd\u7559\u7684\u7ec4\u64ad\u5730\u5740\uff1a224.0.0.13\u3002 PIM\u6709\u4e24\u79cd\u5de5\u4f5c\u6a21\u5f0f\uff1a","title":"RPF"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#pim-dm","text":"\u4f7f\u7528\u201c\u63a8\u201d\uff08Push\uff09\u6a21\u578b\uff08PIM-DM\u5047\u8bbe\u7f51\u7edc\u4e2d\u6bcf\u4e00\u4e2a\u5206\u652f\u90fd\u6709\u7ec4\u64ad\u7ec4\u6210\u5458\uff0c\u56e0\u6b64\u60f3\u4e0d\u7ba1\u4e09\u4e03\u4e8c\u5341\u4e00\u628a\u7ec4\u64ad\u6d41\u91cf\u6269\u6563\u5230\u6bcf\u4e00\u4e2a\u89d2\u843d\uff09\u3002 \u4e0b\u6e38\u4e0d\u60f3\u63a5\u6536\u7ec4\u64ad\u6570\u636e\u7684\u8bdd\u5219\u5c06\u81ea\u5df1\u6240\u5728\u7684\u5206\u652f\u526a\u679d\uff08Prune\uff09\u6389\u3002 \u5b8c\u6210\u526a\u679d\u540e\uff0c\u7ec4\u64ad\u8def\u5f84\u6811\uff08\u6e90\u6811\uff09\u4e5f\u5c31\u6700\u7ec8\u6210\u578b\u4e86\uff0c\u7ec4\u64ad\u6d41\u91cf\u6e90\u6e90\u4e0d\u65ad\u7684\u987a\u7740\u6784\u5efa\u597d\u7684\u6e90\u6811\u8fdb\u884c\u8f6c\u53d1\u3002","title":"PIM-DM\u5bc6\u96c6\u6a21\u5f0f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#pim-sm","text":"\u4f7f\u7528\u201c\u62c9\u201d\uff08Pull\uff09 \u7684\u6a21\u578b\uff0c\u9664\u975e\u663e\u5f0f\u52a0\u5165\u7ec4\u64ad\u6811\uff0c\u5426\u5219\u4e0d\u7ed9\u4f60\u53d1\u7ec4\u64ad\u6d41\u91cf\u3002 \u4f7f\u7528\u6c47\u805a\u70b9RP\uff0c\u652f\u6301\u5171\u4eab\u6811\u548c\u6e90\u6811\u3002 \u53d1\u9001\u65b9\u5411RP\u6ce8\u518c\uff0c\u628a\u7ec4\u64ad\u6570\u636e\u53d1\u7ed9RP\uff0cRP\u5c06\u7ec4\u64ad\u6570\u636e\u62f7\u8d1d\u53d1\u9001\u7ed9\u6ce8\u518c\u7684\u63a5\u6536\u65b9\u3002 \u76f4\u8fde\u7740\u7ec4\u64ad\u63a5\u6536\u8005\u7684\u6700\u540e\u4e00\u8df3\u7684\u8def\u7531\u5668\u77e5\u9053\u53bbRP\u7684\u6700\u77ed\u8def\u5f84\uff0c\u5b83\u671d\u7740RP\u7684\u65b9\u5411\u53d1\u51faJoin\u62a5\u6587\uff0c Join\u62a5\u6587\u9010\u8df3\u5230\u8fbeRP\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4fbf\u521b\u5efa\u4e86\u5171\u4eab\u6811\u7684\u4e00\u4e2a\u5206\u652f\u3002 PIM-DM \u534f\u8bae\u6982\u8ff0 PIM-DM\uff08PIM-DenseMode\uff09\u4f7f\u7528\u4e8e\u7f51\u7edc\u89c4\u6a21\u8f83\u5c0f\u3001\u7ec4\u64ad\u63a5\u6536\u8005\u8f83\u4e3a\u5bc6\u96c6\u7684\u7ec4\u7f51\u4e2d\u3002PIM-DM\u5047\u8bbe\u7f51\u7edc\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5206\u652f\u90fd\u6709\u7ec4\u64ad\u63a5\u6536\u8005\uff0c\u56e0\u6b64\u5728\u7ec4\u64ad\u6e90\u5f00\u59cb\u53d1\u9001\u7ec4\u64ad\u6d41\u91cf\u65f6\uff0cPIM-DM\u5c06\u7ec4\u64ad\u6d41\u91cf\u6269\u6563\u7f51\u7edc\u7684\u6bcf\u4e00\u4e2a\u89d2\u843d\uff0c\u8fd9\u79cd\u65b9\u5f0f\u6211\u4eec\u79f0\u4e4b\u4e3a\u201c\u63a8\u201d\uff08Push\uff09\u3002 \u5982\u679c\u7f51\u7edc\u4e2d\u7684\u4e00\u4e2a\u5206\u652f\u6ca1\u6709\u8be5\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\uff0c\u5219PIM-DM\u5c06\u8fd9\u4e2a\u5206\u652f\u526a\u679dPrune\u6389\uff08\u6211\u8fd9\u91cc\u4e0d\u9700\u8981\uff0c\u628a\u6211\u526a\u6389\u5427\uff0c\u522b\u7ed9\u6211\u53d1\u7ec4\u64ad\u6570\u636e\u4e86\uff09\u3002 \u88ab\u526a\u679d\u7684\u5206\u652f\uff0c\u5176\u526a\u679d\u72b6\u6001\u662f\u6709\u65f6\u95f4\u9650\u5236\u7684\uff0c\u5982\u679c\u67d0\u4e2a\u5206\u652f\u4e00\u76f4\u4e0d\u9700\u8981\u7ec4\u64ad\u7ec4\u7684\u6d41\u91cf\uff0c\u5219\u9700\u8981\u5468\u671f\u6027\u7684\u53d1\u9001\u526a\u679d\u62a5\u6587\uff0c\u9664\u975e\u8be5\u5206\u652f\u4e0b\u6709\u4e86\u7ec4\u64ad\u7ec4\u7684\u6210\u5458\u3002 \u5982\u679c\u6b64\u524d\u4e0d\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\u7684\u5206\u652f\uff08\u5df2\u88ab\u526a\u679d\u7684\u5206\u652f\uff09\u73b0\u5728\u6709\u4e86\u7ec4\u64ad\u6210\u5458\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528Graft\u5ac1\u63a5\u673a\u5236\u6765\u6062\u590d\u7ec4\u64ad\u6d41\u91cf\u7684\u8f6c\u53d1\u3002 PIM-DM\u4f7f\u7528\u6e90\u6811\uff0c\u6216\u79f0\u4e3a\u6700\u77ed\u8def\u5f84\u6811SPT\u3002 \u534f\u8bae\u62a5\u6587 PIM\u534f\u8bae\u7684\u62a5\u6587\u5c01\u88c5\u5728IP\u62a5\u6587\u4e2d\uff0cIP\u62a5\u5934\u7684\u534f\u8bae\u53f7\u4e3a103\u3002PIM\u534f\u8bae\u7684\u62a5\u5934\u5982\u4e0b\uff1a \u5176\u4e2dType\u5b57\u6bb5\u5bf9\u5e94\u4e0d\u540c\u7684PIM\u534f\u8bae\u62a5\u6587\uff1a \u7ea2\u8272\u5b57\u4f53\u6807\u8bc6\u7684\u62a5\u6587\u4e3aPIM-DM\u4e2d\u4f7f\u7528\u7684\u534f\u8bae\u62a5\u6587 \u90bb\u5c45\u5173\u7cfb \u4e0a\u9762\u7684\u73af\u5883\u4e2d\uff0cR1\u4e0eR2\u90fd\u5728\u5404\u81ea\u7684\u63a5\u53e3\u4e0a\u6fc0\u6d3b\u4e86PIM\uff0c\u968f\u540e\u63a5\u53e3\u5f00\u59cb\u53d1\u9001PIM Hello\u5305\u53bb\u53d1\u73b0\u94fe\u8def\u4e0a\u7684\u5176\u4ed6 PIM\u8def\u7531\u5668\u3002 [R1] display pim neighbor VPN-Instance: public net Total Number of Neighbors = 1 Neighbor Interface Uptime Expires Dr-Priority BFD-Session 10.1.12.2 GE0/0/0 00:02:47 00:01:27 1 N Hello\u62a5\u6587\u5982\u4e0b\uff1a \u62a5\u6587\u4e2d\u7684PIM Parameters\u90fd\u662fTLV\u7684\u683c\u5f0f\uff0c\u5176\u4e2dHoldtime\u5c31\u662fPIM\u90bb\u5c45\u7684\u4fdd\u6d3b\u65f6\u95f4\uff0c\u9ed8\u8ba4105s\u3002 Hello\u62a5\u6587\u9ed8\u8ba4\u6bcf\u969430s\u53d1\u9001\u4e00\u6b21\uff0c\u5f53PIM\u8def\u7531\u5668\u6536\u5230\u90bb\u5c45\u53d1\u6765\u7684Hello\u62a5\uff0c\u5219\u90bb\u5c45\u7684\u4fdd\u6d3b\u8ba1\u65f6\u5668\u56de\u5230105s\u91cd\u65b0\u5f00\u59cb\u5012\u8ba1\u65f6\u3002 \u6269\u6563\uff08Flood\uff09\u3001\u526a\u679d\uff08Prune\uff09\u53ca\u5ac1\u63a5\uff08Graft\uff09","title":"PIM-SM \u7a00\u758f\u6a21\u5f0f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_241","text":"\u5728\u4e0a\u9762\u7684\u573a\u666f\u4e2d\uff0cABCDEF\u8def\u7531\u5668\u90fd\u6fc0\u6d3b\u4e86\u7ec4\u64ad\u8def\u7531\u529f\u80fd\uff0c\u540c\u65f6\u8fd0\u884cPIM-DM\u3002\u73b0\u5728\u7ec4\u64ad\u6e90Source 10.10.10.10\u5f00\u59cb\u5411\u7ec4\u64ad\u7ec4224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u7684\u76ee\u7684\u5730\u5740\u90fd\u662f224.1.1.1\u3002\u6570\u636e\u5305\u5230\u8fbe\u7b2c\u4e00\u8df3\u8def\u7531\u5668A\u540e\uff0cA\u5c06\u7ec4\u64ad\u6570\u636e\u4ece\u6240\u6709\u63a5\u53e3\uff08\u9664\u4e86\u6570\u636e\u5305\u8fdb\u5165\u7684\u63a5\u53e3\uff09\u6269\u6563\u51fa\u53bb\uff0cBE\u4e5f\u5c31\u6536\u5230\u4e86\u7ec4\u64ad\u6570\u636e\uff0c\u4ed6\u4eec\u540c\u6837\u5c06\u7ec4\u64ad\u6570\u636e\u6269\u6563\u3002\u5982\u6b64\u4e00\u6765\uff0c\u7ec4\u64ad\u6570\u636e\u5c31\u88ab\u6269\u6563\u5230\u4e86\u6574\u4e2a\u7f51\u7edc\u3002 \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u7ec4\u64ad\u8def\u7531\u4e5f\u662f\u6709\u8def\u7531\u8868\u9879\u7684\uff0c\u7ec4\u64ad\u8def\u7531\u8868\u9879\u7c7b\u4f3c\u8fd9\u6837\uff08\u4e0b\u56fe\u4e0e\u672c\u8282\u7684\u793a\u4f8b\u65e0\u5173\uff09\uff1a \u4e00\u4e2a\u7ec4\u64ad\u8def\u7531\u8868\u9879\u9996\u5148\u6709\u4e00\u4e2a\u6807\u8bc6\uff0c\u5f62\u5f0f\u53ef\u4ee5\u662f\uff08S,G\uff09\uff0c\u6216\u8005\u662f\uff08*\uff0cG\uff09\uff0c\uff08S,G\uff09\u7528\u4e8e\u6e90\u6811\uff0c\u800c\uff08*\uff0c G\uff09\u7528\u4e8e\u5171\u4eab\u6811\u3002PIM-DM\u4f7f\u7528\u7684\u662f\u6e90\u6811\uff0c\u6240\u4ee5\u5f53\u8def\u7531\u5668\u6536\u5230\u7ec4\u64ad\u6570\u636e\u65f6\u521b\u5efa\u7684\u662f\uff08S,G\uff09\u8868\u9879\uff0cS\u6807\u8bc6\u7ec4\u64ad\u6e90\uff0cG\u6807\u8bc6\u7ec4\u64ad\u7ec4\uff0c\u6240\u4ee5\uff0c\u5728\u672c\u8282\u5f00\u59cb\u65f6\u5c55\u793a\u7684\u4f8b\u5b50\u4e2d\uff0c\u7ec4\u64ad\u8868\u9879\u662f\uff0810.10.10.10\uff0c224.1.1.1\uff09\u3002 \u4e00\u4e2a\u7ec4\u64ad\u8def\u7531\u8868\u9879\u542b\u6709\u4e24\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u5185\u5bb9\uff0c\u4e00\u662fUpstream Interface\u6216\u8005Incoming Interface\uff0c\u8fd9\u662f RPF\u63a5\u53e3\uff0c\u4e5f\u5c31\u662f\u201c\u671d\u5411\u201d\u7ec4\u64ad\u6e90\u7684\u63a5\u53e3\uff08\u6216\u79f0\u4e3a\u4e0a\u884c\u63a5\u53e3\uff09\uff0cPIM\u901a\u8fc7\u5355\u64ad\u8def\u7531\u8868\u6765\u505aRPF\u68c0\u67e5\uff0c\u5728\u5355\u64ad\u8def\u7531\u8868\u4e2d\u67e5\u627e\u5230\u7ec4\u64ad\u6e9010.10.10.10\u7684\u8def\u7531\u5e76\u627e\u5230\u51fa\u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u5c31\u662f\u8fd9\u91cc\u7684\u4e0a\u884c\u63a5\u53e3\u3002\u7ec4\u64ad\u6570\u636e\u53ea\u6709\u4ece\u6b63\u786e\u7684\u4e0a\u884c\u63a5\u53e3\uff08RPF\u63a5\u53e3\uff09\u6536\u5230\u624d\u4f1a\u8fdb\u884c\u5904\u7406\uff0c\u5982\u679c\u7ec4\u64ad\u6570\u636e\u4e0d\u662f\u5728RPF\u63a5\u53e3\u88ab\u6536\u5230\uff0c\u5219\u88ab\u4e22\u5f03\u3002\u8fd9\u6837\u53ef\u4ee5\u786e\u4fdd\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\u7684\u65e0\u73af\u3002 \u53e6\u4e00\u4e2a\u91cd\u8981\u7684\u5185\u5bb9\u662fDownstream Interface List\uff08\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff09\u6216\u8005Outgoing Interface List\uff0c\u8fd9\u662f\u4e00\u4e2a\u63a5\u53e3\u5217\u8868\uff0c\u5f53PIM-DM\u7ec4\u64ad\u8def\u7531\u5668\u4ece\u4e0a\u884c\u63a5\u53e3\u6536\u5230\u4e00\u4e2a\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u521d\u59cb\u60c5\u51b5\u4e0b\u4f1a\u4ece\u6240\u6709\u63a5\u53e3\uff08\u5f53\u7136\u9664\u4e86\u4e0a\u884c\u63a5\u53e3\uff09\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u6b64\u65f6\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u91cc\u5934\u7f57\u5217\u7684\u5c31\u662f\u90a3\u4e9b\u63a5\u53e3\u3002 \u5f53\u7f51\u7edc\u4e2d\u7684\u5206\u652f\u5f00\u59cb\u526a\u679d\u7684\u65f6\u5019\uff0c\u88ab\u526a\u679d\u6389\u7684\u63a5\u53e3\u5c06\u4ece\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u53bb\u9664\u3002","title":"\u521d\u59cb\u5316\u65f6\u7684\u6269\u6563"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_242","text":"\u7ee7\u7eed\u4e0a\u9762\u7684\u573a\u666f\uff0c\u73b0\u5728\u7ec4\u64ad\u6d41\u91cf\u5df2\u7ecf\u88ab\u6269\u6563\u5230\u5168\u7f51\u3002F\u6709\u4e00\u4e2a\u76f4\u8fde\u7684\u7f51\u6bb5\u8fde\u63a5\u7740\u7528\u6237\u7ec8\u7aef\uff0c\u5b83\u901a\u8fc7IGMP \u4e86\u89e3\u5230\u8fd9\u4e2a\u5b50\u7f51\u4e2d\u5b58\u5728\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u63a5\u6536\u8005\uff0c\u6b64\u523bF\u662f\u4e00\u53f0\u201c\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u201d\uff0c\u56e0\u4e3a\u5b83\u76f4\u8fde\u7740\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u6210\u5458\uff0c\u56e0\u6b64F\u662f\u9700\u8981\u8fd9\u4e9b\u7ec4\u64ad\u6d41\u91cf\u7684\u3002\u4f46\u662fF\u4ece\u4e24\u4e2a\u63a5\u53e3\u90fd\u6536\u5230\u4e86\u7ec4\u64ad\u6d41\u91cf\uff0c\u6211\u4eec\u5047\u8bbe F\u7684\u5355\u64ad\u8def\u7531\u8868\u4e2d\uff0c\u5230\u8fbe10.10.10.0/24\u7f51\u7edc\u7684\u8def\u7531\u4e0b\u4e00\u8df3\u662fE\uff0c\u6240\u4ee5RPF\u63a5\u53e3\u5c31\u662f\u8fde\u63a5E\u7684\u90a3\u4e2a\u63a5\u53e3\uff0c\u90a3\u4eceB\u6536\u5230\u7684\u7ec4\u64ad\u6d41\u91cf\u5c31\u4e0d\u80fd\u901a\u8fc7RPF\u68c0\u67e5\u4e86\uff0c\u56e0\u6b64F\u5411B\u53d1\u9001\u4e00\u4e2aPIM\u526a\u679d\uff08Prune\uff09\u62a5\u6587\uff0c\u8ba9B\u522b\u518d\u7ed9\u81ea\u5df1\u53d1\u7ec4\u64ad\u6d41\u91cf\u3002 B\u8def\u7531\u5668\u6536\u5230F\u53d1\u9001\u8fc7\u6765\u7684\u526a\u679d\u62a5\u6587\uff0c\u5b83\u5c06\u81ea\u5df1\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u4ece\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u5220\u9664\uff0c \u4ee5\u540e\u5c31\u4e0d\u518d\u5411\u8be5\u63a5\u53e3\u53d1\u9001\u7ec4\u64ad\u6d41\u91cf\u4e86\u3002 D\u8def\u7531\u5668\u662f\u4e00\u53f0\u53f6\u8def\u7531\u5668\uff0c\u6ca1\u6709\u4efb\u4f55\u7ec4\u64ad\u7ec4\u6210\u5458\u76f4\u8fde\uff0c\u56e0\u6b64\u5b83\u4e0d\u9700\u8981\u8fd9\u4e9b\u7ec4\u64ad\u6d41\u91cf\uff0c\u4e8e\u662f\u5411\u4e0a\u6e38\u53d1\u9001PIM Prune\u62a5\u6587\u8bf7\u6c42\u5c06\u81ea\u5df1\u4ece\u7ec4\u64ad\u6811\u4e0a\u526a\u9664\uff0cC\u4f1a\u6536\u5230\u8fd9\u4e2a\u526a\u679d\u62a5\u6587\uff0c\u5b83\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u4ece\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u5220\u9664\uff0c\u968f\u540e\u53d1\u73b0\u6b64\u523b\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\uff0c\u4e8e\u662f\u8ba4\u4e3a\u81ea\u5df1\u4e0d\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\uff0c\u6240\u4ee5\u5411\u4e0a\u6e38\u8def\u7531\u5668\u4e5f\u5c31\u662fB\u8def\u7531\u5668\u53d1\u9001\u4e86\u526a\u679d\u62a5\u6587\uff0c\u800c\u6b64\u523bB\u8def\u7531\u5668\u540c\u6837\u53d1\u73b0\u81ea\u5df1\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u7a7a\u4e86\uff0c \u4e8e\u662f\u5411\u4e0a\u6e38\u8def\u7531\u5668A\u53d1\u9001\u526a\u679d\u62a5\u6587\u3002 \u6700\u540e\uff0c\u7ecf\u8fc7\u4e00\u7cfb\u5217\u526a\u679d\u6d3b\u52a8\u4e4b\u540e\u7684\u6e90\u6811\u5982\u4e0b\uff1a \u81f3\u6b64\u7ec4\u64ad\u6d41\u91cf\u5c06\u6cbf\u7740PIM-DM\u6784\u5efa\u597d\u7684\u6e90\u6811\u8fdb\u884c\u8f6c\u53d1\uff0c\u4e0d\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\u7684\u8282\u70b9\u662f\u4e0d\u4f1a\u6536\u5230\u7ec4\u64ad\u6d41\u91cf\u7684\u3002","title":"\u526a\u679d"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_243","text":"\u5728\u4e0a\u6587\u573a\u666f\u7684\u57fa\u7840\u4e0a\uff0cD\u8def\u7531\u5668\u76f4\u8fde\u7684\u7f51\u7edc\u4e2d\u51fa\u73b0\u4e86\u4e00\u4e2a\u65b0\u589e\u7684\u7ec4\u64ad\u7ec4\u7528\u6237\uff0c\u8fd9\u4e2a\u7528\u6237\u901a\u8fc7IGMP\u6210\u5458\u5173\u7cfb\u62a5\u544a\u5ba3\u79f0\u81ea\u5df1\u8981\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\uff0cD\u5c06\u4f1a\u6536\u5230\u8fd9\u4e2aIGMP\u62a5\u6587\u5e76\u4e14\u77e5\u9053\u4e86\u8be5\u5b50\u7f51\u4e2d\u6709\u4e86\u7ec4\u64ad\u7ec4 224.1.1.1\u7684\u6210\u5458\uff0c\u4e8e\u662f\u5b83\u5c06\u8fde\u63a5\u8fd9\u4e2a\u5b50\u7f51\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u7ec4\u64ad\u8868\u9879\uff0810.10.10.10\uff0c224.1.1.1\uff09\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u5e76\u5411\u4e0a\u6e38\u8def\u7531\u5668C\u53d1\u9001\u4e00\u4e2aPIM Graft\u5ac1\u63a5\u62a5\u6587\uff0c\u8bd5\u56fe\u5c06\u7ec4\u64ad\u6d41\u91cf\u62c9\u8fc7\u6765\u3002C\u6536\u5230\u8fd9\u4e2aPIM Graft \u62a5\u6587\uff0c\u5c06\u6536\u5230\u8fd9\u4e2a\u62a5\u6587\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u7ec4\u64ad\u8868\u9879\uff0810.10.10.10\uff0c224.1.1.1\uff09\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u7136\u540e\u4ee5\u4e00\u4e2aGraft-ACK\u62a5\u6587\u56de\u590d\u7ed9D\uff0c\u5e76\u5411\u81ea\u5df1\u7684\u4e0a\u6e38\u8def\u7531\u5668B\u53d1\u9001Graft\u5ac1\u63a5\u62a5\u6587\uff0cB\u505a\u7684\u64cd\u4f5c\u7c7b\u4f3c\uff0c\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\uff0c\u5ac1\u63a5\u62a5\u6587\u4f1a\u9010\u6e10\u4f20\u9012\u5230A\u3002 \u6700\u7ec8\u7ec4\u64ad\u6d41\u91cf\u7684\u4f20\u8f93\u8def\u5f84\u5982\u4e0b\uff1a Assert \u65ad\u8a00\u673a\u5236 \u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0cR1\u3001R3\u90fd\u4ece\u5176RPF\u63a5\u53e3\u6536\u5230Source\u53d1\u5f80224.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u4ed6\u4eec\u90fd\u4f1a\u8fdb\u884c\u7ec4\u64ad\u6570\u636e\u8f6c\u53d1\uff0c\u8fd9\u4e48\u4e00\u6765R4\u5c06\u6536\u5230\u4e24\u4efd\u91cd\u590d\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u4e00\u65b9\u9762\u9020\u6210\u94fe\u8def\u5e26\u5bbd\u8d44\u6e90\u6d6a\u8d39\uff0c\u4e5f\u52a0\u91cd\u4e86\u8bbe\u5907\u8d1f\u62c5\u3002 \u8fd9\u65f6\u5019\u5c31\u8981\u9009\u51fa\u8f6c\u53d1\u8def\u7531\u5668\uff08\u5728R1\u3001R3\u4e0eR4\u6240\u63a5\u5165\u7684\u8fd9\u4e2aLAN\u4e2d\uff0c\u7a76\u7adf\u7531\u8c01\u6765\u8f6c\u53d110.10.10.10\u53d1\u5f80\u7ec4\u64ad\u7ec4 224.1.1.1\u7684\u6d41\u91cf\uff09\uff0c\u8fd9\u662f\u901a\u8fc7Assert\u62a5\u6587\u5b9e\u73b0\u7684\uff0c\u8fd9\u4e2a\u673a\u5236\u4e5f\u88ab\u79f0\u4e3a\u201c\u65ad\u8a00\u673a\u5236\u201d\uff0cAssert\u62a5\u6587\u5185\u5305\u62ec\u6e90\u548c\u7ec4\u7684\u5730\u5740\u3001\u5230\u6e90\u7684\u5355\u64ad\u8def\u7531\u7684\u5ea6\u91cf\u503c\uff0c\u4ee5\u53ca\u53d1\u73b0\u8fd9\u6761\u8def\u7531\u7684\u8def\u7531\u534f\u8bae\u7684\u4f18\u5148\u7ea7\u7b49\u5173\u952e\u4fe1\u606f\u3002 \u5f53R1\u6216\u8005R3\u4ece\u81ea\u5df1\u7684GE0/0/1\u53e3\uff0c\u4e5f\u5c31\u662f\uff0810.10.10.10 , 224.1.1.1\uff09\u7ec4\u64ad\u7ec4\u7684\u4e0b\u884c\u63a5\u53e3\u4e0a\u6536\u5230\uff0810.10.10.10 , 224.1.1.1\uff09\u7ec4\u64ad\u7ec4\u7684\u6570\u636e\uff0c\u5b83\u4eec\u5c31\u610f\u8bc6\u5230\u5728\u8fd9\u4e2a\u63a5\u53e3\u4e0a\u8fd8\u6709\u5176\u4ed6\u7684\u7ec4\u64ad\u8def\u7531\u5668\u5728\u8f6c\u53d1\u76f8\u540c\u7684\u7ec4\u64ad\u6d41\u91cf\uff0c\u8fd9\u5c06\u89e6\u53d1R1\u53caR3\u53d1\u9001PIM Assert \u62a5\u6587\uff0c \u62a5\u6587\u7684\u5927\u81f4\u5185\u5bb9\u5982\u4e0a\u56fe\u6240\u793a\u3002\u4e0a\u56fe\u5047\u8bbeR1\u901a\u8fc7OSPF \u5b66\u4e60\u5230 /24\u8def\u7531\uff0c\u5ea6\u91cf\u503cCost=2\uff1bR3\u901a\u8fc7\u9759\u6001\u8def\u7531\u83b7\u77e510.10.10.0/24\u8def\u7531\uff0cCost=0\u3002\u5728\u6536\u5230\u5bf9\u65b9\u7684Assert \u62a5\u6587\u540e\uff0c\u53cc\u65b9\u5f00\u59cbPK\uff1a \u9996\u5148PK\u53cc\u65b9\u5230\u7ec4\u64ad\u6e90\u7684\u5355\u64ad\u8def\u7531\u7684\u4f18\u5148\u7ea7\uff0c\u4f18\u9009\u503c\u5c0f\u7684\uff1b \u5982\u679c\u4e0a\u9762\u8fd9\u9879\u76f8\u7b49\uff0c\u5219\u518dPK\u5230\u7ec4\u64ad\u6e90\u7684\u5ea6\u91cf\u503c\uff0c\u4f18\u9009\u503c\u5c0f\u7684\uff1b \u5982\u679c\u4e0a\u9762\u8fd9\u9879\u8fd8\u76f8\u7b49\uff0c\u5219\u8fdb\u4e00\u6b65\u6bd4\u8f83\u672c\u5730\u63a5\u53e3IP\u5730\u5740\uff0c\u4f18\u9009IP\u5927\u7684\u3002 \u6240\u4ee5\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u7531\u4e8eR1\u5230\u8fbe10.10.10.0/24\u8def\u7531\u7684\u4f18\u5148\u7ea7\u4e3a10\uff0c\u4f18\u4e8eR3\uff0c\u56e0\u6b64R1\u7684GE0/0/1\u53e3\u5f00\u59cb\u8f6c\u53d1\u7ec4\u64ad\u6570\u636e\uff0c\u800cR3\u5219\u4e0d\u8f6c\u53d1\uff0c\u6b64\u523b\u7531\u4e8eR3\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\uff0c\u56e0\u6b64R3\u901a\u8fc7\u5176\u4e0a\u884c\u63a5\u53e3\u5411R2\u53d1\u9001\u4e00\u4e2aPrune \u526a\u679d\u62a5\u6587\uff0c\u5c06\u81ea\u5df1\u4ece\u7ec4\u64ad\u6811\u4e0a\u526a\u9664\u3002 9.5.6 \u914d\u7f6e\u793a\u4f8b","title":"\u5ac1\u63a5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_244","text":"","title":"\u5b9e\u9a8c\u62d3\u6251"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_245","text":"\u7f51\u7edc\u62d3\u6251\u3001IP\u5730\u5740\u89c4\u5212\u5982\u4e0a\u56fe\u6240\u793a\uff1b R1\u3001R2\u3001R3\u3001R4\u8fd0\u884cOSPF\u534f\u8bae\uff0c\u6253\u901a\u7f51\u7edc\u7684\u5355\u64ad\u8def\u7531\uff1b R1\u3001R2\u3001R3\u3001R4\u540c\u65f6\u4e5f\u662f\u7ec4\u64ad\u8def\u7531\u5668\uff0c\u8fd0\u884cPIM-DM\uff1b Receiver\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\uff0c\u5728R4\u4e0a\u89c2\u5bdfIGMP\u4fe1\u606f\uff1b Source\u5f00\u59cb\u5411\u7ec4\u64ad\u7ec4224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u89c2\u5bdfAssert\u73b0\u8c61\u3001Prune\u73b0\u8c61\u3002","title":"\u5b9e\u9a8c\u9700\u6c42"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_246","text":"R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R4\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u9996\u5148\u505a\u4e2a\u67e5\u770b\uff1a Total Number of Neighbors = 2 Neighbor Interface Uptime Expires Dr-Priority BFD-Session 10.1.12.1 GE0/0/0 00:02:08 00:01:37 1 N 10.1.23.3 GE0/0/1 00:01:20 00:01:25 1 N \u4e0a\u9762\u8f93\u51fa\u7684\u662fR2\u7684PIM\u90bb\u5c45\uff0c\u53ef\u4ee5\u770b\u5230R2\u6709\u4e24\u4e2aPIM\u90bb\u5c45\uff0c\u5206\u522b\u662fR1\u53caR3\u3002 \u73b0\u5728\uff0c\u5404\u53f0\u8def\u7531\u5668\u90fd\u5df2\u7ecf\u5c31\u7eea\u4e86\uff0c\u6211\u4eec\u4e3b\u8981\u5206\u6790\u4ee5\u4e0b\u51e0\u4e2a\u5185\u5bb9\uff1a","title":"\u914d\u7f6e\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#224111","text":"\u73b0\u5728\u8ba9Reciver\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\uff0c\u4e00\u822c\u7ec4\u64ad\u63a5\u6536\u8005\u5c31\u662f\u6211\u4eec\u7684\u7535\u8111\u6216\u8005\u5176\u4ed6\u4fbf\u643a\u8bbe\u5907\uff0c\u4f8b\u5982\u89c6\u9891\u7684\u4e1a\u52a1\uff0c\u5728\u7535\u8111\u4e0a\u5b89\u88c5\u4e00\u4e2a\u89c6\u9891\u5ba2\u6237\u7aef\uff0c\u6253\u5f00\u5ba2\u6237\u7aef\u8fdb\u884c\u7b80\u5355\u7684\u64cd\u4f5c\u5c31\u4f1a\u89e6\u53d1\u7535\u8111\u53d1\u9001IGMP\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0c\u5ba3\u79f0\u81ea\u5df1\u6240\u8981\u52a0\u5165\u7684\u7ec4\u64ad\u7ec4\uff08\u53ef\u4ee5\u534e\u4e3a\u81ea\u7814\u7684\u6a21\u62df\u5668eNSP\u6765\u6a21\u62df\u672c\u5b9e\u9a8c\uff09\u3002 \u73b0\u5728\u5728\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668R4\u4e0a\u67e5\u770b\uff1a R4\u5df2\u7ecf\u53d1\u73b0\u4e86\u7ec4\u64ad\u7ec4224.1.1.1\u5185\u6709\u4e00\u4e2a\u7ec4\u64ad\u6210\u545810.1.1.1\uff0c\u4f46\u662f\u7531\u4e8e\u73b0\u5728R4\u8fd8\u6ca1\u6709\u6536\u5230\u7ec4\u64ad\u6570\u636e\uff0c\u6240 \u4ee5\u81ea\u7136\u6ca1\u6709\u7ec4\u64ad\u6570\u636e\u8f6c\u53d1\u7ed9\u63a5\u6536\u8005\u3002","title":"\u7ec4\u6210\u5458\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#assert","text":"\u73b0\u5728\u7ec4\u64ad\u6e90Source\u5f00\u59cb\u5411\u7ec4\u64ad\u7ec4224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u7ec4\u64ad\u6570\u636e\u5230\u8fbe\u7b2c\u4e00\u8df3\u8def\u7531\u5668R2\uff0c\u5219R2\u521b\u5efa\u7ec4\u64ad\u8def\u7531\u8868\u9879\uff0810.10.10.10\uff0c224.1.1.1\uff09\uff1a \u5728\u8be5\u8868\u9879\u4e2d\uff0c\u4e0a\u884c\u63a5\u53e3\u671d\u5411\u6e90\uff0c\u6240\u4ee5\u5c31\u662fGE0/0/2\u53e3\uff0c\u800c\u7531\u4e8e\u8fd0\u884c\u7684\u662fPIM-DM\u6a21\u5f0f\uff0c\u56e0\u6b64R2\u5c06GE0/0/1 \u53caGE0/0/0\u63a5\u53e3\u90fd\u6dfb\u52a0\u5230\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u7136\u540e\u5c06\u7ec4\u64ad\u6570\u636e\u4eceGE0/0/0\u53e3\u548cGE0/0/1\u53e3\u90fd\u8f6c\u53d1\u4e0b\u53bb\u3002 \u968f\u540eR1\u53caR3\u90fd\u4f1a\u6536\u5230R2\u8f6c\u53d1\u4e0b\u6765\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u4ed6\u4eec\u4e5f\u662f\u521b\u5efa\u4e00\u4e2a\u7ec4\u64ad\u8def\u7531\u8868\u9879\uff0c\u7136\u540e\u5c06\u6240\u6709\u63a5\u53e3\uff08\u9664 \u4e86RPF\u63a5\u53e3\uff09\u90fd\u6dfb\u52a0\u5230\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u5e76\u5f00\u59cb\u5411\u4e0b\u884c\u63a5\u53e3\u53d1\u9001\u6570\u636e\u6570\u636e\u3002 \u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0cR1\u53caR3\u90fd\u4f1a\u5411\u81ea\u5df1\u7684GE0/0/1\u53e3\u8f6c\u53d1\u7ec4\u64ad\u6d41\u91cf\uff0c\u4e00\u65e6\u53cc\u65b9\u5728\u81ea\u5df1\u7684GE0/0/1\u53e3\u4e0a\u6536\u5230 \uff0810.10.10.10,224.1.1.1\uff09\u7ec4\u64ad\u7ec4\u7684\u6570\u636e\u65f6\uff0c\u5b83\u4eec\u5c31\u77e5\u9053\u5728\u8fd9\u4e2aLAN\u4e2d\u6709\u4e24\u53f0\u7ec4\u64ad\u8def\u7531\u5668\u5728\u8f6c\u53d1\u6570\u636e\uff0c \u8fd9\u5c06\u89e6\u53d1Assert\u673a\u5236\uff0cR1\u53caR3\u4f1a\u53d1\u9001Assert\u62a5\u6587\uff0c\u5728R1\u6216R2\u7684GE0/0/1\u53e3\u4e0a\u6293\u5305\u53ef\u4ee5\u770b\u5230\uff1a \u770b\u4e00\u4e0bR1\u53d1\u9001\u7684Assert\u62a5\u6587\uff1a \u53ef\u4ee5\u770b\u5230\u62a5\u6587\u91cc\u5305\u542b\u7ec4\u64ad\u7ec4\u5730\u5740\u3001\u6e90\u5730\u5740\u3001\u4f18\u5148\u7ea7\u548c\u5ea6\u91cf\u503c\u3002R3\u53d1\u51fa\u7684Assert\u62a5\u6587\u7c7b\u4f3c\uff0c\u7531\u4e8e\u6b64\u65f6R1 \u53caR3\u90fd\u662f\u901a\u8fc7OSPF\u5b66\u4e60\u523010.10.10.0/24\u8def\u7531\u7684\uff0c\u5e76\u4e14\u8def\u7531\u7684\u5ea6\u91cf\u503c\u76f8\u7b49\uff0c\u90fd\u662f2\uff0c\u56e0\u6b64\u63a5\u53e3IP\u5730\u5740\u5927\u7684\u8def\u7531\u5668\uff0c\u4e5f\u5c31\u662fR3\u4f1a\u4ece\u65ad\u8a00\u673a\u5236\u4e2d\u80dc\u51fa\uff0c\u5b83\u7ee7\u7eed\u541110.1.134.0/24\u7f51\u7edc\u6765\u8f6c\u53d1\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u6570\u636e\u3002 \u5982\u6b64\u4e00\u6765R1\u5c31\u4e0d\u9700\u8981\u7ec4\u64ad\u6570\u636e\u4e86\uff0c\u56e0\u6b64\u5b83\u4f1a\u5411\u4e0a\u884c\u63a5\u53e3\u53d1\u9001\u4e00\u4e2aPrune\u526a\u679d\u62a5\u6587\uff0c\u5c06\u81ea\u5df1\u4ece\u7ec4\u64ad\u6811\u4e0a\u526a\u9664\uff0cR1\u7684\u7ec4\u64ad\u8def\u7531\u8868\u5c31\u53d8\u6210\uff1a \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u53ef\u4ee5\u770b\u5230\uff0cR1\u7684\uff0810.10.10.10,224.1.1.1\uff09\u7ec4\u64ad\u8868\u9879\u6ca1\u6709\u4e0b\u884c\u63a5\u53e3\u3002 R2\u7684\u7ec4\u64ad\u8868\u9879\u5c31\u53d8\u6210\uff1a \uff0810.10.10.10,224.1.1.1\uff09\u8868\u9879\u4e2d\uff0c\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u53ea\u6709\u4e00\u4e2a\u63a5\u53e3\u4e86\uff0c\u4e5f\u5c31\u662fGE0/0/1\u53e3\u3002 R4\u5728\u6536\u5230\u7ec4\u64ad\u6570\u636e\u540e\uff0c\u4e5f\u662f\u521b\u5efa\u4e00\u4e2a\u7ec4\u64ad\u8868\u9879\uff1a \u7136\u540e\u5c06\u7ec4\u64ad\u6570\u636e\u4eceGE0/0/1\u53e3\u8f6c\u53d1\u51fa\u53bb\uff0c\u5982\u6b64\u4e00\u6765\u63a5\u6536\u8005\u4e5f\u5c31\u6536\u5230\u7ec4\u64ad\u6570\u636e\u4e86\u3002 \u56e0\u6b64\uff0c\u6700\u7ec8\u7f51\u7edc\u7a33\u5b9a\u4e0b\u6765\u4e4b\u540e\uff0c\u7ec4\u64ad\u6d41\u91cf\u7684\u4f20\u8f93\u8def\u5f84\u662f\u8fd9\u6837\u7684\uff1a","title":"\u7ec4\u64ad\u6e90\u5f00\u59cb\u53d1\u9001\u7ec4\u64ad\u6570\u636e\u89c2\u5bdf\u6269\u6563\u8fc7\u7a0b\u3001Assert\u673a\u5236"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#prune","text":"\u73b0\u5728\uff0c\u7ec4\u64ad\u6e90\u4ecd\u7136\u5728\u4e0d\u65ad\u7684\u53d1\u9001\u7ec4\u64ad\u6d41\u91cf\uff0c\u6211\u4eec\u8ba9\u63a5\u6536\u8005Receiver\u79bb\u5f00\u7ec4\u64ad\u7ec4224.1.1.1\u3002 \u7531\u4e8eReceiver\u4e00\u65e6\u79bb\u5f00\u7ec4\u64ad\u7ec4\uff0cR4\u7684GE0/0/1\u53e3\u4e0a\u5173\u4e8e224.1.1.1\u7684\u7ec4\u64ad\u7ec4\u5c31\u6ca1\u6709\u6210\u5458\u4e86\uff0c\u56e0\u6b64\u5b83\u5c06\u63a5 \u53e3GE0/0/1\u4ece\u81ea\u5df1\u7684\uff0810.10.10.10,224.1.1.1\uff09\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u53bb\u9664\uff0c\u5982\u6b64\u4e00\u6765\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e5f\u5c31\u7a7a\u4e86\uff0cR4\u77e5\u9053\u81ea\u5df1\u4e0d\u518d\u9700\u8981224.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u4e8e\u662f\u5b83\u4ece\u4e0a\u884c\u63a5\u53e3GE0/0/0\u53d1\u4e00\u4e2aPrune\u526a\u679d\u62a5\u6587\uff0c\u8bf7\u6c42\u5c06\u81ea\u5df1\u4ece\u7ec4\u64ad\u6811\u4e0a\u526a\u9664\u3002 R3\u6536\u5230\u8fd9\u4e2a\u526a\u679d\u62a5\u6587\u540e\uff0c\u5c06\u81ea\u5df1\u7684GE0/0/1\u53e3\u4ece\uff0810.10.10.10,224.1.1.1\uff09\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u53bb\u9664\uff0c\u7136\u540e\u5b83\u53d1\u73b0\u63a5\u53e3\u5217\u8868\u7a7a\u4e86\uff0c\u4e8e\u662f\u4e5f\u53d1\u73b0\u81ea\u5df1\u4e0d\u518d\u9700\u8981\u7ec4\u64ad\u6570\u636e\u4e86\uff0c\u56e0\u6b64\u5411\u4e0a\u884c\u63a5\u53e3\u53d1\u9001Prune\u62a5\u6587\uff0c\u6b64\u523bR3\u7684\u7ec4\u64ad\u8def\u7531\u8868\u5982\u4e0b\uff1a R2\u6536\u5230R3\u53d1\u51fa\u7684Prune\u62a5\u6587\u540e\uff0c\u5176\u7ec4\u64ad\u8868\u5982\u4e0b\uff1a \u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\uff0c\u56e0\u6b64\u76f4\u63a5\u5c06\u6e90\u53d1\u9001\u8fc7\u6765\u7684\u7ec4\u64ad\u6570\u636e\u4e22\u5f03\uff0c\u4e0d\u4ece\u4efb\u4f55\u63a5\u53e3\u8f6c\u53d1\u3002","title":"\u7ec4\u64ad\u6210\u5458\u79bb\u7ec4\u3001\u89c2\u5bdfPrune\u526a\u679d\u8fc7\u7a0b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#graft","text":"\u7ecf\u8fc7\u524d\u9762\u7684\u6b65\u9aa4\uff0c\u867d\u7136\u7ec4\u64ad\u6e90\u4ecd\u7136\u5728\u4e0d\u65ad\u7684\u5411224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u4f46\u662f\u7531\u4e8e\u7f51\u7edc\u4e2d\u4e0d\u5b58\u5728\u4efb\u4f55\u7684\u7ec4\u6210\u5458\uff0c\u56e0\u6b64\u7ec4\u64ad\u6d41\u91cf\u88abR2\u76f4\u63a5\u4e22\u5f03\u3002 \u73b0\u5728\u6211\u4eec\u518d\u6b21\u8ba9Receiver\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\u3002PC\u53d1\u9001IGMP\u6210\u5458\u5173\u7cfb\u62a5\u6587\uff0cR4\u5728\u6536\u5230\u8fd9\u4e2a\u62a5\u544a\u4e4b\u540e\u610f \u8bc6 \u5230 \u63a5 \u53e3 GE0/0/1 \u4e0b \u51fa \u73b0 \u4e86 \u7ec4 \u64ad \u7ec4 224.1.1.1 \u7684 \u6210 \u5458 \uff0c \u4e8e \u662f \u5c06 GE0/0/1 \u63a5 \u53e3 \u6dfb \u52a0 \u5230 \uff0810.10.10.10,224.1.1.1\uff09\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u5e76\u5411R3\u53d1\u9001\u4e00\u4e2a\u5ac1\u63a5Graft\u62a5\u6587\uff1a \u8fd9\u4e2a\u62a5\u6587\u662f\u4e00\u4e2a\u5355\u64ad\u5305\uff0cR3\u6536\u5230\u4e4b\u540e\u5c06\u63a5\u53e3GE0/0/1\u6dfb\u52a0\u5230\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff0c\u5e76\u5411R4\u56de\u9001\u4e00\u4e2aGraft-ACK\u62a5\u6587\u4ee5\u4f5c\u786e\u8ba4\u3002\u540c\u65f6R3\u5411\u81ea\u5df1\u7684\u4e0a\u884cPIM\u90bb\u5c45R2\u53d1\u9001\u4e00\u4e2aGraft\u62a5\u6587\u3002R2\u5728\u6536\u5230\u8fd9\u4e2a\u62a5\u6587\u7684\u65f6\u5019\uff0c\u4e5f\u662f\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3GE0/0/2\u6dfb\u52a0\u5230\uff0810.10.10.10,224.1.1.1\uff09\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff0c\u968f\u540e\u5f00\u59cb\u5411\u8be5\u63a5\u53e3\u8f6c\u53d1224.1.1.1\u7684\u7ec4\u64ad\u6d41\u91cf\u3002\u81ea\u6b64\uff0c\u7ec4\u64ad\u6811\u53c8\u91cd\u65b0\u6784\u5efa\u5b8c\u6210\u3002 PIM-SM \u57fa\u7840\u77e5\u8bc6","title":"\u7ec4\u64ad\u6210\u5458\u518d\u6b21\u52a0\u7ec4\uff0c\u89c2\u5bdfGraft\u5ac1\u63a5\u8fc7\u7a0b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_247","text":"PIM-DM\u9002\u7528\u4e8e\u7f51\u7edc\u89c4\u6a21\u8f83\u5c0f\u3001\u7ec4\u64ad\u63a5\u6536\u8005\u8f83\u4e3a\u5bc6\u96c6\u7684\u573a\u666f\uff0c\u800cPIM-SM\u5219\u9002\u7528\u4e8e\u7f51\u7edc\u89c4\u6a21\u8f83\u5927\u3001\u7ec4\u64ad\u63a5\u6536\u8005\u8f83\u4e3a\u5206\u6563\u7684\u573a\u666f\u3002PIM-SM\u91c7\u7528Pull\uff08\u62c9\uff09\u7684\u65b9\u5f0f\u5de5\u4f5c\uff0c\u521d\u59cb\u60c5\u51b5\u4e0b\u4e0d\u4f1a\u5411\u7f51\u7edc\u5206\u652f\u7684\u4efb\u4f55\u89d2\u843d\u6269\u6563\u7ec4\u64ad\u6d41\u91cf\uff0c\u9664\u975e\u67d0\u4e2a\u5206\u652f\u663e\u5f0f\u7684\u7533\u8bf7\u3002 PIM-SM\u652f\u6301\u6e90\u6811\u53ca\u5171\u4eab\u6811\u3002 \u5f15\u5165\u6c47\u805a\u70b9RP\u7684\u6982\u5ff5\uff0cRP\u4f5c\u4e3a\u5171\u4eab\u6811\u7684\u6811\u6839\u3002 \u5171\u4eab\u6811\u5230\u6e90\u6811\u7684\u5207\u6362\u673a\u5236\u4f7f\u5f97\u7ec4\u64ad\u6d41\u91cf\u7684\u8f6c\u53d1\u66f4\u52a0\u79d1\u5b66\u548c\u9ad8\u6548\u3002","title":"\u534f\u8bae\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#rprendezvous-point","text":"\u6c47\u805a\u70b9RP\uff0c\u662f\u5171\u4eab\u6811RPT\u7684\u6811\u6839\uff0c\u8d1f\u8d23\u5c06\u6765\u81ea\u4e8e\u6e90\uff08Source\uff09\u7684\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\u5230\u63a5\u6536\u8005\u3002\u5728PIM\u7a00\u758f\u6a21\u5f0f\u4e2d\uff0c\u6e90\u53d1\u5411\u7ec4\u64ad\u7ec4\u7684\u6d41\u91cf\u5148\u662f\u9001\u5230RP\uff0c\u518d\u7531RP\u5c06\u7ec4\u64ad\u6d41\u91cf\u6cbf\u7740RPT\u5f80\u4e0b\u6e38\u8f6c\u53d1\u3002\u7f51\u7edc\u4e2d\u7684\u5206\u652f\u5982\u679c\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\uff0c\u5219\u7531\u7ec4\u64ad\u8def\u7531\u5668\u671d\u7740RP\u7684\u65b9\u5411\u53d1\u9001PIM Join\u62a5\u6587\uff0c\u5c06\u81ea\u5df1\u62c9\u5230RPT\u4e0a\u3002 \u4e00\u4e2aRP\uff0c\u53ef\u4ee5\u8d1f\u8d23\u4e00\u4e2a\u6216\u591a\u4e2a\u7ec4\u64ad\u7ec4\u7684\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\uff0c\u4e00\u4e2a\u7ec4\u64ad\u7ec4\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u6709\u4e00\u4e2aRP\uff08\u53ef\u4ee5\u4f7f\u7528\u52a8\u6001\u53d1\u73b0\u673a\u5236\u8fdb\u884c\u4e3b\u5907\u5207\u6362\uff09\u3002 RP\u7684\u53d1\u73b0\u673a\u5236\uff1a \u9759\u6001\u624b\u5de5\u6307\u5b9a\uff08\u9700\u5728\u6240\u6709\u7ec4\u64ad\u8def\u7531\u5668\u4e0a\u914d\u7f6e\uff09\u3002 \u52a8\u6001\u53d1\u73b0\uff1aBSR\u3002","title":"\u6c47\u805a\u70b9RP\uff08Rendezvous Point\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#pim-sm-rpf","text":"PIM-SM\u652f\u6301RPT\uff08\u5171\u4eab\u6811\uff09\u53caSPT\uff08\u6e90\u6811\uff09\uff0cRPF \u7684\u68c0\u67e5\uff1a \u5bf9\u4e8e\u6e90\u6811\uff0c\u4f7f\u7528\u7ec4\u64ad\u6e90\u7684\u5730\u5740\u8fdb\u884cRPF\u68c0\u67e5\u3002 \u5bf9\u4e8e\u5171\u4eab\u6811\uff0c\u4f7f\u7528RP\u7684\u5730\u5740\u8fdb\u884cRPF\u68c0\u67e5\u3002 \u5de5\u4f5c\u673a\u5236 1\uff1a\u5171\u4eab\u6811\u52a0\u5165 PIM-SM\u4e0ePIM-DM\u7684\u5de5\u4f5c\u65b9\u5f0f\u4e0d\u540c\uff0cPIM-SM\u9700\u8981\u663e\u5f0f\u7684PIM Join\u62a5\u6587\u6784\u5efa\u5171\u4eab\u6811\u7684\u5206\u652f\u3002 \u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u62d3\u6251\u4e2d\uff0c\u6240\u6709\u7684\u7ec4\u64ad\u8def\u7531\u5668\u5747\u8fd0\u884cPIM-SM\u3002\u521d\u59cb\u5316\u60c5\u51b5\u4e0b\uff0c\u7ec4\u64ad\u6d41\u91cf\u4e0d\u4f1a\u88ab\u8f6c\u53d1\u7ed9\u7f51\u7edc\u7684\u4efb\u4f55\u5206\u652f\u3002\u73b0\u5728E\u76f4\u8fde\u7684\u7f51\u7edc\u4e2d\u51fa\u73b0\u4e86\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u63a5\u6536\u8005\uff0c\u4e3b\u673a\u901a\u8fc7\u53d1\u9001IGMP\u6210\u5458\u5173\u7cfb\u62a5\u544a\u5ba3\u79f0\u81ea\u5df1\u8981\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\u3002 \u6700\u540e\u4e00\u8df3\u8def\u7531\u5668E\u6536\u5230\u8fd9\u4e2aIGMP\u62a5\u6587\uff0c\u5b83\u5728\u81ea\u5df1\u7684\u7ec4\u64ad\u8def\u7531\u8868\u4e2d\u521b\u5efa(*\uff0c224.1.1.1)\u8868\u9879\u3001\u5c06\u6536\u5230IGMP \u62a5\u6587\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u8be5\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u5e76\u671d\u7740RP\u7684\u65b9\u5411\u53d1\u9001\uff08*\uff0c224.1.1.1\uff09\u7684 PIM Join \u62a5\u6587\u3002\u6ce8\u610fE\u8def\u7531\u5668\u77e5\u9053RP\u7684\u5730\u5740\uff08\u53ef\u80fd\u662f\u56fe\u4e2d\u6240\u793a\u7684RP\u8def\u7531\u5668\u7684Loopback\u63a5\u53e3IP\u5730\u5740\uff09\uff0c\u5e76\u4e14\u4e5f\u80fd\u591f\u901a\u8fc7\u5355\u64ad\u8def\u7531\u534f\u8bae\uff08\u5982OSPF\uff09\u5b66\u4e60\u5230\u8be5\u5730\u5740\u7684\u8def\u7531\uff0c\u56e0\u6b64\u5b83\u501f\u52a9\u5355\u64ad\u8def\u7531\u534f\u8bae\u6765\u5224\u65ad\u8c01\u662f\u6bd4\u81ea\u5df1\u79bb RP\u66f4\u8fd1\u7684\u4e0a\u6e38PIM\u90bb\u5c45\u3002 RP\u6536\u5230\u4e86E\u8def\u7531\u5668\u53d1\u9001\u8fc7\u6765\u7684PIM Join\u62a5\u6587\uff0c\u5b83\u521b\u5efa\uff08*\uff0c224.1.1.1\uff09\u7ec4\u64ad\u8def\u7531\u8868\u9879\uff0c\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u7531\u4e8e\u5b83\u672c\u8eab\u5c31\u662fRP\uff0c\u56e0\u6b64\u5982\u679c\u6b64\u523b\u5b83\u5df2\u7ecf\u4ece\u6e90\u63a5\u6536\u5230\u53d1\u5f80 224.1.1.1\u7ec4\u64ad\u7ec4\u7684\u6d41\u91cf\uff0c\u5219\u5f00\u59cb\u5411\u4e0b\u884c\u63a5\u53e3\u8f6c\u53d1\u7ec4\u64ad\u6d41\u91cf\uff1a \u73b0\u5728\u8def\u7531\u5668F\u76f4\u8fde\u7684\u7f51\u6bb5\u4e5f\u51fa\u73b0\u4e86\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u6210\u5458\uff0c\u8be5\u6210\u5458\u53d1\u9001IGMP\u6210\u5458\u5173\u7cfb\u62a5\u544a\u5ba3\u79f0\u81ea\u5df1\u52a0\u5165\u7ec4\u64ad\u7ec4\u3002 F\u8def\u7531\u5668\u521b\u5efa\u7ec4\u64ad\u8def\u7531\u8868\u9879\uff08*\uff0c224.1.1.1\uff09\u3001\u5c06\u6536\u5230\u8be5IGMP\u62a5\u6587\u7684\u63a5\u53e3\u52a0\u5165\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c \u7136\u540e\u5411\u4e0a\u884c\u63a5\u53e3\u53d1\u9001\uff08*\uff0c224.1.1.1\uff09\u7684PIM Join\u62a5\u6587\uff0c\u8bf7\u6c42\u52a0\u5165\u5171\u4eab\u6811\uff1a E\u5c06\u6536\u5230F\u53d1\u9001\u8fc7\u6765\u7684Join\u62a5\u6587\u7684\u63a5\u53e3\u52a0\u5165\uff08*\uff0c224.1.1.1\uff09\u7ec4\u64ad\u8f6c\u53d1\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u7531\u4e8e\u6b64\u523b E\u5df2\u7ecf\u662f\u5171\u4eab\u6811\u7684\u4e00\u4e2a\u5206\u652f\u4e86\uff0c\u56e0\u6b64\u5b83\u53ea\u662f\u7b80\u5355\u7684\u5c06\u63a5\u53e3\u6dfb\u52a0\u5230\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff0c\u5e76\u5411\u8fd9\u4e2a\u63a5\u53e3\u8f6c\u53d1\u7ec4\u64ad\u6d41\u91cf\uff1a \u6700\u7ec8\u6784\u5efa\u8d77\u6765\u7684RPT\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5de5\u4f5c\u673a\u5236 2\uff1a\u5171\u4eab\u6811\u526a\u679d \u7ee7\u7eed\u4e0a\u6587\u7684\u573a\u666f\uff0c\u73b0\u5728F\u8def\u7531\u5668\u76f4\u8fde\u7684\u7f51\u6bb5\u539f\u6709\u7684\u7ec4224.1.1.1\u7684\u6210\u5458\u90fd\u79bb\u7ec4\u4e86\uff0c\u5b83\u4eec\u53d1\u9001IGMP leave\u62a5\u6587\u5ba3\u79f0\u81ea\u5df1\u79bb\u7ec4\uff1a F\u6536\u5230\u8fd9\u4e9bIGMP\u62a5\u6587\uff0c\u77e5\u9053\u8be5\u5b50\u7f51\u4e2d\u6ca1\u6709\u7ec4\u64ad\u6210\u5458\u4e86\uff0c\u56e0\u6b64\u5c06\u63a5\u53e3\u4ece\u7ec4\u64ad\u8f6c\u53d1\u8868\u9879\uff08*\uff0c224.1.1.1\uff09\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u79fb\u9664\uff0c\u4e00\u79fb\u9664\u5b83\u5c31\u53d1\u73b0\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\u4e86\uff0c\u5b83\u77e5\u9053\u81ea\u5df1\u4e0d\u518d\u9700\u8981\u7ec4224.1.1.1\u7684\u6d41\u91cf\uff0c\u56e0\u6b64\u5411\u4e0a\u6e38\u63a5\u53e3\u53d1\u9001\u4e00PIM Prune\u62a5\u6587\uff0c\u8bf7\u6c42\u5c06\u81ea\u5df1\u4ece\uff08*\uff0c224.1.1.1\uff09\u7684\u5171\u4eab\u6811\u4e0a\u526a\u9664\u3002 E\u8def\u7531\u5668\u4f1a\u6536\u5230\u8fd9\u4e2aPIM Prune\u62a5\u6587\uff0c\u5b83\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u4ece\uff08*\uff0c224.1.1.1\uff09\u8f6c\u53d1\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u79fb\u9664\uff0c\u7531\u4e8e\u79fb\u9664\u4e4b\u540e\uff0c\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u4ecd\u7136\u8fd8\u6709\u4e00\u4e2a\u63a5\u53e3\uff0c\u56e0\u6b64E\u4ecd\u7136\u4fdd\u6301\u81ea\u5df1\u5728RPT\u4e0a\u3002\u8fd9\u6837\u7ec4\u64ad\u6d41\u91cf\u4ecd\u7136\u662f\u4eceRP\u8f6c\u53d1\u4e0b\u6765\u7ed9E\uff0c\u800cE\u53ea\u5c06\u7ec4\u64ad\u6d41\u91cf\u8f6c\u53d1\u7ed9\u672c\u5730\u76f4\u8fde\u7684\u3001\u5b58\u5728\u7ec4\u64ad\u6210\u5458\u7684\u7f51\u6bb5\uff0c\u800c\u4e0d\u4f1a\u8f6c\u53d1\u7ed9F\u3002 \u5f53E\u8def\u7531\u5668\u4e0a\u76f4\u8fde\u7684\u7ec4\u64ad\u7ec4\u7528\u6237\u4e5f\u79bb\u7ec4\u65f6\uff0cE\u8def\u7531\u5668\u5c31\u4f1a\u53d1\u73b0\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\uff0c\u56e0\u6b64\u4e5f\u671d\u7740\u4e0a\u884c\u63a5\u53e3\u53d1\u9001 Prune\u62a5\u6587\uff0c\u5c06\u81ea\u5df1\u4ece\u5171\u4eab\u6811\u4e0a\u526a\u9664\u3002 \u5de5\u4f5c\u673a\u5236 3\uff1a\u6e90\u6ce8\u518c \u4e0a\u6587\u8ba8\u8bba\u7684\u662fRP\u4e0e\u63a5\u6536\u8005\u4e4b\u95f4\u7684\u95ee\u9898\uff0c\u73b0\u5728\u6765\u8ba8\u8bba\u7ec4\u64ad\u6e90\u548cRP\u4e4b\u95f4\u7684\u95ee\u9898\u3002\u53ea\u6709\u628a\u8fd9\u4e24\u4e2a\u95ee\u9898\u4e32\u8d77\u6765\uff0c\u7ec4\u64ad\u6570\u636e\u624d\u80fd\u6700\u7ec8\u6253\u901a\uff0c\u4ece\u6e90\u6d41\u5411\u63a5\u6536\u8005\u3002 \u521d\u59cb\u60c5\u51b5\u4e0b\uff0c\u7f51\u7edc\u4e2d\u662f\u6ca1\u6709\u7ec4\u64ad\u6d41\u91cf\u5728\u6d41\u52a8\u7684\uff0c\u5f53\u6e90\u5f00\u59cb\u5411\u7ec4\u64ad\u7ec4224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\u65f6\uff0c\u8fd9\u4e9b\u6570\u636e\u9996\u5148\u662f\u88ab\u7b2c\u4e00\u8df3\u8def\u7531\u5668A\u63a5\u6536\u3002 A\u6536\u5230\u4e4b\u540e\u8981\u5c06\u7ec4\u64ad\u6570\u636e\u53d1\u5411RP\u3002A\u77e5\u9053RP\u7684\u5730\u5740\uff0c\u4e5f\u901a\u8fc7\u5355\u64ad\u8def\u7531\u534f\u8bae\u53d1\u73b0\u4e86\u5230\u8fbeRP\u7684\u8def\u7531\u3002\u5b83\u5c06\u7ec4\u64ad\u6570\u636e\u5c01\u88c5\u5728PIM Register\u62a5\u6587\u4e2d\uff0cPIM Register\u62a5\u6587\u662f\u5355\u64ad\u5305\uff0c\u76ee\u7684\u5730\u5740\u662fRP\u7684\u5730\u5740\u3002A\u5c06\u6570\u636e\u5305\u53d1\u7ed9B\uff0c\u7531B\u8f6c\u53d1\u7ed9RP\u3002 \u5c01\u88c5\u7740\u7ec4\u64ad\u6570\u636e\u7684PIM Register\u62a5\u6587\u88ab\u8def\u7531\u5230\u4e86RP\u4e0a\uff0cRP\u5c06\u6570\u636e\u89e3\u5c01\u88c5\uff0c\u5f97\u5230\u7ec4\u64ad\u6570\u636e\uff0c\u5b83\u5c06\u7ec4\u64ad\u6570\u636e\u6cbf\u7740\u5df2\u7ecf\u5efa\u7acb\u597d\u7684RPT\u8f6c\u53d1\u4e0b\u53bb\u3002 A\u4e0d\u65ad\u7684\u5c06\u6e90\u53d1\u9001\u51fa\u6765\u7684\u7ec4\u64ad\u6570\u636e\u5c01\u88c5\u5728\u5355\u64ad\u7684Register\u62a5\u6587\u4e2d\u53d1\u5f80RP\uff0c\u8fd9\u663e\u7136\u662f\u4f4e\u6548\u7684\uff0c\u56e0\u4e3a\u7ec4\u64ad\u6d41\u91cf\u5f80\u5f80\u6bd4\u8f83\u591a\uff0c\u6301\u7eed\u7684\u5c01\u88c5\u548c\u89e3\u5c01\u88c5\u65e0\u7591\u662f\u589e\u52a0A\u548cRP\u7684\u8d1f\u62c5\uff0c\u8fd9\u662f\u6ca1\u6709\u610f\u4e49\u7684\u3002\u4e8e\u662fRP\u671d\u7740\u6e90\u7684\u65b9\u5411\u53d1\u9001\uff0810.1.1.1,224.1.1.1\uff09\u7684\uff08S,G\uff09PIM Join\u62a5\u6587\uff0c\u8bd5\u56fe\u5728\u81ea\u5df1\u548c\u6e90\u4e4b\u95f4\u6784\u5efa\u4e00\u68f5\u6700\u77ed\u8def\u5f84\u6811\uff0c\u4e5f\u5c31\u662f\u6e90\u6811\uff0c\u4ece\u800c\u80fd\u591f\u4ece\u6e90\u76f4\u63a5\u6536\u5230\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u800c\u4e0d\u662f\u88ab\u5c01\u88c5\u7684\u5355\u64ad\u5305\uff1a \u8fd9\u4e2a\uff08S,G\uff09\u7684PIM Join\u62a5\u6587\u671d\u7740\u6e90\u4e00\u8df3\u4e00\u8df3\u7684\u4f20\u8f93\u8fc7\u53bb\uff0c\u8fd9\u5c31\u5728RP\u548c\u7b2c\u4e00\u8df3\u8def\u7531\u5668A\u4e4b\u95f4\u5efa\u7acb\u8d77\u4e86\u4e00\u68f5\u6e90\u6811\uff0c\u7ec4\u64ad\u6d41\u91cf\u5c31\u53ef\u4ee5\u987a\u7740\u8fd9\u68f5\u6e90\u6811\u6d41\u5411RP\uff0c\u518d\u4eceRP\u4e0a\u6cbf\u7740\u6784\u5efa\u597d\u7684\u5171\u4eab\u6811\u6d41\u5411\u6240\u6709\u5206\u652f\uff1a \u4e0a\u4e00\u6b65\u5b8c\u6210\u4e4b\u540e\uff0c\u7531\u4e8e\u5df2\u7ecf\u6784\u5efa\u597d\u4e86\u4eceA\u5230RP\u7684\u6e90\u6811\uff0c\u56e0\u6b64A\u5c06\u7ec4\u64ad\u6d41\u91cf\u76f4\u63a5\u53d1\u5f80B\uff08\u518d\u7531B\u987a\u7740SPT\u53d1\u5f80RP\uff09\uff0c\u53e6\u4e00\u65b9\u9762\uff0cA\u4ecd\u7136\u5728\u5355\u64ad\u7684Register\u62a5\u6587\u4e2d\u5c01\u88c5\u7ec4\u64ad\u6570\u636e\u7136\u540e\u53d1\u5f80RP\uff0c\u8fd9\u5c06\u5bfc\u81f4RP\u6536\u5230\u4e24\u4efd\u76f8\u540c\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u663e\u7136\u662f\u6ca1\u6709\u610f\u4e49\u7684\u3002\u5b9e\u9645\u4e0a\u7531\u4e8e\u6e90\u6811\u5df2\u7ecf\u5efa\u7acb\u597d\u4e86\uff0cRP\u6ca1\u6709\u5fc5\u8981\u518d\u4eceA\u6536\u5230Register \u62a5\u6587\u4e86\uff0c\u56e0\u6b64\u5b83\u5411A\u53d1\u9001\u4e00\u4e2aPIM\u7684Register-STOP\u62a5\u6587\uff1a PIM Register\u62a5\u6587\u88abA\u6536\u5230\u4e4b\u540e\uff0cA\u5c31\u4e0d\u518d\u4f7f\u7528Register\u62a5\u6587\u5411RP\u53d1\u9001\u7ec4\u64ad\u6570\u636e\u4e86\uff0c\u7ec4\u64ad\u6570\u636e\u4e5f\u5c31\u53ea\u662f\u987a\u7740\u6e90\u6811\u6d41\u5411RP\u3002 \u5230\u6b64\u7f51\u7edc\u4e2d\u5b58\u5728\u7684\u6e90\u6811\u548c\u5171\u4eab\u6811\u5982\u4e0b\uff1a \u7ec4\u64ad\u6570\u636e\u4ece\u7b2c\u4e00\u8df3\u8def\u7531\u5668A\u987a\u7740\u6e90\u6811\u6d41\u5230RP\uff0c\u518d\u7531RP\u987a\u7740\u5171\u4eab\u6811\u4e0b\u884c\u5230\u6240\u6709\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\u7684\u5206\u652f\u3002\u4ed4\u7ec6\u4e00\u7422\u78e8\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u5176\u5b9e\u8fd9\u91cc\u4e5f\u5b58\u5728\u4e0d\u5408\u7406\u7684\u73b0\u8c61\uff0c\u5176\u5b9e\u7ec4\u64ad\u6d41\u91cf\u5b8c\u5168\u53ef\u4ee5\u4eceB\u76f4\u63a5\u6d41\u5230E\u7684\uff0c\u6ca1\u6709\u5fc5\u8981\u518d\u7ecf\u7531RP\u8f6c\u5230E\u3002\u8bf7\u7ee7\u7eed\u5f80\u4e0b\u770b\u3002 \u5de5\u4f5c\u673a\u5236 4\uff1aRPT \u5230 SPT \u7684\u5207\u6362 \u4e0a\u6587\u63d0\u5230\u7684\u95ee\u9898\uff0cPIM-SM\u6709\u89e3\u51b3\u529e\u6cd5\uff0c\u90a3\u5c31\u662fRPT\u5230SPT\u7684\u5207\u6362\u673a\u5236\u3002PIM-SM\u4e2d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u4e00\u65e6\u4eceRPT\u6536\u5230\u4e00\u4e2a\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u5219\u9a6c\u4e0a\u5c1d\u8bd5\u5728\u81ea\u5df1\u4e0e\u7ec4\u64ad\u6e90\u4e4b\u95f4\u5efa\u7acb\u4e00\u68f5\u6e90\u6811SPT\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9\u81ea\u5df1\u4ece\u6700\u4f18\u7684\u8def\u5f84\u83b7\u5f97\u6765\u81ea\u7b2c\u4e00\u8df3\u8def\u7531\u5668\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u800c\u4e0d\u7528\u4eceRP\u62d0\u8fc7\u6765\u3002 F\u6700\u4e3a\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\uff0c\u5f53\u5b83\u4eceRP\u6536\u5230\u4e00\u4e2a224.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\u5305\u7684\u65f6\u5019\uff0c\u5b83\u7acb\u5373\u5411\u6e90\u7684\u65b9\u5411\u53d1\u9001\u4e00\u4e2a \uff0810.1.1.1,224.1.1.1\uff09\u7684PIM Join\u62a5\u6587\uff0c\u8bd5\u56fe\u5728\u81ea\u5df1\u4e0e\u6e90\u4e4b\u95f4\u5efa\u7acb\u4e00\u68f5\u6e90\u6811\u3002\u5b83\u901a\u8fc7\u5355\u64ad\u8def\u7531\u8868\u6765\u5224\u65ad\u54ea\u4e2a\u63a5\u53e3\u662f\u671d\u5411\u6e90\u7684RPF\u63a5\u53e3\uff08\u6e90\u6811\u4f7f\u7528\u7ec4\u64ad\u6e90\u505aRPF\u68c0\u67e5\uff09\u3002B\u8def\u7531\u5668\u662fE\u53bb\u5f8010.1.1.1\u7684\u4e0b\u4e00\u8df3\uff0c\u56e0\u6b64E\u5c06Join \u62a5\u6587\u53d1\u5411B\uff1a B\u8def\u7531\u5668\u6536\u5230\u8fd9\u4e2aJoin\u62a5\u6587\u540e\uff0c\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\uff0810.1.1.1,224.1.1.1\uff09\u7684\u7ec4\u64ad\u8868\u9879\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff1a \u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u7f51\u8def\u4e2d\u7684\u7ec4\u64ad\u8def\u5f84\u6811\u5982\u4e0b\uff1a \u6211\u4eec\u53d1\u73b0F\u5c06\u6536\u5230\u540c\u4e00\u4e2a\u7ec4\u64ad\u6570\u636e\u7684\u4e24\u4efd\u62f7\u8d1d\uff0c\u8fd9\u663e\u7136\u662f\u65e0\u610f\u4e49\u7684\u3002\u65e2\u7136\u5df2\u7ecf\u80fd\u591f\u4eceSPT\u62ff\u5230\u7ec4\u64ad\u6570\u636e\uff0c\u5c31\u6ca1\u6709\u5fc5\u8981\u518d\u4eceRPT\u62ff\u7ec4\u64ad\u6570\u636e\u4e86\uff0c\u56e0\u6b64F\u671d\u7740RP\u7684\u65b9\u5411\u53d1\u9001\u4e00\u4e2a\uff08*\uff0c224.1.1.1\uff09\u7684Prune\u62a5\u6587\uff0c\u8bf7\u6c42\u5c06\u81ea\u5df1\u4eceRPT\u4e0a\u526a\u9664\uff0cE\u4f5c\u4e3aSPT\u548cRPT\u7684\u5206\u53c9\u53e3\u5e76\u4e14\u5df2\u7ecf\u80fd\u591f\u4eceSPT\u76f4\u63a5\u83b7\u53d6\u5230\u6765\u81eaSource\u7684\u7ec4\u64ad\u6570\u636e\uff0cE\u5411 RP\u53d1\u9001(S,G)RP\u4f4d\u526a\u679d\u62a5\u6587\uff0c\u5c06\u81ea\u5df1\u4ece\u5171\u4eab\u6811\u4e0a\u526a\u679d\uff1a RP\u6536\u5230\u8fd9\u4e2a\u526a\u679d\u62a5\u6587\u540e\uff0c\u5c06\u63a5\u53e3\u4ece(S,G)\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u53bb\u9664\uff0c\u7136\u540e\u671d\u7740\u6e90\u7684\u65b9\u5411\u53d1\u9001Prune\u62a5\u6587\uff0c B\u6536\u5230\u8fd9\u4e2a\u62a5\u6587\u540e\uff0c\u5c06\u63a5\u6536\u8be5\u62a5\u6587\u7684\u63a5\u53e3\u4ece\uff08S,G\uff09\u8868\u9879\u4e2d\u79fb\u9664\u3002 \u6700\u7ec8\uff0c\u7ec4\u64ad\u8def\u5f84\u6811\u5982\u4e0b\uff1a PIM-SM DR \u6307\u5b9a\u8def\u7531\u5668 PIM\u5728\u6bcf\u4e00\u4e2a\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\uff0c\u90fd\u4f1a\u9009\u4e3e\u4e00\u4e2aDR\uff08DesignatedRouter\uff0c\u6307\u5b9a\u8def\u7531\u5668\uff09\uff0cDR\u7684\u8eab\u4efd\u662f\u53ef\u4ee5\u62a2\u5360\u7684\uff0c\u5229\u7528Hello\u8fdb\u884c\u9009\u4e3e\u3002 \u5728PIM-DM\u4e2d\uff0c\u53ea\u6709\u5f53IGMPv1\u88ab\u7528\u5728\u591a\u8def\u8bbf\u95ee\u7f51\u7edc\u7684\u65f6\u5019DR\u624d\u4f1a\u6709\u610f\u4e49\uff0c\u8fd9\u662f\u56e0\u4e3aIGMPv1\u6ca1\u6709\u5b9a\u4e49IGMP \u67e5\u8be2\u5668\u9009\u62e9\u673a\u5236\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u88ab\u9009\u62e9\u7684DR\u4e5f\u6709IGMP\u67e5\u8be2\u529f\u80fd\u3002PIM-SM\u4e2d\uff0c\u6307\u5b9a\u8def\u7531\u5668\u7684\u4f5c\u7528\u66f4\u5927\uff1a","title":"PIM-SM RPF\u68c0\u67e5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#drr2rppim-register","text":"\u4e0a\u56fe\u4e2d\uff0cR1\u4e0eR2\u90fd\u548c\u7ec4\u64ad\u8def\u7531\u5728\u540c\u4e00\u4e2aLAN\u4e2d\uff0c\u4ed6\u4eec\u90fd\u4f1a\u6536\u5230\u7ec4\u64ad\u6e90\u53d1\u51fa\u6765\u7684\u7ec4\u64ad\u6570\u636e\uff0c\u5982\u679c\u4e24\u8005\u90fd\u5411RP\u53d1\u9001Register\u62a5\u6587\u6216\u8005\u7ec4\u64ad\u6d41\u91cf\uff0c\u8fd9\u663e\u7136\u662f\u591a\u4f59\u7684\uff0c\u56e0\u6b64R1\u53caR2\u8fde\u63a5\u5230\u8be5LAN\u7684\u63a5\u53e3\u5c31\u4f1a\u901a\u8fc7PIM Hello\u5305\u8fdb\u884cPK\uff0c\u5148\u6bd4\u8f83DR-Priority\uff08\u9ed8\u8ba4\u4e3a1\uff09\uff0c\u5982\u679c\u76f8\u7b49\u5219\u518d\u6bd4\u8f83\u63a5\u53e3IP\uff0c\u9009\u62e9IP\u8f83\u5927\u7684\u3002\u5047\u8bbeR2\u7684 \u63a5\u53e3\u6210\u4e3aDR\uff0c\u90a3\u4e48\u5c31\u7531R2\u6765\u5411RP\u6ce8\u518c\uff0c\u4ee5\u53ca\u53d1\u9001\u540e\u7eed\u7684\u7ec4\u64ad\u62a5\u6587\u3002","title":"\u9760\u8fd1\u6e90\u7684DR\uff08\u5982\u4e0a\u56fe\u4e2d\u7684R2\uff09\u8d1f\u8d23\u5411RP\u53d1\u9001PIM Register\u62a5\u6587\u53ca\u7ec4\u64ad\u6570\u636e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#drr4rpjoin","text":"\u5e76\u975e\u6240\u6709\u7684PIM\u8def\u7531\u5668\u90fd\u652f\u6301DR\u4f18\u5148\u7ea7\u9009\u9879\uff0c\u4e0d\u652f\u6301\u7684\u8def\u7531\u5668\u5728\u53d1\u9001PIM HELLO\u7684\u65f6\u5019\u4e0d\u643a\u5e26\u8fd9\u4e2a\u9009\u9879\uff0c \u5f53PIMv2\u8def\u7531\u5668\u6536\u5230\u4e00\u4e2a\u4e0d\u5305\u542bDR\u4f18\u5148\u7ea7\u9009\u9879\u7684hello\u65f6\uff08\u6216\u6b64\u62a5\u6587\u4e2d\u7684\u4f18\u5148\u7ea7=0\uff09\uff0c\u90a3\u4e48\u63a5\u6536\u65b9\u5c31\u77e5\u9053\uff0c \u53d1\u9001\u8005\u4e0d\u652f\u6301\u8fd9\u4e2a\u4f18\u5148\u7ea7\u9009\u9879\uff0c\u56e0\u6b64\u8fd9\u4e2a\u5b50\u7f51\u4e2d\u7684DR\u9009\u4e3e\u5c06\u4f7f\u7528IP\u5730\u5740\u5927\u5c0f\u8fdb\u884cPK\u3002 \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5728\u63a5\u53e3\u4e0a\u4fee\u6539DR\u4f18\u5148\u7ea7\uff1a [Router-GigabitEthernet0/0/0] pim hello-option dr-priority ? \u914d\u7f6e\u793a\u4f8b","title":"\u9760\u8fd1\u63a5\u6536\u8005\u7684DR\uff08\u5982\u4e0a\u56fe\u7684R4\uff09\u8d1f\u8d23\u5411RP\u53d1\u9001Join\u62a5\u6587\u4ece\u800c\u5f62\u6210\u5171\u4eab\u6811\uff0c\u4e5f\u5c31\u662f\u8d1f\u8d23\u5c06\u63a5\u53d7\u8005\u62c9\u5230\u5171\u4eab\u6811\uff08\u540c\u65f6\u8d1f\u8d23\u5c06\u6765\u81ea\u6e90\u7684\u7ec4\u64ad\u6570\u636e\u8f6c\u53d1\u7ed9\u63a5\u6536\u8005\uff09\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_248","text":"","title":"\u5b9e\u9a8c\u62d3\u6251"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_249","text":"\u7f51\u7edc\u62d3\u6251\u3001IP\u5730\u5740\u89c4\u5212\u5982\u4e0a\u56fe\u6240\u793a\uff1b R1\u3001R2\u3001R3\u3001R4\u8fd0\u884cOSPF\u534f\u8bae\uff0c\u6253\u901a\u7f51\u7edc\u7684\u5355\u64ad\u8def\u7531\uff1b R1\u3001R2\u3001R3\u3001R4\u540c\u65f6\u4e5f\u662f\u7ec4\u64ad\u8def\u7531\u5668\uff0c\u8fd0\u884cPIM-SM\uff1b R3\u4e3aRP\uff0c\u914d\u7f6eLoopback0\uff0cIP\u5730\u5740\u4e3a3.3.3.3\uff0c\u8be5\u5730\u5740\u4f5c\u4e3aRP\u7684\u5730\u5740\uff1b Receiver\u52a0\u5165\u7ec4\u64ad\u7ec4224.1.1.1\uff1b\u89c2\u5bdfRPT\u7684\u6784\u5efa\uff1b \u5728R4\u4e0a\u5c06RPT-SPT\u7684\u5207\u6362\u8bbe\u7f6e\u4e3a\u6c38\u8fdc\u4e0d\u5207\u6362\uff0c\u540c\u65f6\u4ece\u6e90\u5f00\u59cb\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff0c\u89c2\u5bdf\u6e90\u7684\u6ce8\u518c\u8fc7\u7a0b\u3001 RP\u5230\u6e90\u7684SPT\u5efa\u7acb\u8fc7\u7a0b\u3001\u7ec4\u64ad\u6d41\u91cf\u6cbf\u7740RPT\u4e0b\u884c\u7684\u8fc7\u7a0b\u3002 \u5728R4\u4e0a\u5c06RPT-SPT\u7684\u5207\u6362\u6062\u590d\u4e3a\u9ed8\u8ba4\u503c\uff0c\u540c\u65f6\u5c06R4\u7684GE0/0/1\u53e3\u7684OSPF Cost\u503c\u7a0d\u7a0d\u8c03\u5927\uff0c\u89c2\u5bdf RPT\u5230SPT\u7684\u5207\u6362\u8fc7\u7a0b\u3002 \u672c\u5b9e\u9a8c\u53ef\u4f7f\u7528\u534e\u4e3a\u81ea\u7814\u6a21\u62df\u5668eNSP\u5b8c\u6210\u3002","title":"\u5b9e\u9a8c\u9700\u6c42"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_250","text":"R1\u7684\u57fa\u7840\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u57fa\u7840\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u57fa\u7840\u914d\u7f6e\u5982\u4e0b\uff1a R4\u7684\u57fa\u7840\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5148\u505a\u4e00\u4e0b\u521d\u6b65\u7684\u9a8c\u8bc1\uff1a \\<R4>display pim neighbor VPN-Instance: public net Total Number of Neighbors = 2 Neighbor Interface Uptime Expires Dr-Priority BFD-Session 10.1.14.1 GE0/0/0 00:53:40 00:01:24 1 N 10.1.34.3 GE0/0/1 00:53:39 00:01:37 1 N \u4e0a\u8ff0\u8f93\u51fa\u7684\u662fR4\u7684PIM\u90bb\u5c45\u8868\uff0c\u53ef\u4ee5\u770b\u5230R4\u53d1\u73b0\u4e86\u4e24\u4e2aPIM\u90bb\u5c45\u3002\u5728\u5176\u4ed6\u8def\u7531\u5668\u4e0a\u4e5f\u505a\u76f8\u5e94\u7684\u67e5\u770b\uff0c\u786e\u4fdd PIM\u90bb\u5c45\u90fd\u53d1\u73b0\u5b8c\u6574\u4e86\u3002 \u4e0a\u9762\u7684\u8f93\u51fa\u67e5\u770b\u7684\u662fR4\u7684PIM RP\u4fe1\u606f\uff0c\u6211\u4eec\u4e3aR4\u624b\u5de5\u544a\u77e5\u4e86RP\u7684\u5730\u5740\uff0c3.3.3.3\uff0c\u5176\u5b9e\u4e5f\u5c31\u662fR3\u3002","title":"\u914d\u7f6e\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#224111rpt","text":"\u73b0\u5728PC\u52a0\u5165\u7ec4224.1.1.1\uff0c\u8fd9\u5c06\u89e6\u53d1PC\u53d1\u9001IGMP\u6210\u5458\u5173\u7cfb\u62a5\u544a\uff0cR4\u6700\u4e3a\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\u4f1a\u4eceGE0/0/2 \u53e3\u4e0a\u6536\u5230\u8fd9\u4e2a\u62a5\u544a\uff0c\u5b83\u4fbf\u77e5\u9053\u8be5\u63a5\u53e3\u4e0b\u51fa\u73b0\u4e86\u7ec4\u64ad\u7ec4224.1.1.1\u7684\u6210\u5458\uff0c\u5b83\u5c06\u5efa\u7acb\uff08* , 224.1.1.1\uff09\u7684\u7ec4\u64ad\u8def\u7531\u8868\u9879\u3002 \u968f\u540eR4\u4f1a\u5411RPF\u4e0a\u884c\u63a5\u53e3\u53d1\u9001\uff08*,G\uff09PIM Join\u62a5\u6587\uff0c\u8bf7\u6c42\u52a0\u5165\u5171\u4eab\u6811RPT\u3002R4\u5982\u4f55\u5224\u65ad\u54ea\u4e2a\u63a5\u53e3\u662fRPF \u4e0a\u884c\u63a5\u53e3\u5462\uff1fR4\u901a\u8fc7\u5355\u64ad\u8def\u7531\u8868\u6765\u5224\u65ad\uff0c\u5bf9\u4e8eRPT\uff0cPIM\u8def\u7531\u5668\u5728\u505aRPF\u68c0\u67e5\u7684\u65f6\u5019\u662f\u671d\u5411RP\u7684\uff0c\u56e0\u6b64R4\u5728\u5355\u64ad\u8def\u7531\u8868\u4e2d\u67e5\u627e\u5230\u8fbeRP3.3.3.3\u7684\u8def\u7531\uff0c\u9009\u62e9\u8def\u7531\u7684\u51fa\u63a5\u53e3\u4f5c\u4e3aRPF\u63a5\u53e3\uff0c\u4f46\u662f\u8fd9\u91cc\u7531\u4e8e\u5168\u7f51\u63a5\u53e3COST\u90fd\u662f\u9ed8\u8ba4\u503c\uff0c\u56e0\u6b64R4\u4e0a\u5173\u4e8e3.3.3.3\u7684OSPF\u8def\u7531\u5728R1\u53caR3\u4e0a\u51fa\u73b0\u7b49\u4ef7\u8d1f\u8f7d\u5747\u8861\uff0c\u8fd9\u65f6R4\u4f1a\u9009\u62e9R1\u53caR3\u4e2d\u63a5\u53e3IP\u8f83\u5927\u7684\u4f5c\u4e3aRPF\u7684\u4e3b\u90bb\u5c45\uff0c\u4e5f\u5c31\u662fR3\uff0c\u56e0\u6b64R4\u7684GE0/0/1\u6210\u4e3aRPF\u63a5\u53e3\u3002\u8fd9\u4e0e\u4e0a\u9762\u7684\u8f93\u51fa\u543b\u5408\u3002 R3\u5728\u6536\u5230R4\u53d1\u4e0a\u6765\u7684PIM Join\u62a5\u6587\u540e\uff0c\u5b83\u4f1a\u521b\u5efa\u4e00\u4e2a\uff08*\uff0c224.1.1.1\uff09\u8868\u9879\uff0c\u5c06\u6536\u5230\u8be5\u62a5\u6587\u7684\u63a5\u53e3GE0/0/1 \u6dfb\u52a0\u5230\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c\u7531\u4e8e\u81ea\u5df1\u5c31\u662fRP\u4e86\uff0c\u56e0\u6b64\u5171\u4eab\u6811\u7684\u4e00\u4e2a\u5206\u652f\u5c31\u6b64\u5efa\u7acb\u5b8c\u6210\u3002","title":"\u7ec4\u64ad\u7528\u6237\u52a0\u5165\u7ec4224.1.1.1\uff0c\u67e5\u770bRPT\u7684\u5efa\u7acb\u8fc7\u7a0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#rpspt","text":"\u63a5\u4e0b\u53bb\u6211\u4eec\u6765\u89c2\u5bdf\u4e00\u4e0b\u6e90\u6ce8\u518c\u3001RP\u5230\u6e90\u7684SPT\u5efa\u7acb\u8fc7\u7a0b\u53ca\u7ec4\u64ad\u62a5\u6587\u7684\u4f20\u8f93\u8fc7\u7a0b\u3002\u9996\u5148\u5728R4\u4e0a\u5c06RPT- SPT\u7684\u5207\u6362\u8bbe\u7f6e\u4e3a\u6c38\u8fdc\u4e0d\u5207\u6362\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u7279\u6027\u6211\u4eec\u5728\u4e0b\u4e00\u6b65\u4e2d\u518d\u53bb\u5173\u6ce8\uff0c\u8fd9\u91cc\u6682\u65f6\u5ffd\u7565\u6389\u3002 \u4f7f\u7528\u4e0a\u8ff0\u914d\u7f6e\u5c06R4\u7684PIM SPT\u5207\u6362\u7279\u6027\u8bbe\u7f6e\u4e3a\u6c38\u8fdc\u4e0d\u5207\u6362\u3002 \u73b0\u5728\u7ec4\u64ad\u6e90\u5f00\u59cb\u5411\u7ec4\u64ad\u7ec4224.1.1.1\u53d1\u9001\u7ec4\u64ad\u6570\u636e\uff08\u8fd9\u53ef\u4ee5\u901a\u8fc7ping 224.1.1.1\u6765\u6a21\u62df\uff09\u3002\u7ec4\u64ad\u6570\u636e\u5230\u8fbe\u7b2c\u4e00\u8df3\u8def\u7531\u5668R2\u540e\uff0cR2\u4f1a\u5c06\u7ec4\u64ad\u6570\u636e\u5c01\u88c5\u5728\u5355\u64ad\u7684PIM Register\u62a5\u6587\u4e2d\u53d1\u5f80RP\u4e5f\u5c31\u662fR3\u3002 \u901a\u8fc7\u5728R2\u7684GE0/0/1\u53e3\u4e0a\u6293\u5305\uff0c\u53ef\u4ee5\u770b\u5230Register\u62a5\u6587\uff0c\u8fd9\u662f\u4e00\u4e2a\u5355\u64ad\u5305\uff0c\u76ee\u7684\u5730\u5740\u662f3.3.3.3\u3002R3\u5728\u6536\u5230\u8fd9\u4e2a\u5305\u540e\uff0c\u89e3\u5c01\u88c5\u53d1\u73b0\u91cc\u5934\u662f\u4e2a\uff0810.10.10.10\uff0c224.1.1.1\uff09\u7684\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u56e0\u6b64\u5728\u672c\u5730\u521b\u5efa\u4e00\u4e2a \uff0810.10.10.10\uff0c224.1.1.1\uff09\u8868\u9879\uff0c\u540c\u65f6\u5c06\u7ec4\u64ad\u6570\u636e\u5305\u6cbf\u7740RPT\u5148\u4f20\u4e0b\u53bb\uff08\u4eceGE0/0/1\u53e3\u53d1\u51fa\u53bb\uff09\u3002\u53e6\u4e00\u65b9\u9762\uff0cR3\u7d27\u63a5\u7740\u5411\u6e90\u7684\u65b9\u5411\uff08\u540c\u6837\u662f\u501f\u52a9\u5355\u64ad\u8def\u7531\u8868\u67e5\u627e\u523010.10.10.10\u7684\u8def\u7531\u6765\u83b7\u5f97RPF\u63a5\u53e3\uff09\u53d1\u9001 \uff0810.10.10.10,224.1.1.1\uff09\u7684PIM Join\u62a5\u6587\uff0c\u8bd5\u56fe\u5728\u81ea\u5df1\u4e0e\u6e90\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761\u6e90\u6811SPT\u3002 \\<R3>display pim routing-table R2\u6536\u5230\u8fd9\u4e2aJoin\u62a5\u6587\u540e\uff0c\u5c06GE0/0/1\u53e3\u6dfb\u52a0\u5230\uff0810.10.10.10\uff0c224.1.1.1\uff09\u7ec4\u64ad\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\uff0c \u7136\u540e\u5c06\u7ec4\u64ad\u6d41\u91cf\u6cbf\u7740\u5efa\u7acb\u597d\u7684SPT\u8f6c\u53d1\u5230RP\uff0c\u800c\u4e0d\u518d\u5c06\u7ec4\u64ad\u6d41\u91cf\u5c01\u88c5\u5230Register\u62a5\u6587\u4e2d\u3002","title":"\u6e90\u6ce8\u518c\u3001RP\u5230\u6e90\u7684SPT\u5efa\u7acb\u8fc7\u7a0b\u3001\u7ec4\u64ad\u62a5\u6587\u7684\u4f20\u8f93\u8fc7\u7a0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#spt","text":"\u73b0\u5728\uff0c\u5c06R4\u4e0a\u4e4b\u524d\u914d\u7f6e\u7684SPT\u5207\u6362\u7684\u76f8\u5173\u914d\u7f6e\u53bb\u9664\uff08 undo spt-switch-threshold \uff09\uff0c\u6062\u590d\u6210\u9ed8\u8ba4\u3002\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cR4\u4f5c\u4e3a\u6700\u540e\u4e00\u8df3\u8def\u7531\u5668\uff0c\u53ea\u8981\u4e00\u6536\u5230224.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\u5305\uff0c\u5219\u7acb\u5373\u8fdb\u884cSPT\u7684\u5207\u6362\u3002\u63a5\u7740\u5c06R4\u7684GE0/0/1\u53e3OSPF Cost\u7a0d\u7a0d\u8c03\u5927\uff0c\u8c03\u8282\u4e3a2\uff08\u9ed8\u8ba4\u662f1\uff09\uff0c\u6211\u4eec\u901a\u8fc7\u8fd9\u4e2a\u52a8\u4f5c\uff0c\u6765\u6a21\u62df\u8fd9\u6837\u4e00\u4e2a\u4e8b\u5b9e\uff1a\u201cR4\u4eceR1\u5230\u8fbe\u6e90\uff0c\u6bd4\u4eceR3\u5230\u8fbe\u6e90\u8981\u66f4\u8fd1\u201d\u3002 \u73b0\u5728\uff0c\u5f53R4\u4eceGE0/0/1\u53e3\u6536\u5230\u7b2c\u4e00\u4e2a224.1.1.1\u7684\u7ec4\u64ad\u6570\u636e\u5305\u65f6\uff0c\u5c06\u542f\u52a8SPT\u5207\u6362\u673a\u5236\uff0c\u671d\u7740\u6e90\u7684\u65b9\u5411 \uff08\u66f4\u4f18\u7684\u4e0b\u4e00\u8df3\u662fR1\uff09\u53d1\u9001\uff0810.10.10.10\uff0c224.1.1.1\uff09\u7684PIM Join\u62a5\u6587\uff0c\u8bf7\u6c42\u52a0\u5165SPT\u3002 R1\u6536\u5230\u8fd9\u4e2aJoin\u62a5\u6587\u540e\uff0c\u521b\u5efa\uff0810.10.10.10\uff0c224.1.1.1\uff09\u8868\u9879\uff0c\u5c06GE0/0/1\u53e3\u6dfb\u52a0\u5230\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff0c\u540c\u65f6\u5411R2\u53d1\u9001Join\u62a5\u6587\u3002R2\u6536\u5230\u8fd9\u4e2aJoin\u62a5\u6587\u540e\uff0c\u5c06\u81ea\u5df1\u7684GE0/0/0\u53e3\u6dfb\u52a0\u5230\uff0810.10.10.10\uff0c224.1.1.1\uff09 \u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\uff0c\u5e76\u5f00\u59cb\u5411GE0/0/0\u53e3\u4e0b\u4f20\u7ec4\u64ad\u6570\u636e\u3002 \u8fd9\u4e00\u6b65\u5b8c\u6210\u4e4b\u540e\uff0c\u7f51\u7edc\u4e2d\u7684\u7ec4\u64ad\u8def\u5f84\u6811\u5982\u4e0b\u6240\u793a\uff1a \u73b0\u5728R4\u4f1a\u4eceR1\u53caR3\u6536\u5230\u7ec4\u64ad\u6570\u636e\u7684\u4e24\u4efd\u62f7\u8d1d\uff0c\u8fd9\u663e\u7136\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u56e0\u6b64\u5b83\u5411R3\u53d1\u9001\u4e00\u4e2aPrune\u62a5\u6587\uff0c \u5c06\u81ea\u5df1\u4eceRPT\u4e0a\u526a\u9664\u3002R3\u6536\u5230\u8fd9\u4e2a\u62a5\u6587\u540e\uff0c\u5c06\u63a5\u53e3GE0/0/1\u4ece\uff08*\uff0c224.1.1.1\uff09\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u5220\u9664\uff0c\u4e5f\u5c31\u4e0d\u518d\u5411GE0/0/1\u53e3\u53d1\u9001\u7ec4\u64ad\u6d41\u91cf\u4e86\uff0c\u7136\u540e\u53d1\u73b0\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e3a\u7a7a\uff0c\u56e0\u6b64\u5411R2\u53d1\u9001\u4e00\u4e2aPrune \u62a5\u6587\uff0c\u8bf7\u6c42\u5c06\u81ea\u5df1\u4eceSPT\u4e0a\u4fee\u526a\u6389\uff0c\u56e0\u4e3a\u5b83\u4e0d\u518d\u9700\u8981\u7ec4\u64ad\u6d41\u91cf\u4e86\u3002R2\u6536\u5230\u8fd9\u4e2aPrune\u62a5\u6587\u540e\uff0c\u5c06GE0/0/1 \u53e3\u4ece\u8868\u9879\u7684\u4e0b\u884c\u63a5\u53e3\u5217\u8868\u4e2d\u5220\u9664\u3002 \u6700\u7ec8R2\u7684\u7ec4\u64ad\u8868\u9879\u5982\u4e0b\uff1a \u7ec4\u64ad\u8def\u5f84\u6811\u5982\u4e0b\uff1a","title":"SPT\u7684\u5207\u6362\u8fc7\u7a0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6","text":"IPv6 \u57fa\u7840","title":"IPv6 \u57fa\u7840"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_251","text":"","title":"\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv4","text":"IPv4\u516c\u7f51\u5730\u5740\u8017\u5c3d\u3002\u8fd9\u5e94\u8be5\u662f\u5f53\u524dIPv6\u66ff\u4ee3IPv4\u7684\u6700\u5927\u539f\u52a8\u529b\u3002\u968f\u7740\u6700\u540e\u4e00\u5757IPv4\u516c\u7f51\u5730\u5740\u5206\u914d\u5149\uff0c\u52a0\u4e0a\u63a5\u5165\u516c\u7f51\u7684\u7528\u6237\u53ca\u8bbe\u5907\u8d8a\u6765\u8d8a\u591a\uff0cIPv4\u5730\u5740\u67af\u7aed\u7684\u95ee\u9898\u65e5\u76ca\u52a0\u5267\u3002 Internet\u7528\u6237\u5feb\u901f\u589e\u957f\uff0c\u968f\u7740\u79d1\u6280\u884c\u4e1a\u7684\u53d1\u5c55\uff0c\u6709\u66f4\u591a\u7684\u7528\u6237\u3001\u66f4\u591a\u79cd\u7c7b\u7684\u8bbe\u5907\u63a5\u5165\u516c\u7f51\u3002 IPv4\u7f3a\u4e4f\u771f\u6b63\u7684\u7aef\u5230\u7aef\u901a\u4fe1\u6a21\u578b\u3002\u4e3a\u4e86\u7f13\u89e3\u5730\u5740\u7d27\u7f3a\u7684\u95ee\u9898\uff0c\u79c1\u6709IPv4\u5730\u5740\u7a7a\u95f4\u88ab\u5927\u91cf\u7684\u90e8\u7f72\uff0c\u5e94\u8be5\u8bf4\u79c1\u6709\u5730\u5740\u7a7a\u95f4\u7684\u5b9a\u4e49\u6781\u5927\u7a0b\u5ea6\u4e0a\u7f13\u89e3\u4e86IPv4\u5730\u5740\u67af\u7aed\u7684\u95ee\u9898\uff0c\u4efb\u4f55\u4eba\u5728\u4efb\u4f55\u672c\u5730\u79c1\u6709\u7684\u7f51\u7edc\u4e2d\u90fd\u80fd\u591f\u968f\u610f\u4f7f\u7528IPv4\u79c1\u6709\u5730\u5740\uff0c\u53ea\u662f\u8fd9\u4e9b\u5730\u5740\u65e0\u6cd5\u4e0a\u516c\u7f51\uff0c\u5982\u679c\u9700\u8981\u8bbf\u95ee\u516c\u7f51\uff0c\u6216\u8005\u88ab\u516c\u7f51\u8bbf\u95ee\uff0c \u90a3\u5c31\u9700\u8981\u7528\u5230NAT\u3002NAT\u786e\u5b9e\u80fd\u89e3\u51b3\u79c1\u6709\u5730\u5740\u7a7a\u95f4\u4e0e\u516c\u7f51\u4e92\u8bbf\u7684\u95ee\u9898\uff0c\u4f46\u662f\u5374\u7834\u574f\u4e86\u7aef\u5230\u7aef\u901a\u4fe1\u7684\u5b8c\u6574\u6027\u3002 IPv4\u65e0\u6cd5\u9002\u5e94\u65b0\u6280\u672f\u7684\u53d1\u5c55\uff0c\u5982\u7269\u8054\u7f51\u7b49\u3002\u6240\u6709\u884c\u4e1a\u90fd\u662fIPv6\u7684\u6f5c\u5728\u7528\u6237\u3002 \u5e7f\u64ad\u673a\u5236\u7684\u5b58\u5728\uff0c\u5bf9ARP\u7684\u4f9d\u8d56\u7b49\uff0c\u4f7f\u5f97IPv4\u5c40\u57df\u7f51\u7684\u76f8\u5173\u8fd0\u4f5c\u95ee\u9898\u9891\u53d1\u3002 IPv4\u5bf9\u79fb\u52a8\u6027\u7684\u652f\u6301\u4e0d\u591f\u7406\u60f3\u3002","title":"IPv4\u5b58\u5728\u7684\u95ee\u9898"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6_1","text":"IPv6\u5730\u5740\u91c7\u7528128bit\u957f\u5ea6\uff0c\u5730\u5740\u7a7a\u95f4\u975e\u5e38\u5e9e\u5927\uff0c\u4e3a\u672a\u6765\u6570\u5341\u5e74\u63d0\u4f9b\u4e86\u5de8\u5927\u7684\u5730\u5740\u7a7a\u95f4\u3002 \u591a\u7b49\u7ea7\u5c42\u6b21\u6709\u52a9\u4e8e\u8def\u7531\u805a\u5408\uff0c\u6781\u5927\u7a0b\u5ea6\u4e0a\u4f18\u5316\u4e86\u9aa8\u5e72\u7f51\u8def\u7531\u3002\u516c\u7f51\u5730\u5740\u5206\u914d\u66f4\u52a0\u5408\u7406\u6709\u5e8f\u3002 \u72ec\u7279\u7684\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u529f\u80fd\u4f7f\u5f97IPv6\u7ec8\u7aef\u80fd\u591f\u5373\u63d2\u5373\u7528\uff0c\u7701\u53bb\u4e86\u5730\u5740\u914d\u7f6e\u7684\u9ebb\u70e6\u3002 \u524d\u7f00\u91cd\u7f16\u5740\u673a\u5236\u4f7f\u5f97IPv6\u63d0\u4f9b\u5546\u4e4b\u95f4\u7684\u8f6c\u6362\u5bf9\u6700\u7ec8\u7528\u6237\u900f\u660e\u3001\u66f4\u5e73\u6ed1\u3002 \u4ec5\u5b58\u5728\u7279\u5b9a\u9700\u6c42\u7684\u573a\u666f\u4e2d\u90e8\u7f72NAT\uff0c\u786e\u4fdd\u7aef\u5230\u7aef\u901a\u4fe1\u7684\u5b8c\u6574\u6027\u3002 IPv6\u4e2d\u53d6\u6d88\u4e86\u5e7f\u64ad\u8fd9\u4e00\u5728IPv4\u4e2d\u5e26\u6765\u8bf8\u591a\u95ee\u9898\u7684\u4f20\u8f93\u673a\u5236\u3002\u5728IPv4\u4e2d\u6240\u6709\u9700\u8981\u501f\u52a9\u5e7f\u64ad\u6765\u5de5\u4f5c\u7684\u534f\u8bae\uff0c\u5728IPv6\u4e2d\u5747\u91c7\u7528\u7ec4\u64ad\u66ff\u4ee3\u3002 IPv6\u4e2d\u53d6\u6d88\u4e86ARP\uff0c\u4f7f\u7528ND\u62a5\u6587\u5b9e\u73b0\u5730\u5740\u89e3\u6790\uff0c\u5730\u5740\u89e3\u6790\u8bf7\u6c42\u901a\u8fc7\u7ec4\u64ad\u7684\u65b9\u5f0f\u53d1\u9001\u3002 IPv6\u7684\u5305\u5934\u6bd4IPv4\u66f4\u7b80\u6d01\u3001\u5b57\u6bb5\u66f4\u5c11\u3002\u5b9a\u957fIPv6\u57fa\u672c\u62a5\u5934\u63d0\u9ad8\u4e86\u7f51\u7edc\u8bbe\u5907\u7684\u5904\u7406\u6548\u7387\u3002 \u65b0\u5b9a\u4e49\u7684\u6269\u5c55\u5305\u5934\u66ff\u4ee3\u4e86IPv4\u7684\u9009\u9879\u5b57\u6bb5\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u7075\u6d3b\u6027\u3001\u6269\u5c55\u6027\u3002 \u66f4\u6709\u6548\u5730\u652f\u6301\u79fb\u52a8\u6027\u548c\u5b89\u5168\u6027\u3002 IPv4\u5230IPv6\u7f51\u7edc\u7684\u8fc7\u6e21\u6280\u672f\u4e30\u5bcc\u591a\u5f69\u3002","title":"IPv6\u7684\u7279\u70b9\u53ca\u4f18\u52bf"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_252","text":"","title":"\u62a5\u6587\u683c\u5f0f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6_2","text":"\u4ee5\u4e0a\u662fIPv4\u4e0eIPv6\u5305\u5934\u7ed3\u6784\u7684\u5bf9\u6bd4\uff08\u53ef\u4ee5\u4ece\u56fe\u4e2d\u770b\u5230\u5bf9\u4e8eIPv4\u800c\u8a00\uff0cIPv6\u7684\u5934\u90e8\u53d1\u751f\u7684\u53d8\u5316\uff0c\u4ee5\u53ca\u88ab\u4fdd\u7559\u3001\u53d6\u6d88\u548c\u65b0\u589e\u7684\u5b57\u6bb5\uff09\u3002IPv4\u7684\u5305\u5934\u6700\u5c0f\u4e3a20byte\uff0c\u6700\u5927\u5219\u4e3a60byte\uff0c\u7531\u4e8e\u5305\u542b\u4e86\u53ef\u9009\u9879\u53ca\u586b\u5145\u5b57\u6bb5\uff0c \u56e0\u6b64\u5305\u5934\u957f\u5ea6\u4e0d\u56fa\u5b9a\u3002IPv6\u7684\u57fa\u672c\u5305\u5934\u76f8\u6bd4\u4e8eIPv4\u867d\u7136\u957f\u5ea6\u52a0\u957f\u4e86\uff0c\u53d8\u6210\u4e8640byte\uff0c\u4f46\u662f\u5305\u5934\u957f\u5ea6\u662f\u56fa\u5b9a\u7684\uff0c\u800c\u4e14\u53d8\u5f97\u66f4\u52a0\u7b80\u6d01\uff0c\u5b83\u5c06\u539f\u6765IPv4\u4e2d\u7684\u53ef\u9009\u9879\u3001\u586b\u5145\u5b57\u6bb5\u4ee5\u53ca\u90e8\u5206\u5176\u4ed6\u5b57\u6bb5\u7684\u529f\u80fd\u901a\u8fc7\u201c\u6269\u5c55\u5305\u5934\u201d\u6765\u5b9e\u73b0\u3002 \u5728IPv6\u57fa\u672c\u5305\u5934\u4e2d\uff0c\u201cTraffic Class\u201d\u5b57\u6bb5\u7c7b\u4f3cIPv4\u4e2d\u7684ToS\u3002\u201cHop Limit\u201d\u5b57\u6bb5\u76f8\u5f53\u4e8eTTL\uff0c\u53e6\u5916\u201cNext Header\u201d\u5b57\u6bb5\u7528\u6765\u6307\u793aIPv6\u57fa\u672c\u5305\u5934\u540e\u9762\u7684\u62a5\u6587\u7c7b\u578b\uff0c\u76f8\u5f53\u4e8eIPv4\u4e2d\u7684Protocol\u5b57\u6bb5\u3002\u65b0\u589e\u7684\u201cFlow Label\u201d\u5b57\u6bb5\u7528\u6765\u6807\u8bb0\u540c\u5c5e\u4e00\u4e2a\u6d41\u7684\u62a5\u6587\u3002\u8f6c\u53d1\u8def\u5f84\u4e0a\u7684\u7f51\u7edc\u8bbe\u5907\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u503c\u6765\u533a\u5206\u6d41\u5e76\u8fdb\u884c\u5904\u7406\uff0c \u7531\u4e8eFlow Label\u5728V6\u7684\u5305\u5934\u4e2d\u643a\u5e26\uff0c\u56e0\u6b64\u76f8\u6bd4IPv4\u90a3\u6837\u8fd8\u8981\u901a\u8fc7\u6e90\u76ee\u7684IP\u3001\u6e90\u76ee\u7684\u7aef\u53e3\u53f7\u548c\u534f\u8bae\u7c7b\u578b \uff08\u4e94\u5143\u7ec4\u4fe1\u606f\uff09\u6765\u786e\u5b9a\u4e00\u4e2a\u6d41\uff0c\u6548\u7387\u5c31\u8981\u9ad8\u5f97\u591a\u3002 \u4e00\u4e2aIPv6\u6570\u636e\u5305\u62e5\u6709\u4e00\u4e2aIPv6\u57fa\u672c\u5305\u5934\uff0c\u4ee5\u53ca0\u4e2a\u6216\u591a\u4e2a\u6269\u5c55\u5305\u5934\uff0c\u5728\u6269\u5c55\u5305\u5934\u4e4b\u540e\uff0c\u4fbf\u662f\u6570\u636e\u8f7d\u8377\u3002","title":"IPv6\u57fa\u672c\u5305\u5934"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6_3","text":"\u5728IPv6\u4e2d\uff0c\u539f\u6765IPv4\u5305\u5934\u4e2d\u7684\u9009\u9879\u5b57\u6bb5\u7b49\u7684\u76f8\u5173\u529f\u80fd\u901a\u8fc7IPv6\u6269\u5c55\u5305\u5934\u5b9e\u73b0\u3002\u4e00\u4e2aIPv6\u6570\u636e\u5305\u53ef\u80fd\u5305\u62ec 0\u4e2a\u6216\u591a\u4e2a\u6269\u5c55\u5305\u5934\uff0c\u5f53\u4f7f\u7528\u591a\u4e2a\u6269\u5c55\u5305\u5934\u65f6\uff0c\u901a\u8fc7\u524d\u9762\u7684\u5305\u5934\u7684Next Head\u5b57\u6bb5\u6307\u660e\u8be5\u5305\u5934\u540e\u7684\u6269\u5c55\u5305\u5934\u7c7b\u578b\u3002\u6709\u4e86\u6269\u5c55\u5305\u5934\uff0c\u4e2d\u95f4\u8def\u7531\u5668\u5c31\u4e0d\u9700\u8981\u5904\u7406\u6bcf\u4e00\u4e2a\u53ef\u80fd\u51fa\u73b0\u7684\u9009\u9879\uff0c\u63d0\u9ad8\u4e86\u8def\u7531\u5668\u5904\u7406\u6570\u636e\u5305\u7684\u6548\u7387\uff0c\u63d0\u9ad8\u4e86\u5176\u8f6c\u53d1\u6027\u80fd\u3002\u5728\u6269\u5c55\u62a5\u5934\u94fe\u7684\u6700\u540e\u5c31\u662f\u6709\u6548\u8d1f\u8f7d\u3002 \u6269\u5c55\u62a5\u5934\u662f\u53ef\u9009\u7684\uff0c\u53ea\u6709\u9700\u8981\u8be5\u6269\u5c55\u62a5\u5934\u5bf9\u5e94\u7684\u529f\u80fd\u65f6\uff0c\u6570\u636e\u7684\u53d1\u9001\u8005\u624d\u4f1a\u6dfb\u52a0\u76f8\u5e94\u6269\u5c55\u62a5\u5934\u3002 RFC 2460\u4e2d\u5b9a\u4e49\u4e866\u4e2aIPv6\u6269\u5c55\u5934\u3002\u5f53\u8d85\u8fc7\u4e00\u79cd\u6269\u5c55\u62a5\u5934\u88ab\u7528\u5728\u540c\u4e00\u4e2aIPv6\u62a5\u6587\u91cc\u65f6\uff0c\u62a5\u5934\u5fc5\u987b\u6309\u7167\u4e0b\u5217\u987a\u5e8f\u51fa\u73b0\uff1a IPv6\u57fa\u672c\u62a5\u5934 \u9010\u8df3\u9009\u9879\u6269\u5c55\u62a5\u5934 \u76ee\u7684\u9009\u9879\u6269\u5c55\u62a5\u5934 \u8def\u7531\u6269\u5c55\u62a5\u5934 \u5206\u6bb5\u6269\u5c55\u62a5\u5934 \u8ba4\u8bc1\u6269\u5c55\u62a5\u5934 \u5c01\u88c5\u5b89\u5168\u6709\u6548\u8f7d\u8377\u6269\u5c55\u62a5\u5934 \u76ee\u7684\u9009\u9879\u6269\u5c55\u62a5\u5934 \u4e0a\u5c42\u534f\u8bae\u6570\u636e\u62a5\u6587 IPv6 \u7f16\u5740","title":"IPv6\u6269\u5c55\u5305\u5934"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6_4","text":"IPv6\u5730\u5740\u4e00\u5171128bit\uff0c\u56e0\u6b64\u5730\u5740\u7a7a\u95f4\u662f\u76f8\u5f53\u5e9e\u5927\u7684\uff0c\u53ef\u63d0\u4f9b\u7ed9PC\u3001\u65e0\u7ebfIP\u7535\u8bdd\u3001\u673a\u9876\u76d2\u3001\u89c6\u9891\u8bbe\u5907\u3001\u5b89\u4fdd\u76d1\u63a7\u8bbe\u5907\u7b49\u7b49\u3002IPv6\u5730\u5740\u4e0d\u518d\u50cfV4\u90a3\u6837\u4f7f\u7528\u201c\u70b9\u5206\u5341\u8fdb\u5236\u201d\u7684\u683c\u5f0f\u6765\u8868\u73b0\uff0c\u800c\u662f\u4f7f\u7528\u201c\u5192\u53f7\u5206\u9694\u5341\u516d\u8fdb\u5236\u201d \u683c\u5f0f\u8868\u793a\u4f8b\u59822001\uff1a0da8\uff1a0207\uff1a0000\uff1a0000\uff1a0000\uff1a0000\uff1a8207\u3002\u4e4d\u4e00\u770b\u8fd9\u5730\u5740\u786e\u5b9e\u5f88\u957f\uff0c\u4e66\u5199\u8d77\u6765\u6709\u8bf8\u591a\u4e0d\u4fbf\uff0c\u4f46\u662f\u4e0d\u7528\u62c5\u5fc3\uff0cIPv6\u5b9a\u4e49\u4e86\u5730\u5740\u7b80\u5199\u65b9\u5f0f\uff1a \u4ee5\u4e0b\u662f\u51e0\u4e2a\u7b80\u5199\u7684\u4f8b\u5b50\uff1a","title":"IPv6 \u5730\u5740"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_253","text":"\u5355\u64ad\u5730\u5740\uff08Unicast Address\uff09\uff1a\u6807\u8bc6\u4e00\u4e2a\u63a5\u53e3\uff0c\u76ee\u7684\u5730\u5740\u4e3a\u5355\u64ad\u5730\u5740\u7684\u62a5\u6587\u4f1a\u88ab\u9001\u5230\u88ab\u6807\u8bc6\u7684\u63a5\u53e3\u3002\u5728IPv6\u4e2d\uff0c\u4e00\u4e2a\u63a5\u53e3\u62e5\u6709\u591a\u4e2aIPv6\u5730\u5740\u662f\u975e\u5e38\u5e38\u89c1\u7684\u73b0\u8c61\u3002 \u7ec4\u64ad\u5730\u5740\uff08Multicast Address\uff09\uff1a\u6807\u8bc6\u591a\u4e2a\u63a5\u53e3\uff0c\u76ee\u7684\u5730\u5740\u4e3a\u7ec4\u64ad\u5730\u5740\u7684\u62a5\u6587\u4f1a\u88ab\u9001\u5230\u88ab\u6807\u8bc6\u7684\u6240\u6709\u63a5\u53e3\u3002\u53ea\u6709\u52a0\u5165\u76f8\u5e94\u7ec4\u64ad\u7ec4\u7684\u8bbe\u5907\u63a5\u53e3\u624d\u4f1a\u4fa6\u542c\u53d1\u5f80\u8be5\u7ec4\u64ad\u5730\u5740\u7684\u62a5\u6587\u3002 \u4efb\u64ad\u5730\u5740\uff08Anycast Address\uff09\uff1a\u4efb\u64ad\u5730\u5740\u6807\u8bc6\u4e00\u7ec4\u7f51\u7edc\u63a5\u53e3\uff08\u901a\u5e38\u5c5e\u4e8e\u4e0d\u540c\u7684\u8282\u70b9\uff09\u3002\u76ee\u6807\u5730\u5740\u662f\u4efb\u64ad\u5730\u5740\u7684\u6570\u636e\u5305\u5c06\u53d1\u9001\u7ed9\u5176\u4e2d\u8def\u7531\u610f\u4e49\u4e0a\u6700\u8fd1\u7684\u4e00\u4e2a\u7f51\u7edc\u63a5\u53e3\u3002 IPv6\u6ca1\u6709\u4f7f\u7528\u5e7f\u64ad\u5730\u5740\uff08Broadcast Address\uff09\u3002 \u53ef\u4ee5\u901a\u8fc7IANA\u7f51\u7ad9\u4e86\u89e3\u76ee\u524d\u7684IPv6\u5730\u5740\u7a7a\u95f4\u5206\u914d\u60c5\u51b5\uff1a Internet Protocol Version 6 Address Space","title":"\u5730\u5740\u7c7b\u578b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_254","text":"","title":"\u5355\u64ad\u5730\u5740"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#aggregatable-global-unicast-address","text":"\u53ef\u805a\u5408\u5168\u5c40\u5355\u64ad\u5730\u5740\u4e5f\u88ab\u79f0\u4e3a\u5168\u5c40\u5355\u64ad\u5730\u5740\uff0c\u8be5\u7c7b\u5730\u5740\u5168\u7403\u552f\u4e00\uff0c\u76f8\u5f53\u4e8eIPv4\u7684\u516c\u7f51\u5730\u5740\u3002 \u76ee\u524dIANA\u4e3a\u8fd9\u7c7b\u5730\u5740\u5206\u914d\u4e86\u524d\u7f002000::/3\u3002\u5e38\u89c1\u7684\u60c5\u51b5\u662f\uff0c\u4ece\u8fd0\u8425\u5546\u7533\u8bf7\u5230\u7684IPv6\u5730\u5740\u7a7a\u95f4\u4e3a/48\uff0c \u518d\u7531\u81ea\u5df1\u6839\u636e\u9700\u8981\u8fdb\u4e00\u6b65\u89c4\u5212\u3002 \u5982\u4e0b\u56fe\uff0c\u5206\u914d\u7ed9\u7ec8\u7aef\u7684IPv6\u5730\u5740\u53ef\u80fd\u662f\u8fd9\u6837\u7684\u7ed3\u6784\uff1a \u5168\u5c40\u8def\u7531\u524d\u7f00\uff1a\u7531\u63d0\u4f9b\u5546\u6307\u5b9a\u7ed9\u4e00\u4e2a\u7ec4\u7ec7\u673a\u6784\uff0c\u4e00\u822c\u81f3\u5c11\u4e3a48bit\uff08\u52a0\u4e0a\u524d\u9762\u56fa\u5b9a\u76843bit\uff09\u3002\u76ee\u524d\u5df2\u7ecf\u5206\u914d\u7684\u5168\u5c40\u8def\u7531\u524d\u7f00\u7684\u524d3bit\u5747\u4e3a001\u3002\u56e0\u6b64\u524d\u7f00\u4e3a2000::/3\u3002 \u5b50\u7f51ID\uff1a\u7ec4\u7ec7\u673a\u6784\u53ef\u4ee5\u7528\u5b50\u7f51ID\u6765\u6784\u5efa\u672c\u5730\u7f51\u7edc\u3002 \u63a5\u53e3ID\uff1a\u7528\u6765\u6807\u8bc6\u4e00\u4e2a\u8bbe\u5907\uff08\u7684\u63a5\u53e3\uff09\u3002\u4e0eIPv4\u4e2d\u7684\u4e3b\u673a\u5730\u5740\u7684\u6982\u5ff5\u7c7b\u4f3c\u3002","title":"\u53ef\u805a\u5408\u5168\u5c40\u5355\u64ad\u5730\u5740\uff08Aggregatable Global Unicast Address\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#site-local-address","text":"\u7c7b\u4f3cIPv4\u4e2d\u7684\u79c1\u6709\u5730\u5740\u3002\u8be5\u5730\u5740\u4ee5FEC0::/10\u4e3a\u524d\u7f00\u3002\u4e5f\u5c31\u662f\u8bf4\u6700\u9ad810bit\u56fa\u5b9a\u4e3a1111111011\uff0c\u7d27\u8ddf\u5728\u540e\u9762\u7684\u662f\u8fde\u7eed38bit\u76840\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u7ad9\u70b9\u672c\u5730\u5730\u5740\u6765\u8bf4\uff0c\u524d48bit\u603b\u662f\u56fa\u5b9a\u7684\u3002 \u5728\u5730\u5740\u6700\u540e\u7684\u63a5\u53e3ID\u548c\u9ad8\u4f4d48bit\u7279\u5b9a\u524d\u7f00\u4e4b\u95f4\u670916bit\u5b50\u7f51ID\uff0c\u4f9b\u673a\u6784\u5728\u5185\u90e8\u6784\u5efa\u5b50\u7f51\u3002\u7ad9\u70b9\u672c\u5730\u5730\u5740\u53ea\u80fd\u591f\u5728\u672c\u5730\u6216\u8005\u79c1\u6709\u73af\u5883\u4e2d\u4f7f\u7528\uff0c\u4e0d\u80fd\u8bbf\u95ee\u516c\u7f51\u3002 RFC1884\u5b9a\u4e49\u4e86FEC0::/10\u5730\u5740\u5757\u7528\u4e8e\u7ad9\u70b9\u672c\u5730\u5730\u5740,\u8fd9\u4e9b\u5730\u5740\u53ea\u80fd\u591f\u5728\u79c1\u6709\u7684IPv6\u201c\u7ad9\u70b9\u201d\u5185\u4f7f\u7528\uff0c\u4f46\u662f\u7531\u4e8e\u5386\u53f2\u539f\u56e0\uff0c\u7ad9\u70b9\u672c\u5730\u5730\u5740\u7684\u4f7f\u7528\u4e00\u5ea6\u51fa\u73b0\u6df7\u4e71\uff0c\u6700\u7ec8\u5bfc\u81f4\u8be5\u7c7b\u5730\u5740\u4e0d\u518d\u88ab\u4f7f\u7528\u3002","title":"\u7ad9\u70b9\u672c\u5730\u5730\u5740\uff08Site-Local Address\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#unique-local-address","text":"\u552f\u4e00\u672c\u5730\u5730\u5740\uff0c\u6982\u5ff5\u4e0a\u76f8\u5f53\u4e8e\u79c1\u6709\u5730\u5740\uff0c\u4ec5\u80fd\u591f\u5728\u672c\u5730\u7f51\u7edc\u4f7f\u7528\uff0c\u5728IPv6 Internet\u4e0a\u4e0d\u53ef\u88ab\u8def\u7531\u3002\u4e0a\u9762\u63d0\u5230\u7684\u7ad9\u70b9\u672c\u5730\u5730\u5740\u7531\u4e8e\u8d77\u521d\u7684\u6807\u51c6\u5b9a\u4e49\u6a21\u7cca\u800c\u88ab\u5f03\u7528\uff0c\u800c\u540eRFC\u53c8\u91cd\u65b0\u5b9a\u4e49\u4e86\u552f\u4e00\u672c\u5730\u5730\u5740\u4ee5\u6ee1\u8db3\u672c\u5730\u73af\u5883\u4e2d\u79c1\u6709IPv6\u5730\u5740\u7684\u4f7f\u7528\u3002 \u5728RFC4193\u4e2d\u6807\u51c6\u5316\u4e86\u8fd9\u79cd\u7528\u6765\u5728\u672c\u5730\u901a\u4fe1\u4e2d\u53d6\u4ee3\u7ad9\u70b9\u672c\u5730\u5355\u64ad\u5730\u5740\u7684\u7c7b\u578b\u3002\u552f\u4e00\u672c\u5730\u5730\u5740\u62e5\u6709\u56fa\u5b9a\u524d\u7f00FC00::/7\uff0c\u5b83\u88ab\u5206\u4e3a\u4e24\u5757\uff0c\u5176\u4e2dFC00::/8\u6682\u672a\u5b9a\u4e49\uff0c\u53e6\u4e00\u5757\u662fFD00::/8\uff0c\u5176\u683c\u5f0f\u5982\u4e0b\uff1a \u552f\u4e00\u672c\u5730\u5730\u5740\u867d\u7136\u53ea\u5728\u6709\u9650\u8303\u56f4\u5185\u6709\u6548\uff0c\u4f46\u4e5f\u5177\u6709\u5168\u7403\u552f\u4e00\u7684\u524d\u7f00\uff08\u4e25\u683c\u6765\u8bf4\uff0c\u5e94\u8be5\u662f\u51e0\u4e4e\u53ef\u80fd\u662f\u5168\u7403\u552f\u4e00\uff09\u3002\u8fd9\u662f\u56e0\u4e3a\uff0c\u5730\u5740\u524d\u7f00\u4e2d\u7684Global ID\u662f\u901a\u8fc7\u4f2a\u968f\u673a\u7684\u65b9\u5f0f\u4ea7\u751f\u7684\uff0cRFC4193\u7ed9\u51fa\u4e86\u4e00\u4e9b\u5173\u4e8e\u4ea7\u751f\u65b9\u5f0f\u7684\u5efa\u8bae\uff0c\u4f8b\u5982\u201cObtain the current time of day in 64-bit NTP format [NTP]\u201d\u7b49 \u3002","title":"\u552f\u4e00\u672c\u5730\u5730\u5740\uff08Unique Local Address\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#link-local-address","text":"\u94fe\u8def\u672c\u5730\u5730\u5740\u662f\u4e00\u7c7b\u975e\u5e38\u91cd\u8981\u7684\u5730\u5740\uff0c\u5b83\u7684\u6709\u6548\u8303\u56f4\u4ec5\u4ec5\u5728\u6240\u5904\u94fe\u8def\u4e0a\u3002\u5b83\u4ee5FE80::/10\u4e3a\u524d\u7f00\uff0c\u5176\u4e2d\u5de6\u8fb9\u6570\u8d77\u7b2c11-64bit\u4e3a0\uff0c\u5916\u52a0\u4e00\u4e2a64bit\u7684\u63a5\u53e3ID\u3002\u683c\u5f0f\u5982\u4e0b\uff1a IPv6\u4e3b\u673a\u7684\u7f51\u5361\uff0c\u6216\u8005\u7f51\u7edc\u8bbe\u5907\u7684\u63a5\u53e3\u53ef\u4ee5\u62e5\u6709\u591a\u4e2a\u53ef\u805a\u5408\u5168\u5c40\u5355\u64ad\u5730\u5740\uff0c\u4f46\u662f\u8fd9\u4e9b\u63a5\u53e3\u8981\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u7684\u8bdd\uff0c\u5c31\u5fc5\u987b\u6709\u4e00\u4e2a\u94fe\u8def\u8303\u56f4\u5185\u552f\u4e00\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\uff0c\u8be5\u5730\u5740\u7531\u4e8e\u5176\u7a33\u5b9a\u6027\u3001\u94fe\u8def\u552f\u4e00\u6027\uff0c\u88ab\u7528\u4e8e IGP\u90bb\u5c45\u5173\u7cfb\u6784\u5efa\u3001\u81ea\u52a8\u5730\u5740\u914d\u7f6e\u3001\u90bb\u5c45\u53d1\u73b0\u3001\u8def\u7531\u5668\u53d1\u73b0\u7b49\u673a\u5236\u4e2d\u3002 \u6e90\u6216\u76ee\u7684IPv6\u5730\u5740\u4e3a\u94fe\u8def\u672c\u5730\u5730\u5740\u7684\u6570\u636e\u5305\u5c06\u4e0d\u4f1a\u88ab\u8f6c\u53d1\u51fa\u59cb\u53d1\u7684\u94fe\u8def\u4e4b\u5916\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u94fe\u8def\u672c\u5730\u5730\u5740\u7684\u6709\u6548\u8303\u56f4\u4ec5\u4ec5\u662f\u5176\u6240\u5c5e\u7684\u672c\u5730\u94fe\u8def\u3002 \u6bcf\u4e00\u4e2aIPv6\u63a5\u53e3\u90fd\u5fc5\u987b\u5177\u5907\u4e00\u4e2a\u94fe\u8def\u672c\u5730\u5730\u5740\u3002\u534e\u4e3a\u8bbe\u5907\u652f\u6301\u81ea\u52a8\u751f\u6210\u53ca\u624b\u5de5\u6307\u5b9a\u4e24\u79cd\u914d\u7f6e\u65b9\u5f0f\u3002\u5728\u534e\u4e3a\u8def\u7531\u5668\u4e0a\uff0c\u5f53\u63a5\u53e3\u83b7\u5f97\u4e00\u4e2aIPv6\u5168\u7403\u5355\u64ad\u5730\u5740\u540e\uff0c\u8bbe\u5907\u4f1a\u81ea\u52a8\u4e3a\u8be5\u63a5\u53e3\u914d\u7f6e\u94fe\u8def\u672c\u5730\u5730\u5740\u3002 \u5982\u679c\u8bbe\u5907\u63a5\u53e3\u4e0a\u5e76\u672a\u914d\u7f6e\u5168\u5c40\u5355\u64adIPv6\u5730\u5740\uff0c\u5219\u9700\u4f7f\u7528**ipv6 address auto link-local**\u547d\u4ee4\u624b\u5de5\u4f7f\u8bbe\u5907\u81ea\u52a8\u4ea7\u751f\u4e00\u4e2a\u94fe\u8def\u672c\u5730\u5730\u5740\uff0c\u5728\u9632\u706b\u5899\u3001\u8def\u7531\u5668\u3001\u4ea4\u6362\u673a\u7b49\u8bbe\u5907\u4e0a\uff0c\u8be5\u81ea\u52a8\u751f\u6210\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\u91c7\u7528EUI-64\u89c4\u8303\u7684\u63a5\u53e3ID\u751f\u6210\u3002\u5982\u679c\u8bbe\u5907\u63a5\u53e3\u4e0a\u914d\u7f6e\u4e86\u5168\u5c40\u5355\u64adIPv6\u5730\u5740\uff0c\u5219\u65e0\u9700\u4f7f\u7528\u4e0a\u8ff0\u547d\u4ee4\u8ba9\u8bbe\u5907\u81ea\u52a8\u751f\u6210\u94fe\u8def\u672c\u5730\u5730\u5740\uff0c\u4e00\u65e6\u63a5\u53e3\u83b7\u5f97IPv6\u5168\u5c40\u5355\u64ad\u5730\u5740\uff0c\u4f1a\u81ea\u52a8\u4ea7\u751f\u94fe\u8def\u672c\u5730\u5730\u5740\u3002\u5173\u4e8eEUI-64\u89c4\u8303\uff0c \u5c06\u5728\u540e\u6587\u4ecb\u7ecd\u3002","title":"\u94fe\u8def\u672c\u5730\u5730\u5740\uff08Link-local Address\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_255","text":"","title":"\u7279\u6b8a\u7684\u5730\u5740"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#0128000000128","text":"\u8be5\u5730\u5740\u4f5c\u4e3a\u67d0\u4e9b\u62a5\u6587\u7684\u6e90\u5730\u5740\uff0c\u6bd4\u5982\u4f5c\u4e3a\u91cd\u590d\u5730\u5740\u68c0\u6d4b\u65f6\u53d1\u9001\u7684\u90bb\u5c45\u8bf7\u6c42\u62a5\u6587\uff08NS\uff09\u7684\u6e90\u5730\u5740\uff0c \u6216\u8005DHCPv6\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\u5ba2\u6237\u7aef\u6240\u53d1\u9001\u7684\u8bf7\u6c42\u62a5\u6587\u7684\u6e90\u5730\u5740\u3002","title":"\u672a\u6307\u5b9a\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u51680\u5730\u5740\u201c::/128\u201d\u6216\u8005\u201c0:0:0:0:0:0/128\u201d"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#0000011281128","text":"\u7528\u4e8e\u672c\u5730\u56de\u73af\uff0c\u53d1\u5f80::/1\u7684\u6570\u636e\u5305\u5b9e\u9645\u4e0a\u5c31\u662f\u53d1\u7ed9\u672c\u5730\uff0c\u53ef\u7528\u4e8e\u672c\u5730\u534f\u8bae\u6808\u56de\u73af\u6d4b\u8bd5\u3002","title":"\u56de\u73af\u5730\u57400:0:0:0:0:1/128\uff0c\u6216\u8005::1/128"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv4_1","text":"\u5728\u8fc7\u6e21\u6280\u672f\u4e2d\u4f1a\u4f7f\u7528\u5230\u4e00\u4e9b\u5305\u542bIPv4\u5730\u5740\u7684IPv6\u5730\u5740\uff0c\u4e3a\u4e86\u8ba9IPv4\u5730\u5740\u663e\u5f97\u66f4\u52a0\u7a81\u51fa\u4e00\u4e9b\uff0c\u5b9a\u4e49\u4e86\u5185\u5d4cIPv4\u5730\u5740\u7684IPv6\u5730\u5740\u683c\u5f0f\u3002\u5185\u5d4cIPv4\u5730\u5740\u683c\u5f0f\u662f\u8fc7\u6e21\u673a\u5236\u4e2d\u4f7f\u7528\u7684\u4e00\u79cd\u7279\u6b8a\u8868\u793a\u65b9\u6cd5\u3002\u5728\u8fd9\u79cd \u8868\u793a\u65b9\u6cd5\u4e2d\uff0cIPv6\u5730\u5740\u7684\u90e8\u5206\u4f7f\u7528\u5341\u516d\u8fdb\u5236\u8868\u793a\uff0cIPv4\u5730\u5740\u90e8\u5206\u53ef\u7528\u5341\u8fdb\u5236\u683c\u5f0f\u3002\u4f8b\u5982\uff1a IPv4\u517c\u5bb9\u5730\u5740\u7528\u4e8e\u8fc7\u6e21\u673a\u5236\uff0c\u5982\u81ea\u52a8IPv4\u517c\u5bb9\u96a7\u9053\u53caNAT-PT\u7b49\u3002\u8be5\u5730\u5740\u5df2\u7ecf\u51e0\u4e4e\u4e0d\u518d\u4f7f\u7528\u3002","title":"IPv4\u517c\u5bb9\u5730\u5740"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#id_1","text":"","title":"\u63a5\u53e3 ID"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#id_2","text":"\u63a5\u53e3ID\uff08Interface Identification\uff0c\u63a5\u53e3\u6807\u8bc6\uff09\u7684\u957f\u5ea6\u4e3a64bit\uff0c\u7528\u4e8e\u6807\u8bc6\u94fe\u8def\u4e0a\u7684\u63a5\u53e3\u3002\u5728\u6bcf\u6761\u94fe\u8def\u4e0a\uff0c \u63a5\u53e3ID\u5fc5\u987b\u552f\u4e00\u3002\u63a5\u53e3ID\u6709\u8bb8\u591a\u7528\u9014\uff0c\u6700\u5e38\u89c1\u7684\u7528\u4e8e\u5c31\u662f\u9ecf\u8d34\u5728\u94fe\u8def\u672c\u5730\u5730\u5740\u524d\u7f00\u540e\u9762\uff0c\u5f62\u6210\u63a5\u53e3\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\u3002\u6216\u8005\u5728\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u4e2d\uff0c\u9ecf\u8d34\u5728\u83b7\u53d6\u5230\u7684IPv6\u5168\u5c40\u5355\u64ad\u5730\u5740\u524d\u7f00\u540e\u9762\uff0c\u6784\u6210\u63a5\u53e3\u7684\u5168\u5c40\u5355\u64ad\u5730\u5740\u3002","title":"\u63a5\u53e3ID\u7684\u6982\u5ff5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#id_3","text":"\u63a5\u53e3ID\u53ef\u901a\u8fc73\u79cd\u65b9\u6cd5\u751f\u6210\uff1a\u624b\u5de5\u914d\u7f6e\u3001\u7cfb\u7edf\u81ea\u52a8\u751f\u6210\uff0c\u6216\u57fa\u4e8eIEEE EUI-64\u89c4\u8303\u751f\u6210\u3002\u5176\u4e2d\uff0c\u57fa\u4e8eIEEE EUI-64\u89c4\u8303\u81ea\u52a8\u751f\u6210\u7684\u65b9\u5f0f\u6700\u4e3a\u5e38\u7528\u3002EUI-64\u89c4\u8303\u5c06\u63a5\u53e3\u7684MAC\u5730\u5740\u8f6c\u6362\u4e3aIPv6\u63a5\u53e3ID\u3002 \u624b\u5de5\u4e3a\u63a5\u53e3\u914d\u7f6e\u63a5\u53e3ID\u3002 \u53ef\u4ee5\u6839\u636eIEEE\u7684EUI-64\u89c4\u8303\u5c06\u63a5\u53e3\u768448bit MAC\u5730\u5740\u8f6c\u5316\u4e3a64bit\u7684\u63a5\u53e3ID\u3002 \u67d0\u4e9b\u7cfb\u7edf\u652f\u6301\u81ea\u52a8\u751f\u6210\u968f\u673a\u63a5\u53e3ID\uff08\u4f8b\u5982Windows7\uff09\u3002","title":"\u63a5\u53e3ID\u7684\u8bbe\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#eui-64macid","text":"\u5047\u8bbe\u4e00\u4e2a\u63a5\u53e3\u7684MAC\u5730\u5740\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u90a3\u4e48\u91c7\u7528EUI-64\u89c4\u8303\uff0c\u63a5\u53e3\u53ef\u6839\u636e\u8be5MAC\u5730\u5740\u8ba1\u7b97\u5f97\u5230\u63a5\u53e3ID\uff0c \u7531\u4e8eMAC\u5730\u5740\u5168\u5c40\u552f\u4e00\uff0c\u56e0\u6b64\u8be5\u63a5\u53e3ID\u4e5f\u76f8\u5e94\u7684\u5177\u5907\u5168\u5c40\u552f\u4e00\u6027\u3002\u8ba1\u7b97\u8fc7\u7a0b\u5982\u4e0b\u3002 \u5c0648bit\u7684MAC\u5730\u5740\u5bf9\u534a\u5288\u5f00\uff0c\u7136\u540e\u63d2\u5165\u201cFFFE\u201d\uff0c\u518d\u5bf9\u4ece\u5de6\u6570\u8d77\u7684\u7b2c7\u4f4d\uff0c\u4e5f\u5c31\u662fU/L\u4f4d\u53d6\u53cd\uff0c\u5373\u53ef\u5f97 \u5230\u5bf9\u5e94\u7684\u63a5\u53e3ID\u3002 \u5728\u5355\u64adMAC\u5730\u5740\u4e2d\uff0c\u7b2c1\u4e2aByte\u7684\u7b2c7bit\u662fU/L\uff08Universal/Local\uff0c\u4e5f\u79f0\u4e3aG/L\uff0c\u5176\u4e2dG\u8868\u793aGlobal\uff09\u4f4d\uff0c \u7528\u4e8e\u8868\u793aMAC\u5730\u5740\u7684\u552f\u4e00\u6027\u3002\u5982\u679cU/L=0\uff0c\u5219\u8be5MAC\u5730\u5740\u662f\u5168\u5c40\u7ba1\u7406\u5730\u5740\uff0c\u662f\u7531\u62e5\u6709OUI\u7684\u5382\u5546\u6240\u5206\u914d\u7684MAC\u5730\u5740\uff1b\u5982\u679cU/L=1\uff0c\u5219\u662f\u672c\u5730\u7ba1\u7406\u5730\u5740\uff0c\u662f\u7f51\u7edc\u7ba1\u7406\u5458\u57fa\u4e8e\u4e1a\u52a1\u76ee\u7684\u81ea\u5b9a\u4e49\u7684MAC\u5730\u5740\u3002 \u800c\u5728\u5728EUI-64\u63a5\u53e3ID\u4e2d\uff0c\u7b2c7bit\u7684\u542b\u4e49\u4e0eMAC\u5730\u5740\u6b63\u597d\u76f8\u53cd\uff0c0\u8868\u793a\u672c\u5730\u7ba1\u7406\uff0c1\u8868\u793a\u5168\u7403\u7ba1\u7406\uff0c\u6240\u4ee5\u4f7f\u7528EUI-64\u683c\u5f0f\u7684\u63a5\u53e3ID\uff0cU/L\u4f4d\u4e3a1\uff0c\u5219\u5730\u5740\u662f\u5168\u7403\u552f\u4e00\u7684\uff0c\u5982\u679c\u4e3a0\uff0c\u5219\u4e3a\u672c\u5730\u552f\u4e00\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u8981\u53cd\u8f6c\u8be5\u4f4d\u3002","title":"\u901a\u8fc7EUI-64\u89c4\u8303\u6839\u636eMAC\u5730\u5740\u751f\u6210\u63a5\u53e3ID"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_256","text":"","title":"\u7ec4\u64ad\u5730\u5740"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6_5","text":"\u4e00\u4e2aIPv6\u7ec4\u64ad\u5730\u5740\u7531\u524d\u7f00\uff08FF00::/8\uff09\u3001\u6807\u5fd7\uff08Flag\uff09\u5b57\u6bb5\u3001\u8303\u56f4\uff08Scope\uff09\u5b57\u6bb5\u4ee5\u53ca\u7ec4\u64ad\u7ec4ID\uff08Group ID\uff094\u4e2a\u90e8\u5206\u7ec4\u6210\u3002","title":"\u7ec4\u64adIPv6\u5730\u5740\u7ed3\u6784"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6_6","text":"\u4e00\u4e9b\u5e38\u89c1\u7684\u77e5\u540d\u7ec4\u64adIPv6\u5730\u5740\uff1a FF02:0:0:0:0:0:0:1 All Nodes Address FF02:0:0:0:0:0:0:2 All Routers Address FF02:0:0:0:0:0:0:4 DVMRP Routers FF02:0:0:0:0:0:0:5 OSPFIGP FF02:0:0:0:0:0:0:6 OSPFIGP Designated Routers FF02:0:0:0:0:0:0:9 RIP Routers FF02:0:0:0:0:0:0:D All PIM Routers FF02:0:0:0:0:0:0:12 VRRP FF02:0:0:0:0:0:0:16 All MLDv2-capable routers","title":"\u77e5\u540d\u7684\u7ec4\u64adIPv6\u5730\u5740"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6mac","text":"\u5728\u4ee5\u592a\u7f51\u73af\u5883\u4e2d\uff0c\u4e00\u4e2a\u7ec4\u64adIPv6\u62a5\u6587\u5fc5\u987b\u6267\u884c\u4ee5\u592a\u7f51\u5c01\u88c5\u3002\u7ec4\u64adIPv6\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\u662f\u7ec4\u64adIPv6\u5730\u5740\uff0c\u800c\u76ee\u7684MAC\u5730\u5740\u5219\u5fc5\u987b\u662f\u7ec4\u64adMAC\u5730\u5740\uff0c\u5e76\u4e14\u8be5\u5730\u5740\u5fc5\u987b\u4e0e\u7ec4\u64adIPv6\u5730\u5740\u5bf9\u5e94\u3002\u4e0e\u7ec4\u64adIPv6\u5730\u5740\u5bf9\u5e94\u7684\u7ec4\u64adMAC\u5730\u5740\uff0c\u5176\u6620\u5c04\u5173\u7cfb\u5982\u4e0a\u56fe\u6240\u793a\u300233-33\u662f\u4e13\u95e8\u4e3aIPv6\u7ec4\u64ad\u9884\u7559\u7684MAC\u5730\u5740\u524d\u7f00\uff0cMAC \u5730\u5740\u7684\u540e32bit\u4ece\u5bf9\u5e94\u7684\u7ec4\u64adIPv6\u5730\u5740\u7684\u540e32bit\u62f7\u8d1d\u800c\u6765\u3002","title":"IPv6\u7ec4\u64ad\u5730\u5740\u7684MAC\u5730\u5740\u6620\u5c04"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_257","text":"\u5728IPv6\u7ec4\u64ad\u5730\u5740\u4e2d\uff0c\u6709\u4e00\u79cd\u7279\u522b\u7684\u7ec4\u64ad\u5730\u5740\uff0c\u53eb\u505a\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\uff08Solicited-Node Multicast Address\uff09\u3002\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u57fa\u4e8e\u8282\u70b9\u7684\u5355\u64ad\u6216\u4efb\u64ad\u5730\u5740\u751f\u6210\u3002 \u5f53\u4e00\u4e2a\u8282\u70b9\u5177\u6709\u4e86\u5355\u64ad\u6216\u4efb\u64ad\u5730\u5740\uff0c\u5c31\u4f1a\u81ea\u52a8\u52a0\u5165\u4e0e\u4e4b\u76f8\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u7ec4\u3002\u4e00\u4e2a\u5355\u64ad\u5730\u5740\u6216\u4efb\u64ad\u5730\u5740\u5bf9\u5e94\u4e00\u4e2a\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u7ec4\u3002\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u7ec4\u91c7\u7528\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u6807\u8bc6\uff0c\u8be5\u5730\u5740\u4e3b\u8981\u7528\u4e8e\u5730\u5740\u89e3\u6790\u3001\u90bb\u5c45\u53d1\u73b0\u673a\u5236\u548c\u5730\u5740\u91cd\u590d\u68c0\u6d4b\u7b49\u529f\u80fd\u3002 \u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u7531\u56fa\u5b9a\u524d\u7f00FF02::1:FF00:0/104\u548c\u5bf9\u5e94IPv6\u5730\u5740\u7684\u6700\u540e24bit\u7ec4\u6210\u3002\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u7684\u6709\u6548\u8303\u56f4\u4e3a\u672c\u5730\u94fe\u8def\u8303\u56f4\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\uff1a \u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u7684\u4f5c\u7528\u7a76\u7adf\u662f\u4ec0\u4e48\u5462\uff1f\u4e3e\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u56de\u987e\u4e00\u4e0bIPv4\u4e2d\u7684ARP\uff0c\u8fd9\u4e2a\u534f\u8bae\u4e3b\u8981\u7528\u4e8e\u5730\u5740\u89e3\u6790\uff0c\u5f53\u8bbe\u5907\u9700\u8981\u89e3\u6790\u67d0\u4e2aIP\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\u65f6\uff0c\u5c31\u4f1a\u53d1\u9001\u4e00\u4e2a\u5e7f\u64adARP Request\u5e27\uff0c\u4e4b\u6240\u4ee5\u8981\u53d1\u9001\u5e7f\u64ad\u5e27\uff0c\u662f\u56e0\u4e3a\u5b83\u8981\u786e\u4fdd\u5e7f\u64ad\u57df\u5185\u6240\u6709\u8282\u70b9\u90fd\u80fd\u6536\u5230\uff08\u5b83\u4e0d\u77e5\u9053\u76ee\u6807\u8282\u70b9\u7684\u5177\u4f53\u4f4d\u7f6e\uff09\u3002\u7136\u800c\u9664\u4e86\u76ee\u6807\u8282\u70b9\u4e4b\u5916\uff0c\u8be5\u5e27\u5bf9\u4e8e\u5176\u4ed6\u8282\u70b9\u800c\u8a00\u662f\u4e2a\u56f0\u6270\uff0c\u56e0\u4e3a\u5b83\u4eec\u4e0d\u5f97\u4e0d\u53bb\u89e3\u6790\u8fd9\u4e2a\u5e27\uff08\u4ece\u6570\u636e\u94fe\u8def\u5c42\u5c01\u88c5\u4e00\u76f4\u89e3\u6790\u5230ARP\u8f7d\u8377\uff09\uff0c\u8fd9\u4e2a\u52a8\u4f5c\u5c06\u4f1a\u6d6a\u8d39\u8bbe\u5907\u7684\u8d44\u6e90\u3002 \u5728IPv6\u4e2d\uff0cARP\u53ca\u5e7f\u64ad\u90fd\u88ab\u53d6\u6d88\uff0c\u5f53\u8bbe\u5907\u9700\u8981\u8bf7\u6c42\u67d0\u4e2aIPv6\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\u65f6\uff0c\u8bbe\u5907\u4f9d\u7136\u9700\u8981\u53d1\u9001\u8bf7 \u6c42\u62a5\u6587\uff0c\u4f46\u662f\u8be5\u62a5\u6587\u662f\u4e00\u4e2a\u7ec4\u64ad\u62a5\u6587\uff0c\u5176\u76ee\u7684IPv6\u5730\u5740\u662f\u76ee\u6807IPv6\u5355\u64ad\u5730\u5740\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\uff0c\u800c \u76ee\u7684MAC\u5730\u5740\u5219\u662f\u8be5\u7ec4\u64ad\u5730\u5740\u5bf9\u5e94\u7684\u7ec4\u64adMAC\u5730\u5740\u3002\u7531\u4e8e\u53ea\u6709\u76ee\u6807\u8282\u70b9\u624d\u4f1a\u4fa6\u542c\u8fd9\u4e2a\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\uff0c \u56e0\u6b64\u5f53\u5176\u4ed6\u8bbe\u5907\u6536\u5230\u8be5\u5e27\u65f6\uff0c\u8fd9\u4e9b\u8bbe\u5907\u53ef\u4ee5\u901a\u8fc7\u76ee\u7684MAC\u5730\u5740\u3001\u5728\u7f51\u5361\u5c42\u9762\u5c31\u5224\u65ad\u51fa\u4e0d\u9700\u8981\u5904\u7406\u5b83\u5e76\u5c06\u5e27 \u4e22\u5f03\u3002 \u57fa\u7840\u914d\u7f6e","title":"\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_258","text":"","title":"\u57fa\u7840\u914d\u7f6e\u547d\u4ee4"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6_7","text":"[Quidway] ipv6 \u5728\u7f51\u7edc\u8bbe\u5907\u4e0a\u8fdb\u884cIPv6\u7684\u5404\u79cd\u914d\u7f6e\u4e4b\u524d\uff0c\u5fc5\u987b\u9996\u5148\u5728\u7cfb\u7edf\u89c6\u56fe\u4e0b\u6fc0\u6d3b\u8bbe\u5907\u7684IPv6\u529f\u80fd\u3002","title":"\u5168\u5c40\u6fc0\u6d3b\u8bbe\u5907\u7684IPv6\u529f\u80fd\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6_8","text":"[Quidway-GigabitEthernet0/0/0] ipv6 enable \u5728\u63a5\u53e3\u4e0a\u8fdb\u884cIPv6\u7684\u5404\u79cd\u914d\u7f6e\u4e4b\u524d\uff0c\u5fc5\u987b\u9996\u5148\u5728\u63a5\u53e3\u4e0a\u6fc0\u6d3bIPv6\u529f\u80fd\u3002","title":"\u6fc0\u6d3b\u8bbe\u5907\u63a5\u53e3\u7684IPv6\u529f\u80fd\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6_9","text":"[Quidway-GigabitEthernet0/0/0] ipv6 address 2001::1 64 \u4e0a\u9762\u7684\u547d\u4ee4\u7528\u4e8e\u4e3a\u63a5\u53e3\u6307\u5b9a\u5177\u4f53\u7684IPv6\u5730\u5740\uff0c\u5176\u4e2d\u5305\u62ec\u524d\u7f00\u53ca\u63a5\u53e3ID\u3002\u5f53\u7136\uff0c\u4e5f\u53ef\u4e3a\u63a5\u53e3\u6307\u5b9a\u5177\u4f53\u7684 IPv6\u524d\u7f00\uff0c\u800c\u63a5\u53e3ID\u5219\u8ba9\u8bbe\u5907\u901a\u8fc7EUI-64\u89c4\u8303\u81ea\u52a8\u4ea7\u751f\uff0c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff1a [Quidway-GigabitEthernet0/0/0] ipv6 address 2001:: 64 eui-64","title":"\u914d\u7f6e\u8bbe\u5907\u63a5\u53e3\u7684IPv6\u5168\u5c40\u5355\u64ad\u5730\u5740\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6_10","text":"\u5f53\u4e00\u4e2a\u63a5\u53e3\u6fc0\u6d3bIPv6\u540e\uff0c\u8be5\u63a5\u53e3\u6ca1\u6709\u4efb\u4f55IPv6\u5730\u5740\uff0c\u4e3a\u4e86\u8ba9\u63a5\u53e3\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\uff0c\u9700\u8981\u4e3a\u63a5\u53e3\u914d\u7f6eIPv6\u5730 \u5740\uff0c\u5f53\u7528\u6237\u4e3a\u63a5\u53e3\u914d\u7f6e\u5168\u5c40IPv6\u5355\u64ad\u5730\u5740\u540e\uff0c\u63a5\u53e3\u5c06\u81ea\u52a8\u914d\u7f6e\u94fe\u8def\u672c\u5730\u5730\u5740\uff0c\u65e0\u9700\u4eba\u4e3a\u5e72\u9884\u3002 \u4f46\u662f\u5982\u679c\u63a5\u53e3\u6ca1\u6709\u83b7\u5f97\u4efb\u4f55IPv6\u5355\u64ad\u5730\u5740\uff0c\u800c\u6211\u4eec\u53c8\u5e0c\u671b\u63a5\u53e3\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u90a3\u4e48\u9700\u9009\u7528\u4e0a\u9762\u4e24\u6761\u547d\u4ee4\u4e2d\u7684\u4e00\u6761\u8fdb\u884c\u94fe\u8def\u672c\u5730\u5730\u5740\u7684\u914d\u7f6e\u3002","title":"\u914d\u7f6e\u8bbe\u5907\u63a5\u53e3\u7684IPv6\u94fe\u8def\u672c\u5730\u5730\u5740\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#1ipv6","text":"","title":"\u5b9e\u9a8c 1\uff1aIPv6 \u5165\u95e8\u5b9e\u9a8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_259","text":"\u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\uff0cPC\u7684\u9ed8\u8ba4\u7f51\u5173\u4e3aSwitch\uff0c\u5b8c\u6210\u6240\u6709\u8bbe\u5907\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC\u80fd\u591fping\u901aRouter\u7684 Loopback0\u63a5\u53e3\u3002","title":"\u62d3\u6251\u53ca\u9700\u6c42"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_260","text":"Switch\u7684\u914d\u7f6e\u5982\u4e0b\uff1a Router\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PC\u7684\u7f51\u5361\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cPC\u5373\u53efping\u901a2001:2222::1\u3002\u6b64\u65f6\u770b\u4e00\u4e0b\u8def\u7531\u5668\u7684\u76f8\u5173\u53c2\u6570\uff1a [Router] display ipv6 interface brief *down: administratively down (l): loopback (s): spoofing Interface Physical Protocol GigabitEthernet0/0/0 [IPv6 Address] 2012::2 up up LoopBack0 up up(s) [IPv6 Address] 2001:2222::1 \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fRouter\u7684IPv6\u63a5\u53e3\u6458\u8981\uff0c\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u914d\u7f6e\u7684\u4e24\u4e2a\u63a5\u53e3\u7684IPv6\u5730\u5740\u3002 \u53ef\u4ee5\u8fdb\u4e00\u6b65\u67e5\u770b\u67d0\u4e2a\u63a5\u53e3\u7684\u8be6\u7ec6\u53c2\u6570\uff1a \u518d\u67e5\u770b\u4e00\u4e0b\u8def\u7531\u5668\u7684IPv6\u8def\u7531\u8868\u4e2d\u7684\u9759\u6001\u8def\u7531\uff1a","title":"\u914d\u7f6e\u53ca\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#2_3","text":"","title":"\u5b9e\u9a8c 2\uff1a\u65e0\u72b6\u6001\u5730\u5740\u81ea\u52a8\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_261","text":"\u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5176\u4e2dPC\u7684\u9ed8\u8ba4\u7f51\u5173\u4e3aSwitch\u3002PC\u901a\u8fc7\u65e0\u72b6\u6001\u5730\u5740\u81ea\u52a8\u914d\u7f6e\u7684\u65b9\u5f0f\u83b7\u5f97\u5176\u5168\u5c40\u5355\u64adIPv6\u5730\u5740\u53ca\u9ed8\u8ba4\u7f51\u5173\u5730\u5740\u3002\u5b8c\u6210\u6240\u6709\u8bbe\u5907\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC\u80fd\u591fping\u901aRouter\u7684Loopback0\u63a5\u53e3\u3002","title":"\u62d3\u6251\u53ca\u9700\u6c42"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_262","text":"Router\u7684\u914d\u7f6e\u5982\u4e0b\uff1a Switch\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PC\u7f51\u5361\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u7531\u4e8eRouter\u5f00\u542f\u4e86RA\uff08Router Advertisement\uff0c\u8def\u7531\u5668\u901a\u544a\uff09\u62a5\u6587\u7684\u901a\u544a\u529f\u80fd\uff0c\u56e0\u6b64\u4f1a\u4ecevlanif10\u63a5\u53e3\u53d1\u9001RA\u62a5\u6587\uff0c\u800cRA\u62a5\u6587\u4e2d\u5305\u542b\u4e86vlanif10\u7684IPv6\u5168\u5c40\u5355\u64ad\u5730\u5740\u524d\u7f00\u4fe1\u606f\uff082001::/64\uff09\uff0c PC\u7f51\u5361\u5728\u63a5\u6536\u5230\u8fd9\u4e2a\u4fe1\u606f\u540e\uff0c\u5c31\u53ef\u4ee5\u6839\u636e\u524d\u7f00\u4fe1\u606f\u518d\u52a0\u4e0a\u81ea\u5df1\u7f51\u5361\u7684\u6807\u8bc6\u7b26\u6784\u6210IPv6\u5168\u5c40\u5355\u64ad\u5730\u5740\u3002 PC\u7f51\u5361\u83b7\u53d6\u7684\u5730\u5740\uff1a TCPIP \u4e0a \u7684 NetBIOS . . . . . . . : \u5df2 \u542f \u7528 \u5982\u6b64\u4e00\u6765PC\u5c31\u80fd\u591fping\u901a2001:2222::1\u4e86\u3002 ICMPv6","title":"\u914d\u7f6e\u53ca\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#icmpv6","text":"ICMPv6\u662fIPv6\u7684\u57fa\u7840\u534f\u8bae\u4e4b\u4e00\u3002\u5728IPv6\u4e2d\uff0cICMPv6\u9664\u4e86\u63d0\u4f9bICMPv4\u7684\u5bf9\u5e94\u529f\u80fd\u4e4b\u5916\uff0c\u8fd8\u662f\u5176\u5b83\u4e00\u4e9b\u529f\u80fd\u7684\u57fa\u7840\uff0c\u5982\u90bb\u5c45\u53d1\u73b0\u3001\u65e0\u72b6\u6001\u5730\u5740\u914d\u7f6e\u3001\u91cd\u590d\u5730\u5740\u68c0\u6d4b\u3001PMTU\u53d1\u73b0\u7b49\u3002 ICMPv6\u62a5\u6587\u6709\u4e24\u79cd\uff1a\u5dee\u9519\u62a5\u6587\u53ca\u4fe1\u606f\u62a5\u6587\u3002 IANA\u5728IPv6\u5305\u5934\u7684NextHeader\u5b57\u6bb5\u4e2d\uff0c\u4e3aICMPv6\u5206\u914d\u7684\u503c\u662f58\u3002\u5982\u679c\u62a5\u6587\u5b58\u5728IPv6\u6269\u5c55\u5305\u5934\uff0c\u90a3\u4e48ICMPv6 \u8f7d\u8377\u4e0eTCP\u3001UDP\u8f7d\u8377\u4e00\u6837\uff0c\u5fc5\u987b\u4f4d\u4e8e\u6240\u6709\u6269\u5c55\u5305\u5934\u4e4b\u540e\u3002\u5728IPv6\u5305\u5934\u4e2d\uff0cNextHead=58\u5219\u8868\u793aIPv6\u5305\u5934\u540e\u5c01\u88c5\u7740\u4e00\u4e2aICMPv6\u62a5\u6587\u3002 \u5728ICMPv6\u7684\u62a5\u6587\u5934\u90e8\u4e2d\uff0cType\u5b57\u6bb5\u7528\u4e8e\u6307\u793a\u62a5\u6587\u7c7b\u578b\uff0cCode\u5b57\u6bb5\u7528\u4e8e\u8fdb\u4e00\u6b65\u6307\u793a\u62a5\u6587\u7684\u4f5c\u7528\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684ICMPv6\u62a5\u6587\u7c7b\u578b\uff1a \u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u62a5\u6587\uff0c\u4e3aNDP\u800c\u5b9a\u4e49\uff0c\u540e\u7eed\u4ecb\u7ecd\u3002","title":"ICMPv6 \u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ndp","text":"","title":"NDP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ndp_1","text":"NDP\uff08Neighbor Discovery Protocol\uff0c\u90bb\u5c45\u53d1\u73b0\u534f\u8bae\uff09\u5728RFC2462\u53caRFC4861\u4e2d\u5b9a\u4e49\u3002NDP\u5b9e\u73b0\u4e86IPv6\u4e2d\u8bf8\u591a\u91cd\u8981\u673a\u5236\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a **\u8def\u7531\u5668\u53d1\u73b0\uff1a**\u8be5\u529f\u80fd\u5e2e\u52a9\u8bbe\u5907\u53d1\u73b0\u94fe\u8def\u4e0a\u7684\u8def\u7531\u5668\uff0c\u5e76\u83b7\u5f97\u8def\u7531\u5668\u901a\u544a\u7684\u4fe1\u606f\u3002 **\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\uff1a**\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u662fIPv6\u7684\u4e00\u4e2a\u4eae\u70b9\u529f\u80fd\uff0c\u5b83\u4f7f\u5f97IPv6\u4e3b\u673a\u80fd\u591f\u975e\u5e38\u4fbf\u6377\u5730\u8fde\u5165\u5230IPv6 \u7f51\u7edc\u4e2d\uff0c\u5373\u63d2\u5373\u7528\uff0c\u65e0\u9700\u624b\u5de5\u914d\u7f6e\u7e41\u5197\u7684IPv6\u5730\u5740\uff0c\u65e0\u9700\u90e8\u7f72\u5e94\u7528\u670d\u52a1\u5668\uff08\u4f8b\u5982DHCP\u670d\u52a1\u5668\uff09\u4e3a\u4e3b\u673a\u5206\u53d1\u5730\u5740\u3002\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u673a\u5236\u4f7f\u7528\u5230\u4e86ICMPv6\u4e2d\u7684\u8def\u7531\u5668\u8bf7\u6c42\u62a5\u6587\uff08RS\uff09\u53ca\u8def\u7531\u5668\u901a\u544a\u62a5\u6587\uff08RA\uff09\u3002 **\u91cd\u590d\u5730\u5740\u68c0\u6d4b\uff1a**\u91cd\u590d\u5730\u5740\u68c0\u6d4b\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u673a\u5236\uff0c\u4e00\u4e2aIPv6\u5730\u5740\u5fc5\u987b\u7ecf\u5386\u91cd\u590d\u5730\u5740\u68c0\u6d4b\u5e76\u901a\u8fc7\u68c0\u6d4b\u4e4b\u540e\u624d\u80fd\u591f\u542f\u7528\u3002\u91cd\u590d\u5730\u5740\u68c0\u6d4b\u7528\u4e8e\u53d1\u73b0\u94fe\u8def\u4e0a\u662f\u5426\u5b58\u5728IPv6\u5730\u5740\u51b2\u7a81\u3002 **\u5730\u5740\u89e3\u6790\uff1a**\u5728IPv6\u4e2d\uff0c\u53d6\u6d88\u4e86IPv4\u4e2d\u7684ARP\u534f\u8bae\uff0c\u4f7f\u7528NDP\u6240\u5b9a\u4e49\u7684\u90bb\u5c45\u8bf7\u6c42\u62a5\u6587\uff08NS\uff09\u53ca\u90bb\u5c45\u901a\u544a\u62a5\u6587\uff08NA\uff09\u6765\u5b9e\u73b0\u5730\u5740\u89e3\u6790\u529f\u80fd\u3002 **\u90bb\u5c45\u7684\u72b6\u6001\u8ddf\u8e2a\uff1a**IPv6\u5b9a\u4e49\u4e86\u8282\u70b9\u4e4b\u95f4\u90bb\u5c45\u7684\u72b6\u6001\u673a\uff0c\u540c\u65f6\u8fd8\u7ef4\u62a4\u90bb\u5c45IPv6\u5730\u5740\u4e0e\u4e8c\u5c42\u5730\u5740\u5982MAC\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u76f8\u5e94\u7684\u8868\u9879\u5b58\u50a8\u4e8e\u8bbe\u5907\u7684IPv6\u90bb\u5c45\u8868\u4e2d\u3002 **\u524d\u7f00\u91cd\u7f16\u5740\uff1a**IPv6\u8def\u7531\u5668\u80fd\u591f\u901a\u8fc7ICMPv6\u7684\u8def\u7531\u5668\u901a\u544a\u62a5\u6587\uff08RA\uff09\u5411\u94fe\u8def\u4e0a\u901a\u544aIPv6\u524d\u7f00\u4fe1\u606f\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u4e3b\u673a\u80fd\u591f\u4eceRA\u4e2d\u6240\u5305\u542b\u7684\u524d\u7f00\u4fe1\u606f\u81ea\u52a8\u6784\u5efa\u81ea\u5df1\u7684IPv6\u5355\u64ad\u5730\u5740\u3002\u5f53\u7136\u8fd9\u4e9b\u81ea\u52a8\u83b7\u53d6\u7684\u5730\u5740\u662f\u6709\u751f\u5b58\u65f6\u95f4\u7684\u3002\u901a\u8fc7\u5728RA\u4e2d\u901a\u544aIPv6\u5730\u5740\u524d\u7f00\uff0c\u5e76\u4e14\u7075\u6d3b\u5730\u8bbe\u5b9a\u5730\u5740\u7684\u751f\u5b58\u65f6\u95f4\uff0c\u80fd\u591f\u5b9e\u73b0\u7f51\u7edc\u4e2dIPv6\u65b0\u3001\u8001\u524d\u7f00\u7684\u5e73\u6ed1\u8fc7\u6e21\uff0c\u800c\u65e0\u9700\u5728\u4e3b\u673a\u7ec8\u7aef\u4e0a\u6d88\u8017\u5927\u91cf\u7684\u624b\u5de5\u52b3\u52a8\u91cd\u65b0\u914d\u7f6e\u5730\u5740\u3002 **\u8def\u7531\u5668\u91cd\u5b9a\u5411\uff1a**\u8def\u7531\u5668\u5411\u4e00\u4e2aIPv6\u8282\u70b9\u53d1\u9001ICMPv6\u7684\u91cd\u5b9a\u5411\u62a5\u6587\uff0c\u901a\u77e5\u5b83\u5728\u76f8\u540c\u7684\u672c\u5730\u94fe\u8def\u4e0a\u6709\u4e00\u4e2a\u66f4\u597d\u7684\u3001\u5230\u8fbe\u76ee\u7684\u5730\u7684\u4e0b\u4e00\u8df3\u3002IPv6\u4e2d\u7684\u91cd\u5b9a\u5411\u529f\u80fd\u4e0eIPv4\u4e2d\u7684\u662f\u4e00\u6837\u7684\u3002 NDP\u4f7f\u7528ICMPv6\u7684\u76f8\u5173\u62a5\u6587\u5b9e\u73b0\u5176\u529f\u80fd\uff1a","title":"NDP\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_263","text":"\u4e24\u4e2a\u8282\u70b9\u4e4b\u95f4\u8981\u8fdb\u884cIP\u901a\u4fe1\uff0c\u9664\u4e86\u9700\u77e5\u6653\u53cc\u65b9\u7684\u7f51\u7edc\u5730\u5740\uff0c\u8fd8\u9700\u8981\u77e5\u9053\u7f51\u7edc\u5730\u5740\u5bf9\u5e94\u7684\u6570\u636e\u94fe\u8def\u5c42\u5730\u5740\u4ee5\u4fbf\u7ec4\u88c5\u6570\u636e\u5e27\uff0c\u5728\u4ee5\u592a\u7f51\u73af\u5883\u4e2d\uff0c\u8fd9\u4e2a\u6570\u636e\u94fe\u8def\u5c42\u5730\u5740\u5c31\u662fMAC\u5730\u5740\u3002\u5728IPv4\u4e2dARP\u7528\u4e8e\u5e2e\u52a9\u8282\u70b9\u83b7\u53d6\u76ee\u6807 IP\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\u3002ARP\u4f7f\u7528\u5e7f\u64ad\u7684\u65b9\u5f0f\u53d1\u9001Request\u62a5\u6587\u4ee5\u4fbf\u8bf7\u6c42\u76ee\u6807\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\uff0c\u8fd9\u5b9e\u9645\u4e0a\u9020\u6210\u4e86\u94fe\u8def\u4e0a\u5176\u4ed6\u8282\u70b9\u7684\u989d\u5916\u8d1f\u62c5\u3002 NDP\u4f7f\u7528Type 135\uff08\u90bb\u5c45\u8bf7\u6c42\u62a5\u6587NS\uff09\u53caType 136\uff08\u90bb\u5c45\u901a\u544a\u62a5\u6587NA\uff09\u6765\u66ff\u4ee3ARP\u5b9e\u73b0\u5730\u5740\u89e3\u6790\u3002\u5177\u4f53\u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a \u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cPC1\u8981\u8bf7\u6c42PC2\u76842001::2\u8fd9\u4e2a\u5730\u5740\u5bf9\u5e94\u7684MAC\u5730\u5740\uff0cPC1\u5c06\u53d1\u9001\u4e00\u4e2aNS\u62a5\u6587\u8fbe\u5230\u8fd9\u4e2a\u76ee\u7684\u3002\u8fd9\u4e2aNS\u62a5\u6587\u7684\u6e90\u5730\u5740\u662f2001::1\uff0c\u76ee\u7684\u5730\u5740\u5219\u662f2001::2\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u3002 \u7136\u540eIPv6\u6570\u636e\u5305\u53c8\u88ab\u5c01\u88c5\u4e0a\u6570\u636e\u5e27\u7684\u5934\u90e8\uff0c\u5176\u4e2d\u6e90MAC\u5730\u5740\u662fPC1\u7684MAC\u5730\u5740\uff0c\u76ee\u7684MAC\u5730\u5740\u5219\u662f2001::2 \u8fd9\u4e2a\u76ee\u6807\u5730\u5740\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\u6620\u5c04\u5f97\u5230\u7684MAC\u5730\u5740\uff0c\u8fd9\u662f\u4e00\u4e2a\u7ec4\u64adMAC\u5730\u5740\u3002 \u9664PC2\u5916\u7684\u5176\u4ed6\u8282\u70b9\u4e5f\u4f1a\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\uff0c\u5728\u8bfb\u53d6\u6570\u636e\u5e27\u5934\u7684\u65f6\u5019\u53d1\u73b0\u76ee\u7684MAC\u5730\u5740\u662f\u4e00\u4e2a\u7ec4\u64adMAC\u5730\u5740\uff0c \u800c\u8be5\u7ec4\u64adMAC\u5730\u5740\u5728\u672c\u5730\u5e76\u4e0d\u4fa6\u542c\uff0c\u56e0\u6b64\u5728\u7f51\u5361\u5c42\u9762\u5c31\u5c06\u6570\u636e\u5e27\u4e22\u5f03\u800c\u4e0d\u518d\u5f80\u62a5\u6587\u91cc\u770b\u4e86\u3002 PC2\u6536\u5230\u8fd9\u4e2a\u6570\u636e\u5e27\u540e\uff0c\u7531\u4e8e\u672c\u5730\u7f51\u5361\u63a5\u6536\u76ee\u7684MAC\u5730\u5740\u4e3a3333-FF00-0002\u7684\u6570\u636e\u5e27\uff0c\u56e0\u6b64\u5728\u5bf9\u6570\u636e\u5e27\u505a\u6821\u9a8c\u4e4b\u540e\u4ece\u5e27\u5934\u7684\u7c7b\u578b\u5b57\u6bb5\u5f97\u77e5\u91cc\u5934\u662f\u4e2aIPv6\u62a5\u6587\uff0c\u4e8e\u662f\u5c06\u5e27\u5934\u62c6\u6389\uff0c\u628aIPv6\u62a5\u6587\u4e0a\u9001IPv6\u534f\u8bae\u6808\u5904\u7406\u3002 IPv6 \u534f\u8bae\u6808\u4ece\u62a5\u6587\u7684IPv6 \u5934\u90e8\u4e2d\u7684\u76ee\u7684IPv6 \u5730\u5740\u5f97\u77e5\u8fd9\u4e2a\u6570\u636e\u5305\u662f\u53d1\u5f80\u4e00\u4e2a\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740 FF02::1:FF00:2\uff0c\u800c\u672c\u5730\u7f51\u5361\u52a0\u5165\u4e86\u8fd9\u4e2a\u7ec4\u64ad\u7ec4\u3002\u63a5\u7740\uff0c\u4eceIPv6\u5305\u5934\u7684NextHeader\u5b57\u6bb5\u5f97\u77e5IPv6\u5305\u5934\u540e\u9762\u5c01\u88c5\u7740\u4e00\u4e2aICMPv6\u7684\u62a5\u6587\uff0c\u56e0\u6b64\u5c06IPv6\u5305\u5934\u62c6\u9664\uff0c\u5c06ICMPv6\u62a5\u6587\u4ea4\u7ed9ICMPv6\u534f\u8bae\u53bb\u5904\u7406\u3002\u6700\u540eICMPv6 \u53d1\u73b0\u8fd9\u662f\u4e2aNS\u62a5\u6587\uff0c\u8981\u8bf7\u6c42\u81ea\u5df12001::2\u5bf9\u5e94\u7684MAC\u5730\u5740\uff0c\u4e8e\u662f\u56de\u9001\u4e00\u4e2aNA\u62a5\u6587\u7ed9PC1\uff0c\u5728\u8be5\u62a5\u6587\u4e2d\u5c31\u5305\u542b\u7740PC2\u7684MAC\u5730\u5740\u3002 \u5728windows7\u91cc\uff0c\u53ef\u4ee5\u4f7f\u7528**netsh interface ipv6 show neighbors**\u547d\u4ee4\u67e5\u770b\u90bb\u5c45\u7f13\u5b58\u7684\u5185\u5bb9\u3002IPv6\u4e0d\u50cfIPv4 \u90a3\u6837\u4f7f\u7528ARP\u8868\u6765\u7f13\u5b58IP\u4e0eMAC\u5730\u5740\u7684\u6620\u5c04\uff0c\u800c\u662f\u7ef4\u62a4\u4e00\u4e2aIPv6\u90bb\u5c45\u8868\u3002\u5728\u534e\u4e3a\u6570\u901a\u8bbe\u5907\u4e0a\u5219\u4f7f\u7528**display ipv6 neighbors**\u547d\u4ee4\u6765\u67e5\u770bIPv6\u90bb\u5c45\u8868\u3002 \u4ee5\u4e0b\u662f\u67d0\u53f0\u8bbe\u5907\u7684IPv6\u90bb\u5c45\u8868\uff1a","title":"\u5730\u5740\u89e3\u6790"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_264","text":"DAD\uff08Duplicate Address Detection\uff0c\u91cd\u590d\u5730\u5740\u68c0\u6d4b\uff09\uff0c\u7528\u4e8e\u786e\u4fddIPv6\u5355\u64ad\u5730\u5740\u5728\u94fe\u8def\u4e0a\u4e0d\u5b58\u5728\u51b2\u7a81\uff08\u91cd\u590d\uff09 \u6240\u6709IPv6\u5355\u64ad\u5730\u5740\u90fd\u9700\u8981\u901a\u8fc7DAD\u68c0\u6d4b\uff08\u5305\u62ec\u94fe\u8def\u672c\u5730\u5730\u5740\uff09\uff0c\u786e\u4fdd\u65e0\u51b2\u7a81\u540e\u624d\u80fd\u591f\u6b63\u5f0f\u542f\u7528\u3002\u4e00\u4e2aIPv6\u5730\u5740\u5728\u901a\u8fc7DAD\u68c0\u6d4b\u4e4b\u524d\u662f\u201ctentative\u201d\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u8bd5\u9a8c\u6027\u5730\u5740\u3002\u63a5\u53e3\u6682\u65f6\u8fd8\u4e0d\u80fd\u4f7f\u7528\u8fd9\u4e2a\u5730\u5740\u8fdb\u884c\u6b63\u5e38\u7684 IPv6\u901a\u8baf\uff0c\u4f46\u662f\u4f1a\u52a0\u5165\u8be5\u5730\u5740\u6240\u5bf9\u5e94\u7684Solicited-Node\u7ec4\u64ad\u7ec4\u3002 DAD\u4f7f\u7528NS\uff08\u90bb\u5c45\u8bf7\u6c42\uff09\u548cNA\uff08\u90bb\u5c45\u901a\u544a\uff09\u6765\u5b9e\u73b0\u5176\u529f\u80fd\u3002 DAD\u7684\u57fa\u672c\u673a\u5236\uff1a\u8282\u70b9\u5411IPv6\u5730\u5740\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u7ec4\u5730\u5740\u53d1\u9001\u4e00\u4e2aNS\u62a5\u6587\uff0c\u5982\u679c\u6536\u5230NA\u62a5\u6587\uff0c\u5c31\u8bc1\u660e\u8be5\u5730\u5740\u5df2\u88ab\u94fe\u8def\u4e0a\u7684\u5176\u4ed6\u8bbe\u5907\u4f7f\u7528\u4e86\uff0c\u5b83\u5c06\u4e0d\u80fd\u4f7f\u7528\u8be5\u5730\u5740\uff0c\u5426\u5219\uff0c\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5982\u679c\u6ca1\u6709\u8bbe\u5907\u56de\u5e94\uff0c\u5219\u6b63\u5f0f\u542f\u7528\u8be5\u5730\u5740\u3002 \u5728\u4e0a\u56fe\u4e2d\uff0cR2\u5df2\u662f\u5728\u7ebf\u7684\u8bbe\u5907\uff0c\u8be5\u8bbe\u5907\u5df2\u7ecf\u4f7f\u7528\u4e86\u5982\u56fe\u6240\u793a\u7684\u5730\u5740\uff0c\u73b0\u5728\u6211\u4eec\u4e3aR1\u65b0\u914d\u7f6eIPv6\u7684\u5730\u5740 2001::FFFF/64\uff0c\u89c2\u5bdf\u4e00\u4e0b\u4f1a\u53d1\u751f\u4ec0\u4e48\u4e8b\u60c5\u3002R1\u7684\u63a5\u53e3\u914d\u7f6e2001::FFFF/64\u5730\u5740\u540e\uff0c\u8be5\u5730\u5740\u7acb\u5373\u8fdb\u5165tentative \u72b6\u6001\uff0c\u6b64\u65f6\u4ecd\u7136\u662f\u4e0d\u53ef\u7528\u7684\uff0c\u9664\u975e\u8be5\u5730\u5740\u901a\u8fc7DAD\u68c0\u6d4b\u3002 R1\u5411\u94fe\u8def\u4e0a\u4ee5\u7ec4\u64ad\u7684\u65b9\u5f0f\u53d1\u9001\u4e00\u4e2aNS\u62a5\u6587\uff0c\u8be5NS\u7684\u6e90IPv6\u5730\u5740\u4e3a\u201c::\u201d\uff0c\u76ee\u7684IPv6\u5730\u5740\u4e3a\u8981\u8fdb\u884cDAD \u68c0\u6d4b\u76842001::FFFF\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u5730\u5740\uff0c\u4e5f\u5c31\u662fFF02::1:FF00:FFFF\u3002\u8fd9\u4e2aNS\u91cc\u5305\u542b\u7740\u8981\u505a DAD\u68c0\u6d4b\u7684\u76ee\u6807\u5730\u57402001::FFFF\u3002 \u94fe\u8def\u4e0a\u7684\u8282\u70b9\u90fd\u4f1a\u6536\u5230\u8fd9\u4e2a\u7ec4\u64ad\u7684NS\u62a5\u6587\uff0c\u6ca1\u6709\u914d\u7f6e2001::FFFF\u7684\u8282\u70b9\u63a5\u53e3\u7531\u4e8e\u6ca1\u6709\u52a0\u5165\u8be5\u5730\u5740\u5bf9\u5e94\u7684\u88ab\u8bf7\u6c42\u8282\u70b9\u7ec4\u64ad\u7ec4\uff0c\u56e0\u6b64\u5728\u6536\u5230\u8fd9\u4e2aNS\u7684\u65f6\u5019\u9ed8\u9ed8\u4e22\u5f03\u3002\u800cR2\u5728\u6536\u5230\u8fd9\u4e2aNS\u540e\uff0c\u7531\u4e8e\u5b83\u7684\u63a5\u53e3\u914d\u7f6e\u4e862001::FFFF\u5730\u5740\uff0c\u56e0\u6b64\u63a5\u53e3\u4f1a\u52a0\u5165\u7ec4\u64ad\u7ec4FF02::1:FF00:FFFF\uff0c\u800c\u6b64\u523b\u6240\u6536\u5230\u7684\u62a5\u6587\u53c8\u662f\u4ee5\u8be5\u5730\u5740\u4e3a\u76ee\u7684\u5730\u5740\uff0c\u56e0\u6b64\u5b83\u4f1a\u89e3\u6790\u8be5\u62a5\u6587\uff0c\u5b83\u53d1\u73b0\u5bf9\u65b9\u8fdb\u884cDAD\u7684\u76ee\u6807\u5730\u5740\u4e0e\u81ea\u5df1\u672c\u5730\u63a5\u53e3\u5730\u5740\u76f8\u540c\uff0c\u4e8e\u662f\u7acb\u5373\u56de\u9001\u4e00\u4e2aNA\u62a5\u6587\uff0c\u8be5\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u662fFF02::1\uff0c\u4e5f\u5c31\u662f\u6240\u6709\u8282\u70b9\u7ec4\u64ad\u5730\u5740\uff0c\u540c\u65f6\u5728\u62a5\u6587\u5185\u5199\u5165\u76ee\u6807\u5730\u57402001::FFFF\uff0c\u4ee5\u53ca\u81ea\u5df1\u63a5\u53e3\u7684MAC\u5730\u5740\u3002 \u5f53R1\u6536\u5230\u8fd9\u4e2aNA\u540e\uff0c\u5b83\u5c31\u77e5\u90532001::FFFF\u5728\u94fe\u8def\u4e0a\u5df2\u7ecf\u6709\u4eba\u5728\u7528\u4e86\uff0c\u56e0\u6b64\u5c06\u8be5\u5730\u5740\u6807\u8bb0\u4e3aDuplicate \uff08\u91cd\u590d\u7684\uff09\uff0c\u8be5\u5730\u5740\u5c06\u4e0d\u80fd\u7528\u4e8e\u901a\u4fe1\u3002\u6b64\u65f6\u5728R1\u4e0a\u53ef\u4ee5\u89c2\u5bdf\u5230\u5982\u4e0b\u73b0\u8c61\uff1a","title":"\u91cd\u590d\u5730\u5740\u68c0\u6d4b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_265","text":"\u5728IPv6\u4e2d\uff0c\u8bbe\u5907\u53ef\u4ee5\u901a\u8fc7\u624b\u5de5\u6216\u8005\u52a8\u6001\u7684\u65b9\u5f0f\u83b7\u53d6\u5730\u5740\u3002\u5728\u52a8\u6001\u83b7\u53d6\u5730\u5740\u7684\u65b9\u5f0f\u4e2d\uff0c\u5b58\u5728DHCPv6\u53ca\u65e0\u72b6\u6001\u5730\u5740\u81ea\u52a8\u914d\u7f6e\u4e24\u79cd\u65b9\u5f0f\u3002 IPv6\u5730\u5740\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\uff08StateLess Address AutoConfiguration\uff0cSLAAC\uff09\u662fIPv6\u7684\u6807\u51c6\u529f\u80fd\uff0c\u5728RFC2462\u4e2d\u5b9a\u4e49\u3002\u4f7f\u7528IPv6\u5730\u5740\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u540e\uff0c\u8bbe\u5907\u7684IPv6\u5730\u5740\u65e0\u9700\u8fdb\u884c\u624b\u5de5\u914d\u7f6e\uff0c\u800c\u662f\u5373\u63d2\u5373\u7528\uff0c\u8fd9\u51cf\u8f7b\u7f51\u7edc\u7ba1\u7406\u7684\u8d1f\u62c5\u3002\u76f8\u6bd4\u4e8eDHCPv6\u8fd9\u79cd\u52a8\u6001\u5730\u5740\u5206\u914d\u6280\u672f\u800c\u8a00\uff0cSLAAC\u65e0\u9700\u90e8\u7f72\u5e94\u7528\u670d\u52a1\u5668\uff0c\u66f4\u52a0\u8f7b\u91cf\u3002\u5f53\u7136\uff0c \u5b83\u4e5f\u6709\u7f3a\u70b9\uff0c\u4f8b\u5982SLAAC\u65e0\u6cd5\u5bf9\u7ec8\u7aef\u6240\u4f7f\u7528\u7684\u5730\u5740\u8fdb\u884c\u7ba1\u7406\uff0c\u4e5f\u5e76\u4e0d\u8bb0\u5f55\u5730\u5740\u5206\u914d\u7ed3\u679c\u3002","title":"\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_266","text":"\u4e3b\u673a\u6839\u636e\u672c\u5730\u63a5\u53e3ID\u81ea\u52a8\u4ea7\u751f\u7f51\u5361\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\u3002 \u4e3b\u673a\u5bf9\u94fe\u8def\u672c\u5730\u5730\u5740\u8fdb\u884cDAD\u68c0\u6d4b\uff0c \u5982\u679c\u8be5\u5730\u5740\u4e0d\u5b58\u5728\u51b2\u7a81\u5219\u53ef\u4ee5\u542f\u7528\u3002 \u4e3b\u673a\u53d1\u9001RS\u62a5\u6587\u5c1d\u8bd5\u5728\u94fe\u8def\u4e0a\u53d1\u73b0IPv6\u8def\u7531\u5668\uff0c\u8be5\u62a5\u6587\u7684\u6e90\u5730\u5740\u4e3a\u4e3b\u673a\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\u3002 \u8def\u7531\u5668\u56de\u590dRA\u62a5\u6587\uff08\u643a\u5e26IPv6\u524d\u7f00\u4fe1\u606f\uff0c\u8def\u7531\u5668\u5728\u672a\u6536\u5230RS\u65f6\u4e5f\u80fd\u591f\u901a\u8fc7\u914d\u7f6e\u4e3b\u52a8\u53d1\u51faRA\u62a5\u6587\uff09\u3002 \u4e3b\u673a\u6839\u636e\u8def\u7531\u5668\u56de\u5e94\u7684RA\u62a5\u6587\uff0c\u83b7\u5f97IPv6\u5730\u5740\u524d\u7f00\u4fe1\u606f\uff0c\u4f7f\u7528\u8be5\u5730\u5740\u524d\u7f00\uff0c\u52a0\u4e0a\u672c\u5730\u4ea7\u751f\u7684\u63a5\u53e3ID\uff0c \u5f62\u6210\u5355\u64adIPv6\u5730\u5740\u3002 \u4e3b\u673a\u5bf9\u751f\u6210\u7684IPv6\u5730\u5740\u8fdb\u884cDAD\u68c0\u6d4b\uff0c\u5982\u679c\u6ca1\u6709\u68c0\u6d4b\u5230\u51b2\u7a81\uff0c\u90a3\u4e48\u8be5\u5730\u5740\u624d\u80fd\u591f\u542f\u7528\u3002 \u534e\u4e3a\u8def\u7531\u5668\u548c\u4ea4\u6362\u673a\u90fd\u53ef\u4ee5\u914d\u7f6eRA\u901a\u544a\u529f\u80fd\uff0c\u5728RA\u62a5\u6587\u4e2d\u901a\u544aIPv6\u5730\u5740\u524d\u7f00\u3002","title":"\u5927\u81f4\u7684\u5de5\u4f5c\u8fc7\u7a0b\u5982\u4e0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_267","text":"\u8def\u7531\u5668\u53d1\u73b0\u529f\u80fd\u7528\u6765\u53d1\u73b0\u4e0e\u672c\u5730\u94fe\u8def\u76f8\u8fde\u7684\u8def\u7531\u5668\uff08\u4e5f\u53ef\u4ee5\u662f\u4ea4\u6362\u673a\u7b49\uff09\uff0c\u5e76\u83b7\u53d6\u4e0e\u5730\u5740\u81ea\u52a8\u914d\u7f6e\u76f8\u5173\u7684\u524d\u7f00\u548c\u5176\u4ed6\u914d\u7f6e\u53c2\u6570\u3002\u7ecf\u8fc7\u524d\u9762\u7684\u4ecb\u7ecd\uff0c\u6211\u4eec\u5df2\u7ecf\u77e5\u9053IPv6\u5730\u5740\u652f\u6301\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\uff0c\u5373\u4e3b\u673a\u901a\u8fc7\u8def\u7531\u5668\u53d1\u9001\u7684RA\u62a5\u6587\u83b7\u53d6\u7f51\u7edc\u524d\u7f00\u4fe1\u606f\uff0c\u7136\u540e\u4e3b\u673a\u81ea\u5df1\u751f\u6210\u5730\u5740\u7684\u63a5\u53e3\u6807\u8bc6\u90e8\u5206\uff0c\u5e76\u81ea\u52a8\u914d\u7f6eIPv6\u5730\u5740\u3002 \u8def\u7531\u5668\u53d1\u73b0\u529f\u80fd\u662fIPv6\u5730\u5740\u81ea\u52a8\u914d\u7f6e\u529f\u80fd\u7684\u57fa\u7840\uff0c\u4e3b\u8981\u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u62a5\u6587\u5b9e\u73b0\uff1a RA\uff08Router Advertisement\uff0c\u8def\u7531\u5668\u901a\u544a\uff09\u62a5\u6587\uff1a\u6bcf\u53f0\u8bbe\u5907\u4e3a\u4e86\u8ba9\u4e8c\u5c42\u7f51\u7edc\u4e0a\u7684\u4e3b\u673a\u548c\u8bbe\u5907\u77e5\u9053\u81ea\u5df1\u7684\u5b58\u5728\uff0c\u53ef\u4ee5\u5b9a\u65f6\u4ee5\u7ec4\u64ad\u65b9\u5f0f\u53d1\u9001RA\u62a5\u6587\uff0cRA\u62a5\u6587\u4e2d\u4f1a\u5e26\u6709\u7f51\u7edc\u524d\u7f00\u4fe1\u606f\uff0c\u53ca\u5176\u4ed6\u4e00\u4e9b\u6807\u5fd7\u4f4d\u4fe1\u606f\u3002RA \u62a5\u6587\u7684Type\u5b57\u6bb5\u503c\u4e3a134\u3002 RS\uff08Router Solicitation\uff0c\u8def\u7531\u5668\u8bf7\u6c42\uff09\u62a5\u6587\uff1a\u5f88\u591a\u60c5\u51b5\u4e0b\u4e3b\u673a\u63a5\u5165\u7f51\u7edc\u540e\u5e0c\u671b\u5c3d\u5feb\u83b7\u53d6\u7f51\u7edc\u524d\u7f00\u8fdb\u884c\u901a\u4fe1\uff0c\u6b64\u65f6\u4e3b\u673a\u53ef\u4ee5\u7acb\u523b\u53d1\u9001RS\u62a5\u6587\uff0c\u7f51\u7edc\u4e0a\u7684\u8bbe\u5907\u5c06\u56de\u5e94RA\u62a5\u6587\u3002RS\u62a5\u6587\u7684Tpye\u5b57\u6bb5\u503c\u4e3a133\u3002","title":"\u8def\u7531\u5668\u53d1\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ra","text":"RA\u62a5\u6587\u683c\u5f0f\u5982\u4e0b\uff1a","title":"RA\u62a5\u6587\u89e3\u6790"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ra_1","text":"\u5728\u4e00\u4e2aRA\u62a5\u6587\u4e2d\uff0c\u53ef\u4ee5\u5305\u542b\u591a\u4e2aICMPv6 Option\uff08\u53ef\u9009\u9879\uff09\uff0c\u8def\u7531\u5668\u5411\u94fe\u8def\u901a\u544a\u7684IPv6\u5730\u5740\u524d\u7f00\u4fe1\u606f\u5c31\u662f\u4ee5ICMPv6 Option\u7684\u5f62\u5f0f\u88abRA\u62a5\u6587\u643a\u5e26\u7684\u3002\u4e00\u4e2aRA\u62a5\u6587\u53ef\u4ee5\u5305\u542b0\u4e2a\u30011\u4e2a\u6216\u8005\u591a\u4e2aIPv6\u524d\u7f00\uff0c\u6bcf\u4e2a\u524d\u7f00\u90fd\u4ee5\u4e00\u4e2aOption\u6765\u643a\u5e26\u3002 \u4e0b\u9762\u6211\u4eec\u770b\u770b\u7528\u4e8e\u643a\u5e26IPv6\u524d\u7f00\u7684Option\u6709\u4ec0\u4e48\u8fdb\u4e00\u6b65\u7684\u5185\u5bb9\uff1a \u4ece\u62a5\u6587\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u7528\u4e8e\u643a\u5e26IPv6\u524d\u7f00\u7684Option\u5185\uff0c\u9664\u4e86\u6709\u524d\u7f00\u4fe1\u606f\uff0c\u4ee5\u53ca\u524d\u7f00\u957f\u5ea6\uff0c\u8fd8\u6709\u51e0\u4e2a\u6807\u5fd7\u4f4d\uff0c\u548c\u4e24\u4e2alifetime\u3002\u5173\u4e8e\u6807\u5fd7\u4f4d\u4e0a\u9762\u5df2\u7ecf\u6709\u6240\u4ecb\u7ecd\u4e86\uff0c\u800c\u8fd9\u4e24\u4e2alifetime\u8bf7\u770b\u4e0b\u6587\u3002 \u524d\u9762\u5df2\u7ecf\u8bf4\u4e86\uff0c\u8def\u7531\u5668\u53d1\u9001\u7684RA\u4e2d\u53ef\u4ee5\u5305\u542bIPv6\u524d\u7f00\u4fe1\u606f\uff0c\u4e3b\u673a\u5728\u6536\u5230RA\u540e\uff0c\u5c31\u80fd\u591f\u4f7f\u7528RA\u4e2d\u6240\u643a\u5e26\u7684IPv6\u524d\u7f00\u6765\u6784\u9020\u81ea\u5df1\u7684IPv6\u5355\u64ad\u5730\u5740\u3002\u5728RA\u6240\u643a\u5e26\u7684\u6bcf\u4e2aIPv6\u524d\u7f00\u4fe1\u606f\u4e2d\u90fd\u5404\u81ea\u6346\u7ed1\u4e86\u4e24\u4e2a lifetime\uff0c\u5176\u4e2d\u4e00\u4e2a\u662fvalid lifetime\uff0c\u53e6\u4e00\u4e2a\u662fpreferred lifetime\u3002 \u5728\u4e3b\u673a\u4f7f\u7528RA\u4e2d\u7684\u524d\u7f00\u6784\u9020IPv6\u5355\u64ad\u5730\u5740\u540e\uff0c\u8be5\u5730\u5740\u9700\u8981\u5148\u7ecf\u8fc7DAD\uff0c\u5728DAD\u8fc7\u7a0b\u4e2d\u7684\u5730\u5740\u72b6\u6001\u4e3a tantative\uff0c\u8fd8\u4e0d\u80fd\u591f\u542f\u7528\u3002DAD\u901a\u8fc7\u540e\u5730\u5740\u5373\u53ef\u6b63\u5f0f\u542f\u7528\uff0c\u5730\u5740\u542f\u7528\u540e\u8fdb\u5165Preferred\u72b6\u6001\uff0c\u540c\u65f6\u542f\u52a8\u8ba1\u65f6\u5668\uff0c\u5f53\u5730\u5740\u751f\u5b58\u65f6\u95f4\u8d85\u8fc7preferred lifetime\u65f6\uff0c\u5730\u5740\u8fdb\u5165deprecated\u72b6\u6001\uff0c\u5904\u4e8e\u8be5\u72b6\u6001\u7684\u5730\u5740\u53ea\u80fd\u7528\u4e8e\u88ab\u52a8\u63a5\u6536\u8fde\u63a5\uff0c\u800c\u4e0d\u80fd\u591f\u7528\u4e8e\u4e3b\u52a8\u53d1\u8d77\u7684\u8fde\u63a5\u3002\u5f53\u5730\u5740\u7684\u751f\u5b58\u65f6\u95f4\u8d85\u51favalid lifetime\u540e\uff0c\u5730\u5740\u5c31\u53d8\u6210\u4e86invalid\uff0c\u4e0d\u518d\u53ef\u7528\u3002","title":"RA\u62a5\u6587\u4e2d\u7684\u53ef\u9009\u5b57\u6bb5\uff1a\u524d\u7f00\u4fe1\u606f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ra_2","text":"RA\u62a5\u6587\u7684\u76f8\u5173\u53c2\u6570\u7684\u4fee\u6539\u5728\u63a5\u53e3\u4e0a\u5b8c\u6210\uff1a","title":"\u4fee\u6539RA\u62a5\u6587\u7684\u76f8\u5173\u53c2\u6570"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6-nd-ra-halt","text":"\u6291\u5236\u63a5\u53e3\u7684RA\u62a5\u6587\u5468\u671f\u6027\u53d1\u9001\uff0c\u8be5\u547d\u4ee4\u9ed8\u8ba4\u5f00\u542f\uff0c\u4e5f\u5c31\u662f\u8bf4\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u63a5\u53e3\u4e0d\u4f1a\u5468\u671f\u6027\u53d1\u9001RA \u62a5\u6587\uff0c\u4f7f\u7528**undo**\u5173\u952e\u5b57\u53ef\u5c06\u8be5\u547d\u4ee4\u53d6\u6d88\u3002","title":"ipv6 nd ra halt"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6-nd-ra-hop-limit","text":"\u4fee\u6539RA\u62a5\u6587\u4e2dhop-limit\u5b57\u6bb5\u7684\u503c\uff0c\u8be5\u503c\u4f5c\u4e3a\u4e3b\u673a\u53d1\u9001\u51fa\u6765\u7684IPv6\u62a5\u6587\u7684hop-limit\u3002","title":"ipv6 nd ra hop-limit"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6-nd-ra-max-interval-ipv6-nd-ra-min-interval","text":"\u5468\u671f\u6027\u53d1\u9001RA\u62a5\u6587\u7684\u6700\u5927\u53ca\u6700\u5c0f\u65f6\u95f4\u95f4\u9694\u3002","title":"ipv6 nd ra max-interval \u53ca ipv6 nd ra min-interval"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6-nd-ra-prefix","text":"\u4fee\u6539RA\u62a5\u6587\u6240\u643a\u5e26\u7684IPv6\u524d\u7f00\u53ca\u524d\u7f00\u6240\u5173\u8054\u7684\u53c2\u6570\uff0c\u8fd9\u6761\u547d\u4ee4\u7684\u8be6\u7ec6\u5185\u5bb9\u8bf7\u89c1\u4e0b\u6587\u3002","title":"ipv6 nd ra prefix"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6-nd-ra-router-lifetime","text":"\u4fee\u6539RA\u62a5\u6587\u4e2drouter-lifetime\u7684\u503c\uff0c\u9ed8\u8ba41800s\u3002 \u4f7f\u7528**ipv6 nd ra prefix**\u547d\u4ee4\uff0c\u53ef\u4ee5\u4fee\u6539RA\u62a5\u6587\u6240\u643a\u5e26\u7684IPv6\u524d\u7f00\u53ca\u5176\u6240\u5173\u8054\u7684\u53c2\u6570\uff1a 1. ipv6 nd ra prefix 2001:: 64 360000 180000 \u4fee\u6539\u7279\u5b9a\u524d\u7f00\u7684**valid lifetime**\u53ca**preferred lifetime** \uff0c\u6ce8\u610f\u524d\u8005\u4e00\u5b9a\u8981\u6bd4\u540e\u8005\u5927\u3002 2. ipv6 nd ra prefix 2001:: 64 360000 180000 no-autoconfig \u5c06\u8be5\u524d\u7f00\u7684A\u6bd4\u7279\u8bbe\u7f6e\u4e3a0\uff0c\u8be5\u524d\u7f00\u5c06\u4e0d\u80fd\u88ab\u7528\u4e8e\u65e0\u72b6\u6001\u81ea\u52a8\u914d\u7f6e\u3002 3. ipv6 nd ra prefix 2001:: 64 360000 180000 off-link \u5c06\u8be5\u524d\u7f00\u7684L\u6bd4\u7279\u8bbe\u7f6e\u4e3a0\u3002 IPv6 \u8fc7\u6e21\u6280\u672f","title":"ipv6 nd ra router-lifetime"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_268","text":"\u73b0\u4ecaIP\u7f51\u7edc\u4ecd\u7136\u662f\u4ee5IPv4\u4e3a\u4e3b\u4f53\uff0cIPv6\u7f51\u7edc\u53ea\u662f\u5f97\u5230\u5c0f\u8303\u56f4\u7684\u90e8\u7f72\u548c\u5546\u7528\uff0c\u56e0\u6b64\u5fc5\u7136\u4f1a\u5728\u5f88\u957f\u7684\u4e00\u4e2a\u65f6\u671f\u5185\uff0cIPv4\u53caIPv6\u7f51\u7edc\u4f1a\u6709\u5171\u5b58\u7684\u573a\u666f\uff0c\u90a3\u5c31\u9700\u8981\u8003\u8651V4V6\u5e76\u5b58\u7684\u7b56\u7565\u548c\u6280\u672f\u3002 \u540c\u65f6\u4eceIPv4\u8fc7\u6e21\u5230IPv6\u4e0d\u53ef\u80fd\u4e00\u6c14\u5475\u6210\uff0c\u8fd9\u662f\u4e00\u4e2a\u7efc\u5408\u653f\u6cbb\u3001\u7ecf\u6d4e\u3001\u5546\u4e1a\u3001\u6280\u672f\u3001\u65b9\u6cd5\u3001\u7b56\u7565\u7b49\u5404\u79cd\u56e0\u7d20\u7684\u95ee\u9898\uff0c\u56e0\u6b64IPv4\u5230IPv6\u7684\u8fc7\u6e21\u9700\u8981\u4e00\u4e2a\u6f2b\u957f\u7684\u8fc7\u7a0b\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u5c31\u4e0d\u5f97\u4e0d\u8003\u8651\u8fc7\u6e21\u7684\u7b56\u7565\u548c\u65b9\u6cd5\u3002\u4ee5\u4e0b\u662f\u4e09\u79cd\u5e38\u89c1\u7684\u5171\u5b58\u7b56\u7565\u548c\u8fc7\u6e21\u6280\u672f\uff1a","title":"\u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#dualstack","text":"\u6240\u8c13\u7684\u53cc\u6808\u5c31\u662f\u4e3b\u673a\u6216\u8005\u7f51\u7edc\u8bbe\u5907\u540c\u65f6\u652f\u6301IPv4\u53caIPv6\u53cc\u534f\u8bae\u6808\uff0c\u5982\u679c\u8282\u70b9\u652f\u6301\u53cc\u6808\uff0c\u90a3\u4e48\u5b83\u80fd\u591f\u540c\u65f6\u4f7f\u7528V4\u548cV6\u7684\u534f\u8bae\u6808\u3001\u540c\u65f6\u5904\u7406IPv4\u53caIPv6\u7684\u6570\u636e\u3002 \u5728\u53cc\u6808\u8bbe\u5907\u4e0a\uff0c\u4e0a\u5c42\u5e94\u7528\u4f1a\u4f18\u5148\u9009\u62e9IPv6\u534f\u8bae\u6808\uff0c\u800c\u4e0d\u662fIPv4\u3002\u6bd4\u5982\uff0c\u4e00\u4e2a\u540c\u65f6\u652f\u6301v4\u548cv6\u7684\u5e94\u7528\u8bf7\u6c42\u901a\u8fc7DNS\u8bf7\u6c42\u5730\u5740\uff0c\u4f1a\u5148\u8bf7\u6c42AAAA\u8bb0\u5f55\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u518d\u8bf7\u6c42A\u8bb0\u5f55\u3002 \u5c31\u62ff\u4e0a\u56fe\u6765\u8bf4\uff0c\u8def\u7531\u5668\u5c31\u662f\u4e00\u4e2a\u53cc\u6808\u8bbe\u5907\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8def\u7531\u5668\u672c\u8eab\u5c31\u5df2\u7ecf\u652f\u6301IPv4\uff0c\u63a5\u53e3\u4e0a\u4e5f\u914d\u7f6e\u4e86 IPv4\u7684\u5730\u5740\uff0c\u5df2\u7ecf\u80fd\u591f\u6b63\u5e38\u8f6c\u53d1IPv4\u7684\u62a5\u6587\uff0c\u6b64\u523b\u5728\u6fc0\u6d3b\u8def\u7531\u5668\u7684IPv6\u6570\u636e\u8f6c\u53d1\u80fd\u529b\uff0c\u518d\u4e3a\u63a5\u53e3\u5206\u914d IPv6\u7684\u5355\u64ad\u5730\u5740\uff0c\u90a3\u4e48\u8fd9\u4e2a\u63a5\u53e3\u53c8\u6709\u4e86IPv6\u6570\u636e\u8f6c\u53d1\u80fd\u529b\u3002\u5f53\u7136\uff0c\u6b64\u65f6\u5bf9\u4e8e\u8def\u7531\u5668\u800c\u8a00\uff0cIPv4\u53caIPv6\u534f\u8bae\u6808\u4e92\u4e0d\u5e72\u6270\uff0c\u72ec\u7acb\u5de5\u4f5c\u3002 \u53cc\u6808\u662fV4\u3001V6\u5e76\u5b58\u53caIPv6\u8fc7\u6e21\u6280\u672f\u7684\u57fa\u7840\u3002","title":"\u53cc\u6808DualStack"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_269","text":"\u96a7\u9053\u6280\u672f\u662f\u4e00\u79cd\u975e\u5e38\u7ecf\u5178\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u88ab\u5e94\u7528\u5728\u5404\u79cd\u573a\u666f\u4e2d\u89e3\u51b3\u6570\u636e\u901a\u4fe1\u95ee\u9898\u3002\u7b80\u5355\u5730\u8bf4\u5c31\u662f\u5728\u4e24\u4e2a\u901a\u4fe1\u5b64\u5c9b\u4e4b\u95f4\u642d\u5efa\u4e00\u6761\u865a\u62df\u901a\u9053\uff0c\u4f7f\u5f97\u6b64\u4e8c\u8005\u80fd\u591f\u901a\u8fc7\u8fd9\u6761\u96a7\u9053\u3001\u7a7f\u8d8a\u4e2d\u95f4\u7684\u7f51\u7edc\u8fdb\u884c\u901a\u4fe1\u3002\u96a7\u9053\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u5176\u5b9e\u5c31\u662f\u5c06\u4e00\u79cd\u534f\u8bae\u7684\u6570\u636e\u62a5\u6587\u5c01\u88c5\u5728\u53e6\u4e00\u79cd\u534f\u8bae\u4e2d\uff0c\u4f8b\u5982\u5c06IPv6\u62a5\u6587\u5c01\u88c5\u5728IPv4\u5934\u90e8\u540e\uff0c\u4f7f\u5f97IPv6\u6d41\u91cf\u80fd\u591f\u7a7f\u8d8aIPv4\u7f51\u7edc\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002 \u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cR1\u53caR2\u90fd\u8fde\u63a5\u5230\u540c\u4e00\u4e2aIPv4\u7f51\u7edc\u4e2d\uff0c\u540c\u65f6\u8fd8\u5404\u81ea\u8fde\u63a5\u4e00\u4e2aIPv6\u7f51\u7edc\u3002\u6b64\u523bR1\u53caR2 \u5747\u662f\u53cc\u6808\u8def\u7531\u5668\uff0c\u800c\u4e24\u8005\u5404\u81ea\u4e0b\u6302\u7684\u8fd9\u4e24\u4e2aIPv6\u7f51\u7edc\u5176\u5b9e\u662f\u4fe1\u606f\u5b64\u5c9b\uff0c\u5f7c\u6b64\u4e4b\u95f4\u65e0\u6cd5\u4e92\u76f8\u901a\u4fe1\uff0c\u56e0\u4e3a\u8981\u901a\u4fe1\u5c31\u9700\u8981\u7ecf\u8fc7\u4e2d\u95f4\u7684\u7f51\u7edc\uff0c\u800c\u4e2d\u95f4\u7684\u7f51\u7edc\u662fIPv4\u7684\uff0c\u6839\u672c\u65e0\u6cd5\u8bc6\u522bIPv6\u6570\u636e\u3002 \u8fd9\u4e2a\u573a\u666f\u76f8\u4fe1\u5728\u5982\u4eca\u7684\u7f51\u7edc\u4e2d\u662f\u5e38\u89c1\u7684\uff0c\u6bd5\u7adf\u5982\u4ecaIP\u7f51\u7edc\u7684\u4e3b\u4f53\u8fd8\u662fIPv4\uff0cIPv6\u7684\u7ad9\u70b9\u53ea\u662f\u96f6\u661f\u5efa\u7acb\uff0c \u90a3\u4e48\u5982\u4f55\u5b9e\u73b0IPv6\u7ad9\u70b9\u4e4b\u95f4\u7684\u76f8\u4e92\u901a\u4fe1\u5462\u3002 \u5229\u7528\u96a7\u9053\u6280\u672f\u53ef\u4ee5\u5728R1\u53caR2\u4e4b\u95f4\u5efa\u7acb\u8d77\u4e00\u6761\u70b9\u5230\u70b9\u7684\u901a\u9053\uff0c\u8fd9\u6761\u865a\u62df\u901a\u9053\u7a7f\u8d8a\u4e86\u4e2d\u95f4\u7684IPv4\u7f51\u7edc\uff0c\u4f7f\u5f97\u4e24\u4e2a\u4fe1\u606f\u5b64\u5c9b\u4e4b\u95f4\u80fd\u591f\u4e92\u901a\u3002\u5b9e\u9645\u4e0a\u5b64\u5c9b\u4e4b\u95f4\u7684IPv6\u4e92\u8bbf\u6d41\u91cf\u8fd8\u662f\u7ecf\u8fc7\u4e2d\u95f4\u7684IPv4\u7f51\u7edc\u8fdb\u884c\u8f6c\u53d1\uff0c\u53ea\u4e0d\u8fc7\u5728\u88ab\u8f6c\u53d1\u7684IPv6\u62a5\u6587\u57fa\u7840\u4e4b\u4e0a\u589e\u52a0\u4e86\u4e00\u4e2a\u65b0\u7684IPv4\u5934\u90e8\uff0c\u8fd9\u4e2a\u5934\u90e8\u6211\u4eec\u79f0\u4e4b\u4e3a\u96a7\u9053\u5934\uff0c\u6b63\u662f\u8fd9\u4e2a\u96a7\u9053IPv4\u5934\u90e8\uff0c\u4f7f\u5f97IPv6\u62a5\u6587\u80fd\u591f\u88ab\u5305\u88f9\u5728\u5176\u4e2d\u4ece\u800c\u7a7f\u8d8a\u4e2d\u95f4\u7684IPv4\u7f51\u7edc\u3002","title":"\u96a7\u9053\u6280\u672f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat64","text":"NAT64\u6280\u672f\u5b9e\u9645\u4e0a\u662f\u4e00\u79cd\u534f\u8bae\u8f6c\u6362\u6280\u672f\uff0c\u80fd\u591f\u5c06\u5206\u7ec4\u5728V4\u53caV6\u683c\u5f0f\u4e4b\u95f4\u7075\u6d3b\u8f6c\u6362\u3002\u5f53IPv4\u7f51\u7edc\u7684\u8282\u70b9\u9700\u8981\u76f4\u63a5\u4e0eIPv6\u7f51\u7edc\u7684\u8282\u70b9\u8fdb\u884c\u901a\u4fe1\u65f6\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5f53\u7136\u662f\u884c\u4e0d\u901a\u7684\uff0c\u56e0\u4e3a\u4e24\u4e2a\u534f\u8bae\u6808\u65e0\u6cd5\u517c\u5bb9\u3002\u4f46\u662f\u501f\u52a9\u4e00\u53f0\u8bbe\u5907\uff0c\u7531\u8be5\u8bbe\u5907\u6765\u5b9e\u73b0IPv6\u4e0eIPv4\u7684\u4e92\u8f6c\uff0c\u90a3\u4e48\u4e0a\u8ff0\u901a\u4fe1\u9700\u6c42\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e86\u3002","title":"NAT64"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ipv6-over-ipv4","text":"\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0cR1\u53caR2\u90fd\u8fde\u63a5\u5230\u540c\u4e00\u4e2aIPv4\u7f51\u7edc\u4e2d\uff0cR1\u4f7f\u7528\u5730\u574010.1.1.1\u63a5\u5165IPv4\u7f51\u7edc\uff0cR2\u4f7f\u7528 10.2.2.2\u63a5\u5165IPv4\u7f51\u7edc\uff0c\u4e24\u8005\u7684IPv4\u5730\u5740\u80fd\u591f\u4e92\u901a\u3002 \u6b64\u5916R1\u3001R2\u8fd8\u8fde\u63a5\u5230\u4e00\u4e2aIPv6\u7f51\u7edc\uff0c\u800c\u4e24\u8005\u5404\u81ea\u4e0b\u6302\u7684\u8fd9\u4e24\u4e2aIPv6\u7f51\u7edc\u5176\u5b9e\u662f\u4fe1\u606f\u5b64\u5c9b\uff0c\u5f7c\u6b64\u4e4b\u95f4\u65e0\u6cd5\u4e92\u76f8\u901a\u4fe1\uff0c\u56e0\u4e3aIPv6\u62a5\u6587\u4e0d\u53ef\u80fd\u76f4\u63a5\u88ab\u9001\u5230IPv4\u7f51\u7edc\uff0c\u8fd9\u79cd\u62a5\u6587\u5728\u4e2d\u95f4\u7684\u7f51\u7edc\u662f\u4e0d\u53ef\u88ab\u8def\u7531\u7684\u3002 \u5728R1\u53caR2\u4e4b\u95f4\u5229\u7528\u96a7\u9053\u6280\u672f\u53ef\u4ee5\u5efa\u7acb\u8d77\u4e00\u6761\u70b9\u5230\u70b9\u7684\u901a\u9053\uff0c\u6211\u4eec\u8fd9\u91cc\u4f7f\u7528\u7684\u662fIPv6 Over IPv4\u7684\u624b\u5de5\u96a7\u9053\uff0c \u4e5f\u5c31\u662f\u5728R1\u53caR2\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761\u865a\u62df\u7684\u624b\u5de5\u96a7\u9053\uff0c\u5728R1\u4e0a\u96a7\u9053\u7684\u6e90\u662f10.1.1.1\uff0c\u76ee\u7684\u662f10.2.2.2\uff0c\u53ea\u8981\u662fPC1 \u8bbf\u95eePC2\u7684\u6d41\u91cf\u5c31\u5f80\u96a7\u9053\u91cc\u6254\u3002R2\u540c\u7406\uff0c\u96a7\u9053\u7684\u6e90\u662f10.2.2.2\uff0c\u76ee\u7684\u662f10.1.1.1\u3002 \u73b0\u5728\u5f53PC1\u8981\u8bbf\u95eePC2\u65f6\uff0cPC1\u53d1\u9001\u51fa\u6765\u7684\u662fIPv6\u6570\u636e\uff0c\u8fd9\u4e9b\u6570\u636e\u88ab\u4e22\u7ed9\u9ed8\u8ba4\u7f51\u5173R1\uff0cR1\u7ecf\u8fc7IPv6\u8def\u7531\u8868\u67e5\u8be2\u540e\u53d1\u73b0\u8fd9\u4e9b\u6570\u636e\u8981\u9001\u5f80\u96a7\u9053\u63a5\u53e3\uff0c\u4e8e\u662f\u8fd9\u4e9bIPv6\u62a5\u6587\u88ab\u5c01\u88c5\u4e0a\u4e00\u4e2a\u96a7\u9053\u7684IPv4\u5934\u90e8\uff0c\u5728IPv4\u5934\u90e8\u4e2d\u6e90IP \u5730\u5740\u4e3a\u96a7\u9053\u7684\u6e90\u5730\u574010.1.1.1\uff0c\u76ee\u7684IP\u5730\u5740\u4e3a\u96a7\u9053\u7684\u76ee\u7684\u5730\u574010.2.2.2\u3002\u7136\u540e\u8fd9\u4e2a\u88ab\u5c01\u88c5\u7684\u62a5\u6587\u5c31\u9001\u5165\u4e86IPv4 \u7f51\u7edc\uff0c\u7531\u4e8e\u62a5\u6587\u5916\u5934\u5c01\u88c5\u4e86\u4e00\u4e2aIPv4\u7684\u5934\u90e8\uff0c\u56e0\u6b64IPv4\u7f51\u7edc\u4e2d\u7684\u8bbe\u5907\u5c06\u53ea\u4f1a\u89e3\u6790\u8fd9\u4e2aIPv4\u5934\u90e8\uff0c\u800c\u4e0d\u4f1a\u5173\u5fc3\u91cc\u5934\u88c5\u7684\u662f\u4ec0\u4e48\uff0c\u8fd9\u4e2a\u62a5\u6587\u88ab\u4e00\u8def\u8f6c\u53d1\u6700\u7ec8\u5230\u8fbe10.2.2.2\uff0c\u4e5f\u5c31\u662fR2\u3002R2\u518d\u5c06\u62a5\u6587\u7684IPv4\u5934\u90e8\u62c6\u9664\uff0c\u7136\u540e\u5c06\u91cc\u5934\u7684IPv6\u539f\u59cb\u6570\u636e\u8f6c\u53d1\u7ed9PC2\u3002","title":"IPv6 Over IPv4 \u624b\u5de5\u96a7\u9053"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_270","text":"","title":"\u5b9e\u9a8c\u62d3\u6251\u53ca\u9700\u6c42"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_271","text":"R3\u7684\u914d\u7f6e\u5982\u4e0b R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u51e0\u4e2a\u6ce8\u610f\u4e8b\u9879\uff1a \u96a7\u9053\u4e24\u7aef\u7684\u5730\u5740\uff1a10.1.1.1\u53ca10.2.2.2\u5fc5\u987b\u8def\u7531\u53ef\u8fbe\uff0c\u5426\u5219\u96a7\u9053\u5efa\u7acb\u4e0d\u6210\u529f\u3002 IPv6 Over IPv4\u624b\u5de5\u96a7\u9053\u9700\u8981\u5728\u96a7\u9053\u63a5\u53e3\u7684\u914d\u7f6e\u4e2d\u624b\u5de5\u6307\u5b9a\u96a7\u9053\u7684\u6e90\u548c\u76ee\u7684\u3002 Ipv6 route-static 2001:1111:: 64 tunnel0/0/0\u8fd9\u6761\u8def\u7531\uff0c\u5c06\u53bb\u5f80\u8be5IPv6\u7f51\u7edc\u7684\u6570\u636e\u5305\u9001\u5230\u96a7\u9053\u63a5\u53e3\uff0c\u8fd9\u4e9b\u6570\u636e\u5c31\u4f1a\u88ab\u5c01\u88c5\u4e0a\u96a7\u9053IPv4\u7684\u5934\u90e8\u7136\u540e\u9001\u5230IPv4\u7f51\u7edc\u3002 \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u505a\u4e00\u4e9b\u57fa\u672c\u7684\u9a8c\u8bc1\u53ca\u67e5\u770b\uff1a \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fR1\u4e0a\u63a5\u53e3IPv6\u6458\u8981\u4fe1\u606f\uff0c\u53ef\u4ee5\u770b\u5230\u4e3aGE0/0/1\u53e3\u914d\u7f6e\u7684IPv6\u5730\u5740\uff0c\u4ee5\u53caTunnel0/0/0\u53e3\u7684\u94fe\u8def \u672c\u5730\u5730\u5740\u3002","title":"\u8bbe\u5907\u914d\u7f6e\u53ca\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#gre_5","text":"GRE\uff08Generic Routing Encapsulation\uff0c\u901a\u7528\u8def\u7531\u5c01\u88c5\uff09\u662f\u4e00\u79cd\u96a7\u9053\u534f\u8bae\uff0c\u53ef\u4ee5\u5728\u865a\u62df\u70b9\u5bf9\u70b9\u94fe\u8def\u4e2d\u5c01\u88c5\u591a\u79cd\u4e0a\u5c42\u534f\u8bae\uff0c\u5b83\u5728RFC 2784\u4e2d\u5b9a\u4e49\uff0c\u5b83\u7684\u901a\u7528\u6027\u7279\u522b\u9ad8\uff0c\u80fd\u591f\u652f\u6301\u5404\u79cd\u5404\u6837\u7684\u4e0a\u5c42\u534f\u8bae\u3002 \u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u5176\u5b9e\u91c7\u7528GRE\u96a7\u9053\uff0c\u4e0e\u4e0a\u6587\u4ecb\u7ecd\u7684IPv6 Over IPv4\u624b\u5de5\u96a7\u9053\u5728\u673a\u5236\u4e0a\u5e76\u6ca1\u6709\u592a\u5927\u7684\u533a\u522b\uff0c \u90fd\u662f\u4e3a\u539f\u59cb\u7684IPv6\u6570\u636e\u5305\u5c01\u88c5\u4e0a\u65b0\u7684\u5934\u90e8\uff0c\u53ea\u4e0d\u8fc7GRE\u8fd9\u79cd\u673a\u5236\u9664\u4e86\u4f1a\u4e3aIPv6\u6570\u636e\u5c01\u88c5\u4e0a\u65b0\u7684\u96a7\u9053IPv4\u5934\u90e8\u5916\uff0c\u8fd8\u4f1a\u52a0\u4e0a\u4e00\u4e2aGRE\u7684\u5934\u90e8\u3002","title":"GRE \u96a7\u9053"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_272","text":"","title":"\u5b9e\u9a8c\u62d3\u6251\u53ca\u9700\u6c42"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_273","text":"R3\u7684\u914d\u7f6e\u5982\u4e0b R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u4e3a\u4e86\u5b8c\u6210\u8fd9\u4e2a\u5b9e\u9a8c\uff0c\u6211\u4eec\u5728R1\u53caR2\u4e0a\u914d\u7f6e\u4e86IPv6\u9759\u6001\u8def\u7531\uff0c\u7136\u800c\u9759\u6001\u8def\u7531\u662f\u9700\u8981\u624b\u5de5\u914d\u7f6e\u7684\uff0c\u800c\u4e14\u6b20\u7f3a\u7075 \u6d3b\u6027\uff0c\u91c7\u7528\u52a8\u6001\u8def\u7531\u534f\u8bae\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u4f46\u662fR1-R3\u5e76\u975e\u76f4\u8fde\u8def\u7531\u5668\uff0c\u5982\u4f55\u80fd\u591f\u8fd0\u884cIPv6\u52a8\u6001\u8def\u7531\u534f\u8bae\uff1f \u5f97\u76ca\u4e8eR1-R2\u4e4b\u95f4\u5df2\u7ecf\u5efa\u7acb\u8d77\u6765\u7684GRE\u96a7\u9053\uff0cR1\u3001R2\u76f8\u5f53\u4e8e\u6253\u901a\u4e86\u4e00\u6761\u627f\u8f7d\u5728IPv4\u7f51\u7edc\u4e0a\u7684IPv6\u70b9\u5230\u70b9\u201c\u76f4\u8fde\u94fe\u8def\u201d\u2014\u2014\u867d\u7136\u8fd9\u6761\u94fe\u8def\u662f\u865a\u62df\u7684\u3002\u57fa\u4e8e\u8fd9\u6761\u76f4\u8fde\u94fe\u8def\uff0cR1\u3001R2\u5373\u53ef\u8fd0\u884cIPv6\u52a8\u6001\u8def\u7531\u534f\u8bae\u4ece\u800c\u52a8\u6001\u5730\u4ea4\u4e92\u8def\u7531\u4fe1\u606f\u3002 \u73b0\u5728\uff0c\u53bb\u6389R1\u3001R2\u4e0a\u914d\u7f6e\u7684IPv6\u9759\u6001\u8def\u7531\uff08\u547d\u4ee4\u4e0d\u518d\u8d58\u8ff0\uff09\u3002\u7136\u540e\u5728R1\u53caR2\u4e0a\u589e\u8865\u914d\u7f6e\uff1a R1\u7684\u589e\u8865\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u589e\u8865\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0cR1\u3001R2\u5373\u4f1a\u901a\u8fc7GRE Tunnel\u53d1\u9001OSPFv3 Hello\u4ece\u800c\u53d1\u73b0\u90bb\u5c45\uff0c\u968f\u540e\u5efa\u7acbOSPFv3\u90bb\u5c45\u5173\u7cfb\u3002\u6b64\u65f6\u5728R1\u4e0a\u67e5\u770bOSPFv3\u90bb\u5c45\u8868\u5982\u4e0b\uff1a \u5728R1\u4e0a\u67e5\u770bIPv6\u8def\u7531\u8868\u4e2d\u901a\u8fc7OSPF\u5b66\u4e60\u5230\u7684\u8def\u7531\uff1a R1\u5df2\u7ecf\u5b66\u4e60\u52302001:2::/64\u8def\u7531\uff0cR2\u4e5f\u5b66\u5230\u4e862001:1::/64\u8def\u7531\uff0c\u56e0\u6b64PC1\u53caPC2\u80fd\u591f\u4e92\u76f8ping\u901a\uff0c\u901a\u8fc7\u6293\u5305\u53ef\u4ee5\u89c2\u5bdf\u5230OSPFv3\u5728GRE\u96a7\u9053\u4e0a\u7684\u5de5\u4f5c\u8fc7\u7a0b\u3002\u5b9e\u9645\u4e0a\u6211\u4eec\u5e76\u672a\u7ed9Tunnel\u63a5\u53e3\u914d\u7f6e\u5168\u5c40\u5355\u64adIPv6\u5730\u5740\uff0c\u4f46\u662f OSPFv3\u4f9d\u7136\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\uff0c\u8fd9\u662f\u56e0\u4e3aR1\u53caR2\u4f7f\u7528\u7684\u662fTunnel\u63a5\u53e3\u7684\u94fe\u8def\u672c\u5730\u5730\u5740\u5efa\u7acbOSPFv3\u90bb\u5c45\u5173\u7cfb\uff0c \u4ee5\u53ca\u4f5c\u4e3a\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u3002 \u4f7f\u7528IPv6 Over IPv4\u624b\u5de5\u96a7\u9053\u65f6\uff0c\u4e5f\u53ef\u4ee5\u50cf\u672c\u4f8b\u8fd9\u6837\uff0c\u5728\u96a7\u9053\u7aef\u70b9\u8bbe\u5907\u4e4b\u95f4\u5efa\u7acbOSPFv3\u90bb\u63a5\u5173\u7cfb\u4ece\u800c\u4ea4\u4e92 OSPF\u8def\u7531\uff0c\u4f46\u662f\u76f8\u5bf9\u7684\uff0cGRE\u7684\u901a\u7528\u6027\u8f83\u597d\uff0c\u53ef\u7528\u4e8e\u627f\u8f7d\u5404\u79cd\u4e0a\u5c42\u534f\u8bae\uff0c\u56e0\u6b64\u5728\u9762\u5bf9IS-IS\u8fd9\u6837\u7684\u8def\u7531\u534f\u8bae\u65f6\u95f4\uff0cIPv6 Over IPv4\u624b\u5de5\u96a7\u9053\u573a\u666f\u5c31\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\uff0c\u800cGRE\u5219\u4e0d\u4f1a\u6709\u95ee\u9898\u3002","title":"\u8bbe\u5907\u914d\u7f6e\u53ca\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#6to4","text":"\u4e0a\u6587\u4ecb\u7ecd\u7684\u4e24\u79cd\u96a7\u9053\u673a\u5236\u6709\u4e2a\u5171\u540c\u7684\u7279\u70b9\uff0c\u5c31\u662f\u96a7\u9053\u7684\u5bf9\u7aef\u9700\u660e\u786e\u6307\u5b9a\uff0c\u4f8b\u5982\u5728R1\u4e0a\u5efa\u96a7\u9053\uff0c\u9700\u8981\u6307\u5b9a\u96a7\u9053\u7684\u76ee\u7684\u7aef\u4e3a10.2.2.2\uff0c\u8fd9\u79cd\u624b\u5de5\u5efa\u96a7\u9053\u7684\u65b9\u5f0f\u5728\u7ad9\u70b9\u5c11\u3001\u800c\u4e14\u5730\u5740\u56fa\u5b9a\u7684\u60c5\u51b5\u4e0b\u53ef\u884c\uff0c\u4f46\u662f\u53ef\u5c55\u6027\u592a\u5dee\u3002 \u76f8\u6bd4\u4e4b\u4e0b\uff0c6to4\u81ea\u52a8\u96a7\u9053\u5219\u8981\u7075\u6d3b\u8bb8\u591a\u30026to4\u81ea\u52a8\u96a7\u9053\u5229\u7528IPv6\u5355\u64ad\u5730\u5740\u4e2d\u76846to4\u5730\u5740\u30026to4\u5730\u5740\u662f\u4e00\u7c7b\u7279\u6b8a\u7684IPv6\u5355\u64ad\u5730\u5740\uff0c\u5b83\u901a\u8fc7IPv4\u5730\u5740\u6620\u5c04\u800c\u6765\u3002\u4f8b\u5982R1\u5df2\u7ecf\u6709IPv4\u5730\u5740200.1.1.1\uff0c\u90a3\u4e48\u8be5IPv4\u5730\u5740\u5bf9\u5e94\u76846to4 IPv6\u5730\u5740\u5c31\u662f2002: C801:0101 :: /48\uff0c\u5176\u4e2d**C801:0101**\u5c31\u662f200.1.1.1\u768416\u8fdb\u5236\u5f62\u5f0f\u3002\u5982\u6b64\u4e00\u6765\u5c31\u5f97\u5230\u4e86/48\u7684IPv6\u5730\u5740\u524d\u7f00\uff0c\u8fd9\u4e2a\u524d\u7f00\u53ef\u8fdb\u4e00\u6b65\u8fdb\u884c\u5b50\u7f51\u5212\u5206\uff0c\u6700\u7ec8\u5f62\u6210/64\u7684IPv6\u524d\u7f00\u7528\u4e8e\u7ec8\u7aef\u3002R2\u8fd9\u4e00\u4fa7\u7684 IPv6\u7f51\u7edc\u540c\u7406\u3002 \u73b0\u5728\u5f53PC1\u8981\u8bbf\u95eePC2\u8fd9\u4e00\u4fa7\u7684IPv6\u7f51\u7edc\u65f6\uff0c\u5176\u53d1\u51fa\u7684\u62a5\u6587\u7684\u76ee\u7684IPv6\u5730\u5740\u5c31\u662f2002: C802:0202 ::/48\u8fd9\u4e00\u524d\u7f00\u4e0b\u7684\u67d0\u4e2aIPv6\u5730\u5740\uff0c\u800c\u8fd9\u4e2aIPv6\u6570\u636e\u5305\u5230\u8fbeR1\u540e\uff0cR1\u4ece\u76ee\u7684IPv6\u5730\u5740\u4e2d\u53d6\u51faIPv4\u5730\u5740\u7684\u6620\u5c04\u90e8\u5206\uff0c\u4e5f\u5c31\u662fC802\uff1a0202\uff0c\u8fdb\u800c\u5f97\u5230200.2.2.2\uff0c\u8fd9\u5c31\u662f\u96a7\u9053\u7684\u76ee\u7684\u5730\u5740\u3002IPv6\u62a5\u6587\u88ab\u5c01\u88c5\u4e0a\u96a7\u9053\u7684IPv4\u5934\u90e8\uff0c\u6e90\u5730\u5740\u4e3a200.1.1.1\uff0c\u76ee\u7684\u5730\u5740\u4e3a200.2.2.2\u3002","title":"6to4 \u81ea\u52a8\u96a7\u9053"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_274","text":"","title":"\u5b9e\u9a8c\u62d3\u6251\u53ca\u9700\u6c42"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_275","text":"Internet Router\u7684\u914d\u7f6e\u5982\u4e0b R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u57286to4 \u81ea\u52a8\u96a7\u9053\u7684\u89e3\u51b3\u65b9\u6848\u4e2d\uff0c\u6211\u4eec\u5229\u7528\u4e862002::/16\u76846to4\u77e5\u540d\u5730\u5740\u7a7a\u95f4\u3002 \u9996\u5148R1\u53caR2\u90fd\u5df2\u7ecf\u6709\u4e86200.1.1.1\u53ca200.2.2.2\u7684IPv4\u5730\u5740\u3002\u62ffR1\u6765\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7R1\u7684\u5730\u5740200.1.1.1\u6620\u5c04\u5f97\u5230\u8be5IP\u5bf9\u5e94\u76842002::/16\u524d\u7f00\u76846to4 IPv6\u5730\u5740\uff0c\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5bf9\u4e8eR1\u6240\u5728\u7684\u7ad9\u70b9\uff0c\u5f97\u5230\u76846to4 IPv6\u5730\u5740\u7a7a\u95f4\u5c31\u662f2002:C801:0101::/48\uff0c\u524d\u7f00\u4e2d\u7684\u524d16bit\u4e5f\u5c31\u662f2002\u662f\u56fa\u5b9a\u7684\uff0c\u540e\u9762\u768432bit\u5c31\u662f200.1.1.1\u8fd9\u4e2a\u5730\u5740\u5bf9\u5e94\u768416\u8fdb\u5236\u6570\uff0c\u7ec4\u88c5\u540e\u5c31\u5f97\u5230/48bit\u7684IPv6\u5730\u5740\u524d\u7f00\uff0c\u8fd9\u6837\u4e00\u6765PC1\u6240\u5728\u7f51\u7edc\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2aIPv6\u5730\u5740\u6765\u7ec4\u5efa\u7f51\u7edc\uff1a \u5f53PC1\u8981\u8bbf\u95ee2002:C802:0202::/48\u7f51\u7edc\u65f6\uff1a \u6570\u636e\u5305\u5230\u8fbeR1\u540e\uff0cR1\u53d1\u73b0\u76ee\u7684\u5730\u5740\u662fIPv6\u5730\u5740\uff0c\u800c\u4e14\u662f2002\u5f00\u5934\u7684\u5730\u5740\uff0c\u8fd9\u662f\u4e2a6to4\u7684IPv6\u5730\u5740\uff0c\u4e8e\u662f\u4ece\u8be5\u5730\u5740\u4e2d\u62bd\u79bb\u51faC802:0202\uff0c\u5f97\u5230200.2.2.2\u8fd9\u4e2aIPv4\u5730\u5740\u3002\u7136\u540e\uff1a R1\u5728\u539f\u59cbIPv6\u62a5\u6587\u7684\u57fa\u7840\u4e0a\u52a0\u88c5IPv4\u5934\u90e8\uff0cIPv4\u5934\u90e8\u7684\u6e90\u5730\u5740\u4e3a6to4tunnel\u7684\u6e90\u5730\u5740\uff0c\u800c\u76ee\u7684\u5730\u5740\u4e3a 200.2.2.2\u3002\u6570\u636e\u5305\u88ab\u8def\u7531\u5230R2\u540e\uff0cR2\u5c06\u5916\u5c42\u7684IPv4\u5934\u90e8\u5265\u9664\uff0c\u5c06\u91cc\u5934\u7684IPv6\u62a5\u6587\u8f6c\u53d1\u7ed9PC2\u3002","title":"\u8bbe\u5907\u914d\u7f6e\u53ca\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat64_1","text":"","title":"NAT64 \u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#1nat64","text":"NAT64\u52a8\u6001\u6620\u5c04\u53ea\u9002\u7528\u4e8eIPv6\u7528\u6237\u4e3b\u52a8\u53d1\u8d77\u8bbf\u95eeIPv4 Server\u7684\u573a\u666f\u3002 IPv6\u7528\u6237\u53d1\u8d77AAAA DNS\u8bf7\u6c42(huawei.com)\u3002 DNS64\u6536\u5230\u8bf7\u6c42\u62a5\u6587\u540e\uff0c\u5148\u89e3\u6790AAAA\u8bf7\u6c42\uff0c\u5982\u679c\u89e3\u6790\u4e0d\u5230IPv6\u5730\u5740\uff0c\u518d\u53d1\u8d77A\u8bf7\u6c42\uff0c\u901a\u8fc7\u89e3\u6790\u53d1\u73b0\u6b64 \u670d \u52a1 \u5730 \u5740 \u4e3a IPv4 \u5730 \u5740 \uff0c \u6839 \u636e \u914d \u7f6e \u7684 Prefix64::/n \uff08 \u5728 \u672c \u4f8b \u4e2d \u662f 9b::/96 \uff09 \uff0c \u5408 \u6210 NAT64 \u5730\u5740 \uff0864:FF9B::0A01:0101\uff09\u3002 DNS64\u5c06\u5e94\u7b54\u53d1\u7ed9\u7528\u6237\u3002 \u7528\u6237\u6536\u5230DNS64\u7684\u56de\u590d\u540e\uff0c\u53d1\u9001IPv6\u62a5\u6587\u7ed9\u8be5\u76ee\u6807\u670d\u52a1\u5668\u3002 FW\u6536\u5230\u7528\u6237\u53d1\u51fa\u7684IPv6\u62a5\u6587\u540e\uff0c\u4f7f\u7528\u5730\u5740\u8f6c\u6362\u7b97\u6cd5\u63d0\u53d6\u51faIPv6\u62a5\u6587\u4e2d\u7684IPv4\u5730\u5740(10.1.1.1)\uff0c\u4ee5\u6b64IPv4 \u5730\u5740\u4f5c\u4e3aIPv4\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\u3002\u7136\u540e\u6839\u636eNAT64\u7b56\u7565\u914d\u7f6e\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u4ee5NAT\u5730\u5740\u6c60\u4e2d\u7684\u5730\u5740\u4e3aIPv4 \u62a5\u6587\u7684\u6e90\u5730\u5740(\u4f8b\u598210.1.1.100)\uff0c\u5c06IPv6\u62a5\u6587\u8f6c\u6362\u4e3aIPv4\u62a5\u6587\uff0c\u53d1\u9001\u7ed9IPv4\u7f51\u7edc\u4e2d\u7684\u670d\u52a1\u5668\u3002\u5e76\u751f\u6210\u6709\u5730\u5740\u5bf9\u5e94\u5173\u7cfb\u7684\u4f1a\u8bdd\u8868\u3002 \u670d\u52a1\u5668\u6536\u5230\u62a5\u6587\u540e\uff0c\u56de\u590d\u54cd\u5e94\u62a5\u6587\u3002 NAT64\u6536\u5230IPv4\u7f51\u7edc\u4e2d\u670d\u52a1\u5668\u7684\u54cd\u5e94\u62a5\u6587\u540e\uff0c\u6839\u636e\u4f1a\u8bdd\u8868\u5c06IPv4\u62a5\u6587\u8f6c\u6362\u4e3aIPv6\u62a5\u6587\uff0c\u7136\u540e\u53d1\u9001\u81f3IPv6 \u7528\u6237\u3002 \u9700\u8981DNS64\u914d\u5408\uff1b\u53ef\u7528\u77e5\u540dNAT64\u524d\u7f0064:FF9B::/96\u6216\u81ea\u5b9a\u4e49\u524d\u7f00\uff1b\u914d\u7f6eDNS64\u65f6\uff0c\u9700\u786e\u4fddNAT64\u524d\u7f00\u548c\u524d\u7f00\u957f\u5ea6\u4e0eFW\u4e0a\u7684\u914d\u7f6e\u76f8\u540c","title":"\u573a\u666f1\uff1aNAT64\uff08\u52a8\u6001\u6620\u5c04\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#2nat64","text":"\u9759\u6001NAT64\u4e0d\u4ec5\u53ef\u4ee5\u5b9e\u73b0IPv6\u7528\u6237\u8bbf\u95eeIPv4\u670d\u52a1\u5668\uff0c\u4e5f\u4e3aIPv4\u7528\u6237\u8bbf\u95eeIPv6\u670d\u52a1\u5668\u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u6848\u3002 IPv4\u7528\u6237\u5411DNS\u53d1\u8d77A\u8bf7\u6c42\uff08Huawei.com\uff09\u3002 DNS\u6536\u5230\u8bf7\u6c42\u62a5\u6587\u540e\uff0c\u89e3\u6790\u57df\u540d\u5bf9\u5e94\u7684IPv4\u5730\u5740100.1.1.1\uff08A\u8bf7\u6c42\u5982\u679c\u65e0\u6cd5\u89e3\u6790IPv4\u5730\u5740\uff0c\u62a5\u6587\u5c06\u4e22\u5f03\u3002\u6b64\u573a\u666f\u4e2d\uff0c\u57df\u540d\u4e0e\u5730\u5740\u5173\u7cfb\u4e00\u822c\u5df2\u7ecf\u63d0\u524d\u5728DNS\u8bbe\u5b9a\u597d\uff09\uff0c\u7136\u540e\u53d1\u9001\u56de\u590d\u62a5\u6587\u7ed9\u7528\u6237\u3002 \u7528\u6237\u6536\u5230DNS\u7684\u56de\u590d\u62a5\u6587\u540e\uff0c\u628a\u89e3\u6790\u7684\u5730\u5740\u4f5c\u4e3a\u76ee\u7684\u5730\u5740\u53d1\u5f80\u8fdc\u7aef\u670d\u52a1\u5668\u3002 NAT64\u8bbe\u5907\u6536\u5230\u7528\u6237\u53d1\u51fa\u7684IPv4\u62a5\u6587\u540e\uff0c\u6839\u636e\u4e8b\u5148\u8bbe\u7f6e\u597d\u7684\u9759\u6001\u6620\u5c04\u5173\u7cfb\uff08\u4f1a\u4ea7\u6210Server-Map\u8868\uff09\uff0c\u628a\u62a5\u6587\u7684\u76ee\u7684IPv4\u5730\u5740\u8f6c\u6362\u6210\u5bf9\u5e94\u7684IPv6\u5730\u57403000::2\uff0c\u4ee5\u6b64IPv6\u5730\u5740\u4f5c\u4e3aIPv6\u62a5\u6587\u7684\u76ee\u7684\u5730\u5740\uff0c\u628a IPv4\u62a5\u6587\u4e0e\u8bbe\u7f6e\u597d\u7684NAT64\u524d\u7f00\u5408\u6210IPv6\u62a5\u6587\u7684\u6e90\u5730\u5740\uff0864:ff9b::c801:0101\uff09\uff0c\u5b8c\u6210IPv4\u62a5\u6587\u5230IPv6 \u62a5\u6587\u7684\u8f6c\u6362\uff0c\u53d1\u9001\u7ed9IPv6\u7f51\u7edc\u4e2d\u7684\u670d\u52a1\u5668\u3002\u5e76\u751f\u6210\u4f1a\u8bdd\u8868\u3002 \u670d\u52a1\u5668\u6536\u5230\u62a5\u6587\u540e\uff0c\u56de\u590d\u54cd\u5e94\u62a5\u6587\u3002 NAT64\u6536\u5230IPv6\u7f51\u7edc\u4e2d\u670d\u52a1\u5668\u7684\u54cd\u5e94\u62a5\u6587\u540e\uff0c\u6839\u636e\u4f1a\u8bdd\u8868\u5c06IPv6\u62a5\u6587\u8f6c\u6362\u4e3aIPv4\u62a5\u6587\uff0c\u7136\u540e\u53d1\u9001\u81f3 IPv4\u7528\u6237\u3002 \u9700\u5728NAT64\u8bbe\u5907\u4e0a\u914d\u7f6eIPv4\u5730\u5740\u4e0eIPv6\u5730\u5740\u7684\u9759\u6001\u6620\u5c04\uff0c\u8be5\u6620\u5c04\u4e0d\u4f1a\u8001\u5316\u3002","title":"\u573a\u666f2\uff1aNAT64\uff08\u9759\u6001\u6620\u5c04\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat64ipv6-ipv4","text":"","title":"NAT64\uff08IPv6 \u8282\u70b9\u4e3b\u52a8\u8bbf\u95ee IPv4 \u670d\u52a1\u5668\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_276","text":"PC1\u662fIPv4\u7f51\u7edc\u7684\u4e00\u4e2a\u8282\u70b9\uff0c\u5904\u4e8eTrust\u5b89\u5168\u57df\u3002 PC2\u662fIPv6\u7f51\u7edc\u7684\u4e00\u4e2a\u8282\u70b9\uff08\u53ef\u80fd\u662f\u4e00\u53f0\u670d\u52a1\u5668\uff09\uff0c\u5904\u4e8eUntrust\u5b89\u5168\u57df\u3002 \u5728\u9632\u706b\u5899\u4e0a\u5b8c\u6210NAT64\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC2\u80fd\u591f\u4e3b\u52a8\u53d1\u8d77\u6d41\u91cf\u8bbf\u95eePC1\u3002 \u5728\u672c\u5b9e\u9a8c\u4e2d\uff0c\u9632\u706b\u5899\u4ee5\u534e\u4e3aUSG6000 V5R1C60\u7684\u914d\u7f6e\u4e3a\u4f8b\u8fdb\u884c\u4ecb\u7ecd\u3002","title":"\u62d3\u6251\u53ca\u9700\u6c42"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_277","text":"FW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u6ca1\u6709\u8bbe\u7f6eDNS64\uff0c\u56e0\u6b64PC2\u76f4\u63a5\u4f7f\u75283001::0101:0102\u8fd9\u4e2a\u5730\u5740\u6765\u8bbf\u95eePC1\uff0c\u4f46\u662f\u4e3a\u4ec0\u4e48\u662f\u8fd9\u4e2a\u5730\u5740\uff1f3001::/96\u8fd9\u4e2a\u524d\u7f00\u662f\u6211\u4eec\u5728\u914d\u7f6e\u7684\u65f6\u5019\u6307\u5b9a\u7684\uff0c\u800c\u8fd9\u4e2a\u76ee\u7684\u5730\u5740\u7684\u6700\u540e32bit\u4e5f\u5c31\u662f 0101:0102\uff0c\u6362\u7b97\u621010\u8fdb\u5236\u5c31\u662f1.1.1.2\uff0c\u56e0\u6b64\u5f53\u9632\u706b\u5899\u6536\u5230\u76ee\u7684\u5730\u5740\u4e3a3001::0101:0102\u7684IPv6\u6570\u636e\u5305\u65f6\uff0c\u6839\u636e\u8be5\u5730\u5740\u7684\u6700\u540e32bit\u8ba1\u7b97\u5f97\u5230IPv4\u5730\u5740\uff0c \u8fd9\u5c31\u662f\u534f\u8bae\u8f6c\u6362\u540e\u7684IPv4\u76ee\u7684\u5730\u5740\uff0c\u800cIPv4\u6e90\u5730\u5740\u5219\u4eceNAT64\u5730\u5740\u6c60\u4e2d\u6311\u4e00\u4e2a\u3002 \u6b64\u65f6\u5728\u9632\u706b\u5899\u4e0a\u80fd\u770b\u5230\u5982\u4e0bIPv6\u4f1a\u8bdd\u8868\u9879\uff1a","title":"\u914d\u7f6e\u53ca\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nat64ipv4-ipv6","text":"","title":"NAT64\uff08IPv4 \u8282\u70b9\u4e3b\u52a8\u8bbf\u95ee IPv6 \u670d\u52a1\u5668\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_278","text":"PC1\u662fIPv4\u7f51\u7edc\u7684\u4e00\u4e2a\u8282\u70b9\uff0c\u5904\u4e8eTrust\u5b89\u5168\u57df\uff1bPC2\u662fIPv6\u7f51\u7edc\u7684\u4e00\u4e2a\u8282\u70b9\uff0c\u5904\u4e8eUntrust\u5b89\u5168\u57df\u3002\u5728\u9632\u706b\u5899\u4e0a\u5b8c\u6210NAT64\u7684\u914d\u7f6e\uff0c\u4f7f\u5f97PC1\u80fd\u591f\u4e3b\u52a8\u53d1\u8d77\u6d41\u91cf\u8bbf\u95eePC2\u3002 \u5728\u672c\u5b9e\u9a8c\u4e2d\uff0c\u9632\u706b\u5899\u4ee5\u534e\u4e3aUSG6000 V5R1C60\u7684\u914d\u7f6e\u4e3a\u4f8b\u8fdb\u884c\u4ecb\u7ecd\u3002","title":"\u62d3\u6251\u53ca\u9700\u6c42"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_279","text":"FW\u7684\u914d\u7f6e\u5982\u4e0b\uff1a [FW] interface GigabitEthernet 1/0/1 [FW-GigabitEthernet1/0/1] ip address 1.1.1.1 24 [FW] firewall zone trust [FW-zone-trust] add interface GigabitEthernet1/0/1 [FW] ipv6 [FW] interface GigabitEthernet 1/0/2 [FW-GigabitEthernet1/0/2] ipv6 enable [FW-GigabitEthernet1/0/2] ipv6 address 2001::2 64 #\u6fc0\u6d3b\u63a5\u53e3\u7684NAT64\u529f\u80fd [FW-GigabitEthernet1/0/2] nat64 enable [FW] firewall zone untrust [FW-zone-untrust] add interface GigabitEthernet1/0/2 #\u914d\u7f6eNAT64\u524d\u7f00\uff0cPC1\u8bbf\u95eePC2\u7684\u62a5\u6587\u5728IPv6\u7f51\u7edc\u4e2d\u4f20\u8f93\u65f6\u4f7f\u7528\u7684\u6e90\u5730\u5740\u7531NAT64\u524d\u7f00\u548cPC1\u7684IPv4\u5730\u5740\u7ec4\u5408\u800c\u6210\uff1a [FW] nat64 prefix 3001:: 96 #\u914d\u7f6eNAT64\u9759\u6001\u6620\u5c04\u5173\u7cfb\uff0c\u5c06PC2\u7684IPv6\u5730\u57402001::1\u6620\u5c04\u4e3aIPv4\u5730\u57401.1.1.10\uff0cPC1\u5c06\u4ee51.1.1.10\u4e3a\u76ee\u7684\u5730\u5740\u8bbf\u95eePC2\uff1a [FW] nat64 static 2001::1 1.1.1.10 unr-route #\u914d\u7f6e\u5b89\u5168\u7b56\u7565\uff1a [FW] security-policy [FW-policy-security] rule name policy_sec_1 [FW-policy-security-rule-policy_sec_1] source-zone trust [FW-policy-security-rule-policy_sec_1] destination-zone untrust [FW-policy-security-rule-policy_sec_1] destination-address 2001::1 64 [FW-policy-security-rule-policy_sec_1] action permit \u5b8c\u6210\u914d\u7f6e\u540e\uff0cPC1\u5373\u53efping\u901a1.1.1.10\uff0c\u4e5f\u5373PC2\u3002\u5728FW\u4efb\u610f\u89c6\u56fe\u4e0b\u6267\u884c**display firewall ipv6 session** table \uff0c\u67e5\u770bNAT64\u7684\u4f1a\u8bdd\u8868\u4fe1\u606f\u3002","title":"\u914d\u7f6e\u53ca\u5b9e\u73b0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mpls-mpls-vpn","text":"MPLS \u57fa\u7840","title":"MPLS \u4e0e MPLS VPN"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mpls","text":"IP\u8def\u7531\u5176\u5b9e\u5df2\u7ecf\u6709\u4e0d\u77ed\u7684\u5386\u53f2\u4e86\uff0c\u5728IP\u53d1\u5c55\u7684\u8fc7\u7a0b\u4e2d\uff0c\u66fe\u7ecf\u51fa\u73b0\u8fc7\u8bb8\u591a\u7684\u4e89\u8bba\uff0c\u4f8b\u5982\u8def\u7531\u548c\u4ea4\u6362\u901f\u5ea6\u4e4b\u4e89\uff0c \u8def\u7531\u548c\u6807\u7b7e\u4ea4\u6362\u7684\u5730\u4f4d\u4e4b\u4e89\u7b49\u7b49\u3002\u65e9\u5148\u7684\u901a\u8fc7\u8f6f\u4ef6\u5b9e\u73b0\u7684\u8def\u7531\u662f\u201c\u5f88\u6162\u7684\u201d\uff0c\u662f\u201c\u8017\u65f6\u3001\u8017\u8bbe\u5907\u8d44\u6e90\u7684\u201d\uff0c \u52a0\u4e4b\u67e5\u8868\u7684\u673a\u5236\u3001\u76f8\u5173\u6570\u636e\u5b57\u6bb5\u7684\u91cd\u5199\u4f7f\u5f97\u5176\u901f\u5ea6\u66f4\u52a0\u7f13\u6162\uff0c\u800c\u5bf9\u4e8e\u4ea4\u6362\u6280\u672f\uff0c\u7531\u4e8e\u5bf9\u6570\u636e\u5e27\u7684\u8bfb\u53d6\u201c\u8f83\u6d45\u201d\uff0c\u52a0\u4e0a\u672c\u8eab\u7684\u673a\u5236\u3001\u901a\u8fc7\u4e13\u7528\u7684\u786c\u4ef6\u5b9e\u73b0\u4f7f\u5f97\u5176\u901f\u5ea6\u6709\u5f88\u5927\u7a0b\u5ea6\u7684\u63d0\u5347\u3002 \u4e3a\u4e86\u52a0\u5feb\u7f51\u7edc\u7684\u5bf9\u6570\u636e\u7684\u8f6c\u53d1\u901f\u5ea6\uff0c\u4ee5\u53ca\u63d0\u9ad8\u7f51\u7edc\u7684\u53ef\u670d\u52a1\u6027\u548c\u5bf9\u591a\u6837\u5316\u4e1a\u52a1\u7684\u652f\u6301\uff0c\u884c\u4e1a\u4e2d\u4e00\u5ea6\u6d8c\u73b0\u4e86\u8bb8\u591a\u65b0\u7684\u6280\u672f\uff0c\u4f8b\u5982ATM\u3001\u5e27\u4e2d\u7ee7\u7b49\u7b49\u3002\u5176\u4e2d\u6709\u4e00\u4e2a\u6280\u672f\u4e0d\u5f97\u4e0d\u63d0\uff0c\u90a3\u5c31\u662fMPLS\u3002\u867d\u7136\u968f\u7740\u6570\u636e\u901a\u4fe1\u6280\u672f\u7684\u98de\u901f\u53d1\u5c55\uff0cIP\u8def\u7531\u7684\u901f\u5ea6\u5df2\u7ecf\u5f97\u5230\u5de8\u5927\u7684\u63d0\u5347\uff0c\u63a7\u5236\u548c\u6570\u636e\u5c42\u9762\u7684\u673a\u5236\u90fd\u6709\u4e86\u9769\u547d\u6027\u7684\u7a81\u7834\uff0c\u4f7f\u5f97\u901f\u5ea6\u4e0a\u7684\u52a3\u52bf\u51e0\u4e4e\u6d88\u9664\uff0c\u4f46\u662fMPLS\u5e26\u6765\u7684\u9769\u547d\u6027\u7a81\u7834\uff0c\u548c\u4e30\u5bcc\u7684\u4e1a\u52a1\u652f\u6301\u80fd\u529b\u4f9d\u7136\u4f7f\u5f97\u5b83\u5728\u8fd0\u8425\u5546\u7f51\u7edc\u4e2d\u5f97\u5230\u5e7f\u6cdb\u7684\u90e8\u7f72\u3002 \u9996\u5148\u56de\u987e\u4e00\u4e0bIP\u8def\u7531\u7684\u6982\u5ff5\uff0c\u4ec0\u4e48\u662fIP\u8def\u7531\uff1f\u53ef\u4ee5\u7b80\u5355\u7684\u5c06\u8def\u7531\u7406\u89e3\u4e3a\u5f53\u4e09\u5c42\u8bbe\u5907\uff08Layer3 Device\uff09\u6536\u5230 \u4e00\u4e2aIP\u6570\u636e\u5305\u65f6\uff0c\u5b83\u62ff\u7740\u6570\u636e\u5305\u7684\u76ee\u7684IP\u5730\u5740\u5728\u81ea\u5df1\u7684\u8def\u7531\u8868\u4e2d\u8fdb\u884c\u67e5\u627e\uff0c\u5982\u679c\u627e\u5230\u76f8\u5339\u914d\u7684\u8868\u9879\uff0c\u5219\u5c06\u6570\u636e\u5305\u4f9d\u7167\u8868\u9879\u6240\u6307\u793a\u7684\u51fa\u63a5\u53e3\u548c\u4e0b\u4e00\u8df3IP\u5730\u5740\u8f6c\u53d1\u51fa\u53bb\u3002 \u7b80\u5355\u7684\u4e00\u53e5\u8bdd\uff0c\u5305\u542b\u7684\u4e1c\u897f\u5374\u662f\u975e\u5e38\u591a\u7684\uff0c\u5b9e\u9645\u4e0a\u8def\u7531\u7684\u52a8\u4f5c\u4ece\u5fae\u89c2\u5c42\u9762\u6765\u63a2\u8ba8\uff0c\u53ef\u4ee5\u62c6\u89e3\u6210\u590d\u6742\u7684\u8fc7\u7a0b\uff0c \u4f8b\u5982\u5f53\u76ee\u7684\u5730\u5740\u5728\u8def\u7531\u8868\u4e2d\u67e5\u8be2\u65f6\uff0c\u9ed8\u8ba4\u91c7\u7528\u201c\u6700\u957f\u5339\u914d\u539f\u5219\u201d\uff0c\u9010\u4f4d\uff08Bit by Bit\uff09\u5730\u5c06\u76ee\u7684IP\u5730\u5740\u4e0e\u8def\u7531\u8868\u4e2d\u7684\u5404\u4e2a\u8def\u7531\u524d\u7f00\u8fdb\u884c\u5339\u914d\uff0c\u8fd9\u663e\u7136\u662f\u975e\u5e38\u8017\u65f6\u7684\uff0c\u518d\u52a0\u4e0a\u5982\u679c\u627e\u5230\u5339\u914d\u9879\uff0c\u800c\u6240\u5339\u914d\u9879\u7684\u4e0b\u4e00\u8df3\u5982\u679c\u5e76\u975e\u76f4\u8fde\uff0c\u5219\u8fd8\u8981\u8fdb\u4e00\u6b65\u9012\u5f52\uff1b\u518d\u5982\u8def\u7531\u67e5\u627e\u8fc7\u7a0b\u5b8c\u6210\u540e\uff0c\u8fd8\u9700\u5bf9\u6570\u636e\u5305\u7684IP\u5934\u90e8\u8fdb\u884c\u4fee\u6539\uff08TTL\u503c\u51cf\u4e00\u7b49\uff09\uff0c \u5e76\u91cd\u5199\u6570\u636e\u5e27\u5934\u90e8\uff0c\u800c\u5982\u679c\u6570\u636e\u5e27\u5934\u90e8\u91cd\u5199\u8fc7\u7a0b\u4e2d\u7f3a\u5c11\u4e8c\u5c42\u4fe1\u606f\uff08\u5982MAC\uff09\uff0c\u90a3\u4e48\u5c31\u8fd8\u9700\u8981\u542f\u52a8\u76f8\u5173\u7684\u534f\u8bae\u6216\u673a\u5236\u53bb\u67e5\u627e\uff08\u5982ARP\uff09\u3002\u56e0\u6b64\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\uff0cIP\u8def\u7531\u4e00\u5ea6\u88ab\u8ba4\u4e3a\u662f\u901f\u5ea6\u7f13\u6162\u7684\u3002 MPLS\u6280\u672f\u7684\u53d1\u5c55\uff0c\u7ed9\u884c\u4e1a\u5e26\u6765\u4e86\u8bb8\u591a\u9769\u65b0\uff0c\u4e5f\u5e26\u6765\u4e86\u8bb8\u591a\u5e94\u7528\u548c\u5546\u673a\u3002\u521d\u671f\u6700\u663e\u8457\u7684\u4eae\u70b9\u81ea\u7136\u662f\u5728\u901f\u5ea6\u4e0a\u5feb\u4e8eIP\u8def\u7531\uff0c\u56e0\u4e3a\u8f6c\u53d1\u6807\u7b7e\u6570\u636e\u65f6\u4ec5\u9700\u5bf9\u6807\u7b7e\u8fdb\u884c\u67e5\u8be2\u3002\u7136\u800cMPLS\u7684\u4eae\u70b9\u8fdc\u4e0d\u53ea\u662f\u901f\u5ea6\u4e0a\u7684\u4f18\u52bf\uff0c\u968f\u7740IP \u8def\u7531\u6280\u672f\u7684\u53d1\u5c55\uff0c\u5176\u901f\u5ea6\u4e0a\u7684\u77ed\u677f\u5df2\u7ecf\u5f97\u5230\u6781\u5927\u7684\u6539\u8fdb\uff0c\u4f46\u662f\u8fd9\u5b8c\u5168\u65e0\u6cd5\u963b\u6321MPLS\u7684\u5e7f\u6cdb\u90e8\u7f72\u548c\u5e94\u7528\u3002 \u7b80\u5355\u7684\u8bf4\uff0cMPLS\u7684\u601d\u60f3\u5c31\u662f\u5728IP\u62a5\u6587\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u201c\u6807\u7b7e\u5934\u90e8\u201d\uff0c\u8fd9\u4e2a\u6807\u7b7e\u5934\u90e8\u53ef\u4ee5\u89c6\u4e3a\u662f2.5\u5c42\u7684\u6982\u5ff5\uff0c \u4e5f\u5c31\u662f\u8bf4\u6807\u7b7e\u5934\u90e8\u662f\u538b\u5728IP\u5934\u4e4b\u524d\u3001\u4e8c\u5c42\u5e27\u5934\u4e4b\u540e\u7684\u3002\u538b\u4e86MPLS\u6807\u7b7e\u5934\u7684\u6570\u636e\u79f0\u4e3a\u6807\u7b7e\u62a5\u6587\uff08Labeled Packet\uff09\uff0c\u6807\u7b7e\u62a5\u6587\u5728MPLS\u7f51\u7edc\u4e2d\u88ab\u8f6c\u53d1\u65f6\uff0c\u8f6c\u53d1\u8bbe\u5907\u53ea\u9700\u67e5\u770b\u6807\u7b7e\u5934\u4e2d\u7684\u6807\u7b7e\u503c\uff0c\u5373\u53ef\u5feb\u901f\u7684\u505a\u51fa\u51b3\u7b56\u5e76\u5c06\u62a5\u6587\u8f6c\u53d1\u51fa\u53bb\uff0c\u56e0\u6b64\u901f\u5ea6\u5f88\u5feb\u3002\u518d\u8005\u7531\u4e8e\u52a0\u4e86\u4e00\u5c42\u6807\u7b7e\uff0c\u8fd9\u4f7f\u5f97IP\u62a5\u6587\u80fd\u591f\u88ab\u201c\u9690\u85cf\u201d\u5728\u6807\u7b7e\u5934\u540e\u9762\uff0c \u8fd9\u5c31\u53ef\u4ee5\u89e3\u51b3\u8bf8\u591a\u95ee\u9898\uff0c\u4f8b\u5982BGP\u8def\u7531\u9ed1\u6d1e\u7684\u95ee\u9898\u7b49\uff0c\u5f53\u7136\u66f4\u52a0\u5e26\u6765\u4e86\u8bf8\u591a\u65b0\u7684\u4e1a\u52a1\uff0c\u4f8b\u5982VPN\u4e1a\u52a1\uff0c\u6d41\u91cf\u5de5\u7a0b\u5e94\u7528\u7b49\u7b49\u3002","title":"MPLS \u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mpls_1","text":"","title":"MPLS \u672f\u8bed"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#lsr","text":"LSR\uff08Label Switch Router\uff0c\u6807\u7b7e\u4ea4\u6362\u8def\u7531\u5668\uff09\u662f\u652f\u6301\u5e76\u6fc0\u6d3bMPLS\u7684\u8def\u7531\u5668\u3002LSR\u80fd\u591f\u7406\u89e3MPLS\u6807\u7b7e\u5e76\u4e14\u80fd\u591f\u5bf9MPLS\u6807\u7b7e\u5305\u8fdb\u884c\u4ea4\u6362\u3002\u6709\u4e09\u79cd\u7c7b\u578b\u7684LSR\uff1a Ingress LSR\uff1a\u6216\u8005\u53eb\u5165\u7ad9LSR\u3002\u5982\u4e0a\u56fe\u6240\u793a\uff0cR1\u3001R2\u3001R3\u6784\u5efa\u4e86MPLS\u57df\uff0c\u5176\u4e2dR1\u53caR3\u8eab\u5904MPLS \u57df\u8fb9\u754c\uff0c\u5b83\u4eec\u4e00\u4fa7\u8fde\u63a5\u7740MPLS\u7f51\u7edc\uff0c\u53e6\u4e00\u4fa7\u8fde\u63a5\u7740IP\u7f51\u7edc\u3002\u5f53\u6211\u4eec\u8003\u8651IP\u6570\u636e\u5305\u4eceR1\u5de6\u4fa7\u7684IP\u7f51\u7edc\u5230\u8fbeR1\uff0c\u7136\u540e\u88abR1\u8f6c\u53d1\u5230MPLS\u7f51\u7edc\u65f6\uff0c\u6211\u4eec\u79f0R1\u4e3a\u201c\u5165\u7ad9LSR\u201d\uff0c\u5b83\u6b64\u523b\u8d1f\u8d23\u5c06\u6536\u5230\u7684IP\u62a5\u6587\u538b\u4e0aMPLS\u6807\u7b7e\uff0c\u7136\u540e\u8f6c\u53d1\u5230MPLS\u7f51\u7edc\u3002 Intermediate LSR\uff1aR2\u5c31\u662f\u4e00\u53f0Intermediate LSR\uff08\u4e5f\u53ebtransit LSR\uff09\uff0c\u5b83\u6ca1\u6709\u8fde\u63a5\u4efb\u4f55\u7684IP\u7f51\u7edc\uff0c \u800c\u662f\u5b8c\u5168\u8eab\u5904MPLS\u7f51\u7edc\uff0c\u53ea\u8d1f\u8d23\u6807\u7b7e\u6570\u636e\u4ea4\u6362\u3002 Egress LSR\uff1a\u51fa\u7ad9LSR\uff0c\u4f8b\u5982\u4e0a\u56fe\u6240\u793a\u7684R3\uff0c\u5bf9\u4e8e\u4ece\u5de6\u5411\u53f3\u7684\u6570\u636e\u6d41\u6765\u8bf4\uff0c\u5b83\u4eec\u88abR1\u538b\u4e0aMPLS \u6807\u7b7e\u540e\uff0c\u88abR2\u8f6c\u53d1\u7ed9\u4e86R3\uff0c\u73b0\u5728\u8fd9\u4e9b\u6570\u636e\u8981\u4eceMPLS\u7f51\u7edc\u8f6c\u53d1\u5230IP\u7f51\u7edc\uff0cR3\u8d1f\u8d23\u5c06\u8fd9\u4e9b\u6570\u636e\u7684\u6807\u7b7e\u6808\u79fb\u9664\uff0c\u518d\u5c06\u5f97\u5230\u7684IP\u62a5\u6587\u8f6c\u53d1\u5230\u76ee\u7684\u57303.3.3.0.24\u3002","title":"LSR"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#fec","text":"FEC\uff08Forwarding Equivalence Class\uff0c\u8f6c\u53d1\u7b49\u4ef7\u7c7b\uff09\uff0c\u662f\u5728\u8f6c\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u5177\u6709\u76f8\u540c\u5904\u7406\u65b9\u5f0f\u548c\u5904\u7406\u5f85\u9047\u7684\u6570\u636e\u6d41\uff0c\u53ef\u901a\u8fc7\u5730\u5740\u3001\u96a7\u9053\u3001CoS\u7b49\u65b9\u5f0f\u6765\u6807\u8bc6\uff0c\u901a\u5e38\u5728\u4e00\u53f0\u8bbe\u5907\u4e0a\uff0c\u5bf9\u4e8e\u4e00\u4e2aFEC\u5206\u914d\u76f8\u540c\u7684\u6807\u7b7e\u3002\u5c5e\u4e8e\u4e00\u4e2aFEC\u7684\u6d41\u91cf\u5177\u6709\u76f8\u540c\u7684\u8f6c\u53d1\u65b9\u5f0f\u3001\u8f6c\u53d1\u8def\u5f84\u548c\u8f6c\u53d1\u5f85\u9047\u3002\u4f46\u662f\u5e76\u4e0d\u662f\u6240\u6709\u62e5\u6709\u76f8\u540c\u6807\u7b7e\u7684\u62a5\u6587\u90fd\u5c5e\u4e8e\u4e00\u4e2aFEC\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u62a5\u6587\u7684EXP\u503c\u53ef\u80fd\u4e0d\u76f8\u540c\uff0c\u6267\u884c\u65b9\u5f0f\u53ef\u80fd\u4e0d\u540c\uff0c\u56e0\u6b64\u5b83\u4eec\u53ef\u80fd\u5c5e\u4e8e\u4e0d\u540c\u7684FEC\u3002\u51b3\u5b9a\u62a5\u6587\u5c5e\u4e8e\u54ea\u4e00\u4e2aFEC\u7684\u8def\u7531\u5668\u662f\u5165\u7ad9LSR\uff0c\u56e0\u4e3a\u662f\u5b83\u5bf9\u62a5\u6587\u8fdb\u884c\u5206\u7c7b\u548c\u538b\u5165\u6807\u7b7e\u3002 \u4e0b\u9762\u662f\u4e00\u4e9bFEC\u7684\u8303\u4f8b\uff1a \u76ee\u7684IP\u5730\u5740\u5339\u914d\u540c\u4e00\u4e2a\u7279\u5b9a\u524d\u7f00\u7684\u62a5\u6587\uff1b \u5c5e\u4e8e\u67d0\u4e2a\u7279\u5b9a\u7ec4\u64ad\u7ec4\u7684\u7ec4\u64ad\u62a5\u6587\uff1b \u6839\u636e\u8fdb\u7a0b\u6216\u8005IP DSCP\u5b57\u6bb5\u6709\u76f8\u540c\u5904\u7406\u65b9\u5f0f\u7684\u62a5\u6587\u3002 \u6ce8\uff1a\u4e00\u6761FEC\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u6d41\uff0c\u4f46\u4e0d\u662f\u4e00\u4e2a\u6d41\u4e00\u4e2aFEC\uff0c\u6bd4\u5982\u4e00\u53f0\u4e3b\u673a\u5728\u770b\u65b0\u6d6a\u7684\u7f51\u9875\uff0c\u8fd9\u662f\u4e00\u4e2a\u6d41\uff0c\u53c8\u5728\u770b\u65b0\u6d6a\u7684\u89c6","title":"FEC"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#lsp","text":"LSP\uff08Label Switched Path\uff0c\u6807\u7b7e\u4ea4\u6362\u8def\u5f84\uff09\uff0c\u6807\u7b7e\u62a5\u6587\u7a7f\u8d8aMPLS\u7f51\u7edc\u5230\u8fbe\u76ee\u7684\u5730\u6240\u8d70\u7684\u8def\u5f84\u3002MPLS \u7f51\u7edc\u901a\u8fc7\u6807\u7b7e\u5206\u914d\u534f\u8bae\u81ea\u884c\u8fdb\u884c\u6807\u7b7e\u7684\u5206\u914d\u548c\u5b66\u4e60\uff0c\u4e3a\u6d41\u91cf\u5efa\u7acb\u4e00\u6761\u6807\u7b7e\u8f6c\u53d1\u7684\u901a\u9053\u3002LSP\u662f\u5355\u5411\u7684\u3002\u5b9e\u9645\u4e0a\uff0cLSP\u662f\u62a5\u6587\u5728\u7a7f\u8d8aMPLS\u7f51\u7edc\u6216\u8005\u90e8\u5206MPLS\u7f51\u7edc\u65f6\u7684\u8def\u5f84\u3002\u4e3a\u4e86\u6ee1\u8db3\u901a\u4fe1\u8282\u70b9\u4e4b\u95f4\u7684\u53cc\u5411\u901a\u4fe1\uff0c\u6211\u4eec\u5f80\u5f80\u9700\u8981\u5efa\u7acb\u53cc\u5411\u7684LSP\u3002 LSP\u5206\u4e3a\u9759\u6001LSP\u548c\u52a8\u6001LSP\u4e24\u79cd\u3002\u9759\u6001LSP\u7531\u7ba1\u7406\u5458\u624b\u5de5\u914d\u7f6e\uff0c\u52a8\u6001LSP\u5219\u5229\u7528\u8def\u7531\u534f\u8bae\u548c\u6807\u7b7e\u53d1\u5e03\u534f\u8bae\u52a8\u6001\u5efa\u7acb\u3002 \u9759\u6001LSP\u662f\u7528\u6237\u901a\u8fc7\u624b\u5de5\u4e3a\u5404\u4e2a\u8f6c\u53d1\u7b49\u4ef7\u7c7b\u5206\u914d\u6807\u7b7e\u800c\u5efa\u7acb\u7684\u3002\u624b\u5de5\u5206\u914d\u6807\u7b7e\u9700\u8981\u9075\u5faa\u7684\u539f\u5219\u662f\uff1a\u4e0a\u6e38LSR \u51fa\u6807\u7b7e\u7684\u503c\u5c31\u662f\u4e0b\u6e38LSR\u5165\u6807\u7b7e\u7684\u503c\u3002 \u7531\u4e8e\u9759\u6001LSP\u6cbf\u9014\u7684\u5404LSR\u4e0d\u80fd\u76f8\u4e92\u611f\u77e5\u5230\u6574\u4e2aLSP\u7684\u60c5\u51b5\uff0c\u56e0\u6b64\u9759\u6001LSP\u662f\u4e00\u4e2a\u672c\u5730\u7684\u6982\u5ff5\u3002 \u9759\u6001LSP\u4e0d\u4f7f\u7528\u6807\u7b7e\u53d1\u5e03\u534f\u8bae\uff0c\u4e0d\u9700\u8981\u4ea4\u4e92\u63a7\u5236\u62a5\u6587\uff0c\u56e0\u6b64\u6d88\u8017\u8d44\u6e90\u6bd4\u8f83\u5c0f\uff0c\u9002\u7528\u4e8e\u62d3\u6251\u7ed3\u6784\u7b80\u5355\u5e76\u4e14\u7a33\u5b9a\u7684\u5c0f\u578b\u7f51\u7edc\u3002\u4f46\u901a\u8fc7\u9759\u6001\u65b9\u5f0f\u5206\u914d\u6807\u7b7e\u5efa\u7acb\u7684LSP\u4e0d\u80fd\u6839\u636e\u7f51\u7edc\u62d3\u6251\u53d8\u5316\u52a8\u6001\u8c03\u6574\uff0c\u9700\u8981\u7ba1\u7406\u5458\u5e72\u9884\u3002","title":"LSP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mpls_2","text":"\u4e00\u4e2aIP\u6570\u636e\u5305\u5982\u679c\u8981\u8fdb\u5165MPLS\u7f51\u7edc\uff0c\u4f1a\u88abLSR\u538b\u5165\u6807\u7b7e\u6808\uff0c\u4e00\u4e2a\u6807\u7b7e\u6808\u4e2d\u53ef\u80fd\u5305\u542b\u4e00\u5c42\u6807\u7b7e\uff0c\u4e5f\u53ef\u80fd\u5305\u542b\u591a\u5c42\u6807\u7b7e\u3002\u6807\u7b7e\u5934\u90e8\u7684\u5b57\u6bb5\u683c\u5f0f\u5982\u4e0a\u56fe\u6240\u793a\u3002\u4ee5\u4e0b\u5c55\u793a\u7684\u662f\u4e00\u4e2a\u643a\u5e26\u591a\u4e2a\u6807\u7b7e\u5934\u90e8\u7684\u6807\u7b7e\u62a5\u6587\uff1a \u4e00\u4e2aIP\u6570\u636e\u5305\u53ef\u4ee5\u88ab\u538b\u5165\u4e00\u5c42MPLS\u6807\u7b7e\uff0c\u4e5f\u53ef\u4ee5\u662f\u591a\u5c42\u6807\u7b7e\u3002\u4f8b\u5982\u4e0a\u56fe\u6240\u793a\u7684IP\u6570\u636e\u5305\uff0c\u5c31\u88ab\u538b\u5165\u4e86\u4e09\u5c42\u6807\u7b7e\u3002\u5728\u6bcf\u5c42\u6807\u7b7e\u5934\u90e8\u4e2d\u90fd\u6709\u4e00\u4e2aBoS\u4f4d\u6765\u6807\u8bc6\u672c\u6807\u7b7e\u5934\u90e8\u662f\u5426\u662f\u6807\u7b7e\u6808\u7684\u6808\u4f4e\uff08\u6bcf\u4e2a\u6807\u7b7e\u5934\u90e8\u90fd\u62e5\u6709\u5b8c\u6574\u7684\u56db\u4e2a\u5b57\u6bb5\uff09\uff0c\u5982\u679c\u672c\u6807\u7b7e\u5934\u5df2\u7ecf\u662f\u6808\u5e95\uff0c\u4e5f\u5c31\u662f\u6700\u540e\u4e00\u5c42\u6807\u7b7e\uff0c\u6216\u8005\u8bf4\u540e\u9762\u5c31\u662fIP\u5934\u90e8\u4e86\uff0c\u90a3\u4e48\u8be5\u5c42\u6807\u7b7e\u5934\u90e8\u7684BoS\u6bd4\u7279\u503c\u88ab\u8bbe\u7f6e\u4e3a1\uff0c\u5426\u5219\u8bbe\u7f6e\u4e3a0\u3002","title":"MPLS \u6807\u7b7e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mpls_3","text":"\u6807\u7b7e\u7684\u64cd\u4f5c\u7c7b\u578b\u5305\u62ec\u6807\u7b7e\u538b\u5165\uff08Push\uff0c\u6216Insert\uff09\u3001\u6807\u7b7e\u4ea4\u6362\uff08Swap\uff09\u548c\u6807\u7b7e\u5f39\u51fa\uff08Pop\uff09\uff0c\u5b83\u4eec\u662f\u6807\u7b7e\u8f6c\u53d1\u7684\u57fa\u672c\u52a8\u4f5c\uff0c\u662f\u6807\u7b7e\u8f6c\u53d1\u4fe1\u606f\u8868\u7684\u7ec4\u6210\u90e8\u5206\u3002 Push\uff1a\u6307\u5f53IP\u62a5\u6587\u8fdb\u5165MPLS\u57df\u65f6\uff0cMPLS\u8fb9\u754c\u8bbe\u5907\u5728\u62a5\u6587\u4e8c\u5c42\u5934\u90e8\u548cIP\u5934\u90e8\u4e4b\u95f4\u63d2\u5165\u4e00\u4e2a\u65b0\u6807\u7b7e\uff1b\u6216\u8005MPLS\u4e2d\u95f4\u8bbe\u5907\u6839\u636e\u9700\u8981\uff0c\u5728\u6807\u7b7e\u6808\u9876\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u6807\u7b7e\uff08\u5373\u6807\u7b7e\u5d4c\u5957\u5c01\u88c5\uff09\u3002 Swap\uff1a\u5f53\u62a5\u6587\u5728MPLS\u57df\u5185\u8f6c\u53d1\u65f6\uff0c\u6839\u636e\u6807\u7b7e\u8f6c\u53d1\u8868\uff0c\u7528\u4e0b\u4e00\u8df3\u5206\u914d\u7684\u6807\u7b7e\uff0c\u66ff\u6362MPLS\u62a5\u6587\u7684\u6808\u9876\u6807\u7b7e\u3002 Pop\uff1a\u5f53\u62a5\u6587\u79bb\u5f00MPLS\u57df\u65f6\uff0c\u5c06MPLS\u62a5\u6587\u7684\u6807\u7b7e\u53bb\u6389\u3002 \u5728\u6700\u540e\u4e00\u8df3LSR\uff0c\u6807\u7b7e\u5df2\u7ecf\u6ca1\u6709\u4f7f\u7528\u4ef7\u503c\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u5229\u7528\u5012\u6570\u7b2c\u4e8c\u8df3\u5f39\u51fa\u7279\u6027PHP\uff08Penultimate Hop Popping\uff09\uff0c\u5728\u5012\u6570\u7b2c\u4e8c\u8df3LSR\u5904\u5c06\u6807\u7b7e\u5f39\u51fa\uff0c\u51cf\u5c11\u6700\u540e\u4e00\u8df3\u7684\u8d1f\u62c5\u3002\u6700\u540e\u4e00\u8df3LSR\u76f4\u63a5\u8fdb\u884cIP\u8f6c\u53d1\u6216\u8005\u4e0b\u4e00\u5c42\u6807\u7b7e\u8f6c\u53d1\u3002 PHP\u5728Egress LSR\u4e0a\u914d\u7f6e\u3002\u652f\u6301PHP\u7684Egress LSR\u5206\u914d\u7ed9\u5012\u6570\u7b2c\u4e8c\u8df3LSR\u7684\u6807\u7b7e\u503c\u4e3a3\u3002 \u4e0b\u9762\u662f\u4e00\u4e2a\u5c0f\u4f8b\u5b50\uff1a \u4f8b\u5982\u4e0a\u56fe\u6240\u793a\uff0cR1\u5728\u6536\u5230\u4e00\u4e2aIP\u6570\u636e\u5305\u4e4b\u540e\uff0c\u7ecf\u8fc7FIB\u8868\uff08\u8f6c\u53d1\u4fe1\u606f\u8868\uff09\u67e5\u8be2\uff0c\u5b83\u53d1\u73b0\u53bb\u5f803.3.3.0/24\u7684\u4e0b\u4e00\u8df3\u662fR2\uff0c\u5e76\u4e14\u62a5\u6587\u9700\u8981\u538b\u5165\u4e00\u5c42\u6807\u7b7e\uff0c\u6807\u7b7e\u503c\u4e3a1028\u3002\u56e0\u6b64R1\u5c06IP\u6570\u636e\u5305\u538b\u5165\u4e00\u5c42\u6807\u7b7e\u7136\u540e\u8f6c\u53d1\u7ed9R2\u3002 R2\u6536\u5230\u8fd9\u4e2a\u643a\u5e26\u4e86\u6807\u7b7e\u7684\u6807\u7b7e\u5305\uff0c\u5b83\u53d6\u51fa\u6807\u7b7e\u503c\u5e76\u5728\u81ea\u5df1\u7684\u6807\u7b7e\u8f6c\u53d1\u8868\u91cc\u8fdb\u884c\u67e5\u8be2\uff0c\u53d1\u73b0\u5165\u7ad9\u6807\u7b7e1028\u5bf9\u5e94\u51fa\u7ad9\u6807\u7b7e1026\uff0c\u4e14\u4e0b\u4e00\u8df3\u4e3aR3\uff0c\u56e0\u6b64\u5b83\u5c06\u62a5\u6587\u7684\u6807\u7b7e\u7f6e\u6362\uff08SWAP\uff09\u62101026\u5e76\u8f6c\u53d1\u7ed9R3\u3002\u540c\u6837\u7684\uff0cR3\u6536\u5230\u8fd9\u4e2a\u6807\u7b7e\u62a5\u6587\u540e\uff0c\u5728\u5176\u6807\u7b7e\u8f6c\u53d1\u8868\u91cc\u67e5\u8be2\u5165\u7ad9\u6807\u7b7e1026\uff0c\u7ed3\u679c\u53d1\u73b0\u5165\u7ad9\u6807\u7b7e1026\u5bf9\u5e94\u7684\u51fa\u7ad9\u52a8\u4f5c\u662f3\uff08\u6807\u7b7e\u503c3\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u3001\u88ab\u4fdd\u7559\u7684\u6807\u7b7e\u503c\uff0c\u5f53\u51fa\u7ad9\u6807\u7b7e\u4e3a3\u65f6\uff0c\u610f\u5473\u7740\u8981\u5f39\u51fa\u6807\u7b7e\u5934\uff09\uff0c\u56e0\u6b64\u5c06\u6807\u7b7e\u5934\u5f39\u51fa\uff0c\u8fd9\u5c31\u5f97\u5230\u4e86\u539f\u59cb\u7684IP\u62a5\u6587\uff0c\u6700\u540eR3\u5c06\u8fd9\u4e2aIP\u6570\u636e\u5305\u8f6c\u53d1\u51fa\u53bb\u3002 LSP\u7684\u5165\u53e3LSR\u88ab\u79f0\u4e3aIngress LSR\uff08\u5165\u7ad9LSR\uff09\u3002\u4f4d\u4e8eLSP\u4e2d\u95f4\u7684LSR\u88ab\u79f0\u4e3a\u4e2d\u95f4LSR\uff08Transit LSR\uff09\u3002 LSP\u7684\u51fa\u53e3LSR\u88ab\u79f0\u4e3aEgress LSR\uff08\u51fa\u7ad9LSR\uff09\u3002Ingress LSR\u53caEgress LSR\u90fd\u662fLER\u3002\u5728\u4e0a\u56fe\u4e2d\uff0c\u5bf9\u4e8e\u53bb\u5f803.3.3.0/24\u7684\u6570\u636e\u6d41\u91cf\u800c\u8a00\uff0cR1\u662fIngress LSR\uff0cR2\u662fTransit LSR\uff0cR3\u662fEgress LSR\u3002\u4e00\u6761LSP\u53ef\u4ee5\u6709 0\u4e2a\u30011\u4e2a\u6216\u591a\u4e2aTransit LSR \uff0c\u4f46\u6709\u4e14\u53ea\u6709\u4e00\u4e2aIngress LSR\u548c\u4e00\u4e2aEgress LSR \u3002 \u503c\u5f97\u4e00\u63d0\u7684\u662f\u5728\u672c\u4f8b\u4e2d\uff0cR1\u662fIngress LER\uff0c\u4e5f\u53ca\u662f\u5165\u7ad9\u7684\u8fb9\u754c\u6807\u7b7e\u4ea4\u6362\u8def\u7531\u5668\uff0c\u5b83\u5de6\u4fa7\u8fde\u63a5\u7740IP\u7f51\u7edc\uff0c\u800c\u53f3\u4fa7\u8fde\u63a5\u7740MPLS\u7f51\u7edc\u3002\u5f53R1\u6536\u5230\u4e00\u4e2aIP\u6570\u636e\u5305\u65f6\uff0c\u5b83\u4f1a\u600e\u4e48\u5904\u7406\uff1f\u5b83\u4f1a\u5728FIB\u8868\u4e2d\u67e5\u627e\u8be5IP\u62a5\u6587\u7684\u76ee\u7684IP \u5730\u5740\uff0c\u5982\u679c\u6709\u5339\u914d\u7684\u8868\u9879\u5e76\u4e14\u8be5\u8868\u9879\u6240\u6307\u793a\u7684\u4e0b\u4e00\u8df3\u662f\u4e00\u4e2aIP\u8bbe\u5907\u800c\u4e0d\u662fLSR\uff0c\u90a3\u4e48\u8fd9\u4e2a\u62a5\u6587\u4f1a\u88ab\u76f4\u63a5\u8def\u7531\u3002\u4f46\u662f\u5982\u679cFIB\u4e2d\u7684\u8868\u9879\u6307\u793a\u4e0b\u4e00\u8df3\u662f\u4e00\u53f0LSR\u5e76\u4e14\u9700\u8981\u538b\u5165\u6807\u7b7e\uff0c\u60c5\u51b5\u5c31\u4e0d\u540c\u4e86\uff0cR1\u4f1a\u7ed9IP\u62a5\u6587\u538b\u5165\u6807\u7b7e\uff0c \u7136\u540e\u518d\u628a\u8fd9\u4e2a\u6807\u7b7e\u5305\u8f6c\u53d1\u51fa\u53bb\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0cIP\u6570\u636e\u5305\u5c31\u901a\u8fc7R1\u8fdb\u5165\u4e86MPLS\u7f51\u7edc\u3002\u4e00\u65e6\u4ee5\u6807\u7b7e\u5305\u7684\u5f62\u6001\u8fdb\u5165 MPLS\u7f51\u7edc\uff0c\u5728\u8f6c\u53d1\u7684\u8fc7\u7a0b\u4e2d\u6240\u6709LSR\uff08\u9664\u4e86\u51fa\u7ad9LSR\uff09\u5c31\u53ea\u770b\u6570\u636e\u5305\u7684\u6807\u7b7e\u5934\uff0c\u5bf9\u5176\u8fdb\u884c\u67e5\u627e\u53ca\u4ea4\u6362\uff0c\u800c\u4e0d\u4f1a\u53bb\u7406\u4f1a\u6807\u7b7e\u5934\u91cc\u5934\u7684IP\u5934\u90e8\u3002\u800c\u81f3\u4e8e\u7ed9\u8fd9\u4e2a\u62a5\u6587\u538b\u5165\u7684\u6807\u7b7e\u503c\u662f\u591a\u5c11\uff0c\u6807\u7b7e\u503c\u662f\u600e\u4e48\u786e\u5b9a\u7684\uff0c\u8bf7\u7ee7\u7eed\u770b\u4e0b\u6587\u3002","title":"MPLS \u6807\u7b7e\u64cd\u4f5c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mpls_4","text":"\u9996\u5148\uff0c\u6211\u4eec\u8981\u638c\u63e1\u4e00\u4e9b\u57fa\u672c\u6982\u5ff5\uff1a","title":"MPLS \u8f6c\u53d1\u8fc7\u7a0b\u8be6\u89e3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#nhlfenext-hop-label-forwarding-entrympls","text":"NHLFE\u5305\u62ec\uff1aTunnel ID\u3001\u51fa\u63a5\u53e3\u3001\u4e0b\u4e00\u8df3\u3001\u51fa\u6807\u7b7e\u3001\u6807\u7b7e\u64cd\u4f5c\u7c7b\u578b\u7b49\u4fe1\u606f\u3002","title":"NHLFE\uff08Next Hop Label Forwarding Entry\uff0c\u4e0b\u4e00\u8df3\u6807\u7b7e\u8f6c\u53d1\u8868\u9879\uff09\u7528\u4e8e\u6307\u5bfcMPLS\u62a5\u6587\u7684\u8f6c\u53d1\u3002"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ftn-fec-to-nhlfe-fecnhlfe","text":"\u901a\u8fc7\u67e5\u770bFIB\u8868\u4e2dTunnel ID\u503c\u4e0d\u4e3a0x0\u7684\u8868\u9879\uff0c\u80fd\u591f\u83b7\u5f97FTN\u7684\u8be6\u7ec6\u4fe1\u606f\u3002FTN\u53ea\u5728Ingress\u5b58\u5728\u3002","title":"FTN \uff08FEC-to-NHLFE\uff0c FEC\u5230\u4e00\u7ec4NHLFE\u7684\u6620\u5c04\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ilm-incoming-label-map","text":"ILM\u5305\u62ec\uff1aTunnel ID\u3001\u5165\u6807\u7b7e\u3001\u5165\u63a5\u53e3\u3001\u6807\u7b7e\u64cd\u4f5c\u7c7b\u578b\u7b49\u4fe1\u606f\u3002 ILM\u5728Transit LSR\u7684\u4f5c\u7528\u662f\u5c06\u6807\u7b7e\u548cNHLFE\u7ed1\u5b9a\u3002\u901a\u8fc7\u6807\u7b7e\u7d22\u5f15ILM\u8868\uff0c\u5c31\u76f8\u5f53\u4e8e\u4f7f\u7528\u76ee\u7684IP\u5730\u5740\u67e5\u8be2 FIB\uff0c\u80fd\u591f\u5f97\u5230\u6240\u6709\u7684\u6807\u7b7e\u8f6c\u53d1\u4fe1\u606f\u3002","title":"ILM \uff08Incoming Label Map\uff0c\u5165\u6807\u7b7e\u5230\u4e00\u7ec4\u4e0b\u4e00\u8df3\u6807\u7b7e\u8f6c\u53d1\u8868\u9879\u7684\u6620\u5c04\uff09"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#tunnel-id","text":"\u4e3a\u4e86\u7ed9\u4f7f\u7528\u96a7\u9053\u7684\u4e0a\u5c42\u5e94\u7528\uff08\u5982VPN\u3001\u8def\u7531\u7ba1\u7406\uff09\u63d0\u4f9b\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u7cfb\u7edf\u81ea\u52a8\u4e3a\u96a7\u9053\u5206\u914d\u4e86\u4e00\u4e2aID\uff0c\u4e5f\u79f0\u4e3aTunnel ID\u3002\u8be5Tunnel ID\u7684\u957f\u5ea6\u4e3a32\u6bd4\u7279\uff0c\u53ea\u662f\u672c\u5730\u6709\u6548\u3002 \u5728\u62a5\u6587\u7684\u8f6c\u53d1\u8fc7\u7a0b\u4e2d\uff1a \u5728Ingress LSR\uff0c\u901a\u8fc7\u67e5\u8be2FIB\u8868\u548cNHLFE\u8868\u6307\u5bfc\u62a5\u6587\u7684\u8f6c\u53d1\u3002 \u5f53IP\u62a5\u6587\u8fdb\u5165MPLS\u57df\u65f6\uff0c\u9996\u5148\u67e5\u770bFIB\u8868\uff0c\u68c0\u67e5\u76ee\u7684IP\u5730\u5740\u5bf9\u5e94\u7684Tunnel ID\u503c\u662f\u5426\u4e3a0x0\u3002\u5982\u679cTunnel ID\u503c\u4e3a0x0\uff0c\u5219\u8fdb\u5165\u6b63\u5e38\u7684IP\u8f6c\u53d1\u6d41\u7a0b\u3002\u5982\u679cTunnel ID\u503c\u4e0d\u4e3a0x0\uff0c\u5219\u8fdb\u5165MPLS\u8f6c\u53d1\u6d41\u7a0b\u3002 \u5728Transit LSR\uff0c\u901a\u8fc7\u67e5\u8be2ILM\u8868\u548cNHLFE\u8868\u6307\u5bfcMPLS\u62a5\u6587\u7684\u8f6c\u53d1\u3002 \u5728Egress LSR\uff0c\u901a\u8fc7\u67e5\u8be2ILM\u8868\u6307\u5bfcMPLS\u62a5\u6587\u7684\u8f6c\u53d1\u6216\u67e5\u8be2\u8def\u7531\u8868\u6307\u5bfcIP\u62a5\u6587\u8f6c\u53d1\u3002","title":"Tunnel ID"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ingress-lsr","text":"","title":"Ingress LSR\u7684\u5904\u7406\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#transit-lsr","text":"","title":"Transit LSR\u7684\u5904\u7406\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#egress-lsr","text":"","title":"Egress LSR\u7684\u5904\u7406\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_280","text":"LDP","title":"\u5c0f\u7ed3\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ldp","text":"\u6807\u7b7e\u62a5\u6587\u5728MPLS\u7f51\u7edc\u6cbf\u7740\u6807\u7b7e\u4ea4\u6362\u8def\u5f84\u8f6c\u53d1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e2d\u95f4LSR\u90fd\u53ea\u662f\u67e5\u770b\u6570\u636e\u7684\u6807\u7b7e\u503c\uff0c\u5e76\u4e14\u9488\u5bf9\u8be5\u6807\u7b7e\u8fdb\u884c\u67e5\u8be2\u3001\u7f6e\u6362\u7b49\u64cd\u4f5c\u3002\u90a3\u4e48\u5165\u7ad9LSR\u7a76\u7adf\u8be5\u4e3aIP\u6570\u636e\u5305\u538b\u4ec0\u4e48\u6807\u7b7e\u5462\uff1f\u6807\u7b7e\u4ea4\u6362\u8def\u5f84\u662f\u600e\u6837\u7684\uff1f\u5982\u4f55\u786e\u4fdd\u8fd9\u4e2aIP\u6570\u636e\u5305\u80fd\u591f\u987a\u5229\u7684\u7a7f\u8d8aMPLS\u7f51\u7edc\uff1f\u8fd9\u4e9b\u90fd\u662f\u63a7\u5236\u5c42\u9762\u7684\u95ee\u9898\uff0c\u80af\u5b9a\u662f\u9700\u8981\u534f\u8bae\u6765\u89e3\u51b3\u7684\uff0c\u800c\u4e14\u5e94\u8be5\u5728IP\u6570\u636e\u5305\u5230\u8fbe\u4e4b\u524d\u5c31\u628a\u6240\u6709\u7684\u4e8b\u60c5\u51c6\u5907\u597d\u3002 \u6240\u6709\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u534f\u8bae\uff0c\u8fd9\u4e2a\u534f\u8bae\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u4e3a\u7279\u5b9a\u7684\u6d41\u91cf\u5efa\u7acbLSP\uff0c\u80fd\u591f\u4e3aFEC\uff08\u4f8b\u5982\u7279\u5b9a\u7684\u8def\u7531\u524d\u7f00\uff09\u5206\u914d\u6807\u7b7e\uff0c\u5e76\u4e14\u5c06\u6807\u7b7e\u6620\u5c04\u4f20\u9012\uff08\u6216\u8005\u8bf4\u5206\u53d1\uff09\u7ed9\u5176\u4ed6\u7684\u6807\u7b7e\u4ea4\u6362\u8def\u7531\u5668\u3002 \u5982\u679c\u8ba9OSPF\u3001ISIS\u8fd9\u6837\u7684\u534f\u8bae\u6765\u5206\u53d1\u6807\u7b7e\u662f\u4e0d\u53ef\u80fd\u7684\u4e86\uff08\u81f3\u5c11\u5728\u672a\u5bf9\u534f\u8bae\u505a\u6269\u5c55\u4e4b\u524d\u662f\u4e0d\u53ef\u80fd\u7684\uff09\u3002\u90a3\u4e48\u5c31\u9700\u8981\u4e00\u4e2a\u65b0\u7684\u534f\u8bae\uff0c\u72ec\u7acb\u4e8e\u6240\u6709\u7684\u8def\u7531\u534f\u8bae\u5e76\u4e14\u80fd\u591f\u7ed3\u5408\u8def\u7531\u534f\u8bae\u4e00\u8d77\u4f7f\u7528\uff0c\u8fd9\u4e2a\u534f\u8bae\u80fd\u591f\u4e3a\u7279\u5b9a\u7684FEC \u6346\u7ed1\u6807\u7b7e\uff0c\u5e76\u4e14\u5c06\u6807\u7b7e\u5206\u53d1\u7ed9\u5176\u4ed6\u7684LSR\u3002LDP\uff08Label Distribution Protocol\u6807\u7b7e\u5206\u53d1\u534f\u8bae\uff09\u5c31\u662f\u4e00\u4e2a\u8fd9\u6837\u7684\u534f\u8bae\u3002 \u6bcf\u4e00\u53f0\u8fd0\u884cLDP\u7684LSR\u90fd\u4f1a\u4e3a\u81ea\u5df1\u8def\u7531\u8868\u4e2d\u7684\u8def\u7531\u524d\u7f00\u6346\u7ed1\u6807\u7b7e\uff0c\u7136\u540e\u518d\u5c06\u6240\u5206\u914d\u7684\u6807\u7b7e\u5206\u53d1\u7ed9\u6240\u6709\u7684LSR \u90bb\u5c45\u3002LDP\u90bb\u5c45\u5c06\u8fd9\u4e9b\u63a5\u6536\u5230\u7684\u6807\u7b7e\u89c6\u4e3a\u51fa\u7ad9\u6807\u7b7eOutgoing label\uff08\u6216\u8005\u8fdc\u7aef\u6807\u7b7e\uff09\uff0c\u4e4b\u540e\u90bb\u5c45\u5c06\u8be5\u51fa\u7ad9\u6807\u7b7e\u548c\u5176\u81ea\u5df1\u672c\u5730\u7684\u6807\u7b7e\u5b58\u50a8\u4e8e\u4e00\u5f20\u7279\u6b8a\u7684\u8868\u4e2d\u3002\u901a\u5e38\u4e00\u53f0LDP\u8def\u7531\u5668\u4f1a\u6709\u591a\u4e2aLDP\u90bb\u5c45\uff0c\u90a3\u4e48\u8fd9\u4e9b\u90bb\u5c45\u90fd\u4f1a\u7ed9\u8def\u7531\u5206\u914d\u6807\u7b7e\u7136\u540e\u5c06\u8fd9\u4e9b\u6807\u7b7e\u4f20\u7ed9\u81ea\u5df1\u3002 \u4e00\u53f0LSR\u6709\u53ef\u80fd\u4f1a\u6536\u5230\u591a\u4e2aLDP\u90bb\u5c45\u5206\u53d1\u7684\u6807\u7b7e\uff0c\u53ef\u80fd\u5bf9\u4e8e\u540c\u4e00\u4e2aFEC\uff0c\u4f1a\u540c\u65f6\u6536\u5230\u591a\u4e2a\u90bb\u5c45\u5206\u53d1\u7684\u6807\u7b7e\uff0c \u901a\u5e38\u8def\u7531\u5668\u53ea\u4f7f\u7528\u5176\u4e2d\u4e00\u4e2a\u6807\u7b7e\u4f5c\u4e3a\u8be5\u524d\u7f00\u7684\u51fa\u7ad9\u6807\u7b7e\u3002\u5b83\u901a\u8fc7RIB\u4e5f\u5c31\u662fIP\u8def\u7531\u8868\u5f97\u5230\u8be5IPv4\u524d\u7f00\u7684\u4e0b\u4e00\u8df3\uff0c\u5b83\u5c06\u4f7f\u7528\u8fd9\u4e2a\u4e0b\u4e00\u8df3LSR\u6240\u5206\u53d1\u7684\u6807\u7b7e\u4f5c\u4e3a\u6700\u7ec8\u7684\u51fa\u7ad9\u6807\u7b7e\u3002 \u5728LDP\u5b8c\u6210\u5de5\u4f5c\u540e\uff0c\u4e00\u6761LSP\u5c31\u5efa\u7acb\u8d77\u6765\u4e86\u3002","title":"LDP \u6982\u8ff0"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ldp-id","text":"LDP-ID\u662f\u957f\u5ea6\u4e3a6Byte\u7684LDP\u6807\u8bc6\u7b26\uff0c\u5305\u542b4Byte\u7684LSR-ID\u53ca2Byte\u7684\u6807\u7b7e\u7a7a\u95f4\u503c\uff0c\u4f8b\u5982192.168.255.1:0\u3002 \u5176\u4e2d4Byte\u7684LSR-ID\u4e3a\u7cfb\u7edf\u89c6\u56fe\u547d\u4ee4mpls lsr-id\u6240\u6307\u5b9a\u7684\u6807\u8bc6\u7b26\uff0c\u4e5f\u5c31\u662fLSR\u7684\u6807\u8bc6\u7b26 \uff08\u5728\u5bf9\u8bbe\u5907\u505aMPLS \u914d\u7f6e\u4e4b\u524d\uff0c\u9700\u8981\u9996\u5148\u5728\u7cfb\u7edf\u89c6\u56fe\u4e0b\u6307\u5b9aLSR-ID\uff0cLSR-ID\u4e0eIPv4\u5730\u5740\u7684\u683c\u5f0f\u76f8\u540c\uff0c\u4f8b\u5982192.168.255.1\uff09\u3002 \u6807\u7b7e\u7a7a\u95f4\u503c\u4e00\u822c\u4e3a0\uff0c\u8868\u793a\u6807\u7b7e\u662f\u57fa\u4e8e\u8bbe\u5907\u6216\u8005\u8bf4\u662f\u57fa\u4e8e\u5e73\u53f0\u7684\uff08Per-Platform\uff09\uff1b\u5982\u679c\u662f\u975e0\uff0c\u5c31\u8bf4\u660e\u7528\u7684\u662f\u57fa\u4e8e\u63a5\u53e3\u7684\u6807\u7b7e\u7a7a\u95f4\u3002","title":"LDP ID"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_281","text":"\u9ed8\u8ba4\u7684LDP\u6807\u7b7e\u7a7a\u95f4\u662f\u57fa\u4e8e\u8bbe\u5907\u6216\u8005\u8bf4\u57fa\u4e8e\u5e73\u53f0\u7684\uff08per-platform\uff09\u3002\u4ec0\u4e48\u610f\u601d\u5462\uff0c\u770b\u4e0a\u56fe\u4e2d\u7684B\u8def\u7531\u5668\uff0c\u5b83\u4e3a\u524d\u7f00X\u6346\u7ed1\u4e86\u6807\u7b7e1088\uff0c\u5e76\u4e14\u5c06\u8fd9\u4e2a\u6807\u7b7e\u6346\u7ed1\u4fe1\u606f\u53d1\u5e03\u7ed9\u6240\u6709\u7684LDP\u90bb\u5c45\uff0c\u7ed9\u5927\u5bb6\u7684\u90fd\u4e00\u6837\u800c\u4e14\u4eba\u4eba\u6709\u4efd\uff0c\u90fd\u662f\u6807\u7b7e1088\u3002\u8fd9\u5c31\u662f\u57fa\u4e8e\u5e73\u53f0\u7684\u610f\u601d\u3002\u9664\u6b64\u4e4b\u5916\u8fd8\u6709\u57fa\u4e8e\u63a5\u53e3\u7684\u6807\u7b7e\u7a7a\u95f4\u3002 Label Space ID\u4e00\u822c\u4e3a0\uff0c\u8868\u793a\u6211\u4eec\u7684\u6807\u7b7e\u662f\u57fa\u4e8e\u5e73\u53f0\uff08Per-platform\uff09\u7684\u6807\u7b7e\u7a7a\u95f4\u3002 \u4e3a\u524d\u7f00\u5206\u914d\u7684\u6807\u7b7e\u5728\u672c\u5730\u4efb\u610fMPLS\u63a5\u53e3\u53ef\u7528\u5e76\u4e14\u4f1a\u5206\u53d1\u7ed9\u6240\u6709LSR\u90bb\u5c45\u3002 \u672c\u5730\u5206\u914d\u7684\u6807\u7b7e\u4f1a\u5206\u53d1\u7ed9\u90bb\u5c45\uff0c\u5982\u679c\u4e0e\u5355\u4e2a\u90bb\u5c45\u6709\u591a\u6761\u8fde\u63a5\uff0c\u5219\u8be5\u6807\u7b7e\u5728\u6240\u6709\u8fde\u63a5\u4e0a\u5747\u6709\u6548\u3002\u90a3\u4e48\u4e0d\u7ba1 \u672c\u5730\u4ece\u54ea\u4e2a\u63a5\u53e3\u4e0a\u6536\u5230\u4e00\u4e2a\u6807\u7b7e\u5305\uff0c\u53ea\u8981\u6709\u8fd9\u4e2a\u6807\u7b7e\uff0c\u90fd\u4f1a\u5bf9\u5176\u8fdb\u884c\u4ea4\u6362\u3002","title":"\u6807\u7b7e\u7a7a\u95f4"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_282","text":"\u4e24\u53f0LSR\u4e4b\u95f4\u5728\u5efa\u7acbLDP\u4f1a\u8bdd\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u4ee5\u4fbf\u8fdb\u884cLDP\u534f\u8bae\u62a5\u6587\u7684\u4ea4\u6362\u3002 \u4e92\u4e3a\u90bb\u5c45\u7684LSR\u9700\u57fa\u4e8e\u53cc\u65b9\u7684\u4f20\u8f93\u5730\u5740\uff08Transport Address\uff09\u5efa\u7acbTCP\u8fde\u63a5\u3002 \u5728LDP Hello\u62a5\u6587\u4e2d\uff0c\u5305\u542b\u8bbe\u5907\u7684\u4f20\u8f93\u5730\u5740\uff0cLSR\u901a\u8fc7Hello\u62a5\u6587\u77e5\u6653\u90bb\u5c45\u7684\u4f20\u8f93\u5730\u5740\u3002 \u5728\u4f7f\u7528Hello\u62a5\u6587\u53d1\u73b0\u90bb\u5c45\u5e76\u4e14\u77e5\u9053\u4e86\u5bf9\u65b9\u7684\u4f20\u8f93\u5730\u5740\u540e\uff0c\u90bb\u5c45\u4e4b\u95f4\u5c31\u4f1a\u5f00\u59cb\u5c1d\u8bd5TCP\u4e09\u6b21\u63e1\u624b\uff08\u57fa\u4e8e\u4f20\u8f93\u5730\u5740\uff09\uff0c\u5e76\u4e14\u4ea4\u4e92LDP\u7684\u521d\u59cb\u5316\u62a5\u6587\u3001\u6807\u7b7e\u6620\u5c04\u62a5\u6587\u7b49\uff0c\u8fd9\u4e9b\u62a5\u6587\u90fd\u4f7f\u7528\u53cc\u65b9\u7684\u4f20\u8f93\u5730\u5740\u4f5c\u4e3a\u6e90\u3001\u76ee\u7684IP\u5730\u5740\u3002 \u4f20\u8f93\u5730\u5740\u4f1a\u88ab\u7528\u6765\u4e0e\u90bb\u5c45\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u56e0\u6b64LSR\u5fc5\u987b\u62e5\u6709\u5230\u8fbe\u90bb\u5c45\u7684\u4f20\u8f93\u5730\u5740\u7684\u8def\u7531\u3002 \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u516c\u7f51\u7684LDP\u4f20\u8f93\u5730\u5740\u7b49\u4e8e\u8bbe\u5907\u7684LSR-ID\uff0c\u79c1\u7f51\u7684\u4f20\u8f93\u5730\u5740\u7b49\u4e8e\u63a5\u53e3\u7684\u4e3bIP\u5730\u5740\u3002 \u5728\u63a5\u53e3\u89c6\u56fe\u4e0b\uff0c\u4f7f\u7528mpls ldp transport-address\u547d\u4ee4\uff0c\u53ef\u4ee5\u4fee\u6539\u4f20\u8f93\u5730\u5740\u3002","title":"\u4f20\u8f93\u5730\u5740"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ldp_1","text":"","title":"LDP \u7684\u57fa\u672c\u5de5\u4f5c\u8fc7\u7a0b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#step1","text":"","title":"Step1\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#step2","text":"","title":"Step2\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#step3","text":"","title":"Step3\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#step4","text":"","title":"Step4\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#step5","text":"","title":"Step5\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#step6","text":"","title":"Step6\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#step7","text":"","title":"Step7\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mplsldplsr","text":"LSR\u9996\u5148\u901a\u8fc7\u8fd0\u884cIGP\u534f\u8bae\uff08\u4f8b\u5982OSPF\u3001IS-IS\u7b49\uff09\u6765\u6784\u5efa\u8def\u7531\u8868\u3001FIB\u8868\uff1b LDP\u6839\u636e\u76f8\u5e94\u7684\u6a21\u5f0f\uff0c\u4e3a\u8def\u7531\u8868\u4e2d\u7684\u8def\u7531\u524d\u7f00\uff08FEC\uff09\u5206\u914d\u6807\u7b7e\uff1b LDP\u6839\u636e\u76f8\u5e94\u7684\u6a21\u5f0f\uff0c\u5c06\u81ea\u5df1\u4e3a\u8def\u7531\u524d\u7f00\u5206\u914d\u7684\u6807\u7b7e\uff0c\u901a\u8fc7LDP\u6807\u7b7e\u6620\u5c04\u62a5\u6587\u901a\u544a\u7ed9LDP\u90bb\u5c45\uff1b LSR\u5c06\u81ea\u5df1\u4e3a\u8def\u7531\u524d\u7f00\u5206\u914d\u7684\u6807\u7b7e\uff0c\u4ee5\u53caLDP\u90bb\u5c45\u4e3a\u8be5\u8def\u7531\u524d\u7f00\u901a\u544a\u7684\u6807\u7b7e\u5b58\u50a8\u8d77\u6765\uff0c\u5e76\u5f62\u6210\u5173\u8054\uff1b \u5f53LSR\u8f6c\u53d1\u5230\u8fbe\u76ee\u7684\u7f51\u7edc\u7684\u6807\u7b7e\u62a5\u6587\u65f6\uff0c\u6240\u4f7f\u7528\u7684\u51fa\u7ad9\u6807\u7b7e\u603b\u662f\u4e0b\u6e38LDP\u90bb\u5c45\u6240\u901a\u544a\u7684\u6807\u7b7e\uff0c\u6b64\u5904\u6240\u6307\u7684\u4e0b\u6e38\u90bb\u5c45\uff0c\u662f\u8bbe\u5907\u7684\u8def\u7531\u8868\u4e2d\u5230\u8fbe\u8be5\u76ee\u7684\u7f51\u7edc\u7684\u4e0b\u4e00\u8df3\u8bbe\u5907\u3002","title":"\u5728MPLS\u4e2d\uff0c\u8fd0\u884cLDP\u534f\u8bae\u7684LSR\u7684\u64cd\u4f5c\u5c0f\u7ed3\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#php","text":"PHP\uff08Penultimate Hop Poppoing\uff0c\u6b21\u672b\u8df3\u5f39\u51fa\u6216\u8005\u5012\u6570\u7b2c\u4e8c\u8df3\u5f39\u51fa\uff09\uff0c\u8fd9\u662fMPLS\u7684\u4e00\u4e2a\u57fa\u7840\u6027\u673a\u5236\u3002\u4e0b\u9762\uff0c\u6765\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a \u5728\u4e0a\u56fe\u4e2d\uff0cR3\u6536\u5230\u53d1\u5f801.0.0.0/8\u7684\u6807\u7b7e\u62a5\u6587\u540e\uff0c\u9700\u9996\u5148\u5728ILM\u4e2d\u67e5\u8be2\u6807\u7b7e\u503c\uff0c\u7136\u540e\u6839\u636e\u6307\u793a\u5c06\u6807\u7b7e\u5934\u90e8\u5f39\u51fa\uff0c\u518d\u5230FIB\u8868\u4e2d\u67e5\u8be2IP\u62a5\u6587\u7684\u76ee\u7684IP\u5730\u5740\uff0c\u6700\u540e\u5c06IP\u62a5\u6587\u8f6c\u53d1\u51fa\u53bb\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cR3\u9700\u8981\u6267\u884c\u4e24\u6b21\u67e5\u8be2\u64cd\u4f5c\u3002\u5b9e\u9645\u4e0a\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u8fc7\u7a0b\u6765\u8bf4\uff0c\u662f\u5b58\u5728\u4f18\u5316\u7a7a\u95f4\u7684\u3002 R3\u5982\u679c\u6fc0\u6d3b\u4e86PHP\u7279\u6027\uff0c\u90a3\u4e48\u5f53\u5b83\u4e3a\u672c\u5730\u76f4\u8fde\u8def\u75311.0.0.0/8\u5206\u914d\u6807\u7b7e\u65f6\uff0c\u4f1a\u5206\u914d\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u7b7e\uff0c\u8be5\u6807\u7b7e\u88ab\u79f0\u4e3a\u9690\u5f0f\u7a7a\u6807\u7b7e\uff08Implicit NULL Label\uff09\uff0c\u5176\u503c\u4e3a3\u3002R3\u5c06\u8be5\u6807\u7b7e\u503c\u901a\u544a\u7ed9R2\u3002\u5f53LSR\u8f6c\u53d1\u4e00\u4e2a\u6807\u7b7e\u62a5\u6587\u65f6\uff0c\u5982\u679c\u53d1\u73b0\u76f8\u5e94\u7684\u5165\u7ad9\u6807\u7b7e\u5bf9\u5e94\u7684\u51fa\u7ad9\u6807\u7b7e\u503c\u4e3a3\uff0c\u90a3\u4e48\u8be5LSR\u5c06\u628a\u62a5\u6587\u7684\u6807\u7b7e\u5934\u90e8\u5f39\u51fa\uff0c\u7136\u540e\u5c06\u91cc\u9762\u6240\u5c01\u88c5\u7684\u6570\u636e\u8f6c\u53d1\u7ed9\u4e0b\u6e38LSR\uff0c\u4e5f\u5c31\u662f\u6267\u884cPHP\uff08 Penultimate hop popping\uff0c\u6b21\u672b\u8df3\u5f39\u51fa\uff09\u64cd\u4f5c\u3002 R2\u4f5c\u4e3a\u5230\u8fbe1.0.0.0/8\u7684\u6b21\u672b\u8df3\uff08\u5012\u6570\u7b2c\u4e8c\u8df3\uff09\uff0c\u6536\u5230\u53d1\u5f801.1.1.3\u7684\u6807\u7b7e\u62a5\u6587\u540e\uff0c\u53d1\u73b0\u51fa\u7ad9\u6807\u7b7e\u503c\u4e3a3\uff0c\u4e8e\u662f\u5c06\u6807\u7b7e\u5934\u90e8\u5f39\u51fa\uff0c\u5c06IP\u62a5\u6587\u8f6c\u53d1\u7ed9R3\uff0c\u800cR3\u5219\u4ec5\u9700\u6267\u884c\u4e00\u6b21\u67e5\u8be2\u64cd\u4f5c\uff08\u67e5\u8be2FIB\u8868\uff09\u5373\u53ef\u83b7\u5f97\u76f8\u5e94\u7684\u8f6c\u53d1\u4fe1\u606f\uff0c\u8f6c\u53d1\u6548\u7387\u5f97\u5230\u4e86\u63d0\u5347\u3002 LDP\u5728\u5e27\u6a21\u5f0fFrame Mode\u4e0b\uff08\u73b0\u5728\u57fa\u672c\u90fd\u7528\u5e27\u6a21\u5f0f\u4e86\uff09\uff0cLSR\u4f1a\u4e3a\u672c\u5730\u8def\u7531\u6346\u7ed1\u6807\u7b7e\u503c3\uff0c3\u662f\u4e00\u4e2aLDP\u4fdd\u7559\u7684\u6807\u7b7e\uff0c\u53eb\u505a\u201cimpilict null\u9690\u5f0f\u7a7a\u201d\u6807\u7b7e\u3002 \u5012\u6570\u7b2c\u4e8c\u8df3\u5f39\u51fa\u673a\u5236\uff08PHP\uff09\u6709\u4e24\u79cd\u6807\u7b7e\uff0c\u4e00\u662fimplicit nul\uff08l \u9690\u5f0f\u7a7a\uff09\uff0c\u5728LDP\u4e2d\u6807\u7b7e\u503c\u4e3a3\uff1b\u53e6\u4e00\u4e2a\u662fexplicit null\uff08\u663e\u5f0f\u7a7a\uff09\uff0c\u5728LDP\u4e2d\u6807\u7b7e\u503c\u4e3a0\u3002\u5982\u679c\u6536\u5230LDP\u90bb\u5c45\u53d1\u9001\u6765\u7684\u5173\u4e8e\u67d0\u6761\u8def\u7531\u5206\u914d\u7684\u6807\u7b7e\u503c\u4e3a3\uff0c\u5219\u6211\u53d1\u9001\u524d\u5f80\u8be5\u76ee\u6807\u7f51\u6bb5\u7684\u6570\u636e\u7ed9\u8be5\u90bb\u5c45\u65f6\uff0c\u6211\u4f1a\u5c06\u8be5\u6807\u7b7e\u5f39\u51fa\uff0c\u518d\u5c06\u5185\u5c42\u6570\u636e\u8f6c\u7ed9\u90bb\u5c45\u3002\u800c\u5982\u679c\u90bb\u5c45\u5173\u4e8e\u67d0\u6761\u8def\u7531\u5206\u914d\u7684\u6807\u7b7e\u503c\u4e3a0\uff0c\u90a3\u4e48\u672c\u5730\u5728\u8f6c\u6570\u636e\u7ed9\u90bb\u5c45\u65f6\uff0c\u4f1a\u5e26\u4e0a\u6807\u7b7e\u5934\uff08\u6807\u7b7e\u503c\u4e3a0\u7684\uff09\uff0c\u4e00\u5e76\u53d1\u7ed9\u90bb\u5c45\u3002 \u5728MPLS\u89c6\u56fe\u4e0b\uff0c\u4f7f\u7528\u201c label advertise explicit-null \u201d\u547d\u4ee4\uff0c\u53ef\u4ee5\u8ba9\u8bbe\u5907\u5411\u5012\u6570\u7b2c\u4e8c\u8df3\u5206\u914d\u663e\u5f0f\u7a7a\u6807\u7b7e\uff1b \u201c label advertise implicit-null \u201d\u547d\u4ee4\uff08\u9ed8\u8ba4\u5373\u5f00\u542f\uff09\u5219\u4f1a\u4f7f\u5f97\u8bbe\u5907\u5411\u5012\u6570\u7b2c\u4e8c\u8df3\u5206\u914d\u9690\u5f0f\u7a7a\u6807\u7b7e\u3002\u201c label advertise non-null \u201d\u547d\u4ee4\u5219\u76f8\u5f53\u4e8e\u5173\u95edPHP\u673a\u5236\uff0c\u4f7f\u5f97\u8bbe\u5907\u6b63\u5e38\u5206\u914d\u6807\u7b7e\u800c\u4e0d\u4f7f\u7528\u7a7a\u6807\u7b7e\u3002 MPLS \u7684\u57fa\u7840\u914d\u7f6e","title":"PHP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_283","text":"","title":"\u57fa\u7840\u547d\u4ee4"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#lsr-id","text":"[Huawei] mpls lsr-id x.x.x.x \u914d\u7f6eLSR ID\u662f\u8fdb\u884c\u6240\u6709MPLS\u914d\u7f6e\u7684\u524d\u63d0\uff0cLSR\u6ca1\u6709\u7f3a\u7701\u7684LSR ID\uff0c\u5fc5\u987b\u624b\u5de5\u914d\u7f6e\u3002","title":"\u914d\u7f6e\u8bbe\u5907\u7684LSR ID"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mpls_5","text":"[Huawei] mpls","title":"\u5168\u5c40\u6fc0\u6d3bMPLS"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ldp_2","text":"[Huawei] mpls ldp","title":"\u5168\u5c40\u6fc0\u6d3bLDP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mpls_6","text":"[Huawei-GigabitEthernet2/0/0] mpls","title":"\u5728\u63a5\u53e3\u4e0a\u6fc0\u6d3bMPLS"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ldp_3","text":"[Huawei-GigabitEthernet2/0/0] mpls ldp","title":"\u5728\u63a5\u53e3\u4e0a\u6fc0\u6d3bLDP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#ldptransport-address","text":"[Huawei-GigabitEthernet2/0/0] mpls ldp transport-address intf . \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u516c\u7f51\u7684LDP\u4f20\u8f93\u5730\u5740\u7b49\u4e8e\u8282\u70b9\u7684LSR ID\uff0c\u79c1\u7f51\u7684\u4f20\u8f93\u5730\u5740\u7b49\u4e8e\u63a5\u53e3\u7684\u4e3bIP\u5730\u5740\u3002","title":"\uff08\u53ef\u9009\uff09\u914d\u7f6e\u8bbe\u5907\u7684LDP\u4f20\u8f93\u5730\u5740Transport Address"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#lsp_1","text":"[Huawei-mpls] lsp-trigger { all | host | ip-prefix ip-prefix-name | none } \u7f3a\u7701\u60c5\u51b5\u4e0b\uff0c\u89e6\u53d1\u7b56\u7565\u4e3ahost\uff0c\u537332\u4f4d\u5730\u5740\u7684\u4e3b\u673aIP\u8def\u7531\uff08\u4e0d\u5305\u62ec\u63a5\u53e3\u768432\u4f4d\u5730\u5740\u7684\u4e3b\u673aIP\u8def\u7531\uff09\u89e6\u53d1 \u5efa\u7acbLSP\u3002\u5982\u679c\u89e6\u53d1\u7b56\u7565\u4e3aall\uff0c\u5219\u6240\u6709\u9759\u6001\u8def\u7531\u548cIGP\u8def\u7531\u89e6\u53d1\u5efa\u7acbLSP\u3002BGP\u516c\u7f51\u8def\u7531\u4e0d\u80fd\u89e6\u53d1\u5efa\u7acb LSP\u3002\u5982\u679c\u89e6\u53d1\u7b56\u7565\u4e3aip-prefix\uff0c\u5219\u53ea\u6709\u901a\u8fc7IP\u5730\u5740\u524d\u7f00\u5217\u8868\u8fc7\u6ee4\u7684FEC\u9879\u80fd\u591f\u89e6\u53d1\u5efa\u7acbLSP\u3002\u5982\u679c\u89e6\u53d1\u7b56\u7565\u4e3anone\uff0c\u5219\u4e0d\u89e6\u53d1\u5efa\u7acbLSP","title":"\uff08\u53ef\u9009\uff09\u914d\u7f6eLSP\u5efa\u7acb\u7684\u89e6\u53d1\u7b56\u7565"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_284","text":"\u8bbe\u5907\u4e92\u8054\u5730\u5740\u5982\u56fe\u6240\u793a\uff1b\u6240\u6709\u8bbe\u5907\u5f00\u8bbeLoopback0\u53e3\uff0c\u8be5\u63a5\u53e3IP\u5730\u5740\u4e3ax.x.x.x/32\uff0c\u5176\u4e2dx\u4e3a\u8bbe\u5907\u7f16\u53f7\u3002 Loopback0\u7684IP\u5730\u5740\u4f5c\u4e3aOSPF RouterID\u4ee5\u53caLSR ID\u3001LDP\u4f20\u8f93\u5730\u5740\u3002 R1\u3001R2\u3001R3\u3001R4\u8fd0\u884cOSPF\uff0c\u901a\u544a\u76f4\u8fde\u63a5\u53e3\u53caLoopback0\u3002 \u6240\u6709\u8bbe\u5907\u6fc0\u6d3bMPLS\uff0c\u57fa\u4e8e\u76f4\u8fde\u5efa\u7acbLDP\u90bb\u5c45\uff0c\u89c2\u5bdf\u6807\u7b7e\u7684\u5206\u53d1\u60c5\u51b5\u3002 \u89c2\u5bdf1.1.1.1\u8bbf\u95ee4.4.4.4\u6570\u636e\u5305\uff0c\u5206\u6790\u6570\u636e\u5305\u7a7f\u8d8aMPLS\u7f51\u7edc\u7684\u8fc7\u7a0b\u3002 R1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R3\u7684\u914d\u7f6e\u5982\u4e0b\uff1a R4\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u6211\u4eec\u6765\u505a\u4e00\u4e9b\u67e5\u770b\u548c\u9a8c\u8bc1\uff1a \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fR1\u7684LDP\u90bb\u5c45\u8868\uff0c\u4ece\u8868\u4e2d\u53ef\u4ee5\u770b\u51faR1\u5df2\u7ecf\u53d1\u73b0\u4e86\u4e00\u4e2aLDP\u90bb\u5c45\uff0c\u90a3\u5c31\u662fR2\u3002 \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fLDP\u4f1a\u8bdd\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u90bb\u5c45\u7684\u72b6\u6001\u5fc5\u987b\u4e3aOperational\u624d\u662f\u6700\u7ec8\u7684\u7a33\u6001\uff0c\u53e6\u5916\u4eceTCP\u8fde\u63a51.1.1.1 \\< 2.2.2.2\u53ef\u4ee5\u9a8c\u8bc1\u4e00\u70b9\uff0cLDP\u7684\u4f1a\u8bdd\u5efa\u7acb\u662f\u7531\u4f20\u8f93\u5730\u5740\u5927\u7684\u4e00\u65b9\u53d1\u8d77\u7684\u3002 \u4ee5\u4e0a\u8f93\u51fa\u7684\u662fR1\u7684\u6807\u7b7e\u8f6c\u53d1\u5e93\uff0c\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u5efa\u7acb\u597d\u7684LSP\u3002 \u5b9e\u9645\u4e0a\uff0c\u5f53\u6211\u4eec\u518dR1\u3001R2\u3001R3\u3001R4\u4e0a\u8fd0\u884cOSPF\u540e\uff0c\u5168\u7f51\u7684\u8def\u7531\u5df2\u7ecf\u88ab\u6253\u901a\uff0c\u4e5f\u5c31\u662f\u6bcf\u53f0\u8def\u7531\u5668\u90fd\u62e5\u6709\u5168\u7f51\u7684\u8def\u7531\uff0c\u5176\u4e2d\u5305\u62ec\u4e92\u8054\u7f51\u6bb5\u7684\u8def\u7531\uff0c\u4ee5\u53ca\u5404\u8bbe\u5907\u7684Loopback\u8def\u7531\u3002\u968f\u540e\u6211\u4eec\u6fc0\u6d3b\u5404\u8bbe\u5907\u7684MPLS\u548cLDP\uff0c \u6bcf\u53f0\u8bbe\u5907\u4f1a\u57fa\u4e8e\u81ea\u5df1\u7684\u8def\u7531\u8868\u4e2d\u7684\u8def\u7531\u524d\u7f00\u8fdb\u884c\u6807\u7b7e\u6346\u7ed1\uff0c\u5e76\u4e14\u5c06\u4e3a\u8def\u7531\u524d\u7f00\uff08FEC\uff09\u6240\u6346\u7ed1\u7684\u6807\u7b7e\u5206\u53d1\u7ed9\u81ea\u5df1\u7684LDP\u90bb\u5c45\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5728\u6211\u53f8\u7684\u8bbe\u5907\u4e0a\uff0c\u4ec5\u4e3a/32\u7684\u4e3b\u673a\u8def\u7531\u5206\u53d1\u6807\u7b7e\u3002 \u73b0\u5728\uff0c\u6765\u6d4b\u8bd5\u4e00\u4e0b\uff0c\u4eceR1\u53bbtracert 4.4.4.4\uff1a \u4ecetracert\u7684\u7ed3\u679c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6570\u636e\u5305\u884c\u8d70\u7684\u8def\u5f84\uff0c\u4ee5\u53ca\u88ab\u538b\u5165\u7684\u6807\u7b7e\u3002 \u62a5\u6587\u7684\u8f6c\u53d1\u8fc7\u7a0b\u5b9e\u9645\u4e0a\u7c7b\u4f3c\u4e0b\u9762\u8fd9\u6837\uff08\u8bfb\u8005\u5728\u5b9e\u9a8c\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u4f1a\u53d1\u73b0\u5b9e\u9645\u7684\u6807\u7b7e\u503c\u4e0e\u672c\u6587\u6863\u7684\u4e0d\u76f8\u540c\uff0c\u8fd9\u662f\u6b63\u5e38\u7684\uff09\uff1a MPLS VPN \u672c\u6587\u6863\u63cf\u8ff0\u7684MPLS VPN\u662f\u4e09\u5c42\u7684BGP/MPLS IP VPN\u3002 BGP/MPLS IP VPN\u662f\u4e00\u79cdL3VPN\uff08Layer 3 Virtual Private Network\uff09\u3002\u5b83\u4f7f\u7528BGP\u5728\u670d\u52a1\u63d0\u4f9b\u5546\u9aa8\u5e72\u7f51\u4e0a\u53d1\u5e03VPN\u8def\u7531\uff0c\u4f7f\u7528MPLS\u5728\u670d\u52a1\u63d0\u4f9b\u5546\u9aa8\u5e72\u7f51\u4e0a\u8f6c\u53d1VPN\u62a5\u6587\u3002\u8fd9\u91cc\u7684IP\u662f\u6307VPN\u627f\u8f7d\u7684\u662fIP\u62a5\u6587\u3002 BGP/MPLS IP VPN\u57fa\u4e8e\u5bf9\u7b49\u4f53\u6a21\u578b\uff0c\u8fd9\u79cd\u6a21\u578b\u4f7f\u5f97\u670d\u52a1\u63d0\u4f9b\u5546\u548c\u7528\u6237\u53ef\u4ee5\u4ea4\u6362\u8def\u7531\uff0c\u670d\u52a1\u63d0\u4f9b\u5546\u8f6c\u53d1\u7528\u6237\u7ad9\u70b9\u95f4\u7684\u6570\u636e\u800c\u4e0d\u9700\u8981\u7528\u6237\u7684\u53c2\u4e0e\u3002\u76f8\u6bd4\u8f83\u4f20\u7edf\u7684VPN\uff0cBGP/MPLS IP VPN\u66f4\u5bb9\u6613\u6269\u5c55\u548c\u7ba1\u7406\u3002\u65b0\u589e\u4e00\u4e2a\u7ad9\u70b9\u65f6\uff0c\u53ea\u9700\u8981\u4fee\u6539\u63d0\u4f9b\u8be5\u7ad9\u70b9\u4e1a\u52a1\u7684\u8fb9\u7f18\u8282\u70b9\u7684\u914d\u7f6e\u3002 BGP/MPLS IP VPN\u652f\u6301\u5730\u5740\u7a7a\u95f4\u91cd\u53e0\u3001\u652f\u6301\u91cd\u53e0VPN\u3001\u7ec4\u7f51\u65b9\u5f0f\u7075\u6d3b\u3001\u53ef\u6269\u5c55\u6027\u597d\uff0c\u5e76\u80fd\u591f\u65b9\u4fbf\u5730\u652f\u6301MPLS QoS\u548cMPLS TE\uff0c\u6210\u4e3a\u5728IP\u7f51\u7edc\u8fd0\u8425\u5546\u63d0\u4f9b\u589e\u503c\u4e1a\u52a1\u7684\u91cd\u8981\u624b\u6bb5\uff0c\u56e0\u6b64\u5f97\u5230\u8d8a\u6765\u8d8a\u591a\u7684\u5e94\u7528\u3002","title":"\u57fa\u7840\u5b9e\u9a8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mpls-vpn","text":"**CE\uff08Customer Edge\uff09\uff1a**\u5ba2\u6237\u7f51\u7edc\u8fb9\u7f18\u8bbe\u5907\uff0c\u8be5\u8bbe\u5907\u5c5e\u4e8e\u5ba2\u6237\uff0c\u5b83\u9664\u4e86\u8fde\u63a5\u7740\u5ba2\u6237\u7f51\u7edc\uff0c\u8fd8\u6709\u63a5\u53e3\u76f4\u63a5\u4e0eMPLS VPN\u7f51\u7edc\u76f8\u8fde\u3002CE\u8bbe\u5907\u53ef\u4ee5\u662f\u8def\u7531\u5668\u6216\u4ea4\u6362\u673a\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u53f0\u4e3b\u673a\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0cCE\u201c\u611f\u77e5\u201d\u4e0d\u5230VPN\u7684\u5b58\u5728\uff0c\u4e5f\u4e0d\u9700\u8981\u652f\u6301MPLS\u3002 **PE\uff08Provider Edge\uff09\uff1a**\u662f\u670d\u52a1\u63d0\u4f9b\u5546\u7f51\u7edc\u7684\u8fb9\u7f18\u8bbe\u5907\uff0c\u4e0eCE\u76f4\u63a5\u76f8\u8fde\u3002\u5728MPLS\u7f51\u7edc\u4e2d\uff0c\u5bf9VPN\u7684\u6240\u6709\u5904\u7406\u90fd\u53d1\u751f\u5728PE\u4e0a\uff0c\u5bf9PE\u6027\u80fd\u8981\u6c42\u8f83\u9ad8\u3002 **P\uff08Provider\uff09\uff1a**\u670d\u52a1\u63d0\u4f9b\u5546\u7f51\u7edc\u4e2d\u7684\u9aa8\u5e72\u8bbe\u5907\uff0c\u4e0d\u4e0eCE\u76f4\u63a5\u76f8\u8fde\u3002P\u8bbe\u5907\u53ea\u9700\u8981\u5177\u5907\u57fa\u672cMPLS\u8f6c\u53d1\u80fd\u529b\uff0c\u4e0d\u7ef4\u62a4VPN\u4fe1\u606f\uff0c\u4e5f\u4e0d\u7ef4\u62a4\u5ba2\u6237VPN\u8def\u7531\u3002","title":"MPLS VPN \u7684\u67b6\u6784"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#mpls-vpn_1","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u7f51\u7edc\u4e2d\uff0c\u4e2d\u95f4\u662f\u8fd0\u8425\u5546\u642d\u5efa\u7684\u201cMPLS VPN Backbone\u201d\u4e5f\u5c31\u662fMPLS VPN\u9aa8\u5e72\u7f51\u7edc\uff0c\u8fd9\u4e2a\u7f51\u7edc\u9762\u5411\u5ba2\u6237\u63d0\u4f9bVPN\u4e1a\u52a1\uff0c\u4f7f\u5f97\u4e0d\u540c\u7684\u5ba2\u6237\u7684\u8def\u7531\u3001\u6570\u636e\u90fd\u80fd\u591f\u901a\u8fc7\u8fd9\u4e2a\u516c\u5171\u7684\u7f51\u7edc\u8fdb\u884c\u4f20\u8f93\uff0c\u800c\u4e14\u4e92\u76f8\u4e0d\u5e72\u6270\u3002\u5ba2\u6237\u4e4b\u95f4\u7684\u8def\u7531\u53ca\u6570\u636e\u662f\u5b8c\u5168\u9694\u79bb\u7684\uff0c\u5373\u4f7f\u4ed6\u4eec\u901a\u8fc7\u540c\u4e00\u5f20\u8fd0\u8425\u5546\u7684\u7f51\u7edc\u8fdb\u884c\u627f\u8f7d\u3002\u73b0\u5728\u6211\u4eec\u6765\u770b\u770bMPLS VPN\u7a76\u7adf\u662f\u600e\u4e48\u4e00\u56de\u4e8b\u3002 \u4e0a\u56fe\u4e2d\uff0c\u6211\u4eec\u62ff\u4e86\u4e24\u4e2a\u5ba2\u6237\u505a\u793a\u4f8b\uff1a\u5ba2\u6237A\u53ca\u5ba2\u6237B\uff0c\u4ed6\u4eec\u5404\u81ea\u6709\u4e24\u4e2a\u7ad9\u70b9\u3002\u73b0\u5728\u8981\u6c42\u5ba2\u6237A\u7684\u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u80fd\u591f\u4e92\u901a\uff0c\u5ba2\u6237B\u7684\u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u80fd\u591f\u4e92\u901a\uff0c\u800c\u5ba2\u6237A\u3001B\u4e4b\u95f4\u662f\u5b8c\u5168\u9694\u79bb\u7684\u3002\u518d\u8005\uff0c\u540c\u4e00\u4e2a\u5ba2\u6237\u7684\u4e24\u7ad9\u70b9\u4e4b\u95f4\uff0c\u8981\u80fd\u591f\u52a8\u6001\u7684\u4ea4\u4e92\u8def\u7531\u4fe1\u606f\uff0c\u4e5f\u5c31\u662f\u8bf4\u5ba2\u6237A\u7684\u7ad9\u70b91\u7684CE\u8def\u7531\u5668\u8981\u80fd\u591f\u52a8\u6001\u7684\u5b66\u4e60\u5230\u7ad9\u70b92\u5185\u7684\u8def\u7531\u3002 \u9996\u5148\u5ba2\u6237A\u7ad9\u70b91\u7684CE\u8def\u7531\u5668\u53ca\u5ba2\u6237B\u7ad9\u70b91\u7684CE\u8def\u7531\u5668\u4e0ePE\u8def\u7531\u5668\u5747\u8fd0\u884c\u8def\u7531\u534f\u8bae\uff08\u4e5f\u5c31\u662fPE-CE\u4e4b\u95f4\u7684\u8def\u7531\u534f\u8bae\uff09\uff0c\u4f8b\u5982BGP\u6216\u8005OSPF\uff0c\u6216\u8005\u5e72\u8106\u9759\u6001\u8def\u7531\u90fd\u884c\uff0c\u8fd9\u4e48\u505a\u7684\u76ee\u7684\u662f\u628a\u672c\u5730\u7ad9\u70b9\u7684\u8def\u7531\u4ea4\u7ed9PE1\uff0c \u7136\u540e\u8ba9PE1\u5e2e\u5fd9\u4f20\u9012\u7ed9PE2\uff0c\u518d\u7531PE2\u4ea4\u7ed9\u5ba2\u6237A\u7ad9\u70b92\u7684CE\u8def\u7531\u5668\uff0c\u4ece\u800c\u5c06\u8def\u7531\u6253\u901a\u3002 \u73b0\u5728\u7b2c\u4e00\u4e2a\u95ee\u9898\u6765\u4e86\u3002PE\u8def\u7531\u5668\u5982\u4f55\u533a\u5206\u4e0d\u540c\u5ba2\u6237\u7684\u8def\u7531\u5462\uff1f\u800c\u4e14\u4ece\u56fe\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u5ba2\u6237A\u7684\u7ad9\u70b91\u53ca\u5ba2\u6237B\u7684\u7ad9\u70b91\u5730\u5740\u7a7a\u95f4\u662f\u91cd\u53e0\u7684\uff0c\u90fd\u662f10.1.1.0/24\uff0cPE\u662f\u5982\u4f55\u533a\u5206\u7684\uff1f \u8fd9\u5c31\u8981\u63d0\u5230MPLS VPN\u7684\u4e00\u4e2a\u7ec4\u4ef6\uff1aVRF\uff08VPN Routing & Forwarding Instance\uff09\uff0c\u865a\u62df\u8def\u7531\u53ca\u8f6c\u53d1\u5b9e\u4f8b\uff0c \u5728\u6211\u53f8\u7684\u5e73\u53f0\u4e0a\u662fVPN-Instance\u3002\u6240\u8c13\u7684VPN\u5b9e\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\u662f\u201c\u4e00\u53f0\u865a\u62df\u8def\u7531\u5668\u201d\uff0c\u901a\u8fc7\u5728PE1\u4e0a\u521b\u5efa\u4e24\u4e2aVPN\u5b9e\u4f8b\uff0c\u7528\u4e8e\u5206\u522b\u9762\u5411\u5ba2\u62371\u53ca\u5ba2\u62372\u63d0\u4f9b\u670d\u52a1\u3002\u5728PE1\u521b\u5efa\u7684\u8fd9\u4e24\u4e2aVPN\u5b9e\u4f8b\u76f8\u5f53\u4e8e\u4e24 \u53f0\u865a\u62df\u8def\u7531\u5668\uff0c\u5b83\u4eec\u5404\u81ea\u6709\u5b8c\u5168\u72ec\u7acb\u7684\u8def\u7531\u8868\u3001\u8f6c\u53d1\u8868\u3001\u8def\u7531\u534f\u8bae\u8fdb\u7a0b\u3001\u63a5\u53e3\u3001\u7b49\u7b49\uff0c\u7531\u4e8e\u662f\u5b8c\u5168\u72ec\u7acb\u7684\u4e24\u53f0\u201c\u865a\u62df\u8def\u7531\u5668\u201d\uff0c\u56e0\u6b64\u5373\u4f7f\u4ece\u4e24\u4e2a\u4e0d\u540c\u7684\u5ba2\u6237\u5b66\u4e60\u5230\u540c\u4e00\u4e2a\u7f51\u6bb5\u7684\u8def\u7531\u4e5f\u4e0d\u7528\u62c5\u5fc3\u51b2\u7a81\u7684\u95ee\u9898\u3002 \u73b0\u5728PE1\u4e0a\u521b\u5efa\u4e86\u4e24\u4e2aVPN\u5b9e\u4f8b\uff0c\u7528\u4e8e\u5206\u522b\u548c\u5ba2\u62371\u53ca\u5ba2\u62372\u4ea4\u4e92VPN\u8def\u7531\uff08\u5ba2\u6237\u7684\u8def\u7531\uff09\uff0c\u90a3\u4e48\u4e3a\u4e86\u5c06\u8def\u7531\u4f20\u9012\u5230PE2\u6211\u4eec\u8981\u8003\u8651\u51e0\u4e2a\u95ee\u9898\uff1a 1\u3001 \u7528\u4ec0\u4e48\u8def\u7531\u534f\u8bae\u6765\u201c\u642c\u8fd0\u201d\u8fd9\u4e9b\u5ba2\u6237\u7684VPN\u8def\u7531\uff08\u5c06\u5b83\u4eec\u4ecePE1\u642c\u8fd0\u5230PE2\uff09\uff1fPE\u80af\u5b9a\u662f\u9762\u5411\u5927\u91cf\u5ba2\u6237\u7684\uff0c\u56e0\u6b64\u8def\u7531\u524d\u7f00\u7684\u6570\u91cf\u80af\u5b9a\u975e\u5e38\u5e9e\u5927\u3002 2\u3001 MPLS VPN Backbone\u7684P\u8def\u7531\u5668\u4e3b\u8981\u7684\u529f\u80fd\u662f\u9ad8\u901f\u5730\u8f6c\u53d1\u6570\u636e\uff0c\u5982\u679c\u8981\u5b83\u4eec\u4e5f\u4e00\u8d77\u7ef4\u62a4\u5ba2\u6237\u7684\u8def\u7531\u80af\u5b9a\u4f1a\u589e\u52a0\u8d1f\u62c5\uff0c\u5982\u4f55\u89c4\u907f\u8fd9\u4e2a\u95ee\u9898\uff1f \u4f60\u53ef\u80fd\u5df2\u7ecf\u60f3\u5230\uff0c\u6709\u4e00\u4e2a\u534f\u8bae\u80fd\u591f\u80dc\u4efb\u8fd9\u4e2a\u5de5\u4f5c\uff0c\u90a3\u5c31\u662fBGP\uff0cBGP\u80fd\u591f\u627f\u8f7d\u5927\u91cf\u7684\u8def\u7531\u524d\u7f00\uff0c\u662f\u4e00\u4e2a\u5728\u9aa8\u5e72\u7f51\u7edc\u4e2d\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684\u8def\u7531\u534f\u8bae\uff0c\u800c\u4e14\u5b83\u5177\u6709\u4e30\u5bcc\u7684\u8def\u5f84\u5c5e\u6027\u548c\u8def\u7531\u7b56\u7565\u5de5\u5177\uff0c\u4f7f\u5f97\u7f51\u7edc\u7684\u90e8\u7f72\u53d8\u5f97\u975e\u5e38\u7075\u6d3b\u548c\u5f39\u6027\u3002\u53e6\u5916\uff0cBGP\u8fd8\u6709\u4e00\u4e2a\u975e\u5e38\u7a81\u51fa\u7684\u4f18\u52bf\uff0c\u90a3\u5c31\u662f\u5b83\u662f\u57fa\u4e8eTCP\u5de5\u4f5c\u7684\uff0c\u5b83\u4e0d\u7528\u50cfOSPF\u90a3\u6837\u8981\u6c42\u90bb\u5c45\u5fc5\u987b\u76f4\u8fde\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5728PE1\u53caPE2\u4e4b\u95f4\u6765\u5efa\u7acbiBGP\u7684\u90bb\u5c45\u5173\u7cfb\uff0c\u8fd9\u6837\u5ba2\u6237\u7684\u8def\u7531\u5c31\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7BGP\u4f20\u9012\uff0c\u800cP\u8def\u7531\u5668\u5219\u65e0\u9700\u8fd0\u884cBGP\uff0c\u4e5f\u65e0\u9700\u7ef4\u62a4\u5ba2\u6237\u7684\u8def\u7531\u3002 \u5f53\u7136\u4e3a\u4e86\u8ba9PE1\u53caPE2\u80fd\u591f\u5efa\u7acb\u8d77iBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u6211\u4eec\u8981\u6253\u901aMPLS Backbone\u5185\u7684\u8def\u7531\uff08\u6ce8\u610f\uff0c\u53ea\u662f\u9aa8\u5e72\u7f51\u5185\u90e8\uff0c\u4e0d\u5305\u542b\u4efb\u4f55\u5ba2\u6237\u7684\u8def\u7531\uff09\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5728Backbone\u5185\u7684PE\u53caP\u8def\u7531\u5668\u4e0a\u8fd0\u884c\u4e00\u4e2aIGP\uff0c\u4f8b\u5982OSPF \u6216\u8005ISIS\uff0c\u4f7f\u5f97\u9aa8\u5e72\u7f51\u7edc\u5185\u90e8\u7684\u8def\u7531\u80fd\u591f\u6253\u901a\uff0c\u4e3a\u540e\u9762\u7684\u5de5\u4f5c\u505a\u94fa\u57ab\u3002 \u73b0\u5728PE1\u53caPE2\u4e4b\u95f4\u6709\u4e86BGP\u8fde\u63a5\uff0cPE1\u901a\u8fc7PE-CE\u95f4\u7684\u8def\u7531\u534f\u8bae\u6240\u5b66\u4e60\u5230\u7684\u5ba2\u6237A\u53ca\u5ba2\u6237B\u7684\u8def\u7531\u5c31\u80fd\u591f \u901a\u8fc7BGP\u4f20\u9012\u7ed9PE2\uff08\u53cd\u4e4b\u4ea6\u7136\uff09\uff0c\u4f46\u662f\u95ee\u9898\u53c8\u6765\u4e86\uff0c\u5ba2\u6237A\u7684\u7ad9\u70b91\u53ca\u5ba2\u6237B\u7684\u7ad9\u70b91\u4f7f\u7528\u91cd\u53e0\u7684\u5730\u5740\u7a7a\u95f4\uff0c \u90fd\u662f10.1.1.0/24\uff0cPE1\u4e0a\u867d\u7136\u6709VPN\u5b9e\u4f8b\u7528\u4e8e\u533a\u5206\uff0c\u4f46\u662f\u73b0\u5728\u8981\u628a\u8fd9\u4e9b\u8def\u7531\u901a\u901a\u4f20\u9012\u7ed9PE2\uff0c\u90a3\u4e48\u5982\u4f55\u4fdd\u8bc1\u8fd9\u4e9b\u8def\u7531\u5728MPLS VPN Backbone\u4e2d\u4f20\u9012\u65f6\u7684\u552f\u4e00\u6027\u5462\uff1f\u5982\u4f55\u89c4\u907f\u4ed6\u4eec\u7684\u91cd\u53e0\u95ee\u9898\uff1f\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u4e3a\u8def\u7531 10.1.1.0/24\u589e\u52a0\u4e00\u4e2a\u201c\u524d\u7f00\u201d\uff0c\u8fd9\u4e2a\u524d\u7f00\u79f0\u4e3aRD\uff08Route Distinguisher\uff09\uff0cRD\u503c\u7684\u957f\u5ea6\u4e3a64bit\uff0c\u8868\u73b0\u5f62\u5f0f\u901a\u5e38\u4e3a\u7c7b\u4f3c123\uff1a11\u8fd9\u6837\uff0c\u4e5f\u5c31\u662fAS\uff1aNN\u7684\u5f62\u5f0f\u3002 \u6211\u4eec\u7ed9PE\u4e0a\u7684\u6bcf\u4e00\u4e2aVPN\u5b9e\u4f8b\u5747\u8bbe\u7f6e\u4e00\u4e2a\u552f\u4e00\u7684RD\u503c\uff0c\u4f8b\u5982\u4e3a\u5ba2\u62371\u8bbe\u7f6e\u4e00\u4e2a6812\uff1a1\uff0c\u4e3a\u5ba2\u62372\u8bbe\u7f6e\u4e00\u4e2a 6812\uff1a2\uff0c\u7136\u540e\u5f53\u8981\u628a\u5ba2\u62371\u7684\u8def\u7531\u653e\u8fdbBGP\u642c\u8fd0\u7ed9PE2\u65f6\uff0c\u5c06IPv4\u7684\u8def\u7531\u524d\u7f0010.1.1.0/24\u524d\u9762\u589e\u52a0\u8be5VPN \u7684RD\u503c\uff0c\u5f97\u52306812\uff1a1\uff1a10.1.1.0/24\uff0c\u8fd9\u6837\u5c31\u6784\u6210\u4e86\u4e00\u4e2a64+32bit\u4e5f\u5c31\u662f96bit\u7684\u65b0\u524d\u7f00\uff0c\u8fd9\u4e2a\u524d\u7f00\u6211\u4eec\u79f0\u4e4b\u4e3aVPNv4\u524d\u7f00\uff0c\u5ba2\u6237B\u7684\u7ad9\u70b91\u8def\u7531\u5728BGP\u4e2d\u4f20\u9012\u65f6\u5c31\u53d8\u6210\u4e866812\uff1a2\uff1a10.1.1.0/24\uff0c\u5982\u6b64\u5219\u53ef\u89e3\u51b3\u5730\u5740\u91cd\u53e0\u7684\u95ee\u9898\uff0c\u4fdd\u8bc1\u6240\u6709\u5ba2\u6237\u8def\u7531\u7684\u552f\u4e00\u6027\u3002 \u4f20\u7edf\u7684BGP\u53ea\u80fd\u591f\u8fd0\u8f7d10.1.1.0/24\u8fd9\u6837\u7684IPv4\u8def\u7531\u524d\u7f00\uff0c\u73b0\u5728\u6211\u4eec\u8981\u8ba9BGP\u8fd0\u8f7d6812\uff1a1\uff1a10.1.1.0/24\u8fd9\u6837\u7684VPNv4\u524d\u7f00\uff0c\u5c31\u9700\u8981\u5bf9BGP\u8fdb\u884c\u6269\u5c55\u4e86\uff0c\u6269\u5c55\u4ee5\u540e\u7684BGP\u6211\u4eec\u79f0\u4e4b\u4e3aMP-BGP\uff0c\u4e5f\u5c31\u662fMulti-Protocol BGP\uff0c\u7ffb\u8bd1\u4e3a\u591a\u534f\u8baeBGP\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u73b0\u5728\u5ba2\u6237A\u53ca\u5ba2\u6237B\u7684\u8def\u7531\u7ec8\u4e8e\u4f20\u9012\u5230\u4e86PE2\u4e0a\uff0c\u63a5\u4e0b\u53bbPE2\u5c31\u8981\u628a\u5ba2\u6237A\u7ad9\u70b91\u7684\u8def\u7531\u4f20\u9012\u7ed9\u5ba2\u6237A\u7ad9\u70b92\u7684 CE\u8def\u7531\u5668\u3001\u628a\u5ba2\u6237B\u7ad9\u70b91\u7684\u8def\u7531\u4f20\u9012\u7ed9\u5ba2\u6237B\u7ad9\u70b92\u7684CE\u8def\u7531\u5668\u3002\u95ee\u9898\u53c8\u6765\u4e86\uff0cPE2\u5982\u4f55\u77e5\u9053\u8be5\u628a\u54ea\u6761VPN \u8def\u7531\u4ea4\u7ed9\u54ea\u4e2a\u5ba2\u6237\u7684CE\u5462\uff1f\u663e\u7136\u5728PE2\u4e0a\u4e3a\u4e86\u533a\u5206\u5b83\u81ea\u5df1\u6240\u76f4\u8fde\u7684\u4e0d\u540c\u5ba2\u6237\uff0c\u4e5f\u9700\u8981\u521b\u5efaVPN\u5b9e\u4f8b\uff0c\u4f46\u662f\u4ecePE1\u6536\u5230\u7684\u8fd9\u4e48\u4e00\u5927\u5768\u7684\u8def\u7531\u524d\u7f00\uff0c\u54ea\u4e9b\u662f\u8981\u653e\u8fdb\u54ea\u4e00\u4e2aVPN\u5b9e\u4f8b\u7684\u73b0\u5728\u8fd8\u662f\u65e0\u4ece\u5f97\u77e5\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u65b0\u7684\u6807\u8bb0\u6765\u5e2e\u52a9PE\uff0c\u8fd9\u5c31\u662fRT\uff08Route Target\uff09\u503c\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff0cPE1\u5728\u5c06\u5ba2\u6237A\u7ad9\u70b91\u7684\u8def\u7531\u901a\u8fc7MP-BGP\u4f20\u9012\u7ed9PE2\u4e4b\u524d\u4e3a\u8def\u7531\u6253\u4e0a\u201c\u6807\u8bb0\u201d\uff0c\u4e5f\u5c31\u662fRT\u503c 6812\uff1a1\uff0c\u800c\u4e3a\u5ba2\u6237B\u7ad9\u70b91\u7684\u8def\u7531\u6253\u4e0a\u6807\u8bb06812\uff1a2\uff0c\u8fd9\u4e9bRT\u7684\u6807\u8bb0\u5b9e\u9645\u4e0a\u662f\u201c\u7c98\u8d34\u201d\u7740VPNv4\u524d\u7f00\u4e00\u5757\u513f\u4f20\u7ed9PE2\u7684\uff0c\u5176\u5b9e\u5b83\u4eec\u662f\u4ee5BGP\u7684\u6269\u5c55Community\u7684\u5f62\u5f0f\u6765\u5b58\u50a8\u7684\u3002\u5982\u6b64\u4e00\u6765\u8def\u7531\u5230\u4e86PE2\u540e\uff0cPE2\u5c31\u80fd\u591f\u6839\u636eRT\u503c\u6765\u5c06\u4e0d\u540c\u7684\u8def\u7531\u5bfc\u5165\u5230\u5bf9\u5e94\u7684\u672c\u5730VPN\u5b9e\u4f8b\u4e2d\u3002 \u7ec8\u4e8e\uff0c\u8def\u7531\u5343\u8f9b\u4e07\u82e6\u88ab\u4f20\u9012\u5230\u4e86\u8fdc\u7aef\u7ad9\u70b9\u7684CE\u8def\u7531\u5668\u4e0a\u3002\u4f46\u662f\uff0c\u4e8b\u60c5\u8fd8\u6ca1\u6709\u7ed3\u675f\u3002\u8bbe\u60f3\u4e00\u4e0b\uff0c\u867d\u7136\u5ba2\u6237A\u7684\u7ad9\u70b92\u7684CE\u8def\u7531\u5668\u5df2\u7ecf\u5b66\u4e60\u5230\u7ad9\u70b91\u768410.1.1.0/24\u8def\u7531\uff0c\u73b0\u5728\u5b83\u53d1\u9001\u6570\u636e\u5230\u7ad9\u70b91\uff0c\u8fd9\u4e2aIP\u6570\u636e\u5305\u5148\u662f\u9001\u5230 PE2\uff0cPE2\u901a\u8fc7VPN\u8def\u7531\u8868\u7684\u67e5\u627e\u627e\u5230\u5339\u914d\u7684\u6761\u76ee\u6765\u81eaBGP\u90a3\u4e48\u63a5\u4e0b\u53bb\u5462\uff1f\u76f4\u63a5\u628aIP\u6570\u636e\u5305\u9001\u51fa\u53bb\u4e48\uff1f\u80af\u5b9a\u662f\u6709\u95ee\u9898\u7684\uff0c\u56e0\u4e3aIP\u6570\u636e\u5305\u5982\u679c\u76f4\u63a5\u9001\u51fa\u53bb\uff0cP\u8def\u7531\u5668\u63a5\u6536\u4e86\u94c1\u5b9a\u5c31\u4e22\u5305\u4e86\uff0c\u56e0\u4e3a\u5b83\u5e76\u6ca1\u6709\u8fd0\u884cBGP\u4e5f\u6ca1\u6709VPN\u5ba2\u6237\u7684\u8def\u7531\uff0c\u5b83\u53ea\u6709MPLS Backbone\u5185\u7684\u8def\u7531\uff0c\u8fd9\u5c31\u51fa\u73b0\u4e86\u8def\u7531\u9ed1\u6d1e\u3002\u600e\u4e48\u529e\uff0c\u5f97\u4e3a\u8fd9\u4e2aIP\u6570\u636e\u5305\u7a7f\u4e0a\u4e00\u4ef6\u9a6c\u7532\uff0c\u8fd9\u4e2a\u9a6c\u7532\u6574\u4e2aMPLS Backbone\u90fd\u80fd\u8ba4\u8bc6\uff0c\u800c\u4e14\u80fd\u5e2e\u52a9\u6211\u4eec\u628a\u8fd9\u7a7f\u4e86\u9a6c\u7532\u7684\u6570\u636e\u5305\u4ecePE2\u9001\u5230PE1\u53bb\uff0c\u8fd9\u5c31\u662fMPLS\u6807\u7b7e\u3002\u5f53PE2\u628a\u6765\u81eaVPN\u5ba2\u6237\u7684IP\u6570\u636e\u5305\u9001\u5230MPLS VPN Backbone\u4e4b\u524d\uff0c\u8981\u4e3a\u6570\u636e\u5305\u538b\u5165\u4e00\u5c42\u6807\u7b7e\uff1a \u8fd9\u5c42\u6807\u7b7e\u663e\u7136\u662fP\u8def\u7531\u5668\u7ed9\u5206\u53d1\u7684\uff0c\u4e3a\u8c01\u5206\u53d1\u7684? \u4e3aPE1\u8def\u7531\u5668\u7684Loopback\u8def\u7531\u5206\u53d1\u7684\u6807\u7b7e\uff0c\u800c\u8fd9\u4e2a Loopback\u5730\u5740\uff0c\u5c31\u662fPE2\u4e0a\u53bb\u5f80\u76ee\u6807\u7f51\u6bb5\u8def\u7531\uff08\u5ba2\u6237A\u7684\u7ad9\u70b91\uff09\u7684\u4e0b\u4e00\u8df3\u5730\u5740\u3002PE2\u4e3a\u6570\u636e\u5305\u538b\u5165\u6807\u7b7e\u540e\uff0c \u9001\u5230P\u8def\u7531\u5668\uff0cP\u8def\u7531\u5668\u6cbf\u7740\u5efa\u7acb\u597d\u7684LSP\u5c06\u6807\u7b7e\u5305\u9001\u5230PE1\u8def\u7531\u5668\u3002\u5f53\u7136\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u6574\u4e2aMPLS VPN Backbone\u80fd\u591f\u5efa\u7acbLSP\uff0c\u8981\u5728\u8bbe\u5907\u4e0a\u90fd\u6fc0\u6d3bMPLS\u548cLDP\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u79f0\u4e4b\u4e3aMPLS VPN\u3002 \u4f46\u662f\uff0c\u6807\u7b7e\u5305\u662f\u5230\u4e86PE1\uff0cPE1\u8be5\u5982\u4f55\u5904\u7406\u91cc\u5934\u7684\u6570\u636e\u5462\uff1f\u8fd9\u4e2a\u5305\u662f\u53bb\u5f8010.1.1.0/24\u7f51\u7edc\u7684\uff0c\u800c\u81ea\u5df1\u6709\u4e24\u4e2a 10.1.1.0/24\u7f51\u7edc\u76f4\u8fde\u554a\uff0c\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5c31\u9700\u8981\u4e3a\u6570\u636e\u5305\u518d\u538b\u5165\u4e00\u5c42\u6807\u7b7e\uff1a PE2\u5c06IP\u6570\u636e\u5305\u9001\u4e0aMPLS VPN Backbone\u4e4b\u524d\uff0c\u4e3a\u6570\u636e\u5305\u538b\u5165\u4e24\u5c42\u6807\u7b7e\uff0c\u5176\u4e2d\u5916\u5c42\u6807\u7b7e\uff0c\u4e5f\u5c31\u662f\u6807\u7b7e1011 \u6211\u4eec\u79f0\u4e4b\u4e3aIGP\u6807\u7b7e\uff0c\u5b83\u662f\u7531P\u8def\u7531\u5668\u901a\u8fc7LDP\u534f\u8bae\u5206\u53d1\u7684\u3002\u800c1233\u6807\u7b7e\u662f\u5185\u5c42\u6807\u7b7e\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3aVPN\u6807\u7b7e\uff0c \u5b83\u662f\u7531PE1\u8def\u7531\u5668\u901a\u8fc7MP-BGP\u5206\u53d1\u7ed9PE2\u7684\u3002 \u5916\u5c42\u6807\u7b7e\u662f\u4e3a\u4e86\u5c06\u6570\u636e\u6cbf\u7740LSP\u9001\u5230PE1\uff0c\u800c\u5185\u5c42\u6807\u7b7e\u662f\u4e3a\u4e86\u5728\u6570\u636e\u5230\u8fbePE1\u540e\uff0c\u8ba9PE1\u5224\u65ad\u8be5\u6570\u636e\u5305\u7a76\u7adf\u662f\u5e94\u8be5\u9001\u5230\u54ea\u4e00\u4e2aVPN\uff0c\u56e0\u4e3aVPN\u6807\u7b7e\u662fPE1\u5206\u914d\u7684\u6240\u4ee5\u5b83\u80af\u5b9a\u4e0d\u4f1a\u641e\u9519\u3002\u5b8c\u7f8e\u7684\u89e3\u51b3\u65b9\u6848\u3002 \u6570\u636e\u5305\u7ec8\u4e8e\u7a7f\u8d8a\u4e86\u6574\u4e2aMPLS VPN\u7f51\u7edc\uff0c\u5230\u8fbe\u4e86\u7ad9\u70b91\u3002\u8fd9\u5c31\u662fMPLS VPN\u3002","title":"MPLS VPN \u521d\u4f53\u9a8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#vpn_4","text":"MPLS VPN\u4e00\u4e2a\u975e\u5e38\u5438\u5f15\u4eba\u7684\u5730\u65b9\uff0c\u5c31\u662f\u53ef\u4ee5\u8ba9\u4e0d\u540c\u5ba2\u6237\u7684\u8def\u7531\u53ca\u6570\u636e\u7a7f\u8d8a\u8fd0\u8425\u5546\u7684MPLS VPN Backbone\uff0c \u800c\u4e14\u8fd9\u4e9b\u8def\u7531\u548c\u6570\u636e\u53c8\u662f\u76f8\u4e92\u9694\u79bb\u548c\u72ec\u7acb\u7684\uff0c\u5373\u4f7f\u4e0d\u540c\u7684\u5ba2\u6237\u62e5\u6709\u76f8\u540c\u7684IPv4\u5730\u5740\u7a7a\u95f4\u4e5f\u4e0d\u8981\u7d27\u3002\u4e0e\u5ba2\u6237\u7684 CE\u8def\u7531\u5668\u4ea4\u4e92\u201cVPN\u5ba2\u6237\u8def\u7531\u201d\u7684PE\u8def\u7531\u5668\uff0c\u5c31\u663e\u5f97\u975e\u5e38\u91cd\u8981\u4e86\u3002 \u5728PE\u4e0a\u6709\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u6982\u5ff5\u2014VRF\uff08\u4e25\u683c\u7684\u8bf4\uff0cVRF\u7684\u4f5c\u7528\u73b0\u5728\u5df2\u7ecf\u6269\u5c55\u4e86\uff0c\u6211\u4eec\u8fd9\u91cc\u91cd\u70b9\u8ba8\u8bba\u5728MPLS VPN\u4e2d\u7684\u8fd0\u7528\uff09\u3002 VRF\uff1aVirtual Routing and Forwarding\uff0c\u7ffb\u8bd1\u6210\u865a\u62df\u8def\u7531\u53ca\u8f6c\u53d1\uff08\u5728\u6211\u53f8\u7684\u8bbe\u5907\u4e0a\u4e5f\u88ab\u79f0\u4e3aVPN-Instance\uff09\uff0c \u5b83\u662f\u4e00\u79cdVPN\u8def\u7531\u548c\u8f6c\u53d1\u5b9e\u4f8b\u3002\u4e00\u53f0PE\u8def\u7531\u5668\uff0c\u7531\u4e8e\u53ef\u80fd\u540c\u65f6\u8fde\u63a5\u4e86\u591a\u4e2aVPN\u7528\u6237\uff0c\u8fd9\u4e9b\u7528\u6237\uff08\u7684\u8def\u7531\u548c\u6570\u636e\uff09\u5f7c\u6b64\u4e4b\u95f4\u9700\u8981\u76f8\u4e92\u9694\u79bb\uff0c\u8fd9\u65f6\u5019\u5c31\u7528\u5230\u4e86VRF\u3002PE\u8def\u7531\u5668\u4e0a\u6bcf\u4e00\u4e2aVPN\u90fd\u6709\u4e00\u4e2aVRF\u3002PE\u8def\u7531\u5668\u9664\u4e86\u7ef4\u62a4\u5168\u5c40IP\u8def\u7531\u8868\u4e4b\u5916\uff0c\u8fd8\u4e3a\u6bcf\u4e2aVRF\u7ef4\u62a4\u4e00\u5f20\u72ec\u7acb\u7684IP\u8def\u7531\u8868\uff0c\u8fd9\u5f20\u8def\u7531\u8868\u79f0\u4e3aVRF\u8def\u7531\u8868\u3002\u8981\u6ce8\u610f\u7684\u662f\u5168\u5c40IP\u8def\u7531\u8868\u4ee5\u53ca\u6bcf\u4e2aVRF\u7684\u8def\u7531\u8868\u90fd\u662f\u76f8\u4e92\u72ec\u7acb\u6216\u8005\u8bf4\u76f8\u4e92\u9694\u79bb\u7684\u3002\u56e0\u4e3a\u6bcf\u4e00\u4e2aVPN\u90fd\u6709\u4e00\u5f20\u72ec\u7acb\u7684 VRF\u8def\u7531\u8868\uff0c\u6240\u4ee5PE\u8def\u7531\u5668\u4e0a\u6bcf\u4e00\u4e2aVPN\u4e5f\u4f1a\u6709\u4e00\u5f20\u72ec\u7acb\u7684FIB\u8868\u6765\u8f6c\u53d1\u8fd9\u4e9b\u62a5\u6587\uff0c\u8fd9\u5c31\u662fVRF FIB\u8868\u3002 \u4e00\u65e6\u5728PE\u8def\u7531\u5668\u4e0a\u521b\u5efa\u4e86\u4e00\u4e2aVPN\u7684\u5b9e\u4f8b\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06\u7279\u5b9a\u7684\u63a5\u53e3\uff08\u7269\u7406\u6216\u903b\u8f91\u7684\uff09\u7ed1\u5b9a\u5230\u8fd9\u4e2aVPN\u5b9e\u4f8b\uff0c\u90a3\u4e48\u8fd9\u4e2a\u63a5\u53e3\u5c06\u4e0d\u518d\u5c5e\u4e8e\u5168\u5c40IP\u8def\u7531\u8868\u6216\u5176\u4ed6\u4efb\u4f55VPN\u5b9e\u4f8b\uff0c\u53ea\u4e3a\u8be5VPN\u670d\u52a1\u3002","title":"VPN \u5b9e\u4f8b"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#rd","text":"\u4f20\u7edfBGP\u65e0\u6cd5\u6b63\u786e\u5904\u7406\u5730\u5740\u7a7a\u95f4\u91cd\u53e0\u7684VPN\u7684\u8def\u7531\u3002\u5047\u8bbe\u5ba2\u6237A\u548c\u5ba2\u6237B\u90fd\u4f7f\u7528\u4e861.1.1.0/24\u7f51\u6bb5\u7684\u5730\u5740\uff0c\u5e76\u5404\u81ea\u53d1\u5e03\u4e86\u4e00\u6761\u53bb\u5f80\u6b64\u7f51\u6bb5\u7684\u8def\u7531\u3002\u867d\u7136\u672c\u7aefPE\u901a\u8fc7\u4e0d\u540c\u7684VRF\u53ef\u4ee5\u533a\u5206\u5730\u5740\u7a7a\u95f4\u91cd\u53e0\u7684VPN\u7684\u8def\u7531\uff0c\u4f46\u662f\u8fd9\u4e9b\u8def\u7531\u53d1\u5f80\u5bf9\u7aefPE\u540e\uff0c\u5bf9\u7aefPE\u5c06\u6839\u636eBGP\u9009\u8def\u89c4\u5219\u53ea\u9009\u62e9\u5176\u4e2d\u4e00\u6761VPN\u8def\u7531\uff0c\u4ece\u800c\u5bfc\u81f4\u53bb\u5f80\u53e6\u4e00\u4e2a VPN\u7684\u8def\u7531\u4e22\u5931\u3002 PE\u4e4b\u95f4\u4f7f\u7528MP-BGP\uff08Multiprotocol Extensions for BGP-4\uff0cBGP-4\u7684\u591a\u534f\u8bae\u6269\u5c55\uff09\u6765\u53d1\u5e03VPN\u8def\u7531\uff0c\u5e76\u4f7f\u7528VPN-IPv4\u5730\u5740\u6765\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002VPN-IPv4\u5730\u5740\u5171\u670996bit\uff0c\u5305\u62ec64bit\u7684RD\uff08Route Distinguisher\uff0c\u8def\u7531\u6807\u8bc6\u7b26\uff09\u548c32bit\u7684IPv4\u5730\u5740\u524d\u7f00\u3002RD\u7528\u4e8e\u533a\u5206\u4f7f\u7528\u76f8\u540c\u5730\u5740\u7a7a\u95f4\u7684IPv4\u524d\u7f00\uff0c\u589e\u52a0\u4e86RD\u7684IPv4\u5730\u5740\u79f0\u4e3aVPN-IPv4\u5730\u5740\uff08\u5373VPNv4\u5730\u5740\uff09\u3002PE\u4eceCE\u63a5\u6536\u5230IPv4\u8def\u7531\u540e\uff0c\u8f6c\u6362\u4e3a\u5168\u5c40\u552f\u4e00\u7684VPNv4\u8def\u7531\uff0c\u7136\u540e\u5c06\u5176\u901a\u544a\u7ed9\u8fdc\u7aefPE\u3002RD\u503c\u5728VPN\u5b9e\u4f8b\u4e2d\u8fdb\u884c\u914d\u7f6e\u3002 RD\u7528\u4e8e\u5728MP-BGP\u8fd0\u8f7dVPN\u524d\u7f00\u65f6\uff0c\u786e\u4fdd\u8fd9\u4e9b\u524d\u7f00\u7684\u552f\u4e00\u6027\u3002\u4f46\u662fRD\u5e76\u4e0d\u4f1a\u8bf4\u660e\u8be5\u524d\u7f00\u5c5e\u4e8e\u54ea\u4e00\u4e2aVRF \uff08\u9700\u8981\u642d\u914dRT\uff09\uff0cRD\u7684\u529f\u80fd\u5e76\u4e0d\u662fVPN\u6807\u793a\u7b26\uff0c\u56e0\u4e3a\u5728\u4e00\u4e9b\u590d\u6742\u7684VPN\u73af\u5883\u4e2d\uff0c\u53ef\u80fd\u4e00\u4e2aVPN\u5b58\u5728\u591a\u4e2aRD\u3002 RD\u7684\u6700\u91cd\u8981\u7684\u4e24\u4e2a\u529f\u80fd\uff1a \u4e0e32bit\u7684IPv4\u524d\u7f00\u4e00\u8d77\u6784\u621096bit\u7684VPNv4\u524d\u7f00\uff1b \u5982\u679c\u4e0d\u540c\u7684VPN\u5ba2\u6237\u5b58\u5728\u76f8\u540c\u7684IPv4\u5730\u5740\u7a7a\u95f4\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u4e0d\u540c\u7684RD\u503c\u4ece\u800c\u4fdd\u8bc1\u524d\u7f00\u7684\u552f\u4e00\u6027\u3002 RD\u53ef\u4ee5\u6709\u4e24\u79cd\u8868\u73b0\u5f62\u5f0f\uff1aAS:nn\u6216\u8005IP-address:nn\u3002\u5176\u4e2dnn\u4ee3\u8868\u7f16\u53f7\u3002\u6700\u5e38\u7528\u7684\u683c\u5f0f\u662fAS:nn\uff0c\u5176\u4e2dAS\u4ee3\u8868AS\u53f7\u3002\u901a\u5e38AS\u662fIANA\u5206\u914d\u7ed9\u670d\u52a1\u63d0\u4f9b\u5546\u7684AS\u53f7\uff0cnn\u662f\u670d\u52a1\u63d0\u4f9b\u5546\u5206\u914d\u7ed9VRF\u7684\u552f\u4e00\u53f7\u7801\u3002\u4ea7\u751f\u7684VPNv4 \u524d\u7f00\u901a\u8fc7MP-BGP\u5728PE\u8def\u7531\u5668\u4e4b\u95f4\u88ab\u4f20\u9012\u3002","title":"RD"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#rt","text":"Route Targets\uff08\u5728\u6211\u53f8\u7684\u8bbe\u5907\u4e0a\u4e5f\u53ebVPN-Target\uff09\uff0cRT\u503c\u7528\u4e8e\u533a\u5206VPN\u5b9e\u4f8b\u3001\u63a7\u5236VPN\u8def\u7531\u7684\u6536\u53d1\uff0c\u5b83\u5b9a\u4e49\u4e86\u4e00\u6761VPNv4\u8def\u7531\u53ef\u4ee5\u4e3a\u54ea\u4e9b\u7ad9\u70b9\u6240\u63a5\u6536\uff0c\u4ee5\u53caPE\u53ef\u4ee5\u63a5\u6536\u54ea\u4e9b\u7ad9\u70b9\u53d1\u9001\u6765\u7684\u8def\u7531\u3002RT\u503c\u5176\u5b9e\u662f\u4e00\u79cd\u7c7b\u4f3c\u201c\u8def\u7531\u6807\u8bb0\u201d\u7684\u4e1c\u897f\uff0c\u76f8\u5f53\u4e8e\u6211\u4eec\u7ed9VPNv4\u8def\u7531\u6253\u4e0a\u6807\u8bb0\u4e86\uff0c\u7136\u540e\u518d\u57fa\u4e8e\u8fd9\u4e9b\u6807\u8bb0\u6765\u51b3\u5b9a\u54ea\u4e9b\u8def\u7531\u662f\u8981\u653e\u5165\u54ea\u4e00\u4e2aVPN\u5b9e\u4f8b\u7684\u3002 \u6bcf\u4e2aVRF\u5173\u8054\u4e00\u4e2a\u6216\u591a\u4e2aRT\u3002\u6709\u4e24\u7c7bRT\uff1a **Export RT\uff1a**PE\u4ece\u672c\u5730\u76f4\u8fde\u7684\u7ad9\u70b9\u5b66\u5230IPv4\u5ba2\u6237\u8def\u7531\u540e\uff0c\u5c06\u5176\u8f6c\u6362\u4e3aVPNv4\u8def\u7531\uff0c\u5e76\u4e3a\u8fd9\u4e9b\u8def\u7531\u8bbe\u7f6e RT\u503c\uff0c\u8be5RT\u503c\u7b49\u4e8eVRF\u4e2d\u6307\u5b9a\u7684Export RT\u3002RT\u503c\u4f5c\u4e3aBGP\u7684\u6269\u5c55Community\u5c5e\u6027\u968f\u8def\u7531\u53d1\u5e03\u7ed9\u8fdc\u7aef PE\u3002 **Import RT\uff1a**PE\u6536\u5230\u5176\u5b83PE\u901a\u544a\u8fc7\u6765\u7684VPNv4\u8def\u7531\u65f6\uff0c\u5c06\u68c0\u67e5\u8def\u7531\u7684RT\uff0c\u5f53\u8def\u7531\u7684RT\u4e0e\u8be5PE\u4e0a\u67d0\u4e2a VRF\u7684Import RT\u5339\u914d\u65f6\uff0cPE\u5c31\u628a\u8def\u7531\u6ce8\u5165\u5230\u8be5VRF\u4e2d\u3002 Export RT\u548cImport RT\u7684\u8bbe\u7f6e\u76f8\u4e92\u72ec\u7acb\uff0c\u5e76\u4e14\u90fd\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a\u503c\uff0c\u80fd\u591f\u5b9e\u73b0\u7075\u6d3b\u7684VPN\u8bbf\u95ee\u63a7\u5236\uff0c\u4ece\u800c\u5b9e\u73b0\u591a\u79cdVPN\u7ec4\u7f51\u65b9\u6848\u3002\u4f8b\u5982\uff1a\u67d0VRF\u7684Import RT\u5305\u542b100:1\uff0c200:1\u548c300:1\uff0c\u5f53\u6536\u5230\u7684\u8def\u7531\u7684RT\u4e3a100:1\u3001200:1\u3001 300:1\u4e2d\u7684\u4efb\u610f\u503c\u65f6\uff0c\u90fd\u53ef\u4ee5\u88ab\u6ce8\u5165\u5230\u8be5VRF\u4e2d\u3002 \u524d\u9762\u5df2\u7ecf\u8bf4\u4e86\uff0cVPN\u5ba2\u6237\u7684\u8def\u7531\u5728MPLS VPN Backbone\u5185\u4f20\u8f93\u65f6\uff0c\u662f\u901a\u8fc7MP-BGP\u6765\u8fd0\u8f7d\u7684\uff0c\u5e76\u4e14\u5728\u8fd0\u8f7d\u7684\u8fc7\u7a0b\u4e2d\u662f\u4ee5VPNv4\u8def\u7531\u524d\u7f00\u7684\u5f62\u5f0f\u88ab\u8fd0\u8f7d\uff0cRD\u503c\u7528\u4e8e\u548c32bit\u7684IPv4\u524d\u7f00\u6784\u621096bit\u7684VPNv4\u524d\u7f00\u3002\u800c\u4e0e\u8def\u7531\u524d\u7f00\u5171\u540c\u88ab\u8fd0\u8f7d\u7684\u8fd8\u6709\u5176\u4ed6\u7684BGP\u8def\u5f84\u5c5e\u6027\uff0c\u4f8b\u5982AS_PATH\u3001LP\u3001OriginCode\u7b49\uff0c\u9664\u6b64\u4e4b\u5916\u8fd8\u6709\u975e\u5e38\u91cd\u8981\u7684RT\u503c\uff0cRT\u88ab\u5b58\u50a8\u5728\u6269\u5c55Community\u5c5e\u6027\u4e2d\uff0c\u4e0eVPNv4\u8def\u7531\u4e00\u540c\u88ab\u8fd0\u8f7d\u5230\u5bf9\u7aefPE\u8def\u7531\u5668\u3002\u5bf9\u7aefPE\u4e5f\u90e8\u7f72\u4e86VPN\u5b9e\u4f8b\uff0cRT\u503c\uff08\u5305\u62ecImport RT\u548cExport RT\u4e24\u4e2a\u503c\uff09\u662f\u5173\u8054\u5728VPN\u5b9e\u4f8b\u4e2d\u7684\u3002\u5f53PE\u63a5\u6536\u5230\u4e00\u5927\u5768 VPNv4\u8def\u7531\u65f6\uff0c\u5b83\u53ea\u5c06\u90a3\u4e9b\u5339\u914dVPN\u5b9e\u4f8b\u4e2d\u7684Import RT\u7684\u8def\u7531\u653e\u5165\u8be5VPN\u5b9e\u4f8b\u3002","title":"RT"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_285","text":"","title":"\u57fa\u7840\u5b9e\u9a8c"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_286","text":"Device Port IP Address Description CE1\uff08R1\uff09 GE0/0/0 10.1.12.1/24 Loopback0 1.1.1.1/32 \u6a21\u62df\u7ad9\u70b91\u7684\u5185\u7f51\u8def\u7531 PE1\uff08R2\uff09 GE0/0/0 10.1.12.2/24 \u63a5\u53e3\u6dfb\u52a0\u5230VPN\u5b9e\u4f8bABC GE0/0/1 10.1.23.2/24 Loopback0 2.2.2.2/32 P1\uff08R3\uff09 GE0/0/0 10.1.23.3/24 GE0/0/1 10.1.34.3/24 Loopback0 3.3.3.3/32 P2\uff08R4\uff09 GE0/0/0 10.1.34.4/24 GE0/0/1 10.1.45.4/24 Loopback0 4.4.4.4/32 PE2\uff08R5\uff09 GE0/0/0 10.1.45.5/24 \u63a5\u53e3\u6dfb\u52a0\u5230VPN\u5b9e\u4f8bABC GE0/0/1 10.1.56.5/24 Loopback0 5.5.5.5/32 CE2\uff08R6\uff09 GE0/0/0 10.1.56.6/24 Loopback0 6.6.6.6/32 \u6a21\u62df\u7ad9\u70b92\u7684\u5185\u7f51\u8def\u7531 CE1\u6a21\u62df\u5ba2\u6237A\u7684\u7ad9\u70b91\u8bbe\u5907\uff0cCE2\u6a21\u62df\u5ba2\u6237A\u7684\u7ad9\u70b92\u8bbe\u5907\uff0cCE1\u53caCE2\u4e0a\u5404\u6709\u4e00\u4e2aLoopback\u63a5\u53e3 \u7528\u6765\u6a21\u62df\u7ad9\u70b9\u5185\u7684\u5ba2\u6237\u8def\u7531\u3002CE1\u4e0ePE1\u4e4b\u95f4\uff0cCE2\u4e0ePE2\u4e4b\u95f4\u8fd0\u884c\u7684PE-CE\u8def\u7531\u534f\u8bae\u662fOSPF\uff0c \u4f7f\u7528\u8fdb\u7a0b\u53f71\u3002 Backbone\u5185\u4f7f\u7528OSPF\u6253\u901a\u9aa8\u5e72\u5185\u7684\u8def\u7531\uff0cOSPF\u4f7f\u7528\u8fdb\u7a0b\u53f7100\u3002 PE1\u53caPE2\u5efa\u7acb\u57fa\u4e8eLoopback\u7684MP-iBGP\u90bb\u5c45\u5173\u7cfb\u3002 \u5b8c\u6210\u76f8\u5173\u914d\u7f6e\uff0c\u4f7f\u5f97\u5ba2\u6237A\u7684\u4e24\u4e2a\u7ad9\u70b9\u80fd\u591f\u4e92\u901a\u3002","title":"\u62d3\u6251\u8bf4\u660e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_287","text":"","title":"\u914d\u7f6e\u6b65\u9aa4"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#backboneospf100","text":"\u5728PE1\u3001P1\u3001P2\u3001PE2\u4e0a\u8fd0\u884cOSPF\u3002\u8fd0\u884c\u8be5OSPF\u8fdb\u7a0b\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u6253\u901aBackbone\u5185\u7684\u8def\u7531\uff0c\u56db\u53f0\u8def\u7531\u5668\u90fd\u8981\u901a\u544a\u81ea\u5df1\u7684Loopback0\u7f51\u6bb5\u8def\u7531\u3002\u8fd9\u4e2aIGP\u6253\u901a\u7684\u8def\u7531\u4e00\u65b9\u9762\u662f\u4e3a\u4e86LDP\u80fd\u591f\u5efa\u7acb\u8d77\u90bb\u63a5\u5173\u7cfb\uff0c\u5e76\u4e14\u80fd\u591f\u6b63\u5e38\u7684\u5206\u53d1\u6807\u7b7e\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u662f\u4e3a\u4e86PE1\u53caPE2\u4e4b\u95f4\u80fd\u591f\u5efa\u7acb\u8d77\u57fa\u4e8eLoopback \u7684MP-iBGP\u90bb\u5c45\u5173\u7cfb\u3002","title":"Backbone\u5185\u8fd0\u884cOSPF\uff0c\u7edf\u4e00\u4f7f\u7528\u8fdb\u7a0b\u53f7100"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#backboneldp","text":"\u5728PE1\u3001P1\u3001P2\u3001PE2\u4e0a\u8fd0\u884cMPLS\u53caLDP\u3002LDP\u5f00\u59cb\u5de5\u4f5c\u540e\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\u5373\u4f1a\u4e3a/32\u7684\u4e3b\u673a\u8def\u7531\u6346\u7ed1\u5e76\u5206\u53d1\u6807\u7b7e\u3002\u9aa8\u5e72\u7f51\u5185\u56db\u53f0\u8def\u7531\u5668\u7684Loopback\u8def\u7531\u90fd\u4f1a\u5efa\u7acbLSP\u3002\u8fd9\u4e3a\u540e\u7eed\u7684\u5ba2\u6237\u6570\u636e\u8f6c\u53d1\u505a\u4e86\u94fa\u57ab\u3002","title":"Backbone\u5185\u8fd0\u884cLDP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#pe1pe2vpnpe-ce","text":"\u5728PE1\u53caPE2\u4e0a\u521b\u5efa\u4e00\u4e2aVPN\u5b9e\u4f8b\uff0c\u547d\u4ee4\u4e3aABC\uff0c\u5c06\u8fde\u63a5\u5230CE\u7684\u63a5\u53e3\u6dfb\u52a0\u5230\u8fd9\u4e2aVPN\u5b9e\u4f8b\u4e2d\u3002\u540c\u65f6PE1\u3001PE2\u5747\u4e0e\u81ea\u5df1\u76f4\u8fde\u7684CE\u8def\u7531\u5668\u8fd0\u884c\u4e00\u4e2a\u57fa\u4e8eVPN\u5b9e\u4f8b\u7684OSPF\u8fdb\u7a0b\uff0c\u7edf\u4e00\u4f7f\u7528\u8fdb\u7a0b\u53f71\u3002\u52a1\u5fc5\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u4e2aOSPF\u8fdb\u7a0b\u662f\u57fa\u4e8eVPN\u5b9e\u4f8bABC\uff08\u4e5f\u5c31\u662f\u57fa\u4e8e\u865a\u62df\u8def\u7531\u5668\uff09\u7684\uff0c\u800c\u4e0d\u662f\u57fa\u4e8e\u5168\u5c40\u8def\u7531\u5668\u7684\u3002","title":"PE1\u53caPE2\u521b\u5efaVPN\u5b9e\u4f8b\uff0c\u5e76\u8fd0\u884cPE-CE\u8def\u7531\u534f\u8bae"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#pe1pe2mp-bgpmp-ibgp","text":"PE1\u53caPE2\u57fa\u4e8eLoopback\u5efa\u7acbMP-iBGP\u90bb\u5c45\u5173\u7cfb\uff0c\u6fc0\u6d3b\u4e8c\u8005\u7684VPNv4\u8fde\u63a5\u3002","title":"PE1\u53caPE2\u521b\u5efaMP-BGP\u8fdb\u7a0b\uff0c\u5e76\u4e14\u5efa\u7acbMP-iBGP\u90bb\u5c45\u5173\u7cfb"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#pe1pe2vpnbgp","text":"\u7531\u4e8ePE-CE\u4e4b\u95f4\u9009\u7528\u7684\u8def\u7531\u534f\u8bae\u662fOSPF\uff0c\u56e0\u6b64\u4e3a\u4e86\u5c06\u8def\u7531\u62c9\u901a\uff0c\u9700\u8981\u5728\u4e24\u53f0PE\u4e0a\u914d\u7f6eOSPF\u8fdb\u7a0b 1\uff0c\u4ee5\u53caMP-BGP\u7684\u8def\u7531\u53cc\u5411\u91cd\u53d1\u5e03\u3002","title":"PE1\u53caPE2\u4e0a\u914d\u7f6eVPN\u8def\u7531\u4e0eBGP\u8def\u7531\u7684\u4e92\u91cd\u53d1\u5e03"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_288","text":"","title":"\u67e5\u770b\u53ca\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_289","text":"\u5404\u8bbe\u5907\u63a5\u53e3IP\u5730\u5740\u7684\u914d\u7f6e\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u4e86\u3002","title":"\u8bbe\u5907\u914d\u7f6e"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#backboneospf","text":"Backbone\u5185\u7684\u8bbe\u5907\uff1aPE1\u3001PE2\u3001P1\u3001P2\u8fd0\u884cOSPF\uff0c\u7edf\u4e00\u4f7f\u7528\u8fdb\u7a0b\u53f7100\u3002\u8fd0\u884c\u8be5OSPF\u8fdb\u7a0b\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u6253\u901a\u9aa8\u5e72\u7f51\u5185\u7684\u8def\u7531\uff0c\u56db\u53f0\u8bbe\u5907\u5728\u4e92\u8054\u63a5\u53e3\u4e0a\u6fc0\u6d3bOSPF\uff0c\u5e76\u4e14\u901a\u544a\u81ea\u5df1\u7684Loopback0 \u63a5\u53e3\u8def\u7531\u3002 PE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a P1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a P2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u5728\u5404\u8bbe\u5907\u4e0a\u67e5\u770b\u8def\u7531\uff0c\u786e\u4fdd\u8def\u7531\u8868\u662f\u6b63\u786e\u7684\u3002","title":"Backbone\u5185\u8fd0\u884cOSPF"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#backbonemplsldp","text":"PE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a P1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a P2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u786e\u4fdd\u6240\u6709\u7684LDP\u90bb\u5c45\u5173\u7cfb\u90fd\u6b63\u786e\u7684\u5efa\u7acb\uff1a \u5176\u4ed6\u8bbe\u5907\u7684\u67e5\u770b\u4e0d\u518d\u8d58\u8ff0\u3002 \\<PE1>display mpls lsp ------------------------------------------------------------------------------- LSP Information: LDP LSP ------------------------------------------------------------------------------- FEC In/Out Label In/Out IF Vrf Name 2.2.2.2/32 3/NULL -/- 3.3.3.3/32 NULL/3 -/GE0/0/1 3.3.3.3/32 1024/3 -/GE0/0/1 4.4.4.4/32 NULL/1025 -/GE0/0/1 4.4.4.4/32 1025/1025 -/GE0/0/1 5.5.5.5/32 NULL/1026 -/GE0/0/1 5.5.5.5/32 1026/1026 -/GE0/0/1 \u4e0a\u9762\u8f93\u51fa\u7684\u662fPE1\u7684\u6807\u7b7e\u8f6c\u53d1\u8868\u3002\u6211\u4eec\u770b\u5230\u5173\u4e8e\u7f51\u7edc\u4e2d\u7684/32\u4e3b\u673a\u8def\u7531\u90fd\u5df2\u7ecf\u6536\u5230\u4e86\u6807\u7b7e\u3002","title":"Backbone\u5185\u8fd0\u884cMPLS\u53caLDP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#pe1pe2vpnpe-ce_1","text":"PE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a CE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u5b8c\u6210\u914d\u7f6e\u540e\uff0c\u786e\u4fddPE\u80fd\u591f\u5b66\u4e60\u5230\u76f4\u8fdeCE\u7684\u5ba2\u6237\u8def\u7531\uff1a Destinations : 5 Routes : 5 Destination/Mask Proto Pre Cost Flags NextHop Interface 1.1.1.1/32 OSPF 10 1 D 10.1.12.1 GigabitEthernet0/0/0 10.1.12.0/24 Direct 0 0 D 10.1.12.2 GigabitEthernet0/0/0 10.1.12.2/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/0 10.1.12.255/32 Direct 0 0 D 127.0.0.1 GigabitEthernet0/0/0 255.255.255.255/32 Direct 0 0 D 127.0.0.1 InLoopBack0 PE1\u4e0aVPN\u5b9e\u4f8bABC\u7684\u8def\u7531\u8868\u4e2d\u5df2\u7ecf\u901a\u8fc7OSPF\u5b66\u4e60\u5230CE1\u7684\u5ba2\u6237\u8def\u75311.1.1.1/32\u3002","title":"PE1\u53caPE2\u521b\u5efaVPN\u5b9e\u4f8b\uff0c\u5e76\u8fd0\u884cPE-CE\u8def\u7531\u534f\u8bae"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#pe1pe2mp-bgpmp-ibgp_1","text":"PE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a","title":"PE1\u53caPE2\u521b\u5efaMP-BGP\u8fdb\u7a0b\uff0c\u5e76\u4e14\u5efa\u7acbMP-iBGP\u90bb\u5c45\u5173\u7cfb"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#pe1pe2pe-cebgp","text":"PE1\u7684\u914d\u7f6e\u5982\u4e0b\uff1a PE2\u7684\u914d\u7f6e\u5982\u4e0b\uff1a \u786e\u8ba4\u4e0bCE1\u662f\u5426\u5df2\u7ecf\u6536\u5230\u53bb\u5f80CE2\u7684\u8def\u7531\uff1a CE1\u5df2\u7ecf\u5b66\u4e60\u5230\u4e86CE2\u6240\u5728\u7ad9\u70b9\u7684\u8def\u7531\u3002\u53cd\u4e4b\u540c\u7406\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002","title":"PE1\u53caPE2\u4e0a\u914d\u7f6ePE-CE\u534f\u8bae\u4e0eBGP\u7684\u4e92\u91cd\u53d1\u5e03"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_290","text":"\u5728PE1\u4e0a\u67e5\u770b\u8def\u75316.6.6.6/32\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\u8be5\u6761\u8def\u7531\u662f\u901a\u8fc7MP-iBGP\u4ecePE2\u4f20\u9012\u8fc7\u6765\u7684\u3002\u4ece\u8be6\u7ec6\u4fe1\u606f\u7684 \u8f93\u51fa\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8def\u7531\u7684\u4e0b\u4e00\u8df3\u662f5.5.5.5\u3002\u5e76\u4e14\u8be5\u8def\u7531\u6346\u7ed1\u7684VPN\u6807\u7b7e\u662f1027\u3002\u56e0\u6b64\u5f53PE1\u6536\u5230IP\u6570\u636e\u5305\u8981\u53bb\u5f806.6.6.6\u65f6\uff0c\u4f1a\u4e3a\u6570\u636e\u5305\u538b\u5165VPN\u6807\u7b7e1027\uff0c\u540c\u65f6\u4e3a\u4e86\u8ba9\u8fd9\u4e2a\u6807\u7b7e\u5305\u80fd\u591f\u6b63\u5e38\u7684\u7a7f\u8d8a\u9aa8\u5e72\u7f51\u5e76\u5230\u8fbePE2\u4e0a\uff0c\u8fd8\u9700\u4e3a\u8be5\u6807\u7b7e\u5305\u518d\u589e\u52a0\u4e00\u5c42\u6807\u7b7e\u3002\u7531\u4e8e\u53bb\u5f806.6.6.6\u7684\u4e0b\u4e00\u8df3\u662f5.5.5.5\uff0c\u56e0\u6b64\u5728\u5916\u5c42\u538b\u5165 5.5.5.5\u8def\u7531\u5bf9\u5e94\u7684\u6807\u7b7e\uff1a 3.3.3.3/32 NULL/3 -/GE0/0/1 3.3.3.3/32 1024/3 -/GE0/0/1 4.4.4.4/32 NULL/1025 -/GE0/0/1 4.4.4.4/32 1025/1025 -/GE0/0/1 5.5.5.5/32 NULL/1026 -/GE0/0/1 5.5.5.5/32 1026/1026 -/GE0/0/1 \u4ece\u4e0a\u9762\u7684\u8f93\u51fa\u6211\u4eec\u53ef\u4ee5\u770b\u5230PE1\u7684\u6807\u7b7e\u8f6c\u53d1\u8868\u4e2d\uff0c5.5.5.5\u7684\u51fa\u7ad9\u6807\u7b7e\u662f1026\u3002\u6240\u4ee5\u6700\u7ec8\u53bb\u5f806.6.6.6\u7684 IP\u5305\u88ab\u538b\u5165\u4e24\u5c42\u6807\u7b7e\u3002\u5185\u5c42VPN\u6807\u7b7e\u503c\u662f1027\uff0c\u5916\u5c42LDP\u6807\u7b7e\u662f1026\u3002\u62a5\u6587\u88ab\u5904\u7406\u540e\u8f6c\u53d1\u7ed9\u4e86P1\u3002P1 \u5728\u6536\u5230\u8fd9\u4e2a\u6807\u7b7e\u5305\u540e\u67e5\u770b\u81ea\u5df1\u7684\u6807\u7b7e\u8f6c\u53d1\u8868\uff0c\u6ce8\u610f\uff0c\u5b83\u53ea\u4f1a\u67e5\u770b\u5916\u5c42\u6807\u7b7e\u3002 \u4eceP1\u7684\u8f6c\u53d1\u8868\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c1026\u7684\u5165\u7ad9\u6807\u7b7e\uff0c\u5bf9\u5e94\u7684\u51fa\u7ad9\u6807\u7b7e\u662f1026\uff0c\u5e76\u4e14\u51fa\u7ad9\u63a5\u53e3\u662fGE0/0/1\u3002\u56e0\u6b64\u5b83\u5c06\u6536\u5230\u7684\u6807\u7b7e\u5305\u7684\u5916\u5c42\u6807\u7b7e\u4ece1026\u7f6e\u6362\u62101026\uff08\u78b0\u5de7\u7f6e\u6362\u524d\u540e\u6807\u7b7e\u503c\u662f\u4e00\u6837\u7684\uff09\uff0c\u7136\u540e\u4ece GE0/0/1\u53e3\u53d1\u51fa\u53bb\u3002P2\u5c06\u6536\u5230\u8fd9\u4e2a\u6807\u7b7e\u5305\uff0c\u4e5f\u662f\u67e5\u6807\u7b7e\u8f6c\u53d1\u8868\uff1a P2\u53d1\u73b0\uff0c1026\u7684\u5165\u7ad9\u6807\u7b7e\uff0c\u5bf9\u5e94\u7684\u51fa\u7ad9\u6807\u7b7e\u662f3\uff0c\u800c3\u662f\u4e00\u4e2a\u4fdd\u7559\u6807\u7b7e\uff0c\u610f\u5473\u7740\u8981\u5c06\u8be5\u9876\u5c42\u6807\u7b7e\u5f39\u51fa\u3002\u4e8e\u662f\u5b83\u5c06\u6536\u5230\u7684\u6807\u7b7e\u6570\u636e\u7684\u9876\u5c42\u6807\u7b7e\u5f39\u51fa\uff0c\u7136\u540e\u5269\u4f59\u7684\u6570\u636e\u4eceGE0/0/1\u53e3\u9001\u51fa\u53bb\u3002PE2\u5c06\u6700\u7ec8\u6536\u5230\u4ecd\u7136 \u643a\u5e26\u8005VPN\u6807\u7b7e\u7684\u6570\u636e\u3002\u7531\u4e8e\u8fd9\u4e2aVPN\u6807\u7b7e\u662f\u5b83\u81ea\u5df1\u53d1\u7ed9PE1\u7684\uff0c\u56e0\u6b64\u5b83\u77e5\u9053\u8fd9\u4e2a\u6807\u7b7e\u503c\u610f\u5473\u7740\u4ec0\u4e48\u3001\u4e0e\u54ea\u4e00\u4e2aVPN\u5b9e\u4f8b\u5bf9\u5e94\u3002\u56e0\u6b64\u6700\u7ec8\u5b83\u5c06VPN\u6807\u7b7e\u5265\u53bb\uff0c\u7136\u540e\u5c06IP\u6570\u636e\u5305\u8f6c\u53d1\u7ed9CE2\u3002 \u5728PE1\u4e0aTracert 6.6.6.6\uff0c\u53ef\u4ee5\u67e5\u770b\u5230\u6574\u4e2a\u6570\u636e\u5c42\u9762\u7684\u8fc7\u7a0b\uff1a \u5b9e\u9645\u4e0a\u662f\u8fd9\u6837\u7684\uff1a","title":"\u67e5\u770b\u53ca\u9a8c\u8bc1"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_291","text":"12.1 \u6d41\u91cf\u5206\u7c7b\u4e0e\u6807\u8bb0","title":"\u670d\u52a1\u8d28\u91cf"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#1211-dscp","text":"\u5728\u4e0a\u56fe\u6240\u793a\u7684\u573a\u666f\u4e2d\uff0c\u7f3a\u7701\u60c5\u51b5\u4e0b\uff0cSW1\u5e76\u672a\u5bf9R1\u53d1\u5f80SW2\u7684IP\u6d41\u91cf\u505aDSCP\u503c\u7684\u8bbe\u7f6e\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u9a8c\u8bc1\u65b9\u6cd5\u662f\u5728SW2\u4e0a\u4f7f\u7528\uff1a\u201ccapture-packet acl xxx interface GigabitEthernet 6/0/15 destination terminal\u201d\uff08\u5176\u4e2dXXX\u4e3a\u4e8b\u5148\u5b9a\u4e49\u597d\u7684ACL\uff09\u6765\u6355\u83b7R1\u53d1\u8fc7\u6765\u7684\u62a5\u6587\uff0c\u4f8b\u5982\u5f53R1 ping 1.1.1.3\u65f6\uff0c\u53ef\u4ee5\u6355\u83b7\u5982\u4e0bICMP\u62a5\u6587\uff1a \u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u6b64\u65f6\u62a5\u6587\u7684ToS\u5b57\u6bb5\uff08\u7ea2\u8272\u5b50\u56fe\u90e8\u5206\uff09\u503c\u4e3a0x00\uff0c\u56e0\u6b64DSCP\u503c\u4e5f\u4e3a\u7f3a\u7701\u76840\u3002\u73b0\u5728\uff0c\u6211\u4eec\u5728SW1\u4e0a\u5b8c\u6210\u5982\u4e0b\u914d\u7f6e\uff0c\u4f7f\u5f97SW1\u5c06\u6240\u6709\u4eceGE0/0/15\u63a5\u53e3\u51fa\u7ad9\u7684ICMP\u62a5\u6587\u7684DSCP\u503c\u8bbe\u7f6e\u4e3aEF\uff0c\u4ece\u800c\u8ba9\u4e0a\u6e38\u4ea4\u6362\u673aSW2\u80fd\u591f\u6709\u9488\u5bf9\u6027\u5730\u5904\u7406\u8fd9\u4e9b\u6d41\u91cf\uff1a \u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u8ba9R1 ping 1.1.1.3 \u65f6\uff0c\u5c06\u770b\u5230\u5728SW3\u4e0a\u6355\u83b7\u5230\u5982\u4e0b\u62a5\u6587\uff1a \u53ef\u4ee5\u770b\u5230ToS\u5b57\u6bb5\u7684\u503c\u53d8\u6210\u4e860xB8\uff0c\u6362\u7b97\u6210\u4e8c\u8fdb\u5236\u4e5f\u5c31\u662f10111000\uff0c\u8fd9\u5c31\u662fEF\u5bf9\u5e94\u7684\u503c\u3002\u800c\u5bf9\u4e8e\u5176\u4ed6\u975e ICMP\u62a5\u6587\uff08\u6ca1\u6709\u88abACL3000\u5339\u914d\u7684\u6d41\u91cf\uff09\uff0cSW1\u5c06\u76f4\u63a5\u653e\u884c\uff08\u4e0a\u8ff0\u573a\u666f\u5728S5300\u4ea4\u6362\u673a\u4e0a\u9a8c\u8bc1\uff09\u3002","title":"12.1.1 \u4fee\u6539\u6d41\u91cf\u7684 DSCP"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_292","text":"\u7f51\u7edc\u6545\u969c\u5904\u7406\u6982\u8ff0","title":"\u6545\u969c\u5904\u7406"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_293","text":"","title":"\u7f51\u7edc\u95ee\u9898\u5904\u7406\u7684\u4e00\u822c\u6d41\u7a0b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_294","text":"","title":"\u7efc\u5408\u7f51\u7edc\u95ee\u9898\u5b9a\u4f4d\u53ca\u5904\u7406\u65b9\u6cd5\uff08\u5b8f\u89c2\uff09\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_295","text":"\u5206\u5c42\u6cd5\u601d\u60f3\u5f88\u7b80\u5355\uff1a\u6240\u6709\u901a\u4fe1\u90fd\u9075\u5faa\u76f8\u540c\u7684\u57fa\u672c\u524d\u63d0\u2014\u2014\u5f53\u53c2\u8003\u6a21\u578b\u7684\u6240\u6709\u4f4e\u5c42\u7ed3\u6784\u5de5\u4f5c\u6b63\u5e38\u65f6\uff0c\u5b83\u7684\u9ad8\u5c42\u7ed3\u6784\u624d\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002","title":"\u4ec0\u4e48\u662f\u5206\u5c42\u5904\u7406\u6cd5\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_296","text":"","title":"\u5206\u5c42\u6cd5\u5904\u7406\u6848\u4f8b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_297","text":"","title":"\u5206\u6bb5\u6545\u969c\u5904\u7406\u6848\u4f8b\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_298","text":"\u5f53\u6000\u7591\u662f\u7f51\u7ebf\u95ee\u9898\u65f6\uff0c\u66f4\u6362\u4e00\u6839\u786e\u5b9a\u662f\u597d\u7684\u7f51\u7ebf\u8bd5\u4e00\u8bd5\uff1b \u5f53\u6000\u7591\u662f\u63a5\u53e3\u6a21\u5757\u6709\u95ee\u9898\u65f6\uff0c\u66f4\u6362\u4e00\u4e2a\u5176\u5b83\u63a5\u53e3\u6a21\u5757\u8bd5\u4e00\u8bd5 \uff1b \u5728\u5b9e\u9645\u7f51\u7edc\u6545\u969c\u6392\u9519\u65f6\uff0c\u53ef\u4ee5\u5148\u91c7\u7528\u5206\u6bb5\u6cd5\u786e\u5b9a\u6545\u969c\u70b9\uff0c\u518d\u901a\u8fc7\u5206\u5c42\u6216\u5176\u5b83\u65b9\u6cd5\u6392\u9664\u6545\u969c \u3002 \u7f51\u7edc\u6545\u969c\u5904\u7406\u6848\u4f8b","title":"\u66ff\u6362\u6cd5\uff1a\u66ff\u6362\u6cd5\u662f\u68c0\u67e5\u786c\u4ef6\u95ee\u9898\u6700\u5e38\u7528\u7684\u65b9\u6cd5\u4e4b\u4e00\uff1a"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#1_4","text":"","title":"\u6848\u4f8b 1\uff1a\u67d0\u5c40\u70b9\u5355\u677f\u65e0\u6cd5\u8bbf\u95ee\u5ba2\u6237\u7f51\u7edc\u8bbe\u5907"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_299","text":"\u7f51\u7edc\u62d3\u6251\u5982\u4e0a\u56fe\u6240\u793a\u3002\u6838\u5fc3\u4ea4\u6362\u673aCO-SW\u662f\u4e24\u53f0S6300\u4ea4\u6362\u673a\uff08\u5806\u53e0\u7ec4\uff09\uff0cCO-SW\u4f5c\u4e3aATAE3.0\u4e1a\u52a1\u5355\u677f\u7684\u7f51\u5173\u8bbe\u5907\u3002CO-SW\u4e0eFW1/FW2\u91c7\u7528\u72ec\u7acb\u7684VLAN\u8fdb\u884c\u4e09\u5c42\u5bf9\u63a5\uff0c\u91c7\u7528\u9759\u6001\u8def\u7531\u7684\u5bf9\u63a5\u65b9\u6848\u3002CO-SW\u914d\u7f6e\u9ed8\u8ba4\u8def\u7531\uff0c\u4e0b\u4e00\u8df3\u4e3a\u9632\u706b\u5899\u3002FW1/FW2\u4ee5\u4e3b\u5907\u65b9\u5f0f\u5de5\u4f5c\uff0cFW1\u88ab\u914d\u7f6e\u4e3a\u521d\u59cb\u65f6\u7684\u4e3b\u5899\u3002FW1/FW2\u914d\u7f6e\u4e86 HRP\u975e\u62a2\u5360\uff0c\u5f00\u542f\u4e86HRP\u4f1a\u8bdd\u5feb\u901f\u955c\u50cf\uff0c\u6b64\u524d\u7531\u4e8e\u8fdb\u884c\u8fc7\u5207\u6362\u6d4b\u8bd5\uff0c\u56e0\u6b64FW2\u662f\u5f53\u524d\u7684\u4e3b\u5899\u3002\u4e00\u7ebf\u53cd\u9988ATAE3.0\u4e2d\u7684\u670d\u52a1\u5668\u5355\u677f\u5b58\u5728\u5982\u4e0b\u95ee\u9898\uff1a \u5355\u677f\u80fdping\u901a\u7f51\u5173\uff08CO-SW\uff09\uff0c\u5355\u677f\u7684\u7f3a\u7701\u7f51\u5173\u662fCO-SW\u7684Vlanif\uff1b \u5355\u677f\u80fdping\u901a192.168.1.1\uff08\u8be5\u5730\u5740\u662f\u9632\u706b\u5899\u5185\u90e8\u63a5\u53e3\uff0c\u6216\u8005\u8bf4\u4e0b\u884c\u63a5\u53e3\u7684VRRP\u6d6e\u52a8IP\u5730\u5740\uff09\uff1b \u5355\u677f\u80fdping\u901a10.1.1.1\uff08\u8be5\u5730\u5740\u662f\u9632\u706b\u5899\u5bf9\u5916\u63a5\u53e3\uff0c\u6216\u8005\u8bf4\u4e0a\u884c\u63a5\u53e3\u7684VRRP\u6d6e\u52a8IP\u5730\u5740\uff09\uff1b \u5355\u677f\u65e0\u6cd5ping\u901a10.1.1.5\uff1b\uff08C1/C2\u4e3a\u5ba2\u6237\u4ea4\u6362\u673a\uff09\uff1b \u5355\u677f\u65e0\u6cd5ping\u901a\u5ba2\u6237\u7f51\u7edc\u4e2d\u7684\u67d0\u4e2a\u8bbe\u590710.3.97.6\u3002","title":"\u6545\u969c\u80cc\u666f"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_300","text":"\u68c0\u67e5\u5f53\u524d\u4e3b\u5899FW2\u7684\u914d\u7f6e\uff0c\u53d1\u73b0\u4e0a\u884c\u63a5\u53e3\u3001\u4e0b\u884c\u63a5\u53e3\u5747\u88ab\u653e\u7f6e\u5728trust\u533a\u57df\uff0c\u800cNGFW\uff08\u73b0\u573a\u662fE1000E- N\u9632\u706b\u5899\uff09\u5bf9\u4e8e\u76f8\u540c\u533a\u57df\u5185\u3001\u4e0d\u540c\u63a5\u53e3\u95f4\u7684\u6d41\u91cf\u7f3a\u7701\u7981\u6b62\uff0c\u56e0\u6b64\u5355\u677f\u8bbf\u95ee\u5ba2\u6237\u7f51\u7edc\uff08\u6d41\u91cf\u662f\u4ecetrust\u5230trust\uff09 \u81ea\u7136\u662f\u4e0d\u901a\u7684\u3002 \u4e00\u7ebf\u6309\u7167\u8981\u6c42\u5c06FW1/FW2\u4e0a\u884c\u63a5\u53e3\u6539\u4e3a\u653e\u7f6e\u5728untrust\u533a\u57df\uff0c\u4e14\u914d\u7f6e\u4e86trust\u5230untrust\u533a\u57df\u7684\u5b89\u5168\u7b56\u7565\uff0c \u53d1\u73b0\u5355\u677f\u53ef\u4ee5ping\u901a10.1.1.5\uff0c\u4f46\u662f\u4f9d\u7136\u65e0\u6cd5ping\u901a\u5ba2\u6237\u7f51\u7edc\u4e2d\u7684\u670d\u52a1\u566810.3.97.6\u3002\u5728\u6267\u884cping\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5728\u5f53\u524d\u4e3b\u5899FW2\u4e0a\u65e0\u6cd5\u89c2\u5bdf\u5230Session\uff0c\u8bf4\u660e\u53ef\u80fd\u62a5\u6587\u6ca1\u6709\u5230\u8fbeFW2\uff0c\u6216\u8005\u5230\u8fbe\u4e86\u5374\u6ca1\u88ab\u5b89\u5168\u7b56\u7565\u653e\u901a\uff0c\u53c8\u6216\u8005FW2\u6ca1\u6709\u5916\u51fa\u7684\u8def\u7531\uff08\u4f7f\u5f97\u5176\u65e0\u6cd5\u5224\u65ad\u62a5\u6587\u7684\u51fa\u63a5\u53e3\u53ca\u51fa\u7ad9\u533a\u57df\uff09\uff0c\u68c0\u67e5FW2\u7684\u7b56\u7565\u53ca\u8def\u7531\u914d\u7f6e\u53d1\u73b0\u5747\u65e0\u95ee\u9898\u3002 \u5728\u4e00\u7ebf\u53cd\u9988\u7684\u6570\u636e\u4e2d\u89c2\u5bdf\u5230\uff0c\u5355\u677f\u8bbf\u95ee10.1.1.5\u65f6\uff0c\u5728\u5f53\u524d\u4e3b\u5899FW2\u770b\u5230\u7684Session\u5982\u4e0b\uff1a Session\u5e26\u6709remote\u5b57\u6837\uff0c\u8bf4\u660e\u8be5\u4f1a\u8bdd\u662f\u4eceFW1\u540c\u6b65\u8fc7\u6765\u7684\uff08\u9632\u706b\u5899\u914d\u7f6e\u4e86hrp mirror session enable\uff09\uff0c \u90a3\u4e48\u6d41\u91cf\u5e94\u8be5\u662f\u4eceFW1\u5916\u51fa\u7684\u3002\u7531\u6b64\u53ef\u731c\u6d4b\uff0c\u4ea4\u6362\u673a\u5230\u8fbe\u5ba2\u6237\u7f51\u7edc\u7684\u9ed8\u8ba4\u8def\u7531\u4e0b\u4e00\u8df3\u53ef\u80fd\u8bbe\u7f6e\u5728FW1 \u7684\u63a5\u53e3\u5b9e\u9645IP\u5730\u5740\u4e0a\uff0c\u800c\u4e0d\u662fVRRP\u865a\u62dfIP192.168.1.1\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5355\u677f\u8bbf\u95ee\u5916\u90e8\u7f51\u7edc\u7684\u6d41\u91cf\u4e0d\u662f\u4ece FW2\u5916\u51fa\uff0c\u800c\u662f\u4eceFW1\u3002 \u68c0\u67e5FW1\u7684\u914d\u7f6e\uff0c\u53d1\u73b0\u5176\u914d\u7f6e\u7684\u9759\u6001\u8def\u7531\u4e2d\uff0c\u5e76\u6ca1\u6709\u5230\u8fbe10.3.97.6\u7684\u8def\u7531\uff0c\u56e0\u6b64\u5355\u677f\u8bbf\u95ee\u8be5IP\u5730\u5740\u7684\u6d41\u91cf\u5230\u8fbeFW1\u540e\uff0c\u65e0\u6cd5\u88ab\u6b63\u5e38\u8f6c\u53d1\u3002","title":"\u6545\u969c\u5206\u6790"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#_301","text":"\u4fee\u6539\u6838\u5fc3\u4ea4\u6362\u673a\u7684\u914d\u7f6e\uff0c\u5c06\u5230\u8fbe\u5ba2\u6237\u7f51\u7edc\u7684\u8def\u7531\u6307\u5411192.168.1.1\uff1b \u5728FW1\u4e0a\u589e\u52a0\u5230\u8fbe\u5ba2\u6237\u7f51\u7edc\u7684\u8def\u7531\u3002","title":"\u89e3\u51b3\u65b9\u6848"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#2_4","text":"\u4eceClient ping 10.1.20.5\uff0c\u53d1\u73b0\u65e0\u6cd5ping\u901a\uff0c\u95ee\u9898\u5b58\u5728\u3002 \u4eceClient tracert \u76ee\u6807\u8282\u70b9\u7684\u8f93\u51fa\u6765\u770b\uff0c\u6570\u636e\u5305\u5e94\u8be5\u662f\u5230\u8fbe\u4e86\u9632\u706b\u5899\uff0c\u68c0\u67e5\u9632\u706b\u5899\u7b56\u7565\uff0c\u53d1\u73b0\u5df2\u7ecf\u57df\u95f4\u7b56\u7565\u5df2\u7ecf\u653e\u901a\u4e86\u76f8\u5e94\u7684\u6d41\u91cf\u3002 \u4eceClient ping 10.1.20.5\u65f6\uff0c\u5728\u9632\u706b\u5899\u67e5\u770b\u4f1a\u8bdd\u8868\uff0c\u53d1\u73b0\u51fa\u73b0\u4e86\u76f8\u5e94\u8868\u9879\uff0c\u8bc1\u660e\u6570\u636e\u5305\u5df2\u7ecf\u7a7f\u8d8a\u9632\u706b\u5899\u8fdb\u5165\u4e86\u5185\u7f51\u3002 \u4ece\u9632\u706b\u5899ping 10.1.20.5\uff0c\u53d1\u73b0\u80fd\u591fping\u901a\uff0c\u8bf4\u660e\u5982\u679c\u62a5\u6587\u5230\u8fbe\u9632\u706b\u5899\uff0c\u56e0\u6b64\u9632\u706b\u5899\u662f\u6709\u80fd\u529b\u62a5\u6587\u8f6c\u53d1\u5230\u76ee\u7684\u5730\u7684\u3002 \u521d\u6b65\u6000\u7591Client\u8bbf\u95eeServer\u7684Base\u7f51\u5361\u7684\u6d41\u91cf\u5df2\u7ecf\u5230\u8fbe\u4e86\u5355\u677f\uff0c\u4f46\u662f\u56de\u7a0b\u6d41\u91cf\u5b58\u5728\u95ee\u9898\uff0c\u5728\u9632\u706b\u5899\u4e0a\u67e5\u770b\u76f8\u5e94\u4f1a\u8bdd\u8868\u7684\u660e\u7ec6\u4fe1\u606f\uff08verbose\uff09\uff0c\u53d1\u73b0\u5728Client ping 10.1.20.5\u65f6\uff0c\u53bb\u7a0b\u7684\u62a5\u6587\u4e2a\u6570\u59cb\u7ec8\u5728\u589e\u52a0\uff0c \u800c\u56de\u7a0b\u62a5\u6587\u4e2a\u6570\u4e3a0\uff0c\u8fdb\u4e00\u6b65\u9a8c\u8bc1\u4e86\u6211\u4eec\u7684\u731c\u6d4b\u3002 \u68c0\u67e5Server\u7684\u8def\u7531\u914d\u7f6e\uff1a \u56e0\u6b64\uff0c\u6545\u969c\u6839\u56e0\u5982\u4e0b\uff1a","title":"\u6848\u4f8b 2"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#3_1","text":"","title":"\u6848\u4f8b 3"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#4_1","text":"\u7ecf\u68c0\u67e5\u540e\uff0c\u53d1\u73b0\u6839\u56e0\u5982\u4e0b\uff1a","title":"\u6848\u4f8b 4"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#5","text":"","title":"\u6848\u4f8b 5"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#6","text":"","title":"\u6848\u4f8b 6"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#7","text":"","title":"\u6848\u4f8b 7"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#8","text":"","title":"\u6848\u4f8b 8"},{"location":"DevOps/Routingswitch/%E6%95%B0%E9%80%9A%E7%9F%A5%E8%AF%86%E5%AE%9D%E5%85%B8_v1.6.1/#9","text":"","title":"\u6848\u4f8b 9"},{"location":"Radio/%E5%B9%B4%E5%90%8E%E6%B0%B4%E8%B0%88/","text":"\u5e74\u540e\u6c34\u8c08 \u00b6 \u9996\u5148\u8981\u8ddf\u5927\u5bb6\u8bf4\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u8fd9\u4e00\u671f\u7684\u540d\u5b57\u53eb\u201c\u5e74\u540e\u6c34\u8c08\u201d\uff1b\u5176\u5b9e\u6211\u4e5f\u60f3\u628a\u8fd9\u4e2a\u540d\u5b57\u8d77\u7684\u6587\u96c5\u4e00\u70b9\uff0c\u6bd4\u5982\u4ea4\u4e2a\u201c\u5e74\u540e\u8336\u8c08\u201d\uff0c\u4f46\u662f\u7531\u4e8e\u6211\u4e0d\u559c\u6b22\u559d\u8336\uff0c\u5728\u5bb6\u91cc\u4e5f\u4e0d\u4f1a\u5e38\u5907\u7740\u8336\u53f6\u3002\u6211\u5199\u7535\u53f0\u7684\u65f6\u5019\u559d\u7684\u57fa\u672c\u90fd\u662f\u6c34\u6216\u8005\u662f\u996e\u6599\u3002\u8fd8\u6709\u5c31\u662f\u6211\u89c9\u5f97\u6211\u8bb2\u7684\u4e1c\u897f\u4e5f\u633a\u6c34\u7684\u4e8e\u662f\u7efc\u4e0a\u6240\u8ff0\u5c31\u53eb\u201d\u5e74\u540e\u6c34\u8c08\u201c\u4e86\u3002 \u8fd9\u4e00\u671f\u7535\u53f0\u5c5e\u4e8e\u662f\u6ca1\u6709\u76ee\u7684\uff0c\u4e5f\u6ca1\u6709\u8ba1\u5212\u7684\u3002\u5176\u5b9e\u4eca\u5929\u662f\u8981\u8ba1\u5212\u5e72\u70b9\u6d3b\u7684\u4f46\u662f\u5b9e\u5728\u6ca1\u5fc3\u60c5\uff0c\u4e8e\u662f\u5c31\u4e0d\u5e72\u4e86\uff0c\u53cd\u6b63\u4e5f\u6ca1\u4ec0\u4e48\u5927\u4e0d\u4e86\u7684\uff0c\u5c31\u7a81\u51fa\u4e00\u4e2a\u7387\u6027\u548c\u65e0\u6240\u540a\u8c13\u3002 \u4e4b\u524d\u51b3\u5b9a\u8bd5\u7740\u5199\u7535\u53f0\u7684\u65f6\u5019\u4e3b\u8981\u662f\u60f3\u627e\u4e00\u4e2a\u60c5\u7eea\u7684\u51fa\u53e3\uff1b\u4eba\u4eba\u90fd\u6709\u574f\u60c5\u7eea\u3002\u53ea\u4e0d\u8fc7\u662f\u53d1\u6cc4\u7684\u51fa\u53e3\u4e0d\u4e00\u6837\u7f62\u4e86\u3002\u8bf4\u8d77\u6765\u9009\u62e9\u5199\u7535\u53f0\u8fd9\u79cd\u9014\u5f84\u53ef\u80fd\u66f4\u591a\u7684\u662f\u53d7\u4e86\u4e00\u4f4d\u8001\u54e5\u7684\u5f71\u54cd\u3002\u4ece\u67d0\u79cd\u610f\u4e49\u4e0a\u8bf4\u4ed6\u8fd8\u662f\u6211\u7684\u8001\u4e61\u3002\u6211\u6700\u65e9\u60c5\u7eea\u4e0d\u597d\u7684\u65f6\u5019\u8fd8\u6ca1\u6709\u53d1\u5c55\u81ea\u5df1\u7684\u5199\u7535\u53f0\u7684\u7a0b\u5ea6\uff0c\u75c7\u72b6\u6bd4\u8f83\u8f7b\u7684\u65f6\u5019\u4e3b\u8981\u662f\u542c\u8001\u54e5\u7684\u7535\u53f0\u3002\u6211\u6700\u559c\u6b22\u542c\u4ed6\u7535\u53f0\u91cc\u7684\u6545\u4e8b\u4e86\u3002\u4ee5\u524d\u4ed6\u5728\u81ea\u5df1\u7684\u516c\u4f17\u53f7\u4e5f\u53d1\u8868\u8fc7\u4e00\u4e2a\u6ca1\u6709\u5b8c\u7ed3\u7684\u5c0f\u8bf4\u300a\u5218\u680b\u6881\u7684\u6545\u4e8b\u300b\u90a3\u65f6\u5019\u4ed6\u7684\u7535\u53f0\u53eb\u505a\u300a\u8f6f\u4ef6\u90a3\u4e9b\u4e8b\u300b\u3002\u6211\u5728\u4ed6\u7fa4\u91cc\u662f\u4ed6\u7684\u7c89\u4e1d\u3002\u6bcf\u5f53\u6211\u56e0\u4e3a\u751f\u6d3b\u7684\u6253\u51fb\u60c5\u7eea\u4f4e\u843d\u7684\u65f6\u5019\u90fd\u4f1a\u53bb\u770b\u770b\u8001\u54e5\u5199\u7684\u300a\u5218\u680b\u6881\u7684\u6545\u4e8b\u300b\u770b\u5b8c\u4e86\u4e4b\u540e\u5c3d\u7136\u6709\u4e00\u79cd\u81ea\u5df1\u8fc7\u7684\u8fd8\u4e0d\u9519\u7684\u9519\u89c9\u3002\u4e8e\u662f\u5c31\u80fd\u591f\u52c7\u6562\u7684\u8d70\u8fdb\u4e00\u5bb6\u70ed\u5e72\u9762\u5e97\uff0c\u70b9\u4e0a\u4e00\u4efd5\u5757\u94b1\u7684\u70ed\u5e72\u9762\u8fd8\u8981\u5728\u52a0\u4e0a\u4e00\u4e2a\u5364\u86cb\u3002\u4e00\u5b9a\u8981\u5750\u5728\u5c4b\u5b50\u91cc\u5403\u5b8c\u518d\u8d70\uff0c\u800c\u4e0d\u662f\u53ea\u8981\u4e00\u4efd\u4e0d\u52a0\u5364\u86cb\u7684\u70ed\u5e72\u9762\u5e26\u56de\u53bb\u5403\u3002\u518d\u540e\u6765\u751f\u6d3b\u5e76\u6ca1\u6709\u5bf9\u6211\u8fdb\u884c\u4e86\u65e0\u803b\u7684\u4e0d\u95f4\u65ad\u7684\u5077\u88ad\uff0c\u6211\u8fd8\u662f\u95f4\u6b47\u6027\u7684\u5904\u5728\u4e00\u4e2a\u6bd4\u8f83\u7a77\u56f0\u6f66\u5012\u7684\u751f\u5b58\u72b6\u6001\u91cc\u9762\uff0c\u65e0\u6cd5\u81ea\u62d4\u3002\u4e8e\u662f\u6211\u4ece\u90a3\u65f6\u5019\u8d77\u5c31\u51b3\u5b9a\u81ea\u5df1\u4e5f\u5199\u4e2a\u7535\u53f0\u73a9\u73a9\u3002 \u65e2\u7136\u51b3\u5b9a\u5199\u7535\u53f0\u4e86\u5c31\u8981\u770b\u770b\u505a\u7535\u53f0\u7a76\u7adf\u662f\u9700\u8981\u90a3\u4e9b\u8bbe\u5907\u5462\uff0c\u6211\u5728B\u7ad9\u7ed3\u7ed3\u5b9e\u5b9e\u7684\u770b\u4e86\u597d\u51e0\u5929\uff0c\u77e5\u4e4e\u4e0a\u4e5f\u641c\u4e86\u641c\u3002\u597d\u5bb6\u4f19\u4ece\u8f6f\u4ef6\u5230\u786c\u4ef6\u8fd8\u662f\u771f\u4e0d\u5c11\uff0c\u6709\u4e9b\u4eba\u5c31\u8bf4\u81f3\u5c11\u5f97\u4e70\u4e00\u4e2a\u9ea6\u514b\u5206\u5427\u3002\u7136\u540e\u6211\u5c31\u5927\u6982\u7684\u770b\u4e86\u770b\u3002\u5176\u4e2d\u4e00\u4e2a\u63a8\u8350\u6700\u591a\u7684\u5c31\u662f\u90a3\u4e2a\u7f57\u6280\u7684Blue yeti\u3002\u4e0d\u8fc7\u8bf4\u5b9e\u8bdd\u90a3\u4e2a\u9ea6\u514b\u98ce\u786e\u5b9e\u770b\u8d77\u6765\u975e\u5e38\u7684\u70ab\u9177\u548c\u4e13\u4e1a\u3002\u4f46\u662f\u4e00\u5343\u5927\u51e0\u7684\u4ef7\u683c\u6211\u5c5e\u5b9e\u9ad8\u6500\u4e0d\u8d77\uff0c\u6240\u4ee5\u6211\u6700\u65e9\u51e0\u671f\u5f55\u97f3\u90fd\u662f\u7528\u6211\u7684\u4e09\u661f\u624b\u673a\u5f55\u7684\u3002\u8fd8\u6709\u51e0\u671f\u662f\u5728\u7528\u8033\u673a\u4e0a\u7684\u90a3\u4e2a\u9ea6\u514b\u98ce\u5728\u697c\u9053\u91cc\u5f55\u7684\uff0c\u5e94\u8be5\u662f\u3002\u90a3\u65f6\u5019\u5b9e\u9645\u4e0a\u6211\u5bf9\u8fd9\u4e2a\u7535\u53f0\u8fd8\u662f\u633a\u4e0a\u5fc3\u7684\u3002\u6211\u611f\u89c9\u5f55\u7684\u6548\u679c\u786e\u5b9e\u4e0d\u548b\u5730\u4e8e\u662f\u5c31\u8fd8\u662f\u60f3\u7740\u4e70\u4e00\u4e2a\u9ea6\u514b\u98ce\u3002\u6700\u540e\u6211\u5728\u95f2\u9c7c\u4e0a\u4e70\u4e86\u4e2a\u4e8c\u624b\u7684snow ball\u4e5f\u662f\u7f57\u6280\u7684\u4e00\u4e2a\u9ea6\u514b\u98ce\u5f53\u65f6\u82b1\u4e86\u5dee\u4e0d\u591a300\u5757\u5de6\u53f3\u5427\u3002\u5f53\u65f6\u8fd8\u633a\u5f00\u5fc3\uff0c\u4f46\u662f\u6211\u5f53\u65f6\u4f4f\u7684\u5730\u65b9\u5f55\u97f3\u6761\u4ef6\u8fd8\u662f\u6bd4\u8f83\u5dee\u7684\u3002\u56e0\u4e3a\u90a3\u65f6\u5019\u623f\u95f4\u91cc\u9664\u4e86\u4eba\u610f\u5916\u8fd8\u6709\u51e0\u53f0\u670d\u52a1\u5668\u3002\u8fd0\u884c\u7684\u65f6\u5019\u566a\u97f3\u8fd8\u662f\u6709\u4e00\u4e9b\u7684\u3002\u5b9e\u9645\u4e0a\u5f55\u51fa\u6765\u6211\u611f\u89c9\u6548\u679c\u4e5f\u4e0d\u662f\u5f88\u597d\uff0c\u518d\u540e\u6765\u6211\u6362\u4e86\u5730\u65b9\u6548\u679c\u4e5f\u597d\u4e86\u4f46\u662f\u6211\u5c31\u4e0d\u600e\u4e48\u66f4\u65b0\u7535\u53f0\u4e86\u3002 \u6240\u6709\u4e8b\u60c5\u5bf9\u5927\u90e8\u5206\u6765\u8bf4\u53ef\u80fd\u5f00\u5934\u90fd\u4e0d\u7b97\u662f\u975e\u5e38\u7684\u56f0\u96be\uff0c\u6bd4\u8f83\u56f0\u96be\u7684\u5b9e\u9645\u4e0a\u662f\u957f\u4e45\u575a\u6301\u4e0b\u53bb\u3002\u8fd9\u4e2a\u771f\u7684\u5f88\u96be\uff0c\u8d77\u7801\u5728\u6211\u8fd9\u91cc\u662f\u8fd9\u6837\u7684\u3002\u4e5f\u53ef\u80fd\u662f\u505a\u7740\u505a\u7740\u5c31\u6ca1\u4ec0\u4e48\u4fe1\u5fc3\u4e86\u3002\u6700\u8fd1\u4f7f\u6211\u91cd\u62fe\u4fe1\u5fc3\u7684\u4e00\u4ef6\u4e8b\u5b9e\u9645\u4e0a\u6709\u4eba\u8bf4\u6211\u8bb2\u8bfe\u7684\u98ce\u683c\u8fd8\u53ef\u4ee5\u4e8e\u662f\u6211\u5c31\u91cd\u62fe\u4e86\u4e00\u4e0b\u4fe1\u5fc3\u6253\u7b97\u5f55\u70b9\u8bfe\u7a0b\u4ec0\u4e48\u7684\u3002\u5f55\u7740\u73a9\u4e00\u8fb9\u5b66\u4e60\u4e00\u8fb9\u5f55\u5236\u3002\u6240\u4ee5\u4e3a\u6b64\u6211\u53c8\u65b0\u5f00\u4e86\u4e00\u4e2aB\u7ad9\u7684\u8d26\u53f7\u3002\u521d\u6b65\u8ba1\u5212\u662f\u8bb2\u70b9\u7f51\u7edc\u76f8\u5173\u7684\u540e\u9762\u4e5f\u53ef\u80fd\u66f4\u65b0\u70b9\u5176\u4ed6\u65b9\u5411\u7684\u5185\u5bb9\uff0c\u8d70\u4e00\u6b65\u770b\u4e00\u6b65\u5427\u3002 \u5176\u5b9e\u4ece\u5de5\u4f5c\u4e4b\u540e\u6211\u5b9e\u9645\u4e0a\u662f\u8d8a\u6765\u8d8a\u60b2\u89c2\u7684\u4e00\u4e2a\u72b6\u6001\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u82b8\u82b8\u4f17\u751f\u91cc\u9762\u7684\u666e\u901a\u4eba\uff0c\u6211\u8fd8\u662f\u60f3\u7559\u4e0b\u4e00\u70b9\u6570\u5b57\u4e16\u754c\u7684\u8d44\u4ea7\u3002\u5bf9\u4e8e\u6211\u8fd9\u79cd\u5c4c\u4e1d\u6765\u8bf4\uff0c\u7559\u4e0b\u7684\u7269\u7406\u7684\u8d44\u4ea7\u5b9e\u9645\u4e0a\u4e0d\u592a\u73b0\u5b9e\u7684\uff0c\u5bf9\u6b64\u6211\u7279\u522b\u7684\u60b2\u89c2\u3002\u4f46\u662f\u80fd\u7559\u4e0b\u4e00\u70b9\u89c6\u9891\u8d44\u6599\u6211\u89c9\u5f97\u6211\u8fd8\u662f\u80fd\u591f\u505a\u5230\u7684\uff0c\u5f53\u7136\u8981\u662f\u6709\u673a\u4f1a\u7684\u8bdd\u6211\u4e5f\u60f3\u51fa\u672c\u4e66\u4ec0\u4e48\u7684\uff0c\u4f46\u662f\u8fd9\u4e2a\u592a\u8fdc\u4e86\u57fa\u672c\u4e0a\u770b\u4e0d\u5230\u3002\u6700\u540e\u5b89\u5229\u4e00\u4e0b\u6211\u7684B\u7ad9\u8d26\u53f7\u201c\u534a\u540a\u5b50\u8001\u6cd5\u5e08\u201d\u3002\u4e0d\u8fc7\u73b0\u5728\u8fd9\u4e2a\u8d26\u53f7\u6682\u65f6\u8fd8\u6ca1\u6709\u4efb\u4f55\u5185\u5bb9\uff0c\u56e0\u4e3a\u662f\u6628\u5929\u624d\u6ce8\u518c\u7684\uff0c\u5e0c\u671b\u6211\u80fd\u591f\u505a\u5230\u4e00\u5468\u4e00\u66f4\u5427\u3002\u5c31\u5230\u8fd9\u91cc\u518d\u89c1\u3002","title":"\u5e74\u540e\u6c34\u8c08"},{"location":"Radio/%E5%B9%B4%E5%90%8E%E6%B0%B4%E8%B0%88/#_1","text":"\u9996\u5148\u8981\u8ddf\u5927\u5bb6\u8bf4\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u8fd9\u4e00\u671f\u7684\u540d\u5b57\u53eb\u201c\u5e74\u540e\u6c34\u8c08\u201d\uff1b\u5176\u5b9e\u6211\u4e5f\u60f3\u628a\u8fd9\u4e2a\u540d\u5b57\u8d77\u7684\u6587\u96c5\u4e00\u70b9\uff0c\u6bd4\u5982\u4ea4\u4e2a\u201c\u5e74\u540e\u8336\u8c08\u201d\uff0c\u4f46\u662f\u7531\u4e8e\u6211\u4e0d\u559c\u6b22\u559d\u8336\uff0c\u5728\u5bb6\u91cc\u4e5f\u4e0d\u4f1a\u5e38\u5907\u7740\u8336\u53f6\u3002\u6211\u5199\u7535\u53f0\u7684\u65f6\u5019\u559d\u7684\u57fa\u672c\u90fd\u662f\u6c34\u6216\u8005\u662f\u996e\u6599\u3002\u8fd8\u6709\u5c31\u662f\u6211\u89c9\u5f97\u6211\u8bb2\u7684\u4e1c\u897f\u4e5f\u633a\u6c34\u7684\u4e8e\u662f\u7efc\u4e0a\u6240\u8ff0\u5c31\u53eb\u201d\u5e74\u540e\u6c34\u8c08\u201c\u4e86\u3002 \u8fd9\u4e00\u671f\u7535\u53f0\u5c5e\u4e8e\u662f\u6ca1\u6709\u76ee\u7684\uff0c\u4e5f\u6ca1\u6709\u8ba1\u5212\u7684\u3002\u5176\u5b9e\u4eca\u5929\u662f\u8981\u8ba1\u5212\u5e72\u70b9\u6d3b\u7684\u4f46\u662f\u5b9e\u5728\u6ca1\u5fc3\u60c5\uff0c\u4e8e\u662f\u5c31\u4e0d\u5e72\u4e86\uff0c\u53cd\u6b63\u4e5f\u6ca1\u4ec0\u4e48\u5927\u4e0d\u4e86\u7684\uff0c\u5c31\u7a81\u51fa\u4e00\u4e2a\u7387\u6027\u548c\u65e0\u6240\u540a\u8c13\u3002 \u4e4b\u524d\u51b3\u5b9a\u8bd5\u7740\u5199\u7535\u53f0\u7684\u65f6\u5019\u4e3b\u8981\u662f\u60f3\u627e\u4e00\u4e2a\u60c5\u7eea\u7684\u51fa\u53e3\uff1b\u4eba\u4eba\u90fd\u6709\u574f\u60c5\u7eea\u3002\u53ea\u4e0d\u8fc7\u662f\u53d1\u6cc4\u7684\u51fa\u53e3\u4e0d\u4e00\u6837\u7f62\u4e86\u3002\u8bf4\u8d77\u6765\u9009\u62e9\u5199\u7535\u53f0\u8fd9\u79cd\u9014\u5f84\u53ef\u80fd\u66f4\u591a\u7684\u662f\u53d7\u4e86\u4e00\u4f4d\u8001\u54e5\u7684\u5f71\u54cd\u3002\u4ece\u67d0\u79cd\u610f\u4e49\u4e0a\u8bf4\u4ed6\u8fd8\u662f\u6211\u7684\u8001\u4e61\u3002\u6211\u6700\u65e9\u60c5\u7eea\u4e0d\u597d\u7684\u65f6\u5019\u8fd8\u6ca1\u6709\u53d1\u5c55\u81ea\u5df1\u7684\u5199\u7535\u53f0\u7684\u7a0b\u5ea6\uff0c\u75c7\u72b6\u6bd4\u8f83\u8f7b\u7684\u65f6\u5019\u4e3b\u8981\u662f\u542c\u8001\u54e5\u7684\u7535\u53f0\u3002\u6211\u6700\u559c\u6b22\u542c\u4ed6\u7535\u53f0\u91cc\u7684\u6545\u4e8b\u4e86\u3002\u4ee5\u524d\u4ed6\u5728\u81ea\u5df1\u7684\u516c\u4f17\u53f7\u4e5f\u53d1\u8868\u8fc7\u4e00\u4e2a\u6ca1\u6709\u5b8c\u7ed3\u7684\u5c0f\u8bf4\u300a\u5218\u680b\u6881\u7684\u6545\u4e8b\u300b\u90a3\u65f6\u5019\u4ed6\u7684\u7535\u53f0\u53eb\u505a\u300a\u8f6f\u4ef6\u90a3\u4e9b\u4e8b\u300b\u3002\u6211\u5728\u4ed6\u7fa4\u91cc\u662f\u4ed6\u7684\u7c89\u4e1d\u3002\u6bcf\u5f53\u6211\u56e0\u4e3a\u751f\u6d3b\u7684\u6253\u51fb\u60c5\u7eea\u4f4e\u843d\u7684\u65f6\u5019\u90fd\u4f1a\u53bb\u770b\u770b\u8001\u54e5\u5199\u7684\u300a\u5218\u680b\u6881\u7684\u6545\u4e8b\u300b\u770b\u5b8c\u4e86\u4e4b\u540e\u5c3d\u7136\u6709\u4e00\u79cd\u81ea\u5df1\u8fc7\u7684\u8fd8\u4e0d\u9519\u7684\u9519\u89c9\u3002\u4e8e\u662f\u5c31\u80fd\u591f\u52c7\u6562\u7684\u8d70\u8fdb\u4e00\u5bb6\u70ed\u5e72\u9762\u5e97\uff0c\u70b9\u4e0a\u4e00\u4efd5\u5757\u94b1\u7684\u70ed\u5e72\u9762\u8fd8\u8981\u5728\u52a0\u4e0a\u4e00\u4e2a\u5364\u86cb\u3002\u4e00\u5b9a\u8981\u5750\u5728\u5c4b\u5b50\u91cc\u5403\u5b8c\u518d\u8d70\uff0c\u800c\u4e0d\u662f\u53ea\u8981\u4e00\u4efd\u4e0d\u52a0\u5364\u86cb\u7684\u70ed\u5e72\u9762\u5e26\u56de\u53bb\u5403\u3002\u518d\u540e\u6765\u751f\u6d3b\u5e76\u6ca1\u6709\u5bf9\u6211\u8fdb\u884c\u4e86\u65e0\u803b\u7684\u4e0d\u95f4\u65ad\u7684\u5077\u88ad\uff0c\u6211\u8fd8\u662f\u95f4\u6b47\u6027\u7684\u5904\u5728\u4e00\u4e2a\u6bd4\u8f83\u7a77\u56f0\u6f66\u5012\u7684\u751f\u5b58\u72b6\u6001\u91cc\u9762\uff0c\u65e0\u6cd5\u81ea\u62d4\u3002\u4e8e\u662f\u6211\u4ece\u90a3\u65f6\u5019\u8d77\u5c31\u51b3\u5b9a\u81ea\u5df1\u4e5f\u5199\u4e2a\u7535\u53f0\u73a9\u73a9\u3002 \u65e2\u7136\u51b3\u5b9a\u5199\u7535\u53f0\u4e86\u5c31\u8981\u770b\u770b\u505a\u7535\u53f0\u7a76\u7adf\u662f\u9700\u8981\u90a3\u4e9b\u8bbe\u5907\u5462\uff0c\u6211\u5728B\u7ad9\u7ed3\u7ed3\u5b9e\u5b9e\u7684\u770b\u4e86\u597d\u51e0\u5929\uff0c\u77e5\u4e4e\u4e0a\u4e5f\u641c\u4e86\u641c\u3002\u597d\u5bb6\u4f19\u4ece\u8f6f\u4ef6\u5230\u786c\u4ef6\u8fd8\u662f\u771f\u4e0d\u5c11\uff0c\u6709\u4e9b\u4eba\u5c31\u8bf4\u81f3\u5c11\u5f97\u4e70\u4e00\u4e2a\u9ea6\u514b\u5206\u5427\u3002\u7136\u540e\u6211\u5c31\u5927\u6982\u7684\u770b\u4e86\u770b\u3002\u5176\u4e2d\u4e00\u4e2a\u63a8\u8350\u6700\u591a\u7684\u5c31\u662f\u90a3\u4e2a\u7f57\u6280\u7684Blue yeti\u3002\u4e0d\u8fc7\u8bf4\u5b9e\u8bdd\u90a3\u4e2a\u9ea6\u514b\u98ce\u786e\u5b9e\u770b\u8d77\u6765\u975e\u5e38\u7684\u70ab\u9177\u548c\u4e13\u4e1a\u3002\u4f46\u662f\u4e00\u5343\u5927\u51e0\u7684\u4ef7\u683c\u6211\u5c5e\u5b9e\u9ad8\u6500\u4e0d\u8d77\uff0c\u6240\u4ee5\u6211\u6700\u65e9\u51e0\u671f\u5f55\u97f3\u90fd\u662f\u7528\u6211\u7684\u4e09\u661f\u624b\u673a\u5f55\u7684\u3002\u8fd8\u6709\u51e0\u671f\u662f\u5728\u7528\u8033\u673a\u4e0a\u7684\u90a3\u4e2a\u9ea6\u514b\u98ce\u5728\u697c\u9053\u91cc\u5f55\u7684\uff0c\u5e94\u8be5\u662f\u3002\u90a3\u65f6\u5019\u5b9e\u9645\u4e0a\u6211\u5bf9\u8fd9\u4e2a\u7535\u53f0\u8fd8\u662f\u633a\u4e0a\u5fc3\u7684\u3002\u6211\u611f\u89c9\u5f55\u7684\u6548\u679c\u786e\u5b9e\u4e0d\u548b\u5730\u4e8e\u662f\u5c31\u8fd8\u662f\u60f3\u7740\u4e70\u4e00\u4e2a\u9ea6\u514b\u98ce\u3002\u6700\u540e\u6211\u5728\u95f2\u9c7c\u4e0a\u4e70\u4e86\u4e2a\u4e8c\u624b\u7684snow ball\u4e5f\u662f\u7f57\u6280\u7684\u4e00\u4e2a\u9ea6\u514b\u98ce\u5f53\u65f6\u82b1\u4e86\u5dee\u4e0d\u591a300\u5757\u5de6\u53f3\u5427\u3002\u5f53\u65f6\u8fd8\u633a\u5f00\u5fc3\uff0c\u4f46\u662f\u6211\u5f53\u65f6\u4f4f\u7684\u5730\u65b9\u5f55\u97f3\u6761\u4ef6\u8fd8\u662f\u6bd4\u8f83\u5dee\u7684\u3002\u56e0\u4e3a\u90a3\u65f6\u5019\u623f\u95f4\u91cc\u9664\u4e86\u4eba\u610f\u5916\u8fd8\u6709\u51e0\u53f0\u670d\u52a1\u5668\u3002\u8fd0\u884c\u7684\u65f6\u5019\u566a\u97f3\u8fd8\u662f\u6709\u4e00\u4e9b\u7684\u3002\u5b9e\u9645\u4e0a\u5f55\u51fa\u6765\u6211\u611f\u89c9\u6548\u679c\u4e5f\u4e0d\u662f\u5f88\u597d\uff0c\u518d\u540e\u6765\u6211\u6362\u4e86\u5730\u65b9\u6548\u679c\u4e5f\u597d\u4e86\u4f46\u662f\u6211\u5c31\u4e0d\u600e\u4e48\u66f4\u65b0\u7535\u53f0\u4e86\u3002 \u6240\u6709\u4e8b\u60c5\u5bf9\u5927\u90e8\u5206\u6765\u8bf4\u53ef\u80fd\u5f00\u5934\u90fd\u4e0d\u7b97\u662f\u975e\u5e38\u7684\u56f0\u96be\uff0c\u6bd4\u8f83\u56f0\u96be\u7684\u5b9e\u9645\u4e0a\u662f\u957f\u4e45\u575a\u6301\u4e0b\u53bb\u3002\u8fd9\u4e2a\u771f\u7684\u5f88\u96be\uff0c\u8d77\u7801\u5728\u6211\u8fd9\u91cc\u662f\u8fd9\u6837\u7684\u3002\u4e5f\u53ef\u80fd\u662f\u505a\u7740\u505a\u7740\u5c31\u6ca1\u4ec0\u4e48\u4fe1\u5fc3\u4e86\u3002\u6700\u8fd1\u4f7f\u6211\u91cd\u62fe\u4fe1\u5fc3\u7684\u4e00\u4ef6\u4e8b\u5b9e\u9645\u4e0a\u6709\u4eba\u8bf4\u6211\u8bb2\u8bfe\u7684\u98ce\u683c\u8fd8\u53ef\u4ee5\u4e8e\u662f\u6211\u5c31\u91cd\u62fe\u4e86\u4e00\u4e0b\u4fe1\u5fc3\u6253\u7b97\u5f55\u70b9\u8bfe\u7a0b\u4ec0\u4e48\u7684\u3002\u5f55\u7740\u73a9\u4e00\u8fb9\u5b66\u4e60\u4e00\u8fb9\u5f55\u5236\u3002\u6240\u4ee5\u4e3a\u6b64\u6211\u53c8\u65b0\u5f00\u4e86\u4e00\u4e2aB\u7ad9\u7684\u8d26\u53f7\u3002\u521d\u6b65\u8ba1\u5212\u662f\u8bb2\u70b9\u7f51\u7edc\u76f8\u5173\u7684\u540e\u9762\u4e5f\u53ef\u80fd\u66f4\u65b0\u70b9\u5176\u4ed6\u65b9\u5411\u7684\u5185\u5bb9\uff0c\u8d70\u4e00\u6b65\u770b\u4e00\u6b65\u5427\u3002 \u5176\u5b9e\u4ece\u5de5\u4f5c\u4e4b\u540e\u6211\u5b9e\u9645\u4e0a\u662f\u8d8a\u6765\u8d8a\u60b2\u89c2\u7684\u4e00\u4e2a\u72b6\u6001\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u82b8\u82b8\u4f17\u751f\u91cc\u9762\u7684\u666e\u901a\u4eba\uff0c\u6211\u8fd8\u662f\u60f3\u7559\u4e0b\u4e00\u70b9\u6570\u5b57\u4e16\u754c\u7684\u8d44\u4ea7\u3002\u5bf9\u4e8e\u6211\u8fd9\u79cd\u5c4c\u4e1d\u6765\u8bf4\uff0c\u7559\u4e0b\u7684\u7269\u7406\u7684\u8d44\u4ea7\u5b9e\u9645\u4e0a\u4e0d\u592a\u73b0\u5b9e\u7684\uff0c\u5bf9\u6b64\u6211\u7279\u522b\u7684\u60b2\u89c2\u3002\u4f46\u662f\u80fd\u7559\u4e0b\u4e00\u70b9\u89c6\u9891\u8d44\u6599\u6211\u89c9\u5f97\u6211\u8fd8\u662f\u80fd\u591f\u505a\u5230\u7684\uff0c\u5f53\u7136\u8981\u662f\u6709\u673a\u4f1a\u7684\u8bdd\u6211\u4e5f\u60f3\u51fa\u672c\u4e66\u4ec0\u4e48\u7684\uff0c\u4f46\u662f\u8fd9\u4e2a\u592a\u8fdc\u4e86\u57fa\u672c\u4e0a\u770b\u4e0d\u5230\u3002\u6700\u540e\u5b89\u5229\u4e00\u4e0b\u6211\u7684B\u7ad9\u8d26\u53f7\u201c\u534a\u540a\u5b50\u8001\u6cd5\u5e08\u201d\u3002\u4e0d\u8fc7\u73b0\u5728\u8fd9\u4e2a\u8d26\u53f7\u6682\u65f6\u8fd8\u6ca1\u6709\u4efb\u4f55\u5185\u5bb9\uff0c\u56e0\u4e3a\u662f\u6628\u5929\u624d\u6ce8\u518c\u7684\uff0c\u5e0c\u671b\u6211\u80fd\u591f\u505a\u5230\u4e00\u5468\u4e00\u66f4\u5427\u3002\u5c31\u5230\u8fd9\u91cc\u518d\u89c1\u3002","title":"\u5e74\u540e\u6c34\u8c08"},{"location":"Radio/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/","text":"\u5e74\u5ea6\u603b\u7ed3 \u00b6 \u200b \u8bf4\u662f\u5e74\u5ea6\u603b\u7ed3\uff0c\u4e0d\u8fc7\u4e00\u5230\u8fc7\u5e74\u603b\u662f\u5f88\u96be\u62bd\u51fa\u4e00\u70b9\u529f\u592b\u7559\u7ed9\u81ea\u5df1\u3002\u4eca\u5929\u4e0b\u5348\u8d81\u7740\u6ca1\u4e8b\u7b80\u5355\u5199\u4e00\u4e0b\u3002\u5bf9\u81ea\u5df1\uff0c\u5bf9\u4eca\u5e74\u7684\u4e00\u4e9b\u4e8b\u60c5\u505a\u4e2a\u8bb0\u5f55\uff0c\u505a\u505a\u68b3\u7406\uff0c\u7559\u70b9\u5ff5\u60f3\u3002 \u200b 2022\u5e74\u5df2\u7ecf\u9a6c\u4e0a\u5c31\u8981\u8fc7\u53bb\u4e86\uff0c\u8bf4\u5b9e\u5728\u7684\u6211\u5df2\u7ecf\u5f00\u59cb\u6000\u5ff5\u5979\u3002\u5bf9\u4e8e\u6211\u6765\u8bf4\u5e74\u662f\u4e00\u5e74\u4e00\u5e74\u7684\u8fc7\uff0c\u65e5\u5b50\u4e5f\u662f\u4e00\u5e74\u4e00\u5e74\u7684\u8fc7\u3002\u4e0d\u8fc7\u65e5\u5b50\u662f\u4e00\u5929\u4e00\u5929\u7684\u71ac\uff0c\u5e74\u662f\u4e00\u5e74\u4e00\u5e74\u7684\u71ac\u3002\u8fc7\u5e74\u4e0d\u50cf\u662f\u8fc7\u65e5\u5b50\uff0c\u5e74\u88ab\u8d4b\u4e88\u4e86\u66f4\u591a\u7684\u542b\u4e49\u3002 \u200b 2022\u5e74\u5bf9\u6211\u81ea\u5df1\u6765\u8bf4\uff0c\u7b97\u662f\u5e73\u5e73\u65e0\u5947\u7684\u4e00\u5e74\uff0c\u4e0d\u8fc7\u6211\u8fd8\u662f\u613f\u610f\u8bb0\u5f55\u4e00\u4e0b\u3002 \u200b \u9996\u51482022\u5e74\u5f00\u5e74\u7684\u7b2c\u4e00\u4ef6\u4e8b\u60c5\u5c31\u662f\u6211\u6362\u4e86\u5730\u65b9\uff0c\u540c\u65f6\u4e5f\u6362\u4e86\u65b0\u7684\u5de5\u4f5c\u3002\u5de5\u4f5c\uff0c\u5728\u54ea\u91cc\u90fd\u662f\u5e72\uff0c\u4f46\u662f\u4e0d\u5e72\u4e0d\u884c\u3002\u5e94\u8be5\u8bf4\uff0c\u5bf9\u4e8e\u6211\u7740\u79cd\u4eba\u6765\u8bf4\u4e0d\u5e72\u4e0d\u884c\uff0c\u6bd5\u7adf\u81ea\u5df1\u6323\u5f97\u6bcf\u4e00\u5206\u8840\u6c57\u94b1\u90fd\u662f\u8d44\u672c\u5bb6\u4ece\u7259\u7f1d\u91cc\u7701\u51fa\u6765\u7684\uff0c\u771f\u662f\u4e3a\u96be\u8d44\u672c\u5bb6\u4e86\u3002\u6362\u4e86\u5de5\u4f5c\u4e4b\u540e\u5176\u5b9e\u8f7b\u677e\u4e86\u4e0d\u5c11\u3002\u5b9e\u8bdd\u5b9e\u8bf4\uff0c\u4e00\u662f\u6536\u5165\u786e\u5b9e\u4e0a\u6da8\u4e86\u4e0d\u5c11\uff0c\u4e8c\u6765\uff0c\u7126\u8651\u7684\u60c5\u7eea\u4e5f\u964d\u4f4e\u4e86\u5f88\u591a\u3002\u5f53\u7136\u4e86\uff0c\u6ca1\u6709\u94b1\u624d\u4f1a\u7126\u8651\uff0c\u90a3\u4e48\u4e3a\u4ec0\u4e48\u4f1a\u6ca1\u6709\u94b1\u5462\uff0c\u8fd9\u5176\u5b9e\u662f\u4e2a\u503c\u5f97\u601d\u8003\u7684\u95ee\u9898\uff0c\u56de\u5bb6\u51e0\u5929\u8ddf\u51e0\u4e2a\u670b\u53cb\u6bcf\u5929\u5230\u5904\u6643\u8361\u6643\u8361\uff0c\u804a\u804a\u5929\u6211\u53d1\u73b0\u4e00\u4e2a\u6bd4\u8f83\u5947\u602a\u7684\u95ee\u9898\uff0c\u5728\u5927\u591a\u6570\u65f6\u5019\uff0c\u5f80\u5f80\u5de5\u4f5c\u8d8a\u662f\u8f7b\u677e\u548c\u60ec\u610f\u90a3\u4e2a\u94b1\u6323\u5f97\u53cd\u800c\u5374\u8d8a\u591a\u3002\u4e0d\u77e5\u9053\u8fd9\u7b97\u4e0d\u7b97\u662f\u4e00\u4e2a\u8fdd\u80cc\u5e38\u7406\u7684\u53d1\u73b0\u3002\u56e0\u4e3a\u5f80\u5f80\u4ece\u5c0f\u5230\u5927\uff0c\u6211\u57fa\u672c\u662f\u88ab\u6559\u80b2\uff0c\u5148\u5403\u82e6\u5728\u4eab\u4e50\uff1b\u6709\u90a3\u4e2a\u5403\u5f97\u82e6\u4e2d\u82e6\u65b9\u4e3a\u4eba\u4e0a\u4eba\u7684\u8bf4\u6cd5\u3002\u5b9e\u9645\u4e0a\u8fd9\u662f\u5f88\u96be\u7684\u5566\u3002\u57fa\u4e8e\u6211\u6d45\u8584\u7684\u89c2\u5bdf\u6765\u770b\uff0c\u5f53\u725b\u505a\u9a6c\u5c31\u662f\u5f53\u725b\u505a\u9a6c\uff0c\u5f53\u4eba\u4e0a\u4eba\u5c31\u662f\u5f53\u4eba\u4e0a\u4eba\u3002\u4e24\u8005\u4e4b\u95f4\u597d\u50cf\u662f\u5e76\u6ca1\u6709\u4ec0\u4e48\u5fc5\u987b\u7684\u8054\u7cfb\u3002 \u200b \u6362\u5de5\u4f5c\u4e4b\u540e\uff0c\u8fd8\u6709\u4e00\u4ef6\u4e8b\u4f7f\u6211\u975e\u5e38\u7684\u5f00\u5fc3\u3002\u4eca\u5e74\u9047\u5230\u4e86\u5f88\u591a\u4eba\u3002\u8bb0\u4f4f\u4e86\u5f88\u591a\u4e0d\u540c\u7684\u9762\u5b54\u3002\u4f5c\u4e3a\u4e00\u540d\u5728\u57f9\u8bad\u884c\u4e1a\u6beb\u65e0\u5efa\u6811\u7684\u8001\u4eba\uff0c\u80fd\u591f\u8ddf\u4f17\u591a\u7684\u8d85\u7ea7\u9ad8\u6c34\u5e73\u7684\u5b66\u5458\u6109\u5feb\u7684\u76f8\u5904\uff0c\u4f7f\u6211\u611f\u5230\u975e\u5e38\u7684\u5f00\u5fc3\u3002\u5728\u4f20\u9012\u6211\u6d45\u8584\u77e5\u8bc6\u7684\u540c\u65f6\uff0c\u4e5f\u5e0c\u671b\u4ed6\u4eec\u80fd\u591f\u5728\u77ed\u77ed\u7684\u57f9\u8bad\u8fc7\u7a0b\u4e2d\u611f\u5230\u8f7b\u677e\u52a0\u6109\u5feb\u3002\u8bf4\u771f\u7684\u6211\u60f3\u5ff5\u4ed6\u4eec\u3002 \u200b \u8bf4\u56de\u81ea\u5df1\uff0c\u4e00\u662f\u5e86\u5e78\u81ea\u5df1\u6362\u4e86\u5de5\u4f5c\uff0c\u4e8c\u662f\u540e\u6094\u6ca1\u6709\u65e9\u6362\u5de5\u4f5c\u3002\u5de5\u4f5c\u8fd9\u5757\u5c31\u5148\u804a\u5230\u8fd9\u91cc\uff0c\u518d\u5f80\u4e0b\u804a\u5c31\u5bf9\u81ea\u5df1\u4e0d\u793c\u8c8c\u4e86\u3002 \u200b \u63a5\u4e0b\u6765\u8bf4\u8d77\u7b2c\u4e8c\u4ef6\u4e8b\u60c5\uff1b\u7b2c\u4e8c\u4ef6\u4e8b\u5c31\u662f\u81ea\u5df1\u4eca\u5e74\u7684\u7535\u53f0\u66f4\u7684\u786e\u5b9e\u5c11\u4e86\u5f88\u591a\u3002\u5ba2\u89c2\u7684\u539f\u56e0\u662f\u81ea\u5df1\u6362\u4e86\u5730\u65b9\u4e4b\u540e\uff0c\u62c9\u78e8\u7684\u5de5\u592b\u591a\u4e86\u3002\u6478\u9c7c\u7684\u65f6\u95f4\u4e5f\u5c31\u5c11\u4e86\uff0c\u6bd5\u7adf\u65f6\u95f4\u5bf9\u6bcf\u4e00\u4e2a\u4eba\u90fd\u662f\u516c\u5e73\u7684\uff0c\u6bcf\u4e2a\u4eba\u6bcf\u4e00\u5929\u90fd\u662f24\u5c0f\u65f6\u3002\u5c0f\u9aa1\u5b50\u591a\u62c9\u4f1a\u78e8\u5c31\u4f1a\u591a\u7528\u4e00\u4f1a\u7684\u65f6\u95f4\u3002\u53cd\u6b63\u4eca\u5e74\u6211\u4e00\u5171\u6ca1\u51fa\u51e0\u671f\u7535\u53f0\uff0c\u5199\u7684\u4e1c\u897f\u4ee5\u524d\u8fd8\u4f1a\u5f55\u4e2a\u97f3\uff0c\u8bb0\u5f55\u4e00\u4e0b\u81ea\u5df1\u7565\u5e26\u6ca7\u6851\u7684\u7a1a\u5ae9\u7684\u58f0\u97f3\uff0c\u4f46\u662f2022\u5e74\u51fa\u7684\u51e0\u671f\u7535\u53f0\u4e5f\u6ca1\u6709\u5f55\u97f3\uff0c\u5c31\u662f\u628a\u6587\u5b57\u8d34\u4e0a\u4e86\u3002\u516c\u4f17\u53f7\u6536\u83b7\u4e86\u4e00\u4e9b\u7c89\u4e1d\u4f7f\u6211\u975e\u5e38\u7684\u5f00\u5fc3\uff1b\u4f46\u662f\u6ca1\u6709\u5973\u7c89\u4e1d\u4f7f\u6211\u975e\u5e38\u7684\u6cae\u4e27\u3002\u8fd8\u6709\u4e00\u4ef6\u4e8b\u5c31\u662f\u8bf4B\u7ad9\u8d26\u53f7\u88ab\u5c01\u4e86\uff0c\u559c\u5927\u666e\u5954\u4e86\u5bb6\u4eba\u4eec\u30022022\u5e74\u5f00\u5e74\u7684\u65f6\u5019\u8bb0\u5f97\u81ea\u5df1\u8fd8\u8bf4\u5728B\u7ad9\u591a\u5f55\u70b9\u6709\u76ca\u8eab\u5fc3\u5065\u5eb7\u7684\u89c6\u9891\uff0c\u4f20\u64ad\u4e00\u4e0b\u81ea\u5df1\u6d45\u8584\u7684\u77e5\u8bc6\u3002\u7ed3\u679c\u521a\u5f55\u4e86\u4e24\u4e2a\u6559\u7a0b\uff0cB\u7ad9\u8d26\u53f7\u5c31\u767b\u4e0d\u4e0a\u4e86\uff0c\u63d0\u793a\u6211\u6709\u98ce\u9669\u4e3a\u4e86\u6211\u8d26\u53f7\u7684\u5b89\u5168\u7740\u60f3\uff0c\u6682\u65f6\u4e0d\u8ba9\u6211\u767b\u5f55\u3002\u8bf4\u5b9e\u5728\u7684\u5b89\u5168\u4e0d\u5b89\u5168\u6211\u8fd8\u4e0d\u77e5\u9053\u5417\uff0c\u53ef\u60dc\u6211\u51b2\u7684\u5927\u4f1a\u5458\uff0c\u4ee5\u53ca\u4e0a\u9762\u7684700\u6765\u4e2a\u4e0a\u4e0b\u6d6e\u52a8\u7684\u5047\u7c89\u3002\u8fd8\u6709\u6211\u7ed9B\u7ad9\u51b2\u7684\u5927\u4f1a\u5458\uff0c\u73b0\u5728\u6211\u53ea\u60f3\u8bf4\u4e00\u53e5\uff0cRNM\uff0c\u9000\u94b1\u3002\u4e0d\u8fc7\u5728\u65e0\u80fd\u72c2\u6012\u7684\u54c0\u568e\u8fc7\u540e\u6211\u4e5f\u53ea\u80fd\u5fc3\u91cc\u9ed8\u9ed8\u7684\u8bf4\u4e00\u53e5\uff0c\u65e0\u6240\u540a\u8c13\u3002 \u200b \u4eca\u5e74\u8fd8\u6709\u4e00\u4ef6\u4e8b\u60c5\u662f\u503c\u5f97\u5e86\u795d\u7684\uff0c\u5728\u5386\u7ecf\u4e09\u5e74\u4e4b\u4e45\u7684\u81ea\u613f\u5c01\u63a7\u4e4b\u540e\uff0c\u7ec8\u4e8e\u5728\u4e0d\u77e5\u4e0d\u89c9\u4e2d\uff0c\u65b0\u578b\u51a0\u72b6\u80ba\u708e\u88ab\u5ba3\u5e03\u7ed3\u675f\u4e86\u3002\u4e09\u5e74\u4ee5\u6765\u5f62\u5f62\u8272\u8272\u7684\u4eba\u548c\u4e8b\u88ab\u6df9\u6ca1\u5728\u5386\u53f2\u7684\u5c18\u57c3\u91cc\uff1b\u771f\u771f\u5047\u5047\uff0c\u4e0d\u5bb9\u7f6e\u7591\u3002\u4e0d\u77e5\u9053\u5728\u4e09\u5e74\u91cc\u5927\u5bb6\u5931\u53bb\u4e86\u4ec0\u4e48\uff1b\u4e5f\u4e0d\u77e5\u9053\u4ed6\u4eec\u5728\u4e09\u5e74\u91cc\u83b7\u5f97\u4e86\u4ec0\u4e48\u3002\u5f88\u9057\u61be\u6211\u5728\u9632\u75ab\u5ba3\u5e03\u5706\u6ee1\u6210\u529f\u4e4b\u540e\u65b0\u51a0\u4e2d\u62db\u4e86\u3002\u6211\u8fd8\u662f\u613f\u610f\u8ddf\u5927\u5bb6\u5206\u4eab\u4e00\u4e0b\u6211\u7684\u75c7\u72b6\u3002\u6211\u8bb0\u5f97\u90a3\u4e00\u5468\u56ed\u533a\u5f88\u591a\u4eba\u9646\u9646\u7eed\u7eed\u4f20\u51fa\u88ab\u611f\u67d3\u7684\u6d88\u606f\u3002\u6211\u662f\u5728\u5468\u4e94\u7684\u4e0b\u5348\u611f\u89c9\u5230\u6d51\u8eab\u53d1\u51b7\uff0c\u4f46\u662f\u75c7\u72b6\u5176\u5b9e\u662f\u6bd4\u8f83\u8f7b\u7684\uff0c\u6d4b\u4e86\u51e0\u6b21\u4f53\u6e29\u4e5f\u5e76\u6ca1\u6709\u53d1\u70e7\u7684\u8ff9\u8c61\u3002\u4f46\u662f\u4e0b\u73ed\u56de\u5bb6\u65f6\u5019\u5f00\u59cb\u65ad\u65ad\u7eed\u7eed\u7684\u54b3\u55fd\uff0c\u54b3\u55fd\u4e00\u58f0\u5c31\u4f34\u968f\u7740\u592a\u9633\u7a74\u7684\u5267\u75db\u3002\u7b2c\u4e8c\u5929\u65e9\u4e0a\u8d77\u5e8a\u65f6\u5019\uff0c\u8fd8\u662f\u6574\u4e2a\u8eab\u4f53\u53d1\u51b7\uff0c\u7531\u5185\u800c\u5916\u7684\u90a3\u79cd\u3002\u8d70\u8d77\u8def\u6765\u8f7b\u98d8\u98d8\u7684\uff0c\u6709\u79cd\u817e\u4e91\u9a7e\u96fe\u7684\u611f\u89c9\u3002\u8fd9\u4e00\u6574\u5929\u5904\u5728\u6655\u6655\u4e4e\u4e4e\u4ee5\u53ca\u65f6\u4e0d\u65f6\u7684\u95ed\u76ee\u517b\u795e\u5f53\u4e2d\u3002\u56de\u5230\u5bb6\uff0c\u5f00\u59cb\u4e86\u5267\u70c8\u7684\u54b3\u55fd\uff0c\u8fd8\u662f\u4f34\u968f\u8fd9\u5267\u70c8\u7684\u592a\u9633\u7a74\u7684\u75bc\u75db\u3002\u518d\u5f80\u540e\u5c31\u662f\u75c7\u72b6\u9010\u6e10\u51cf\u8f7b\uff0c\u6700\u540e\u4e5f\u5c31\u6ca1\u4e8b\u4e86\u3002 \u200b \u65b0\u51a0\u4e4b\u540e\uff0c\u9000\u70e7\u836f\u5f88\u96be\u4e70\u5230\u3002\u6b62\u75db\u836f\u4e5f\u5f88\u96be\u4e70\u5230\u3002\u8fd9\u79cd\u65f6\u5019\u5c31\u770b\u51fa\u4eba\u7684\u91cd\u8981\u6027\u4e86\uff0c\u50cf\u8fd9\u79cd\u836f\u5e73\u5e38\u7684\u65f6\u5019\u5927\u5bb6\u90fd\u80fd\u4e70\u5230\uff0c\u4f46\u662f\u5230\u4e86\u5173\u952e\u65f6\u5019\u5927\u90e8\u5206\u4eba\u90fd\u4e70\u4e0d\u5230\u3002\u6240\u4ee5\u8bf4\u80fd\u4e70\u5230\u548c\u80fd\u5728\u5173\u952e\u65f6\u5019\u4e70\u5230\u5dee\u522b\u8fd8\u662f\u975e\u5e38\u975e\u5e38\u5927\u7684\u3002 \u200b \u9001\u8d70\u4e86\u65e7\u7684\u4e00\u5e74\uff0c\u8fce\u6765\u4e86\u65b0\u7684\u4e00\u5e74\u3002\u6700\u540e\u795d\u5927\u5bb6\uff0c\u8eab\u4f53\u5065\u5eb7\uff0c\u4e07\u4e8b\u80dc\u610f\u3002","title":"\u5e74\u5ea6\u603b\u7ed3"},{"location":"Radio/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/#_1","text":"\u200b \u8bf4\u662f\u5e74\u5ea6\u603b\u7ed3\uff0c\u4e0d\u8fc7\u4e00\u5230\u8fc7\u5e74\u603b\u662f\u5f88\u96be\u62bd\u51fa\u4e00\u70b9\u529f\u592b\u7559\u7ed9\u81ea\u5df1\u3002\u4eca\u5929\u4e0b\u5348\u8d81\u7740\u6ca1\u4e8b\u7b80\u5355\u5199\u4e00\u4e0b\u3002\u5bf9\u81ea\u5df1\uff0c\u5bf9\u4eca\u5e74\u7684\u4e00\u4e9b\u4e8b\u60c5\u505a\u4e2a\u8bb0\u5f55\uff0c\u505a\u505a\u68b3\u7406\uff0c\u7559\u70b9\u5ff5\u60f3\u3002 \u200b 2022\u5e74\u5df2\u7ecf\u9a6c\u4e0a\u5c31\u8981\u8fc7\u53bb\u4e86\uff0c\u8bf4\u5b9e\u5728\u7684\u6211\u5df2\u7ecf\u5f00\u59cb\u6000\u5ff5\u5979\u3002\u5bf9\u4e8e\u6211\u6765\u8bf4\u5e74\u662f\u4e00\u5e74\u4e00\u5e74\u7684\u8fc7\uff0c\u65e5\u5b50\u4e5f\u662f\u4e00\u5e74\u4e00\u5e74\u7684\u8fc7\u3002\u4e0d\u8fc7\u65e5\u5b50\u662f\u4e00\u5929\u4e00\u5929\u7684\u71ac\uff0c\u5e74\u662f\u4e00\u5e74\u4e00\u5e74\u7684\u71ac\u3002\u8fc7\u5e74\u4e0d\u50cf\u662f\u8fc7\u65e5\u5b50\uff0c\u5e74\u88ab\u8d4b\u4e88\u4e86\u66f4\u591a\u7684\u542b\u4e49\u3002 \u200b 2022\u5e74\u5bf9\u6211\u81ea\u5df1\u6765\u8bf4\uff0c\u7b97\u662f\u5e73\u5e73\u65e0\u5947\u7684\u4e00\u5e74\uff0c\u4e0d\u8fc7\u6211\u8fd8\u662f\u613f\u610f\u8bb0\u5f55\u4e00\u4e0b\u3002 \u200b \u9996\u51482022\u5e74\u5f00\u5e74\u7684\u7b2c\u4e00\u4ef6\u4e8b\u60c5\u5c31\u662f\u6211\u6362\u4e86\u5730\u65b9\uff0c\u540c\u65f6\u4e5f\u6362\u4e86\u65b0\u7684\u5de5\u4f5c\u3002\u5de5\u4f5c\uff0c\u5728\u54ea\u91cc\u90fd\u662f\u5e72\uff0c\u4f46\u662f\u4e0d\u5e72\u4e0d\u884c\u3002\u5e94\u8be5\u8bf4\uff0c\u5bf9\u4e8e\u6211\u7740\u79cd\u4eba\u6765\u8bf4\u4e0d\u5e72\u4e0d\u884c\uff0c\u6bd5\u7adf\u81ea\u5df1\u6323\u5f97\u6bcf\u4e00\u5206\u8840\u6c57\u94b1\u90fd\u662f\u8d44\u672c\u5bb6\u4ece\u7259\u7f1d\u91cc\u7701\u51fa\u6765\u7684\uff0c\u771f\u662f\u4e3a\u96be\u8d44\u672c\u5bb6\u4e86\u3002\u6362\u4e86\u5de5\u4f5c\u4e4b\u540e\u5176\u5b9e\u8f7b\u677e\u4e86\u4e0d\u5c11\u3002\u5b9e\u8bdd\u5b9e\u8bf4\uff0c\u4e00\u662f\u6536\u5165\u786e\u5b9e\u4e0a\u6da8\u4e86\u4e0d\u5c11\uff0c\u4e8c\u6765\uff0c\u7126\u8651\u7684\u60c5\u7eea\u4e5f\u964d\u4f4e\u4e86\u5f88\u591a\u3002\u5f53\u7136\u4e86\uff0c\u6ca1\u6709\u94b1\u624d\u4f1a\u7126\u8651\uff0c\u90a3\u4e48\u4e3a\u4ec0\u4e48\u4f1a\u6ca1\u6709\u94b1\u5462\uff0c\u8fd9\u5176\u5b9e\u662f\u4e2a\u503c\u5f97\u601d\u8003\u7684\u95ee\u9898\uff0c\u56de\u5bb6\u51e0\u5929\u8ddf\u51e0\u4e2a\u670b\u53cb\u6bcf\u5929\u5230\u5904\u6643\u8361\u6643\u8361\uff0c\u804a\u804a\u5929\u6211\u53d1\u73b0\u4e00\u4e2a\u6bd4\u8f83\u5947\u602a\u7684\u95ee\u9898\uff0c\u5728\u5927\u591a\u6570\u65f6\u5019\uff0c\u5f80\u5f80\u5de5\u4f5c\u8d8a\u662f\u8f7b\u677e\u548c\u60ec\u610f\u90a3\u4e2a\u94b1\u6323\u5f97\u53cd\u800c\u5374\u8d8a\u591a\u3002\u4e0d\u77e5\u9053\u8fd9\u7b97\u4e0d\u7b97\u662f\u4e00\u4e2a\u8fdd\u80cc\u5e38\u7406\u7684\u53d1\u73b0\u3002\u56e0\u4e3a\u5f80\u5f80\u4ece\u5c0f\u5230\u5927\uff0c\u6211\u57fa\u672c\u662f\u88ab\u6559\u80b2\uff0c\u5148\u5403\u82e6\u5728\u4eab\u4e50\uff1b\u6709\u90a3\u4e2a\u5403\u5f97\u82e6\u4e2d\u82e6\u65b9\u4e3a\u4eba\u4e0a\u4eba\u7684\u8bf4\u6cd5\u3002\u5b9e\u9645\u4e0a\u8fd9\u662f\u5f88\u96be\u7684\u5566\u3002\u57fa\u4e8e\u6211\u6d45\u8584\u7684\u89c2\u5bdf\u6765\u770b\uff0c\u5f53\u725b\u505a\u9a6c\u5c31\u662f\u5f53\u725b\u505a\u9a6c\uff0c\u5f53\u4eba\u4e0a\u4eba\u5c31\u662f\u5f53\u4eba\u4e0a\u4eba\u3002\u4e24\u8005\u4e4b\u95f4\u597d\u50cf\u662f\u5e76\u6ca1\u6709\u4ec0\u4e48\u5fc5\u987b\u7684\u8054\u7cfb\u3002 \u200b \u6362\u5de5\u4f5c\u4e4b\u540e\uff0c\u8fd8\u6709\u4e00\u4ef6\u4e8b\u4f7f\u6211\u975e\u5e38\u7684\u5f00\u5fc3\u3002\u4eca\u5e74\u9047\u5230\u4e86\u5f88\u591a\u4eba\u3002\u8bb0\u4f4f\u4e86\u5f88\u591a\u4e0d\u540c\u7684\u9762\u5b54\u3002\u4f5c\u4e3a\u4e00\u540d\u5728\u57f9\u8bad\u884c\u4e1a\u6beb\u65e0\u5efa\u6811\u7684\u8001\u4eba\uff0c\u80fd\u591f\u8ddf\u4f17\u591a\u7684\u8d85\u7ea7\u9ad8\u6c34\u5e73\u7684\u5b66\u5458\u6109\u5feb\u7684\u76f8\u5904\uff0c\u4f7f\u6211\u611f\u5230\u975e\u5e38\u7684\u5f00\u5fc3\u3002\u5728\u4f20\u9012\u6211\u6d45\u8584\u77e5\u8bc6\u7684\u540c\u65f6\uff0c\u4e5f\u5e0c\u671b\u4ed6\u4eec\u80fd\u591f\u5728\u77ed\u77ed\u7684\u57f9\u8bad\u8fc7\u7a0b\u4e2d\u611f\u5230\u8f7b\u677e\u52a0\u6109\u5feb\u3002\u8bf4\u771f\u7684\u6211\u60f3\u5ff5\u4ed6\u4eec\u3002 \u200b \u8bf4\u56de\u81ea\u5df1\uff0c\u4e00\u662f\u5e86\u5e78\u81ea\u5df1\u6362\u4e86\u5de5\u4f5c\uff0c\u4e8c\u662f\u540e\u6094\u6ca1\u6709\u65e9\u6362\u5de5\u4f5c\u3002\u5de5\u4f5c\u8fd9\u5757\u5c31\u5148\u804a\u5230\u8fd9\u91cc\uff0c\u518d\u5f80\u4e0b\u804a\u5c31\u5bf9\u81ea\u5df1\u4e0d\u793c\u8c8c\u4e86\u3002 \u200b \u63a5\u4e0b\u6765\u8bf4\u8d77\u7b2c\u4e8c\u4ef6\u4e8b\u60c5\uff1b\u7b2c\u4e8c\u4ef6\u4e8b\u5c31\u662f\u81ea\u5df1\u4eca\u5e74\u7684\u7535\u53f0\u66f4\u7684\u786e\u5b9e\u5c11\u4e86\u5f88\u591a\u3002\u5ba2\u89c2\u7684\u539f\u56e0\u662f\u81ea\u5df1\u6362\u4e86\u5730\u65b9\u4e4b\u540e\uff0c\u62c9\u78e8\u7684\u5de5\u592b\u591a\u4e86\u3002\u6478\u9c7c\u7684\u65f6\u95f4\u4e5f\u5c31\u5c11\u4e86\uff0c\u6bd5\u7adf\u65f6\u95f4\u5bf9\u6bcf\u4e00\u4e2a\u4eba\u90fd\u662f\u516c\u5e73\u7684\uff0c\u6bcf\u4e2a\u4eba\u6bcf\u4e00\u5929\u90fd\u662f24\u5c0f\u65f6\u3002\u5c0f\u9aa1\u5b50\u591a\u62c9\u4f1a\u78e8\u5c31\u4f1a\u591a\u7528\u4e00\u4f1a\u7684\u65f6\u95f4\u3002\u53cd\u6b63\u4eca\u5e74\u6211\u4e00\u5171\u6ca1\u51fa\u51e0\u671f\u7535\u53f0\uff0c\u5199\u7684\u4e1c\u897f\u4ee5\u524d\u8fd8\u4f1a\u5f55\u4e2a\u97f3\uff0c\u8bb0\u5f55\u4e00\u4e0b\u81ea\u5df1\u7565\u5e26\u6ca7\u6851\u7684\u7a1a\u5ae9\u7684\u58f0\u97f3\uff0c\u4f46\u662f2022\u5e74\u51fa\u7684\u51e0\u671f\u7535\u53f0\u4e5f\u6ca1\u6709\u5f55\u97f3\uff0c\u5c31\u662f\u628a\u6587\u5b57\u8d34\u4e0a\u4e86\u3002\u516c\u4f17\u53f7\u6536\u83b7\u4e86\u4e00\u4e9b\u7c89\u4e1d\u4f7f\u6211\u975e\u5e38\u7684\u5f00\u5fc3\uff1b\u4f46\u662f\u6ca1\u6709\u5973\u7c89\u4e1d\u4f7f\u6211\u975e\u5e38\u7684\u6cae\u4e27\u3002\u8fd8\u6709\u4e00\u4ef6\u4e8b\u5c31\u662f\u8bf4B\u7ad9\u8d26\u53f7\u88ab\u5c01\u4e86\uff0c\u559c\u5927\u666e\u5954\u4e86\u5bb6\u4eba\u4eec\u30022022\u5e74\u5f00\u5e74\u7684\u65f6\u5019\u8bb0\u5f97\u81ea\u5df1\u8fd8\u8bf4\u5728B\u7ad9\u591a\u5f55\u70b9\u6709\u76ca\u8eab\u5fc3\u5065\u5eb7\u7684\u89c6\u9891\uff0c\u4f20\u64ad\u4e00\u4e0b\u81ea\u5df1\u6d45\u8584\u7684\u77e5\u8bc6\u3002\u7ed3\u679c\u521a\u5f55\u4e86\u4e24\u4e2a\u6559\u7a0b\uff0cB\u7ad9\u8d26\u53f7\u5c31\u767b\u4e0d\u4e0a\u4e86\uff0c\u63d0\u793a\u6211\u6709\u98ce\u9669\u4e3a\u4e86\u6211\u8d26\u53f7\u7684\u5b89\u5168\u7740\u60f3\uff0c\u6682\u65f6\u4e0d\u8ba9\u6211\u767b\u5f55\u3002\u8bf4\u5b9e\u5728\u7684\u5b89\u5168\u4e0d\u5b89\u5168\u6211\u8fd8\u4e0d\u77e5\u9053\u5417\uff0c\u53ef\u60dc\u6211\u51b2\u7684\u5927\u4f1a\u5458\uff0c\u4ee5\u53ca\u4e0a\u9762\u7684700\u6765\u4e2a\u4e0a\u4e0b\u6d6e\u52a8\u7684\u5047\u7c89\u3002\u8fd8\u6709\u6211\u7ed9B\u7ad9\u51b2\u7684\u5927\u4f1a\u5458\uff0c\u73b0\u5728\u6211\u53ea\u60f3\u8bf4\u4e00\u53e5\uff0cRNM\uff0c\u9000\u94b1\u3002\u4e0d\u8fc7\u5728\u65e0\u80fd\u72c2\u6012\u7684\u54c0\u568e\u8fc7\u540e\u6211\u4e5f\u53ea\u80fd\u5fc3\u91cc\u9ed8\u9ed8\u7684\u8bf4\u4e00\u53e5\uff0c\u65e0\u6240\u540a\u8c13\u3002 \u200b \u4eca\u5e74\u8fd8\u6709\u4e00\u4ef6\u4e8b\u60c5\u662f\u503c\u5f97\u5e86\u795d\u7684\uff0c\u5728\u5386\u7ecf\u4e09\u5e74\u4e4b\u4e45\u7684\u81ea\u613f\u5c01\u63a7\u4e4b\u540e\uff0c\u7ec8\u4e8e\u5728\u4e0d\u77e5\u4e0d\u89c9\u4e2d\uff0c\u65b0\u578b\u51a0\u72b6\u80ba\u708e\u88ab\u5ba3\u5e03\u7ed3\u675f\u4e86\u3002\u4e09\u5e74\u4ee5\u6765\u5f62\u5f62\u8272\u8272\u7684\u4eba\u548c\u4e8b\u88ab\u6df9\u6ca1\u5728\u5386\u53f2\u7684\u5c18\u57c3\u91cc\uff1b\u771f\u771f\u5047\u5047\uff0c\u4e0d\u5bb9\u7f6e\u7591\u3002\u4e0d\u77e5\u9053\u5728\u4e09\u5e74\u91cc\u5927\u5bb6\u5931\u53bb\u4e86\u4ec0\u4e48\uff1b\u4e5f\u4e0d\u77e5\u9053\u4ed6\u4eec\u5728\u4e09\u5e74\u91cc\u83b7\u5f97\u4e86\u4ec0\u4e48\u3002\u5f88\u9057\u61be\u6211\u5728\u9632\u75ab\u5ba3\u5e03\u5706\u6ee1\u6210\u529f\u4e4b\u540e\u65b0\u51a0\u4e2d\u62db\u4e86\u3002\u6211\u8fd8\u662f\u613f\u610f\u8ddf\u5927\u5bb6\u5206\u4eab\u4e00\u4e0b\u6211\u7684\u75c7\u72b6\u3002\u6211\u8bb0\u5f97\u90a3\u4e00\u5468\u56ed\u533a\u5f88\u591a\u4eba\u9646\u9646\u7eed\u7eed\u4f20\u51fa\u88ab\u611f\u67d3\u7684\u6d88\u606f\u3002\u6211\u662f\u5728\u5468\u4e94\u7684\u4e0b\u5348\u611f\u89c9\u5230\u6d51\u8eab\u53d1\u51b7\uff0c\u4f46\u662f\u75c7\u72b6\u5176\u5b9e\u662f\u6bd4\u8f83\u8f7b\u7684\uff0c\u6d4b\u4e86\u51e0\u6b21\u4f53\u6e29\u4e5f\u5e76\u6ca1\u6709\u53d1\u70e7\u7684\u8ff9\u8c61\u3002\u4f46\u662f\u4e0b\u73ed\u56de\u5bb6\u65f6\u5019\u5f00\u59cb\u65ad\u65ad\u7eed\u7eed\u7684\u54b3\u55fd\uff0c\u54b3\u55fd\u4e00\u58f0\u5c31\u4f34\u968f\u7740\u592a\u9633\u7a74\u7684\u5267\u75db\u3002\u7b2c\u4e8c\u5929\u65e9\u4e0a\u8d77\u5e8a\u65f6\u5019\uff0c\u8fd8\u662f\u6574\u4e2a\u8eab\u4f53\u53d1\u51b7\uff0c\u7531\u5185\u800c\u5916\u7684\u90a3\u79cd\u3002\u8d70\u8d77\u8def\u6765\u8f7b\u98d8\u98d8\u7684\uff0c\u6709\u79cd\u817e\u4e91\u9a7e\u96fe\u7684\u611f\u89c9\u3002\u8fd9\u4e00\u6574\u5929\u5904\u5728\u6655\u6655\u4e4e\u4e4e\u4ee5\u53ca\u65f6\u4e0d\u65f6\u7684\u95ed\u76ee\u517b\u795e\u5f53\u4e2d\u3002\u56de\u5230\u5bb6\uff0c\u5f00\u59cb\u4e86\u5267\u70c8\u7684\u54b3\u55fd\uff0c\u8fd8\u662f\u4f34\u968f\u8fd9\u5267\u70c8\u7684\u592a\u9633\u7a74\u7684\u75bc\u75db\u3002\u518d\u5f80\u540e\u5c31\u662f\u75c7\u72b6\u9010\u6e10\u51cf\u8f7b\uff0c\u6700\u540e\u4e5f\u5c31\u6ca1\u4e8b\u4e86\u3002 \u200b \u65b0\u51a0\u4e4b\u540e\uff0c\u9000\u70e7\u836f\u5f88\u96be\u4e70\u5230\u3002\u6b62\u75db\u836f\u4e5f\u5f88\u96be\u4e70\u5230\u3002\u8fd9\u79cd\u65f6\u5019\u5c31\u770b\u51fa\u4eba\u7684\u91cd\u8981\u6027\u4e86\uff0c\u50cf\u8fd9\u79cd\u836f\u5e73\u5e38\u7684\u65f6\u5019\u5927\u5bb6\u90fd\u80fd\u4e70\u5230\uff0c\u4f46\u662f\u5230\u4e86\u5173\u952e\u65f6\u5019\u5927\u90e8\u5206\u4eba\u90fd\u4e70\u4e0d\u5230\u3002\u6240\u4ee5\u8bf4\u80fd\u4e70\u5230\u548c\u80fd\u5728\u5173\u952e\u65f6\u5019\u4e70\u5230\u5dee\u522b\u8fd8\u662f\u975e\u5e38\u975e\u5e38\u5927\u7684\u3002 \u200b \u9001\u8d70\u4e86\u65e7\u7684\u4e00\u5e74\uff0c\u8fce\u6765\u4e86\u65b0\u7684\u4e00\u5e74\u3002\u6700\u540e\u795d\u5927\u5bb6\uff0c\u8eab\u4f53\u5065\u5eb7\uff0c\u4e07\u4e8b\u80dc\u610f\u3002","title":"\u5e74\u5ea6\u603b\u7ed3"},{"location":"Radio/%E6%96%B0%E7%9A%84%E4%B8%80%E6%9C%9F%E7%94%B5%E5%8F%B0/","text":"\u534a\u540a\u5b50\u5de5\u7a0b\u5e08\u5065\u8eab\u6307\u5357 \u00b6 test Your browser does not support the audio element. \u4eb2\u7231\u7684\u542c\u4f17\u670b\u53cb\u4f60\u4eec\u597d\uff0c\u6211\u5df2\u7ecf\u5f88\u4e45\u6ca1\u6709\u66f4\u65b0\u6211\u7684\u7535\u53f0\u4e86\u3002\u4eca\u5929\u4e4b\u6240\u4ee5\u66f4\u65b0\u8fd9\u4e00\u671f\u7535\u53f0\u662f\u56e0\u4e3a\u73b0\u5728\u5b9e\u5728\u662f\u7761\u4e0d\u7740\u3002\u7761\u4e0d\u7740\u7684\u539f\u56e0\u4e5f\u975e\u5e38\u7684\u7b80\u5355\uff0c\u56e0\u4e3a\u4eca\u5929\u6211\u559d\u4e86\u592a\u591a\u7684\u529f\u80fd\u996e\u6599\uff0c\u5bfc\u81f4\u6211\u76f4\u5230\u73b0\u5728\u90fd\u6bd4\u8f83\u7684\u4ea2\u594b\uff0c\u6240\u4ee5\u6211\u611f\u89c9\u529f\u80fd\u996e\u6599\u8fd9\u4e2a\u4e1c\u897f\u5c3d\u91cf\u8fd8\u662f\u5c11\u559d\u3002 \u200b \u4f5c\u4e3a\u4e00\u4e2a\u5ec9\u4ef7\u4e14\u4e0d\u4f18\u8d28\u7684\u6253\u5de5\u4eba\uff0c\u4e00\u822c\u6765\u8bf4\u7559\u7ed9\u81ea\u5df1\u7684\u80fd\u591f\u81ea\u7531\u652f\u914d\u7684\u65f6\u95f4\u76f8\u5bf9\u6765\u8bf4\u8fd8\u662f\u6bd4\u8f83\u5c11\u7684\uff0c\u53ef\u80fd\u9664\u53bb\u4e0a\u73ed\u65f6\u95f4\uff0c\u52a0\u73ed\u65f6\u95f4\uff0c\u8fd8\u6709\u5fc5\u8981\u7684\u4f11\u606f\u65f6\u95f4\u57fa\u672c\u4e0a\u5c31\u6240\u5269\u65e0\u51e0\u4e86\u3002\u5728\u4e4b\u524d\u6211\u7684\u4e2a\u4eba\u65f6\u95f4\u6bd4\u8f83\u5145\u88d5\u7684\u65f6\u5019\uff0c\u505a\u4e86\u8fd9\u4e2a\u516c\u4f17\u53f7\uff0c\u6363\u9f13\u4e86\u51e0\u7bc7\u7535\u53f0\uff0c\u8fd9\u8ba9\u6211\u611f\u5230\u5145\u5b9e\u548c\u5f00\u5fc3\uff0c\u4e5f\u66fe\u7ecf\u6210\u4e3a\u6211\u4e00\u4e2a\u6392\u89e3\u70e6\u95f7\u7684\u51fa\u53e3\u5427\u3002 \u200b \u53bb\u5e74\u5dee\u4e0d\u591a\u6574\u4e2a\u4e00\u5e74\uff0c\u6211\u7684\u72b6\u6001\u975e\u5e38\u7684\u4e0d\u597d\u3002\u4f5c\u4e3a\u4e00\u4e2a\u4e8c\u5341\u591a\u7684\u5c0f\u4f19\u6c41\u72b6\u6001\u5947\u5dee\uff0c\u5bfc\u81f4\u6211\u5f00\u59cb\u6389\u5934\u53d1\uff0c\u7136\u540e\u4e5f\u4e0d\u600e\u4e48\u63a7\u5236\u996e\u98df\uff0c\u8bf4\u5b9e\u5728\u7684\u5f53\u65f6\u4e5f\u6ca1\u4ec0\u4e48\u529e\u6cd5\u63a7\u5236\u996e\u98df\uff0c\u6bcf\u5929\u5403\u7684\u8ba9\u6211\u73b0\u5728\u56de\u60f3\u8d77\u6765\u4e5f\u4e0d\u4f1a\u5f00\u5fc3\u3002\u6240\u4ee5\u6211\u7684\u4f53\u91cd\u589e\u52a0\u4e86\u5f88\u591a\u5dee\u4e0d\u591a\u91cd\u4e86\u5341\u51e0\u516c\u65a4\u5427\uff0c\u6574\u4e2a\u4eba\u90fd\u6709\u70b9\u50cf\u662f\u5439\u80d6\u4e86\u7684\u6c14\u7403\u3002\u809a\u5b50\u5927\u7684\u771f\u7684\u50cf\u662f\u6000\u4e86\u4e2a\u5927\u80d6\u5c0f\u5b50\u3002\u73b0\u5728\u56de\u60f3\u8d77\u6765\u4e4b\u524d\u81ea\u5df1\u90a3\u4e2a\u6837\u5b50\u5c31\u7ed9\u6211\u6076\u5fc3\u7684\u4e0d\u884c\u3002\u4e4b\u540e\u6362\u4e86\u5de5\u4f5c\uff0c\u4f46\u662f\u72b6\u6001\u8fd8\u662f\u6ca1\u6709\u8f6c\u53d8\u8fc7\u6765\uff0c\u4e0a\u73ed\u65f6\u5019\u7a7f\u7684\u886c\u886b\u4e00\u5750\u4e0b\u6765\u5c31\u628a\u8863\u670d\u6263\u5b50\u5d29\u5f00\u4e86\u3002\u90a3\u4e2a\u65f6\u5019\u6211\u5c31\u610f\u8bc6\u5230\u81ea\u5df1\u4e0d\u80fd\u518d\u8fd9\u4e48\u4e0b\u53bb\u4e86\uff0c\u4e8e\u662f\u6211\u5c31\u6253\u7b97\u5065\u8eab\u3002 \u6211\u6b63\u5f0f\u5065\u8eab\u7684\u65f6\u95f4\u5e94\u8be5\u7b97\u662f\u5230\u4e86\u5e74\u4e2d\u4e86\u4e5f\u5c31\u662f\u57286\u6708\u4efd\u4e2d\u65ec\uff0c\u6211\u8bb0\u5f97\u3002\u867d\u7136\u6211\u7684\u5668\u6750\u65e9\u5c31\u4e70\u597d\u4e86\uff0c\u5e94\u8be5\u662f\u57285\u6708\u4efd\u90a3\u5757\uff0c\u6211\u4e70\u7684\u5668\u6750\u5c31\u5230\u4e86\u3002\u4f46\u662f\u56e0\u4e3a\u5bb6\u91cc\u7684\u4e00\u4e9b\u4e8b\u60c5\uff0c\u5bfc\u81f4\u6211\u5728\u516d\u6708\u4e2d\u65ec\u5de6\u53f3\u624d\u5f00\u59cb\u6b63\u5f0f\u5065\u8eab\uff0c\u4e00\u76f4\u5230\u73b0\u5728\u4e3a\u6b62\u3002\u4fdd\u6301\u5728\u4e00\u5468\u56db\u7ec3\u8fd9\u4e2a\u6837\u5b50\u3002\u4e00\u5f00\u59cb\u6211\u662f\u6253\u7b97\u7ec3\u7684\u72e0\u4e00\u70b9\u7684\uff0c\u4f46\u662f\u540e\u6765\u6211\u53d1\u73b0\u6839\u672c\u4e0d\u884c\uff0c\u56e0\u4e3a\u8eab\u4f53\u5403\u4e0d\u6d88\uff0c\u56e0\u4e3a\u4ec0\u4e48\u5462\uff0c\u4e00\u662f\u56e0\u4e3a\u8981\u5de5\u4f5c\u7684\u539f\u56e0\uff0c\u5f88\u591a\u65f6\u5019\u5230\u5bb6\u53ef\u80fd\u90fd\u665a\u4e0a\u4e5d\u70b9\u534a\u5de6\u53f3\u4e86\uff0c\u7136\u540e\u7ec3\u4e0a\u4e24\u4e2a\u5c0f\u65f6\u5de6\u53f3\u53ef\u80fd\u90fd11\u70b9\u5feb\u523012\u70b9\u4e86\uff0c\u6d17\u6d17\u7761\u89c9\u7684\u65f6\u5019\u5927\u90e8\u5206\u65f6\u95f4\u90fd\u572812\u70b9\u4e4b\u540e\u4e86\u3002\u7b2c\u4e8c\u5929\u518d\u53bb\u4e0a\u73ed\u8fd9\u5c31\u4f1a\u8ba9\u4eba\u611f\u89c9\u975e\u5e38\u7684\u7d2f\u3002\u8fd9\u91cc\u6211\u8981\u8bf4\u4e00\u4e0b\u7684\u662f\uff0c\u5728\u521a\u5f00\u59cb\u5065\u8eab\u7684\u65f6\u5019\uff0c\u57fa\u672c\u4e0a\u6211\u5355\u6b21\u8bad\u7ec3\u82b1\u8d39\u7684\u65f6\u95f4\u786e\u5b9e\u8981\u591a\u4e00\u4e9b\uff0c\u8fd9\u4e3b\u8981\u662f\u56e0\u4e3a\u5f53\u65f6\u6211\u4f53\u529b\u975e\u5e38\u7684\u5dee\uff0c\u56e0\u4e3a\u957f\u80d6\u4e4b\u540e\u8010\u529b\u5305\u62ec\u529b\u91cf\u90fd\u6389\u4e86\u5f88\u591a\uff0c\u7136\u540e\u5bfc\u81f4\u6211\u7ec4\u95f4\u4f11\u606f\u7684\u65f6\u95f4\u975e\u5e38\u957f\u3002\u6240\u4ee5\u6574\u4e2a\u8bad\u7ec3\u7684\u65f6\u5e38\u5c31\u4e0a\u6765\u4e86\u3002\u7b2c\u4e8c\u4e2a\u662f\u5f53\u6211\u5c1d\u8bd5\u57fa\u672c\u4e0a\u6bcf\u5929\u90fd\u953b\u70bc\u4ee5\u540e\u6211\u53d1\u73b0\u6211\u7684\u8eab\u4f53\u662f\u5f88\u96be\u6062\u590d\u8fc7\u6765\u7684\uff0c\u56e0\u4e3a\u6211\u9009\u62e9\u7684\u662f\u4ee5\u529b\u91cf\u8bad\u7ec3\u4e3a\u4e3b\u7684\u8bad\u7ec3\u6a21\u5f0f\uff0c\u800c\u4e0d\u662f\u6709\u6c27\u4e3a\u4e3b\u7684\u8bad\u7ec3\u6a21\u5f0f\u3002\u8fd9\u5c31\u5bfc\u81f4\u6bcf\u6b21\u8bad\u7ec3\u5b8c\u808c\u8089\u90fd\u4f1a\u6709\u4e00\u4e2a\u6062\u590d\u671f\uff0c\u5982\u679c\u4e0d\u8ba9\u808c\u8089\u4f11\u606f\u7684\u8bdd\u53ef\u80fd\u8bad\u7ec3\u6548\u679c\u5c31\u975e\u5e38\u7684\u4e0d\u7406\u60f3\u3002\u6700\u540e\u6211i\u9009\u62e9\u7684\u662f\u6bcf\u5468\u56db\u7ec3\u7684\u8bad\u7ec3\u6a21\u5f0f\uff0c\u5468\u4e00\u5468\u4e8c\u7ec3\uff0c\u5468\u56db\u5468\u516d\u7ec3\u3002\u5176\u4ed6\u65f6\u95f4\u4f11\u606f\u3002\u8fd9\u6837\u80fd\u591f\u5728\u5de5\u4f5c\u548c\u5065\u8eab\u4e4b\u95f4\u6709\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u5e73\u8861\u3002 \u200b \u8fd9\u6837\u7684\u8bad\u7ec3\u6301\u7eed\u52309\u6708\u521d\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u5df2\u7ecf\u51cf\u6389\u4e86\u4e0d\u5c11\u7684\u80a5\u8089\uff0c\u6700\u8d77\u7801\u809a\u5b50\u662f\u6ca1\u6709\u4e86\u3002\u4f46\u662f\u5982\u679c\u4e0d\u5904\u610f\u5916\u7684\u8bdd\u80af\u5b9a\u5c31\u51fa\u610f\u5916\u4e86\u3002\u521a\u8fdb9\u6708\u5c31\u542c\u5230\u6709\u4e9b\u8bb8\u7684\u98ce\u58f0\u8bf4\u662f\u8fd9\u8fb9\u6709\u75ab\u60c5\uff0c\u53ef\u80fd\u8fd8\u662f\u6bd4\u8f83\u4e25\u91cd\u3002\u8d77\u521d\u6211\u5e76\u4e0d\u5728\u610f\uff0c\u76f4\u5230\u6709\u4e00\u5929\u6211\u4e0a\u73ed\u7684\u65f6\u5019\u53d1\u73b0\uff0c\u6211\u64cd\uff0c\u90a3\u4e9b\u793e\u533a\u56e2\u8d2d\u5e73\u53f0\u4e0a\u6ca1\u6cd5\u4e70\u83dc\u4e86\u3002\u8fd9\u4e2a\u65f6\u5019\u5176\u5b9e\u5c31\u6bd4\u8f83\u7d27\u5f20\u4e86\u6211\uff0c\u6bd5\u7adf\u6211\u4e5f\u662f\u7ecf\u5386\u8fc7\u6b66\u6c49\u75ab\u60c5\u7684\u4eba\u3002\u4e8e\u662f\u6211\u5c31\u5f00\u59cb\u5728\u8d85\u5e02\u5f00\u59cb\u5c6f\u83dc\u3002\u6625\u6c5f\u6c34\u6696\u9e2d\u5148\u77e5\uff0c\u75ab\u60c5\u4e3a\u5c01\u83dc\u5148\u6da8\u3002\u8fd9\u4e2a\u65f6\u5019\u83dc\u4ef7\u5c31\u6da8\u7684\u6bd4\u8f83\u5389\u5bb3\u4e86\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u5065\u8eab\u4eba\u58eb\u6211\u53d1\u73b0\u9999\u8549\u5df2\u7ecf\u4e70\u4e0d\u5230\u4e86\uff0c\u8fd8\u6709\u597d\u4e9b\u852c\u83dc\u4e5f\u5df2\u7ecf\u4e70\u4e0d\u5230\u4e86\u3002\u732a\u8089\u7684\u4ef7\u683c\u51e0\u4e4e\u7ffb\u4e86\u4e00\u756a\u3002\u4e8e\u662f\u6211\u8ddf\u75ab\u60c5\u4e2d\u7684\u5927\u591a\u6570\u4e00\u6837\u5f00\u59cb\u4e86\u4e00\u6ce2\u62a2\u8d2d\uff0c\u75ab\u60c5\u6301\u7eed\u4e86\u5dee\u4e0d\u591a\u6574\u4e2a9\u6708\uff0c\u6211\u5927\u6982\u4ece\u63d0\u524d\u4ece\u8d85\u5e02\u4e70\u4e86\u5dee\u4e0d\u591a1000\u591a\u7684\u7269\u8d44\u3002\u52a0\u4e0a\u4e2d\u95f4\u65ad\u65ad\u7eed\u7eed\u7684\u91c7\u8d2d\u624d\u52c9\u5f3a\u591f\u5403\u3002 \u200b \u8bf4\u5b9e\u5728\u7684\u75ab\u60c5\u671f\u95f4\u88ab\u5c01\u5728\u5bb6\u91cc\uff0c\u5b9e\u9645\u4e0a\u662f\u6211\u5230\u76ee\u524d\u4e3a\u6b62\u5065\u8eab\u6700\u75db\u82e6\u7684\u4e00\u6bb5\u65f6\u95f4\u3002\u56e0\u4e3a\u8981\u505a\u6392\u961f\u505a\u6838\u9178\uff0c\u5f53\u7136\u4e86\u6211\u5e76\u4e0d\u6392\u65a5\u505a\u6838\u9178\uff0c\u867d\u7136\u6211\u6392\u65a5\u4e5f\u5e76\u6ca1\u6709\u4ec0\u4e48\u5375\u7528\u3002\u6700\u8ba9\u4eba\u5d29\u6e83\u7684\u662f\uff0c\u6bcf\u5929\u65e9\u4e0a\u5f04\u4e2a\u5587\u53ed\u5728\u5c0f\u533a\u91cc\u558a\uff0c\u6211\u65e5\uff0c\u6211\u90fd\u611f\u89c9\u8981\u628a\u6211\u7684\u9b42\u53eb\u51fa\u6765\u4e86\u3002\u6211\u5728\u8fd9\u8fb9\u79df\u7684\u623f\u5b50\uff0c\u8fd9\u623f\u5b50\u7684\u9694\u97f3\u8ddf\u4f60\u5988\u7eb8\u7cca\u7684\u4e00\u6837\uff0c\u558a\u5f97\u6211\u7cbe\u795e\u8870\u5f31\u4e86\u90fd\u3002\u8fd8\u6709\u5c31\u662f\u6211\u975e\u5e38\u4e0d\u7406\u89e3\u7684\u4e00\u4ef6\u4e8b\u60c5\u5c31\u662f\uff0c\u641e\u4e86\u4e2a\u5c0f\u533a\u6838\u9178\u7fa4\uff0c\u6bcf\u5929\u5728\u7fa4\u91cc\u53d1\u505a\u6838\u9178\u7684\u65f6\u95f4\u3002\u6bd4\u5982\u8bf4\u65e9\u4e0a\u516d\u70b9\u534a\u505a\u6838\u9178\uff0c\u603b\u6709\u4eba\u4ed6\u5988\u7684\u4e0d\u5230\u516d\u70b9\u5c31\u53bb\u6392\u961f\uff0c\u5c31\u5728\u90a3\u7ad9\u7740\u3002\u5b9e\u9645\u4e0a\u6211\u6709\u4e00\u6b21\u5076\u7136\u542c\u5230\u8bf4\u662f\u5c3c\u739b\u516d\u70b9\u534a\u5b9e\u9645\u4e0a\u505a\u6838\u9178\u7684\u5927\u767d\u662f7\u70b9\u5f00\u59cb\u3002\u6211\u5c31\u975e\u5e38\u4e0d\u7406\u89e3\u4e3a\u5565\u8981\u63d0\u641e\u4e2a\u63d0\u524d\u91cf\u3002\u8fd9\u79cd\u63d0\u524d\u53bb\u6392\u961f\u7684\u5c31\u641e\u5f97\u5927\u5bb6\u975e\u5e38\u7684\u5377\uff0c\u5411\u6211\u8fd9\u79cd\u6309\u65f6\u4e0b\u6765\u7684\u5f80\u5f80\u5c31\u6392\u5230\u7684\u961f\u4f0d\u7684\u6700\u540e\u9762\u3002\u8bf4\u5b9e\u5728\u7684\u6211\u5f88\u5d29\u6e83\uff0c\u4e0d\u7406\u89e3\u4ed6\u4eec\u5377\u4e2a\u51e0\u628a\u3002\u540e\u6765\u6211\u5c31\u518d\u4e5f\u4e0d\u51c6\u70b9\u53bb\u4e86\uff0c\u90fd\u662f\u7b49\u5230\u4e34\u8fd1\u5c3e\u58f0\u7684\u65f6\u5019\uff0c\u4ece\u9633\u53f0\u770b\u770b\u6ca1\u4eba\u4e86\u518d\u4e0b\u53bb\uff0c\u5c31\u8fd9\u6837\u4f53\u9a8c\u975e\u5e38\u597d\u3002\u6838\u9178\u505a\u7684\u975e\u5e38\u5feb\u4ece\u4e0b\u697c\u5230\u505a\u5b8c\u4e0a\u697c\u4e5f\u5c315\u52306\u5206\u949f\u3002\u4f60\u8bf4\u4f60\u505a\u4e2a\u6838\u9178\u5377\u4e2a\u51e0\u628a\u554a\uff0c\u64cd\u3002\u96be\u9053\u4eab\u53d7\u88ab\u68c9\u7b7e\u6345\u4e00\u4e0b\u8fd8\u4f1a\u6709\u5feb\u611f\u4e48\uff1f \u200b \u5728\u5c0f\u533a\u88ab\u5c01\u63a7\u671f\u95f4\uff0c\u6211\u4e0a\u5348\u88ab\u5927\u5587\u53ed\u53eb\u7684\u7761\u4e0d\u7740\uff0c\u4e8e\u662f\u4e0b\u5348\u5c31\u8865\u4e00\u4f1a\u89c9\u3002\u7761\u9192\u4e86\u8d77\u6765\u505a\u70b9\u4e1c\u897f\u5403\u3002\u6062\u590d\u5230\u665a\u4e0a\u5728\u53bb\u953b\u70bc\uff0c\u953b\u70bc\u5b8c\u4e4b\u540e\u53d1\u73b0\u65f6\u95f4\u53c8\u662f\u665a\u4e0a12\u70b9\u4ee5\u540e\u4e86\uff0c\u7136\u540e\u65e9\u4e0a\u975e\u5e38\u65e9\u518d\u4e00\u6b21\u88ab\u5927\u5587\u53ed\u558a\u8d77\u6765\u3002\u5982\u6b64\u5f80\u590d\u3002\u7761\u7720\u4e0d\u597d\u7ec3\u7684\u4e5f\u4e0d\u597d\uff0c\u5fc3\u60c5\u5565\u7684\u66f4\u522b\u8bf4\u4e86\u3002 \u200b \u953b\u70bc\u4e5f\u6709\u4e00\u6bb5\u65f6\u95f4\u4e86\uff0c\u6700\u540e\u8bf4\u4e00\u4e0b\u4e00\u70b9\u70b9\u6210\u7ee9\uff0c\u56e0\u4e3a\u6211\u4e3b\u8981\u662f\u7ec3\u5367\u63a8\u548c\u6df1\u8e72\u3002\u5367\u63a8\u7684\u8bdd\u4ece40\u516c\u65a4\u5230\u73b0\u5728100\u516c\u65a4\u80fd\u51b2\u4e00\u4e0b\uff0c85\u5df2\u7ecf\u80fd\u7a33\u5b9a\u505a\u7ec4\u4e86\u3002\u6df1\u8e72\u7684\u8bdd100\u516c\u65a4\u5dee\u4e0d\u591a\u80fd\u8e72\u4e2a12\u4e2a\u5de6\u53f3\u6700\u591a\u3002\u6781\u9650\u4e0d\u77e5\u9053\uff0c\u4ee5\u4e3a\u8fd9\u8fb9\u6ca1\u6709\u5065\u8eab\u623f\u3002\u6211\u81ea\u5df1\u4e70\u7684\u7247\u5c31\u53ea\u5230100\u516c\u65a4\u3002\u73b0\u5728\u5176\u5b9e\u8fd8\u662f\u633a\u5fd9\u7684\u8bf4\u5b9e\u5728\u7684\uff0c\u6709\u65f6\u5019\u4e0b\u73ed\u56de\u6765\u4e5f\u786e\u5b9e\u4e0d\u60f3\u7ec3\uff0c\u4f46\u662f\u90fd\u8fd8\u662f\u575a\u6301\u4e0b\u6765\u4e86\u3002\u6bd5\u7adf\u6211\u5c31\u662f\u6b7b\u4e5f\u5f97\u662f\u4e00\u5177\u5f3a\u58ee\u7684\u5c38\u4f53\u3002\u518d\u5176\u6b21\uff0c\u5982\u679c\u4ee5\u540e\u88ab\u4f18\u5316\u7684\u65f6\u5019\uff0c\u88ab\u4fdd\u5b89\u62ac\u51fa\u53bb\u4e4b\u524d\u8bf4\u4e0d\u5b9a\u80fd\u591a\u6323\u624e\u51e0\u5206\u949f\u3002\u597d\u4e86\u5c31\u8fd9\u6837\u3002\u4e0b\u671f\uff0c\u7535\u53f0\u518d\u89c1\u3002","title":"1.\u534a\u540a\u5b50\u5de5\u7a0b\u5e08\u5065\u8eab\u6307\u5357"},{"location":"Radio/%E6%96%B0%E7%9A%84%E4%B8%80%E6%9C%9F%E7%94%B5%E5%8F%B0/#_1","text":"test Your browser does not support the audio element. \u4eb2\u7231\u7684\u542c\u4f17\u670b\u53cb\u4f60\u4eec\u597d\uff0c\u6211\u5df2\u7ecf\u5f88\u4e45\u6ca1\u6709\u66f4\u65b0\u6211\u7684\u7535\u53f0\u4e86\u3002\u4eca\u5929\u4e4b\u6240\u4ee5\u66f4\u65b0\u8fd9\u4e00\u671f\u7535\u53f0\u662f\u56e0\u4e3a\u73b0\u5728\u5b9e\u5728\u662f\u7761\u4e0d\u7740\u3002\u7761\u4e0d\u7740\u7684\u539f\u56e0\u4e5f\u975e\u5e38\u7684\u7b80\u5355\uff0c\u56e0\u4e3a\u4eca\u5929\u6211\u559d\u4e86\u592a\u591a\u7684\u529f\u80fd\u996e\u6599\uff0c\u5bfc\u81f4\u6211\u76f4\u5230\u73b0\u5728\u90fd\u6bd4\u8f83\u7684\u4ea2\u594b\uff0c\u6240\u4ee5\u6211\u611f\u89c9\u529f\u80fd\u996e\u6599\u8fd9\u4e2a\u4e1c\u897f\u5c3d\u91cf\u8fd8\u662f\u5c11\u559d\u3002 \u200b \u4f5c\u4e3a\u4e00\u4e2a\u5ec9\u4ef7\u4e14\u4e0d\u4f18\u8d28\u7684\u6253\u5de5\u4eba\uff0c\u4e00\u822c\u6765\u8bf4\u7559\u7ed9\u81ea\u5df1\u7684\u80fd\u591f\u81ea\u7531\u652f\u914d\u7684\u65f6\u95f4\u76f8\u5bf9\u6765\u8bf4\u8fd8\u662f\u6bd4\u8f83\u5c11\u7684\uff0c\u53ef\u80fd\u9664\u53bb\u4e0a\u73ed\u65f6\u95f4\uff0c\u52a0\u73ed\u65f6\u95f4\uff0c\u8fd8\u6709\u5fc5\u8981\u7684\u4f11\u606f\u65f6\u95f4\u57fa\u672c\u4e0a\u5c31\u6240\u5269\u65e0\u51e0\u4e86\u3002\u5728\u4e4b\u524d\u6211\u7684\u4e2a\u4eba\u65f6\u95f4\u6bd4\u8f83\u5145\u88d5\u7684\u65f6\u5019\uff0c\u505a\u4e86\u8fd9\u4e2a\u516c\u4f17\u53f7\uff0c\u6363\u9f13\u4e86\u51e0\u7bc7\u7535\u53f0\uff0c\u8fd9\u8ba9\u6211\u611f\u5230\u5145\u5b9e\u548c\u5f00\u5fc3\uff0c\u4e5f\u66fe\u7ecf\u6210\u4e3a\u6211\u4e00\u4e2a\u6392\u89e3\u70e6\u95f7\u7684\u51fa\u53e3\u5427\u3002 \u200b \u53bb\u5e74\u5dee\u4e0d\u591a\u6574\u4e2a\u4e00\u5e74\uff0c\u6211\u7684\u72b6\u6001\u975e\u5e38\u7684\u4e0d\u597d\u3002\u4f5c\u4e3a\u4e00\u4e2a\u4e8c\u5341\u591a\u7684\u5c0f\u4f19\u6c41\u72b6\u6001\u5947\u5dee\uff0c\u5bfc\u81f4\u6211\u5f00\u59cb\u6389\u5934\u53d1\uff0c\u7136\u540e\u4e5f\u4e0d\u600e\u4e48\u63a7\u5236\u996e\u98df\uff0c\u8bf4\u5b9e\u5728\u7684\u5f53\u65f6\u4e5f\u6ca1\u4ec0\u4e48\u529e\u6cd5\u63a7\u5236\u996e\u98df\uff0c\u6bcf\u5929\u5403\u7684\u8ba9\u6211\u73b0\u5728\u56de\u60f3\u8d77\u6765\u4e5f\u4e0d\u4f1a\u5f00\u5fc3\u3002\u6240\u4ee5\u6211\u7684\u4f53\u91cd\u589e\u52a0\u4e86\u5f88\u591a\u5dee\u4e0d\u591a\u91cd\u4e86\u5341\u51e0\u516c\u65a4\u5427\uff0c\u6574\u4e2a\u4eba\u90fd\u6709\u70b9\u50cf\u662f\u5439\u80d6\u4e86\u7684\u6c14\u7403\u3002\u809a\u5b50\u5927\u7684\u771f\u7684\u50cf\u662f\u6000\u4e86\u4e2a\u5927\u80d6\u5c0f\u5b50\u3002\u73b0\u5728\u56de\u60f3\u8d77\u6765\u4e4b\u524d\u81ea\u5df1\u90a3\u4e2a\u6837\u5b50\u5c31\u7ed9\u6211\u6076\u5fc3\u7684\u4e0d\u884c\u3002\u4e4b\u540e\u6362\u4e86\u5de5\u4f5c\uff0c\u4f46\u662f\u72b6\u6001\u8fd8\u662f\u6ca1\u6709\u8f6c\u53d8\u8fc7\u6765\uff0c\u4e0a\u73ed\u65f6\u5019\u7a7f\u7684\u886c\u886b\u4e00\u5750\u4e0b\u6765\u5c31\u628a\u8863\u670d\u6263\u5b50\u5d29\u5f00\u4e86\u3002\u90a3\u4e2a\u65f6\u5019\u6211\u5c31\u610f\u8bc6\u5230\u81ea\u5df1\u4e0d\u80fd\u518d\u8fd9\u4e48\u4e0b\u53bb\u4e86\uff0c\u4e8e\u662f\u6211\u5c31\u6253\u7b97\u5065\u8eab\u3002 \u6211\u6b63\u5f0f\u5065\u8eab\u7684\u65f6\u95f4\u5e94\u8be5\u7b97\u662f\u5230\u4e86\u5e74\u4e2d\u4e86\u4e5f\u5c31\u662f\u57286\u6708\u4efd\u4e2d\u65ec\uff0c\u6211\u8bb0\u5f97\u3002\u867d\u7136\u6211\u7684\u5668\u6750\u65e9\u5c31\u4e70\u597d\u4e86\uff0c\u5e94\u8be5\u662f\u57285\u6708\u4efd\u90a3\u5757\uff0c\u6211\u4e70\u7684\u5668\u6750\u5c31\u5230\u4e86\u3002\u4f46\u662f\u56e0\u4e3a\u5bb6\u91cc\u7684\u4e00\u4e9b\u4e8b\u60c5\uff0c\u5bfc\u81f4\u6211\u5728\u516d\u6708\u4e2d\u65ec\u5de6\u53f3\u624d\u5f00\u59cb\u6b63\u5f0f\u5065\u8eab\uff0c\u4e00\u76f4\u5230\u73b0\u5728\u4e3a\u6b62\u3002\u4fdd\u6301\u5728\u4e00\u5468\u56db\u7ec3\u8fd9\u4e2a\u6837\u5b50\u3002\u4e00\u5f00\u59cb\u6211\u662f\u6253\u7b97\u7ec3\u7684\u72e0\u4e00\u70b9\u7684\uff0c\u4f46\u662f\u540e\u6765\u6211\u53d1\u73b0\u6839\u672c\u4e0d\u884c\uff0c\u56e0\u4e3a\u8eab\u4f53\u5403\u4e0d\u6d88\uff0c\u56e0\u4e3a\u4ec0\u4e48\u5462\uff0c\u4e00\u662f\u56e0\u4e3a\u8981\u5de5\u4f5c\u7684\u539f\u56e0\uff0c\u5f88\u591a\u65f6\u5019\u5230\u5bb6\u53ef\u80fd\u90fd\u665a\u4e0a\u4e5d\u70b9\u534a\u5de6\u53f3\u4e86\uff0c\u7136\u540e\u7ec3\u4e0a\u4e24\u4e2a\u5c0f\u65f6\u5de6\u53f3\u53ef\u80fd\u90fd11\u70b9\u5feb\u523012\u70b9\u4e86\uff0c\u6d17\u6d17\u7761\u89c9\u7684\u65f6\u5019\u5927\u90e8\u5206\u65f6\u95f4\u90fd\u572812\u70b9\u4e4b\u540e\u4e86\u3002\u7b2c\u4e8c\u5929\u518d\u53bb\u4e0a\u73ed\u8fd9\u5c31\u4f1a\u8ba9\u4eba\u611f\u89c9\u975e\u5e38\u7684\u7d2f\u3002\u8fd9\u91cc\u6211\u8981\u8bf4\u4e00\u4e0b\u7684\u662f\uff0c\u5728\u521a\u5f00\u59cb\u5065\u8eab\u7684\u65f6\u5019\uff0c\u57fa\u672c\u4e0a\u6211\u5355\u6b21\u8bad\u7ec3\u82b1\u8d39\u7684\u65f6\u95f4\u786e\u5b9e\u8981\u591a\u4e00\u4e9b\uff0c\u8fd9\u4e3b\u8981\u662f\u56e0\u4e3a\u5f53\u65f6\u6211\u4f53\u529b\u975e\u5e38\u7684\u5dee\uff0c\u56e0\u4e3a\u957f\u80d6\u4e4b\u540e\u8010\u529b\u5305\u62ec\u529b\u91cf\u90fd\u6389\u4e86\u5f88\u591a\uff0c\u7136\u540e\u5bfc\u81f4\u6211\u7ec4\u95f4\u4f11\u606f\u7684\u65f6\u95f4\u975e\u5e38\u957f\u3002\u6240\u4ee5\u6574\u4e2a\u8bad\u7ec3\u7684\u65f6\u5e38\u5c31\u4e0a\u6765\u4e86\u3002\u7b2c\u4e8c\u4e2a\u662f\u5f53\u6211\u5c1d\u8bd5\u57fa\u672c\u4e0a\u6bcf\u5929\u90fd\u953b\u70bc\u4ee5\u540e\u6211\u53d1\u73b0\u6211\u7684\u8eab\u4f53\u662f\u5f88\u96be\u6062\u590d\u8fc7\u6765\u7684\uff0c\u56e0\u4e3a\u6211\u9009\u62e9\u7684\u662f\u4ee5\u529b\u91cf\u8bad\u7ec3\u4e3a\u4e3b\u7684\u8bad\u7ec3\u6a21\u5f0f\uff0c\u800c\u4e0d\u662f\u6709\u6c27\u4e3a\u4e3b\u7684\u8bad\u7ec3\u6a21\u5f0f\u3002\u8fd9\u5c31\u5bfc\u81f4\u6bcf\u6b21\u8bad\u7ec3\u5b8c\u808c\u8089\u90fd\u4f1a\u6709\u4e00\u4e2a\u6062\u590d\u671f\uff0c\u5982\u679c\u4e0d\u8ba9\u808c\u8089\u4f11\u606f\u7684\u8bdd\u53ef\u80fd\u8bad\u7ec3\u6548\u679c\u5c31\u975e\u5e38\u7684\u4e0d\u7406\u60f3\u3002\u6700\u540e\u6211i\u9009\u62e9\u7684\u662f\u6bcf\u5468\u56db\u7ec3\u7684\u8bad\u7ec3\u6a21\u5f0f\uff0c\u5468\u4e00\u5468\u4e8c\u7ec3\uff0c\u5468\u56db\u5468\u516d\u7ec3\u3002\u5176\u4ed6\u65f6\u95f4\u4f11\u606f\u3002\u8fd9\u6837\u80fd\u591f\u5728\u5de5\u4f5c\u548c\u5065\u8eab\u4e4b\u95f4\u6709\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u5e73\u8861\u3002 \u200b \u8fd9\u6837\u7684\u8bad\u7ec3\u6301\u7eed\u52309\u6708\u521d\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u5df2\u7ecf\u51cf\u6389\u4e86\u4e0d\u5c11\u7684\u80a5\u8089\uff0c\u6700\u8d77\u7801\u809a\u5b50\u662f\u6ca1\u6709\u4e86\u3002\u4f46\u662f\u5982\u679c\u4e0d\u5904\u610f\u5916\u7684\u8bdd\u80af\u5b9a\u5c31\u51fa\u610f\u5916\u4e86\u3002\u521a\u8fdb9\u6708\u5c31\u542c\u5230\u6709\u4e9b\u8bb8\u7684\u98ce\u58f0\u8bf4\u662f\u8fd9\u8fb9\u6709\u75ab\u60c5\uff0c\u53ef\u80fd\u8fd8\u662f\u6bd4\u8f83\u4e25\u91cd\u3002\u8d77\u521d\u6211\u5e76\u4e0d\u5728\u610f\uff0c\u76f4\u5230\u6709\u4e00\u5929\u6211\u4e0a\u73ed\u7684\u65f6\u5019\u53d1\u73b0\uff0c\u6211\u64cd\uff0c\u90a3\u4e9b\u793e\u533a\u56e2\u8d2d\u5e73\u53f0\u4e0a\u6ca1\u6cd5\u4e70\u83dc\u4e86\u3002\u8fd9\u4e2a\u65f6\u5019\u5176\u5b9e\u5c31\u6bd4\u8f83\u7d27\u5f20\u4e86\u6211\uff0c\u6bd5\u7adf\u6211\u4e5f\u662f\u7ecf\u5386\u8fc7\u6b66\u6c49\u75ab\u60c5\u7684\u4eba\u3002\u4e8e\u662f\u6211\u5c31\u5f00\u59cb\u5728\u8d85\u5e02\u5f00\u59cb\u5c6f\u83dc\u3002\u6625\u6c5f\u6c34\u6696\u9e2d\u5148\u77e5\uff0c\u75ab\u60c5\u4e3a\u5c01\u83dc\u5148\u6da8\u3002\u8fd9\u4e2a\u65f6\u5019\u83dc\u4ef7\u5c31\u6da8\u7684\u6bd4\u8f83\u5389\u5bb3\u4e86\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u5065\u8eab\u4eba\u58eb\u6211\u53d1\u73b0\u9999\u8549\u5df2\u7ecf\u4e70\u4e0d\u5230\u4e86\uff0c\u8fd8\u6709\u597d\u4e9b\u852c\u83dc\u4e5f\u5df2\u7ecf\u4e70\u4e0d\u5230\u4e86\u3002\u732a\u8089\u7684\u4ef7\u683c\u51e0\u4e4e\u7ffb\u4e86\u4e00\u756a\u3002\u4e8e\u662f\u6211\u8ddf\u75ab\u60c5\u4e2d\u7684\u5927\u591a\u6570\u4e00\u6837\u5f00\u59cb\u4e86\u4e00\u6ce2\u62a2\u8d2d\uff0c\u75ab\u60c5\u6301\u7eed\u4e86\u5dee\u4e0d\u591a\u6574\u4e2a9\u6708\uff0c\u6211\u5927\u6982\u4ece\u63d0\u524d\u4ece\u8d85\u5e02\u4e70\u4e86\u5dee\u4e0d\u591a1000\u591a\u7684\u7269\u8d44\u3002\u52a0\u4e0a\u4e2d\u95f4\u65ad\u65ad\u7eed\u7eed\u7684\u91c7\u8d2d\u624d\u52c9\u5f3a\u591f\u5403\u3002 \u200b \u8bf4\u5b9e\u5728\u7684\u75ab\u60c5\u671f\u95f4\u88ab\u5c01\u5728\u5bb6\u91cc\uff0c\u5b9e\u9645\u4e0a\u662f\u6211\u5230\u76ee\u524d\u4e3a\u6b62\u5065\u8eab\u6700\u75db\u82e6\u7684\u4e00\u6bb5\u65f6\u95f4\u3002\u56e0\u4e3a\u8981\u505a\u6392\u961f\u505a\u6838\u9178\uff0c\u5f53\u7136\u4e86\u6211\u5e76\u4e0d\u6392\u65a5\u505a\u6838\u9178\uff0c\u867d\u7136\u6211\u6392\u65a5\u4e5f\u5e76\u6ca1\u6709\u4ec0\u4e48\u5375\u7528\u3002\u6700\u8ba9\u4eba\u5d29\u6e83\u7684\u662f\uff0c\u6bcf\u5929\u65e9\u4e0a\u5f04\u4e2a\u5587\u53ed\u5728\u5c0f\u533a\u91cc\u558a\uff0c\u6211\u65e5\uff0c\u6211\u90fd\u611f\u89c9\u8981\u628a\u6211\u7684\u9b42\u53eb\u51fa\u6765\u4e86\u3002\u6211\u5728\u8fd9\u8fb9\u79df\u7684\u623f\u5b50\uff0c\u8fd9\u623f\u5b50\u7684\u9694\u97f3\u8ddf\u4f60\u5988\u7eb8\u7cca\u7684\u4e00\u6837\uff0c\u558a\u5f97\u6211\u7cbe\u795e\u8870\u5f31\u4e86\u90fd\u3002\u8fd8\u6709\u5c31\u662f\u6211\u975e\u5e38\u4e0d\u7406\u89e3\u7684\u4e00\u4ef6\u4e8b\u60c5\u5c31\u662f\uff0c\u641e\u4e86\u4e2a\u5c0f\u533a\u6838\u9178\u7fa4\uff0c\u6bcf\u5929\u5728\u7fa4\u91cc\u53d1\u505a\u6838\u9178\u7684\u65f6\u95f4\u3002\u6bd4\u5982\u8bf4\u65e9\u4e0a\u516d\u70b9\u534a\u505a\u6838\u9178\uff0c\u603b\u6709\u4eba\u4ed6\u5988\u7684\u4e0d\u5230\u516d\u70b9\u5c31\u53bb\u6392\u961f\uff0c\u5c31\u5728\u90a3\u7ad9\u7740\u3002\u5b9e\u9645\u4e0a\u6211\u6709\u4e00\u6b21\u5076\u7136\u542c\u5230\u8bf4\u662f\u5c3c\u739b\u516d\u70b9\u534a\u5b9e\u9645\u4e0a\u505a\u6838\u9178\u7684\u5927\u767d\u662f7\u70b9\u5f00\u59cb\u3002\u6211\u5c31\u975e\u5e38\u4e0d\u7406\u89e3\u4e3a\u5565\u8981\u63d0\u641e\u4e2a\u63d0\u524d\u91cf\u3002\u8fd9\u79cd\u63d0\u524d\u53bb\u6392\u961f\u7684\u5c31\u641e\u5f97\u5927\u5bb6\u975e\u5e38\u7684\u5377\uff0c\u5411\u6211\u8fd9\u79cd\u6309\u65f6\u4e0b\u6765\u7684\u5f80\u5f80\u5c31\u6392\u5230\u7684\u961f\u4f0d\u7684\u6700\u540e\u9762\u3002\u8bf4\u5b9e\u5728\u7684\u6211\u5f88\u5d29\u6e83\uff0c\u4e0d\u7406\u89e3\u4ed6\u4eec\u5377\u4e2a\u51e0\u628a\u3002\u540e\u6765\u6211\u5c31\u518d\u4e5f\u4e0d\u51c6\u70b9\u53bb\u4e86\uff0c\u90fd\u662f\u7b49\u5230\u4e34\u8fd1\u5c3e\u58f0\u7684\u65f6\u5019\uff0c\u4ece\u9633\u53f0\u770b\u770b\u6ca1\u4eba\u4e86\u518d\u4e0b\u53bb\uff0c\u5c31\u8fd9\u6837\u4f53\u9a8c\u975e\u5e38\u597d\u3002\u6838\u9178\u505a\u7684\u975e\u5e38\u5feb\u4ece\u4e0b\u697c\u5230\u505a\u5b8c\u4e0a\u697c\u4e5f\u5c315\u52306\u5206\u949f\u3002\u4f60\u8bf4\u4f60\u505a\u4e2a\u6838\u9178\u5377\u4e2a\u51e0\u628a\u554a\uff0c\u64cd\u3002\u96be\u9053\u4eab\u53d7\u88ab\u68c9\u7b7e\u6345\u4e00\u4e0b\u8fd8\u4f1a\u6709\u5feb\u611f\u4e48\uff1f \u200b \u5728\u5c0f\u533a\u88ab\u5c01\u63a7\u671f\u95f4\uff0c\u6211\u4e0a\u5348\u88ab\u5927\u5587\u53ed\u53eb\u7684\u7761\u4e0d\u7740\uff0c\u4e8e\u662f\u4e0b\u5348\u5c31\u8865\u4e00\u4f1a\u89c9\u3002\u7761\u9192\u4e86\u8d77\u6765\u505a\u70b9\u4e1c\u897f\u5403\u3002\u6062\u590d\u5230\u665a\u4e0a\u5728\u53bb\u953b\u70bc\uff0c\u953b\u70bc\u5b8c\u4e4b\u540e\u53d1\u73b0\u65f6\u95f4\u53c8\u662f\u665a\u4e0a12\u70b9\u4ee5\u540e\u4e86\uff0c\u7136\u540e\u65e9\u4e0a\u975e\u5e38\u65e9\u518d\u4e00\u6b21\u88ab\u5927\u5587\u53ed\u558a\u8d77\u6765\u3002\u5982\u6b64\u5f80\u590d\u3002\u7761\u7720\u4e0d\u597d\u7ec3\u7684\u4e5f\u4e0d\u597d\uff0c\u5fc3\u60c5\u5565\u7684\u66f4\u522b\u8bf4\u4e86\u3002 \u200b \u953b\u70bc\u4e5f\u6709\u4e00\u6bb5\u65f6\u95f4\u4e86\uff0c\u6700\u540e\u8bf4\u4e00\u4e0b\u4e00\u70b9\u70b9\u6210\u7ee9\uff0c\u56e0\u4e3a\u6211\u4e3b\u8981\u662f\u7ec3\u5367\u63a8\u548c\u6df1\u8e72\u3002\u5367\u63a8\u7684\u8bdd\u4ece40\u516c\u65a4\u5230\u73b0\u5728100\u516c\u65a4\u80fd\u51b2\u4e00\u4e0b\uff0c85\u5df2\u7ecf\u80fd\u7a33\u5b9a\u505a\u7ec4\u4e86\u3002\u6df1\u8e72\u7684\u8bdd100\u516c\u65a4\u5dee\u4e0d\u591a\u80fd\u8e72\u4e2a12\u4e2a\u5de6\u53f3\u6700\u591a\u3002\u6781\u9650\u4e0d\u77e5\u9053\uff0c\u4ee5\u4e3a\u8fd9\u8fb9\u6ca1\u6709\u5065\u8eab\u623f\u3002\u6211\u81ea\u5df1\u4e70\u7684\u7247\u5c31\u53ea\u5230100\u516c\u65a4\u3002\u73b0\u5728\u5176\u5b9e\u8fd8\u662f\u633a\u5fd9\u7684\u8bf4\u5b9e\u5728\u7684\uff0c\u6709\u65f6\u5019\u4e0b\u73ed\u56de\u6765\u4e5f\u786e\u5b9e\u4e0d\u60f3\u7ec3\uff0c\u4f46\u662f\u90fd\u8fd8\u662f\u575a\u6301\u4e0b\u6765\u4e86\u3002\u6bd5\u7adf\u6211\u5c31\u662f\u6b7b\u4e5f\u5f97\u662f\u4e00\u5177\u5f3a\u58ee\u7684\u5c38\u4f53\u3002\u518d\u5176\u6b21\uff0c\u5982\u679c\u4ee5\u540e\u88ab\u4f18\u5316\u7684\u65f6\u5019\uff0c\u88ab\u4fdd\u5b89\u62ac\u51fa\u53bb\u4e4b\u524d\u8bf4\u4e0d\u5b9a\u80fd\u591a\u6323\u624e\u51e0\u5206\u949f\u3002\u597d\u4e86\u5c31\u8fd9\u6837\u3002\u4e0b\u671f\uff0c\u7535\u53f0\u518d\u89c1\u3002","title":"\u534a\u540a\u5b50\u5de5\u7a0b\u5e08\u5065\u8eab\u6307\u5357"}]}